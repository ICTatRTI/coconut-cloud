!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:0/0}function r(n){return null===n?0/0:+n}function u(n){return!isNaN(n)}function i(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function o(n){return n.length}function a(n){for(var t=1;n*t%1;)t*=10;return t}function c(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function l(){this._=Object.create(null)}function s(n){return(n+="")===pa||n[0]===va?va+n:n}function f(n){return(n+="")[0]===va?n.slice(1):n}function h(n){return s(n)in this._}function g(n){return(n=s(n))in this._&&delete this._[n]}function p(){var n=[];for(var t in this._)n.push(f(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=da.length;r>e;++e){var u=da[e]+t;if(u in n)return u}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new l;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function S(){ta.event.preventDefault()}function k(){for(var n,t=ta.event;n=t.sourceEvent;)t=n;return t}function E(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=ta.event;u.target=n,ta.event=u,t[u.type].apply(e,r)}finally{ta.event=i}}},t}function A(n){return ya(n,_a),n}function N(n){return"function"==typeof n?n:function(){return Ma(n,this)}}function C(n){return"function"==typeof n?n:function(){return xa(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=ta.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?i:u}function q(n){return n.trim().replace(/\s+/g," ")}function L(n){return new RegExp("(?:^|\\s+)"+ta.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=T(n).map(D);var u=n.length;return"function"==typeof t?r:e}function D(n){var t=L(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",q(u+" "+n))):e.setAttribute("class",q(u.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e?t.createElementNS(e,n):t.createElement(n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=ta.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return ba(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function Z(n){return ya(n,Sa),n}function V(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function X(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,ra(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+ta.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),c=$;a>0&&(n=n.slice(0,a));var l=ka.get(n);return l&&(n=l,c=B),a?t?u:r:t?b:i}function $(n,t){return function(e){var r=ta.event;ta.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ta.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Aa,u="click"+r,i=ta.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ea&&(Ea="onselectstart"in e?!1:x(e.style,"userSelect")),Ea){var o=n(e).style,a=o[Ea];o[Ea]="none"}return function(n){if(i.on(r,null),Ea&&(o[Ea]=a),n){var t=function(){i.on(u,null)};i.on(u,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var u=r.createSVGPoint();if(0>Na){var i=t(n);if(i.scrollX||i.scrollY){r=ta.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Na=!(o.f||o.e),r.remove()}}return Na?(u.x=e.pageX,u.y=e.pageY):(u.x=e.clientX,u.y=e.clientY),u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}function G(){return ta.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nt(n){return n>1?0:-1>n?qa:Math.acos(n)}function tt(n){return n>1?Ra:-1>n?-Ra:Math.asin(n)}function et(n){return((n=Math.exp(n))-1/n)/2}function rt(n){return((n=Math.exp(n))+1/n)/2}function ut(n){return((n=Math.exp(2*n))-1)/(n+1)}function it(n){return(n=Math.sin(n/2))*n}function ot(){}function at(n,t,e){return this instanceof at?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof at?new at(n.h,n.s,n.l):bt(""+n,_t,at):new at(n,t,e)}function ct(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,new mt(u(n+120),u(n),u(n-120))}function lt(n,t,e){return this instanceof lt?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof lt?new lt(n.h,n.c,n.l):n instanceof ft?gt(n.l,n.a,n.b):gt((n=wt((n=ta.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new lt(n,t,e)}function st(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new ft(e,Math.cos(n*=Da)*t,Math.sin(n)*t)}function ft(n,t,e){return this instanceof ft?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof ft?new ft(n.l,n.a,n.b):n instanceof lt?st(n.h,n.c,n.l):wt((n=mt(n)).r,n.g,n.b):new ft(n,t,e)}function ht(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=pt(u)*Xa,r=pt(r)*$a,i=pt(i)*Ba,new mt(dt(3.2404542*u-1.5371385*r-.4985314*i),dt(-.969266*u+1.8760108*r+.041556*i),dt(.0556434*u-.2040259*r+1.0572252*i))}function gt(n,t,e){return n>0?new lt(Math.atan2(e,t)*Pa,Math.sqrt(t*t+e*e),n):new lt(0/0,0/0,n)}function pt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function vt(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function dt(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function mt(n,t,e){return this instanceof mt?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof mt?new mt(n.r,n.g,n.b):bt(""+n,mt,ct):new mt(n,t,e)}function yt(n){return new mt(n>>16,n>>8&255,255&n)}function Mt(n){return yt(n)+""}function xt(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function bt(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(kt(u[0]),kt(u[1]),kt(u[2]))}return(i=Ga.get(n.toLowerCase()))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function _t(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=0/0,u=c>0&&1>c?0:r),new at(r,u,c)}function wt(n,t,e){n=St(n),t=St(t),e=St(e);var r=vt((.4124564*n+.3575761*t+.1804375*e)/Xa),u=vt((.2126729*n+.7151522*t+.072175*e)/$a),i=vt((.0193339*n+.119192*t+.9503041*e)/Ba);return ft(116*u-16,500*(r-u),200*(u-i))}function St(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function kt(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function Et(n){return"function"==typeof n?n:function(){return n}}function At(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Nt(t,e,n,r)}}function Nt(n,t,e,r){function u(){var n,t=c.status;if(!t&&zt(c)||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return void o.error.call(i,r)}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=ta.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=ta.event;ta.event=n;try{o.progress.call(i,c)}finally{ta.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(l=n,i):l},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ra(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var s in a)c.setRequestHeader(s,a[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},ta.rebind(i,o,"on"),null==r?i:i.get(Ct(r))}function Ct(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function zt(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qt(){var n=Lt(),t=Tt()-n;t>24?(isFinite(t)&&(clearTimeout(tc),tc=setTimeout(qt,t)),nc=0):(nc=1,rc(qt))}function Lt(){var n=Date.now();for(ec=Ka;ec;)n>=ec.t&&(ec.f=ec.c(n-ec.t)),ec=ec.n;return n}function Tt(){for(var n,t=Ka,e=1/0;t;)t.f?t=n?n.n=t.n:Ka=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Qa=n,e}function Rt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Dt(n,t){var e=Math.pow(10,3*ga(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Pt(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],o=0,a=r[0],c=0;u>0&&a>0&&(c+a+1>t&&(a=Math.max(1,t-c)),i.push(n.substring(u-=a,u+a)),!((c+=a+1)>t));)a=r[o=(o+1)%r.length];return i.reverse().join(e)}:y;return function(n){var e=ic.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",c=e[4]||"",l=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===c&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=oc.get(g)||Ut;var M=l&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>p){var c=ta.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=y?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!l&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===o?u+n+k:">"===o?k+u+n:"^"===o?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}function Ut(n){return n+""}function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ft(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new cc(e-1)),1),e}function i(n,e){return t(n=new cc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{cc=jt;var r=new jt;return r._=n,o(r,t,e)}finally{cc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Ht(n);return c.floor=c,c.round=Ht(r),c.ceil=Ht(u),c.offset=Ht(i),c.range=a,n}function Ht(n){return function(t,e){try{cc=jt;var r=new jt;return r._=t,n(r,e)._}finally{cc=Date}}}function Ot(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(c,a)),null!=(u=sc[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=N[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),o.push(e),c=a+1);return o.push(n.slice(c,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&cc!==jt,o=new(i?jt:cc);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,l=e.length;c>a;){if(r>=l)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=C[o in sc?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.slice(e));return r?(n.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,N.c.toString(),t,r)}function c(n,t,r){return e(n,N.x.toString(),t,r)}function l(n,t,r){return e(n,N.X.toString(),t,r)}function s(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{cc=jt;var t=new cc;return t._=n,r(t)}finally{cc=Date}}var r=t(n);return e.parse=function(n){try{cc=jt;var t=r.parse(n);return t&&t._}finally{cc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ae;var M=ta.map(),x=Yt(v),b=Zt(v),_=Yt(d),w=Zt(d),S=Yt(m),k=Zt(m),E=Yt(y),A=Zt(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var N={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return It(n.getDate(),t,2)},e:function(n,t){return It(n.getDate(),t,2)},H:function(n,t){return It(n.getHours(),t,2)},I:function(n,t){return It(n.getHours()%12||12,t,2)},j:function(n,t){return It(1+ac.dayOfYear(n),t,3)},L:function(n,t){return It(n.getMilliseconds(),t,3)},m:function(n,t){return It(n.getMonth()+1,t,2)},M:function(n,t){return It(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return It(n.getSeconds(),t,2)},U:function(n,t){return It(ac.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return It(ac.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return It(n.getFullYear()%100,t,2)},Y:function(n,t){return It(n.getFullYear()%1e4,t,4)},Z:ie,"%":function(){return"%"}},C={a:r,A:u,b:i,B:o,c:a,d:Qt,e:Qt,H:te,I:te,j:ne,L:ue,m:Kt,M:ee,p:s,S:re,U:Xt,w:Vt,W:$t,x:c,X:l,y:Wt,Y:Bt,Z:Jt,"%":oe};return t}function It(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Yt(n){return new RegExp("^(?:"+n.map(ta.requote).join("|")+")","i")}function Zt(n){for(var t=new l,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Vt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Xt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function $t(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Bt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Wt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.y=Gt(+r[0]),e+r[0].length):-1}function Jt(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Gt(n){return n+(n>68?1900:2e3)}function Kt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Qt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function ne(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function te(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ee(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function re(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ue(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ie(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=ga(t)/60|0,u=ga(t)%60;return e+It(r,"0",2)+It(u,"0",2)}function oe(n,t,e){hc.lastIndex=0;var r=hc.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ae(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ce(){}function le(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function se(n,t){n&&dc.hasOwnProperty(n.type)&&dc[n.type](n,t)}function fe(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function he(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)fe(n[e],t,1);t.polygonEnd()}function ge(){function n(n,t){n*=Da,t=t*Da/2+qa/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),l=Math.sin(t),s=i*l,f=u*c+s*Math.cos(a),h=s*o*Math.sin(a);yc.add(Math.atan2(h,f)),r=n,u=c,i=l}var t,e,r,u,i;Mc.point=function(o,a){Mc.point=n,r=(t=o)*Da,u=Math.cos(a=(e=a)*Da/2+qa/4),i=Math.sin(a)},Mc.lineEnd=function(){n(t,e)}}function pe(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function ve(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function de(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function me(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ye(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Me(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function xe(n){return[Math.atan2(n[1],n[0]),tt(n[2])]}function be(n,t){return ga(n[0]-t[0])<Ca&&ga(n[1]-t[1])<Ca}function _e(n,t){n*=Da;var e=Math.cos(t*=Da);we(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function we(n,t,e){++xc,_c+=(n-_c)/xc,wc+=(t-wc)/xc,Sc+=(e-Sc)/xc}function Se(){function n(n,u){n*=Da;var i=Math.cos(u*=Da),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);bc+=l,kc+=l*(t+(t=o)),Ec+=l*(e+(e=a)),Ac+=l*(r+(r=c)),we(t,e,r)}var t,e,r;qc.point=function(u,i){u*=Da;var o=Math.cos(i*=Da);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),qc.point=n,we(t,e,r)}}function ke(){qc.point=_e}function Ee(){function n(n,t){n*=Da;var e=Math.cos(t*=Da),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=u*c-i*a,s=i*o-r*c,f=r*a-u*o,h=Math.sqrt(l*l+s*s+f*f),g=r*o+u*a+i*c,p=h&&-nt(g)/h,v=Math.atan2(h,g);Nc+=p*l,Cc+=p*s,zc+=p*f,bc+=v,kc+=v*(r+(r=o)),Ec+=v*(u+(u=a)),Ac+=v*(i+(i=c)),we(r,u,i)}var t,e,r,u,i;qc.point=function(o,a){t=o,e=a,qc.point=n,o*=Da;var c=Math.cos(a*=Da);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),we(r,u,i)},qc.lineEnd=function(){n(t,e),qc.lineEnd=ke,qc.point=_e}}function Ae(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function Ne(){return!0}function Ce(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(be(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return void u.lineEnd()}var c=new qe(e,n,null,!0),l=new qe(e,null,c,!1);c.o=l,i.push(c),o.push(l),c=new qe(r,n,null,!1),l=new qe(r,null,c,!0),c.o=l,i.push(c),o.push(l)}}),o.sort(t),ze(i),ze(o),i.length){for(var a=0,c=e,l=o.length;l>a;++a)o[a].e=c=!c;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,l=s.length;l>a;++a)u.point((f=s[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var a=s.length-1;a>=0;--a)u.point((f=s[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function ze(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function qe(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Le(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function l(){y.point=o,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,o=-1;if(r>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Te))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:l,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=l,g=ta.merge(g);var n=Fe(m,p);g.length?(b||(i.polygonStart(),b=!0),Ce(g,De,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Re(),x=t(M),b=!1;return y}}function Te(n){return n.length>1}function Re(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function De(n,t){return((n=n.x)[0]<0?n[1]-Ra-Ca:Ra-n[1])-((t=t.x)[0]<0?t[1]-Ra-Ca:Ra-t[1])}function Pe(n){var t,e=0/0,r=0/0,u=0/0;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?qa:-qa,c=ga(i-e);ga(c-qa)<Ca?(n.point(e,r=(r+o)/2>0?Ra:-Ra),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=qa&&(ga(e-u)<Ca&&(e-=u*Ca),ga(i-a)<Ca&&(i-=a*Ca),r=Ue(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=0/0},clean:function(){return 2-t}}}function Ue(n,t,e,r){var u,i,o=Math.sin(n-e);return ga(o)>Ca?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function je(n,t,e,r){var u;if(null==n)u=e*Ra,r.point(-qa,u),r.point(0,u),r.point(qa,u),r.point(qa,0),r.point(qa,-u),r.point(0,-u),r.point(-qa,-u),r.point(-qa,0),r.point(-qa,u);else if(ga(n[0]-t[0])>Ca){var i=n[0]<t[0]?qa:-qa;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function Fe(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;yc.reset();for(var a=0,c=t.length;c>a;++a){var l=t[a],s=l.length;if(s)for(var f=l[0],h=f[0],g=f[1]/2+qa/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=l[d];var m=n[0],y=n[1]/2+qa/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=b>=0?1:-1,w=_*b,S=w>qa,k=p*M;if(yc.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*La:b,S^h>=e^m>=e){var E=de(pe(f),pe(n));Me(E);var A=de(u,E);Me(A);var N=(S^b>=0?-1:1)*tt(A[2]);(r>N||r===N&&(E[0]||E[1]))&&(o+=S^b>=0?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(-Ca>i||Ca>i&&0>yc)^1&o}function He(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?qa:-qa),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(be(e,g)||be(p,g))&&(p[0]+=Ca,p[1]+=Ca,v=t(p[0],p[1]))),v!==c)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(s=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&be(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return s|(l&&c)<<1}}}function r(n,t,e){var r=pe(n),u=pe(t),o=[1,0,0],a=de(r,u),c=ve(a,a),l=a[0],s=c-l*l;if(!s)return!e&&n;var f=i*c/s,h=-i*l/s,g=de(o,a),p=ye(o,f),v=ye(a,h);me(p,v);var d=g,m=ve(p,d),y=ve(d,d),M=m*m-y*(ve(p,p)-1);if(!(0>M)){var x=Math.sqrt(M),b=ye(d,(-m-x)/y);if(me(b,p),b=xe(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(_=w,w=S,S=_);var A=S-w,N=ga(A-qa)<Ca,C=N||Ca>A;if(!N&&k>E&&(_=k,k=E,E=_),C?N?k+E>0^b[1]<(ga(b[0]-w)<Ca?k:E):k<=b[1]&&b[1]<=E:A>qa^(w<=b[0]&&b[0]<=S)){var z=ye(d,(-m+x)/y);return me(z,p),[b,xe(z)]}}}function u(t,e){var r=o?n:qa-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=ga(i)>Ca,c=gr(n,6*Da);return Le(t,e,c,o?[0,-n]:[-qa,n-qa])}function Oe(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,l=o.y,s=a.x,f=a.y,h=0,g=1,p=s-c,v=f-l;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-l,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-l,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:l+h*v}),1>g&&(u.b={x:c+g*p,y:l+g*v}),u}}}}}}function Ie(n,t,e,r){function u(r,u){return ga(r[0]-n)<Ca?u>0?0:3:ga(r[0]-e)<Ca?u>0?2:1:ga(r[1]-t)<Ca?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,l=a[0];c>o;++o)i=a[o],l[1]<=r?i[1]>r&&Q(l,i,n)>0&&++t:i[1]<=r&&Q(l,i,n)<0&&--t,l=i;return 0!==t}function l(i,a,c,l){var s=0,f=0;if(null==i||(s=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do l.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+c+4)%4)!==f)}else l.point(a[0],a[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&a.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,b=_=0/0}function g(){v&&(p(y,M),x&&w&&A.rejoin(),v.push(A.buffer())),C.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-Tc,Math.min(Tc,n)),t=Math.max(-Tc,Math.min(Tc,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,M=t,x=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};N(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,E=a,A=Re(),N=Oe(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=A,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=ta.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),l(null,null,1,a),a.lineEnd()),u&&Ce(v,i,t,l,a),a.polygonEnd()),v=d=m=null}};return C}}function Ye(n){var t=0,e=qa/3,r=ir(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*qa/180,e=n[1]*qa/180):[t/qa*180,e/qa*180]},u}function Ze(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,tt((i-(n*n+e*e)*u*u)/(2*u))]},e}function Ve(){function n(n,t){Dc+=u*n-r*t,r=n,u=t}var t,e,r,u;Hc.point=function(i,o){Hc.point=n,t=r=i,e=u=o},Hc.lineEnd=function(){n(t,e)}}function Xe(n,t){Pc>n&&(Pc=n),n>jc&&(jc=n),Uc>t&&(Uc=t),t>Fc&&(Fc=t)}function $e(){function n(n,t){o.push("M",n,",",t,i)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function u(){o.push("Z")}var i=Be(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=Be(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Be(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function We(n,t){_c+=n,wc+=t,++Sc}function Je(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);kc+=o*(t+n)/2,Ec+=o*(e+r)/2,Ac+=o,We(t=n,e=r)}var t,e;Ic.point=function(r,u){Ic.point=n,We(t=r,e=u)}}function Ge(){Ic.point=We}function Ke(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);kc+=o*(r+n)/2,Ec+=o*(u+t)/2,Ac+=o,o=u*n-r*t,Nc+=o*(r+n),Cc+=o*(u+t),zc+=3*o,We(r=n,u=t)}var t,e,r,u;Ic.point=function(i,o){Ic.point=n,We(t=r=i,e=u=o)},Ic.lineEnd=function(){n(t,e)}}function Qe(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,La)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:b};return a}function nr(n){function t(n){return(a?r:e)(n)}function e(t){return rr(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=0/0,S.point=i,t.lineStart()}function i(e,r){var i=pe([e,r]),o=n(e,r);u(M,x,y,b,_,w,M=o[0],x=o[1],y=e,b=i[0],_=i[1],w=i[2],a,t),t.point(M,x)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=l,S.lineEnd=s}function l(n,t){i(f=n,h=t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c
},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,l,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(x>4*i&&d--){var b=a+g,_=c+p,w=l+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),E=ga(ga(w)-1)<Ca||ga(r-h)<Ca?(r+h)/2:Math.atan2(_,b),A=n(E,k),N=A[0],C=A[1],z=N-t,q=C-e,L=M*z-y*q;(L*L/x>i||ga((y*z+M*q)/x-.5)>.3||o>a*g+c*p+l*v)&&(u(t,e,r,a,c,l,N,C,E,b/=S,_/=S,w,d,m),m.point(N,C),u(N,C,E,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*Da),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function tr(n){var t=nr(function(t,e){return n([t*Pa,e*Pa])});return function(n){return or(t(n))}}function er(n){this.stream=n}function rr(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ur(n){return ir(function(){return n})()}function ir(n){function t(n){return n=a(n[0]*Da,n[1]*Da),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Pa,n[1]*Pa]}function r(){a=Ae(o=lr(m,M,x),i);var n=i(v,d);return c=g-n[0]*h,l=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,o,a,c,l,s,f=nr(function(n,t){return n=i(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,M=0,x=0,b=Lc,_=y,w=null,S=null;return t.stream=function(n){return s&&(s.valid=!1),s=or(b(o,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Lc):He((w=+n)*Da),u()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Ie(n[0][0],n[0][1],n[1][0],n[1][1]):y,u()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Da,d=n[1]%360*Da,r()):[v*Pa,d*Pa]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Da,M=n[1]%360*Da,x=n.length>2?n[2]%360*Da:0,r()):[m*Pa,M*Pa,x*Pa]},ta.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function or(n){return rr(n,function(t,e){n.point(t*Da,e*Da)})}function ar(n,t){return[n,t]}function cr(n,t){return[n>qa?n-La:-qa>n?n+La:n,t]}function lr(n,t,e){return n?t||e?Ae(fr(n),hr(t,e)):fr(n):t||e?hr(t,e):cr}function sr(n){return function(t,e){return t+=n,[t>qa?t-La:-qa>t?t+La:t,e]}}function fr(n){var t=sr(n);return t.invert=sr(-n),t}function hr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*r+a*u;return[Math.atan2(c*i-s*o,a*r-l*u),tt(s*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*i-c*o;return[Math.atan2(c*i+l*o,a*r+s*u),tt(s*r-a*u)]},e}function gr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=pr(e,u),i=pr(e,i),(o>0?i>u:u>i)&&(u+=o*La)):(u=n+o*La,i=n-.5*c);for(var l,s=u;o>0?s>i:i>s;s-=c)a.point((l=xe([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],l[1])}}function pr(n,t){var e=pe(t);e[0]-=n,Me(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ca)%(2*Math.PI)}function vr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function dr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function mr(n){return n.source}function yr(n){return n.target}function Mr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),l=u*Math.sin(n),s=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(it(r-t)+u*o*it(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*s,u=e*l+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Pa,Math.atan2(o,Math.sqrt(r*r+u*u))*Pa]}:function(){return[n*Pa,t*Pa]};return p.distance=h,p}function xr(){function n(n,u){var i=Math.sin(u*=Da),o=Math.cos(u),a=ga((n*=Da)-t),c=Math.cos(a);Yc+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Zc.point=function(u,i){t=u*Da,e=Math.sin(i*=Da),r=Math.cos(i),Zc.point=n},Zc.lineEnd=function(){Zc.point=Zc.lineEnd=b}}function br(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function _r(n,t){function e(n,t){o>0?-Ra+Ca>t&&(t=-Ra+Ca):t>Ra-Ca&&(t=Ra-Ca);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(qa/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Ra]},e):Sr}function wr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return ga(u)<Ca?ar:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function Sr(n,t){return[n,Math.log(Math.tan(qa/4+t/2))]}function kr(n){var t,e=ur(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=qa*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Er(n,t){return[Math.log(Math.tan(qa/4+t/2)),-n]}function Ar(n){return n[0]}function Nr(n){return n[1]}function Cr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function zr(n,t){return n[0]-t[0]||n[1]-t[1]}function qr(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Lr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],l=e[1],s=t[1]-c,f=r[1]-l,h=(a*(c-l)-f*(u-i))/(f*o-a*s);return[u+h*o,c+h*s]}function Tr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Rr(){tu(this),this.edge=this.site=this.circle=null}function Dr(n){var t=el.pop()||new Rr;return t.site=n,t}function Pr(n){Xr(n),Qc.remove(n),el.push(n),tu(n)}function Ur(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Pr(n);for(var c=i;c.circle&&ga(e-c.circle.x)<Ca&&ga(r-c.circle.cy)<Ca;)i=c.P,a.unshift(c),Pr(c),c=i;a.unshift(c),Xr(c);for(var l=o;l.circle&&ga(e-l.circle.x)<Ca&&ga(r-l.circle.cy)<Ca;)o=l.N,a.push(l),Pr(l),l=o;a.push(l),Xr(l);var s,f=a.length;for(s=1;f>s;++s)l=a[s],c=a[s-1],Kr(l.edge,c.site,l.site,u);c=a[0],l=a[f-1],l.edge=Jr(c.site,l.site,null,u),Vr(c),Vr(l)}function jr(n){for(var t,e,r,u,i=n.x,o=n.y,a=Qc._;a;)if(r=Fr(a,o)-i,r>Ca)a=a.L;else{if(u=i-Hr(a,o),!(u>Ca)){r>-Ca?(t=a.P,e=a):u>-Ca?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Dr(n);if(Qc.insert(t,c),t||e){if(t===e)return Xr(t),e=Dr(t.site),Qc.insert(c,e),c.edge=e.edge=Jr(t.site,c.site),Vr(t),void Vr(e);if(!e)return void(c.edge=Jr(t.site,c.site));Xr(t),Xr(e);var l=t.site,s=l.x,f=l.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};Kr(e.edge,l,p,x),c.edge=Jr(l,n,null,x),e.edge=Jr(n,p,null,x),Vr(t),Vr(e)}}function Fr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var s=a-r,f=1/i-1/l,h=s/l;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*l)-c+l/2+u-i/2)))/f+r:(r+a)/2}function Hr(n,t){var e=n.N;if(e)return Fr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Or(n){this.site=n,this.edges=[]}function Ir(n){for(var t,e,r,u,i,o,a,c,l,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=Kc,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)s=a[o].end(),r=s.x,u=s.y,l=a[++o%c].start(),t=l.x,e=l.y,(ga(r-t)>Ca||ga(u-e)>Ca)&&(a.splice(o,0,new Qr(Gr(i.site,s,ga(r-f)<Ca&&p-u>Ca?{x:f,y:ga(t-f)<Ca?e:p}:ga(u-p)<Ca&&h-r>Ca?{x:ga(e-p)<Ca?t:h,y:p}:ga(r-h)<Ca&&u-g>Ca?{x:h,y:ga(t-h)<Ca?e:g}:ga(u-g)<Ca&&r-f>Ca?{x:ga(e-g)<Ca?t:f,y:g}:null),i.site,null)),++c)}function Yr(n,t){return t.angle-n.angle}function Zr(){tu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,l=r.y-a,s=i.x-o,f=i.y-a,h=2*(c*f-l*s);if(!(h>=-za)){var g=c*c+l*l,p=s*s+f*f,v=(f*g-l*p)/h,d=(c*p-s*g)/h,f=d+a,m=rl.pop()||new Zr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=tl._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}tl.insert(y,m),y||(nl=m)}}}}function Xr(n){var t=n.circle;t&&(t.P||(nl=t.N),tl.remove(t),rl.push(t),tu(t),n.circle=null)}function $r(n){for(var t,e=Gc,r=Oe(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Br(t,n)||!r(t)||ga(t.a.x-t.b.x)<Ca&&ga(t.a.y-t.b.y)<Ca)&&(t.a=t.b=null,e.splice(u,1))}function Br(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=l)return}else i={x:d,y:c};e={x:d,y:l}}else{if(i){if(i.y<c)return}else i={x:d,y:l};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else{if(i){if(i.y<c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Wr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Jr(n,t,e,r){var u=new Wr(n,t);return Gc.push(u),e&&Kr(u,n,t,e),r&&Kr(u,t,n,r),Kc[n.i].edges.push(new Qr(u,n,t)),Kc[t.i].edges.push(new Qr(u,t,n)),u}function Gr(n,t,e){var r=new Wr(n,null);return r.a=t,r.b=e,Gc.push(r),r}function Kr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Qr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function nu(){this._=null}function tu(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function eu(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ru(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function uu(n){for(;n.L;)n=n.L;return n}function iu(n,t){var e,r,u,i=n.sort(ou).pop();for(Gc=[],Kc=new Array(n.length),Qc=new nu,tl=new nu;;)if(u=nl,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(Kc[i.i]=new Or(i),jr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Ur(u.arc)}t&&($r(t),Ir(t));var o={cells:Kc,edges:Gc};return Qc=tl=Gc=Kc=null,o}function ou(n,t){return t.y-n.y||t.x-n.x}function au(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function cu(n){return n.x}function lu(n){return n.y}function su(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fu(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&fu(n,c[0],e,r,o,a),c[1]&&fu(n,c[1],o,r,u,a),c[2]&&fu(n,c[2],e,a,o,i),c[3]&&fu(n,c[3],o,a,u,i)}}function hu(n,t,e,r,u,i,o){var a,c=1/0;return function l(n,s,f,h,g){if(!(s>i||f>o||r>h||u>g)){if(p=n.point){var p,v=t-n.x,d=e-n.y,m=v*v+d*d;if(c>m){var y=Math.sqrt(c=m);r=t-y,u=e-y,i=t+y,o=e+y,a=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:l(n,s,f,x,b);break;case 1:l(n,x,f,h,b);break;case 2:l(n,s,b,x,g);break;case 3:l(n,x,b,h,g)}}}(n,r,u,i,o),a}function gu(n,t){n=ta.rgb(n),t=ta.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return"#"+xt(Math.round(e+i*n))+xt(Math.round(r+o*n))+xt(Math.round(u+a*n))}}function pu(n,t){var e,r={},u={};for(e in n)e in t?r[e]=mu(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function vu(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function du(n,t){var e,r,u,i=il.lastIndex=ol.lastIndex=0,o=-1,a=[],c=[];for(n+="",t+="";(e=il.exec(n))&&(r=ol.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),a[o]?a[o]+=u:a[++o]=u),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:vu(e,r)})),i=ol.lastIndex;return i<t.length&&(u=t.slice(i),a[o]?a[o]+=u:a[++o]=u),a.length<2?c[0]?(t=c[0].x,function(n){return t(n)+""}):function(){return t}:(t=c.length,function(n){for(var e,r=0;t>r;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function mu(n,t){for(var e,r=ta.interpolators.length;--r>=0&&!(e=ta.interpolators[r](n,t)););return e}function yu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(mu(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function Mu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function xu(n){return function(t){return 1-n(1-t)}}function bu(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function _u(n){return n*n}function wu(n){return n*n*n}function Su(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function ku(n){return function(t){return Math.pow(t,n)}}function Eu(n){return 1-Math.cos(n*Ra)}function Au(n){return Math.pow(2,10*(n-1))}function Nu(n){return 1-Math.sqrt(1-n*n)}function Cu(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/La*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*La/t)}}function zu(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function qu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Lu(n,t){n=ta.hcl(n),t=ta.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return st(e+i*n,r+o*n,u+a*n)+""}}function Tu(n,t){n=ta.hsl(n),t=ta.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return ct(e+i*n,r+o*n,u+a*n)+""}}function Ru(n,t){n=ta.lab(n),t=ta.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ht(e+i*n,r+o*n,u+a*n)+""}}function Du(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Pu(n){var t=[n.a,n.b],e=[n.c,n.d],r=ju(t),u=Uu(t,e),i=ju(Fu(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Pa,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Pa:0}function Uu(n,t){return n[0]*t[0]+n[1]*t[1]}function ju(n){var t=Math.sqrt(Uu(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Fu(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Hu(n,t){var e,r=[],u=[],i=ta.transform(n),o=ta.transform(t),a=i.translate,c=o.translate,l=i.rotate,s=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:vu(a[0],c[0])},{i:3,x:vu(a[1],c[1])})):r.push(c[0]||c[1]?"translate("+c+")":""),l!=s?(l-s>180?s+=360:s-l>180&&(l+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:vu(l,s)})):s&&r.push(r.pop()+"rotate("+s+")"),f!=h?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:vu(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:vu(g[0],p[0])},{i:e-2,x:vu(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function Ou(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Iu(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Yu(n){for(var t=n.source,e=n.target,r=Vu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Zu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Vu(n,t){if(n===t)return n;for(var e=Zu(n),r=Zu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function Xu(n){n.fixed|=2}function $u(n){n.fixed&=-7}function Bu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Wu(n){n.fixed&=-5}function Ju(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Ju(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,u+=l*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Gu(n,t){return ta.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=ri,n}function Ku(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function Qu(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,o=-1;++o<u;)e.push(i[o]);for(;null!=(n=r.pop());)t(n)}function ni(n){return n.children}function ti(n){return n.value}function ei(n,t){return t.value-n.value}function ri(n){return ta.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function ui(n){return n.x}function ii(n){return n.y}function oi(n,t,e){n.y0=t,n.y=e}function ai(n){return ta.range(n.length)}function ci(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function li(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function si(n){return n.reduce(fi,0)}function fi(n,t){return n+t[1]}function hi(n,t){return gi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function gi(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function pi(n){return[ta.min(n),ta.max(n)]}function vi(n,t){return n.value-t.value}function di(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function mi(n,t){n._pack_next=t,t._pack_prev=n}function yi(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function Mi(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(l=e.length)){var e,r,u,i,o,a,c,l,s=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(xi),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(u=e[1],u.x=u.r,u.y=0,t(u),l>2))for(i=e[2],wi(r,u,i),t(i),di(r,i),r._pack_prev=i,di(i,u),u=r._pack_next,o=3;l>o;o++){wi(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(yi(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!yi(c,i);c=c._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?mi(r,u=a):mi(r=c,u),o--):(di(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(o=0;l>o;o++)i=e[o],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(bi)}}function xi(n){n._pack_next=n._pack_prev=n}function bi(n){delete n._pack_next,delete n._pack_prev}function _i(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)_i(u[i],t,e,r)}function wi(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+l*i,e.y=n.y+c*i-l*u}else e.x=n.x+r,e.y=n.y}function Si(n,t){return n.parent==t.parent?1:2}function ki(n){var t=n.children;return t.length?t[0]:n.t}function Ei(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ai(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Ni(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Ci(n,t,e){return n.a.parent===t.parent?n.a:e}function zi(n){return 1+ta.max(n,function(n){return n.y})}function qi(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Li(n){var t=n.children;return t&&t.length?Li(t[0]):n}function Ti(n){var t,e=n.children;return e&&(t=e.length)?Ti(e[t-1]):n}function Ri(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Di(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Pi(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Ui(n){return n.rangeExtent?n.rangeExtent():Pi(n.range())}function ji(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Fi(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Hi(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ml}function Oi(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=ta.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Ii(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Oi:ji,c=r?Iu:Ou;return o=u(n,t,c,e),a=u(t,n,c,mu),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Du)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Xi(n,t)},i.tickFormat=function(t,e){return $i(n,t,e)},i.nice=function(t){return Zi(n,t),u()},i.copy=function(){return Ii(n,t,e,r)},u()}function Yi(n,t){return ta.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Zi(n,t){return Fi(n,Hi(Vi(n,t)[2]))}function Vi(n,t){null==t&&(t=10);var e=Pi(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Xi(n,t){return ta.range.apply(ta,Vi(n,t))}function $i(n,t,e){var r=Vi(n,t);if(e){var u=ic.exec(e);if(u.shift(),"s"===u[8]){var i=ta.formatPrefix(Math.max(ga(r[0]),ga(r[1])));return u[7]||(u[7]="."+Bi(i.scale(r[2]))),u[8]="f",e=ta.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+Wi(u[8],r)),e=u.join("")}else e=",."+Bi(r[2])+"f";return ta.format(e)}function Bi(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Wi(n,t){var e=Bi(t[2]);return n in yl?Math.abs(e-Bi(Math.max(ga(t[0]),ga(t[1]))))+ +("e"!==n):e-2*("%"===n)}function Ji(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=Fi(r.map(u),e?Math:xl);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=Pi(r),o=[],a=n[0],c=n[1],l=Math.floor(u(a)),s=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(s-l)){if(e){for(;s>l;l++)for(var h=1;f>h;h++)o.push(i(l)*h);o.push(i(l))}else for(o.push(i(l));l++<s;)for(var h=f-1;h>0;h--)o.push(i(l)*h);for(l=0;o[l]<a;l++);for(s=o.length;o[s-1]>c;s--);o=o.slice(l,s)}return o},o.tickFormat=function(n,t){if(!arguments.length)return Ml;arguments.length<2?t=Ml:"function"!=typeof t&&(t=ta.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):""}},o.copy=function(){return Ji(n.copy(),t,e,r)},Yi(o,n)}function Gi(n,t,e){function r(t){return n(u(t))}var u=Ki(t),i=Ki(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Xi(e,n)},r.tickFormat=function(n,t){return $i(e,n,t)},r.nice=function(n){return r.domain(Zi(e,n))},r.exponent=function(o){return arguments.length?(u=Ki(t=o),i=Ki(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Gi(n.copy(),t,e)},Yi(r,n)}function Ki(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function Qi(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]}function r(t,e){return ta.range(n.length).map(function(n){return t+e*n})}var u,i,o;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new l;for(var i,o=-1,a=r.length;++o<a;)u.has(i=r[o])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,o=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=(c+l)/2,0):(l-c)/(n.length-1+a);return i=r(c+s*a/2,s),o=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=l=Math.round((c+l)/2),0):(l-c)/(n.length-1+a)|0;return i=r(c+Math.round(s*a/2+(l-c-(n.length-1+a)*s)/2),s),o=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=(f-s)/(n.length-a+2*c);return i=r(s+h*c,h),l&&i.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=Math.floor((f-s)/(n.length-a+2*c));return i=r(s+Math.round((f-s-(n.length-a)*h)/2),h),l&&i.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Pi(t.a[0])},e.copy=function(){return Qi(n,t)},e.domain(n)}function no(n,t){function i(){var e=0,r=t.length;for(a=[];++e<r;)a[e-1]=ta.quantile(n,e/r);return o}function o(n){return isNaN(n=+n)?void 0:t[ta.bisect(a,n)]}var a;return o.domain=function(t){return arguments.length?(n=t.map(r).filter(u).sort(e),i()):n},o.range=function(n){return arguments.length?(t=n,i()):t},o.quantiles=function(){return a},o.invertExtent=function(e){return e=t.indexOf(e),0>e?[0/0,0/0]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},o.copy=function(){return no(n,t)},i()}function to(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?0/0:t/i+n,[t,t+1/i]},r.copy=function(){return to(n,t,e)},u()}function eo(n,t){function e(e){return e>=e?t[ta.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return eo(n,t)},e}function ro(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Xi(n,t)},t.tickFormat=function(t,e){return $i(n,t,e)},t.copy=function(){return ro(n)},t}function uo(){return 0}function io(n){return n.innerRadius}function oo(n){return n.outerRadius}function ao(n){return n.startAngle}function co(n){return n.endAngle}function lo(n){return n&&n.padAngle}function so(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function fo(n,t,e,r,u){var i=n[0]-t[0],o=n[1]-t[1],a=(u?r:-r)/Math.sqrt(i*i+o*o),c=a*o,l=-a*i,s=n[0]+c,f=n[1]+l,h=t[0]+c,g=t[1]+l,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(0>m?-1:1)*Math.sqrt(M*M*y-x*x),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,E=_-p,A=w-v,N=S-p,C=k-v;return E*E+A*A>N*N+C*C&&(_=S,w=k),[[_-c,w-l],[_*e/M,w*e/M]]}function ho(n){function t(t){function o(){l.push("M",i(n(s),a))}for(var c,l=[],s=[],f=-1,h=t.length,g=Et(e),p=Et(r);++f<h;)u.call(this,c=t[f],f)?s.push([+g.call(this,c,f),+p.call(this,c,f)]):s.length&&(o(),s=[]);return s.length&&o(),l.length?l.join(""):null}var e=Ar,r=Nr,u=Ne,i=go,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?i=n:(i=El.get(n)||go).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function go(n){return n.join("L")}function po(n){return go(n)+"Z"}function vo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function mo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function yo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function Mo(n,t){return n.length<4?go(n):n[1]+_o(n.slice(1,-1),wo(n,t))}function xo(n,t){return n.length<3?go(n):n[0]+_o((n.push(n[0]),n),wo([n[n.length-2]].concat(n,[n[1]]),t))}function bo(n,t){return n.length<3?go(n):n[0]+_o(n,wo(n,t))}function _o(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return go(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+="C"+(u[0]+o[0])+","+(u[1]+o[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,c++)i=n[c],a=t[l],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(e){var s=n[c];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+s[0]+","+s[1]}return r}function wo(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function So(n){if(n.length<3)return go(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,",",i,"L",No(Cl,o),",",No(Cl,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Co(c,o,a);return n.pop(),c.push("L",r),c.join("")}function ko(n){if(n.length<4)return go(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(No(Cl,i)+","+No(Cl,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),Co(e,i,o);return e.join("")}function Eo(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[No(Cl,o),",",No(Cl,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Co(t,o,a);return t.join("")}function Ao(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],u=l/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return So(n)}function No(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Co(n,t,e){n.push("C",No(Al,t),",",No(Al,e),",",No(Nl,t),",",No(Nl,e),",",No(Cl,t),",",No(Cl,e))}function zo(n,t){return(t[1]-n[1])/(t[0]-n[0])}function qo(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=zo(u,i);++t<e;)r[t]=(o+(o=zo(u=i,i=n[t+1])))/2;return r[t]=o,r}function Lo(n){for(var t,e,r,u,i=[],o=qo(n),a=-1,c=n.length-1;++a<c;)t=zo(n[a],n[a+1]),ga(t)<Ca?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function To(n){return n.length<3?go(n):n[0]+_o(n,Lo(n))}function Ro(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]-Ra,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Do(n){function t(t){function c(){v.push("M",a(n(m),f),s,l(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=Et(e),b=Et(u),_=e===r?function(){return g}:Et(r),w=u===i?function(){return p}:Et(i);++y<M;)o.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(""):null}var e=Ar,r=Ar,u=0,i=Nr,o=Ne,a=go,c=a.key,l=a,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r
},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=El.get(n)||go).key,l=a.reverse||a,s=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Po(n){return n.radius}function Uo(n){return[n.x,n.y]}function jo(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Ra;return[e*Math.cos(r),e*Math.sin(r)]}}function Fo(){return 64}function Ho(){return"circle"}function Oo(n){var t=Math.sqrt(n/qa);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Io(n){return function(){var t,e;(t=this[n])&&(e=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Yo(n,t,e){return ya(n,Pl),n.namespace=t,n.id=e,n}function Zo(n,t,e,r){var u=n.id,i=n.namespace;return Y(n,"function"==typeof e?function(n,o,a){n[i][u].tween.set(t,r(e.call(n,n.__data__,o,a)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Vo(n){return null==n&&(n=""),function(){this.textContent=n}}function Xo(n){return null==n?"__transition__":"__transition_"+n+"__"}function $o(n,t,e,r,u){var i=n[e]||(n[e]={active:0,count:0}),o=i[r];if(!o){var a=u.time;o=i[r]={tween:new l,time:a,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++i.count,ta.timer(function(u){function c(e){if(i.active>r)return s();var u=i[i.active];u&&(--i.count,delete i[i.active],u.event&&u.event.interrupt.call(n,n.__data__,u.index)),i.active=r,o.event&&o.event.start.call(n,n.__data__,t),o.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&v.push(r)}),h=o.ease,f=o.duration,ta.timer(function(){return p.c=l(e||1)?Ne:l,1},0,a)}function l(e){if(i.active!==r)return 1;for(var u=e/f,a=h(u),c=v.length;c>0;)v[--c].call(n,a);return u>=1?(o.event&&o.event.end.call(n,n.__data__,t),s()):void 0}function s(){return--i.count?delete i[r]:delete n[e],1}var f,h,g=o.delay,p=ec,v=[];return p.t=g+a,u>=g?c(u-g):void(p.c=c)},0,a)}}function Bo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function Wo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function Jo(n){return n.toISOString()}function Go(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=ta.bisect(Vl,u);return i==Vl.length?[t.year,Vi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Vl[i-1]<Vl[i]/u?i-1:i]:[Bl,Vi(n,e)[2]]}return r.invert=function(t){return Ko(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Ko)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Ko(+e+1),t).length}var i=r.domain(),o=Pi(i),a=null==n?u(o,10):"number"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(Fi(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Ko(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Ko(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Pi(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Ko(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Go(n.copy(),t,e)},Yi(r,n)}function Ko(n){return new Date(n)}function Qo(n){return JSON.parse(n.responseText)}function na(n){var t=ua.createRange();return t.selectNode(ua.body),t.createContextualFragment(n.responseText)}var ta={version:"3.5.5"},ea=[].slice,ra=function(n){return ea.call(n)},ua=this.document;if(ua)try{ra(ua.documentElement.childNodes)[0].nodeType}catch(ia){ra=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),ua)try{ua.createElement("DIV").style.setProperty("opacity",0,"")}catch(oa){var aa=this.Element.prototype,ca=aa.setAttribute,la=aa.setAttributeNS,sa=this.CSSStyleDeclaration.prototype,fa=sa.setProperty;aa.setAttribute=function(n,t){ca.call(this,n,t+"")},aa.setAttributeNS=function(n,t,e){la.call(this,n,t,e+"")},sa.setProperty=function(n,t,e){fa.call(this,n,t+"",e)}}ta.ascending=e,ta.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:0/0},ta.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},ta.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},ta.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=n[i])&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},ta.sum=function(n,t){var e,r=0,i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)u(e=+n[o])&&(r+=e);else for(;++o<i;)u(e=+t.call(n,n[o],o))&&(r+=e);return r},ta.mean=function(n,t){var e,i=0,o=n.length,a=-1,c=o;if(1===arguments.length)for(;++a<o;)u(e=r(n[a]))?i+=e:--c;else for(;++a<o;)u(e=r(t.call(n,n[a],a)))?i+=e:--c;return c?i/c:void 0},ta.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},ta.median=function(n,t){var i,o=[],a=n.length,c=-1;if(1===arguments.length)for(;++c<a;)u(i=r(n[c]))&&o.push(i);else for(;++c<a;)u(i=r(t.call(n,n[c],c)))&&o.push(i);return o.length?ta.quantile(o.sort(e),.5):void 0},ta.variance=function(n,t){var e,i,o=n.length,a=0,c=0,l=-1,s=0;if(1===arguments.length)for(;++l<o;)u(e=r(n[l]))&&(i=e-a,a+=i/++s,c+=i*(e-a));else for(;++l<o;)u(e=r(t.call(n,n[l],l)))&&(i=e-a,a+=i/++s,c+=i*(e-a));return s>1?c/(s-1):void 0},ta.deviation=function(){var n=ta.variance.apply(this,arguments);return n?Math.sqrt(n):n};var ha=i(e);ta.bisectLeft=ha.left,ta.bisect=ta.bisectRight=ha.right,ta.bisector=function(n){return i(1===n.length?function(t,r){return e(n(t),r)}:n)},ta.shuffle=function(n,t,e){(i=arguments.length)<3&&(e=n.length,2>i&&(t=0));for(var r,u,i=e-t;i;)u=Math.random()*i--|0,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},ta.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ta.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},ta.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=ta.min(arguments,o),e=new Array(t);++n<t;)for(var r,u=-1,i=e[n]=new Array(r);++u<r;)i[u]=arguments[u][n];return e},ta.transpose=function(n){return ta.zip.apply(ta,n)},ta.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ta.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ta.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ta.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var ga=Math.abs;ta.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,u=[],i=a(ga(e)),o=-1;if(n*=i,t*=i,e*=i,0>e)for(;(r=n+e*++o)>t;)u.push(r/i);else for(;(r=n+e*++o)<t;)u.push(r/i);return u},ta.map=function(n,t){var e=new l;if(n instanceof l)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var o in n)e.set(o,n[o]);return e};var pa="__proto__",va="\x00";c(l,{has:h,get:function(n){return this._[s(n)]},set:function(n,t){return this._[s(n)]=t},remove:g,keys:p,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:f(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t),this._[t])}}),ta.nest=function(){function n(t,o,a){if(a>=i.length)return r?r.call(u,o):e?o.sort(e):o;for(var c,s,f,h,g=-1,p=o.length,v=i[a++],d=new l;++g<p;)(h=d.get(c=v(s=o[g])))?h.push(s):d.set(c,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,a))}):(s={},f=function(e,r){s[e]=n(t,r,a)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=o[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],o=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(ta.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return o[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},ta.set=function(n){var t=new m;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},c(m,{has:h,add:function(n){return this._[s(n+="")]=!0,n},remove:g,values:p,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t))}}),ta.behavior={},ta.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=M(n,t,t[e]);return n};var da=["webkit","ms","moz","Moz","o","O"];ta.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ta.event=null,ta.requote=function(n){return n.replace(ma,"\\$&")};var ma=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ya={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},Ma=function(n,t){return t.querySelector(n)},xa=function(n,t){return t.querySelectorAll(n)},ba=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(ba=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(Ma=function(n,t){return Sizzle(n,t)[0]||null},xa=Sizzle,ba=Sizzle.matchesSelector),ta.selection=function(){return ta.select(ua.documentElement)};var _a=ta.selection.prototype=[];_a.select=function(n){var t,e,r,u,i=[];n=N(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return A(i)},_a.selectAll=function(n){var t,e,r=[];n=C(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=ra(n.call(e,e.__data__,a,u))),t.parentNode=e);return A(r)};var wa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ta.ns={prefix:wa,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.slice(0,t),n=n.slice(t+1)),wa.hasOwnProperty(e)?{space:wa[e],local:n}:n}},_a.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=ta.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},_a.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!L(n[u]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},_a.style=function(n,e,r){var u=arguments.length;if(3>u){if("string"!=typeof n){2>u&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>u){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},_a.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},_a.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},_a.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},_a.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},_a.insert=function(n,t){return n=j(n),t=N(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},_a.remove=function(){return this.each(F)},_a.data=function(n,t){function e(n,e){var r,u,i,o=n.length,f=e.length,h=Math.min(o,f),g=new Array(f),p=new Array(f),v=new Array(o);if(t){var d,m=new l,y=new Array(o);for(r=-1;++r<o;)m.has(d=t.call(u=n[r],u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d;for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=H(i),m.set(d,!0);for(r=-1;++r<o;)m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=H(i);for(;f>r;++r)p[r]=H(e[r]);for(;o>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,a.push(p),c.push(g),s.push(v)}var r,u,i=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++i<o;)(u=r[i])&&(n[i]=u.__data__);return n}var a=Z([]),c=A([]),s=A([]);if("function"==typeof n)for(;++i<o;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],n);return c.enter=function(){return a},c.exit=function(){return s},c},_a.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},_a.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return A(u)},_a.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},_a.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},_a.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},_a.call=function(n){var t=ra(arguments);return n.apply(t[0]=this,t),this},_a.empty=function(){return!this.node()},_a.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},_a.size=function(){var n=0;return Y(this,function(){++n}),n};var Sa=[];ta.selection.enter=Z,ta.selection.enter.prototype=Sa,Sa.append=_a.append,Sa.empty=_a.empty,Sa.node=_a.node,Sa.call=_a.call,Sa.size=_a.size,Sa.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var l=-1,s=u.length;++l<s;)(i=u[l])?(t.push(r[l]=e=n.call(u.parentNode,i.__data__,l,a)),e.__data__=i.__data__):t.push(null)}return A(o)},Sa.insert=function(n,t){return arguments.length<2&&(t=V(this)),_a.insert.call(this,n,t)},ta.select=function(t){var e;return"string"==typeof t?(e=[Ma(t,ua)],e.parentNode=ua.documentElement):(e=[t],e.parentNode=n(t)),A([e])},ta.selectAll=function(n){var t;return"string"==typeof n?(t=ra(xa(n,ua)),t.parentNode=ua.documentElement):(t=n,t.parentNode=null),A([t])},_a.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var ka=ta.map({mouseenter:"mouseover",mouseleave:"mouseout"});ua&&ka.forEach(function(n){"on"+n in ua&&ka.remove(n)});var Ea,Aa=0;ta.mouse=function(n){return J(n,k())};var Na=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ta.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return J(n,r)},ta.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(n,t,e,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,M=r,g({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&ta.event.target===f),g({type:"dragend"}))}var l,s=this,f=ta.event.target,h=s.parentNode,g=r.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=ta.select(e(f)).on(i+d,a).on(o+d,c),y=W(f),M=t(h,v);u?(l=u.apply(s,arguments),l=[l.x-M[0],l.y-M[1]]):l=[0,0],g({type:"dragstart"})}}var r=E(n,"drag","dragstart","dragend"),u=null,i=e(b,ta.mouse,t,"mousemove","mouseup"),o=e(G,ta.touch,y,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},ta.rebind(n,r,"on")},ta.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?ra(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Ca=1e-6,za=Ca*Ca,qa=Math.PI,La=2*qa,Ta=La-Ca,Ra=qa/2,Da=qa/180,Pa=180/qa,Ua=Math.SQRT2,ja=2,Fa=4;ta.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=rt(v),o=i/(ja*h)*(e*ut(Ua*t+v)-et(v));return[r+o*l,u+o*s,i*e/rt(Ua*t+v)]}return[r+n*l,u+n*s,i*Math.exp(Ua*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],l=o-r,s=a-u,f=l*l+s*s,h=Math.sqrt(f),g=(c*c-i*i+Fa*f)/(2*i*ja*h),p=(c*c-i*i-Fa*f)/(2*c*ja*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/Ua;return e.duration=1e3*y,e},ta.behavior.zoom=function(){function n(n){n.on(q,f).on(Oa+".zoom",g).on("dblclick.zoom",p).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function u(n){k.k=Math.max(N[0],Math.min(N[1],n))}function i(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function o(t,e,r,o){t.__chart__={x:k.x,y:k.y,k:k.k},u(Math.pow(2,o)),i(d=e,r),t=ta.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function a(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function c(n){z++||n({type:"zoomstart"})}function l(n){a(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(n){--z||n({type:"zoomend"}),d=null}function f(){function n(){f=1,i(ta.mouse(u),g),l(a)}function r(){h.on(L,null).on(T,null),p(f&&ta.event.target===o),s(a)}var u=this,o=ta.event.target,a=D.of(u,arguments),f=0,h=ta.select(t(u)).on(L,n).on(T,r),g=e(ta.mouse(u)),p=W(u);Dl.call(u),c(a)}function h(){function n(){var n=ta.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=ta.event.target;ta.select(t).on(x,r).on(b,a),_.push(t);for(var e=ta.event.changedTouches,u=0,i=e.length;i>u;++u)d[e[u].identifier]=null;var c=n(),l=Date.now();if(1===c.length){if(500>l-M){var s=c[0];o(p,s,d[s.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=l}else if(c.length>1){var s=c[0],f=c[1],h=s[0]-f[0],g=s[1]-f[1];m=h*h+g*g}}function r(){var n,t,e,r,o=ta.touches(p);Dl.call(p);for(var a=0,c=o.length;c>a;++a,r=null)if(e=o[a],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],u(f*g)}M=null,i(n,t),l(v)}function a(){if(ta.event.touches.length){for(var t=ta.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var u in d)return void n()}ta.selectAll(_).on(y,null),w.on(q,f).on(R,h),E(),s(v)}var g,p=this,v=D.of(p,arguments),d={},m=0,y=".zoom-"+ta.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,_=[],w=ta.select(p),E=W(p);t(),c(v),w.on(q,null).on(R,t)}function g(){var n=D.of(this,arguments);y?clearTimeout(y):(v=e(d=m||ta.mouse(this)),Dl.call(this),c(n)),y=setTimeout(function(){y=null,s(n)},50),S(),u(Math.pow(2,.002*Ha())*k.k),i(d,v),l(n)}function p(){var n=ta.mouse(this),t=Math.log(k.k)/Math.LN2;o(this,n,e(n),ta.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,m,y,M,x,b,_,w,k={x:0,y:0,k:1},A=[960,500],N=Ia,C=250,z=0,q="mousedown.zoom",L="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=E(n,"zoomstart","zoom","zoomend");return Oa||(Oa="onwheel"in ua?(Ha=function(){return-ta.event.deltaY*(ta.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ua?(Ha=function(){return ta.event.wheelDelta},"mousewheel"):(Ha=function(){return-ta.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Tl?ta.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},c(n)}).tween("zoom:zoom",function(){var e=A[0],r=A[1],u=d?d[0]:e/2,i=d?d[1]:r/2,o=ta.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),a=e/r[2];this.__chart__=k={x:u-r[0]*a,y:i-r[1]*a,k:a},l(n)}}).each("interrupt.zoom",function(){s(n)}).each("end.zoom",function(){s(n)}):(this.__chart__=k,c(n),l(n),s(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},a(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:+t},a(),n):k.k},n.scaleExtent=function(t){return arguments.length?(N=null==t?Ia:[+t[0],+t[1]],n):N},n.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],n):m},n.size=function(t){return arguments.length?(A=t&&[+t[0],+t[1]],n):A},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},ta.rebind(n,D,"on")};var Ha,Oa,Ia=[0,1/0];ta.color=ot,ot.prototype.toString=function(){return this.rgb()+""},ta.hsl=at;var Ya=at.prototype=new ot;Ya.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,this.l/n)},Ya.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,n*this.l)},Ya.rgb=function(){return ct(this.h,this.s,this.l)},ta.hcl=lt;var Za=lt.prototype=new ot;Za.brighter=function(n){return new lt(this.h,this.c,Math.min(100,this.l+Va*(arguments.length?n:1)))},Za.darker=function(n){return new lt(this.h,this.c,Math.max(0,this.l-Va*(arguments.length?n:1)))},Za.rgb=function(){return st(this.h,this.c,this.l).rgb()},ta.lab=ft;var Va=18,Xa=.95047,$a=1,Ba=1.08883,Wa=ft.prototype=new ot;Wa.brighter=function(n){return new ft(Math.min(100,this.l+Va*(arguments.length?n:1)),this.a,this.b)},Wa.darker=function(n){return new ft(Math.max(0,this.l-Va*(arguments.length?n:1)),this.a,this.b)},Wa.rgb=function(){return ht(this.l,this.a,this.b)},ta.rgb=mt;var Ja=mt.prototype=new ot;Ja.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new mt(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new mt(u,u,u)},Ja.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new mt(n*this.r,n*this.g,n*this.b)},Ja.hsl=function(){return _t(this.r,this.g,this.b)},Ja.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var Ga=ta.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ga.forEach(function(n,t){Ga.set(n,yt(t))}),ta.functor=Et,ta.xhr=At(y),ta.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=Nt(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=l)return o;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<l;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;l>s;){var r=n.charCodeAt(s++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++a);else if(r!==c)continue;return n.slice(t,s-a)}return n.slice(t)}for(var r,u,i={},o={},a=[],l=n.length,s=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,f++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new m,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},ta.csv=ta.dsv(",","text/csv"),ta.tsv=ta.dsv("	","text/tab-separated-values");var Ka,Qa,nc,tc,ec,rc=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ta.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};Qa?Qa.n=i:Ka=i,Qa=i,nc||(tc=clearTimeout(tc),nc=1,rc(qt))},ta.timer.flush=function(){Lt(),Tt()},ta.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var uc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Dt);ta.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=ta.round(n,Rt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),uc[8+e/3]};var ic=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,oc=ta.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ta.round(n,Rt(n,t))).toFixed(Math.max(0,Math.min(20,Rt(n*(1+1e-15),t))))}}),ac=ta.time={},cc=Date;jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){lc.setUTCDate.apply(this._,arguments)},setDay:function(){lc.setUTCDay.apply(this._,arguments)},setFullYear:function(){lc.setUTCFullYear.apply(this._,arguments)},setHours:function(){lc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){lc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){lc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){lc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){lc.setUTCSeconds.apply(this._,arguments)},setTime:function(){lc.setTime.apply(this._,arguments)}};var lc=Date.prototype;ac.year=Ft(function(n){return n=ac.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),ac.years=ac.year.range,ac.years.utc=ac.year.utc.range,ac.day=Ft(function(n){var t=new cc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),ac.days=ac.day.range,ac.days.utc=ac.day.utc.range,ac.dayOfYear=function(n){var t=ac.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=ac[n]=Ft(function(n){return(n=ac.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});ac[n+"s"]=e.range,ac[n+"s"].utc=e.utc.range,ac[n+"OfYear"]=function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)}}),ac.week=ac.sunday,ac.weeks=ac.sunday.range,ac.weeks.utc=ac.sunday.utc.range,ac.weekOfYear=ac.sundayOfYear;var sc={"-":"",_:" ",0:"0"},fc=/^\s*\d+/,hc=/^%/;ta.locale=function(n){return{numberFormat:Pt(n),timeFormat:Ot(n)}};var gc=ta.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ta.format=gc.numberFormat,ta.geo={},ce.prototype={s:0,t:0,add:function(n){le(n,this.t,pc),le(pc.s,this.s,this),this.s?this.t+=pc.t:this.s=pc.t
},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pc=new ce;ta.geo.stream=function(n,t){n&&vc.hasOwnProperty(n.type)?vc[n.type](n,t):se(n,t)};var vc={Feature:function(n,t){se(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)se(e[r].geometry,t)}},dc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){fe(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)fe(e[r],t,0)},Polygon:function(n,t){he(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)he(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)se(e[r],t)}};ta.geo.area=function(n){return mc=0,ta.geo.stream(n,Mc),mc};var mc,yc=new ce,Mc={sphere:function(){mc+=4*qa},point:b,lineStart:b,lineEnd:b,polygonStart:function(){yc.reset(),Mc.lineStart=ge},polygonEnd:function(){var n=2*yc;mc+=0>n?4*qa+n:n,Mc.lineStart=Mc.lineEnd=Mc.point=b}};ta.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=pe([t*Da,e*Da]);if(m){var u=de(m,r),i=[u[1],-u[0],0],o=de(i,u);Me(o),o=xe(o);var c=t-p,l=c>0?1:-1,v=o[0]*Pa*l,d=ga(c)>180;if(d^(v>l*p&&l*t>v)){var y=o[1]*Pa;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>l*p&&l*t>v)){var y=-o[1]*Pa;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=ga(r)>180?r+(r>0?360:-360):r}else v=n,d=e;Mc.point(n,e),t(n,e)}function i(){Mc.lineStart()}function o(){u(v,d),Mc.lineEnd(),ga(y)>Ca&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=o,y=0,Mc.polygonStart()},polygonEnd:function(){Mc.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>yc?(s=-(h=180),f=-(g=90)):y>Ca?g=90:-Ca>y&&(f=-90),x[0]=s,x[1]=h}};return function(n){g=h=-(s=f=1/0),M=[],ta.geo.stream(n,b);var t=M.length;if(t){M.sort(c);for(var e,r=1,u=M[0],i=[u];t>r;++r)e=M[r],l(e[0],u)||l(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,s=e[0],h=u[1])}return M=x=null,1/0===s||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[s,f],[h,g]]}}(),ta.geo.centroid=function(n){xc=bc=_c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,qc);var t=Nc,e=Cc,r=zc,u=t*t+e*e+r*r;return za>u&&(t=kc,e=Ec,r=Ac,Ca>bc&&(t=_c,e=wc,r=Sc),u=t*t+e*e+r*r,za>u)?[0/0,0/0]:[Math.atan2(e,t)*Pa,tt(r/Math.sqrt(u))*Pa]};var xc,bc,_c,wc,Sc,kc,Ec,Ac,Nc,Cc,zc,qc={sphere:b,point:_e,lineStart:Se,lineEnd:ke,polygonStart:function(){qc.lineStart=Ee},polygonEnd:function(){qc.lineStart=Se}},Lc=Le(Ne,Pe,je,[-qa,-qa/2]),Tc=1e9;ta.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Ie(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(ta.geo.conicEqualArea=function(){return Ye(Ze)}).raw=Ze,ta.geo.albers=function(){return ta.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ta.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=ta.geo.albers(),o=ta.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ta.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var l=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*l,f-.238*l],[s+.455*l,f+.238*l]]).stream(c).point,r=o.translate([s-.307*l,f+.201*l]).clipExtent([[s-.425*l+Ca,f+.12*l+Ca],[s-.214*l-Ca,f+.234*l-Ca]]).stream(c).point,u=a.translate([s-.205*l,f+.212*l]).clipExtent([[s-.214*l+Ca,f+.166*l+Ca],[s-.115*l-Ca,f+.234*l-Ca]]).stream(c).point,n},n.scale(1070)};var Rc,Dc,Pc,Uc,jc,Fc,Hc={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Dc=0,Hc.lineStart=Ve},polygonEnd:function(){Hc.lineStart=Hc.lineEnd=Hc.point=b,Rc+=ga(Dc/2)}},Oc={point:Xe,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Ic={point:We,lineStart:Je,lineEnd:Ge,polygonStart:function(){Ic.lineStart=Ke},polygonEnd:function(){Ic.point=We,Ic.lineStart=Je,Ic.lineEnd=Ge}};ta.geo.path=function(){function n(n){return n&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),ta.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return Rc=0,ta.geo.stream(n,u(Hc)),Rc},n.centroid=function(n){return _c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,u(Ic)),zc?[Nc/zc,Cc/zc]:Ac?[kc/Ac,Ec/Ac]:Sc?[_c/Sc,wc/Sc]:[0/0,0/0]},n.bounds=function(n){return jc=Fc=-(Pc=Uc=1/0),ta.geo.stream(n,u(Oc)),[[Pc,Uc],[jc,Fc]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||tr(n):y,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new $e:new Qe(n),"function"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(ta.geo.albersUsa()).context(null)},ta.geo.transform=function(n){return{stream:function(t){var e=new er(t);for(var r in n)e[r]=n[r];return e}}},er.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ta.geo.projection=ur,ta.geo.projectionMutator=ir,(ta.geo.equirectangular=function(){return ur(ar)}).raw=ar.invert=ar,ta.geo.rotation=function(n){function t(t){return t=n(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t}return n=lr(n[0]%360*Da,n[1]*Da,n.length>2?n[2]*Da:0),t.invert=function(t){return t=n.invert(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t},t},cr.invert=ar,ta.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=lr(-n[0]*Da,-n[1]*Da,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Pa,n[1]*=Pa}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=gr((t=+r)*Da,u*Da),n):t},n.precision=function(r){return arguments.length?(e=gr(t*Da,(u=+r)*Da),n):u},n.angle(90)},ta.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Da,u=n[1]*Da,i=t[1]*Da,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),l=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=l*s-c*f*a)*e),c*s+l*f*a)},ta.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ta.range(Math.ceil(i/d)*d,u,d).map(h).concat(ta.range(Math.ceil(l/m)*m,c,m).map(g)).concat(ta.range(Math.ceil(r/p)*p,e,p).filter(function(n){return ga(n%d)>Ca}).map(s)).concat(ta.range(Math.ceil(a/v)*v,o,v).filter(function(n){return ga(n%m)>Ca}).map(f))}var e,r,u,i,o,a,c,l,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],l=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),l>c&&(t=l,l=c,c=t),n.precision(y)):[[i,l],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=vr(a,o,90),f=dr(r,e,y),h=vr(l,c,90),g=dr(i,u,y),n):y},n.majorExtent([[-180,-90+Ca],[180,90-Ca]]).minorExtent([[-180,-80-Ca],[180,80+Ca]])},ta.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=mr,u=yr;return n.distance=function(){return ta.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},ta.geo.interpolate=function(n,t){return Mr(n[0]*Da,n[1]*Da,t[0]*Da,t[1]*Da)},ta.geo.length=function(n){return Yc=0,ta.geo.stream(n,Zc),Yc};var Yc,Zc={sphere:b,point:b,lineStart:xr,lineEnd:b,polygonStart:b,polygonEnd:b},Vc=br(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ta.geo.azimuthalEqualArea=function(){return ur(Vc)}).raw=Vc;var Xc=br(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},y);(ta.geo.azimuthalEquidistant=function(){return ur(Xc)}).raw=Xc,(ta.geo.conicConformal=function(){return Ye(_r)}).raw=_r,(ta.geo.conicEquidistant=function(){return Ye(wr)}).raw=wr;var $c=br(function(n){return 1/n},Math.atan);(ta.geo.gnomonic=function(){return ur($c)}).raw=$c,Sr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Ra]},(ta.geo.mercator=function(){return kr(Sr)}).raw=Sr;var Bc=br(function(){return 1},Math.asin);(ta.geo.orthographic=function(){return ur(Bc)}).raw=Bc;var Wc=br(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ta.geo.stereographic=function(){return ur(Wc)}).raw=Wc,Er.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Ra]},(ta.geo.transverseMercator=function(){var n=kr(Er),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Er,ta.geom={},ta.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=Et(e),i=Et(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(zr),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var l=Cr(a),s=Cr(c),f=s[0]===l[0],h=s[s.length-1]===l[l.length-1],g=[];for(t=l.length-1;t>=0;--t)g.push(n[a[l[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[a[s[t]][2]]);return g}var e=Ar,r=Nr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ta.geom.polygon=function(n){return ya(n,Jc),n};var Jc=ta.geom.polygon.prototype=[];Jc.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},Jc.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},Jc.clip=function(n){for(var t,e,r,u,i,o,a=Tr(n),c=-1,l=this.length-Tr(this),s=this[l-1];++c<l;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],qr(o,s,u)?(qr(i,s,u)||n.push(Lr(i,o,s,u)),n.push(o)):qr(i,s,u)&&n.push(Lr(i,o,s,u)),i=o;a&&n.push(n[0]),s=u}return n};var Gc,Kc,Qc,nl,tl,el=[],rl=[];Or.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Yr),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nu.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=uu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(eu(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ru(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ru(this,e),n=e,e=n.U),e.C=!1,r.C=!0,eu(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?uu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,eu(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ru(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,eu(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ru(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,eu(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ru(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},ta.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return iu(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,s=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=i&&l.y>=u&&l.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];s.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Ca)*Ca,y:Math.round(o(n,t)/Ca)*Ca,i:t}})}var r=Ar,u=Nr,i=r,o=u,a=ul;return n?t(n):(t.links=function(n){return iu(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return iu(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Yr),c=-1,l=a.length,s=a[l-1].edge,f=s.l===o?s.r:s.l;++c<l;)u=s,i=f,s=a[c].edge,f=s.l===o?s.r:s.l,r<i.i&&r<f.i&&au(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=Et(r=n),t):r},t.y=function(n){return arguments.length?(o=Et(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?ul:n,t):a===ul?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===ul?null:a&&a[1]},t)};var ul=[[-1e6,-1e6],[1e6,1e6]];ta.geom.delaunay=function(n){return ta.geom.voronoi().triangles(n)},ta.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,s=n.y;if(null!=c)if(ga(c-e)+ga(s-r)<.01)l(n,t,e,r,u,i,o,a);else{var f=n.point;n.x=n.y=n.point=null,l(n,f,c,s,u,i,o,a),l(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,u,i,o,a)}function l(n,t,e,r,u,o,a,c){var l=.5*(u+a),s=.5*(o+c),f=e>=l,h=r>=s,g=h<<1|f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=su()),f?u=l:a=l,h?o=s:c=s,i(n,t,e,r,u,o,a,c)}var s,f,h,g,p,v,d,m,y,M=Et(a),x=Et(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var b=+M(s=n[g],g),_=+x(s,g);v>b&&(v=b),d>_&&(d=_),b>m&&(m=b),_>y&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=su();if(k.add=function(n){i(k,n,+M(n,++g),+x(n,g),v,d,m,y)},k.visit=function(n){fu(n,k,v,d,m,y)},k.find=function(n){return hu(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var o,a=Ar,c=Nr;return(o=arguments.length)?(a=cu,c=lu,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},ta.interpolateRgb=gu,ta.interpolateObject=pu,ta.interpolateNumber=vu,ta.interpolateString=du;var il=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ol=new RegExp(il.source,"g");ta.interpolate=mu,ta.interpolators=[function(n,t){var e=typeof t;return("string"===e?Ga.has(t)||/^(#|rgb\(|hsl\()/.test(t)?gu:du:t instanceof ot?gu:Array.isArray(t)?yu:"object"===e&&isNaN(t)?pu:vu)(n,t)}],ta.interpolateArray=yu;var al=function(){return y},cl=ta.map({linear:al,poly:ku,quad:function(){return _u},cubic:function(){return wu},sin:function(){return Eu},exp:function(){return Au},circle:function(){return Nu},elastic:Cu,back:zu,bounce:function(){return qu}}),ll=ta.map({"in":y,out:xu,"in-out":bu,"out-in":function(n){return bu(xu(n))}});ta.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=cl.get(e)||al,r=ll.get(r)||y,Mu(r(e.apply(null,ea.call(arguments,1))))},ta.interpolateHcl=Lu,ta.interpolateHsl=Tu,ta.interpolateLab=Ru,ta.interpolateRound=Du,ta.transform=function(n){var t=ua.createElementNS(ta.ns.prefix.svg,"g");return(ta.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Pu(e?e.matrix:sl)})(n)},Pu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sl={a:1,b:0,c:0,d:1,e:0,f:0};ta.interpolateTransform=Hu,ta.layout={},ta.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Yu(n[e]));return t}},ta.layout.chord=function(){function n(){var n,l,f,h,g,p={},v=[],d=ta.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(l=0,g=-1;++g<i;)l+=u[h][g];v.push(l),m.push(ta.range(i)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(La-s*i)/n,l=0,h=-1;++h<i;){for(f=l,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=l,_=l+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/n},l+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,l={},s=0;return l.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,l):u},l.padding=function(n){return arguments.length?(s=n,e=r=null,l):s},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},ta.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var l=t.charge/c;n.px-=i*l,n.py-=o*l}return!0}if(t.point&&c&&p>c){var l=t.pointCharge/c;n.px-=i*l,n.py-=o*l}}return!t.charge}}function t(n){n.px=ta.event.x,n.py=ta.event.y,a.resume()}var e,r,u,i,o,a={},c=ta.dispatch("start","tick","end"),l=[1,1],s=.9,f=fl,h=hl,g=-30,p=gl,v=.1,d=.64,m=[],M=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,f,h,p,d,y,x,b=m.length,_=M.length;for(e=0;_>e;++e)a=M[e],f=a.source,h=a.target,y=h.x-f.x,x=h.y-f.y,(p=y*y+x*x)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,y*=p,x*=p,h.x-=y*(d=f.weight/(h.weight+f.weight)),h.y-=x*d,f.x+=y*(d=1-d),f.y+=x*d);if((d=r*v)&&(y=l[0]/2,x=l[1]/2,e=-1,d))for(;++e<b;)a=m[e],a.x+=(y-a.x)*d,a.y+=(x-a.y)*d;if(g)for(Ju(t=ta.geom.quadtree(m),r,o),e=-1;++e<b;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<b;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*s,a.y-=(a.py-(a.py=a.y))*s);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(M=n,a):M},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(f="function"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(s=+n,a):s},a.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v=+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),ta.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;s>a;++a){var u=M[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,s=M.length,p=l[0],v=l[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;s>t;++t)r=M[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n("x",p)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof f)for(t=0;s>t;++t)u[t]=+f.call(this,M[t],t);else for(t=0;s>t;++t)u[t]=f;if(i=[],"function"==typeof h)for(t=0;s>t;++t)i[t]=+h.call(this,M[t],t);else for(t=0;s>t;++t)i[t]=h;if(o=[],"function"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=ta.behavior.drag().origin(y).on("dragstart.force",Xu).on("drag.force",t).on("dragend.force",$u)),arguments.length?void this.on("mouseover.force",Bu).on("mouseout.force",Wu).call(e):e},ta.rebind(a,c,"on")};var fl=20,hl=1,gl=1/0;ta.layout.hierarchy=function(){function n(u){var i,o=[u],a=[];for(u.depth=0;null!=(i=o.pop());)if(a.push(i),(l=e.call(n,i,i.depth))&&(c=l.length)){for(var c,l,s;--c>=0;)o.push(s=l[c]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Qu(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),a}var t=ei,e=ni,r=ti;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Ku(t,function(n){n.children&&(n.value=0)}),Qu(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ta.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=i[l],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=ta.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Gu(e,r)},ta.layout.pie=function(){function n(o){var a,c=o.length,l=o.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(0>f?-1:1),p=(f-c*g)/ta.sum(l),v=ta.range(c),d=[];return null!=e&&v.sort(e===pl?function(n,t){return l[t]-l[n]}:function(n,t){return e(o[n],o[t])}),v.forEach(function(n){d[n]={data:o[n],value:a=l[n],startAngle:s,endAngle:s+=a*p+g,padAngle:h}}),d}var t=Number,e=pl,r=0,u=La,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var pl={};ta.layout.stack=function(){function n(a,c){if(!(h=a.length))return a;var l=a.map(function(e,r){return t.call(n,e,r)}),s=l.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,s,c);l=ta.permute(l,f),s=ta.permute(s,f);var h,g,p,v,d=r.call(n,s,c),m=l[0].length;for(p=0;m>p;++p)for(u.call(n,l[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,l[g][p],v+=s[g-1][p][1],s[g][p][1]);return a}var t=y,e=ai,r=ci,u=oi,i=ui,o=ii;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:vl.get(t)||ai,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:dl.get(t)||ci,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var vl=ta.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(li),i=n.map(si),o=ta.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,l=[],s=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],l.push(e)):(c+=i[e],s.push(e));return s.reverse().concat(l)},reverse:function(n){return ta.range(n.length).reverse()},"default":ai}),dl=ta.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,l,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=l=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];s>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,l>c&&(l=c)}for(e=0;h>e;++e)g[e]-=l;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:ci});ta.layout.histogram=function(){function n(n,i){for(var o,a,c=[],l=n.map(e,this),s=r.call(this,l,i),f=u.call(this,s,l,i),i=-1,h=l.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=l[i],a>=s[0]&&a<=s[1]&&(o=c[ta.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=pi,u=hi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=Et(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return gi(n,t)}:Et(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ta.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],l=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Qu(a,function(n){n.r=+s(n.value)}),Qu(a,Mi),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Qu(a,function(n){n.r+=f}),Qu(a,Mi),Qu(a,function(n){n.r-=f})}return _i(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=ta.layout.hierarchy().sort(vi),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Gu(n,e)},ta.layout.tree=function(){function n(n,u){var s=o.call(this,n,u),f=s[0],h=t(f);if(Qu(h,e),h.parent.m=-h.z,Ku(h,r),l)Ku(f,i);else{var g=f,p=f,v=f;Ku(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=a(g,p)/2-g.x,m=c[0]/(p.x+a(p,g)/2+d),y=c[1]/(v.depth||1);Ku(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,o=0,a=i.length;a>o;++o)r.push((i[o]=u={_:i[o],parent:t,children:(u=i[o].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Ni(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+a(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,o=t,c=u.parent.children[0],l=u.m,s=i.m,f=o.m,h=c.m;o=Ei(o),u=ki(u),o&&u;)c=ki(c),i=Ei(i),i.a=n,r=o.z+f-u.z-l+a(o._,u._),r>0&&(Ai(Ci(o,n,e),n,r),l+=r,s+=r),f+=o.m,l+=u.m,h+=c.m,s+=i.m;o&&!Ei(i)&&(i.t=o,i.m+=f-s),u&&!ki(c)&&(c.t=u,c.m+=l-h,e=n)}return e}function i(n){n.x*=c[0],n.y=n.depth*c[1]}var o=ta.layout.hierarchy().sort(null).value(null),a=Si,c=[1,1],l=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(l=null==(c=t)?i:null,n):l?null:c},n.nodeSize=function(t){return arguments.length?(l=null==(c=t)?null:i,n):l?c:null},Gu(n,o)},ta.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],l=0;Qu(c,function(n){var t=n.children;t&&t.length?(n.x=qi(t),n.y=zi(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var s=Li(c),f=Ti(c),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return Qu(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=ta.layout.hierarchy().sort(null).value(null),e=Si,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Gu(n,t)},ta.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,l=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),s.area=0;(c=h.length)>0;)s.push(o=h[c-1]),s.area+=o.area,"squarify"!==g||(a=r(s,v))<=p?(h.pop(),p=a):(s.area-=s.pop().area,u(s,v,l,!1),v=Math.min(l.dx,l.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,l,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,l=e.y,s=t?c(n.area/t):0;if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<o;)u=n[i],u.x=a,u.y=l,u.dy=s,a+=u.dx=Math.min(e.x+e.dx-a,s?c(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<o;)u=n[i],u.x=a,u.y=l,u.dx=s,l+=u.dy=Math.min(e.y+e.dy-l,s?c(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=l[0],i.dy=l[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),h&&(o=u),u}var o,a=ta.layout.hierarchy(),c=Math.round,l=[1,1],s=null,f=Ri,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));
return i.size=function(n){return arguments.length?(l=n,i):l},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Ri(t):Di(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Di(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?Ri:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},Gu(i,a)},ta.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=ta.random.normal.apply(ta,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ta.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},ta.scale={};var ml={floor:y,ceil:y};ta.scale.linear=function(){return Ii([0,1],[0,1],mu,!1)};var yl={s:1,g:1,p:1,r:1,e:1};ta.scale.log=function(){return Ji(ta.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ta.format(".0e"),xl={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ta.scale.pow=function(){return Gi(ta.scale.linear(),1,[0,1])},ta.scale.sqrt=function(){return ta.scale.pow().exponent(.5)},ta.scale.ordinal=function(){return Qi([],{t:"range",a:[[]]})},ta.scale.category10=function(){return ta.scale.ordinal().range(bl)},ta.scale.category20=function(){return ta.scale.ordinal().range(_l)},ta.scale.category20b=function(){return ta.scale.ordinal().range(wl)},ta.scale.category20c=function(){return ta.scale.ordinal().range(Sl)};var bl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),_l=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),wl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Sl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);ta.scale.quantile=function(){return no([],[])},ta.scale.quantize=function(){return to(0,1,[0,1])},ta.scale.threshold=function(){return eo([.5],[0,1])},ta.scale.identity=function(){return ro([0,1])},ta.svg={},ta.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),s=o.apply(this,arguments)-Ra,f=a.apply(this,arguments)-Ra,h=Math.abs(f-s),g=s>f?0:1;if(n>l&&(p=l,l=n,n=p),h>=Ta)return t(l,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,E=0,A=0,N=[];if((m=(+c.apply(this,arguments)||0)/2)&&(d=i===kl?Math.sqrt(n*n+l*l):+i.apply(this,arguments),g||(A*=-1),l&&(A=tt(d/l*Math.sin(m))),n&&(E=tt(d/n*Math.sin(m)))),l){y=l*Math.cos(s+A),M=l*Math.sin(s+A),x=l*Math.cos(f-A),b=l*Math.sin(f-A);var C=Math.abs(f-s-2*A)<=qa?0:1;if(A&&so(y,M,x,b)===g^C){var z=(s+f)/2;y=l*Math.cos(z),M=l*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-E),w=n*Math.sin(f-E),S=n*Math.cos(s+E),k=n*Math.sin(s+E);var q=Math.abs(s-f+2*E)<=qa?0:1;if(E&&so(_,w,S,k)===1-g^q){var L=(s+f)/2;_=n*Math.cos(L),w=n*Math.sin(L),S=k=null}}else _=w=0;if((p=Math.min(Math.abs(l-n)/2,+u.apply(this,arguments)))>.001){v=l>n^g?0:1;var T=null==S?[_,w]:null==x?[y,M]:Lr([y,M],[S,k],[x,b],[_,w]),R=y-T[0],D=M-T[1],P=x-T[0],U=b-T[1],j=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),F=Math.sqrt(T[0]*T[0]+T[1]*T[1]);if(null!=x){var H=Math.min(p,(l-F)/(j+1)),O=fo(null==S?[_,w]:[S,k],[y,M],l,H,g),I=fo([x,b],[_,w],l,H,g);p===H?N.push("M",O[0],"A",H,",",H," 0 0,",v," ",O[1],"A",l,",",l," 0 ",1-g^so(O[1][0],O[1][1],I[1][0],I[1][1]),",",g," ",I[1],"A",H,",",H," 0 0,",v," ",I[0]):N.push("M",O[0],"A",H,",",H," 0 1,",v," ",I[0])}else N.push("M",y,",",M);if(null!=S){var Y=Math.min(p,(n-F)/(j-1)),Z=fo([y,M],[S,k],n,-Y,g),V=fo([_,w],null==x?[y,M]:[x,b],n,-Y,g);p===Y?N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^so(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",Y,",",Y," 0 0,",v," ",Z[0]):N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",Z[0])}else N.push("L",_,",",w)}else N.push("M",y,",",M),null!=x&&N.push("A",l,",",l," 0 ",C,",",g," ",x,",",b),N.push("L",_,",",w),null!=S&&N.push("A",n,",",n," 0 ",q,",",1-g," ",S,",",k);return N.push("Z"),N.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=io,r=oo,u=uo,i=kl,o=ao,a=co,c=lo;return n.innerRadius=function(t){return arguments.length?(e=Et(t),n):e},n.outerRadius=function(t){return arguments.length?(r=Et(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=Et(t),n):u},n.padRadius=function(t){return arguments.length?(i=t==kl?kl:Et(t),n):i},n.startAngle=function(t){return arguments.length?(o=Et(t),n):o},n.endAngle=function(t){return arguments.length?(a=Et(t),n):a},n.padAngle=function(t){return arguments.length?(c=Et(t),n):c},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-Ra;return[Math.cos(t)*n,Math.sin(t)*n]},n};var kl="auto";ta.svg.line=function(){return ho(y)};var El=ta.map({linear:go,"linear-closed":po,step:vo,"step-before":mo,"step-after":yo,basis:So,"basis-open":ko,"basis-closed":Eo,bundle:Ao,cardinal:bo,"cardinal-open":Mo,"cardinal-closed":xo,monotone:To});El.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Al=[0,2/3,1/3,0],Nl=[0,1/3,2/3,0],Cl=[0,1/6,2/3,1/6];ta.svg.line.radial=function(){var n=ho(Ro);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},mo.reverse=yo,yo.reverse=mo,ta.svg.area=function(){return Do(y)},ta.svg.area.radial=function(){var n=Do(Ro);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ta.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+u(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)-Ra,s=l.call(n,u,r)-Ra;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>qa)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=mr,o=yr,a=Po,c=ao,l=co;return n.radius=function(t){return arguments.length?(a=Et(t),n):a},n.source=function(t){return arguments.length?(i=Et(t),n):i},n.target=function(t){return arguments.length?(o=Et(t),n):o},n.startAngle=function(t){return arguments.length?(c=Et(t),n):c},n.endAngle=function(t){return arguments.length?(l=Et(t),n):l},n},ta.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=mr,e=yr,r=Uo;return n.source=function(e){return arguments.length?(t=Et(e),n):t},n.target=function(t){return arguments.length?(e=Et(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ta.svg.diagonal.radial=function(){var n=ta.svg.diagonal(),t=Uo,e=n.projection;return n.projection=function(n){return arguments.length?e(jo(t=n)):t},n},ta.svg.symbol=function(){function n(n,r){return(zl.get(t.call(this,n,r))||Oo)(e.call(this,n,r))}var t=Ho,e=Fo;return n.type=function(e){return arguments.length?(t=Et(e),n):t},n.size=function(t){return arguments.length?(e=Et(t),n):e},n};var zl=ta.map({circle:Oo,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Ll)),e=t*Ll;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ta.svg.symbolTypes=zl.keys();var ql=Math.sqrt(3),Ll=Math.tan(30*Da);_a.transition=function(n){for(var t,e,r=Tl||++Ul,u=Xo(n),i=[],o=Rl||{time:Date.now(),ease:Su,delay:0,duration:250},a=-1,c=this.length;++a<c;){i.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(e=l[s])&&$o(e,s,u,r,o),t.push(e)}return Yo(i,u,r)},_a.interrupt=function(n){return this.each(null==n?Dl:Io(Xo(n)))};var Tl,Rl,Dl=Io(Xo()),Pl=[],Ul=0;Pl.call=_a.call,Pl.empty=_a.empty,Pl.node=_a.node,Pl.size=_a.size,ta.transition=function(n,t){return n&&n.transition?Tl?n.transition(t):n:ta.selection().transition(n)},ta.transition.prototype=Pl,Pl.select=function(n){var t,e,r,u=this.id,i=this.namespace,o=[];n=N(n);for(var a=-1,c=this.length;++a<c;){o.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(r=l[s])&&(e=n.call(r,r.__data__,s,a))?("__data__"in r&&(e.__data__=r.__data__),$o(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Yo(o,i,u)},Pl.selectAll=function(n){var t,e,r,u,i,o=this.id,a=this.namespace,c=[];n=C(n);for(var l=-1,s=this.length;++l<s;)for(var f=this[l],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[a][o],e=n.call(r,r.__data__,h,l),c.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&$o(u,p,a,o,i),t.push(u)}return Yo(c,a,o)},Pl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return Yo(u,this.namespace,this.id)},Pl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Pl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?Hu:mu,a=ta.ns.qualify(n);return Zo(this,"attr."+n,t,a.local?i:u)},Pl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=ta.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Pl.style=function(n,e,r){function u(){this.style.removeProperty(n)}function i(e){return null==e?u:(e+="",function(){var u,i=t(this).getComputedStyle(this,null).getPropertyValue(n);return i!==e&&(u=mu(i,e),function(t){this.style.setProperty(n,u(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof n){2>o&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Zo(this,"style."+n,e,i)},Pl.styleTween=function(n,e,r){function u(u,i){var o=e.call(this,u,i,t(this).getComputedStyle(this,null).getPropertyValue(n));return o&&function(t){this.style.setProperty(n,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,u)},Pl.text=function(n){return Zo(this,"text",n,Vo)},Pl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Pl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ta.ease.apply(ta,arguments)),Y(this,function(r){r[e][t].ease=n}))},Pl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Pl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Pl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Rl,i=Tl;try{Tl=e,Y(this,function(t,u,i){Rl=t[r][e],n.call(t,t.__data__,u,i)})}finally{Rl=u,Tl=i}}else Y(this,function(u){var i=u[r][e];(i.event||(i.event=ta.dispatch("start","end","interrupt"))).on(n,t)});return this},Pl.transition=function(){for(var n,t,e,r,u=this.id,i=++Ul,o=this.namespace,a=[],c=0,l=this.length;l>c;c++){a.push(n=[]);for(var t=this[c],s=0,f=t.length;f>s;s++)(e=t[s])&&(r=e[o][u],$o(e,s,o,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Yo(a,o,i)},ta.svg.axis=function(){function n(n){n.each(function(){var n,l=ta.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):y:t,p=l.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ca),d=ta.transition(p.exit()).style("opacity",Ca).remove(),m=ta.transition(p.order()).style("opacity",1),M=Math.max(u,0)+o,x=Ui(f),b=l.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),ta.transition(b));v.append("line"),v.append("text");var w,S,k,E,A=v.select("line"),N=m.select("line"),C=p.select("text").text(g),z=v.select("text"),q=m.select("text"),L="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=Bo,w="x",k="y",S="x2",E="y2",C.attr("dy",0>L?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+L*i+"V0H"+x[1]+"V"+L*i)):(n=Wo,w="y",k="x",S="y2",E="x2",C.attr("dy",".32em").style("text-anchor",0>L?"end":"start"),_.attr("d","M"+L*i+","+x[0]+"H0V"+x[1]+"H"+L*i)),A.attr(E,L*u),z.attr(k,L*M),N.attr(S,0).attr(E,L*u),q.attr(w,0).attr(k,L*M),f.rangeBand){var T=f,R=T.rangeBand()/2;s=f=function(n){return T(n)+R}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=ta.scale.linear(),r=jl,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Fl?t+"":jl,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var jl="bottom",Fl={top:1,right:1,bottom:1,left:1};ta.svg.brush=function(){function n(t){t.each(function(){var t=ta.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=t.selectAll(".resize").data(v,y);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Hl[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var c,f=ta.transition(t),h=ta.transition(o);l&&(c=Ui(l),h.attr("x",c[0]).attr("width",c[1]-c[0]),r(f)),s&&(c=Ui(s),h.attr("y",c[0]).attr("height",c[1]-c[0]),u(f)),e(f)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function u(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==ta.event.keyCode&&(C||(M=null,q[0]-=f[1],q[1]-=h[1],C=2),S())}function v(){32==ta.event.keyCode&&2==C&&(q[0]+=f[1],q[1]+=h[1],C=0,S())}function d(){var n=ta.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(ta.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),q[0]=f[+(n[0]<M[0])],q[1]=h[+(n[1]<M[1])]):M=null),A&&m(n,l,0)&&(r(k),t=!0),N&&m(n,s,1)&&(u(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function m(n,t,e){var r,u,i=Ui(t),c=i[0],l=i[1],s=q[e],v=e?h:f,d=v[1]-v[0];return C&&(c-=s,l-=d+s),r=(e?p:g)?Math.max(c,Math.min(l,n[e])):n[e],C?u=(r+=s)+d:(M&&(s=Math.max(c,Math.min(l,2*M[e]-r))),r>s?(u=r,r=s):u=s),v[0]!=r||v[1]!=u?(e?a=null:o=null,v[0]=r,v[1]=u,!0):void 0}function y(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ta.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=ta.select(ta.event.target),w=c.of(b,arguments),k=ta.select(b),E=_.datum(),A=!/^(n|s)$/.test(E)&&l,N=!/^(e|w)$/.test(E)&&s,C=_.classed("extent"),z=W(b),q=ta.mouse(b),L=ta.select(t(b)).on("keydown.brush",i).on("keyup.brush",v);if(ta.event.changedTouches?L.on("touchmove.brush",d).on("touchend.brush",y):L.on("mousemove.brush",d).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)q[0]=f[0]-q[0],q[1]=h[0]-q[1];else if(E){var T=+/w$/.test(E),R=+/^n/.test(E);x=[f[1-T]-q[0],h[1-R]-q[1]],q[0]=f[T],q[1]=h[R]}else ta.event.altKey&&(M=q.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ta.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var o,a,c=E(n,"brushstart","brush","brushend"),l=null,s=null,f=[0,0],h=[0,0],g=!0,p=!0,v=Ol[0];return n.event=function(n){n.each(function(){var n=c.of(this,arguments),t={x:f,y:h,i:o,j:a},e=this.__chart__||t;this.__chart__=t,Tl?ta.select(this).transition().each("start.brush",function(){o=e.i,a=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=yu(f,t.x),r=yu(h,t.y);return o=a=null,function(u){f=t.x=e(u),h=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,a=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(l=t,v=Ol[!l<<1|!s],n):l},n.y=function(t){return arguments.length?(s=t,v=Ol[!l<<1|!s],n):s},n.clamp=function(t){return arguments.length?(l&&s?(g=!!t[0],p=!!t[1]):l?g=!!t:s&&(p=!!t),n):l&&s?[g,p]:l?g:s?p:null},n.extent=function(t){var e,r,u,i,c;return arguments.length?(l&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),o=[e,r],l.invert&&(e=l(e),r=l(r)),e>r&&(c=e,e=r,r=c),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(u=t[0],i=t[1],l&&(u=u[1],i=i[1]),a=[u,i],s.invert&&(u=s(u),i=s(i)),u>i&&(c=u,u=i,i=c),(u!=h[0]||i!=h[1])&&(h=[u,i])),n):(l&&(o?(e=o[0],r=o[1]):(e=f[0],r=f[1],l.invert&&(e=l.invert(e),r=l.invert(r)),e>r&&(c=e,e=r,r=c))),s&&(a?(u=a[0],i=a[1]):(u=h[0],i=h[1],s.invert&&(u=s.invert(u),i=s.invert(i)),u>i&&(c=u,u=i,i=c))),l&&s?[[e,u],[r,i]]:l?[e,r]:s&&[u,i])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],o=a=null),n},n.empty=function(){return!!l&&f[0]==f[1]||!!s&&h[0]==h[1]},ta.rebind(n,c,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ol=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Il=ac.format=gc.timeFormat,Yl=Il.utc,Zl=Yl("%Y-%m-%dT%H:%M:%S.%LZ");Il.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Jo:Zl,Jo.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Jo.toString=Zl.toString,ac.second=Ft(function(n){return new cc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),ac.seconds=ac.second.range,ac.seconds.utc=ac.second.utc.range,ac.minute=Ft(function(n){return new cc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),ac.minutes=ac.minute.range,ac.minutes.utc=ac.minute.utc.range,ac.hour=Ft(function(n){var t=n.getTimezoneOffset()/60;return new cc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),ac.hours=ac.hour.range,ac.hours.utc=ac.hour.utc.range,ac.month=Ft(function(n){return n=ac.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),ac.months=ac.month.range,ac.months.utc=ac.month.utc.range;var Vl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Xl=[[ac.second,1],[ac.second,5],[ac.second,15],[ac.second,30],[ac.minute,1],[ac.minute,5],[ac.minute,15],[ac.minute,30],[ac.hour,1],[ac.hour,3],[ac.hour,6],[ac.hour,12],[ac.day,1],[ac.day,2],[ac.week,1],[ac.month,1],[ac.month,3],[ac.year,1]],$l=Il.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",Ne]]),Bl={range:function(n,t,e){return ta.range(Math.ceil(n/e)*e,+t,e).map(Ko)},floor:y,ceil:y};Xl.year=ac.year,ac.scale=function(){return Go(ta.scale.linear(),Xl,$l)};var Wl=Xl.map(function(n){return[n[0].utc,n[1]]}),Jl=Yl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",Ne]]);Wl.year=ac.year.utc,ac.scale.utc=function(){return Go(ta.scale.linear(),Wl,Jl)},ta.text=At(function(n){return n.responseText}),ta.json=function(n,t){return Nt(n,"application/json",Qo,t)},ta.html=function(n,t){return Nt(n,"text/html",na,t)},ta.xml=At(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define(ta):"object"==typeof module&&module.exports&&(module.exports=ta),this.d3=ta}();
/*! jQuery v2.1.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m=a.document,n="2.1.0",o=function(a,b){return new o.fn.init(a,b)},p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};o.fn=o.prototype={jquery:n,constructor:o,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=o.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return o.each(this,a,b)},map:function(a){return this.pushStack(o.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},o.extend=o.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||o.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(o.isPlainObject(d)||(e=o.isArray(d)))?(e?(e=!1,f=c&&o.isArray(c)?c:[]):f=c&&o.isPlainObject(c)?c:{},g[b]=o.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},o.extend({expando:"jQuery"+(n+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===o.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isPlainObject:function(a){if("object"!==o.type(a)||a.nodeType||o.isWindow(a))return!1;try{if(a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=o.trim(a),a&&(1===a.indexOf("use strict")?(b=m.createElement("script"),b.text=a,m.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":k.call(a)},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?o.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),o.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||o.guid++,f):void 0},now:Date.now,support:l}),o.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=o.type(a);return"function"===c||o.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+-new Date,t=a.document,u=0,v=0,w=eb(),x=eb(),y=eb(),z=function(a,b){return a===b&&(j=!0),0},A="undefined",B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ab=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(cb){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function db(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;if((b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[],!a||"string"!=typeof a)return d;if(1!==(i=b.nodeType)&&9!==i)return[];if(n&&!e){if(f=Z.exec(a))if(h=f[1]){if(9===i){if(g=b.getElementById(h),!g||!g.parentNode)return d;if(g.id===h)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h)return d.push(g),d}else{if(f[2])return G.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(h)),d}if(c.qsa&&(!o||!o.test(a))){if(q=p=s,u=b,v=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){m=ob(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--)m[j]=q+pb(m[j]);u=$.test(a)&&mb(b.parentNode)||b,v=m.join(",")}if(v)try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}return xb(a.replace(P,"$1"),b,d,e)}function eb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function fb(a){return a[s]=!0,a}function gb(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function hb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function ib(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function lb(a){return fb(function(b){return b=+b,fb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function mb(a){return a&&typeof a.getElementsByTagName!==A&&a}c=db.support={},f=db.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},k=db.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;return e!==l&&9===e.nodeType&&e.documentElement?(l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=gb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=gb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&gb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=gb(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==A?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==A&&n?b.getElementsByClassName(a):void 0},p=[],o=[],(c.qsa=Y.test(e.querySelectorAll))&&(gb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),gb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")})),(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&gb(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},z=b?function(a,b){if(a===b)return j=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:4&d?-1:1)}:function(a,b){if(a===b)return j=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0;if(f===g)return ib(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)k.unshift(c);while(h[d]===k[d])d++;return d?ib(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e):l},db.matches=function(a,b){return db(a,null,null,b)},db.matchesSelector=function(a,b){if((a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']"),!(!c.matchesSelector||!n||p&&p.test(b)||o&&o.test(b)))try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return db(b,l,null,[a]).length>0},db.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},db.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):void 0;return void 0!==f?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},db.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},db.uniqueSort=function(a){var b,d=[],e=0,f=0;if(j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z),j){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return i=null,a},e=db.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=db.selectors={cacheLength:50,createPseudo:fb,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,bb),a[3]=(a[4]||a[5]||"").replace(ab,bb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||db.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&db.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&T.test(c)&&(b=ob(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,bb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=db.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[u,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(t&&((l[s]||(l[s]={}))[a]=[u,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||db.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?fb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:fb(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?fb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:fb(function(a){return function(b){return db(a,b).length>0}}),contains:fb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:fb(function(a){return U.test(a||"")||db.error("unsupported lang: "+a),a=a.replace(ab,bb).toLowerCase(),function(b){var c;do if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[0>c?c+b:c]}),even:lb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:lb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:lb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:lb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=jb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=kb(b);function nb(){}nb.prototype=d.filters=d.pseudos,d.setFilters=new nb;function ob(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=Q.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?db.error(a):x(a,i).slice(0)}function pb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function qb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=v++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[s]||(b[s]={}),(h=i[d])&&h[0]===u&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function rb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function sb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function tb(a,b,c,d,e,f){return d&&!d[s]&&(d=tb(d)),e&&!e[s]&&(e=tb(e,f)),fb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||wb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:sb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=sb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=sb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ub(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=qb(function(a){return a===b},i,!0),l=qb(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return!g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++)if(c=d.relative[a[j].type])m=[qb(rb(m),c)];else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[s]){for(e=++j;f>e;e++)if(d.relative[a[e].type])break;return tb(j>1&&rb(m),j>1&&pb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(P,"$1"),c,e>j&&ub(a.slice(j,e)),f>e&&ub(a=a.slice(e)),f>e&&pb(a))}m.push(c)}return rb(m)}function vb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=null==t?1:Math.random()||.1,x=v.length;for(k&&(h=g!==l&&g);q!==x&&null!=(m=v[q]);q++){if(e&&m){n=0;while(o=a[n++])if(o(m,g,i)){j.push(m);break}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}if(p+=q,c&&q!==p){n=0;while(o=b[n++])o(r,s,g,i);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=E.call(j));s=sb(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&db.uniqueSort(j)}return k&&(u=w,h=t),r};return c?fb(f):f}g=db.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=ob(a)),c=b.length;while(c--)f=ub(b[c]),f[s]?d.push(f):e.push(f);f=y(a,vb(e,d))}return f};function wb(a,b,c){for(var d=0,e=b.length;e>d;d++)db(a,b[d],c);return c}function xb(a,b,e,f){var h,i,j,k,l,m=ob(a);if(!f&&1===m.length){if(i=m[0]=m[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&n&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(ab,bb),b)||[])[0],!b)return e;a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){if(j=i[h],d.relative[k=j.type])break;if((l=d.find[k])&&(f=l(j.matches[0].replace(ab,bb),$.test(i[0].type)&&mb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&pb(i),!a)return G.apply(e,f),e;break}}}return g(a,m)(f,b,!n,e,$.test(a)&&mb(b.parentNode)||b),e}return c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=gb(function(a){return 1&a.compareDocumentPosition(l.createElement("div"))}),gb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||hb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&gb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||hb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),gb(function(a){return null==a.getAttribute("disabled")})||hb(J,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),db}(a);o.find=t,o.expr=t.selectors,o.expr[":"]=o.expr.pseudos,o.unique=t.uniqueSort,o.text=t.getText,o.isXMLDoc=t.isXML,o.contains=t.contains;var u=o.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(o.isFunction(b))return o.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return o.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return o.filter(b,a,c);b=o.filter(b,a)}return o.grep(a,function(a){return g.call(b,a)>=0!==c})}o.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?o.find.matchesSelector(d,a)?[d]:[]:o.find.matches(a,o.grep(b,function(a){return 1===a.nodeType}))},o.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(o(a).filter(function(){for(b=0;c>b;b++)if(o.contains(e[b],this))return!0}));for(b=0;c>b;b++)o.find(a,e[b],d);return d=this.pushStack(c>1?o.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?o(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=o.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof o?b[0]:b,o.merge(this,o.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:m,!0)),v.test(c[1])&&o.isPlainObject(b))for(c in b)o.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=m.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=m,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):o.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(o):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),o.makeArray(a,this))};A.prototype=o.fn,y=o(m);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};o.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&o(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),o.fn.extend({has:function(a){var b=o(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(o.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?o(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&o.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?o.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(o(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(o.unique(o.merge(this.get(),o(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}o.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return o.dir(a,"parentNode")},parentsUntil:function(a,b,c){return o.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return o.dir(a,"nextSibling")},prevAll:function(a){return o.dir(a,"previousSibling")},nextUntil:function(a,b,c){return o.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return o.dir(a,"previousSibling",c)},siblings:function(a){return o.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return o.sibling(a.firstChild)},contents:function(a){return a.contentDocument||o.merge([],a.childNodes)}},function(a,b){o.fn[a]=function(c,d){var e=o.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=o.filter(d,e)),this.length>1&&(C[a]||o.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return o.each(a.match(E)||[],function(a,c){b[c]=!0}),b}o.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):o.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){o.each(b,function(b,c){var d=o.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&o.each(arguments,function(a,b){var c;while((c=o.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?o.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},o.extend({Deferred:function(a){var b=[["resolve","done",o.Callbacks("once memory"),"resolved"],["reject","fail",o.Callbacks("once memory"),"rejected"],["notify","progress",o.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return o.Deferred(function(c){o.each(b,function(b,f){var g=o.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&o.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?o.extend(a,d):d}},e={};return d.pipe=d.then,o.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&o.isFunction(a.promise)?e:0,g=1===f?a:o.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&o.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;o.fn.ready=function(a){return o.ready.promise().done(a),this},o.extend({isReady:!1,readyWait:1,holdReady:function(a){a?o.readyWait++:o.ready(!0)},ready:function(a){(a===!0?--o.readyWait:o.isReady)||(o.isReady=!0,a!==!0&&--o.readyWait>0||(H.resolveWith(m,[o]),o.fn.trigger&&o(m).trigger("ready").off("ready")))}});function I(){m.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),o.ready()}o.ready.promise=function(b){return H||(H=o.Deferred(),"complete"===m.readyState?setTimeout(o.ready):(m.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},o.ready.promise();var J=o.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===o.type(c)){e=!0;for(h in c)o.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,o.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(o(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};o.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=o.expando+Math.random()}K.uid=1,K.accepts=o.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,o.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(o.isEmptyObject(f))o.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,o.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{o.isArray(b)?d=b.concat(b.map(o.camelCase)):(e=o.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!o.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?o.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}o.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),o.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;
while(c--)d=g[c].name,0===d.indexOf("data-")&&(d=o.camelCase(d.slice(5)),P(f,d,e[d]));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=o.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),o.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||o.isArray(c)?d=L.access(a,b,o.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=o.queue(a,b),d=c.length,e=c.shift(),f=o._queueHooks(a,b),g=function(){o.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:o.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),o.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?o.queue(this[0],a):void 0===b?this:this.each(function(){var c=o.queue(this,a,b);o._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&o.dequeue(this,a)})},dequeue:function(a){return this.each(function(){o.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=o.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===o.css(a,"display")||!o.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=m.createDocumentFragment(),b=a.appendChild(m.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";l.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return m.activeElement}catch(a){}}o.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=o.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof o!==U&&o.event.triggered!==b.type?o.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],n=q=h[1],p=(h[2]||"").split(".").sort(),n&&(l=o.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=o.event.special[n]||{},k=o.extend({type:n,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&o.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),o.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],n=q=h[1],p=(h[2]||"").split(".").sort(),n){l=o.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||o.removeEvent(a,n,r.handle),delete i[n])}else for(n in i)o.event.remove(a,n+b[j],c,d,!0);o.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,p=[d||m],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||m,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+o.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[o.expando]?b:new o.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:o.makeArray(c,[b]),n=o.event.special[q]||{},e||!n.trigger||n.trigger.apply(d,c)!==!1)){if(!e&&!n.noBubble&&!o.isWindow(d)){for(i=n.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||m)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:n.bindType||q,l=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),l&&l.apply(g,c),l=k&&g[k],l&&l.apply&&o.acceptData(g)&&(b.result=l.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||n._default&&n._default.apply(p.pop(),c)!==!1||!o.acceptData(d)||k&&o.isFunction(d[q])&&!o.isWindow(d)&&(h=d[k],h&&(d[k]=null),o.event.triggered=q,d[q](),o.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=o.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=o.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=o.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((o.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?o(e,this).index(i)>=0:o.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||m,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[o.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new o.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=m),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&o.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return o.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=o.extend(new o.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?o.event.trigger(e,null,b):o.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},o.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},o.Event=function(a,b){return this instanceof o.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.getPreventDefault&&a.getPreventDefault()?Z:$):this.type=a,b&&o.extend(this,b),this.timeStamp=a&&a.timeStamp||o.now(),void(this[o.expando]=!0)):new o.Event(a,b)},o.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z,this.stopPropagation()}},o.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){o.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!o.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.focusinBubbles||o.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){o.event.simulate(b,a.target,o.event.fix(a),!0)};o.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),o.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return o().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=o.guid++)),this.each(function(){o.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,o(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){o.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){o.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?o.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return o.nodeName(a,"table")&&o.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)o.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=o.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&o.nodeName(a,b)?o.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}o.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=o.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||o.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===o.type(e))o.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;o.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===o.inArray(e,d))&&(i=o.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f,g,h=o.event.special,i=0;void 0!==(c=a[i]);i++){if(o.acceptData(c)&&(f=c[L.expando],f&&(b=L.cache[f]))){if(d=Object.keys(b.events||{}),d.length)for(g=0;void 0!==(e=d[g]);g++)h[e]?o.event.remove(c,e):o.removeEvent(c,e,b.handle);L.cache[f]&&delete L.cache[f]}delete M.cache[c[M.expando]]}}}),o.fn.extend({text:function(a){return J(this,function(a){return void 0===a?o.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?o.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||o.cleanData(ob(c)),c.parentNode&&(b&&o.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(o.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return o.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(o.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,o.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,n=k-1,p=a[0],q=o.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(k&&(c=o.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=o.map(ob(c,"script"),kb),g=f.length;k>j;j++)h=c,j!==n&&(h=o.clone(h,!0,!0),g&&o.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,o.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&o.contains(i,h)&&(h.src?o._evalUrl&&o._evalUrl(h.src):o.globalEval(h.textContent.replace(hb,"")))}return this}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){o.fn[a]=function(a){for(var c,d=[],e=o(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),o(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d=o(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:o.css(d[0],"display");return d.detach(),e}function tb(a){var b=m,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||o("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||o.contains(a.ownerDocument,a)||(g=o.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",e=m.documentElement,f=m.createElement("div"),g=m.createElement("div");g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",f.appendChild(g);function h(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",e.appendChild(f);var d=a.getComputedStyle(g,null);b="1%"!==d.top,c="4px"===d.width,e.removeChild(f)}a.getComputedStyle&&o.extend(l,{pixelPosition:function(){return h(),b},boxSizingReliable:function(){return null==c&&h(),c},reliableMarginRight:function(){var b,c=g.appendChild(m.createElement("div"));return c.style.cssText=g.style.cssText=d,c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.innerHTML="",b}})}(),o.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:0,fontWeight:400},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=o.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=o.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=o.css(a,"border"+R[f]+"Width",!0,e))):(g+=o.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=o.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===o.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):f[g]||(e=S(d),(c&&"none"!==c||!e)&&L.set(d,"olddisplay",e?c:o.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}o.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=o.camelCase(b),i=a.style;return b=o.cssProps[h]||(o.cssProps[h]=Fb(i,h)),g=o.cssHooks[b]||o.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(o.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||o.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]="",i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=o.camelCase(b);return b=o.cssProps[h]||(o.cssProps[h]=Fb(a.style,h)),g=o.cssHooks[b]||o.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||o.isNumeric(f)?f||0:e):e}}),o.each(["height","width"],function(a,b){o.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&zb.test(o.css(a,"display"))?o.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===o.css(a,"boxSizing",!1,e),e):0)}}}),o.cssHooks.marginRight=yb(l.reliableMarginRight,function(a,b){return b?o.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),o.each({margin:"",padding:"",border:"Width"},function(a,b){o.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(o.cssHooks[a+b].set=Gb)}),o.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(o.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=o.css(a,b[g],!1,d);return f}return void 0!==c?o.style(a,b,c):o.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?o(this).show():o(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}o.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(o.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?o.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=o.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){o.fx.step[a.prop]?o.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[o.cssProps[a.prop]]||o.cssHooks[a.prop])?o.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},o.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},o.fx=Kb.prototype.init,o.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(o.cssNumber[a]?"":"px"),g=(o.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(o.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,o.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=o.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&S(a),p=L.get(a,"fxshow");c.queue||(h=o._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,o.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=o.css(a,"display"),"none"===j&&(j=tb(a.nodeName)),"inline"===j&&"none"===o.css(a,"float")&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(n?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;n=!0}l[d]=p&&p[d]||o.style(a,d)}if(!o.isEmptyObject(l)){p?"hidden"in p&&(n=p.hidden):p=L.access(a,"fxshow",{}),f&&(p.hidden=!n),n?o(a).show():k.done(function(){o(a).hide()}),k.done(function(){var b;L.remove(a,"fxshow");for(b in l)o.style(a,b,l[b])});for(d in l)g=Ub(n?p[d]:0,d,k),d in p||(p[d]=g.start,n&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=o.camelCase(c),e=b[d],f=a[c],o.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=o.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=o.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:o.extend({},b),opts:o.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=o.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return o.map(k,Ub,j),o.isFunction(j.opts.start)&&j.opts.start.call(a,j),o.fx.timer(o.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}o.Animation=o.extend(Xb,{tweener:function(a,b){o.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),o.speed=function(a,b,c){var d=a&&"object"==typeof a?o.extend({},a):{complete:c||!c&&b||o.isFunction(a)&&a,duration:a,easing:c&&b||b&&!o.isFunction(b)&&b};return d.duration=o.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in o.fx.speeds?o.fx.speeds[d.duration]:o.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){o.isFunction(d.old)&&d.old.call(this),d.queue&&o.dequeue(this,d.queue)},d},o.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=o.isEmptyObject(a),f=o.speed(b,c,d),g=function(){var b=Xb(this,o.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=o.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&o.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=o.timers,g=d?d.length:0;for(c.finish=!0,o.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),o.each(["toggle","show","hide"],function(a,b){var c=o.fn[b];o.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),o.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){o.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),o.timers=[],o.fx.tick=function(){var a,b=0,c=o.timers;for(Lb=o.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||o.fx.stop(),Lb=void 0},o.fx.timer=function(a){o.timers.push(a),a()?o.fx.start():o.timers.pop()},o.fx.interval=13,o.fx.start=function(){Mb||(Mb=setInterval(o.fx.tick,o.fx.interval))},o.fx.stop=function(){clearInterval(Mb),Mb=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(a,b){return a=o.fx?o.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=m.createElement("input"),b=m.createElement("select"),c=b.appendChild(m.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=m.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var Yb,Zb,$b=o.expr.attrHandle;o.fn.extend({attr:function(a,b){return J(this,o.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){o.removeAttr(this,a)})}}),o.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?o.prop(a,b,c):(1===f&&o.isXMLDoc(a)||(b=b.toLowerCase(),d=o.attrHooks[b]||(o.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=o.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void o.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=o.propFix[c]||c,o.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&o.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?o.removeAttr(a,c):a.setAttribute(c,c),c}},o.each(o.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||o.find.attr;$b[b]=function(a,b,d){var e,f;
return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;o.fn.extend({prop:function(a,b){return J(this,o.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[o.propFix[a]||a]})}}),o.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!o.isXMLDoc(a),f&&(b=o.propFix[b]||b,e=o.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),l.optSelected||(o.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;o.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(o.isFunction(a))return this.each(function(b){o(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=o.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(o.isFunction(a))return this.each(function(b){o(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?o.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(o.isFunction(a)?function(c){o(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=o(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;o.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=o.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,o(this).val()):a,null==e?e="":"number"==typeof e?e+="":o.isArray(e)&&(e=o.map(e,function(a){return null==a?"":a+""})),b=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=o.valHooks[e.type]||o.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),o.extend({valHooks:{select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&o.nodeName(c.parentNode,"optgroup"))){if(b=o(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=o.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=o.inArray(o(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(a,b){return o.isArray(b)?a.checked=o.inArray(o(a).val(),b)>=0:void 0}},l.checkOn||(o.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),o.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){o.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),o.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=o.now(),dc=/\?/;o.parseJSON=function(a){return JSON.parse(a+"")},o.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&o.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=m.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(o.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,o.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=o.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&o.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":o.parseJSON,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,o.ajaxSettings),b):tc(o.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=o.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?o(l):o.event,n=o.Deferred(),p=o.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(n.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=o.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=o.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===o.active++&&o.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(o.lastModified[d]&&v.setRequestHeader("If-Modified-Since",o.lastModified[d]),o.etag[d]&&v.setRequestHeader("If-None-Match",o.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(o.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(o.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?n.resolveWith(l,[r,x,v]):n.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--o.active||o.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return o.get(a,b,c,"json")},getScript:function(a,b){return o.get(a,void 0,b,"script")}}),o.each(["get","post"],function(a,b){o[b]=function(a,c,d,e){return o.isFunction(c)&&(e=e||d,d=c,c=void 0),o.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){o.fn[b]=function(a){return this.on(b,a)}}),o._evalUrl=function(a){return o.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},o.fn.extend({wrapAll:function(a){var b;return o.isFunction(a)?this.each(function(b){o(this).wrapAll(a.call(this,b))}):(this[0]&&(b=o(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(o.isFunction(a)?function(b){o(this).wrapInner(a.call(this,b))}:function(){var b=o(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=o.isFunction(a);return this.each(function(c){o(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){o.nodeName(this,"body")||o(this).replaceWith(this.childNodes)}).end()}}),o.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},o.expr.filters.visible=function(a){return!o.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(o.isArray(b))o.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==o.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}o.param=function(a,b){var c,d=[],e=function(a,b){b=o.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=o.ajaxSettings&&o.ajaxSettings.traditional),o.isArray(a)||a.jquery&&!o.isPlainObject(a))o.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=o.prop(this,"elements");return a?o.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!o(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=o(this).val();return null==c?null:o.isArray(c)?o.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),o.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=o.ajaxSettings.xhr();a.ActiveXObject&&o(a).on("unload",function(){for(var a in Dc)Dc[a]()}),l.cors=!!Fc&&"withCredentials"in Fc,l.ajax=Fc=!!Fc,o.ajaxTransport(function(a){var b;return l.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort"),f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}:void 0}),o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return o.globalEval(a),a}}}),o.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),o.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=o("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),m.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||o.expando+"_"+cc++;return this[a]=!0,a}}),o.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=o.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||o.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&o.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),o.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||m;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=o.buildFragment([a],b,e),e&&e.length&&o(e).remove(),o.merge([],d.childNodes))};var Ic=o.fn.load;o.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),o.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&o.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?o("<div>").append(o.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},o.expr.filters.animated=function(a){return o.grep(o.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return o.isWindow(a)?a:9===a.nodeType&&a.defaultView}o.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=o.css(a,"position"),l=o(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=o.css(a,"top"),i=o.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),o.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},o.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){o.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,o.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===o.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),o.nodeName(a[0],"html")||(d=a.offset()),d.top+=o.css(a[0],"borderTopWidth",!0),d.left+=o.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-o.css(c,"marginTop",!0),left:b.left-d.left-o.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!o.nodeName(a,"html")&&"static"===o.css(a,"position"))a=a.offsetParent;return a||Jc})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;o.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),o.each(["top","left"],function(a,b){o.cssHooks[b]=yb(l.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?o(a).position()[b]+"px":c):void 0})}),o.each({Height:"height",Width:"width"},function(a,b){o.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){o.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return o.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?o.css(b,c,g):o.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),o.fn.size=function(){return this.length},o.fn.andSelf=o.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return o});var Lc=a.jQuery,Mc=a.$;return o.noConflict=function(b){return a.$===o&&(a.$=Mc),b&&a.jQuery===o&&(a.jQuery=Lc),o},typeof b===U&&(a.jQuery=a.$=o),o});

/*! jQuery Migrate v1.2.1 | (c) 2005, 2013 jQuery Foundation, Inc. and other contributors | jquery.org/license */
jQuery.migrateMute===void 0&&(jQuery.migrateMute=!0),function(e,t,n){function r(n){var r=t.console;i[n]||(i[n]=!0,e.migrateWarnings.push(n),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+n),e.migrateTrace&&r.trace&&r.trace()))}function a(t,a,i,o){if(Object.defineProperty)try{return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return r(o),i},set:function(e){r(o),i=e}}),n}catch(s){}e._definePropertyBroken=!0,t[a]=i}var i={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){i={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,s=e.attr,u=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,d=/^[238]$/,p=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;a(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,a,i,u){var c=a.toLowerCase(),g=t&&t.nodeType;return u&&(4>s.length&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!d.test(g)&&(o?a in o:e.isFunction(e.fn[a])))?e(t)[a](i):("type"===a&&i!==n&&l.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[c]&&p.test(c)&&(e.attrHooks[c]={get:function(t,r){var a,i=e.prop(t,r);return i===!0||"boolean"!=typeof i&&(a=t.getAttributeNode(r))&&a.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var a;return n===!1?e.removeAttr(t,r):(a=e.propFix[r]||r,a in t&&(t[a]=!0),t.setAttribute(r,r.toLowerCase())),r}},f.test(c)&&r("jQuery.fn.attr('"+c+"') may use property instead of attribute")),s.call(e,t,a,i))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?u.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var a=(e.nodeName||"").toLowerCase();return"button"===a?c.apply(this,arguments):("input"!==a&&"option"!==a&&r("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t,n)}};var g,h,v=e.fn.init,m=e.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,n,a){var i;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(i=y.exec(e.trim(t)))&&i[0]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),i[3]&&r("$(html) HTML text after last tag is ignored"),"#"===i[0].charAt(0)&&(r("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context),e.parseHTML)?v.call(this,e.parseHTML(i[2],n,!0),n,a):v.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?m.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(g=e.uaMatch(navigator.userAgent),h={},g.browser&&(h[g.browser]=!0,h.version=g.version),h.chrome?h.webkit=!0:h.webkit&&(h.safari=!0),e.browser=h),a(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,a){return a&&a instanceof e&&!(a instanceof t)&&(a=t(a)),e.fn.init.call(this,r,a,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var b=e.fn.data;e.fn.data=function(t){var a,i,o=this[0];return!o||"events"!==t||1!==arguments.length||(a=e.data(o,t),i=e._data(o,t),a!==n&&a!==i||i===n)?b.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),i)};var j=/\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,a,i,o){a=a||document,a=!a.nodeType&&a[0]||a,a=a.ownerDocument||a,r("jQuery.clean() is deprecated");var s,u,c,l,d=[];if(e.merge(d,e.buildFragment(t,a).childNodes),i)for(c=function(e){return!e.type||j.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):n},s=0;null!=(u=d[s]);s++)e.nodeName(u,"script")&&c(u)||(i.appendChild(u),u.getElementsByTagName!==n&&(l=e.grep(e.merge([],u.getElementsByTagName("script")),c),d.splice.apply(d,[s+1,0].concat(l)),s+=l.length));return d});var Q=e.event.add,x=e.event.remove,k=e.event.trigger,N=e.fn.toggle,T=e.fn.live,M=e.fn.die,S="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",C=RegExp("\\b(?:"+S+")\\b"),H=/(?:^|\s)hover(\.\S+|)\b/,A=function(t){return"string"!=typeof t||e.event.special.hover?t:(H.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(H,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&a(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,a,i){e!==document&&C.test(t)&&r("AJAX events should be attached to document: "+t),Q.call(this,e,A(t||""),n,a,i)},e.event.remove=function(e,t,n,r,a){x.call(this,e,A(t)||"",n,r,a)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,i=t.guid||e.guid++,o=0,s=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),a[r].apply(this,arguments)||!1};for(s.guid=i;a.length>o;)a[o++].guid=i;return this.click(s)},e.fn.live=function(t,n,a){return r("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(e(this.context).on(t,this.selector,n,a),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),M?M.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,a){return n||C.test(e)||r("Global events are undocumented and deprecated"),k.call(this,e,t,n||document,a)},e.each(S.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window);
/*! jQuery UI - v1.11.3 - 2015-02-12
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

(function( factory ) {
	if ( typeof define === "function" && define.amd ) {

		// AMD. Register as an anonymous module.
		define([ "jquery" ], factory );
	} else {

		// Browser globals
		factory( jQuery );
	}
}(function( $ ) {
/*!
 * jQuery UI Core 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */


// $.ui might exist from components with no dependencies, e.g., $.ui.position
$.ui = $.ui || {};

$.extend( $.ui, {
	version: "1.11.3",

	keyCode: {
		BACKSPACE: 8,
		COMMA: 188,
		DELETE: 46,
		DOWN: 40,
		END: 35,
		ENTER: 13,
		ESCAPE: 27,
		HOME: 36,
		LEFT: 37,
		PAGE_DOWN: 34,
		PAGE_UP: 33,
		PERIOD: 190,
		RIGHT: 39,
		SPACE: 32,
		TAB: 9,
		UP: 38
	}
});

// plugins
$.fn.extend({
	scrollParent: function( includeHidden ) {
		var position = this.css( "position" ),
			excludeStaticParent = position === "absolute",
			overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
			scrollParent = this.parents().filter( function() {
				var parent = $( this );
				if ( excludeStaticParent && parent.css( "position" ) === "static" ) {
					return false;
				}
				return overflowRegex.test( parent.css( "overflow" ) + parent.css( "overflow-y" ) + parent.css( "overflow-x" ) );
			}).eq( 0 );

		return position === "fixed" || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;
	},

	uniqueId: (function() {
		var uuid = 0;

		return function() {
			return this.each(function() {
				if ( !this.id ) {
					this.id = "ui-id-" + ( ++uuid );
				}
			});
		};
	})(),

	removeUniqueId: function() {
		return this.each(function() {
			if ( /^ui-id-\d+$/.test( this.id ) ) {
				$( this ).removeAttr( "id" );
			}
		});
	}
});

// selectors
function focusable( element, isTabIndexNotNaN ) {
	var map, mapName, img,
		nodeName = element.nodeName.toLowerCase();
	if ( "area" === nodeName ) {
		map = element.parentNode;
		mapName = map.name;
		if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
			return false;
		}
		img = $( "img[usemap='#" + mapName + "']" )[ 0 ];
		return !!img && visible( img );
	}
	return ( /^(input|select|textarea|button|object)$/.test( nodeName ) ?
		!element.disabled :
		"a" === nodeName ?
			element.href || isTabIndexNotNaN :
			isTabIndexNotNaN) &&
		// the element and all of its ancestors must be visible
		visible( element );
}

function visible( element ) {
	return $.expr.filters.visible( element ) &&
		!$( element ).parents().addBack().filter(function() {
			return $.css( this, "visibility" ) === "hidden";
		}).length;
}

$.extend( $.expr[ ":" ], {
	data: $.expr.createPseudo ?
		$.expr.createPseudo(function( dataName ) {
			return function( elem ) {
				return !!$.data( elem, dataName );
			};
		}) :
		// support: jQuery <1.8
		function( elem, i, match ) {
			return !!$.data( elem, match[ 3 ] );
		},

	focusable: function( element ) {
		return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
	},

	tabbable: function( element ) {
		var tabIndex = $.attr( element, "tabindex" ),
			isTabIndexNaN = isNaN( tabIndex );
		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
	}
});

// support: jQuery <1.8
if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
	$.each( [ "Width", "Height" ], function( i, name ) {
		var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
			type = name.toLowerCase(),
			orig = {
				innerWidth: $.fn.innerWidth,
				innerHeight: $.fn.innerHeight,
				outerWidth: $.fn.outerWidth,
				outerHeight: $.fn.outerHeight
			};

		function reduce( elem, size, border, margin ) {
			$.each( side, function() {
				size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
				if ( border ) {
					size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
				}
				if ( margin ) {
					size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
				}
			});
			return size;
		}

		$.fn[ "inner" + name ] = function( size ) {
			if ( size === undefined ) {
				return orig[ "inner" + name ].call( this );
			}

			return this.each(function() {
				$( this ).css( type, reduce( this, size ) + "px" );
			});
		};

		$.fn[ "outer" + name] = function( size, margin ) {
			if ( typeof size !== "number" ) {
				return orig[ "outer" + name ].call( this, size );
			}

			return this.each(function() {
				$( this).css( type, reduce( this, size, true, margin ) + "px" );
			});
		};
	});
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
	$.fn.removeData = (function( removeData ) {
		return function( key ) {
			if ( arguments.length ) {
				return removeData.call( this, $.camelCase( key ) );
			} else {
				return removeData.call( this );
			}
		};
	})( $.fn.removeData );
}

// deprecated
$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );

$.fn.extend({
	focus: (function( orig ) {
		return function( delay, fn ) {
			return typeof delay === "number" ?
				this.each(function() {
					var elem = this;
					setTimeout(function() {
						$( elem ).focus();
						if ( fn ) {
							fn.call( elem );
						}
					}, delay );
				}) :
				orig.apply( this, arguments );
		};
	})( $.fn.focus ),

	disableSelection: (function() {
		var eventType = "onselectstart" in document.createElement( "div" ) ?
			"selectstart" :
			"mousedown";

		return function() {
			return this.bind( eventType + ".ui-disableSelection", function( event ) {
				event.preventDefault();
			});
		};
	})(),

	enableSelection: function() {
		return this.unbind( ".ui-disableSelection" );
	},

	zIndex: function( zIndex ) {
		if ( zIndex !== undefined ) {
			return this.css( "zIndex", zIndex );
		}

		if ( this.length ) {
			var elem = $( this[ 0 ] ), position, value;
			while ( elem.length && elem[ 0 ] !== document ) {
				// Ignore z-index if position is set to a value where z-index is ignored by the browser
				// This makes behavior of this function consistent across browsers
				// WebKit always returns auto if the element is positioned
				position = elem.css( "position" );
				if ( position === "absolute" || position === "relative" || position === "fixed" ) {
					// IE returns 0 when zIndex is not specified
					// other browsers return a string
					// we ignore the case of nested elements with an explicit value of 0
					// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
					value = parseInt( elem.css( "zIndex" ), 10 );
					if ( !isNaN( value ) && value !== 0 ) {
						return value;
					}
				}
				elem = elem.parent();
			}
		}

		return 0;
	}
});

// $.ui.plugin is deprecated. Use $.widget() extensions instead.
$.ui.plugin = {
	add: function( module, option, set ) {
		var i,
			proto = $.ui[ module ].prototype;
		for ( i in set ) {
			proto.plugins[ i ] = proto.plugins[ i ] || [];
			proto.plugins[ i ].push( [ option, set[ i ] ] );
		}
	},
	call: function( instance, name, args, allowDisconnected ) {
		var i,
			set = instance.plugins[ name ];

		if ( !set ) {
			return;
		}

		if ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {
			return;
		}

		for ( i = 0; i < set.length; i++ ) {
			if ( instance.options[ set[ i ][ 0 ] ] ) {
				set[ i ][ 1 ].apply( instance.element, args );
			}
		}
	}
};


/*!
 * jQuery UI Widget 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */


var widget_uuid = 0,
	widget_slice = Array.prototype.slice;

$.cleanData = (function( orig ) {
	return function( elems ) {
		var events, elem, i;
		for ( i = 0; (elem = elems[i]) != null; i++ ) {
			try {

				// Only trigger remove when necessary to save time
				events = $._data( elem, "events" );
				if ( events && events.remove ) {
					$( elem ).triggerHandler( "remove" );
				}

			// http://bugs.jquery.com/ticket/8235
			} catch ( e ) {}
		}
		orig( elems );
	};
})( $.cleanData );

$.widget = function( name, base, prototype ) {
	var fullName, existingConstructor, constructor, basePrototype,
		// proxiedPrototype allows the provided prototype to remain unmodified
		// so that it can be used as a mixin for multiple widgets (#8876)
		proxiedPrototype = {},
		namespace = name.split( "." )[ 0 ];

	name = name.split( "." )[ 1 ];
	fullName = namespace + "-" + name;

	if ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}

	// create selector for plugin
	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
		return !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = function( options, element ) {
		// allow instantiation without "new" keyword
		if ( !this._createWidget ) {
			return new constructor( options, element );
		}

		// allow instantiation without initializing for simple inheritance
		// must use "new" keyword (the code above always passes args)
		if ( arguments.length ) {
			this._createWidget( options, element );
		}
	};
	// extend with the existing constructor to carry over any static properties
	$.extend( constructor, existingConstructor, {
		version: prototype.version,
		// copy the object used to create the prototype in case we need to
		// redefine the widget later
		_proto: $.extend( {}, prototype ),
		// track widgets that inherit from this widget in case this widget is
		// redefined after a widget inherits from it
		_childConstructors: []
	});

	basePrototype = new base();
	// we need to make the options hash a property directly on the new instance
	// otherwise we'll modify the options hash on the prototype that we're
	// inheriting from
	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, function( prop, value ) {
		if ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			return;
		}
		proxiedPrototype[ prop ] = (function() {
			var _super = function() {
					return base.prototype[ prop ].apply( this, arguments );
				},
				_superApply = function( args ) {
					return base.prototype[ prop ].apply( this, args );
				};
			return function() {
				var __super = this._super,
					__superApply = this._superApply,
					returnValue;

				this._super = _super;
				this._superApply = _superApply;

				returnValue = value.apply( this, arguments );

				this._super = __super;
				this._superApply = __superApply;

				return returnValue;
			};
		})();
	});
	constructor.prototype = $.widget.extend( basePrototype, {
		// TODO: remove support for widgetEventPrefix
		// always use the name + a colon as the prefix, e.g., draggable:start
		// don't prefix for widgets that aren't DOM-based
		widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	});

	// If this widget is being redefined then we need to find all widgets that
	// are inheriting from it and redefine all of them so that they inherit from
	// the new version of this widget. We're essentially trying to replace one
	// level in the prototype chain.
	if ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, function( i, child ) {
			var childPrototype = child.prototype;

			// redefine the child widget using the same prototype that was
			// originally used, but inherit from the new version of the base
			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
		});
		// remove the list of existing child constructors from the old constructor
		// so the old child constructors can be garbage collected
		delete existingConstructor._childConstructors;
	} else {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );

	return constructor;
};

$.widget.extend = function( target ) {
	var input = widget_slice.call( arguments, 1 ),
		inputIndex = 0,
		inputLength = input.length,
		key,
		value;
	for ( ; inputIndex < inputLength; inputIndex++ ) {
		for ( key in input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
				// Clone objects
				if ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :
						// Don't extend strings, arrays, etc. with objects
						$.widget.extend( {}, value );
				// Copy everything else by reference
				} else {
					target[ key ] = value;
				}
			}
		}
	}
	return target;
};

$.widget.bridge = function( name, object ) {
	var fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = function( options ) {
		var isMethodCall = typeof options === "string",
			args = widget_slice.call( arguments, 1 ),
			returnValue = this;

		if ( isMethodCall ) {
			this.each(function() {
				var methodValue,
					instance = $.data( this, fullName );
				if ( options === "instance" ) {
					returnValue = instance;
					return false;
				}
				if ( !instance ) {
					return $.error( "cannot call methods on " + name + " prior to initialization; " +
						"attempted to call method '" + options + "'" );
				}
				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
				}
				methodValue = instance[ options ].apply( instance, args );
				if ( methodValue !== instance && methodValue !== undefined ) {
					returnValue = methodValue && methodValue.jquery ?
						returnValue.pushStack( methodValue.get() ) :
						methodValue;
					return false;
				}
			});
		} else {

			// Allow multiple hashes to be passed on init
			if ( args.length ) {
				options = $.widget.extend.apply( null, [ options ].concat(args) );
			}

			this.each(function() {
				var instance = $.data( this, fullName );
				if ( instance ) {
					instance.option( options || {} );
					if ( instance._init ) {
						instance._init();
					}
				} else {
					$.data( this, fullName, new object( options, this ) );
				}
			});
		}

		return returnValue;
	};
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: "widget",
	widgetEventPrefix: "",
	defaultElement: "<div>",
	options: {
		disabled: false,

		// callbacks
		create: null
	},
	_createWidget: function( options, element ) {
		element = $( element || this.defaultElement || this )[ 0 ];
		this.element = $( element );
		this.uuid = widget_uuid++;
		this.eventNamespace = "." + this.widgetName + this.uuid;

		this.bindings = $();
		this.hoverable = $();
		this.focusable = $();

		if ( element !== this ) {
			$.data( element, this.widgetFullName, this );
			this._on( true, this.element, {
				remove: function( event ) {
					if ( event.target === element ) {
						this.destroy();
					}
				}
			});
			this.document = $( element.style ?
				// element within the document
				element.ownerDocument :
				// element is window or document
				element.document || element );
			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
		}

		this.options = $.widget.extend( {},
			this.options,
			this._getCreateOptions(),
			options );

		this._create();
		this._trigger( "create", null, this._getCreateEventData() );
		this._init();
	},
	_getCreateOptions: $.noop,
	_getCreateEventData: $.noop,
	_create: $.noop,
	_init: $.noop,

	destroy: function() {
		this._destroy();
		// we can probably remove the unbind calls in 2.0
		// all event bindings should go through this._on()
		this.element
			.unbind( this.eventNamespace )
			.removeData( this.widgetFullName )
			// support: jquery <1.6.3
			// http://bugs.jquery.com/ticket/9413
			.removeData( $.camelCase( this.widgetFullName ) );
		this.widget()
			.unbind( this.eventNamespace )
			.removeAttr( "aria-disabled" )
			.removeClass(
				this.widgetFullName + "-disabled " +
				"ui-state-disabled" );

		// clean up events and states
		this.bindings.unbind( this.eventNamespace );
		this.hoverable.removeClass( "ui-state-hover" );
		this.focusable.removeClass( "ui-state-focus" );
	},
	_destroy: $.noop,

	widget: function() {
		return this.element;
	},

	option: function( key, value ) {
		var options = key,
			parts,
			curOption,
			i;

		if ( arguments.length === 0 ) {
			// don't return a reference to the internal hash
			return $.widget.extend( {}, this.options );
		}

		if ( typeof key === "string" ) {
			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
			options = {};
			parts = key.split( "." );
			key = parts.shift();
			if ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
				for ( i = 0; i < parts.length - 1; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				if ( arguments.length === 1 ) {
					return curOption[ key ] === undefined ? null : curOption[ key ];
				}
				curOption[ key ] = value;
			} else {
				if ( arguments.length === 1 ) {
					return this.options[ key ] === undefined ? null : this.options[ key ];
				}
				options[ key ] = value;
			}
		}

		this._setOptions( options );

		return this;
	},
	_setOptions: function( options ) {
		var key;

		for ( key in options ) {
			this._setOption( key, options[ key ] );
		}

		return this;
	},
	_setOption: function( key, value ) {
		this.options[ key ] = value;

		if ( key === "disabled" ) {
			this.widget()
				.toggleClass( this.widgetFullName + "-disabled", !!value );

			// If the widget is becoming disabled, then nothing is interactive
			if ( value ) {
				this.hoverable.removeClass( "ui-state-hover" );
				this.focusable.removeClass( "ui-state-focus" );
			}
		}

		return this;
	},

	enable: function() {
		return this._setOptions({ disabled: false });
	},
	disable: function() {
		return this._setOptions({ disabled: true });
	},

	_on: function( suppressDisabledCheck, element, handlers ) {
		var delegateElement,
			instance = this;

		// no suppressDisabledCheck flag, shuffle arguments
		if ( typeof suppressDisabledCheck !== "boolean" ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = false;
		}

		// no element argument, shuffle and use this.element
		if ( !handlers ) {
			handlers = element;
			element = this.element;
			delegateElement = this.widget();
		} else {
			element = delegateElement = $( element );
			this.bindings = this.bindings.add( element );
		}

		$.each( handlers, function( event, handler ) {
			function handlerProxy() {
				// allow widgets to customize the disabled handling
				// - disabled as an array instead of boolean
				// - disabled class as method for disabling individual parts
				if ( !suppressDisabledCheck &&
						( instance.options.disabled === true ||
							$( this ).hasClass( "ui-state-disabled" ) ) ) {
					return;
				}
				return ( typeof handler === "string" ? instance[ handler ] : handler )
					.apply( instance, arguments );
			}

			// copy the guid so direct unbinding works
			if ( typeof handler !== "string" ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			var match = event.match( /^([\w:-]*)\s*(.*)$/ ),
				eventName = match[1] + instance.eventNamespace,
				selector = match[2];
			if ( selector ) {
				delegateElement.delegate( selector, eventName, handlerProxy );
			} else {
				element.bind( eventName, handlerProxy );
			}
		});
	},

	_off: function( element, eventName ) {
		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) +
			this.eventNamespace;
		element.unbind( eventName ).undelegate( eventName );

		// Clear the stack to avoid memory leaks (#10056)
		this.bindings = $( this.bindings.not( element ).get() );
		this.focusable = $( this.focusable.not( element ).get() );
		this.hoverable = $( this.hoverable.not( element ).get() );
	},

	_delay: function( handler, delay ) {
		function handlerProxy() {
			return ( typeof handler === "string" ? instance[ handler ] : handler )
				.apply( instance, arguments );
		}
		var instance = this;
		return setTimeout( handlerProxy, delay || 0 );
	},

	_hoverable: function( element ) {
		this.hoverable = this.hoverable.add( element );
		this._on( element, {
			mouseenter: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-hover" );
			},
			mouseleave: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-hover" );
			}
		});
	},

	_focusable: function( element ) {
		this.focusable = this.focusable.add( element );
		this._on( element, {
			focusin: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-focus" );
			},
			focusout: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-focus" );
			}
		});
	},

	_trigger: function( type, event, data ) {
		var prop, orig,
			callback = this.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === this.widgetEventPrefix ?
			type :
			this.widgetEventPrefix + type ).toLowerCase();
		// the original event may come from any element
		// so we need to reset the target on the new event
		event.target = this.element[ 0 ];

		// copy original event properties over to the new event
		orig = event.originalEvent;
		if ( orig ) {
			for ( prop in orig ) {
				if ( !( prop in event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		this.element.trigger( event, data );
		return !( $.isFunction( callback ) &&
			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
		if ( typeof options === "string" ) {
			options = { effect: options };
		}
		var hasOptions,
			effectName = !options ?
				method :
				options === true || typeof options === "number" ?
					defaultEffect :
					options.effect || defaultEffect;
		options = options || {};
		if ( typeof options === "number" ) {
			options = { duration: options };
		}
		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;
		if ( options.delay ) {
			element.delay( options.delay );
		}
		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} else if ( effectName !== method && element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} else {
			element.queue(function( next ) {
				$( this )[ method ]();
				if ( callback ) {
					callback.call( element[ 0 ] );
				}
				next();
			});
		}
	};
});

var widget = $.widget;


/*!
 * jQuery UI Mouse 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */


var mouseHandled = false;
$( document ).mouseup( function() {
	mouseHandled = false;
});

var mouse = $.widget("ui.mouse", {
	version: "1.11.3",
	options: {
		cancel: "input,textarea,button,select,option",
		distance: 1,
		delay: 0
	},
	_mouseInit: function() {
		var that = this;

		this.element
			.bind("mousedown." + this.widgetName, function(event) {
				return that._mouseDown(event);
			})
			.bind("click." + this.widgetName, function(event) {
				if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {
					$.removeData(event.target, that.widgetName + ".preventClickEvent");
					event.stopImmediatePropagation();
					return false;
				}
			});

		this.started = false;
	},

	// TODO: make sure destroying one instance of mouse doesn't mess with
	// other instances of mouse
	_mouseDestroy: function() {
		this.element.unbind("." + this.widgetName);
		if ( this._mouseMoveDelegate ) {
			this.document
				.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate)
				.unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
		}
	},

	_mouseDown: function(event) {
		// don't let more than one widget handle mouseStart
		if ( mouseHandled ) {
			return;
		}

		this._mouseMoved = false;

		// we may have missed mouseup (out of window)
		(this._mouseStarted && this._mouseUp(event));

		this._mouseDownEvent = event;

		var that = this,
			btnIsLeft = (event.which === 1),
			// event.target.nodeName works around a bug in IE 8 with
			// disabled inputs (#7620)
			elIsCancel = (typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
		if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
			return true;
		}

		this.mouseDelayMet = !this.options.delay;
		if (!this.mouseDelayMet) {
			this._mouseDelayTimer = setTimeout(function() {
				that.mouseDelayMet = true;
			}, this.options.delay);
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted = (this._mouseStart(event) !== false);
			if (!this._mouseStarted) {
				event.preventDefault();
				return true;
			}
		}

		// Click event may never have fired (Gecko & Opera)
		if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {
			$.removeData(event.target, this.widgetName + ".preventClickEvent");
		}

		// these delegates are required to keep context
		this._mouseMoveDelegate = function(event) {
			return that._mouseMove(event);
		};
		this._mouseUpDelegate = function(event) {
			return that._mouseUp(event);
		};

		this.document
			.bind( "mousemove." + this.widgetName, this._mouseMoveDelegate )
			.bind( "mouseup." + this.widgetName, this._mouseUpDelegate );

		event.preventDefault();

		mouseHandled = true;
		return true;
	},

	_mouseMove: function(event) {
		// Only check for mouseups outside the document if you've moved inside the document
		// at least once. This prevents the firing of mouseup in the case of IE<9, which will
		// fire a mousemove event if content is placed under the cursor. See #7778
		// Support: IE <9
		if ( this._mouseMoved ) {
			// IE mouseup check - mouseup happened when mouse was out of window
			if ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {
				return this._mouseUp(event);

			// Iframe mouseup check - mouseup occurred in another document
			} else if ( !event.which ) {
				return this._mouseUp( event );
			}
		}

		if ( event.which || event.button ) {
			this._mouseMoved = true;
		}

		if (this._mouseStarted) {
			this._mouseDrag(event);
			return event.preventDefault();
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted =
				(this._mouseStart(this._mouseDownEvent, event) !== false);
			(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
		}

		return !this._mouseStarted;
	},

	_mouseUp: function(event) {
		this.document
			.unbind( "mousemove." + this.widgetName, this._mouseMoveDelegate )
			.unbind( "mouseup." + this.widgetName, this._mouseUpDelegate );

		if (this._mouseStarted) {
			this._mouseStarted = false;

			if (event.target === this._mouseDownEvent.target) {
				$.data(event.target, this.widgetName + ".preventClickEvent", true);
			}

			this._mouseStop(event);
		}

		mouseHandled = false;
		return false;
	},

	_mouseDistanceMet: function(event) {
		return (Math.max(
				Math.abs(this._mouseDownEvent.pageX - event.pageX),
				Math.abs(this._mouseDownEvent.pageY - event.pageY)
			) >= this.options.distance
		);
	},

	_mouseDelayMet: function(/* event */) {
		return this.mouseDelayMet;
	},

	// These are placeholder methods, to be overriden by extending plugin
	_mouseStart: function(/* event */) {},
	_mouseDrag: function(/* event */) {},
	_mouseStop: function(/* event */) {},
	_mouseCapture: function(/* event */) { return true; }
});


/*!
 * jQuery UI Position 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

(function() {

$.ui = $.ui || {};

var cachedScrollbarWidth, supportsOffsetFractions,
	max = Math.max,
	abs = Math.abs,
	round = Math.round,
	rhorizontal = /left|center|right/,
	rvertical = /top|center|bottom/,
	roffset = /[\+\-]\d+(\.[\d]+)?%?/,
	rposition = /^\w+/,
	rpercent = /%$/,
	_position = $.fn.position;

function getOffsets( offsets, width, height ) {
	return [
		parseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),
		parseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )
	];
}

function parseCss( element, property ) {
	return parseInt( $.css( element, property ), 10 ) || 0;
}

function getDimensions( elem ) {
	var raw = elem[0];
	if ( raw.nodeType === 9 ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: 0, left: 0 }
		};
	}
	if ( $.isWindow( raw ) ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: elem.scrollTop(), left: elem.scrollLeft() }
		};
	}
	if ( raw.preventDefault ) {
		return {
			width: 0,
			height: 0,
			offset: { top: raw.pageY, left: raw.pageX }
		};
	}
	return {
		width: elem.outerWidth(),
		height: elem.outerHeight(),
		offset: elem.offset()
	};
}

$.position = {
	scrollbarWidth: function() {
		if ( cachedScrollbarWidth !== undefined ) {
			return cachedScrollbarWidth;
		}
		var w1, w2,
			div = $( "<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>" ),
			innerDiv = div.children()[0];

		$( "body" ).append( div );
		w1 = innerDiv.offsetWidth;
		div.css( "overflow", "scroll" );

		w2 = innerDiv.offsetWidth;

		if ( w1 === w2 ) {
			w2 = div[0].clientWidth;
		}

		div.remove();

		return (cachedScrollbarWidth = w1 - w2);
	},
	getScrollInfo: function( within ) {
		var overflowX = within.isWindow || within.isDocument ? "" :
				within.element.css( "overflow-x" ),
			overflowY = within.isWindow || within.isDocument ? "" :
				within.element.css( "overflow-y" ),
			hasOverflowX = overflowX === "scroll" ||
				( overflowX === "auto" && within.width < within.element[0].scrollWidth ),
			hasOverflowY = overflowY === "scroll" ||
				( overflowY === "auto" && within.height < within.element[0].scrollHeight );
		return {
			width: hasOverflowY ? $.position.scrollbarWidth() : 0,
			height: hasOverflowX ? $.position.scrollbarWidth() : 0
		};
	},
	getWithinInfo: function( element ) {
		var withinElement = $( element || window ),
			isWindow = $.isWindow( withinElement[0] ),
			isDocument = !!withinElement[ 0 ] && withinElement[ 0 ].nodeType === 9;
		return {
			element: withinElement,
			isWindow: isWindow,
			isDocument: isDocument,
			offset: withinElement.offset() || { left: 0, top: 0 },
			scrollLeft: withinElement.scrollLeft(),
			scrollTop: withinElement.scrollTop(),

			// support: jQuery 1.6.x
			// jQuery 1.6 doesn't support .outerWidth/Height() on documents or windows
			width: isWindow || isDocument ? withinElement.width() : withinElement.outerWidth(),
			height: isWindow || isDocument ? withinElement.height() : withinElement.outerHeight()
		};
	}
};

$.fn.position = function( options ) {
	if ( !options || !options.of ) {
		return _position.apply( this, arguments );
	}

	// make a copy, we don't want to modify arguments
	options = $.extend( {}, options );

	var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,
		target = $( options.of ),
		within = $.position.getWithinInfo( options.within ),
		scrollInfo = $.position.getScrollInfo( within ),
		collision = ( options.collision || "flip" ).split( " " ),
		offsets = {};

	dimensions = getDimensions( target );
	if ( target[0].preventDefault ) {
		// force left top to allow flipping
		options.at = "left top";
	}
	targetWidth = dimensions.width;
	targetHeight = dimensions.height;
	targetOffset = dimensions.offset;
	// clone to reuse original targetOffset later
	basePosition = $.extend( {}, targetOffset );

	// force my and at to have valid horizontal and vertical positions
	// if a value is missing or invalid, it will be converted to center
	$.each( [ "my", "at" ], function() {
		var pos = ( options[ this ] || "" ).split( " " ),
			horizontalOffset,
			verticalOffset;

		if ( pos.length === 1) {
			pos = rhorizontal.test( pos[ 0 ] ) ?
				pos.concat( [ "center" ] ) :
				rvertical.test( pos[ 0 ] ) ?
					[ "center" ].concat( pos ) :
					[ "center", "center" ];
		}
		pos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : "center";
		pos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : "center";

		// calculate offsets
		horizontalOffset = roffset.exec( pos[ 0 ] );
		verticalOffset = roffset.exec( pos[ 1 ] );
		offsets[ this ] = [
			horizontalOffset ? horizontalOffset[ 0 ] : 0,
			verticalOffset ? verticalOffset[ 0 ] : 0
		];

		// reduce to just the positions without the offsets
		options[ this ] = [
			rposition.exec( pos[ 0 ] )[ 0 ],
			rposition.exec( pos[ 1 ] )[ 0 ]
		];
	});

	// normalize collision option
	if ( collision.length === 1 ) {
		collision[ 1 ] = collision[ 0 ];
	}

	if ( options.at[ 0 ] === "right" ) {
		basePosition.left += targetWidth;
	} else if ( options.at[ 0 ] === "center" ) {
		basePosition.left += targetWidth / 2;
	}

	if ( options.at[ 1 ] === "bottom" ) {
		basePosition.top += targetHeight;
	} else if ( options.at[ 1 ] === "center" ) {
		basePosition.top += targetHeight / 2;
	}

	atOffset = getOffsets( offsets.at, targetWidth, targetHeight );
	basePosition.left += atOffset[ 0 ];
	basePosition.top += atOffset[ 1 ];

	return this.each(function() {
		var collisionPosition, using,
			elem = $( this ),
			elemWidth = elem.outerWidth(),
			elemHeight = elem.outerHeight(),
			marginLeft = parseCss( this, "marginLeft" ),
			marginTop = parseCss( this, "marginTop" ),
			collisionWidth = elemWidth + marginLeft + parseCss( this, "marginRight" ) + scrollInfo.width,
			collisionHeight = elemHeight + marginTop + parseCss( this, "marginBottom" ) + scrollInfo.height,
			position = $.extend( {}, basePosition ),
			myOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );

		if ( options.my[ 0 ] === "right" ) {
			position.left -= elemWidth;
		} else if ( options.my[ 0 ] === "center" ) {
			position.left -= elemWidth / 2;
		}

		if ( options.my[ 1 ] === "bottom" ) {
			position.top -= elemHeight;
		} else if ( options.my[ 1 ] === "center" ) {
			position.top -= elemHeight / 2;
		}

		position.left += myOffset[ 0 ];
		position.top += myOffset[ 1 ];

		// if the browser doesn't support fractions, then round for consistent results
		if ( !supportsOffsetFractions ) {
			position.left = round( position.left );
			position.top = round( position.top );
		}

		collisionPosition = {
			marginLeft: marginLeft,
			marginTop: marginTop
		};

		$.each( [ "left", "top" ], function( i, dir ) {
			if ( $.ui.position[ collision[ i ] ] ) {
				$.ui.position[ collision[ i ] ][ dir ]( position, {
					targetWidth: targetWidth,
					targetHeight: targetHeight,
					elemWidth: elemWidth,
					elemHeight: elemHeight,
					collisionPosition: collisionPosition,
					collisionWidth: collisionWidth,
					collisionHeight: collisionHeight,
					offset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],
					my: options.my,
					at: options.at,
					within: within,
					elem: elem
				});
			}
		});

		if ( options.using ) {
			// adds feedback as second argument to using callback, if present
			using = function( props ) {
				var left = targetOffset.left - position.left,
					right = left + targetWidth - elemWidth,
					top = targetOffset.top - position.top,
					bottom = top + targetHeight - elemHeight,
					feedback = {
						target: {
							element: target,
							left: targetOffset.left,
							top: targetOffset.top,
							width: targetWidth,
							height: targetHeight
						},
						element: {
							element: elem,
							left: position.left,
							top: position.top,
							width: elemWidth,
							height: elemHeight
						},
						horizontal: right < 0 ? "left" : left > 0 ? "right" : "center",
						vertical: bottom < 0 ? "top" : top > 0 ? "bottom" : "middle"
					};
				if ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {
					feedback.horizontal = "center";
				}
				if ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {
					feedback.vertical = "middle";
				}
				if ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {
					feedback.important = "horizontal";
				} else {
					feedback.important = "vertical";
				}
				options.using.call( this, props, feedback );
			};
		}

		elem.offset( $.extend( position, { using: using } ) );
	});
};

$.ui.position = {
	fit: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollLeft : within.offset.left,
				outerWidth = within.width,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = withinOffset - collisionPosLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,
				newOverRight;

			// element is wider than within
			if ( data.collisionWidth > outerWidth ) {
				// element is initially over the left side of within
				if ( overLeft > 0 && overRight <= 0 ) {
					newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;
					position.left += overLeft - newOverRight;
				// element is initially over right side of within
				} else if ( overRight > 0 && overLeft <= 0 ) {
					position.left = withinOffset;
				// element is initially over both left and right sides of within
				} else {
					if ( overLeft > overRight ) {
						position.left = withinOffset + outerWidth - data.collisionWidth;
					} else {
						position.left = withinOffset;
					}
				}
			// too far left -> align with left edge
			} else if ( overLeft > 0 ) {
				position.left += overLeft;
			// too far right -> align with right edge
			} else if ( overRight > 0 ) {
				position.left -= overRight;
			// adjust based on position and margin
			} else {
				position.left = max( position.left - collisionPosLeft, position.left );
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollTop : within.offset.top,
				outerHeight = data.within.height,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = withinOffset - collisionPosTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,
				newOverBottom;

			// element is taller than within
			if ( data.collisionHeight > outerHeight ) {
				// element is initially over the top of within
				if ( overTop > 0 && overBottom <= 0 ) {
					newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;
					position.top += overTop - newOverBottom;
				// element is initially over bottom of within
				} else if ( overBottom > 0 && overTop <= 0 ) {
					position.top = withinOffset;
				// element is initially over both top and bottom of within
				} else {
					if ( overTop > overBottom ) {
						position.top = withinOffset + outerHeight - data.collisionHeight;
					} else {
						position.top = withinOffset;
					}
				}
			// too far up -> align with top
			} else if ( overTop > 0 ) {
				position.top += overTop;
			// too far down -> align with bottom edge
			} else if ( overBottom > 0 ) {
				position.top -= overBottom;
			// adjust based on position and margin
			} else {
				position.top = max( position.top - collisionPosTop, position.top );
			}
		}
	},
	flip: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.left + within.scrollLeft,
				outerWidth = within.width,
				offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = collisionPosLeft - offsetLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,
				myOffset = data.my[ 0 ] === "left" ?
					-data.elemWidth :
					data.my[ 0 ] === "right" ?
						data.elemWidth :
						0,
				atOffset = data.at[ 0 ] === "left" ?
					data.targetWidth :
					data.at[ 0 ] === "right" ?
						-data.targetWidth :
						0,
				offset = -2 * data.offset[ 0 ],
				newOverRight,
				newOverLeft;

			if ( overLeft < 0 ) {
				newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;
				if ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {
					position.left += myOffset + atOffset + offset;
				}
			} else if ( overRight > 0 ) {
				newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;
				if ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {
					position.left += myOffset + atOffset + offset;
				}
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.top + within.scrollTop,
				outerHeight = within.height,
				offsetTop = within.isWindow ? within.scrollTop : within.offset.top,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = collisionPosTop - offsetTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,
				top = data.my[ 1 ] === "top",
				myOffset = top ?
					-data.elemHeight :
					data.my[ 1 ] === "bottom" ?
						data.elemHeight :
						0,
				atOffset = data.at[ 1 ] === "top" ?
					data.targetHeight :
					data.at[ 1 ] === "bottom" ?
						-data.targetHeight :
						0,
				offset = -2 * data.offset[ 1 ],
				newOverTop,
				newOverBottom;
			if ( overTop < 0 ) {
				newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;
				if ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) {
					position.top += myOffset + atOffset + offset;
				}
			} else if ( overBottom > 0 ) {
				newOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;
				if ( newOverTop > 0 || abs( newOverTop ) < overBottom ) {
					position.top += myOffset + atOffset + offset;
				}
			}
		}
	},
	flipfit: {
		left: function() {
			$.ui.position.flip.left.apply( this, arguments );
			$.ui.position.fit.left.apply( this, arguments );
		},
		top: function() {
			$.ui.position.flip.top.apply( this, arguments );
			$.ui.position.fit.top.apply( this, arguments );
		}
	}
};

// fraction support test
(function() {
	var testElement, testElementParent, testElementStyle, offsetLeft, i,
		body = document.getElementsByTagName( "body" )[ 0 ],
		div = document.createElement( "div" );

	//Create a "fake body" for testing based on method used in jQuery.support
	testElement = document.createElement( body ? "div" : "body" );
	testElementStyle = {
		visibility: "hidden",
		width: 0,
		height: 0,
		border: 0,
		margin: 0,
		background: "none"
	};
	if ( body ) {
		$.extend( testElementStyle, {
			position: "absolute",
			left: "-1000px",
			top: "-1000px"
		});
	}
	for ( i in testElementStyle ) {
		testElement.style[ i ] = testElementStyle[ i ];
	}
	testElement.appendChild( div );
	testElementParent = body || document.documentElement;
	testElementParent.insertBefore( testElement, testElementParent.firstChild );

	div.style.cssText = "position: absolute; left: 10.7432222px;";

	offsetLeft = $( div ).offset().left;
	supportsOffsetFractions = offsetLeft > 10 && offsetLeft < 11;

	testElement.innerHTML = "";
	testElementParent.removeChild( testElement );
})();

})();

var position = $.ui.position;


/*!
 * jQuery UI Accordion 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/accordion/
 */


var accordion = $.widget( "ui.accordion", {
	version: "1.11.3",
	options: {
		active: 0,
		animate: {},
		collapsible: false,
		event: "click",
		header: "> li > :first-child,> :not(li):even",
		heightStyle: "auto",
		icons: {
			activeHeader: "ui-icon-triangle-1-s",
			header: "ui-icon-triangle-1-e"
		},

		// callbacks
		activate: null,
		beforeActivate: null
	},

	hideProps: {
		borderTopWidth: "hide",
		borderBottomWidth: "hide",
		paddingTop: "hide",
		paddingBottom: "hide",
		height: "hide"
	},

	showProps: {
		borderTopWidth: "show",
		borderBottomWidth: "show",
		paddingTop: "show",
		paddingBottom: "show",
		height: "show"
	},

	_create: function() {
		var options = this.options;
		this.prevShow = this.prevHide = $();
		this.element.addClass( "ui-accordion ui-widget ui-helper-reset" )
			// ARIA
			.attr( "role", "tablist" );

		// don't allow collapsible: false and active: false / null
		if ( !options.collapsible && (options.active === false || options.active == null) ) {
			options.active = 0;
		}

		this._processPanels();
		// handle negative values
		if ( options.active < 0 ) {
			options.active += this.headers.length;
		}
		this._refresh();
	},

	_getCreateEventData: function() {
		return {
			header: this.active,
			panel: !this.active.length ? $() : this.active.next()
		};
	},

	_createIcons: function() {
		var icons = this.options.icons;
		if ( icons ) {
			$( "<span>" )
				.addClass( "ui-accordion-header-icon ui-icon " + icons.header )
				.prependTo( this.headers );
			this.active.children( ".ui-accordion-header-icon" )
				.removeClass( icons.header )
				.addClass( icons.activeHeader );
			this.headers.addClass( "ui-accordion-icons" );
		}
	},

	_destroyIcons: function() {
		this.headers
			.removeClass( "ui-accordion-icons" )
			.children( ".ui-accordion-header-icon" )
				.remove();
	},

	_destroy: function() {
		var contents;

		// clean up main element
		this.element
			.removeClass( "ui-accordion ui-widget ui-helper-reset" )
			.removeAttr( "role" );

		// clean up headers
		this.headers
			.removeClass( "ui-accordion-header ui-accordion-header-active ui-state-default " +
				"ui-corner-all ui-state-active ui-state-disabled ui-corner-top" )
			.removeAttr( "role" )
			.removeAttr( "aria-expanded" )
			.removeAttr( "aria-selected" )
			.removeAttr( "aria-controls" )
			.removeAttr( "tabIndex" )
			.removeUniqueId();

		this._destroyIcons();

		// clean up content panels
		contents = this.headers.next()
			.removeClass( "ui-helper-reset ui-widget-content ui-corner-bottom " +
				"ui-accordion-content ui-accordion-content-active ui-state-disabled" )
			.css( "display", "" )
			.removeAttr( "role" )
			.removeAttr( "aria-hidden" )
			.removeAttr( "aria-labelledby" )
			.removeUniqueId();

		if ( this.options.heightStyle !== "content" ) {
			contents.css( "height", "" );
		}
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {
			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		if ( key === "event" ) {
			if ( this.options.event ) {
				this._off( this.headers, this.options.event );
			}
			this._setupEvents( value );
		}

		this._super( key, value );

		// setting collapsible: false while collapsed; open first panel
		if ( key === "collapsible" && !value && this.options.active === false ) {
			this._activate( 0 );
		}

		if ( key === "icons" ) {
			this._destroyIcons();
			if ( value ) {
				this._createIcons();
			}
		}

		// #5332 - opacity doesn't cascade to positioned elements in IE
		// so we need to add the disabled class to the headers and panels
		if ( key === "disabled" ) {
			this.element
				.toggleClass( "ui-state-disabled", !!value )
				.attr( "aria-disabled", value );
			this.headers.add( this.headers.next() )
				.toggleClass( "ui-state-disabled", !!value );
		}
	},

	_keydown: function( event ) {
		if ( event.altKey || event.ctrlKey ) {
			return;
		}

		var keyCode = $.ui.keyCode,
			length = this.headers.length,
			currentIndex = this.headers.index( event.target ),
			toFocus = false;

		switch ( event.keyCode ) {
			case keyCode.RIGHT:
			case keyCode.DOWN:
				toFocus = this.headers[ ( currentIndex + 1 ) % length ];
				break;
			case keyCode.LEFT:
			case keyCode.UP:
				toFocus = this.headers[ ( currentIndex - 1 + length ) % length ];
				break;
			case keyCode.SPACE:
			case keyCode.ENTER:
				this._eventHandler( event );
				break;
			case keyCode.HOME:
				toFocus = this.headers[ 0 ];
				break;
			case keyCode.END:
				toFocus = this.headers[ length - 1 ];
				break;
		}

		if ( toFocus ) {
			$( event.target ).attr( "tabIndex", -1 );
			$( toFocus ).attr( "tabIndex", 0 );
			toFocus.focus();
			event.preventDefault();
		}
	},

	_panelKeyDown: function( event ) {
		if ( event.keyCode === $.ui.keyCode.UP && event.ctrlKey ) {
			$( event.currentTarget ).prev().focus();
		}
	},

	refresh: function() {
		var options = this.options;
		this._processPanels();

		// was collapsed or no panel
		if ( ( options.active === false && options.collapsible === true ) || !this.headers.length ) {
			options.active = false;
			this.active = $();
		// active false only when collapsible is true
		} else if ( options.active === false ) {
			this._activate( 0 );
		// was active, but active panel is gone
		} else if ( this.active.length && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
			// all remaining panel are disabled
			if ( this.headers.length === this.headers.find(".ui-state-disabled").length ) {
				options.active = false;
				this.active = $();
			// activate previous panel
			} else {
				this._activate( Math.max( 0, options.active - 1 ) );
			}
		// was active, active panel still exists
		} else {
			// make sure active index is correct
			options.active = this.headers.index( this.active );
		}

		this._destroyIcons();

		this._refresh();
	},

	_processPanels: function() {
		var prevHeaders = this.headers,
			prevPanels = this.panels;

		this.headers = this.element.find( this.options.header )
			.addClass( "ui-accordion-header ui-state-default ui-corner-all" );

		this.panels = this.headers.next()
			.addClass( "ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" )
			.filter( ":not(.ui-accordion-content-active)" )
			.hide();

		// Avoid memory leaks (#10056)
		if ( prevPanels ) {
			this._off( prevHeaders.not( this.headers ) );
			this._off( prevPanels.not( this.panels ) );
		}
	},

	_refresh: function() {
		var maxHeight,
			options = this.options,
			heightStyle = options.heightStyle,
			parent = this.element.parent();

		this.active = this._findActive( options.active )
			.addClass( "ui-accordion-header-active ui-state-active ui-corner-top" )
			.removeClass( "ui-corner-all" );
		this.active.next()
			.addClass( "ui-accordion-content-active" )
			.show();

		this.headers
			.attr( "role", "tab" )
			.each(function() {
				var header = $( this ),
					headerId = header.uniqueId().attr( "id" ),
					panel = header.next(),
					panelId = panel.uniqueId().attr( "id" );
				header.attr( "aria-controls", panelId );
				panel.attr( "aria-labelledby", headerId );
			})
			.next()
				.attr( "role", "tabpanel" );

		this.headers
			.not( this.active )
			.attr({
				"aria-selected": "false",
				"aria-expanded": "false",
				tabIndex: -1
			})
			.next()
				.attr({
					"aria-hidden": "true"
				})
				.hide();

		// make sure at least one header is in the tab order
		if ( !this.active.length ) {
			this.headers.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active.attr({
				"aria-selected": "true",
				"aria-expanded": "true",
				tabIndex: 0
			})
			.next()
				.attr({
					"aria-hidden": "false"
				});
		}

		this._createIcons();

		this._setupEvents( options.event );

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			this.element.siblings( ":visible" ).each(function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			});

			this.headers.each(function() {
				maxHeight -= $( this ).outerHeight( true );
			});

			this.headers.next()
				.each(function() {
					$( this ).height( Math.max( 0, maxHeight -
						$( this ).innerHeight() + $( this ).height() ) );
				})
				.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.headers.next()
				.each(function() {
					maxHeight = Math.max( maxHeight, $( this ).css( "height", "" ).height() );
				})
				.height( maxHeight );
		}
	},

	_activate: function( index ) {
		var active = this._findActive( index )[ 0 ];

		// trying to activate the already active panel
		if ( active === this.active[ 0 ] ) {
			return;
		}

		// trying to collapse, simulate a click on the currently active header
		active = active || this.active[ 0 ];

		this._eventHandler({
			target: active,
			currentTarget: active,
			preventDefault: $.noop
		});
	},

	_findActive: function( selector ) {
		return typeof selector === "number" ? this.headers.eq( selector ) : $();
	},

	_setupEvents: function( event ) {
		var events = {
			keydown: "_keydown"
		};
		if ( event ) {
			$.each( event.split( " " ), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			});
		}

		this._off( this.headers.add( this.headers.next() ) );
		this._on( this.headers, events );
		this._on( this.headers.next(), { keydown: "_panelKeyDown" });
		this._hoverable( this.headers );
		this._focusable( this.headers );
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			clicked = $( event.currentTarget ),
			clickedIsActive = clicked[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : clicked.next(),
			toHide = active.next(),
			eventData = {
				oldHeader: active,
				oldPanel: toHide,
				newHeader: collapsing ? $() : clicked,
				newPanel: toShow
			};

		event.preventDefault();

		if (
				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||
				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.headers.index( clicked );

		// when the call to ._toggle() comes after the class changes
		// it causes a very odd bug in IE 8 (see #6720)
		this.active = clickedIsActive ? $() : clicked;
		this._toggle( eventData );

		// switch classes
		// corner classes on the previously active header stay after the animation
		active.removeClass( "ui-accordion-header-active ui-state-active" );
		if ( options.icons ) {
			active.children( ".ui-accordion-header-icon" )
				.removeClass( options.icons.activeHeader )
				.addClass( options.icons.header );
		}

		if ( !clickedIsActive ) {
			clicked
				.removeClass( "ui-corner-all" )
				.addClass( "ui-accordion-header-active ui-state-active ui-corner-top" );
			if ( options.icons ) {
				clicked.children( ".ui-accordion-header-icon" )
					.removeClass( options.icons.header )
					.addClass( options.icons.activeHeader );
			}

			clicked
				.next()
				.addClass( "ui-accordion-content-active" );
		}
	},

	_toggle: function( data ) {
		var toShow = data.newPanel,
			toHide = this.prevShow.length ? this.prevShow : data.oldPanel;

		// handle activating a panel during the animation for another activation
		this.prevShow.add( this.prevHide ).stop( true, true );
		this.prevShow = toShow;
		this.prevHide = toHide;

		if ( this.options.animate ) {
			this._animate( toShow, toHide, data );
		} else {
			toHide.hide();
			toShow.show();
			this._toggleComplete( data );
		}

		toHide.attr({
			"aria-hidden": "true"
		});
		toHide.prev().attr({
			"aria-selected": "false",
			"aria-expanded": "false"
		});
		// if we're switching panels, remove the old header from the tab order
		// if we're opening from collapsed state, remove the previous header from the tab order
		// if we're collapsing, then keep the collapsing header in the tab order
		if ( toShow.length && toHide.length ) {
			toHide.prev().attr({
				"tabIndex": -1,
				"aria-expanded": "false"
			});
		} else if ( toShow.length ) {
			this.headers.filter(function() {
				return parseInt( $( this ).attr( "tabIndex" ), 10 ) === 0;
			})
			.attr( "tabIndex", -1 );
		}

		toShow
			.attr( "aria-hidden", "false" )
			.prev()
				.attr({
					"aria-selected": "true",
					"aria-expanded": "true",
					tabIndex: 0
				});
	},

	_animate: function( toShow, toHide, data ) {
		var total, easing, duration,
			that = this,
			adjust = 0,
			down = toShow.length &&
				( !toHide.length || ( toShow.index() < toHide.index() ) ),
			animate = this.options.animate || {},
			options = down && animate.down || animate,
			complete = function() {
				that._toggleComplete( data );
			};

		if ( typeof options === "number" ) {
			duration = options;
		}
		if ( typeof options === "string" ) {
			easing = options;
		}
		// fall back from options to animation in case of partial down settings
		easing = easing || options.easing || animate.easing;
		duration = duration || options.duration || animate.duration;

		if ( !toHide.length ) {
			return toShow.animate( this.showProps, duration, easing, complete );
		}
		if ( !toShow.length ) {
			return toHide.animate( this.hideProps, duration, easing, complete );
		}

		total = toShow.show().outerHeight();
		toHide.animate( this.hideProps, {
			duration: duration,
			easing: easing,
			step: function( now, fx ) {
				fx.now = Math.round( now );
			}
		});
		toShow
			.hide()
			.animate( this.showProps, {
				duration: duration,
				easing: easing,
				complete: complete,
				step: function( now, fx ) {
					fx.now = Math.round( now );
					if ( fx.prop !== "height" ) {
						adjust += fx.now;
					} else if ( that.options.heightStyle !== "content" ) {
						fx.now = Math.round( total - toHide.outerHeight() - adjust );
						adjust = 0;
					}
				}
			});
	},

	_toggleComplete: function( data ) {
		var toHide = data.oldPanel;

		toHide
			.removeClass( "ui-accordion-content-active" )
			.prev()
				.removeClass( "ui-corner-top" )
				.addClass( "ui-corner-all" );

		// Work around for rendering bug in IE (#5421)
		if ( toHide.length ) {
			toHide.parent()[ 0 ].className = toHide.parent()[ 0 ].className;
		}
		this._trigger( "activate", null, data );
	}
});


/*!
 * jQuery UI Menu 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */


var menu = $.widget( "ui.menu", {
	version: "1.11.3",
	defaultElement: "<ul>",
	delay: 300,
	options: {
		icons: {
			submenu: "ui-icon-carat-1-e"
		},
		items: "> *",
		menus: "ul",
		position: {
			my: "left-1 top",
			at: "right top"
		},
		role: "menu",

		// callbacks
		blur: null,
		focus: null,
		select: null
	},

	_create: function() {
		this.activeMenu = this.element;

		// Flag used to prevent firing of the click handler
		// as the event bubbles up through nested menus
		this.mouseHandled = false;
		this.element
			.uniqueId()
			.addClass( "ui-menu ui-widget ui-widget-content" )
			.toggleClass( "ui-menu-icons", !!this.element.find( ".ui-icon" ).length )
			.attr({
				role: this.options.role,
				tabIndex: 0
			});

		if ( this.options.disabled ) {
			this.element
				.addClass( "ui-state-disabled" )
				.attr( "aria-disabled", "true" );
		}

		this._on({
			// Prevent focus from sticking to links inside menu after clicking
			// them (focus should always stay on UL during navigation).
			"mousedown .ui-menu-item": function( event ) {
				event.preventDefault();
			},
			"click .ui-menu-item": function( event ) {
				var target = $( event.target );
				if ( !this.mouseHandled && target.not( ".ui-state-disabled" ).length ) {
					this.select( event );

					// Only set the mouseHandled flag if the event will bubble, see #9469.
					if ( !event.isPropagationStopped() ) {
						this.mouseHandled = true;
					}

					// Open submenu on click
					if ( target.has( ".ui-menu" ).length ) {
						this.expand( event );
					} else if ( !this.element.is( ":focus" ) && $( this.document[ 0 ].activeElement ).closest( ".ui-menu" ).length ) {

						// Redirect focus to the menu
						this.element.trigger( "focus", [ true ] );

						// If the active item is on the top level, let it stay active.
						// Otherwise, blur the active item since it is no longer visible.
						if ( this.active && this.active.parents( ".ui-menu" ).length === 1 ) {
							clearTimeout( this.timer );
						}
					}
				}
			},
			"mouseenter .ui-menu-item": function( event ) {
				// Ignore mouse events while typeahead is active, see #10458.
				// Prevents focusing the wrong item when typeahead causes a scroll while the mouse
				// is over an item in the menu
				if ( this.previousFilter ) {
					return;
				}
				var target = $( event.currentTarget );
				// Remove ui-state-active class from siblings of the newly focused menu item
				// to avoid a jump caused by adjacent elements both having a class with a border
				target.siblings( ".ui-state-active" ).removeClass( "ui-state-active" );
				this.focus( event, target );
			},
			mouseleave: "collapseAll",
			"mouseleave .ui-menu": "collapseAll",
			focus: function( event, keepActiveItem ) {
				// If there's already an active item, keep it active
				// If not, activate the first item
				var item = this.active || this.element.find( this.options.items ).eq( 0 );

				if ( !keepActiveItem ) {
					this.focus( event, item );
				}
			},
			blur: function( event ) {
				this._delay(function() {
					if ( !$.contains( this.element[0], this.document[0].activeElement ) ) {
						this.collapseAll( event );
					}
				});
			},
			keydown: "_keydown"
		});

		this.refresh();

		// Clicks outside of a menu collapse any open menus
		this._on( this.document, {
			click: function( event ) {
				if ( this._closeOnDocumentClick( event ) ) {
					this.collapseAll( event );
				}

				// Reset the mouseHandled flag
				this.mouseHandled = false;
			}
		});
	},

	_destroy: function() {
		// Destroy (sub)menus
		this.element
			.removeAttr( "aria-activedescendant" )
			.find( ".ui-menu" ).addBack()
				.removeClass( "ui-menu ui-widget ui-widget-content ui-menu-icons ui-front" )
				.removeAttr( "role" )
				.removeAttr( "tabIndex" )
				.removeAttr( "aria-labelledby" )
				.removeAttr( "aria-expanded" )
				.removeAttr( "aria-hidden" )
				.removeAttr( "aria-disabled" )
				.removeUniqueId()
				.show();

		// Destroy menu items
		this.element.find( ".ui-menu-item" )
			.removeClass( "ui-menu-item" )
			.removeAttr( "role" )
			.removeAttr( "aria-disabled" )
			.removeUniqueId()
			.removeClass( "ui-state-hover" )
			.removeAttr( "tabIndex" )
			.removeAttr( "role" )
			.removeAttr( "aria-haspopup" )
			.children().each( function() {
				var elem = $( this );
				if ( elem.data( "ui-menu-submenu-carat" ) ) {
					elem.remove();
				}
			});

		// Destroy menu dividers
		this.element.find( ".ui-menu-divider" ).removeClass( "ui-menu-divider ui-widget-content" );
	},

	_keydown: function( event ) {
		var match, prev, character, skip,
			preventDefault = true;

		switch ( event.keyCode ) {
		case $.ui.keyCode.PAGE_UP:
			this.previousPage( event );
			break;
		case $.ui.keyCode.PAGE_DOWN:
			this.nextPage( event );
			break;
		case $.ui.keyCode.HOME:
			this._move( "first", "first", event );
			break;
		case $.ui.keyCode.END:
			this._move( "last", "last", event );
			break;
		case $.ui.keyCode.UP:
			this.previous( event );
			break;
		case $.ui.keyCode.DOWN:
			this.next( event );
			break;
		case $.ui.keyCode.LEFT:
			this.collapse( event );
			break;
		case $.ui.keyCode.RIGHT:
			if ( this.active && !this.active.is( ".ui-state-disabled" ) ) {
				this.expand( event );
			}
			break;
		case $.ui.keyCode.ENTER:
		case $.ui.keyCode.SPACE:
			this._activate( event );
			break;
		case $.ui.keyCode.ESCAPE:
			this.collapse( event );
			break;
		default:
			preventDefault = false;
			prev = this.previousFilter || "";
			character = String.fromCharCode( event.keyCode );
			skip = false;

			clearTimeout( this.filterTimer );

			if ( character === prev ) {
				skip = true;
			} else {
				character = prev + character;
			}

			match = this._filterMenuItems( character );
			match = skip && match.index( this.active.next() ) !== -1 ?
				this.active.nextAll( ".ui-menu-item" ) :
				match;

			// If no matches on the current filter, reset to the last character pressed
			// to move down the menu to the first item that starts with that character
			if ( !match.length ) {
				character = String.fromCharCode( event.keyCode );
				match = this._filterMenuItems( character );
			}

			if ( match.length ) {
				this.focus( event, match );
				this.previousFilter = character;
				this.filterTimer = this._delay(function() {
					delete this.previousFilter;
				}, 1000 );
			} else {
				delete this.previousFilter;
			}
		}

		if ( preventDefault ) {
			event.preventDefault();
		}
	},

	_activate: function( event ) {
		if ( !this.active.is( ".ui-state-disabled" ) ) {
			if ( this.active.is( "[aria-haspopup='true']" ) ) {
				this.expand( event );
			} else {
				this.select( event );
			}
		}
	},

	refresh: function() {
		var menus, items,
			that = this,
			icon = this.options.icons.submenu,
			submenus = this.element.find( this.options.menus );

		this.element.toggleClass( "ui-menu-icons", !!this.element.find( ".ui-icon" ).length );

		// Initialize nested menus
		submenus.filter( ":not(.ui-menu)" )
			.addClass( "ui-menu ui-widget ui-widget-content ui-front" )
			.hide()
			.attr({
				role: this.options.role,
				"aria-hidden": "true",
				"aria-expanded": "false"
			})
			.each(function() {
				var menu = $( this ),
					item = menu.parent(),
					submenuCarat = $( "<span>" )
						.addClass( "ui-menu-icon ui-icon " + icon )
						.data( "ui-menu-submenu-carat", true );

				item
					.attr( "aria-haspopup", "true" )
					.prepend( submenuCarat );
				menu.attr( "aria-labelledby", item.attr( "id" ) );
			});

		menus = submenus.add( this.element );
		items = menus.find( this.options.items );

		// Initialize menu-items containing spaces and/or dashes only as dividers
		items.not( ".ui-menu-item" ).each(function() {
			var item = $( this );
			if ( that._isDivider( item ) ) {
				item.addClass( "ui-widget-content ui-menu-divider" );
			}
		});

		// Don't refresh list items that are already adapted
		items.not( ".ui-menu-item, .ui-menu-divider" )
			.addClass( "ui-menu-item" )
			.uniqueId()
			.attr({
				tabIndex: -1,
				role: this._itemRole()
			});

		// Add aria-disabled attribute to any disabled menu item
		items.filter( ".ui-state-disabled" ).attr( "aria-disabled", "true" );

		// If the active item has been removed, blur the menu
		if ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
			this.blur();
		}
	},

	_itemRole: function() {
		return {
			menu: "menuitem",
			listbox: "option"
		}[ this.options.role ];
	},

	_setOption: function( key, value ) {
		if ( key === "icons" ) {
			this.element.find( ".ui-menu-icon" )
				.removeClass( this.options.icons.submenu )
				.addClass( value.submenu );
		}
		if ( key === "disabled" ) {
			this.element
				.toggleClass( "ui-state-disabled", !!value )
				.attr( "aria-disabled", value );
		}
		this._super( key, value );
	},

	focus: function( event, item ) {
		var nested, focused;
		this.blur( event, event && event.type === "focus" );

		this._scrollIntoView( item );

		this.active = item.first();
		focused = this.active.addClass( "ui-state-focus" ).removeClass( "ui-state-active" );
		// Only update aria-activedescendant if there's a role
		// otherwise we assume focus is managed elsewhere
		if ( this.options.role ) {
			this.element.attr( "aria-activedescendant", focused.attr( "id" ) );
		}

		// Highlight active parent menu item, if any
		this.active
			.parent()
			.closest( ".ui-menu-item" )
			.addClass( "ui-state-active" );

		if ( event && event.type === "keydown" ) {
			this._close();
		} else {
			this.timer = this._delay(function() {
				this._close();
			}, this.delay );
		}

		nested = item.children( ".ui-menu" );
		if ( nested.length && event && ( /^mouse/.test( event.type ) ) ) {
			this._startOpening(nested);
		}
		this.activeMenu = item.parent();

		this._trigger( "focus", event, { item: item } );
	},

	_scrollIntoView: function( item ) {
		var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;
		if ( this._hasScroll() ) {
			borderTop = parseFloat( $.css( this.activeMenu[0], "borderTopWidth" ) ) || 0;
			paddingTop = parseFloat( $.css( this.activeMenu[0], "paddingTop" ) ) || 0;
			offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;
			scroll = this.activeMenu.scrollTop();
			elementHeight = this.activeMenu.height();
			itemHeight = item.outerHeight();

			if ( offset < 0 ) {
				this.activeMenu.scrollTop( scroll + offset );
			} else if ( offset + itemHeight > elementHeight ) {
				this.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );
			}
		}
	},

	blur: function( event, fromFocus ) {
		if ( !fromFocus ) {
			clearTimeout( this.timer );
		}

		if ( !this.active ) {
			return;
		}

		this.active.removeClass( "ui-state-focus" );
		this.active = null;

		this._trigger( "blur", event, { item: this.active } );
	},

	_startOpening: function( submenu ) {
		clearTimeout( this.timer );

		// Don't open if already open fixes a Firefox bug that caused a .5 pixel
		// shift in the submenu position when mousing over the carat icon
		if ( submenu.attr( "aria-hidden" ) !== "true" ) {
			return;
		}

		this.timer = this._delay(function() {
			this._close();
			this._open( submenu );
		}, this.delay );
	},

	_open: function( submenu ) {
		var position = $.extend({
			of: this.active
		}, this.options.position );

		clearTimeout( this.timer );
		this.element.find( ".ui-menu" ).not( submenu.parents( ".ui-menu" ) )
			.hide()
			.attr( "aria-hidden", "true" );

		submenu
			.show()
			.removeAttr( "aria-hidden" )
			.attr( "aria-expanded", "true" )
			.position( position );
	},

	collapseAll: function( event, all ) {
		clearTimeout( this.timer );
		this.timer = this._delay(function() {
			// If we were passed an event, look for the submenu that contains the event
			var currentMenu = all ? this.element :
				$( event && event.target ).closest( this.element.find( ".ui-menu" ) );

			// If we found no valid submenu ancestor, use the main menu to close all sub menus anyway
			if ( !currentMenu.length ) {
				currentMenu = this.element;
			}

			this._close( currentMenu );

			this.blur( event );
			this.activeMenu = currentMenu;
		}, this.delay );
	},

	// With no arguments, closes the currently active menu - if nothing is active
	// it closes all menus.  If passed an argument, it will search for menus BELOW
	_close: function( startMenu ) {
		if ( !startMenu ) {
			startMenu = this.active ? this.active.parent() : this.element;
		}

		startMenu
			.find( ".ui-menu" )
				.hide()
				.attr( "aria-hidden", "true" )
				.attr( "aria-expanded", "false" )
			.end()
			.find( ".ui-state-active" ).not( ".ui-state-focus" )
				.removeClass( "ui-state-active" );
	},

	_closeOnDocumentClick: function( event ) {
		return !$( event.target ).closest( ".ui-menu" ).length;
	},

	_isDivider: function( item ) {

		// Match hyphen, em dash, en dash
		return !/[^\-\u2014\u2013\s]/.test( item.text() );
	},

	collapse: function( event ) {
		var newItem = this.active &&
			this.active.parent().closest( ".ui-menu-item", this.element );
		if ( newItem && newItem.length ) {
			this._close();
			this.focus( event, newItem );
		}
	},

	expand: function( event ) {
		var newItem = this.active &&
			this.active
				.children( ".ui-menu " )
				.find( this.options.items )
				.first();

		if ( newItem && newItem.length ) {
			this._open( newItem.parent() );

			// Delay so Firefox will not hide activedescendant change in expanding submenu from AT
			this._delay(function() {
				this.focus( event, newItem );
			});
		}
	},

	next: function( event ) {
		this._move( "next", "first", event );
	},

	previous: function( event ) {
		this._move( "prev", "last", event );
	},

	isFirstItem: function() {
		return this.active && !this.active.prevAll( ".ui-menu-item" ).length;
	},

	isLastItem: function() {
		return this.active && !this.active.nextAll( ".ui-menu-item" ).length;
	},

	_move: function( direction, filter, event ) {
		var next;
		if ( this.active ) {
			if ( direction === "first" || direction === "last" ) {
				next = this.active
					[ direction === "first" ? "prevAll" : "nextAll" ]( ".ui-menu-item" )
					.eq( -1 );
			} else {
				next = this.active
					[ direction + "All" ]( ".ui-menu-item" )
					.eq( 0 );
			}
		}
		if ( !next || !next.length || !this.active ) {
			next = this.activeMenu.find( this.options.items )[ filter ]();
		}

		this.focus( event, next );
	},

	nextPage: function( event ) {
		var item, base, height;

		if ( !this.active ) {
			this.next( event );
			return;
		}
		if ( this.isLastItem() ) {
			return;
		}
		if ( this._hasScroll() ) {
			base = this.active.offset().top;
			height = this.element.height();
			this.active.nextAll( ".ui-menu-item" ).each(function() {
				item = $( this );
				return item.offset().top - base - height < 0;
			});

			this.focus( event, item );
		} else {
			this.focus( event, this.activeMenu.find( this.options.items )
				[ !this.active ? "first" : "last" ]() );
		}
	},

	previousPage: function( event ) {
		var item, base, height;
		if ( !this.active ) {
			this.next( event );
			return;
		}
		if ( this.isFirstItem() ) {
			return;
		}
		if ( this._hasScroll() ) {
			base = this.active.offset().top;
			height = this.element.height();
			this.active.prevAll( ".ui-menu-item" ).each(function() {
				item = $( this );
				return item.offset().top - base + height > 0;
			});

			this.focus( event, item );
		} else {
			this.focus( event, this.activeMenu.find( this.options.items ).first() );
		}
	},

	_hasScroll: function() {
		return this.element.outerHeight() < this.element.prop( "scrollHeight" );
	},

	select: function( event ) {
		// TODO: It should never be possible to not have an active item at this
		// point, but the tests don't trigger mouseenter before click.
		this.active = this.active || $( event.target ).closest( ".ui-menu-item" );
		var ui = { item: this.active };
		if ( !this.active.has( ".ui-menu" ).length ) {
			this.collapseAll( event, true );
		}
		this._trigger( "select", event, ui );
	},

	_filterMenuItems: function(character) {
		var escapedCharacter = character.replace( /[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&" ),
			regex = new RegExp( "^" + escapedCharacter, "i" );

		return this.activeMenu
			.find( this.options.items )

			// Only match on items, not dividers or other content (#10571)
			.filter( ".ui-menu-item" )
			.filter(function() {
				return regex.test( $.trim( $( this ).text() ) );
			});
	}
});


/*!
 * jQuery UI Autocomplete 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */


$.widget( "ui.autocomplete", {
	version: "1.11.3",
	defaultElement: "<input>",
	options: {
		appendTo: null,
		autoFocus: false,
		delay: 300,
		minLength: 1,
		position: {
			my: "left top",
			at: "left bottom",
			collision: "none"
		},
		source: null,

		// callbacks
		change: null,
		close: null,
		focus: null,
		open: null,
		response: null,
		search: null,
		select: null
	},

	requestIndex: 0,
	pending: 0,

	_create: function() {
		// Some browsers only repeat keydown events, not keypress events,
		// so we use the suppressKeyPress flag to determine if we've already
		// handled the keydown event. #7269
		// Unfortunately the code for & in keypress is the same as the up arrow,
		// so we use the suppressKeyPressRepeat flag to avoid handling keypress
		// events when we know the keydown event was used to modify the
		// search term. #7799
		var suppressKeyPress, suppressKeyPressRepeat, suppressInput,
			nodeName = this.element[ 0 ].nodeName.toLowerCase(),
			isTextarea = nodeName === "textarea",
			isInput = nodeName === "input";

		this.isMultiLine =
			// Textareas are always multi-line
			isTextarea ? true :
			// Inputs are always single-line, even if inside a contentEditable element
			// IE also treats inputs as contentEditable
			isInput ? false :
			// All other element types are determined by whether or not they're contentEditable
			this.element.prop( "isContentEditable" );

		this.valueMethod = this.element[ isTextarea || isInput ? "val" : "text" ];
		this.isNewMenu = true;

		this.element
			.addClass( "ui-autocomplete-input" )
			.attr( "autocomplete", "off" );

		this._on( this.element, {
			keydown: function( event ) {
				if ( this.element.prop( "readOnly" ) ) {
					suppressKeyPress = true;
					suppressInput = true;
					suppressKeyPressRepeat = true;
					return;
				}

				suppressKeyPress = false;
				suppressInput = false;
				suppressKeyPressRepeat = false;
				var keyCode = $.ui.keyCode;
				switch ( event.keyCode ) {
				case keyCode.PAGE_UP:
					suppressKeyPress = true;
					this._move( "previousPage", event );
					break;
				case keyCode.PAGE_DOWN:
					suppressKeyPress = true;
					this._move( "nextPage", event );
					break;
				case keyCode.UP:
					suppressKeyPress = true;
					this._keyEvent( "previous", event );
					break;
				case keyCode.DOWN:
					suppressKeyPress = true;
					this._keyEvent( "next", event );
					break;
				case keyCode.ENTER:
					// when menu is open and has focus
					if ( this.menu.active ) {
						// #6055 - Opera still allows the keypress to occur
						// which causes forms to submit
						suppressKeyPress = true;
						event.preventDefault();
						this.menu.select( event );
					}
					break;
				case keyCode.TAB:
					if ( this.menu.active ) {
						this.menu.select( event );
					}
					break;
				case keyCode.ESCAPE:
					if ( this.menu.element.is( ":visible" ) ) {
						if ( !this.isMultiLine ) {
							this._value( this.term );
						}
						this.close( event );
						// Different browsers have different default behavior for escape
						// Single press can mean undo or clear
						// Double press in IE means clear the whole form
						event.preventDefault();
					}
					break;
				default:
					suppressKeyPressRepeat = true;
					// search timeout should be triggered before the input value is changed
					this._searchTimeout( event );
					break;
				}
			},
			keypress: function( event ) {
				if ( suppressKeyPress ) {
					suppressKeyPress = false;
					if ( !this.isMultiLine || this.menu.element.is( ":visible" ) ) {
						event.preventDefault();
					}
					return;
				}
				if ( suppressKeyPressRepeat ) {
					return;
				}

				// replicate some key handlers to allow them to repeat in Firefox and Opera
				var keyCode = $.ui.keyCode;
				switch ( event.keyCode ) {
				case keyCode.PAGE_UP:
					this._move( "previousPage", event );
					break;
				case keyCode.PAGE_DOWN:
					this._move( "nextPage", event );
					break;
				case keyCode.UP:
					this._keyEvent( "previous", event );
					break;
				case keyCode.DOWN:
					this._keyEvent( "next", event );
					break;
				}
			},
			input: function( event ) {
				if ( suppressInput ) {
					suppressInput = false;
					event.preventDefault();
					return;
				}
				this._searchTimeout( event );
			},
			focus: function() {
				this.selectedItem = null;
				this.previous = this._value();
			},
			blur: function( event ) {
				if ( this.cancelBlur ) {
					delete this.cancelBlur;
					return;
				}

				clearTimeout( this.searching );
				this.close( event );
				this._change( event );
			}
		});

		this._initSource();
		this.menu = $( "<ul>" )
			.addClass( "ui-autocomplete ui-front" )
			.appendTo( this._appendTo() )
			.menu({
				// disable ARIA support, the live region takes care of that
				role: null
			})
			.hide()
			.menu( "instance" );

		this._on( this.menu.element, {
			mousedown: function( event ) {
				// prevent moving focus out of the text field
				event.preventDefault();

				// IE doesn't prevent moving focus even with event.preventDefault()
				// so we set a flag to know when we should ignore the blur event
				this.cancelBlur = true;
				this._delay(function() {
					delete this.cancelBlur;
				});

				// clicking on the scrollbar causes focus to shift to the body
				// but we can't detect a mouseup or a click immediately afterward
				// so we have to track the next mousedown and close the menu if
				// the user clicks somewhere outside of the autocomplete
				var menuElement = this.menu.element[ 0 ];
				if ( !$( event.target ).closest( ".ui-menu-item" ).length ) {
					this._delay(function() {
						var that = this;
						this.document.one( "mousedown", function( event ) {
							if ( event.target !== that.element[ 0 ] &&
									event.target !== menuElement &&
									!$.contains( menuElement, event.target ) ) {
								that.close();
							}
						});
					});
				}
			},
			menufocus: function( event, ui ) {
				var label, item;
				// support: Firefox
				// Prevent accidental activation of menu items in Firefox (#7024 #9118)
				if ( this.isNewMenu ) {
					this.isNewMenu = false;
					if ( event.originalEvent && /^mouse/.test( event.originalEvent.type ) ) {
						this.menu.blur();

						this.document.one( "mousemove", function() {
							$( event.target ).trigger( event.originalEvent );
						});

						return;
					}
				}

				item = ui.item.data( "ui-autocomplete-item" );
				if ( false !== this._trigger( "focus", event, { item: item } ) ) {
					// use value to match what will end up in the input, if it was a key event
					if ( event.originalEvent && /^key/.test( event.originalEvent.type ) ) {
						this._value( item.value );
					}
				}

				// Announce the value in the liveRegion
				label = ui.item.attr( "aria-label" ) || item.value;
				if ( label && $.trim( label ).length ) {
					this.liveRegion.children().hide();
					$( "<div>" ).text( label ).appendTo( this.liveRegion );
				}
			},
			menuselect: function( event, ui ) {
				var item = ui.item.data( "ui-autocomplete-item" ),
					previous = this.previous;

				// only trigger when focus was lost (click on menu)
				if ( this.element[ 0 ] !== this.document[ 0 ].activeElement ) {
					this.element.focus();
					this.previous = previous;
					// #6109 - IE triggers two focus events and the second
					// is asynchronous, so we need to reset the previous
					// term synchronously and asynchronously :-(
					this._delay(function() {
						this.previous = previous;
						this.selectedItem = item;
					});
				}

				if ( false !== this._trigger( "select", event, { item: item } ) ) {
					this._value( item.value );
				}
				// reset the term after the select event
				// this allows custom select handling to work properly
				this.term = this._value();

				this.close( event );
				this.selectedItem = item;
			}
		});

		this.liveRegion = $( "<span>", {
				role: "status",
				"aria-live": "assertive",
				"aria-relevant": "additions"
			})
			.addClass( "ui-helper-hidden-accessible" )
			.appendTo( this.document[ 0 ].body );

		// turning off autocomplete prevents the browser from remembering the
		// value when navigating through history, so we re-enable autocomplete
		// if the page is unloaded before the widget is destroyed. #7790
		this._on( this.window, {
			beforeunload: function() {
				this.element.removeAttr( "autocomplete" );
			}
		});
	},

	_destroy: function() {
		clearTimeout( this.searching );
		this.element
			.removeClass( "ui-autocomplete-input" )
			.removeAttr( "autocomplete" );
		this.menu.element.remove();
		this.liveRegion.remove();
	},

	_setOption: function( key, value ) {
		this._super( key, value );
		if ( key === "source" ) {
			this._initSource();
		}
		if ( key === "appendTo" ) {
			this.menu.element.appendTo( this._appendTo() );
		}
		if ( key === "disabled" && value && this.xhr ) {
			this.xhr.abort();
		}
	},

	_appendTo: function() {
		var element = this.options.appendTo;

		if ( element ) {
			element = element.jquery || element.nodeType ?
				$( element ) :
				this.document.find( element ).eq( 0 );
		}

		if ( !element || !element[ 0 ] ) {
			element = this.element.closest( ".ui-front" );
		}

		if ( !element.length ) {
			element = this.document[ 0 ].body;
		}

		return element;
	},

	_initSource: function() {
		var array, url,
			that = this;
		if ( $.isArray( this.options.source ) ) {
			array = this.options.source;
			this.source = function( request, response ) {
				response( $.ui.autocomplete.filter( array, request.term ) );
			};
		} else if ( typeof this.options.source === "string" ) {
			url = this.options.source;
			this.source = function( request, response ) {
				if ( that.xhr ) {
					that.xhr.abort();
				}
				that.xhr = $.ajax({
					url: url,
					data: request,
					dataType: "json",
					success: function( data ) {
						response( data );
					},
					error: function() {
						response([]);
					}
				});
			};
		} else {
			this.source = this.options.source;
		}
	},

	_searchTimeout: function( event ) {
		clearTimeout( this.searching );
		this.searching = this._delay(function() {

			// Search if the value has changed, or if the user retypes the same value (see #7434)
			var equalValues = this.term === this._value(),
				menuVisible = this.menu.element.is( ":visible" ),
				modifierKey = event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;

			if ( !equalValues || ( equalValues && !menuVisible && !modifierKey ) ) {
				this.selectedItem = null;
				this.search( null, event );
			}
		}, this.options.delay );
	},

	search: function( value, event ) {
		value = value != null ? value : this._value();

		// always save the actual value, not the one passed as an argument
		this.term = this._value();

		if ( value.length < this.options.minLength ) {
			return this.close( event );
		}

		if ( this._trigger( "search", event ) === false ) {
			return;
		}

		return this._search( value );
	},

	_search: function( value ) {
		this.pending++;
		this.element.addClass( "ui-autocomplete-loading" );
		this.cancelSearch = false;

		this.source( { term: value }, this._response() );
	},

	_response: function() {
		var index = ++this.requestIndex;

		return $.proxy(function( content ) {
			if ( index === this.requestIndex ) {
				this.__response( content );
			}

			this.pending--;
			if ( !this.pending ) {
				this.element.removeClass( "ui-autocomplete-loading" );
			}
		}, this );
	},

	__response: function( content ) {
		if ( content ) {
			content = this._normalize( content );
		}
		this._trigger( "response", null, { content: content } );
		if ( !this.options.disabled && content && content.length && !this.cancelSearch ) {
			this._suggest( content );
			this._trigger( "open" );
		} else {
			// use ._close() instead of .close() so we don't cancel future searches
			this._close();
		}
	},

	close: function( event ) {
		this.cancelSearch = true;
		this._close( event );
	},

	_close: function( event ) {
		if ( this.menu.element.is( ":visible" ) ) {
			this.menu.element.hide();
			this.menu.blur();
			this.isNewMenu = true;
			this._trigger( "close", event );
		}
	},

	_change: function( event ) {
		if ( this.previous !== this._value() ) {
			this._trigger( "change", event, { item: this.selectedItem } );
		}
	},

	_normalize: function( items ) {
		// assume all items have the right format when the first item is complete
		if ( items.length && items[ 0 ].label && items[ 0 ].value ) {
			return items;
		}
		return $.map( items, function( item ) {
			if ( typeof item === "string" ) {
				return {
					label: item,
					value: item
				};
			}
			return $.extend( {}, item, {
				label: item.label || item.value,
				value: item.value || item.label
			});
		});
	},

	_suggest: function( items ) {
		var ul = this.menu.element.empty();
		this._renderMenu( ul, items );
		this.isNewMenu = true;
		this.menu.refresh();

		// size and position menu
		ul.show();
		this._resizeMenu();
		ul.position( $.extend({
			of: this.element
		}, this.options.position ) );

		if ( this.options.autoFocus ) {
			this.menu.next();
		}
	},

	_resizeMenu: function() {
		var ul = this.menu.element;
		ul.outerWidth( Math.max(
			// Firefox wraps long text (possibly a rounding bug)
			// so we add 1px to avoid the wrapping (#7513)
			ul.width( "" ).outerWidth() + 1,
			this.element.outerWidth()
		) );
	},

	_renderMenu: function( ul, items ) {
		var that = this;
		$.each( items, function( index, item ) {
			that._renderItemData( ul, item );
		});
	},

	_renderItemData: function( ul, item ) {
		return this._renderItem( ul, item ).data( "ui-autocomplete-item", item );
	},

	_renderItem: function( ul, item ) {
		return $( "<li>" ).text( item.label ).appendTo( ul );
	},

	_move: function( direction, event ) {
		if ( !this.menu.element.is( ":visible" ) ) {
			this.search( null, event );
			return;
		}
		if ( this.menu.isFirstItem() && /^previous/.test( direction ) ||
				this.menu.isLastItem() && /^next/.test( direction ) ) {

			if ( !this.isMultiLine ) {
				this._value( this.term );
			}

			this.menu.blur();
			return;
		}
		this.menu[ direction ]( event );
	},

	widget: function() {
		return this.menu.element;
	},

	_value: function() {
		return this.valueMethod.apply( this.element, arguments );
	},

	_keyEvent: function( keyEvent, event ) {
		if ( !this.isMultiLine || this.menu.element.is( ":visible" ) ) {
			this._move( keyEvent, event );

			// prevents moving cursor to beginning/end of the text field in some browsers
			event.preventDefault();
		}
	}
});

$.extend( $.ui.autocomplete, {
	escapeRegex: function( value ) {
		return value.replace( /[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&" );
	},
	filter: function( array, term ) {
		var matcher = new RegExp( $.ui.autocomplete.escapeRegex( term ), "i" );
		return $.grep( array, function( value ) {
			return matcher.test( value.label || value.value || value );
		});
	}
});

// live region extension, adding a `messages` option
// NOTE: This is an experimental API. We are still investigating
// a full solution for string manipulation and internationalization.
$.widget( "ui.autocomplete", $.ui.autocomplete, {
	options: {
		messages: {
			noResults: "No search results.",
			results: function( amount ) {
				return amount + ( amount > 1 ? " results are" : " result is" ) +
					" available, use up and down arrow keys to navigate.";
			}
		}
	},

	__response: function( content ) {
		var message;
		this._superApply( arguments );
		if ( this.options.disabled || this.cancelSearch ) {
			return;
		}
		if ( content && content.length ) {
			message = this.options.messages.results( content.length );
		} else {
			message = this.options.messages.noResults;
		}
		this.liveRegion.children().hide();
		$( "<div>" ).text( message ).appendTo( this.liveRegion );
	}
});

var autocomplete = $.ui.autocomplete;


/*!
 * jQuery UI Button 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */


var lastActive,
	baseClasses = "ui-button ui-widget ui-state-default ui-corner-all",
	typeClasses = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
	formResetHandler = function() {
		var form = $( this );
		setTimeout(function() {
			form.find( ":ui-button" ).button( "refresh" );
		}, 1 );
	},
	radioGroup = function( radio ) {
		var name = radio.name,
			form = radio.form,
			radios = $( [] );
		if ( name ) {
			name = name.replace( /'/g, "\\'" );
			if ( form ) {
				radios = $( form ).find( "[name='" + name + "'][type=radio]" );
			} else {
				radios = $( "[name='" + name + "'][type=radio]", radio.ownerDocument )
					.filter(function() {
						return !this.form;
					});
			}
		}
		return radios;
	};

$.widget( "ui.button", {
	version: "1.11.3",
	defaultElement: "<button>",
	options: {
		disabled: null,
		text: true,
		label: null,
		icons: {
			primary: null,
			secondary: null
		}
	},
	_create: function() {
		this.element.closest( "form" )
			.unbind( "reset" + this.eventNamespace )
			.bind( "reset" + this.eventNamespace, formResetHandler );

		if ( typeof this.options.disabled !== "boolean" ) {
			this.options.disabled = !!this.element.prop( "disabled" );
		} else {
			this.element.prop( "disabled", this.options.disabled );
		}

		this._determineButtonType();
		this.hasTitle = !!this.buttonElement.attr( "title" );

		var that = this,
			options = this.options,
			toggleButton = this.type === "checkbox" || this.type === "radio",
			activeClass = !toggleButton ? "ui-state-active" : "";

		if ( options.label === null ) {
			options.label = (this.type === "input" ? this.buttonElement.val() : this.buttonElement.html());
		}

		this._hoverable( this.buttonElement );

		this.buttonElement
			.addClass( baseClasses )
			.attr( "role", "button" )
			.bind( "mouseenter" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return;
				}
				if ( this === lastActive ) {
					$( this ).addClass( "ui-state-active" );
				}
			})
			.bind( "mouseleave" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return;
				}
				$( this ).removeClass( activeClass );
			})
			.bind( "click" + this.eventNamespace, function( event ) {
				if ( options.disabled ) {
					event.preventDefault();
					event.stopImmediatePropagation();
				}
			});

		// Can't use _focusable() because the element that receives focus
		// and the element that gets the ui-state-focus class are different
		this._on({
			focus: function() {
				this.buttonElement.addClass( "ui-state-focus" );
			},
			blur: function() {
				this.buttonElement.removeClass( "ui-state-focus" );
			}
		});

		if ( toggleButton ) {
			this.element.bind( "change" + this.eventNamespace, function() {
				that.refresh();
			});
		}

		if ( this.type === "checkbox" ) {
			this.buttonElement.bind( "click" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return false;
				}
			});
		} else if ( this.type === "radio" ) {
			this.buttonElement.bind( "click" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return false;
				}
				$( this ).addClass( "ui-state-active" );
				that.buttonElement.attr( "aria-pressed", "true" );

				var radio = that.element[ 0 ];
				radioGroup( radio )
					.not( radio )
					.map(function() {
						return $( this ).button( "widget" )[ 0 ];
					})
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", "false" );
			});
		} else {
			this.buttonElement
				.bind( "mousedown" + this.eventNamespace, function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).addClass( "ui-state-active" );
					lastActive = this;
					that.document.one( "mouseup", function() {
						lastActive = null;
					});
				})
				.bind( "mouseup" + this.eventNamespace, function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).removeClass( "ui-state-active" );
				})
				.bind( "keydown" + this.eventNamespace, function(event) {
					if ( options.disabled ) {
						return false;
					}
					if ( event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER ) {
						$( this ).addClass( "ui-state-active" );
					}
				})
				// see #8559, we bind to blur here in case the button element loses
				// focus between keydown and keyup, it would be left in an "active" state
				.bind( "keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
					$( this ).removeClass( "ui-state-active" );
				});

			if ( this.buttonElement.is("a") ) {
				this.buttonElement.keyup(function(event) {
					if ( event.keyCode === $.ui.keyCode.SPACE ) {
						// TODO pass through original event correctly (just as 2nd argument doesn't work)
						$( this ).click();
					}
				});
			}
		}

		this._setOption( "disabled", options.disabled );
		this._resetButton();
	},

	_determineButtonType: function() {
		var ancestor, labelSelector, checked;

		if ( this.element.is("[type=checkbox]") ) {
			this.type = "checkbox";
		} else if ( this.element.is("[type=radio]") ) {
			this.type = "radio";
		} else if ( this.element.is("input") ) {
			this.type = "input";
		} else {
			this.type = "button";
		}

		if ( this.type === "checkbox" || this.type === "radio" ) {
			// we don't search against the document in case the element
			// is disconnected from the DOM
			ancestor = this.element.parents().last();
			labelSelector = "label[for='" + this.element.attr("id") + "']";
			this.buttonElement = ancestor.find( labelSelector );
			if ( !this.buttonElement.length ) {
				ancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();
				this.buttonElement = ancestor.filter( labelSelector );
				if ( !this.buttonElement.length ) {
					this.buttonElement = ancestor.find( labelSelector );
				}
			}
			this.element.addClass( "ui-helper-hidden-accessible" );

			checked = this.element.is( ":checked" );
			if ( checked ) {
				this.buttonElement.addClass( "ui-state-active" );
			}
			this.buttonElement.prop( "aria-pressed", checked );
		} else {
			this.buttonElement = this.element;
		}
	},

	widget: function() {
		return this.buttonElement;
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-helper-hidden-accessible" );
		this.buttonElement
			.removeClass( baseClasses + " ui-state-active " + typeClasses )
			.removeAttr( "role" )
			.removeAttr( "aria-pressed" )
			.html( this.buttonElement.find(".ui-button-text").html() );

		if ( !this.hasTitle ) {
			this.buttonElement.removeAttr( "title" );
		}
	},

	_setOption: function( key, value ) {
		this._super( key, value );
		if ( key === "disabled" ) {
			this.widget().toggleClass( "ui-state-disabled", !!value );
			this.element.prop( "disabled", !!value );
			if ( value ) {
				if ( this.type === "checkbox" || this.type === "radio" ) {
					this.buttonElement.removeClass( "ui-state-focus" );
				} else {
					this.buttonElement.removeClass( "ui-state-focus ui-state-active" );
				}
			}
			return;
		}
		this._resetButton();
	},

	refresh: function() {
		//See #8237 & #8828
		var isDisabled = this.element.is( "input, button" ) ? this.element.is( ":disabled" ) : this.element.hasClass( "ui-button-disabled" );

		if ( isDisabled !== this.options.disabled ) {
			this._setOption( "disabled", isDisabled );
		}
		if ( this.type === "radio" ) {
			radioGroup( this.element[0] ).each(function() {
				if ( $( this ).is( ":checked" ) ) {
					$( this ).button( "widget" )
						.addClass( "ui-state-active" )
						.attr( "aria-pressed", "true" );
				} else {
					$( this ).button( "widget" )
						.removeClass( "ui-state-active" )
						.attr( "aria-pressed", "false" );
				}
			});
		} else if ( this.type === "checkbox" ) {
			if ( this.element.is( ":checked" ) ) {
				this.buttonElement
					.addClass( "ui-state-active" )
					.attr( "aria-pressed", "true" );
			} else {
				this.buttonElement
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", "false" );
			}
		}
	},

	_resetButton: function() {
		if ( this.type === "input" ) {
			if ( this.options.label ) {
				this.element.val( this.options.label );
			}
			return;
		}
		var buttonElement = this.buttonElement.removeClass( typeClasses ),
			buttonText = $( "<span></span>", this.document[0] )
				.addClass( "ui-button-text" )
				.html( this.options.label )
				.appendTo( buttonElement.empty() )
				.text(),
			icons = this.options.icons,
			multipleIcons = icons.primary && icons.secondary,
			buttonClasses = [];

		if ( icons.primary || icons.secondary ) {
			if ( this.options.text ) {
				buttonClasses.push( "ui-button-text-icon" + ( multipleIcons ? "s" : ( icons.primary ? "-primary" : "-secondary" ) ) );
			}

			if ( icons.primary ) {
				buttonElement.prepend( "<span class='ui-button-icon-primary ui-icon " + icons.primary + "'></span>" );
			}

			if ( icons.secondary ) {
				buttonElement.append( "<span class='ui-button-icon-secondary ui-icon " + icons.secondary + "'></span>" );
			}

			if ( !this.options.text ) {
				buttonClasses.push( multipleIcons ? "ui-button-icons-only" : "ui-button-icon-only" );

				if ( !this.hasTitle ) {
					buttonElement.attr( "title", $.trim( buttonText ) );
				}
			}
		} else {
			buttonClasses.push( "ui-button-text-only" );
		}
		buttonElement.addClass( buttonClasses.join( " " ) );
	}
});

$.widget( "ui.buttonset", {
	version: "1.11.3",
	options: {
		items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
	},

	_create: function() {
		this.element.addClass( "ui-buttonset" );
	},

	_init: function() {
		this.refresh();
	},

	_setOption: function( key, value ) {
		if ( key === "disabled" ) {
			this.buttons.button( "option", key, value );
		}

		this._super( key, value );
	},

	refresh: function() {
		var rtl = this.element.css( "direction" ) === "rtl",
			allButtons = this.element.find( this.options.items ),
			existingButtons = allButtons.filter( ":ui-button" );

		// Initialize new buttons
		allButtons.not( ":ui-button" ).button();

		// Refresh existing buttons
		existingButtons.button( "refresh" );

		this.buttons = allButtons
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-all ui-corner-left ui-corner-right" )
				.filter( ":first" )
					.addClass( rtl ? "ui-corner-right" : "ui-corner-left" )
				.end()
				.filter( ":last" )
					.addClass( rtl ? "ui-corner-left" : "ui-corner-right" )
				.end()
			.end();
	},

	_destroy: function() {
		this.element.removeClass( "ui-buttonset" );
		this.buttons
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-left ui-corner-right" )
			.end()
			.button( "destroy" );
	}
});

var button = $.ui.button;


/*!
 * jQuery UI Datepicker 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */


$.extend($.ui, { datepicker: { version: "1.11.3" } });

var datepicker_instActive;

function datepicker_getZindex( elem ) {
	var position, value;
	while ( elem.length && elem[ 0 ] !== document ) {
		// Ignore z-index if position is set to a value where z-index is ignored by the browser
		// This makes behavior of this function consistent across browsers
		// WebKit always returns auto if the element is positioned
		position = elem.css( "position" );
		if ( position === "absolute" || position === "relative" || position === "fixed" ) {
			// IE returns 0 when zIndex is not specified
			// other browsers return a string
			// we ignore the case of nested elements with an explicit value of 0
			// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
			value = parseInt( elem.css( "zIndex" ), 10 );
			if ( !isNaN( value ) && value !== 0 ) {
				return value;
			}
		}
		elem = elem.parent();
	}

	return 0;
}
/* Date picker manager.
   Use the singleton instance of this class, $.datepicker, to interact with the date picker.
   Settings for (groups of) date pickers are maintained in an instance object,
   allowing multiple different settings on the same page. */

function Datepicker() {
	this._curInst = null; // The current instance in use
	this._keyEvent = false; // If the last event was a key event
	this._disabledInputs = []; // List of date picker inputs that have been disabled
	this._datepickerShowing = false; // True if the popup picker is showing , false if not
	this._inDialog = false; // True if showing within a "dialog", false if not
	this._mainDivId = "ui-datepicker-div"; // The ID of the main datepicker division
	this._inlineClass = "ui-datepicker-inline"; // The name of the inline marker class
	this._appendClass = "ui-datepicker-append"; // The name of the append marker class
	this._triggerClass = "ui-datepicker-trigger"; // The name of the trigger marker class
	this._dialogClass = "ui-datepicker-dialog"; // The name of the dialog marker class
	this._disableClass = "ui-datepicker-disabled"; // The name of the disabled covering marker class
	this._unselectableClass = "ui-datepicker-unselectable"; // The name of the unselectable cell marker class
	this._currentClass = "ui-datepicker-current-day"; // The name of the current day marker class
	this._dayOverClass = "ui-datepicker-days-cell-over"; // The name of the day hover marker class
	this.regional = []; // Available regional settings, indexed by language code
	this.regional[""] = { // Default regional settings
		closeText: "Done", // Display text for close link
		prevText: "Prev", // Display text for previous month link
		nextText: "Next", // Display text for next month link
		currentText: "Today", // Display text for current month link
		monthNames: ["January","February","March","April","May","June",
			"July","August","September","October","November","December"], // Names of months for drop-down and formatting
		monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], // For formatting
		dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], // For formatting
		dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], // For formatting
		dayNamesMin: ["Su","Mo","Tu","We","Th","Fr","Sa"], // Column headings for days starting at Sunday
		weekHeader: "Wk", // Column header for week of the year
		dateFormat: "mm/dd/yy", // See format options on parseDate
		firstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...
		isRTL: false, // True if right-to-left language, false if left-to-right
		showMonthAfterYear: false, // True if the year select precedes month, false for month then year
		yearSuffix: "" // Additional text to append to the year in the month headers
	};
	this._defaults = { // Global defaults for all the date picker instances
		showOn: "focus", // "focus" for popup on focus,
			// "button" for trigger button, or "both" for either
		showAnim: "fadeIn", // Name of jQuery animation for popup
		showOptions: {}, // Options for enhanced animations
		defaultDate: null, // Used when field is blank: actual date,
			// +/-number for offset from today, null for today
		appendText: "", // Display text following the input box, e.g. showing the format
		buttonText: "...", // Text for trigger button
		buttonImage: "", // URL for trigger button image
		buttonImageOnly: false, // True if the image appears alone, false if it appears on a button
		hideIfNoPrevNext: false, // True to hide next/previous month links
			// if not applicable, false to just disable them
		navigationAsDateFormat: false, // True if date formatting applied to prev/today/next links
		gotoCurrent: false, // True if today link goes back to current selection instead
		changeMonth: false, // True if month can be selected directly, false if only prev/next
		changeYear: false, // True if year can be selected directly, false if only prev/next
		yearRange: "c-10:c+10", // Range of years to display in drop-down,
			// either relative to today's year (-nn:+nn), relative to currently displayed year
			// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)
		showOtherMonths: false, // True to show dates in other months, false to leave blank
		selectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable
		showWeek: false, // True to show week of the year, false to not show it
		calculateWeek: this.iso8601Week, // How to calculate the week of the year,
			// takes a Date and returns the number of the week for it
		shortYearCutoff: "+10", // Short year values < this are in the current century,
			// > this are in the previous century,
			// string value starting with "+" for current year + value
		minDate: null, // The earliest selectable date, or null for no limit
		maxDate: null, // The latest selectable date, or null for no limit
		duration: "fast", // Duration of display/closure
		beforeShowDay: null, // Function that takes a date and returns an array with
			// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or "",
			// [2] = cell title (optional), e.g. $.datepicker.noWeekends
		beforeShow: null, // Function that takes an input field and
			// returns a set of custom settings for the date picker
		onSelect: null, // Define a callback function when a date is selected
		onChangeMonthYear: null, // Define a callback function when the month or year is changed
		onClose: null, // Define a callback function when the datepicker is closed
		numberOfMonths: 1, // Number of months to show at a time
		showCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)
		stepMonths: 1, // Number of months to step back/forward
		stepBigMonths: 12, // Number of months to step back/forward for the big links
		altField: "", // Selector for an alternate field to store selected dates into
		altFormat: "", // The date format to use for the alternate field
		constrainInput: true, // The input is constrained by the current date format
		showButtonPanel: false, // True to show button panel, false to not show it
		autoSize: false, // True to size the input for the date format, false to leave as is
		disabled: false // The initial disabled state
	};
	$.extend(this._defaults, this.regional[""]);
	this.regional.en = $.extend( true, {}, this.regional[ "" ]);
	this.regional[ "en-US" ] = $.extend( true, {}, this.regional.en );
	this.dpDiv = datepicker_bindHover($("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
}

$.extend(Datepicker.prototype, {
	/* Class name added to elements to indicate already configured with a date picker. */
	markerClassName: "hasDatepicker",

	//Keep track of the maximum number of rows displayed (see #7043)
	maxRows: 4,

	// TODO rename to "widget" when switching to widget factory
	_widgetDatepicker: function() {
		return this.dpDiv;
	},

	/* Override the default settings for all instances of the date picker.
	 * @param  settings  object - the new settings to use as defaults (anonymous object)
	 * @return the manager object
	 */
	setDefaults: function(settings) {
		datepicker_extendRemove(this._defaults, settings || {});
		return this;
	},

	/* Attach the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 * @param  settings  object - the new settings to use for this date picker instance (anonymous)
	 */
	_attachDatepicker: function(target, settings) {
		var nodeName, inline, inst;
		nodeName = target.nodeName.toLowerCase();
		inline = (nodeName === "div" || nodeName === "span");
		if (!target.id) {
			this.uuid += 1;
			target.id = "dp" + this.uuid;
		}
		inst = this._newInst($(target), inline);
		inst.settings = $.extend({}, settings || {});
		if (nodeName === "input") {
			this._connectDatepicker(target, inst);
		} else if (inline) {
			this._inlineDatepicker(target, inst);
		}
	},

	/* Create a new instance object. */
	_newInst: function(target, inline) {
		var id = target[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"); // escape jQuery meta chars
		return {id: id, input: target, // associated target
			selectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection
			drawMonth: 0, drawYear: 0, // month being drawn
			inline: inline, // is datepicker inline or not
			dpDiv: (!inline ? this.dpDiv : // presentation div
			datepicker_bindHover($("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};
	},

	/* Attach the date picker to an input field. */
	_connectDatepicker: function(target, inst) {
		var input = $(target);
		inst.append = $([]);
		inst.trigger = $([]);
		if (input.hasClass(this.markerClassName)) {
			return;
		}
		this._attachments(input, inst);
		input.addClass(this.markerClassName).keydown(this._doKeyDown).
			keypress(this._doKeyPress).keyup(this._doKeyUp);
		this._autoSize(inst);
		$.data(target, "datepicker", inst);
		//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)
		if( inst.settings.disabled ) {
			this._disableDatepicker( target );
		}
	},

	/* Make attachments based on settings. */
	_attachments: function(input, inst) {
		var showOn, buttonText, buttonImage,
			appendText = this._get(inst, "appendText"),
			isRTL = this._get(inst, "isRTL");

		if (inst.append) {
			inst.append.remove();
		}
		if (appendText) {
			inst.append = $("<span class='" + this._appendClass + "'>" + appendText + "</span>");
			input[isRTL ? "before" : "after"](inst.append);
		}

		input.unbind("focus", this._showDatepicker);

		if (inst.trigger) {
			inst.trigger.remove();
		}

		showOn = this._get(inst, "showOn");
		if (showOn === "focus" || showOn === "both") { // pop-up date picker when in the marked field
			input.focus(this._showDatepicker);
		}
		if (showOn === "button" || showOn === "both") { // pop-up date picker when button clicked
			buttonText = this._get(inst, "buttonText");
			buttonImage = this._get(inst, "buttonImage");
			inst.trigger = $(this._get(inst, "buttonImageOnly") ?
				$("<img/>").addClass(this._triggerClass).
					attr({ src: buttonImage, alt: buttonText, title: buttonText }) :
				$("<button type='button'></button>").addClass(this._triggerClass).
					html(!buttonImage ? buttonText : $("<img/>").attr(
					{ src:buttonImage, alt:buttonText, title:buttonText })));
			input[isRTL ? "before" : "after"](inst.trigger);
			inst.trigger.click(function() {
				if ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {
					$.datepicker._hideDatepicker();
				} else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {
					$.datepicker._hideDatepicker();
					$.datepicker._showDatepicker(input[0]);
				} else {
					$.datepicker._showDatepicker(input[0]);
				}
				return false;
			});
		}
	},

	/* Apply the maximum length for the date format. */
	_autoSize: function(inst) {
		if (this._get(inst, "autoSize") && !inst.inline) {
			var findMax, max, maxI, i,
				date = new Date(2009, 12 - 1, 20), // Ensure double digits
				dateFormat = this._get(inst, "dateFormat");

			if (dateFormat.match(/[DM]/)) {
				findMax = function(names) {
					max = 0;
					maxI = 0;
					for (i = 0; i < names.length; i++) {
						if (names[i].length > max) {
							max = names[i].length;
							maxI = i;
						}
					}
					return maxI;
				};
				date.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?
					"monthNames" : "monthNamesShort"))));
				date.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?
					"dayNames" : "dayNamesShort"))) + 20 - date.getDay());
			}
			inst.input.attr("size", this._formatDate(inst, date).length);
		}
	},

	/* Attach an inline date picker to a div. */
	_inlineDatepicker: function(target, inst) {
		var divSpan = $(target);
		if (divSpan.hasClass(this.markerClassName)) {
			return;
		}
		divSpan.addClass(this.markerClassName).append(inst.dpDiv);
		$.data(target, "datepicker", inst);
		this._setDate(inst, this._getDefaultDate(inst), true);
		this._updateDatepicker(inst);
		this._updateAlternate(inst);
		//If disabled option is true, disable the datepicker before showing it (see ticket #5665)
		if( inst.settings.disabled ) {
			this._disableDatepicker( target );
		}
		// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements
		// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height
		inst.dpDiv.css( "display", "block" );
	},

	/* Pop-up the date picker in a "dialog" box.
	 * @param  input element - ignored
	 * @param  date	string or Date - the initial date to display
	 * @param  onSelect  function - the function to call when a date is selected
	 * @param  settings  object - update the dialog date picker instance's settings (anonymous object)
	 * @param  pos int[2] - coordinates for the dialog's position within the screen or
	 *					event - with x/y coordinates or
	 *					leave empty for default (screen centre)
	 * @return the manager object
	 */
	_dialogDatepicker: function(input, date, onSelect, settings, pos) {
		var id, browserWidth, browserHeight, scrollX, scrollY,
			inst = this._dialogInst; // internal instance

		if (!inst) {
			this.uuid += 1;
			id = "dp" + this.uuid;
			this._dialogInput = $("<input type='text' id='" + id +
				"' style='position: absolute; top: -100px; width: 0px;'/>");
			this._dialogInput.keydown(this._doKeyDown);
			$("body").append(this._dialogInput);
			inst = this._dialogInst = this._newInst(this._dialogInput, false);
			inst.settings = {};
			$.data(this._dialogInput[0], "datepicker", inst);
		}
		datepicker_extendRemove(inst.settings, settings || {});
		date = (date && date.constructor === Date ? this._formatDate(inst, date) : date);
		this._dialogInput.val(date);

		this._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);
		if (!this._pos) {
			browserWidth = document.documentElement.clientWidth;
			browserHeight = document.documentElement.clientHeight;
			scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
			scrollY = document.documentElement.scrollTop || document.body.scrollTop;
			this._pos = // should use actual width/height below
				[(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];
		}

		// move input on screen for focus, but hidden behind dialog
		this._dialogInput.css("left", (this._pos[0] + 20) + "px").css("top", this._pos[1] + "px");
		inst.settings.onSelect = onSelect;
		this._inDialog = true;
		this.dpDiv.addClass(this._dialogClass);
		this._showDatepicker(this._dialogInput[0]);
		if ($.blockUI) {
			$.blockUI(this.dpDiv);
		}
		$.data(this._dialogInput[0], "datepicker", inst);
		return this;
	},

	/* Detach a datepicker from its control.
	 * @param  target	element - the target input field or division or span
	 */
	_destroyDatepicker: function(target) {
		var nodeName,
			$target = $(target),
			inst = $.data(target, "datepicker");

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		$.removeData(target, "datepicker");
		if (nodeName === "input") {
			inst.append.remove();
			inst.trigger.remove();
			$target.removeClass(this.markerClassName).
				unbind("focus", this._showDatepicker).
				unbind("keydown", this._doKeyDown).
				unbind("keypress", this._doKeyPress).
				unbind("keyup", this._doKeyUp);
		} else if (nodeName === "div" || nodeName === "span") {
			$target.removeClass(this.markerClassName).empty();
		}

		if ( datepicker_instActive === inst ) {
			datepicker_instActive = null;
		}
	},

	/* Enable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */
	_enableDatepicker: function(target) {
		var nodeName, inline,
			$target = $(target),
			inst = $.data(target, "datepicker");

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		if (nodeName === "input") {
			target.disabled = false;
			inst.trigger.filter("button").
				each(function() { this.disabled = false; }).end().
				filter("img").css({opacity: "1.0", cursor: ""});
		} else if (nodeName === "div" || nodeName === "span") {
			inline = $target.children("." + this._inlineClass);
			inline.children().removeClass("ui-state-disabled");
			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
				prop("disabled", false);
		}
		this._disabledInputs = $.map(this._disabledInputs,
			function(value) { return (value === target ? null : value); }); // delete entry
	},

	/* Disable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */
	_disableDatepicker: function(target) {
		var nodeName, inline,
			$target = $(target),
			inst = $.data(target, "datepicker");

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		if (nodeName === "input") {
			target.disabled = true;
			inst.trigger.filter("button").
				each(function() { this.disabled = true; }).end().
				filter("img").css({opacity: "0.5", cursor: "default"});
		} else if (nodeName === "div" || nodeName === "span") {
			inline = $target.children("." + this._inlineClass);
			inline.children().addClass("ui-state-disabled");
			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
				prop("disabled", true);
		}
		this._disabledInputs = $.map(this._disabledInputs,
			function(value) { return (value === target ? null : value); }); // delete entry
		this._disabledInputs[this._disabledInputs.length] = target;
	},

	/* Is the first field in a jQuery collection disabled as a datepicker?
	 * @param  target	element - the target input field or division or span
	 * @return boolean - true if disabled, false if enabled
	 */
	_isDisabledDatepicker: function(target) {
		if (!target) {
			return false;
		}
		for (var i = 0; i < this._disabledInputs.length; i++) {
			if (this._disabledInputs[i] === target) {
				return true;
			}
		}
		return false;
	},

	/* Retrieve the instance data for the target control.
	 * @param  target  element - the target input field or division or span
	 * @return  object - the associated instance data
	 * @throws  error if a jQuery problem getting data
	 */
	_getInst: function(target) {
		try {
			return $.data(target, "datepicker");
		}
		catch (err) {
			throw "Missing instance data for this datepicker";
		}
	},

	/* Update or retrieve the settings for a date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 * @param  name	object - the new settings to update or
	 *				string - the name of the setting to change or retrieve,
	 *				when retrieving also "all" for all instance settings or
	 *				"defaults" for all global defaults
	 * @param  value   any - the new value for the setting
	 *				(omit if above is an object or to retrieve a value)
	 */
	_optionDatepicker: function(target, name, value) {
		var settings, date, minDate, maxDate,
			inst = this._getInst(target);

		if (arguments.length === 2 && typeof name === "string") {
			return (name === "defaults" ? $.extend({}, $.datepicker._defaults) :
				(inst ? (name === "all" ? $.extend({}, inst.settings) :
				this._get(inst, name)) : null));
		}

		settings = name || {};
		if (typeof name === "string") {
			settings = {};
			settings[name] = value;
		}

		if (inst) {
			if (this._curInst === inst) {
				this._hideDatepicker();
			}

			date = this._getDateDatepicker(target, true);
			minDate = this._getMinMaxDate(inst, "min");
			maxDate = this._getMinMaxDate(inst, "max");
			datepicker_extendRemove(inst.settings, settings);
			// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided
			if (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {
				inst.settings.minDate = this._formatDate(inst, minDate);
			}
			if (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {
				inst.settings.maxDate = this._formatDate(inst, maxDate);
			}
			if ( "disabled" in settings ) {
				if ( settings.disabled ) {
					this._disableDatepicker(target);
				} else {
					this._enableDatepicker(target);
				}
			}
			this._attachments($(target), inst);
			this._autoSize(inst);
			this._setDate(inst, date);
			this._updateAlternate(inst);
			this._updateDatepicker(inst);
		}
	},

	// change method deprecated
	_changeDatepicker: function(target, name, value) {
		this._optionDatepicker(target, name, value);
	},

	/* Redraw the date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 */
	_refreshDatepicker: function(target) {
		var inst = this._getInst(target);
		if (inst) {
			this._updateDatepicker(inst);
		}
	},

	/* Set the dates for a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  date	Date - the new date
	 */
	_setDateDatepicker: function(target, date) {
		var inst = this._getInst(target);
		if (inst) {
			this._setDate(inst, date);
			this._updateDatepicker(inst);
			this._updateAlternate(inst);
		}
	},

	/* Get the date(s) for the first entry in a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  noDefault boolean - true if no default date is to be used
	 * @return Date - the current date
	 */
	_getDateDatepicker: function(target, noDefault) {
		var inst = this._getInst(target);
		if (inst && !inst.inline) {
			this._setDateFromField(inst, noDefault);
		}
		return (inst ? this._getDate(inst) : null);
	},

	/* Handle keystrokes. */
	_doKeyDown: function(event) {
		var onSelect, dateStr, sel,
			inst = $.datepicker._getInst(event.target),
			handled = true,
			isRTL = inst.dpDiv.is(".ui-datepicker-rtl");

		inst._keyEvent = true;
		if ($.datepicker._datepickerShowing) {
			switch (event.keyCode) {
				case 9: $.datepicker._hideDatepicker();
						handled = false;
						break; // hide on tab out
				case 13: sel = $("td." + $.datepicker._dayOverClass + ":not(." +
									$.datepicker._currentClass + ")", inst.dpDiv);
						if (sel[0]) {
							$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
						}

						onSelect = $.datepicker._get(inst, "onSelect");
						if (onSelect) {
							dateStr = $.datepicker._formatDate(inst);

							// trigger custom callback
							onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);
						} else {
							$.datepicker._hideDatepicker();
						}

						return false; // don't submit the form
				case 27: $.datepicker._hideDatepicker();
						break; // hide on escape
				case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							-$.datepicker._get(inst, "stepBigMonths") :
							-$.datepicker._get(inst, "stepMonths")), "M");
						break; // previous month/year on page up/+ ctrl
				case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							+$.datepicker._get(inst, "stepBigMonths") :
							+$.datepicker._get(inst, "stepMonths")), "M");
						break; // next month/year on page down/+ ctrl
				case 35: if (event.ctrlKey || event.metaKey) {
							$.datepicker._clearDate(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						break; // clear on ctrl or command +end
				case 36: if (event.ctrlKey || event.metaKey) {
							$.datepicker._gotoToday(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						break; // current on ctrl or command +home
				case 37: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), "D");
						}
						handled = event.ctrlKey || event.metaKey;
						// -1 day on ctrl or command +left
						if (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								-$.datepicker._get(inst, "stepBigMonths") :
								-$.datepicker._get(inst, "stepMonths")), "M");
						}
						// next month/year on alt +left on Mac
						break;
				case 38: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, -7, "D");
						}
						handled = event.ctrlKey || event.metaKey;
						break; // -1 week on ctrl or command +up
				case 39: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), "D");
						}
						handled = event.ctrlKey || event.metaKey;
						// +1 day on ctrl or command +right
						if (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								+$.datepicker._get(inst, "stepBigMonths") :
								+$.datepicker._get(inst, "stepMonths")), "M");
						}
						// next month/year on alt +right
						break;
				case 40: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, +7, "D");
						}
						handled = event.ctrlKey || event.metaKey;
						break; // +1 week on ctrl or command +down
				default: handled = false;
			}
		} else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home
			$.datepicker._showDatepicker(this);
		} else {
			handled = false;
		}

		if (handled) {
			event.preventDefault();
			event.stopPropagation();
		}
	},

	/* Filter entered characters - based on date format. */
	_doKeyPress: function(event) {
		var chars, chr,
			inst = $.datepicker._getInst(event.target);

		if ($.datepicker._get(inst, "constrainInput")) {
			chars = $.datepicker._possibleChars($.datepicker._get(inst, "dateFormat"));
			chr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);
			return event.ctrlKey || event.metaKey || (chr < " " || !chars || chars.indexOf(chr) > -1);
		}
	},

	/* Synchronise manual entry and field/alternate field. */
	_doKeyUp: function(event) {
		var date,
			inst = $.datepicker._getInst(event.target);

		if (inst.input.val() !== inst.lastVal) {
			try {
				date = $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
					(inst.input ? inst.input.val() : null),
					$.datepicker._getFormatConfig(inst));

				if (date) { // only if valid
					$.datepicker._setDateFromField(inst);
					$.datepicker._updateAlternate(inst);
					$.datepicker._updateDatepicker(inst);
				}
			}
			catch (err) {
			}
		}
		return true;
	},

	/* Pop-up the date picker for a given input field.
	 * If false returned from beforeShow event handler do not show.
	 * @param  input  element - the input field attached to the date picker or
	 *					event - if triggered by focus
	 */
	_showDatepicker: function(input) {
		input = input.target || input;
		if (input.nodeName.toLowerCase() !== "input") { // find from button/image trigger
			input = $("input", input.parentNode)[0];
		}

		if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here
			return;
		}

		var inst, beforeShow, beforeShowSettings, isFixed,
			offset, showAnim, duration;

		inst = $.datepicker._getInst(input);
		if ($.datepicker._curInst && $.datepicker._curInst !== inst) {
			$.datepicker._curInst.dpDiv.stop(true, true);
			if ( inst && $.datepicker._datepickerShowing ) {
				$.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );
			}
		}

		beforeShow = $.datepicker._get(inst, "beforeShow");
		beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};
		if(beforeShowSettings === false){
			return;
		}
		datepicker_extendRemove(inst.settings, beforeShowSettings);

		inst.lastVal = null;
		$.datepicker._lastInput = input;
		$.datepicker._setDateFromField(inst);

		if ($.datepicker._inDialog) { // hide cursor
			input.value = "";
		}
		if (!$.datepicker._pos) { // position below input
			$.datepicker._pos = $.datepicker._findPos(input);
			$.datepicker._pos[1] += input.offsetHeight; // add the height
		}

		isFixed = false;
		$(input).parents().each(function() {
			isFixed |= $(this).css("position") === "fixed";
			return !isFixed;
		});

		offset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};
		$.datepicker._pos = null;
		//to avoid flashes on Firefox
		inst.dpDiv.empty();
		// determine sizing offscreen
		inst.dpDiv.css({position: "absolute", display: "block", top: "-1000px"});
		$.datepicker._updateDatepicker(inst);
		// fix width for dynamic number of date pickers
		// and adjust position before showing
		offset = $.datepicker._checkOffset(inst, offset, isFixed);
		inst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ?
			"static" : (isFixed ? "fixed" : "absolute")), display: "none",
			left: offset.left + "px", top: offset.top + "px"});

		if (!inst.inline) {
			showAnim = $.datepicker._get(inst, "showAnim");
			duration = $.datepicker._get(inst, "duration");
			inst.dpDiv.css( "z-index", datepicker_getZindex( $( input ) ) + 1 );
			$.datepicker._datepickerShowing = true;

			if ( $.effects && $.effects.effect[ showAnim ] ) {
				inst.dpDiv.show(showAnim, $.datepicker._get(inst, "showOptions"), duration);
			} else {
				inst.dpDiv[showAnim || "show"](showAnim ? duration : null);
			}

			if ( $.datepicker._shouldFocusInput( inst ) ) {
				inst.input.focus();
			}

			$.datepicker._curInst = inst;
		}
	},

	/* Generate the date picker content. */
	_updateDatepicker: function(inst) {
		this.maxRows = 4; //Reset the max number of rows being displayed (see #7043)
		datepicker_instActive = inst; // for delegate hover events
		inst.dpDiv.empty().append(this._generateHTML(inst));
		this._attachHandlers(inst);

		var origyearshtml,
			numMonths = this._getNumberOfMonths(inst),
			cols = numMonths[1],
			width = 17,
			activeCell = inst.dpDiv.find( "." + this._dayOverClass + " a" );

		if ( activeCell.length > 0 ) {
			datepicker_handleMouseover.apply( activeCell.get( 0 ) );
		}

		inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
		if (cols > 1) {
			inst.dpDiv.addClass("ui-datepicker-multi-" + cols).css("width", (width * cols) + "em");
		}
		inst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? "add" : "remove") +
			"Class"]("ui-datepicker-multi");
		inst.dpDiv[(this._get(inst, "isRTL") ? "add" : "remove") +
			"Class"]("ui-datepicker-rtl");

		if (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput( inst ) ) {
			inst.input.focus();
		}

		// deffered render of the years select (to avoid flashes on Firefox)
		if( inst.yearshtml ){
			origyearshtml = inst.yearshtml;
			setTimeout(function(){
				//assure that inst.yearshtml didn't change.
				if( origyearshtml === inst.yearshtml && inst.yearshtml ){
					inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);
				}
				origyearshtml = inst.yearshtml = null;
			}, 0);
		}
	},

	// #6694 - don't focus the input if it's already focused
	// this breaks the change event in IE
	// Support: IE and jQuery <1.9
	_shouldFocusInput: function( inst ) {
		return inst.input && inst.input.is( ":visible" ) && !inst.input.is( ":disabled" ) && !inst.input.is( ":focus" );
	},

	/* Check positioning to remain on screen. */
	_checkOffset: function(inst, offset, isFixed) {
		var dpWidth = inst.dpDiv.outerWidth(),
			dpHeight = inst.dpDiv.outerHeight(),
			inputWidth = inst.input ? inst.input.outerWidth() : 0,
			inputHeight = inst.input ? inst.input.outerHeight() : 0,
			viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),
			viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());

		offset.left -= (this._get(inst, "isRTL") ? (dpWidth - inputWidth) : 0);
		offset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;
		offset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;

		// now check if datepicker is showing outside window viewport - move to a better place if so.
		offset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?
			Math.abs(offset.left + dpWidth - viewWidth) : 0);
		offset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?
			Math.abs(dpHeight + inputHeight) : 0);

		return offset;
	},

	/* Find an object's position on the screen. */
	_findPos: function(obj) {
		var position,
			inst = this._getInst(obj),
			isRTL = this._get(inst, "isRTL");

		while (obj && (obj.type === "hidden" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {
			obj = obj[isRTL ? "previousSibling" : "nextSibling"];
		}

		position = $(obj).offset();
		return [position.left, position.top];
	},

	/* Hide the date picker from view.
	 * @param  input  element - the input field attached to the date picker
	 */
	_hideDatepicker: function(input) {
		var showAnim, duration, postProcess, onClose,
			inst = this._curInst;

		if (!inst || (input && inst !== $.data(input, "datepicker"))) {
			return;
		}

		if (this._datepickerShowing) {
			showAnim = this._get(inst, "showAnim");
			duration = this._get(inst, "duration");
			postProcess = function() {
				$.datepicker._tidyDialog(inst);
			};

			// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed
			if ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {
				inst.dpDiv.hide(showAnim, $.datepicker._get(inst, "showOptions"), duration, postProcess);
			} else {
				inst.dpDiv[(showAnim === "slideDown" ? "slideUp" :
					(showAnim === "fadeIn" ? "fadeOut" : "hide"))]((showAnim ? duration : null), postProcess);
			}

			if (!showAnim) {
				postProcess();
			}
			this._datepickerShowing = false;

			onClose = this._get(inst, "onClose");
			if (onClose) {
				onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : ""), inst]);
			}

			this._lastInput = null;
			if (this._inDialog) {
				this._dialogInput.css({ position: "absolute", left: "0", top: "-100px" });
				if ($.blockUI) {
					$.unblockUI();
					$("body").append(this.dpDiv);
				}
			}
			this._inDialog = false;
		}
	},

	/* Tidy up after a dialog display. */
	_tidyDialog: function(inst) {
		inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
	},

	/* Close date picker if clicked elsewhere. */
	_checkExternalClick: function(event) {
		if (!$.datepicker._curInst) {
			return;
		}

		var $target = $(event.target),
			inst = $.datepicker._getInst($target[0]);

		if ( ( ( $target[0].id !== $.datepicker._mainDivId &&
				$target.parents("#" + $.datepicker._mainDivId).length === 0 &&
				!$target.hasClass($.datepicker.markerClassName) &&
				!$target.closest("." + $.datepicker._triggerClass).length &&
				$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI) ) ) ||
			( $target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst ) ) {
				$.datepicker._hideDatepicker();
		}
	},

	/* Adjust one of the date sub-fields. */
	_adjustDate: function(id, offset, period) {
		var target = $(id),
			inst = this._getInst(target[0]);

		if (this._isDisabledDatepicker(target[0])) {
			return;
		}
		this._adjustInstDate(inst, offset +
			(period === "M" ? this._get(inst, "showCurrentAtPos") : 0), // undo positioning
			period);
		this._updateDatepicker(inst);
	},

	/* Action for current link. */
	_gotoToday: function(id) {
		var date,
			target = $(id),
			inst = this._getInst(target[0]);

		if (this._get(inst, "gotoCurrent") && inst.currentDay) {
			inst.selectedDay = inst.currentDay;
			inst.drawMonth = inst.selectedMonth = inst.currentMonth;
			inst.drawYear = inst.selectedYear = inst.currentYear;
		} else {
			date = new Date();
			inst.selectedDay = date.getDate();
			inst.drawMonth = inst.selectedMonth = date.getMonth();
			inst.drawYear = inst.selectedYear = date.getFullYear();
		}
		this._notifyChange(inst);
		this._adjustDate(target);
	},

	/* Action for selecting a new month/year. */
	_selectMonthYear: function(id, select, period) {
		var target = $(id),
			inst = this._getInst(target[0]);

		inst["selected" + (period === "M" ? "Month" : "Year")] =
		inst["draw" + (period === "M" ? "Month" : "Year")] =
			parseInt(select.options[select.selectedIndex].value,10);

		this._notifyChange(inst);
		this._adjustDate(target);
	},

	/* Action for selecting a day. */
	_selectDay: function(id, month, year, td) {
		var inst,
			target = $(id);

		if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
			return;
		}

		inst = this._getInst(target[0]);
		inst.selectedDay = inst.currentDay = $("a", td).html();
		inst.selectedMonth = inst.currentMonth = month;
		inst.selectedYear = inst.currentYear = year;
		this._selectDate(id, this._formatDate(inst,
			inst.currentDay, inst.currentMonth, inst.currentYear));
	},

	/* Erase the input field and hide the date picker. */
	_clearDate: function(id) {
		var target = $(id);
		this._selectDate(target, "");
	},

	/* Update the input field with the selected date. */
	_selectDate: function(id, dateStr) {
		var onSelect,
			target = $(id),
			inst = this._getInst(target[0]);

		dateStr = (dateStr != null ? dateStr : this._formatDate(inst));
		if (inst.input) {
			inst.input.val(dateStr);
		}
		this._updateAlternate(inst);

		onSelect = this._get(inst, "onSelect");
		if (onSelect) {
			onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback
		} else if (inst.input) {
			inst.input.trigger("change"); // fire the change event
		}

		if (inst.inline){
			this._updateDatepicker(inst);
		} else {
			this._hideDatepicker();
			this._lastInput = inst.input[0];
			if (typeof(inst.input[0]) !== "object") {
				inst.input.focus(); // restore focus
			}
			this._lastInput = null;
		}
	},

	/* Update any alternate field to synchronise with the main field. */
	_updateAlternate: function(inst) {
		var altFormat, date, dateStr,
			altField = this._get(inst, "altField");

		if (altField) { // update alternate field too
			altFormat = this._get(inst, "altFormat") || this._get(inst, "dateFormat");
			date = this._getDate(inst);
			dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));
			$(altField).each(function() { $(this).val(dateStr); });
		}
	},

	/* Set as beforeShowDay function to prevent selection of weekends.
	 * @param  date  Date - the date to customise
	 * @return [boolean, string] - is this date selectable?, what is its CSS class?
	 */
	noWeekends: function(date) {
		var day = date.getDay();
		return [(day > 0 && day < 6), ""];
	},

	/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.
	 * @param  date  Date - the date to get the week for
	 * @return  number - the number of the week within the year that contains this date
	 */
	iso8601Week: function(date) {
		var time,
			checkDate = new Date(date.getTime());

		// Find Thursday of this week starting on Monday
		checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));

		time = checkDate.getTime();
		checkDate.setMonth(0); // Compare with Jan 1
		checkDate.setDate(1);
		return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
	},

	/* Parse a string value into a date object.
	 * See formatDate below for the possible formats.
	 *
	 * @param  format string - the expected format of the date
	 * @param  value string - the date in the above format
	 * @param  settings Object - attributes include:
	 *					shortYearCutoff  number - the cutoff year for determining the century (optional)
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  Date - the extracted date value or null if value is blank
	 */
	parseDate: function (format, value, settings) {
		if (format == null || value == null) {
			throw "Invalid arguments";
		}

		value = (typeof value === "object" ? value.toString() : value + "");
		if (value === "") {
			return null;
		}

		var iFormat, dim, extra,
			iValue = 0,
			shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,
			shortYearCutoff = (typeof shortYearCutoffTemp !== "string" ? shortYearCutoffTemp :
				new Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),
			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
			year = -1,
			month = -1,
			day = -1,
			doy = -1,
			literal = false,
			date,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			},
			// Extract a number from the string value
			getNumber = function(match) {
				var isDoubled = lookAhead(match),
					size = (match === "@" ? 14 : (match === "!" ? 20 :
					(match === "y" && isDoubled ? 4 : (match === "o" ? 3 : 2)))),
					minSize = (match === "y" ? size : 1),
					digits = new RegExp("^\\d{" + minSize + "," + size + "}"),
					num = value.substring(iValue).match(digits);
				if (!num) {
					throw "Missing number at position " + iValue;
				}
				iValue += num[0].length;
				return parseInt(num[0], 10);
			},
			// Extract a name from the string value and convert to an index
			getName = function(match, shortNames, longNames) {
				var index = -1,
					names = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {
						return [ [k, v] ];
					}).sort(function (a, b) {
						return -(a[1].length - b[1].length);
					});

				$.each(names, function (i, pair) {
					var name = pair[1];
					if (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {
						index = pair[0];
						iValue += name.length;
						return false;
					}
				});
				if (index !== -1) {
					return index + 1;
				} else {
					throw "Unknown name at position " + iValue;
				}
			},
			// Confirm that a literal character matches the string value
			checkLiteral = function() {
				if (value.charAt(iValue) !== format.charAt(iFormat)) {
					throw "Unexpected literal at position " + iValue;
				}
				iValue++;
			};

		for (iFormat = 0; iFormat < format.length; iFormat++) {
			if (literal) {
				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
					literal = false;
				} else {
					checkLiteral();
				}
			} else {
				switch (format.charAt(iFormat)) {
					case "d":
						day = getNumber("d");
						break;
					case "D":
						getName("D", dayNamesShort, dayNames);
						break;
					case "o":
						doy = getNumber("o");
						break;
					case "m":
						month = getNumber("m");
						break;
					case "M":
						month = getName("M", monthNamesShort, monthNames);
						break;
					case "y":
						year = getNumber("y");
						break;
					case "@":
						date = new Date(getNumber("@"));
						year = date.getFullYear();
						month = date.getMonth() + 1;
						day = date.getDate();
						break;
					case "!":
						date = new Date((getNumber("!") - this._ticksTo1970) / 10000);
						year = date.getFullYear();
						month = date.getMonth() + 1;
						day = date.getDate();
						break;
					case "'":
						if (lookAhead("'")){
							checkLiteral();
						} else {
							literal = true;
						}
						break;
					default:
						checkLiteral();
				}
			}
		}

		if (iValue < value.length){
			extra = value.substr(iValue);
			if (!/^\s+/.test(extra)) {
				throw "Extra/unparsed characters found in date: " + extra;
			}
		}

		if (year === -1) {
			year = new Date().getFullYear();
		} else if (year < 100) {
			year += new Date().getFullYear() - new Date().getFullYear() % 100 +
				(year <= shortYearCutoff ? 0 : -100);
		}

		if (doy > -1) {
			month = 1;
			day = doy;
			do {
				dim = this._getDaysInMonth(year, month - 1);
				if (day <= dim) {
					break;
				}
				month++;
				day -= dim;
			} while (true);
		}

		date = this._daylightSavingAdjust(new Date(year, month - 1, day));
		if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {
			throw "Invalid date"; // E.g. 31/02/00
		}
		return date;
	},

	/* Standard date formats. */
	ATOM: "yy-mm-dd", // RFC 3339 (ISO 8601)
	COOKIE: "D, dd M yy",
	ISO_8601: "yy-mm-dd",
	RFC_822: "D, d M y",
	RFC_850: "DD, dd-M-y",
	RFC_1036: "D, d M y",
	RFC_1123: "D, d M yy",
	RFC_2822: "D, d M yy",
	RSS: "D, d M y", // RFC 822
	TICKS: "!",
	TIMESTAMP: "@",
	W3C: "yy-mm-dd", // ISO 8601

	_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +
		Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),

	/* Format a date object into a string value.
	 * The format can be combinations of the following:
	 * d  - day of month (no leading zero)
	 * dd - day of month (two digit)
	 * o  - day of year (no leading zeros)
	 * oo - day of year (three digit)
	 * D  - day name short
	 * DD - day name long
	 * m  - month of year (no leading zero)
	 * mm - month of year (two digit)
	 * M  - month name short
	 * MM - month name long
	 * y  - year (two digit)
	 * yy - year (four digit)
	 * @ - Unix timestamp (ms since 01/01/1970)
	 * ! - Windows ticks (100ns since 01/01/0001)
	 * "..." - literal text
	 * '' - single quote
	 *
	 * @param  format string - the desired format of the date
	 * @param  date Date - the date value to format
	 * @param  settings Object - attributes include:
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  string - the date in the above format
	 */
	formatDate: function (format, date, settings) {
		if (!date) {
			return "";
		}

		var iFormat,
			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			},
			// Format a number, with leading zero if necessary
			formatNumber = function(match, value, len) {
				var num = "" + value;
				if (lookAhead(match)) {
					while (num.length < len) {
						num = "0" + num;
					}
				}
				return num;
			},
			// Format a name, short or long as requested
			formatName = function(match, value, shortNames, longNames) {
				return (lookAhead(match) ? longNames[value] : shortNames[value]);
			},
			output = "",
			literal = false;

		if (date) {
			for (iFormat = 0; iFormat < format.length; iFormat++) {
				if (literal) {
					if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
						literal = false;
					} else {
						output += format.charAt(iFormat);
					}
				} else {
					switch (format.charAt(iFormat)) {
						case "d":
							output += formatNumber("d", date.getDate(), 2);
							break;
						case "D":
							output += formatName("D", date.getDay(), dayNamesShort, dayNames);
							break;
						case "o":
							output += formatNumber("o",
								Math.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);
							break;
						case "m":
							output += formatNumber("m", date.getMonth() + 1, 2);
							break;
						case "M":
							output += formatName("M", date.getMonth(), monthNamesShort, monthNames);
							break;
						case "y":
							output += (lookAhead("y") ? date.getFullYear() :
								(date.getYear() % 100 < 10 ? "0" : "") + date.getYear() % 100);
							break;
						case "@":
							output += date.getTime();
							break;
						case "!":
							output += date.getTime() * 10000 + this._ticksTo1970;
							break;
						case "'":
							if (lookAhead("'")) {
								output += "'";
							} else {
								literal = true;
							}
							break;
						default:
							output += format.charAt(iFormat);
					}
				}
			}
		}
		return output;
	},

	/* Extract all possible characters from the date format. */
	_possibleChars: function (format) {
		var iFormat,
			chars = "",
			literal = false,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			};

		for (iFormat = 0; iFormat < format.length; iFormat++) {
			if (literal) {
				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
					literal = false;
				} else {
					chars += format.charAt(iFormat);
				}
			} else {
				switch (format.charAt(iFormat)) {
					case "d": case "m": case "y": case "@":
						chars += "0123456789";
						break;
					case "D": case "M":
						return null; // Accept anything
					case "'":
						if (lookAhead("'")) {
							chars += "'";
						} else {
							literal = true;
						}
						break;
					default:
						chars += format.charAt(iFormat);
				}
			}
		}
		return chars;
	},

	/* Get a setting value, defaulting if necessary. */
	_get: function(inst, name) {
		return inst.settings[name] !== undefined ?
			inst.settings[name] : this._defaults[name];
	},

	/* Parse existing date and initialise date picker. */
	_setDateFromField: function(inst, noDefault) {
		if (inst.input.val() === inst.lastVal) {
			return;
		}

		var dateFormat = this._get(inst, "dateFormat"),
			dates = inst.lastVal = inst.input ? inst.input.val() : null,
			defaultDate = this._getDefaultDate(inst),
			date = defaultDate,
			settings = this._getFormatConfig(inst);

		try {
			date = this.parseDate(dateFormat, dates, settings) || defaultDate;
		} catch (event) {
			dates = (noDefault ? "" : dates);
		}
		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		inst.currentDay = (dates ? date.getDate() : 0);
		inst.currentMonth = (dates ? date.getMonth() : 0);
		inst.currentYear = (dates ? date.getFullYear() : 0);
		this._adjustInstDate(inst);
	},

	/* Retrieve the default date shown on opening. */
	_getDefaultDate: function(inst) {
		return this._restrictMinMax(inst,
			this._determineDate(inst, this._get(inst, "defaultDate"), new Date()));
	},

	/* A date may be specified as an exact value or a relative one. */
	_determineDate: function(inst, date, defaultDate) {
		var offsetNumeric = function(offset) {
				var date = new Date();
				date.setDate(date.getDate() + offset);
				return date;
			},
			offsetString = function(offset) {
				try {
					return $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
						offset, $.datepicker._getFormatConfig(inst));
				}
				catch (e) {
					// Ignore
				}

				var date = (offset.toLowerCase().match(/^c/) ?
					$.datepicker._getDate(inst) : null) || new Date(),
					year = date.getFullYear(),
					month = date.getMonth(),
					day = date.getDate(),
					pattern = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
					matches = pattern.exec(offset);

				while (matches) {
					switch (matches[2] || "d") {
						case "d" : case "D" :
							day += parseInt(matches[1],10); break;
						case "w" : case "W" :
							day += parseInt(matches[1],10) * 7; break;
						case "m" : case "M" :
							month += parseInt(matches[1],10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
							break;
						case "y": case "Y" :
							year += parseInt(matches[1],10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
							break;
					}
					matches = pattern.exec(offset);
				}
				return new Date(year, month, day);
			},
			newDate = (date == null || date === "" ? defaultDate : (typeof date === "string" ? offsetString(date) :
				(typeof date === "number" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));

		newDate = (newDate && newDate.toString() === "Invalid Date" ? defaultDate : newDate);
		if (newDate) {
			newDate.setHours(0);
			newDate.setMinutes(0);
			newDate.setSeconds(0);
			newDate.setMilliseconds(0);
		}
		return this._daylightSavingAdjust(newDate);
	},

	/* Handle switch to/from daylight saving.
	 * Hours may be non-zero on daylight saving cut-over:
	 * > 12 when midnight changeover, but then cannot generate
	 * midnight datetime, so jump to 1AM, otherwise reset.
	 * @param  date  (Date) the date to check
	 * @return  (Date) the corrected date
	 */
	_daylightSavingAdjust: function(date) {
		if (!date) {
			return null;
		}
		date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);
		return date;
	},

	/* Set the date(s) directly. */
	_setDate: function(inst, date, noChange) {
		var clear = !date,
			origMonth = inst.selectedMonth,
			origYear = inst.selectedYear,
			newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));

		inst.selectedDay = inst.currentDay = newDate.getDate();
		inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();
		inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();
		if ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {
			this._notifyChange(inst);
		}
		this._adjustInstDate(inst);
		if (inst.input) {
			inst.input.val(clear ? "" : this._formatDate(inst));
		}
	},

	/* Retrieve the date(s) directly. */
	_getDate: function(inst) {
		var startDate = (!inst.currentYear || (inst.input && inst.input.val() === "") ? null :
			this._daylightSavingAdjust(new Date(
			inst.currentYear, inst.currentMonth, inst.currentDay)));
			return startDate;
	},

	/* Attach the onxxx handlers.  These are declared statically so
	 * they work with static code transformers like Caja.
	 */
	_attachHandlers: function(inst) {
		var stepMonths = this._get(inst, "stepMonths"),
			id = "#" + inst.id.replace( /\\\\/g, "\\" );
		inst.dpDiv.find("[data-handler]").map(function () {
			var handler = {
				prev: function () {
					$.datepicker._adjustDate(id, -stepMonths, "M");
				},
				next: function () {
					$.datepicker._adjustDate(id, +stepMonths, "M");
				},
				hide: function () {
					$.datepicker._hideDatepicker();
				},
				today: function () {
					$.datepicker._gotoToday(id);
				},
				selectDay: function () {
					$.datepicker._selectDay(id, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this);
					return false;
				},
				selectMonth: function () {
					$.datepicker._selectMonthYear(id, this, "M");
					return false;
				},
				selectYear: function () {
					$.datepicker._selectMonthYear(id, this, "Y");
					return false;
				}
			};
			$(this).bind(this.getAttribute("data-event"), handler[this.getAttribute("data-handler")]);
		});
	},

	/* Generate the HTML for the current state of the date picker. */
	_generateHTML: function(inst) {
		var maxDraw, prevText, prev, nextText, next, currentText, gotoDate,
			controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,
			monthNames, monthNamesShort, beforeShowDay, showOtherMonths,
			selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,
			cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,
			printDate, dRow, tbody, daySettings, otherMonth, unselectable,
			tempDate = new Date(),
			today = this._daylightSavingAdjust(
				new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time
			isRTL = this._get(inst, "isRTL"),
			showButtonPanel = this._get(inst, "showButtonPanel"),
			hideIfNoPrevNext = this._get(inst, "hideIfNoPrevNext"),
			navigationAsDateFormat = this._get(inst, "navigationAsDateFormat"),
			numMonths = this._getNumberOfMonths(inst),
			showCurrentAtPos = this._get(inst, "showCurrentAtPos"),
			stepMonths = this._get(inst, "stepMonths"),
			isMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),
			currentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :
				new Date(inst.currentYear, inst.currentMonth, inst.currentDay))),
			minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			drawMonth = inst.drawMonth - showCurrentAtPos,
			drawYear = inst.drawYear;

		if (drawMonth < 0) {
			drawMonth += 12;
			drawYear--;
		}
		if (maxDate) {
			maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),
				maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));
			maxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);
			while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {
				drawMonth--;
				if (drawMonth < 0) {
					drawMonth = 11;
					drawYear--;
				}
			}
		}
		inst.drawMonth = drawMonth;
		inst.drawYear = drawYear;

		prevText = this._get(inst, "prevText");
		prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),
			this._getFormatConfig(inst)));

		prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?
			"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'" +
			" title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>" :
			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+ prevText +"'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>"));

		nextText = this._get(inst, "nextText");
		nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),
			this._getFormatConfig(inst)));

		next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?
			"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'" +
			" title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>" :
			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+ nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>"));

		currentText = this._get(inst, "currentText");
		gotoDate = (this._get(inst, "gotoCurrent") && inst.currentDay ? currentDate : today);
		currentText = (!navigationAsDateFormat ? currentText :
			this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));

		controls = (!inst.inline ? "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" +
			this._get(inst, "closeText") + "</button>" : "");

		buttonPanel = (showButtonPanel) ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (isRTL ? controls : "") +
			(this._isInRange(inst, gotoDate) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'" +
			">" + currentText + "</button>" : "") + (isRTL ? "" : controls) + "</div>" : "";

		firstDay = parseInt(this._get(inst, "firstDay"),10);
		firstDay = (isNaN(firstDay) ? 0 : firstDay);

		showWeek = this._get(inst, "showWeek");
		dayNames = this._get(inst, "dayNames");
		dayNamesMin = this._get(inst, "dayNamesMin");
		monthNames = this._get(inst, "monthNames");
		monthNamesShort = this._get(inst, "monthNamesShort");
		beforeShowDay = this._get(inst, "beforeShowDay");
		showOtherMonths = this._get(inst, "showOtherMonths");
		selectOtherMonths = this._get(inst, "selectOtherMonths");
		defaultDate = this._getDefaultDate(inst);
		html = "";
		dow;
		for (row = 0; row < numMonths[0]; row++) {
			group = "";
			this.maxRows = 4;
			for (col = 0; col < numMonths[1]; col++) {
				selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));
				cornerClass = " ui-corner-all";
				calender = "";
				if (isMultiMonth) {
					calender += "<div class='ui-datepicker-group";
					if (numMonths[1] > 1) {
						switch (col) {
							case 0: calender += " ui-datepicker-group-first";
								cornerClass = " ui-corner-" + (isRTL ? "right" : "left"); break;
							case numMonths[1]-1: calender += " ui-datepicker-group-last";
								cornerClass = " ui-corner-" + (isRTL ? "left" : "right"); break;
							default: calender += " ui-datepicker-group-middle"; cornerClass = ""; break;
						}
					}
					calender += "'>";
				}
				calender += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + cornerClass + "'>" +
					(/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : "") +
					(/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : "") +
					this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,
					row > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers
					"</div><table class='ui-datepicker-calendar'><thead>" +
					"<tr>";
				thead = (showWeek ? "<th class='ui-datepicker-week-col'>" + this._get(inst, "weekHeader") + "</th>" : "");
				for (dow = 0; dow < 7; dow++) { // days of the week
					day = (dow + firstDay) % 7;
					thead += "<th scope='col'" + ((dow + firstDay + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + ">" +
						"<span title='" + dayNames[day] + "'>" + dayNamesMin[day] + "</span></th>";
				}
				calender += thead + "</tr></thead><tbody>";
				daysInMonth = this._getDaysInMonth(drawYear, drawMonth);
				if (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {
					inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);
				}
				leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;
				curRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate
				numRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)
				this.maxRows = numRows;
				printDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));
				for (dRow = 0; dRow < numRows; dRow++) { // create date picker rows
					calender += "<tr>";
					tbody = (!showWeek ? "" : "<td class='ui-datepicker-week-col'>" +
						this._get(inst, "calculateWeek")(printDate) + "</td>");
					for (dow = 0; dow < 7; dow++) { // create date picker days
						daySettings = (beforeShowDay ?
							beforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, ""]);
						otherMonth = (printDate.getMonth() !== drawMonth);
						unselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||
							(minDate && printDate < minDate) || (maxDate && printDate > maxDate);
						tbody += "<td class='" +
							((dow + firstDay + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + // highlight weekends
							(otherMonth ? " ui-datepicker-other-month" : "") + // highlight days from other months
							((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key
							(defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?
							// or defaultDate is current printedDate and defaultDate is selectedDate
							" " + this._dayOverClass : "") + // highlight selected day
							(unselectable ? " " + this._unselectableClass + " ui-state-disabled": "") +  // highlight unselectable days
							(otherMonth && !showOtherMonths ? "" : " " + daySettings[1] + // highlight custom dates
							(printDate.getTime() === currentDate.getTime() ? " " + this._currentClass : "") + // highlight selected day
							(printDate.getTime() === today.getTime() ? " ui-datepicker-today" : "")) + "'" + // highlight today (if different)
							((!otherMonth || showOtherMonths) && daySettings[2] ? " title='" + daySettings[2].replace(/'/g, "&#39;") + "'" : "") + // cell title
							(unselectable ? "" : " data-handler='selectDay' data-event='click' data-month='" + printDate.getMonth() + "' data-year='" + printDate.getFullYear() + "'") + ">" + // actions
							(otherMonth && !showOtherMonths ? "&#xa0;" : // display for other months
							(unselectable ? "<span class='ui-state-default'>" + printDate.getDate() + "</span>" : "<a class='ui-state-default" +
							(printDate.getTime() === today.getTime() ? " ui-state-highlight" : "") +
							(printDate.getTime() === currentDate.getTime() ? " ui-state-active" : "") + // highlight selected day
							(otherMonth ? " ui-priority-secondary" : "") + // distinguish dates from other months
							"' href='#'>" + printDate.getDate() + "</a>")) + "</td>"; // display selectable date
						printDate.setDate(printDate.getDate() + 1);
						printDate = this._daylightSavingAdjust(printDate);
					}
					calender += tbody + "</tr>";
				}
				drawMonth++;
				if (drawMonth > 11) {
					drawMonth = 0;
					drawYear++;
				}
				calender += "</tbody></table>" + (isMultiMonth ? "</div>" +
							((numMonths[0] > 0 && col === numMonths[1]-1) ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
				group += calender;
			}
			html += group;
		}
		html += buttonPanel;
		inst._keyEvent = false;
		return html;
	},

	/* Generate the month and year header. */
	_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,
			secondary, monthNames, monthNamesShort) {

		var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,
			changeMonth = this._get(inst, "changeMonth"),
			changeYear = this._get(inst, "changeYear"),
			showMonthAfterYear = this._get(inst, "showMonthAfterYear"),
			html = "<div class='ui-datepicker-title'>",
			monthHtml = "";

		// month selection
		if (secondary || !changeMonth) {
			monthHtml += "<span class='ui-datepicker-month'>" + monthNames[drawMonth] + "</span>";
		} else {
			inMinYear = (minDate && minDate.getFullYear() === drawYear);
			inMaxYear = (maxDate && maxDate.getFullYear() === drawYear);
			monthHtml += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
			for ( month = 0; month < 12; month++) {
				if ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {
					monthHtml += "<option value='" + month + "'" +
						(month === drawMonth ? " selected='selected'" : "") +
						">" + monthNamesShort[month] + "</option>";
				}
			}
			monthHtml += "</select>";
		}

		if (!showMonthAfterYear) {
			html += monthHtml + (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "");
		}

		// year selection
		if ( !inst.yearshtml ) {
			inst.yearshtml = "";
			if (secondary || !changeYear) {
				html += "<span class='ui-datepicker-year'>" + drawYear + "</span>";
			} else {
				// determine range of years to display
				years = this._get(inst, "yearRange").split(":");
				thisYear = new Date().getFullYear();
				determineYear = function(value) {
					var year = (value.match(/c[+\-].*/) ? drawYear + parseInt(value.substring(1), 10) :
						(value.match(/[+\-].*/) ? thisYear + parseInt(value, 10) :
						parseInt(value, 10)));
					return (isNaN(year) ? thisYear : year);
				};
				year = determineYear(years[0]);
				endYear = Math.max(year, determineYear(years[1] || ""));
				year = (minDate ? Math.max(year, minDate.getFullYear()) : year);
				endYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);
				inst.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
				for (; year <= endYear; year++) {
					inst.yearshtml += "<option value='" + year + "'" +
						(year === drawYear ? " selected='selected'" : "") +
						">" + year + "</option>";
				}
				inst.yearshtml += "</select>";

				html += inst.yearshtml;
				inst.yearshtml = null;
			}
		}

		html += this._get(inst, "yearSuffix");
		if (showMonthAfterYear) {
			html += (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "") + monthHtml;
		}
		html += "</div>"; // Close datepicker_header
		return html;
	},

	/* Adjust one of the date sub-fields. */
	_adjustInstDate: function(inst, offset, period) {
		var year = inst.drawYear + (period === "Y" ? offset : 0),
			month = inst.drawMonth + (period === "M" ? offset : 0),
			day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === "D" ? offset : 0),
			date = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));

		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		if (period === "M" || period === "Y") {
			this._notifyChange(inst);
		}
	},

	/* Ensure a date is within any min/max bounds. */
	_restrictMinMax: function(inst, date) {
		var minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			newDate = (minDate && date < minDate ? minDate : date);
		return (maxDate && newDate > maxDate ? maxDate : newDate);
	},

	/* Notify change of month/year. */
	_notifyChange: function(inst) {
		var onChange = this._get(inst, "onChangeMonthYear");
		if (onChange) {
			onChange.apply((inst.input ? inst.input[0] : null),
				[inst.selectedYear, inst.selectedMonth + 1, inst]);
		}
	},

	/* Determine the number of months to show. */
	_getNumberOfMonths: function(inst) {
		var numMonths = this._get(inst, "numberOfMonths");
		return (numMonths == null ? [1, 1] : (typeof numMonths === "number" ? [1, numMonths] : numMonths));
	},

	/* Determine the current maximum date - ensure no time components are set. */
	_getMinMaxDate: function(inst, minMax) {
		return this._determineDate(inst, this._get(inst, minMax + "Date"), null);
	},

	/* Find the number of days in a given month. */
	_getDaysInMonth: function(year, month) {
		return 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();
	},

	/* Find the day of the week of the first of a month. */
	_getFirstDayOfMonth: function(year, month) {
		return new Date(year, month, 1).getDay();
	},

	/* Determines if we should allow a "next/prev" month display change. */
	_canAdjustMonth: function(inst, offset, curYear, curMonth) {
		var numMonths = this._getNumberOfMonths(inst),
			date = this._daylightSavingAdjust(new Date(curYear,
			curMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));

		if (offset < 0) {
			date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));
		}
		return this._isInRange(inst, date);
	},

	/* Is the given date in the accepted range? */
	_isInRange: function(inst, date) {
		var yearSplit, currentYear,
			minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			minYear = null,
			maxYear = null,
			years = this._get(inst, "yearRange");
			if (years){
				yearSplit = years.split(":");
				currentYear = new Date().getFullYear();
				minYear = parseInt(yearSplit[0], 10);
				maxYear = parseInt(yearSplit[1], 10);
				if ( yearSplit[0].match(/[+\-].*/) ) {
					minYear += currentYear;
				}
				if ( yearSplit[1].match(/[+\-].*/) ) {
					maxYear += currentYear;
				}
			}

		return ((!minDate || date.getTime() >= minDate.getTime()) &&
			(!maxDate || date.getTime() <= maxDate.getTime()) &&
			(!minYear || date.getFullYear() >= minYear) &&
			(!maxYear || date.getFullYear() <= maxYear));
	},

	/* Provide the configuration settings for formatting/parsing. */
	_getFormatConfig: function(inst) {
		var shortYearCutoff = this._get(inst, "shortYearCutoff");
		shortYearCutoff = (typeof shortYearCutoff !== "string" ? shortYearCutoff :
			new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));
		return {shortYearCutoff: shortYearCutoff,
			dayNamesShort: this._get(inst, "dayNamesShort"), dayNames: this._get(inst, "dayNames"),
			monthNamesShort: this._get(inst, "monthNamesShort"), monthNames: this._get(inst, "monthNames")};
	},

	/* Format the given date for display. */
	_formatDate: function(inst, day, month, year) {
		if (!day) {
			inst.currentDay = inst.selectedDay;
			inst.currentMonth = inst.selectedMonth;
			inst.currentYear = inst.selectedYear;
		}
		var date = (day ? (typeof day === "object" ? day :
			this._daylightSavingAdjust(new Date(year, month, day))) :
			this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));
		return this.formatDate(this._get(inst, "dateFormat"), date, this._getFormatConfig(inst));
	}
});

/*
 * Bind hover events for datepicker elements.
 * Done via delegate so the binding only occurs once in the lifetime of the parent div.
 * Global datepicker_instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.
 */
function datepicker_bindHover(dpDiv) {
	var selector = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
	return dpDiv.delegate(selector, "mouseout", function() {
			$(this).removeClass("ui-state-hover");
			if (this.className.indexOf("ui-datepicker-prev") !== -1) {
				$(this).removeClass("ui-datepicker-prev-hover");
			}
			if (this.className.indexOf("ui-datepicker-next") !== -1) {
				$(this).removeClass("ui-datepicker-next-hover");
			}
		})
		.delegate( selector, "mouseover", datepicker_handleMouseover );
}

function datepicker_handleMouseover() {
	if (!$.datepicker._isDisabledDatepicker( datepicker_instActive.inline? datepicker_instActive.dpDiv.parent()[0] : datepicker_instActive.input[0])) {
		$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
		$(this).addClass("ui-state-hover");
		if (this.className.indexOf("ui-datepicker-prev") !== -1) {
			$(this).addClass("ui-datepicker-prev-hover");
		}
		if (this.className.indexOf("ui-datepicker-next") !== -1) {
			$(this).addClass("ui-datepicker-next-hover");
		}
	}
}

/* jQuery extend now ignores nulls! */
function datepicker_extendRemove(target, props) {
	$.extend(target, props);
	for (var name in props) {
		if (props[name] == null) {
			target[name] = props[name];
		}
	}
	return target;
}

/* Invoke the datepicker functionality.
   @param  options  string - a command, optionally followed by additional parameters or
					Object - settings for attaching new datepicker functionality
   @return  jQuery object */
$.fn.datepicker = function(options){

	/* Verify an empty collection wasn't passed - Fixes #6976 */
	if ( !this.length ) {
		return this;
	}

	/* Initialise the date picker. */
	if (!$.datepicker.initialized) {
		$(document).mousedown($.datepicker._checkExternalClick);
		$.datepicker.initialized = true;
	}

	/* Append datepicker main container to body if not exist. */
	if ($("#"+$.datepicker._mainDivId).length === 0) {
		$("body").append($.datepicker.dpDiv);
	}

	var otherArgs = Array.prototype.slice.call(arguments, 1);
	if (typeof options === "string" && (options === "isDisabled" || options === "getDate" || options === "widget")) {
		return $.datepicker["_" + options + "Datepicker"].
			apply($.datepicker, [this[0]].concat(otherArgs));
	}
	if (options === "option" && arguments.length === 2 && typeof arguments[1] === "string") {
		return $.datepicker["_" + options + "Datepicker"].
			apply($.datepicker, [this[0]].concat(otherArgs));
	}
	return this.each(function() {
		typeof options === "string" ?
			$.datepicker["_" + options + "Datepicker"].
				apply($.datepicker, [this].concat(otherArgs)) :
			$.datepicker._attachDatepicker(this, options);
	});
};

$.datepicker = new Datepicker(); // singleton instance
$.datepicker.initialized = false;
$.datepicker.uuid = new Date().getTime();
$.datepicker.version = "1.11.3";

var datepicker = $.datepicker;


/*!
 * jQuery UI Draggable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */


$.widget("ui.draggable", $.ui.mouse, {
	version: "1.11.3",
	widgetEventPrefix: "drag",
	options: {
		addClasses: true,
		appendTo: "parent",
		axis: false,
		connectToSortable: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		grid: false,
		handle: false,
		helper: "original",
		iframeFix: false,
		opacity: false,
		refreshPositions: false,
		revert: false,
		revertDuration: 500,
		scope: "default",
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		snap: false,
		snapMode: "both",
		snapTolerance: 20,
		stack: false,
		zIndex: false,

		// callbacks
		drag: null,
		start: null,
		stop: null
	},
	_create: function() {

		if ( this.options.helper === "original" ) {
			this._setPositionRelative();
		}
		if (this.options.addClasses){
			this.element.addClass("ui-draggable");
		}
		if (this.options.disabled){
			this.element.addClass("ui-draggable-disabled");
		}
		this._setHandleClassName();

		this._mouseInit();
	},

	_setOption: function( key, value ) {
		this._super( key, value );
		if ( key === "handle" ) {
			this._removeHandleClassName();
			this._setHandleClassName();
		}
	},

	_destroy: function() {
		if ( ( this.helper || this.element ).is( ".ui-draggable-dragging" ) ) {
			this.destroyOnClear = true;
			return;
		}
		this.element.removeClass( "ui-draggable ui-draggable-dragging ui-draggable-disabled" );
		this._removeHandleClassName();
		this._mouseDestroy();
	},

	_mouseCapture: function(event) {
		var o = this.options;

		this._blurActiveElement( event );

		// among others, prevent a drag on a resizable-handle
		if (this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0) {
			return false;
		}

		//Quit if we're not on a valid handle
		this.handle = this._getHandle(event);
		if (!this.handle) {
			return false;
		}

		this._blockFrames( o.iframeFix === true ? "iframe" : o.iframeFix );

		return true;

	},

	_blockFrames: function( selector ) {
		this.iframeBlocks = this.document.find( selector ).map(function() {
			var iframe = $( this );

			return $( "<div>" )
				.css( "position", "absolute" )
				.appendTo( iframe.parent() )
				.outerWidth( iframe.outerWidth() )
				.outerHeight( iframe.outerHeight() )
				.offset( iframe.offset() )[ 0 ];
		});
	},

	_unblockFrames: function() {
		if ( this.iframeBlocks ) {
			this.iframeBlocks.remove();
			delete this.iframeBlocks;
		}
	},

	_blurActiveElement: function( event ) {
		var document = this.document[ 0 ];

		// Only need to blur if the event occurred on the draggable itself, see #10527
		if ( !this.handleElement.is( event.target ) ) {
			return;
		}

		// support: IE9
		// IE9 throws an "Unspecified error" accessing document.activeElement from an <iframe>
		try {

			// Support: IE9, IE10
			// If the <body> is blurred, IE will switch windows, see #9520
			if ( document.activeElement && document.activeElement.nodeName.toLowerCase() !== "body" ) {

				// Blur any element that currently has focus, see #4261
				$( document.activeElement ).blur();
			}
		} catch ( error ) {}
	},

	_mouseStart: function(event) {

		var o = this.options;

		//Create and append the visible helper
		this.helper = this._createHelper(event);

		this.helper.addClass("ui-draggable-dragging");

		//Cache the helper size
		this._cacheHelperProportions();

		//If ddmanager is used for droppables, set the global draggable
		if ($.ui.ddmanager) {
			$.ui.ddmanager.current = this;
		}

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Store the helper's css position
		this.cssPosition = this.helper.css( "position" );
		this.scrollParent = this.helper.scrollParent( true );
		this.offsetParent = this.helper.offsetParent();
		this.hasFixedAncestor = this.helper.parents().filter(function() {
				return $( this ).css( "position" ) === "fixed";
			}).length > 0;

		//The element's absolute position on the page minus margins
		this.positionAbs = this.element.offset();
		this._refreshOffsets( event );

		//Generate the original position
		this.originalPosition = this.position = this._generatePosition( event, false );
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

		//Set a containment if given in the options
		this._setContainment();

		//Trigger event + callbacks
		if (this._trigger("start", event) === false) {
			this._clear();
			return false;
		}

		//Recache the helper size
		this._cacheHelperProportions();

		//Prepare the droppable offsets
		if ($.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(this, event);
		}

		// Reset helper's right/bottom css if they're set and set explicit width/height instead
		// as this prevents resizing of elements with right/bottom set (see #7772)
		this._normalizeRightBottom();

		this._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position

		//If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)
		if ( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStart(this, event);
		}

		return true;
	},

	_refreshOffsets: function( event ) {
		this.offset = {
			top: this.positionAbs.top - this.margins.top,
			left: this.positionAbs.left - this.margins.left,
			scroll: false,
			parent: this._getParentOffset(),
			relative: this._getRelativeOffset()
		};

		this.offset.click = {
			left: event.pageX - this.offset.left,
			top: event.pageY - this.offset.top
		};
	},

	_mouseDrag: function(event, noPropagation) {
		// reset any necessary cached properties (see #5009)
		if ( this.hasFixedAncestor ) {
			this.offset.parent = this._getParentOffset();
		}

		//Compute the helpers position
		this.position = this._generatePosition( event, true );
		this.positionAbs = this._convertPositionTo("absolute");

		//Call plugins and callbacks and use the resulting position if something is returned
		if (!noPropagation) {
			var ui = this._uiHash();
			if (this._trigger("drag", event, ui) === false) {
				this._mouseUp({});
				return false;
			}
			this.position = ui.position;
		}

		this.helper[ 0 ].style.left = this.position.left + "px";
		this.helper[ 0 ].style.top = this.position.top + "px";

		if ($.ui.ddmanager) {
			$.ui.ddmanager.drag(this, event);
		}

		return false;
	},

	_mouseStop: function(event) {

		//If we are using droppables, inform the manager about the drop
		var that = this,
			dropped = false;
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			dropped = $.ui.ddmanager.drop(this, event);
		}

		//if a drop comes from outside (a sortable)
		if (this.dropped) {
			dropped = this.dropped;
			this.dropped = false;
		}

		if ((this.options.revert === "invalid" && !dropped) || (this.options.revert === "valid" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {
			$(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
				if (that._trigger("stop", event) !== false) {
					that._clear();
				}
			});
		} else {
			if (this._trigger("stop", event) !== false) {
				this._clear();
			}
		}

		return false;
	},

	_mouseUp: function( event ) {
		this._unblockFrames();

		//If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)
		if ( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStop(this, event);
		}

		// Only need to focus if the event occurred on the draggable itself, see #10527
		if ( this.handleElement.is( event.target ) ) {
			// The interaction is over; whether or not the click resulted in a drag, focus the element
			this.element.focus();
		}

		return $.ui.mouse.prototype._mouseUp.call(this, event);
	},

	cancel: function() {

		if (this.helper.is(".ui-draggable-dragging")) {
			this._mouseUp({});
		} else {
			this._clear();
		}

		return this;

	},

	_getHandle: function(event) {
		return this.options.handle ?
			!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :
			true;
	},

	_setHandleClassName: function() {
		this.handleElement = this.options.handle ?
			this.element.find( this.options.handle ) : this.element;
		this.handleElement.addClass( "ui-draggable-handle" );
	},

	_removeHandleClassName: function() {
		this.handleElement.removeClass( "ui-draggable-handle" );
	},

	_createHelper: function(event) {

		var o = this.options,
			helperIsFunction = $.isFunction( o.helper ),
			helper = helperIsFunction ?
				$( o.helper.apply( this.element[ 0 ], [ event ] ) ) :
				( o.helper === "clone" ?
					this.element.clone().removeAttr( "id" ) :
					this.element );

		if (!helper.parents("body").length) {
			helper.appendTo((o.appendTo === "parent" ? this.element[0].parentNode : o.appendTo));
		}

		// http://bugs.jqueryui.com/ticket/9446
		// a helper function can return the original element
		// which wouldn't have been set to relative in _create
		if ( helperIsFunction && helper[ 0 ] === this.element[ 0 ] ) {
			this._setPositionRelative();
		}

		if (helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css("position"))) {
			helper.css("position", "absolute");
		}

		return helper;

	},

	_setPositionRelative: function() {
		if ( !( /^(?:r|a|f)/ ).test( this.element.css( "position" ) ) ) {
			this.element[ 0 ].style.position = "relative";
		}
	},

	_adjustOffsetFromHelper: function(obj) {
		if (typeof obj === "string") {
			obj = obj.split(" ");
		}
		if ($.isArray(obj)) {
			obj = { left: +obj[0], top: +obj[1] || 0 };
		}
		if ("left" in obj) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ("right" in obj) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ("top" in obj) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ("bottom" in obj) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_isRootNode: function( element ) {
		return ( /(html|body)/i ).test( element.tagName ) || element === this.document[ 0 ];
	},

	_getParentOffset: function() {

		//Get the offsetParent and cache its position
		var po = this.offsetParent.offset(),
			document = this.document[ 0 ];

		// This is a special case where we need to modify a offset calculated on start, since the following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
		if (this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		if ( this._isRootNode( this.offsetParent[ 0 ] ) ) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
		};

	},

	_getRelativeOffset: function() {
		if ( this.cssPosition !== "relative" ) {
			return { top: 0, left: 0 };
		}

		var p = this.element.position(),
			scrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );

		return {
			top: p.top - ( parseInt(this.helper.css( "top" ), 10) || 0 ) + ( !scrollIsRootNode ? this.scrollParent.scrollTop() : 0 ),
			left: p.left - ( parseInt(this.helper.css( "left" ), 10) || 0 ) + ( !scrollIsRootNode ? this.scrollParent.scrollLeft() : 0 )
		};

	},

	_cacheMargins: function() {
		this.margins = {
			left: (parseInt(this.element.css("marginLeft"), 10) || 0),
			top: (parseInt(this.element.css("marginTop"), 10) || 0),
			right: (parseInt(this.element.css("marginRight"), 10) || 0),
			bottom: (parseInt(this.element.css("marginBottom"), 10) || 0)
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var isUserScrollable, c, ce,
			o = this.options,
			document = this.document[ 0 ];

		this.relativeContainer = null;

		if ( !o.containment ) {
			this.containment = null;
			return;
		}

		if ( o.containment === "window" ) {
			this.containment = [
				$( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,
				$( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,
				$( window ).scrollLeft() + $( window ).width() - this.helperProportions.width - this.margins.left,
				$( window ).scrollTop() + ( $( window ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
			];
			return;
		}

		if ( o.containment === "document") {
			this.containment = [
				0,
				0,
				$( document ).width() - this.helperProportions.width - this.margins.left,
				( $( document ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
			];
			return;
		}

		if ( o.containment.constructor === Array ) {
			this.containment = o.containment;
			return;
		}

		if ( o.containment === "parent" ) {
			o.containment = this.helper[ 0 ].parentNode;
		}

		c = $( o.containment );
		ce = c[ 0 ];

		if ( !ce ) {
			return;
		}

		isUserScrollable = /(scroll|auto)/.test( c.css( "overflow" ) );

		this.containment = [
			( parseInt( c.css( "borderLeftWidth" ), 10 ) || 0 ) + ( parseInt( c.css( "paddingLeft" ), 10 ) || 0 ),
			( parseInt( c.css( "borderTopWidth" ), 10 ) || 0 ) + ( parseInt( c.css( "paddingTop" ), 10 ) || 0 ),
			( isUserScrollable ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -
				( parseInt( c.css( "borderRightWidth" ), 10 ) || 0 ) -
				( parseInt( c.css( "paddingRight" ), 10 ) || 0 ) -
				this.helperProportions.width -
				this.margins.left -
				this.margins.right,
			( isUserScrollable ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -
				( parseInt( c.css( "borderBottomWidth" ), 10 ) || 0 ) -
				( parseInt( c.css( "paddingBottom" ), 10 ) || 0 ) -
				this.helperProportions.height -
				this.margins.top -
				this.margins.bottom
		];
		this.relativeContainer = c;
	},

	_convertPositionTo: function(d, pos) {

		if (!pos) {
			pos = this.position;
		}

		var mod = d === "absolute" ? 1 : -1,
			scrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );

		return {
			top: (
				pos.top	+																// The absolute mouse position
				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top * mod -										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.offset.scroll.top : ( scrollIsRootNode ? 0 : this.offset.scroll.top ) ) * mod)
			),
			left: (
				pos.left +																// The absolute mouse position
				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.offset.scroll.left : ( scrollIsRootNode ? 0 : this.offset.scroll.left ) ) * mod)
			)
		};

	},

	_generatePosition: function( event, constrainPosition ) {

		var containment, co, top, left,
			o = this.options,
			scrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] ),
			pageX = event.pageX,
			pageY = event.pageY;

		// Cache the scroll
		if ( !scrollIsRootNode || !this.offset.scroll ) {
			this.offset.scroll = {
				top: this.scrollParent.scrollTop(),
				left: this.scrollParent.scrollLeft()
			};
		}

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		// If we are not dragging yet, we won't check for options
		if ( constrainPosition ) {
			if ( this.containment ) {
				if ( this.relativeContainer ){
					co = this.relativeContainer.offset();
					containment = [
						this.containment[ 0 ] + co.left,
						this.containment[ 1 ] + co.top,
						this.containment[ 2 ] + co.left,
						this.containment[ 3 ] + co.top
					];
				} else {
					containment = this.containment;
				}

				if (event.pageX - this.offset.click.left < containment[0]) {
					pageX = containment[0] + this.offset.click.left;
				}
				if (event.pageY - this.offset.click.top < containment[1]) {
					pageY = containment[1] + this.offset.click.top;
				}
				if (event.pageX - this.offset.click.left > containment[2]) {
					pageX = containment[2] + this.offset.click.left;
				}
				if (event.pageY - this.offset.click.top > containment[3]) {
					pageY = containment[3] + this.offset.click.top;
				}
			}

			if (o.grid) {
				//Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)
				top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;
				pageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

				left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;
				pageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
			}

			if ( o.axis === "y" ) {
				pageX = this.originalPageX;
			}

			if ( o.axis === "x" ) {
				pageY = this.originalPageY;
			}
		}

		return {
			top: (
				pageY -																	// The absolute mouse position
				this.offset.click.top	-												// Click offset (relative to the element)
				this.offset.relative.top -												// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
				( this.cssPosition === "fixed" ? -this.offset.scroll.top : ( scrollIsRootNode ? 0 : this.offset.scroll.top ) )
			),
			left: (
				pageX -																	// The absolute mouse position
				this.offset.click.left -												// Click offset (relative to the element)
				this.offset.relative.left -												// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
				( this.cssPosition === "fixed" ? -this.offset.scroll.left : ( scrollIsRootNode ? 0 : this.offset.scroll.left ) )
			)
		};

	},

	_clear: function() {
		this.helper.removeClass("ui-draggable-dragging");
		if (this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {
			this.helper.remove();
		}
		this.helper = null;
		this.cancelHelperRemoval = false;
		if ( this.destroyOnClear ) {
			this.destroy();
		}
	},

	_normalizeRightBottom: function() {
		if ( this.options.axis !== "y" && this.helper.css( "right" ) !== "auto" ) {
			this.helper.width( this.helper.width() );
			this.helper.css( "right", "auto" );
		}
		if ( this.options.axis !== "x" && this.helper.css( "bottom" ) !== "auto" ) {
			this.helper.height( this.helper.height() );
			this.helper.css( "bottom", "auto" );
		}
	},

	// From now on bulk stuff - mainly helpers

	_trigger: function( type, event, ui ) {
		ui = ui || this._uiHash();
		$.ui.plugin.call( this, type, [ event, ui, this ], true );

		// Absolute position and offset (see #6884 ) have to be recalculated after plugins
		if ( /^(drag|start|stop)/.test( type ) ) {
			this.positionAbs = this._convertPositionTo( "absolute" );
			ui.offset = this.positionAbs;
		}
		return $.Widget.prototype._trigger.call( this, type, event, ui );
	},

	plugins: {},

	_uiHash: function() {
		return {
			helper: this.helper,
			position: this.position,
			originalPosition: this.originalPosition,
			offset: this.positionAbs
		};
	}

});

$.ui.plugin.add( "draggable", "connectToSortable", {
	start: function( event, ui, draggable ) {
		var uiSortable = $.extend( {}, ui, {
			item: draggable.element
		});

		draggable.sortables = [];
		$( draggable.options.connectToSortable ).each(function() {
			var sortable = $( this ).sortable( "instance" );

			if ( sortable && !sortable.options.disabled ) {
				draggable.sortables.push( sortable );

				// refreshPositions is called at drag start to refresh the containerCache
				// which is used in drag. This ensures it's initialized and synchronized
				// with any changes that might have happened on the page since initialization.
				sortable.refreshPositions();
				sortable._trigger("activate", event, uiSortable);
			}
		});
	},
	stop: function( event, ui, draggable ) {
		var uiSortable = $.extend( {}, ui, {
			item: draggable.element
		});

		draggable.cancelHelperRemoval = false;

		$.each( draggable.sortables, function() {
			var sortable = this;

			if ( sortable.isOver ) {
				sortable.isOver = 0;

				// Allow this sortable to handle removing the helper
				draggable.cancelHelperRemoval = true;
				sortable.cancelHelperRemoval = false;

				// Use _storedCSS To restore properties in the sortable,
				// as this also handles revert (#9675) since the draggable
				// may have modified them in unexpected ways (#8809)
				sortable._storedCSS = {
					position: sortable.placeholder.css( "position" ),
					top: sortable.placeholder.css( "top" ),
					left: sortable.placeholder.css( "left" )
				};

				sortable._mouseStop(event);

				// Once drag has ended, the sortable should return to using
				// its original helper, not the shared helper from draggable
				sortable.options.helper = sortable.options._helper;
			} else {
				// Prevent this Sortable from removing the helper.
				// However, don't set the draggable to remove the helper
				// either as another connected Sortable may yet handle the removal.
				sortable.cancelHelperRemoval = true;

				sortable._trigger( "deactivate", event, uiSortable );
			}
		});
	},
	drag: function( event, ui, draggable ) {
		$.each( draggable.sortables, function() {
			var innermostIntersecting = false,
				sortable = this;

			// Copy over variables that sortable's _intersectsWith uses
			sortable.positionAbs = draggable.positionAbs;
			sortable.helperProportions = draggable.helperProportions;
			sortable.offset.click = draggable.offset.click;

			if ( sortable._intersectsWith( sortable.containerCache ) ) {
				innermostIntersecting = true;

				$.each( draggable.sortables, function() {
					// Copy over variables that sortable's _intersectsWith uses
					this.positionAbs = draggable.positionAbs;
					this.helperProportions = draggable.helperProportions;
					this.offset.click = draggable.offset.click;

					if ( this !== sortable &&
							this._intersectsWith( this.containerCache ) &&
							$.contains( sortable.element[ 0 ], this.element[ 0 ] ) ) {
						innermostIntersecting = false;
					}

					return innermostIntersecting;
				});
			}

			if ( innermostIntersecting ) {
				// If it intersects, we use a little isOver variable and set it once,
				// so that the move-in stuff gets fired only once.
				if ( !sortable.isOver ) {
					sortable.isOver = 1;

					sortable.currentItem = ui.helper
						.appendTo( sortable.element )
						.data( "ui-sortable-item", true );

					// Store helper option to later restore it
					sortable.options._helper = sortable.options.helper;

					sortable.options.helper = function() {
						return ui.helper[ 0 ];
					};

					// Fire the start events of the sortable with our passed browser event,
					// and our own helper (so it doesn't create a new one)
					event.target = sortable.currentItem[ 0 ];
					sortable._mouseCapture( event, true );
					sortable._mouseStart( event, true, true );

					// Because the browser event is way off the new appended portlet,
					// modify necessary variables to reflect the changes
					sortable.offset.click.top = draggable.offset.click.top;
					sortable.offset.click.left = draggable.offset.click.left;
					sortable.offset.parent.left -= draggable.offset.parent.left -
						sortable.offset.parent.left;
					sortable.offset.parent.top -= draggable.offset.parent.top -
						sortable.offset.parent.top;

					draggable._trigger( "toSortable", event );

					// Inform draggable that the helper is in a valid drop zone,
					// used solely in the revert option to handle "valid/invalid".
					draggable.dropped = sortable.element;

					// Need to refreshPositions of all sortables in the case that
					// adding to one sortable changes the location of the other sortables (#9675)
					$.each( draggable.sortables, function() {
						this.refreshPositions();
					});

					// hack so receive/update callbacks work (mostly)
					draggable.currentItem = draggable.element;
					sortable.fromOutside = draggable;
				}

				if ( sortable.currentItem ) {
					sortable._mouseDrag( event );
					// Copy the sortable's position because the draggable's can potentially reflect
					// a relative position, while sortable is always absolute, which the dragged
					// element has now become. (#8809)
					ui.position = sortable.position;
				}
			} else {
				// If it doesn't intersect with the sortable, and it intersected before,
				// we fake the drag stop of the sortable, but make sure it doesn't remove
				// the helper by using cancelHelperRemoval.
				if ( sortable.isOver ) {

					sortable.isOver = 0;
					sortable.cancelHelperRemoval = true;

					// Calling sortable's mouseStop would trigger a revert,
					// so revert must be temporarily false until after mouseStop is called.
					sortable.options._revert = sortable.options.revert;
					sortable.options.revert = false;

					sortable._trigger( "out", event, sortable._uiHash( sortable ) );
					sortable._mouseStop( event, true );

					// restore sortable behaviors that were modfied
					// when the draggable entered the sortable area (#9481)
					sortable.options.revert = sortable.options._revert;
					sortable.options.helper = sortable.options._helper;

					if ( sortable.placeholder ) {
						sortable.placeholder.remove();
					}

					// Recalculate the draggable's offset considering the sortable
					// may have modified them in unexpected ways (#8809)
					draggable._refreshOffsets( event );
					ui.position = draggable._generatePosition( event, true );

					draggable._trigger( "fromSortable", event );

					// Inform draggable that the helper is no longer in a valid drop zone
					draggable.dropped = false;

					// Need to refreshPositions of all sortables just in case removing
					// from one sortable changes the location of other sortables (#9675)
					$.each( draggable.sortables, function() {
						this.refreshPositions();
					});
				}
			}
		});
	}
});

$.ui.plugin.add("draggable", "cursor", {
	start: function( event, ui, instance ) {
		var t = $( "body" ),
			o = instance.options;

		if (t.css("cursor")) {
			o._cursor = t.css("cursor");
		}
		t.css("cursor", o.cursor);
	},
	stop: function( event, ui, instance ) {
		var o = instance.options;
		if (o._cursor) {
			$("body").css("cursor", o._cursor);
		}
	}
});

$.ui.plugin.add("draggable", "opacity", {
	start: function( event, ui, instance ) {
		var t = $( ui.helper ),
			o = instance.options;
		if (t.css("opacity")) {
			o._opacity = t.css("opacity");
		}
		t.css("opacity", o.opacity);
	},
	stop: function( event, ui, instance ) {
		var o = instance.options;
		if (o._opacity) {
			$(ui.helper).css("opacity", o._opacity);
		}
	}
});

$.ui.plugin.add("draggable", "scroll", {
	start: function( event, ui, i ) {
		if ( !i.scrollParentNotHidden ) {
			i.scrollParentNotHidden = i.helper.scrollParent( false );
		}

		if ( i.scrollParentNotHidden[ 0 ] !== i.document[ 0 ] && i.scrollParentNotHidden[ 0 ].tagName !== "HTML" ) {
			i.overflowOffset = i.scrollParentNotHidden.offset();
		}
	},
	drag: function( event, ui, i  ) {

		var o = i.options,
			scrolled = false,
			scrollParent = i.scrollParentNotHidden[ 0 ],
			document = i.document[ 0 ];

		if ( scrollParent !== document && scrollParent.tagName !== "HTML" ) {
			if ( !o.axis || o.axis !== "x" ) {
				if ( ( i.overflowOffset.top + scrollParent.offsetHeight ) - event.pageY < o.scrollSensitivity ) {
					scrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;
				} else if ( event.pageY - i.overflowOffset.top < o.scrollSensitivity ) {
					scrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;
				}
			}

			if ( !o.axis || o.axis !== "y" ) {
				if ( ( i.overflowOffset.left + scrollParent.offsetWidth ) - event.pageX < o.scrollSensitivity ) {
					scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;
				} else if ( event.pageX - i.overflowOffset.left < o.scrollSensitivity ) {
					scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;
				}
			}

		} else {

			if (!o.axis || o.axis !== "x") {
				if (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} else if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}
			}

			if (!o.axis || o.axis !== "y") {
				if (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} else if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}
			}

		}

		if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(i, event);
		}

	}
});

$.ui.plugin.add("draggable", "snap", {
	start: function( event, ui, i ) {

		var o = i.options;

		i.snapElements = [];

		$(o.snap.constructor !== String ? ( o.snap.items || ":data(ui-draggable)" ) : o.snap).each(function() {
			var $t = $(this),
				$o = $t.offset();
			if (this !== i.element[0]) {
				i.snapElements.push({
					item: this,
					width: $t.outerWidth(), height: $t.outerHeight(),
					top: $o.top, left: $o.left
				});
			}
		});

	},
	drag: function( event, ui, inst ) {

		var ts, bs, ls, rs, l, r, t, b, i, first,
			o = inst.options,
			d = o.snapTolerance,
			x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,
			y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;

		for (i = inst.snapElements.length - 1; i >= 0; i--){

			l = inst.snapElements[i].left - inst.margins.left;
			r = l + inst.snapElements[i].width;
			t = inst.snapElements[i].top - inst.margins.top;
			b = t + inst.snapElements[i].height;

			if ( x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains( inst.snapElements[ i ].item.ownerDocument, inst.snapElements[ i ].item ) ) {
				if (inst.snapElements[i].snapping) {
					(inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
				}
				inst.snapElements[i].snapping = false;
				continue;
			}

			if (o.snapMode !== "inner") {
				ts = Math.abs(t - y2) <= d;
				bs = Math.abs(b - y1) <= d;
				ls = Math.abs(l - x2) <= d;
				rs = Math.abs(r - x1) <= d;
				if (ts) {
					ui.position.top = inst._convertPositionTo("relative", { top: t - inst.helperProportions.height, left: 0 }).top;
				}
				if (bs) {
					ui.position.top = inst._convertPositionTo("relative", { top: b, left: 0 }).top;
				}
				if (ls) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l - inst.helperProportions.width }).left;
				}
				if (rs) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r }).left;
				}
			}

			first = (ts || bs || ls || rs);

			if (o.snapMode !== "outer") {
				ts = Math.abs(t - y1) <= d;
				bs = Math.abs(b - y2) <= d;
				ls = Math.abs(l - x1) <= d;
				rs = Math.abs(r - x2) <= d;
				if (ts) {
					ui.position.top = inst._convertPositionTo("relative", { top: t, left: 0 }).top;
				}
				if (bs) {
					ui.position.top = inst._convertPositionTo("relative", { top: b - inst.helperProportions.height, left: 0 }).top;
				}
				if (ls) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l }).left;
				}
				if (rs) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r - inst.helperProportions.width }).left;
				}
			}

			if (!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {
				(inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
			}
			inst.snapElements[i].snapping = (ts || bs || ls || rs || first);

		}

	}
});

$.ui.plugin.add("draggable", "stack", {
	start: function( event, ui, instance ) {
		var min,
			o = instance.options,
			group = $.makeArray($(o.stack)).sort(function(a, b) {
				return (parseInt($(a).css("zIndex"), 10) || 0) - (parseInt($(b).css("zIndex"), 10) || 0);
			});

		if (!group.length) { return; }

		min = parseInt($(group[0]).css("zIndex"), 10) || 0;
		$(group).each(function(i) {
			$(this).css("zIndex", min + i);
		});
		this.css("zIndex", (min + group.length));
	}
});

$.ui.plugin.add("draggable", "zIndex", {
	start: function( event, ui, instance ) {
		var t = $( ui.helper ),
			o = instance.options;

		if (t.css("zIndex")) {
			o._zIndex = t.css("zIndex");
		}
		t.css("zIndex", o.zIndex);
	},
	stop: function( event, ui, instance ) {
		var o = instance.options;

		if (o._zIndex) {
			$(ui.helper).css("zIndex", o._zIndex);
		}
	}
});

var draggable = $.ui.draggable;


/*!
 * jQuery UI Resizable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */


$.widget("ui.resizable", $.ui.mouse, {
	version: "1.11.3",
	widgetEventPrefix: "resize",
	options: {
		alsoResize: false,
		animate: false,
		animateDuration: "slow",
		animateEasing: "swing",
		aspectRatio: false,
		autoHide: false,
		containment: false,
		ghost: false,
		grid: false,
		handles: "e,s,se",
		helper: false,
		maxHeight: null,
		maxWidth: null,
		minHeight: 10,
		minWidth: 10,
		// See #7960
		zIndex: 90,

		// callbacks
		resize: null,
		start: null,
		stop: null
	},

	_num: function( value ) {
		return parseInt( value, 10 ) || 0;
	},

	_isNumber: function( value ) {
		return !isNaN( parseInt( value, 10 ) );
	},

	_hasScroll: function( el, a ) {

		if ( $( el ).css( "overflow" ) === "hidden") {
			return false;
		}

		var scroll = ( a && a === "left" ) ? "scrollLeft" : "scrollTop",
			has = false;

		if ( el[ scroll ] > 0 ) {
			return true;
		}

		// TODO: determine which cases actually cause this to happen
		// if the element doesn't have the scroll set, see if it's possible to
		// set the scroll
		el[ scroll ] = 1;
		has = ( el[ scroll ] > 0 );
		el[ scroll ] = 0;
		return has;
	},

	_create: function() {

		var n, i, handle, axis, hname,
			that = this,
			o = this.options;
		this.element.addClass("ui-resizable");

		$.extend(this, {
			_aspectRatio: !!(o.aspectRatio),
			aspectRatio: o.aspectRatio,
			originalElement: this.element,
			_proportionallyResizeElements: [],
			_helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null
		});

		// Wrap the element if it cannot hold child nodes
		if (this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)) {

			this.element.wrap(
				$("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
					position: this.element.css("position"),
					width: this.element.outerWidth(),
					height: this.element.outerHeight(),
					top: this.element.css("top"),
					left: this.element.css("left")
				})
			);

			this.element = this.element.parent().data(
				"ui-resizable", this.element.resizable( "instance" )
			);

			this.elementIsWrapper = true;

			this.element.css({
				marginLeft: this.originalElement.css("marginLeft"),
				marginTop: this.originalElement.css("marginTop"),
				marginRight: this.originalElement.css("marginRight"),
				marginBottom: this.originalElement.css("marginBottom")
			});
			this.originalElement.css({
				marginLeft: 0,
				marginTop: 0,
				marginRight: 0,
				marginBottom: 0
			});
			// support: Safari
			// Prevent Safari textarea resize
			this.originalResizeStyle = this.originalElement.css("resize");
			this.originalElement.css("resize", "none");

			this._proportionallyResizeElements.push( this.originalElement.css({
				position: "static",
				zoom: 1,
				display: "block"
			}) );

			// support: IE9
			// avoid IE jump (hard set the margin)
			this.originalElement.css({ margin: this.originalElement.css("margin") });

			this._proportionallyResize();
		}

		this.handles = o.handles ||
			( !$(".ui-resizable-handle", this.element).length ?
				"e,s,se" : {
					n: ".ui-resizable-n",
					e: ".ui-resizable-e",
					s: ".ui-resizable-s",
					w: ".ui-resizable-w",
					se: ".ui-resizable-se",
					sw: ".ui-resizable-sw",
					ne: ".ui-resizable-ne",
					nw: ".ui-resizable-nw"
				} );

		if (this.handles.constructor === String) {

			if ( this.handles === "all") {
				this.handles = "n,e,s,w,se,sw,ne,nw";
			}

			n = this.handles.split(",");
			this.handles = {};

			for (i = 0; i < n.length; i++) {

				handle = $.trim(n[i]);
				hname = "ui-resizable-" + handle;
				axis = $("<div class='ui-resizable-handle " + hname + "'></div>");

				axis.css({ zIndex: o.zIndex });

				// TODO : What's going on here?
				if ("se" === handle) {
					axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
				}

				this.handles[handle] = ".ui-resizable-" + handle;
				this.element.append(axis);
			}

		}

		this._renderAxis = function(target) {

			var i, axis, padPos, padWrapper;

			target = target || this.element;

			for (i in this.handles) {

				if (this.handles[i].constructor === String) {
					this.handles[i] = this.element.children( this.handles[ i ] ).first().show();
				}

				if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)) {

					axis = $(this.handles[i], this.element);

					padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();

					padPos = [ "padding",
						/ne|nw|n/.test(i) ? "Top" :
						/se|sw|s/.test(i) ? "Bottom" :
						/^e$/.test(i) ? "Right" : "Left" ].join("");

					target.css(padPos, padWrapper);

					this._proportionallyResize();

				}

				// TODO: What's that good for? There's not anything to be executed left
				if (!$(this.handles[i]).length) {
					continue;
				}
			}
		};

		// TODO: make renderAxis a prototype function
		this._renderAxis(this.element);

		this._handles = $(".ui-resizable-handle", this.element)
			.disableSelection();

		this._handles.mouseover(function() {
			if (!that.resizing) {
				if (this.className) {
					axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
				}
				that.axis = axis && axis[1] ? axis[1] : "se";
			}
		});

		if (o.autoHide) {
			this._handles.hide();
			$(this.element)
				.addClass("ui-resizable-autohide")
				.mouseenter(function() {
					if (o.disabled) {
						return;
					}
					$(this).removeClass("ui-resizable-autohide");
					that._handles.show();
				})
				.mouseleave(function() {
					if (o.disabled) {
						return;
					}
					if (!that.resizing) {
						$(this).addClass("ui-resizable-autohide");
						that._handles.hide();
					}
				});
		}

		this._mouseInit();

	},

	_destroy: function() {

		this._mouseDestroy();

		var wrapper,
			_destroy = function(exp) {
				$(exp)
					.removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing")
					.removeData("resizable")
					.removeData("ui-resizable")
					.unbind(".resizable")
					.find(".ui-resizable-handle")
						.remove();
			};

		// TODO: Unwrap at same DOM position
		if (this.elementIsWrapper) {
			_destroy(this.element);
			wrapper = this.element;
			this.originalElement.css({
				position: wrapper.css("position"),
				width: wrapper.outerWidth(),
				height: wrapper.outerHeight(),
				top: wrapper.css("top"),
				left: wrapper.css("left")
			}).insertAfter( wrapper );
			wrapper.remove();
		}

		this.originalElement.css("resize", this.originalResizeStyle);
		_destroy(this.originalElement);

		return this;
	},

	_mouseCapture: function(event) {
		var i, handle,
			capture = false;

		for (i in this.handles) {
			handle = $(this.handles[i])[0];
			if (handle === event.target || $.contains(handle, event.target)) {
				capture = true;
			}
		}

		return !this.options.disabled && capture;
	},

	_mouseStart: function(event) {

		var curleft, curtop, cursor,
			o = this.options,
			el = this.element;

		this.resizing = true;

		this._renderProxy();

		curleft = this._num(this.helper.css("left"));
		curtop = this._num(this.helper.css("top"));

		if (o.containment) {
			curleft += $(o.containment).scrollLeft() || 0;
			curtop += $(o.containment).scrollTop() || 0;
		}

		this.offset = this.helper.offset();
		this.position = { left: curleft, top: curtop };

		this.size = this._helper ? {
				width: this.helper.width(),
				height: this.helper.height()
			} : {
				width: el.width(),
				height: el.height()
			};

		this.originalSize = this._helper ? {
				width: el.outerWidth(),
				height: el.outerHeight()
			} : {
				width: el.width(),
				height: el.height()
			};

		this.sizeDiff = {
			width: el.outerWidth() - el.width(),
			height: el.outerHeight() - el.height()
		};

		this.originalPosition = { left: curleft, top: curtop };
		this.originalMousePosition = { left: event.pageX, top: event.pageY };

		this.aspectRatio = (typeof o.aspectRatio === "number") ?
			o.aspectRatio :
			((this.originalSize.width / this.originalSize.height) || 1);

		cursor = $(".ui-resizable-" + this.axis).css("cursor");
		$("body").css("cursor", cursor === "auto" ? this.axis + "-resize" : cursor);

		el.addClass("ui-resizable-resizing");
		this._propagate("start", event);
		return true;
	},

	_mouseDrag: function(event) {

		var data, props,
			smp = this.originalMousePosition,
			a = this.axis,
			dx = (event.pageX - smp.left) || 0,
			dy = (event.pageY - smp.top) || 0,
			trigger = this._change[a];

		this._updatePrevProperties();

		if (!trigger) {
			return false;
		}

		data = trigger.apply(this, [ event, dx, dy ]);

		this._updateVirtualBoundaries(event.shiftKey);
		if (this._aspectRatio || event.shiftKey) {
			data = this._updateRatio(data, event);
		}

		data = this._respectSize(data, event);

		this._updateCache(data);

		this._propagate("resize", event);

		props = this._applyChanges();

		if ( !this._helper && this._proportionallyResizeElements.length ) {
			this._proportionallyResize();
		}

		if ( !$.isEmptyObject( props ) ) {
			this._updatePrevProperties();
			this._trigger( "resize", event, this.ui() );
			this._applyChanges();
		}

		return false;
	},

	_mouseStop: function(event) {

		this.resizing = false;
		var pr, ista, soffseth, soffsetw, s, left, top,
			o = this.options, that = this;

		if (this._helper) {

			pr = this._proportionallyResizeElements;
			ista = pr.length && (/textarea/i).test(pr[0].nodeName);
			soffseth = ista && this._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height;
			soffsetw = ista ? 0 : that.sizeDiff.width;

			s = {
				width: (that.helper.width()  - soffsetw),
				height: (that.helper.height() - soffseth)
			};
			left = (parseInt(that.element.css("left"), 10) +
				(that.position.left - that.originalPosition.left)) || null;
			top = (parseInt(that.element.css("top"), 10) +
				(that.position.top - that.originalPosition.top)) || null;

			if (!o.animate) {
				this.element.css($.extend(s, { top: top, left: left }));
			}

			that.helper.height(that.size.height);
			that.helper.width(that.size.width);

			if (this._helper && !o.animate) {
				this._proportionallyResize();
			}
		}

		$("body").css("cursor", "auto");

		this.element.removeClass("ui-resizable-resizing");

		this._propagate("stop", event);

		if (this._helper) {
			this.helper.remove();
		}

		return false;

	},

	_updatePrevProperties: function() {
		this.prevPosition = {
			top: this.position.top,
			left: this.position.left
		};
		this.prevSize = {
			width: this.size.width,
			height: this.size.height
		};
	},

	_applyChanges: function() {
		var props = {};

		if ( this.position.top !== this.prevPosition.top ) {
			props.top = this.position.top + "px";
		}
		if ( this.position.left !== this.prevPosition.left ) {
			props.left = this.position.left + "px";
		}
		if ( this.size.width !== this.prevSize.width ) {
			props.width = this.size.width + "px";
		}
		if ( this.size.height !== this.prevSize.height ) {
			props.height = this.size.height + "px";
		}

		this.helper.css( props );

		return props;
	},

	_updateVirtualBoundaries: function(forceAspectRatio) {
		var pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,
			o = this.options;

		b = {
			minWidth: this._isNumber(o.minWidth) ? o.minWidth : 0,
			maxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : Infinity,
			minHeight: this._isNumber(o.minHeight) ? o.minHeight : 0,
			maxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : Infinity
		};

		if (this._aspectRatio || forceAspectRatio) {
			pMinWidth = b.minHeight * this.aspectRatio;
			pMinHeight = b.minWidth / this.aspectRatio;
			pMaxWidth = b.maxHeight * this.aspectRatio;
			pMaxHeight = b.maxWidth / this.aspectRatio;

			if (pMinWidth > b.minWidth) {
				b.minWidth = pMinWidth;
			}
			if (pMinHeight > b.minHeight) {
				b.minHeight = pMinHeight;
			}
			if (pMaxWidth < b.maxWidth) {
				b.maxWidth = pMaxWidth;
			}
			if (pMaxHeight < b.maxHeight) {
				b.maxHeight = pMaxHeight;
			}
		}
		this._vBoundaries = b;
	},

	_updateCache: function(data) {
		this.offset = this.helper.offset();
		if (this._isNumber(data.left)) {
			this.position.left = data.left;
		}
		if (this._isNumber(data.top)) {
			this.position.top = data.top;
		}
		if (this._isNumber(data.height)) {
			this.size.height = data.height;
		}
		if (this._isNumber(data.width)) {
			this.size.width = data.width;
		}
	},

	_updateRatio: function( data ) {

		var cpos = this.position,
			csize = this.size,
			a = this.axis;

		if (this._isNumber(data.height)) {
			data.width = (data.height * this.aspectRatio);
		} else if (this._isNumber(data.width)) {
			data.height = (data.width / this.aspectRatio);
		}

		if (a === "sw") {
			data.left = cpos.left + (csize.width - data.width);
			data.top = null;
		}
		if (a === "nw") {
			data.top = cpos.top + (csize.height - data.height);
			data.left = cpos.left + (csize.width - data.width);
		}

		return data;
	},

	_respectSize: function( data ) {

		var o = this._vBoundaries,
			a = this.axis,
			ismaxw = this._isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width),
			ismaxh = this._isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height),
			isminw = this._isNumber(data.width) && o.minWidth && (o.minWidth > data.width),
			isminh = this._isNumber(data.height) && o.minHeight && (o.minHeight > data.height),
			dw = this.originalPosition.left + this.originalSize.width,
			dh = this.position.top + this.size.height,
			cw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);
		if (isminw) {
			data.width = o.minWidth;
		}
		if (isminh) {
			data.height = o.minHeight;
		}
		if (ismaxw) {
			data.width = o.maxWidth;
		}
		if (ismaxh) {
			data.height = o.maxHeight;
		}

		if (isminw && cw) {
			data.left = dw - o.minWidth;
		}
		if (ismaxw && cw) {
			data.left = dw - o.maxWidth;
		}
		if (isminh && ch) {
			data.top = dh - o.minHeight;
		}
		if (ismaxh && ch) {
			data.top = dh - o.maxHeight;
		}

		// Fixing jump error on top/left - bug #2330
		if (!data.width && !data.height && !data.left && data.top) {
			data.top = null;
		} else if (!data.width && !data.height && !data.top && data.left) {
			data.left = null;
		}

		return data;
	},

	_getPaddingPlusBorderDimensions: function( element ) {
		var i = 0,
			widths = [],
			borders = [
				element.css( "borderTopWidth" ),
				element.css( "borderRightWidth" ),
				element.css( "borderBottomWidth" ),
				element.css( "borderLeftWidth" )
			],
			paddings = [
				element.css( "paddingTop" ),
				element.css( "paddingRight" ),
				element.css( "paddingBottom" ),
				element.css( "paddingLeft" )
			];

		for ( ; i < 4; i++ ) {
			widths[ i ] = ( parseInt( borders[ i ], 10 ) || 0 );
			widths[ i ] += ( parseInt( paddings[ i ], 10 ) || 0 );
		}

		return {
			height: widths[ 0 ] + widths[ 2 ],
			width: widths[ 1 ] + widths[ 3 ]
		};
	},

	_proportionallyResize: function() {

		if (!this._proportionallyResizeElements.length) {
			return;
		}

		var prel,
			i = 0,
			element = this.helper || this.element;

		for ( ; i < this._proportionallyResizeElements.length; i++) {

			prel = this._proportionallyResizeElements[i];

			// TODO: Seems like a bug to cache this.outerDimensions
			// considering that we are in a loop.
			if (!this.outerDimensions) {
				this.outerDimensions = this._getPaddingPlusBorderDimensions( prel );
			}

			prel.css({
				height: (element.height() - this.outerDimensions.height) || 0,
				width: (element.width() - this.outerDimensions.width) || 0
			});

		}

	},

	_renderProxy: function() {

		var el = this.element, o = this.options;
		this.elementOffset = el.offset();

		if (this._helper) {

			this.helper = this.helper || $("<div style='overflow:hidden;'></div>");

			this.helper.addClass(this._helper).css({
				width: this.element.outerWidth() - 1,
				height: this.element.outerHeight() - 1,
				position: "absolute",
				left: this.elementOffset.left + "px",
				top: this.elementOffset.top + "px",
				zIndex: ++o.zIndex //TODO: Don't modify option
			});

			this.helper
				.appendTo("body")
				.disableSelection();

		} else {
			this.helper = this.element;
		}

	},

	_change: {
		e: function(event, dx) {
			return { width: this.originalSize.width + dx };
		},
		w: function(event, dx) {
			var cs = this.originalSize, sp = this.originalPosition;
			return { left: sp.left + dx, width: cs.width - dx };
		},
		n: function(event, dx, dy) {
			var cs = this.originalSize, sp = this.originalPosition;
			return { top: sp.top + dy, height: cs.height - dy };
		},
		s: function(event, dx, dy) {
			return { height: this.originalSize.height + dy };
		},
		se: function(event, dx, dy) {
			return $.extend(this._change.s.apply(this, arguments),
				this._change.e.apply(this, [ event, dx, dy ]));
		},
		sw: function(event, dx, dy) {
			return $.extend(this._change.s.apply(this, arguments),
				this._change.w.apply(this, [ event, dx, dy ]));
		},
		ne: function(event, dx, dy) {
			return $.extend(this._change.n.apply(this, arguments),
				this._change.e.apply(this, [ event, dx, dy ]));
		},
		nw: function(event, dx, dy) {
			return $.extend(this._change.n.apply(this, arguments),
				this._change.w.apply(this, [ event, dx, dy ]));
		}
	},

	_propagate: function(n, event) {
		$.ui.plugin.call(this, n, [ event, this.ui() ]);
		(n !== "resize" && this._trigger(n, event, this.ui()));
	},

	plugins: {},

	ui: function() {
		return {
			originalElement: this.originalElement,
			element: this.element,
			helper: this.helper,
			position: this.position,
			size: this.size,
			originalSize: this.originalSize,
			originalPosition: this.originalPosition
		};
	}

});

/*
 * Resizable Extensions
 */

$.ui.plugin.add("resizable", "animate", {

	stop: function( event ) {
		var that = $(this).resizable( "instance" ),
			o = that.options,
			pr = that._proportionallyResizeElements,
			ista = pr.length && (/textarea/i).test(pr[0].nodeName),
			soffseth = ista && that._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height,
			soffsetw = ista ? 0 : that.sizeDiff.width,
			style = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },
			left = (parseInt(that.element.css("left"), 10) +
				(that.position.left - that.originalPosition.left)) || null,
			top = (parseInt(that.element.css("top"), 10) +
				(that.position.top - that.originalPosition.top)) || null;

		that.element.animate(
			$.extend(style, top && left ? { top: top, left: left } : {}), {
				duration: o.animateDuration,
				easing: o.animateEasing,
				step: function() {

					var data = {
						width: parseInt(that.element.css("width"), 10),
						height: parseInt(that.element.css("height"), 10),
						top: parseInt(that.element.css("top"), 10),
						left: parseInt(that.element.css("left"), 10)
					};

					if (pr && pr.length) {
						$(pr[0]).css({ width: data.width, height: data.height });
					}

					// propagating resize, and updating values for each animation step
					that._updateCache(data);
					that._propagate("resize", event);

				}
			}
		);
	}

});

$.ui.plugin.add( "resizable", "containment", {

	start: function() {
		var element, p, co, ch, cw, width, height,
			that = $( this ).resizable( "instance" ),
			o = that.options,
			el = that.element,
			oc = o.containment,
			ce = ( oc instanceof $ ) ? oc.get( 0 ) : ( /parent/.test( oc ) ) ? el.parent().get( 0 ) : oc;

		if ( !ce ) {
			return;
		}

		that.containerElement = $( ce );

		if ( /document/.test( oc ) || oc === document ) {
			that.containerOffset = {
				left: 0,
				top: 0
			};
			that.containerPosition = {
				left: 0,
				top: 0
			};

			that.parentData = {
				element: $( document ),
				left: 0,
				top: 0,
				width: $( document ).width(),
				height: $( document ).height() || document.body.parentNode.scrollHeight
			};
		} else {
			element = $( ce );
			p = [];
			$([ "Top", "Right", "Left", "Bottom" ]).each(function( i, name ) {
				p[ i ] = that._num( element.css( "padding" + name ) );
			});

			that.containerOffset = element.offset();
			that.containerPosition = element.position();
			that.containerSize = {
				height: ( element.innerHeight() - p[ 3 ] ),
				width: ( element.innerWidth() - p[ 1 ] )
			};

			co = that.containerOffset;
			ch = that.containerSize.height;
			cw = that.containerSize.width;
			width = ( that._hasScroll ( ce, "left" ) ? ce.scrollWidth : cw );
			height = ( that._hasScroll ( ce ) ? ce.scrollHeight : ch ) ;

			that.parentData = {
				element: ce,
				left: co.left,
				top: co.top,
				width: width,
				height: height
			};
		}
	},

	resize: function( event ) {
		var woset, hoset, isParent, isOffsetRelative,
			that = $( this ).resizable( "instance" ),
			o = that.options,
			co = that.containerOffset,
			cp = that.position,
			pRatio = that._aspectRatio || event.shiftKey,
			cop = {
				top: 0,
				left: 0
			},
			ce = that.containerElement,
			continueResize = true;

		if ( ce[ 0 ] !== document && ( /static/ ).test( ce.css( "position" ) ) ) {
			cop = co;
		}

		if ( cp.left < ( that._helper ? co.left : 0 ) ) {
			that.size.width = that.size.width +
				( that._helper ?
					( that.position.left - co.left ) :
					( that.position.left - cop.left ) );

			if ( pRatio ) {
				that.size.height = that.size.width / that.aspectRatio;
				continueResize = false;
			}
			that.position.left = o.helper ? co.left : 0;
		}

		if ( cp.top < ( that._helper ? co.top : 0 ) ) {
			that.size.height = that.size.height +
				( that._helper ?
					( that.position.top - co.top ) :
					that.position.top );

			if ( pRatio ) {
				that.size.width = that.size.height * that.aspectRatio;
				continueResize = false;
			}
			that.position.top = that._helper ? co.top : 0;
		}

		isParent = that.containerElement.get( 0 ) === that.element.parent().get( 0 );
		isOffsetRelative = /relative|absolute/.test( that.containerElement.css( "position" ) );

		if ( isParent && isOffsetRelative ) {
			that.offset.left = that.parentData.left + that.position.left;
			that.offset.top = that.parentData.top + that.position.top;
		} else {
			that.offset.left = that.element.offset().left;
			that.offset.top = that.element.offset().top;
		}

		woset = Math.abs( that.sizeDiff.width +
			(that._helper ?
				that.offset.left - cop.left :
				(that.offset.left - co.left)) );

		hoset = Math.abs( that.sizeDiff.height +
			(that._helper ?
				that.offset.top - cop.top :
				(that.offset.top - co.top)) );

		if ( woset + that.size.width >= that.parentData.width ) {
			that.size.width = that.parentData.width - woset;
			if ( pRatio ) {
				that.size.height = that.size.width / that.aspectRatio;
				continueResize = false;
			}
		}

		if ( hoset + that.size.height >= that.parentData.height ) {
			that.size.height = that.parentData.height - hoset;
			if ( pRatio ) {
				that.size.width = that.size.height * that.aspectRatio;
				continueResize = false;
			}
		}

		if ( !continueResize ) {
			that.position.left = that.prevPosition.left;
			that.position.top = that.prevPosition.top;
			that.size.width = that.prevSize.width;
			that.size.height = that.prevSize.height;
		}
	},

	stop: function() {
		var that = $( this ).resizable( "instance" ),
			o = that.options,
			co = that.containerOffset,
			cop = that.containerPosition,
			ce = that.containerElement,
			helper = $( that.helper ),
			ho = helper.offset(),
			w = helper.outerWidth() - that.sizeDiff.width,
			h = helper.outerHeight() - that.sizeDiff.height;

		if ( that._helper && !o.animate && ( /relative/ ).test( ce.css( "position" ) ) ) {
			$( this ).css({
				left: ho.left - cop.left - co.left,
				width: w,
				height: h
			});
		}

		if ( that._helper && !o.animate && ( /static/ ).test( ce.css( "position" ) ) ) {
			$( this ).css({
				left: ho.left - cop.left - co.left,
				width: w,
				height: h
			});
		}
	}
});

$.ui.plugin.add("resizable", "alsoResize", {

	start: function() {
		var that = $(this).resizable( "instance" ),
			o = that.options,
			_store = function(exp) {
				$(exp).each(function() {
					var el = $(this);
					el.data("ui-resizable-alsoresize", {
						width: parseInt(el.width(), 10), height: parseInt(el.height(), 10),
						left: parseInt(el.css("left"), 10), top: parseInt(el.css("top"), 10)
					});
				});
			};

		if (typeof(o.alsoResize) === "object" && !o.alsoResize.parentNode) {
			if (o.alsoResize.length) {
				o.alsoResize = o.alsoResize[0];
				_store(o.alsoResize);
			} else {
				$.each(o.alsoResize, function(exp) {
					_store(exp);
				});
			}
		} else {
			_store(o.alsoResize);
		}
	},

	resize: function(event, ui) {
		var that = $(this).resizable( "instance" ),
			o = that.options,
			os = that.originalSize,
			op = that.originalPosition,
			delta = {
				height: (that.size.height - os.height) || 0,
				width: (that.size.width - os.width) || 0,
				top: (that.position.top - op.top) || 0,
				left: (that.position.left - op.left) || 0
			},

			_alsoResize = function(exp, c) {
				$(exp).each(function() {
					var el = $(this), start = $(this).data("ui-resizable-alsoresize"), style = {},
						css = c && c.length ?
							c :
							el.parents(ui.originalElement[0]).length ?
								[ "width", "height" ] :
								[ "width", "height", "top", "left" ];

					$.each(css, function(i, prop) {
						var sum = (start[prop] || 0) + (delta[prop] || 0);
						if (sum && sum >= 0) {
							style[prop] = sum || null;
						}
					});

					el.css(style);
				});
			};

		if (typeof(o.alsoResize) === "object" && !o.alsoResize.nodeType) {
			$.each(o.alsoResize, function(exp, c) {
				_alsoResize(exp, c);
			});
		} else {
			_alsoResize(o.alsoResize);
		}
	},

	stop: function() {
		$(this).removeData("resizable-alsoresize");
	}
});

$.ui.plugin.add("resizable", "ghost", {

	start: function() {

		var that = $(this).resizable( "instance" ), o = that.options, cs = that.size;

		that.ghost = that.originalElement.clone();
		that.ghost
			.css({
				opacity: 0.25,
				display: "block",
				position: "relative",
				height: cs.height,
				width: cs.width,
				margin: 0,
				left: 0,
				top: 0
			})
			.addClass("ui-resizable-ghost")
			.addClass(typeof o.ghost === "string" ? o.ghost : "");

		that.ghost.appendTo(that.helper);

	},

	resize: function() {
		var that = $(this).resizable( "instance" );
		if (that.ghost) {
			that.ghost.css({
				position: "relative",
				height: that.size.height,
				width: that.size.width
			});
		}
	},

	stop: function() {
		var that = $(this).resizable( "instance" );
		if (that.ghost && that.helper) {
			that.helper.get(0).removeChild(that.ghost.get(0));
		}
	}

});

$.ui.plugin.add("resizable", "grid", {

	resize: function() {
		var outerDimensions,
			that = $(this).resizable( "instance" ),
			o = that.options,
			cs = that.size,
			os = that.originalSize,
			op = that.originalPosition,
			a = that.axis,
			grid = typeof o.grid === "number" ? [ o.grid, o.grid ] : o.grid,
			gridX = (grid[0] || 1),
			gridY = (grid[1] || 1),
			ox = Math.round((cs.width - os.width) / gridX) * gridX,
			oy = Math.round((cs.height - os.height) / gridY) * gridY,
			newWidth = os.width + ox,
			newHeight = os.height + oy,
			isMaxWidth = o.maxWidth && (o.maxWidth < newWidth),
			isMaxHeight = o.maxHeight && (o.maxHeight < newHeight),
			isMinWidth = o.minWidth && (o.minWidth > newWidth),
			isMinHeight = o.minHeight && (o.minHeight > newHeight);

		o.grid = grid;

		if (isMinWidth) {
			newWidth += gridX;
		}
		if (isMinHeight) {
			newHeight += gridY;
		}
		if (isMaxWidth) {
			newWidth -= gridX;
		}
		if (isMaxHeight) {
			newHeight -= gridY;
		}

		if (/^(se|s|e)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
		} else if (/^(ne)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.top = op.top - oy;
		} else if (/^(sw)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.left = op.left - ox;
		} else {
			if ( newHeight - gridY <= 0 || newWidth - gridX <= 0) {
				outerDimensions = that._getPaddingPlusBorderDimensions( this );
			}

			if ( newHeight - gridY > 0 ) {
				that.size.height = newHeight;
				that.position.top = op.top - oy;
			} else {
				newHeight = gridY - outerDimensions.height;
				that.size.height = newHeight;
				that.position.top = op.top + os.height - newHeight;
			}
			if ( newWidth - gridX > 0 ) {
				that.size.width = newWidth;
				that.position.left = op.left - ox;
			} else {
				newWidth = gridX - outerDimensions.width;
				that.size.width = newWidth;
				that.position.left = op.left + os.width - newWidth;
			}
		}
	}

});

var resizable = $.ui.resizable;


/*!
 * jQuery UI Dialog 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */


var dialog = $.widget( "ui.dialog", {
	version: "1.11.3",
	options: {
		appendTo: "body",
		autoOpen: true,
		buttons: [],
		closeOnEscape: true,
		closeText: "Close",
		dialogClass: "",
		draggable: true,
		hide: null,
		height: "auto",
		maxHeight: null,
		maxWidth: null,
		minHeight: 150,
		minWidth: 150,
		modal: false,
		position: {
			my: "center",
			at: "center",
			of: window,
			collision: "fit",
			// Ensure the titlebar is always visible
			using: function( pos ) {
				var topOffset = $( this ).css( pos ).offset().top;
				if ( topOffset < 0 ) {
					$( this ).css( "top", pos.top - topOffset );
				}
			}
		},
		resizable: true,
		show: null,
		title: null,
		width: 300,

		// callbacks
		beforeClose: null,
		close: null,
		drag: null,
		dragStart: null,
		dragStop: null,
		focus: null,
		open: null,
		resize: null,
		resizeStart: null,
		resizeStop: null
	},

	sizeRelatedOptions: {
		buttons: true,
		height: true,
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true,
		width: true
	},

	resizableRelatedOptions: {
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true
	},

	_create: function() {
		this.originalCss = {
			display: this.element[ 0 ].style.display,
			width: this.element[ 0 ].style.width,
			minHeight: this.element[ 0 ].style.minHeight,
			maxHeight: this.element[ 0 ].style.maxHeight,
			height: this.element[ 0 ].style.height
		};
		this.originalPosition = {
			parent: this.element.parent(),
			index: this.element.parent().children().index( this.element )
		};
		this.originalTitle = this.element.attr( "title" );
		this.options.title = this.options.title || this.originalTitle;

		this._createWrapper();

		this.element
			.show()
			.removeAttr( "title" )
			.addClass( "ui-dialog-content ui-widget-content" )
			.appendTo( this.uiDialog );

		this._createTitlebar();
		this._createButtonPane();

		if ( this.options.draggable && $.fn.draggable ) {
			this._makeDraggable();
		}
		if ( this.options.resizable && $.fn.resizable ) {
			this._makeResizable();
		}

		this._isOpen = false;

		this._trackFocus();
	},

	_init: function() {
		if ( this.options.autoOpen ) {
			this.open();
		}
	},

	_appendTo: function() {
		var element = this.options.appendTo;
		if ( element && (element.jquery || element.nodeType) ) {
			return $( element );
		}
		return this.document.find( element || "body" ).eq( 0 );
	},

	_destroy: function() {
		var next,
			originalPosition = this.originalPosition;

		this._destroyOverlay();

		this.element
			.removeUniqueId()
			.removeClass( "ui-dialog-content ui-widget-content" )
			.css( this.originalCss )
			// Without detaching first, the following becomes really slow
			.detach();

		this.uiDialog.stop( true, true ).remove();

		if ( this.originalTitle ) {
			this.element.attr( "title", this.originalTitle );
		}

		next = originalPosition.parent.children().eq( originalPosition.index );
		// Don't try to place the dialog next to itself (#8613)
		if ( next.length && next[ 0 ] !== this.element[ 0 ] ) {
			next.before( this.element );
		} else {
			originalPosition.parent.append( this.element );
		}
	},

	widget: function() {
		return this.uiDialog;
	},

	disable: $.noop,
	enable: $.noop,

	close: function( event ) {
		var activeElement,
			that = this;

		if ( !this._isOpen || this._trigger( "beforeClose", event ) === false ) {
			return;
		}

		this._isOpen = false;
		this._focusedElement = null;
		this._destroyOverlay();
		this._untrackInstance();

		if ( !this.opener.filter( ":focusable" ).focus().length ) {

			// support: IE9
			// IE9 throws an "Unspecified error" accessing document.activeElement from an <iframe>
			try {
				activeElement = this.document[ 0 ].activeElement;

				// Support: IE9, IE10
				// If the <body> is blurred, IE will switch windows, see #4520
				if ( activeElement && activeElement.nodeName.toLowerCase() !== "body" ) {

					// Hiding a focused element doesn't trigger blur in WebKit
					// so in case we have nothing to focus on, explicitly blur the active element
					// https://bugs.webkit.org/show_bug.cgi?id=47182
					$( activeElement ).blur();
				}
			} catch ( error ) {}
		}

		this._hide( this.uiDialog, this.options.hide, function() {
			that._trigger( "close", event );
		});
	},

	isOpen: function() {
		return this._isOpen;
	},

	moveToTop: function() {
		this._moveToTop();
	},

	_moveToTop: function( event, silent ) {
		var moved = false,
			zIndicies = this.uiDialog.siblings( ".ui-front:visible" ).map(function() {
				return +$( this ).css( "z-index" );
			}).get(),
			zIndexMax = Math.max.apply( null, zIndicies );

		if ( zIndexMax >= +this.uiDialog.css( "z-index" ) ) {
			this.uiDialog.css( "z-index", zIndexMax + 1 );
			moved = true;
		}

		if ( moved && !silent ) {
			this._trigger( "focus", event );
		}
		return moved;
	},

	open: function() {
		var that = this;
		if ( this._isOpen ) {
			if ( this._moveToTop() ) {
				this._focusTabbable();
			}
			return;
		}

		this._isOpen = true;
		this.opener = $( this.document[ 0 ].activeElement );

		this._size();
		this._position();
		this._createOverlay();
		this._moveToTop( null, true );

		// Ensure the overlay is moved to the top with the dialog, but only when
		// opening. The overlay shouldn't move after the dialog is open so that
		// modeless dialogs opened after the modal dialog stack properly.
		if ( this.overlay ) {
			this.overlay.css( "z-index", this.uiDialog.css( "z-index" ) - 1 );
		}

		this._show( this.uiDialog, this.options.show, function() {
			that._focusTabbable();
			that._trigger( "focus" );
		});

		// Track the dialog immediately upon openening in case a focus event
		// somehow occurs outside of the dialog before an element inside the
		// dialog is focused (#10152)
		this._makeFocusTarget();

		this._trigger( "open" );
	},

	_focusTabbable: function() {
		// Set focus to the first match:
		// 1. An element that was focused previously
		// 2. First element inside the dialog matching [autofocus]
		// 3. Tabbable element inside the content element
		// 4. Tabbable element inside the buttonpane
		// 5. The close button
		// 6. The dialog itself
		var hasFocus = this._focusedElement;
		if ( !hasFocus ) {
			hasFocus = this.element.find( "[autofocus]" );
		}
		if ( !hasFocus.length ) {
			hasFocus = this.element.find( ":tabbable" );
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialogButtonPane.find( ":tabbable" );
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialogTitlebarClose.filter( ":tabbable" );
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialog;
		}
		hasFocus.eq( 0 ).focus();
	},

	_keepFocus: function( event ) {
		function checkFocus() {
			var activeElement = this.document[0].activeElement,
				isActive = this.uiDialog[0] === activeElement ||
					$.contains( this.uiDialog[0], activeElement );
			if ( !isActive ) {
				this._focusTabbable();
			}
		}
		event.preventDefault();
		checkFocus.call( this );
		// support: IE
		// IE <= 8 doesn't prevent moving focus even with event.preventDefault()
		// so we check again later
		this._delay( checkFocus );
	},

	_createWrapper: function() {
		this.uiDialog = $("<div>")
			.addClass( "ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " +
				this.options.dialogClass )
			.hide()
			.attr({
				// Setting tabIndex makes the div focusable
				tabIndex: -1,
				role: "dialog"
			})
			.appendTo( this._appendTo() );

		this._on( this.uiDialog, {
			keydown: function( event ) {
				if ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&
						event.keyCode === $.ui.keyCode.ESCAPE ) {
					event.preventDefault();
					this.close( event );
					return;
				}

				// prevent tabbing out of dialogs
				if ( event.keyCode !== $.ui.keyCode.TAB || event.isDefaultPrevented() ) {
					return;
				}
				var tabbables = this.uiDialog.find( ":tabbable" ),
					first = tabbables.filter( ":first" ),
					last = tabbables.filter( ":last" );

				if ( ( event.target === last[0] || event.target === this.uiDialog[0] ) && !event.shiftKey ) {
					this._delay(function() {
						first.focus();
					});
					event.preventDefault();
				} else if ( ( event.target === first[0] || event.target === this.uiDialog[0] ) && event.shiftKey ) {
					this._delay(function() {
						last.focus();
					});
					event.preventDefault();
				}
			},
			mousedown: function( event ) {
				if ( this._moveToTop( event ) ) {
					this._focusTabbable();
				}
			}
		});

		// We assume that any existing aria-describedby attribute means
		// that the dialog content is marked up properly
		// otherwise we brute force the content as the description
		if ( !this.element.find( "[aria-describedby]" ).length ) {
			this.uiDialog.attr({
				"aria-describedby": this.element.uniqueId().attr( "id" )
			});
		}
	},

	_createTitlebar: function() {
		var uiDialogTitle;

		this.uiDialogTitlebar = $( "<div>" )
			.addClass( "ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix" )
			.prependTo( this.uiDialog );
		this._on( this.uiDialogTitlebar, {
			mousedown: function( event ) {
				// Don't prevent click on close button (#8838)
				// Focusing a dialog that is partially scrolled out of view
				// causes the browser to scroll it into view, preventing the click event
				if ( !$( event.target ).closest( ".ui-dialog-titlebar-close" ) ) {
					// Dialog isn't getting focus when dragging (#8063)
					this.uiDialog.focus();
				}
			}
		});

		// support: IE
		// Use type="button" to prevent enter keypresses in textboxes from closing the
		// dialog in IE (#9312)
		this.uiDialogTitlebarClose = $( "<button type='button'></button>" )
			.button({
				label: this.options.closeText,
				icons: {
					primary: "ui-icon-closethick"
				},
				text: false
			})
			.addClass( "ui-dialog-titlebar-close" )
			.appendTo( this.uiDialogTitlebar );
		this._on( this.uiDialogTitlebarClose, {
			click: function( event ) {
				event.preventDefault();
				this.close( event );
			}
		});

		uiDialogTitle = $( "<span>" )
			.uniqueId()
			.addClass( "ui-dialog-title" )
			.prependTo( this.uiDialogTitlebar );
		this._title( uiDialogTitle );

		this.uiDialog.attr({
			"aria-labelledby": uiDialogTitle.attr( "id" )
		});
	},

	_title: function( title ) {
		if ( !this.options.title ) {
			title.html( "&#160;" );
		}
		title.text( this.options.title );
	},

	_createButtonPane: function() {
		this.uiDialogButtonPane = $( "<div>" )
			.addClass( "ui-dialog-buttonpane ui-widget-content ui-helper-clearfix" );

		this.uiButtonSet = $( "<div>" )
			.addClass( "ui-dialog-buttonset" )
			.appendTo( this.uiDialogButtonPane );

		this._createButtons();
	},

	_createButtons: function() {
		var that = this,
			buttons = this.options.buttons;

		// if we already have a button pane, remove it
		this.uiDialogButtonPane.remove();
		this.uiButtonSet.empty();

		if ( $.isEmptyObject( buttons ) || ($.isArray( buttons ) && !buttons.length) ) {
			this.uiDialog.removeClass( "ui-dialog-buttons" );
			return;
		}

		$.each( buttons, function( name, props ) {
			var click, buttonOptions;
			props = $.isFunction( props ) ?
				{ click: props, text: name } :
				props;
			// Default to a non-submitting button
			props = $.extend( { type: "button" }, props );
			// Change the context for the click callback to be the main element
			click = props.click;
			props.click = function() {
				click.apply( that.element[ 0 ], arguments );
			};
			buttonOptions = {
				icons: props.icons,
				text: props.showText
			};
			delete props.icons;
			delete props.showText;
			$( "<button></button>", props )
				.button( buttonOptions )
				.appendTo( that.uiButtonSet );
		});
		this.uiDialog.addClass( "ui-dialog-buttons" );
		this.uiDialogButtonPane.appendTo( this.uiDialog );
	},

	_makeDraggable: function() {
		var that = this,
			options = this.options;

		function filteredUi( ui ) {
			return {
				position: ui.position,
				offset: ui.offset
			};
		}

		this.uiDialog.draggable({
			cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
			handle: ".ui-dialog-titlebar",
			containment: "document",
			start: function( event, ui ) {
				$( this ).addClass( "ui-dialog-dragging" );
				that._blockFrames();
				that._trigger( "dragStart", event, filteredUi( ui ) );
			},
			drag: function( event, ui ) {
				that._trigger( "drag", event, filteredUi( ui ) );
			},
			stop: function( event, ui ) {
				var left = ui.offset.left - that.document.scrollLeft(),
					top = ui.offset.top - that.document.scrollTop();

				options.position = {
					my: "left top",
					at: "left" + (left >= 0 ? "+" : "") + left + " " +
						"top" + (top >= 0 ? "+" : "") + top,
					of: that.window
				};
				$( this ).removeClass( "ui-dialog-dragging" );
				that._unblockFrames();
				that._trigger( "dragStop", event, filteredUi( ui ) );
			}
		});
	},

	_makeResizable: function() {
		var that = this,
			options = this.options,
			handles = options.resizable,
			// .ui-resizable has position: relative defined in the stylesheet
			// but dialogs have to use absolute or fixed positioning
			position = this.uiDialog.css("position"),
			resizeHandles = typeof handles === "string" ?
				handles	:
				"n,e,s,w,se,sw,ne,nw";

		function filteredUi( ui ) {
			return {
				originalPosition: ui.originalPosition,
				originalSize: ui.originalSize,
				position: ui.position,
				size: ui.size
			};
		}

		this.uiDialog.resizable({
			cancel: ".ui-dialog-content",
			containment: "document",
			alsoResize: this.element,
			maxWidth: options.maxWidth,
			maxHeight: options.maxHeight,
			minWidth: options.minWidth,
			minHeight: this._minHeight(),
			handles: resizeHandles,
			start: function( event, ui ) {
				$( this ).addClass( "ui-dialog-resizing" );
				that._blockFrames();
				that._trigger( "resizeStart", event, filteredUi( ui ) );
			},
			resize: function( event, ui ) {
				that._trigger( "resize", event, filteredUi( ui ) );
			},
			stop: function( event, ui ) {
				var offset = that.uiDialog.offset(),
					left = offset.left - that.document.scrollLeft(),
					top = offset.top - that.document.scrollTop();

				options.height = that.uiDialog.height();
				options.width = that.uiDialog.width();
				options.position = {
					my: "left top",
					at: "left" + (left >= 0 ? "+" : "") + left + " " +
						"top" + (top >= 0 ? "+" : "") + top,
					of: that.window
				};
				$( this ).removeClass( "ui-dialog-resizing" );
				that._unblockFrames();
				that._trigger( "resizeStop", event, filteredUi( ui ) );
			}
		})
		.css( "position", position );
	},

	_trackFocus: function() {
		this._on( this.widget(), {
			focusin: function( event ) {
				this._makeFocusTarget();
				this._focusedElement = $( event.target );
			}
		});
	},

	_makeFocusTarget: function() {
		this._untrackInstance();
		this._trackingInstances().unshift( this );
	},

	_untrackInstance: function() {
		var instances = this._trackingInstances(),
			exists = $.inArray( this, instances );
		if ( exists !== -1 ) {
			instances.splice( exists, 1 );
		}
	},

	_trackingInstances: function() {
		var instances = this.document.data( "ui-dialog-instances" );
		if ( !instances ) {
			instances = [];
			this.document.data( "ui-dialog-instances", instances );
		}
		return instances;
	},

	_minHeight: function() {
		var options = this.options;

		return options.height === "auto" ?
			options.minHeight :
			Math.min( options.minHeight, options.height );
	},

	_position: function() {
		// Need to show the dialog to get the actual offset in the position plugin
		var isVisible = this.uiDialog.is( ":visible" );
		if ( !isVisible ) {
			this.uiDialog.show();
		}
		this.uiDialog.position( this.options.position );
		if ( !isVisible ) {
			this.uiDialog.hide();
		}
	},

	_setOptions: function( options ) {
		var that = this,
			resize = false,
			resizableOptions = {};

		$.each( options, function( key, value ) {
			that._setOption( key, value );

			if ( key in that.sizeRelatedOptions ) {
				resize = true;
			}
			if ( key in that.resizableRelatedOptions ) {
				resizableOptions[ key ] = value;
			}
		});

		if ( resize ) {
			this._size();
			this._position();
		}
		if ( this.uiDialog.is( ":data(ui-resizable)" ) ) {
			this.uiDialog.resizable( "option", resizableOptions );
		}
	},

	_setOption: function( key, value ) {
		var isDraggable, isResizable,
			uiDialog = this.uiDialog;

		if ( key === "dialogClass" ) {
			uiDialog
				.removeClass( this.options.dialogClass )
				.addClass( value );
		}

		if ( key === "disabled" ) {
			return;
		}

		this._super( key, value );

		if ( key === "appendTo" ) {
			this.uiDialog.appendTo( this._appendTo() );
		}

		if ( key === "buttons" ) {
			this._createButtons();
		}

		if ( key === "closeText" ) {
			this.uiDialogTitlebarClose.button({
				// Ensure that we always pass a string
				label: "" + value
			});
		}

		if ( key === "draggable" ) {
			isDraggable = uiDialog.is( ":data(ui-draggable)" );
			if ( isDraggable && !value ) {
				uiDialog.draggable( "destroy" );
			}

			if ( !isDraggable && value ) {
				this._makeDraggable();
			}
		}

		if ( key === "position" ) {
			this._position();
		}

		if ( key === "resizable" ) {
			// currently resizable, becoming non-resizable
			isResizable = uiDialog.is( ":data(ui-resizable)" );
			if ( isResizable && !value ) {
				uiDialog.resizable( "destroy" );
			}

			// currently resizable, changing handles
			if ( isResizable && typeof value === "string" ) {
				uiDialog.resizable( "option", "handles", value );
			}

			// currently non-resizable, becoming resizable
			if ( !isResizable && value !== false ) {
				this._makeResizable();
			}
		}

		if ( key === "title" ) {
			this._title( this.uiDialogTitlebar.find( ".ui-dialog-title" ) );
		}
	},

	_size: function() {
		// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content
		// divs will both have width and height set, so we need to reset them
		var nonContentHeight, minContentHeight, maxContentHeight,
			options = this.options;

		// Reset content sizing
		this.element.show().css({
			width: "auto",
			minHeight: 0,
			maxHeight: "none",
			height: 0
		});

		if ( options.minWidth > options.width ) {
			options.width = options.minWidth;
		}

		// reset wrapper sizing
		// determine the height of all the non-content elements
		nonContentHeight = this.uiDialog.css({
				height: "auto",
				width: options.width
			})
			.outerHeight();
		minContentHeight = Math.max( 0, options.minHeight - nonContentHeight );
		maxContentHeight = typeof options.maxHeight === "number" ?
			Math.max( 0, options.maxHeight - nonContentHeight ) :
			"none";

		if ( options.height === "auto" ) {
			this.element.css({
				minHeight: minContentHeight,
				maxHeight: maxContentHeight,
				height: "auto"
			});
		} else {
			this.element.height( Math.max( 0, options.height - nonContentHeight ) );
		}

		if ( this.uiDialog.is( ":data(ui-resizable)" ) ) {
			this.uiDialog.resizable( "option", "minHeight", this._minHeight() );
		}
	},

	_blockFrames: function() {
		this.iframeBlocks = this.document.find( "iframe" ).map(function() {
			var iframe = $( this );

			return $( "<div>" )
				.css({
					position: "absolute",
					width: iframe.outerWidth(),
					height: iframe.outerHeight()
				})
				.appendTo( iframe.parent() )
				.offset( iframe.offset() )[0];
		});
	},

	_unblockFrames: function() {
		if ( this.iframeBlocks ) {
			this.iframeBlocks.remove();
			delete this.iframeBlocks;
		}
	},

	_allowInteraction: function( event ) {
		if ( $( event.target ).closest( ".ui-dialog" ).length ) {
			return true;
		}

		// TODO: Remove hack when datepicker implements
		// the .ui-front logic (#8989)
		return !!$( event.target ).closest( ".ui-datepicker" ).length;
	},

	_createOverlay: function() {
		if ( !this.options.modal ) {
			return;
		}

		// We use a delay in case the overlay is created from an
		// event that we're going to be cancelling (#2804)
		var isOpening = true;
		this._delay(function() {
			isOpening = false;
		});

		if ( !this.document.data( "ui-dialog-overlays" ) ) {

			// Prevent use of anchors and inputs
			// Using _on() for an event handler shared across many instances is
			// safe because the dialogs stack and must be closed in reverse order
			this._on( this.document, {
				focusin: function( event ) {
					if ( isOpening ) {
						return;
					}

					if ( !this._allowInteraction( event ) ) {
						event.preventDefault();
						this._trackingInstances()[ 0 ]._focusTabbable();
					}
				}
			});
		}

		this.overlay = $( "<div>" )
			.addClass( "ui-widget-overlay ui-front" )
			.appendTo( this._appendTo() );
		this._on( this.overlay, {
			mousedown: "_keepFocus"
		});
		this.document.data( "ui-dialog-overlays",
			(this.document.data( "ui-dialog-overlays" ) || 0) + 1 );
	},

	_destroyOverlay: function() {
		if ( !this.options.modal ) {
			return;
		}

		if ( this.overlay ) {
			var overlays = this.document.data( "ui-dialog-overlays" ) - 1;

			if ( !overlays ) {
				this.document
					.unbind( "focusin" )
					.removeData( "ui-dialog-overlays" );
			} else {
				this.document.data( "ui-dialog-overlays", overlays );
			}

			this.overlay.remove();
			this.overlay = null;
		}
	}
});


/*!
 * jQuery UI Droppable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */


$.widget( "ui.droppable", {
	version: "1.11.3",
	widgetEventPrefix: "drop",
	options: {
		accept: "*",
		activeClass: false,
		addClasses: true,
		greedy: false,
		hoverClass: false,
		scope: "default",
		tolerance: "intersect",

		// callbacks
		activate: null,
		deactivate: null,
		drop: null,
		out: null,
		over: null
	},
	_create: function() {

		var proportions,
			o = this.options,
			accept = o.accept;

		this.isover = false;
		this.isout = true;

		this.accept = $.isFunction( accept ) ? accept : function( d ) {
			return d.is( accept );
		};

		this.proportions = function( /* valueToWrite */ ) {
			if ( arguments.length ) {
				// Store the droppable's proportions
				proportions = arguments[ 0 ];
			} else {
				// Retrieve or derive the droppable's proportions
				return proportions ?
					proportions :
					proportions = {
						width: this.element[ 0 ].offsetWidth,
						height: this.element[ 0 ].offsetHeight
					};
			}
		};

		this._addToManager( o.scope );

		o.addClasses && this.element.addClass( "ui-droppable" );

	},

	_addToManager: function( scope ) {
		// Add the reference and positions to the manager
		$.ui.ddmanager.droppables[ scope ] = $.ui.ddmanager.droppables[ scope ] || [];
		$.ui.ddmanager.droppables[ scope ].push( this );
	},

	_splice: function( drop ) {
		var i = 0;
		for ( ; i < drop.length; i++ ) {
			if ( drop[ i ] === this ) {
				drop.splice( i, 1 );
			}
		}
	},

	_destroy: function() {
		var drop = $.ui.ddmanager.droppables[ this.options.scope ];

		this._splice( drop );

		this.element.removeClass( "ui-droppable ui-droppable-disabled" );
	},

	_setOption: function( key, value ) {

		if ( key === "accept" ) {
			this.accept = $.isFunction( value ) ? value : function( d ) {
				return d.is( value );
			};
		} else if ( key === "scope" ) {
			var drop = $.ui.ddmanager.droppables[ this.options.scope ];

			this._splice( drop );
			this._addToManager( value );
		}

		this._super( key, value );
	},

	_activate: function( event ) {
		var draggable = $.ui.ddmanager.current;
		if ( this.options.activeClass ) {
			this.element.addClass( this.options.activeClass );
		}
		if ( draggable ){
			this._trigger( "activate", event, this.ui( draggable ) );
		}
	},

	_deactivate: function( event ) {
		var draggable = $.ui.ddmanager.current;
		if ( this.options.activeClass ) {
			this.element.removeClass( this.options.activeClass );
		}
		if ( draggable ){
			this._trigger( "deactivate", event, this.ui( draggable ) );
		}
	},

	_over: function( event ) {

		var draggable = $.ui.ddmanager.current;

		// Bail if draggable and droppable are same element
		if ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {
			return;
		}

		if ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {
			if ( this.options.hoverClass ) {
				this.element.addClass( this.options.hoverClass );
			}
			this._trigger( "over", event, this.ui( draggable ) );
		}

	},

	_out: function( event ) {

		var draggable = $.ui.ddmanager.current;

		// Bail if draggable and droppable are same element
		if ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {
			return;
		}

		if ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {
			if ( this.options.hoverClass ) {
				this.element.removeClass( this.options.hoverClass );
			}
			this._trigger( "out", event, this.ui( draggable ) );
		}

	},

	_drop: function( event, custom ) {

		var draggable = custom || $.ui.ddmanager.current,
			childrenIntersection = false;

		// Bail if draggable and droppable are same element
		if ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {
			return false;
		}

		this.element.find( ":data(ui-droppable)" ).not( ".ui-draggable-dragging" ).each(function() {
			var inst = $( this ).droppable( "instance" );
			if (
				inst.options.greedy &&
				!inst.options.disabled &&
				inst.options.scope === draggable.options.scope &&
				inst.accept.call( inst.element[ 0 ], ( draggable.currentItem || draggable.element ) ) &&
				$.ui.intersect( draggable, $.extend( inst, { offset: inst.element.offset() } ), inst.options.tolerance, event )
			) { childrenIntersection = true; return false; }
		});
		if ( childrenIntersection ) {
			return false;
		}

		if ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {
			if ( this.options.activeClass ) {
				this.element.removeClass( this.options.activeClass );
			}
			if ( this.options.hoverClass ) {
				this.element.removeClass( this.options.hoverClass );
			}
			this._trigger( "drop", event, this.ui( draggable ) );
			return this.element;
		}

		return false;

	},

	ui: function( c ) {
		return {
			draggable: ( c.currentItem || c.element ),
			helper: c.helper,
			position: c.position,
			offset: c.positionAbs
		};
	}

});

$.ui.intersect = (function() {
	function isOverAxis( x, reference, size ) {
		return ( x >= reference ) && ( x < ( reference + size ) );
	}

	return function( draggable, droppable, toleranceMode, event ) {

		if ( !droppable.offset ) {
			return false;
		}

		var x1 = ( draggable.positionAbs || draggable.position.absolute ).left + draggable.margins.left,
			y1 = ( draggable.positionAbs || draggable.position.absolute ).top + draggable.margins.top,
			x2 = x1 + draggable.helperProportions.width,
			y2 = y1 + draggable.helperProportions.height,
			l = droppable.offset.left,
			t = droppable.offset.top,
			r = l + droppable.proportions().width,
			b = t + droppable.proportions().height;

		switch ( toleranceMode ) {
		case "fit":
			return ( l <= x1 && x2 <= r && t <= y1 && y2 <= b );
		case "intersect":
			return ( l < x1 + ( draggable.helperProportions.width / 2 ) && // Right Half
				x2 - ( draggable.helperProportions.width / 2 ) < r && // Left Half
				t < y1 + ( draggable.helperProportions.height / 2 ) && // Bottom Half
				y2 - ( draggable.helperProportions.height / 2 ) < b ); // Top Half
		case "pointer":
			return isOverAxis( event.pageY, t, droppable.proportions().height ) && isOverAxis( event.pageX, l, droppable.proportions().width );
		case "touch":
			return (
				( y1 >= t && y1 <= b ) || // Top edge touching
				( y2 >= t && y2 <= b ) || // Bottom edge touching
				( y1 < t && y2 > b ) // Surrounded vertically
			) && (
				( x1 >= l && x1 <= r ) || // Left edge touching
				( x2 >= l && x2 <= r ) || // Right edge touching
				( x1 < l && x2 > r ) // Surrounded horizontally
			);
		default:
			return false;
		}
	};
})();

/*
	This manager tracks offsets of draggables and droppables
*/
$.ui.ddmanager = {
	current: null,
	droppables: { "default": [] },
	prepareOffsets: function( t, event ) {

		var i, j,
			m = $.ui.ddmanager.droppables[ t.options.scope ] || [],
			type = event ? event.type : null, // workaround for #2317
			list = ( t.currentItem || t.element ).find( ":data(ui-droppable)" ).addBack();

		droppablesLoop: for ( i = 0; i < m.length; i++ ) {

			// No disabled and non-accepted
			if ( m[ i ].options.disabled || ( t && !m[ i ].accept.call( m[ i ].element[ 0 ], ( t.currentItem || t.element ) ) ) ) {
				continue;
			}

			// Filter out elements in the current dragged item
			for ( j = 0; j < list.length; j++ ) {
				if ( list[ j ] === m[ i ].element[ 0 ] ) {
					m[ i ].proportions().height = 0;
					continue droppablesLoop;
				}
			}

			m[ i ].visible = m[ i ].element.css( "display" ) !== "none";
			if ( !m[ i ].visible ) {
				continue;
			}

			// Activate the droppable if used directly from draggables
			if ( type === "mousedown" ) {
				m[ i ]._activate.call( m[ i ], event );
			}

			m[ i ].offset = m[ i ].element.offset();
			m[ i ].proportions({ width: m[ i ].element[ 0 ].offsetWidth, height: m[ i ].element[ 0 ].offsetHeight });

		}

	},
	drop: function( draggable, event ) {

		var dropped = false;
		// Create a copy of the droppables in case the list changes during the drop (#9116)
		$.each( ( $.ui.ddmanager.droppables[ draggable.options.scope ] || [] ).slice(), function() {

			if ( !this.options ) {
				return;
			}
			if ( !this.options.disabled && this.visible && $.ui.intersect( draggable, this, this.options.tolerance, event ) ) {
				dropped = this._drop.call( this, event ) || dropped;
			}

			if ( !this.options.disabled && this.visible && this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {
				this.isout = true;
				this.isover = false;
				this._deactivate.call( this, event );
			}

		});
		return dropped;

	},
	dragStart: function( draggable, event ) {
		// Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)
		draggable.element.parentsUntil( "body" ).bind( "scroll.droppable", function() {
			if ( !draggable.options.refreshPositions ) {
				$.ui.ddmanager.prepareOffsets( draggable, event );
			}
		});
	},
	drag: function( draggable, event ) {

		// If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.
		if ( draggable.options.refreshPositions ) {
			$.ui.ddmanager.prepareOffsets( draggable, event );
		}

		// Run through all droppables and check their positions based on specific tolerance options
		$.each( $.ui.ddmanager.droppables[ draggable.options.scope ] || [], function() {

			if ( this.options.disabled || this.greedyChild || !this.visible ) {
				return;
			}

			var parentInstance, scope, parent,
				intersects = $.ui.intersect( draggable, this, this.options.tolerance, event ),
				c = !intersects && this.isover ? "isout" : ( intersects && !this.isover ? "isover" : null );
			if ( !c ) {
				return;
			}

			if ( this.options.greedy ) {
				// find droppable parents with same scope
				scope = this.options.scope;
				parent = this.element.parents( ":data(ui-droppable)" ).filter(function() {
					return $( this ).droppable( "instance" ).options.scope === scope;
				});

				if ( parent.length ) {
					parentInstance = $( parent[ 0 ] ).droppable( "instance" );
					parentInstance.greedyChild = ( c === "isover" );
				}
			}

			// we just moved into a greedy child
			if ( parentInstance && c === "isover" ) {
				parentInstance.isover = false;
				parentInstance.isout = true;
				parentInstance._out.call( parentInstance, event );
			}

			this[ c ] = true;
			this[c === "isout" ? "isover" : "isout"] = false;
			this[c === "isover" ? "_over" : "_out"].call( this, event );

			// we just moved out of a greedy child
			if ( parentInstance && c === "isout" ) {
				parentInstance.isout = false;
				parentInstance.isover = true;
				parentInstance._over.call( parentInstance, event );
			}
		});

	},
	dragStop: function( draggable, event ) {
		draggable.element.parentsUntil( "body" ).unbind( "scroll.droppable" );
		// Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)
		if ( !draggable.options.refreshPositions ) {
			$.ui.ddmanager.prepareOffsets( draggable, event );
		}
	}
};

var droppable = $.ui.droppable;


/*!
 * jQuery UI Effects 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */


var dataSpace = "ui-effects-",

	// Create a local jQuery because jQuery Color relies on it and the
	// global may not exist with AMD and a custom build (#10199)
	jQuery = $;

$.effects = {
	effect: {}
};

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function( jQuery, undefined ) {

	var stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",

	// plusequals test for += 100 -= 100
	rplusequals = /^([\-+])=\s*(\d+\.?\d*)/,
	// a set of RE's that can match strings and generate color tuples.
	stringParsers = [ {
			re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ],
					execResult[ 3 ],
					execResult[ 4 ]
				];
			}
		}, {
			re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ] * 2.55,
					execResult[ 2 ] * 2.55,
					execResult[ 3 ] * 2.55,
					execResult[ 4 ]
				];
			}
		}, {
			// this regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ], 16 )
				];
			}
		}, {
			// this regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ] + execResult[ 3 ], 16 )
				];
			}
		}, {
			re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			space: "hsla",
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ] / 100,
					execResult[ 3 ] / 100,
					execResult[ 4 ]
				];
			}
		} ],

	// jQuery.Color( )
	color = jQuery.Color = function( color, green, blue, alpha ) {
		return new jQuery.Color.fn.parse( color, green, blue, alpha );
	},
	spaces = {
		rgba: {
			props: {
				red: {
					idx: 0,
					type: "byte"
				},
				green: {
					idx: 1,
					type: "byte"
				},
				blue: {
					idx: 2,
					type: "byte"
				}
			}
		},

		hsla: {
			props: {
				hue: {
					idx: 0,
					type: "degrees"
				},
				saturation: {
					idx: 1,
					type: "percent"
				},
				lightness: {
					idx: 2,
					type: "percent"
				}
			}
		}
	},
	propTypes = {
		"byte": {
			floor: true,
			max: 255
		},
		"percent": {
			max: 1
		},
		"degrees": {
			mod: 360,
			floor: true
		}
	},
	support = color.support = {},

	// element for support tests
	supportElem = jQuery( "<p>" )[ 0 ],

	// colors = jQuery.Color.names
	colors,

	// local aliases of functions called often
	each = jQuery.each;

// determine rgba support immediately
supportElem.style.cssText = "background-color:rgba(1,1,1,.5)";
support.rgba = supportElem.style.backgroundColor.indexOf( "rgba" ) > -1;

// define cache name and alpha properties
// for rgba and hsla spaces
each( spaces, function( spaceName, space ) {
	space.cache = "_" + spaceName;
	space.props.alpha = {
		idx: 3,
		type: "percent",
		def: 1
	};
});

function clamp( value, prop, allowEmpty ) {
	var type = propTypes[ prop.type ] || {};

	if ( value == null ) {
		return (allowEmpty || !prop.def) ? null : prop.def;
	}

	// ~~ is an short way of doing floor for positive numbers
	value = type.floor ? ~~value : parseFloat( value );

	// IE will pass in empty strings as value for alpha,
	// which will hit this case
	if ( isNaN( value ) ) {
		return prop.def;
	}

	if ( type.mod ) {
		// we add mod before modding to make sure that negatives values
		// get converted properly: -10 -> 350
		return (value + type.mod) % type.mod;
	}

	// for now all property types without mod have min and max
	return 0 > value ? 0 : type.max < value ? type.max : value;
}

function stringParse( string ) {
	var inst = color(),
		rgba = inst._rgba = [];

	string = string.toLowerCase();

	each( stringParsers, function( i, parser ) {
		var parsed,
			match = parser.re.exec( string ),
			values = match && parser.parse( match ),
			spaceName = parser.space || "rgba";

		if ( values ) {
			parsed = inst[ spaceName ]( values );

			// if this was an rgba parse the assignment might happen twice
			// oh well....
			inst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];
			rgba = inst._rgba = parsed._rgba;

			// exit each( stringParsers ) here because we matched
			return false;
		}
	});

	// Found a stringParser that handled it
	if ( rgba.length ) {

		// if this came from a parsed string, force "transparent" when alpha is 0
		// chrome, (and maybe others) return "transparent" as rgba(0,0,0,0)
		if ( rgba.join() === "0,0,0,0" ) {
			jQuery.extend( rgba, colors.transparent );
		}
		return inst;
	}

	// named colors
	return colors[ string ];
}

color.fn = jQuery.extend( color.prototype, {
	parse: function( red, green, blue, alpha ) {
		if ( red === undefined ) {
			this._rgba = [ null, null, null, null ];
			return this;
		}
		if ( red.jquery || red.nodeType ) {
			red = jQuery( red ).css( green );
			green = undefined;
		}

		var inst = this,
			type = jQuery.type( red ),
			rgba = this._rgba = [];

		// more than 1 argument specified - assume ( red, green, blue, alpha )
		if ( green !== undefined ) {
			red = [ red, green, blue, alpha ];
			type = "array";
		}

		if ( type === "string" ) {
			return this.parse( stringParse( red ) || colors._default );
		}

		if ( type === "array" ) {
			each( spaces.rgba.props, function( key, prop ) {
				rgba[ prop.idx ] = clamp( red[ prop.idx ], prop );
			});
			return this;
		}

		if ( type === "object" ) {
			if ( red instanceof color ) {
				each( spaces, function( spaceName, space ) {
					if ( red[ space.cache ] ) {
						inst[ space.cache ] = red[ space.cache ].slice();
					}
				});
			} else {
				each( spaces, function( spaceName, space ) {
					var cache = space.cache;
					each( space.props, function( key, prop ) {

						// if the cache doesn't exist, and we know how to convert
						if ( !inst[ cache ] && space.to ) {

							// if the value was null, we don't need to copy it
							// if the key was alpha, we don't need to copy it either
							if ( key === "alpha" || red[ key ] == null ) {
								return;
							}
							inst[ cache ] = space.to( inst._rgba );
						}

						// this is the only case where we allow nulls for ALL properties.
						// call clamp with alwaysAllowEmpty
						inst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );
					});

					// everything defined but alpha?
					if ( inst[ cache ] && jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {
						// use the default of 1
						inst[ cache ][ 3 ] = 1;
						if ( space.from ) {
							inst._rgba = space.from( inst[ cache ] );
						}
					}
				});
			}
			return this;
		}
	},
	is: function( compare ) {
		var is = color( compare ),
			same = true,
			inst = this;

		each( spaces, function( _, space ) {
			var localCache,
				isCache = is[ space.cache ];
			if (isCache) {
				localCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];
				each( space.props, function( _, prop ) {
					if ( isCache[ prop.idx ] != null ) {
						same = ( isCache[ prop.idx ] === localCache[ prop.idx ] );
						return same;
					}
				});
			}
			return same;
		});
		return same;
	},
	_space: function() {
		var used = [],
			inst = this;
		each( spaces, function( spaceName, space ) {
			if ( inst[ space.cache ] ) {
				used.push( spaceName );
			}
		});
		return used.pop();
	},
	transition: function( other, distance ) {
		var end = color( other ),
			spaceName = end._space(),
			space = spaces[ spaceName ],
			startColor = this.alpha() === 0 ? color( "transparent" ) : this,
			start = startColor[ space.cache ] || space.to( startColor._rgba ),
			result = start.slice();

		end = end[ space.cache ];
		each( space.props, function( key, prop ) {
			var index = prop.idx,
				startValue = start[ index ],
				endValue = end[ index ],
				type = propTypes[ prop.type ] || {};

			// if null, don't override start value
			if ( endValue === null ) {
				return;
			}
			// if null - use end
			if ( startValue === null ) {
				result[ index ] = endValue;
			} else {
				if ( type.mod ) {
					if ( endValue - startValue > type.mod / 2 ) {
						startValue += type.mod;
					} else if ( startValue - endValue > type.mod / 2 ) {
						startValue -= type.mod;
					}
				}
				result[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );
			}
		});
		return this[ spaceName ]( result );
	},
	blend: function( opaque ) {
		// if we are already opaque - return ourself
		if ( this._rgba[ 3 ] === 1 ) {
			return this;
		}

		var rgb = this._rgba.slice(),
			a = rgb.pop(),
			blend = color( opaque )._rgba;

		return color( jQuery.map( rgb, function( v, i ) {
			return ( 1 - a ) * blend[ i ] + a * v;
		}));
	},
	toRgbaString: function() {
		var prefix = "rgba(",
			rgba = jQuery.map( this._rgba, function( v, i ) {
				return v == null ? ( i > 2 ? 1 : 0 ) : v;
			});

		if ( rgba[ 3 ] === 1 ) {
			rgba.pop();
			prefix = "rgb(";
		}

		return prefix + rgba.join() + ")";
	},
	toHslaString: function() {
		var prefix = "hsla(",
			hsla = jQuery.map( this.hsla(), function( v, i ) {
				if ( v == null ) {
					v = i > 2 ? 1 : 0;
				}

				// catch 1 and 2
				if ( i && i < 3 ) {
					v = Math.round( v * 100 ) + "%";
				}
				return v;
			});

		if ( hsla[ 3 ] === 1 ) {
			hsla.pop();
			prefix = "hsl(";
		}
		return prefix + hsla.join() + ")";
	},
	toHexString: function( includeAlpha ) {
		var rgba = this._rgba.slice(),
			alpha = rgba.pop();

		if ( includeAlpha ) {
			rgba.push( ~~( alpha * 255 ) );
		}

		return "#" + jQuery.map( rgba, function( v ) {

			// default to 0 when nulls exist
			v = ( v || 0 ).toString( 16 );
			return v.length === 1 ? "0" + v : v;
		}).join("");
	},
	toString: function() {
		return this._rgba[ 3 ] === 0 ? "transparent" : this.toRgbaString();
	}
});
color.fn.parse.prototype = color.fn;

// hsla conversions adapted from:
// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021

function hue2rgb( p, q, h ) {
	h = ( h + 1 ) % 1;
	if ( h * 6 < 1 ) {
		return p + ( q - p ) * h * 6;
	}
	if ( h * 2 < 1) {
		return q;
	}
	if ( h * 3 < 2 ) {
		return p + ( q - p ) * ( ( 2 / 3 ) - h ) * 6;
	}
	return p;
}

spaces.hsla.to = function( rgba ) {
	if ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {
		return [ null, null, null, rgba[ 3 ] ];
	}
	var r = rgba[ 0 ] / 255,
		g = rgba[ 1 ] / 255,
		b = rgba[ 2 ] / 255,
		a = rgba[ 3 ],
		max = Math.max( r, g, b ),
		min = Math.min( r, g, b ),
		diff = max - min,
		add = max + min,
		l = add * 0.5,
		h, s;

	if ( min === max ) {
		h = 0;
	} else if ( r === max ) {
		h = ( 60 * ( g - b ) / diff ) + 360;
	} else if ( g === max ) {
		h = ( 60 * ( b - r ) / diff ) + 120;
	} else {
		h = ( 60 * ( r - g ) / diff ) + 240;
	}

	// chroma (diff) == 0 means greyscale which, by definition, saturation = 0%
	// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)
	if ( diff === 0 ) {
		s = 0;
	} else if ( l <= 0.5 ) {
		s = diff / add;
	} else {
		s = diff / ( 2 - add );
	}
	return [ Math.round(h) % 360, s, l, a == null ? 1 : a ];
};

spaces.hsla.from = function( hsla ) {
	if ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {
		return [ null, null, null, hsla[ 3 ] ];
	}
	var h = hsla[ 0 ] / 360,
		s = hsla[ 1 ],
		l = hsla[ 2 ],
		a = hsla[ 3 ],
		q = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,
		p = 2 * l - q;

	return [
		Math.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),
		Math.round( hue2rgb( p, q, h ) * 255 ),
		Math.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),
		a
	];
};

each( spaces, function( spaceName, space ) {
	var props = space.props,
		cache = space.cache,
		to = space.to,
		from = space.from;

	// makes rgba() and hsla()
	color.fn[ spaceName ] = function( value ) {

		// generate a cache for this space if it doesn't exist
		if ( to && !this[ cache ] ) {
			this[ cache ] = to( this._rgba );
		}
		if ( value === undefined ) {
			return this[ cache ].slice();
		}

		var ret,
			type = jQuery.type( value ),
			arr = ( type === "array" || type === "object" ) ? value : arguments,
			local = this[ cache ].slice();

		each( props, function( key, prop ) {
			var val = arr[ type === "object" ? key : prop.idx ];
			if ( val == null ) {
				val = local[ prop.idx ];
			}
			local[ prop.idx ] = clamp( val, prop );
		});

		if ( from ) {
			ret = color( from( local ) );
			ret[ cache ] = local;
			return ret;
		} else {
			return color( local );
		}
	};

	// makes red() green() blue() alpha() hue() saturation() lightness()
	each( props, function( key, prop ) {
		// alpha is included in more than one space
		if ( color.fn[ key ] ) {
			return;
		}
		color.fn[ key ] = function( value ) {
			var vtype = jQuery.type( value ),
				fn = ( key === "alpha" ? ( this._hsla ? "hsla" : "rgba" ) : spaceName ),
				local = this[ fn ](),
				cur = local[ prop.idx ],
				match;

			if ( vtype === "undefined" ) {
				return cur;
			}

			if ( vtype === "function" ) {
				value = value.call( this, cur );
				vtype = jQuery.type( value );
			}
			if ( value == null && prop.empty ) {
				return this;
			}
			if ( vtype === "string" ) {
				match = rplusequals.exec( value );
				if ( match ) {
					value = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === "+" ? 1 : -1 );
				}
			}
			local[ prop.idx ] = value;
			return this[ fn ]( local );
		};
	});
});

// add cssHook and .fx.step function for each named hook.
// accept a space separated string of properties
color.hook = function( hook ) {
	var hooks = hook.split( " " );
	each( hooks, function( i, hook ) {
		jQuery.cssHooks[ hook ] = {
			set: function( elem, value ) {
				var parsed, curElem,
					backgroundColor = "";

				if ( value !== "transparent" && ( jQuery.type( value ) !== "string" || ( parsed = stringParse( value ) ) ) ) {
					value = color( parsed || value );
					if ( !support.rgba && value._rgba[ 3 ] !== 1 ) {
						curElem = hook === "backgroundColor" ? elem.parentNode : elem;
						while (
							(backgroundColor === "" || backgroundColor === "transparent") &&
							curElem && curElem.style
						) {
							try {
								backgroundColor = jQuery.css( curElem, "backgroundColor" );
								curElem = curElem.parentNode;
							} catch ( e ) {
							}
						}

						value = value.blend( backgroundColor && backgroundColor !== "transparent" ?
							backgroundColor :
							"_default" );
					}

					value = value.toRgbaString();
				}
				try {
					elem.style[ hook ] = value;
				} catch ( e ) {
					// wrapped to prevent IE from throwing errors on "invalid" values like 'auto' or 'inherit'
				}
			}
		};
		jQuery.fx.step[ hook ] = function( fx ) {
			if ( !fx.colorInit ) {
				fx.start = color( fx.elem, hook );
				fx.end = color( fx.end );
				fx.colorInit = true;
			}
			jQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );
		};
	});

};

color.hook( stepHooks );

jQuery.cssHooks.borderColor = {
	expand: function( value ) {
		var expanded = {};

		each( [ "Top", "Right", "Bottom", "Left" ], function( i, part ) {
			expanded[ "border" + part + "Color" ] = value;
		});
		return expanded;
	}
};

// Basic color names only.
// Usage of any of the other color names requires adding yourself or including
// jquery.color.svg-names.js.
colors = jQuery.Color.names = {
	// 4.1. Basic color keywords
	aqua: "#00ffff",
	black: "#000000",
	blue: "#0000ff",
	fuchsia: "#ff00ff",
	gray: "#808080",
	green: "#008000",
	lime: "#00ff00",
	maroon: "#800000",
	navy: "#000080",
	olive: "#808000",
	purple: "#800080",
	red: "#ff0000",
	silver: "#c0c0c0",
	teal: "#008080",
	white: "#ffffff",
	yellow: "#ffff00",

	// 4.2.3. "transparent" color keyword
	transparent: [ null, null, null, 0 ],

	_default: "#ffffff"
};

})( jQuery );

/******************************************************************************/
/****************************** CLASS ANIMATIONS ******************************/
/******************************************************************************/
(function() {

var classAnimationActions = [ "add", "remove", "toggle" ],
	shorthandStyles = {
		border: 1,
		borderBottom: 1,
		borderColor: 1,
		borderLeft: 1,
		borderRight: 1,
		borderTop: 1,
		borderWidth: 1,
		margin: 1,
		padding: 1
	};

$.each([ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ], function( _, prop ) {
	$.fx.step[ prop ] = function( fx ) {
		if ( fx.end !== "none" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {
			jQuery.style( fx.elem, prop, fx.end );
			fx.setAttr = true;
		}
	};
});

function getElementStyles( elem ) {
	var key, len,
		style = elem.ownerDocument.defaultView ?
			elem.ownerDocument.defaultView.getComputedStyle( elem, null ) :
			elem.currentStyle,
		styles = {};

	if ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {
		len = style.length;
		while ( len-- ) {
			key = style[ len ];
			if ( typeof style[ key ] === "string" ) {
				styles[ $.camelCase( key ) ] = style[ key ];
			}
		}
	// support: Opera, IE <9
	} else {
		for ( key in style ) {
			if ( typeof style[ key ] === "string" ) {
				styles[ key ] = style[ key ];
			}
		}
	}

	return styles;
}

function styleDifference( oldStyle, newStyle ) {
	var diff = {},
		name, value;

	for ( name in newStyle ) {
		value = newStyle[ name ];
		if ( oldStyle[ name ] !== value ) {
			if ( !shorthandStyles[ name ] ) {
				if ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {
					diff[ name ] = value;
				}
			}
		}
	}

	return diff;
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

$.effects.animateClass = function( value, duration, easing, callback ) {
	var o = $.speed( duration, easing, callback );

	return this.queue( function() {
		var animated = $( this ),
			baseClass = animated.attr( "class" ) || "",
			applyClassChange,
			allAnimations = o.children ? animated.find( "*" ).addBack() : animated;

		// map the animated objects to store the original styles.
		allAnimations = allAnimations.map(function() {
			var el = $( this );
			return {
				el: el,
				start: getElementStyles( this )
			};
		});

		// apply class change
		applyClassChange = function() {
			$.each( classAnimationActions, function(i, action) {
				if ( value[ action ] ) {
					animated[ action + "Class" ]( value[ action ] );
				}
			});
		};
		applyClassChange();

		// map all animated objects again - calculate new styles and diff
		allAnimations = allAnimations.map(function() {
			this.end = getElementStyles( this.el[ 0 ] );
			this.diff = styleDifference( this.start, this.end );
			return this;
		});

		// apply original class
		animated.attr( "class", baseClass );

		// map all animated objects again - this time collecting a promise
		allAnimations = allAnimations.map(function() {
			var styleInfo = this,
				dfd = $.Deferred(),
				opts = $.extend({}, o, {
					queue: false,
					complete: function() {
						dfd.resolve( styleInfo );
					}
				});

			this.el.animate( this.diff, opts );
			return dfd.promise();
		});

		// once all animations have completed:
		$.when.apply( $, allAnimations.get() ).done(function() {

			// set the final class
			applyClassChange();

			// for each animated element,
			// clear all css properties that were animated
			$.each( arguments, function() {
				var el = this.el;
				$.each( this.diff, function(key) {
					el.css( key, "" );
				});
			});

			// this is guarnteed to be there if you use jQuery.speed()
			// it also handles dequeuing the next anim...
			o.complete.call( animated[ 0 ] );
		});
	});
};

$.fn.extend({
	addClass: (function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return speed ?
				$.effects.animateClass.call( this,
					{ add: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	})( $.fn.addClass ),

	removeClass: (function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return arguments.length > 1 ?
				$.effects.animateClass.call( this,
					{ remove: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	})( $.fn.removeClass ),

	toggleClass: (function( orig ) {
		return function( classNames, force, speed, easing, callback ) {
			if ( typeof force === "boolean" || force === undefined ) {
				if ( !speed ) {
					// without speed parameter
					return orig.apply( this, arguments );
				} else {
					return $.effects.animateClass.call( this,
						(force ? { add: classNames } : { remove: classNames }),
						speed, easing, callback );
				}
			} else {
				// without force parameter
				return $.effects.animateClass.call( this,
					{ toggle: classNames }, force, speed, easing );
			}
		};
	})( $.fn.toggleClass ),

	switchClass: function( remove, add, speed, easing, callback) {
		return $.effects.animateClass.call( this, {
			add: add,
			remove: remove
		}, speed, easing, callback );
	}
});

})();

/******************************************************************************/
/*********************************** EFFECTS **********************************/
/******************************************************************************/

(function() {

$.extend( $.effects, {
	version: "1.11.3",

	// Saves a set of properties in a data storage
	save: function( element, set ) {
		for ( var i = 0; i < set.length; i++ ) {
			if ( set[ i ] !== null ) {
				element.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );
			}
		}
	},

	// Restores a set of previously saved properties from a data storage
	restore: function( element, set ) {
		var val, i;
		for ( i = 0; i < set.length; i++ ) {
			if ( set[ i ] !== null ) {
				val = element.data( dataSpace + set[ i ] );
				// support: jQuery 1.6.2
				// http://bugs.jquery.com/ticket/9917
				// jQuery 1.6.2 incorrectly returns undefined for any falsy value.
				// We can't differentiate between "" and 0 here, so we just assume
				// empty string since it's likely to be a more common value...
				if ( val === undefined ) {
					val = "";
				}
				element.css( set[ i ], val );
			}
		}
	},

	setMode: function( el, mode ) {
		if (mode === "toggle") {
			mode = el.is( ":hidden" ) ? "show" : "hide";
		}
		return mode;
	},

	// Translates a [top,left] array into a baseline value
	// this should be a little more flexible in the future to handle a string & hash
	getBaseline: function( origin, original ) {
		var y, x;
		switch ( origin[ 0 ] ) {
			case "top": y = 0; break;
			case "middle": y = 0.5; break;
			case "bottom": y = 1; break;
			default: y = origin[ 0 ] / original.height;
		}
		switch ( origin[ 1 ] ) {
			case "left": x = 0; break;
			case "center": x = 0.5; break;
			case "right": x = 1; break;
			default: x = origin[ 1 ] / original.width;
		}
		return {
			x: x,
			y: y
		};
	},

	// Wraps the element around a wrapper that copies position properties
	createWrapper: function( element ) {

		// if the element is already wrapped, return it
		if ( element.parent().is( ".ui-effects-wrapper" )) {
			return element.parent();
		}

		// wrap the element
		var props = {
				width: element.outerWidth(true),
				height: element.outerHeight(true),
				"float": element.css( "float" )
			},
			wrapper = $( "<div></div>" )
				.addClass( "ui-effects-wrapper" )
				.css({
					fontSize: "100%",
					background: "transparent",
					border: "none",
					margin: 0,
					padding: 0
				}),
			// Store the size in case width/height are defined in % - Fixes #5245
			size = {
				width: element.width(),
				height: element.height()
			},
			active = document.activeElement;

		// support: Firefox
		// Firefox incorrectly exposes anonymous content
		// https://bugzilla.mozilla.org/show_bug.cgi?id=561664
		try {
			active.id;
		} catch ( e ) {
			active = document.body;
		}

		element.wrap( wrapper );

		// Fixes #7595 - Elements lose focus when wrapped.
		if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
			$( active ).focus();
		}

		wrapper = element.parent(); //Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element

		// transfer positioning properties to the wrapper
		if ( element.css( "position" ) === "static" ) {
			wrapper.css({ position: "relative" });
			element.css({ position: "relative" });
		} else {
			$.extend( props, {
				position: element.css( "position" ),
				zIndex: element.css( "z-index" )
			});
			$.each([ "top", "left", "bottom", "right" ], function(i, pos) {
				props[ pos ] = element.css( pos );
				if ( isNaN( parseInt( props[ pos ], 10 ) ) ) {
					props[ pos ] = "auto";
				}
			});
			element.css({
				position: "relative",
				top: 0,
				left: 0,
				right: "auto",
				bottom: "auto"
			});
		}
		element.css(size);

		return wrapper.css( props ).show();
	},

	removeWrapper: function( element ) {
		var active = document.activeElement;

		if ( element.parent().is( ".ui-effects-wrapper" ) ) {
			element.parent().replaceWith( element );

			// Fixes #7595 - Elements lose focus when wrapped.
			if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
				$( active ).focus();
			}
		}

		return element;
	},

	setTransition: function( element, list, factor, value ) {
		value = value || {};
		$.each( list, function( i, x ) {
			var unit = element.cssUnit( x );
			if ( unit[ 0 ] > 0 ) {
				value[ x ] = unit[ 0 ] * factor + unit[ 1 ];
			}
		});
		return value;
	}
});

// return an effect options object for the given parameters:
function _normalizeArguments( effect, options, speed, callback ) {

	// allow passing all options as the first parameter
	if ( $.isPlainObject( effect ) ) {
		options = effect;
		effect = effect.effect;
	}

	// convert to an object
	effect = { effect: effect };

	// catch (effect, null, ...)
	if ( options == null ) {
		options = {};
	}

	// catch (effect, callback)
	if ( $.isFunction( options ) ) {
		callback = options;
		speed = null;
		options = {};
	}

	// catch (effect, speed, ?)
	if ( typeof options === "number" || $.fx.speeds[ options ] ) {
		callback = speed;
		speed = options;
		options = {};
	}

	// catch (effect, options, callback)
	if ( $.isFunction( speed ) ) {
		callback = speed;
		speed = null;
	}

	// add options to effect
	if ( options ) {
		$.extend( effect, options );
	}

	speed = speed || options.duration;
	effect.duration = $.fx.off ? 0 :
		typeof speed === "number" ? speed :
		speed in $.fx.speeds ? $.fx.speeds[ speed ] :
		$.fx.speeds._default;

	effect.complete = callback || options.complete;

	return effect;
}

function standardAnimationOption( option ) {
	// Valid standard speeds (nothing, number, named speed)
	if ( !option || typeof option === "number" || $.fx.speeds[ option ] ) {
		return true;
	}

	// Invalid strings - treat as "normal" speed
	if ( typeof option === "string" && !$.effects.effect[ option ] ) {
		return true;
	}

	// Complete callback
	if ( $.isFunction( option ) ) {
		return true;
	}

	// Options hash (but not naming an effect)
	if ( typeof option === "object" && !option.effect ) {
		return true;
	}

	// Didn't match any standard API
	return false;
}

$.fn.extend({
	effect: function( /* effect, options, speed, callback */ ) {
		var args = _normalizeArguments.apply( this, arguments ),
			mode = args.mode,
			queue = args.queue,
			effectMethod = $.effects.effect[ args.effect ];

		if ( $.fx.off || !effectMethod ) {
			// delegate to the original method (e.g., .show()) if possible
			if ( mode ) {
				return this[ mode ]( args.duration, args.complete );
			} else {
				return this.each( function() {
					if ( args.complete ) {
						args.complete.call( this );
					}
				});
			}
		}

		function run( next ) {
			var elem = $( this ),
				complete = args.complete,
				mode = args.mode;

			function done() {
				if ( $.isFunction( complete ) ) {
					complete.call( elem[0] );
				}
				if ( $.isFunction( next ) ) {
					next();
				}
			}

			// If the element already has the correct final state, delegate to
			// the core methods so the internal tracking of "olddisplay" works.
			if ( elem.is( ":hidden" ) ? mode === "hide" : mode === "show" ) {
				elem[ mode ]();
				done();
			} else {
				effectMethod.call( elem[0], args, done );
			}
		}

		return queue === false ? this.each( run ) : this.queue( queue || "fx", run );
	},

	show: (function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "show";
				return this.effect.call( this, args );
			}
		};
	})( $.fn.show ),

	hide: (function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "hide";
				return this.effect.call( this, args );
			}
		};
	})( $.fn.hide ),

	toggle: (function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) || typeof option === "boolean" ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "toggle";
				return this.effect.call( this, args );
			}
		};
	})( $.fn.toggle ),

	// helper functions
	cssUnit: function(key) {
		var style = this.css( key ),
			val = [];

		$.each( [ "em", "px", "%", "pt" ], function( i, unit ) {
			if ( style.indexOf( unit ) > 0 ) {
				val = [ parseFloat( style ), unit ];
			}
		});
		return val;
	}
});

})();

/******************************************************************************/
/*********************************** EASING ***********************************/
/******************************************************************************/

(function() {

// based on easing equations from Robert Penner (http://www.robertpenner.com/easing)

var baseEasings = {};

$.each( [ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function( i, name ) {
	baseEasings[ name ] = function( p ) {
		return Math.pow( p, i + 2 );
	};
});

$.extend( baseEasings, {
	Sine: function( p ) {
		return 1 - Math.cos( p * Math.PI / 2 );
	},
	Circ: function( p ) {
		return 1 - Math.sqrt( 1 - p * p );
	},
	Elastic: function( p ) {
		return p === 0 || p === 1 ? p :
			-Math.pow( 2, 8 * (p - 1) ) * Math.sin( ( (p - 1) * 80 - 7.5 ) * Math.PI / 15 );
	},
	Back: function( p ) {
		return p * p * ( 3 * p - 2 );
	},
	Bounce: function( p ) {
		var pow2,
			bounce = 4;

		while ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}
		return 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );
	}
});

$.each( baseEasings, function( name, easeIn ) {
	$.easing[ "easeIn" + name ] = easeIn;
	$.easing[ "easeOut" + name ] = function( p ) {
		return 1 - easeIn( 1 - p );
	};
	$.easing[ "easeInOut" + name ] = function( p ) {
		return p < 0.5 ?
			easeIn( p * 2 ) / 2 :
			1 - easeIn( p * -2 + 2 ) / 2;
	};
});

})();

var effect = $.effects;


/*!
 * jQuery UI Effects Blind 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/blind-effect/
 */


var effectBlind = $.effects.effect.blind = function( o, done ) {
	// Create element
	var el = $( this ),
		rvertical = /up|down|vertical/,
		rpositivemotion = /up|left|vertical|horizontal/,
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		direction = o.direction || "up",
		vertical = rvertical.test( direction ),
		ref = vertical ? "height" : "width",
		ref2 = vertical ? "top" : "left",
		motion = rpositivemotion.test( direction ),
		animation = {},
		show = mode === "show",
		wrapper, distance, margin;

	// if already wrapped, the wrapper's properties are my property. #6245
	if ( el.parent().is( ".ui-effects-wrapper" ) ) {
		$.effects.save( el.parent(), props );
	} else {
		$.effects.save( el, props );
	}
	el.show();
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});

	distance = wrapper[ ref ]();
	margin = parseFloat( wrapper.css( ref2 ) ) || 0;

	animation[ ref ] = show ? distance : 0;
	if ( !motion ) {
		el
			.css( vertical ? "bottom" : "right", 0 )
			.css( vertical ? "top" : "left", "auto" )
			.css({ position: "absolute" });

		animation[ ref2 ] = show ? margin : distance + margin;
	}

	// start at 0 if we are showing
	if ( show ) {
		wrapper.css( ref, 0 );
		if ( !motion ) {
			wrapper.css( ref2, margin + distance );
		}
	}

	// Animate
	wrapper.animate( animation, {
		duration: o.duration,
		easing: o.easing,
		queue: false,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};


/*!
 * jQuery UI Effects Bounce 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/bounce-effect/
 */


var effectBounce = $.effects.effect.bounce = function( o, done ) {
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],

		// defaults:
		mode = $.effects.setMode( el, o.mode || "effect" ),
		hide = mode === "hide",
		show = mode === "show",
		direction = o.direction || "up",
		distance = o.distance,
		times = o.times || 5,

		// number of internal animations
		anims = times * 2 + ( show || hide ? 1 : 0 ),
		speed = o.duration / anims,
		easing = o.easing,

		// utility:
		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
		motion = ( direction === "up" || direction === "left" ),
		i,
		upAnim,
		downAnim,

		// we will need to re-assemble the queue to stack our animations in place
		queue = el.queue(),
		queuelen = queue.length;

	// Avoid touching opacity to prevent clearType and PNG issues in IE
	if ( show || hide ) {
		props.push( "opacity" );
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el ); // Create Wrapper

	// default distance for the BIGGEST bounce is the outer Distance / 3
	if ( !distance ) {
		distance = el[ ref === "top" ? "outerHeight" : "outerWidth" ]() / 3;
	}

	if ( show ) {
		downAnim = { opacity: 1 };
		downAnim[ ref ] = 0;

		// if we are showing, force opacity 0 and set the initial position
		// then do the "first" animation
		el.css( "opacity", 0 )
			.css( ref, motion ? -distance * 2 : distance * 2 )
			.animate( downAnim, speed, easing );
	}

	// start at the smallest distance if we are hiding
	if ( hide ) {
		distance = distance / Math.pow( 2, times - 1 );
	}

	downAnim = {};
	downAnim[ ref ] = 0;
	// Bounces up/down/left/right then back to 0 -- times * 2 animations happen here
	for ( i = 0; i < times; i++ ) {
		upAnim = {};
		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;

		el.animate( upAnim, speed, easing )
			.animate( downAnim, speed, easing );

		distance = hide ? distance * 2 : distance / 2;
	}

	// Last Bounce when Hiding
	if ( hide ) {
		upAnim = { opacity: 0 };
		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;

		el.animate( upAnim, speed, easing );
	}

	el.queue(function() {
		if ( hide ) {
			el.hide();
		}
		$.effects.restore( el, props );
		$.effects.removeWrapper( el );
		done();
	});

	// inject all the animations we just queued to be first in line (after "inprogress")
	if ( queuelen > 1) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	el.dequeue();

};


/*!
 * jQuery UI Effects Clip 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/clip-effect/
 */


var effectClip = $.effects.effect.clip = function( o, done ) {
	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		direction = o.direction || "vertical",
		vert = direction === "vertical",
		size = vert ? "height" : "width",
		position = vert ? "top" : "left",
		animation = {},
		wrapper, animate, distance;

	// Save & Show
	$.effects.save( el, props );
	el.show();

	// Create Wrapper
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});
	animate = ( el[0].tagName === "IMG" ) ? wrapper : el;
	distance = animate[ size ]();

	// Shift
	if ( show ) {
		animate.css( size, 0 );
		animate.css( position, distance / 2 );
	}

	// Create Animation Object:
	animation[ size ] = show ? distance : 0;
	animation[ position ] = show ? 0 : distance / 2;

	// Animate
	animate.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( !show ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});

};


/*!
 * jQuery UI Effects Drop 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/drop-effect/
 */


var effectDrop = $.effects.effect.drop = function( o, done ) {

	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "opacity", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		direction = o.direction || "left",
		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
		motion = ( direction === "up" || direction === "left" ) ? "pos" : "neg",
		animation = {
			opacity: show ? 1 : 0
		},
		distance;

	// Adjust
	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );

	distance = o.distance || el[ ref === "top" ? "outerHeight" : "outerWidth" ]( true ) / 2;

	if ( show ) {
		el
			.css( "opacity", 0 )
			.css( ref, motion === "pos" ? -distance : distance );
	}

	// Animation
	animation[ ref ] = ( show ?
		( motion === "pos" ? "+=" : "-=" ) :
		( motion === "pos" ? "-=" : "+=" ) ) +
		distance;

	// Animate
	el.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};


/*!
 * jQuery UI Effects Explode 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/explode-effect/
 */


var effectExplode = $.effects.effect.explode = function( o, done ) {

	var rows = o.pieces ? Math.round( Math.sqrt( o.pieces ) ) : 3,
		cells = rows,
		el = $( this ),
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",

		// show and then visibility:hidden the element before calculating offset
		offset = el.show().css( "visibility", "hidden" ).offset(),

		// width and height of a piece
		width = Math.ceil( el.outerWidth() / cells ),
		height = Math.ceil( el.outerHeight() / rows ),
		pieces = [],

		// loop
		i, j, left, top, mx, my;

	// children animate complete:
	function childComplete() {
		pieces.push( this );
		if ( pieces.length === rows * cells ) {
			animComplete();
		}
	}

	// clone the element for each row and cell.
	for ( i = 0; i < rows ; i++ ) { // ===>
		top = offset.top + i * height;
		my = i - ( rows - 1 ) / 2 ;

		for ( j = 0; j < cells ; j++ ) { // |||
			left = offset.left + j * width;
			mx = j - ( cells - 1 ) / 2 ;

			// Create a clone of the now hidden main element that will be absolute positioned
			// within a wrapper div off the -left and -top equal to size of our pieces
			el
				.clone()
				.appendTo( "body" )
				.wrap( "<div></div>" )
				.css({
					position: "absolute",
					visibility: "visible",
					left: -j * width,
					top: -i * height
				})

			// select the wrapper - make it overflow: hidden and absolute positioned based on
			// where the original was located +left and +top equal to the size of pieces
				.parent()
				.addClass( "ui-effects-explode" )
				.css({
					position: "absolute",
					overflow: "hidden",
					width: width,
					height: height,
					left: left + ( show ? mx * width : 0 ),
					top: top + ( show ? my * height : 0 ),
					opacity: show ? 0 : 1
				}).animate({
					left: left + ( show ? 0 : mx * width ),
					top: top + ( show ? 0 : my * height ),
					opacity: show ? 1 : 0
				}, o.duration || 500, o.easing, childComplete );
		}
	}

	function animComplete() {
		el.css({
			visibility: "visible"
		});
		$( pieces ).remove();
		if ( !show ) {
			el.hide();
		}
		done();
	}
};


/*!
 * jQuery UI Effects Fade 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fade-effect/
 */


var effectFade = $.effects.effect.fade = function( o, done ) {
	var el = $( this ),
		mode = $.effects.setMode( el, o.mode || "toggle" );

	el.animate({
		opacity: mode
	}, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: done
	});
};


/*!
 * jQuery UI Effects Fold 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fold-effect/
 */


var effectFold = $.effects.effect.fold = function( o, done ) {

	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		hide = mode === "hide",
		size = o.size || 15,
		percent = /([0-9]+)%/.exec( size ),
		horizFirst = !!o.horizFirst,
		widthFirst = show !== horizFirst,
		ref = widthFirst ? [ "width", "height" ] : [ "height", "width" ],
		duration = o.duration / 2,
		wrapper, distance,
		animation1 = {},
		animation2 = {};

	$.effects.save( el, props );
	el.show();

	// Create Wrapper
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});
	distance = widthFirst ?
		[ wrapper.width(), wrapper.height() ] :
		[ wrapper.height(), wrapper.width() ];

	if ( percent ) {
		size = parseInt( percent[ 1 ], 10 ) / 100 * distance[ hide ? 0 : 1 ];
	}
	if ( show ) {
		wrapper.css( horizFirst ? {
			height: 0,
			width: size
		} : {
			height: size,
			width: 0
		});
	}

	// Animation
	animation1[ ref[ 0 ] ] = show ? distance[ 0 ] : size;
	animation2[ ref[ 1 ] ] = show ? distance[ 1 ] : 0;

	// Animate
	wrapper
		.animate( animation1, duration, o.easing )
		.animate( animation2, duration, o.easing, function() {
			if ( hide ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});

};


/*!
 * jQuery UI Effects Highlight 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/highlight-effect/
 */


var effectHighlight = $.effects.effect.highlight = function( o, done ) {
	var elem = $( this ),
		props = [ "backgroundImage", "backgroundColor", "opacity" ],
		mode = $.effects.setMode( elem, o.mode || "show" ),
		animation = {
			backgroundColor: elem.css( "backgroundColor" )
		};

	if (mode === "hide") {
		animation.opacity = 0;
	}

	$.effects.save( elem, props );

	elem
		.show()
		.css({
			backgroundImage: "none",
			backgroundColor: o.color || "#ffff99"
		})
		.animate( animation, {
			queue: false,
			duration: o.duration,
			easing: o.easing,
			complete: function() {
				if ( mode === "hide" ) {
					elem.hide();
				}
				$.effects.restore( elem, props );
				done();
			}
		});
};


/*!
 * jQuery UI Effects Size 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/size-effect/
 */


var effectSize = $.effects.effect.size = function( o, done ) {

	// Create element
	var original, baseline, factor,
		el = $( this ),
		props0 = [ "position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity" ],

		// Always restore
		props1 = [ "position", "top", "bottom", "left", "right", "overflow", "opacity" ],

		// Copy for children
		props2 = [ "width", "height", "overflow" ],
		cProps = [ "fontSize" ],
		vProps = [ "borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom" ],
		hProps = [ "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight" ],

		// Set options
		mode = $.effects.setMode( el, o.mode || "effect" ),
		restore = o.restore || mode !== "effect",
		scale = o.scale || "both",
		origin = o.origin || [ "middle", "center" ],
		position = el.css( "position" ),
		props = restore ? props0 : props1,
		zero = {
			height: 0,
			width: 0,
			outerHeight: 0,
			outerWidth: 0
		};

	if ( mode === "show" ) {
		el.show();
	}
	original = {
		height: el.height(),
		width: el.width(),
		outerHeight: el.outerHeight(),
		outerWidth: el.outerWidth()
	};

	if ( o.mode === "toggle" && mode === "show" ) {
		el.from = o.to || zero;
		el.to = o.from || original;
	} else {
		el.from = o.from || ( mode === "show" ? zero : original );
		el.to = o.to || ( mode === "hide" ? zero : original );
	}

	// Set scaling factor
	factor = {
		from: {
			y: el.from.height / original.height,
			x: el.from.width / original.width
		},
		to: {
			y: el.to.height / original.height,
			x: el.to.width / original.width
		}
	};

	// Scale the css box
	if ( scale === "box" || scale === "both" ) {

		// Vertical props scaling
		if ( factor.from.y !== factor.to.y ) {
			props = props.concat( vProps );
			el.from = $.effects.setTransition( el, vProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, vProps, factor.to.y, el.to );
		}

		// Horizontal props scaling
		if ( factor.from.x !== factor.to.x ) {
			props = props.concat( hProps );
			el.from = $.effects.setTransition( el, hProps, factor.from.x, el.from );
			el.to = $.effects.setTransition( el, hProps, factor.to.x, el.to );
		}
	}

	// Scale the content
	if ( scale === "content" || scale === "both" ) {

		// Vertical props scaling
		if ( factor.from.y !== factor.to.y ) {
			props = props.concat( cProps ).concat( props2 );
			el.from = $.effects.setTransition( el, cProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, cProps, factor.to.y, el.to );
		}
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );
	el.css( "overflow", "hidden" ).css( el.from );

	// Adjust
	if (origin) { // Calculate baseline shifts
		baseline = $.effects.getBaseline( origin, original );
		el.from.top = ( original.outerHeight - el.outerHeight() ) * baseline.y;
		el.from.left = ( original.outerWidth - el.outerWidth() ) * baseline.x;
		el.to.top = ( original.outerHeight - el.to.outerHeight ) * baseline.y;
		el.to.left = ( original.outerWidth - el.to.outerWidth ) * baseline.x;
	}
	el.css( el.from ); // set top & left

	// Animate
	if ( scale === "content" || scale === "both" ) { // Scale the children

		// Add margins/font-size
		vProps = vProps.concat([ "marginTop", "marginBottom" ]).concat(cProps);
		hProps = hProps.concat([ "marginLeft", "marginRight" ]);
		props2 = props0.concat(vProps).concat(hProps);

		el.find( "*[width]" ).each( function() {
			var child = $( this ),
				c_original = {
					height: child.height(),
					width: child.width(),
					outerHeight: child.outerHeight(),
					outerWidth: child.outerWidth()
				};
			if (restore) {
				$.effects.save(child, props2);
			}

			child.from = {
				height: c_original.height * factor.from.y,
				width: c_original.width * factor.from.x,
				outerHeight: c_original.outerHeight * factor.from.y,
				outerWidth: c_original.outerWidth * factor.from.x
			};
			child.to = {
				height: c_original.height * factor.to.y,
				width: c_original.width * factor.to.x,
				outerHeight: c_original.height * factor.to.y,
				outerWidth: c_original.width * factor.to.x
			};

			// Vertical props scaling
			if ( factor.from.y !== factor.to.y ) {
				child.from = $.effects.setTransition( child, vProps, factor.from.y, child.from );
				child.to = $.effects.setTransition( child, vProps, factor.to.y, child.to );
			}

			// Horizontal props scaling
			if ( factor.from.x !== factor.to.x ) {
				child.from = $.effects.setTransition( child, hProps, factor.from.x, child.from );
				child.to = $.effects.setTransition( child, hProps, factor.to.x, child.to );
			}

			// Animate children
			child.css( child.from );
			child.animate( child.to, o.duration, o.easing, function() {

				// Restore children
				if ( restore ) {
					$.effects.restore( child, props2 );
				}
			});
		});
	}

	// Animate
	el.animate( el.to, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( el.to.opacity === 0 ) {
				el.css( "opacity", el.from.opacity );
			}
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			if ( !restore ) {

				// we need to calculate our new positioning based on the scaling
				if ( position === "static" ) {
					el.css({
						position: "relative",
						top: el.to.top,
						left: el.to.left
					});
				} else {
					$.each([ "top", "left" ], function( idx, pos ) {
						el.css( pos, function( _, str ) {
							var val = parseInt( str, 10 ),
								toRef = idx ? el.to.left : el.to.top;

							// if original was "auto", recalculate the new value from wrapper
							if ( str === "auto" ) {
								return toRef + "px";
							}

							return val + toRef + "px";
						});
					});
				}
			}

			$.effects.removeWrapper( el );
			done();
		}
	});

};


/*!
 * jQuery UI Effects Scale 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/scale-effect/
 */


var effectScale = $.effects.effect.scale = function( o, done ) {

	// Create element
	var el = $( this ),
		options = $.extend( true, {}, o ),
		mode = $.effects.setMode( el, o.mode || "effect" ),
		percent = parseInt( o.percent, 10 ) ||
			( parseInt( o.percent, 10 ) === 0 ? 0 : ( mode === "hide" ? 0 : 100 ) ),
		direction = o.direction || "both",
		origin = o.origin,
		original = {
			height: el.height(),
			width: el.width(),
			outerHeight: el.outerHeight(),
			outerWidth: el.outerWidth()
		},
		factor = {
			y: direction !== "horizontal" ? (percent / 100) : 1,
			x: direction !== "vertical" ? (percent / 100) : 1
		};

	// We are going to pass this effect to the size effect:
	options.effect = "size";
	options.queue = false;
	options.complete = done;

	// Set default origin and restore for show/hide
	if ( mode !== "effect" ) {
		options.origin = origin || [ "middle", "center" ];
		options.restore = true;
	}

	options.from = o.from || ( mode === "show" ? {
		height: 0,
		width: 0,
		outerHeight: 0,
		outerWidth: 0
	} : original );
	options.to = {
		height: original.height * factor.y,
		width: original.width * factor.x,
		outerHeight: original.outerHeight * factor.y,
		outerWidth: original.outerWidth * factor.x
	};

	// Fade option to support puff
	if ( options.fade ) {
		if ( mode === "show" ) {
			options.from.opacity = 0;
			options.to.opacity = 1;
		}
		if ( mode === "hide" ) {
			options.from.opacity = 1;
			options.to.opacity = 0;
		}
	}

	// Animate
	el.effect( options );

};


/*!
 * jQuery UI Effects Puff 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/puff-effect/
 */


var effectPuff = $.effects.effect.puff = function( o, done ) {
	var elem = $( this ),
		mode = $.effects.setMode( elem, o.mode || "hide" ),
		hide = mode === "hide",
		percent = parseInt( o.percent, 10 ) || 150,
		factor = percent / 100,
		original = {
			height: elem.height(),
			width: elem.width(),
			outerHeight: elem.outerHeight(),
			outerWidth: elem.outerWidth()
		};

	$.extend( o, {
		effect: "scale",
		queue: false,
		fade: true,
		mode: mode,
		complete: done,
		percent: hide ? percent : 100,
		from: hide ?
			original :
			{
				height: original.height * factor,
				width: original.width * factor,
				outerHeight: original.outerHeight * factor,
				outerWidth: original.outerWidth * factor
			}
	});

	elem.effect( o );
};


/*!
 * jQuery UI Effects Pulsate 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/pulsate-effect/
 */


var effectPulsate = $.effects.effect.pulsate = function( o, done ) {
	var elem = $( this ),
		mode = $.effects.setMode( elem, o.mode || "show" ),
		show = mode === "show",
		hide = mode === "hide",
		showhide = ( show || mode === "hide" ),

		// showing or hiding leaves of the "last" animation
		anims = ( ( o.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),
		duration = o.duration / anims,
		animateTo = 0,
		queue = elem.queue(),
		queuelen = queue.length,
		i;

	if ( show || !elem.is(":visible")) {
		elem.css( "opacity", 0 ).show();
		animateTo = 1;
	}

	// anims - 1 opacity "toggles"
	for ( i = 1; i < anims; i++ ) {
		elem.animate({
			opacity: animateTo
		}, duration, o.easing );
		animateTo = 1 - animateTo;
	}

	elem.animate({
		opacity: animateTo
	}, duration, o.easing);

	elem.queue(function() {
		if ( hide ) {
			elem.hide();
		}
		done();
	});

	// We just queued up "anims" animations, we need to put them next in the queue
	if ( queuelen > 1 ) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	elem.dequeue();
};


/*!
 * jQuery UI Effects Shake 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/shake-effect/
 */


var effectShake = $.effects.effect.shake = function( o, done ) {

	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "effect" ),
		direction = o.direction || "left",
		distance = o.distance || 20,
		times = o.times || 3,
		anims = times * 2 + 1,
		speed = Math.round( o.duration / anims ),
		ref = (direction === "up" || direction === "down") ? "top" : "left",
		positiveMotion = (direction === "up" || direction === "left"),
		animation = {},
		animation1 = {},
		animation2 = {},
		i,

		// we will need to re-assemble the queue to stack our animations in place
		queue = el.queue(),
		queuelen = queue.length;

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );

	// Animation
	animation[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance;
	animation1[ ref ] = ( positiveMotion ? "+=" : "-=" ) + distance * 2;
	animation2[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance * 2;

	// Animate
	el.animate( animation, speed, o.easing );

	// Shakes
	for ( i = 1; i < times; i++ ) {
		el.animate( animation1, speed, o.easing ).animate( animation2, speed, o.easing );
	}
	el
		.animate( animation1, speed, o.easing )
		.animate( animation, speed / 2, o.easing )
		.queue(function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});

	// inject all the animations we just queued to be first in line (after "inprogress")
	if ( queuelen > 1) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	el.dequeue();

};


/*!
 * jQuery UI Effects Slide 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 */


var effectSlide = $.effects.effect.slide = function( o, done ) {

	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "width", "height" ],
		mode = $.effects.setMode( el, o.mode || "show" ),
		show = mode === "show",
		direction = o.direction || "left",
		ref = (direction === "up" || direction === "down") ? "top" : "left",
		positiveMotion = (direction === "up" || direction === "left"),
		distance,
		animation = {};

	// Adjust
	$.effects.save( el, props );
	el.show();
	distance = o.distance || el[ ref === "top" ? "outerHeight" : "outerWidth" ]( true );

	$.effects.createWrapper( el ).css({
		overflow: "hidden"
	});

	if ( show ) {
		el.css( ref, positiveMotion ? (isNaN(distance) ? "-" + distance : -distance) : distance );
	}

	// Animation
	animation[ ref ] = ( show ?
		( positiveMotion ? "+=" : "-=") :
		( positiveMotion ? "-=" : "+=")) +
		distance;

	// Animate
	el.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};


/*!
 * jQuery UI Effects Transfer 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/transfer-effect/
 */


var effectTransfer = $.effects.effect.transfer = function( o, done ) {
	var elem = $( this ),
		target = $( o.to ),
		targetFixed = target.css( "position" ) === "fixed",
		body = $("body"),
		fixTop = targetFixed ? body.scrollTop() : 0,
		fixLeft = targetFixed ? body.scrollLeft() : 0,
		endPosition = target.offset(),
		animation = {
			top: endPosition.top - fixTop,
			left: endPosition.left - fixLeft,
			height: target.innerHeight(),
			width: target.innerWidth()
		},
		startPosition = elem.offset(),
		transfer = $( "<div class='ui-effects-transfer'></div>" )
			.appendTo( document.body )
			.addClass( o.className )
			.css({
				top: startPosition.top - fixTop,
				left: startPosition.left - fixLeft,
				height: elem.innerHeight(),
				width: elem.innerWidth(),
				position: targetFixed ? "fixed" : "absolute"
			})
			.animate( animation, o.duration, o.easing, function() {
				transfer.remove();
				done();
			});
};


/*!
 * jQuery UI Progressbar 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 */


var progressbar = $.widget( "ui.progressbar", {
	version: "1.11.3",
	options: {
		max: 100,
		value: 0,

		change: null,
		complete: null
	},

	min: 0,

	_create: function() {
		// Constrain initial value
		this.oldValue = this.options.value = this._constrainedValue();

		this.element
			.addClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
			.attr({
				// Only set static values, aria-valuenow and aria-valuemax are
				// set inside _refreshValue()
				role: "progressbar",
				"aria-valuemin": this.min
			});

		this.valueDiv = $( "<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>" )
			.appendTo( this.element );

		this._refreshValue();
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
			.removeAttr( "role" )
			.removeAttr( "aria-valuemin" )
			.removeAttr( "aria-valuemax" )
			.removeAttr( "aria-valuenow" );

		this.valueDiv.remove();
	},

	value: function( newValue ) {
		if ( newValue === undefined ) {
			return this.options.value;
		}

		this.options.value = this._constrainedValue( newValue );
		this._refreshValue();
	},

	_constrainedValue: function( newValue ) {
		if ( newValue === undefined ) {
			newValue = this.options.value;
		}

		this.indeterminate = newValue === false;

		// sanitize value
		if ( typeof newValue !== "number" ) {
			newValue = 0;
		}

		return this.indeterminate ? false :
			Math.min( this.options.max, Math.max( this.min, newValue ) );
	},

	_setOptions: function( options ) {
		// Ensure "value" option is set after other values (like max)
		var value = options.value;
		delete options.value;

		this._super( options );

		this.options.value = this._constrainedValue( value );
		this._refreshValue();
	},

	_setOption: function( key, value ) {
		if ( key === "max" ) {
			// Don't allow a max less than min
			value = Math.max( this.min, value );
		}
		if ( key === "disabled" ) {
			this.element
				.toggleClass( "ui-state-disabled", !!value )
				.attr( "aria-disabled", value );
		}
		this._super( key, value );
	},

	_percentage: function() {
		return this.indeterminate ? 100 : 100 * ( this.options.value - this.min ) / ( this.options.max - this.min );
	},

	_refreshValue: function() {
		var value = this.options.value,
			percentage = this._percentage();

		this.valueDiv
			.toggle( this.indeterminate || value > this.min )
			.toggleClass( "ui-corner-right", value === this.options.max )
			.width( percentage.toFixed(0) + "%" );

		this.element.toggleClass( "ui-progressbar-indeterminate", this.indeterminate );

		if ( this.indeterminate ) {
			this.element.removeAttr( "aria-valuenow" );
			if ( !this.overlayDiv ) {
				this.overlayDiv = $( "<div class='ui-progressbar-overlay'></div>" ).appendTo( this.valueDiv );
			}
		} else {
			this.element.attr({
				"aria-valuemax": this.options.max,
				"aria-valuenow": value
			});
			if ( this.overlayDiv ) {
				this.overlayDiv.remove();
				this.overlayDiv = null;
			}
		}

		if ( this.oldValue !== value ) {
			this.oldValue = value;
			this._trigger( "change" );
		}
		if ( value === this.options.max ) {
			this._trigger( "complete" );
		}
	}
});


/*!
 * jQuery UI Selectable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 */


var selectable = $.widget("ui.selectable", $.ui.mouse, {
	version: "1.11.3",
	options: {
		appendTo: "body",
		autoRefresh: true,
		distance: 0,
		filter: "*",
		tolerance: "touch",

		// callbacks
		selected: null,
		selecting: null,
		start: null,
		stop: null,
		unselected: null,
		unselecting: null
	},
	_create: function() {
		var selectees,
			that = this;

		this.element.addClass("ui-selectable");

		this.dragged = false;

		// cache selectee children based on filter
		this.refresh = function() {
			selectees = $(that.options.filter, that.element[0]);
			selectees.addClass("ui-selectee");
			selectees.each(function() {
				var $this = $(this),
					pos = $this.offset();
				$.data(this, "selectable-item", {
					element: this,
					$element: $this,
					left: pos.left,
					top: pos.top,
					right: pos.left + $this.outerWidth(),
					bottom: pos.top + $this.outerHeight(),
					startselected: false,
					selected: $this.hasClass("ui-selected"),
					selecting: $this.hasClass("ui-selecting"),
					unselecting: $this.hasClass("ui-unselecting")
				});
			});
		};
		this.refresh();

		this.selectees = selectees.addClass("ui-selectee");

		this._mouseInit();

		this.helper = $("<div class='ui-selectable-helper'></div>");
	},

	_destroy: function() {
		this.selectees
			.removeClass("ui-selectee")
			.removeData("selectable-item");
		this.element
			.removeClass("ui-selectable ui-selectable-disabled");
		this._mouseDestroy();
	},

	_mouseStart: function(event) {
		var that = this,
			options = this.options;

		this.opos = [ event.pageX, event.pageY ];

		if (this.options.disabled) {
			return;
		}

		this.selectees = $(options.filter, this.element[0]);

		this._trigger("start", event);

		$(options.appendTo).append(this.helper);
		// position helper (lasso)
		this.helper.css({
			"left": event.pageX,
			"top": event.pageY,
			"width": 0,
			"height": 0
		});

		if (options.autoRefresh) {
			this.refresh();
		}

		this.selectees.filter(".ui-selected").each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.startselected = true;
			if (!event.metaKey && !event.ctrlKey) {
				selectee.$element.removeClass("ui-selected");
				selectee.selected = false;
				selectee.$element.addClass("ui-unselecting");
				selectee.unselecting = true;
				// selectable UNSELECTING callback
				that._trigger("unselecting", event, {
					unselecting: selectee.element
				});
			}
		});

		$(event.target).parents().addBack().each(function() {
			var doSelect,
				selectee = $.data(this, "selectable-item");
			if (selectee) {
				doSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass("ui-selected");
				selectee.$element
					.removeClass(doSelect ? "ui-unselecting" : "ui-selected")
					.addClass(doSelect ? "ui-selecting" : "ui-unselecting");
				selectee.unselecting = !doSelect;
				selectee.selecting = doSelect;
				selectee.selected = doSelect;
				// selectable (UN)SELECTING callback
				if (doSelect) {
					that._trigger("selecting", event, {
						selecting: selectee.element
					});
				} else {
					that._trigger("unselecting", event, {
						unselecting: selectee.element
					});
				}
				return false;
			}
		});

	},

	_mouseDrag: function(event) {

		this.dragged = true;

		if (this.options.disabled) {
			return;
		}

		var tmp,
			that = this,
			options = this.options,
			x1 = this.opos[0],
			y1 = this.opos[1],
			x2 = event.pageX,
			y2 = event.pageY;

		if (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }
		if (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }
		this.helper.css({ left: x1, top: y1, width: x2 - x1, height: y2 - y1 });

		this.selectees.each(function() {
			var selectee = $.data(this, "selectable-item"),
				hit = false;

			//prevent helper from being selected if appendTo: selectable
			if (!selectee || selectee.element === that.element[0]) {
				return;
			}

			if (options.tolerance === "touch") {
				hit = ( !(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1) );
			} else if (options.tolerance === "fit") {
				hit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);
			}

			if (hit) {
				// SELECT
				if (selectee.selected) {
					selectee.$element.removeClass("ui-selected");
					selectee.selected = false;
				}
				if (selectee.unselecting) {
					selectee.$element.removeClass("ui-unselecting");
					selectee.unselecting = false;
				}
				if (!selectee.selecting) {
					selectee.$element.addClass("ui-selecting");
					selectee.selecting = true;
					// selectable SELECTING callback
					that._trigger("selecting", event, {
						selecting: selectee.element
					});
				}
			} else {
				// UNSELECT
				if (selectee.selecting) {
					if ((event.metaKey || event.ctrlKey) && selectee.startselected) {
						selectee.$element.removeClass("ui-selecting");
						selectee.selecting = false;
						selectee.$element.addClass("ui-selected");
						selectee.selected = true;
					} else {
						selectee.$element.removeClass("ui-selecting");
						selectee.selecting = false;
						if (selectee.startselected) {
							selectee.$element.addClass("ui-unselecting");
							selectee.unselecting = true;
						}
						// selectable UNSELECTING callback
						that._trigger("unselecting", event, {
							unselecting: selectee.element
						});
					}
				}
				if (selectee.selected) {
					if (!event.metaKey && !event.ctrlKey && !selectee.startselected) {
						selectee.$element.removeClass("ui-selected");
						selectee.selected = false;

						selectee.$element.addClass("ui-unselecting");
						selectee.unselecting = true;
						// selectable UNSELECTING callback
						that._trigger("unselecting", event, {
							unselecting: selectee.element
						});
					}
				}
			}
		});

		return false;
	},

	_mouseStop: function(event) {
		var that = this;

		this.dragged = false;

		$(".ui-unselecting", this.element[0]).each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.$element.removeClass("ui-unselecting");
			selectee.unselecting = false;
			selectee.startselected = false;
			that._trigger("unselected", event, {
				unselected: selectee.element
			});
		});
		$(".ui-selecting", this.element[0]).each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.$element.removeClass("ui-selecting").addClass("ui-selected");
			selectee.selecting = false;
			selectee.selected = true;
			selectee.startselected = true;
			that._trigger("selected", event, {
				selected: selectee.element
			});
		});
		this._trigger("stop", event);

		this.helper.remove();

		return false;
	}

});


/*!
 * jQuery UI Selectmenu 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectmenu
 */


var selectmenu = $.widget( "ui.selectmenu", {
	version: "1.11.3",
	defaultElement: "<select>",
	options: {
		appendTo: null,
		disabled: null,
		icons: {
			button: "ui-icon-triangle-1-s"
		},
		position: {
			my: "left top",
			at: "left bottom",
			collision: "none"
		},
		width: null,

		// callbacks
		change: null,
		close: null,
		focus: null,
		open: null,
		select: null
	},

	_create: function() {
		var selectmenuId = this.element.uniqueId().attr( "id" );
		this.ids = {
			element: selectmenuId,
			button: selectmenuId + "-button",
			menu: selectmenuId + "-menu"
		};

		this._drawButton();
		this._drawMenu();

		if ( this.options.disabled ) {
			this.disable();
		}
	},

	_drawButton: function() {
		var that = this;

		// Associate existing label with the new button
		this.label = $( "label[for='" + this.ids.element + "']" ).attr( "for", this.ids.button );
		this._on( this.label, {
			click: function( event ) {
				this.button.focus();
				event.preventDefault();
			}
		});

		// Hide original select element
		this.element.hide();

		// Create button
		this.button = $( "<span>", {
			"class": "ui-selectmenu-button ui-widget ui-state-default ui-corner-all",
			tabindex: this.options.disabled ? -1 : 0,
			id: this.ids.button,
			role: "combobox",
			"aria-expanded": "false",
			"aria-autocomplete": "list",
			"aria-owns": this.ids.menu,
			"aria-haspopup": "true"
		})
			.insertAfter( this.element );

		$( "<span>", {
			"class": "ui-icon " + this.options.icons.button
		})
			.prependTo( this.button );

		this.buttonText = $( "<span>", {
			"class": "ui-selectmenu-text"
		})
			.appendTo( this.button );

		this._setText( this.buttonText, this.element.find( "option:selected" ).text() );
		this._resizeButton();

		this._on( this.button, this._buttonEvents );
		this.button.one( "focusin", function() {

			// Delay rendering the menu items until the button receives focus.
			// The menu may have already been rendered via a programmatic open.
			if ( !that.menuItems ) {
				that._refreshMenu();
			}
		});
		this._hoverable( this.button );
		this._focusable( this.button );
	},

	_drawMenu: function() {
		var that = this;

		// Create menu
		this.menu = $( "<ul>", {
			"aria-hidden": "true",
			"aria-labelledby": this.ids.button,
			id: this.ids.menu
		});

		// Wrap menu
		this.menuWrap = $( "<div>", {
			"class": "ui-selectmenu-menu ui-front"
		})
			.append( this.menu )
			.appendTo( this._appendTo() );

		// Initialize menu widget
		this.menuInstance = this.menu
			.menu({
				role: "listbox",
				select: function( event, ui ) {
					event.preventDefault();

					// support: IE8
					// If the item was selected via a click, the text selection
					// will be destroyed in IE
					that._setSelection();

					that._select( ui.item.data( "ui-selectmenu-item" ), event );
				},
				focus: function( event, ui ) {
					var item = ui.item.data( "ui-selectmenu-item" );

					// Prevent inital focus from firing and check if its a newly focused item
					if ( that.focusIndex != null && item.index !== that.focusIndex ) {
						that._trigger( "focus", event, { item: item } );
						if ( !that.isOpen ) {
							that._select( item, event );
						}
					}
					that.focusIndex = item.index;

					that.button.attr( "aria-activedescendant",
						that.menuItems.eq( item.index ).attr( "id" ) );
				}
			})
			.menu( "instance" );

		// Adjust menu styles to dropdown
		this.menu
			.addClass( "ui-corner-bottom" )
			.removeClass( "ui-corner-all" );

		// Don't close the menu on mouseleave
		this.menuInstance._off( this.menu, "mouseleave" );

		// Cancel the menu's collapseAll on document click
		this.menuInstance._closeOnDocumentClick = function() {
			return false;
		};

		// Selects often contain empty items, but never contain dividers
		this.menuInstance._isDivider = function() {
			return false;
		};
	},

	refresh: function() {
		this._refreshMenu();
		this._setText( this.buttonText, this._getSelectedItem().text() );
		if ( !this.options.width ) {
			this._resizeButton();
		}
	},

	_refreshMenu: function() {
		this.menu.empty();

		var item,
			options = this.element.find( "option" );

		if ( !options.length ) {
			return;
		}

		this._parseOptions( options );
		this._renderMenu( this.menu, this.items );

		this.menuInstance.refresh();
		this.menuItems = this.menu.find( "li" ).not( ".ui-selectmenu-optgroup" );

		item = this._getSelectedItem();

		// Update the menu to have the correct item focused
		this.menuInstance.focus( null, item );
		this._setAria( item.data( "ui-selectmenu-item" ) );

		// Set disabled state
		this._setOption( "disabled", this.element.prop( "disabled" ) );
	},

	open: function( event ) {
		if ( this.options.disabled ) {
			return;
		}

		// If this is the first time the menu is being opened, render the items
		if ( !this.menuItems ) {
			this._refreshMenu();
		} else {

			// Menu clears focus on close, reset focus to selected item
			this.menu.find( ".ui-state-focus" ).removeClass( "ui-state-focus" );
			this.menuInstance.focus( null, this._getSelectedItem() );
		}

		this.isOpen = true;
		this._toggleAttr();
		this._resizeMenu();
		this._position();

		this._on( this.document, this._documentClick );

		this._trigger( "open", event );
	},

	_position: function() {
		this.menuWrap.position( $.extend( { of: this.button }, this.options.position ) );
	},

	close: function( event ) {
		if ( !this.isOpen ) {
			return;
		}

		this.isOpen = false;
		this._toggleAttr();

		this.range = null;
		this._off( this.document );

		this._trigger( "close", event );
	},

	widget: function() {
		return this.button;
	},

	menuWidget: function() {
		return this.menu;
	},

	_renderMenu: function( ul, items ) {
		var that = this,
			currentOptgroup = "";

		$.each( items, function( index, item ) {
			if ( item.optgroup !== currentOptgroup ) {
				$( "<li>", {
					"class": "ui-selectmenu-optgroup ui-menu-divider" +
						( item.element.parent( "optgroup" ).prop( "disabled" ) ?
							" ui-state-disabled" :
							"" ),
					text: item.optgroup
				})
					.appendTo( ul );

				currentOptgroup = item.optgroup;
			}

			that._renderItemData( ul, item );
		});
	},

	_renderItemData: function( ul, item ) {
		return this._renderItem( ul, item ).data( "ui-selectmenu-item", item );
	},

	_renderItem: function( ul, item ) {
		var li = $( "<li>" );

		if ( item.disabled ) {
			li.addClass( "ui-state-disabled" );
		}
		this._setText( li, item.label );

		return li.appendTo( ul );
	},

	_setText: function( element, value ) {
		if ( value ) {
			element.text( value );
		} else {
			element.html( "&#160;" );
		}
	},

	_move: function( direction, event ) {
		var item, next,
			filter = ".ui-menu-item";

		if ( this.isOpen ) {
			item = this.menuItems.eq( this.focusIndex );
		} else {
			item = this.menuItems.eq( this.element[ 0 ].selectedIndex );
			filter += ":not(.ui-state-disabled)";
		}

		if ( direction === "first" || direction === "last" ) {
			next = item[ direction === "first" ? "prevAll" : "nextAll" ]( filter ).eq( -1 );
		} else {
			next = item[ direction + "All" ]( filter ).eq( 0 );
		}

		if ( next.length ) {
			this.menuInstance.focus( event, next );
		}
	},

	_getSelectedItem: function() {
		return this.menuItems.eq( this.element[ 0 ].selectedIndex );
	},

	_toggle: function( event ) {
		this[ this.isOpen ? "close" : "open" ]( event );
	},

	_setSelection: function() {
		var selection;

		if ( !this.range ) {
			return;
		}

		if ( window.getSelection ) {
			selection = window.getSelection();
			selection.removeAllRanges();
			selection.addRange( this.range );

		// support: IE8
		} else {
			this.range.select();
		}

		// support: IE
		// Setting the text selection kills the button focus in IE, but
		// restoring the focus doesn't kill the selection.
		this.button.focus();
	},

	_documentClick: {
		mousedown: function( event ) {
			if ( !this.isOpen ) {
				return;
			}

			if ( !$( event.target ).closest( ".ui-selectmenu-menu, #" + this.ids.button ).length ) {
				this.close( event );
			}
		}
	},

	_buttonEvents: {

		// Prevent text selection from being reset when interacting with the selectmenu (#10144)
		mousedown: function() {
			var selection;

			if ( window.getSelection ) {
				selection = window.getSelection();
				if ( selection.rangeCount ) {
					this.range = selection.getRangeAt( 0 );
				}

			// support: IE8
			} else {
				this.range = document.selection.createRange();
			}
		},

		click: function( event ) {
			this._setSelection();
			this._toggle( event );
		},

		keydown: function( event ) {
			var preventDefault = true;
			switch ( event.keyCode ) {
				case $.ui.keyCode.TAB:
				case $.ui.keyCode.ESCAPE:
					this.close( event );
					preventDefault = false;
					break;
				case $.ui.keyCode.ENTER:
					if ( this.isOpen ) {
						this._selectFocusedItem( event );
					}
					break;
				case $.ui.keyCode.UP:
					if ( event.altKey ) {
						this._toggle( event );
					} else {
						this._move( "prev", event );
					}
					break;
				case $.ui.keyCode.DOWN:
					if ( event.altKey ) {
						this._toggle( event );
					} else {
						this._move( "next", event );
					}
					break;
				case $.ui.keyCode.SPACE:
					if ( this.isOpen ) {
						this._selectFocusedItem( event );
					} else {
						this._toggle( event );
					}
					break;
				case $.ui.keyCode.LEFT:
					this._move( "prev", event );
					break;
				case $.ui.keyCode.RIGHT:
					this._move( "next", event );
					break;
				case $.ui.keyCode.HOME:
				case $.ui.keyCode.PAGE_UP:
					this._move( "first", event );
					break;
				case $.ui.keyCode.END:
				case $.ui.keyCode.PAGE_DOWN:
					this._move( "last", event );
					break;
				default:
					this.menu.trigger( event );
					preventDefault = false;
			}

			if ( preventDefault ) {
				event.preventDefault();
			}
		}
	},

	_selectFocusedItem: function( event ) {
		var item = this.menuItems.eq( this.focusIndex );
		if ( !item.hasClass( "ui-state-disabled" ) ) {
			this._select( item.data( "ui-selectmenu-item" ), event );
		}
	},

	_select: function( item, event ) {
		var oldIndex = this.element[ 0 ].selectedIndex;

		// Change native select element
		this.element[ 0 ].selectedIndex = item.index;
		this._setText( this.buttonText, item.label );
		this._setAria( item );
		this._trigger( "select", event, { item: item } );

		if ( item.index !== oldIndex ) {
			this._trigger( "change", event, { item: item } );
		}

		this.close( event );
	},

	_setAria: function( item ) {
		var id = this.menuItems.eq( item.index ).attr( "id" );

		this.button.attr({
			"aria-labelledby": id,
			"aria-activedescendant": id
		});
		this.menu.attr( "aria-activedescendant", id );
	},

	_setOption: function( key, value ) {
		if ( key === "icons" ) {
			this.button.find( "span.ui-icon" )
				.removeClass( this.options.icons.button )
				.addClass( value.button );
		}

		this._super( key, value );

		if ( key === "appendTo" ) {
			this.menuWrap.appendTo( this._appendTo() );
		}

		if ( key === "disabled" ) {
			this.menuInstance.option( "disabled", value );
			this.button
				.toggleClass( "ui-state-disabled", value )
				.attr( "aria-disabled", value );

			this.element.prop( "disabled", value );
			if ( value ) {
				this.button.attr( "tabindex", -1 );
				this.close();
			} else {
				this.button.attr( "tabindex", 0 );
			}
		}

		if ( key === "width" ) {
			this._resizeButton();
		}
	},

	_appendTo: function() {
		var element = this.options.appendTo;

		if ( element ) {
			element = element.jquery || element.nodeType ?
				$( element ) :
				this.document.find( element ).eq( 0 );
		}

		if ( !element || !element[ 0 ] ) {
			element = this.element.closest( ".ui-front" );
		}

		if ( !element.length ) {
			element = this.document[ 0 ].body;
		}

		return element;
	},

	_toggleAttr: function() {
		this.button
			.toggleClass( "ui-corner-top", this.isOpen )
			.toggleClass( "ui-corner-all", !this.isOpen )
			.attr( "aria-expanded", this.isOpen );
		this.menuWrap.toggleClass( "ui-selectmenu-open", this.isOpen );
		this.menu.attr( "aria-hidden", !this.isOpen );
	},

	_resizeButton: function() {
		var width = this.options.width;

		if ( !width ) {
			width = this.element.show().outerWidth();
			this.element.hide();
		}

		this.button.outerWidth( width );
	},

	_resizeMenu: function() {
		this.menu.outerWidth( Math.max(
			this.button.outerWidth(),

			// support: IE10
			// IE10 wraps long text (possibly a rounding bug)
			// so we add 1px to avoid the wrapping
			this.menu.width( "" ).outerWidth() + 1
		) );
	},

	_getCreateOptions: function() {
		return { disabled: this.element.prop( "disabled" ) };
	},

	_parseOptions: function( options ) {
		var data = [];
		options.each(function( index, item ) {
			var option = $( item ),
				optgroup = option.parent( "optgroup" );
			data.push({
				element: option,
				index: index,
				value: option.val(),
				label: option.text(),
				optgroup: optgroup.attr( "label" ) || "",
				disabled: optgroup.prop( "disabled" ) || option.prop( "disabled" )
			});
		});
		this.items = data;
	},

	_destroy: function() {
		this.menuWrap.remove();
		this.button.remove();
		this.element.show();
		this.element.removeUniqueId();
		this.label.attr( "for", this.ids.element );
	}
});


/*!
 * jQuery UI Slider 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */


var slider = $.widget( "ui.slider", $.ui.mouse, {
	version: "1.11.3",
	widgetEventPrefix: "slide",

	options: {
		animate: false,
		distance: 0,
		max: 100,
		min: 0,
		orientation: "horizontal",
		range: false,
		step: 1,
		value: 0,
		values: null,

		// callbacks
		change: null,
		slide: null,
		start: null,
		stop: null
	},

	// number of pages in a slider
	// (how many times can you page up/down to go through the whole range)
	numPages: 5,

	_create: function() {
		this._keySliding = false;
		this._mouseSliding = false;
		this._animateOff = true;
		this._handleIndex = null;
		this._detectOrientation();
		this._mouseInit();
		this._calculateNewMax();

		this.element
			.addClass( "ui-slider" +
				" ui-slider-" + this.orientation +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all");

		this._refresh();
		this._setOption( "disabled", this.options.disabled );

		this._animateOff = false;
	},

	_refresh: function() {
		this._createRange();
		this._createHandles();
		this._setupEvents();
		this._refreshValue();
	},

	_createHandles: function() {
		var i, handleCount,
			options = this.options,
			existingHandles = this.element.find( ".ui-slider-handle" ).addClass( "ui-state-default ui-corner-all" ),
			handle = "<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",
			handles = [];

		handleCount = ( options.values && options.values.length ) || 1;

		if ( existingHandles.length > handleCount ) {
			existingHandles.slice( handleCount ).remove();
			existingHandles = existingHandles.slice( 0, handleCount );
		}

		for ( i = existingHandles.length; i < handleCount; i++ ) {
			handles.push( handle );
		}

		this.handles = existingHandles.add( $( handles.join( "" ) ).appendTo( this.element ) );

		this.handle = this.handles.eq( 0 );

		this.handles.each(function( i ) {
			$( this ).data( "ui-slider-handle-index", i );
		});
	},

	_createRange: function() {
		var options = this.options,
			classes = "";

		if ( options.range ) {
			if ( options.range === true ) {
				if ( !options.values ) {
					options.values = [ this._valueMin(), this._valueMin() ];
				} else if ( options.values.length && options.values.length !== 2 ) {
					options.values = [ options.values[0], options.values[0] ];
				} else if ( $.isArray( options.values ) ) {
					options.values = options.values.slice(0);
				}
			}

			if ( !this.range || !this.range.length ) {
				this.range = $( "<div></div>" )
					.appendTo( this.element );

				classes = "ui-slider-range" +
				// note: this isn't the most fittingly semantic framework class for this element,
				// but worked best visually with a variety of themes
				" ui-widget-header ui-corner-all";
			} else {
				this.range.removeClass( "ui-slider-range-min ui-slider-range-max" )
					// Handle range switching from true to min/max
					.css({
						"left": "",
						"bottom": ""
					});
			}

			this.range.addClass( classes +
				( ( options.range === "min" || options.range === "max" ) ? " ui-slider-range-" + options.range : "" ) );
		} else {
			if ( this.range ) {
				this.range.remove();
			}
			this.range = null;
		}
	},

	_setupEvents: function() {
		this._off( this.handles );
		this._on( this.handles, this._handleEvents );
		this._hoverable( this.handles );
		this._focusable( this.handles );
	},

	_destroy: function() {
		this.handles.remove();
		if ( this.range ) {
			this.range.remove();
		}

		this.element
			.removeClass( "ui-slider" +
				" ui-slider-horizontal" +
				" ui-slider-vertical" +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all" );

		this._mouseDestroy();
	},

	_mouseCapture: function( event ) {
		var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
			that = this,
			o = this.options;

		if ( o.disabled ) {
			return false;
		}

		this.elementSize = {
			width: this.element.outerWidth(),
			height: this.element.outerHeight()
		};
		this.elementOffset = this.element.offset();

		position = { x: event.pageX, y: event.pageY };
		normValue = this._normValueFromMouse( position );
		distance = this._valueMax() - this._valueMin() + 1;
		this.handles.each(function( i ) {
			var thisDistance = Math.abs( normValue - that.values(i) );
			if (( distance > thisDistance ) ||
				( distance === thisDistance &&
					(i === that._lastChangedValue || that.values(i) === o.min ))) {
				distance = thisDistance;
				closestHandle = $( this );
				index = i;
			}
		});

		allowed = this._start( event, index );
		if ( allowed === false ) {
			return false;
		}
		this._mouseSliding = true;

		this._handleIndex = index;

		closestHandle
			.addClass( "ui-state-active" )
			.focus();

		offset = closestHandle.offset();
		mouseOverHandle = !$( event.target ).parents().addBack().is( ".ui-slider-handle" );
		this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {
			left: event.pageX - offset.left - ( closestHandle.width() / 2 ),
			top: event.pageY - offset.top -
				( closestHandle.height() / 2 ) -
				( parseInt( closestHandle.css("borderTopWidth"), 10 ) || 0 ) -
				( parseInt( closestHandle.css("borderBottomWidth"), 10 ) || 0) +
				( parseInt( closestHandle.css("marginTop"), 10 ) || 0)
		};

		if ( !this.handles.hasClass( "ui-state-hover" ) ) {
			this._slide( event, index, normValue );
		}
		this._animateOff = true;
		return true;
	},

	_mouseStart: function() {
		return true;
	},

	_mouseDrag: function( event ) {
		var position = { x: event.pageX, y: event.pageY },
			normValue = this._normValueFromMouse( position );

		this._slide( event, this._handleIndex, normValue );

		return false;
	},

	_mouseStop: function( event ) {
		this.handles.removeClass( "ui-state-active" );
		this._mouseSliding = false;

		this._stop( event, this._handleIndex );
		this._change( event, this._handleIndex );

		this._handleIndex = null;
		this._clickOffset = null;
		this._animateOff = false;

		return false;
	},

	_detectOrientation: function() {
		this.orientation = ( this.options.orientation === "vertical" ) ? "vertical" : "horizontal";
	},

	_normValueFromMouse: function( position ) {
		var pixelTotal,
			pixelMouse,
			percentMouse,
			valueTotal,
			valueMouse;

		if ( this.orientation === "horizontal" ) {
			pixelTotal = this.elementSize.width;
			pixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );
		} else {
			pixelTotal = this.elementSize.height;
			pixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );
		}

		percentMouse = ( pixelMouse / pixelTotal );
		if ( percentMouse > 1 ) {
			percentMouse = 1;
		}
		if ( percentMouse < 0 ) {
			percentMouse = 0;
		}
		if ( this.orientation === "vertical" ) {
			percentMouse = 1 - percentMouse;
		}

		valueTotal = this._valueMax() - this._valueMin();
		valueMouse = this._valueMin() + percentMouse * valueTotal;

		return this._trimAlignValue( valueMouse );
	},

	_start: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}
		return this._trigger( "start", event, uiHash );
	},

	_slide: function( event, index, newVal ) {
		var otherVal,
			newValues,
			allowed;

		if ( this.options.values && this.options.values.length ) {
			otherVal = this.values( index ? 0 : 1 );

			if ( ( this.options.values.length === 2 && this.options.range === true ) &&
					( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )
				) {
				newVal = otherVal;
			}

			if ( newVal !== this.values( index ) ) {
				newValues = this.values();
				newValues[ index ] = newVal;
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal,
					values: newValues
				} );
				otherVal = this.values( index ? 0 : 1 );
				if ( allowed !== false ) {
					this.values( index, newVal );
				}
			}
		} else {
			if ( newVal !== this.value() ) {
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal
				} );
				if ( allowed !== false ) {
					this.value( newVal );
				}
			}
		}
	},

	_stop: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}

		this._trigger( "stop", event, uiHash );
	},

	_change: function( event, index ) {
		if ( !this._keySliding && !this._mouseSliding ) {
			var uiHash = {
				handle: this.handles[ index ],
				value: this.value()
			};
			if ( this.options.values && this.options.values.length ) {
				uiHash.value = this.values( index );
				uiHash.values = this.values();
			}

			//store the last changed value index for reference when handles overlap
			this._lastChangedValue = index;

			this._trigger( "change", event, uiHash );
		}
	},

	value: function( newValue ) {
		if ( arguments.length ) {
			this.options.value = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, 0 );
			return;
		}

		return this._value();
	},

	values: function( index, newValue ) {
		var vals,
			newValues,
			i;

		if ( arguments.length > 1 ) {
			this.options.values[ index ] = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, index );
			return;
		}

		if ( arguments.length ) {
			if ( $.isArray( arguments[ 0 ] ) ) {
				vals = this.options.values;
				newValues = arguments[ 0 ];
				for ( i = 0; i < vals.length; i += 1 ) {
					vals[ i ] = this._trimAlignValue( newValues[ i ] );
					this._change( null, i );
				}
				this._refreshValue();
			} else {
				if ( this.options.values && this.options.values.length ) {
					return this._values( index );
				} else {
					return this.value();
				}
			}
		} else {
			return this._values();
		}
	},

	_setOption: function( key, value ) {
		var i,
			valsLength = 0;

		if ( key === "range" && this.options.range === true ) {
			if ( value === "min" ) {
				this.options.value = this._values( 0 );
				this.options.values = null;
			} else if ( value === "max" ) {
				this.options.value = this._values( this.options.values.length - 1 );
				this.options.values = null;
			}
		}

		if ( $.isArray( this.options.values ) ) {
			valsLength = this.options.values.length;
		}

		if ( key === "disabled" ) {
			this.element.toggleClass( "ui-state-disabled", !!value );
		}

		this._super( key, value );

		switch ( key ) {
			case "orientation":
				this._detectOrientation();
				this.element
					.removeClass( "ui-slider-horizontal ui-slider-vertical" )
					.addClass( "ui-slider-" + this.orientation );
				this._refreshValue();

				// Reset positioning from previous orientation
				this.handles.css( value === "horizontal" ? "bottom" : "left", "" );
				break;
			case "value":
				this._animateOff = true;
				this._refreshValue();
				this._change( null, 0 );
				this._animateOff = false;
				break;
			case "values":
				this._animateOff = true;
				this._refreshValue();
				for ( i = 0; i < valsLength; i += 1 ) {
					this._change( null, i );
				}
				this._animateOff = false;
				break;
			case "step":
			case "min":
			case "max":
				this._animateOff = true;
				this._calculateNewMax();
				this._refreshValue();
				this._animateOff = false;
				break;
			case "range":
				this._animateOff = true;
				this._refresh();
				this._animateOff = false;
				break;
		}
	},

	//internal value getter
	// _value() returns value trimmed by min and max, aligned by step
	_value: function() {
		var val = this.options.value;
		val = this._trimAlignValue( val );

		return val;
	},

	//internal values getter
	// _values() returns array of values trimmed by min and max, aligned by step
	// _values( index ) returns single value trimmed by min and max, aligned by step
	_values: function( index ) {
		var val,
			vals,
			i;

		if ( arguments.length ) {
			val = this.options.values[ index ];
			val = this._trimAlignValue( val );

			return val;
		} else if ( this.options.values && this.options.values.length ) {
			// .slice() creates a copy of the array
			// this copy gets trimmed by min and max and then returned
			vals = this.options.values.slice();
			for ( i = 0; i < vals.length; i += 1) {
				vals[ i ] = this._trimAlignValue( vals[ i ] );
			}

			return vals;
		} else {
			return [];
		}
	},

	// returns the step-aligned value that val is closest to, between (inclusive) min and max
	_trimAlignValue: function( val ) {
		if ( val <= this._valueMin() ) {
			return this._valueMin();
		}
		if ( val >= this._valueMax() ) {
			return this._valueMax();
		}
		var step = ( this.options.step > 0 ) ? this.options.step : 1,
			valModStep = (val - this._valueMin()) % step,
			alignValue = val - valModStep;

		if ( Math.abs(valModStep) * 2 >= step ) {
			alignValue += ( valModStep > 0 ) ? step : ( -step );
		}

		// Since JavaScript has problems with large floats, round
		// the final value to 5 digits after the decimal point (see #4124)
		return parseFloat( alignValue.toFixed(5) );
	},

	_calculateNewMax: function() {
		var max = this.options.max,
			min = this._valueMin(),
			step = this.options.step,
			aboveMin = Math.floor( ( max - min ) / step ) * step;
		max = aboveMin + min;
		this.max = parseFloat( max.toFixed( this._precision() ) );
	},

	_precision: function() {
		var precision = this._precisionOf( this.options.step );
		if ( this.options.min !== null ) {
			precision = Math.max( precision, this._precisionOf( this.options.min ) );
		}
		return precision;
	},

	_precisionOf: function( num ) {
		var str = num.toString(),
			decimal = str.indexOf( "." );
		return decimal === -1 ? 0 : str.length - decimal - 1;
	},

	_valueMin: function() {
		return this.options.min;
	},

	_valueMax: function() {
		return this.max;
	},

	_refreshValue: function() {
		var lastValPercent, valPercent, value, valueMin, valueMax,
			oRange = this.options.range,
			o = this.options,
			that = this,
			animate = ( !this._animateOff ) ? o.animate : false,
			_set = {};

		if ( this.options.values && this.options.values.length ) {
			this.handles.each(function( i ) {
				valPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;
				_set[ that.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
				$( this ).stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );
				if ( that.options.range === true ) {
					if ( that.orientation === "horizontal" ) {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { left: valPercent + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { width: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					} else {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { bottom: ( valPercent ) + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { height: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					}
				}
				lastValPercent = valPercent;
			});
		} else {
			value = this.value();
			valueMin = this._valueMin();
			valueMax = this._valueMax();
			valPercent = ( valueMax !== valueMin ) ?
					( value - valueMin ) / ( valueMax - valueMin ) * 100 :
					0;
			_set[ this.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
			this.handle.stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );

			if ( oRange === "min" && this.orientation === "horizontal" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { width: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "horizontal" ) {
				this.range[ animate ? "animate" : "css" ]( { width: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
			if ( oRange === "min" && this.orientation === "vertical" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { height: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "vertical" ) {
				this.range[ animate ? "animate" : "css" ]( { height: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
		}
	},

	_handleEvents: {
		keydown: function( event ) {
			var allowed, curVal, newVal, step,
				index = $( event.target ).data( "ui-slider-handle-index" );

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
				case $.ui.keyCode.END:
				case $.ui.keyCode.PAGE_UP:
				case $.ui.keyCode.PAGE_DOWN:
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					event.preventDefault();
					if ( !this._keySliding ) {
						this._keySliding = true;
						$( event.target ).addClass( "ui-state-active" );
						allowed = this._start( event, index );
						if ( allowed === false ) {
							return;
						}
					}
					break;
			}

			step = this.options.step;
			if ( this.options.values && this.options.values.length ) {
				curVal = newVal = this.values( index );
			} else {
				curVal = newVal = this.value();
			}

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
					newVal = this._valueMin();
					break;
				case $.ui.keyCode.END:
					newVal = this._valueMax();
					break;
				case $.ui.keyCode.PAGE_UP:
					newVal = this._trimAlignValue(
						curVal + ( ( this._valueMax() - this._valueMin() ) / this.numPages )
					);
					break;
				case $.ui.keyCode.PAGE_DOWN:
					newVal = this._trimAlignValue(
						curVal - ( (this._valueMax() - this._valueMin()) / this.numPages ) );
					break;
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
					if ( curVal === this._valueMax() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal + step );
					break;
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					if ( curVal === this._valueMin() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal - step );
					break;
			}

			this._slide( event, index, newVal );
		},
		keyup: function( event ) {
			var index = $( event.target ).data( "ui-slider-handle-index" );

			if ( this._keySliding ) {
				this._keySliding = false;
				this._stop( event, index );
				this._change( event, index );
				$( event.target ).removeClass( "ui-state-active" );
			}
		}
	}
});


/*!
 * jQuery UI Sortable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */


var sortable = $.widget("ui.sortable", $.ui.mouse, {
	version: "1.11.3",
	widgetEventPrefix: "sort",
	ready: false,
	options: {
		appendTo: "parent",
		axis: false,
		connectWith: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		dropOnEmpty: true,
		forcePlaceholderSize: false,
		forceHelperSize: false,
		grid: false,
		handle: false,
		helper: "original",
		items: "> *",
		opacity: false,
		placeholder: false,
		revert: false,
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		scope: "default",
		tolerance: "intersect",
		zIndex: 1000,

		// callbacks
		activate: null,
		beforeStop: null,
		change: null,
		deactivate: null,
		out: null,
		over: null,
		receive: null,
		remove: null,
		sort: null,
		start: null,
		stop: null,
		update: null
	},

	_isOverAxis: function( x, reference, size ) {
		return ( x >= reference ) && ( x < ( reference + size ) );
	},

	_isFloating: function( item ) {
		return (/left|right/).test(item.css("float")) || (/inline|table-cell/).test(item.css("display"));
	},

	_create: function() {

		var o = this.options;
		this.containerCache = {};
		this.element.addClass("ui-sortable");

		//Get the items
		this.refresh();

		//Let's determine if the items are being displayed horizontally
		this.floating = this.items.length ? o.axis === "x" || this._isFloating(this.items[0].item) : false;

		//Let's determine the parent's offset
		this.offset = this.element.offset();

		//Initialize mouse events for interaction
		this._mouseInit();

		this._setHandleClassName();

		//We're ready to go
		this.ready = true;

	},

	_setOption: function( key, value ) {
		this._super( key, value );

		if ( key === "handle" ) {
			this._setHandleClassName();
		}
	},

	_setHandleClassName: function() {
		this.element.find( ".ui-sortable-handle" ).removeClass( "ui-sortable-handle" );
		$.each( this.items, function() {
			( this.instance.options.handle ?
				this.item.find( this.instance.options.handle ) : this.item )
				.addClass( "ui-sortable-handle" );
		});
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-sortable ui-sortable-disabled" )
			.find( ".ui-sortable-handle" )
				.removeClass( "ui-sortable-handle" );
		this._mouseDestroy();

		for ( var i = this.items.length - 1; i >= 0; i-- ) {
			this.items[i].item.removeData(this.widgetName + "-item");
		}

		return this;
	},

	_mouseCapture: function(event, overrideHandle) {
		var currentItem = null,
			validHandle = false,
			that = this;

		if (this.reverting) {
			return false;
		}

		if(this.options.disabled || this.options.type === "static") {
			return false;
		}

		//We have to refresh the items data once first
		this._refreshItems(event);

		//Find out if the clicked node (or one of its parents) is a actual item in this.items
		$(event.target).parents().each(function() {
			if($.data(this, that.widgetName + "-item") === that) {
				currentItem = $(this);
				return false;
			}
		});
		if($.data(event.target, that.widgetName + "-item") === that) {
			currentItem = $(event.target);
		}

		if(!currentItem) {
			return false;
		}
		if(this.options.handle && !overrideHandle) {
			$(this.options.handle, currentItem).find("*").addBack().each(function() {
				if(this === event.target) {
					validHandle = true;
				}
			});
			if(!validHandle) {
				return false;
			}
		}

		this.currentItem = currentItem;
		this._removeCurrentsFromItems();
		return true;

	},

	_mouseStart: function(event, overrideHandle, noActivation) {

		var i, body,
			o = this.options;

		this.currentContainer = this;

		//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture
		this.refreshPositions();

		//Create and append the visible helper
		this.helper = this._createHelper(event);

		//Cache the helper size
		this._cacheHelperProportions();

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Get the next scrolling parent
		this.scrollParent = this.helper.scrollParent();

		//The element's absolute position on the page minus margins
		this.offset = this.currentItem.offset();
		this.offset = {
			top: this.offset.top - this.margins.top,
			left: this.offset.left - this.margins.left
		};

		$.extend(this.offset, {
			click: { //Where the click happened, relative to the element
				left: event.pageX - this.offset.left,
				top: event.pageY - this.offset.top
			},
			parent: this._getParentOffset(),
			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
		});

		// Only after we got the offset, we can change the helper's position to absolute
		// TODO: Still need to figure out a way to make relative sorting possible
		this.helper.css("position", "absolute");
		this.cssPosition = this.helper.css("position");

		//Generate the original position
		this.originalPosition = this._generatePosition(event);
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

		//Cache the former DOM position
		this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };

		//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way
		if(this.helper[0] !== this.currentItem[0]) {
			this.currentItem.hide();
		}

		//Create the placeholder
		this._createPlaceholder();

		//Set a containment if given in the options
		if(o.containment) {
			this._setContainment();
		}

		if( o.cursor && o.cursor !== "auto" ) { // cursor option
			body = this.document.find( "body" );

			// support: IE
			this.storedCursor = body.css( "cursor" );
			body.css( "cursor", o.cursor );

			this.storedStylesheet = $( "<style>*{ cursor: "+o.cursor+" !important; }</style>" ).appendTo( body );
		}

		if(o.opacity) { // opacity option
			if (this.helper.css("opacity")) {
				this._storedOpacity = this.helper.css("opacity");
			}
			this.helper.css("opacity", o.opacity);
		}

		if(o.zIndex) { // zIndex option
			if (this.helper.css("zIndex")) {
				this._storedZIndex = this.helper.css("zIndex");
			}
			this.helper.css("zIndex", o.zIndex);
		}

		//Prepare scrolling
		if(this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== "HTML") {
			this.overflowOffset = this.scrollParent.offset();
		}

		//Call callbacks
		this._trigger("start", event, this._uiHash());

		//Recache the helper size
		if(!this._preserveHelperProportions) {
			this._cacheHelperProportions();
		}


		//Post "activate" events to possible containers
		if( !noActivation ) {
			for ( i = this.containers.length - 1; i >= 0; i-- ) {
				this.containers[ i ]._trigger( "activate", event, this._uiHash( this ) );
			}
		}

		//Prepare possible droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.current = this;
		}

		if ($.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(this, event);
		}

		this.dragging = true;

		this.helper.addClass("ui-sortable-helper");
		this._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position
		return true;

	},

	_mouseDrag: function(event) {
		var i, item, itemElement, intersection,
			o = this.options,
			scrolled = false;

		//Compute the helpers position
		this.position = this._generatePosition(event);
		this.positionAbs = this._convertPositionTo("absolute");

		if (!this.lastPositionAbs) {
			this.lastPositionAbs = this.positionAbs;
		}

		//Do scrolling
		if(this.options.scroll) {
			if(this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== "HTML") {

				if((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;
				} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;
				}

				if((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;
				} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;
				}

			} else {

				if(event.pageY - this.document.scrollTop() < o.scrollSensitivity) {
					scrolled = this.document.scrollTop(this.document.scrollTop() - o.scrollSpeed);
				} else if(this.window.height() - (event.pageY - this.document.scrollTop()) < o.scrollSensitivity) {
					scrolled = this.document.scrollTop(this.document.scrollTop() + o.scrollSpeed);
				}

				if(event.pageX - this.document.scrollLeft() < o.scrollSensitivity) {
					scrolled = this.document.scrollLeft(this.document.scrollLeft() - o.scrollSpeed);
				} else if(this.window.width() - (event.pageX - this.document.scrollLeft()) < o.scrollSensitivity) {
					scrolled = this.document.scrollLeft(this.document.scrollLeft() + o.scrollSpeed);
				}

			}

			if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
				$.ui.ddmanager.prepareOffsets(this, event);
			}
		}

		//Regenerate the absolute position used for position checks
		this.positionAbs = this._convertPositionTo("absolute");

		//Set the helper position
		if(!this.options.axis || this.options.axis !== "y") {
			this.helper[0].style.left = this.position.left+"px";
		}
		if(!this.options.axis || this.options.axis !== "x") {
			this.helper[0].style.top = this.position.top+"px";
		}

		//Rearrange
		for (i = this.items.length - 1; i >= 0; i--) {

			//Cache variables and intersection, continue if no intersection
			item = this.items[i];
			itemElement = item.item[0];
			intersection = this._intersectsWithPointer(item);
			if (!intersection) {
				continue;
			}

			// Only put the placeholder inside the current Container, skip all
			// items from other containers. This works because when moving
			// an item from one container to another the
			// currentContainer is switched before the placeholder is moved.
			//
			// Without this, moving items in "sub-sortables" can cause
			// the placeholder to jitter between the outer and inner container.
			if (item.instance !== this.currentContainer) {
				continue;
			}

			// cannot intersect with itself
			// no useless actions that have been done before
			// no action if the item moved is the parent of the item checked
			if (itemElement !== this.currentItem[0] &&
				this.placeholder[intersection === 1 ? "next" : "prev"]()[0] !== itemElement &&
				!$.contains(this.placeholder[0], itemElement) &&
				(this.options.type === "semi-dynamic" ? !$.contains(this.element[0], itemElement) : true)
			) {

				this.direction = intersection === 1 ? "down" : "up";

				if (this.options.tolerance === "pointer" || this._intersectsWithSides(item)) {
					this._rearrange(event, item);
				} else {
					break;
				}

				this._trigger("change", event, this._uiHash());
				break;
			}
		}

		//Post events to containers
		this._contactContainers(event);

		//Interconnect with droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.drag(this, event);
		}

		//Call callbacks
		this._trigger("sort", event, this._uiHash());

		this.lastPositionAbs = this.positionAbs;
		return false;

	},

	_mouseStop: function(event, noPropagation) {

		if(!event) {
			return;
		}

		//If we are using droppables, inform the manager about the drop
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			$.ui.ddmanager.drop(this, event);
		}

		if(this.options.revert) {
			var that = this,
				cur = this.placeholder.offset(),
				axis = this.options.axis,
				animation = {};

			if ( !axis || axis === "x" ) {
				animation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft);
			}
			if ( !axis || axis === "y" ) {
				animation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop);
			}
			this.reverting = true;
			$(this.helper).animate( animation, parseInt(this.options.revert, 10) || 500, function() {
				that._clear(event);
			});
		} else {
			this._clear(event, noPropagation);
		}

		return false;

	},

	cancel: function() {

		if(this.dragging) {

			this._mouseUp({ target: null });

			if(this.options.helper === "original") {
				this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
			} else {
				this.currentItem.show();
			}

			//Post deactivating events to containers
			for (var i = this.containers.length - 1; i >= 0; i--){
				this.containers[i]._trigger("deactivate", null, this._uiHash(this));
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", null, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		if (this.placeholder) {
			//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
			if(this.placeholder[0].parentNode) {
				this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
			}
			if(this.options.helper !== "original" && this.helper && this.helper[0].parentNode) {
				this.helper.remove();
			}

			$.extend(this, {
				helper: null,
				dragging: false,
				reverting: false,
				_noFinalSort: null
			});

			if(this.domPosition.prev) {
				$(this.domPosition.prev).after(this.currentItem);
			} else {
				$(this.domPosition.parent).prepend(this.currentItem);
			}
		}

		return this;

	},

	serialize: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			str = [];
		o = o || {};

		$(items).each(function() {
			var res = ($(o.item || this).attr(o.attribute || "id") || "").match(o.expression || (/(.+)[\-=_](.+)/));
			if (res) {
				str.push((o.key || res[1]+"[]")+"="+(o.key && o.expression ? res[1] : res[2]));
			}
		});

		if(!str.length && o.key) {
			str.push(o.key + "=");
		}

		return str.join("&");

	},

	toArray: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			ret = [];

		o = o || {};

		items.each(function() { ret.push($(o.item || this).attr(o.attribute || "id") || ""); });
		return ret;

	},

	/* Be careful with the following core functions */
	_intersectsWith: function(item) {

		var x1 = this.positionAbs.left,
			x2 = x1 + this.helperProportions.width,
			y1 = this.positionAbs.top,
			y2 = y1 + this.helperProportions.height,
			l = item.left,
			r = l + item.width,
			t = item.top,
			b = t + item.height,
			dyClick = this.offset.click.top,
			dxClick = this.offset.click.left,
			isOverElementHeight = ( this.options.axis === "x" ) || ( ( y1 + dyClick ) > t && ( y1 + dyClick ) < b ),
			isOverElementWidth = ( this.options.axis === "y" ) || ( ( x1 + dxClick ) > l && ( x1 + dxClick ) < r ),
			isOverElement = isOverElementHeight && isOverElementWidth;

		if ( this.options.tolerance === "pointer" ||
			this.options.forcePointerForContainers ||
			(this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > item[this.floating ? "width" : "height"])
		) {
			return isOverElement;
		} else {

			return (l < x1 + (this.helperProportions.width / 2) && // Right Half
				x2 - (this.helperProportions.width / 2) < r && // Left Half
				t < y1 + (this.helperProportions.height / 2) && // Bottom Half
				y2 - (this.helperProportions.height / 2) < b ); // Top Half

		}
	},

	_intersectsWithPointer: function(item) {

		var isOverElementHeight = (this.options.axis === "x") || this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),
			isOverElementWidth = (this.options.axis === "y") || this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),
			isOverElement = isOverElementHeight && isOverElementWidth,
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (!isOverElement) {
			return false;
		}

		return this.floating ?
			( ((horizontalDirection && horizontalDirection === "right") || verticalDirection === "down") ? 2 : 1 )
			: ( verticalDirection && (verticalDirection === "down" ? 2 : 1) );

	},

	_intersectsWithSides: function(item) {

		var isOverBottomHalf = this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),
			isOverRightHalf = this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (this.floating && horizontalDirection) {
			return ((horizontalDirection === "right" && isOverRightHalf) || (horizontalDirection === "left" && !isOverRightHalf));
		} else {
			return verticalDirection && ((verticalDirection === "down" && isOverBottomHalf) || (verticalDirection === "up" && !isOverBottomHalf));
		}

	},

	_getDragVerticalDirection: function() {
		var delta = this.positionAbs.top - this.lastPositionAbs.top;
		return delta !== 0 && (delta > 0 ? "down" : "up");
	},

	_getDragHorizontalDirection: function() {
		var delta = this.positionAbs.left - this.lastPositionAbs.left;
		return delta !== 0 && (delta > 0 ? "right" : "left");
	},

	refresh: function(event) {
		this._refreshItems(event);
		this._setHandleClassName();
		this.refreshPositions();
		return this;
	},

	_connectWith: function() {
		var options = this.options;
		return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;
	},

	_getItemsAsjQuery: function(connected) {

		var i, j, cur, inst,
			items = [],
			queries = [],
			connectWith = this._connectWith();

		if(connectWith && connected) {
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i], this.document[0]);
				for ( j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), inst]);
					}
				}
			}
		}

		queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);

		function addItems() {
			items.push( this );
		}
		for (i = queries.length - 1; i >= 0; i--){
			queries[i][0].each( addItems );
		}

		return $(items);

	},

	_removeCurrentsFromItems: function() {

		var list = this.currentItem.find(":data(" + this.widgetName + "-item)");

		this.items = $.grep(this.items, function (item) {
			for (var j=0; j < list.length; j++) {
				if(list[j] === item.item[0]) {
					return false;
				}
			}
			return true;
		});

	},

	_refreshItems: function(event) {

		this.items = [];
		this.containers = [this];

		var i, j, cur, inst, targetData, _queries, item, queriesLength,
			items = this.items,
			queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],
			connectWith = this._connectWith();

		if(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i], this.document[0]);
				for (j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);
						this.containers.push(inst);
					}
				}
			}
		}

		for (i = queries.length - 1; i >= 0; i--) {
			targetData = queries[i][1];
			_queries = queries[i][0];

			for (j=0, queriesLength = _queries.length; j < queriesLength; j++) {
				item = $(_queries[j]);

				item.data(this.widgetName + "-item", targetData); // Data for target checking (mouse manager)

				items.push({
					item: item,
					instance: targetData,
					width: 0, height: 0,
					left: 0, top: 0
				});
			}
		}

	},

	refreshPositions: function(fast) {

		//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change
		if(this.offsetParent && this.helper) {
			this.offset.parent = this._getParentOffset();
		}

		var i, item, t, p;

		for (i = this.items.length - 1; i >= 0; i--){
			item = this.items[i];

			//We ignore calculating positions of all connected containers when we're not over them
			if(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {
				continue;
			}

			t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;

			if (!fast) {
				item.width = t.outerWidth();
				item.height = t.outerHeight();
			}

			p = t.offset();
			item.left = p.left;
			item.top = p.top;
		}

		if(this.options.custom && this.options.custom.refreshContainers) {
			this.options.custom.refreshContainers.call(this);
		} else {
			for (i = this.containers.length - 1; i >= 0; i--){
				p = this.containers[i].element.offset();
				this.containers[i].containerCache.left = p.left;
				this.containers[i].containerCache.top = p.top;
				this.containers[i].containerCache.width = this.containers[i].element.outerWidth();
				this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
			}
		}

		return this;
	},

	_createPlaceholder: function(that) {
		that = that || this;
		var className,
			o = that.options;

		if(!o.placeholder || o.placeholder.constructor === String) {
			className = o.placeholder;
			o.placeholder = {
				element: function() {

					var nodeName = that.currentItem[0].nodeName.toLowerCase(),
						element = $( "<" + nodeName + ">", that.document[0] )
							.addClass(className || that.currentItem[0].className+" ui-sortable-placeholder")
							.removeClass("ui-sortable-helper");

					if ( nodeName === "tr" ) {
						that.currentItem.children().each(function() {
							$( "<td>&#160;</td>", that.document[0] )
								.attr( "colspan", $( this ).attr( "colspan" ) || 1 )
								.appendTo( element );
						});
					} else if ( nodeName === "img" ) {
						element.attr( "src", that.currentItem.attr( "src" ) );
					}

					if ( !className ) {
						element.css( "visibility", "hidden" );
					}

					return element;
				},
				update: function(container, p) {

					// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that
					// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified
					if(className && !o.forcePlaceholderSize) {
						return;
					}

					//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item
					if(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css("paddingTop")||0, 10) - parseInt(that.currentItem.css("paddingBottom")||0, 10)); }
					if(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css("paddingLeft")||0, 10) - parseInt(that.currentItem.css("paddingRight")||0, 10)); }
				}
			};
		}

		//Create the placeholder
		that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));

		//Append it after the actual current item
		that.currentItem.after(that.placeholder);

		//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)
		o.placeholder.update(that, that.placeholder);

	},

	_contactContainers: function(event) {
		var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom, floating, axis,
			innermostContainer = null,
			innermostIndex = null;

		// get innermost container that intersects with item
		for (i = this.containers.length - 1; i >= 0; i--) {

			// never consider a container that's located within the item itself
			if($.contains(this.currentItem[0], this.containers[i].element[0])) {
				continue;
			}

			if(this._intersectsWith(this.containers[i].containerCache)) {

				// if we've already found a container and it's more "inner" than this, then continue
				if(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {
					continue;
				}

				innermostContainer = this.containers[i];
				innermostIndex = i;

			} else {
				// container doesn't intersect. trigger "out" event if necessary
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", event, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		// if no intersecting containers found, return
		if(!innermostContainer) {
			return;
		}

		// move the item into the container if it's not there already
		if(this.containers.length === 1) {
			if (!this.containers[innermostIndex].containerCache.over) {
				this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
				this.containers[innermostIndex].containerCache.over = 1;
			}
		} else {

			//When entering a new container, we will find the item with the least distance and append our item near it
			dist = 10000;
			itemWithLeastDistance = null;
			floating = innermostContainer.floating || this._isFloating(this.currentItem);
			posProperty = floating ? "left" : "top";
			sizeProperty = floating ? "width" : "height";
			axis = floating ? "clientX" : "clientY";

			for (j = this.items.length - 1; j >= 0; j--) {
				if(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {
					continue;
				}
				if(this.items[j].item[0] === this.currentItem[0]) {
					continue;
				}

				cur = this.items[j].item.offset()[posProperty];
				nearBottom = false;
				if ( event[ axis ] - cur > this.items[ j ][ sizeProperty ] / 2 ) {
					nearBottom = true;
				}

				if ( Math.abs( event[ axis ] - cur ) < dist ) {
					dist = Math.abs( event[ axis ] - cur );
					itemWithLeastDistance = this.items[ j ];
					this.direction = nearBottom ? "up": "down";
				}
			}

			//Check if dropOnEmpty is enabled
			if(!itemWithLeastDistance && !this.options.dropOnEmpty) {
				return;
			}

			if(this.currentContainer === this.containers[innermostIndex]) {
				if ( !this.currentContainer.containerCache.over ) {
					this.containers[ innermostIndex ]._trigger( "over", event, this._uiHash() );
					this.currentContainer.containerCache.over = 1;
				}
				return;
			}

			itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);
			this._trigger("change", event, this._uiHash());
			this.containers[innermostIndex]._trigger("change", event, this._uiHash(this));
			this.currentContainer = this.containers[innermostIndex];

			//Update the placeholder
			this.options.placeholder.update(this.currentContainer, this.placeholder);

			this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
			this.containers[innermostIndex].containerCache.over = 1;
		}


	},

	_createHelper: function(event) {

		var o = this.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === "clone" ? this.currentItem.clone() : this.currentItem);

		//Add the helper to the DOM if that didn't happen already
		if(!helper.parents("body").length) {
			$(o.appendTo !== "parent" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);
		}

		if(helper[0] === this.currentItem[0]) {
			this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") };
		}

		if(!helper[0].style.width || o.forceHelperSize) {
			helper.width(this.currentItem.width());
		}
		if(!helper[0].style.height || o.forceHelperSize) {
			helper.height(this.currentItem.height());
		}

		return helper;

	},

	_adjustOffsetFromHelper: function(obj) {
		if (typeof obj === "string") {
			obj = obj.split(" ");
		}
		if ($.isArray(obj)) {
			obj = {left: +obj[0], top: +obj[1] || 0};
		}
		if ("left" in obj) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ("right" in obj) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ("top" in obj) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ("bottom" in obj) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_getParentOffset: function() {


		//Get the offsetParent and cache its position
		this.offsetParent = this.helper.offsetParent();
		var po = this.offsetParent.offset();

		// This is a special case where we need to modify a offset calculated on start, since the following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
		if(this.cssPosition === "absolute" && this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		// This needs to be actually done for all browsers, since pageX/pageY includes this information
		// with an ugly IE fix
		if( this.offsetParent[0] === this.document[0].body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
		};

	},

	_getRelativeOffset: function() {

		if(this.cssPosition === "relative") {
			var p = this.currentItem.position();
			return {
				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
			};
		} else {
			return { top: 0, left: 0 };
		}

	},

	_cacheMargins: function() {
		this.margins = {
			left: (parseInt(this.currentItem.css("marginLeft"),10) || 0),
			top: (parseInt(this.currentItem.css("marginTop"),10) || 0)
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var ce, co, over,
			o = this.options;
		if(o.containment === "parent") {
			o.containment = this.helper[0].parentNode;
		}
		if(o.containment === "document" || o.containment === "window") {
			this.containment = [
				0 - this.offset.relative.left - this.offset.parent.left,
				0 - this.offset.relative.top - this.offset.parent.top,
				o.containment === "document" ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left,
				(o.containment === "document" ? this.document.width() : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
			];
		}

		if(!(/^(document|window|parent)$/).test(o.containment)) {
			ce = $(o.containment)[0];
			co = $(o.containment).offset();
			over = ($(ce).css("overflow") !== "hidden");

			this.containment = [
				co.left + (parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0) - this.margins.left,
				co.top + (parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0) - this.margins.top,
				co.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left,
				co.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top
			];
		}

	},

	_convertPositionTo: function(d, pos) {

		if(!pos) {
			pos = this.position;
		}
		var mod = d === "absolute" ? 1 : -1,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
			scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		return {
			top: (
				pos.top	+																// The absolute mouse position
				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top * mod -											// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)
			),
			left: (
				pos.left +																// The absolute mouse position
				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)
			)
		};

	},

	_generatePosition: function(event) {

		var top, left,
			o = this.options,
			pageX = event.pageX,
			pageY = event.pageY,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		// This is another very weird special case that only happens for relative elements:
		// 1. If the css position is relative
		// 2. and the scroll parent is the document or similar to the offset parent
		// we have to refresh the relative offset during the scroll so there are no jumps
		if(this.cssPosition === "relative" && !(this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0])) {
			this.offset.relative = this._getRelativeOffset();
		}

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		if(this.originalPosition) { //If we are not dragging yet, we won't check for options

			if(this.containment) {
				if(event.pageX - this.offset.click.left < this.containment[0]) {
					pageX = this.containment[0] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top < this.containment[1]) {
					pageY = this.containment[1] + this.offset.click.top;
				}
				if(event.pageX - this.offset.click.left > this.containment[2]) {
					pageX = this.containment[2] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top > this.containment[3]) {
					pageY = this.containment[3] + this.offset.click.top;
				}
			}

			if(o.grid) {
				top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];
				pageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

				left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];
				pageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
			}

		}

		return {
			top: (
				pageY -																// The absolute mouse position
				this.offset.click.top -													// Click offset (relative to the element)
				this.offset.relative.top	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
			),
			left: (
				pageX -																// The absolute mouse position
				this.offset.click.left -												// Click offset (relative to the element)
				this.offset.relative.left	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
			)
		};

	},

	_rearrange: function(event, i, a, hardRefresh) {

		a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === "down" ? i.item[0] : i.item[0].nextSibling));

		//Various things done here to improve the performance:
		// 1. we create a setTimeout, that calls refreshPositions
		// 2. on the instance, we have a counter variable, that get's higher after every append
		// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same
		// 4. this lets only the last addition to the timeout stack through
		this.counter = this.counter ? ++this.counter : 1;
		var counter = this.counter;

		this._delay(function() {
			if(counter === this.counter) {
				this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove
			}
		});

	},

	_clear: function(event, noPropagation) {

		this.reverting = false;
		// We delay all events that have to be triggered to after the point where the placeholder has been removed and
		// everything else normalized again
		var i,
			delayedTriggers = [];

		// We first have to update the dom position of the actual currentItem
		// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)
		if(!this._noFinalSort && this.currentItem.parent().length) {
			this.placeholder.before(this.currentItem);
		}
		this._noFinalSort = null;

		if(this.helper[0] === this.currentItem[0]) {
			for(i in this._storedCSS) {
				if(this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") {
					this._storedCSS[i] = "";
				}
			}
			this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
		} else {
			this.currentItem.show();
		}

		if(this.fromOutside && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("receive", event, this._uiHash(this.fromOutside)); });
		}
		if((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("update", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed
		}

		// Check if the items Container has Changed and trigger appropriate
		// events.
		if (this !== this.currentContainer) {
			if(!noPropagation) {
				delayedTriggers.push(function(event) { this._trigger("remove", event, this._uiHash()); });
				delayedTriggers.push((function(c) { return function(event) { c._trigger("receive", event, this._uiHash(this)); };  }).call(this, this.currentContainer));
				delayedTriggers.push((function(c) { return function(event) { c._trigger("update", event, this._uiHash(this));  }; }).call(this, this.currentContainer));
			}
		}


		//Post events to containers
		function delayEvent( type, instance, container ) {
			return function( event ) {
				container._trigger( type, event, instance._uiHash( instance ) );
			};
		}
		for (i = this.containers.length - 1; i >= 0; i--){
			if (!noPropagation) {
				delayedTriggers.push( delayEvent( "deactivate", this, this.containers[ i ] ) );
			}
			if(this.containers[i].containerCache.over) {
				delayedTriggers.push( delayEvent( "out", this, this.containers[ i ] ) );
				this.containers[i].containerCache.over = 0;
			}
		}

		//Do what was originally in plugins
		if ( this.storedCursor ) {
			this.document.find( "body" ).css( "cursor", this.storedCursor );
			this.storedStylesheet.remove();
		}
		if(this._storedOpacity) {
			this.helper.css("opacity", this._storedOpacity);
		}
		if(this._storedZIndex) {
			this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex);
		}

		this.dragging = false;

		if(!noPropagation) {
			this._trigger("beforeStop", event, this._uiHash());
		}

		//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
		this.placeholder[0].parentNode.removeChild(this.placeholder[0]);

		if ( !this.cancelHelperRemoval ) {
			if ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {
				this.helper.remove();
			}
			this.helper = null;
		}

		if(!noPropagation) {
			for (i=0; i < delayedTriggers.length; i++) {
				delayedTriggers[i].call(this, event);
			} //Trigger all delayed events
			this._trigger("stop", event, this._uiHash());
		}

		this.fromOutside = false;
		return !this.cancelHelperRemoval;

	},

	_trigger: function() {
		if ($.Widget.prototype._trigger.apply(this, arguments) === false) {
			this.cancel();
		}
	},

	_uiHash: function(_inst) {
		var inst = _inst || this;
		return {
			helper: inst.helper,
			placeholder: inst.placeholder || $([]),
			position: inst.position,
			originalPosition: inst.originalPosition,
			offset: inst.positionAbs,
			item: inst.currentItem,
			sender: _inst ? _inst.element : null
		};
	}

});


/*!
 * jQuery UI Spinner 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 */


function spinner_modifier( fn ) {
	return function() {
		var previous = this.element.val();
		fn.apply( this, arguments );
		this._refresh();
		if ( previous !== this.element.val() ) {
			this._trigger( "change" );
		}
	};
}

var spinner = $.widget( "ui.spinner", {
	version: "1.11.3",
	defaultElement: "<input>",
	widgetEventPrefix: "spin",
	options: {
		culture: null,
		icons: {
			down: "ui-icon-triangle-1-s",
			up: "ui-icon-triangle-1-n"
		},
		incremental: true,
		max: null,
		min: null,
		numberFormat: null,
		page: 10,
		step: 1,

		change: null,
		spin: null,
		start: null,
		stop: null
	},

	_create: function() {
		// handle string values that need to be parsed
		this._setOption( "max", this.options.max );
		this._setOption( "min", this.options.min );
		this._setOption( "step", this.options.step );

		// Only format if there is a value, prevents the field from being marked
		// as invalid in Firefox, see #9573.
		if ( this.value() !== "" ) {
			// Format the value, but don't constrain.
			this._value( this.element.val(), true );
		}

		this._draw();
		this._on( this._events );
		this._refresh();

		// turning off autocomplete prevents the browser from remembering the
		// value when navigating through history, so we re-enable autocomplete
		// if the page is unloaded before the widget is destroyed. #7790
		this._on( this.window, {
			beforeunload: function() {
				this.element.removeAttr( "autocomplete" );
			}
		});
	},

	_getCreateOptions: function() {
		var options = {},
			element = this.element;

		$.each( [ "min", "max", "step" ], function( i, option ) {
			var value = element.attr( option );
			if ( value !== undefined && value.length ) {
				options[ option ] = value;
			}
		});

		return options;
	},

	_events: {
		keydown: function( event ) {
			if ( this._start( event ) && this._keydown( event ) ) {
				event.preventDefault();
			}
		},
		keyup: "_stop",
		focus: function() {
			this.previous = this.element.val();
		},
		blur: function( event ) {
			if ( this.cancelBlur ) {
				delete this.cancelBlur;
				return;
			}

			this._stop();
			this._refresh();
			if ( this.previous !== this.element.val() ) {
				this._trigger( "change", event );
			}
		},
		mousewheel: function( event, delta ) {
			if ( !delta ) {
				return;
			}
			if ( !this.spinning && !this._start( event ) ) {
				return false;
			}

			this._spin( (delta > 0 ? 1 : -1) * this.options.step, event );
			clearTimeout( this.mousewheelTimer );
			this.mousewheelTimer = this._delay(function() {
				if ( this.spinning ) {
					this._stop( event );
				}
			}, 100 );
			event.preventDefault();
		},
		"mousedown .ui-spinner-button": function( event ) {
			var previous;

			// We never want the buttons to have focus; whenever the user is
			// interacting with the spinner, the focus should be on the input.
			// If the input is focused then this.previous is properly set from
			// when the input first received focus. If the input is not focused
			// then we need to set this.previous based on the value before spinning.
			previous = this.element[0] === this.document[0].activeElement ?
				this.previous : this.element.val();
			function checkFocus() {
				var isActive = this.element[0] === this.document[0].activeElement;
				if ( !isActive ) {
					this.element.focus();
					this.previous = previous;
					// support: IE
					// IE sets focus asynchronously, so we need to check if focus
					// moved off of the input because the user clicked on the button.
					this._delay(function() {
						this.previous = previous;
					});
				}
			}

			// ensure focus is on (or stays on) the text field
			event.preventDefault();
			checkFocus.call( this );

			// support: IE
			// IE doesn't prevent moving focus even with event.preventDefault()
			// so we set a flag to know when we should ignore the blur event
			// and check (again) if focus moved off of the input.
			this.cancelBlur = true;
			this._delay(function() {
				delete this.cancelBlur;
				checkFocus.call( this );
			});

			if ( this._start( event ) === false ) {
				return;
			}

			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
		},
		"mouseup .ui-spinner-button": "_stop",
		"mouseenter .ui-spinner-button": function( event ) {
			// button will add ui-state-active if mouse was down while mouseleave and kept down
			if ( !$( event.currentTarget ).hasClass( "ui-state-active" ) ) {
				return;
			}

			if ( this._start( event ) === false ) {
				return false;
			}
			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
		},
		// TODO: do we really want to consider this a stop?
		// shouldn't we just stop the repeater and wait until mouseup before
		// we trigger the stop event?
		"mouseleave .ui-spinner-button": "_stop"
	},

	_draw: function() {
		var uiSpinner = this.uiSpinner = this.element
			.addClass( "ui-spinner-input" )
			.attr( "autocomplete", "off" )
			.wrap( this._uiSpinnerHtml() )
			.parent()
				// add buttons
				.append( this._buttonHtml() );

		this.element.attr( "role", "spinbutton" );

		// button bindings
		this.buttons = uiSpinner.find( ".ui-spinner-button" )
			.attr( "tabIndex", -1 )
			.button()
			.removeClass( "ui-corner-all" );

		// IE 6 doesn't understand height: 50% for the buttons
		// unless the wrapper has an explicit height
		if ( this.buttons.height() > Math.ceil( uiSpinner.height() * 0.5 ) &&
				uiSpinner.height() > 0 ) {
			uiSpinner.height( uiSpinner.height() );
		}

		// disable spinner if element was already disabled
		if ( this.options.disabled ) {
			this.disable();
		}
	},

	_keydown: function( event ) {
		var options = this.options,
			keyCode = $.ui.keyCode;

		switch ( event.keyCode ) {
		case keyCode.UP:
			this._repeat( null, 1, event );
			return true;
		case keyCode.DOWN:
			this._repeat( null, -1, event );
			return true;
		case keyCode.PAGE_UP:
			this._repeat( null, options.page, event );
			return true;
		case keyCode.PAGE_DOWN:
			this._repeat( null, -options.page, event );
			return true;
		}

		return false;
	},

	_uiSpinnerHtml: function() {
		return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
	},

	_buttonHtml: function() {
		return "" +
			"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>" +
				"<span class='ui-icon " + this.options.icons.up + "'>&#9650;</span>" +
			"</a>" +
			"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>" +
				"<span class='ui-icon " + this.options.icons.down + "'>&#9660;</span>" +
			"</a>";
	},

	_start: function( event ) {
		if ( !this.spinning && this._trigger( "start", event ) === false ) {
			return false;
		}

		if ( !this.counter ) {
			this.counter = 1;
		}
		this.spinning = true;
		return true;
	},

	_repeat: function( i, steps, event ) {
		i = i || 500;

		clearTimeout( this.timer );
		this.timer = this._delay(function() {
			this._repeat( 40, steps, event );
		}, i );

		this._spin( steps * this.options.step, event );
	},

	_spin: function( step, event ) {
		var value = this.value() || 0;

		if ( !this.counter ) {
			this.counter = 1;
		}

		value = this._adjustValue( value + step * this._increment( this.counter ) );

		if ( !this.spinning || this._trigger( "spin", event, { value: value } ) !== false) {
			this._value( value );
			this.counter++;
		}
	},

	_increment: function( i ) {
		var incremental = this.options.incremental;

		if ( incremental ) {
			return $.isFunction( incremental ) ?
				incremental( i ) :
				Math.floor( i * i * i / 50000 - i * i / 500 + 17 * i / 200 + 1 );
		}

		return 1;
	},

	_precision: function() {
		var precision = this._precisionOf( this.options.step );
		if ( this.options.min !== null ) {
			precision = Math.max( precision, this._precisionOf( this.options.min ) );
		}
		return precision;
	},

	_precisionOf: function( num ) {
		var str = num.toString(),
			decimal = str.indexOf( "." );
		return decimal === -1 ? 0 : str.length - decimal - 1;
	},

	_adjustValue: function( value ) {
		var base, aboveMin,
			options = this.options;

		// make sure we're at a valid step
		// - find out where we are relative to the base (min or 0)
		base = options.min !== null ? options.min : 0;
		aboveMin = value - base;
		// - round to the nearest step
		aboveMin = Math.round(aboveMin / options.step) * options.step;
		// - rounding is based on 0, so adjust back to our base
		value = base + aboveMin;

		// fix precision from bad JS floating point math
		value = parseFloat( value.toFixed( this._precision() ) );

		// clamp the value
		if ( options.max !== null && value > options.max) {
			return options.max;
		}
		if ( options.min !== null && value < options.min ) {
			return options.min;
		}

		return value;
	},

	_stop: function( event ) {
		if ( !this.spinning ) {
			return;
		}

		clearTimeout( this.timer );
		clearTimeout( this.mousewheelTimer );
		this.counter = 0;
		this.spinning = false;
		this._trigger( "stop", event );
	},

	_setOption: function( key, value ) {
		if ( key === "culture" || key === "numberFormat" ) {
			var prevValue = this._parse( this.element.val() );
			this.options[ key ] = value;
			this.element.val( this._format( prevValue ) );
			return;
		}

		if ( key === "max" || key === "min" || key === "step" ) {
			if ( typeof value === "string" ) {
				value = this._parse( value );
			}
		}
		if ( key === "icons" ) {
			this.buttons.first().find( ".ui-icon" )
				.removeClass( this.options.icons.up )
				.addClass( value.up );
			this.buttons.last().find( ".ui-icon" )
				.removeClass( this.options.icons.down )
				.addClass( value.down );
		}

		this._super( key, value );

		if ( key === "disabled" ) {
			this.widget().toggleClass( "ui-state-disabled", !!value );
			this.element.prop( "disabled", !!value );
			this.buttons.button( value ? "disable" : "enable" );
		}
	},

	_setOptions: spinner_modifier(function( options ) {
		this._super( options );
	}),

	_parse: function( val ) {
		if ( typeof val === "string" && val !== "" ) {
			val = window.Globalize && this.options.numberFormat ?
				Globalize.parseFloat( val, 10, this.options.culture ) : +val;
		}
		return val === "" || isNaN( val ) ? null : val;
	},

	_format: function( value ) {
		if ( value === "" ) {
			return "";
		}
		return window.Globalize && this.options.numberFormat ?
			Globalize.format( value, this.options.numberFormat, this.options.culture ) :
			value;
	},

	_refresh: function() {
		this.element.attr({
			"aria-valuemin": this.options.min,
			"aria-valuemax": this.options.max,
			// TODO: what should we do with values that can't be parsed?
			"aria-valuenow": this._parse( this.element.val() )
		});
	},

	isValid: function() {
		var value = this.value();

		// null is invalid
		if ( value === null ) {
			return false;
		}

		// if value gets adjusted, it's invalid
		return value === this._adjustValue( value );
	},

	// update the value without triggering change
	_value: function( value, allowAny ) {
		var parsed;
		if ( value !== "" ) {
			parsed = this._parse( value );
			if ( parsed !== null ) {
				if ( !allowAny ) {
					parsed = this._adjustValue( parsed );
				}
				value = this._format( parsed );
			}
		}
		this.element.val( value );
		this._refresh();
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-spinner-input" )
			.prop( "disabled", false )
			.removeAttr( "autocomplete" )
			.removeAttr( "role" )
			.removeAttr( "aria-valuemin" )
			.removeAttr( "aria-valuemax" )
			.removeAttr( "aria-valuenow" );
		this.uiSpinner.replaceWith( this.element );
	},

	stepUp: spinner_modifier(function( steps ) {
		this._stepUp( steps );
	}),
	_stepUp: function( steps ) {
		if ( this._start() ) {
			this._spin( (steps || 1) * this.options.step );
			this._stop();
		}
	},

	stepDown: spinner_modifier(function( steps ) {
		this._stepDown( steps );
	}),
	_stepDown: function( steps ) {
		if ( this._start() ) {
			this._spin( (steps || 1) * -this.options.step );
			this._stop();
		}
	},

	pageUp: spinner_modifier(function( pages ) {
		this._stepUp( (pages || 1) * this.options.page );
	}),

	pageDown: spinner_modifier(function( pages ) {
		this._stepDown( (pages || 1) * this.options.page );
	}),

	value: function( newVal ) {
		if ( !arguments.length ) {
			return this._parse( this.element.val() );
		}
		spinner_modifier( this._value ).call( this, newVal );
	},

	widget: function() {
		return this.uiSpinner;
	}
});


/*!
 * jQuery UI Tabs 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 */


var tabs = $.widget( "ui.tabs", {
	version: "1.11.3",
	delay: 300,
	options: {
		active: null,
		collapsible: false,
		event: "click",
		heightStyle: "content",
		hide: null,
		show: null,

		// callbacks
		activate: null,
		beforeActivate: null,
		beforeLoad: null,
		load: null
	},

	_isLocal: (function() {
		var rhash = /#.*$/;

		return function( anchor ) {
			var anchorUrl, locationUrl;

			// support: IE7
			// IE7 doesn't normalize the href property when set via script (#9317)
			anchor = anchor.cloneNode( false );

			anchorUrl = anchor.href.replace( rhash, "" );
			locationUrl = location.href.replace( rhash, "" );

			// decoding may throw an error if the URL isn't UTF-8 (#9518)
			try {
				anchorUrl = decodeURIComponent( anchorUrl );
			} catch ( error ) {}
			try {
				locationUrl = decodeURIComponent( locationUrl );
			} catch ( error ) {}

			return anchor.hash.length > 1 && anchorUrl === locationUrl;
		};
	})(),

	_create: function() {
		var that = this,
			options = this.options;

		this.running = false;

		this.element
			.addClass( "ui-tabs ui-widget ui-widget-content ui-corner-all" )
			.toggleClass( "ui-tabs-collapsible", options.collapsible );

		this._processTabs();
		options.active = this._initialActive();

		// Take disabling tabs via class attribute from HTML
		// into account and update option properly.
		if ( $.isArray( options.disabled ) ) {
			options.disabled = $.unique( options.disabled.concat(
				$.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
					return that.tabs.index( li );
				})
			) ).sort();
		}

		// check for length avoids error when initializing empty list
		if ( this.options.active !== false && this.anchors.length ) {
			this.active = this._findActive( options.active );
		} else {
			this.active = $();
		}

		this._refresh();

		if ( this.active.length ) {
			this.load( options.active );
		}
	},

	_initialActive: function() {
		var active = this.options.active,
			collapsible = this.options.collapsible,
			locationHash = location.hash.substring( 1 );

		if ( active === null ) {
			// check the fragment identifier in the URL
			if ( locationHash ) {
				this.tabs.each(function( i, tab ) {
					if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
						active = i;
						return false;
					}
				});
			}

			// check for a tab marked active via a class
			if ( active === null ) {
				active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
			}

			// no active tab, set to false
			if ( active === null || active === -1 ) {
				active = this.tabs.length ? 0 : false;
			}
		}

		// handle numbers: negative, out of range
		if ( active !== false ) {
			active = this.tabs.index( this.tabs.eq( active ) );
			if ( active === -1 ) {
				active = collapsible ? false : 0;
			}
		}

		// don't allow collapsible: false and active: false
		if ( !collapsible && active === false && this.anchors.length ) {
			active = 0;
		}

		return active;
	},

	_getCreateEventData: function() {
		return {
			tab: this.active,
			panel: !this.active.length ? $() : this._getPanelForTab( this.active )
		};
	},

	_tabKeydown: function( event ) {
		var focusedTab = $( this.document[0].activeElement ).closest( "li" ),
			selectedIndex = this.tabs.index( focusedTab ),
			goingForward = true;

		if ( this._handlePageNav( event ) ) {
			return;
		}

		switch ( event.keyCode ) {
			case $.ui.keyCode.RIGHT:
			case $.ui.keyCode.DOWN:
				selectedIndex++;
				break;
			case $.ui.keyCode.UP:
			case $.ui.keyCode.LEFT:
				goingForward = false;
				selectedIndex--;
				break;
			case $.ui.keyCode.END:
				selectedIndex = this.anchors.length - 1;
				break;
			case $.ui.keyCode.HOME:
				selectedIndex = 0;
				break;
			case $.ui.keyCode.SPACE:
				// Activate only, no collapsing
				event.preventDefault();
				clearTimeout( this.activating );
				this._activate( selectedIndex );
				return;
			case $.ui.keyCode.ENTER:
				// Toggle (cancel delayed activation, allow collapsing)
				event.preventDefault();
				clearTimeout( this.activating );
				// Determine if we should collapse or activate
				this._activate( selectedIndex === this.options.active ? false : selectedIndex );
				return;
			default:
				return;
		}

		// Focus the appropriate tab, based on which key was pressed
		event.preventDefault();
		clearTimeout( this.activating );
		selectedIndex = this._focusNextTab( selectedIndex, goingForward );

		// Navigating with control/command key will prevent automatic activation
		if ( !event.ctrlKey && !event.metaKey ) {

			// Update aria-selected immediately so that AT think the tab is already selected.
			// Otherwise AT may confuse the user by stating that they need to activate the tab,
			// but the tab will already be activated by the time the announcement finishes.
			focusedTab.attr( "aria-selected", "false" );
			this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );

			this.activating = this._delay(function() {
				this.option( "active", selectedIndex );
			}, this.delay );
		}
	},

	_panelKeydown: function( event ) {
		if ( this._handlePageNav( event ) ) {
			return;
		}

		// Ctrl+up moves focus to the current tab
		if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
			event.preventDefault();
			this.active.focus();
		}
	},

	// Alt+page up/down moves focus to the previous/next tab (and activates)
	_handlePageNav: function( event ) {
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
			this._activate( this._focusNextTab( this.options.active - 1, false ) );
			return true;
		}
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
			this._activate( this._focusNextTab( this.options.active + 1, true ) );
			return true;
		}
	},

	_findNextTab: function( index, goingForward ) {
		var lastTabIndex = this.tabs.length - 1;

		function constrain() {
			if ( index > lastTabIndex ) {
				index = 0;
			}
			if ( index < 0 ) {
				index = lastTabIndex;
			}
			return index;
		}

		while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
			index = goingForward ? index + 1 : index - 1;
		}

		return index;
	},

	_focusNextTab: function( index, goingForward ) {
		index = this._findNextTab( index, goingForward );
		this.tabs.eq( index ).focus();
		return index;
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {
			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		if ( key === "disabled" ) {
			// don't use the widget factory's disabled handling
			this._setupDisabled( value );
			return;
		}

		this._super( key, value);

		if ( key === "collapsible" ) {
			this.element.toggleClass( "ui-tabs-collapsible", value );
			// Setting collapsible: false while collapsed; open first panel
			if ( !value && this.options.active === false ) {
				this._activate( 0 );
			}
		}

		if ( key === "event" ) {
			this._setupEvents( value );
		}

		if ( key === "heightStyle" ) {
			this._setupHeightStyle( value );
		}
	},

	_sanitizeSelector: function( hash ) {
		return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
	},

	refresh: function() {
		var options = this.options,
			lis = this.tablist.children( ":has(a[href])" );

		// get disabled tabs from class attribute from HTML
		// this will get converted to a boolean if needed in _refresh()
		options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
			return lis.index( tab );
		});

		this._processTabs();

		// was collapsed or no tabs
		if ( options.active === false || !this.anchors.length ) {
			options.active = false;
			this.active = $();
		// was active, but active tab is gone
		} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {
			// all remaining tabs are disabled
			if ( this.tabs.length === options.disabled.length ) {
				options.active = false;
				this.active = $();
			// activate previous tab
			} else {
				this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
			}
		// was active, active tab still exists
		} else {
			// make sure active index is correct
			options.active = this.tabs.index( this.active );
		}

		this._refresh();
	},

	_refresh: function() {
		this._setupDisabled( this.options.disabled );
		this._setupEvents( this.options.event );
		this._setupHeightStyle( this.options.heightStyle );

		this.tabs.not( this.active ).attr({
			"aria-selected": "false",
			"aria-expanded": "false",
			tabIndex: -1
		});
		this.panels.not( this._getPanelForTab( this.active ) )
			.hide()
			.attr({
				"aria-hidden": "true"
			});

		// Make sure one tab is in the tab order
		if ( !this.active.length ) {
			this.tabs.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active
				.addClass( "ui-tabs-active ui-state-active" )
				.attr({
					"aria-selected": "true",
					"aria-expanded": "true",
					tabIndex: 0
				});
			this._getPanelForTab( this.active )
				.show()
				.attr({
					"aria-hidden": "false"
				});
		}
	},

	_processTabs: function() {
		var that = this,
			prevTabs = this.tabs,
			prevAnchors = this.anchors,
			prevPanels = this.panels;

		this.tablist = this._getList()
			.addClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
			.attr( "role", "tablist" )

			// Prevent users from focusing disabled tabs via click
			.delegate( "> li", "mousedown" + this.eventNamespace, function( event ) {
				if ( $( this ).is( ".ui-state-disabled" ) ) {
					event.preventDefault();
				}
			})

			// support: IE <9
			// Preventing the default action in mousedown doesn't prevent IE
			// from focusing the element, so if the anchor gets focused, blur.
			// We don't have to worry about focusing the previously focused
			// element since clicking on a non-focusable element should focus
			// the body anyway.
			.delegate( ".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
				if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
					this.blur();
				}
			});

		this.tabs = this.tablist.find( "> li:has(a[href])" )
			.addClass( "ui-state-default ui-corner-top" )
			.attr({
				role: "tab",
				tabIndex: -1
			});

		this.anchors = this.tabs.map(function() {
				return $( "a", this )[ 0 ];
			})
			.addClass( "ui-tabs-anchor" )
			.attr({
				role: "presentation",
				tabIndex: -1
			});

		this.panels = $();

		this.anchors.each(function( i, anchor ) {
			var selector, panel, panelId,
				anchorId = $( anchor ).uniqueId().attr( "id" ),
				tab = $( anchor ).closest( "li" ),
				originalAriaControls = tab.attr( "aria-controls" );

			// inline tab
			if ( that._isLocal( anchor ) ) {
				selector = anchor.hash;
				panelId = selector.substring( 1 );
				panel = that.element.find( that._sanitizeSelector( selector ) );
			// remote tab
			} else {
				// If the tab doesn't already have aria-controls,
				// generate an id by using a throw-away element
				panelId = tab.attr( "aria-controls" ) || $( {} ).uniqueId()[ 0 ].id;
				selector = "#" + panelId;
				panel = that.element.find( selector );
				if ( !panel.length ) {
					panel = that._createPanel( panelId );
					panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
				}
				panel.attr( "aria-live", "polite" );
			}

			if ( panel.length) {
				that.panels = that.panels.add( panel );
			}
			if ( originalAriaControls ) {
				tab.data( "ui-tabs-aria-controls", originalAriaControls );
			}
			tab.attr({
				"aria-controls": panelId,
				"aria-labelledby": anchorId
			});
			panel.attr( "aria-labelledby", anchorId );
		});

		this.panels
			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
			.attr( "role", "tabpanel" );

		// Avoid memory leaks (#10056)
		if ( prevTabs ) {
			this._off( prevTabs.not( this.tabs ) );
			this._off( prevAnchors.not( this.anchors ) );
			this._off( prevPanels.not( this.panels ) );
		}
	},

	// allow overriding how to find the list for rare usage scenarios (#7715)
	_getList: function() {
		return this.tablist || this.element.find( "ol,ul" ).eq( 0 );
	},

	_createPanel: function( id ) {
		return $( "<div>" )
			.attr( "id", id )
			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
			.data( "ui-tabs-destroy", true );
	},

	_setupDisabled: function( disabled ) {
		if ( $.isArray( disabled ) ) {
			if ( !disabled.length ) {
				disabled = false;
			} else if ( disabled.length === this.anchors.length ) {
				disabled = true;
			}
		}

		// disable tabs
		for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {
			if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
				$( li )
					.addClass( "ui-state-disabled" )
					.attr( "aria-disabled", "true" );
			} else {
				$( li )
					.removeClass( "ui-state-disabled" )
					.removeAttr( "aria-disabled" );
			}
		}

		this.options.disabled = disabled;
	},

	_setupEvents: function( event ) {
		var events = {};
		if ( event ) {
			$.each( event.split(" "), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			});
		}

		this._off( this.anchors.add( this.tabs ).add( this.panels ) );
		// Always prevent the default action, even when disabled
		this._on( true, this.anchors, {
			click: function( event ) {
				event.preventDefault();
			}
		});
		this._on( this.anchors, events );
		this._on( this.tabs, { keydown: "_tabKeydown" } );
		this._on( this.panels, { keydown: "_panelKeydown" } );

		this._focusable( this.tabs );
		this._hoverable( this.tabs );
	},

	_setupHeightStyle: function( heightStyle ) {
		var maxHeight,
			parent = this.element.parent();

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			maxHeight -= this.element.outerHeight() - this.element.height();

			this.element.siblings( ":visible" ).each(function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			});

			this.element.children().not( this.panels ).each(function() {
				maxHeight -= $( this ).outerHeight( true );
			});

			this.panels.each(function() {
				$( this ).height( Math.max( 0, maxHeight -
					$( this ).innerHeight() + $( this ).height() ) );
			})
			.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.panels.each(function() {
				maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
			}).height( maxHeight );
		}
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			anchor = $( event.currentTarget ),
			tab = anchor.closest( "li" ),
			clickedIsActive = tab[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : this._getPanelForTab( tab ),
			toHide = !active.length ? $() : this._getPanelForTab( active ),
			eventData = {
				oldTab: active,
				oldPanel: toHide,
				newTab: collapsing ? $() : tab,
				newPanel: toShow
			};

		event.preventDefault();

		if ( tab.hasClass( "ui-state-disabled" ) ||
				// tab is already loading
				tab.hasClass( "ui-tabs-loading" ) ||
				// can't switch durning an animation
				this.running ||
				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||
				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.tabs.index( tab );

		this.active = clickedIsActive ? $() : tab;
		if ( this.xhr ) {
			this.xhr.abort();
		}

		if ( !toHide.length && !toShow.length ) {
			$.error( "jQuery UI Tabs: Mismatching fragment identifier." );
		}

		if ( toShow.length ) {
			this.load( this.tabs.index( tab ), event );
		}
		this._toggle( event, eventData );
	},

	// handles show/hide for selecting tabs
	_toggle: function( event, eventData ) {
		var that = this,
			toShow = eventData.newPanel,
			toHide = eventData.oldPanel;

		this.running = true;

		function complete() {
			that.running = false;
			that._trigger( "activate", event, eventData );
		}

		function show() {
			eventData.newTab.closest( "li" ).addClass( "ui-tabs-active ui-state-active" );

			if ( toShow.length && that.options.show ) {
				that._show( toShow, that.options.show, complete );
			} else {
				toShow.show();
				complete();
			}
		}

		// start out by hiding, then showing, then completing
		if ( toHide.length && this.options.hide ) {
			this._hide( toHide, this.options.hide, function() {
				eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
				show();
			});
		} else {
			eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
			toHide.hide();
			show();
		}

		toHide.attr( "aria-hidden", "true" );
		eventData.oldTab.attr({
			"aria-selected": "false",
			"aria-expanded": "false"
		});
		// If we're switching tabs, remove the old tab from the tab order.
		// If we're opening from collapsed state, remove the previous tab from the tab order.
		// If we're collapsing, then keep the collapsing tab in the tab order.
		if ( toShow.length && toHide.length ) {
			eventData.oldTab.attr( "tabIndex", -1 );
		} else if ( toShow.length ) {
			this.tabs.filter(function() {
				return $( this ).attr( "tabIndex" ) === 0;
			})
			.attr( "tabIndex", -1 );
		}

		toShow.attr( "aria-hidden", "false" );
		eventData.newTab.attr({
			"aria-selected": "true",
			"aria-expanded": "true",
			tabIndex: 0
		});
	},

	_activate: function( index ) {
		var anchor,
			active = this._findActive( index );

		// trying to activate the already active panel
		if ( active[ 0 ] === this.active[ 0 ] ) {
			return;
		}

		// trying to collapse, simulate a click on the current active header
		if ( !active.length ) {
			active = this.active;
		}

		anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
		this._eventHandler({
			target: anchor,
			currentTarget: anchor,
			preventDefault: $.noop
		});
	},

	_findActive: function( index ) {
		return index === false ? $() : this.tabs.eq( index );
	},

	_getIndex: function( index ) {
		// meta-function to give users option to provide a href string instead of a numerical index.
		if ( typeof index === "string" ) {
			index = this.anchors.index( this.anchors.filter( "[href$='" + index + "']" ) );
		}

		return index;
	},

	_destroy: function() {
		if ( this.xhr ) {
			this.xhr.abort();
		}

		this.element.removeClass( "ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible" );

		this.tablist
			.removeClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
			.removeAttr( "role" );

		this.anchors
			.removeClass( "ui-tabs-anchor" )
			.removeAttr( "role" )
			.removeAttr( "tabIndex" )
			.removeUniqueId();

		this.tablist.unbind( this.eventNamespace );

		this.tabs.add( this.panels ).each(function() {
			if ( $.data( this, "ui-tabs-destroy" ) ) {
				$( this ).remove();
			} else {
				$( this )
					.removeClass( "ui-state-default ui-state-active ui-state-disabled " +
						"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel" )
					.removeAttr( "tabIndex" )
					.removeAttr( "aria-live" )
					.removeAttr( "aria-busy" )
					.removeAttr( "aria-selected" )
					.removeAttr( "aria-labelledby" )
					.removeAttr( "aria-hidden" )
					.removeAttr( "aria-expanded" )
					.removeAttr( "role" );
			}
		});

		this.tabs.each(function() {
			var li = $( this ),
				prev = li.data( "ui-tabs-aria-controls" );
			if ( prev ) {
				li
					.attr( "aria-controls", prev )
					.removeData( "ui-tabs-aria-controls" );
			} else {
				li.removeAttr( "aria-controls" );
			}
		});

		this.panels.show();

		if ( this.options.heightStyle !== "content" ) {
			this.panels.css( "height", "" );
		}
	},

	enable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === false ) {
			return;
		}

		if ( index === undefined ) {
			disabled = false;
		} else {
			index = this._getIndex( index );
			if ( $.isArray( disabled ) ) {
				disabled = $.map( disabled, function( num ) {
					return num !== index ? num : null;
				});
			} else {
				disabled = $.map( this.tabs, function( li, num ) {
					return num !== index ? num : null;
				});
			}
		}
		this._setupDisabled( disabled );
	},

	disable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === true ) {
			return;
		}

		if ( index === undefined ) {
			disabled = true;
		} else {
			index = this._getIndex( index );
			if ( $.inArray( index, disabled ) !== -1 ) {
				return;
			}
			if ( $.isArray( disabled ) ) {
				disabled = $.merge( [ index ], disabled ).sort();
			} else {
				disabled = [ index ];
			}
		}
		this._setupDisabled( disabled );
	},

	load: function( index, event ) {
		index = this._getIndex( index );
		var that = this,
			tab = this.tabs.eq( index ),
			anchor = tab.find( ".ui-tabs-anchor" ),
			panel = this._getPanelForTab( tab ),
			eventData = {
				tab: tab,
				panel: panel
			};

		// not remote
		if ( this._isLocal( anchor[ 0 ] ) ) {
			return;
		}

		this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );

		// support: jQuery <1.8
		// jQuery <1.8 returns false if the request is canceled in beforeSend,
		// but as of 1.8, $.ajax() always returns a jqXHR object.
		if ( this.xhr && this.xhr.statusText !== "canceled" ) {
			tab.addClass( "ui-tabs-loading" );
			panel.attr( "aria-busy", "true" );

			this.xhr
				.success(function( response ) {
					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout(function() {
						panel.html( response );
						that._trigger( "load", event, eventData );
					}, 1 );
				})
				.complete(function( jqXHR, status ) {
					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout(function() {
						if ( status === "abort" ) {
							that.panels.stop( false, true );
						}

						tab.removeClass( "ui-tabs-loading" );
						panel.removeAttr( "aria-busy" );

						if ( jqXHR === that.xhr ) {
							delete that.xhr;
						}
					}, 1 );
				});
		}
	},

	_ajaxSettings: function( anchor, event, eventData ) {
		var that = this;
		return {
			url: anchor.attr( "href" ),
			beforeSend: function( jqXHR, settings ) {
				return that._trigger( "beforeLoad", event,
					$.extend( { jqXHR: jqXHR, ajaxSettings: settings }, eventData ) );
			}
		};
	},

	_getPanelForTab: function( tab ) {
		var id = $( tab ).attr( "aria-controls" );
		return this.element.find( this._sanitizeSelector( "#" + id ) );
	}
});


/*!
 * jQuery UI Tooltip 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tooltip/
 */


var tooltip = $.widget( "ui.tooltip", {
	version: "1.11.3",
	options: {
		content: function() {
			// support: IE<9, Opera in jQuery <1.7
			// .text() can't accept undefined, so coerce to a string
			var title = $( this ).attr( "title" ) || "";
			// Escape title, since we're going from an attribute to raw HTML
			return $( "<a>" ).text( title ).html();
		},
		hide: true,
		// Disabled elements have inconsistent behavior across browsers (#8661)
		items: "[title]:not([disabled])",
		position: {
			my: "left top+15",
			at: "left bottom",
			collision: "flipfit flip"
		},
		show: true,
		tooltipClass: null,
		track: false,

		// callbacks
		close: null,
		open: null
	},

	_addDescribedBy: function( elem, id ) {
		var describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ );
		describedby.push( id );
		elem
			.data( "ui-tooltip-id", id )
			.attr( "aria-describedby", $.trim( describedby.join( " " ) ) );
	},

	_removeDescribedBy: function( elem ) {
		var id = elem.data( "ui-tooltip-id" ),
			describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ ),
			index = $.inArray( id, describedby );

		if ( index !== -1 ) {
			describedby.splice( index, 1 );
		}

		elem.removeData( "ui-tooltip-id" );
		describedby = $.trim( describedby.join( " " ) );
		if ( describedby ) {
			elem.attr( "aria-describedby", describedby );
		} else {
			elem.removeAttr( "aria-describedby" );
		}
	},

	_create: function() {
		this._on({
			mouseover: "open",
			focusin: "open"
		});

		// IDs of generated tooltips, needed for destroy
		this.tooltips = {};

		// IDs of parent tooltips where we removed the title attribute
		this.parents = {};

		if ( this.options.disabled ) {
			this._disable();
		}

		// Append the aria-live region so tooltips announce correctly
		this.liveRegion = $( "<div>" )
			.attr({
				role: "log",
				"aria-live": "assertive",
				"aria-relevant": "additions"
			})
			.addClass( "ui-helper-hidden-accessible" )
			.appendTo( this.document[ 0 ].body );
	},

	_setOption: function( key, value ) {
		var that = this;

		if ( key === "disabled" ) {
			this[ value ? "_disable" : "_enable" ]();
			this.options[ key ] = value;
			// disable element style changes
			return;
		}

		this._super( key, value );

		if ( key === "content" ) {
			$.each( this.tooltips, function( id, tooltipData ) {
				that._updateContent( tooltipData.element );
			});
		}
	},

	_disable: function() {
		var that = this;

		// close open tooltips
		$.each( this.tooltips, function( id, tooltipData ) {
			var event = $.Event( "blur" );
			event.target = event.currentTarget = tooltipData.element[ 0 ];
			that.close( event, true );
		});

		// remove title attributes to prevent native tooltips
		this.element.find( this.options.items ).addBack().each(function() {
			var element = $( this );
			if ( element.is( "[title]" ) ) {
				element
					.data( "ui-tooltip-title", element.attr( "title" ) )
					.removeAttr( "title" );
			}
		});
	},

	_enable: function() {
		// restore title attributes
		this.element.find( this.options.items ).addBack().each(function() {
			var element = $( this );
			if ( element.data( "ui-tooltip-title" ) ) {
				element.attr( "title", element.data( "ui-tooltip-title" ) );
			}
		});
	},

	open: function( event ) {
		var that = this,
			target = $( event ? event.target : this.element )
				// we need closest here due to mouseover bubbling,
				// but always pointing at the same event target
				.closest( this.options.items );

		// No element to show a tooltip for or the tooltip is already open
		if ( !target.length || target.data( "ui-tooltip-id" ) ) {
			return;
		}

		if ( target.attr( "title" ) ) {
			target.data( "ui-tooltip-title", target.attr( "title" ) );
		}

		target.data( "ui-tooltip-open", true );

		// kill parent tooltips, custom or native, for hover
		if ( event && event.type === "mouseover" ) {
			target.parents().each(function() {
				var parent = $( this ),
					blurEvent;
				if ( parent.data( "ui-tooltip-open" ) ) {
					blurEvent = $.Event( "blur" );
					blurEvent.target = blurEvent.currentTarget = this;
					that.close( blurEvent, true );
				}
				if ( parent.attr( "title" ) ) {
					parent.uniqueId();
					that.parents[ this.id ] = {
						element: this,
						title: parent.attr( "title" )
					};
					parent.attr( "title", "" );
				}
			});
		}

		this._updateContent( target, event );
	},

	_updateContent: function( target, event ) {
		var content,
			contentOption = this.options.content,
			that = this,
			eventType = event ? event.type : null;

		if ( typeof contentOption === "string" ) {
			return this._open( event, target, contentOption );
		}

		content = contentOption.call( target[0], function( response ) {
			// ignore async response if tooltip was closed already
			if ( !target.data( "ui-tooltip-open" ) ) {
				return;
			}
			// IE may instantly serve a cached response for ajax requests
			// delay this call to _open so the other call to _open runs first
			that._delay(function() {
				// jQuery creates a special event for focusin when it doesn't
				// exist natively. To improve performance, the native event
				// object is reused and the type is changed. Therefore, we can't
				// rely on the type being correct after the event finished
				// bubbling, so we set it back to the previous value. (#8740)
				if ( event ) {
					event.type = eventType;
				}
				this._open( event, target, response );
			});
		});
		if ( content ) {
			this._open( event, target, content );
		}
	},

	_open: function( event, target, content ) {
		var tooltipData, tooltip, events, delayedShow, a11yContent,
			positionOption = $.extend( {}, this.options.position );

		if ( !content ) {
			return;
		}

		// Content can be updated multiple times. If the tooltip already
		// exists, then just update the content and bail.
		tooltipData = this._find( target );
		if ( tooltipData ) {
			tooltipData.tooltip.find( ".ui-tooltip-content" ).html( content );
			return;
		}

		// if we have a title, clear it to prevent the native tooltip
		// we have to check first to avoid defining a title if none exists
		// (we don't want to cause an element to start matching [title])
		//
		// We use removeAttr only for key events, to allow IE to export the correct
		// accessible attributes. For mouse events, set to empty string to avoid
		// native tooltip showing up (happens only when removing inside mouseover).
		if ( target.is( "[title]" ) ) {
			if ( event && event.type === "mouseover" ) {
				target.attr( "title", "" );
			} else {
				target.removeAttr( "title" );
			}
		}

		tooltipData = this._tooltip( target );
		tooltip = tooltipData.tooltip;
		this._addDescribedBy( target, tooltip.attr( "id" ) );
		tooltip.find( ".ui-tooltip-content" ).html( content );

		// Support: Voiceover on OS X, JAWS on IE <= 9
		// JAWS announces deletions even when aria-relevant="additions"
		// Voiceover will sometimes re-read the entire log region's contents from the beginning
		this.liveRegion.children().hide();
		if ( content.clone ) {
			a11yContent = content.clone();
			a11yContent.removeAttr( "id" ).find( "[id]" ).removeAttr( "id" );
		} else {
			a11yContent = content;
		}
		$( "<div>" ).html( a11yContent ).appendTo( this.liveRegion );

		function position( event ) {
			positionOption.of = event;
			if ( tooltip.is( ":hidden" ) ) {
				return;
			}
			tooltip.position( positionOption );
		}
		if ( this.options.track && event && /^mouse/.test( event.type ) ) {
			this._on( this.document, {
				mousemove: position
			});
			// trigger once to override element-relative positioning
			position( event );
		} else {
			tooltip.position( $.extend({
				of: target
			}, this.options.position ) );
		}

		tooltip.hide();

		this._show( tooltip, this.options.show );
		// Handle tracking tooltips that are shown with a delay (#8644). As soon
		// as the tooltip is visible, position the tooltip using the most recent
		// event.
		if ( this.options.show && this.options.show.delay ) {
			delayedShow = this.delayedShow = setInterval(function() {
				if ( tooltip.is( ":visible" ) ) {
					position( positionOption.of );
					clearInterval( delayedShow );
				}
			}, $.fx.interval );
		}

		this._trigger( "open", event, { tooltip: tooltip } );

		events = {
			keyup: function( event ) {
				if ( event.keyCode === $.ui.keyCode.ESCAPE ) {
					var fakeEvent = $.Event(event);
					fakeEvent.currentTarget = target[0];
					this.close( fakeEvent, true );
				}
			}
		};

		// Only bind remove handler for delegated targets. Non-delegated
		// tooltips will handle this in destroy.
		if ( target[ 0 ] !== this.element[ 0 ] ) {
			events.remove = function() {
				this._removeTooltip( tooltip );
			};
		}

		if ( !event || event.type === "mouseover" ) {
			events.mouseleave = "close";
		}
		if ( !event || event.type === "focusin" ) {
			events.focusout = "close";
		}
		this._on( true, target, events );
	},

	close: function( event ) {
		var tooltip,
			that = this,
			target = $( event ? event.currentTarget : this.element ),
			tooltipData = this._find( target );

		// The tooltip may already be closed
		if ( !tooltipData ) {
			return;
		}

		tooltip = tooltipData.tooltip;

		// disabling closes the tooltip, so we need to track when we're closing
		// to avoid an infinite loop in case the tooltip becomes disabled on close
		if ( tooltipData.closing ) {
			return;
		}

		// Clear the interval for delayed tracking tooltips
		clearInterval( this.delayedShow );

		// only set title if we had one before (see comment in _open())
		// If the title attribute has changed since open(), don't restore
		if ( target.data( "ui-tooltip-title" ) && !target.attr( "title" ) ) {
			target.attr( "title", target.data( "ui-tooltip-title" ) );
		}

		this._removeDescribedBy( target );

		tooltipData.hiding = true;
		tooltip.stop( true );
		this._hide( tooltip, this.options.hide, function() {
			that._removeTooltip( $( this ) );
		});

		target.removeData( "ui-tooltip-open" );
		this._off( target, "mouseleave focusout keyup" );

		// Remove 'remove' binding only on delegated targets
		if ( target[ 0 ] !== this.element[ 0 ] ) {
			this._off( target, "remove" );
		}
		this._off( this.document, "mousemove" );

		if ( event && event.type === "mouseleave" ) {
			$.each( this.parents, function( id, parent ) {
				$( parent.element ).attr( "title", parent.title );
				delete that.parents[ id ];
			});
		}

		tooltipData.closing = true;
		this._trigger( "close", event, { tooltip: tooltip } );
		if ( !tooltipData.hiding ) {
			tooltipData.closing = false;
		}
	},

	_tooltip: function( element ) {
		var tooltip = $( "<div>" )
				.attr( "role", "tooltip" )
				.addClass( "ui-tooltip ui-widget ui-corner-all ui-widget-content " +
					( this.options.tooltipClass || "" ) ),
			id = tooltip.uniqueId().attr( "id" );

		$( "<div>" )
			.addClass( "ui-tooltip-content" )
			.appendTo( tooltip );

		tooltip.appendTo( this.document[0].body );

		return this.tooltips[ id ] = {
			element: element,
			tooltip: tooltip
		};
	},

	_find: function( target ) {
		var id = target.data( "ui-tooltip-id" );
		return id ? this.tooltips[ id ] : null;
	},

	_removeTooltip: function( tooltip ) {
		tooltip.remove();
		delete this.tooltips[ tooltip.attr( "id" ) ];
	},

	_destroy: function() {
		var that = this;

		// close open tooltips
		$.each( this.tooltips, function( id, tooltipData ) {
			// Delegate to close method to handle common cleanup
			var event = $.Event( "blur" ),
				element = tooltipData.element;
			event.target = event.currentTarget = element[ 0 ];
			that.close( event, true );

			// Remove immediately; destroying an open tooltip doesn't use the
			// hide animation
			$( "#" + id ).remove();

			// Restore the title
			if ( element.data( "ui-tooltip-title" ) ) {
				// If the title attribute has changed since open(), don't restore
				if ( !element.attr( "title" ) ) {
					element.attr( "title", element.data( "ui-tooltip-title" ) );
				}
				element.removeData( "ui-tooltip-title" );
			}
		});
		this.liveRegion.remove();
	}
});



}));
// Generated by CoffeeScript 1.7.1
(function() {
  var $, PivotData, addSeparators, aggregatorTemplates, aggregators, dayNamesEn, derivers, locales, mthNamesEn, naturalSort, numberFormat, pivotTableRenderer, renderers, usFmt, usFmtInt, usFmtPct, zeroPad,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    __slice = [].slice,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty;

  $ = jQuery;


  /*
  Utilities
   */

  addSeparators = function(nStr, thousandsSep, decimalSep) {
    var rgx, x, x1, x2;
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? decimalSep + x[1] : '';
    rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
      x1 = x1.replace(rgx, '$1' + thousandsSep + '$2');
    }
    return x1 + x2;
  };

  numberFormat = function(opts) {
    var defaults;
    defaults = {
      digitsAfterDecimal: 2,
      scaler: 1,
      thousandsSep: ",",
      decimalSep: ".",
      prefix: "",
      suffix: "",
      showZero: false
    };
    opts = $.extend(defaults, opts);
    return function(x) {
      var result;
      if (isNaN(x) || !isFinite(x)) {
        return "";
      }
      if (x === 0 && !opts.showZero) {
        return "";
      }
      result = addSeparators((opts.scaler * x).toFixed(opts.digitsAfterDecimal), opts.thousandsSep, opts.decimalSep);
      return "" + opts.prefix + result + opts.suffix;
    };
  };

  usFmt = numberFormat();

  usFmtInt = numberFormat({
    digitsAfterDecimal: 0
  });

  usFmtPct = numberFormat({
    digitsAfterDecimal: 1,
    scaler: 100,
    suffix: "%"
  });

  aggregatorTemplates = {
    count: function(formatter) {
      if (formatter == null) {
        formatter = usFmtInt;
      }
      return function() {
        return function(data, rowKey, colKey) {
          return {
            count: 0,
            push: function() {
              return this.count++;
            },
            value: function() {
              return this.count;
            },
            format: formatter
          };
        };
      };
    },
    countUnique: function(formatter) {
      if (formatter == null) {
        formatter = usFmtInt;
      }
      return function(_arg) {
        var attr;
        attr = _arg[0];
        return function(data, rowKey, colKey) {
          return {
            uniq: [],
            push: function(record) {
              var _ref;
              if (_ref = record[attr], __indexOf.call(this.uniq, _ref) < 0) {
                return this.uniq.push(record[attr]);
              }
            },
            value: function() {
              return this.uniq.length;
            },
            format: formatter,
            numInputs: attr != null ? 0 : 1
          };
        };
      };
    },
    listUnique: function(sep) {
      return function(_arg) {
        var attr;
        attr = _arg[0];
        return function(data, rowKey, colKey) {
          return {
            uniq: [],
            push: function(record) {
              var _ref;
              if (_ref = record[attr], __indexOf.call(this.uniq, _ref) < 0) {
                return this.uniq.push(record[attr]);
              }
            },
            value: function() {
              return this.uniq.join(sep);
            },
            format: function(x) {
              return x;
            },
            numInputs: attr != null ? 0 : 1
          };
        };
      };
    },
    sum: function(formatter) {
      if (formatter == null) {
        formatter = usFmt;
      }
      return function(_arg) {
        var attr;
        attr = _arg[0];
        return function(data, rowKey, colKey) {
          return {
            sum: 0,
            push: function(record) {
              if (!isNaN(parseFloat(record[attr]))) {
                return this.sum += parseFloat(record[attr]);
              }
            },
            value: function() {
              return this.sum;
            },
            format: formatter,
            numInputs: attr != null ? 0 : 1
          };
        };
      };
    },
    average: function(formatter) {
      if (formatter == null) {
        formatter = usFmt;
      }
      return function(_arg) {
        var attr;
        attr = _arg[0];
        return function(data, rowKey, colKey) {
          return {
            sum: 0,
            len: 0,
            push: function(record) {
              if (!isNaN(parseFloat(record[attr]))) {
                this.sum += parseFloat(record[attr]);
                return this.len++;
              }
            },
            value: function() {
              return this.sum / this.len;
            },
            format: formatter,
            numInputs: attr != null ? 0 : 1
          };
        };
      };
    },
    sumOverSum: function(formatter) {
      if (formatter == null) {
        formatter = usFmt;
      }
      return function(_arg) {
        var denom, num;
        num = _arg[0], denom = _arg[1];
        return function(data, rowKey, colKey) {
          return {
            sumNum: 0,
            sumDenom: 0,
            push: function(record) {
              if (!isNaN(parseFloat(record[num]))) {
                this.sumNum += parseFloat(record[num]);
              }
              if (!isNaN(parseFloat(record[denom]))) {
                return this.sumDenom += parseFloat(record[denom]);
              }
            },
            value: function() {
              return this.sumNum / this.sumDenom;
            },
            format: formatter,
            numInputs: (num != null) && (denom != null) ? 0 : 2
          };
        };
      };
    },
    sumOverSumBound80: function(upper, formatter) {
      if (upper == null) {
        upper = true;
      }
      if (formatter == null) {
        formatter = usFmt;
      }
      return function(_arg) {
        var denom, num;
        num = _arg[0], denom = _arg[1];
        return function(data, rowKey, colKey) {
          return {
            sumNum: 0,
            sumDenom: 0,
            push: function(record) {
              if (!isNaN(parseFloat(record[num]))) {
                this.sumNum += parseFloat(record[num]);
              }
              if (!isNaN(parseFloat(record[denom]))) {
                return this.sumDenom += parseFloat(record[denom]);
              }
            },
            value: function() {
              var sign;
              sign = upper ? 1 : -1;
              return (0.821187207574908 / this.sumDenom + this.sumNum / this.sumDenom + 1.2815515655446004 * sign * Math.sqrt(0.410593603787454 / (this.sumDenom * this.sumDenom) + (this.sumNum * (1 - this.sumNum / this.sumDenom)) / (this.sumDenom * this.sumDenom))) / (1 + 1.642374415149816 / this.sumDenom);
            },
            format: formatter,
            numInputs: (num != null) && (denom != null) ? 0 : 2
          };
        };
      };
    },
    fractionOf: function(wrapped, type, formatter) {
      if (type == null) {
        type = "total";
      }
      if (formatter == null) {
        formatter = usFmtPct;
      }
      return function() {
        var x;
        x = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
        return function(data, rowKey, colKey) {
          return {
            selector: {
              total: [[], []],
              row: [rowKey, []],
              col: [[], colKey]
            }[type],
            inner: wrapped.apply(null, x)(data, rowKey, colKey),
            push: function(record) {
              return this.inner.push(record);
            },
            format: formatter,
            value: function() {
              return this.inner.value() / data.getAggregator.apply(data, this.selector).inner.value();
            },
            numInputs: wrapped.apply(null, x)().numInputs
          };
        };
      };
    }
  };

  aggregators = (function(tpl) {
    return {
      "Count": tpl.count(usFmtInt),
      "Count Unique Values": tpl.countUnique(usFmtInt),
      "List Unique Values": tpl.listUnique(", "),
      "Sum": tpl.sum(usFmt),
      "Integer Sum": tpl.sum(usFmtInt),
      "Average": tpl.average(usFmt),
      "Sum over Sum": tpl.sumOverSum(usFmt),
      "80% Upper Bound": tpl.sumOverSumBound80(true, usFmt),
      "80% Lower Bound": tpl.sumOverSumBound80(false, usFmt),
      "Sum as Fraction of Total": tpl.fractionOf(tpl.sum(), "total", usFmtPct),
      "Sum as Fraction of Rows": tpl.fractionOf(tpl.sum(), "row", usFmtPct),
      "Sum as Fraction of Columns": tpl.fractionOf(tpl.sum(), "col", usFmtPct),
      "Count as Fraction of Total": tpl.fractionOf(tpl.count(), "total", usFmtPct),
      "Count as Fraction of Rows": tpl.fractionOf(tpl.count(), "row", usFmtPct),
      "Count as Fraction of Columns": tpl.fractionOf(tpl.count(), "col", usFmtPct)
    };
  })(aggregatorTemplates);

  renderers = {
    "Table": function(pvtData, opts) {
      return pivotTableRenderer(pvtData, opts);
    },
    "Table Barchart": function(pvtData, opts) {
      return $(pivotTableRenderer(pvtData, opts)).barchart();
    },
    "Heatmap": function(pvtData, opts) {
      return $(pivotTableRenderer(pvtData, opts)).heatmap();
    },
    "Row Heatmap": function(pvtData, opts) {
      return $(pivotTableRenderer(pvtData, opts)).heatmap("rowheatmap");
    },
    "Col Heatmap": function(pvtData, opts) {
      return $(pivotTableRenderer(pvtData, opts)).heatmap("colheatmap");
    }
  };

  locales = {
    en: {
      aggregators: aggregators,
      renderers: renderers,
      localeStrings: {
        renderError: "An error occurred rendering the PivotTable results.",
        computeError: "An error occurred computing the PivotTable results.",
        uiRenderError: "An error occurred rendering the PivotTable UI.",
        selectAll: "Select All",
        selectNone: "Select None",
        tooMany: "(too many to list)",
        filterResults: "Filter results",
        totals: "Totals",
        vs: "vs",
        by: "by"
      }
    }
  };

  mthNamesEn = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

  dayNamesEn = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

  zeroPad = function(number) {
    return ("0" + number).substr(-2, 2);
  };

  derivers = {
    bin: function(col, binWidth) {
      return function(record) {
        return record[col] - record[col] % binWidth;
      };
    },
    dateFormat: function(col, formatString, mthNames, dayNames) {
      if (mthNames == null) {
        mthNames = mthNamesEn;
      }
      if (dayNames == null) {
        dayNames = dayNamesEn;
      }
      return function(record) {
        var date;
        date = new Date(Date.parse(record[col]));
        if (isNaN(date)) {
          return "";
        }
        return formatString.replace(/%(.)/g, function(m, p) {
          switch (p) {
            case "y":
              return date.getFullYear();
            case "m":
              return zeroPad(date.getMonth() + 1);
            case "n":
              return mthNames[date.getMonth()];
            case "d":
              return zeroPad(date.getDate());
            case "w":
              return dayNames[date.getDay()];
            case "x":
              return date.getDay();
            case "H":
              return zeroPad(date.getHours());
            case "M":
              return zeroPad(date.getMinutes());
            case "S":
              return zeroPad(date.getSeconds());
            default:
              return "%" + p;
          }
        });
      };
    }
  };

  naturalSort = (function(_this) {
    return function(as, bs) {
      var a, a1, b, b1, rd, rx, rz;
      rx = /(\d+)|(\D+)/g;
      rd = /\d/;
      rz = /^0/;
      if (typeof as === "number" || typeof bs === "number") {
        if (isNaN(as)) {
          return 1;
        }
        if (isNaN(bs)) {
          return -1;
        }
        return as - bs;
      }
      a = String(as).toLowerCase();
      b = String(bs).toLowerCase();
      if (a === b) {
        return 0;
      }
      if (!(rd.test(a) && rd.test(b))) {
        return (a > b ? 1 : -1);
      }
      a = a.match(rx);
      b = b.match(rx);
      while (a.length && b.length) {
        a1 = a.shift();
        b1 = b.shift();
        if (a1 !== b1) {
          if (rd.test(a1) && rd.test(b1)) {
            return a1.replace(rz, ".0") - b1.replace(rz, ".0");
          } else {
            return (a1 > b1 ? 1 : -1);
          }
        }
      }
      return a.length - b.length;
    };
  })(this);

  $.pivotUtilities = {
    aggregatorTemplates: aggregatorTemplates,
    aggregators: aggregators,
    renderers: renderers,
    derivers: derivers,
    locales: locales,
    naturalSort: naturalSort,
    numberFormat: numberFormat
  };


  /*
  Data Model class
   */

  PivotData = (function() {
    function PivotData(input, opts) {
      this.getAggregator = __bind(this.getAggregator, this);
      this.getRowKeys = __bind(this.getRowKeys, this);
      this.getColKeys = __bind(this.getColKeys, this);
      this.sortKeys = __bind(this.sortKeys, this);
      this.arrSort = __bind(this.arrSort, this);
      this.natSort = __bind(this.natSort, this);
      this.aggregator = opts.aggregator;
      this.aggregatorName = opts.aggregatorName;
      this.colAttrs = opts.cols;
      this.rowAttrs = opts.rows;
      this.valAttrs = opts.vals;
      this.tree = {};
      this.rowKeys = [];
      this.colKeys = [];
      this.rowTotals = {};
      this.colTotals = {};
      this.allTotal = this.aggregator(this, [], []);
      this.sorted = false;
      PivotData.forEachRecord(input, opts.derivedAttributes, (function(_this) {
        return function(record) {
          if (opts.filter(record)) {
            return _this.processRecord(record);
          }
        };
      })(this));
    }

    PivotData.forEachRecord = function(input, derivedAttributes, f) {
      var addRecord, compactRecord, i, j, k, record, tblCols, _i, _len, _ref, _results, _results1;
      if ($.isEmptyObject(derivedAttributes)) {
        addRecord = f;
      } else {
        addRecord = function(record) {
          var k, v, _ref;
          for (k in derivedAttributes) {
            v = derivedAttributes[k];
            record[k] = (_ref = v(record)) != null ? _ref : record[k];
          }
          return f(record);
        };
      }
      if ($.isFunction(input)) {
        return input(addRecord);
      } else if ($.isArray(input)) {
        if ($.isArray(input[0])) {
          _results = [];
          for (i in input) {
            if (!__hasProp.call(input, i)) continue;
            compactRecord = input[i];
            if (!(i > 0)) {
              continue;
            }
            record = {};
            _ref = input[0];
            for (j in _ref) {
              if (!__hasProp.call(_ref, j)) continue;
              k = _ref[j];
              record[k] = compactRecord[j];
            }
            _results.push(addRecord(record));
          }
          return _results;
        } else {
          _results1 = [];
          for (_i = 0, _len = input.length; _i < _len; _i++) {
            record = input[_i];
            _results1.push(addRecord(record));
          }
          return _results1;
        }
      } else if (input instanceof jQuery) {
        tblCols = [];
        $("thead > tr > th", input).each(function(i) {
          return tblCols.push($(this).text());
        });
        return $("tbody > tr", input).each(function(i) {
          record = {};
          $("td", this).each(function(j) {
            return record[tblCols[j]] = $(this).text();
          });
          return addRecord(record);
        });
      } else {
        throw new Error("unknown input format");
      }
    };

    PivotData.convertToArray = function(input) {
      var result;
      result = [];
      PivotData.forEachRecord(input, {}, function(record) {
        return result.push(record);
      });
      return result;
    };

    PivotData.prototype.natSort = function(as, bs) {
      return naturalSort(as, bs);
    };

    PivotData.prototype.arrSort = function(a, b) {
      return this.natSort(a.join(), b.join());
    };

    PivotData.prototype.sortKeys = function() {
      if (!this.sorted) {
        this.rowKeys.sort(this.arrSort);
        this.colKeys.sort(this.arrSort);
      }
      return this.sorted = true;
    };

    PivotData.prototype.getColKeys = function() {
      this.sortKeys();
      return this.colKeys;
    };

    PivotData.prototype.getRowKeys = function() {
      this.sortKeys();
      return this.rowKeys;
    };

    PivotData.prototype.processRecord = function(record) {
      var colKey, flatColKey, flatRowKey, rowKey, x, _i, _j, _len, _len1, _ref, _ref1, _ref2, _ref3;
      colKey = [];
      rowKey = [];
      _ref = this.colAttrs;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        x = _ref[_i];
        colKey.push((_ref1 = record[x]) != null ? _ref1 : "null");
      }
      _ref2 = this.rowAttrs;
      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
        x = _ref2[_j];
        rowKey.push((_ref3 = record[x]) != null ? _ref3 : "null");
      }
      flatRowKey = rowKey.join(String.fromCharCode(0));
      flatColKey = colKey.join(String.fromCharCode(0));
      this.allTotal.push(record);
      if (rowKey.length !== 0) {
        if (!this.rowTotals[flatRowKey]) {
          this.rowKeys.push(rowKey);
          this.rowTotals[flatRowKey] = this.aggregator(this, rowKey, []);
        }
        this.rowTotals[flatRowKey].push(record);
      }
      if (colKey.length !== 0) {
        if (!this.colTotals[flatColKey]) {
          this.colKeys.push(colKey);
          this.colTotals[flatColKey] = this.aggregator(this, [], colKey);
        }
        this.colTotals[flatColKey].push(record);
      }
      if (colKey.length !== 0 && rowKey.length !== 0) {
        if (!this.tree[flatRowKey]) {
          this.tree[flatRowKey] = {};
        }
        if (!this.tree[flatRowKey][flatColKey]) {
          this.tree[flatRowKey][flatColKey] = this.aggregator(this, rowKey, colKey);
        }
        return this.tree[flatRowKey][flatColKey].push(record);
      }
    };

    PivotData.prototype.getAggregator = function(rowKey, colKey) {
      var agg, flatColKey, flatRowKey;
      flatRowKey = rowKey.join(String.fromCharCode(0));
      flatColKey = colKey.join(String.fromCharCode(0));
      if (rowKey.length === 0 && colKey.length === 0) {
        agg = this.allTotal;
      } else if (rowKey.length === 0) {
        agg = this.colTotals[flatColKey];
      } else if (colKey.length === 0) {
        agg = this.rowTotals[flatRowKey];
      } else {
        agg = this.tree[flatRowKey][flatColKey];
      }
      return agg != null ? agg : {
        value: (function() {
          return null;
        }),
        format: function() {
          return "";
        }
      };
    };

    return PivotData;

  })();


  /*
  Default Renderer for hierarchical table layout
   */

  pivotTableRenderer = function(pivotData, opts) {
    var aggregator, c, colAttrs, colKey, colKeys, defaults, i, j, r, result, rowAttrs, rowKey, rowKeys, spanSize, td, th, totalAggregator, tr, txt, val, x;
    defaults = {
      localeStrings: {
        totals: "Totals"
      }
    };
    opts = $.extend(defaults, opts);
    colAttrs = pivotData.colAttrs;
    rowAttrs = pivotData.rowAttrs;
    rowKeys = pivotData.getRowKeys();
    colKeys = pivotData.getColKeys();
    result = document.createElement("table");
    result.className = "pvtTable";
    spanSize = function(arr, i, j) {
      var len, noDraw, stop, x, _i, _j;
      if (i !== 0) {
        noDraw = true;
        for (x = _i = 0; 0 <= j ? _i <= j : _i >= j; x = 0 <= j ? ++_i : --_i) {
          if (arr[i - 1][x] !== arr[i][x]) {
            noDraw = false;
          }
        }
        if (noDraw) {
          return -1;
        }
      }
      len = 0;
      while (i + len < arr.length) {
        stop = false;
        for (x = _j = 0; 0 <= j ? _j <= j : _j >= j; x = 0 <= j ? ++_j : --_j) {
          if (arr[i][x] !== arr[i + len][x]) {
            stop = true;
          }
        }
        if (stop) {
          break;
        }
        len++;
      }
      return len;
    };
    for (j in colAttrs) {
      if (!__hasProp.call(colAttrs, j)) continue;
      c = colAttrs[j];
      tr = document.createElement("tr");
      if (parseInt(j) === 0 && rowAttrs.length !== 0) {
        th = document.createElement("th");
        th.setAttribute("colspan", rowAttrs.length);
        th.setAttribute("rowspan", colAttrs.length);
        tr.appendChild(th);
      }
      th = document.createElement("th");
      th.className = "pvtAxisLabel";
      th.textContent = c;
      tr.appendChild(th);
      for (i in colKeys) {
        if (!__hasProp.call(colKeys, i)) continue;
        colKey = colKeys[i];
        x = spanSize(colKeys, parseInt(i), parseInt(j));
        if (x !== -1) {
          th = document.createElement("th");
          th.className = "pvtColLabel";
          th.textContent = colKey[j];
          th.setAttribute("colspan", x);
          if (parseInt(j) === colAttrs.length - 1 && rowAttrs.length !== 0) {
            th.setAttribute("rowspan", 2);
          }
          tr.appendChild(th);
        }
      }
      if (parseInt(j) === 0) {
        th = document.createElement("th");
        th.className = "pvtTotalLabel";
        th.innerHTML = opts.localeStrings.totals;
        th.setAttribute("rowspan", colAttrs.length + (rowAttrs.length === 0 ? 0 : 1));
        tr.appendChild(th);
      }
      result.appendChild(tr);
    }
    if (rowAttrs.length !== 0) {
      tr = document.createElement("tr");
      for (i in rowAttrs) {
        if (!__hasProp.call(rowAttrs, i)) continue;
        r = rowAttrs[i];
        th = document.createElement("th");
        th.className = "pvtAxisLabel";
        th.textContent = r;
        tr.appendChild(th);
      }
      th = document.createElement("th");
      if (colAttrs.length === 0) {
        th.className = "pvtTotalLabel";
        th.innerHTML = opts.localeStrings.totals;
      }
      tr.appendChild(th);
      result.appendChild(tr);
    }
    for (i in rowKeys) {
      if (!__hasProp.call(rowKeys, i)) continue;
      rowKey = rowKeys[i];
      tr = document.createElement("tr");
      for (j in rowKey) {
        if (!__hasProp.call(rowKey, j)) continue;
        txt = rowKey[j];
        x = spanSize(rowKeys, parseInt(i), parseInt(j));
        if (x !== -1) {
          th = document.createElement("th");
          th.className = "pvtRowLabel";
          th.textContent = txt;
          th.setAttribute("rowspan", x);
          if (parseInt(j) === rowAttrs.length - 1 && colAttrs.length !== 0) {
            th.setAttribute("colspan", 2);
          }
          tr.appendChild(th);
        }
      }
      for (j in colKeys) {
        if (!__hasProp.call(colKeys, j)) continue;
        colKey = colKeys[j];
        aggregator = pivotData.getAggregator(rowKey, colKey);
        val = aggregator.value();
        td = document.createElement("td");
        td.className = "pvtVal row" + i + " col" + j;
        td.innerHTML = aggregator.format(val);
        td.setAttribute("data-value", val);
        tr.appendChild(td);
      }
      totalAggregator = pivotData.getAggregator(rowKey, []);
      val = totalAggregator.value();
      td = document.createElement("td");
      td.className = "pvtTotal rowTotal";
      td.innerHTML = totalAggregator.format(val);
      td.setAttribute("data-value", val);
      td.setAttribute("data-for", "row" + i);
      tr.appendChild(td);
      result.appendChild(tr);
    }
    tr = document.createElement("tr");
    th = document.createElement("th");
    th.className = "pvtTotalLabel";
    th.innerHTML = opts.localeStrings.totals;
    th.setAttribute("colspan", rowAttrs.length + (colAttrs.length === 0 ? 0 : 1));
    tr.appendChild(th);
    for (j in colKeys) {
      if (!__hasProp.call(colKeys, j)) continue;
      colKey = colKeys[j];
      totalAggregator = pivotData.getAggregator([], colKey);
      val = totalAggregator.value();
      td = document.createElement("td");
      td.className = "pvtTotal colTotal";
      td.innerHTML = totalAggregator.format(val);
      td.setAttribute("data-value", val);
      td.setAttribute("data-for", "col" + j);
      tr.appendChild(td);
    }
    totalAggregator = pivotData.getAggregator([], []);
    val = totalAggregator.value();
    td = document.createElement("td");
    td.className = "pvtGrandTotal";
    td.innerHTML = totalAggregator.format(val);
    td.setAttribute("data-value", val);
    tr.appendChild(td);
    result.appendChild(tr);
    result.setAttribute("data-numrows", rowKeys.length);
    result.setAttribute("data-numcols", colKeys.length);
    return result;
  };


  /*
  Pivot Table core: create PivotData object and call Renderer on it
   */

  $.fn.pivot = function(input, opts) {
    var defaults, e, pivotData, result, x;
    defaults = {
      cols: [],
      rows: [],
      filter: function() {
        return true;
      },
      aggregator: aggregatorTemplates.count()(),
      aggregatorName: "Count",
      derivedAttributes: {},
      renderer: pivotTableRenderer,
      rendererOptions: null,
      localeStrings: locales.en.localeStrings
    };
    opts = $.extend(defaults, opts);
    result = null;
    try {
      pivotData = new PivotData(input, opts);
      try {
        result = opts.renderer(pivotData, opts.rendererOptions);
      } catch (_error) {
        e = _error;
        if (typeof console !== "undefined" && console !== null) {
          console.error(e.stack);
        }
        result = $("<span>").html(opts.localeStrings.renderError);
      }
    } catch (_error) {
      e = _error;
      if (typeof console !== "undefined" && console !== null) {
        console.error(e.stack);
      }
      result = $("<span>").html(opts.localeStrings.computeError);
    }
    x = this[0];
    while (x.hasChildNodes()) {
      x.removeChild(x.lastChild);
    }
    return this.append(result);
  };


  /*
  Pivot Table UI: calls Pivot Table core above with options set by user
   */

  $.fn.pivotUI = function(input, inputOpts, overwrite, locale) {
    var a, aggregator, attrLength, axisValues, c, colList, defaults, e, existingOpts, i, initialRender, k, opts, pivotTable, refresh, refreshDelayed, renderer, rendererControl, shownAttributes, tblCols, tr1, tr2, uiTable, unusedAttrsVerticalAutoOverride, x, _fn, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref, _ref1, _ref2, _ref3, _ref4;
    if (overwrite == null) {
      overwrite = false;
    }
    if (locale == null) {
      locale = "en";
    }
    defaults = {
      derivedAttributes: {},
      aggregators: locales[locale].aggregators,
      renderers: locales[locale].renderers,
      hiddenAttributes: [],
      menuLimit: 200,
      cols: [],
      rows: [],
      vals: [],
      exclusions: {},
      unusedAttrsVertical: "auto",
      autoSortUnusedAttrs: false,
      rendererOptions: {
        localeStrings: locales[locale].localeStrings
      },
      onRefresh: null,
      filter: function() {
        return true;
      },
      localeStrings: locales[locale].localeStrings
    };
    existingOpts = this.data("pivotUIOptions");
    if ((existingOpts == null) || overwrite) {
      opts = $.extend(defaults, inputOpts);
    } else {
      opts = existingOpts;
    }
    try {
      input = PivotData.convertToArray(input);
      tblCols = (function() {
        var _ref, _results;
        _ref = input[0];
        _results = [];
        for (k in _ref) {
          if (!__hasProp.call(_ref, k)) continue;
          _results.push(k);
        }
        return _results;
      })();
      _ref = opts.derivedAttributes;
      for (c in _ref) {
        if (!__hasProp.call(_ref, c)) continue;
        if ((__indexOf.call(tblCols, c) < 0)) {
          tblCols.push(c);
        }
      }
      axisValues = {};
      for (_i = 0, _len = tblCols.length; _i < _len; _i++) {
        x = tblCols[_i];
        axisValues[x] = {};
      }
      PivotData.forEachRecord(input, opts.derivedAttributes, function(record) {
        var v, _base, _results;
        _results = [];
        for (k in record) {
          if (!__hasProp.call(record, k)) continue;
          v = record[k];
          if (!(opts.filter(record))) {
            continue;
          }
          if (v == null) {
            v = "null";
          }
          if ((_base = axisValues[k])[v] == null) {
            _base[v] = 0;
          }
          _results.push(axisValues[k][v]++);
        }
        return _results;
      });
      uiTable = $("<table cellpadding='5'>");
      rendererControl = $("<td>");
      renderer = $("<select class='pvtRenderer'>").appendTo(rendererControl).bind("change", function() {
        return refresh();
      });
      _ref1 = opts.renderers;
      for (x in _ref1) {
        if (!__hasProp.call(_ref1, x)) continue;
        $("<option>").val(x).html(x).appendTo(renderer);
      }
      colList = $("<td class='pvtAxisContainer pvtUnused'>");
      shownAttributes = (function() {
        var _j, _len1, _results;
        _results = [];
        for (_j = 0, _len1 = tblCols.length; _j < _len1; _j++) {
          c = tblCols[_j];
          if (__indexOf.call(opts.hiddenAttributes, c) < 0) {
            _results.push(c);
          }
        }
        return _results;
      })();
      unusedAttrsVerticalAutoOverride = false;
      if (opts.unusedAttrsVertical === "auto") {
        attrLength = 0;
        for (_j = 0, _len1 = shownAttributes.length; _j < _len1; _j++) {
          a = shownAttributes[_j];
          attrLength += a.length;
        }
        unusedAttrsVerticalAutoOverride = attrLength > 120;
      }
      if (opts.unusedAttrsVertical === true || unusedAttrsVerticalAutoOverride) {
        colList.addClass('pvtVertList');
      } else {
        colList.addClass('pvtHorizList');
      }
      _fn = function(c) {
        var attrElem, btns, checkContainer, filterItem, filterItemExcluded, hasExcludedItem, keys, showFilterList, triangleLink, updateFilter, v, valueList, _k, _len2, _ref2;
        keys = (function() {
          var _results;
          _results = [];
          for (k in axisValues[c]) {
            _results.push(k);
          }
          return _results;
        })();
        hasExcludedItem = false;
        valueList = $("<div>").addClass('pvtFilterBox').hide();
        valueList.append($("<h4>").text("" + c + " (" + keys.length + ")"));
        if (keys.length > opts.menuLimit) {
          valueList.append($("<p>").html(opts.localeStrings.tooMany));
        } else {
          btns = $("<p>").appendTo(valueList);
          btns.append($("<button>").html(opts.localeStrings.selectAll).bind("click", function() {
            return valueList.find("input:visible").prop("checked", true);
          }));
          btns.append($("<button>").html(opts.localeStrings.selectNone).bind("click", function() {
            return valueList.find("input:visible").prop("checked", false);
          }));
          btns.append($("<input>").addClass("pvtSearch").attr("placeholder", opts.localeStrings.filterResults).bind("keyup", function() {
            var filter;
            filter = $(this).val().toLowerCase();
            return $(this).parents(".pvtFilterBox").find('label span').each(function() {
              var testString;
              testString = $(this).text().toLowerCase().indexOf(filter);
              if (testString !== -1) {
                return $(this).parent().show();
              } else {
                return $(this).parent().hide();
              }
            });
          }));
          checkContainer = $("<div>").addClass("pvtCheckContainer").appendTo(valueList);
          _ref2 = keys.sort(naturalSort);
          for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
            k = _ref2[_k];
            v = axisValues[c][k];
            filterItem = $("<label>");
            filterItemExcluded = opts.exclusions[c] ? (__indexOf.call(opts.exclusions[c], k) >= 0) : false;
            hasExcludedItem || (hasExcludedItem = filterItemExcluded);
            $("<input type='checkbox' class='pvtFilter'>").attr("checked", !filterItemExcluded).data("filter", [c, k]).appendTo(filterItem);
            filterItem.append($("<span>").text("" + k + " (" + v + ")"));
            checkContainer.append($("<p>").append(filterItem));
          }
        }
        updateFilter = function() {
          var unselectedCount;
          unselectedCount = $(valueList).find("[type='checkbox']").length - $(valueList).find("[type='checkbox']:checked").length;
          if (unselectedCount > 0) {
            attrElem.addClass("pvtFilteredAttribute");
          } else {
            attrElem.removeClass("pvtFilteredAttribute");
          }
          if (keys.length > opts.menuLimit) {
            return valueList.toggle();
          } else {
            return valueList.toggle(0, refresh);
          }
        };
        $("<p>").appendTo(valueList).append($("<button>").text("OK").bind("click", updateFilter));
        showFilterList = function(e) {
          valueList.css({
            left: e.pageX,
            top: e.pageY
          }).toggle();
          $('.pvtSearch').val('');
          return $('label').show();
        };
        triangleLink = $("<span class='pvtTriangle'>").html(" &#x25BE;").bind("click", showFilterList);
        attrElem = $("<li class='axis_" + i + "'>").append($("<span class='pvtAttr'>").text(c).data("attrName", c).append(triangleLink));
        if (hasExcludedItem) {
          attrElem.addClass('pvtFilteredAttribute');
        }
        colList.append(attrElem).append(valueList);
        return attrElem.bind("dblclick", showFilterList);
      };
      for (i in shownAttributes) {
        c = shownAttributes[i];
        _fn(c);
      }
      tr1 = $("<tr>").appendTo(uiTable);
      aggregator = $("<select class='pvtAggregator'>").bind("change", function() {
        return refresh();
      });
      _ref2 = opts.aggregators;
      for (x in _ref2) {
        if (!__hasProp.call(_ref2, x)) continue;
        aggregator.append($("<option>").val(x).html(x));
      }
      $("<td class='pvtVals'>").appendTo(tr1).append(aggregator).append($("<br>"));
      $("<td class='pvtAxisContainer pvtHorizList pvtCols'>").appendTo(tr1);
      tr2 = $("<tr>").appendTo(uiTable);
      tr2.append($("<td valign='top' class='pvtAxisContainer pvtRows'>"));
      pivotTable = $("<td valign='top' class='pvtRendererArea'>").appendTo(tr2);
      if (opts.unusedAttrsVertical === true || unusedAttrsVerticalAutoOverride) {
        uiTable.find('tr:nth-child(1)').prepend(rendererControl);
        uiTable.find('tr:nth-child(2)').prepend(colList);
      } else {
        uiTable.prepend($("<tr>").append(rendererControl).append(colList));
      }
      this.html(uiTable);
      _ref3 = opts.cols;
      for (_k = 0, _len2 = _ref3.length; _k < _len2; _k++) {
        x = _ref3[_k];
        this.find(".pvtCols").append(this.find(".axis_" + (shownAttributes.indexOf(x))));
      }
      _ref4 = opts.rows;
      for (_l = 0, _len3 = _ref4.length; _l < _len3; _l++) {
        x = _ref4[_l];
        this.find(".pvtRows").append(this.find(".axis_" + (shownAttributes.indexOf(x))));
      }
      if (opts.aggregatorName != null) {
        this.find(".pvtAggregator").val(opts.aggregatorName);
      }
      if (opts.rendererName != null) {
        this.find(".pvtRenderer").val(opts.rendererName);
      }
      initialRender = true;
      refreshDelayed = (function(_this) {
        return function() {
          var attr, exclusions, natSort, newDropdown, numInputsToProcess, pivotUIOptions, pvtVals, subopts, unusedAttrsContainer, vals, _len4, _m, _n, _ref5;
          subopts = {
            derivedAttributes: opts.derivedAttributes,
            localeStrings: opts.localeStrings,
            rendererOptions: opts.rendererOptions,
            cols: [],
            rows: []
          };
          numInputsToProcess = (_ref5 = opts.aggregators[aggregator.val()]([])().numInputs) != null ? _ref5 : 0;
          vals = [];
          _this.find(".pvtRows li span.pvtAttr").each(function() {
            return subopts.rows.push($(this).data("attrName"));
          });
          _this.find(".pvtCols li span.pvtAttr").each(function() {
            return subopts.cols.push($(this).data("attrName"));
          });
          _this.find(".pvtVals select.pvtAttrDropdown").each(function() {
            if (numInputsToProcess === 0) {
              return $(this).remove();
            } else {
              numInputsToProcess--;
              if ($(this).val() !== "") {
                return vals.push($(this).val());
              }
            }
          });
          if (numInputsToProcess !== 0) {
            pvtVals = _this.find(".pvtVals");
            for (x = _m = 0; 0 <= numInputsToProcess ? _m < numInputsToProcess : _m > numInputsToProcess; x = 0 <= numInputsToProcess ? ++_m : --_m) {
              newDropdown = $("<select class='pvtAttrDropdown'>").append($("<option>")).bind("change", function() {
                return refresh();
              });
              for (_n = 0, _len4 = shownAttributes.length; _n < _len4; _n++) {
                attr = shownAttributes[_n];
                newDropdown.append($("<option>").val(attr).text(attr));
              }
              pvtVals.append(newDropdown);
            }
          }
          if (initialRender) {
            vals = opts.vals;
            i = 0;
            _this.find(".pvtVals select.pvtAttrDropdown").each(function() {
              $(this).val(vals[i]);
              return i++;
            });
            initialRender = false;
          }
          subopts.aggregatorName = aggregator.val();
          subopts.vals = vals;
          subopts.aggregator = opts.aggregators[aggregator.val()](vals);
          subopts.renderer = opts.renderers[renderer.val()];
          exclusions = {};
          _this.find('input.pvtFilter').not(':checked').each(function() {
            var filter;
            filter = $(this).data("filter");
            if (exclusions[filter[0]] != null) {
              return exclusions[filter[0]].push(filter[1]);
            } else {
              return exclusions[filter[0]] = [filter[1]];
            }
          });
          subopts.filter = function(record) {
            var excludedItems, _ref6;
            if (!opts.filter(record)) {
              return false;
            }
            for (k in exclusions) {
              excludedItems = exclusions[k];
              if (_ref6 = "" + record[k], __indexOf.call(excludedItems, _ref6) >= 0) {
                return false;
              }
            }
            return true;
          };
          pivotTable.pivot(input, subopts);
          pivotUIOptions = $.extend(opts, {
            cols: subopts.cols,
            rows: subopts.rows,
            vals: vals,
            exclusions: exclusions,
            aggregatorName: aggregator.val(),
            rendererName: renderer.val()
          });
          _this.data("pivotUIOptions", pivotUIOptions);
          if (opts.autoSortUnusedAttrs) {
            natSort = $.pivotUtilities.naturalSort;
            unusedAttrsContainer = _this.find("td.pvtUnused.pvtAxisContainer");
            $(unusedAttrsContainer).children("li").sort(function(a, b) {
              return natSort($(a).text(), $(b).text());
            }).appendTo(unusedAttrsContainer);
          }
          pivotTable.css("opacity", 1);
          if (opts.onRefresh != null) {
            return opts.onRefresh(pivotUIOptions);
          }
        };
      })(this);
      refresh = (function(_this) {
        return function() {
          pivotTable.css("opacity", 0.5);
          return setTimeout(refreshDelayed, 10);
        };
      })(this);
      refresh();
      this.find(".pvtAxisContainer").sortable({
        update: function(e, ui) {
          if (ui.sender == null) {
            return refresh();
          }
        },
        connectWith: this.find(".pvtAxisContainer"),
        items: 'li',
        placeholder: 'pvtPlaceholder'
      });
    } catch (_error) {
      e = _error;
      if (typeof console !== "undefined" && console !== null) {
        console.error(e.stack);
      }
      this.html(opts.localeStrings.uiRenderError);
    }
    return this;
  };


  /*
  Heatmap post-processing
   */

  $.fn.heatmap = function(scope) {
    var colorGen, heatmapper, i, j, numCols, numRows, _i, _j;
    if (scope == null) {
      scope = "heatmap";
    }
    numRows = this.data("numrows");
    numCols = this.data("numcols");
    colorGen = function(color, min, max) {
      var hexGen;
      hexGen = (function() {
        switch (color) {
          case "red":
            return function(hex) {
              return "ff" + hex + hex;
            };
          case "green":
            return function(hex) {
              return "" + hex + "ff" + hex;
            };
          case "blue":
            return function(hex) {
              return "" + hex + hex + "ff";
            };
        }
      })();
      return function(x) {
        var hex, intensity;
        intensity = 255 - Math.round(255 * (x - min) / (max - min));
        hex = intensity.toString(16).split(".")[0];
        if (hex.length === 1) {
          hex = 0 + hex;
        }
        return hexGen(hex);
      };
    };
    heatmapper = (function(_this) {
      return function(scope, color) {
        var colorFor, forEachCell, values;
        forEachCell = function(f) {
          return _this.find(scope).each(function() {
            var x;
            x = $(this).data("value");
            if ((x != null) && isFinite(x)) {
              return f(x, $(this));
            }
          });
        };
        values = [];
        forEachCell(function(x) {
          return values.push(x);
        });
        colorFor = colorGen(color, Math.min.apply(Math, values), Math.max.apply(Math, values));
        return forEachCell(function(x, elem) {
          return elem.css("background-color", "#" + colorFor(x));
        });
      };
    })(this);
    switch (scope) {
      case "heatmap":
        heatmapper(".pvtVal", "red");
        break;
      case "rowheatmap":
        for (i = _i = 0; 0 <= numRows ? _i < numRows : _i > numRows; i = 0 <= numRows ? ++_i : --_i) {
          heatmapper(".pvtVal.row" + i, "red");
        }
        break;
      case "colheatmap":
        for (j = _j = 0; 0 <= numCols ? _j < numCols : _j > numCols; j = 0 <= numCols ? ++_j : --_j) {
          heatmapper(".pvtVal.col" + j, "red");
        }
    }
    heatmapper(".pvtTotal.rowTotal", "red");
    heatmapper(".pvtTotal.colTotal", "red");
    return this;
  };


  /*
  Barchart post-processing
   */

  $.fn.barchart = function() {
    var barcharter, i, numCols, numRows, _i;
    numRows = this.data("numrows");
    numCols = this.data("numcols");
    barcharter = (function(_this) {
      return function(scope) {
        var forEachCell, max, scaler, values;
        forEachCell = function(f) {
          return _this.find(scope).each(function() {
            var x;
            x = $(this).data("value");
            if ((x != null) && isFinite(x)) {
              return f(x, $(this));
            }
          });
        };
        values = [];
        forEachCell(function(x) {
          return values.push(x);
        });
        max = Math.max.apply(Math, values);
        scaler = function(x) {
          return 100 * x / (1.4 * max);
        };
        return forEachCell(function(x, elem) {
          var text, wrapper;
          text = elem.text();
          wrapper = $("<div>").css({
            "position": "relative",
            "height": "55px"
          });
          wrapper.append($("<div>").css({
            "position": "absolute",
            "bottom": 0,
            "left": 0,
            "right": 0,
            "height": scaler(x) + "%",
            "background-color": "gray"
          }));
          wrapper.append($("<div>").text(text).css({
            "position": "relative",
            "padding-left": "5px",
            "padding-right": "5px"
          }));
          return elem.css({
            "padding": 0,
            "padding-top": "5px",
            "text-align": "center"
          }).html(wrapper);
        });
      };
    })(this);
    for (i = _i = 0; 0 <= numRows ? _i < numRows : _i > numRows; i = 0 <= numRows ? ++_i : --_i) {
      barcharter(".pvtVal.row" + i);
    }
    barcharter(".pvtTotal.colTotal");
    return this;
  };

}).call(this);

// Generated by CoffeeScript 1.7.1
(function() {
  var $;

  $ = jQuery;

  $.pivotUtilities.d3_renderers = {
    Treemap: function(pivotData, opts) {
      var addToTree, color, defaults, height, margin, result, rowKey, tree, treemap, value, width, _i, _len, _ref;
      defaults = {
        localeStrings: {}
      };
      opts = $.extend(defaults, opts);
      result = $("<div style='width: 100%; height: 100%;'>");
      tree = {
        name: "All",
        children: []
      };
      addToTree = function(tree, path, value) {
        var child, newChild, x, _i, _len, _ref;
        if (path.length === 0) {
          tree.value = value;
          return;
        }
        if (tree.children == null) {
          tree.children = [];
        }
        x = path.shift();
        _ref = tree.children;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          child = _ref[_i];
          if (!(child.name === x)) {
            continue;
          }
          addToTree(child, path, value);
          return;
        }
        newChild = {
          name: x
        };
        addToTree(newChild, path, value);
        return tree.children.push(newChild);
      };
      _ref = pivotData.getRowKeys();
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        rowKey = _ref[_i];
        value = pivotData.getAggregator(rowKey, []).value();
        if (value != null) {
          addToTree(tree, rowKey, value);
        }
      }
      color = d3.scale.category10();
      width = $(window).width() / 1.4;
      height = $(window).height() / 1.4;
      margin = 10;
      treemap = d3.layout.treemap().size([width, height]).sticky(true).value(function(d) {
        return d.size;
      });
      d3.select(result[0]).append("div").style("position", "relative").style("width", (width + margin * 2) + "px").style("height", (height + margin * 2) + "px").style("left", margin + "px").style("top", margin + "px").datum(tree).selectAll(".node").data(treemap.padding([15, 0, 0, 0]).value(function(d) {
        return d.value;
      }).nodes).enter().append("div").attr("class", "node").style("background", function(d) {
        if (d.children != null) {
          return "lightgrey";
        } else {
          return color(d.name);
        }
      }).text(function(d) {
        return d.name;
      }).call(function() {
        this.style("left", function(d) {
          return d.x + "px";
        }).style("top", function(d) {
          return d.y + "px";
        }).style("width", function(d) {
          return Math.max(0, d.dx - 1) + "px";
        }).style("height", function(d) {
          return Math.max(0, d.dy - 1) + "px";
        });
      });
      return result;
    }
  };

}).call(this);

(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,g=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?(this._wrapped=n,void 0):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:g&&n.every===g?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:E(n,function(n){return n===t})},w.invoke=function(n,t){var r=o.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.findWhere=function(n,t){return w.where(n,t,!0)},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;e.computed>a&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var k=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index<t.index?-1:1}),"value")};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;u>r.call(e,n[o])?i=o+1:a=o}return i},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,o.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),r=Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;)i[u++]=n,n+=r;return i},w.bind=function(n,t){if(n.bind===j&&j)return j.apply(n,o.call(arguments,1));var r=o.call(arguments,2);return function(){return n.apply(t,r.concat(o.call(arguments)))}},w.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},w.bindAll=function(n){var t=o.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a))},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var I=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==u){if(a=n.length,o=a==t.length)for(;a--&&(o=I(n[a],t[a],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&I(n[s],t[s],r,e))))break;if(o){for(s in t)if(w.has(t,s)&&!a--)break;o=!a}}return r.pop(),e.pop(),o};w.isEqual=function(n,t){return I(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n}),w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return n===void 0},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=w.invert(M.escape);var S={escape:RegExp("["+w.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(M.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(S[n],function(t){return M[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(B,function(n){return"\\"+q[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,w);var c=function(n){return e.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},w.chain=function(n){return w(n).chain()};var D=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);
// Backbone.js 0.9.2

// (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Backbone may be freely distributed under the MIT license.
// For all details and documentation:
// http://backbonejs.org
(function(){var l=this,y=l.Backbone,z=Array.prototype.slice,A=Array.prototype.splice,g;g="undefined"!==typeof exports?exports:l.Backbone={};g.VERSION="0.9.2";var f=l._;!f&&"undefined"!==typeof require&&(f=require("underscore"));var i=l.jQuery||l.Zepto||l.ender;g.setDomLibrary=function(a){i=a};g.noConflict=function(){l.Backbone=y;return this};g.emulateHTTP=!1;g.emulateJSON=!1;var p=/\s+/,k=g.Events={on:function(a,b,c){var d,e,f,g,j;if(!b)return this;a=a.split(p);for(d=this._callbacks||(this._callbacks=
{});e=a.shift();)f=(j=d[e])?j.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:j?j.next:f};return this},off:function(a,b,c){var d,e,h,g,j,q;if(e=this._callbacks){if(!a&&!b&&!c)return delete this._callbacks,this;for(a=a?a.split(p):f.keys(e);d=a.shift();)if(h=e[d],delete e[d],h&&(b||c))for(g=h.tail;(h=h.next)!==g;)if(j=h.callback,q=h.context,b&&j!==b||c&&q!==c)this.on(d,j,q);return this}},trigger:function(a){var b,c,d,e,f,g;if(!(d=this._callbacks))return this;f=d.all;a=a.split(p);for(g=
z.call(arguments,1);b=a.shift();){if(c=d[b])for(e=c.tail;(c=c.next)!==e;)c.callback.apply(c.context||this,g);if(c=f){e=c.tail;for(b=[b].concat(g);(c=c.next)!==e;)c.callback.apply(c.context||this,b)}}return this}};k.bind=k.on;k.unbind=k.off;var o=g.Model=function(a,b){var c;a||(a={});b&&b.parse&&(a=this.parse(a));if(c=n(this,"defaults"))a=f.extend({},c,a);b&&b.collection&&(this.collection=b.collection);this.attributes={};this._escapedAttributes={};this.cid=f.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(a,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=f.clone(this.attributes);this.initialize.apply(this,arguments)};f.extend(o.prototype,k,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;b=this.get(a);return this._escapedAttributes[a]=f.escape(null==
b?"":""+b)},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c||(c={});if(!d)return this;d instanceof o&&(d=d.attributes);if(c.unset)for(e in d)d[e]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var b=c.changes={},h=this.attributes,g=this._escapedAttributes,j=this._previousAttributes||{};for(e in d){a=d[e];if(!f.isEqual(h[e],a)||c.unset&&f.has(h,e))delete g[e],(c.silent?this._silent:
b)[e]=!0;c.unset?delete h[e]:h[e]=a;!f.isEqual(j[e],a)||f.has(h,e)!=f.has(j,e)?(this.changed[e]=a,c.silent||(this._pending[e]=!0)):(delete this.changed[e],delete this._pending[e])}c.silent||this.change(c);return this},unset:function(a,b){(b||(b={})).unset=!0;return this.set(a,null,b)},clear:function(a){(a||(a={})).unset=!0;return this.set(f.clone(this.attributes),a)},fetch:function(a){var a=a?f.clone(a):{},b=this,c=a.success;a.success=function(d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)};
a.error=g.wrapError(a.error,b,a);return(this.sync||g.sync).call(this,"read",this,a)},save:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c=c?f.clone(c):{};if(c.wait){if(!this._validate(d,c))return!1;e=f.clone(this.attributes)}a=f.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?a:c))return!1;var h=this,i=c.success;c.success=function(a,b,e){b=h.parse(a,e);if(c.wait){delete c.wait;b=f.extend(d||{},b)}if(!h.set(b,c))return false;i?i(h,a):h.trigger("sync",h,a,c)};c.error=g.wrapError(c.error,
h,c);b=this.isNew()?"create":"update";b=(this.sync||g.sync).call(this,b,this,c);c.wait&&this.set(e,a);return b},destroy:function(a){var a=a?f.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d(),!1;a.success=function(e){a.wait&&d();c?c(b,e):b.trigger("sync",b,e,a)};a.error=g.wrapError(a.error,b,a);var e=(this.sync||g.sync).call(this,"delete",this,a);a.wait||d();return e},url:function(){var a=n(this,"urlRoot")||n(this.collection,"url")||t();
return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent)this._pending[c]=!0;var d=f.extend({},a.changes,this._silent);this._silent={};for(c in d)this.trigger("change:"+c,this,this.get(c),a);if(b)return this;for(;!f.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,a);for(c in this.changed)!this._pending[c]&&!this._silent[c]&&delete this.changed[c];this._previousAttributes=f.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(a){return!arguments.length?!f.isEmpty(this.changed):f.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var b,c=!1,d=this._previousAttributes,e;for(e in a)if(!f.isEqual(d[e],b=a[e]))(c||(c={}))[e]=b;return c},previous:function(a){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;var a=f.extend({},this.attributes,a),c=this.validate(a,b);if(!c)return!0;b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b);return!1}});var r=g.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);b.comparator&&(this.comparator=b.comparator);
this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,{silent:!0,parse:b.parse})};f.extend(r.prototype,k,{model:o,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,b){var c,d,e,g,i,j={},k={},l=[];b||(b={});a=f.isArray(a)?a.slice():[a];c=0;for(d=a.length;c<d;c++){if(!(e=a[c]=this._prepareModel(a[c],b)))throw Error("Can't add an invalid model to a collection");g=e.cid;i=e.id;j[g]||this._byCid[g]||null!=i&&(k[i]||this._byId[i])?
l.push(c):j[g]=k[i]=e}for(c=l.length;c--;)a.splice(l[c],1);c=0;for(d=a.length;c<d;c++)(e=a[c]).on("all",this._onModelEvent,this),this._byCid[e.cid]=e,null!=e.id&&(this._byId[e.id]=e);this.length+=d;A.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a));this.comparator&&this.sort({silent:!0});if(b.silent)return this;c=0;for(d=this.models.length;c<d;c++)if(j[(e=this.models[c]).cid])b.index=c,e.trigger("add",e,this,b);return this},remove:function(a,b){var c,d,e,g;b||(b={});a=f.isArray(a)?
a.slice():[a];c=0;for(d=a.length;c<d;c++)if(g=this.getByCid(a[c])||this.get(a[c]))delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,b);return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,f.extend({at:0},b));return a},
shift:function(a){var b=this.at(0);this.remove(b,a);return b},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=f.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(b):this.models.sort(b);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return f.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]);b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);this._reset();this.add(a,f.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a=a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d,
e,f){b[a.add?"add":"reset"](b.parse(d,f),a);c&&c(b,d)};a.error=g.wrapError(a.error,b,a);return(this.sync||g.sync).call(this,"read",this,a)},create:function(a,b){var c=this,b=b?f.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;b.success=function(e,f){b.wait&&c.add(e,b);d?d(e,f):e.trigger("sync",a,f,b)};a.save(null,b);return a},parse:function(a){return a},chain:function(){return f(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(a,b){b||(b={});a instanceof o?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1));return a},_removeReference:function(a){this==a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,
arguments))}});f.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(a){r.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)))}});var u=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},B=/:\w+/g,
C=/\*\w+/g,D=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(u.prototype,k,{initialize:function(){},route:function(a,b,c){g.history||(g.history=new m);f.isRegExp(a)||(a=this._routeToRegExp(a));c||(c=this[b]);g.history.route(a,f.bind(function(d){d=this._extractParameters(a,d);c&&c.apply(this,d);this.trigger.apply(this,["route:"+b].concat(d));g.history.trigger("route",this,b,d)},this));return this},navigate:function(a,b){g.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,
this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){a=a.replace(D,"\\$&").replace(B,"([^/]+)").replace(C,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var m=g.History=function(){this.handlers=[];f.bindAll(this,"checkUrl")},s=/^[#\/]/,E=/msie [\w.]+/;m.started=!1;f.extend(m.prototype,k,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){var a=window.location.pathname,c=window.location.search;c&&(a+=c)}else a=this.getHash();a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a.replace(s,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=f.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=E.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?i(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?i(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,
this.interval));this.fragment=a;a=window.location;b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=this.getHash().replace(s,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){i(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,
function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(s,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var v=g.View=function(a){this.cid=f.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},F=/^(\S+)\s*(.*)$/,w="model,collection,el,id,attributes,className,tagName".split(",");
f.extend(v.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,b,c){a=document.createElement(a);b&&i(a).attr(b);c&&i(a).html(c);return a},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof i?a:i(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=n(this,"events"))){this.undelegateEvents();
for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);if(!c)throw Error('Method "'+a[b]+'" does not exist');var d=b.match(F),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);""===d?this.$el.bind(e,c):this.$el.delegate(d,e,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=w.length;b<c;b++){var d=w[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var a=n(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});o.extend=r.extend=u.extend=v.extend=function(a,b){var c=G(this,a,b);c.extend=this.extend;return c};var H={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=H[a];c||(c={});var e={type:d,dataType:"json"};c.url||(e.url=n(b,"url")||t());if(!c.data&&b&&("create"==a||"update"==a))e.contentType="application/json",
e.data=JSON.stringify(b.toJSON());g.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{});if(g.emulateHTTP&&("PUT"===d||"DELETE"===d))g.emulateJSON&&(e.data._method=d),e.type="POST",e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)};"GET"!==e.type&&!g.emulateJSON&&(e.processData=!1);return i.ajax(f.extend(e,c))};g.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d;a?a(b,e,c):b.trigger("error",b,e,c)}};var x=function(){},G=function(a,
b,c){var d;d=b&&b.hasOwnProperty("constructor")?b.constructor:function(){a.apply(this,arguments)};f.extend(d,a);x.prototype=a.prototype;d.prototype=new x;b&&f.extend(d.prototype,b);c&&f.extend(d,c);d.prototype.constructor=d;d.__super__=a.prototype;return d},n=function(a,b){return!a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b]},t=function(){throw Error('A "url" property or function must be specified');}}).call(this);

// Licensed under the Apache License, Version 2.0 (the "License"); you may not
// use this file except in compliance with the License. You may obtain a copy of
// the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
// WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
// License for the specific language governing permissions and limitations under
// the License.

/**
 * @namespace
 * $.couch is used to communicate with a CouchDB server, the server methods can
 * be called directly without creating an instance. Typically all methods are
 * passed an <code>options</code> object which defines a success callback which
 * is called with the data returned from the http request to CouchDB, you can
 * find the other settings that can be used in the <code>options</code> object
 * from <a href="http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings">
 * jQuery.ajax settings</a>
 * <pre><code>$.couch.activeTasks({
 *   success: function (data) {
 *     console.log(data);
 *   }
 * });</code></pre>
 * Outputs (for example):
 * <pre><code>[
 *  {
 *   "pid" : "<0.11599.0>",
 *   "status" : "Copied 0 of 18369 changes (0%)",
 *   "task" : "recipes",
 *   "type" : "Database Compaction"
 *  }
 *]</code></pre>
 */
(function($) {

  $.couch = $.couch || {};
  /** @lends $.couch */

  /**
   * @private
   */
  function encodeDocId(docID) {
    var parts = docID.split("/");
    if (parts[0] == "_design") {
      parts.shift();
      return "_design/" + encodeURIComponent(parts.join('/'));
    }
    return encodeURIComponent(docID);
  }

  /**
   * @private
   */

  var uuidCache = [];

  $.extend($.couch, {
    urlPrefix: '',

    /**
     * You can obtain a list of active tasks by using the /_active_tasks URL.
     * The result is a JSON array of the currently running tasks, with each task
     * being described with a single object.
     * @see <a href="http://techzone.couchbase.com/sites/default/files/uploads/
     * all/documentation/couchbase-api-misc.html#couchbase-api-misc_active-task
     * s_get">docs for /_active_tasks</a>
     * @param {ajaxSettings} options <a href="http://api.jquery.com/jQuery.ajax
     * /#jQuery-ajax-settings">jQuery ajax settings</a>
     */
    activeTasks: function(options) {
      ajax(
        {url: this.urlPrefix + "/_active_tasks"},
        options,
        "Active task status could not be retrieved"
      );
    },

    /**
     * Returns a list of all the databases in the CouchDB instance
     * @see <a href="http://techzone.couchbase.com/sites/default/files/uploads/
     * all/documentation/couchbase-api-misc.html#couchbase-api-misc_active-task
     * s_get">docs for /_all_dbs</a>
     * @param {ajaxSettings} options <a href="http://api.jquery.com/jQuery.ajax
     * /#jQuery-ajax-settings">jQuery ajax settings</a>
     */
    allDbs: function(options) {
      ajax(
        {url: this.urlPrefix + "/_all_dbs"},
        options,
        "An error occurred retrieving the list of all databases"
      );
    },

    /**
     * View and edit the CouchDB configuration, called with just the options
     * parameter the entire config is returned, you can be more specific by
     * passing the section and option parameters, if you specify a value that
     * value will be stored in the configuration.
     * @see <a href="http://techzone.couchbase.com/sites/default/files/uploads/
     * all/documentation/couchbase-api-config.html#couchbase-api-config_config
     * -section-key_put">docs for /_config</a>
     * @param {ajaxSettings} options
     * <a href="http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings">
     * jQuery ajax settings</a>
     * @param {String} [section] the section of the config
     * @param {String} [option] the particular config option
     * @param {String} [value] value to be set
     */
    config: function(options, section, option, value) {
      var req = {url: this.urlPrefix + "/_config/"};
      if (section) {
        req.url += encodeURIComponent(section) + "/";
        if (option) {
          req.url += encodeURIComponent(option);
        }
      }
      if (value === null) {
        req.type = "DELETE";        
      } else if (value !== undefined) {
        req.type = "PUT";
        req.data = toJSON(value);
        req.contentType = "application/json";
        req.processData = false
      }

      ajax(req, options,
        "An error occurred retrieving/updating the server configuration"
      );
    },
    
    /**
     * Returns the session information for the currently logged in user.
     * @param {ajaxSettings} options
     * <a href="http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings">
     * jQuery ajax settings</a>
     */
    session: function(options) {
      options = options || {};
      $.ajax({
        type: "GET", url: this.urlPrefix + "/_session",
        beforeSend: function(xhr) {
            xhr.setRequestHeader('Accept', 'application/json');
        },
        complete: function(req) {
          var resp = $.parseJSON(req.responseText);
          if (req.status == 200) {
            if (options.success) options.success(resp);
          } else if (options.error) {
            options.error(req.status, resp.error, resp.reason);
          } else {
            alert("An error occurred getting session info: " + resp.reason);
          }
        }
      });
    },

    /**
     * @private
     */
    userDb : function(callback) {
      $.couch.session({
        success : function(resp) {
          var userDb = $.couch.db(resp.info.authentication_db);
          callback(userDb);
        }
      });
    },

    /**
     * Create a new user on the CouchDB server, <code>user_doc</code> is an
     * object with a <code>name</code> field and other information you want
     * to store relating to that user, for example
     * <code>{"name": "daleharvey"}</code>
     * @param {Object} user_doc Users details
     * @param {String} password Users password
     * @param {ajaxSettings} options
     * <a href="http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings">
      * jQuery ajax settings</a>
     */
    signup: function(user_doc, password, options) {      
      options = options || {};
      // prepare user doc based on name and password
      user_doc = this.prepareUserDoc(user_doc, password);
      $.couch.userDb(function(db) {
        db.saveDoc(user_doc, options);
      });
    },

    /**
     * Populates a user doc with a new password.
     * @param {Object} user_doc User details
     * @param {String} new_password New Password
     */
    prepareUserDoc: function(user_doc, new_password) {
      if (typeof hex_sha1 == "undefined") {
        alert("creating a user doc requires sha1.js to be loaded in the page");
        return;
      }
      var user_prefix = "org.couchdb.user:";
      user_doc._id = user_doc._id || user_prefix + user_doc.name;
      if (new_password) {
        // handle the password crypto
        user_doc.salt = $.couch.newUUID();
        user_doc.password_sha = hex_sha1(new_password + user_doc.salt);
      }
      user_doc.type = "user";
      if (!user_doc.roles) {
        user_doc.roles = [];
      }
      return user_doc;
    },

    /**
     * Authenticate against CouchDB, the <code>options</code> parameter is
      *expected to have <code>name</code> and <code>password</code> fields.
     * @param {ajaxSettings} options
     * <a href="http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings">
     * jQuery ajax settings</a>
     */
    login: function(options) {
      options = options || {};
      $.ajax({
        type: "POST", url: this.urlPrefix + "/_session", dataType: "json",
        data: {name: options.name, password: options.password},
        beforeSend: function(xhr) {
            xhr.setRequestHeader('Accept', 'application/json');
        },
        complete: function(req) {
          var resp = $.parseJSON(req.responseText);
          if (req.status == 200) {
            if (options.success) options.success(resp);
          } else if (options.error) {
            options.error(req.status, resp.error, resp.reason);
          } else {
            alert("An error occurred logging in: " + resp.reason);
          }
          if (typeof options.complete === "function") {
              options.complete();
          }
        }
      });
    },


    /**
     * Delete your current CouchDB user session
     * @param {ajaxSettings} options
     * <a href="http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings">
     * jQuery ajax settings</a>
     */
    logout: function(options) {
      options = options || {};
      $.ajax({
        type: "DELETE", url: this.urlPrefix + "/_session", dataType: "json",
        username : "_", password : "_",
        beforeSend: function(xhr) {
            xhr.setRequestHeader('Accept', 'application/json');
        },
        complete: function(req) {
          var resp = $.parseJSON(req.responseText);
          if (req.status == 200) {
            if (options.success) options.success(resp);
          } else if (options.error) {
            options.error(req.status, resp.error, resp.reason);
          } else {
            alert("An error occurred logging out: " + resp.reason);
          }
        }
      });
    },

    /**
     * @namespace
     * $.couch.db is used to communicate with a specific CouchDB database
     * <pre><code>var $db = $.couch.db("mydatabase");
     *$db.allApps({
     *  success: function (data) {
     *    ... process data ...
     *  }
     *});
     * </code></pre>
     */
    db: function(name, db_opts) {
      db_opts = db_opts || {};
      var rawDocs = {};
      function maybeApplyVersion(doc) {
        if (doc._id && doc._rev && rawDocs[doc._id] &&
            rawDocs[doc._id].rev == doc._rev) {
          // todo: can we use commonjs require here?
          if (typeof Base64 == "undefined") {
            alert("please include /_utils/script/base64.js in the page for " +
                  "base64 support");
            return false;
          } else {
            doc._attachments = doc._attachments || {};
            doc._attachments["rev-"+doc._rev.split("-")[0]] = {
              content_type :"application/json",
              data : Base64.encode(rawDocs[doc._id].raw)
            };
            return true;
          }
        }
      };
      return /** @lends $.couch.db */{
        name: name,
        uri: this.urlPrefix + "/" + encodeURIComponent(name) + "/",

        /**
         * Request compaction of the specified database.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-db.html#couchbase-api-db_
         * db-compact_post">docs for /db/_compact</a>
         * @param {ajaxSettings} options
         * <a href="http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings">
         * jQuery ajax settings</a>
         */
        compact: function(options) {
          $.extend(options, {successStatus: 202});
          ajax({
              type: "POST", url: this.uri + "_compact",
              data: "", processData: false
            },
            options,
            "The database could not be compacted"
          );
        },

        /**
         * Cleans up the cached view output on disk for a given view.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-db.html#couchbase-api-db
         * _db-view-cleanup_post">docs for /db/_compact</a>
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        viewCleanup: function(options) {
          $.extend(options, {successStatus: 202});
          ajax({
              type: "POST", url: this.uri + "_view_cleanup",
              data: "", processData: false
            },
            options,
            "The views could not be cleaned up"
          );
        },

        /**
         * Compacts the view indexes associated with the specified design
         * document. You can use this in place of the full database compaction
         * if you know a specific set of view indexes have been affected by a
         * recent database change.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/upl
         * oads/all/documentation/couchbase-api-db.html#couchbase-api-db_db-
         * compact-design-doc_post">docs for /db/_compact/design-doc</a>
         * @param {String} groupname Name of design-doc to compact
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        compactView: function(groupname, options) {
          $.extend(options, {successStatus: 202});
          ajax({
              type: "POST", url: this.uri + "_compact/" + groupname,
              data: "", processData: false
            },
            options,
            "The view could not be compacted"
          );
        },

        /**
         * Create a new database
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-db.html#couchbase-api-db_
         * db_put">docs for PUT /db/</a>
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        create: function(options) {
          $.extend(options, {successStatus: 201});
          ajax({
              type: "PUT", url: this.uri, contentType: "application/json",
              data: "", processData: false
            },
            options,
            "The database could not be created"
          );
        },

        /**
         * Deletes the specified database, and all the documents and
         * attachments contained within it.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-db.html#couchbase-api-db_
         * db_delete">docs for DELETE /db/</a>
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        drop: function(options) {
          ajax(
            {type: "DELETE", url: this.uri},
            options,
            "The database could not be deleted"
          );
        },

        /**
         * Gets information about the specified database.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-db.html#couchbase-api-db
         * _db_get">docs for GET /db/</a>
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        info: function(options) {
          ajax(
            {url: this.uri},
            options,
            "Database information could not be retrieved"
          );
        },

        /**
         * @namespace
         * $.couch.db.changes provides an API for subscribing to the changes
         * feed
         * <pre><code>var $changes = $.couch.db("mydatabase").changes();
         *$changes.onChange = function (data) {
         *    ... process data ...
         * }
         * $changes.stop();
         * </code></pre>
         */
        changes: function(since, options) {

          options = options || {};
          // set up the promise object within a closure for this handler
          var timeout = 100, db = this, active = true,
            listeners = [],
            promise = /** @lends $.couch.db.changes */ {
              /**
               * Add a listener callback
               * @see <a href="http://techzone.couchbase.com/sites/default/
               * files/uploads/all/documentation/couchbase-api-db.html#couch
               * base-api-db_db-changes_get">docs for /db/_changes</a>
               * @param {Function} fun Callback function to run when
               * notified of changes.
               */
            onChange : function(fun) {
              listeners.push(fun);
            },
              /**
               * Stop subscribing to the changes feed
               */
            stop : function() {
              active = false;
            }
          };
          // call each listener when there is a change
          function triggerListeners(resp) {
            $.each(listeners, function() {
              this(resp);
            });
          };
          // when there is a change, call any listeners, then check for
          // another change
          options.success = function(resp) {
            timeout = 100;
            if (active) {
              since = resp.last_seq;
              triggerListeners(resp);
              getChangesSince();
            };
          };
          options.error = function() {
            if (active) {
              setTimeout(getChangesSince, timeout);
              timeout = timeout * 2;
            }
          };
          // actually make the changes request
          function getChangesSince() {
            var opts = $.extend({heartbeat : 10 * 1000}, options, {
              feed : "longpoll",
              since : since
            });
            ajax(
              {url: db.uri + "_changes"+encodeOptions(opts)},
              options,
              "Error connecting to "+db.uri+"/_changes."
            );
          }
          // start the first request
          if (since) {
            getChangesSince();
          } else {
            db.info({
              success : function(info) {
                since = info.update_seq;
                getChangesSince();
              }
            });
          }
          return promise;
        },

        /**
         * Fetch all the docs in this db, you can specify an array of keys to
         * fetch by passing the <code>keys</code> field in the
         * <code>options</code>
         * parameter.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-db.html#couchbase-api-db_
         * db-all-docs_get">docs for /db/all_docs/</a>
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        allDocs: function(options) {
          var type = "GET";
          var data = null;
          if (options["keys"]) {
            type = "POST";
            var keys = options["keys"];
            delete options["keys"];
            data = toJSON({ "keys": keys });
          }
          ajax({
              type: type,
              data: data,
              url: this.uri + "_all_docs" + encodeOptions(options)
            },
            options,
            "An error occurred retrieving a list of all documents"
          );
        },

        /**
         * Fetch all the design docs in this db
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        allDesignDocs: function(options) {
          this.allDocs($.extend(
            {startkey:"_design", endkey:"_design0"}, options));
        },

        /**
         * Fetch all the design docs with an index.html, <code>options</code>
         * parameter expects an <code>eachApp</code> field which is a callback
         * called on each app found.
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        allApps: function(options) {
          options = options || {};
          var self = this;
          if (options.eachApp) {
            this.allDesignDocs({
              success: function(resp) {
                $.each(resp.rows, function() {
                  self.openDoc(this.id, {
                    success: function(ddoc) {
                      var index, appPath, appName = ddoc._id.split('/');
                      appName.shift();
                      appName = appName.join('/');
                      index = ddoc.couchapp && ddoc.couchapp.index;
                      if (index) {
                        appPath = ['', name, ddoc._id, index].join('/');
                      } else if (ddoc._attachments &&
                                 ddoc._attachments["index.html"]) {
                        appPath = ['', name, ddoc._id, "index.html"].join('/');
                      }
                      if (appPath) options.eachApp(appName, appPath, ddoc);
                    }
                  });
                });
              }
            });
          } else {
            alert("Please provide an eachApp function for allApps()");
          }
        },

        /**
         * Returns the specified doc from the specified db.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-dbdoc.html#couchbase-api-
         * dbdoc_db-doc_get">docs for GET /db/doc</a>
         * @param {String} docId id of document to fetch
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         * @param {ajaxSettings} ajaxOptions <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        openDoc: function(docId, options, ajaxOptions) {
          options = options || {};
          if (db_opts.attachPrevRev || options.attachPrevRev) {
            $.extend(options, {
              beforeSuccess : function(req, doc) {
                rawDocs[doc._id] = {
                  rev : doc._rev,
                  raw : req.responseText
                };
              }
            });
          } else {
            $.extend(options, {
              beforeSuccess : function(req, doc) {
                if (doc["jquery.couch.attachPrevRev"]) {
                  rawDocs[doc._id] = {
                    rev : doc._rev,
                    raw : req.responseText
                  };
                }
              }
            });
          }
          ajax({url: this.uri + encodeDocId(docId) + encodeOptions(options)},
            options,
            "The document could not be retrieved",
            ajaxOptions
          );
        },

        /**
         * Create a new document in the specified database, using the supplied
         * JSON document structure. If the JSON structure includes the _id
         * field, then the document will be created with the specified document
         * ID. If the _id field is not specified, a new unique ID will be
         * generated.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-dbdoc.html#couchbase-api-
         * dbdoc_db_post">docs for GET /db/doc</a>
         * @param {String} doc document to save
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        saveDoc: function(doc, options) {
          options = options || {};
          var db = this;
          var beforeSend = fullCommit(options);
          if (doc._id === undefined) {
            var method = "POST";
            var uri = this.uri;
          } else {
            var method = "PUT";
            var uri = this.uri + encodeDocId(doc._id);
          }
          var versioned = maybeApplyVersion(doc);
          $.ajax({
            type: method, url: uri + encodeOptions(options),
            contentType: "application/json",
            dataType: "json", data: toJSON(doc),
            beforeSend : beforeSend,
            complete: function(req) {
              var resp = $.parseJSON(req.responseText);
              if (req.status == 200 || req.status == 201 || req.status == 202) {
                doc._id = resp.id;
                doc._rev = resp.rev;
                if (versioned) {
                  db.openDoc(doc._id, {
                    attachPrevRev : true,
                    success : function(d) {
                      doc._attachments = d._attachments;
                      if (options.success) options.success(resp);
                    }
                  });
                } else {
                  if (options.success) options.success(resp);
                }
              } else if (options.error) {
                options.error(req.status, resp.error, resp.reason);
              } else {
                alert("The document could not be saved: " + resp.reason);
              }
            }
          });
        },

        /**
         * Save a list of documents
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-db.html#couchbase-api-db_
         * db-bulk-docs_post">docs for /db/_bulk_docs</a>
         * @param {Object[]} docs List of documents to save
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        bulkSave: function(docs, options) {
          var beforeSend = fullCommit(options);
          $.extend(options, {successStatus: 201, beforeSend : beforeSend});
          ajax({
              type: "POST",
              url: this.uri + "_bulk_docs" + encodeOptions(options),
              contentType: "application/json", data: toJSON(docs)
            },
            options,
            "The documents could not be saved"
          );
        },

        /**
         * Deletes the specified document from the database. You must supply
         * the current (latest) revision and <code>id</code> of the document
         * to delete eg <code>removeDoc({_id:"mydoc", _rev: "1-2345"})</code>
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-dbdoc.html#couchbase-api
         * -dbdoc_db-doc_delete">docs for DELETE /db/doc</a>
         * @param {Object} doc Document to delete
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        removeDoc: function(doc, options) {
          ajax({
              type: "DELETE",
              url: this.uri +
                   encodeDocId(doc._id) +
                   encodeOptions({rev: doc._rev})
            },
            options,
            "The document could not be deleted"
          );
        },

        /**
         * Remove a set of documents
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-db.html#couchbase-api-db_
         * db-bulk-docs_post">docs for /db/_bulk_docs</a>
         * @param {String[]} docs List of document id's to remove
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        bulkRemove: function(docs, options){
          docs.docs = $.each(
            docs.docs, function(i, doc){
              doc._deleted = true;
            }
          );
          $.extend(options, {successStatus: 201});
          ajax({
              type: "POST",
              url: this.uri + "_bulk_docs" + encodeOptions(options),
              data: toJSON(docs)
            },
            options,
            "The documents could not be deleted"
          );
        },

        /**
         * The COPY command (which is non-standard HTTP) copies an existing
         * document to a new or existing document.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-dbdoc.html#couchbase-api-
         * dbdoc_db-doc_copy">docs for COPY /db/doc</a>
         * @param {String[]} docId document id to copy
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        copyDoc: function(docId, options, ajaxOptions) {
          ajaxOptions = $.extend(ajaxOptions, {
            complete: function(req) {
              var resp = $.parseJSON(req.responseText);
              if (req.status == 201) {
                if (options.success) options.success(resp);
              } else if (options.error) {
                options.error(req.status, resp.error, resp.reason);
              } else {
                alert("The document could not be copied: " + resp.reason);
              }
            }
          });
          ajax({
              type: "COPY",
              url: this.uri + encodeDocId(docId)
            },
            options,
            "The document could not be copied",
            ajaxOptions
          );
        },

        /**
         * Creates (and executes) a temporary view based on the view function
         * supplied in the JSON request.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-db.html#couchbase-api-db
         * _db-temp-view_post">docs for /db/_temp_view</a>
         * @param {Function} mapFun Map function
         * @param {Function} reduceFun Reduce function
         * @param {Function} language Language the map / reduce funs are
         * implemented in
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        query: function(mapFun, reduceFun, language, options) {
          language = language || "javascript";
          if (typeof(mapFun) !== "string") {
            mapFun = mapFun.toSource ? mapFun.toSource()
              : "(" + mapFun.toString() + ")";
          }
          var body = {language: language, map: mapFun};
          if (reduceFun != null) {
            if (typeof(reduceFun) !== "string")
              reduceFun = reduceFun.toSource ? reduceFun.toSource()
                : "(" + reduceFun.toString() + ")";
            body.reduce = reduceFun;
          }
          ajax({
              type: "POST",
              url: this.uri + "_temp_view" + encodeOptions(options),
              contentType: "application/json", data: toJSON(body)
            },
            options,
            "An error occurred querying the database"
          );
        },

        /**
         * Fetch a _list view output, you can specify a list of
         * <code>keys</code> in the options object to recieve only those keys.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-design.html#couchbase-api
         * -design_db-design-designdoc-list-listname-viewname_get">
         * docs for /db/_design/design-doc/_list/l1/v1</a>
         * @param {String} list Listname in the form of ddoc/listname
         * @param {String} view View to run list against
         * @param {options} CouchDB <a href="http://wiki.apache.org/couchdb/
         * HTTP_view_API">View Options</a>
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        list: function(list, view, options, ajaxOptions) {
          var list = list.split('/');
          var options = options || {};
          var type = 'GET';
          var data = null;
          if (options['keys']) {
            type = 'POST';
            var keys = options['keys'];
            delete options['keys'];
            data = toJSON({'keys': keys });
          }
          ajax({
              type: type,
              data: data,
              url: this.uri + '_design/' + list[0] +
                   '/_list/' + list[1] + '/' + view + encodeOptions(options)
              },
              ajaxOptions, 'An error occured accessing the list'
          );
        },

        /**
         * Executes the specified view-name from the specified design-doc
         * design document, you can specify a list of <code>keys</code>
         * in the options object to recieve only those keys.
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api-design.html#couchbase-api-
         * design_db-design-designdoc-view-viewname_get">docs for /db/
         * _design/design-doc/_list/l1/v1</a>
         * @param {String} name View to run list against (string should have 
         * the design-doc name followed by a slash and the view name)
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        view: function(name, options) {
          var name = name.split('/');
          var options = options || {};
          var type = "GET";
          var data= null;
          if (options["keys"]) {
            type = "POST";
            var keys = options["keys"];
            delete options["keys"];
            data = toJSON({ "keys": keys });
          }
          ajax({
              type: type,
              data: data,
              url: this.uri + "_design/" + name[0] +
                   "/_view/" + name[1] + encodeOptions(options)
            },
            options, "An error occurred accessing the view"
          );
        },

        /**
         * Fetch an arbitrary CouchDB database property
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api.html">docs for /db/_prop</a>
         * @param {String} propName Propery name to fetch
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         * @param {ajaxSettings} ajaxOptions <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        getDbProperty: function(propName, options, ajaxOptions) {
          ajax({url: this.uri + propName + encodeOptions(options)},
            options,
            "The property could not be retrieved",
            ajaxOptions
          );
        },

        /**
         * Set an arbitrary CouchDB database property
         * @see <a href="http://techzone.couchbase.com/sites/default/files/
         * uploads/all/documentation/couchbase-api.html">docs for /db/_prop</a>
         * @param {String} propName Propery name to fetch
         * @param {String} propValue Propery value to set
         * @param {ajaxSettings} options <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         * @param {ajaxSettings} ajaxOptions <a href="http://api.jquery.com/
         * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
         */
        setDbProperty: function(propName, propValue, options, ajaxOptions) {
          ajax({
            type: "PUT", 
            url: this.uri + propName + encodeOptions(options),
            data : JSON.stringify(propValue)
          },
            options,
            "The property could not be updated",
            ajaxOptions
          );
        }
      };
    },

    encodeDocId: encodeDocId, 

    /**
     * Accessing the root of a CouchDB instance returns meta information about
     * the instance. The response is a JSON structure containing information
     * about the server, including a welcome message and the version of the
     * server.
     * @see <a href="http://techzone.couchbase.com/sites/default/files/uploads/
     * all/documentation/couchbase-api-misc.html#couchbase-api-misc_root_get">
     * docs for GET /</a>
     * @param {ajaxSettings} options <a href="http://api.jquery.com/
     * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
     */
    info: function(options) {
      ajax(
        {url: this.urlPrefix + "/"},
        options,
        "Server information could not be retrieved"
      );
    },

    /**
     * Request, configure, or stop, a replication operation.
     * @see <a href="http://techzone.couchbase.com/sites/default/files/
     * uploads/all/documentation/couchbase-api-misc.html#couchbase-api-
     * misc_replicate_post">docs for POST /_replicate</a>
     * @param {String} source Path or url to source database
     * @param {String} target Path or url to target database
     * @param {ajaxSettings} ajaxOptions <a href="http://api.jquery.com/
     * jQuery.ajax/#jQuery-ajax-settings">jQuery ajax settings</a>
     * @param {Object} repOpts Additional replication options
     */
    replicate: function(source, target, ajaxOptions, repOpts) {
      repOpts = $.extend({source: source, target: target}, repOpts);
      if (repOpts.continuous && !repOpts.cancel) {
        ajaxOptions.successStatus = 202;
      }
      ajax({
          type: "POST", url: this.urlPrefix + "/_replicate",
          data: JSON.stringify(repOpts),
          contentType: "application/json"
        },
        ajaxOptions,
        "Replication failed"
      );
    },

    /**
     * Fetch a new UUID
     * @see <a href="http://techzone.couchbase.com/sites/default/files/
     * uploads/all/documentation/couchbase-api-misc.html#couchbase-api-
     * misc_uuids_get">docs for /_uuids</a>
     * @param {Int} cacheNum Number of uuids to keep cached for future use
     */
    newUUID: function(cacheNum) {
      if (cacheNum === undefined) {
        cacheNum = 1;
      }
      if (!uuidCache.length) {
        ajax({url: this.urlPrefix + "/_uuids", data: {count: cacheNum}, async:
              false}, {
            success: function(resp) {
              uuidCache = resp.uuids;
            }
          },
          "Failed to retrieve UUID batch."
        );
      }
      return uuidCache.shift();
    }
  });

  /**
   * @private
   */
  function ajax(obj, options, errorMessage, ajaxOptions) {

    var defaultAjaxOpts = {
      contentType: "application/json",
      headers:{"Accept": "application/json"}
    };

    options = $.extend({successStatus: 200}, options);
    ajaxOptions = $.extend(defaultAjaxOpts, ajaxOptions);
    errorMessage = errorMessage || "Unknown error";
    $.ajax($.extend($.extend({
      type: "GET", dataType: "json", cache : !$.browser.msie,
      beforeSend: function(xhr){
        if(ajaxOptions && ajaxOptions.headers){
          for (var header in ajaxOptions.headers){
            xhr.setRequestHeader(header, ajaxOptions.headers[header]);
          }
        }
      },
      complete: function(req) {
        try {
          var resp = $.parseJSON(req.responseText);
        } catch(e) {
          if (options.error) {
            options.error(req.status, req, e);
          } else {
            alert(errorMessage + ": " + e);
          }
          return;
        }
        if (options.ajaxStart) {
          options.ajaxStart(resp);
        }
        if (req.status == options.successStatus) {
          if (options.beforeSuccess) options.beforeSuccess(req, resp);
          if (options.success) options.success(resp);
        } else if (options.error) {
          options.error(req.status, resp && resp.error ||
                        errorMessage, resp && resp.reason || "no response");
        } else {
          alert(errorMessage + ": " + resp.reason);
        }
      }
    }, obj), ajaxOptions));
  }

  /**
   * @private
   */
  function fullCommit(options) {
    var options = options || {};
    if (typeof options.ensure_full_commit !== "undefined") {
      var commit = options.ensure_full_commit;
      delete options.ensure_full_commit;
      return function(xhr) {
        xhr.setRequestHeader('Accept', 'application/json');
        xhr.setRequestHeader("X-Couch-Full-Commit", commit.toString());
      };
    }
  };

  /**
   * @private
   */
  // Convert a options object to an url query string.
  // ex: {key:'value',key2:'value2'} becomes '?key="value"&key2="value2"'
  function encodeOptions(options) {
    var buf = [];
    if (typeof(options) === "object" && options !== null) {
      for (var name in options) {
        if ($.inArray(name,
                      ["error", "success", "beforeSuccess", "ajaxStart"]) >= 0)
          continue;
        var value = options[name];
        if ($.inArray(name, ["key", "startkey", "endkey"]) >= 0) {
          value = toJSON(value);
        }
        buf.push(encodeURIComponent(name) + "=" + encodeURIComponent(value));
      }
    }
    return buf.length ? "?" + buf.join("&") : "";
  }

  /**
   * @private
   */
  function toJSON(obj) {
    return obj !== null ? JSON.stringify(obj) : null;
  }

})(jQuery);

// Generated by CoffeeScript 1.9.0

/*
(c) 2011 Jan Monschke
v1.1
backbone-couchdb.js is licensed under the MIT license.
 */
var con,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  __hasProp = {}.hasOwnProperty,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Backbone.couch_connector = con = {
  config: {
    db_name: "backbone_connect",
    ddoc_name: "backbone_example",
    view_name: "byCollection",
    list_name: null,
    global_changes: false,
    base_url: null
  },
  helpers: {
    extract_collection_name: function(model) {
      var _name, _splitted;
      if (model == null) {
        throw new Error("No model has been passed");
      }
      if (!(((model.collection != null) && (model.collection.url != null)) || (model.url != null))) {
        return "";
      }
      if (model.url != null) {
        _name = _.isFunction(model.url) ? model.url() : model.url;
      } else {
        _name = _.isFunction(model.collection.url) ? model.collection.url() : model.collection.url;
      }
      if (_name[0] === "/") {
        _name = _name.slice(1, _name.length);
      }
      _splitted = _name.split("/");
      _name = _splitted.length > 0 ? _splitted[0] : _name;
      _name = _name.replace("/", "");
      return _name;
    },
    make_db: function() {
      var db;
      db = $.couch.db(con.config.db_name);
      if (con.config.base_url != null) {
        db.uri = con.config.base_url + "/" + con.config.db_name + "/";
      }
      return db;
    }
  },
  read: function(model, opts) {
    if (model.models) {
      return con.read_collection(model, opts);
    } else {
      return con.read_model(model, opts);
    }
  },
  read_collection: function(coll, opts) {
    var keys, option, view_options, _ddoc, _i, _len, _list, _opts, _view;
    _view = this.config.view_name;
    _ddoc = this.config.ddoc_name;
    _list = this.config.list_name;
    keys = [this.helpers.extract_collection_name(coll)];
    if (coll.db != null) {
      if (coll.db.changes || this.config.global_changes) {
        coll.listen_to_changes();
      }
      if (coll.db.view != null) {
        _view = coll.db.view;
      }
      if (coll.db.ddoc != null) {
        _ddoc = coll.db.ddoc;
      }
      if (coll.db.keys != null) {
        keys = coll.db.keys;
      }
      if (coll.db.list != null) {
        _list = coll.db.list;
      }
    }
    _opts = {
      keys: keys,
      success: (function(_this) {
        return function(data) {
          var doc, _i, _len, _ref, _temp;
          _temp = [];
          _ref = data.rows;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            doc = _ref[_i];
            if (doc.value) {
              _temp.push(doc.value);
            } else {
              _temp.push(doc.doc);
            }
          }
          opts.success(_temp);
          return opts.complete();
        };
      })(this),
      error: function(status, error, reason) {
        var res;
        res = {
          status: status,
          error: error,
          reason: reason
        };
        opts.error(res);
        return opts.complete(res);
      }
    };
    view_options = ["key", "keys", "startkey", "startkey_docid", "endkey", "endkey_docid", "limit", "stale", "descending", "skip", "group", "group_level", "reduce", "include_docs", "inclusive_end", "update_seq"];
    for (_i = 0, _len = view_options.length; _i < _len; _i++) {
      option = view_options[_i];
      if (opts[option] != null) {
        _opts[option] = opts[option];
      }
    }
    if ((coll.db != null) && (coll.db.view != null) && (coll.db.keys == null)) {
      delete _opts.keys;
    }
    if (_list) {
      return this.helpers.make_db().list(_ddoc + "/" + _list, "" + _view, _opts);
    } else {
      return this.helpers.make_db().view(_ddoc + "/" + _view, _opts);
    }
  },
  read_model: function(model, opts) {
    if (!model.id) {
      throw new Error("The model has no id property, so it can't get fetched from the database");
    }
    return this.helpers.make_db().openDoc(model.id, {
      success: function(doc) {
        opts.success(doc);
        return opts.complete();
      },
      error: function(status, error, reason) {
        var res;
        res = {
          status: status,
          error: error,
          reason: reason
        };
        opts.error(res);
        return opts.complete(res);
      }
    });
  },
  create: function(model, opts) {
    var coll, vals;
    vals = model.toJSON();
    coll = this.helpers.extract_collection_name(model);
    if (coll.length > 0) {
      vals.collection = coll;
    }
    return this.helpers.make_db().saveDoc(vals, {
      success: function(doc) {
        opts.success({
          _id: doc.id,
          _rev: doc.rev
        });
        return opts.complete();
      },
      error: function(status, error, reason) {
        var res;
        res = {
          status: status,
          error: error,
          reason: reason
        };
        opts.error(res);
        return opts.complete(res);
      }
    });
  },
  update: function(model, opts) {
    return this.create(model, opts);
  },
  del: function(model, opts) {
    return this.helpers.make_db().removeDoc(model.toJSON(), {
      success: function() {
        return opts.success();
      },
      error: function(nr, req, e) {
        var res;
        if (e === "deleted") {
          opts.success();
          return opts.complete();
        } else {
          res = {
            status: status,
            error: error,
            reason: reason
          };
          opts.error(res);
          return opts.complete(res);
        }
      }
    });
  }
};

Backbone.sync = function(method, model, opts) {
  if (opts.success == null) {
    opts.success = function() {};
  }
  if (opts.error == null) {
    opts.error = function() {};
  }
  if (opts.complete == null) {
    opts.complete = function() {};
  }
  switch (method) {
    case "read":
      return con.read(model, opts);
    case "create":
      return con.create(model, opts);
    case "update":
      return con.update(model, opts);
    case "delete":
      return con.del(model, opts);
  }
};

Backbone.Model = (function(_super) {
  __extends(Model, _super);

  function Model() {
    return Model.__super__.constructor.apply(this, arguments);
  }

  Model.prototype.idAttribute = "_id";

  Model.prototype.clone = function() {
    var new_model;
    new_model = new this.constructor(this);
    if (new_model.attributes._id) {
      delete new_model.attributes._id;
    }
    if (new_model.attributes._rev) {
      delete new_model.attributes._rev;
    }
    return new_model;
  };

  return Model;

})(Backbone.Model);

Backbone.Collection = (function(_super) {
  __extends(Collection, _super);

  function Collection() {
    this._db_on_change = __bind(this._db_on_change, this);
    this._db_prepared_for_changes = __bind(this._db_prepared_for_changes, this);
    return Collection.__super__.constructor.apply(this, arguments);
  }

  Collection.prototype.model = Backbone.Model;

  Collection.prototype.initialize = function() {
    if (!this._db_changes_enabled && ((this.db && this.db.changes) || con.config.global_changes)) {
      return this.listen_to_changes();
    }
  };

  Collection.prototype.listen_to_changes = function() {
    if (!this._db_changes_enabled) {
      this._db_changes_enabled = true;
      if (!this._db_inst) {
        this._db_inst = con.helpers.make_db();
      }
      return this._db_inst.info({
        "success": this._db_prepared_for_changes
      });
    }
  };

  Collection.prototype.stop_changes = function() {
    this._db_changes_enabled = false;
    if (this._db_changes_handler != null) {
      this._db_changes_handler.stop();
      return this._db_changes_handler = null;
    }
  };

  Collection.prototype._db_prepared_for_changes = function(data) {
    var opts;
    this._db_update_seq = data.update_seq || 0;
    opts = {
      include_docs: true,
      collection: con.helpers.extract_collection_name(this),
      filter: con.config.ddoc_name + "/by_collection"
    };
    _.extend(opts, this.db);
    return _.defer((function(_this) {
      return function() {
        _this._db_changes_handler = _this._db_inst.changes(_this._db_update_seq, opts);
        return _this._db_changes_handler.onChange(_this._db_on_change);
      };
    })(this));
  };

  Collection.prototype._db_on_change = function(changes) {
    var obj, _doc, _i, _len, _ref, _results;
    _ref = changes.results;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      _doc = _ref[_i];
      obj = this.get(_doc.id);
      if (obj != null) {
        if (_doc.deleted) {
          _results.push(this.remove(obj));
        } else {
          if (obj.get("_rev") !== _doc.doc._rev) {
            _results.push(obj.set(_doc.doc));
          } else {
            _results.push(void 0);
          }
        }
      } else {
        if (!_doc.deleted) {
          _results.push(this.add(_doc.doc));
        } else {
          _results.push(void 0);
        }
      }
    }
    return _results;
  };

  return Collection;

})(Backbone.Collection);

//# sourceMappingURL=backbone-couchdb.js.map

$(document).bind("mobileinit", function () {
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;

    // Remove page from DOM when it's being replaced
    $('div[data-role="page"]').live('pagehide', function (event, ui) {
        $(event.currentTarget).remove();
    });
});
/*! jQuery Mobile v1.1.0 db342b1f315c282692791aa870455901fdb46a55 jquerymobile.com | jquery.org/license */
(function(D,s,k){typeof define==="function"&&define.amd?define(["jquery"],function(a){k(a,D,s);return a.mobile}):k(D.jQuery,D,s)})(this,document,function(D,s,k){(function(a,c,b,e){function f(a){for(;a&&typeof a.originalEvent!=="undefined";)a=a.originalEvent;return a}function d(b){for(var d={},f,g;b;){f=a.data(b,t);for(g in f)if(f[g])d[g]=d.hasVirtualBinding=true;b=b.parentNode}return d}function g(){y&&(clearTimeout(y),y=0);y=setTimeout(function(){F=y=0;C.length=0;z=false;G=true},a.vmouse.resetTimerDuration)}
function h(b,d,g){var c,h;if(!(h=g&&g[b])){if(g=!g)a:{for(g=d.target;g;){if((h=a.data(g,t))&&(!b||h[b]))break a;g=g.parentNode}g=null}h=g}if(h){c=d;var g=c.type,z,j;c=a.Event(c);c.type=b;h=c.originalEvent;z=a.event.props;g.search(/^(mouse|click)/)>-1&&(z=w);if(h)for(j=z.length;j;)b=z[--j],c[b]=h[b];if(g.search(/mouse(down|up)|click/)>-1&&!c.which)c.which=1;if(g.search(/^touch/)!==-1&&(b=f(h),g=b.touches,b=b.changedTouches,g=g&&g.length?g[0]:b&&b.length?b[0]:e))for(h=0,len=u.length;h<len;h++)b=u[h],
c[b]=g[b];a(d.target).trigger(c)}return c}function j(b){var d=a.data(b.target,x);if(!z&&(!F||F!==d))if(d=h("v"+b.type,b))d.isDefaultPrevented()&&b.preventDefault(),d.isPropagationStopped()&&b.stopPropagation(),d.isImmediatePropagationStopped()&&b.stopImmediatePropagation()}function o(b){var g=f(b).touches,c;if(g&&g.length===1&&(c=b.target,g=d(c),g.hasVirtualBinding))F=L++,a.data(c,x,F),y&&(clearTimeout(y),y=0),A=G=false,c=f(b).touches[0],s=c.pageX,E=c.pageY,h("vmouseover",b,g),h("vmousedown",b,g)}
function m(a){G||(A||h("vmousecancel",a,d(a.target)),A=true,g())}function p(b){if(!G){var c=f(b).touches[0],e=A,z=a.vmouse.moveDistanceThreshold;A=A||Math.abs(c.pageX-s)>z||Math.abs(c.pageY-E)>z;flags=d(b.target);A&&!e&&h("vmousecancel",b,flags);h("vmousemove",b,flags);g()}}function l(a){if(!G){G=true;var b=d(a.target),c;h("vmouseup",a,b);if(!A&&(c=h("vclick",a,b))&&c.isDefaultPrevented())c=f(a).changedTouches[0],C.push({touchID:F,x:c.clientX,y:c.clientY}),z=true;h("vmouseout",a,b);A=false;g()}}function r(b){var b=
a.data(b,t),d;if(b)for(d in b)if(b[d])return true;return false}function n(){}function k(b){var d=b.substr(1);return{setup:function(){r(this)||a.data(this,t,{});a.data(this,t)[b]=true;v[b]=(v[b]||0)+1;v[b]===1&&H.bind(d,j);a(this).bind(d,n);if(K)v.touchstart=(v.touchstart||0)+1,v.touchstart===1&&H.bind("touchstart",o).bind("touchend",l).bind("touchmove",p).bind("scroll",m)},teardown:function(){--v[b];v[b]||H.unbind(d,j);K&&(--v.touchstart,v.touchstart||H.unbind("touchstart",o).unbind("touchmove",p).unbind("touchend",
l).unbind("scroll",m));var f=a(this),g=a.data(this,t);g&&(g[b]=false);f.unbind(d,n);r(this)||f.removeData(t)}}}var t="virtualMouseBindings",x="virtualTouchID",c="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),u="clientX clientY pageX pageY screenX screenY".split(" "),w=a.event.props.concat(a.event.mouseHooks?a.event.mouseHooks.props:[]),v={},y=0,s=0,E=0,A=false,C=[],z=false,G=false,K="addEventListener"in b,H=a(b),L=1,F=0;a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,
resetTimerDuration:1500};for(var I=0;I<c.length;I++)a.event.special[c[I]]=k(c[I]);K&&b.addEventListener("click",function(b){var d=C.length,f=b.target,g,c,e,h,z;if(d){g=b.clientX;c=b.clientY;threshold=a.vmouse.clickDistanceThreshold;for(e=f;e;){for(h=0;h<d;h++)if(z=C[h],e===f&&Math.abs(z.x-g)<threshold&&Math.abs(z.y-c)<threshold||a.data(e,x)===z.touchID){b.preventDefault();b.stopPropagation();return}e=e.parentNode}}},true)})(jQuery,s,k);(function(a,c,b){function e(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,
"$1")}var f="hashchange",d=k,g,h=a.event.special,j=d.documentMode,o="on"+f in c&&(j===b||j>7);a.fn[f]=function(a){return a?this.bind(f,a):this.trigger(f)};a.fn[f].delay=50;h[f]=a.extend(h[f],{setup:function(){if(o)return false;a(g.start)},teardown:function(){if(o)return false;a(g.stop)}});g=function(){function g(){var b=e(),d=t(r);if(b!==r)k(r=b,d),a(c).trigger(f);else if(d!==r)location.href=location.href.replace(/#.*/,"")+d;j=setTimeout(g,a.fn[f].delay)}var h={},j,r=e(),n=function(a){return a},k=
n,t=n;h.start=function(){j||g()};h.stop=function(){j&&clearTimeout(j);j=b};a.browser.msie&&!o&&function(){var b,c;h.start=function(){if(!b)c=(c=a.fn[f].src)&&c+e(),b=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){c||k(e());g()}).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow,d.onpropertychange=function(){try{if(event.propertyName==="title")b.document.title=d.title}catch(a){}}};h.stop=n;t=function(){return e(b.location.href)};k=function(g,c){var e=b.document,
h=a.fn[f].domain;if(g!==c)e.title=d.title,e.open(),h&&e.write('<script>document.domain="'+h+'"<\/script>'),e.close(),b.location.hash=g}}();return h}()})(jQuery,this);(function(a,c){if(a.cleanData){var b=a.cleanData;a.cleanData=function(f){for(var d=0,g;(g=f[d])!=null;d++)a(g).triggerHandler("remove");b(f)}}else{var e=a.fn.remove;a.fn.remove=function(b,d){return this.each(function(){d||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return e.call(a(this),
b,d)})}}a.widget=function(b,d,g){var c=b.split(".")[0],e,b=b.split(".")[1];e=c+"-"+b;if(!g)g=d,d=a.Widget;a.expr[":"][e]=function(d){return!!a.data(d,b)};a[c]=a[c]||{};a[c][b]=function(a,b){arguments.length&&this._createWidget(a,b)};d=new d;d.options=a.extend(true,{},d.options);a[c][b].prototype=a.extend(true,d,{namespace:c,widgetName:b,widgetEventPrefix:a[c][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},g);a.widget.bridge(b,a[c][b])};a.widget.bridge=function(b,d){a.fn[b]=function(g){var e=
typeof g==="string",j=Array.prototype.slice.call(arguments,1),o=this,g=!e&&j.length?a.extend.apply(null,[true,g].concat(j)):g;if(e&&g.charAt(0)==="_")return o;e?this.each(function(){var d=a.data(this,b);if(!d)throw"cannot call methods on "+b+" prior to initialization; attempted to call method '"+g+"'";if(!a.isFunction(d[g]))throw"no such method '"+g+"' for "+b+" widget instance";var e=d[g].apply(d,j);if(e!==d&&e!==c)return o=e,false}):this.each(function(){var c=a.data(this,b);c?c.option(g||{})._init():
a.data(this,b,new d(g,this))});return o}};a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,d){a.data(d,this.widgetName,this);this.element=a(d);this.options=a.extend(true,{},this.options,this._getCreateOptions(),b);var g=this;this.element.bind("remove."+this.widgetName,function(){g.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){var b=
{};a.metadata&&(b=a.metadata.get(element)[this.widgetName]);return b},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,d){var g=b;if(arguments.length===0)return a.extend({},this.options);if(typeof b==="string"){if(d===c)return this.options[b];
g={};g[b]=d}this._setOptions(g);return this},_setOptions:function(b){var d=this;a.each(b,function(a,b){d._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b;a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,d,g){var c=this.options[b],d=a.Event(d);
d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();g=g||{};if(d.originalEvent)for(var b=a.event.props.length,e;b;)e=a.event.props[--b],d[e]=d.originalEvent[e];this.element.trigger(d,g);return!(a.isFunction(c)&&c.call(this.element[0],d,g)===false||d.isDefaultPrevented())}}})(jQuery);(function(a,c){a.widget("mobile.widget",{_createWidget:function(){a.Widget.prototype._createWidget.apply(this,arguments);this._trigger("init")},_getCreateOptions:function(){var b=this.element,
e={};a.each(this.options,function(a){var d=b.jqmData(a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}));d!==c&&(e[a]=d)});return e},enhanceWithin:function(b,c){this.enhance(a(this.options.initSelector,a(b)),c)},enhance:function(b,c){var f,d=a(b),d=a.mobile.enhanceable(d);c&&d.length&&(f=(f=a.mobile.closestPageData(d))&&f.keepNativeSelector()||"",d=d.not(f));d[this.widgetName]()},raise:function(a){throw"Widget ["+this.widgetName+"]: "+a;}})})(jQuery);(function(a,c){var b={};a.mobile=a.extend({},
{version:"1.1.0",ns:"",subPageUrlKey:"ui-page",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:true,hashListeningEnabled:true,linkBindingEnabled:true,defaultPageTransition:"fade",maxTransitionWidth:false,minScrollBack:250,touchOverflowEnabled:false,defaultDialogTransition:"pop",loadingMessage:"loading",pageLoadErrorMessage:"Error Loading Page",loadingMessageTextVisible:false,loadingMessageTheme:"a",pageLoadErrorMessageTheme:"e",autoInitializePage:true,
pushStateEnabled:true,ignoreContentEnabled:false,orientationChangeEnabled:true,buttonMarkup:{hoverDelay:200},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},silentScroll:function(b){if(a.type(b)!==
"number")b=a.mobile.defaultHomeScroll;a.event.special.scrollstart.enabled=false;setTimeout(function(){c.scrollTo(0,b);a(k).trigger("silentscroll",{x:0,y:b})},20);setTimeout(function(){a.event.special.scrollstart.enabled=true},150)},nsNormalizeDict:b,nsNormalize:function(d){return!d?void 0:b[d]||(b[d]=a.camelCase(a.mobile.ns+d))},getInheritedTheme:function(a,b){for(var c=a[0],e="",f=/ui-(bar|body|overlay)-([a-z])\b/,m,p;c;){m=c.className||"";if((p=f.exec(m))&&(e=p[2]))break;c=c.parentNode}return e||
b||"a"},closestPageData:function(a){return a.closest(':jqmData(role="page"), :jqmData(role="dialog")').data("page")},enhanceable:function(a){return this.haveParents(a,"enhance")},hijackable:function(a){return this.haveParents(a,"ajax")},haveParents:function(b,c){if(!a.mobile.ignoreContentEnabled)return b;for(var e=b.length,f=a(),o,m,p,l=0;l<e;l++){m=b.eq(l);p=false;for(o=b[l];o;){if((o.getAttribute?o.getAttribute("data-"+a.mobile.ns+c):"")==="false"){p=true;break}o=o.parentNode}p||(f=f.add(m))}return f}},
a.mobile);a.fn.jqmData=function(b,c){var f;typeof b!="undefined"&&(b&&(b=a.mobile.nsNormalize(b)),f=this.data.apply(this,arguments.length<2?[b]:[b,c]));return f};a.jqmData=function(b,c,f){var e;typeof c!="undefined"&&(e=a.data(b,c?a.mobile.nsNormalize(c):c,f));return e};a.fn.jqmRemoveData=function(b){return this.removeData(a.mobile.nsNormalize(b))};a.jqmRemoveData=function(b,c){return a.removeData(b,a.mobile.nsNormalize(c))};a.fn.removeWithDependents=function(){a.removeWithDependents(this)};a.removeWithDependents=
function(b){b=a(b);(b.jqmData("dependents")||a()).remove();b.remove()};a.fn.addDependents=function(b){a.addDependents(a(this),b)};a.addDependents=function(b,c){var f=a(b).jqmData("dependents")||a();a(b).jqmData("dependents",a.merge(f,c))};a.fn.getEncodedText=function(){return a("<div/>").text(a(this).text()).html()};a.fn.jqmEnhanceable=function(){return a.mobile.enhanceable(this)};a.fn.jqmHijackable=function(){return a.mobile.hijackable(this)};var e=a.find,f=/:jqmData\(([^)]*)\)/g;a.find=function(b,
c,h,j){b=b.replace(f,"[data-"+(a.mobile.ns||"")+"$1]");return e.call(this,b,c,h,j)};a.extend(a.find,e);a.find.matches=function(b,c){return a.find(b,null,null,c)};a.find.matchesSelector=function(b,c){return a.find(c,null,null,[b]).length>0}})(jQuery,this);(function(a){a(s);var c=a("html");a.mobile.media=function(){var b={},e=a("<div id='jquery-mediatest'>"),f=a("<body>").append(e);return function(a){if(!(a in b)){var g=k.createElement("style"),h="@media "+a+" { #jquery-mediatest { position:absolute; } }";
g.type="text/css";g.styleSheet?g.styleSheet.cssText=h:g.appendChild(k.createTextNode(h));c.prepend(f).prepend(g);b[a]=e.css("position")==="absolute";f.add(g).remove()}return b[a]}}()})(jQuery);(function(a,c){function b(a){var b=a.charAt(0).toUpperCase()+a.substr(1),a=(a+" "+g.join(b+" ")+b).split(" "),f;for(f in a)if(d[a[f]]!==c)return true}function e(a,b,c){var d=k.createElement("div"),c=c?[c]:g,f;for(i=0;i<c.length;i++){var e=c[i],h="-"+e.charAt(0).toLowerCase()+e.substr(1)+"-"+a+": "+b+";",e=e.charAt(0).toUpperCase()+
e.substr(1)+(a.charAt(0).toUpperCase()+a.substr(1));d.setAttribute("style",h);d.style[e]&&(f=true)}return!!f}var f=a("<body>").prependTo("html"),d=f[0].style,g=["Webkit","Moz","O"],h="palmGetResource"in s,j=s.operamini&&{}.toString.call(s.operamini)==="[object OperaMini]",o=s.blackberry;a.extend(a.mobile,{browser:{}});a.mobile.browser.ie=function(){for(var a=3,b=k.createElement("div"),c=b.all||[];b.innerHTML="<\!--[if gt IE "+ ++a+"]><br><![endif]--\>",c[0];);return a>4?a:!a}();a.extend(a.support,
{orientation:"orientation"in s&&"onorientationchange"in s,touch:"ontouchend"in k,cssTransitions:"WebKitTransitionEvent"in s||e("transition","height 100ms linear"),pushState:"pushState"in history&&"replaceState"in history,mediaquery:a.mobile.media("only all"),cssPseudoElement:!!b("content"),touchOverflow:!!b("overflowScrolling"),cssTransform3d:e("perspective","10px","moz")||a.mobile.media("(-"+g.join("-transform-3d),(-")+"-transform-3d),(transform-3d)"),boxShadow:!!b("boxShadow")&&!o,scrollTop:("pageXOffset"in
s||"scrollTop"in k.documentElement||"scrollTop"in f[0])&&!h&&!j,dynamicBaseTag:function(){var b=location.protocol+"//"+location.host+location.pathname+"ui-dir/",c=a("head base"),d=null,e="",g;c.length?e=c.attr("href"):c=d=a("<base>",{href:b}).appendTo("head");g=a("<a href='testurl' />").prependTo(f)[0].href;c[0].href=e||location.pathname;d&&d.remove();return g.indexOf(b)===0}()});f.remove();h=function(){var a=s.navigator.userAgent;return a.indexOf("Nokia")>-1&&(a.indexOf("Symbian/3")>-1||a.indexOf("Series60/5")>
-1)&&a.indexOf("AppleWebKit")>-1&&a.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/)}();a.mobile.gradeA=function(){return a.support.mediaquery||a.mobile.browser.ie&&a.mobile.browser.ie>=7};a.mobile.ajaxBlacklist=s.blackberry&&!s.WebKitPoint||j||h;h&&a(function(){a("head link[rel='stylesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet")});a.support.boxShadow||a("html").addClass("ui-mobile-nosupport-boxshadow")})(jQuery);(function(a,c,b){function e(b,c,d){var f=d.type;d.type=c;a.event.handle.call(b,
d);d.type=f}a.each("touchstart touchmove touchend orientationchange throttledresize tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(b,c){a.fn[c]=function(a){return a?this.bind(c,a):this.trigger(c)};a.attrFn[c]=true});var f=a.support.touch,d=f?"touchstart":"mousedown",g=f?"touchend":"mouseup",h=f?"touchmove":"mousemove";a.event.special.scrollstart={enabled:true,setup:function(){function b(a,f){d=f;e(c,d?"scrollstart":"scrollstop",a)}var c=this,d,f;a(c).bind("touchmove scroll",
function(c){a.event.special.scrollstart.enabled&&(d||b(c,true),clearTimeout(f),f=setTimeout(function(){b(c,false)},50))})}};a.event.special.tap={setup:function(){var b=this,c=a(b);c.bind("vmousedown",function(d){function f(){clearTimeout(q)}function g(){f();c.unbind("vclick",h).unbind("vmouseup",f);a(k).unbind("vmousecancel",g)}function h(a){g();n==a.target&&e(b,"tap",a)}if(d.which&&d.which!==1)return false;var n=d.target,q;c.bind("vmouseup",f).bind("vclick",h);a(k).bind("vmousecancel",g);q=setTimeout(function(){e(b,
"taphold",a.Event("taphold",{target:n}))},750)})}};a.event.special.swipe={scrollSupressionThreshold:10,durationThreshold:1E3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var c=a(this);c.bind(d,function(d){function f(b){if(l){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b;k={time:(new Date).getTime(),coords:[c.pageX,c.pageY]};Math.abs(l.coords[0]-k.coords[0])>a.event.special.swipe.scrollSupressionThreshold&&b.preventDefault()}}var e=d.originalEvent.touches?
d.originalEvent.touches[0]:d,l={time:(new Date).getTime(),coords:[e.pageX,e.pageY],origin:a(d.target)},k;c.bind(h,f).one(g,function(){c.unbind(h,f);l&&k&&k.time-l.time<a.event.special.swipe.durationThreshold&&Math.abs(l.coords[0]-k.coords[0])>a.event.special.swipe.horizontalDistanceThreshold&&Math.abs(l.coords[1]-k.coords[1])<a.event.special.swipe.verticalDistanceThreshold&&l.origin.trigger("swipe").trigger(l.coords[0]>k.coords[0]?"swipeleft":"swiperight");l=k=b})})}};(function(a,b){function c(){var a=
f();a!==e&&(e=a,d.trigger("orientationchange"))}var d=a(b),f,e,g,h,t={0:true,180:true};if(a.support.orientation&&(g=b.innerWidth||a(b).width(),h=b.innerHeight||a(b).height(),g=g>h&&g-h>50,h=t[b.orientation],g&&h||!g&&!h))t={"-90":true,90:true};a.event.special.orientationchange={setup:function(){if(a.support.orientation&&a.mobile.orientationChangeEnabled)return false;e=f();d.bind("throttledresize",c)},teardown:function(){if(a.support.orientation&&a.mobile.orientationChangeEnabled)return false;d.unbind("throttledresize",
c)},add:function(a){var b=a.handler;a.handler=function(a){a.orientation=f();return b.apply(this,arguments)}}};a.event.special.orientationchange.orientation=f=function(){var c=true,c=k.documentElement;return(c=a.support.orientation?t[b.orientation]:c&&c.clientWidth/c.clientHeight<1.1)?"portrait":"landscape"}})(jQuery,c);(function(){a.event.special.throttledresize={setup:function(){a(this).bind("resize",b)},teardown:function(){a(this).unbind("resize",b)}};var b=function(){f=(new Date).getTime();g=f-
c;g>=250?(c=f,a(this).trigger("throttledresize")):(d&&clearTimeout(d),d=setTimeout(b,250-g))},c=0,d,f,g})();a.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(b,c){a.event.special[b]={setup:function(){a(this).bind(c,a.noop)}}})})(jQuery,this);(function(a){a.widget("mobile.page",a.mobile.widget,{options:{theme:"c",domCache:false,keepNativeDefault:":jqmData(role='none'), :jqmData(role='nojs')"},_create:function(){var a=this;if(a._trigger("beforecreate")===
false)return false;a.element.attr("tabindex","0").addClass("ui-page ui-body-"+a.options.theme).bind("pagebeforehide",function(){a.removeContainerBackground()}).bind("pagebeforeshow",function(){a.setContainerBackground()})},removeContainerBackground:function(){a.mobile.pageContainer.removeClass("ui-overlay-"+a.mobile.getInheritedTheme(this.element.parent()))},setContainerBackground:function(c){this.options.theme&&a.mobile.pageContainer.addClass("ui-overlay-"+(c||this.options.theme))},keepNativeSelector:function(){var c=
this.options;return c.keepNative&&a.trim(c.keepNative)&&c.keepNative!==c.keepNativeDefault?[c.keepNative,c.keepNativeDefault].join(", "):c.keepNativeDefault}})})(jQuery);(function(a,c,b){var e=function(d){d===b&&(d=true);return function(b,f,e,o){var k=new a.Deferred,p=f?" reverse":"",l=a.mobile.urlHistory.getActive().lastScroll||a.mobile.defaultHomeScroll,r=a.mobile.getScreenHeight(),n=a.mobile.maxTransitionWidth!==false&&a(c).width()>a.mobile.maxTransitionWidth,q=!a.support.cssTransitions||n||!b||
b==="none",t=function(){a.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-"+b)},x=function(){a.event.special.scrollstart.enabled=false;c.scrollTo(0,l);setTimeout(function(){a.event.special.scrollstart.enabled=true},150)},u=function(){o.removeClass(a.mobile.activePageClass+" out in reverse "+b).height("")},n=function(){o&&d&&u();e.addClass(a.mobile.activePageClass);a.mobile.focusPage(e);e.height(r+l);x();q||e.animationComplete(w);e.addClass(b+" in"+p);q&&w()},w=function(){d||
o&&u();e.removeClass("out in reverse "+b).height("");t();a(c).scrollTop()!==l&&x();k.resolve(b,f,e,o,true)};t();o&&!q?(d?o.animationComplete(n):n(),o.height(r+a(c).scrollTop()).addClass(b+" out"+p)):n();return k.promise()}},f=e(),e=e(false);a.mobile.defaultTransitionHandler=f;a.mobile.transitionHandlers={"default":a.mobile.defaultTransitionHandler,sequential:f,simultaneous:e};a.mobile.transitionFallbacks={}})(jQuery,this);(function(a,c){function b(b){r&&(!r.closest(".ui-page-active").length||b)&&
r.removeClass(a.mobile.activeBtnClass);r=null}function e(){t=false;q.length>0&&a.mobile.changePage.apply(null,q.pop())}function f(b,c,d,f){c&&c.data("page")._trigger("beforehide",null,{nextPage:b});b.data("page")._trigger("beforeshow",null,{prevPage:c||a("")});a.mobile.hidePageLoadingMsg();d&&!a.support.cssTransform3d&&a.mobile.transitionFallbacks[d]&&(d=a.mobile.transitionFallbacks[d]);d=(a.mobile.transitionHandlers[d||"default"]||a.mobile.defaultTransitionHandler)(d,f,b,c);d.done(function(){c&&
c.data("page")._trigger("hide",null,{nextPage:b});b.data("page")._trigger("show",null,{prevPage:c||a("")})});return d}function d(){return s.innerHeight||a(s).height()}function g(){var b=a("."+a.mobile.activePageClass),c=parseFloat(b.css("padding-top")),f=parseFloat(b.css("padding-bottom"));b.css("min-height",d()-c-f)}function h(b,c){c&&b.attr("data-"+a.mobile.ns+"role",c);b.page()}function j(a){for(;a;){if(typeof a.nodeName==="string"&&a.nodeName.toLowerCase()=="a")break;a=a.parentNode}return a}function o(b){var b=
a(b).closest(".ui-page").jqmData("url"),c=v.hrefNoHash;if(!b||!l.isPath(b))b=c;return l.makeUrlAbsolute(b,c)}var m=a(s);a("html");var p=a("head"),l={urlParseRE:/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,parseUrl:function(b){if(a.type(b)==="object")return b;b=l.urlParseRE.exec(b||"")||[];return{href:b[0]||"",hrefNoHash:b[1]||"",hrefNoSearch:b[2]||"",domain:b[3]||"",
protocol:b[4]||"",doubleSlash:b[5]||"",authority:b[6]||"",username:b[8]||"",password:b[9]||"",host:b[10]||"",hostname:b[11]||"",port:b[12]||"",pathname:b[13]||"",directory:b[14]||"",filename:b[15]||"",search:b[16]||"",hash:b[17]||""}},makePathAbsolute:function(a,b){if(a&&a.charAt(0)==="/")return a;for(var a=a||"",c=(b=b?b.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"")?b.split("/"):[],d=a.split("/"),f=0;f<d.length;f++){var e=d[f];switch(e){case ".":break;case "..":c.length&&c.pop();break;default:c.push(e)}}return"/"+
c.join("/")},isSameDomain:function(a,b){return l.parseUrl(a).domain===l.parseUrl(b).domain},isRelativeUrl:function(a){return l.parseUrl(a).protocol===""},isAbsoluteUrl:function(a){return l.parseUrl(a).protocol!==""},makeUrlAbsolute:function(a,b){if(!l.isRelativeUrl(a))return a;var c=l.parseUrl(a),d=l.parseUrl(b),f=c.protocol||d.protocol,e=c.protocol?c.doubleSlash:c.doubleSlash||d.doubleSlash,g=c.authority||d.authority,h=c.pathname!=="",j=l.makePathAbsolute(c.pathname||d.filename,d.pathname);return f+
e+g+j+(c.search||!h&&d.search||"")+c.hash},addSearchParams:function(b,c){var d=l.parseUrl(b),f=typeof c==="object"?a.param(c):c,e=d.search||"?";return d.hrefNoSearch+e+(e.charAt(e.length-1)!=="?"?"&":"")+f+(d.hash||"")},convertUrlToDataUrl:function(a){var b=l.parseUrl(a);if(l.isEmbeddedPage(b))return b.hash.split(x)[0].replace(/^#/,"");else if(l.isSameDomain(b,v))return b.hrefNoHash.replace(v.domain,"");return a},get:function(a){if(a===c)a=location.hash;return l.stripHash(a).replace(/[^\/]*\.[^\/*]+$/,
"")},getFilePath:function(b){var c="&"+a.mobile.subPageUrlKey;return b&&b.split(c)[0].split(x)[0]},set:function(a){location.hash=a},isPath:function(a){return/\//.test(a)},clean:function(a){return a.replace(v.domain,"")},stripHash:function(a){return a.replace(/^#/,"")},cleanHash:function(a){return l.stripHash(a.replace(/\?.*$/,"").replace(x,""))},isExternal:function(a){a=l.parseUrl(a);return a.protocol&&a.domain!==w.domain?true:false},hasProtocol:function(a){return/^(:?\w+:)/.test(a)},isFirstPageUrl:function(b){var b=
l.parseUrl(l.makeUrlAbsolute(b,v)),d=a.mobile.firstPage,d=d&&d[0]?d[0].id:c;return(b.hrefNoHash===w.hrefNoHash||y&&b.hrefNoHash===v.hrefNoHash)&&(!b.hash||b.hash==="#"||d&&b.hash.replace(/^#/,"")===d)},isEmbeddedPage:function(a){a=l.parseUrl(a);return a.protocol!==""?a.hash&&(a.hrefNoHash===w.hrefNoHash||y&&a.hrefNoHash===v.hrefNoHash):/^#/.test(a.href)}},r=null,n={stack:[],activeIndex:0,getActive:function(){return n.stack[n.activeIndex]},getPrev:function(){return n.stack[n.activeIndex-1]},getNext:function(){return n.stack[n.activeIndex+
1]},addNew:function(a,b,c,d,f){n.getNext()&&n.clearForward();n.stack.push({url:a,transition:b,title:c,pageUrl:d,role:f});n.activeIndex=n.stack.length-1},clearForward:function(){n.stack=n.stack.slice(0,n.activeIndex+1)},directHashChange:function(b){var d,f,e;this.getActive();a.each(n.stack,function(a,c){b.currentUrl===c.url&&(d=a<n.activeIndex,f=!d,e=a)});this.activeIndex=e!==c?e:this.activeIndex;d?(b.either||b.isBack)(true):f&&(b.either||b.isForward)(false)},ignoreNextHashChange:false},q=[],t=false,
x="&ui-state=dialog",u=p.children("base"),w=l.parseUrl(location.href),v=u.length?l.parseUrl(l.makeUrlAbsolute(u.attr("href"),w.href)):w,y=w.hrefNoHash!==v.hrefNoHash,B=a.support.dynamicBaseTag?{element:u.length?u:a("<base>",{href:v.hrefNoHash}).prependTo(p),set:function(a){B.element.attr("href",l.makeUrlAbsolute(a,v))},reset:function(){B.element.attr("href",v.hrefNoHash)}}:c;a.mobile.focusPage=function(a){var b=a.find("[autofocus]"),c=a.find(".ui-title:eq(0)");b.length?b.focus():c.length?c.focus():
a.focus()};var E=true,A,C;A=function(){if(E){var b=a.mobile.urlHistory.getActive();if(b){var c=m.scrollTop();b.lastScroll=c<a.mobile.minScrollBack?a.mobile.defaultHomeScroll:c}}};C=function(){setTimeout(A,100)};m.bind(a.support.pushState?"popstate":"hashchange",function(){E=false});m.one(a.support.pushState?"popstate":"hashchange",function(){E=true});m.one("pagecontainercreate",function(){a.mobile.pageContainer.bind("pagechange",function(){E=true;m.unbind("scrollstop",C);m.bind("scrollstop",C)})});
m.bind("scrollstop",C);a.mobile.getScreenHeight=d;a.fn.animationComplete=function(b){return a.support.cssTransitions?a(this).one("webkitAnimationEnd animationend",b):(setTimeout(b,0),a(this))};a.mobile.path=l;a.mobile.base=B;a.mobile.urlHistory=n;a.mobile.dialogHashKey=x;a.mobile.allowCrossDomainPages=false;a.mobile.getDocumentUrl=function(b){return b?a.extend({},w):w.href};a.mobile.getDocumentBase=function(b){return b?a.extend({},v):v.href};a.mobile._bindPageRemove=function(){var b=a(this);!b.data("page").options.domCache&&
b.is(":jqmData(external-page='true')")&&b.bind("pagehide.remove",function(){var b=a(this),c=new a.Event("pageremove");b.trigger(c);c.isDefaultPrevented()||b.removeWithDependents()})};a.mobile.loadPage=function(b,d){var f=a.Deferred(),e=a.extend({},a.mobile.loadPage.defaults,d),g=null,j=null,k=l.makeUrlAbsolute(b,a.mobile.activePage&&o(a.mobile.activePage)||v.hrefNoHash);if(e.data&&e.type==="get")k=l.addSearchParams(k,e.data),e.data=c;if(e.data&&e.type==="post")e.reloadPage=true;var u=l.getFilePath(k),
n=l.convertUrlToDataUrl(k);e.pageContainer=e.pageContainer||a.mobile.pageContainer;g=e.pageContainer.children(":jqmData(url='"+n+"')");g.length===0&&n&&!l.isPath(n)&&(g=e.pageContainer.children("#"+n).attr("data-"+a.mobile.ns+"url",n));if(g.length===0)if(a.mobile.firstPage&&l.isFirstPageUrl(u))a.mobile.firstPage.parent().length&&(g=a(a.mobile.firstPage));else if(l.isEmbeddedPage(u))return f.reject(k,d),f.promise();B&&B.reset();if(g.length){if(!e.reloadPage)return h(g,e.role),f.resolve(k,d,g),f.promise();
j=g}var m=e.pageContainer,x=new a.Event("pagebeforeload"),p={url:b,absUrl:k,dataUrl:n,deferred:f,options:e};m.trigger(x,p);if(x.isDefaultPrevented())return f.promise();if(e.showLoadMsg)var r=setTimeout(function(){a.mobile.showPageLoadingMsg()},e.loadMsgDelay);!a.mobile.allowCrossDomainPages&&!l.isSameDomain(w,k)?f.reject(k,d):a.ajax({url:u,type:e.type,data:e.data,dataType:"html",success:function(c,o,m){var x=a("<div></div>"),v=c.match(/<title[^>]*>([^<]*)/)&&RegExp.$1,w=RegExp("\\bdata-"+a.mobile.ns+
"url=[\"']?([^\"'>]*)[\"']?");RegExp("(<[^>]+\\bdata-"+a.mobile.ns+"role=[\"']?page[\"']?[^>]*>)").test(c)&&RegExp.$1&&w.test(RegExp.$1)&&RegExp.$1&&(b=u=l.getFilePath(RegExp.$1));B&&B.set(u);x.get(0).innerHTML=c;g=x.find(":jqmData(role='page'), :jqmData(role='dialog')").first();g.length||(g=a("<div data-"+a.mobile.ns+"role='page'>"+c.split(/<\/?body[^>]*>/gmi)[1]+"</div>"));v&&!g.jqmData("title")&&(~v.indexOf("&")&&(v=a("<div>"+v+"</div>").text()),g.jqmData("title",v));if(!a.support.dynamicBaseTag){var q=
l.get(u);g.find("[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]").each(function(){var b=a(this).is("[href]")?"href":a(this).is("[src]")?"src":"action",c=a(this).attr(b),c=c.replace(location.protocol+"//"+location.host+location.pathname,"");/^(\w+:|#|\/)/.test(c)||a(this).attr(b,q+c)})}g.attr("data-"+a.mobile.ns+"url",l.convertUrlToDataUrl(u)).attr("data-"+a.mobile.ns+"external-page",true).appendTo(e.pageContainer);g.one("pagecreate",a.mobile._bindPageRemove);h(g,e.role);k.indexOf("&"+
a.mobile.subPageUrlKey)>-1&&(g=e.pageContainer.children(":jqmData(url='"+n+"')"));e.showLoadMsg&&(clearTimeout(r),a.mobile.hidePageLoadingMsg());p.xhr=m;p.textStatus=o;p.page=g;e.pageContainer.trigger("pageload",p);f.resolve(k,d,g,j)},error:function(b,c,g){B&&B.set(l.get());p.xhr=b;p.textStatus=c;p.errorThrown=g;b=new a.Event("pageloadfailed");e.pageContainer.trigger(b,p);b.isDefaultPrevented()||(e.showLoadMsg&&(clearTimeout(r),a.mobile.hidePageLoadingMsg(),a.mobile.showPageLoadingMsg(a.mobile.pageLoadErrorMessageTheme,
a.mobile.pageLoadErrorMessage,true),setTimeout(a.mobile.hidePageLoadingMsg,1500)),f.reject(k,d))}});return f.promise()};a.mobile.loadPage.defaults={type:"get",data:c,reloadPage:false,role:c,showLoadMsg:false,pageContainer:c,loadMsgDelay:50};a.mobile.changePage=function(d,g){if(t)q.unshift(arguments);else{var j=a.extend({},a.mobile.changePage.defaults,g);j.pageContainer=j.pageContainer||a.mobile.pageContainer;j.fromPage=j.fromPage||a.mobile.activePage;var u=j.pageContainer,o=new a.Event("pagebeforechange"),
m={toPage:d,options:j};u.trigger(o,m);if(!o.isDefaultPrevented())if(d=m.toPage,t=true,typeof d=="string")a.mobile.loadPage(d,j).done(function(b,c,d,e){t=false;c.duplicateCachedPage=e;a.mobile.changePage(d,c)}).fail(function(){t=false;b(true);e();j.pageContainer.trigger("pagechangefailed",m)});else{if(d[0]===a.mobile.firstPage[0]&&!j.dataUrl)j.dataUrl=w.hrefNoHash;var o=j.fromPage,p=j.dataUrl&&l.convertUrlToDataUrl(j.dataUrl)||d.jqmData("url"),v=p;l.getFilePath(p);var r=n.getActive(),s=n.activeIndex===
0,y=0,B=k.title,A=j.role==="dialog"||d.jqmData("role")==="dialog";if(o&&o[0]===d[0]&&!j.allowSamePageTransition)t=false,u.trigger("pagechange",m);else{h(d,j.role);j.fromHashChange&&n.directHashChange({currentUrl:p,isBack:function(){y=-1},isForward:function(){y=1}});try{k.activeElement&&k.activeElement.nodeName.toLowerCase()!="body"?a(k.activeElement).blur():a("input:focus, textarea:focus, select:focus").blur()}catch(E){}A&&r&&(p=(r.url||"")+x);if(j.changeHash!==false&&p)n.ignoreNextHashChange=true,
l.set(p);var C=!r?B:d.jqmData("title")||d.children(":jqmData(role='header')").find(".ui-title").getEncodedText();C&&B==k.title&&(B=C);d.jqmData("title")||d.jqmData("title",B);j.transition=j.transition||(y&&!s?r.transition:c)||(A?a.mobile.defaultDialogTransition:a.mobile.defaultPageTransition);y||n.addNew(p,j.transition,B,v,j.role);k.title=n.getActive().title;a.mobile.activePage=d;j.reverse=j.reverse||y<0;f(d,o,j.transition,j.reverse).done(function(c,f,g,h,l){b();j.duplicateCachedPage&&j.duplicateCachedPage.remove();
l||a.mobile.focusPage(d);e();u.trigger("pagechange",m)})}}}};a.mobile.changePage.defaults={transition:c,reverse:false,changeHash:true,fromHashChange:false,role:c,duplicateCachedPage:c,pageContainer:c,showLoadMsg:true,dataUrl:c,fromPage:c,allowSamePageTransition:false};a.mobile._registerInternalEvents=function(){a(k).delegate("form","submit",function(b){var c=a(this);if(a.mobile.ajaxEnabled&&!c.is(":jqmData(ajax='false')")&&c.jqmHijackable().length){var d=c.attr("method"),e=c.attr("target"),f=c.attr("action");
if(!f&&(f=o(c),f===v.hrefNoHash))f=w.hrefNoSearch;f=l.makeUrlAbsolute(f,o(c));!l.isExternal(f)&&!e&&(a.mobile.changePage(f,{type:d&&d.length&&d.toLowerCase()||"get",data:c.serialize(),transition:c.jqmData("transition"),direction:c.jqmData("direction"),reloadPage:true}),b.preventDefault())}});a(k).bind("vclick",function(c){if(!(c.which>1)&&a.mobile.linkBindingEnabled&&(c=j(c.target),a(c).jqmHijackable().length&&c&&l.parseUrl(c.getAttribute("href")||"#").hash!=="#"))b(true),r=a(c).closest(".ui-btn").not(".ui-disabled"),
r.addClass(a.mobile.activeBtnClass),a("."+a.mobile.activePageClass+" .ui-btn").not(c).blur(),a(c).jqmData("href",a(c).attr("href")).attr("href","#")});a(k).bind("click",function(d){if(a.mobile.linkBindingEnabled){var f=j(d.target),e=a(f),g;if(f&&!(d.which>1)&&e.jqmHijackable().length){g=function(){s.setTimeout(function(){b(true)},200)};e.jqmData("href")&&e.attr("href",e.jqmData("href"));if(e.is(":jqmData(rel='back')"))return s.history.back(),false;var h=o(e),f=l.makeUrlAbsolute(e.attr("href")||"#",
h);if(!a.mobile.ajaxEnabled&&!l.isEmbeddedPage(f))g();else{if(f.search("#")!=-1)if(f=f.replace(/[^#]*#/,""))f=l.isPath(f)?l.makeUrlAbsolute(f,h):l.makeUrlAbsolute("#"+f,w.hrefNoHash);else{d.preventDefault();return}var h=e.is("[rel='external']")||e.is(":jqmData(ajax='false')")||e.is("[target]"),k=a.mobile.allowCrossDomainPages&&w.protocol==="file:"&&f.search(/^https?:/)!=-1;h||l.isExternal(f)&&!k?g():(g=e.jqmData("transition"),h=(h=e.jqmData("direction"))&&h==="reverse"||e.jqmData("back"),e=e.attr("data-"+
a.mobile.ns+"rel")||c,a.mobile.changePage(f,{transition:g,reverse:h,role:e}),d.preventDefault())}}}});a(k).delegate(".ui-page","pageshow.prefetch",function(){var b=[];a(this).find("a:jqmData(prefetch)").each(function(){var c=a(this),d=c.attr("href");d&&a.inArray(d,b)===-1&&(b.push(d),a.mobile.loadPage(d,{role:c.attr("data-"+a.mobile.ns+"rel")}))})});a.mobile._handleHashChange=function(b){var d=l.stripHash(b),f={transition:a.mobile.urlHistory.stack.length===0?"none":c,changeHash:false,fromHashChange:true};
if(!a.mobile.hashListeningEnabled||n.ignoreNextHashChange)n.ignoreNextHashChange=false;else{if(n.stack.length>1&&d.indexOf(x)>-1)if(a.mobile.activePage.is(".ui-dialog"))n.directHashChange({currentUrl:d,either:function(b){var c=a.mobile.urlHistory.getActive();d=c.pageUrl;a.extend(f,{role:c.role,transition:c.transition,reverse:b})}});else{n.directHashChange({currentUrl:d,isBack:function(){s.history.back()},isForward:function(){s.history.forward()}});return}d?(d=typeof d==="string"&&!l.isPath(d)?l.makeUrlAbsolute("#"+
d,v):d,a.mobile.changePage(d,f)):a.mobile.changePage(a.mobile.firstPage,f)}};m.bind("hashchange",function(){a.mobile._handleHashChange(location.hash)});a(k).bind("pageshow",g);a(s).bind("throttledresize",g)}})(jQuery);(function(a,c){var b={},e=a(c),f=a.mobile.path.parseUrl(location.href);a.extend(b,{initialFilePath:f.pathname+f.search,initialHref:f.hrefNoHash,state:function(){return{hash:location.hash||"#"+b.initialFilePath,title:k.title,initialHref:b.initialHref}},resetUIKeys:function(b){var c="&"+
a.mobile.subPageUrlKey,f=b.indexOf(a.mobile.dialogHashKey);f>-1?b=b.slice(0,f)+"#"+b.slice(f):b.indexOf(c)>-1&&(b=b.split(c).join("#"+c));return b},hashValueAfterReset:function(c){c=b.resetUIKeys(c);return a.mobile.path.parseUrl(c).hash},nextHashChangePrevented:function(c){a.mobile.urlHistory.ignoreNextHashChange=c;b.onHashChangeDisabled=c},onHashChange:function(){if(!b.onHashChangeDisabled){var c,f;c=location.hash;var e=a.mobile.path.isPath(c),j=e?location.href:a.mobile.getDocumentUrl();c=e?c.replace("#",
""):c;f=b.state();c=a.mobile.path.makeUrlAbsolute(c,j);e&&(c=b.resetUIKeys(c));history.replaceState(f,k.title,c)}},onPopState:function(c){var c=c.originalEvent.state,f,h;if(c){f=b.hashValueAfterReset(a.mobile.urlHistory.getActive().url);h=b.hashValueAfterReset(c.hash.replace("#",""));if(f=f!==h)e.one("hashchange.pushstate",function(){b.nextHashChangePrevented(false)});b.nextHashChangePrevented(false);a.mobile._handleHashChange(c.hash);f&&b.nextHashChangePrevented(true)}},init:function(){e.bind("hashchange",
b.onHashChange);e.bind("popstate",b.onPopState);location.hash===""&&history.replaceState(b.state(),k.title,location.href)}});a(function(){a.mobile.pushStateEnabled&&a.support.pushState&&b.init()})})(jQuery,this);jQuery.mobile.transitionFallbacks.pop="fade";(function(a){a.mobile.transitionHandlers.slide=a.mobile.transitionHandlers.simultaneous;a.mobile.transitionFallbacks.slide="fade"})(jQuery,this);jQuery.mobile.transitionFallbacks.slidedown="fade";jQuery.mobile.transitionFallbacks.slideup="fade";
jQuery.mobile.transitionFallbacks.flip="fade";jQuery.mobile.transitionFallbacks.flow="fade";jQuery.mobile.transitionFallbacks.turn="fade";(function(a){a.mobile.page.prototype.options.degradeInputs={color:false,date:false,datetime:false,"datetime-local":false,email:false,month:false,number:false,range:"number",search:"text",tel:false,time:false,url:false,week:false};a(k).bind("pagecreate create",function(c){var b=a.mobile.closestPageData(a(c.target)),e;if(b)e=b.options,a(c.target).find("input").not(b.keepNativeSelector()).each(function(){var b=
a(this),c=this.getAttribute("type"),g=e.degradeInputs[c]||"text";if(e.degradeInputs[c]){var h=a("<div>").html(b.clone()).html(),j=h.indexOf(" type=")>-1;b.replaceWith(h.replace(j?/\s+type=["']?\w+['"]?/:/\/?>/,' type="'+g+'" data-'+a.mobile.ns+'type="'+c+'"'+(j?"":">")))}})})})(jQuery);(function(a,c){a.widget("mobile.dialog",a.mobile.widget,{options:{closeBtnText:"Close",overlayTheme:"a",initSelector:":jqmData(role='dialog')"},_create:function(){var b=this,c=this.element,f=a("<a href='#' data-"+a.mobile.ns+
"icon='delete' data-"+a.mobile.ns+"iconpos='notext'>"+this.options.closeBtnText+"</a>"),d=a("<div/>",{role:"dialog","class":"ui-dialog-contain ui-corner-all ui-overlay-shadow"});c.addClass("ui-dialog ui-overlay-"+this.options.overlayTheme);c.wrapInner(d).children().find(":jqmData(role='header')").prepend(f).end().children(":first-child").addClass("ui-corner-top").end().children(":last-child").addClass("ui-corner-bottom");f.bind("click",function(){b.close()});c.bind("vclick submit",function(b){var b=
a(b.target).closest(b.type==="vclick"?"a":"form"),c;b.length&&!b.jqmData("transition")&&(c=a.mobile.urlHistory.getActive()||{},b.attr("data-"+a.mobile.ns+"transition",c.transition||a.mobile.defaultDialogTransition).attr("data-"+a.mobile.ns+"direction","reverse"))}).bind("pagehide",function(){a(this).find("."+a.mobile.activeBtnClass).removeClass(a.mobile.activeBtnClass)}).bind("pagebeforeshow",function(){b.options.overlayTheme&&b.element.page("removeContainerBackground").page("setContainerBackground",
b.options.overlayTheme)})},close:function(){c.history.back()}});a(k).delegate(a.mobile.dialog.prototype.options.initSelector,"pagecreate",function(){a.mobile.dialog.prototype.enhance(this)})})(jQuery,this);(function(a){a.fn.fieldcontain=function(){return this.addClass("ui-field-contain ui-body ui-br")};a(k).bind("pagecreate create",function(c){a(":jqmData(role='fieldcontain')",c.target).jqmEnhanceable().fieldcontain()})})(jQuery);(function(a){a.fn.grid=function(c){return this.each(function(){var b=
a(this),e=a.extend({grid:null},c),f=b.children(),d={solo:1,a:2,b:3,c:4,d:5},e=e.grid;if(!e)if(f.length<=5)for(var g in d)d[g]===f.length&&(e=g);else e="a";d=d[e];b.addClass("ui-grid-"+e);f.filter(":nth-child("+d+"n+1)").addClass("ui-block-a");d>1&&f.filter(":nth-child("+d+"n+2)").addClass("ui-block-b");d>2&&f.filter(":nth-child(3n+3)").addClass("ui-block-c");d>3&&f.filter(":nth-child(4n+4)").addClass("ui-block-d");d>4&&f.filter(":nth-child(5n+5)").addClass("ui-block-e")})}})(jQuery);(function(a){a(k).bind("pagecreate create",
function(c){a(":jqmData(role='nojs')",c.target).addClass("ui-nojs")})})(jQuery);(function(a,c){function b(a){for(var b;a;){if((b=typeof a.className==="string"&&a.className+" ")&&b.indexOf("ui-btn ")>-1&&b.indexOf("ui-disabled ")<0)break;a=a.parentNode}return a}a.fn.buttonMarkup=function(b){for(var b=b&&a.type(b)=="object"?b:{},d=0;d<this.length;d++){var g=this.eq(d),h=g[0],j=a.extend({},a.fn.buttonMarkup.defaults,{icon:b.icon!==c?b.icon:g.jqmData("icon"),iconpos:b.iconpos!==c?b.iconpos:g.jqmData("iconpos"),
theme:b.theme!==c?b.theme:g.jqmData("theme")||a.mobile.getInheritedTheme(g,"c"),inline:b.inline!==c?b.inline:g.jqmData("inline"),shadow:b.shadow!==c?b.shadow:g.jqmData("shadow"),corners:b.corners!==c?b.corners:g.jqmData("corners"),iconshadow:b.iconshadow!==c?b.iconshadow:g.jqmData("iconshadow"),mini:b.mini!==c?b.mini:g.jqmData("mini")},b),o="ui-btn-inner",m,p,l,r,n,q;a.each(j,function(b,c){h.setAttribute("data-"+a.mobile.ns+b,c);g.jqmData(b,c)});(q=a.data(h.tagName==="INPUT"||h.tagName==="BUTTON"?
h.parentNode:h,"buttonElements"))?(h=q.outer,g=a(h),l=q.inner,r=q.text,a(q.icon).remove(),q.icon=null):(l=k.createElement(j.wrapperEls),r=k.createElement(j.wrapperEls));n=j.icon?k.createElement("span"):null;e&&!q&&e();if(!j.theme)j.theme=a.mobile.getInheritedTheme(g,"c");m="ui-btn ui-btn-up-"+j.theme;m+=j.inline?" ui-btn-inline":"";m+=j.shadow?" ui-shadow":"";m+=j.corners?" ui-btn-corner-all":"";j.mini!==c&&(m+=j.mini?" ui-mini":" ui-fullsize");j.inline!==c&&(m+=j.inline===false?" ui-btn-block":" ui-btn-inline");
if(j.icon)j.icon="ui-icon-"+j.icon,j.iconpos=j.iconpos||"left",p="ui-icon "+j.icon,j.iconshadow&&(p+=" ui-icon-shadow");j.iconpos&&(m+=" ui-btn-icon-"+j.iconpos,j.iconpos=="notext"&&!g.attr("title")&&g.attr("title",g.getEncodedText()));o+=j.corners?" ui-btn-corner-all":"";j.iconpos&&j.iconpos==="notext"&&!g.attr("title")&&g.attr("title",g.getEncodedText());q&&g.removeClass(q.bcls||"");g.removeClass("ui-link").addClass(m);l.className=o;r.className="ui-btn-text";q||l.appendChild(r);if(n&&(n.className=
p,!q||!q.icon))n.appendChild(k.createTextNode("\u00a0")),l.appendChild(n);for(;h.firstChild&&!q;)r.appendChild(h.firstChild);q||h.appendChild(l);q={bcls:m,outer:h,inner:l,text:r,icon:n};a.data(h,"buttonElements",q);a.data(l,"buttonElements",q);a.data(r,"buttonElements",q);n&&a.data(n,"buttonElements",q)}return this};a.fn.buttonMarkup.defaults={corners:true,shadow:true,iconshadow:true,wrapperEls:"span"};var e=function(){var c=a.mobile.buttonMarkup.hoverDelay,d,g;a(k).bind({"vmousedown vmousecancel vmouseup vmouseover vmouseout focus blur scrollstart":function(e){var j,
k=a(b(e.target)),e=e.type;if(k.length)if(j=k.attr("data-"+a.mobile.ns+"theme"),e==="vmousedown")a.support.touch?d=setTimeout(function(){k.removeClass("ui-btn-up-"+j).addClass("ui-btn-down-"+j)},c):k.removeClass("ui-btn-up-"+j).addClass("ui-btn-down-"+j);else if(e==="vmousecancel"||e==="vmouseup")k.removeClass("ui-btn-down-"+j).addClass("ui-btn-up-"+j);else if(e==="vmouseover"||e==="focus")a.support.touch?g=setTimeout(function(){k.removeClass("ui-btn-up-"+j).addClass("ui-btn-hover-"+j)},c):k.removeClass("ui-btn-up-"+
j).addClass("ui-btn-hover-"+j);else if(e==="vmouseout"||e==="blur"||e==="scrollstart")k.removeClass("ui-btn-hover-"+j+" ui-btn-down-"+j).addClass("ui-btn-up-"+j),d&&clearTimeout(d),g&&clearTimeout(g)},"focusin focus":function(c){a(b(c.target)).addClass(a.mobile.focusClass)},"focusout blur":function(c){a(b(c.target)).removeClass(a.mobile.focusClass)}});e=null};a(k).bind("pagecreate create",function(b){a(":jqmData(role='button'), .ui-bar > a, .ui-header > a, .ui-footer > a, .ui-bar > :jqmData(role='controlgroup') > a",
b.target).not(".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").buttonMarkup()})})(jQuery);(function(a){a.mobile.page.prototype.options.backBtnText="Back";a.mobile.page.prototype.options.addBackBtn=false;a.mobile.page.prototype.options.backBtnTheme=null;a.mobile.page.prototype.options.headerTheme="a";a.mobile.page.prototype.options.footerTheme="a";a.mobile.page.prototype.options.contentTheme=null;a(k).delegate(":jqmData(role='page'), :jqmData(role='dialog')","pagecreate",function(){var c=a(this),
b=c.data("page").options,e=c.jqmData("role"),f=b.theme;a(":jqmData(role='header'), :jqmData(role='footer'), :jqmData(role='content')",this).jqmEnhanceable().each(function(){var d=a(this),g=d.jqmData("role"),h=d.jqmData("theme"),j=h||b.contentTheme||e==="dialog"&&f,k;d.addClass("ui-"+g);if(g==="header"||g==="footer"){var m=h||(g==="header"?b.headerTheme:b.footerTheme)||f;d.addClass("ui-bar-"+m).attr("role",g==="header"?"banner":"contentinfo");g==="header"&&(h=d.children("a"),k=h.hasClass("ui-btn-left"),
j=h.hasClass("ui-btn-right"),k=k||h.eq(0).not(".ui-btn-right").addClass("ui-btn-left").length,j||h.eq(1).addClass("ui-btn-right"));b.addBackBtn&&g==="header"&&a(".ui-page").length>1&&c.jqmData("url")!==a.mobile.path.stripHash(location.hash)&&!k&&a("<a href='#' class='ui-btn-left' data-"+a.mobile.ns+"rel='back' data-"+a.mobile.ns+"icon='arrow-l'>"+b.backBtnText+"</a>").attr("data-"+a.mobile.ns+"theme",b.backBtnTheme||m).prependTo(d);d.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({role:"heading",
"aria-level":"1"})}else g==="content"&&(j&&d.addClass("ui-body-"+j),d.attr("role","main"))})})})(jQuery);(function(a){a.widget("mobile.collapsible",a.mobile.widget,{options:{expandCueText:" click to expand contents",collapseCueText:" click to collapse contents",collapsed:true,heading:"h1,h2,h3,h4,h5,h6,legend",theme:null,contentTheme:null,iconTheme:"d",mini:false,initSelector:":jqmData(role='collapsible')"},_create:function(){var c=this.element,b=this.options,e=c.addClass("ui-collapsible"),f=c.children(b.heading).first(),
d=e.wrapInner("<div class='ui-collapsible-content'></div>").find(".ui-collapsible-content"),g=c.closest(":jqmData(role='collapsible-set')").addClass("ui-collapsible-set");f.is("legend")&&(f=a("<div role='heading'>"+f.html()+"</div>").insertBefore(f),f.next().remove());if(g.length){if(!b.theme)b.theme=g.jqmData("theme")||a.mobile.getInheritedTheme(g,"c");if(!b.contentTheme)b.contentTheme=g.jqmData("content-theme");if(!b.iconPos)b.iconPos=g.jqmData("iconpos");if(!b.mini)b.mini=g.jqmData("mini")}d.addClass(b.contentTheme?
"ui-body-"+b.contentTheme:"");f.insertBefore(d).addClass("ui-collapsible-heading").append("<span class='ui-collapsible-heading-status'></span>").wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().buttonMarkup({shadow:false,corners:false,iconpos:c.jqmData("iconpos")||b.iconPos||"left",icon:"plus",mini:b.mini,theme:b.theme}).add(".ui-btn-inner",c).addClass("ui-corner-top ui-corner-bottom");e.bind("expand collapse",function(c){if(!c.isDefaultPrevented()){c.preventDefault();
var j=a(this),c=c.type==="collapse",k=b.contentTheme;f.toggleClass("ui-collapsible-heading-collapsed",c).find(".ui-collapsible-heading-status").text(c?b.expandCueText:b.collapseCueText).end().find(".ui-icon").toggleClass("ui-icon-minus",!c).toggleClass("ui-icon-plus",c);j.toggleClass("ui-collapsible-collapsed",c);d.toggleClass("ui-collapsible-content-collapsed",c).attr("aria-hidden",c);if(k&&(!g.length||e.jqmData("collapsible-last")))f.find("a").first().add(f.find(".ui-btn-inner")).toggleClass("ui-corner-bottom",
c),d.toggleClass("ui-corner-bottom",!c);d.trigger("updatelayout")}}).trigger(b.collapsed?"collapse":"expand");f.bind("click",function(a){var b=f.is(".ui-collapsible-heading-collapsed")?"expand":"collapse";e.trigger(b);a.preventDefault()})}});a(k).bind("pagecreate create",function(c){a.mobile.collapsible.prototype.enhanceWithin(c.target)})})(jQuery);(function(a,c){a.widget("mobile.collapsibleset",a.mobile.widget,{options:{initSelector:":jqmData(role='collapsible-set')"},_create:function(){var b=this.element.addClass("ui-collapsible-set"),
e=this.options;if(!e.theme)e.theme=a.mobile.getInheritedTheme(b,"c");if(!e.contentTheme)e.contentTheme=b.jqmData("content-theme");if(!e.corners)e.corners=b.jqmData("corners")===c?true:false;b.jqmData("collapsiblebound")||b.jqmData("collapsiblebound",true).bind("expand collapse",function(b){var c=b.type==="collapse",b=a(b.target).closest(".ui-collapsible"),e=b.data("collapsible");e.options.contentTheme&&b.jqmData("collapsible-last")&&(b.find(e.options.heading).first().find("a").first().add(".ui-btn-inner").toggleClass("ui-corner-bottom",
c),b.find(".ui-collapsible-content").toggleClass("ui-corner-bottom",!c))}).bind("expand",function(b){a(b.target).closest(".ui-collapsible").siblings(".ui-collapsible").trigger("collapse")})},_init:function(){this.refresh()},refresh:function(){var b=this.options,c=this.element.children(":jqmData(role='collapsible')");a.mobile.collapsible.prototype.enhance(c.not(".ui-collapsible"));c.each(function(){a(this).find(a.mobile.collapsible.prototype.options.heading).find("a").first().add(".ui-btn-inner").removeClass("ui-corner-top ui-corner-bottom")});
c.first().find("a").first().addClass(b.corners?"ui-corner-top":"").find(".ui-btn-inner").addClass("ui-corner-top");c.last().jqmData("collapsible-last",true).find("a").first().addClass(b.corners?"ui-corner-bottom":"").find(".ui-btn-inner").addClass("ui-corner-bottom")}});a(k).bind("pagecreate create",function(b){a.mobile.collapsibleset.prototype.enhanceWithin(b.target)})})(jQuery);(function(a,c){a.widget("mobile.navbar",a.mobile.widget,{options:{iconpos:"top",grid:null,initSelector:":jqmData(role='navbar')"},
_create:function(){var b=this.element,e=b.find("a"),f=e.filter(":jqmData(icon)").length?this.options.iconpos:c;b.addClass("ui-navbar").attr("role","navigation").find("ul").jqmEnhanceable().grid({grid:this.options.grid});f||b.addClass("ui-navbar-noicons");e.buttonMarkup({corners:false,shadow:false,inline:true,iconpos:f});b.delegate("a","vclick",function(b){a(b.target).hasClass("ui-disabled")||(e.removeClass(a.mobile.activeBtnClass),a(this).addClass(a.mobile.activeBtnClass))});b.closest(".ui-page").bind("pagebeforeshow",
function(){e.filter(".ui-state-persist").addClass(a.mobile.activeBtnClass)})}});a(k).bind("pagecreate create",function(b){a.mobile.navbar.prototype.enhanceWithin(b.target)})})(jQuery);(function(a){var c={};a.widget("mobile.listview",a.mobile.widget,{options:{theme:null,countTheme:"c",headerTheme:"b",dividerTheme:"b",splitIcon:"arrow-r",splitTheme:"b",mini:false,inset:false,initSelector:":jqmData(role='listview')"},_create:function(){var a="";a+=this.options.inset?" ui-listview-inset ui-corner-all ui-shadow ":
"";a+=this.element.jqmData("mini")||this.options.mini===true?" ui-mini":"";this.element.addClass(function(c,f){return f+" ui-listview "+a});this.refresh(true)},_removeCorners:function(a,c){a=a.add(a.find(".ui-btn-inner, .ui-li-link-alt, .ui-li-thumb"));c==="top"?a.removeClass("ui-corner-top ui-corner-tr ui-corner-tl"):c==="bottom"?a.removeClass("ui-corner-bottom ui-corner-br ui-corner-bl"):a.removeClass("ui-corner-top ui-corner-tr ui-corner-tl ui-corner-bottom ui-corner-br ui-corner-bl")},_refreshCorners:function(a){var c,
f;this.options.inset&&(c=this.element.children("li"),f=a?c.not(".ui-screen-hidden"):c.filter(":visible"),this._removeCorners(c),c=f.first().addClass("ui-corner-top"),c.add(c.find(".ui-btn-inner").not(".ui-li-link-alt span:first-child")).addClass("ui-corner-top").end().find(".ui-li-link-alt, .ui-li-link-alt span:first-child").addClass("ui-corner-tr").end().find(".ui-li-thumb").not(".ui-li-icon").addClass("ui-corner-tl"),f=f.last().addClass("ui-corner-bottom"),f.add(f.find(".ui-btn-inner")).find(".ui-li-link-alt").addClass("ui-corner-br").end().find(".ui-li-thumb").not(".ui-li-icon").addClass("ui-corner-bl"));
a||this.element.trigger("updatelayout")},_findFirstElementByTagName:function(a,c,f,d){var g={};for(g[f]=g[d]=true;a;){if(g[a.nodeName])return a;a=a[c]}return null},_getChildrenByTagName:function(b,c,f){var d=[],g={};g[c]=g[f]=true;for(b=b.firstChild;b;)g[b.nodeName]&&d.push(b),b=b.nextSibling;return a(d)},_addThumbClasses:function(b){var c,f,d=b.length;for(c=0;c<d;c++)f=a(this._findFirstElementByTagName(b[c].firstChild,"nextSibling","img","IMG")),f.length&&(f.addClass("ui-li-thumb"),a(this._findFirstElementByTagName(f[0].parentNode,
"parentNode","li","LI")).addClass(f.is(".ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb"))},refresh:function(b){this.parentPage=this.element.closest(".ui-page");this._createSubPages();var c=this.options,f=this.element,d=f.jqmData("dividertheme")||c.dividerTheme,g=f.jqmData("splittheme"),h=f.jqmData("spliticon"),j=this._getChildrenByTagName(f[0],"li","LI"),o=a.support.cssPseudoElement||!a.nodeName(f[0],"ol")?0:1,m={},p,l,r,n,q,t,x;o&&f.find(".ui-li-dec").remove();if(!c.theme)c.theme=a.mobile.getInheritedTheme(this.element,
"c");for(var u=0,w=j.length;u<w;u++){p=j.eq(u);l="ui-li";if(b||!p.hasClass("ui-li"))r=p.jqmData("theme")||c.theme,n=this._getChildrenByTagName(p[0],"a","A"),n.length?(t=p.jqmData("icon"),p.buttonMarkup({wrapperEls:"div",shadow:false,corners:false,iconpos:"right",icon:n.length>1||t===false?false:t||"arrow-r",theme:r}),t!=false&&n.length==1&&p.addClass("ui-li-has-arrow"),n.first().removeClass("ui-link").addClass("ui-link-inherit"),n.length>1&&(l+=" ui-li-has-alt",n=n.last(),q=g||n.jqmData("theme")||
c.splitTheme,x=n.jqmData("icon"),n.appendTo(p).attr("title",n.getEncodedText()).addClass("ui-li-link-alt").empty().buttonMarkup({shadow:false,corners:false,theme:r,icon:false,iconpos:false}).find(".ui-btn-inner").append(a(k.createElement("span")).buttonMarkup({shadow:true,corners:true,theme:q,iconpos:"notext",icon:x||t||h||c.splitIcon})))):p.jqmData("role")==="list-divider"?(l+=" ui-li-divider ui-bar-"+d,p.attr("role","heading"),o&&(o=1)):l+=" ui-li-static ui-body-"+r;o&&l.indexOf("ui-li-divider")<
0&&(r=p.is(".ui-li-static:first")?p:p.find(".ui-link-inherit"),r.addClass("ui-li-jsnumbering").prepend("<span class='ui-li-dec'>"+o++ +". </span>"));m[l]||(m[l]=[]);m[l].push(p[0])}for(l in m)a(m[l]).addClass(l).children(".ui-btn-inner").addClass(l);f.find("h1, h2, h3, h4, h5, h6").addClass("ui-li-heading").end().find("p, dl").addClass("ui-li-desc").end().find(".ui-li-aside").each(function(){var b=a(this);b.prependTo(b.parent())}).end().find(".ui-li-count").each(function(){a(this).closest("li").addClass("ui-li-has-count")}).addClass("ui-btn-up-"+
(f.jqmData("counttheme")||this.options.countTheme)+" ui-btn-corner-all");this._addThumbClasses(j);this._addThumbClasses(f.find(".ui-link-inherit"));this._refreshCorners(b)},_idStringEscape:function(a){return a.replace(/[^a-zA-Z0-9]/g,"-")},_createSubPages:function(){var b=this.element,e=b.closest(".ui-page"),f=e.jqmData("url"),d=f||e[0][a.expando],g=b.attr("id"),h=this.options,j="data-"+a.mobile.ns,k=this,m=e.find(":jqmData(role='footer')").jqmData("id"),p;typeof c[d]==="undefined"&&(c[d]=-1);g=g||
++c[d];a(b.find("li>ul, li>ol").toArray().reverse()).each(function(c){var d=a(this),e=d.attr("id")||g+"-"+c,c=d.parent(),k=a(d.prevAll().toArray().reverse()),k=k.length?k:a("<span>"+a.trim(c.contents()[0].nodeValue)+"</span>"),o=k.first().getEncodedText(),e=(f||"")+"&"+a.mobile.subPageUrlKey+"="+e,x=d.jqmData("theme")||h.theme,u=d.jqmData("counttheme")||b.jqmData("counttheme")||h.countTheme;p=true;d.detach().wrap("<div "+j+"role='page' "+j+"url='"+e+"' "+j+"theme='"+x+"' "+j+"count-theme='"+u+"'><div "+
j+"role='content'></div></div>").parent().before("<div "+j+"role='header' "+j+"theme='"+h.headerTheme+"'><div class='ui-title'>"+o+"</div></div>").after(m?a("<div "+j+"role='footer' "+j+"id='"+m+"'>"):"").parent().appendTo(a.mobile.pageContainer).page();d=c.find("a:first");d.length||(d=a("<a/>").html(k||o).prependTo(c.empty()));d.attr("href","#"+e)}).listview();p&&e.is(":jqmData(external-page='true')")&&e.data("page").options.domCache===false&&e.unbind("pagehide.remove").bind("pagehide.remove",function(b,
c){var d=c.nextPage;c.nextPage&&(d=d.jqmData("url"),d.indexOf(f+"&"+a.mobile.subPageUrlKey)!==0&&(k.childPages().remove(),e.remove()))})},childPages:function(){var b=this.parentPage.jqmData("url");return a(":jqmData(url^='"+b+"&"+a.mobile.subPageUrlKey+"')")}});a(k).bind("pagecreate create",function(b){a.mobile.listview.prototype.enhanceWithin(b.target)})})(jQuery);(function(a,c){a.widget("mobile.checkboxradio",a.mobile.widget,{options:{theme:null,initSelector:"input[type='checkbox'],input[type='radio']"},
_create:function(){var b=this,e=this.element,f=a(e).closest("label"),d=f.length?f:a(e).closest("form,fieldset,:jqmData(role='page'),:jqmData(role='dialog')").find("label").filter("[for='"+e[0].id+"']"),g=e[0].type,f=e.jqmData("mini")||e.closest("form,fieldset").jqmData("mini"),h=g+"-on",j=g+"-off",o=e.parents(":jqmData(type='horizontal')").length?c:j,m=e.jqmData("iconpos")||e.closest("form,fieldset").jqmData("iconpos");if(!(g!=="checkbox"&&g!=="radio")){a.extend(this,{label:d,inputtype:g,checkedClass:"ui-"+
h+(o?"":" "+a.mobile.activeBtnClass),uncheckedClass:"ui-"+j,checkedicon:"ui-icon-"+h,uncheckedicon:"ui-icon-"+j});if(!this.options.theme)this.options.theme=a.mobile.getInheritedTheme(this.element,"c");d.buttonMarkup({theme:this.options.theme,icon:o,shadow:false,mini:f,iconpos:m});f=k.createElement("div");f.className="ui-"+g;e.add(d).wrapAll(f);d.bind({vmouseover:function(b){a(this).parent().is(".ui-disabled")&&b.stopPropagation()},vclick:function(a){if(e.is(":disabled"))a.preventDefault();else return b._cacheVals(),
e.prop("checked",g==="radio"&&true||!e.prop("checked")),e.triggerHandler("click"),b._getInputSet().not(e).prop("checked",false),b._updateAll(),false}});e.bind({vmousedown:function(){b._cacheVals()},vclick:function(){var c=a(this);c.is(":checked")?(c.prop("checked",true),b._getInputSet().not(c).prop("checked",false)):c.prop("checked",false);b._updateAll()},focus:function(){d.addClass(a.mobile.focusClass)},blur:function(){d.removeClass(a.mobile.focusClass)}});this.refresh()}},_cacheVals:function(){this._getInputSet().each(function(){a(this).jqmData("cacheVal",
this.checked)})},_getInputSet:function(){return this.inputtype==="checkbox"?this.element:this.element.closest("form,fieldset,:jqmData(role='page')").find("input[name='"+this.element[0].name+"'][type='"+this.inputtype+"']")},_updateAll:function(){var b=this;this._getInputSet().each(function(){var c=a(this);(this.checked||b.inputtype==="checkbox")&&c.trigger("change")}).checkboxradio("refresh")},refresh:function(){var a=this.element[0],c=this.label,f=c.find(".ui-icon");a.checked?(c.addClass(this.checkedClass).removeClass(this.uncheckedClass),
f.addClass(this.checkedicon).removeClass(this.uncheckedicon)):(c.removeClass(this.checkedClass).addClass(this.uncheckedClass),f.removeClass(this.checkedicon).addClass(this.uncheckedicon));a.disabled?this.disable():this.enable()},disable:function(){this.element.prop("disabled",true).parent().addClass("ui-disabled")},enable:function(){this.element.prop("disabled",false).parent().removeClass("ui-disabled")}});a(k).bind("pagecreate create",function(b){a.mobile.checkboxradio.prototype.enhanceWithin(b.target,
true)})})(jQuery);(function(a,c){a.widget("mobile.button",a.mobile.widget,{options:{theme:null,icon:null,iconpos:null,inline:false,corners:true,shadow:true,iconshadow:true,initSelector:"button, [type='button'], [type='submit'], [type='reset'], [type='image']",mini:false},_create:function(){var b=this.element,e,f=this.options,d;d="";var g;if(b[0].tagName==="A")!b.hasClass("ui-btn")&&b.buttonMarkup();else{if(!this.options.theme)this.options.theme=a.mobile.getInheritedTheme(this.element,"c");~b[0].className.indexOf("ui-btn-left")&&
(d="ui-btn-left");~b[0].className.indexOf("ui-btn-right")&&(d="ui-btn-right");e=this.button=a("<div></div>").text(b.text()||b.val()).insertBefore(b).buttonMarkup({theme:f.theme,icon:f.icon,iconpos:f.iconpos,inline:f.inline,corners:f.corners,shadow:f.shadow,iconshadow:f.iconshadow,mini:f.mini}).addClass(d).append(b.addClass("ui-btn-hidden"));f=b.attr("type");d=b.attr("name");f!=="button"&&f!=="reset"&&d&&b.bind("vclick",function(){g===c&&(g=a("<input>",{type:"hidden",name:b.attr("name"),value:b.attr("value")}).insertBefore(b),
a(k).one("submit",function(){g.remove();g=c}))});b.bind({focus:function(){e.addClass(a.mobile.focusClass)},blur:function(){e.removeClass(a.mobile.focusClass)}});this.refresh()}},enable:function(){this.element.attr("disabled",false);this.button.removeClass("ui-disabled").attr("aria-disabled",false);return this._setOption("disabled",false)},disable:function(){this.element.attr("disabled",true);this.button.addClass("ui-disabled").attr("aria-disabled",true);return this._setOption("disabled",true)},refresh:function(){var b=
this.element;b.prop("disabled")?this.disable():this.enable();a(this.button.data("buttonElements").text).text(b.text()||b.val())}});a(k).bind("pagecreate create",function(b){a.mobile.button.prototype.enhanceWithin(b.target,true)})})(jQuery);(function(a){a.fn.controlgroup=function(c){function b(a,b){a.removeClass("ui-btn-corner-all ui-shadow").eq(0).addClass(b[0]).end().last().addClass(b[1]).addClass("ui-controlgroup-last")}return this.each(function(){var e=a(this),f=a.extend({direction:e.jqmData("type")||
"vertical",shadow:false,excludeInvisible:true,mini:e.jqmData("mini")},c),d=e.children("legend"),g=f.direction=="horizontal"?["ui-corner-left","ui-corner-right"]:["ui-corner-top","ui-corner-bottom"];e.find("input").first().attr("type");d.length&&(e.wrapInner("<div class='ui-controlgroup-controls'></div>"),a("<div role='heading' class='ui-controlgroup-label'>"+d.html()+"</div>").insertBefore(e.children(0)),d.remove());e.addClass("ui-corner-all ui-controlgroup ui-controlgroup-"+f.direction);b(e.find(".ui-btn"+
(f.excludeInvisible?":visible":"")).not(".ui-slider-handle"),g);b(e.find(".ui-btn-inner"),g);f.shadow&&e.addClass("ui-shadow");f.mini&&e.addClass("ui-mini")})}})(jQuery);(function(a){a(k).bind("pagecreate create",function(c){a(c.target).find("a").jqmEnhanceable().not(".ui-btn, .ui-link-inherit, :jqmData(role='none'), :jqmData(role='nojs')").addClass("ui-link")})})(jQuery);(function(a){var c=a("meta[name=viewport]"),b=c.attr("content"),e=b+",maximum-scale=1, user-scalable=no",f=b+",maximum-scale=10, user-scalable=yes",
d=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(b);a.mobile.zoom=a.extend({},{enabled:!d,locked:false,disable:function(b){if(!d&&!a.mobile.zoom.locked)c.attr("content",e),a.mobile.zoom.enabled=false,a.mobile.zoom.locked=b||false},enable:function(b){if(!d&&(!a.mobile.zoom.locked||b===true))c.attr("content",f),a.mobile.zoom.enabled=true,a.mobile.zoom.locked=false},restore:function(){if(!d)c.attr("content",b),a.mobile.zoom.enabled=true}})})(jQuery);(function(a){a.widget("mobile.textinput",
a.mobile.widget,{options:{theme:null,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,initSelector:"input[type='text'], input[type='search'], :jqmData(type='search'), input[type='number'], :jqmData(type='number'), input[type='password'], input[type='email'], input[type='url'], input[type='tel'], textarea, input[type='time'], input[type='date'], input[type='month'], input[type='week'], input[type='datetime'], input[type='datetime-local'], input[type='color'], input:not([type])",
clearSearchButtonText:"clear text"},_create:function(){var c=this.element,b=this.options,e=b.theme||a.mobile.getInheritedTheme(this.element,"c"),f=" ui-body-"+e,d=c.jqmData("mini")==true,g=d?" ui-mini":"",h,j;a("label[for='"+c.attr("id")+"']").addClass("ui-input-text");h=c.addClass("ui-input-text ui-body-"+e);typeof c[0].autocorrect!=="undefined"&&!a.support.touchOverflow&&(c[0].setAttribute("autocorrect","off"),c[0].setAttribute("autocomplete","off"));c.is("[type='search'],:jqmData(type='search')")?
(h=c.wrap("<div class='ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield"+f+g+"'></div>").parent(),j=a("<a href='#' class='ui-input-clear' title='"+b.clearSearchButtonText+"'>"+b.clearSearchButtonText+"</a>").bind("click",function(a){c.val("").focus().trigger("change");j.addClass("ui-input-clear-hidden");a.preventDefault()}).appendTo(h).buttonMarkup({icon:"delete",iconpos:"notext",corners:true,shadow:true,mini:d}),e=function(){setTimeout(function(){j.toggleClass("ui-input-clear-hidden",
!c.val())},0)},e(),c.bind("paste cut keyup focus change blur",e)):c.addClass("ui-corner-all ui-shadow-inset"+f+g);c.focus(function(){h.addClass(a.mobile.focusClass)}).blur(function(){h.removeClass(a.mobile.focusClass)}).bind("focus",function(){b.preventFocusZoom&&a.mobile.zoom.disable(true)}).bind("blur",function(){b.preventFocusZoom&&a.mobile.zoom.enable(true)});if(c.is("textarea")){var o=function(){var a=c[0].scrollHeight;c[0].clientHeight<a&&c.height(a+15)},m;c.keyup(function(){clearTimeout(m);
m=setTimeout(o,100)});a(k).one("pagechange",o);a.trim(c.val())&&a(s).load(o)}},disable:function(){(this.element.attr("disabled",true).is("[type='search'],:jqmData(type='search')")?this.element.parent():this.element).addClass("ui-disabled")},enable:function(){(this.element.attr("disabled",false).is("[type='search'],:jqmData(type='search')")?this.element.parent():this.element).removeClass("ui-disabled")}});a(k).bind("pagecreate create",function(c){a.mobile.textinput.prototype.enhanceWithin(c.target,
true)})})(jQuery);(function(a){a.mobile.listview.prototype.options.filter=false;a.mobile.listview.prototype.options.filterPlaceholder="Filter items...";a.mobile.listview.prototype.options.filterTheme="c";a.mobile.listview.prototype.options.filterCallback=function(a,b){return a.toLowerCase().indexOf(b)===-1};a(k).delegate(":jqmData(role='listview')","listviewcreate",function(){var c=a(this),b=c.data("listview");if(b.options.filter){var e=a("<form>",{"class":"ui-listview-filter ui-bar-"+b.options.filterTheme,
role:"search"});a("<input>",{placeholder:b.options.filterPlaceholder}).attr("data-"+a.mobile.ns+"type","search").jqmData("lastval","").bind("keyup change",function(){var e=a(this),d=this.value.toLowerCase(),g=null,g=e.jqmData("lastval")+"",h=false,j="";e.jqmData("lastval",d);g=d.length<g.length||d.indexOf(g)!==0?c.children():c.children(":not(.ui-screen-hidden)");if(d){for(var k=g.length-1;k>=0;k--)e=a(g[k]),j=e.jqmData("filtertext")||e.text(),e.is("li:jqmData(role=list-divider)")?(e.toggleClass("ui-filter-hidequeue",
!h),h=false):b.options.filterCallback(j,d)?e.toggleClass("ui-filter-hidequeue",true):h=true;g.filter(":not(.ui-filter-hidequeue)").toggleClass("ui-screen-hidden",false);g.filter(".ui-filter-hidequeue").toggleClass("ui-screen-hidden",true).toggleClass("ui-filter-hidequeue",false)}else g.toggleClass("ui-screen-hidden",false);b._refreshCorners()}).appendTo(e).textinput();b.options.inset&&e.addClass("ui-listview-filter-inset");e.bind("submit",function(){return false}).insertBefore(c)}})})(jQuery);(function(a,
c){a.widget("mobile.slider",a.mobile.widget,{options:{theme:null,trackTheme:null,disabled:false,initSelector:"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",mini:false},_create:function(){var b=this,e=this.element,f=a.mobile.getInheritedTheme(e,"c"),d=this.options.theme||f,f=this.options.trackTheme||f,g=e[0].nodeName.toLowerCase(),h=g=="select"?"ui-slider-switch":"",j=e.attr("id"),o=j+"-label",j=a("[for='"+j+"']").attr("id",o),m=function(){return g=="input"?parseFloat(e.val()):
e[0].selectedIndex},p=g=="input"?parseFloat(e.attr("min")):0,l=g=="input"?parseFloat(e.attr("max")):e.find("option").length-1,r=s.parseFloat(e.attr("step")||1),n=this.options.inline||e.jqmData("inline")==true?" ui-slider-inline":"",q=this.options.mini||e.jqmData("mini")?" ui-slider-mini":"",t=k.createElement("a"),x=a(t),u=k.createElement("div"),w=a(u),v=e.jqmData("highlight")&&g!="select"?function(){var b=k.createElement("div");b.className="ui-slider-bg ui-btn-active ui-btn-corner-all";return a(b).prependTo(w)}():
false;t.setAttribute("href","#");u.setAttribute("role","application");u.className=["ui-slider ",h," ui-btn-down-",f," ui-btn-corner-all",n,q].join("");t.className="ui-slider-handle";u.appendChild(t);x.buttonMarkup({corners:true,theme:d,shadow:true}).attr({role:"slider","aria-valuemin":p,"aria-valuemax":l,"aria-valuenow":m(),"aria-valuetext":m(),title:m(),"aria-labelledby":o});a.extend(this,{slider:w,handle:x,valuebg:v,dragging:false,beforeStart:null,userModified:false,mouseMoved:false});if(g=="select"){d=
k.createElement("div");d.className="ui-slider-inneroffset";h=0;for(o=u.childNodes.length;h<o;h++)d.appendChild(u.childNodes[h]);u.appendChild(d);x.addClass("ui-slider-handle-snapping");u=e.find("option");d=0;for(h=u.length;d<h;d++)o=!d?"b":"a",n=!d?" ui-btn-down-"+f:" "+a.mobile.activeBtnClass,k.createElement("div"),q=k.createElement("span"),q.className=["ui-slider-label ui-slider-label-",o,n," ui-btn-corner-all"].join(""),q.setAttribute("role","img"),q.appendChild(k.createTextNode(u[d].innerHTML)),
a(q).prependTo(w);b._labels=a(".ui-slider-label",w)}j.addClass("ui-slider");e.addClass(g==="input"?"ui-slider-input":"ui-slider-switch").change(function(){b.mouseMoved||b.refresh(m(),true)}).keyup(function(){b.refresh(m(),true,true)}).blur(function(){b.refresh(m(),true)});a(k).bind("vmousemove",function(a){if(b.dragging)return b.mouseMoved=true,g==="select"&&x.removeClass("ui-slider-handle-snapping"),b.refresh(a),b.userModified=b.beforeStart!==e[0].selectedIndex,false});w.bind("vmousedown",function(a){b.dragging=
true;b.userModified=false;b.mouseMoved=false;if(g==="select")b.beforeStart=e[0].selectedIndex;b.refresh(a);return false}).bind("vclick",false);w.add(k).bind("vmouseup",function(){if(b.dragging)return b.dragging=false,g==="select"&&(x.addClass("ui-slider-handle-snapping"),b.mouseMoved?b.userModified?b.refresh(b.beforeStart==0?1:0):b.refresh(b.beforeStart):b.refresh(b.beforeStart==0?1:0)),b.mouseMoved=false});w.insertAfter(e);g=="select"&&this.handle.bind({focus:function(){w.addClass(a.mobile.focusClass)},
blur:function(){w.removeClass(a.mobile.focusClass)}});this.handle.bind({vmousedown:function(){a(this).focus()},vclick:false,keydown:function(c){var d=m();if(!b.options.disabled){switch(c.keyCode){case a.mobile.keyCode.HOME:case a.mobile.keyCode.END:case a.mobile.keyCode.PAGE_UP:case a.mobile.keyCode.PAGE_DOWN:case a.mobile.keyCode.UP:case a.mobile.keyCode.RIGHT:case a.mobile.keyCode.DOWN:case a.mobile.keyCode.LEFT:if(c.preventDefault(),!b._keySliding)b._keySliding=true,a(this).addClass("ui-state-active")}switch(c.keyCode){case a.mobile.keyCode.HOME:b.refresh(p);
break;case a.mobile.keyCode.END:b.refresh(l);break;case a.mobile.keyCode.PAGE_UP:case a.mobile.keyCode.UP:case a.mobile.keyCode.RIGHT:b.refresh(d+r);break;case a.mobile.keyCode.PAGE_DOWN:case a.mobile.keyCode.DOWN:case a.mobile.keyCode.LEFT:b.refresh(d-r)}}},keyup:function(){if(b._keySliding)b._keySliding=false,a(this).removeClass("ui-state-active")}});this.refresh(c,c,true)},refresh:function(b,c,f){(this.options.disabled||this.element.attr("disabled"))&&this.disable();var d=this.element,g=d[0].nodeName.toLowerCase(),
h=g==="input"?parseFloat(d.attr("min")):0,j=g==="input"?parseFloat(d.attr("max")):d.find("option").length-1,k=g==="input"&&parseFloat(d.attr("step"))>0?parseFloat(d.attr("step")):1;if(typeof b==="object"){if(!this.dragging||b.pageX<this.slider.offset().left-8||b.pageX>this.slider.offset().left+this.slider.width()+8)return;b=Math.round((b.pageX-this.slider.offset().left)/this.slider.width()*100)}else b==null&&(b=g==="input"?parseFloat(d.val()||0):d[0].selectedIndex),b=(parseFloat(b)-h)/(j-h)*100;if(!isNaN(b)){b<
0&&(b=0);b>100&&(b=100);var m=b/100*(j-h)+h,p=(m-h)%k;m-=p;Math.abs(p)*2>=k&&(m+=p>0?k:-k);m=parseFloat(m.toFixed(5));m<h&&(m=h);m>j&&(m=j);this.handle.css("left",b+"%");this.handle.attr({"aria-valuenow":g==="input"?m:d.find("option").eq(m).attr("value"),"aria-valuetext":g==="input"?m:d.find("option").eq(m).getEncodedText(),title:g==="input"?m:d.find("option").eq(m).getEncodedText()});this.valuebg&&this.valuebg.css("width",b+"%");if(this._labels){var h=this.handle.width()/this.slider.width()*100,
l=b&&h+(100-h)*b/100,r=b===100?0:Math.min(h+100-l,100);this._labels.each(function(){var b=a(this).is(".ui-slider-label-a");a(this).width((b?l:r)+"%")})}if(!f)f=false,g==="input"?(f=d.val()!==m,d.val(m)):(f=d[0].selectedIndex!==m,d[0].selectedIndex=m),!c&&f&&d.trigger("change")}},enable:function(){this.element.attr("disabled",false);this.slider.removeClass("ui-disabled").attr("aria-disabled",false);return this._setOption("disabled",false)},disable:function(){this.element.attr("disabled",true);this.slider.addClass("ui-disabled").attr("aria-disabled",
true);return this._setOption("disabled",true)}});a(k).bind("pagecreate create",function(b){a.mobile.slider.prototype.enhanceWithin(b.target,true)})})(jQuery);(function(a){a.widget("mobile.selectmenu",a.mobile.widget,{options:{theme:null,disabled:false,icon:"arrow-d",iconpos:"right",inline:false,corners:true,shadow:true,iconshadow:true,overlayTheme:"a",hidePlaceholderMenuItems:true,closeText:"Close",nativeMenu:true,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>
-1,initSelector:"select:not(:jqmData(role='slider'))",mini:false},_button:function(){return a("<div/>")},_setDisabled:function(a){this.element.attr("disabled",a);this.button.attr("aria-disabled",a);return this._setOption("disabled",a)},_focusButton:function(){var a=this;setTimeout(function(){a.button.focus()},40)},_selectOptions:function(){return this.select.find("option")},_preExtension:function(){var c="";~this.element[0].className.indexOf("ui-btn-left")&&(c=" ui-btn-left");~this.element[0].className.indexOf("ui-btn-right")&&
(c=" ui-btn-right");this.select=this.element.wrap("<div class='ui-select"+c+"'>");this.selectID=this.select.attr("id");this.label=a("label[for='"+this.selectID+"']").addClass("ui-select");this.isMultiple=this.select[0].multiple;if(!this.options.theme)this.options.theme=a.mobile.getInheritedTheme(this.select,"c")},_create:function(){this._preExtension();this._trigger("beforeCreate");this.button=this._button();var c=this,b=this.options,e=this.button.text(a(this.select[0].options.item(this.select[0].selectedIndex==
-1?0:this.select[0].selectedIndex)).text()).insertBefore(this.select).buttonMarkup({theme:b.theme,icon:b.icon,iconpos:b.iconpos,inline:b.inline,corners:b.corners,shadow:b.shadow,iconshadow:b.iconshadow,mini:b.mini});b.nativeMenu&&s.opera&&s.opera.version&&this.select.addClass("ui-select-nativeonly");if(this.isMultiple)this.buttonCount=a("<span>").addClass("ui-li-count ui-btn-up-c ui-btn-corner-all").hide().appendTo(e.addClass("ui-li-has-count"));(b.disabled||this.element.attr("disabled"))&&this.disable();
this.select.change(function(){c.refresh()});this.build()},build:function(){var c=this;this.select.appendTo(c.button).bind("vmousedown",function(){c.button.addClass(a.mobile.activeBtnClass)}).bind("focus",function(){c.button.addClass(a.mobile.focusClass)}).bind("blur",function(){c.button.removeClass(a.mobile.focusClass)}).bind("focus vmouseover",function(){c.button.trigger("vmouseover")}).bind("vmousemove",function(){c.button.removeClass(a.mobile.activeBtnClass)}).bind("change blur vmouseout",function(){c.button.trigger("vmouseout").removeClass(a.mobile.activeBtnClass)}).bind("change blur",
function(){c.button.removeClass("ui-btn-down-"+c.options.theme)});c.button.bind("vmousedown",function(){c.options.preventFocusZoom&&a.mobile.zoom.disable(true)}).bind("mouseup",function(){c.options.preventFocusZoom&&a.mobile.zoom.enable(true)})},selected:function(){return this._selectOptions().filter(":selected")},selectedIndices:function(){var a=this;return this.selected().map(function(){return a._selectOptions().index(this)}).get()},setButtonText:function(){var c=this,b=this.selected();this.button.find(".ui-btn-text").text(function(){return!c.isMultiple?
b.text():b.length?b.map(function(){return a(this).text()}).get().join(", "):c.placeholder})},setButtonCount:function(){var a=this.selected();this.isMultiple&&this.buttonCount[a.length>1?"show":"hide"]().text(a.length)},refresh:function(){this.setButtonText();this.setButtonCount()},open:a.noop,close:a.noop,disable:function(){this._setDisabled(true);this.button.addClass("ui-disabled")},enable:function(){this._setDisabled(false);this.button.removeClass("ui-disabled")}});a(k).bind("pagecreate create",
function(c){a.mobile.selectmenu.prototype.enhanceWithin(c.target,true)})})(jQuery);(function(a){var c=function(b){var c=b.selectID,f=b.label,d=b.select.closest(".ui-page"),g=a("<div>",{"class":"ui-selectmenu-screen ui-screen-hidden"}).appendTo(d),h=b._selectOptions(),j=b.isMultiple=b.select[0].multiple,o=c+"-button",m=c+"-menu",p=a("<div data-"+a.mobile.ns+"role='dialog' data-"+a.mobile.ns+"theme='"+b.options.theme+"' data-"+a.mobile.ns+"overlay-theme='"+b.options.overlayTheme+"'><div data-"+a.mobile.ns+
"role='header'><div class='ui-title'>"+f.getEncodedText()+"</div></div><div data-"+a.mobile.ns+"role='content'></div></div>"),l=a("<div>",{"class":"ui-selectmenu ui-selectmenu-hidden ui-overlay-shadow ui-corner-all ui-body-"+b.options.overlayTheme+" "+a.mobile.defaultDialogTransition}).insertAfter(g),r=a("<ul>",{"class":"ui-selectmenu-list",id:m,role:"listbox","aria-labelledby":o}).attr("data-"+a.mobile.ns+"theme",b.options.theme).appendTo(l),n=a("<div>",{"class":"ui-header ui-bar-"+b.options.theme}).prependTo(l),
q=a("<h1>",{"class":"ui-title"}).appendTo(n),t;b.isMultiple&&(t=a("<a>",{text:b.options.closeText,href:"#","class":"ui-btn-left"}).attr("data-"+a.mobile.ns+"iconpos","notext").attr("data-"+a.mobile.ns+"icon","delete").appendTo(n).buttonMarkup());a.extend(b,{select:b.select,selectID:c,buttonId:o,menuId:m,thisPage:d,menuPage:p,label:f,screen:g,selectOptions:h,isMultiple:j,theme:b.options.theme,listbox:l,list:r,header:n,headerTitle:q,headerClose:t,menuPageContent:void 0,menuPageClose:void 0,placeholder:"",
build:function(){var c=this;c.refresh();c.select.attr("tabindex","-1").focus(function(){a(this).blur();c.button.focus()});c.button.bind("vclick keydown",function(b){if(b.type=="vclick"||b.keyCode&&(b.keyCode===a.mobile.keyCode.ENTER||b.keyCode===a.mobile.keyCode.SPACE))c.open(),b.preventDefault()});c.list.attr("role","listbox").bind("focusin",function(b){a(b.target).attr("tabindex","0").trigger("vmouseover")}).bind("focusout",function(b){a(b.target).attr("tabindex","-1").trigger("vmouseout")}).delegate("li:not(.ui-disabled, .ui-li-divider)",
"click",function(b){var d=c.select[0].selectedIndex,e=c.list.find("li:not(.ui-li-divider)").index(this),f=c._selectOptions().eq(e)[0];f.selected=c.isMultiple?!f.selected:true;c.isMultiple&&a(this).find(".ui-icon").toggleClass("ui-icon-checkbox-on",f.selected).toggleClass("ui-icon-checkbox-off",!f.selected);(c.isMultiple||d!==e)&&c.select.trigger("change");c.isMultiple||c.close();b.preventDefault()}).keydown(function(c){var d=a(c.target),e=d.closest("li");switch(c.keyCode){case 38:return c=e.prev().not(".ui-selectmenu-placeholder"),
c.is(".ui-li-divider")&&(c=c.prev()),c.length&&(d.blur().attr("tabindex","-1"),c.addClass("ui-btn-down-"+b.options.theme).find("a").first().focus()),false;case 40:return c=e.next(),c.is(".ui-li-divider")&&(c=c.next()),c.length&&(d.blur().attr("tabindex","-1"),c.addClass("ui-btn-down-"+b.options.theme).find("a").first().focus()),false;case 13:case 32:return d.trigger("click"),false}});c.menuPage.bind("pagehide",function(){c.list.appendTo(c.listbox);c._focusButton();a.mobile._bindPageRemove.call(c.thisPage)});
c.screen.bind("vclick",function(){c.close()});c.isMultiple&&c.headerClose.click(function(){if(c.menuType=="overlay")return c.close(),false});c.thisPage.addDependents(this.menuPage)},_isRebuildRequired:function(){var a=this.list.find("li");return this._selectOptions().text()!==a.text()},refresh:function(b){var c=this;this._selectOptions();this.selected();var d=this.selectedIndices();(b||this._isRebuildRequired())&&c._buildList();c.setButtonText();c.setButtonCount();c.list.find("li:not(.ui-li-divider)").removeClass(a.mobile.activeBtnClass).attr("aria-selected",
false).each(function(b){a.inArray(b,d)>-1&&(b=a(this),b.attr("aria-selected",true),c.isMultiple?b.find(".ui-icon").removeClass("ui-icon-checkbox-off").addClass("ui-icon-checkbox-on"):b.is(".ui-selectmenu-placeholder")?b.next().addClass(a.mobile.activeBtnClass):b.addClass(a.mobile.activeBtnClass))})},close:function(){if(!this.options.disabled&&this.isOpen)this.menuType=="page"?s.history.back():(this.screen.addClass("ui-screen-hidden"),this.listbox.addClass("ui-selectmenu-hidden").removeAttr("style").removeClass("in"),
this.list.appendTo(this.listbox),this._focusButton()),this.isOpen=false},open:function(){function b(){c.list.find("."+a.mobile.activeBtnClass+" a").focus()}if(!this.options.disabled){var c=this,d=a(s),e=c.list.parent(),f=e.outerHeight(),e=e.outerWidth();a(".ui-page-active");var g=d.scrollTop(),j=c.button.offset().top,h=d.height(),d=d.width();c.button.addClass(a.mobile.activeBtnClass);setTimeout(function(){c.button.removeClass(a.mobile.activeBtnClass)},300);if(f>h-80||!a.support.scrollTop){c.menuPage.appendTo(a.mobile.pageContainer).page();
c.menuPageContent=p.find(".ui-content");c.menuPageClose=p.find(".ui-header a");c.thisPage.unbind("pagehide.remove");if(g==0&&j>h)c.thisPage.one("pagehide",function(){a(this).jqmData("lastScroll",j)});c.menuPage.one("pageshow",function(){b();c.isOpen=true});c.menuType="page";c.menuPageContent.append(c.list);c.menuPage.find("div .ui-title").text(c.label.text());a.mobile.changePage(c.menuPage,{transition:a.mobile.defaultDialogTransition})}else{c.menuType="overlay";c.screen.height(a(k).height()).removeClass("ui-screen-hidden");
var l=j-g,m=g+h-j,n=f/2,o=parseFloat(c.list.parent().css("max-width")),f=l>f/2&&m>f/2?j+c.button.outerHeight()/2-n:l>m?g+h-f-30:g+30;e<o?g=(d-e)/2:(g=c.button.offset().left+c.button.outerWidth()/2-e/2,g<30?g=30:g+e>d&&(g=d-e-30));c.listbox.append(c.list).removeClass("ui-selectmenu-hidden").css({top:f,left:g}).addClass("in");b();c.isOpen=true}}},_buildList:function(){var b=this.options,c=this.placeholder,d=true,e=this.isMultiple?"checkbox-off":"false";this.list.empty().filter(".ui-listview").listview("destroy");
var f=this.select.find("option"),g=f.length,j=this.select[0],h="data-"+a.mobile.ns,l=h+"option-index",m=h+"icon";h+="role";for(var n=k.createDocumentFragment(),o,p=0;p<g;p++){var r=f[p],q=a(r),s=r.parentNode,t=q.text(),D=k.createElement("a"),J=[];D.setAttribute("href","#");D.appendChild(k.createTextNode(t));s!==j&&s.nodeName.toLowerCase()==="optgroup"&&(s=s.getAttribute("label"),s!=o&&(o=k.createElement("li"),o.setAttribute(h,"list-divider"),o.setAttribute("role","option"),o.setAttribute("tabindex",
"-1"),o.appendChild(k.createTextNode(s)),n.appendChild(o),o=s));if(d&&(!r.getAttribute("value")||t.length==0||q.jqmData("placeholder")))if(d=false,b.hidePlaceholderMenuItems&&J.push("ui-selectmenu-placeholder"),!c)c=this.placeholder=t;q=k.createElement("li");r.disabled&&(J.push("ui-disabled"),q.setAttribute("aria-disabled",true));q.setAttribute(l,p);q.setAttribute(m,e);q.className=J.join(" ");q.setAttribute("role","option");D.setAttribute("tabindex","-1");q.appendChild(D);n.appendChild(q)}this.list[0].appendChild(n);
!this.isMultiple&&!c.length?this.header.hide():this.headerTitle.text(this.placeholder);this.list.listview()},_button:function(){return a("<a>",{href:"#",role:"button",id:this.buttonId,"aria-haspopup":"true","aria-owns":this.menuId})}})};a(k).bind("selectmenubeforecreate",function(b){b=a(b.target).data("selectmenu");b.options.nativeMenu||c(b)})})(jQuery);(function(a){a.widget("mobile.fixedtoolbar",a.mobile.widget,{options:{visibleOnPageShow:true,disablePageZoom:true,transition:"slide",fullscreen:false,
tapToggle:true,tapToggleBlacklist:"a, input, select, textarea, .ui-header-fixed, .ui-footer-fixed",hideDuringFocus:"input, textarea, select",updatePagePadding:true,trackPersistentToolbars:true,supportBlacklist:function(){var a=s,b=navigator.userAgent,e=navigator.platform,f=b.match(/AppleWebKit\/([0-9]+)/),f=!!f&&f[1],d=b.match(/Fennec\/([0-9]+)/),d=!!d&&d[1],g=b.match(/Opera Mobi\/([0-9]+)/),h=!!g&&g[1];return(e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1||e.indexOf("iPod")>-1)&&f&&f<534||a.operamini&&
{}.toString.call(a.operamini)==="[object OperaMini]"||g&&h<7458||b.indexOf("Android")>-1&&f&&f<533||d&&d<6||"palmGetResource"in s&&f&&f<534||b.indexOf("MeeGo")>-1&&b.indexOf("NokiaBrowser/8.5.0")>-1?true:false},initSelector:":jqmData(position='fixed')"},_create:function(){var a=this.options,b=this.element,e=b.is(":jqmData(role='header')")?"header":"footer",f=b.closest(".ui-page");a.supportBlacklist()?this.destroy():(b.addClass("ui-"+e+"-fixed"),a.fullscreen?(b.addClass("ui-"+e+"-fullscreen"),f.addClass("ui-page-"+
e+"-fullscreen")):f.addClass("ui-page-"+e+"-fixed"),this._addTransitionClass(),this._bindPageEvents(),this._bindToggleHandlers())},_addTransitionClass:function(){var a=this.options.transition;a&&a!=="none"&&(a==="slide"&&(a=this.element.is(".ui-header")?"slidedown":"slideup"),this.element.addClass(a))},_bindPageEvents:function(){var c=this,b=c.options;c.element.closest(".ui-page").bind("pagebeforeshow",function(){b.disablePageZoom&&a.mobile.zoom.disable(true);b.visibleOnPageShow||c.hide(true)}).bind("webkitAnimationStart animationstart updatelayout",
function(){b.updatePagePadding&&c.updatePagePadding()}).bind("pageshow",function(){c.updatePagePadding();b.updatePagePadding&&a(s).bind("throttledresize."+c.widgetName,function(){c.updatePagePadding()})}).bind("pagebeforehide",function(e,f){b.disablePageZoom&&a.mobile.zoom.enable(true);b.updatePagePadding&&a(s).unbind("throttledresize."+c.widgetName);if(b.trackPersistentToolbars){var d=a(".ui-footer-fixed:jqmData(id)",this),g=a(".ui-header-fixed:jqmData(id)",this),h=d.length&&f.nextPage&&a(".ui-footer-fixed:jqmData(id='"+
d.jqmData("id")+"')",f.nextPage),j=g.length&&f.nextPage&&a(".ui-header-fixed:jqmData(id='"+g.jqmData("id")+"')",f.nextPage),h=h||a();if(h.length||j.length)h.add(j).appendTo(a.mobile.pageContainer),f.nextPage.one("pageshow",function(){h.add(j).appendTo(this)})}})},_visible:true,updatePagePadding:function(){var a=this.element,b=a.is(".ui-header");this.options.fullscreen||a.closest(".ui-page").css("padding-"+(b?"top":"bottom"),a.outerHeight())},_useTransition:function(c){var b=this.element,e=a(s).scrollTop(),
f=b.height(),d=b.closest(".ui-page").height(),g=a.mobile.getScreenHeight(),b=b.is(":jqmData(role='header')")?"header":"footer";return!c&&(this.options.transition&&this.options.transition!=="none"&&(b==="header"&&!this.options.fullscreen&&e>f||b==="footer"&&!this.options.fullscreen&&e+g<d-f)||this.options.fullscreen)},show:function(a){var b=this.element;this._useTransition(a)?b.removeClass("out ui-fixed-hidden").addClass("in"):b.removeClass("ui-fixed-hidden");this._visible=true},hide:function(a){var b=
this.element,e="out"+(this.options.transition==="slide"?" reverse":"");this._useTransition(a)?b.addClass(e).removeClass("in").animationComplete(function(){b.addClass("ui-fixed-hidden").removeClass(e)}):b.addClass("ui-fixed-hidden").removeClass(e);this._visible=false},toggle:function(){this[this._visible?"hide":"show"]()},_bindToggleHandlers:function(){var c=this,b=c.options;c.element.closest(".ui-page").bind("vclick",function(e){b.tapToggle&&!a(e.target).closest(b.tapToggleBlacklist).length&&c.toggle()}).bind("focusin focusout",
function(e){if(screen.width<500&&a(e.target).is(b.hideDuringFocus)&&!a(e.target).closest(".ui-header-fixed, .ui-footer-fixed").length)c[e.type==="focusin"&&c._visible?"hide":"show"]()})},destroy:function(){this.element.removeClass("ui-header-fixed ui-footer-fixed ui-header-fullscreen ui-footer-fullscreen in out fade slidedown slideup ui-fixed-hidden");this.element.closest(".ui-page").removeClass("ui-page-header-fixed ui-page-footer-fixed ui-page-header-fullscreen ui-page-footer-fullscreen")}});a(k).bind("pagecreate create",
function(c){a(c.target).jqmData("fullscreen")&&a(a.mobile.fixedtoolbar.prototype.options.initSelector,c.target).not(":jqmData(fullscreen)").jqmData("fullscreen",true);a.mobile.fixedtoolbar.prototype.enhanceWithin(c.target)})})(jQuery);(function(a,c){if(/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1){var b=a.mobile.zoom,e,f,d,g,h;a(c).bind("orientationchange.iosorientationfix",b.enable).bind("devicemotion.iosorientationfix",function(a){e=a.originalEvent;
h=e.accelerationIncludingGravity;f=Math.abs(h.x);d=Math.abs(h.y);g=Math.abs(h.z);!c.orientation&&(f>7||(g>6&&d<8||g<8&&d>6)&&f>5)?b.enabled&&b.disable():b.enabled||b.enable()})}})(jQuery,this);(function(a,c){function b(){var b=a("."+a.mobile.activeBtnClass).first();h.css({top:a.support.scrollTop&&g.scrollTop()+g.height()/2||b.length&&b.offset().top||100})}function e(){var c=h.offset(),d=g.scrollTop(),f=a.mobile.getScreenHeight();if(c.top<d||c.top-d>f)h.addClass("ui-loader-fakefix"),b(),g.unbind("scroll",
e).bind("scroll",b)}function f(){d.removeClass("ui-mobile-rendering")}var d=a("html");a("head");var g=a(c);a(c.document).trigger("mobileinit");if(a.mobile.gradeA()){if(a.mobile.ajaxBlacklist)a.mobile.ajaxEnabled=false;d.addClass("ui-mobile ui-mobile-rendering");setTimeout(f,5E3);var h=a("<div class='ui-loader'><span class='ui-icon ui-icon-loading'></span><h1></h1></div>");a.extend(a.mobile,{showPageLoadingMsg:function(b,c,f){d.addClass("ui-loading");if(a.mobile.loadingMessage){var k=f||a.mobile.loadingMessageTextVisible;
b=b||a.mobile.loadingMessageTheme;h.attr("class","ui-loader ui-corner-all ui-body-"+(b||"a")+" ui-loader-"+(k?"verbose":"default")+(f?" ui-loader-textonly":"")).find("h1").text(c||a.mobile.loadingMessage).end().appendTo(a.mobile.pageContainer);e();g.bind("scroll",e)}},hidePageLoadingMsg:function(){d.removeClass("ui-loading");a.mobile.loadingMessage&&h.removeClass("ui-loader-fakefix");a(c).unbind("scroll",b);a(c).unbind("scroll",e)},initializePage:function(){var b=a(":jqmData(role='page'), :jqmData(role='dialog')");
b.length||(b=a("body").wrapInner("<div data-"+a.mobile.ns+"role='page'></div>").children(0));b.each(function(){var b=a(this);b.jqmData("url")||b.attr("data-"+a.mobile.ns+"url",b.attr("id")||location.pathname+location.search)});a.mobile.firstPage=b.first();a.mobile.pageContainer=b.first().parent().addClass("ui-mobile-viewport");g.trigger("pagecontainercreate");a.mobile.showPageLoadingMsg();f();!a.mobile.hashListeningEnabled||!a.mobile.path.stripHash(location.hash)?a.mobile.changePage(a.mobile.firstPage,
{transition:"none",reverse:true,changeHash:false,fromHashChange:true}):g.trigger("hashchange",[true])}});a.mobile._registerInternalEvents();a(function(){c.scrollTo(0,1);a.mobile.defaultHomeScroll=!a.support.scrollTop||a(c).scrollTop()===1?0:1;a.fn.controlgroup&&a(k).bind("pagecreate create",function(b){a(":jqmData(role='controlgroup')",b.target).jqmEnhanceable().controlgroup({excludeInvisible:false})});a.mobile.autoInitializePage&&a.mobile.initializePage();g.load(a.mobile.silentScroll)})}})(jQuery,
this)});

/*
 * jQuery Mobile Framework : plugin to provide a date and time picker.
 * Copyright (c) JTSage
 * CC 3.0 Attribution.  May be relicensed without permission/notifcation.
 * https://github.com/jtsage/jquery-mobile-datebox
 */

(function(a,b){Date.prototype.getISO=function(){return String(this.getFullYear())+"-"+((this.getMonth()<9)?"0":"")+String(this.getMonth()+1)+"-"+((this.getDate()<10)?"0":"")+String(this.getDate())};Date.prototype.getComp=function(){return parseInt(this.getISO().replace(/-/g,""),10)};Date.prototype.copy=function(){return this.copymod()};Date.prototype.copymod=function(c,d){if(typeof c==="undefined"){c=[0,0,0,0,0,0]}if(typeof d==="undefined"){d=[0,0,0,0,0,0]}while(c.length<6){c.push(0)}while(d.length<6){d.push(0)}return new Date(((d[0]>0)?d[0]:this.getFullYear()+c[0]),((d[1]>0)?d[1]:this.getMonth()+c[1]),((d[2]>0)?d[2]:this.getDate()+c[2]),((d[3]>0)?d[3]:this.getHours()+c[3]),((d[4]>0)?d[4]:this.getMinutes()+c[4]),((d[5]>0)?d[5]:this.getSeconds()+c[5]),0)};Date.prototype.getEpoch=function(){return(this.getTime()-this.getMilliseconds())/1000};Date.prototype.adjust=function(d,c){switch(d){case"y":this.setFullYear(this.getFullYear()+c);break;case"m":this.setMonth(this.getMonth()+c);break;case"d":this.setDate(this.getDate()+c);break;case"h":this.setHours(this.getHours()+c);break;case"i":this.setMinutes(this.getMinutes()+c);break;case"s":this.setSeconds(this.getSeconds()+c);break}return this.getTime()};a.widget("mobile.datebox",a.mobile.widget,{options:{version:"1.0.1-2012022700",theme:false,defaultTheme:"c",pickPageTheme:"b",pickPageInputTheme:"e",pickPageButtonTheme:"a",pickPageHighButtonTheme:"e",pickPageOHighButtonTheme:"e",pickPageOAHighButtonTheme:"e",pickPageODHighButtonTheme:"e",pickPageTodayButtonTheme:"e",pickPageSlideButtonTheme:"d",pickPageFlipButtonTheme:"b",forceInheritTheme:false,centerWindow:false,calHighToday:true,calHighPicked:true,transition:"pop",noAnimation:false,disableManualInput:false,disabled:false,wheelExists:false,swipeEnabled:true,zindex:"500",debug:false,clickEvent:"vclick",numberInputEnhance:true,internalInputType:"text",resizeListener:true,titleDialogLabel:false,meridiemLetters:["AM","PM"],timeOutputOverride:false,timeFormats:{"12":"%l:%M %p","24":"%k:%M"},durationFormat:"DD ddd, hh:ii:ss",timeOutput:false,rolloverMode:{m:true,d:true,h:true,i:true,s:true},mode:"datebox",calShowDays:true,calShowOnlyMonth:false,useDialogForceTrue:false,useDialogForceFalse:true,fullScreen:false,fullScreenAlways:false,useDialog:false,useModal:false,useInline:false,useInlineBlind:false,useClearButton:false,collapseButtons:false,noButtonFocusMode:false,focusMode:false,noButton:false,noSetButton:false,openCallback:false,openCallbackArgs:[],closeCallback:false,closeCallbackArgs:[],open:false,nestedBox:false,lastDuration:false,fieldsOrder:false,fieldsOrderOverride:false,durationOrder:["d","h","i","s"],defaultDateFormat:"%Y-%m-%d",dateFormat:false,timeFormatOverride:false,headerFormat:false,dateOutput:false,minuteStep:1,calTodayButton:false,calWeekMode:false,calWeekModeFirstDay:1,calWeekModeHighlight:true,calStartDay:false,defaultPickerValue:false,defaultDate:false,minYear:false,maxYear:false,afterToday:false,beforeToday:false,maxDays:false,minDays:false,highDays:false,highDates:false,highDatesAlt:false,blackDays:false,blackDates:false,enableDates:false,fixDateArrays:false,durationSteppers:{d:1,h:1,i:1,s:1},useLang:"en",lang:{en:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",calTodayButtonLabel:"Jump to Today",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",useArabicIndic:false,isRTL:false,calStartDay:0,clearButton:"Clear"}}},destroy:function(){a(this.pickPage).remove();a.Widget.prototype.destroy.call(this)},_dateboxHandler:function(c,e){var d=a(this).data("datebox");if(!c.isPropagationStopped()){switch(e.method){case"close":d.close(e.fromCloseButton);break;case"open":d.open();break;case"set":a(this).val(e.value);a(this).trigger("change");break;case"doset":if(a.inArray(d.options.mode,["timebox","durationbox","timeflipbox"])>-1){a(this).trigger("datebox",{method:"set",value:d._formatTime(d.theDate),date:d.theDate})}else{a(this).trigger("datebox",{method:"set",value:d._formatDate(d.theDate),date:d.theDate})}break;case"dooffset":d._offset(e.type,e.amount,true);break;case"dorefresh":d._update();break;case"doreset":d.hardreset();break;case"doclear":a(this).val("");break}}},_getCoords:function(g){var q=g,j=g.focusedEl.offset(),n=g.focusedEl.outerHeight(),i=g.focusedEl.outerWidth(),e=a.mobile.activePage.width(),h=a(window).scrollTop(),p=a(window).height(),o=g.pickerContent.innerWidth(),l=g.pickerContent.outerHeight(),d=false,f=0,k=0,c=0,r=a(document).height(),m={high:a(window).height(),width:a.mobile.activePage.width(),fullTop:a(window).scrollTop(),fullLeft:a(window).scrollLeft()};if(g.options.centerWindow){m.winTop=h+((p/2)-(l/2));m.winLeft=((e/2)-(o/2))}else{d=a(".ui-header",a.mobile.activePage);if(d.length>0){if(d.is(".ui-header-fixed")){k=(d.outerHeight()+2)}else{f+=(d.outerHeight()+2)}}d=a(".ui-footer",a.mobile.activePage);if(d.length>0){if(d.is(".ui-footer-fixed")){c=(d.outerHeight()+2)}else{r-=(d.outerHeight()+2)}}m.winLeft=(j.left+(i/2))-(o/2);if(e<450){m.winLeft=((e/2)-(o/2))}m.winTop=(j.top+(n/2))-(l/2);if((m.winTop+l)>r){m.winTop+=(r-(m.winTop+l))}if(c>0&&((m.winTop+l-h)>(p-c))){m.winTop=((p-c+h-l))}if(m.winTop<f){m.winTop=f}if(k>0&&(m.winTop<(h+k))){m.winTop=h+k}else{if(h>f&&h>m.winTop){m.winTop=h+2}}}return m},_fixArray:function(d){var c=0,e=this,g=new RegExp("^([0-9]+)-([0-9]+)-([0-9]+)$"),f=null;if(a.isArray(d)){for(c=0;c<d.length;c++){f=[0];f=g.exec(d[c]);if(f.length===4){d[c]=f[1]+"-"+e._zPad(parseInt(f[2],10))+"-"+e._zPad(parseInt(f[3],10))}}}return d},_digitReplace:function(k,h){var j=48,c=57,d=1584,e=null,f=null,g="";if(h===-1){j+=d;c+=d;d=-1584}for(e=0;e<k.length;e++){f=k.charCodeAt(e);if(f>=j&&f<=c){g=g+String.fromCharCode(f+d)}else{g=g+String.fromCharCode(f)}}return g},_makeDisplayIndic:function(){var c=this,d=this.options;c.pickerContent.find("*").each(function(){if(a(this).children().length<1){a(this).text(c._digitReplace(a(this).text()))}else{if(a(this).hasClass("ui-datebox-slideday")){a(this).html(c._digitReplace(a(this).html()))}}});c.pickerContent.find("input").each(function(){a(this).val(c._digitReplace(a(this).val()))})},_zPad:function(c){return((c<10)?"0":"")+String(c)},_makeOrd:function(d){var c=d%10;if(d>9&&d<21){return"th"}if(c>3){return"th"}return["th","st","nd","rd"][c]},_isInt:function(c){return(c.toString().search(/^[0-9]+$/)===0)},_getFirstDay:function(c){return c.copymod([0],[0,0,1]).getDay()},_getRecDays:function(g,j,d){if(j===null){j=this.theDate.getMonth()+1}if(g===null){g=this.theDate.getFullYear()}var c=this,f=new Date(g,j-1,1,0,0,0,0),h=[],e;if(f.getDay()>d){f.setDate(8-(f.getDay()-d))}else{if(f.getDay()<d){f.setDate(1+(d-f.getDay()))}}h[0]=f.getISO();for(e=1;e<6;e++){f.setDate(f.getDate()+7);if((f.getMonth()+1)===j){h[e]=f.getISO()}}return h},_getLastDate:function(c){return 32-c.copymod([0],[0,0,32,13]).getDate()},_getLastDateBefore:function(c){return 32-c.copymod([0,-1],[0,0,32,13]).getDate()},_formatter:function(e,d){var c=this,f=this.options;if(!e.match(/%/)){e=e.replace("HH",this._zPad(d.getHours()));e=e.replace("GG",d.getHours());e=e.replace("hh",this._zPad(((d.getHours()===0||d.getHours()===12)?12:((d.getHours()<12)?d.getHours():d.getHours()-12))));e=e.replace("gg",((d.getHours()===0||d.getHours()===12)?12:((d.getHours()<12)?d.getHours():(d.getHours()-12))));e=e.replace("ii",this._zPad(d.getMinutes()));e=e.replace("ss",this._zPad(d.getSeconds()));e=e.replace("AA",((d.getHours()<12)?this.options.meridiemLetters[0].toUpperCase():this.options.meridiemLetters[1].toUpperCase()));e=e.replace("aa",((d.getHours()<12)?this.options.meridiemLetters[0].toLowerCase():this.options.meridiemLetters[1].toLowerCase()));e=e.replace("SS",this._makeOrd(d.getDate()));e=e.replace("YYYY",d.getFullYear());e=e.replace("mmmm",this.options.lang[this.options.useLang].monthsOfYearShort[d.getMonth()]);e=e.replace("mmm",this.options.lang[this.options.useLang].monthsOfYear[d.getMonth()]);e=e.replace("MM",this._zPad(d.getMonth()+1));e=e.replace("mm",d.getMonth()+1);e=e.replace("dddd",this.options.lang[this.options.useLang].daysOfWeekShort[d.getDay()]);e=e.replace("ddd",this.options.lang[this.options.useLang].daysOfWeek[d.getDay()]);e=e.replace("DD",this._zPad(d.getDate()));e=e.replace("dd",d.getDate());e=e.replace("UU",d.getEpoch())}else{e=e.replace(/%(0|-)*([a-z])/gi,function(g,i,k,j,h){switch(k){case"%":return"%";case"a":return f.lang[f.useLang].daysOfWeekShort[d.getDay()];case"A":return f.lang[f.useLang].daysOfWeek[d.getDay()];case"b":return f.lang[f.useLang].monthsOfYearShort[d.getMonth()];case"B":return f.lang[f.useLang].monthsOfYear[d.getMonth()];case"C":return d.getFullYear().toString().substr(0,2);case"d":return((i==="-")?d.getDate():c._zPad(d.getDate()));case"H":case"k":return((i==="-")?d.getHours():c._zPad(d.getHours()));case"I":case"l":return((i==="-")?((d.getHours()===0||d.getHours()===12)?12:((d.getHours()<12)?d.getHours():(d.getHours()-12))):c._zPad(((d.getHours()===0||d.getHours()===12)?12:((d.getHours()<12)?d.getHours():d.getHours()-12))));case"m":return((i==="-")?d.getMonth()+1:c._zPad(d.getMonth()+1));case"M":return((i==="-")?d.getMinutes():c._zPad(d.getMinutes()));case"p":return((d.getHours()<12)?f.meridiemLetters[0].toUpperCase():f.meridiemLetters[1].toUpperCase());case"P":return((d.getHours()<12)?f.meridiemLetters[0].toLowerCase():f.meridiemLetters[1].toLowerCase());case"s":return d.getEpoch;case"S":return((i==="-")?d.getSeconds():c._zPad(d.getSeconds()));case"w":return d.getDay();case"y":return d.getFullYear().toString().substr(2,2);case"Y":return d.getFullYear();case"o":return c._makeOrd(d.getDate());default:return g}})}if(this.options.lang[this.options.useLang].useArabicIndic===true){e=this._digitReplace(e)}return e},_formatHeader:function(c){if(this.options.headerFormat!==false){return this._formatter(this.options.headerFormat,c)}else{return this._formatter(this.options.lang[this.options.useLang].headerFormat,c)}},_formatDate:function(c){return this._formatter(this.options.dateOutput,c)},_formatTime:function(d){var m=this,k=[false,false,false],c,h,f,e,l=this.options.durationFormat,g=[0,0,0,0];if(this.options.mode==="durationbox"){c=this.options.durationFormat;c=c.replace(/ddd/g,".+?");c=c.replace(/DD|ss|hh|ii/g,"([0-9Dhis]+)");c=new RegExp("^"+c+"$");h=c.exec(this.options.durationFormat);f=m.theDate.getEpoch()-m.initDate.getEpoch();e=f;g[0]=parseInt(f/(60*60*24),10);f=f-(g[0]*60*60*24);g[1]=parseInt(f/(60*60),10);f=f-(g[1]*60*60);g[2]=parseInt(f/(60),10);f=f-(g[2]*60);g[3]=f;if(!h[0].match(/DD/)){k[0]=true;g[1]=g[1]+(g[0]*24)}if(!h[0].match(/hh/)){k[1]=true;g[2]=g[2]+(g[1]*60)}if(!h[0].match(/ii/)){k[2]=true;g[3]=g[3]+(g[2]*60)}l=l.replace("DD",g[0]);l=l.replace("ddd",((g[0]>1)?this.options.lang[this.options.useLang].durationDays[1]:this.options.lang[this.options.useLang].durationDays[0]));l=l.replace("hh",m._zPad(g[1]));l=l.replace("ii",m._zPad(g[2]));l=l.replace("ss",m._zPad(g[3]));if(this.options.lang[this.options.useLang].useArabicIndic===true){return this._digitReplace(l)}else{return l}}else{return this._formatter(m.options.timeOutput,d)}},_makeDate:function(k){k=a.trim(k);var d=this.options,n=this,e=null,m=null,l=null,c=null,f=new Date(),j=[false,false,false],g=[f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),0],h;if(d.lang[this.options.useLang].useArabicIndic===true){k=this._digitReplace(k,-1)}if(d.mode==="durationbox"){e=d.durationFormat;e=e.replace(/ddd/g,".+?");e=e.replace(/DD|ss|hh|ii/g,"([0-9Dhis]+)");e=new RegExp("^"+e+"$");m=e.exec(k);l=e.exec(d.durationFormat);if(m===null||m.length!==l.length){if(typeof d.defaultPickerValue==="number"&&d.defaultPickerValue>0){return new Date((n.initDate.getEpoch()+parseInt(d.defaultPickerValue,10))*1000)}else{return new Date(n.initDate.getTime())}}else{c=n.initDate.getEpoch();for(h=0;h<m.length;h++){if(l[h].match(/^DD$/i)){c=c+(parseInt(m[h],10)*60*60*24)}if(l[h].match(/^hh$/i)){c=c+(parseInt(m[h],10)*60*60)}if(l[h].match(/^ii$/i)){c=c+(parseInt(m[h],10)*60)}if(l[h].match(/^ss$/i)){c=c+(parseInt(m[h],10))}}return new Date((c*1000))}}else{if(d.mode==="timebox"||d.mode==="timeflipbox"){e=d.timeOutput}else{e=d.dateOutput}if(e.match(/%/)){e=e.replace(/%(0|-)*([a-z])/gi,function(i,p,r,q,o){switch(r){case"p":case"P":case"b":case"B":return"("+i+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"d":return"("+i+"|"+((p==="-")?"[0-9]{1,2}":"[0-9]{2}")+")";case"s":return"("+i+"|[0-9]+)";case"y":return"("+i+"|[0-9]{2})";case"Y":return"("+i+"|[0-9]{1,4})";default:return".+?"}});e=new RegExp("^"+e+"$");m=e.exec(k);if(d.mode==="timebox"||d.mode==="timeflipbox"){l=e.exec(d.timeOutput)}else{l=e.exec(d.dateOutput)}if(m===null||m.length!==l.length){if(d.defaultPickerValue!==false){if(a.isArray(d.defaultPickerValue)&&d.defaultPickerValue.length===3){if(d.mode==="timebox"||d.mode==="timeflipbox"){return new Date(g[0],g[1],g[2],d.defaultPickerValue[0],d.defaultPickerValue[1],d.defaultPickerValue[2],0)}else{return new Date(d.defaultPickerValue[0],d.defaultPickerValue[1],d.defaultPickerValue[2],0,0,0,0)}}else{if(typeof d.defaultPickerValue==="number"){return new Date(d.defaultPickerValue*1000)}else{if(d.mode==="timebox"||d.mode==="timeflipbox"){c=d.defaultPickerValue.split(":");if(c.length===3){f=new Date(g[0],g[1],g[2],parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10),0);if(isNaN(f.getDate())){f=new Date()}}}else{c=d.defaultPickerValue.split("-");if(c.length===3){f=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10),0,0,0,0);if(isNaN(f.getDate())){f=new Date()}}}}}}}else{for(h=0;h<m.length;h++){if(l[h]==="%s"){g[6]=parseInt(m[h],10)}if(l[h].match(/^%.*S$/)){g[5]=parseInt(m[h],10)}if(l[h].match(/^%.*M$/)){g[4]=parseInt(m[h],10)}if(l[h].match(/^%.*(H|k|I|l)$/)){g[3]=parseInt(m[h],10)}if(l[h].match(/^%.*d$/)){g[2]=parseInt(m[h],10)}if(l[h].match(/^%.*m$/)){g[1]=parseInt(m[h],10)-1}if(l[h].match(/^%.*Y$/)){g[0]=parseInt(m[h],10)}if(l[h].match(/^%.*y$/)){if(d.afterToday===true){g[0]=parseInt("20"+m[h],10)}else{if(parseInt(m[h],10)<38){g[0]=parseInt("20"+m[h],10)}else{g[0]=parseInt("19"+m[h],10)}}}if(l[h].match(/^%(0|-)*(p|P)$/)){if(m[h].toLowerCase().charAt(0)==="a"&&g[3]===12){g[3]=0}else{if(m[h].toLowerCase().charAt(0)==="p"&&g[3]!==12){g[3]=g[3]+12}}}if(l[h]==="%B"){c=a.inArray(m[h],d.lang[d.useLang].monthsOfYear);if(c>-1){g[1]=c}}if(l[h]==="%b"){c=a.inArray(m[h],d.lang[d.useLang].monthsOfYearShort);if(c>-1){g[1]=c}}}}if(l[0].match(/%s/)){f=new Date(g[6]*1000)}else{if(l[0].match(/%(.)*(I|l|H|k|s|M)/)){f=new Date(g[0],g[1],g[2],g[3],g[4],g[5],0);if(g[0]<100){f.setFullYear(g[0])}}else{f=new Date(g[0],g[1],g[2],0,0,0,0);if(g[0]<100){f.setFullYear(g[0])}}}return f}else{e=e.replace(/dddd|mmmm/g,"(.+?)");e=e.replace(/ddd|SS/g,".+?");e=e.replace(/mmm/g,"(.+?)");e=e.replace(/ *AA/ig," *(.*?)");e=e.replace(/yyyy|dd|mm|gg|hh|ii/ig,"([0-9yYdDmMgGhHi]+)");e=e.replace(/ss|UU/g,"([0-9sU]+)");e=new RegExp("^"+e+"$");m=e.exec(k);if(d.mode==="timebox"||d.mode==="timeflipbox"){l=e.exec(d.timeOutput)}else{l=e.exec(d.dateOutput)}if(m===null||m.length!==l.length){if(d.defaultPickerValue!==false){if(a.isArray(d.defaultPickerValue)&&d.defaultPickerValue.length===3){if(d.mode==="timebox"||d.mode==="timeflipbox"){return new Date(g[0],g[1],g[2],d.defaultPickerValue[0],d.defaultPickerValue[1],d.defaultPickerValue[2],0)}else{return new Date(d.defaultPickerValue[0],d.defaultPickerValue[1],d.defaultPickerValue[2],0,0,0,0)}}else{if(typeof d.defaultPickerValue==="number"){return new Date(d.defaultPickerValue*1000)}else{if(d.mode==="timebox"||d.mode==="timeflipbox"){c=d.defaultPickerValue.split(":");if(c.length===3){f=new Date(g[0],g[1],g[2],parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10),0);if(isNaN(f.getDate())){f=new Date()}}}else{c=d.defaultPickerValue.split("-");if(c.length===3){f=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10),0,0,0,0);if(isNaN(f.getDate())){f=new Date()}}}}}}}else{for(h=0;h<m.length;h++){if(l[h].match(/^UU$/)){g[6]=parseInt(m[h],10)}if(l[h].match(/^gg$/i)){g[3]=parseInt(m[h],10)}if(l[h].match(/^hh$/i)){g[3]=parseInt(m[h],10)}if(l[h].match(/^ii$/i)){g[4]=parseInt(m[h],10)}if(l[h].match(/^ss$/)){g[5]=parseInt(m[h],10)}if(l[h].match(/^dd$/i)){g[2]=parseInt(m[h],10)}if(l[h].match(/^mm$/i)){g[1]=parseInt(m[h],10)-1}if(l[h].match(/^yyyy$/i)){g[0]=parseInt(m[h],10)}if(l[h].match(/^AA$/i)){if(m[h].toLowerCase().charAt(0)==="a"&&g[3]===12){g[3]=0}else{if(m[h].toLowerCase().charAt(0)==="p"&&g[3]!==12){g[3]=g[3]+12}}}if(l[h].match(/^mmm$/i)){c=a.inArray(m[h],d.lang[d.useLang].monthsOfYear);if(c>-1){g[1]=c}}if(l[h].match(/^mmmm$/i)){c=a.inArray(m[h],d.lang[d.useLang].monthsOfYearShort);if(c>-1){g[1]=c}}}}if(l[0].match(/UU/)){return new Date(g[6]*1000)}else{if(l[0].match(/G|g|i|s|H|h|A/)){return new Date(g[0],g[1],g[2],g[3],g[4],g[5],0)}else{return new Date(g[0],g[1],g[2],0,0,0,0)}}}}},_hoover:function(c){a(c).toggleClass("ui-btn-up-"+a(c).jqmData("theme")+" ui-btn-down-"+a(c).jqmData("theme"))},_offset:function(g,e,h){var c=this,f=this.options,d=false;if(typeof(h)==="undefined"){h=true}c.input.trigger("datebox",{method:"offset",type:g,amount:e});switch(g){case"y":d=true;break;case"m":if(f.rolloverMode.m||(c.theDate.getMonth()+e<12&&c.theDate.getMonth()+e>-1)){d=true}break;case"d":if(f.rolloverMode.d||(c.theDate.getDate()+e>0&&c.theDate.getDate()+e<(c._getLastDate(c.theDate)+1))){d=true}break;case"h":if(f.rolloverMode.h||(c.theDate.getHours()+e>-1&&c.theDate.getHours()+e<24)){d=true}break;case"i":if(f.rolloverMode.i||(c.theDate.getMinutes()+e>-1&&c.theDate.getMinutes()+e<60)){d=true}break;case"s":if(f.rolloverMode.s||(c.theDate.getSeconds()+e>-1&&c.theDate.getSeconds()+e<60)){d=true}break;case"a":if(c.pickerMeri.val()===f.meridiemLetters[0]){c._offset("h",12,false)}else{c._offset("h",-12,false)}break}if(d===true){c.theDate.adjust(g,e)}if(h===true){c._update()}},_updateduration:function(){var c=this,d=c.initDate.getEpoch();if(!c._isInt(c.pickerDay.val())){c.pickerDay.val(0)}if(!c._isInt(c.pickerHour.val())){c.pickerHour.val(0)}if(!c._isInt(c.pickerMins.val())){c.pickerMins.val(0)}if(!c._isInt(c.pickerSecs.val())){c.pickerSecs.val(0)}d=d+(parseInt(c.pickerDay.val(),10)*60*60*24);d=d+(parseInt(c.pickerHour.val(),10)*60*60);d=d+(parseInt(c.pickerMins.val(),10)*60);d=d+(parseInt(c.pickerSecs.val(),10));c.theDate.setTime(d*1000);c._update()},_checkConstraints:function(){var d=this,c=null,e=this.options;d.dateOK=true;if(e.afterToday!==false){c=new Date();if(d.theDate<c){d.theDate=c}}if(e.beforeToday!==false){c=new Date();if(d.theDate>c){d.theDate=c}}if(e.maxDays!==false){c=new Date();c.adjust("d",e.maxDays);if(d.theDate>c){d.theDate=c}}if(e.minDays!==false){c=new Date();c.adjust("d",-1*e.minDays);if(d.theDate<c){d.theDate=c}}if(e.maxYear!==false){c=new Date(e.maxYear,0,1);c.adjust("d",-1);if(d.theDate>c){d.theDate=c}}if(e.minYear!==false){c=new Date(e.minYear,0,1);if(d.theDate<c){d.theDate=c}}if(e.blackDates!==false){if(a.inArray(d.theDate.getISO(),e.blackDates)>-1){d.dateOK=false}}if(e.blackDays!==false){if(a.inArray(d.theDate.getDay(),e.blackDays)>-1){d.dateOK=false}}if(a.inArray(e.mode,["timebox","durationbox","timeflipbox"])>-1){d.dateOK=true}},_orientChange:function(f){var c=f.data.widget,g=f.data.widget.options,d=f.data.widget._getCoords(f.data.widget);f.stopPropagation();if(!c.pickerContent.is(":visible")||g.useDialog===true){return false}else{if(g.fullScreen==true&&(d.width<400||g.fullScreenForce===true)){c.pickerContent.css({top:d.fullTop,left:d.fullLeft,height:d.high,width:d.width,maxWidth:d.width})}else{c.pickerContent.css({top:d.winTop,left:d.winLeft})}}},_update:function(){var t=this,e=t.options,p=null,g,h,j,r,n,m,k,f,s,c,q,d={d:60*60*24,h:60*60,i:60,s:1},l={};t.input.trigger("datebox",{method:"refresh"});if(e.mode==="durationbox"){g=t.theDate.getEpoch()-t.initDate.getEpoch();if(g<0){g=0;t.theDate.setTime(t.initDate.getTime())}e.lastDuration=g;m=parseInt(g/d.d,10);g=g-(m*d.d);t.pickerDay.val(m);m=parseInt(g/d.h,10);g=g-(m*d.h);t.pickerHour.val(m);m=parseInt(g/d.i,10);g=g-(m*d.i);t.pickerMins.val(m);t.pickerSecs.val(parseInt(g,10))}if(e.mode==="timebox"){if(e.minuteStep!==1){g=t.theDate.getMinutes()%e.minuteStep;if(g!==0){t.theDate.adjust("m",-1*g)}}t.pickerMins.val(t._zPad(t.theDate.getMinutes()));if(e.lang[e.useLang].timeFormat===12||e.timeFormatOverride===12){if(t.theDate.getHours()>11){t.pickerMeri.val(e.meridiemLetters[1]);if(t.theDate.getHours()===12){t.pickerHour.val(12)}else{t.pickerHour.val(t.theDate.getHours()-12)}}else{t.pickerMeri.val(e.meridiemLetters[0]);if(t.theDate.getHours()===0){t.pickerHour.val(12)}else{t.pickerHour.val(t.theDate.getHours())}}}else{t.pickerHour.val(t.theDate.getHours())}}if(e.mode==="flipbox"||e.mode==="timeflipbox"){t._checkConstraints();f=t._makeDate(t.input.val());t.controlsHeader.empty().html(t._formatHeader(t.theDate));for(m=0;m<e.fieldsOrder.length;m++){c=true;switch(e.fieldsOrder[m]){case"y":n=t.pickerYar.find("ul");n.empty();for(g=-15;g<16;g++){k=((f.getFullYear()===(t.theDate.getFullYear()+g))?e.pickPageHighButtonTheme:e.pickPageFlipButtonTheme);if(g===0){k=e.pickPageButtonTheme}a("<li>",{"class":"ui-body-"+k,style:((c===true)?"margin-top: -453px":"")}).html("<span>"+(t.theDate.getFullYear()+g)+"</span>").appendTo(n);c=false}break;case"m":n=t.pickerMon.find("ul");n.empty();for(g=-12;g<13;g++){p=new Date(t.theDate.getFullYear(),t.theDate.getMonth(),1);p.adjust("m",g);k=(f.getMonth()===p.getMonth()&&f.getYear()===p.getYear())?e.pickPageHighButtonTheme:e.pickPageFlipButtonTheme;if(g===0){k=e.pickPageButtonTheme}a("<li>",{"class":"ui-body-"+k,style:((c===true)?"margin-top: -357px":"")}).html("<span>"+e.lang[e.useLang].monthsOfYearShort[p.getMonth()]+"</span>").appendTo(n);c=false}break;case"d":n=t.pickerDay.find("ul");n.empty();for(g=-15;g<16;g++){p=t.theDate.copy();p.adjust("d",g);q="";if((e.blackDates!==false&&a.inArray(p.getISO(),e.blackDates)>-1)||(e.blackDays!==false&&a.inArray(p.getDay(),e.blackDays)>-1)){q=" ui-datebox-griddate-disable"}k=(f.getDate()===p.getDate()&&f.getMonth()===p.getMonth()&&f.getYear()===p.getYear())?e.pickPageHighButtonTheme:e.pickPageFlipButtonTheme;if(g===0){k=e.pickPageButtonTheme}a("<li>",{"class":"ui-body-"+k+q,style:((c===true)?"margin-top: -453px":"")}).html("<span>"+p.getDate()+"</span>").appendTo(n);c=false}break;case"h":n=t.pickerHour.find("ul");n.empty();for(g=-12;g<13;g++){p=t.theDate.copy();p.adjust("h",g);k=(g===0)?e.pickPageButtonTheme:e.pickPageFlipButtonTheme;a("<li>",{"class":"ui-body-"+k,style:((c===true)?"margin-top: -357px":"")}).html("<span>"+((e.lang[e.useLang].timeFormat===12||e.timeFormatOverride===12)?((p.getHours()===0)?"12":((p.getHours()<12)?p.getHours():((p.getHours()===12)?"12":(p.getHours()-12)))):p.getHours())+"</span>").appendTo(n);c=false}break;case"i":n=t.pickerMins.find("ul");n.empty();for(g=-30;g<31;g++){if(e.minuteStep>1){t.theDate.setMinutes(t.theDate.getMinutes()-(t.theDate.getMinutes()%e.minuteStep))}p=t.theDate.copy();p.adjust("i",(g*e.minuteStep));k=(g===0)?e.pickPageButtonTheme:e.pickPageFlipButtonTheme;a("<li>",{"class":"ui-body-"+k,style:((c===true)?"margin-top: -933px":"")}).html("<span>"+t._zPad(p.getMinutes())+"</span>").appendTo(n);c=false}break;case"a":n=t.pickerMeri.find("ul");n.empty();if(t.theDate.getHours()>11){c="-65";k=[e.pickPageFlipButtonTheme,e.pickPageButtonTheme]}else{c="-33";k=[e.pickPageButtonTheme,e.pickPageFlipButtonTheme]}a("<li>").appendTo(n).clone().appendTo(n);a("<li>",{"class":"ui-body-"+k[0],style:"margin-top: "+c+"px"}).html("<span>"+e.meridiemLetters[0]+"</span>").appendTo(n);a("<li>",{"class":"ui-body-"+k[1]}).html("<span>"+e.meridiemLetters[1]+"</span>").appendTo(n);a("<li>").appendTo(n).clone().appendTo(n);break}}}if(e.mode==="slidebox"){t._checkConstraints();f=t._makeDate(t.input.val());t.controlsHeader.empty().html(t._formatHeader(t.theDate));t.controlsInput.empty();t.controlsInput.delegate(".ui-datebox-sliderow-int>div",e.clickEvent,function(i){i.preventDefault();t._offset(a(this).parent().jqmData("rowtype"),parseInt(a(this).jqmData("offset"),10))});t.controlsInput.delegate(".ui-datebox-sliderow-int>div","vmouseover vmouseout",function(){t._hoover(this)});if(e.wheelExists){t.controlsInput.delegate(".ui-datebox-sliderow-int","mousewheel",function(i,o){i.preventDefault();t._offset(a(this).jqmData("rowtype"),((o>0)?1:-1))})}if(e.swipeEnabled){t.controlsInput.delegate(".ui-datebox-sliderow-int",t.START_DRAG,function(i){if(!t.dragMove){t.dragMove=true;t.dragTarget=a(this);t.dragPos=parseInt(t.dragTarget.css("marginLeft").replace(/px/i,""),10);t.dragStart=t.touch?i.originalEvent.changedTouches[0].pageX:i.pageX;t.dragEnd=false;i.stopPropagation();i.preventDefault()}})}for(m=0;m<e.fieldsOrder.length;m++){s=a("<div>").jqmData("rowtype",e.fieldsOrder[m]);n=a("<div>",{"class":"ui-datebox-sliderow-int"}).jqmData("rowtype",e.fieldsOrder[m]).appendTo(s);if(e.lang[e.useLang].isRTL===true){n.css("direction","rtl")}switch(e.fieldsOrder[m]){case"y":s.addClass("ui-datebox-sliderow-ym");n.css("marginLeft","-333px");for(g=-5;g<6;g++){k=((f.getFullYear()===(t.theDate.getFullYear()+g))?e.pickPageHighButtonTheme:e.pickPageSlideButtonTheme);if(g===0){k=e.pickPageButtonTheme}a("<div>",{"class":"ui-datebox-slideyear ui-corner-all ui-btn-up-"+k}).html(t.theDate.getFullYear()+g).jqmData("offset",g).jqmData("theme",k).appendTo(n)}break;case"m":s.addClass("ui-datebox-sliderow-ym");n.css("marginLeft","-204px");for(g=-6;g<7;g++){p=new Date(t.theDate.getFullYear(),t.theDate.getMonth(),1);p.adjust("m",g);k=(f.getMonth()===p.getMonth()&&f.getYear()===p.getYear())?e.pickPageHighButtonTheme:e.pickPageSlideButtonTheme;if(g===0){k=e.pickPageButtonTheme}a("<div>",{"class":"ui-datebox-slidemonth ui-corner-all ui-btn-up-"+k}).jqmData("offset",g).jqmData("theme",k).html(e.lang[e.useLang].monthsOfYearShort[p.getMonth()]).appendTo(n)}break;case"d":s.addClass("ui-datebox-sliderow-d");n.css("marginLeft","-386px");for(g=-15;g<16;g++){p=t.theDate.copy();p.adjust("d",g);q="";if((e.blackDates!==false&&a.inArray(p.getISO(),e.blackDates)>-1)||(e.blackDays!==false&&a.inArray(p.getDay(),e.blackDays)>-1)){q=" ui-datebox-griddate-disable"}k=(f.getDate()===p.getDate()&&f.getMonth()===p.getMonth()&&f.getYear()===p.getYear())?e.pickPageHighButtonTheme:e.pickPageSlideButtonTheme;if(g===0){k=e.pickPageButtonTheme}a("<div>",{"class":"ui-datebox-slideday ui-corner-all ui-btn-up-"+k+q}).jqmData("offset",g).jqmData("theme",k).html(p.getDate()+'<br /><span class="ui-datebox-slidewday">'+e.lang[e.useLang].daysOfWeekShort[p.getDay()]+"</span>").appendTo(n)}break;case"h":s.addClass("ui-datebox-sliderow-hi");n.css("marginLeft","-284px");for(g=-12;g<13;g++){p=t.theDate.copy();p.adjust("h",g);k=(g===0)?e.pickPageButtonTheme:e.pickPageSlideButtonTheme;a("<div>",{"class":"ui-datebox-slidehour ui-corner-all ui-btn-up-"+k}).jqmData("offset",g).jqmData("theme",k).html(((e.lang[e.useLang].timeFormat===12||e.timeFormatOverride===12)?((p.getHours()===0)?'12<span class="ui-datebox-slidewday">AM</span>':((p.getHours()<12)?p.getHours()+'<span class="ui-datebox-slidewday">AM</span>':((p.getHours()===12)?'12<span class="ui-datebox-slidewday">PM</span>':(p.getHours()-12)+'<span class="ui-datebox-slidewday">PM</span>'))):p.getHours())).appendTo(n)}break;case"i":s.addClass("ui-datebox-sliderow-hi");n.css("marginLeft","-896px");for(g=-30;g<31;g++){p=t.theDate.copy();p.adjust("i",g);k=(g===0)?e.pickPageButtonTheme:e.pickPageSlideButtonTheme;a("<div>",{"class":"ui-datebox-slidemins ui-corner-all ui-btn-up-"+k}).jqmData("offset",g).jqmData("theme",k).html(t._zPad(p.getMinutes())).appendTo(n)}break}s.appendTo(t.controlsInput)}}if(e.mode==="datebox"){t._checkConstraints();t.controlsHeader.empty().html(t._formatHeader(t.theDate));t.pickerMon.val(t.theDate.getMonth()+1);t.pickerDay.val(t.theDate.getDate());t.pickerYar.val(t.theDate.getFullYear());if(t.dateOK!==true){t.controlsInput.find("input").addClass("ui-datebox-griddate-disable")}else{t.controlsInput.find(".ui-datebox-griddate-disable").removeClass("ui-datebox-griddate-disable")}}if(e.mode==="calbox"){t.controlsInput.empty().html(e.lang[e.useLang].monthsOfYear[t.theDate.getMonth()]+" "+t.theDate.getFullYear());t.controlsPlus.empty();l={today:-1,highlightDay:-1,presetDay:-1,nexttoday:1,thisDate:new Date(),maxDate:new Date(),minDate:new Date(),startDay:false,currentMonth:false,weekMode:0,weekDays:null,thisTheme:e.pickPageButtonTheme};l.start=t._getFirstDay(t.theDate);l.end=t._getLastDate(t.theDate);l.lastend=t._getLastDateBefore(t.theDate);l.presetDate=t._makeDate(t.input.val());if(e.calStartDay!==false||typeof e.lang[e.useLang].calStartDay==="number"){if(e.calStartDay!==false){l.start=l.start-e.calStartDay;l.startDay=e.calStartDay}else{l.start=l.start-e.lang[e.useLang].calStartDay;l.startDay=e.lang[e.useLang].calStartDay}if(l.start<0){l.start=l.start+7}}l.prevtoday=l.lastend-(l.start-1);l.checkDates=(e.enableDates===false&&(e.afterToday!==false||e.beforeToday!==false||e.notToday!==false||e.maxDays!==false||e.minDays!==false||e.blackDates!==false||e.blackDays!==false));if(l.thisDate.getMonth()===t.theDate.getMonth()&&l.thisDate.getFullYear()===t.theDate.getFullYear()){l.currentMonth=true;l.highlightDay=l.thisDate.getDate()}if(l.presetDate.getComp()===t.theDate.getComp()){l.presetDay=l.presetDate.getDate()}t.calNoPrev=false;t.calNoNext=false;if(e.afterToday===true&&(l.currentMonth===true||(l.thisDate.getMonth()>=t.theDate.getMonth()&&t.theDate.getFullYear()===l.thisDate.getFullYear()))){t.calNoPrev=true}if(e.beforeToday===true&&(l.currentMonth===true||(l.thisDate.getMonth()<=t.theDate.getMonth()&&t.theDate.getFullYear()===l.thisDate.getFullYear()))){t.calNoNext=true}if(e.minDays!==false){l.minDate.adjust("d",-1*e.minDays);if(t.theDate.getFullYear()===l.minDate.getFullYear()&&t.theDate.getMonth()<=l.minDate.getMonth()){t.calNoPrev=true}}if(e.maxDays!==false){l.maxDate.adjust("d",e.maxDays);if(t.theDate.getFullYear()===l.maxDate.getFullYear()&&t.theDate.getMonth()>=l.maxDate.getMonth()){t.calNoNext=true}}if(e.calShowDays){if(e.lang[e.useLang].daysOfWeekShort.length<8){e.daysOfWeekShort=e.lang[e.useLang].daysOfWeekShort.concat(e.lang[e.useLang].daysOfWeekShort)}l.weekDays=a("<div>",{"class":"ui-datebox-gridrow"}).appendTo(t.controlsPlus);if(e.lang[e.useLang].isRTL===true){l.weekDays.css("direction","rtl")}for(g=0;g<=6;g++){a("<div>"+e.lang[e.useLang].daysOfWeekShort[(g+l.startDay)%7]+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty ui-datebox-griddate-label").appendTo(l.weekDays)}}if(e.fixDateArrays===true){e.blackDates=t._fixArray(e.blackDates);e.highDates=t._fixArray(e.highDates);e.highDatesAlt=t._fixArray(e.highDatesAlt);e.enableDates=t._fixArray(e.enableDates)}for(h=0;h<=5;h++){if(h===0||(h>0&&(l.today>0&&l.today<=l.end))){n=a("<div>",{"class":"ui-datebox-gridrow"});if(e.lang[e.useLang].isRTL===true){n.css("direction","rtl")}for(j=0;j<=6;j++){if(j===0){l.weekMode=(l.today<1)?(l.prevtoday-l.lastend+e.calWeekModeFirstDay):(l.today+e.calWeekModeFirstDay)}if(j===l.start&&h===0){l.today=1}if(l.today>l.end){l.today=-1}if(l.today<1){if(e.calShowOnlyMonth){a("<div>",{"class":"ui-datebox-griddate ui-datebox-griddate-empty"}).appendTo(n)}else{if(e.enableDates!==false){if((a.inArray(t.theDate.copymod([0,-1],[0,0,l.prevtoday]).getISO(),e.enableDates)>-1)||(a.inArray(t.theDate.copymod([0,1],[0,0,l.nexttoday]).getISO(),e.enableDates)>-1)){r=false}else{r=true}}else{if((e.afterToday!==false&&h===0&&l.thisDate.getMonth()>=t.theDate.getMonth()-1&&t.theDate.getFullYear()===l.thisDate.getFullYear()&&l.thisDate.getDate()>l.prevtoday)||(e.beforeToday!==false&&h!==0&&l.thisDate.getMonth()<=t.theDate.getMonth()+1&&t.theDate.getFullYear()===l.thisDate.getFullYear()&&l.thisDate.getDate()<l.nexttoday)||(e.blackDays!==false&&a.inArray(j,e.blackDays)>-1)||(e.blackDates!==false&&a.inArray(t.theDate.copymod([0,-1],[0,0,l.prevtoday]).getISO(),e.blackDates)>-1)||(e.blackDates!==false&&a.inArray(t.theDate.copymod([0,1],[0,0,l.nexttoday]).getISO(),e.blackDates)>-1)){r=true}else{r=false}}if(h===0){a("<div>"+String(l.prevtoday)+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty").appendTo(n).jqmData("date",((e.calWeekMode)?(l.weekMode+l.lastend):l.prevtoday)).jqmData("enabled",(!r&&!t.calNoPrev)).jqmData("month",-1);l.prevtoday++}else{a("<div>"+String(l.nexttoday)+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty").appendTo(n).jqmData("date",((e.calWeekMode)?l.weekMode:l.nexttoday)).jqmData("enabled",(!r&&!t.calNoNext)).jqmData("month",1);l.nexttoday++}}}else{r=false;if(e.enableDates){if(a.inArray(t.theDate.copymod([0],[0,0,l.today]).getISO(),e.enableDates)<0){r=true}}if(l.checkDates){if(e.afterToday&&l.thisDate.getComp()>(t.theDate.getComp()+l.today-t.theDate.getDate())){r=true}if(!r&&e.beforeToday&&l.thisDate.getComp()<(t.theDate.getComp()+l.today-t.theDate.getDate())){r=true}if(!r&&e.notToday&&l.today===l.highlightDay){r=true}if(!r&&e.maxDays!==false&&l.maxDate.getComp()<(t.theDate.getComp()+l.today-t.theDate.getDate())){r=true}if(!r&&e.minDays!==false&&l.minDate.getComp()>(t.theDate.getComp()+l.today-t.theDate.getDate())){r=true}if(!r&&(e.blackDays!==false||e.blackDates!==false)){if((a.inArray(j,e.blackDays)>-1)||(a.inArray(t.theDate.copymod([0],[0,0,l.today]).getISO(),e.blackDates)>-1)){r=true}}}if(e.calHighPicked&&l.today===l.presetDay){l.thisTheme=e.pickPageHighButtonTheme}else{if(e.calHighToday&&l.today===l.highlightDay){l.thisTheme=e.pickPageTodayButtonTheme}else{if(a.isArray(e.highDatesAlt)&&(a.inArray(t.theDate.copymod([0],[0,0,l.today]).getISO(),e.highDatesAlt)>-1)){l.thisTheme=e.pickPageOAHighButtonTheme}else{if(a.isArray(e.highDates)&&(a.inArray(t.theDate.copymod([0],[0,0,l.today]).getISO(),e.highDates)>-1)){l.thisTheme=e.pickPageOHighButtonTheme}else{if(a.isArray(e.highDays)&&a.inArray(j,e.highDays)>-1){l.thisTheme=e.pickPageODHighButtonTheme}else{l.thisTheme=e.pickPageButtonTheme}}}}}a("<div>"+String(l.today)+"</div>").addClass("ui-datebox-griddate ui-corner-all ui-btn-up-"+l.thisTheme+((r)?" ui-datebox-griddate-disable":"")).jqmData("date",((e.calWeekMode)?l.weekMode:l.today)).jqmData("theme",l.thisTheme).jqmData("enabled",!r).jqmData("month",0).appendTo(n);l.today++}}}n.appendTo(t.controlsPlus)}t.controlsPlus.delegate("div.ui-datebox-griddate",e.clickEvent+" vmouseover vmouseout",function(i){if(i.type===e.clickEvent){i.preventDefault();if(a(this).jqmData("enabled")){if(a(this).jqmData("month")<0){t.theDate.adjust("m",-1);t.theDate.setDate(a(this).jqmData("date"))}else{if(a(this).jqmData("month")>0){t.theDate.setDate(a(this).jqmData("date"));if(!e.calWeekMode){t.theDate.adjust("m",1)}}else{t.theDate.setDate(a(this).jqmData("date"))}}t.input.trigger("datebox",{method:"set",value:t._formatDate(t.theDate),date:t.theDate});t.input.trigger("datebox",{method:"close"})}}else{if(a(this).jqmData("enabled")&&typeof a(this).jqmData("theme")!=="undefined"){if(e.calWeekMode!==false&&e.calWeekModeHighlight===true){a(this).parent().find("div").each(function(){t._hoover(this)})}else{t._hoover(this)}}}})}if(e.lang[this.options.useLang].useArabicIndic===true){t._makeDisplayIndic()}},_getLongOptions:function(e){var d,f={},g,c;if(a.mobile.ns==""){g="datebox"}else{g=a.mobile.ns.substr(0,a.mobile.ns.length-1)+"Datebox"}for(d in e.data()){if(d.substr(0,g.length)===g&&d.length>g.length){c=d.substr(g.length);c=c.charAt(0).toLowerCase()+c.slice(1);f[c]=e.data(d)}}return f},_create:function(){a(document).trigger("dateboxcreate");var c=this,d=a.extend(this.options,this.element.jqmData("options")),d=((typeof this.element.jqmData("options")==="undefined")?a.extend(d,this._getLongOptions(this.element)):d);input=this.element,thisTheme=(d.theme===false&&typeof(a(c).jqmData("theme"))==="undefined")?((typeof(input.parentsUntil(":jqmData(theme)").parent().jqmData("theme"))==="undefined")?d.defaultTheme:input.parentsUntil(":jqmData(theme)").parent().jqmData("theme")):d.theme,focusedEl=input.wrap('<div class="ui-input-datebox ui-shadow-inset ui-corner-all ui-body-'+thisTheme+'"></div>').parent(),theDate=new Date(),initDate=new Date(theDate.getTime()),openbutton=a('<a href="#" class="ui-input-clear" title="'+((typeof d.lang[d.useLang].tooltip!=="undefined")?d.lang[d.useLang].tooltip:d.lang.en.tooltip)+'">'+((typeof d.lang[d.useLang].tooltip!=="undefined")?d.lang[d.useLang].tooltip:d.lang.en.tooltip)+"</a>").bind(d.clickEvent,function(f){f.preventDefault();if(!d.disabled){c.input.trigger("datebox",{method:"open"});c.focusedEl.addClass("ui-focus")}setTimeout(function(){a(f.target).closest("a").removeClass(a.mobile.activeBtnClass)},300)}).appendTo(focusedEl).buttonMarkup({icon:"grid",iconpos:"notext",corners:true,shadow:true}).css({"vertical-align":"middle",display:"inline-block"}),thisPage=input.closest(".ui-page"),ns=(typeof a.mobile.ns!=="undefined")?a.mobile.ns:"",pickPage=a("<div data-"+ns+"role='dialog' class='ui-dialog-datebox' data-"+ns+"theme='"+((d.forceInheritTheme===false)?d.pickPageTheme:thisTheme)+"' ><div data-"+ns+"role='header' data-"+ns+"backbtn='false' data-"+ns+"theme='a'><div class='ui-title'>PlaceHolder</div></div><div data-"+ns+"role='content'></div></div>").appendTo(a.mobile.pageContainer).page().css("minHeight","0px").css("zIndex",d.zindex).addClass(d.transition),pickPageTitle=pickPage.find(".ui-title"),pickPageContent=pickPage.find(".ui-content"),touch=(typeof window.ontouchstart!=="undefined"),START_EVENT=touch?"touchstart":"mousedown",MOVE_EVENT=touch?"touchmove":"mousemove",END_EVENT=touch?"touchend":"mouseup",dragMove=false,dragStart=false,dragEnd=false,dragPos=false,dragTarget=false,dragThisDelta=0;d.theme=thisTheme;a.extend(c,{input:input,focusedEl:focusedEl});if(d.forceInheritTheme){d.pickPageTheme=thisTheme;d.pickPageInputTheme=thisTheme;d.pickPageButtonTheme=thisTheme}if(d.defaultPickerValue===false&&d.defaultDate!==false){d.defaultPickerValue=d.defaultDate}if(d.numberInputEnhance===true){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)){d.internalInputType="number"}}a("label[for='"+input.attr("id")+"']").addClass("ui-input-text").css("verticalAlign","middle");if(d.mode==="timeflipbox"){d.lang[d.useLang].headerFormat=" "}if(d.noButtonFocusMode||d.useInline||d.noButton){openbutton.hide()}c.focusedEl.bind(d.clickEvent,function(){if(!d.disabled&&(d.noButtonFocusMode||d.focusMode)){c.input.trigger("datebox",{method:"open"});c.focusedEl.addClass("ui-focus");c.input.removeClass("ui-focus")}});c.input.removeClass("ui-corner-all ui-shadow-inset").focus(function(){if(!d.disabled){c.focusedEl.addClass("ui-focus")}c.input.removeClass("ui-focus")}).blur(function(){c.focusedEl.removeClass("ui-focus");c.input.removeClass("ui-focus")}).change(function(){c.theDate=c._makeDate(c.input.val());c._update()});c.input.bind("datebox",c._dateboxHandler);pickPage.find(".ui-header a").unbind("click vclick").bind(d.clickEvent,function(f){f.preventDefault();f.stopImmediatePropagation();c.input.trigger("datebox",{method:"close",fromCloseButton:false})});a.extend(c,{pickPage:pickPage,thisPage:thisPage,pickPageContent:pickPageContent,pickPageTitle:pickPageTitle,theDate:theDate,initDate:initDate,touch:touch,START_DRAG:START_EVENT,MOVE_DRAG:MOVE_EVENT,END_DRAG:END_EVENT,dragMove:dragMove,dragStart:dragStart,dragEnd:dragEnd,dragPos:dragPos});if(typeof a.event.special.mousewheel!=="undefined"){d.wheelExists=true}c._buildPage();if(d.swipeEnabled){a(document).bind(c.MOVE_DRAG,function(f){if(c.dragMove){if(d.mode==="slidebox"){c.dragEnd=c.touch?f.originalEvent.changedTouches[0].pageX:f.pageX;c.dragTarget.css("marginLeft",(c.dragPos+c.dragEnd-c.dragStart)+"px");f.preventDefault();f.stopPropagation();return false}else{if(d.mode==="flipbox"||d.mode==="timeflipbox"){c.dragEnd=c.touch?f.originalEvent.changedTouches[0].pageY:f.pageY;c.dragTarget.css("marginTop",(c.dragPos+c.dragEnd-c.dragStart)+"px");f.preventDefault();f.stopPropagation();return false}else{if(d.mode==="durationbox"||d.mode==="timebox"||d.mode==="datebox"){c.dragEnd=c.touch?f.originalEvent.changedTouches[0].pageY:f.pageY;if((c.dragEnd-c.dragStart)%2===0){dragThisDelta=(c.dragEnd-c.dragStart)/-2;if(dragThisDelta<c.dragPos){c._offset(c.dragTarget,-1*(c.dragTarget==="i"?d.minuteStep:1))}else{if(dragThisDelta>c.dragPos){c._offset(c.dragTarget,(c.dragTarget==="i"?d.minuteStep:1))}}c.dragPos=dragThisDelta}f.preventDefault();f.stopPropagation();return false}}}}});a(document).bind(c.END_DRAG,function(h){if(c.dragMove){c.dragMove=false;if(d.mode==="slidebox"){if(c.dragEnd!==false&&Math.abs(c.dragStart-c.dragEnd)>25){h.preventDefault();h.stopPropagation();switch(c.dragTarget.parent().jqmData("rowtype")){case"y":c._offset("y",parseInt((c.dragStart-c.dragEnd)/84,10));break;case"m":c._offset("m",parseInt((c.dragStart-c.dragEnd)/51,10));break;case"d":c._offset("d",parseInt((c.dragStart-c.dragEnd)/32,10));break;case"h":c._offset("h",parseInt((c.dragStart-c.dragEnd)/32,10));break;case"i":c._offset("i",parseInt((c.dragStart-c.dragEnd)/32,10));break}}}else{if(d.mode==="flipbox"||d.mode==="timeflipbox"){if(c.dragEnd!==false){h.preventDefault();h.stopPropagation();var g=c.dragTarget.parent().parent().jqmData("field"),f=parseInt((c.dragStart-c.dragEnd)/30,10);c._offset(g,f*((g==="i")?d.minuteStep:1))}}}c.dragStart=false;c.dragEnd=false}})}if(c.input.is(":disabled")){c.disable()}if(d.disableManualInput===true){c.input.attr("readonly",true)}a(document).trigger("dateboxaftercreate")},_makeElement:function(f,g){var c=this,d=false,e=false;e=f.clone();if(typeof g.attr!=="undefined"){for(d in g.attr){if(g.attr.hasOwnProperty(d)){e.jqmData(d,g.attr[d])}}}return e},_eventEnterValue:function(d){var c=this,e=c.options,f=false;if(d.val()!==""&&c._isInt(d.val())){switch(d.jqmData("field")){case"m":c.theDate.setMonth(parseInt(d.val(),10)-1);break;case"d":c.theDate.setDate(parseInt(d.val(),10));break;case"y":c.theDate.setFullYear(parseInt(d.val(),10));break;case"i":c.theDate.setMinutes(parseInt(d.val(),10));break;case"h":f=parseInt(d.val(),10);if(f===12){if((e.lang[e.useLang].timeFormat===12||e.timeFormatOverride===12)&&c.pickerMeri.val()===e.meridiemLetters[0]){f=0}}c.theDate.setHours(f);break}c._update()}},_buildInternals:function(){var p=this,r=p.options,m,k,v,e,w=a("<div><a href='#'></a></div>"),f=a("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden pop ui-body-"+r.pickPageTheme}).css("zIndex",r.zindex),z=a("<input type='"+r.internalInputType+"' />").addClass("ui-input-text ui-corner-all ui-shadow-inset ui-datebox-input ui-body-"+r.pickPageInputTheme),t=a("<input type='text' />").addClass("ui-input-text ui-corner-all ui-shadow-inset ui-datebox-input ui-body-"+r.pickPageInputTheme),j=a("<div>",{"class":"ui-datebox-controls"}),i=a("<div class='ui-overlay-shadow'><ul></ul></div>"),h,B,n,s,u,d,g,l,A,C,q,c;p.calNoNext=false;p.calNoPrev=false;p.setButton=false;p.clearButton=false;p.dateOK=true;if(r.fieldsOrderOverride===false){switch(r.mode){case"timebox":case"timeflipbox":r.fieldsOrder=r.lang[r.useLang].timeFieldOrder;break;case"slidebox":r.fieldsOrder=r.lang[r.useLang].slideFieldOrder;break;default:r.fieldsOrder=r.lang[r.useLang].dateFieldOrder}}else{r.fieldsOrder=r.fieldsOrderOverride}if(r.timeOutputOverride!==false){r.timeOutput=r.timeOutputOverride}else{if(r.timeFormatOverride===false){r.timeOutput=r.timeFormats[r.lang[r.useLang].timeFormat]}else{r.timeOutput=r.timeFormats[r.timeFormatOverride]}}if(r.dateFormat!==false){r.dateOutput=r.dateFormat}else{if(typeof r.lang[r.useLang].dateFormat!=="undefined"){r.dateOutput=r.lang[r.useLang].dateFormat}else{r.dateOutput=r.defaultDateFormat}}p.pickerContent.empty();if(r.mode==="datebox"||r.mode==="timebox"){u=a("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(p.pickerContent).find("h4");h=j.clone().appendTo(p.pickerContent);B=j.clone().appendTo(p.pickerContent);n=j.clone().appendTo(p.pickerContent);s=j.clone().appendTo(p.pickerContent);if(r.mode==="timebox"){u.parent().empty()}A=p._makeElement(z,{attr:{field:"m",amount:1}});C=p._makeElement(z,{attr:{field:"d",amount:1}});q=p._makeElement(z,{attr:{field:"y",amount:1}});d=p._makeElement(z,{attr:{field:"h",amount:1}});g=p._makeElement(z,{attr:{field:"i",amount:1}});l=p._makeElement(t,{attr:{field:"a",amount:r.minuteStep}});B.delegate("input","keyup",function(){p._eventEnterValue(a(this))});if(r.wheelExists){B.delegate("input","mousewheel",function(o,x){o.preventDefault();p._offset(a(this).jqmData("field"),((x<0)?-1:1)*a(this).jqmData("amount"))})}for(m=0;m<=r.fieldsOrder.length;m++){if(r.fieldsOrder[m]==="y"){q.appendTo(B)}if(r.fieldsOrder[m]==="m"){A.appendTo(B)}if(r.fieldsOrder[m]==="d"){C.appendTo(B)}if(r.fieldsOrder[m]==="h"){d.appendTo(B)}if(r.fieldsOrder[m]==="i"){g.appendTo(B)}if(r.fieldsOrder[m]==="a"&&(r.lang[r.useLang].timeFormat===12||r.timeFormatOverride===12)){l.appendTo(B)}}if(r.swipeEnabled){B.delegate("input",p.START_DRAG,function(o){if(!p.dragMove){p.dragMove=true;p.dragTarget=a(this).jqmData("field");p.dragPos=0;p.dragStart=p.touch?o.originalEvent.changedTouches[0].pageY:o.pageY;p.dragEnd=false;o.stopPropagation()}})}if(r.noSetButton===false){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(p.dateOK===true){if(r.mode==="timebox"){p.input.trigger("datebox",{method:"set",value:p._formatTime(p.theDate),date:p.theDate})}else{p.input.trigger("datebox",{method:"set",value:p._formatDate(p.theDate),date:p.theDate})}p.input.trigger("datebox",{method:"close"})}})}for(m=0;m<p.options.fieldsOrder.length;m++){if(r.fieldsOrder[m]!=="a"||r.lang[r.useLang].timeFormat===12||r.timeFormatOverride===12){for(k=0;k<2;k++){w.clone().appendTo(((k===0)?h:n)).buttonMarkup({theme:r.pickPageButtonTheme,icon:((k===0)?"plus":"minus"),iconpos:"bottom",corners:true,shadow:true}).jqmData("field",r.fieldsOrder[m]).jqmData("amount",((r.fieldsOrder[m]==="i")?r.minuteStep:1))}}}h.delegate("div",r.clickEvent,function(o){o.preventDefault();p._offset(a(this).jqmData("field"),a(this).jqmData("amount"))});n.delegate("div",r.clickEvent,function(o){o.preventDefault();p._offset(a(this).jqmData("field"),a(this).jqmData("amount")*-1)});a.extend(p,{controlsHeader:u,pickerDay:C,pickerMon:A,pickerYar:q,pickerHour:d,pickerMins:g,pickerMeri:l,controlsInput:B});p.pickerContent.appendTo(p.thisPage)}if(r.mode==="durationbox"){h=j.clone().removeClass("ui-datebox-controls").addClass("ui-datebox-scontrols").appendTo(p.pickerContent);B=h.clone().appendTo(p.pickerContent);n=h.clone().appendTo(p.pickerContent);s=j.clone().appendTo(p.pickerContent);C=z.removeClass("ui-datebox-input");d=C.clone();g=C.clone();c=C.clone();B.delegate("input","keyup",function(){if(a(this).val()!==""){p._updateduration()}});if(r.wheelExists){B.delegate("input","mousewheel",function(o,x){o.preventDefault();p._offset(a(this).parent().jqmData("field"),((x<0)?-1:1))})}for(m=0;m<r.durationOrder.length;m++){switch(r.durationOrder[m]){case"d":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","d").append(C).appendTo(B).prepend("<label>"+r.lang[r.useLang].durationLabel[0]+"</label>");break;case"h":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","h").append(d).appendTo(B).prepend("<label>"+r.lang[r.useLang].durationLabel[1]+"</label>");break;case"i":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","i").append(g).appendTo(B).prepend("<label>"+r.lang[r.useLang].durationLabel[2]+"</label>");break;case"s":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","s").append(c).appendTo(B).prepend("<label>"+r.lang[r.useLang].durationLabel[3]+"</label>");break}}if(r.swipeEnabled){B.delegate("input",p.START_DRAG,function(o){if(!p.dragMove){p.dragMove=true;p.dragTarget=a(this).parent().jqmData("field");p.dragPos=0;p.dragStart=p.touch?o.originalEvent.changedTouches[0].pageY:o.pageY;p.dragEnd=false;o.stopPropagation()}})}if(r.noSetButton===false){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();p.input.trigger("datebox",{method:"set",value:p._formatTime(p.theDate),date:p.theDate});p.input.trigger("datebox",{method:"close"})})}for(m=0;m<r.durationOrder.length;m++){for(k=0;k<2;k++){w.clone().appendTo(((k===0)?h:n)).buttonMarkup({theme:r.pickPageButtonTheme,icon:((k===0)?"plus":"minus"),iconpos:"bottom",corners:true,shadow:true}).jqmData("field",r.durationOrder[m])}}h.delegate("div",r.clickEvent,function(o){o.preventDefault();p._offset(a(this).jqmData("field"),r.durationSteppers[a(this).jqmData("field")])});n.delegate("div",r.clickEvent,function(o){o.preventDefault();p._offset(a(this).jqmData("field"),r.durationSteppers[a(this).jqmData("field")]*-1)});a.extend(p,{pickerHour:d,pickerMins:g,pickerDay:C,pickerSecs:c});p.pickerContent.appendTo(p.thisPage)}if(r.mode==="slidebox"){u=a("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(p.pickerContent).find("h4");B=a("<div>").addClass("ui-datebox-slide").appendTo(p.pickerContent);s=a("<div>",{"class":"ui-datebox-controls"}).appendTo(p.pickerContent);if(r.noSetButton===false){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(p.dateOK===true){p.input.trigger("datebox",{method:"set",value:p._formatDate(p.theDate),date:p.theDate});p.input.trigger("datebox",{method:"close"})}})}a.extend(p,{controlsHeader:u,controlsInput:B});p.pickerContent.appendTo(p.thisPage)}if(r.mode==="flipbox"||r.mode==="timeflipbox"){u=a("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(p.pickerContent).find("h4");B=a("<div>",{"class":"ui-datebox-flipcontent"}).appendTo(p.pickerContent);h=a("<div>",{"class":"ui-datebox-flipcenter ui-overlay-shadow"}).css("pointerEvents","none").appendTo(p.pickerContent);s=j.clone().appendTo(p.pickerContent);C=p._makeElement(i,{attr:{field:"d",amount:1}});A=p._makeElement(i,{attr:{field:"m",amount:1}});q=p._makeElement(i,{attr:{field:"y",amount:1}});d=p._makeElement(i,{attr:{field:"h",amount:1}});g=p._makeElement(i,{attr:{field:"i",amount:r.minuteStep}});l=p._makeElement(i,{attr:{field:"a",amount:1}});if(r.wheelExists){B.delegate("div","mousewheel",function(o,x){o.preventDefault();p._offset(a(this).jqmData("field"),((x<0)?-1:1)*a(this).jqmData("amount"))})}for(m=0;m<=r.fieldsOrder.length;m++){if(r.fieldsOrder[m]==="y"){q.appendTo(B)}if(r.fieldsOrder[m]==="m"){A.appendTo(B)}if(r.fieldsOrder[m]==="d"){C.appendTo(B)}if(r.fieldsOrder[m]==="h"){d.appendTo(B)}if(r.fieldsOrder[m]==="i"){g.appendTo(B)}if(r.fieldsOrder[m]==="a"&&(r.lang[r.useLang].timeFormat===12||r.timeFormatOverride===12)){l.appendTo(B)}}if(r.swipeEnabled){B.delegate("ul",p.START_DRAG,function(x,o){if(!p.dragMove){if(typeof o!=="undefined"){x=o}p.dragMove=true;p.dragTarget=a(this).find("li").first();p.dragPos=parseInt(p.dragTarget.css("marginTop").replace(/px/i,""),10);p.dragStart=p.touch?x.originalEvent.changedTouches[0].pageY:x.pageY;p.dragEnd=false;x.stopPropagation();x.preventDefault()}});h.bind(p.START_DRAG,function(o){if(!p.dragMove){p.dragTarget=p.touch?o.originalEvent.changedTouches[0].pageX-a(o.currentTarget).offset().left:o.pageX-a(o.currentTarget).offset().left;if(r.fieldsOrder.length===3){a(p.controlsInput.find("ul").get(parseInt(p.dragTarget/87,10))).trigger(p.START_DRAG,o)}else{if(r.fieldsOrder.length===2){a(p.controlsInput.find("ul").get(parseInt(p.dragTarget/130,10))).trigger(p.START_DRAG,o)}}}})}if(r.noSetButton===false){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(p.dateOK===true){if(r.mode==="timeflipbox"){p.input.trigger("datebox",{method:"set",value:p._formatTime(p.theDate),date:p.theDate})}else{p.input.trigger("datebox",{method:"set",value:p._formatDate(p.theDate),date:p.theDate})}p.input.trigger("datebox",{method:"close"})}})}a.extend(p,{controlsHeader:u,controlsInput:B,pickerDay:C,pickerMon:A,pickerYar:q,pickerHour:d,pickerMins:g,pickerMeri:l});p.pickerContent.appendTo(p.thisPage)}if(r.mode==="calbox"){u=a("<div>",{"class":"ui-datebox-gridheader"}).appendTo(p.pickerContent);h=a("<div>",{"class":"ui-datebox-grid"}).appendTo(p.pickerContent);s=j.clone().appendTo(p.pickerContent);B=a("<div class='ui-datebox-gridlabel'><h4>Uninitialized</h4></div>").appendTo(u).find("h4");if(r.swipeEnabled){p.pickerContent.bind("swipeleft",function(){if(!p.calNoNext){p._offset("m",1)}}).bind("swiperight",function(){if(!p.calNoPrev){p._offset("m",-1)}})}if(r.wheelExists){p.pickerContent.bind("mousewheel",function(o,x){o.preventDefault();if(x>0&&!p.calNoNext){if(p.theDate.getDate()>28){p.theDate.setDate(1)}p._offset("m",1)}if(x<0&&!p.calNoPrev){if(p.theDate.getDate()>28){p.theDate.setDate(1)}p._offset("m",-1)}})}a("<div class='ui-datebox-gridplus"+((r.lang[r.useLang].isRTL===true)?"-rtl":"")+"'><a href='#'>"+((typeof r.lang[r.useLang].nextMonth!=="undefined")?r.lang[r.useLang].nextMonth:r.lang.en.nextMonth)+"</a></div>").prependTo(u).buttonMarkup({theme:r.pickPageButtonTheme,icon:"plus",inline:true,iconpos:"notext",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(!p.calNoNext){if(p.theDate.getDate()>28){p.theDate.setDate(1)}p._offset("m",1)}});a("<div class='ui-datebox-gridminus"+((r.lang[r.useLang].isRTL===true)?"-rtl":"")+"'><a href='#'>"+((typeof r.lang[r.useLang].prevMonth!=="undefined")?r.lang[r.useLang].prevMonth:r.lang.en.prevMonth)+"</a></div>").prependTo(u).buttonMarkup({theme:r.pickPageButtonTheme,icon:"minus",inline:true,iconpos:"notext",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(!p.calNoPrev){if(p.theDate.getDate()>28){p.theDate.setDate(1)}p._offset("m",-1)}});if(r.calTodayButton===true){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();p.theDate=new Date();p.theDate=new Date(p.theDate.getFullYear(),p.theDate.getMonth(),p.theDate.getDate(),0,0,0,0);p.input.trigger("datebox",{method:"doset"})})}a.extend(p,{controlsInput:B,controlsPlus:h});p.pickerContent.appendTo(p.thisPage)}if(r.useClearButton===true){p.clearButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"delete",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();p.input.val("");p.input.trigger("datebox",{method:"clear"});p.input.trigger("datebox",{method:"close"})})}if(r.collapseButtons&&(p.clearButton!==false&&p.setButton!==false)){s.addClass("ui-datebox-collapse")}},_buttonsTitle:function(){var c=this,d=this.options;if(d.titleDialogLabel===false){if(typeof this.element.attr("title")!=="undefined"){c.pickPageTitle.html(this.element.attr("title"))}else{if(this.focusedEl.parent().find("label").text()!==""){c.pickPageTitle.html(this.focusedEl.parent().find("label").text())}else{switch(d.mode){case"timebox":case"timeflipbox":c.pickPageTitle.html(d.lang[d.useLang].titleTimeDialogLabel);break;default:c.pickPageTitle.html(d.lang[d.useLang].titleDateDialogLabel);break}}}}else{c.pickPageTitle.html(d.titleDialogLabel)}if(c.clearButton!==false){c.clearButton.find(".ui-btn-text").html(d.lang[d.useLang].clearButton)}if(c.setButton!==false){switch(d.mode){case"timebox":case"timeflipbox":c.setButton.find(".ui-btn-text").html(d.lang[d.useLang].setTimeButtonLabel);break;case"durationbox":c.setButton.find(".ui-btn-text").html(d.lang[d.useLang].setDurationButtonLabel);break;case"calbox":c.setButton.find(".ui-btn-text").html(d.lang[d.useLang].calTodayButtonLabel);break;default:c.setButton.find(".ui-btn-text").html(d.lang[d.useLang].setDateButtonLabel);break}}},_buildPage:function(){var d=this,e=d.options,f=a("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden "+e.transition+" ui-body-"+e.pickPageTheme}).css("zIndex",e.zindex),c=a("<div>",{"class":"ui-datebox-screen ui-datebox-hidden"+((e.useModal)?" ui-datebox-screen-modal":"")}).css({"z-index":e.zindex-1}).appendTo(d.thisPage).bind(e.clickEvent,function(g){g.preventDefault();d.input.trigger("datebox",{method:"close"})});if(e.noAnimation){f.removeClass(e.transition)}a.extend(d,{pickerContent:f,screen:c});d._buildInternals();if(e.useInline||e.useInlineBlind){d.input.parent().parent().append(d.pickerContent);if(e.useInlineHideInput){d.input.parent().hide()}d.input.trigger("change");d.pickerContent.removeClass("ui-datebox-hidden")}else{if(e.centerWindow&&e.useInlineHideInput){d.input.parent().hide()}}if(e.useInline){d.pickerContent.addClass("ui-datebox-inline");d.open()}if(e.useInlineBlind){d.pickerContent.addClass("ui-datebox-inlineblind");d.pickerContent.hide()}},hardreset:function(){this._buildInternals();this.refresh();this._buttonsTitle()},refresh:function(){if(this.options.useInline===true){this.input.trigger("change")}this._update()},open:function(){var c=this,f=this.options,d=false,e=f.noAnimation?"none":f.transition,h,g;if(f.openCallback!==false){if(!a.isFunction(this.options.openCallback)){if(typeof window[f.openCallback]!=="undefined"){f.openCallback=window[f.openCallback]}else{f.openCallback=new Function(f.openCallback)}}h=f.openCallback.apply(c,a.merge([c.theDate],f.openCallbackArgs));if(h==false){return false}}c._buttonsTitle();if(this.options.useInlineBlind){this.pickerContent.slideDown();return false}if(this.options.useInline){return true}if(this.pickPage.is(":visible")){return false}this.theDate=this._makeDate(this.input.val());this._update();this.input.blur();if((a(document).width()>400&&!f.useDialogForceTrue)||f.useDialogForceFalse||f.fullScreen){d=this._getCoords(this);f.useDialog=false;if(f.nestedBox===true&&f.fullScreen===false){g=a(".ui-page-active").first();a(g).append(c.pickerContent);a(g).append(c.screen)}if(f.fullScreenAlways===false||d.width>399){if(f.useModal===true){c.screen.fadeIn("slow")}else{setTimeout(function(){c.screen.removeClass("ui-datebox-hidden")},500)}}if(f.fullScreenAlways===true||(f.fullScreen===true&&d.width<400)){c.pickerContent.addClass("in").css({position:"absolute","text-align":"center",top:d.fullTop-5,left:d.fullLeft-5,height:d.high,width:d.width}).removeClass("ui-datebox-hidden")}else{c.pickerContent.addClass("ui-overlay-shadow in").css({position:"absolute",top:d.winTop,left:d.winLeft}).removeClass("ui-datebox-hidden");a(document).bind("orientationchange.datebox",{widget:c},function(i){c._orientChange(i)});if(f.resizeListener===true){a(window).bind("resize.datebox",{widget:c},function(i){c._orientChange(i)})}}}else{c.thisPage.unbind("pagehide.remove");f.useDialog=true;c.pickPageContent.append(c.pickerContent);c.pickerContent.css({top:"auto",left:"auto",marginLeft:"auto",marginRight:"auto"}).removeClass("ui-overlay-shadow ui-datebox-hidden");a.mobile.changePage(c.pickPage,{transition:e})}},close:function(c){var d=this,e=this.options,f;if(e.useInlineBlind){d.pickerContent.slideUp();return false}if(e.useInline){return true}if(e.useDialog){if(!c){a(d.pickPage).dialog("close")}if(!d.thisPage.jqmData("page").options.domCache){d.thisPage.bind("pagehide.remove",function(){a(d).remove()})}d.pickerContent.addClass("ui-datebox-hidden").removeAttr("style").css("zIndex",d.options.zindex);d.thisPage.append(d.pickerContent)}else{if(e.useModal){d.screen.fadeOut("slow")}else{d.screen.addClass("ui-datebox-hidden")}d.pickerContent.addClass("ui-datebox-hidden").removeAttr("style").css("zIndex",d.options.zindex).removeClass("in")}d.focusedEl.removeClass("ui-focus");a(document).unbind("orientationchange.datebox");if(e.resizeListener===true){a(window).unbind("resize.datebox")}if(e.closeCallback!==false){if(!a.isFunction(e.closeCallback)){if(typeof window[e.closeCallback]!=="undefined"){e.closeCallback=window[e.closeCallback]}else{e.closeCallback=new Function(e.closeCallback)}}e.closeCallback.apply(d,a.merge([d.theDate],e.closeCallbackArgs))}},disable:function(){this.element.attr("disabled",true);this.element.parent().addClass("ui-disabled");this.options.disabled=true;this.element.blur();this.input.trigger("datebox",{method:"disable"})},enable:function(){this.element.attr("disabled",false);this.element.parent().removeClass("ui-disabled");this.options.disabled=false;this.input.trigger("datebox",{method:"enable"})},_setOption:function(d,e){var c=["minYear","maxYear","afterToday","beforeToday","maxDays","minDays","highDays","highDates","blackDays","blackDates","enableDates"];a.Widget.prototype._setOption.apply(this,arguments);if(a.inArray(d,c)>-1){this.refresh()}else{this.hardreset()}}});a(document).bind("pagebeforecreate",function(c){a(":jqmData(role='datebox')",c.target).each(function(){a(this).prop("type","text")})});a(document).bind("pagecreate create",function(c){a(document).trigger("dateboxbeforecreate");a(":jqmData(role='datebox')",c.target).each(function(){if(typeof(a(this).data("datebox"))==="undefined"){a(this).datebox()}})})})(jQuery);
/*
	Name: autoComplete
	Author: Raymond Camden & Andy Matthews
	Contributors: Jim Pease (@jmpease)
	Website: http://raymondcamden.com/
			 http://andyMatthews.net
	Packed With: http://jsutility.pjoneil.net/
	Version: 1.3
 */
(function($){"use strict";var defaults={target:$(),source:null,callback:null,link:null,minLength:0,transition:'fade'},buildItems=function($this,data,settings){var str=[];$.each(data,function(index,value){if($.isPlainObject(value)){str.push('<li><a href="'+settings.link+encodeURIComponent(value.value)+'" data-transition="'+settings.transition+'">'+value.label+'</a></li>')}else{str.push('<li><a href="'+settings.link+encodeURIComponent(value)+'" data-transition="'+settings.transition+'">'+value+'</a></li>')}});$(settings.target).html(str.join('')).listview("refresh");if(settings.callback!=null&&$.isFunction(settings.callback)){attachCallback(settings)}if(str.length>0){$this.trigger("targetUpdated.autocomplete")}else{$this.trigger("targetCleared.autocomplete")}},attachCallback=function(settings){$('li a',$(settings.target)).bind('click.autocomplete',function(e){e.stopPropagation();e.preventDefault();settings.callback(e)})},clearTarget=function($this,$target){$target.html('').listview('refresh');$this.trigger("targetCleared.autocomplete")},handleInput=function(e){var $this=$(this),text,data,settings=$this.jqmData("autocomplete");if(settings){text=$this.val();if(text.length<settings.minLength){clearTarget($this,$(settings.target))}else{if($.isArray(settings.source)){data=settings.source.sort().filter(function(element){var element_text,re=new RegExp('^'+text,'i');if($.isPlainObject(element)){element_text=element.label}else{element_text=element}return re.test(element_text)});buildItems($this,data,settings)}else{$.get(settings.source,{term:text},function(data){buildItems($this,data,settings)},"json")}}}},methods={init:function(options){this.jqmData("autocomplete",$.extend({},defaults,options));return this.unbind("input.autocomplete").bind("input.autocomplete",handleInput)},update:function(options){var settings=this.jqmData("autocomplete");if(settings){this.jqmData("autocomplete",$.extend(settings,options))}return this},clear:function(){var settings=this.jqmData("autocomplete");if(settings){clearTarget(this,$(settings.target))}return this},destroy:function(){var settings=this.jqmData("autocomplete");if(settings){clearTarget(this,$(settings.target));this.jqmRemoveData("autocomplete");this.unbind(".autocomplete")}return this}};$.fn.autocomplete=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments)}}})(jQuery);
// lib/handlebars/parser.js
/* Jison generated parser */
var handlebars = (function(){
var parser = {trace: function trace() { },
yy: {},
symbols_: {"error":2,"root":3,"program":4,"EOF":5,"statements":6,"simpleInverse":7,"statement":8,"openInverse":9,"closeBlock":10,"openBlock":11,"mustache":12,"partial":13,"CONTENT":14,"COMMENT":15,"OPEN_BLOCK":16,"inMustache":17,"CLOSE":18,"OPEN_INVERSE":19,"OPEN_ENDBLOCK":20,"path":21,"OPEN":22,"OPEN_UNESCAPED":23,"OPEN_PARTIAL":24,"params":25,"hash":26,"param":27,"STRING":28,"INTEGER":29,"BOOLEAN":30,"hashSegments":31,"hashSegment":32,"ID":33,"EQUALS":34,"pathSegments":35,"SEP":36,"$accept":0,"$end":1},
terminals_: {2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},
productions_: [0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],
performAction: function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$) {

var $0 = $$.length - 1;
switch (yystate) {
case 1: return $$[$0-1] 
break;
case 2: this.$ = new yy.ProgramNode($$[$0-2], $$[$0]) 
break;
case 3: this.$ = new yy.ProgramNode($$[$0]) 
break;
case 4: this.$ = new yy.ProgramNode([]) 
break;
case 5: this.$ = [$$[$0]] 
break;
case 6: $$[$0-1].push($$[$0]); this.$ = $$[$0-1] 
break;
case 7: this.$ = new yy.InverseNode($$[$0-2], $$[$0-1], $$[$0]) 
break;
case 8: this.$ = new yy.BlockNode($$[$0-2], $$[$0-1], $$[$0]) 
break;
case 9: this.$ = $$[$0] 
break;
case 10: this.$ = $$[$0] 
break;
case 11: this.$ = new yy.ContentNode($$[$0]) 
break;
case 12: this.$ = new yy.CommentNode($$[$0]) 
break;
case 13: this.$ = new yy.MustacheNode($$[$0-1][0], $$[$0-1][1]) 
break;
case 14: this.$ = new yy.MustacheNode($$[$0-1][0], $$[$0-1][1]) 
break;
case 15: this.$ = $$[$0-1] 
break;
case 16: this.$ = new yy.MustacheNode($$[$0-1][0], $$[$0-1][1]) 
break;
case 17: this.$ = new yy.MustacheNode($$[$0-1][0], $$[$0-1][1], true) 
break;
case 18: this.$ = new yy.PartialNode($$[$0-1]) 
break;
case 19: this.$ = new yy.PartialNode($$[$0-2], $$[$0-1]) 
break;
case 20: 
break;
case 21: this.$ = [[$$[$0-2]].concat($$[$0-1]), $$[$0]] 
break;
case 22: this.$ = [[$$[$0-1]].concat($$[$0]), null] 
break;
case 23: this.$ = [[$$[$0-1]], $$[$0]] 
break;
case 24: this.$ = [[$$[$0]], null] 
break;
case 25: $$[$0-1].push($$[$0]); this.$ = $$[$0-1]; 
break;
case 26: this.$ = [$$[$0]] 
break;
case 27: this.$ = $$[$0] 
break;
case 28: this.$ = new yy.StringNode($$[$0]) 
break;
case 29: this.$ = new yy.IntegerNode($$[$0]) 
break;
case 30: this.$ = new yy.BooleanNode($$[$0]) 
break;
case 31: this.$ = new yy.HashNode($$[$0]) 
break;
case 32: $$[$0-1].push($$[$0]); this.$ = $$[$0-1] 
break;
case 33: this.$ = [$$[$0]] 
break;
case 34: this.$ = [$$[$0-2], $$[$0]] 
break;
case 35: this.$ = [$$[$0-2], new yy.StringNode($$[$0])] 
break;
case 36: this.$ = [$$[$0-2], new yy.IntegerNode($$[$0])] 
break;
case 37: this.$ = [$$[$0-2], new yy.BooleanNode($$[$0])] 
break;
case 38: this.$ = new yy.IdNode($$[$0]) 
break;
case 39: $$[$0-2].push($$[$0]); this.$ = $$[$0-2]; 
break;
case 40: this.$ = [$$[$0]] 
break;
}
},
table: [{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],
defaultActions: {16:[2,1],37:[2,23],53:[2,21]},
parseError: function parseError(str, hash) {
    throw new Error(str);
},
parse: function parse(input) {
    var self = this,
        stack = [0],
        vstack = [null], // semantic value stack
        lstack = [], // location stack
        table = this.table,
        yytext = '',
        yylineno = 0,
        yyleng = 0,
        recovering = 0,
        TERROR = 2,
        EOF = 1;

    //this.reductionCount = this.shiftCount = 0;

    this.lexer.setInput(input);
    this.lexer.yy = this.yy;
    this.yy.lexer = this.lexer;
    if (typeof this.lexer.yylloc == 'undefined')
        this.lexer.yylloc = {};
    var yyloc = this.lexer.yylloc;
    lstack.push(yyloc);

    if (typeof this.yy.parseError === 'function')
        this.parseError = this.yy.parseError;

    function popStack (n) {
        stack.length = stack.length - 2*n;
        vstack.length = vstack.length - n;
        lstack.length = lstack.length - n;
    }

    function lex() {
        var token;
        token = self.lexer.lex() || 1; // $end = 1
        // if token isn't its numeric value, convert
        if (typeof token !== 'number') {
            token = self.symbols_[token] || token;
        }
        return token;
    };

    var symbol, preErrorSymbol, state, action, a, r, yyval={},p,len,newState, expected;
    while (true) {
        // retreive state number from top of stack
        state = stack[stack.length-1];

        // use default actions if available
        if (this.defaultActions[state]) {
            action = this.defaultActions[state];
        } else {
            if (symbol == null)
                symbol = lex();
            // read action for current state and first input
            action = table[state] && table[state][symbol];
        }

        // handle parse error
        if (typeof action === 'undefined' || !action.length || !action[0]) {

            if (!recovering) {
                // Report error
                expected = [];
                for (p in table[state]) if (this.terminals_[p] && p > 2) {
                    expected.push("'"+this.terminals_[p]+"'");
                }
                var errStr = '';
                if (this.lexer.showPosition) {
                    errStr = 'Parse error on line '+(yylineno+1)+":\n"+this.lexer.showPosition()+'\nExpecting '+expected.join(', ');
                } else {
                    errStr = 'Parse error on line '+(yylineno+1)+": Unexpected " +
                                  (symbol == 1 /*EOF*/ ? "end of input" :
                                              ("'"+(this.terminals_[symbol] || symbol)+"'"));
                }
                this.parseError(errStr,
                    {text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected});
            }

            // just recovered from another error
            if (recovering == 3) {
                if (symbol == EOF) {
                    throw new Error(errStr || 'Parsing halted.');
                }

                // discard current lookahead and grab another
                yyleng = this.lexer.yyleng;
                yytext = this.lexer.yytext;
                yylineno = this.lexer.yylineno;
                yyloc = this.lexer.yylloc;
                symbol = lex();
            }

            // try to recover from error
            while (1) {
                // check for error recovery rule in this state
                if ((TERROR.toString()) in table[state]) {
                    break;
                }
                if (state == 0) {
                    throw new Error(errStr || 'Parsing halted.');
                }
                popStack(1);
                state = stack[stack.length-1];
            }

            preErrorSymbol = symbol; // save the lookahead token
            symbol = TERROR;         // insert generic error symbol as new lookahead
            state = stack[stack.length-1];
            action = table[state] && table[state][TERROR];
            recovering = 3; // allow 3 real symbols to be shifted before reporting a new error
        }

        // this shouldn't happen, unless resolve defaults are off
        if (action[0] instanceof Array && action.length > 1) {
            throw new Error('Parse Error: multiple actions possible at state: '+state+', token: '+symbol);
        }

        switch (action[0]) {

            case 1: // shift
                //this.shiftCount++;

                stack.push(symbol);
                vstack.push(this.lexer.yytext);
                lstack.push(this.lexer.yylloc);
                stack.push(action[1]); // push state
                symbol = null;
                if (!preErrorSymbol) { // normal execution/no error
                    yyleng = this.lexer.yyleng;
                    yytext = this.lexer.yytext;
                    yylineno = this.lexer.yylineno;
                    yyloc = this.lexer.yylloc;
                    if (recovering > 0)
                        recovering--;
                } else { // error just occurred, resume old lookahead f/ before error
                    symbol = preErrorSymbol;
                    preErrorSymbol = null;
                }
                break;

            case 2: // reduce
                //this.reductionCount++;

                len = this.productions_[action[1]][1];

                // perform semantic action
                yyval.$ = vstack[vstack.length-len]; // default to $$ = $1
                // default location, uses first token for firsts, last for lasts
                yyval._$ = {
                    first_line: lstack[lstack.length-(len||1)].first_line,
                    last_line: lstack[lstack.length-1].last_line,
                    first_column: lstack[lstack.length-(len||1)].first_column,
                    last_column: lstack[lstack.length-1].last_column
                };
                r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);

                if (typeof r !== 'undefined') {
                    return r;
                }

                // pop off stack
                if (len) {
                    stack = stack.slice(0,-1*len*2);
                    vstack = vstack.slice(0, -1*len);
                    lstack = lstack.slice(0, -1*len);
                }

                stack.push(this.productions_[action[1]][0]);    // push nonterminal (reduce)
                vstack.push(yyval.$);
                lstack.push(yyval._$);
                // goto new state = table[STATE][NONTERMINAL]
                newState = table[stack[stack.length-2]][stack[stack.length-1]];
                stack.push(newState);
                break;

            case 3: // accept
                return true;
        }

    }

    return true;
}};/* Jison generated lexer */
var lexer = (function(){var lexer = ({EOF:1,
parseError:function parseError(str, hash) {
        if (this.yy.parseError) {
            this.yy.parseError(str, hash);
        } else {
            throw new Error(str);
        }
    },
setInput:function (input) {
        this._input = input;
        this._more = this._less = this.done = false;
        this.yylineno = this.yyleng = 0;
        this.yytext = this.matched = this.match = '';
        this.conditionStack = ['INITIAL'];
        this.yylloc = {first_line:1,first_column:0,last_line:1,last_column:0};
        return this;
    },
input:function () {
        var ch = this._input[0];
        this.yytext+=ch;
        this.yyleng++;
        this.match+=ch;
        this.matched+=ch;
        var lines = ch.match(/\n/);
        if (lines) this.yylineno++;
        this._input = this._input.slice(1);
        return ch;
    },
unput:function (ch) {
        this._input = ch + this._input;
        return this;
    },
more:function () {
        this._more = true;
        return this;
    },
pastInput:function () {
        var past = this.matched.substr(0, this.matched.length - this.match.length);
        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\n/g, "");
    },
upcomingInput:function () {
        var next = this.match;
        if (next.length < 20) {
            next += this._input.substr(0, 20-next.length);
        }
        return (next.substr(0,20)+(next.length > 20 ? '...':'')).replace(/\n/g, "");
    },
showPosition:function () {
        var pre = this.pastInput();
        var c = new Array(pre.length + 1).join("-");
        return pre + this.upcomingInput() + "\n" + c+"^";
    },
next:function () {
        if (this.done) {
            return this.EOF;
        }
        if (!this._input) this.done = true;

        var token,
            match,
            col,
            lines;
        if (!this._more) {
            this.yytext = '';
            this.match = '';
        }
        var rules = this._currentRules();
        for (var i=0;i < rules.length; i++) {
            match = this._input.match(this.rules[rules[i]]);
            if (match) {
                lines = match[0].match(/\n.*/g);
                if (lines) this.yylineno += lines.length;
                this.yylloc = {first_line: this.yylloc.last_line,
                               last_line: this.yylineno+1,
                               first_column: this.yylloc.last_column,
                               last_column: lines ? lines[lines.length-1].length-1 : this.yylloc.last_column + match[0].length}
                this.yytext += match[0];
                this.match += match[0];
                this.matches = match;
                this.yyleng = this.yytext.length;
                this._more = false;
                this._input = this._input.slice(match[0].length);
                this.matched += match[0];
                token = this.performAction.call(this, this.yy, this, rules[i],this.conditionStack[this.conditionStack.length-1]);
                if (token) return token;
                else return;
            }
        }
        if (this._input === "") {
            return this.EOF;
        } else {
            this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\n'+this.showPosition(), 
                    {text: "", token: null, line: this.yylineno});
        }
    },
lex:function lex() {
        var r = this.next();
        if (typeof r !== 'undefined') {
            return r;
        } else {
            return this.lex();
        }
    },
begin:function begin(condition) {
        this.conditionStack.push(condition);
    },
popState:function popState() {
        return this.conditionStack.pop();
    },
_currentRules:function _currentRules() {
        return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;
    }});
lexer.performAction = function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {

var YYSTATE=YY_START
switch($avoiding_name_collisions) {
case 0: this.begin("mu"); if (yy_.yytext) return 14; 
break;
case 1: return 14; 
break;
case 2: return 24; 
break;
case 3: return 16; 
break;
case 4: return 20; 
break;
case 5: return 19; 
break;
case 6: return 19; 
break;
case 7: return 23; 
break;
case 8: return 23; 
break;
case 9: yy_.yytext = yy_.yytext.substr(3,yy_.yyleng-5); this.begin("INITIAL"); return 15; 
break;
case 10: return 22; 
break;
case 11: return 34; 
break;
case 12: return 33; 
break;
case 13: return 33; 
break;
case 14: return 36; 
break;
case 15: /*ignore whitespace*/ 
break;
case 16: this.begin("INITIAL"); return 18; 
break;
case 17: this.begin("INITIAL"); return 18; 
break;
case 18: yy_.yytext = yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"'); return 28; 
break;
case 19: return 30; 
break;
case 20: return 30; 
break;
case 21: return 29; 
break;
case 22: return 33; 
break;
case 23: return 'INVALID'; 
break;
case 24: return 5; 
break;
}
};
lexer.rules = [/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s/.])/,/^./,/^$/];
lexer.conditions = {"mu":{"rules":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],"inclusive":false},"INITIAL":{"rules":[0,1,24],"inclusive":true}};return lexer;})()
parser.lexer = lexer;
return parser;
})();
if (typeof require !== 'undefined' && typeof exports !== 'undefined') {
exports.parser = handlebars;
exports.parse = function () { return handlebars.parse.apply(handlebars, arguments); }
exports.main = function commonjsMain(args) {
    if (!args[1])
        throw new Error('Usage: '+args[0]+' FILE');
    if (typeof process !== 'undefined') {
        var source = require('fs').readFileSync(require('path').join(process.cwd(), args[1]), "utf8");
    } else {
        var cwd = require("file").path(require("file").cwd());
        var source = cwd.join(args[1]).read({charset: "utf-8"});
    }
    return exports.parser.parse(source);
}
if (typeof module !== 'undefined' && require.main === module) {
  exports.main(typeof process !== 'undefined' ? process.argv.slice(1) : require("system").args);
}
};
;
// lib/handlebars/base.js
var Handlebars = {};

Handlebars.VERSION = "1.0.beta.2";

Handlebars.Parser = handlebars;

Handlebars.parse = function(string) {
  Handlebars.Parser.yy = Handlebars.AST;
  return Handlebars.Parser.parse(string);
};

Handlebars.print = function(ast) {
  return new Handlebars.PrintVisitor().accept(ast);
};

Handlebars.helpers  = {};
Handlebars.partials = {};

Handlebars.registerHelper = function(name, fn, inverse) {
  if(inverse) { fn.not = inverse; }
  this.helpers[name] = fn;
};

Handlebars.registerPartial = function(name, str) {
  this.partials[name] = str;
};

Handlebars.registerHelper('helperMissing', function(arg) {
  if(arguments.length === 2) {
    return undefined;
  } else {
    throw new Error("Could not find property '" + arg + "'");
  }
});

Handlebars.registerHelper('blockHelperMissing', function(context, fn, inverse) {
  inverse = inverse || function() {};

  var ret = "";
  var type = Object.prototype.toString.call(context);

  if(type === "[object Function]") {
    context = context();
  }

  if(context === true) {
    return fn(this);
  } else if(context === false || context == null) {
    return inverse(this);
  } else if(type === "[object Array]") {
    if(context.length > 0) {
      for(var i=0, j=context.length; i<j; i++) {
        ret = ret + fn(context[i]);
      }
    } else {
      ret = inverse(this);
    }
    return ret;
  } else {
    return fn(context);
  }
}, function(context, fn) {
  return fn(context);
});

Handlebars.registerHelper('each', function(context, fn, inverse) {
  var ret = "";

  if(context && context.length > 0) {
    for(var i=0, j=context.length; i<j; i++) {
      ret = ret + fn(context[i]);
    }
  } else {
    ret = inverse(this);
  }
  return ret;
});

Handlebars.registerHelper('if', function(context, fn, inverse) {
  if(!context || context == []) {
    return inverse(this);
  } else {
    return fn(this);
  }
});

Handlebars.registerHelper('unless', function(context, fn, inverse) {
  return Handlebars.helpers['if'].call(this, context, inverse, fn);
});

Handlebars.registerHelper('with', function(context, fn) {
  return fn(context);
});

Handlebars.logger = {
  DEBUG: 0, INFO: 1, WARN: 2, ERROR: 3, level: 3,

  // override in the host environment
  log: function(level, str) {}
};

Handlebars.log = function(level, str) { Handlebars.logger.log(level, str); };
;
// lib/handlebars/ast.js
(function() {

  Handlebars.AST = {};

  Handlebars.AST.ProgramNode = function(statements, inverse) {
    this.type = "program";
    this.statements = statements;
    if(inverse) { this.inverse = new Handlebars.AST.ProgramNode(inverse); }
  };

  Handlebars.AST.MustacheNode = function(params, hash, unescaped) {
    this.type = "mustache";
    this.id = params[0];
    this.params = params.slice(1);
    this.hash = hash;
    this.escaped = !unescaped;
  };

  Handlebars.AST.PartialNode = function(id, context) {
    this.type    = "partial";

    // TODO: disallow complex IDs

    this.id      = id;
    this.context = context;
  };

  var verifyMatch = function(open, close) {
    if(open.original !== close.original) {
      throw new Handlebars.Exception(open.original + " doesn't match " + close.original);
    }
  };

  Handlebars.AST.BlockNode = function(mustache, program, close) {
    verifyMatch(mustache.id, close);
    this.type = "block";
    this.mustache = mustache;
    this.program  = program;
  };

  Handlebars.AST.InverseNode = function(mustache, program, close) {
    verifyMatch(mustache.id, close);
    this.type = "inverse";
    this.mustache = mustache;
    this.program  = program;
  };

  Handlebars.AST.ContentNode = function(string) {
    this.type = "content";
    this.string = string;
  };

  Handlebars.AST.HashNode = function(pairs) {
    this.type = "hash";
    this.pairs = pairs;
  };

  Handlebars.AST.IdNode = function(parts) {
    this.type = "ID";
    this.original = parts.join(".");

    var dig = [], depth = 0;

    for(var i=0,l=parts.length; i<l; i++) {
      var part = parts[i];

      if(part === "..") { depth++; }
      else if(part === "." || part === "this") { continue; }
      else { dig.push(part); }
    }

    this.parts    = dig;
    this.string   = dig.join('.');
    this.depth    = depth;
    this.isSimple = (dig.length === 1) && (depth === 0);
  };

  Handlebars.AST.StringNode = function(string) {
    this.type = "STRING";
    this.string = string;
  };

  Handlebars.AST.IntegerNode = function(integer) {
    this.type = "INTEGER";
    this.integer = integer;
  };

  Handlebars.AST.BooleanNode = function(boolean) {
    this.type = "BOOLEAN";
    this.boolean = boolean;
  };

  Handlebars.AST.CommentNode = function(comment) {
    this.type = "comment";
    this.comment = comment;
  };

})();;
// lib/handlebars/visitor.js

Handlebars.Visitor = function() {};

Handlebars.Visitor.prototype = {
  accept: function(object) {
    return this[object.type](object);
  }
};;
// lib/handlebars/utils.js
Handlebars.Exception = function(message) {
  this.message = message;
};

// Build out our basic SafeString type
Handlebars.SafeString = function(string) {
  this.string = string;
};
Handlebars.SafeString.prototype.toString = function() {
  return this.string.toString();
};

(function() {
  var escape = {
    "<": "&lt;",
    ">": "&gt;",
    '"': "&quot;",
    "'": "&#x27;",
    "`": "&#x60;"
  };

  var badChars = /&(?!\w+;)|[<>"'`]/g;
  var possible = /[&<>"'`]/;

  var escapeChar = function(chr) {
    return escape[chr] || "&amp;"
  };

  Handlebars.Utils = {
    escapeExpression: function(string) {
      // don't escape SafeStrings, since they're already safe
      if (string instanceof Handlebars.SafeString) {
        return string.toString();
      } else if (string == null || string === false) {
        return "";
      }

      if(!possible.test(string)) { return string; }
      return string.replace(badChars, escapeChar);
    },

    isEmpty: function(value) {
      if (typeof value === "undefined") {
        return true;
      } else if (value === null) {
        return true;
      } else if (value === false) {
        return true;
      } else if(Object.prototype.toString.call(value) === "[object Array]" && value.length === 0) {
        return true;
      } else {
        return false;
      }
    }
  };
})();;
// lib/handlebars/compiler.js
Handlebars.Compiler = function() {};
Handlebars.JavaScriptCompiler = function() {};

(function(Compiler, JavaScriptCompiler) {
  Compiler.OPCODE_MAP = {
    appendContent: 1,
    getContext: 2,
    lookupWithHelpers: 3,
    lookup: 4,
    append: 5,
    invokeMustache: 6,
    appendEscaped: 7,
    pushString: 8,
    truthyOrFallback: 9,
    functionOrFallback: 10,
    invokeProgram: 11,
    invokePartial: 12,
    push: 13,
    invokeInverse: 14,
    assignToHash: 15,
    pushStringParam: 16
  };

  Compiler.MULTI_PARAM_OPCODES = {
    appendContent: 1,
    getContext: 1,
    lookupWithHelpers: 1,
    lookup: 1,
    invokeMustache: 2,
    pushString: 1,
    truthyOrFallback: 1,
    functionOrFallback: 1,
    invokeProgram: 2,
    invokePartial: 1,
    push: 1,
    invokeInverse: 1,
    assignToHash: 1,
    pushStringParam: 1
  };

  Compiler.DISASSEMBLE_MAP = {};

  for(var prop in Compiler.OPCODE_MAP) {
    var value = Compiler.OPCODE_MAP[prop];
    Compiler.DISASSEMBLE_MAP[value] = prop;
  }

  Compiler.multiParamSize = function(code) {
    return Compiler.MULTI_PARAM_OPCODES[Compiler.DISASSEMBLE_MAP[code]];
  };

  Compiler.prototype = {
    compiler: Compiler,

    disassemble: function() {
      var opcodes = this.opcodes, opcode, nextCode;
      var out = [], str, name, value;

      for(var i=0, l=opcodes.length; i<l; i++) {
        opcode = opcodes[i];

        if(opcode === 'DECLARE') {
          name = opcodes[++i];
          value = opcodes[++i];
          out.push("DECLARE " + name + " = " + value);
        } else {
          str = Compiler.DISASSEMBLE_MAP[opcode];

          var extraParams = Compiler.multiParamSize(opcode);
          var codes = [];

          for(var j=0; j<extraParams; j++) {
            nextCode = opcodes[++i];

            if(typeof nextCode === "string") {
              nextCode = "\"" + nextCode.replace("\n", "\\n") + "\"";
            }

            codes.push(nextCode);
          }

          str = str + " " + codes.join(" ");

          out.push(str);
        }
      }

      return out.join("\n");
    },

    guid: 0,

    compile: function(program, options) {
      this.children = [];
      this.depths = {list: []};
      this.options = options || {};
      return this.program(program);
    },

    accept: function(node) {
      return this[node.type](node);
    },

    program: function(program) {
      var statements = program.statements, statement;
      this.opcodes = [];

      for(var i=0, l=statements.length; i<l; i++) {
        statement = statements[i];
        this[statement.type](statement);
      }

      this.depths.list = this.depths.list.sort(function(a, b) {
        return a - b;
      });

      return this;
    },

    compileProgram: function(program) {
      var result = new this.compiler().compile(program, this.options);
      var guid = this.guid++;

      this.usePartial = this.usePartial || result.usePartial;

      this.children[guid] = result;

      for(var i=0, l=result.depths.list.length; i<l; i++) {
        depth = result.depths.list[i];

        if(depth < 2) { continue; }
        else { this.addDepth(depth - 1); }
      }

      return guid;
    },

    block: function(block) {
      var mustache = block.mustache;
      var depth, child, inverse, inverseGuid;

      var params = this.setupStackForMustache(mustache);

      var programGuid = this.compileProgram(block.program);

      if(block.program.inverse) {
        inverseGuid = this.compileProgram(block.program.inverse);
        this.declare('inverse', inverseGuid);
      }

      this.opcode('invokeProgram', programGuid, params.length);
      this.declare('inverse', null);
      this.opcode('append');
    },

    inverse: function(block) {
      this.ID(block.mustache.id);
      var programGuid = this.compileProgram(block.program);

      this.opcode('invokeInverse', programGuid);
      this.opcode('append');
    },

    hash: function(hash) {
      var pairs = hash.pairs, pair, val;

      this.opcode('push', '{}');

      for(var i=0, l=pairs.length; i<l; i++) {
        pair = pairs[i];
        val  = pair[1];

        this.accept(val);
        this.opcode('assignToHash', pair[0]);
      }
    },

    partial: function(partial) {
      var id = partial.id;
      this.usePartial = true;

      if(partial.context) {
        this.ID(partial.context);
      } else {
        this.opcode('push', 'context');
      }

      this.opcode('invokePartial', id.original);
      this.opcode('append');
    },

    content: function(content) {
      this.opcode('appendContent', content.string);
    },

    mustache: function(mustache) {
      var params = this.setupStackForMustache(mustache);

      this.opcode('invokeMustache', params.length, mustache.id.original);

      if(mustache.escaped) {
        this.opcode('appendEscaped');
      } else {
        this.opcode('append');
      }
    },

    ID: function(id) {
      this.addDepth(id.depth);

      this.opcode('getContext', id.depth);

      this.opcode('lookupWithHelpers', id.parts[0] || null);

      for(var i=1, l=id.parts.length; i<l; i++) {
        this.opcode('lookup', id.parts[i]);
      }
    },

    STRING: function(string) {
      this.opcode('pushString', string.string);
    },

    INTEGER: function(integer) {
      this.opcode('push', integer.integer);
    },

    BOOLEAN: function(boolean) {
      this.opcode('push', boolean.boolean);
    },

    comment: function() {},

    // HELPERS
    pushParams: function(params) {
      var i = params.length, param;

      while(i--) {
        param = params[i];

        if(this.options.stringParams) {
          if(param.depth) {
            this.addDepth(param.depth);
          }

          this.opcode('getContext', param.depth || 0);
          this.opcode('pushStringParam', param.string);
        } else {
          this[param.type](param);
        }
      }
    },

    opcode: function(name, val1, val2) {
      this.opcodes.push(Compiler.OPCODE_MAP[name]);
      if(val1 !== undefined) { this.opcodes.push(val1); }
      if(val2 !== undefined) { this.opcodes.push(val2); }
    },

    declare: function(name, value) {
      this.opcodes.push('DECLARE');
      this.opcodes.push(name);
      this.opcodes.push(value);
    },

    addDepth: function(depth) {
      if(depth === 0) { return; }

      if(!this.depths[depth]) {
        this.depths[depth] = true;
        this.depths.list.push(depth);
      }
    },

    setupStackForMustache: function(mustache) {
      var params = mustache.params;

      this.pushParams(params);

      if(mustache.hash) {
        this.hash(mustache.hash);
      } else {
        this.opcode('push', '{}');
      }

      this.ID(mustache.id);

      return params;
    }
  };

  JavaScriptCompiler.prototype = {
    // PUBLIC API: You can override these methods in a subclass to provide
    // alternative compiled forms for name lookup and buffering semantics
    nameLookup: function(parent, name, type) {
      if(JavaScriptCompiler.RESERVED_WORDS[name] || name.indexOf('-') !== -1 || !isNaN(name)) {
        return parent + "['" + name + "']";
      } else if (/^[0-9]+$/.test(name)) {
        return parent + "[" + name + "]";
      } else {
        return parent + "." + name;
      }
    },

    appendToBuffer: function(string) {
      return "buffer = buffer + " + string + ";";
    },

    initializeBuffer: function() {
      return this.quotedString("");
    },
    // END PUBLIC API

    compile: function(environment, options) {
      this.environment = environment;
      this.options = options || {};

      this.preamble();

      this.stackSlot = 0;
      this.stackVars = [];
      this.registers = {list: []};

      this.compileChildren(environment, options);

      Handlebars.log(Handlebars.logger.DEBUG, environment.disassemble() + "\n\n");

      var opcodes = environment.opcodes, opcode, name, declareName, declareVal;

      this.i = 0;

      for(l=opcodes.length; this.i<l; this.i++) {
        opcode = this.nextOpcode(0);

        if(opcode[0] === 'DECLARE') {
          this.i = this.i + 2;
          this[opcode[1]] = opcode[2];
        } else {
          this.i = this.i + opcode[1].length;
          this[opcode[0]].apply(this, opcode[1]);
        }
      }

      return this.createFunction();
    },

    nextOpcode: function(n) {
      var opcodes = this.environment.opcodes, opcode = opcodes[this.i + n], name, val;
      var extraParams, codes;

      if(opcode === 'DECLARE') {
        name = opcodes[this.i + 1];
        val  = opcodes[this.i + 2];
        return ['DECLARE', name, val];
      } else {
        name = Compiler.DISASSEMBLE_MAP[opcode];

        extraParams = Compiler.multiParamSize(opcode);
        codes = [];

        for(var j=0; j<extraParams; j++) {
          codes.push(opcodes[this.i + j + 1 + n]);
        }

        return [name, codes];
      }
    },

    eat: function(opcode) {
      this.i = this.i + opcode.length;
    },

    preamble: function() {
      var out = [];
      out.push("var buffer = " + this.initializeBuffer() + ", currentContext = context");

      var copies = "helpers = helpers || Handlebars.helpers;";
      if(this.environment.usePartial) { copies = copies + " partials = partials || Handlebars.partials;"; }
      out.push(copies);

      // track the last context pushed into place to allow skipping the
      // getContext opcode when it would be a noop
      this.lastContext = 0;
      this.source = out;
    },

    createFunction: function() {
      var container = {
        escapeExpression: Handlebars.Utils.escapeExpression,
        invokePartial: Handlebars.VM.invokePartial,
        programs: [],
        program: function(i, helpers, partials, data) {
          var programWrapper = this.programs[i];
          if(data) {
            return Handlebars.VM.program(this.children[i], helpers, partials, data);
          } else if(programWrapper) {
            return programWrapper;
          } else {
            programWrapper = this.programs[i] = Handlebars.VM.program(this.children[i], helpers, partials);
            return programWrapper;
          }
        },
        programWithDepth: Handlebars.VM.programWithDepth,
        noop: Handlebars.VM.noop
      };
      var locals = this.stackVars.concat(this.registers.list);

      if(locals.length > 0) {
        this.source[0] = this.source[0] + ", " + locals.join(", ");
      }

      this.source[0] = this.source[0] + ";";

      this.source.push("return buffer;");

      var params = ["Handlebars", "context", "helpers", "partials"];

      if(this.options.data) { params.push("data"); }

      for(var i=0, l=this.environment.depths.list.length; i<l; i++) {
        params.push("depth" + this.environment.depths.list[i]);
      }

      if(params.length === 4 && !this.environment.usePartial) { params.pop(); }

      params.push(this.source.join("\n"));

      var fn = Function.apply(this, params);
      fn.displayName = "Handlebars.js";

      Handlebars.log(Handlebars.logger.DEBUG, fn.toString() + "\n\n");

      container.render = fn;

      container.children = this.environment.children;

      return function(context, options, $depth) {
        try {
          options = options || {};
          var args = [Handlebars, context, options.helpers, options.partials, options.data];
          var depth = Array.prototype.slice.call(arguments, 2);
          args = args.concat(depth);
          return container.render.apply(container, args);
        } catch(e) {
          throw e;
        }
      };
    },

    appendContent: function(content) {
      this.source.push(this.appendToBuffer(this.quotedString(content)));
    },

    append: function() {
      var local = this.popStack();
      this.source.push("if(" + local + " || " + local + " === 0) { " + this.appendToBuffer(local) + " }");
    },

    appendEscaped: function() {
      var opcode = this.nextOpcode(1), extra = "";

      if(opcode[0] === 'appendContent') {
        extra = " + " + this.quotedString(opcode[1][0]);
        this.eat(opcode);
      }

      this.source.push(this.appendToBuffer("this.escapeExpression(" + this.popStack() + ")" + extra));
    },

    getContext: function(depth) {
      if(this.lastContext !== depth) {
        this.lastContext = depth;

        if(depth === 0) {
          this.source.push("currentContext = context;");
        } else {
          this.source.push("currentContext = depth" + depth + ";");
        }
      }
    },

    lookupWithHelpers: function(name) {
      if(name) {
        var topStack = this.nextStack();

        var toPush =  "if('" + name + "' in helpers) { " + topStack +
                      " = " + this.nameLookup('helpers', name, 'helper') +
                      "; } else { " + topStack + " = " +
                      this.nameLookup('currentContext', name, 'context') +
                      "; }";

        this.source.push(toPush);
      } else {
        this.pushStack("currentContext");
      }
    },

    lookup: function(name) {
      var topStack = this.topStack();
      this.source.push(topStack + " = " + this.nameLookup(topStack, name, 'context') + ";");
    },

    pushStringParam: function(string) {
      this.pushStack("currentContext");
      this.pushString(string);
    },

    pushString: function(string) {
      this.pushStack(this.quotedString(string));
    },

    push: function(name) {
      this.pushStack(name);
    },

    invokeMustache: function(paramSize, original) {
      this.populateParams(paramSize, this.quotedString(original), "{}", null, function(nextStack, helperMissingString, id) {
        this.source.push("else if(" + id + "=== undefined) { " + nextStack + " = helpers.helperMissing.call(" + helperMissingString + "); }");
        this.source.push("else { " + nextStack + " = " + id + "; }");
      });
    },

    invokeProgram: function(guid, paramSize) {
      var inverse = this.programExpression(this.inverse);
      var mainProgram = this.programExpression(guid);

      this.populateParams(paramSize, null, mainProgram, inverse, function(nextStack, helperMissingString, id) {
        this.source.push("else { " + nextStack + " = helpers.blockHelperMissing.call(" + helperMissingString + "); }");
      });
    },

    populateParams: function(paramSize, helperId, program, inverse, fn) {
      var id = this.popStack(), nextStack;
      var params = [], param, stringParam;

      var hash = this.popStack();

      this.register('tmp1', program);
      this.source.push('tmp1.hash = ' + hash + ';');

      if(this.options.stringParams) {
        this.source.push('tmp1.contexts = [];');
      }

      for(var i=0; i<paramSize; i++) {
        param = this.popStack();
        params.push(param);

        if(this.options.stringParams) {
          this.source.push('tmp1.contexts.push(' + this.popStack() + ');');
        }
      }

      if(inverse) {
        this.source.push('tmp1.fn = tmp1;');
        this.source.push('tmp1.inverse = ' + inverse + ';');
      }

      if(this.options.data) {
        this.source.push('tmp1.data = data;');
      }

      params.push('tmp1');

      // TODO: This is legacy behavior. Deprecate and remove.
      if(inverse) {
        params.push(inverse);
      }

      this.populateCall(params, id, helperId || id, fn);
    },

    populateCall: function(params, id, helperId, fn) {
      var paramString = ["context"].concat(params).join(", ");
      var helperMissingString = ["context"].concat(helperId).concat(params).join(", ");

      nextStack = this.nextStack();

      this.source.push("if(typeof " + id + " === 'function') { " + nextStack + " = " + id + ".call(" + paramString + "); }");
      fn.call(this, nextStack, helperMissingString, id);
    },

    invokeInverse: function(guid) {
      var program = this.programExpression(guid);

      var blockMissingParams = ["context", this.topStack(), "this.noop", program];
      this.pushStack("helpers.blockHelperMissing.call(" + blockMissingParams.join(", ") + ")");
    },

    invokePartial: function(context) {
      this.pushStack("this.invokePartial(" + this.nameLookup('partials', context, 'partial') + ", '" + context + "', " + this.popStack() + ", helpers, partials);");
    },

    assignToHash: function(key) {
      var value = this.popStack();
      var hash = this.topStack();

      this.source.push(hash + "['" + key + "'] = " + value + ";");
    },

    // HELPERS

    compiler: JavaScriptCompiler,

    compileChildren: function(environment, options) {
      var children = environment.children, child, compiler;
      var compiled = [];

      for(var i=0, l=children.length; i<l; i++) {
        child = children[i];
        compiler = new this.compiler();

        compiled[i] = compiler.compile(child, options);
      }

      environment.rawChildren = children;
      environment.children = compiled;
    },

    programExpression: function(guid) {
      if(guid == null) { return "this.noop"; }

      var programParams = [guid, "helpers", "partials"];

      var depths = this.environment.rawChildren[guid].depths.list;

      if(this.options.data) { programParams.push("data"); }

      for(var i=0, l = depths.length; i<l; i++) {
        depth = depths[i];

        if(depth === 1) { programParams.push("context"); }
        else { programParams.push("depth" + (depth - 1)); }
      }

      if(!this.environment.usePartial) {
        if(programParams[3]) {
          programParams[2] = "null";
        } else {
          programParams.pop();
        }
      }

      if(depths.length === 0) {
        return "this.program(" + programParams.join(", ") + ")";
      } else {
        programParams[0] = "this.children[" + guid + "]";
        return "this.programWithDepth(" + programParams.join(", ") + ")";
      }
    },

    register: function(name, val) {
      this.useRegister(name);
      this.source.push(name + " = " + val + ";");
    },

    useRegister: function(name) {
      if(!this.registers[name]) {
        this.registers[name] = true;
        this.registers.list.push(name);
      }
    },

    pushStack: function(item) {
      this.source.push(this.nextStack() + " = " + item + ";");
      return "stack" + this.stackSlot;
    },

    nextStack: function() {
      this.stackSlot++;
      if(this.stackSlot > this.stackVars.length) { this.stackVars.push("stack" + this.stackSlot); }
      return "stack" + this.stackSlot;
    },

    popStack: function() {
      return "stack" + this.stackSlot--;
    },

    topStack: function() {
      return "stack" + this.stackSlot;
    },

    quotedString: function(str) {
      return '"' + str
        .replace(/\\/g, '\\\\')
        .replace(/"/g, '\\"')
        .replace(/\n/g, '\\n')
        .replace(/\r/g, '\\r') + '"';
    }
  };

  var reservedWords = ("break case catch continue default delete do else finally " +
                       "for function if in instanceof new return switch this throw " + 
                       "try typeof var void while with null true false").split(" ");

  compilerWords = JavaScriptCompiler.RESERVED_WORDS = {};

  for(var i=0, l=reservedWords.length; i<l; i++) {
    compilerWords[reservedWords[i]] = true;
  }

})(Handlebars.Compiler, Handlebars.JavaScriptCompiler);

Handlebars.VM = {
  programWithDepth: function(fn, helpers, partials, data, $depth) {
    var args = Array.prototype.slice.call(arguments, 4);

    return function(context, options) {
      options = options || {};

      options = {
        helpers: options.helpers || helpers,
        partials: options.partials || partials,
        data: options.data || data
      };

      return fn.apply(this, [context, options].concat(args));
    };
  },
  program: function(fn, helpers, partials, data) {
    return function(context, options) {
      options = options || {};

      return fn(context, {
        helpers: options.helpers || helpers,
        partials: options.partials || partials,
        data: options.data || data
      });
    };
  },
  noop: function() { return ""; },
  compile: function(string, options) {
    var ast = Handlebars.parse(string);
    var environment = new Handlebars.Compiler().compile(ast, options);
    return new Handlebars.JavaScriptCompiler().compile(environment, options);
  },
  invokePartial: function(partial, name, context, helpers, partials) {
    if(partial === undefined) {
      throw new Handlebars.Exception("The partial " + name + " could not be found");
    } else if(partial instanceof Function) {
      return partial(context, {helpers: helpers, partials: partials});
    } else {
      partials[name] = Handlebars.VM.compile(partial);
      return partials[name](context, {helpers: helpers, partials: partials});
    }
  }
};

Handlebars.compile = Handlebars.VM.compile;;

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 09.09.2010
 * Time: 19:02:33
 */


var form2js = (function()
{
	"use strict";

	/**
	 * Returns form values represented as Javascript object
	 * "name" attribute defines structure of resulting object
	 *
	 * @param rootNode {Element|String} root form element (or it's id) or array of root elements
	 * @param delimiter {String} structure parts delimiter defaults to '.'
	 * @param skipEmpty {Boolean} should skip empty text values, defaults to true
	 * @param emptyToNull {Boolean} should empty values be converted to null?
	 * @param nodeCallback {Function} custom function to get node value
	 * @param useIdIfEmptyName {Boolean} if true value of id attribute of field will be used if name of field is empty
	 */
	function form2js(rootNode, delimiter, skipEmpty, emptyToNull, nodeCallback, useIdIfEmptyName)
	{
		if (typeof skipEmpty == 'undefined' || skipEmpty == null) skipEmpty = true;
		if (typeof emptyToNull == 'undefined' || emptyToNull == null) emptyToNull = true;
		if (typeof delimiter == 'undefined' || delimiter == null) delimiter = '.';
		if (arguments.length < 6) useIdIfEmptyName = false;

		rootNode = typeof rootNode == 'string' ? document.getElementById(rootNode) : rootNode;

		var formValues = [],
			currNode,
			i = 0;

		/* If rootNode is array - combine values */
		if (rootNode.constructor == Array || (typeof NodeList != 'undefined' && rootNode.constructor == NodeList))
		{
			while(currNode = rootNode[i++])
			{
				formValues = formValues.concat(getFormValues(currNode, nodeCallback, useIdIfEmptyName));
			}
		}
		else
		{
			formValues = getFormValues(rootNode, nodeCallback, useIdIfEmptyName);
		}

		return processNameValues(formValues, skipEmpty, emptyToNull, delimiter);
	}

	/**
	 * Processes collection of { name: 'name', value: 'value' } objects.
	 * @param nameValues
	 * @param skipEmpty if true skips elements with value == '' or value == null
	 * @param delimiter
	 */
	function processNameValues(nameValues, skipEmpty, emptyToNull, delimiter)
	{
		var result = {},
			arrays = {},
			i, j, k, l,
			value,
			nameParts,
			currResult,
			arrNameFull,
			arrName,
			arrIdx,
			namePart,
			name,
			_nameParts;

		for (i = 0; i < nameValues.length; i++)
		{
			value = nameValues[i].value;

			if (emptyToNull && (value === '')) { value = null; }
			if (skipEmpty && (value === '' || value === null)) continue;

			name = nameValues[i].name;
			if (typeof name === 'undefined') continue;

			_nameParts = name.split(delimiter);
			nameParts = [];
			currResult = result;
			arrNameFull = '';

			for(j = 0; j < _nameParts.length; j++)
			{
				namePart = _nameParts[j].split('][');
				if (namePart.length > 1)
				{
					for(k = 0; k < namePart.length; k++)
					{
						if (k == 0)
						{
							namePart[k] = namePart[k] + ']';
						}
						else if (k == namePart.length - 1)
						{
							namePart[k] = '[' + namePart[k];
						}
						else
						{
							namePart[k] = '[' + namePart[k] + ']';
						}

						arrIdx = namePart[k].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i);
						if (arrIdx)
						{
							for(l = 1; l < arrIdx.length; l++)
							{
								if (arrIdx[l]) nameParts.push(arrIdx[l]);
							}
						}
						else{
							nameParts.push(namePart[k]);
						}
					}
				}
				else
					nameParts = nameParts.concat(namePart);
			}

			for (j = 0; j < nameParts.length; j++)
			{
				namePart = nameParts[j];

				if (namePart.indexOf('[]') > -1 && j == nameParts.length - 1)
				{
					arrName = namePart.substr(0, namePart.indexOf('['));
					arrNameFull += arrName;

					if (!currResult[arrName]) currResult[arrName] = [];
					currResult[arrName].push(value);
				}
				else if (namePart.indexOf('[') > -1)
				{
					arrName = namePart.substr(0, namePart.indexOf('['));
					arrIdx = namePart.replace(/(^([a-z_]+)?\[)|(\]$)/gi, '');

					/* Unique array name */
					arrNameFull += '_' + arrName + '_' + arrIdx;

					/*
					 * Because arrIdx in field name can be not zero-based and step can be
					 * other than 1, we can't use them in target array directly.
					 * Instead we're making a hash where key is arrIdx and value is a reference to
					 * added array element
					 */

					if (!arrays[arrNameFull]) arrays[arrNameFull] = {};
					if (arrName != '' && !currResult[arrName]) currResult[arrName] = [];

					if (j == nameParts.length - 1)
					{
						if (arrName == '')
						{
							currResult.push(value);
							arrays[arrNameFull][arrIdx] = currResult[currResult.length - 1];
						}
						else
						{
							currResult[arrName].push(value);
							arrays[arrNameFull][arrIdx] = currResult[arrName][currResult[arrName].length - 1];
						}
					}
					else
					{
						if (!arrays[arrNameFull][arrIdx])
						{
							if ((/^[a-z_]+\[?/i).test(nameParts[j+1])) currResult[arrName].push({});
							else currResult[arrName].push([]);

							arrays[arrNameFull][arrIdx] = currResult[arrName][currResult[arrName].length - 1];
						}
					}

					currResult = arrays[arrNameFull][arrIdx];
				}
				else
				{
					arrNameFull += namePart;

					if (j < nameParts.length - 1) /* Not the last part of name - means object */
					{
						if (!currResult[namePart]) currResult[namePart] = {};
						currResult = currResult[namePart];
					}
					else
					{
						currResult[namePart] = value;
					}
				}
			}
		}

		return result;
	}

    function getFormValues(rootNode, nodeCallback, useIdIfEmptyName)
    {
        var result = extractNodeValues(rootNode, nodeCallback, useIdIfEmptyName);
        return result.length > 0 ? result : getSubFormValues(rootNode, nodeCallback, useIdIfEmptyName);
    }

    function getSubFormValues(rootNode, nodeCallback, useIdIfEmptyName)
	{
		var result = [],
			currentNode = rootNode.firstChild;
		
		while (currentNode)
		{
			result = result.concat(extractNodeValues(currentNode, nodeCallback, useIdIfEmptyName));
			currentNode = currentNode.nextSibling;
		}

		return result;
	}

    function extractNodeValues(node, nodeCallback, useIdIfEmptyName) {
        var callbackResult, fieldValue, result, fieldName = getFieldName(node, useIdIfEmptyName);

        callbackResult = nodeCallback && nodeCallback(node);

        if (callbackResult && callbackResult.name) {
            result = [callbackResult];
        }
        else if (fieldName != '' && node.nodeName.match(/INPUT|TEXTAREA/i)) {
            fieldValue = getFieldValue(node);   
	        if (fieldValue == null && node.type == 'radio')
                result = [];
            else
                result = [ { name: fieldName, value: fieldValue} ];
        }
        else if (fieldName != '' && node.nodeName.match(/SELECT/i)) {
	        fieldValue = getFieldValue(node);
	        result = [ { name: fieldName.replace(/\[\]$/, ''), value: fieldValue } ];
        }
        else {
            result = getSubFormValues(node, nodeCallback, useIdIfEmptyName);
        }

        return result;
    }

	function getFieldName(node, useIdIfEmptyName)
	{
		if (node.name && node.name != '') return node.name;
		else if (useIdIfEmptyName && node.id && node.id != '') return node.id;
		else return '';
	}


	function getFieldValue(fieldNode)
	{
		if (fieldNode.disabled) return null;
		
		switch (fieldNode.nodeName) {
			case 'INPUT':
			case 'TEXTAREA':
				switch (fieldNode.type.toLowerCase()) {
					case 'radio':
					case 'checkbox':
						if (fieldNode.checked) return fieldNode.value;
						break;

					case 'button':
					case 'reset':
					case 'submit':
					case 'image':
						return '';
						break;

					default:
						return fieldNode.value;
						break;
				}
				break;

			case 'SELECT':
				return getSelectedOptionValue(fieldNode);
				break;

			default:
				break;
		}

		return null;
	}

	function getSelectedOptionValue(selectNode)
	{
		var multiple = selectNode.multiple,
			result = [],
			options,
			i, l;

		if (!multiple) return selectNode.value;

		for (options = selectNode.getElementsByTagName('option'), i = 0, l = options.length; i < l; i++)
		{
			if (options[i].selected) result.push(options[i].value);
		}

		return result;
	}

	return form2js;

})();

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 19.09.11
 * Time: 23:40
 */

var js2form = (function()
{
	"use strict";

	var _subArrayRegexp = /^\[\d+?\]/,
			_subObjectRegexp = /^[a-zA-Z_][a-zA-Z_0-9]+/,
			_arrayItemRegexp = /\[[0-9]+?\]$/,
			_lastIndexedArrayRegexp = /(.*)(\[)([0-9]*)(\])$/,
			_arrayOfArraysRegexp = /\[([0-9]+)\]\[([0-9]+)\]/g,
			_inputOrTextareaRegexp = /INPUT|TEXTAREA/i;

	/**
	 *
	 * @param rootNode
	 * @param data
	 * @param delimiter
	 * @param nodeCallback
	 * @param useIdIfEmptyName
	 * @param shouldClean should we empty out fields first?
	 */
	function js2form(rootNode, data, delimiter, nodeCallback, useIdIfEmptyName, shouldClean)
	{
		if (arguments.length < 3) delimiter = '.';
		if (arguments.length < 4) nodeCallback = null;
		if (arguments.length < 5) useIdIfEmptyName = false;
		if (arguments.length < 6) shouldClean = true;

		var fieldValues,
				formFieldsByName;

		fieldValues = object2array(data);
		formFieldsByName = getFields(rootNode, useIdIfEmptyName, delimiter, {}, shouldClean);

		for (var i = 0; i < fieldValues.length; i++)
		{
			var fieldName = fieldValues[i].name,
					fieldValue = fieldValues[i].value;

			if (typeof formFieldsByName[fieldName] != 'undefined')
			{
				setValue(formFieldsByName[fieldName], fieldValue);
			}
			else if (typeof formFieldsByName[fieldName.replace(_arrayItemRegexp, '[]')] != 'undefined')
			{
				setValue(formFieldsByName[fieldName.replace(_arrayItemRegexp, '[]')], fieldValue);
			}
		}
	}

	function setValue(field, value)
	{
		var children, i, l;

		if (field instanceof Array)
		{
			for (i = 0; i < field.length; i++)
			{
        if (field[i].type == "radio"){
          field[i].checked = false
          if (typeof value != "undefined" && value !== null  && field[i].value == value || field[i].value == value.toString() )
            field[i].checked = true;
        }
        else{
          if (value == 'on' || value == 'true' || value == '1')
            field[i].checked = true;
          else
            field[i].checked = false
        }
      }
		}
		else if (_inputOrTextareaRegexp.test(field.nodeName))
		{
			if (value)
				field.value = value;
		}
		else if (/SELECT/i.test(field.nodeName))
		{
			children = field.getElementsByTagName('option');
			for (i = 0,l = children.length; i < l; i++)
			{
				if (children[i].value == value)
				{
					children[i].selected = true;
					if (field.multiple) break;
				}
				else if (!field.multiple)
				{
					children[i].selected = false;
				}
			}
		}
	}

	function getFields(rootNode, useIdIfEmptyName, delimiter, arrayIndexes, shouldClean)
	{
		if (arguments.length < 4) arrayIndexes = {};

		var result = {},
			currNode = rootNode.firstChild,
			name, nameNormalized,
			subFieldName,
			i, j, l,
			options;

		while (currNode)
		{
			name = '';

			if (currNode.name && currNode.name != '')
			{
				name = currNode.name;
			}
			else if (useIdIfEmptyName && currNode.id && currNode.id != '')
			{
				name = currNode.id;
			}

			if (name == '')
			{
				var subFields = getFields(currNode, useIdIfEmptyName, delimiter, arrayIndexes, shouldClean);
				for (subFieldName in subFields)
				{
					if (typeof result[subFieldName] == 'undefined')
					{
						result[subFieldName] = subFields[subFieldName];
					}
					else
					{
						for (i = 0; i < subFields[subFieldName].length; i++)
						{
							result[subFieldName].push(subFields[subFieldName][i]);
						}
					}
				}
			}
			else
			{
				if (/SELECT/i.test(currNode.nodeName))
				{
					for(j = 0, options = currNode.getElementsByTagName('option'), l = options.length; j < l; j++)
					{
						if (shouldClean)
						{
							options[j].selected = false;
						}

						nameNormalized = normalizeName(name, delimiter, arrayIndexes);
						result[nameNormalized] = currNode;
					}
				}
				else if (/INPUT/i.test(currNode.nodeName) && /CHECKBOX|RADIO/i.test(currNode.type))
				{
					if(shouldClean)
					{
						currNode.checked = false;
					}

					nameNormalized = normalizeName(name, delimiter, arrayIndexes);
					nameNormalized = nameNormalized.replace(_arrayItemRegexp, '[]');
					if (!result[nameNormalized]) result[nameNormalized] = [];
					result[nameNormalized].push(currNode);
				}
				else
				{
					if (shouldClean)
					{
						currNode.value = '';
					}

					nameNormalized = normalizeName(name, delimiter, arrayIndexes);
					result[nameNormalized] = currNode;
				}
			}

			currNode = currNode.nextSibling;
		}

		return result;
	}

	/**
	 * Normalizes names of arrays, puts correct indexes (consecutive and ordered by element appearance in HTML)
	 * @param name
	 * @param delimiter
	 * @param arrayIndexes
	 */
	function normalizeName(name, delimiter, arrayIndexes)
	{
		var nameChunksNormalized = [],
				nameChunks = name.split(delimiter),
				currChunk,
				nameMatches,
				nameNormalized,
				currIndex,
				newIndex,
				i;

		name = name.replace(_arrayOfArraysRegexp, '[$1].[$2]');
		for (i = 0; i < nameChunks.length; i++)
		{
			currChunk = nameChunks[i];
			nameChunksNormalized.push(currChunk);
			nameMatches = currChunk.match(_lastIndexedArrayRegexp);
			if (nameMatches != null)
			{
				nameNormalized = nameChunksNormalized.join(delimiter);
				currIndex = nameNormalized.replace(_lastIndexedArrayRegexp, '$3');
				nameNormalized = nameNormalized.replace(_lastIndexedArrayRegexp, '$1');

				if (typeof (arrayIndexes[nameNormalized]) == 'undefined')
				{
					arrayIndexes[nameNormalized] = {
						lastIndex: -1,
						indexes: {}
					};
				}

				if (currIndex == '' || typeof arrayIndexes[nameNormalized].indexes[currIndex] == 'undefined')
				{
					arrayIndexes[nameNormalized].lastIndex++;
					arrayIndexes[nameNormalized].indexes[currIndex] = arrayIndexes[nameNormalized].lastIndex;
				}

				newIndex = arrayIndexes[nameNormalized].indexes[currIndex];
				nameChunksNormalized[nameChunksNormalized.length - 1] = currChunk.replace(_lastIndexedArrayRegexp, '$1$2' + newIndex + '$4');
			}
		}

		nameNormalized = nameChunksNormalized.join(delimiter);
		nameNormalized = nameNormalized.replace('].[', '][');
		return nameNormalized;
	}

	function object2array(obj, lvl)
	{
		var result = [], i, name;

		if (arguments.length == 1) lvl = 0;

        if (obj == null)
        {
            result = [{ name: "", value: null }];
        }
        else if (typeof obj == 'string' || typeof obj == 'number' || typeof obj == 'date' || typeof obj == 'boolean')
        {
            result = [
                { name: "", value : obj }
            ];
        }
        else if (obj instanceof Array)
        {
            for (i = 0; i < obj.length; i++)
            {
                name = "[" + i + "]";
                result = result.concat(getSubValues(obj[i], name, lvl + 1));
            }
        }
        else
        {
            for (i in obj)
            {
                name = i;
                result = result.concat(getSubValues(obj[i], name, lvl + 1));
            }
        }

		return result;
    }

	function getSubValues(subObj, name, lvl)
	{
		var itemName;
		var result = [], tempResult = object2array(subObj, lvl + 1), i, tempItem;

		for (i = 0; i < tempResult.length; i++)
		{
			itemName = name;
			if (_subArrayRegexp.test(tempResult[i].name))
			{
				itemName += tempResult[i].name;
			}
			else if (_subObjectRegexp.test(tempResult[i].name))
			{
				itemName += '.' + tempResult[i].name;
			}

			tempItem = { name: itemName, value: tempResult[i].value };
			result.push(tempItem);
		}

		return result;
	}

	return js2form;

})();

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 29.06.11
 * Time: 20:09
 */

(function($){

	/**
	 * jQuery wrapper for form2object()
	 * Extracts data from child inputs into javascript object
	 */
	$.fn.toObject = function(options)
	{
		var result = [],
			settings = {
				mode: 'first', // what to convert: 'all' or 'first' matched node
				delimiter: ".",
				skipEmpty: true,
				nodeCallback: null,
				useIdIfEmptyName: false
			};

		if (options)
		{
			$.extend(settings, options);
		}

		switch(settings.mode)
		{
			case 'first':
				return form2js(this.get(0), settings.delimiter, settings.skipEmpty, settings.nodeCallback, settings.useIdIfEmptyName);
				break;
			case 'all':
				this.each(function(){
					result.push(form2js(this, settings.delimiter, settings.skipEmpty, settings.nodeCallback, settings.useIdIfEmptyName));
				});
				return result;
				break;
			case 'combine':
				return form2js(Array.prototype.slice.call(this), settings.delimiter, settings.skipEmpty, settings.nodeCallback, settings.useIdIfEmptyName);
				break;
		}
	}

})(jQuery);
/*
Copyright (c) 2010 Ryan Schuft (ryan.schuft@gmail.com)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

/*
  This code is based in part on the work done in Ruby to support
  infection as part of Ruby on Rails in the ActiveSupport's Inflector
  and Inflections classes.  It was initally ported to Javascript by
  Ryan Schuft (ryan.schuft@gmail.com) in 2007.

  The code is available at http://code.google.com/p/inflection-js/

  The basic usage is:
    1. Include this script on your web page.
    2. Call functions on any String object in Javascript

  Currently implemented functions:

    String.pluralize(plural) == String
      renders a singular English language noun into its plural form
      normal results can be overridden by passing in an alternative

    String.singularize(singular) == String
      renders a plural English language noun into its singular form
      normal results can be overridden by passing in an alterative

    String.camelize(lowFirstLetter) == String
      renders a lower case underscored word into camel case
      the first letter of the result will be upper case unless you pass true
      also translates "/" into "::" (underscore does the opposite)

    String.underscore() == String
      renders a camel cased word into words seperated by underscores
      also translates "::" back into "/" (camelize does the opposite)

    String.humanize(lowFirstLetter) == String
      renders a lower case and underscored word into human readable form
      defaults to making the first letter capitalized unless you pass true

    String.capitalize() == String
      renders all characters to lower case and then makes the first upper

    String.dasherize() == String
      renders all underbars and spaces as dashes

    String.titleize() == String
      renders words into title casing (as for book titles)

    String.demodulize() == String
      renders class names that are prepended by modules into just the class

    String.tableize() == String
      renders camel cased singular words into their underscored plural form

    String.classify() == String
      renders an underscored plural word into its camel cased singular form

    String.foreign_key(dropIdUbar) == String
      renders a class name (camel cased singular noun) into a foreign key
      defaults to seperating the class from the id with an underbar unless
      you pass true

    String.ordinalize() == String
      renders all numbers found in the string into their sequence like "22nd"
*/

/*
  This sets up a container for some constants in its own namespace
  We use the window (if available) to enable dynamic loading of this script
  Window won't necessarily exist for non-browsers.
*/
if (window && !window.InflectionJS)
{
    window.InflectionJS = null;
}

/*
  This sets up some constants for later use
  This should use the window namespace variable if available
*/
InflectionJS =
{
    /*
      This is a list of nouns that use the same form for both singular and plural.
      This list should remain entirely in lower case to correctly match Strings.
    */
    uncountable_words: [
        'equipment', 'information', 'rice', 'money', 'species', 'series',
        'fish', 'sheep', 'moose', 'deer', 'news'
    ],

    /*
      These rules translate from the singular form of a noun to its plural form.
    */
    plural_rules: [
        [new RegExp('(m)an$', 'gi'),                 '$1en'],
        [new RegExp('(pe)rson$', 'gi'),              '$1ople'],
        [new RegExp('(child)$', 'gi'),               '$1ren'],
        [new RegExp('^(ox)$', 'gi'),                 '$1en'],
        [new RegExp('(ax|test)is$', 'gi'),           '$1es'],
        [new RegExp('(octop|vir)us$', 'gi'),         '$1i'],
        [new RegExp('(alias|status)$', 'gi'),        '$1es'],
        [new RegExp('(bu)s$', 'gi'),                 '$1ses'],
        [new RegExp('(buffal|tomat|potat)o$', 'gi'), '$1oes'],
        [new RegExp('([ti])um$', 'gi'),              '$1a'],
        [new RegExp('sis$', 'gi'),                   'ses'],
        [new RegExp('(?:([^f])fe|([lr])f)$', 'gi'),  '$1$2ves'],
        [new RegExp('(hive)$', 'gi'),                '$1s'],
        [new RegExp('([^aeiouy]|qu)y$', 'gi'),       '$1ies'],
        [new RegExp('(x|ch|ss|sh)$', 'gi'),          '$1es'],
        [new RegExp('(matr|vert|ind)ix|ex$', 'gi'),  '$1ices'],
        [new RegExp('([m|l])ouse$', 'gi'),           '$1ice'],
        [new RegExp('(quiz)$', 'gi'),                '$1zes'],
        [new RegExp('s$', 'gi'),                     's'],
        [new RegExp('$', 'gi'),                      's']
    ],

    /*
      These rules translate from the plural form of a noun to its singular form.
    */
    singular_rules: [
        [new RegExp('(m)en$', 'gi'),                                                       '$1an'],
        [new RegExp('(pe)ople$', 'gi'),                                                    '$1rson'],
        [new RegExp('(child)ren$', 'gi'),                                                  '$1'],
        [new RegExp('([ti])a$', 'gi'),                                                     '$1um'],
        [new RegExp('((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$','gi'), '$1$2sis'],
        [new RegExp('(hive)s$', 'gi'),                                                     '$1'],
        [new RegExp('(tive)s$', 'gi'),                                                     '$1'],
        [new RegExp('(curve)s$', 'gi'),                                                    '$1'],
        [new RegExp('([lr])ves$', 'gi'),                                                   '$1f'],
        [new RegExp('([^fo])ves$', 'gi'),                                                  '$1fe'],
        [new RegExp('([^aeiouy]|qu)ies$', 'gi'),                                           '$1y'],
        [new RegExp('(s)eries$', 'gi'),                                                    '$1eries'],
        [new RegExp('(m)ovies$', 'gi'),                                                    '$1ovie'],
        [new RegExp('(x|ch|ss|sh)es$', 'gi'),                                              '$1'],
        [new RegExp('([m|l])ice$', 'gi'),                                                  '$1ouse'],
        [new RegExp('(bus)es$', 'gi'),                                                     '$1'],
        [new RegExp('(o)es$', 'gi'),                                                       '$1'],
        [new RegExp('(shoe)s$', 'gi'),                                                     '$1'],
        [new RegExp('(cris|ax|test)es$', 'gi'),                                            '$1is'],
        [new RegExp('(octop|vir)i$', 'gi'),                                                '$1us'],
        [new RegExp('(alias|status)es$', 'gi'),                                            '$1'],
        [new RegExp('^(ox)en', 'gi'),                                                      '$1'],
        [new RegExp('(vert|ind)ices$', 'gi'),                                              '$1ex'],
        [new RegExp('(matr)ices$', 'gi'),                                                  '$1ix'],
        [new RegExp('(quiz)zes$', 'gi'),                                                   '$1'],
        [new RegExp('s$', 'gi'),                                                           '']
    ],

    /*
      This is a list of words that should not be capitalized for title case
    */
    non_titlecased_words: [
        'and', 'or', 'nor', 'a', 'an', 'the', 'so', 'but', 'to', 'of', 'at',
        'by', 'from', 'into', 'on', 'onto', 'off', 'out', 'in', 'over',
        'with', 'for'
    ],

    /*
      These are regular expressions used for converting between String formats
    */
    id_suffix: new RegExp('(_ids|_id)$', 'g'),
    underbar: new RegExp('_', 'g'),
    space_or_underbar: new RegExp('[\ _]', 'g'),
    uppercase: new RegExp('([A-Z])', 'g'),
    underbar_prefix: new RegExp('^_'),
    
    /*
      This is a helper method that applies rules based replacement to a String
      Signature:
        InflectionJS.apply_rules(str, rules, skip, override) == String
      Arguments:
        str - String - String to modify and return based on the passed rules
        rules - Array: [RegExp, String] - Regexp to match paired with String to use for replacement
        skip - Array: [String] - Strings to skip if they match
        override - String (optional) - String to return as though this method succeeded (used to conform to APIs)
      Returns:
        String - passed String modified by passed rules
      Examples:
        InflectionJS.apply_rules("cows", InflectionJs.singular_rules) === 'cow'
    */
    apply_rules: function(str, rules, skip, override)
    {
        if (override)
        {
            str = override;
        }
        else
        {
            var ignore = (skip.indexOf(str.toLowerCase()) > -1);
            if (!ignore)
            {
                for (var x = 0; x < rules.length; x++)
                {
                    if (str.match(rules[x][0]))
                    {
                        str = str.replace(rules[x][0], rules[x][1]);
                        break;
                    }
                }
            }
        }
        return str;
    }
};

/*
  This lets us detect if an Array contains a given element
  Signature:
    Array.indexOf(item, fromIndex, compareFunc) == Integer
  Arguments:
    item - Object - object to locate in the Array
    fromIndex - Integer (optional) - starts checking from this position in the Array
    compareFunc - Function (optional) - function used to compare Array item vs passed item
  Returns:
    Integer - index position in the Array of the passed item
  Examples:
    ['hi','there'].indexOf("guys") === -1
    ['hi','there'].indexOf("hi") === 0
*/
if (!Array.prototype.indexOf)
{
    Array.prototype.indexOf = function(item, fromIndex, compareFunc)
    {
        if (!fromIndex)
        {
            fromIndex = -1;
        }
        var index = -1;
        for (var i = fromIndex; i < this.length; i++)
        {
            if (this[i] === item || compareFunc && compareFunc(this[i], item))
            {
                index = i;
                break;
            }
        }
        return index;
    };
}

/*
  You can override this list for all Strings or just one depending on if you
  set the new values on prototype or on a given String instance.
*/
if (!String.prototype._uncountable_words)
{
    String.prototype._uncountable_words = InflectionJS.uncountable_words;
}

/*
  You can override this list for all Strings or just one depending on if you
  set the new values on prototype or on a given String instance.
*/
if (!String.prototype._plural_rules)
{
    String.prototype._plural_rules = InflectionJS.plural_rules;
}

/*
  You can override this list for all Strings or just one depending on if you
  set the new values on prototype or on a given String instance.
*/
if (!String.prototype._singular_rules)
{
    String.prototype._singular_rules = InflectionJS.singular_rules;
}

/*
  You can override this list for all Strings or just one depending on if you
  set the new values on prototype or on a given String instance.
*/
if (!String.prototype._non_titlecased_words)
{
    String.prototype._non_titlecased_words = InflectionJS.non_titlecased_words;
}

/*
  This function adds plurilization support to every String object
    Signature:
      String.pluralize(plural) == String
    Arguments:
      plural - String (optional) - overrides normal output with said String
    Returns:
      String - singular English language nouns are returned in plural form
    Examples:
      "person".pluralize() == "people"
      "octopus".pluralize() == "octopi"
      "Hat".pluralize() == "Hats"
      "person".pluralize("guys") == "guys"
*/
if (!String.prototype.pluralize)
{
    String.prototype.pluralize = function(plural)
    {
        return InflectionJS.apply_rules(
            this,
            this._plural_rules,
            this._uncountable_words,
            plural
        );
    };
}

/*
  This function adds singularization support to every String object
    Signature:
      String.singularize(singular) == String
    Arguments:
      singular - String (optional) - overrides normal output with said String
    Returns:
      String - plural English language nouns are returned in singular form
    Examples:
      "people".singularize() == "person"
      "octopi".singularize() == "octopus"
      "Hats".singularize() == "Hat"
      "guys".singularize("person") == "person"
*/
if (!String.prototype.singularize)
{
    String.prototype.singularize = function(singular)
    {
        return InflectionJS.apply_rules(
            this,
            this._singular_rules,
            this._uncountable_words,
            singular
        );
    };
}

/*
  This function adds camelization support to every String object
    Signature:
      String.camelize(lowFirstLetter) == String
    Arguments:
      lowFirstLetter - boolean (optional) - default is to capitalize the first
        letter of the results... passing true will lowercase it
    Returns:
      String - lower case underscored words will be returned in camel case
        additionally '/' is translated to '::'
    Examples:
      "message_properties".camelize() == "MessageProperties"
      "message_properties".camelize(true) == "messageProperties"
*/
if (!String.prototype.camelize)
{
     String.prototype.camelize = function(lowFirstLetter)
     {
        var str = this.toLowerCase();
        var str_path = str.split('/');
        for (var i = 0; i < str_path.length; i++)
        {
            var str_arr = str_path[i].split('_');
            var initX = ((lowFirstLetter && i + 1 === str_path.length) ? (1) : (0));
            for (var x = initX; x < str_arr.length; x++)
            {
                str_arr[x] = str_arr[x].charAt(0).toUpperCase() + str_arr[x].substring(1);
            }
            str_path[i] = str_arr.join('');
        }
        str = str_path.join('::');
        return str;
    };
}

/*
  This function adds underscore support to every String object
    Signature:
      String.underscore() == String
    Arguments:
      N/A
    Returns:
      String - camel cased words are returned as lower cased and underscored
        additionally '::' is translated to '/'
    Examples:
      "MessageProperties".camelize() == "message_properties"
      "messageProperties".underscore() == "message_properties"
*/
if (!String.prototype.underscore)
{
     String.prototype.underscore = function()
     {
        var str = this;
        var str_path = str.split('::');
        for (var i = 0; i < str_path.length; i++)
        {
            str_path[i] = str_path[i].replace(InflectionJS.uppercase, '_$1');
            str_path[i] = str_path[i].replace(InflectionJS.underbar_prefix, '');
        }
        str = str_path.join('/').toLowerCase();
        return str;
    };
}

/*
  This function adds humanize support to every String object
    Signature:
      String.humanize(lowFirstLetter) == String
    Arguments:
      lowFirstLetter - boolean (optional) - default is to capitalize the first
        letter of the results... passing true will lowercase it
    Returns:
      String - lower case underscored words will be returned in humanized form
    Examples:
      "message_properties".humanize() == "Message properties"
      "message_properties".humanize(true) == "message properties"
*/
if (!String.prototype.humanize)
{
    String.prototype.humanize = function(lowFirstLetter)
    {
        var str = this.toLowerCase();
        str = str.replace(InflectionJS.id_suffix, '');
        str = str.replace(InflectionJS.underbar, ' ');
        if (!lowFirstLetter)
        {
            str = str.capitalize();
        }
        return str;
    };
}

/*
  This function adds capitalization support to every String object
    Signature:
      String.capitalize() == String
    Arguments:
      N/A
    Returns:
      String - all characters will be lower case and the first will be upper
    Examples:
      "message_properties".capitalize() == "Message_properties"
      "message properties".capitalize() == "Message properties"
*/
if (!String.prototype.capitalize)
{
    String.prototype.capitalize = function()
    {
        var str = this.toLowerCase();
        str = str.substring(0, 1).toUpperCase() + str.substring(1);
        return str;
    };
}

/*
  This function adds dasherization support to every String object
    Signature:
      String.dasherize() == String
    Arguments:
      N/A
    Returns:
      String - replaces all spaces or underbars with dashes
    Examples:
      "message_properties".capitalize() == "message-properties"
      "Message Properties".capitalize() == "Message-Properties"
*/
if (!String.prototype.dasherize)
{
    String.prototype.dasherize = function()
    {
        var str = this;
        str = str.replace(InflectionJS.space_or_underbar, '-');
        return str;
    };
}

/*
  This function adds titleize support to every String object
    Signature:
      String.titleize() == String
    Arguments:
      N/A
    Returns:
      String - capitalizes words as you would for a book title
    Examples:
      "message_properties".titleize() == "Message Properties"
      "message properties to keep".titleize() == "Message Properties to Keep"
*/
if (!String.prototype.titleize)
{
    String.prototype.titleize = function()
    {
        var str = this.toLowerCase();
        str = str.replace(InflectionJS.underbar, ' ');
        var str_arr = str.split(' ');
        for (var x = 0; x < str_arr.length; x++)
        {
            var d = str_arr[x].split('-');
            for (var i = 0; i < d.length; i++)
            {
                if (this._non_titlecased_words.indexOf(d[i].toLowerCase()) < 0)
                {
                    d[i] = d[i].capitalize();
                }
            }
            str_arr[x] = d.join('-');
        }
        str = str_arr.join(' ');
        str = str.substring(0, 1).toUpperCase() + str.substring(1);
        return str;
    };
}

/*
  This function adds demodulize support to every String object
    Signature:
      String.demodulize() == String
    Arguments:
      N/A
    Returns:
      String - removes module names leaving only class names (Ruby style)
    Examples:
      "Message::Bus::Properties".demodulize() == "Properties"
*/
if (!String.prototype.demodulize)
{
    String.prototype.demodulize = function()
    {
        var str = this;
        var str_arr = str.split('::');
        str = str_arr[str_arr.length - 1];
        return str;
    };
}

/*
  This function adds tableize support to every String object
    Signature:
      String.tableize() == String
    Arguments:
      N/A
    Returns:
      String - renders camel cased words into their underscored plural form
    Examples:
      "MessageBusProperty".tableize() == "message_bus_properties"
*/
if (!String.prototype.tableize)
{
    String.prototype.tableize = function()
    {
        var str = this;
        str = str.underscore().pluralize();
        return str;
    };
}

/*
  This function adds classification support to every String object
    Signature:
      String.classify() == String
    Arguments:
      N/A
    Returns:
      String - underscored plural nouns become the camel cased singular form
    Examples:
      "message_bus_properties".classify() == "MessageBusProperty"
*/
if (!String.prototype.classify)
{
    String.prototype.classify = function()
    {
        var str = this;
        str = str.camelize().singularize();
        return str;
    };
}

/*
  This function adds foreign key support to every String object
    Signature:
      String.foreign_key(dropIdUbar) == String
    Arguments:
      dropIdUbar - boolean (optional) - default is to seperate id with an
        underbar at the end of the class name, you can pass true to skip it
    Returns:
      String - camel cased singular class names become underscored with id
    Examples:
      "MessageBusProperty".foreign_key() == "message_bus_property_id"
      "MessageBusProperty".foreign_key(true) == "message_bus_propertyid"
*/
if (!String.prototype.foreign_key)
{
    String.prototype.foreign_key = function(dropIdUbar)
    {
        var str = this;
        str = str.demodulize().underscore() + ((dropIdUbar) ? ('') : ('_')) + 'id';
        return str;
    };
}

/*
  This function adds ordinalize support to every String object
    Signature:
      String.ordinalize() == String
    Arguments:
      N/A
    Returns:
      String - renders all found numbers their sequence like "22nd"
    Examples:
      "the 1 pitch".ordinalize() == "the 1st pitch"
*/
if (!String.prototype.ordinalize)
{
    String.prototype.ordinalize = function()
    {
        var str = this;
        var str_arr = str.split(' ');
        for (var x = 0; x < str_arr.length; x++)
        {
            var i = parseInt(str_arr[x]);
            if (i === NaN)
            {
                var ltd = str_arr[x].substring(str_arr[x].length - 2);
                var ld = str_arr[x].substring(str_arr[x].length - 1);
                var suf = "th";
                if (ltd != "11" && ltd != "12" && ltd != "13")
                {
                    if (ld === "1")
                    {
                        suf = "st";
                    }
                    else if (ld === "2")
                    {
                        suf = "nd";
                    }
                    else if (ld === "3")
                    {
                        suf = "rd";
                    }
                }
                str_arr[x] += suf;
            }
        }
        str = str_arr.join(' ');
        return str;
    };
}

(function ($) {
		
		var daysInWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
		var shortMonthsInYear = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
		var longMonthsInYear = ["January", "February", "March", "April", "May", "June", 
														"July", "August", "September", "October", "November", "December"];
		var shortMonthsToNumber = [];
		shortMonthsToNumber["Jan"] = "01";
		shortMonthsToNumber["Feb"] = "02";
		shortMonthsToNumber["Mar"] = "03";
		shortMonthsToNumber["Apr"] = "04";
		shortMonthsToNumber["May"] = "05";
		shortMonthsToNumber["Jun"] = "06";
		shortMonthsToNumber["Jul"] = "07";
		shortMonthsToNumber["Aug"] = "08";
		shortMonthsToNumber["Sep"] = "09";
		shortMonthsToNumber["Oct"] = "10";
		shortMonthsToNumber["Nov"] = "11";
		shortMonthsToNumber["Dec"] = "12";
	
    $.format = (function () {
        function strDay(value) {
 						return daysInWeek[parseInt(value, 10)] || value;
        }

        function strMonth(value) {
						var monthArrayIndex = parseInt(value, 10) - 1;
 						return shortMonthsInYear[monthArrayIndex] || value;
        }

        function strLongMonth(value) {
					var monthArrayIndex = parseInt(value, 10) - 1;
					return longMonthsInYear[monthArrayIndex] || value;					
        }

        var parseMonth = function (value) {
					return shortMonthsToNumber[value] || value;
        };

        var parseTime = function (value) {
                var retValue = value;
                var millis = "";
                if (retValue.indexOf(".") !== -1) {
                    var delimited = retValue.split('.');
                    retValue = delimited[0];
                    millis = delimited[1];
                }

                var values3 = retValue.split(":");

                if (values3.length === 3) {
                    hour = values3[0];
                    minute = values3[1];
                    second = values3[2];

                    return {
                        time: retValue,
                        hour: hour,
                        minute: minute,
                        second: second,
                        millis: millis
                    };
                } else {
                    return {
                        time: "",
                        hour: "",
                        minute: "",
                        second: "",
                        millis: ""
                    };
                }
            };

        return {
            date: function (value, format) {
                /* 
					value = new java.util.Date()
                 	2009-12-18 10:54:50.546 
				*/
                try {
                    var date = null;
                    var year = null;
                    var month = null;
                    var dayOfMonth = null;
                    var dayOfWeek = null;
                    var time = null;
                    if (typeof value.getFullYear === "function") {
                        year = value.getFullYear();
                        month = value.getMonth() + 1;
                        dayOfMonth = value.getDate();
                        dayOfWeek = value.getDay();
                        time = parseTime(value.toTimeString());
										} else if (value.search(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[-+]?\d{2}:\d{2}/) != -1) { /* 2009-04-19T16:11:05+02:00 */
                        var values = value.split(/[T\+-]/);
                        year = values[0];
                        month = values[1];
                        dayOfMonth = values[2];
                        time = parseTime(values[3].split(".")[0]);
                        date = new Date(year, month - 1, dayOfMonth);
                        dayOfWeek = date.getDay();
                    } else {
                        var values = value.split(" ");
                        switch (values.length) {
                        case 6:
                            /* Wed Jan 13 10:43:41 CET 2010 */
                            year = values[5];
                            month = parseMonth(values[1]);
                            dayOfMonth = values[2];
                            time = parseTime(values[3]);
                            date = new Date(year, month - 1, dayOfMonth);
                            dayOfWeek = date.getDay();
                            break;
                        case 2:
                            /* 2009-12-18 10:54:50.546 */
                            var values2 = values[0].split("-");
                            year = values2[0];
                            month = values2[1];
                            dayOfMonth = values2[2];
                            time = parseTime(values[1]);
                            date = new Date(year, month - 1, dayOfMonth);
                            dayOfWeek = date.getDay();
                            break;
                        case 7:
                            /* Tue Mar 01 2011 12:01:42 GMT-0800 (PST) */
                        case 9:
                            /*added by Larry, for Fri Apr 08 2011 00:00:00 GMT+0800 (China Standard Time) */
                        case 10:
                            /* added by Larry, for Fri Apr 08 2011 00:00:00 GMT+0200 (W. Europe Daylight Time) */
                            year = values[3];
                            month = parseMonth(values[1]);
                            dayOfMonth = values[2];
                            time = parseTime(values[4]);
                            date = new Date(year, month - 1, dayOfMonth);
                            dayOfWeek = date.getDay();
                            break;
                        default:
                            return value;
                        }
                    }

                    var pattern = "";
                    var retValue = "";
                    /*
						Issue 1 - variable scope issue in format.date 
                    	Thanks jakemonO
					*/
                    for (var i = 0; i < format.length; i++) {
                        var currentPattern = format.charAt(i);
                        pattern += currentPattern;
                        switch (pattern) {
                        case "ddd":
                            retValue += strDay(dayOfWeek);
                            pattern = "";
                            break;
                        case "dd":
                            if (format.charAt(i + 1) == "d") {
                                break;
                            }
                            if (String(dayOfMonth).length === 1) {
                                dayOfMonth = '0' + dayOfMonth;
                            }
                            retValue += dayOfMonth;
                            pattern = "";
                            break;
                        case "MMMM":
                            retValue += strLongMonth(month);
                            pattern = "";
                            break;
                        case "MMM":
                            if (format.charAt(i + 1) === "M") {
                                break;
                            }
                            retValue += strMonth(month);
                            pattern = "";
                            break;
                        case "MM":
                            if (format.charAt(i + 1) == "M") {
                                break;
                            }
                            if (String(month).length === 1) {
                                month = '0' + month;
                            }
                            retValue += month;
                            pattern = "";
                            break;
                        case "yyyy":
                            retValue += year;
                            pattern = "";
                            break;
                        case "HH":
                            retValue += time.hour;
                            pattern = "";
                            break;
                        case "hh":
                            /* time.hour is "00" as string == is used instead of === */
                            retValue += (time.hour == 0 ? 12 : time.hour < 13 ? time.hour : time.hour - 12);
                            pattern = "";
                            break;
                        case "mm":
                            retValue += time.minute;
                            pattern = "";
                            break;
                        case "ss":
                            /* ensure only seconds are added to the return string */
                            retValue += time.second.substring(0, 2);
                            pattern = "";
                            break;
                        case "SSS":
                            retValue += time.millis.substring(0, 3);
                            pattern = "";
                            break;
                        case "a":
                            retValue += time.hour >= 12 ? "PM" : "AM";
                            pattern = "";
                            break;
                        case " ":
                            retValue += currentPattern;
                            pattern = "";
                            break;
                        case "/":
                            retValue += currentPattern;
                            pattern = "";
                            break;
                        case ":":
                            retValue += currentPattern;
                            pattern = "";
                            break;
                        default:
                            if (pattern.length === 2 && pattern.indexOf("y") !== 0 && pattern != "SS") {
                                retValue += pattern.substring(0, 1);
                                pattern = pattern.substring(1, 2);
                            } else if ((pattern.length === 3 && pattern.indexOf("yyy") === -1)) {
                                pattern = "";
                            }
                        }
                    }
                    return retValue;
                } catch (e) {
                    console.log(e);
                    return value;
                }
            }
        };
    }());
}(jQuery));


$(document).ready(function () {
    $(".shortDateFormat").each(function (idx, elem) {
        if ($(elem).is(":input")) {
            $(elem).val($.format.date($(elem).val(), "dd/MM/yyyy"));
        } else {
            $(elem).text($.format.date($(elem).text(), "dd/MM/yyyy"));
        }
    });
    $(".longDateFormat").each(function (idx, elem) {
        if ($(elem).is(":input")) {
            $(elem).val($.format.date($(elem).val(), "dd/MM/yyyy hh:mm:ss"));
        } else {
            $(elem).text($.format.date($(elem).text(), "dd/MM/yyyy hh:mm:ss"));
        }
    });
});

jQuery.fn.table2CSV = function(options) {
    var options = jQuery.extend({
        separator: ',',
        header: [],
        delivery: 'popup' // popup, value
    },
    options);

    var csvData = [];
    var headerArr = [];
    var el = this;

    //header
    var numCols = options.header.length;
    var tmpRow = []; // construct header avalible array

    if (numCols > 0) {
        for (var i = 0; i < numCols; i++) {
            tmpRow[tmpRow.length] = formatData(options.header[i]);
        }
    } else {
        $(el).filter(':visible').find('th').each(function() {
            if ($(this).css('display') != 'none') tmpRow[tmpRow.length] = formatData($(this).html());
        });
    }

    row2CSV(tmpRow);

    // actual data
    $(el).find('tr').each(function() {
        var tmpRow = [];
        $(this).filter(':visible').find('td').each(function() {
            if ($(this).css('display') != 'none') tmpRow[tmpRow.length] = formatData($(this).html());
        });
        row2CSV(tmpRow);
    });
    if (options.delivery == 'popup') {
        var mydata = csvData.join('\n');
        return popup(mydata);
    } else {
        var mydata = csvData.join('\n');
        return mydata;
    }

    function row2CSV(tmpRow) {
        var tmp = tmpRow.join('') // to remove any blank rows
        // alert(tmp);
        if (tmpRow.length > 0 && tmp != '') {
            var mystr = tmpRow.join(options.separator);
            csvData[csvData.length] = mystr;
        }
    }
    function formatData(input) {
        // replace " with “
        var regexp = new RegExp(/["]/g);
        var output = input.replace(regexp, "“");
        //HTML
        var regexp = new RegExp(/\<[^\<]+\>/g);
        var output = output.replace(regexp, "");
        if (output == "") return '';
        return '"' + output + '"';
    }
    function popup(data) {
        var generator = window.open('', 'csv', 'height=400,width=600');
        generator.document.write('<html><head><title>CSV</title>');
        generator.document.write('</head><body >');
        generator.document.write('<textArea cols=70 rows=15 wrap="off" >');
        generator.document.write(data);
        generator.document.write('</textArea>');
        generator.document.write('</body></html>');
        generator.document.close();
        return true;
    }
};

(function($){$.extend({tablesorter:new
function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:true,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'/\.|\,/g',onRenderHeader:null,selectorHeaders:'thead th',debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}if(table.tBodies.length==0)return;var rows=table.tBodies[0].rows;if(rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}if(!p){p=detectParserForColumn(table,rows,-1,i);}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}list.push(p);}}if(table.config.debug){log(parsersDebug);}return list;};function detectParserForColumn(table,rows,rowIndex,cellIndex){var l=parsers.length,node=false,nodeValue=false,keepLooking=true;while(nodeValue==''&&keepLooking){rowIndex++;if(rows[rowIndex]){node=getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex);nodeValue=trimAndGetNodeText(table.config,node);if(table.config.debug){log('Checking if value was empty on row:'+rowIndex);}}else{keepLooking=false;}}for(var i=1;i<l;i++){if(parsers[i].is(nodeValue,table,node)){return parsers[i];}}return parsers[0];}function getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex){return rows[rowIndex].cells[cellIndex];}function trimAndGetNodeText(config,node){return $.trim(getElementText(config,node));}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}return false;}function buildCache(table){if(table.config.debug){var cacheTime=new Date();}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=$(table.tBodies[0].rows[i]),cols=[];if(c.hasClass(table.config.cssChildRow)){cache.row[cache.row.length-1]=cache.row[cache.row.length-1].add(c);continue;}cache.row.push(c);for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c[0].cells[j]),table,c[0].cells[j]));}cols.push(cache.normalized.length);cache.normalized.push(cols);cols=null;};if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}return cache;};function getElementText(config,node){var text="";if(!node)return"";if(!config.supportsTextContent)config.supportsTextContent=node.textContent||false;if(config.textExtraction=="simple"){if(config.supportsTextContent){text=node.textContent;}else{if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){text=node.childNodes[0].innerHTML;}else{text=node.innerHTML;}}}else{if(typeof(config.textExtraction)=="function"){text=config.textExtraction(node);}else{text=$(node).text();}}return text;}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){var pos=n[i][checkCell];rows.push(r[pos]);if(!table.config.appender){var l=r[pos].length;for(var j=0;j<l;j++){tableBody[0].appendChild(r[pos][j]);}}}if(table.config.appender){table.config.appender(table,rows);}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}var meta=($.metadata)?true:false;var header_index=computeTableHeaderCellIndexes(table);$tableHeaders=$(table.config.selectorHeaders,table).each(function(index){this.column=header_index[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=formatSortingOrder(table.config.sortInitialOrder);this.count=this.order;if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(checkHeaderOptionsSortingLocked(table,index))this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(table,index);if(!this.sortDisabled){var $th=$(this).addClass(table.config.cssHeader);if(table.config.onRenderHeader)table.config.onRenderHeader.apply($th);}table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}return $tableHeaders;};function computeTableHeaderCellIndexes(t){var matrix=[];var lookup={};var thead=t.getElementsByTagName('THEAD')[0];var trs=thead.getElementsByTagName('TR');for(var i=0;i<trs.length;i++){var cells=trs[i].cells;for(var j=0;j<cells.length;j++){var c=cells[j];var rowIndex=c.parentNode.rowIndex;var cellId=rowIndex+"-"+c.cellIndex;var rowSpan=c.rowSpan||1;var colSpan=c.colSpan||1
var firstAvailCol;if(typeof(matrix[rowIndex])=="undefined"){matrix[rowIndex]=[];}for(var k=0;k<matrix[rowIndex].length+1;k++){if(typeof(matrix[rowIndex][k])=="undefined"){firstAvailCol=k;break;}}lookup[cellId]=firstAvailCol;for(var k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof(matrix[k])=="undefined"){matrix[k]=[];}var matrixrow=matrix[k];for(var l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]="x";}}}}return lookup;}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}function checkHeaderOptionsSortingLocked(table,i){if((table.config.headers[i])&&(table.config.headers[i].lockedOrder))return table.config.headers[i].lockedOrder;return false;}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){return(v.toLowerCase()=="desc")?1:0;}else{return(v==1)?1:0;}}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}return false;}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(table.config.parsers[c].type=="text")?((order==0)?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c)):((order==0)?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c));var e="e"+i;dynamicExp+="var "+e+" = "+s;dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}dynamicExp+="return 0; ";dynamicExp+="}; ";if(table.config.debug){benchmark("Evaling expression:"+dynamicExp,new Date());}eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}return cache;};function makeSortFunction(type,direction,index){var a="a["+index+"]",b="b["+index+"]";if(type=='text'&&direction=='asc'){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+b+") ? -1 : 1 )));";}else if(type=='text'&&direction=='desc'){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+b+" < "+a+") ? -1 : 1 )));";}else if(type=='numeric'&&direction=='asc'){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+a+" - "+b+"));";}else if(type=='numeric'&&direction=='desc'){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+b+" - "+a+"));";}};function makeSortText(i){return"((a["+i+"] < b["+i+"]) ? -1 : ((a["+i+"] > b["+i+"]) ? 1 : 0));";};function makeSortTextDesc(i){return"((b["+i+"] < a["+i+"]) ? -1 : ((b["+i+"] > a["+i+"]) ? 1 : 0));";};function makeSortNumeric(i){return"a["+i+"]-b["+i+"];";};function makeSortNumericDesc(i){return"b["+i+"]-a["+i+"];";};function sortText(a,b){if(table.config.sortLocaleCompare)return a.localeCompare(b);return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){if(table.config.sortLocaleCompare)return b.localeCompare(a);return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$.data(this,"tablesorter",config);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){$this.trigger("sortStart");var $cell=$(this);var i=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){var me=this;setTimeout(function(){me.config.parsers=buildParserCache(me,$headers);cache=buildCache(me);},1);}).bind("updateCell",function(e,cell){var config=this.config;var pos=[(cell.parentNode.rowIndex-1),cell.cellIndex];cache.normalized[pos[0]][pos[1]]=config.parsers[pos[1]].format(getElementText(config,cell),cell);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){return/^[-+]?\d*$/.test($.trim(s.replace(/[,.']/g,'')));};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild);}empty.apply(table.tBodies[0]);}else{table.tBodies[0].innerHTML="";}};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLocaleLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[£$€]/g),""));},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item;}else{r+=item;}}return $.tablesorter.formatFloat(r);},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}var $tr,row=-1,odd;$("tr:visible",table.tBodies[0]).each(function(i){$tr=$(this);if(!$tr.hasClass(table.config.cssChildRow))row++;odd=(row%2==0);$tr.removeClass(table.config.widgetZebra.css[odd?0:1]).addClass(table.config.widgetZebra.css[odd?1:0])});if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});})(jQuery);
/*! DataTables 1.10.2
 * ©2008-2014 SpryMedia Ltd - datatables.net/license
 */
(function(za,O,l){var N=function(h){function T(a){var b,c,d={};h.each(a,function(e){if((b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" "))c=e.replace(b[0],b[2].toLowerCase()),d[c]=e,"o"===b[1]&&T(a[e])});a._hungarianMap=d}function G(a,b,c){a._hungarianMap||T(a);var d;h.each(b,function(e){d=a._hungarianMap[e];if(d!==l&&(c||b[d]===l))"o"===d.charAt(0)?(b[d]||(b[d]={}),h.extend(!0,b[d],b[e]),G(a[d],b[d],c)):b[d]=b[e]})}function N(a){var b=p.defaults.oLanguage,c=a.sZeroRecords;
!a.sEmptyTable&&(c&&"No data available in table"===b.sEmptyTable)&&D(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&(c&&"Loading..."===b.sLoadingRecords)&&D(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&cb(a)}function db(a){w(a,"ordering","bSort");w(a,"orderMulti","bSortMulti");w(a,"orderClasses","bSortClasses");w(a,"orderCellsTop","bSortCellsTop");w(a,"order","aaSorting");w(a,"orderFixed","aaSortingFixed");w(a,"paging","bPaginate");
w(a,"pagingType","sPaginationType");w(a,"pageLength","iDisplayLength");w(a,"searching","bFilter");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&G(p.models.oSearch,a[b])}function eb(a){w(a,"orderable","bSortable");w(a,"orderData","aDataSort");w(a,"orderSequence","asSorting");w(a,"orderDataType","sortDataType")}function fb(a){var a=a.oBrowser,b=h("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(h("<div/>").css({position:"absolute",top:1,left:1,width:100,
overflow:"scroll"}).append(h('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),c=b.find(".test");a.bScrollOversize=100===c[0].offsetWidth;a.bScrollbarLeft=1!==c.offset().left;b.remove()}function gb(a,b,c,d,e,f){var g,j=!1;c!==l&&(g=c,j=!0);for(;d!==e;)a.hasOwnProperty(d)&&(g=j?b(g,a[d],d,a):a[d],j=!0,d+=f);return g}function Aa(a,b){var c=p.defaults.column,d=a.aoColumns.length,c=h.extend({},p.models.oColumn,c,{nTh:b?b:O.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:
"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c);c=a.aoPreSearchCols;c[d]=h.extend({},p.models.oSearch,c[d]);fa(a,d,null)}function fa(a,b,c){var b=a.aoColumns[b],d=a.oClasses,e=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr("width")||null;var f=(e.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==l&&null!==c&&(eb(c),G(p.defaults.column,c),c.mDataProp!==l&&!c.mData&&(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&
!c.sClass&&(c.sClass=c.className),h.extend(b,c),D(b,c,"sWidth","sWidthOrig"),"number"===typeof c.iDataSort&&(b.aDataSort=[c.iDataSort]),D(b,c,"aDataSort"));var g=b.mData,j=U(g),i=b.mRender?U(b.mRender):null,c=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=h.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter));b.fnGetData=function(a,b,c){var d=j(a,b,l,c);return i&&b?i(d,b,a,c):d};b.fnSetData=function(a,b,c){return Ba(g)(a,b,c)};a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone));
a=-1!==h.inArray("asc",b.asSorting);c=-1!==h.inArray("desc",b.asSorting);!b.bSortable||!a&&!c?(b.sSortingClass=d.sSortableNone,b.sSortingClassJUI=""):a&&!c?(b.sSortingClass=d.sSortableAsc,b.sSortingClassJUI=d.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=d.sSortableDesc,b.sSortingClassJUI=d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,b.sSortingClassJUI=d.sSortJUI)}function V(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Ca(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=
a.oScroll;(""!==b.sY||""!==b.sX)&&W(a);u(a,null,"column-sizing",[a])}function ga(a,b){var c=X(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function Y(a,b){var c=X(a,"bVisible"),c=h.inArray(b,c);return-1!==c?c:null}function Z(a){return X(a,"bVisible").length}function X(a,b){var c=[];h.map(a.aoColumns,function(a,e){a[b]&&c.push(e)});return c}function Da(a){var b=a.aoColumns,c=a.aoData,d=p.ext.type.detect,e,f,g,j,i,h,m,o,k;e=0;for(f=b.length;e<f;e++)if(m=b[e],k=[],!m.sType&&m._sManualType)m.sType=
m._sManualType;else if(!m.sType){g=0;for(j=d.length;g<j;g++){i=0;for(h=c.length;i<h&&!(k[i]===l&&(k[i]=A(a,i,e,"type")),o=d[g](k[i],a),!o||"html"===o);i++);if(o){m.sType=o;break}}m.sType||(m.sType="string")}}function hb(a,b,c,d){var e,f,g,j,i,n,m=a.aoColumns;if(b)for(e=b.length-1;0<=e;e--){n=b[e];var o=n.targets!==l?n.targets:n.aTargets;h.isArray(o)||(o=[o]);f=0;for(g=o.length;f<g;f++)if("number"===typeof o[f]&&0<=o[f]){for(;m.length<=o[f];)Aa(a);d(o[f],n)}else if("number"===typeof o[f]&&0>o[f])d(m.length+
o[f],n);else if("string"===typeof o[f]){j=0;for(i=m.length;j<i;j++)("_all"==o[f]||h(m[j].nTh).hasClass(o[f]))&&d(j,n)}}if(c){e=0;for(a=c.length;e<a;e++)d(e,c[e])}}function I(a,b,c,d){var e=a.aoData.length,f=h.extend(!0,{},p.models.oRow,{src:c?"dom":"data"});f._aData=b;a.aoData.push(f);for(var b=a.aoColumns,f=0,g=b.length;f<g;f++)c&&Ea(a,e,f,A(a,e,f)),b[f].sType=null;a.aiDisplayMaster.push(e);(c||!a.oFeatures.bDeferRender)&&Fa(a,e,c,d);return e}function ha(a,b){var c;b instanceof h||(b=h(b));return b.map(function(b,
e){c=ia(a,e);return I(a,c.data,e,c.cells)})}function A(a,b,c,d){var e=a.iDraw,f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,c=f.fnGetData(g,d,{settings:a,row:b,col:c});if(c===l)return a.iDrawError!=e&&null===j&&(P(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b,4),a.iDrawError=e),j;if((c===g||null===c)&&null!==j)c=j;else if("function"===typeof c)return c.call(g);return null===c&&"display"==d?"":c}function Ea(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,
d,{settings:a,row:b,col:c})}function Ga(a){return h.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function U(a){if(h.isPlainObject(a)){var b={};h.each(a,function(a,c){c&&(b[a]=U(c))});return function(a,c,f,g){var j=b[c]||b._;return j!==l?j(a,c,f,g):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,c,f,g){return a(b,c,f,g)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var c=function(a,b,f){var g,
j;if(""!==f){j=Ga(f);for(var i=0,h=j.length;i<h;i++){f=j[i].match($);g=j[i].match(Q);if(f){j[i]=j[i].replace($,"");""!==j[i]&&(a=a[j[i]]);g=[];j.splice(0,i+1);j=j.join(".");i=0;for(h=a.length;i<h;i++)g.push(c(a[i],b,j));a=f[0].substring(1,f[0].length-1);a=""===a?g:g.join(a);break}else if(g){j[i]=j[i].replace(Q,"");a=a[j[i]]();continue}if(null===a||a[j[i]]===l)return l;a=a[j[i]]}}return a};return function(b,e){return c(b,e,a)}}return function(b){return b[a]}}function Ba(a){if(h.isPlainObject(a))return Ba(a._);
if(null===a)return function(){};if("function"===typeof a)return function(b,d,e){a(b,"set",d,e)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var b=function(a,d,e){var e=Ga(e),f;f=e[e.length-1];for(var g,j,i=0,h=e.length-1;i<h;i++){g=e[i].match($);j=e[i].match(Q);if(g){e[i]=e[i].replace($,"");a[e[i]]=[];f=e.slice();f.splice(0,i+1);g=f.join(".");j=0;for(h=d.length;j<h;j++)f={},b(f,d[j],g),a[e[i]].push(f);return}j&&(e[i]=e[i].replace(Q,""),a=a[e[i]](d));if(null===
a[e[i]]||a[e[i]]===l)a[e[i]]={};a=a[e[i]]}if(f.match(Q))a[f.replace(Q,"")](d);else a[f.replace($,"")]=d};return function(c,d){return b(c,d,a)}}return function(b,d){b[a]=d}}function Ha(a){return C(a.aoData,"_aData")}function ja(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function ka(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)a[e]==b?d=e:a[e]>b&&a[e]--; -1!=d&&c===l&&a.splice(d,1)}function la(a,b,c,d){var e=a.aoData[b],f;if("dom"===c||(!c||"auto"===c)&&"dom"===e.src)e._aData=
ia(a,e).data;else{var g=e.anCells,j;if(g){c=0;for(f=g.length;c<f;c++){for(j=g[c];j.childNodes.length;)j.removeChild(j.firstChild);g[c].innerHTML=A(a,b,c,"display")}}}e._aSortData=null;e._aFilterData=null;a=a.aoColumns;if(d!==l)a[d].sType=null;else{c=0;for(f=a.length;c<f;c++)a[c].sType=null}Ia(e)}function ia(a,b){var c=[],d=[],e=b.firstChild,f,g,j,i=0,n,m=a.aoColumns,o=function(a,b,c){"string"===typeof a&&(b=a.indexOf("@"),-1!==b&&(a=a.substring(b+1),j["@"+a]=c.getAttribute(a)))},k=function(a){g=m[i];
n=h.trim(a.innerHTML);g&&g._bAttrSrc?(j={display:n},o(g.mData.sort,j,a),o(g.mData.type,j,a),o(g.mData.filter,j,a),c.push(j)):c.push(n);i++};if(e)for(;e;){f=e.nodeName.toUpperCase();if("TD"==f||"TH"==f)k(e),d.push(e);e=e.nextSibling}else{d=b.anCells;e=0;for(f=d.length;e<f;e++)k(d[e])}return{data:c,cells:d}}function Fa(a,b,c,d){var e=a.aoData[b],f=e._aData,g=[],j,i,h,m,o;if(null===e.nTr){j=c||O.createElement("tr");e.nTr=j;e.anCells=g;j._DT_RowIndex=b;Ia(e);m=0;for(o=a.aoColumns.length;m<o;m++){h=a.aoColumns[m];
i=c?d[m]:O.createElement(h.sCellType);g.push(i);if(!c||h.mRender||h.mData!==m)i.innerHTML=A(a,b,m,"display");h.sClass&&(i.className+=" "+h.sClass);h.bVisible&&!c?j.appendChild(i):!h.bVisible&&c&&i.parentNode.removeChild(i);h.fnCreatedCell&&h.fnCreatedCell.call(a.oInstance,i,A(a,b,m),f,b,m)}u(a,"aoRowCreatedCallback",null,[j,f,b])}e.nTr.setAttribute("role","row")}function Ia(a){var b=a.nTr,c=a._aData;if(b){c.DT_RowId&&(b.id=c.DT_RowId);if(c.DT_RowClass){var d=c.DT_RowClass.split(" ");a.__rowc=a.__rowc?
Ja(a.__rowc.concat(d)):d;h(b).removeClass(a.__rowc.join(" ")).addClass(c.DT_RowClass)}c.DT_RowData&&h(b).data(c.DT_RowData)}}function ib(a){var b,c,d,e,f,g=a.nTHead,j=a.nTFoot,i=0===h("th, td",g).length,n=a.oClasses,m=a.aoColumns;i&&(e=h("<tr/>").appendTo(g));b=0;for(c=m.length;b<c;b++)f=m[b],d=h(f.nTh).addClass(f.sClass),i&&d.appendTo(e),a.oFeatures.bSort&&(d.addClass(f.sSortingClass),!1!==f.bSortable&&(d.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),Ka(a,f.nTh,b))),f.sTitle!=d.html()&&
d.html(f.sTitle),La(a,"header")(a,d,f,n);i&&aa(a.aoHeader,g);h(g).find(">tr").attr("role","row");h(g).find(">tr>th, >tr>td").addClass(n.sHeaderTH);h(j).find(">tr>th, >tr>td").addClass(n.sFooterTH);if(null!==j){a=a.aoFooter[0];b=0;for(c=a.length;b<c;b++)f=m[b],f.nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}}function ba(a,b,c){var d,e,f,g=[],j=[],i=a.aoColumns.length,n;if(b){c===l&&(c=!1);d=0;for(e=b.length;d<e;d++){g[d]=b[d].slice();g[d].nTr=b[d].nTr;for(f=i-1;0<=f;f--)!a.aoColumns[f].bVisible&&
!c&&g[d].splice(f,1);j.push([])}d=0;for(e=g.length;d<e;d++){if(a=g[d].nTr)for(;f=a.firstChild;)a.removeChild(f);f=0;for(b=g[d].length;f<b;f++)if(n=i=1,j[d][f]===l){a.appendChild(g[d][f].cell);for(j[d][f]=1;g[d+i]!==l&&g[d][f].cell==g[d+i][f].cell;)j[d+i][f]=1,i++;for(;g[d][f+n]!==l&&g[d][f].cell==g[d][f+n].cell;){for(c=0;c<i;c++)j[d+c][f+n]=1;n++}h(g[d][f].cell).attr("rowspan",i).attr("colspan",n)}}}}function K(a){var b=u(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))B(a,!1);else{var b=
[],c=0,d=a.asStripeClasses,e=d.length,f=a.oLanguage,g=a.iInitDisplayStart,j="ssp"==z(a),i=a.aiDisplay;a.bDrawing=!0;g!==l&&-1!==g&&(a._iDisplayStart=j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);var g=a._iDisplayStart,n=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,B(a,!1);else if(j){if(!a.bDestroying&&!jb(a))return}else a.iDraw++;if(0!==i.length){f=j?a.aoData.length:n;for(j=j?0:g;j<f;j++){var m=i[j],o=a.aoData[m];null===o.nTr&&Fa(a,m);m=o.nTr;if(0!==e){var k=d[c%e];o._sRowStripe!=
k&&(h(m).removeClass(o._sRowStripe).addClass(k),o._sRowStripe=k)}u(a,"aoRowCallback",null,[m,o._aData,c,j]);b.push(m);c++}}else c=f.sZeroRecords,1==a.iDraw&&"ajax"==z(a)?c=f.sLoadingRecords:f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h("<tr/>",{"class":e?d[0]:""}).append(h("<td />",{valign:"top",colSpan:Z(a),"class":a.oClasses.sRowEmpty}).html(c))[0];u(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Ha(a),g,n,i]);u(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],
Ha(a),g,n,i]);d=h(a.nTBody);d.children().detach();d.append(h(b));u(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function L(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&kb(a);d?ca(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;K(a);a._drawHold=!1}function lb(a){var b=a.oClasses,c=h(a.nTable),c=h("<div/>").insertBefore(c),d=a.oFeatures,e=h("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});
a.nHolding=c[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var f=a.sDom.split(""),g,j,i,n,m,o,k=0;k<f.length;k++){g=null;j=f[k];if("<"==j){i=h("<div/>")[0];n=f[k+1];if("'"==n||'"'==n){m="";for(o=2;f[k+o]!=n;)m+=f[k+o],o++;"H"==m?m=b.sJUIHeader:"F"==m&&(m=b.sJUIFooter);-1!=m.indexOf(".")?(n=m.split("."),i.id=n[0].substr(1,n[0].length-1),i.className=n[1]):"#"==m.charAt(0)?i.id=m.substr(1,m.length-1):i.className=m;k+=o}e.append(i);e=h(i)}else if(">"==j)e=e.parent();else if("l"==
j&&d.bPaginate&&d.bLengthChange)g=mb(a);else if("f"==j&&d.bFilter)g=nb(a);else if("r"==j&&d.bProcessing)g=ob(a);else if("t"==j)g=pb(a);else if("i"==j&&d.bInfo)g=qb(a);else if("p"==j&&d.bPaginate)g=rb(a);else if(0!==p.ext.feature.length){i=p.ext.feature;o=0;for(n=i.length;o<n;o++)if(j==i[o].cFeature){g=i[o].fnInit(a);break}}g&&(i=a.aanFeatures,i[j]||(i[j]=[]),i[j].push(g),e.append(g))}c.replaceWith(e)}function aa(a,b){var c=h(b).children("tr"),d,e,f,g,j,i,n,m,o,k;a.splice(0,a.length);f=0;for(i=c.length;f<
i;f++)a.push([]);f=0;for(i=c.length;f<i;f++){d=c[f];for(e=d.firstChild;e;){if("TD"==e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){m=1*e.getAttribute("colspan");o=1*e.getAttribute("rowspan");m=!m||0===m||1===m?1:m;o=!o||0===o||1===o?1:o;g=0;for(j=a[f];j[g];)g++;n=g;k=1===m?!0:!1;for(j=0;j<m;j++)for(g=0;g<o;g++)a[f+g][n+j]={cell:e,unique:k},a[f+g].nTr=d}e=e.nextSibling}}}function ma(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],aa(c,b)));for(var b=0,e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<
g;f++)if(c[b][f].unique&&(!d[f]||!a.bSortCellsTop))d[f]=c[b][f].cell;return d}function na(a,b,c){u(a,"aoServerParams","serverParams",[b]);if(b&&h.isArray(b)){var d={},e=/(.*?)\[\]$/;h.each(b,function(a,b){var c=b.name.match(e);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value});b=d}var f,g=a.ajax,j=a.oInstance;if(h.isPlainObject(g)&&g.data){f=g.data;var i=h.isFunction(f)?f(b):f,b=h.isFunction(f)&&i?i:h.extend(!0,b,i);delete g.data}i={data:b,success:function(b){var d=b.error||b.sError;
d&&a.oApi._fnLog(a,0,d);a.json=b;u(a,null,"xhr",[a,b]);c(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c){var d=a.oApi._fnLog;"parsererror"==c?d(a,0,"Invalid JSON response",1):4===b.readyState&&d(a,0,"Ajax error",7);B(a,!1)}};a.oAjaxData=b;u(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),c,a):a.sAjaxSource||"string"===typeof g?a.jqXHR=h.ajax(h.extend(i,{url:g||a.sAjaxSource})):h.isFunction(g)?a.jqXHR=g.call(j,
b,c,a):(a.jqXHR=h.ajax(h.extend(i,g)),g.data=f)}function jb(a){return a.bAjaxDataGet?(a.iDraw++,B(a,!0),na(a,sb(a),function(b){tb(a,b)}),!1):!0}function sb(a){var b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,f=a.aoPreSearchCols,g,j=[],i,n,m,o=R(a);g=a._iDisplayStart;i=!1!==d.bPaginate?a._iDisplayLength:-1;var k=function(a,b){j.push({name:a,value:b})};k("sEcho",a.iDraw);k("iColumns",c);k("sColumns",C(b,"sName").join(","));k("iDisplayStart",g);k("iDisplayLength",i);var l={draw:a.iDraw,
columns:[],order:[],start:g,length:i,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<c;g++)n=b[g],m=f[g],i="function"==typeof n.mData?"function":n.mData,l.columns.push({data:i,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:m.sSearch,regex:m.bRegex}}),k("mDataProp_"+g,i),d.bFilter&&(k("sSearch_"+g,m.sSearch),k("bRegex_"+g,m.bRegex),k("bSearchable_"+g,n.bSearchable)),d.bSort&&k("bSortable_"+g,n.bSortable);d.bFilter&&(k("sSearch",e.sSearch),k("bRegex",e.bRegex));d.bSort&&
(h.each(o,function(a,b){l.order.push({column:b.col,dir:b.dir});k("iSortCol_"+a,b.col);k("sSortDir_"+a,b.dir)}),k("iSortingCols",o.length));b=p.ext.legacy.ajax;return null===b?a.sAjaxSource?j:l:b?j:l}function tb(a,b){var c=b.sEcho!==l?b.sEcho:b.draw,d=b.iTotalRecords!==l?b.iTotalRecords:b.recordsTotal,e=b.iTotalDisplayRecords!==l?b.iTotalDisplayRecords:b.recordsFiltered;if(c){if(1*c<a.iDraw)return;a.iDraw=1*c}ja(a);a._iRecordsTotal=parseInt(d,10);a._iRecordsDisplay=parseInt(e,10);c=oa(a,b);d=0;for(e=
c.length;d<e;d++)I(a,c[d]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;K(a);a._bInitComplete||pa(a,b);a.bAjaxDataGet=!0;B(a,!1)}function oa(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==l?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?U(c)(b):b}function nb(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,f=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',j=d.sSearch,j=j.match(/_INPUT_/)?j.replace("_INPUT_",g):j+g,b=h("<div/>",
{id:!f.f?c+"_filter":null,"class":b.sFilter}).append(h("<label/>").append(j)),f=function(){var b=!this.value?"":this.value;b!=e.sSearch&&(ca(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,K(a))},i=h("input",b).val(e.sSearch).attr("placeholder",d.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT","ssp"===z(a)?Ma(f,400):f).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",c);h(a.nTable).on("search.dt.DT",
function(b,c){if(a===c)try{i[0]!==O.activeElement&&i.val(e.sSearch)}catch(d){}});return b[0]}function ca(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};Da(a);if("ssp"!=z(a)){ub(a,b.sSearch,c,b.bEscapeRegex!==l?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<e.length;b++)vb(a,e[b].sSearch,b,e[b].bEscapeRegex!==l?!e[b].bEscapeRegex:e[b].bRegex,e[b].bSmart,e[b].bCaseInsensitive);
wb(a)}else f(b);a.bFiltered=!0;u(a,null,"search",[a])}function wb(a){for(var b=p.ext.search,c=a.aiDisplay,d,e,f=0,g=b.length;f<g;f++){for(var j=[],i=0,h=c.length;i<h;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&j.push(e);c.length=0;c.push.apply(c,j)}}function vb(a,b,c,d,e,f){if(""!==b)for(var g=a.aiDisplay,d=Na(b,d,e,f),e=g.length-1;0<=e;e--)b=a.aoData[g[e]]._aFilterData[c],d.test(b)||g.splice(e,1)}function ub(a,b,c,d,e,f){var d=Na(b,d,e,f),e=a.oPreviousSearch.sSearch,f=a.aiDisplayMaster,
g;0!==p.ext.search.length&&(c=!0);g=xb(a);if(0>=b.length)a.aiDisplay=f.slice();else{if(g||c||e.length>b.length||0!==b.indexOf(e)||a.bSorted)a.aiDisplay=f.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)d.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function Na(a,b,c,d){a=b?a:Oa(a);c&&(a="^(?=.*?"+h.map(a.match(/"[^"]+"|[^ ]+/g)||"",function(a){return'"'===a.charAt(0)?a.match(/^"(.*)"$/)[1]:a}).join(")(?=.*?")+").*$");return RegExp(a,d?"i":"")}function Oa(a){return a.replace(Vb,"\\$1")}function xb(a){var b=
a.aoColumns,c,d,e,f,g,j,i,h,m=p.ext.type.search;c=!1;d=0;for(f=a.aoData.length;d<f;d++)if(h=a.aoData[d],!h._aFilterData){j=[];e=0;for(g=b.length;e<g;e++)c=b[e],c.bSearchable?(i=A(a,d,e,"filter"),m[c.sType]&&(i=m[c.sType](i)),null===i&&(i=""),"string"!==typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(qa.innerHTML=i,i=Wb?qa.textContent:qa.innerText),i.replace&&(i=i.replace(/[\r\n]/g,"")),j.push(i);h._aFilterData=j;h._sFilterRow=j.join("  ");c=!0}return c}function yb(a){return{search:a.sSearch,
smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function zb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function qb(a){var b=a.sTableId,c=a.aanFeatures.i,d=h("<div/>",{"class":a.oClasses.sInfo,id:!c?b+"_info":null});c||(a.aoDrawCallback.push({fn:Ab,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),h(a.nTable).attr("aria-describedby",b+"_info"));return d[0]}function Ab(a){var b=a.aanFeatures.i;if(0!==b.length){var c=
a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=" "+c.sInfoFiltered);j+=c.sInfoPostFix;j=Bb(a,j);c=c.fnInfoCallback;null!==c&&(j=c.call(a.oInstance,a,d,e,f,g,j));h(b).html(j)}}function Bb(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,
c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ra(a){var b,c,d=a.iInitDisplayStart,e=a.aoColumns,f;c=a.oFeatures;if(a.bInitialised){lb(a);ib(a);ba(a,a.aoHeader);ba(a,a.aoFooter);B(a,!0);c.bAutoWidth&&Ca(a);b=0;for(c=e.length;b<c;b++)f=e[b],f.sWidth&&(f.nTh.style.width=s(f.sWidth));L(a);e=z(a);"ssp"!=e&&("ajax"==e?na(a,[],function(c){var f=oa(a,c);for(b=0;b<f.length;b++)I(a,f[b]);a.iInitDisplayStart=d;L(a);B(a,!1);pa(a,c)},a):
(B(a,!1),pa(a)))}else setTimeout(function(){ra(a)},200)}function pa(a,b){a._bInitComplete=!0;b&&V(a);u(a,"aoInitComplete","init",[a,b])}function Pa(a,b){var c=parseInt(b,10);a._iDisplayLength=c;Qa(a);u(a,null,"length",[a,c])}function mb(a){for(var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,e=h.isArray(d[0]),f=e?d[0]:d,d=e?d[1]:d,e=h("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect}),g=0,j=f.length;g<j;g++)e[0][g]=new Option(d[g],f[g]);var i=h("<div><label/></div>").addClass(b.sLength);
a.aanFeatures.l||(i[0].id=c+"_length");i.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML));h("select",i).val(a._iDisplayLength).bind("change.DT",function(){Pa(a,h(this).val());K(a)});h(a.nTable).bind("length.dt.DT",function(b,c,d){a===c&&h("select",i).val(d)});return i[0]}function rb(a){var b=a.sPaginationType,c=p.ext.pager[b],d="function"===typeof c,e=function(a){K(a)},b=h("<div/>").addClass(a.oClasses.sPaging+b)[0],f=a.aanFeatures;d||c.fnInit(a,b,e);f.p||(b.id=a.sTableId+
"_paginate",a.aoDrawCallback.push({fn:function(a){if(d){var b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),m=-1===i,b=m?0:Math.ceil(b/i),i=m?1:Math.ceil(h/i),h=c(b,i),o,m=0;for(o=f.p.length;m<o;m++)La(a,"pageButton")(a,f.p[m],m,h,b,i)}else c.fnUpdate(a,e)},sName:"pagination"}));return b}function Ra(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===e?d=0:"number"===typeof b?(d=b*e,d>f&&(d=0)):"first"==b?d=0:"previous"==b?(d=0<=e?d-e:0,0>d&&(d=0)):"next"==
b?d+e<f&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:P(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(u(a,null,"page",[a]),c&&K(a));return b}function ob(a){return h("<div/>",{id:!a.aanFeatures.r?a.sTableId+"_processing":null,"class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function B(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css("display",b?"block":"none");u(a,null,"processing",[a,b])}function pb(a){var b=h(a.nTable);b.attr("role",
"grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var d=c.sX,e=c.sY,f=a.oClasses,g=b.children("caption"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),n=h(b[0].cloneNode(!1)),m=b.children("tfoot");c.sX&&"100%"===b.attr("width")&&b.removeAttr("width");m.length||(m=null);c=h("<div/>",{"class":f.sScrollWrapper}).append(h("<div/>",{"class":f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:d?!d?null:s(d):"100%"}).append(h("<div/>",{"class":f.sScrollHeadInner}).css({"box-sizing":"content-box",
width:c.sXInner||"100%"}).append(i.removeAttr("id").css("margin-left",0).append(b.children("thead")))).append("top"===j?g:null)).append(h("<div/>",{"class":f.sScrollBody}).css({overflow:"auto",height:!e?null:s(e),width:!d?null:s(d)}).append(b));m&&c.append(h("<div/>",{"class":f.sScrollFoot}).css({overflow:"hidden",border:0,width:d?!d?null:s(d):"100%"}).append(h("<div/>",{"class":f.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append(b.children("tfoot")))).append("bottom"===j?g:
null));var b=c.children(),o=b[0],f=b[1],k=m?b[2]:null;d&&h(f).scroll(function(){var a=this.scrollLeft;o.scrollLeft=a;m&&(k.scrollLeft=a)});a.nScrollHead=o;a.nScrollBody=f;a.nScrollFoot=k;a.aoDrawCallback.push({fn:W,sName:"scrolling"});return c[0]}function W(a){var b=a.oScroll,c=b.sX,d=b.sXInner,e=b.sY,f=b.iBarWidth,g=h(a.nScrollHead),j=g[0].style,i=g.children("div"),n=i[0].style,m=i.children("table"),i=a.nScrollBody,o=h(i),k=i.style,l=h(a.nScrollFoot).children("div"),p=l.children("table"),r=h(a.nTHead),
q=h(a.nTable),da=q[0],M=da.style,J=a.nTFoot?h(a.nTFoot):null,u=a.oBrowser,v=u.bScrollOversize,y,t,x,w,z,A=[],B=[],C=[],D,E=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};q.children("thead, tfoot").remove();z=r.clone().prependTo(q);y=r.find("tr");x=z.find("tr");z.find("th, td").removeAttr("tabindex");J&&(w=J.clone().prependTo(q),t=J.find("tr"),w=w.find("tr"));c||(k.width="100%",g[0].style.width="100%");h.each(ma(a,z),function(b,c){D=
ga(a,b);c.style.width=a.aoColumns[D].sWidth});J&&F(function(a){a.style.width=""},w);b.bCollapse&&""!==e&&(k.height=o[0].offsetHeight+r[0].offsetHeight+"px");g=q.outerWidth();if(""===c){if(M.width="100%",v&&(q.find("tbody").height()>i.offsetHeight||"scroll"==o.css("overflow-y")))M.width=s(q.outerWidth()-f)}else""!==d?M.width=s(d):g==o.width()&&o.height()<q.height()?(M.width=s(g-f),q.outerWidth()>g-f&&(M.width=s(g))):M.width=s(g);g=q.outerWidth();F(E,x);F(function(a){C.push(a.innerHTML);A.push(s(h(a).css("width")))},
x);F(function(a,b){a.style.width=A[b]},y);h(x).height(0);J&&(F(E,w),F(function(a){B.push(s(h(a).css("width")))},w),F(function(a,b){a.style.width=B[b]},t),h(w).height(0));F(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+C[b]+"</div>";a.style.width=A[b]},x);J&&F(function(a,b){a.innerHTML="";a.style.width=B[b]},w);if(q.outerWidth()<g){t=i.scrollHeight>i.offsetHeight||"scroll"==o.css("overflow-y")?g+f:g;if(v&&(i.scrollHeight>i.offsetHeight||"scroll"==o.css("overflow-y")))M.width=
s(t-f);(""===c||""!==d)&&P(a,1,"Possible column misalignment",6)}else t="100%";k.width=s(t);j.width=s(t);J&&(a.nScrollFoot.style.width=s(t));!e&&v&&(k.height=s(da.offsetHeight+f));e&&b.bCollapse&&(k.height=s(e),b=c&&da.offsetWidth>i.offsetWidth?f:0,da.offsetHeight<i.offsetHeight&&(k.height=s(da.offsetHeight+b)));b=q.outerWidth();m[0].style.width=s(b);n.width=s(b);m=q.height()>i.clientHeight||"scroll"==o.css("overflow-y");u="padding"+(u.bScrollbarLeft?"Left":"Right");n[u]=m?f+"px":"0px";J&&(p[0].style.width=
s(b),l[0].style.width=s(b),l[0].style[u]=m?f+"px":"0px");o.scroll();if((a.bSorted||a.bFiltered)&&!a._drawHold)i.scrollTop=0}function F(a,b,c){for(var d=0,e=0,f=b.length,g,j;e<f;){g=b[e].firstChild;for(j=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,d):a(g,d),d++),g=g.nextSibling,j=c?j.nextSibling:null;e++}}function Ca(a){var b=a.nTable,c=a.aoColumns,d=a.oScroll,e=d.sY,f=d.sX,g=d.sXInner,j=c.length,d=X(a,"bVisible"),i=h("th",a.nTHead),n=b.getAttribute("width"),m=b.parentNode,o=!1,k,l;for(k=0;k<
d.length;k++)l=c[d[k]],null!==l.sWidth&&(l.sWidth=Cb(l.sWidthOrig,m),o=!0);if(!o&&!f&&!e&&j==Z(a)&&j==i.length)for(k=0;k<j;k++)c[k].sWidth=s(i.eq(k).width());else{j=h(b).clone().empty().css("visibility","hidden").removeAttr("id").append(h(a.nTHead).clone(!1)).append(h(a.nTFoot).clone(!1)).append(h("<tbody><tr/></tbody>"));j.find("tfoot th, tfoot td").css("width","");var p=j.find("tbody tr"),i=ma(a,j.find("thead")[0]);for(k=0;k<d.length;k++)l=c[d[k]],i[k].style.width=null!==l.sWidthOrig&&""!==l.sWidthOrig?
s(l.sWidthOrig):"";if(a.aoData.length)for(k=0;k<d.length;k++)o=d[k],l=c[o],h(Db(a,o)).clone(!1).append(l.sContentPadding).appendTo(p);j.appendTo(m);f&&g?j.width(g):f?(j.css("width","auto"),j.width()<m.offsetWidth&&j.width(m.offsetWidth)):e?j.width(m.offsetWidth):n&&j.width(n);Eb(a,j[0]);if(f){for(k=g=0;k<d.length;k++)l=c[d[k]],e=h(i[k]).outerWidth(),g+=null===l.sWidthOrig?e:parseInt(l.sWidth,10)+e-h(i[k]).width();j.width(s(g));b.style.width=s(g)}for(k=0;k<d.length;k++)if(l=c[d[k]],e=h(i[k]).width())l.sWidth=
s(e);b.style.width=s(j.css("width"));j.remove()}n&&(b.style.width=s(n));if((n||f)&&!a._reszEvt)h(za).bind("resize.DT-"+a.sInstance,Ma(function(){V(a)})),a._reszEvt=!0}function Ma(a,b){var c=b||200,d,e;return function(){var b=this,g=+new Date,j=arguments;d&&g<d+c?(clearTimeout(e),e=setTimeout(function(){d=l;a.apply(b,j)},c)):d?(d=g,a.apply(b,j)):d=g}}function Cb(a,b){if(!a)return 0;var c=h("<div/>").css("width",s(a)).appendTo(b||O.body),d=c[0].offsetWidth;c.remove();return d}function Eb(a,b){var c=
a.oScroll;if(c.sX||c.sY)c=!c.sX?c.iBarWidth:0,b.style.width=s(h(b).outerWidth()-c)}function Db(a,b){var c=Fb(a,b);if(0>c)return null;var d=a.aoData[c];return!d.nTr?h("<td/>").html(A(a,c,b,"display"))[0]:d.anCells[b]}function Fb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)c=A(a,f,b,"display")+"",c=c.replace(Xb,""),c.length>d&&(d=c.length,e=f);return e}function s(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function Gb(){if(!p.__scrollbarWidth){var a=
h("<p/>").css({width:"100%",height:200,padding:0})[0],b=h("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(a).appendTo("body"),c=a.offsetWidth;b.css("overflow","scroll");a=a.offsetWidth;c===a&&(a=b[0].clientWidth);b.remove();p.__scrollbarWidth=c-a}return p.__scrollbarWidth}function R(a){var b,c,d=[],e=a.aoColumns,f,g,j,i;b=a.aaSortingFixed;c=h.isPlainObject(b);var n=[];f=function(a){a.length&&!h.isArray(a[0])?n.push(a):n.push.apply(n,
a)};h.isArray(b)&&f(b);c&&b.pre&&f(b.pre);f(a.aaSorting);c&&b.post&&f(b.post);for(a=0;a<n.length;a++){i=n[a][0];f=e[i].aDataSort;b=0;for(c=f.length;b<c;b++)g=f[b],j=e[g].sType||"string",d.push({src:i,col:g,dir:n[a][1],index:n[a][2],type:j,formatter:p.ext.type.order[j+"-pre"]})}return d}function kb(a){var b,c,d=[],e=p.ext.type.order,f=a.aoData,g=0,j,i=a.aiDisplayMaster,h;Da(a);h=R(a);b=0;for(c=h.length;b<c;b++)j=h[b],j.formatter&&g++,Hb(a,j.col);if("ssp"!=z(a)&&0!==h.length){b=0;for(c=i.length;b<c;b++)d[i[b]]=
b;g===h.length?i.sort(function(a,b){var c,e,g,j,i=h.length,l=f[a]._aSortData,p=f[b]._aSortData;for(g=0;g<i;g++)if(j=h[g],c=l[j.col],e=p[j.col],c=c<e?-1:c>e?1:0,0!==c)return"asc"===j.dir?c:-c;c=d[a];e=d[b];return c<e?-1:c>e?1:0}):i.sort(function(a,b){var c,g,j,i,l=h.length,p=f[a]._aSortData,r=f[b]._aSortData;for(j=0;j<l;j++)if(i=h[j],c=p[i.col],g=r[i.col],i=e[i.type+"-"+i.dir]||e["string-"+i.dir],c=i(c,g),0!==c)return c;c=d[a];g=d[b];return c<g?-1:c>g?1:0})}a.bSorted=!0}function Ib(a){for(var b,c,
d=a.aoColumns,e=R(a),a=a.oLanguage.oAria,f=0,g=d.length;f<g;f++){c=d[f];var j=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var i=c.nTh;i.removeAttribute("aria-sort");c.bSortable&&(0<e.length&&e[0].col==f?(i.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),c=j[e[0].index+1]||j[0]):c=j[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);i.setAttribute("aria-label",b)}}function Sa(a,b,c,d){var e=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a){var b=a._idx;b===l&&(b=h.inArray(a[1],
f));return b+1>=f.length?0:b+1};"number"===typeof e[0]&&(e=a.aaSorting=[e]);c&&a.oFeatures.bSortMulti?(c=h.inArray(b,C(e,"0")),-1!==c?(b=g(e[c]),e[c][1]=f[b],e[c]._idx=b):(e.push([b,f[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=f[b],e[0]._idx=b):(e.length=0,e.push([b,f[0]]),e[0]._idx=0);L(a);"function"==typeof d&&d(a)}function Ka(a,b,c,d){var e=a.aoColumns[c];Ta(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(B(a,!0),setTimeout(function(){Sa(a,c,b.shiftKey,
d);"ssp"!==z(a)&&B(a,!1)},0)):Sa(a,c,b.shiftKey,d))})}function sa(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,d=R(a),e=a.oFeatures,f,g;if(e.bSort&&e.bSortClasses){e=0;for(f=b.length;e<f;e++)g=b[e].src,h(C(a.aoData,"anCells",g)).removeClass(c+(2>e?e+1:3));e=0;for(f=d.length;e<f;e++)g=d[e].src,h(C(a.aoData,"anCells",g)).addClass(c+(2>e?e+1:3))}a.aLastSort=d}function Hb(a,b){var c=a.aoColumns[b],d=p.ext.order[c.sSortDataType],e;d&&(e=d.call(a.oInstance,a,b,Y(a,b)));for(var f,g=p.ext.type.order[c.sType+
"-pre"],j=0,i=a.aoData.length;j<i;j++)if(c=a.aoData[j],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)f=d?e[j]:A(a,j,b,"sort"),c._aSortData[b]=g?g(f):f}function ta(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),search:yb(a.oPreviousSearch),columns:h.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:yb(a.aoPreSearchCols[d])}})};u(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=
b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Jb(a){var b,c,d=a.aoColumns;if(a.oFeatures.bStateSave){var e=a.fnStateLoadCallback.call(a.oInstance,a);if(e&&e.time&&(b=u(a,"aoStateLoadParams","stateLoadParams",[a,e]),-1===h.inArray(!1,b)&&(b=a.iStateDuration,!(0<b&&e.time<+new Date-1E3*b)&&d.length===e.columns.length))){a.oLoadedState=h.extend(!0,{},e);a._iDisplayStart=e.start;a.iInitDisplayStart=e.start;a._iDisplayLength=e.length;a.aaSorting=[];h.each(e.order,function(b,c){a.aaSorting.push(c[0]>=
d.length?[0,c[1]]:c)});h.extend(a.oPreviousSearch,zb(e.search));b=0;for(c=e.columns.length;b<c;b++){var f=e.columns[b];d[b].bVisible=f.visible;h.extend(a.aoPreSearchCols[b],zb(f.search))}u(a,"aoStateLoaded","stateLoaded",[a,e])}}}function ua(a){var b=p.settings,a=h.inArray(a,C(b,"nTable"));return-1!==a?b[a]:null}function P(a,b,c,d){c="DataTables warning: "+(null!==a?"table id="+a.sTableId+" - ":"")+c;d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+d);if(b)za.console&&
console.log&&console.log(c);else if(a=p.ext,"alert"==(a.sErrMode||a.errMode))alert(c);else throw Error(c);}function D(a,b,c,d){h.isArray(c)?h.each(c,function(c,d){h.isArray(d)?D(a,b,d[0],d[1]):D(a,b,d)}):(d===l&&(d=c),b[c]!==l&&(a[d]=b[c]))}function Kb(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],h.isPlainObject(d)?(h.isPlainObject(a[e])||(a[e]={}),h.extend(!0,a[e],d)):a[e]=c&&"data"!==e&&"aaData"!==e&&h.isArray(d)?d.slice():d);return a}function Ta(a,b,c){h(a).bind("click.DT",b,function(b){a.blur();
c(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).bind("selectstart.DT",function(){return!1})}function x(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function u(a,b,c,d){var e=[];b&&(e=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,d)}));null!==c&&h(a.nTable).trigger(c+".dt",d);return e}function Qa(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;c===a.fnRecordsDisplay()&&(b=c-d);if(-1===d||0>b)b=0;a._iDisplayStart=b}function La(a,b){var c=
a.renderer,d=p.ext.renderer[b];return h.isPlainObject(c)&&c[b]?d[c[b]]||d._:"string"===typeof c?d[c]||d._:d._}function z(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Ua(a,b){var c=[],c=Lb.numbers_length,d=Math.floor(c/2);b<=c?c=S(0,b):a<=d?(c=S(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-d?c=S(b-(c-2),b):(c=S(a-1,a+2),c.push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function cb(a){h.each({num:function(b){return va(b,
a)},"num-fmt":function(b){return va(b,a,Va)},"html-num":function(b){return va(b,a,wa)},"html-num-fmt":function(b){return va(b,a,wa,Va)}},function(b,c){t.type.order[b+a+"-pre"]=c})}function Mb(a){return function(){var b=[ua(this[p.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return p.ext.internal[a].apply(this,b)}}var p,t,q,r,v,Wa={},Nb=/[\r\n]/g,wa=/<.*?>/g,Yb=/^[\w\+\-]/,Zb=/[\w\+\-]$/,Vb=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Va=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,
H=function(a){return!a||!0===a||"-"===a?!0:!1},Ob=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Pb=function(a,b){Wa[b]||(Wa[b]=RegExp(Oa(b),"g"));return"string"===typeof a?a.replace(/\./g,"").replace(Wa[b],"."):a},Xa=function(a,b,c){var d="string"===typeof a;b&&d&&(a=Pb(a,b));c&&d&&(a=a.replace(Va,""));return H(a)||!isNaN(parseFloat(a))&&isFinite(a)},Qb=function(a,b,c){return H(a)?!0:!(H(a)||"string"===typeof a)?null:Xa(a.replace(wa,""),b,c)?!0:null},C=function(a,b,c){var d=
[],e=0,f=a.length;if(c!==l)for(;e<f;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<f;e++)a[e]&&d.push(a[e][b]);return d},xa=function(a,b,c,d){var e=[],f=0,g=b.length;if(d!==l)for(;f<g;f++)e.push(a[b[f]][c][d]);else for(;f<g;f++)e.push(a[b[f]][c]);return e},S=function(a,b){var c=[],d;b===l?(b=0,d=a):(d=b,b=a);for(var e=b;e<d;e++)c.push(e);return c},Ja=function(a){var b=[],c,d,e=a.length,f,g=0;d=0;a:for(;d<e;d++){c=a[d];for(f=0;f<g;f++)if(b[f]===c)continue a;b.push(c);g++}return b},w=function(a,
b,c){a[b]!==l&&(a[c]=a[b])},$=/\[.*?\]$/,Q=/\(\)$/,qa=h("<div>")[0],Wb=qa.textContent!==l,Xb=/<.*?>/g;p=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new q(ua(this[t.iApiIndex])):new q(this)};this.fnAddData=function(a,b){var c=this.api(!0),d=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===l||b)&&c.draw();return d.flatten().toArray()};this.fnAdjustColumnSizing=
function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===l||a?b.draw(!1):(""!==d.sX||""!==d.sY)&&W(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===l||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,c){var d=this.api(!0),a=d.rows(a),e=a.settings()[0],h=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,h);(c===l||c)&&d.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(!a)};
this.fnFilter=function(a,b,c,d,e,h){e=this.api(!0);null===b||b===l?e.search(a,c,d,h):e.column(b).search(a,c,d,h);e.draw()};this.fnGetData=function(a,b){var c=this.api(!0);if(a!==l){var d=a.nodeName?a.nodeName.toLowerCase():"";return b!==l||"td"==d||"th"==d?c.cell(a,b).data():c.row(a).data()||null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==l?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();
return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===l||b)&&c.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===l||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return ua(this[t.iApiIndex])};
this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);c===l||null===c?h.row(b).data(a):h.cell(b,c).data(a);(e===l||e)&&h.columns.adjust();(d===l||d)&&h.draw();return 0};this.fnVersionCheck=t.fnVersionCheck;var b=this,c=a===l,d=this.length;c&&(a={});this.oApi=this.internal=t.internal;for(var e in p.ext.internal)e&&(this[e]=Mb(e));this.each(function(){var e={},g=1<d?Kb(e,a,!0):
a,j=0,i,n=this.getAttribute("id"),e=!1,m=p.defaults;if("table"!=this.nodeName.toLowerCase())P(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{db(m);eb(m.column);G(m,m,!0);G(m.column,m.column,!0);G(m,g);var o=p.settings,j=0;for(i=o.length;j<i;j++){if(o[j].nTable==this){i=g.bRetrieve!==l?g.bRetrieve:m.bRetrieve;if(c||i)return o[j].oInstance;if(g.bDestroy!==l?g.bDestroy:m.bDestroy){o[j].oInstance.fnDestroy();break}else{P(o[j],0,"Cannot reinitialise DataTable",3);return}}if(o[j].sTableId==
this.id){o.splice(j,1);break}}if(null===n||""===n)this.id=n="DataTables_Table_"+p.ext._unique++;var k=h.extend(!0,{},p.models.oSettings,{nTable:this,oApi:b.internal,oInit:g,sDestroyWidth:h(this)[0].style.width,sInstance:n,sTableId:n});o.push(k);k.oInstance=1===b.length?b:h(this).dataTable();db(g);g.oLanguage&&N(g.oLanguage);g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=h.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]);g=Kb(h.extend(!0,{},m),g);D(k.oFeatures,g,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));
D(k,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);D(k.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],
["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);D(k.oLanguage,g,"fnInfoCallback");x(k,"aoDrawCallback",g.fnDrawCallback,"user");x(k,"aoServerParams",g.fnServerParams,"user");x(k,"aoStateSaveParams",g.fnStateSaveParams,"user");x(k,"aoStateLoadParams",g.fnStateLoadParams,"user");x(k,"aoStateLoaded",g.fnStateLoaded,"user");x(k,"aoRowCallback",g.fnRowCallback,"user");x(k,"aoRowCreatedCallback",g.fnCreatedRow,"user");x(k,"aoHeaderCallback",g.fnHeaderCallback,"user");x(k,"aoFooterCallback",g.fnFooterCallback,
"user");x(k,"aoInitComplete",g.fnInitComplete,"user");x(k,"aoPreDrawCallback",g.fnPreDrawCallback,"user");n=k.oClasses;g.bJQueryUI?(h.extend(n,p.ext.oJUIClasses,g.oClasses),g.sDom===m.sDom&&"lfrtip"===m.sDom&&(k.sDom='<"H"lfr>t<"F"ip>'),k.renderer)?h.isPlainObject(k.renderer)&&!k.renderer.header&&(k.renderer.header="jqueryui"):k.renderer="jqueryui":h.extend(n,p.ext.classes,g.oClasses);h(this).addClass(n.sTable);if(""!==k.oScroll.sX||""!==k.oScroll.sY)k.oScroll.iBarWidth=Gb();!0===k.oScroll.sX&&(k.oScroll.sX=
"100%");k.iInitDisplayStart===l&&(k.iInitDisplayStart=g.iDisplayStart,k._iDisplayStart=g.iDisplayStart);null!==g.iDeferLoading&&(k.bDeferLoading=!0,j=h.isArray(g.iDeferLoading),k._iRecordsDisplay=j?g.iDeferLoading[0]:g.iDeferLoading,k._iRecordsTotal=j?g.iDeferLoading[1]:g.iDeferLoading);""!==g.oLanguage.sUrl?(k.oLanguage.sUrl=g.oLanguage.sUrl,h.getJSON(k.oLanguage.sUrl,null,function(a){N(a);G(m.oLanguage,a);h.extend(true,k.oLanguage,g.oLanguage,a);ra(k)}),e=!0):h.extend(!0,k.oLanguage,g.oLanguage);
null===g.asStripeClasses&&(k.asStripeClasses=[n.sStripeOdd,n.sStripeEven]);var j=k.asStripeClasses,r=h("tbody tr:eq(0)",this);-1!==h.inArray(!0,h.map(j,function(a){return r.hasClass(a)}))&&(h("tbody tr",this).removeClass(j.join(" ")),k.asDestroyStripes=j.slice());var o=[],q,j=this.getElementsByTagName("thead");0!==j.length&&(aa(k.aoHeader,j[0]),o=ma(k));if(null===g.aoColumns){q=[];j=0;for(i=o.length;j<i;j++)q.push(null)}else q=g.aoColumns;j=0;for(i=q.length;j<i;j++)Aa(k,o?o[j]:null);hb(k,g.aoColumnDefs,
q,function(a,b){fa(k,a,b)});if(r.length){var s=function(a,b){return a.getAttribute("data-"+b)?b:null};h.each(ia(k,r[0]).cells,function(a,b){var c=k.aoColumns[a];if(c.mData===a){var d=s(b,"sort")||s(b,"order"),e=s(b,"filter")||s(b,"search");if(d!==null||e!==null){c.mData={_:a+".display",sort:d!==null?a+".@data-"+d:l,type:d!==null?a+".@data-"+d:l,filter:e!==null?a+".@data-"+e:l};fa(k,a)}}})}var t=k.oFeatures;g.bStateSave&&(t.bStateSave=!0,Jb(k,g),x(k,"aoDrawCallback",ta,"state_save"));if(g.aaSorting===
l){o=k.aaSorting;j=0;for(i=o.length;j<i;j++)o[j][1]=k.aoColumns[j].asSorting[0]}sa(k);t.bSort&&x(k,"aoDrawCallback",function(){if(k.bSorted){var a=R(k),b={};h.each(a,function(a,c){b[c.src]=c.dir});u(k,null,"order",[k,a,b]);Ib(k)}});x(k,"aoDrawCallback",function(){(k.bSorted||z(k)==="ssp"||t.bDeferRender)&&sa(k)},"sc");fb(k);j=h(this).children("caption").each(function(){this._captionSide=h(this).css("caption-side")});i=h(this).children("thead");0===i.length&&(i=h("<thead/>").appendTo(this));k.nTHead=
i[0];i=h(this).children("tbody");0===i.length&&(i=h("<tbody/>").appendTo(this));k.nTBody=i[0];i=h(this).children("tfoot");if(0===i.length&&0<j.length&&(""!==k.oScroll.sX||""!==k.oScroll.sY))i=h("<tfoot/>").appendTo(this);0===i.length||0===i.children().length?h(this).addClass(n.sNoFooter):0<i.length&&(k.nTFoot=i[0],aa(k.aoFooter,k.nTFoot));if(g.aaData)for(j=0;j<g.aaData.length;j++)I(k,g.aaData[j]);else(k.bDeferLoading||"dom"==z(k))&&ha(k,h(k.nTBody).children("tr"));k.aiDisplay=k.aiDisplayMaster.slice();
k.bInitialised=!0;!1===e&&ra(k)}});b=null;return this};var Rb=[],y=Array.prototype,$b=function(a){var b,c,d=p.settings,e=h.map(d,function(a){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return b=h.inArray(a,e),-1!==b?[d[b]]:null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?c=h(a):a instanceof h&&(c=a)}else return[];if(c)return c.map(function(){b=h.inArray(this,e);return-1!==b?d[b]:null}).toArray()};
q=function(a,b){if(!this instanceof q)throw"DT API must be constructed as a new object";var c=[],d=function(a){(a=$b(a))&&c.push.apply(c,a)};if(h.isArray(a))for(var e=0,f=a.length;e<f;e++)d(a[e]);else d(a);this.context=Ja(c);b&&this.push.apply(this,b.toArray?b.toArray():b);this.selector={rows:null,cols:null,opts:null};q.extend(this,this,Rb)};p.Api=q;q.prototype={concat:y.concat,context:[],each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=
this.context;return b.length>a?new q(b[a],this[a]):null},filter:function(a){var b=[];if(y.filter)b=y.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new q(this.context,b)},flatten:function(){var a=[];return new q(this.context,a.concat.apply(a,this.toArray()))},join:y.join,indexOf:y.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c){var d=[],e,f,g,h,i,n=this.context,
m,o,k=this.selector;"string"===typeof a&&(c=b,b=a,a=!1);f=0;for(g=n.length;f<g;f++)if("table"===b)e=c(n[f],f),e!==l&&d.push(e);else if("columns"===b||"rows"===b)e=c(n[f],this[f],f),e!==l&&d.push(e);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b){o=this[f];"column-rows"===b&&(m=Ya(n[f],k.opts));h=0;for(i=o.length;h<i;h++)e=o[h],e="cell"===b?c(n[f],e.row,e.column,f,h):c(n[f],e,f,h,m),e!==l&&d.push(e)}return d.length?(a=new q(n,a?d.concat.apply([],d):d),b=a.selector,b.rows=k.rows,b.cols=
k.cols,b.opts=k.opts,a):this},lastIndexOf:y.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(y.map)b=y.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new q(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:y.pop,push:y.push,reduce:y.reduce||function(a,b){return gb(this,a,b,0,this.length,1)},reduceRight:y.reduceRight||function(a,b){return gb(this,
a,b,this.length-1,-1,-1)},reverse:y.reverse,selector:null,shift:y.shift,sort:y.sort,splice:y.splice,toArray:function(){return y.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},unique:function(){return new q(this.context,Ja(this))},unshift:y.unshift};q.extend=function(a,b,c){if(b&&(b instanceof q||b.__dt_wrapper)){var d,e,f,g=function(a,b,c){return function(){var d=b.apply(a,arguments);q.extend(d,d,c.methodExt);return d}};d=0;for(e=c.length;d<e;d++)f=c[d],b[f.name]=
"function"===typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,q.extend(a,b[f.name],f.propExt)}};q.register=r=function(a,b){if(h.isArray(a))for(var c=0,d=a.length;c<d;c++)q.register(a[c],b);else for(var e=a.split("."),f=Rb,g,j,c=0,d=e.length;c<d;c++){g=(j=-1!==e[c].indexOf("()"))?e[c].replace("()",""):e[c];var i;a:{i=0;for(var n=f.length;i<n;i++)if(f[i].name===g){i=f[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i));c===d-1?i.val=b:f=j?i.methodExt:
i.propExt}};q.registerPlural=v=function(a,b,c){q.register(a,c);q.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof q?a.length?h.isArray(a[0])?new q(a.context,a[0]):a[0]:l:a})};r("tables()",function(a){var b;if(a){b=q;var c=this.context;if("number"===typeof a)a=[c[a]];else var d=h.map(c,function(a){return a.nTable}),a=h(d).filter(a).map(function(){var a=h.inArray(this,d);return c[a]}).toArray();b=new b(a)}else b=this;return b});r("table()",function(a){var a=this.tables(a),
b=a.context;return b.length?new q(b[0]):a});v("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable})});v("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody})});v("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead})});v("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot})});v("tables().containers()",
"table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper})});r("draw()",function(a){return this.iterator("table",function(b){L(b,!1===a)})});r("page()",function(a){return a===l?this.page.info().page:this.iterator("table",function(b){Ra(b,a)})});r("page.info()",function(){if(0===this.context.length)return l;var a=this.context[0],b=a._iDisplayStart,c=a._iDisplayLength,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,
end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d}});r("page.len()",function(a){return a===l?0!==this.context.length?this.context[0]._iDisplayLength:l:this.iterator("table",function(b){Pa(b,a)})});var Sb=function(a,b,c){"ssp"==z(a)?L(a,b):(B(a,!0),na(a,[],function(c){ja(a);for(var c=oa(a,c),d=0,g=c.length;d<g;d++)I(a,c[d]);L(a,b);B(a,!1)}));if(c){var d=new q(a);d.one("draw",function(){c(d.ajax.json())})}};r("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});
r("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});r("ajax.reload()",function(a,b){return this.iterator("table",function(c){Sb(c,!1===b,a)})});r("ajax.url()",function(a){var b=this.context;if(a===l){if(0===b.length)return l;b=b[0];return b.ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});r("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Sb(c,
!1===b,a)})});var Za=function(a,b){var c=[],d,e,f,g,j,i;if(!a||"string"===typeof a||a.length===l)a=[a];f=0;for(g=a.length;f<g;f++){e=a[f]&&a[f].split?a[f].split(","):[a[f]];j=0;for(i=e.length;j<i;j++)(d=b("string"===typeof e[j]?h.trim(e[j]):e[j]))&&d.length&&c.push.apply(c,d)}return c},$a=function(a){a||(a={});a.filter&&!a.search&&(a.search=a.filter);return{search:a.search||"none",order:a.order||"current",page:a.page||"all"}},ab=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=
a[b],a.length=1,a.context=[a.context[b]],a;a.length=0;return a},Ya=function(a,b){var c,d,e,f=[],g=a.aiDisplay;c=a.aiDisplayMaster;var j=b.search;d=b.order;e=b.page;if("ssp"==z(a))return"removed"===j?[]:S(0,c.length);if("current"==e){c=a._iDisplayStart;for(d=a.fnDisplayEnd();c<d;c++)f.push(g[c])}else if("current"==d||"applied"==d)f="none"==j?c.slice():"applied"==j?g.slice():h.map(c,function(a){return-1===h.inArray(a,g)?a:null});else if("index"==d||"original"==d){c=0;for(d=a.aoData.length;c<d;c++)"none"==
j?f.push(c):(e=h.inArray(c,g),(-1===e&&"removed"==j||0<=e&&"applied"==j)&&f.push(c))}return f};r("rows()",function(a,b){a===l?a="":h.isPlainObject(a)&&(b=a,a="");var b=$a(b),c=this.iterator("table",function(c){var e=b;return Za(a,function(a){var b=Ob(a);if(b!==null&&!e)return[b];var j=Ya(c,e);if(b!==null&&h.inArray(b,j)!==-1)return[b];if(!a)return j;for(var b=[],i=0,n=j.length;i<n;i++)b.push(c.aoData[j[i]].nTr);return a.nodeName&&h.inArray(a,b)!==-1?[a._DT_RowIndex]:h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()})});
c.selector.rows=a;c.selector.opts=b;return c});r("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||l})});r("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return xa(a.aoData,b,"_aData")})});v("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData})});v("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,
c){la(b,c,a)})});v("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b})});v("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,d){var e=b.aoData;e.splice(c,1);for(var f=0,g=e.length;f<g;f++)null!==e[f].nTr&&(e[f].nTr._DT_RowIndex=f);h.inArray(c,b.aiDisplay);ka(b.aiDisplayMaster,c);ka(b.aiDisplay,c);ka(a[d],c,!1);Qa(b)})});r("rows.add()",function(a){var b=this.iterator("table",function(b){var c,f,g,h=[];f=0;
for(g=a.length;f<g;f++)c=a[f],c.nodeName&&"TR"===c.nodeName.toUpperCase()?h.push(ha(b,c)[0]):h.push(I(b,c));return h}),c=this.rows(-1);c.pop();c.push.apply(c,b.toArray());return c});r("row()",function(a,b){return ab(this.rows(a,b))});r("row().data()",function(a){var b=this.context;if(a===l)return b.length&&this.length?b[0].aoData[this[0]]._aData:l;b[0].aoData[this[0]]._aData=a;la(b[0],this[0],"data");return this});r("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||
null:null});r("row.add()",function(a){a instanceof h&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?ha(b,a)[0]:I(b,a)});return this.row(b[0])});var bb=function(a){var b=a.context;b.length&&a.length&&(a=b[0].aoData[a[0]],a._details&&(a._details.remove(),a._detailsShow=l,a._details=l))},Tb=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];if(d._details){(d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach();
var e=c[0],f=new q(e),g=e.aoData;f.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<C(g,"_details").length&&(f.on("draw.dt.DT_details",function(a,b){e===b&&f.rows({page:"current"}).eq(0).each(function(a){a=g[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on("column-visibility.dt.DT_details",function(a,b){if(e===b)for(var c,d=Z(b),f=0,h=g.length;f<h;f++)c=g[f],c._details&&c._details.children("td[colspan]").attr("colspan",d)}),f.on("destroy.dt.DT_details",function(a,
b){if(e===b)for(var c=0,d=g.length;c<d;c++)g[c]._details&&bb(g[c])}))}}};r("row().child()",function(a,b){var c=this.context;if(a===l)return c.length&&this.length?c[0].aoData[this[0]]._details:l;if(!0===a)this.child.show();else if(!1===a)bb(this);else if(c.length&&this.length){var d=c[0],c=c[0].aoData[this[0]],e=[],f=function(a,b){if(a.nodeName&&"tr"===a.nodeName.toLowerCase())e.push(a);else{var c=h("<tr><td/></tr>").addClass(b);h("td",c).addClass(b).html(a)[0].colSpan=Z(d);e.push(c[0])}};if(h.isArray(a)||
a instanceof h)for(var g=0,j=a.length;g<j;g++)f(a[g],b);else f(a,b);c._details&&c._details.remove();c._details=h(e);c._detailsShow&&c._details.insertAfter(c.nTr)}return this});r(["row().child.show()","row().child().show()"],function(){Tb(this,!0);return this});r(["row().child.hide()","row().child().hide()"],function(){Tb(this,!1);return this});r(["row().child.remove()","row().child().remove()"],function(){bb(this);return this});r("row().child.isShown()",function(){var a=this.context;return a.length&&
this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var ac=/^(.+):(name|visIdx|visible)$/;r("columns()",function(a,b){a===l?a="":h.isPlainObject(a)&&(b=a,a="");var b=$a(b),c=this.iterator("table",function(b){var c=a,f=b.aoColumns,g=C(f,"sName"),j=C(f,"nTh");return Za(c,function(a){var c=Ob(a);if(a==="")return S(f.length);if(c!==null)return[c>=0?c:f.length+c];var e=typeof a==="string"?a.match(ac):"";if(e)switch(e[2]){case "visIdx":case "visible":a=parseInt(e[1],10);if(a<0){c=h.map(f,function(a,
b){return a.bVisible?b:null});return[c[c.length+a]]}return[ga(b,a)];case "name":return h.map(g,function(a,b){return a===e[1]?b:null})}else return h(j).filter(a).map(function(){return h.inArray(this,j)}).toArray()})});c.selector.cols=a;c.selector.opts=b;return c});v("columns().header()","column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh})});v("columns().footer()","column().footer()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf})});
v("columns().data()","column().data()",function(){return this.iterator("column-rows",function(a,b,c,d,e){for(var c=[],d=0,f=e.length;d<f;d++)c.push(A(a,e[d],b,""));return c})});v("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return xa(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)})});v("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return xa(a.aoData,e,"anCells",b)})});v("columns().visible()",
"column().visible()",function(a,b){return this.iterator("column",function(c,d){var e;if(a===l)e=c.aoColumns[d].bVisible;else{var f=c.aoColumns;e=f[d];var g=c.aoData,j,i,n;if(a===l)e=e.bVisible;else{if(e.bVisible!==a){if(a){var m=h.inArray(!0,C(f,"bVisible"),d+1);j=0;for(i=g.length;j<i;j++)n=g[j].nTr,f=g[j].anCells,n&&n.insertBefore(f[d],f[m]||null)}else h(C(c.aoData,"anCells",d)).detach();e.bVisible=a;ba(c,c.aoHeader);ba(c,c.aoFooter);if(b===l||b)V(c),(c.oScroll.sX||c.oScroll.sY)&&W(c);u(c,null,"column-visibility",
[c,d,a]);ta(c)}e=void 0}}return e})});v("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?Y(b,c):c})});r("columns.adjust()",function(){return this.iterator("table",function(a){V(a)})});r("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return ga(c,b);if("fromData"===a||"toVisible"===a)return Y(c,b)}});r("column()",function(a,b){return ab(this.columns(a,b))});r("cells()",
function(a,b,c){h.isPlainObject(a)&&(typeof a.row!==l?(c=b,b=null):(c=a,a=null));h.isPlainObject(b)&&(c=b,b=null);if(null===b||b===l)return this.iterator("table",function(b){var d=a,e=$a(c),f=b.aoData,g=Ya(b,e),e=xa(f,g,"anCells"),j=h([].concat.apply([],e)),i,m=b.aoColumns.length,n,p,r,q;return Za(d,function(a){if(a===null||a===l){n=[];p=0;for(r=g.length;p<r;p++){i=g[p];for(q=0;q<m;q++)n.push({row:i,column:q})}return n}return h.isPlainObject(a)?[a]:j.filter(a).map(function(a,b){i=b.parentNode._DT_RowIndex;
return{row:i,column:h.inArray(b,f[i].anCells)}}).toArray()})});var d=this.columns(b,c),e=this.rows(a,c),f,g,j,i,n,m=this.iterator("table",function(a,b){f=[];g=0;for(j=e[b].length;g<j;g++){i=0;for(n=d[b].length;i<n;i++)f.push({row:e[b][g],column:d[b][i]})}return f});h.extend(m.selector,{cols:b,rows:a,opts:c});return m});v("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return a.aoData[b].anCells[c]})});r("cells().data()",function(){return this.iterator("cell",
function(a,b,c){return A(a,b,c)})});v("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]})});v("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:Y(a,c)}})});r(["cells().invalidate()","cell().invalidate()"],function(a){var b=this.selector;this.rows(b.rows,b.opts).invalidate(a);return this});r("cell()",function(a,b,
c){return ab(this.cells(a,b,c))});r("cell().data()",function(a){var b=this.context,c=this[0];if(a===l)return b.length&&c.length?A(b[0],c[0].row,c[0].column):l;Ea(b[0],c[0].row,c[0].column,a);la(b[0],c[0].row,"data",c[0].column);return this});r("order()",function(a,b){var c=this.context;if(a===l)return 0!==c.length?c[0].aaSorting:l;"number"===typeof a?a=[[a,b]]:h.isArray(a[0])||(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});r("order.listener()",
function(a,b,c){return this.iterator("table",function(d){Ka(d,a,b,c)})});r(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,d){var e=[];h.each(b[d],function(b,c){e.push([c,a])});c.aaSorting=e})});r("search()",function(a,b,c,d){var e=this.context;return a===l?0!==e.length?e[0].oPreviousSearch.sSearch:l:this.iterator("table",function(e){e.oFeatures.bFilter&&ca(e,h.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:
c,bCaseInsensitive:null===d?!0:d}),1)})});v("columns().search()","column().search()",function(a,b,c,d){return this.iterator("column",function(e,f){var g=e.aoPreSearchCols;if(a===l)return g[f].sSearch;e.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),ca(e,e.oPreviousSearch,1))})});r("state()",function(){return this.context.length?this.context[0].oSavedState:null});r("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,
a,{})})});r("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});r("state.save()",function(){return this.iterator("table",function(a){ta(a)})});p.versionCheck=p.fnVersionCheck=function(a){for(var b=p.version.split("."),a=a.split("."),c,d,e=0,f=a.length;e<f;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0};p.isDataTable=p.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;h.each(p.settings,function(a,e){if(e.nTable===b||e.nScrollHead===
b||e.nScrollFoot===b)c=!0});return c};p.tables=p.fnTables=function(a){return jQuery.map(p.settings,function(b){if(!a||a&&h(b.nTable).is(":visible"))return b.nTable})};p.camelToHungarian=G;r("$()",function(a,b){var c=this.rows(b).nodes(),c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))});h.each(["on","one","off"],function(a,b){r(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||(a[0]+=".dt");var d=h(this.tables().nodes());d[b].apply(d,a);return this})});
r("clear()",function(){return this.iterator("table",function(a){ja(a)})});r("settings()",function(){return new q(this.context,this.context)});r("data()",function(){return this.iterator("table",function(a){return C(a.aoData,"_aData")}).flatten()});r("destroy()",function(a){a=a||!1;return this.iterator("table",function(b){var c=b.nTableWrapper.parentNode,d=b.oClasses,e=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(e),f=h(f),l=h(b.nTableWrapper),m=h.map(b.aoData,function(a){return a.nTr}),o;b.bDestroying=
!0;u(b,"aoDestroyCallback","destroy",[b]);a||(new q(b)).columns().visible(!0);l.unbind(".DT").find(":not(tbody *)").unbind(".DT");h(za).unbind(".DT-"+b.sInstance);e!=g.parentNode&&(i.children("thead").detach(),i.append(g));j&&e!=j.parentNode&&(i.children("tfoot").detach(),i.append(j));i.detach();l.detach();b.aaSorting=[];b.aaSortingFixed=[];sa(b);h(m).removeClass(b.asStripeClasses.join(" "));h("th, td",g).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone);b.bJUI&&
(h("th span."+d.sSortIcon+", td span."+d.sSortIcon,g).detach(),h("th, td",g).each(function(){var a=h("div."+d.sSortJUIWrapper,this);h(this).append(a.contents());a.detach()}));!a&&c&&c.insertBefore(e,b.nTableReinsertBefore);f.children().detach();f.append(m);i.css("width",b.sDestroyWidth).removeClass(d.sTable);(o=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%o])});c=h.inArray(b,p.settings);-1!==c&&p.settings.splice(c,1)})});p.version="1.10.2";p.settings=
[];p.models={};p.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};p.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null};p.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",
sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};p.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,
fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,
fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},
sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},p.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",sPaginationType:"simple_numbers",
sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};T(p.defaults);p.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};T(p.defaults.column);p.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,
bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],
aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:l,oAjaxData:l,
fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==z(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==z(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=
this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};p.ext=t={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:p.fnVersionCheck,
iApiIndex:0,oJUIClasses:{},sVersion:p.version};h.extend(t,{afnFiltering:t.search,aTypes:t.type.detect,ofnSearch:t.type.search,oSort:t.type.order,afnSortData:t.order,aoFeatures:t.feature,oApi:t.internal,oStdClasses:t.classes,oPagination:t.pager});h.extend(p.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",
sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",
sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var ya="",ya="",E=ya+"ui-state-default",ea=ya+"css_right ui-icon ui-icon-",Ub=ya+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";h.extend(p.ext.oJUIClasses,p.ext.classes,{sPageButton:"fg-button ui-button "+E,sPageButtonActive:"ui-state-disabled",
sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:E+" sorting_asc",sSortDesc:E+" sorting_desc",sSortable:E+" sorting",sSortableAsc:E+" sorting_asc_disabled",sSortableDesc:E+" sorting_desc_disabled",sSortableNone:E+" sorting_disabled",sSortJUIAsc:ea+"triangle-1-n",sSortJUIDesc:ea+"triangle-1-s",sSortJUI:ea+"carat-2-n-s",sSortJUIAscAllowed:ea+"carat-1-n",sSortJUIDescAllowed:ea+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",
sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+E,sScrollFoot:"dataTables_scrollFoot "+E,sHeaderTH:E,sFooterTH:E,sJUIHeader:Ub+" ui-corner-tl ui-corner-tr",sJUIFooter:Ub+" ui-corner-bl ui-corner-br"});var Lb=p.ext.pager;h.extend(Lb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",Ua(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Ua(a,b),"next","last"]},_numbers:Ua,
numbers_length:7});h.extend(!0,p.ext.renderer,{pageButton:{_:function(a,b,c,d,e,f){var g=a.oClasses,j=a.oLanguage.oPaginate,i,l,m=0,o=function(b,d){var k,p,r,q,s=function(b){Ra(a,b.data.action,true)};k=0;for(p=d.length;k<p;k++){q=d[k];if(h.isArray(q)){r=h("<"+(q.DT_el||"div")+"/>").appendTo(b);o(r,q)}else{l=i="";switch(q){case "ellipsis":b.append("<span>&hellip;</span>");break;case "first":i=j.sFirst;l=q+(e>0?"":" "+g.sPageButtonDisabled);break;case "previous":i=j.sPrevious;l=q+(e>0?"":" "+g.sPageButtonDisabled);
break;case "next":i=j.sNext;l=q+(e<f-1?"":" "+g.sPageButtonDisabled);break;case "last":i=j.sLast;l=q+(e<f-1?"":" "+g.sPageButtonDisabled);break;default:i=q+1;l=e===q?g.sPageButtonActive:""}if(i){r=h("<a>",{"class":g.sPageButton+" "+l,"aria-controls":a.sTableId,"data-dt-idx":m,tabindex:a.iTabIndex,id:c===0&&typeof q==="string"?a.sTableId+"_"+q:null}).html(i).appendTo(b);Ta(r,{action:q},s);m++}}}};try{var k=h(O.activeElement).data("dt-idx");o(h(b).empty(),d);k!==null&&h(b).find("[data-dt-idx="+k+"]").focus()}catch(p){}}}});
var va=function(a,b,c,d){if(!a||"-"===a)return-Infinity;b&&(a=Pb(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};h.extend(t.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return H(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return H(a)?"":"string"===typeof a?a.toLowerCase():!a.toString?"":a.toString()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>
b?-1:0}});cb("");h.extend(p.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Xa(a,c)?"num"+c:null},function(a){if(a&&(!Yb.test(a)||!Zb.test(a)))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||H(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return Xa(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Qb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Qb(a,c,!0)?"html-num-fmt"+c:null},function(a){return H(a)||"string"===
typeof a&&-1!==a.indexOf("<")?"html":null}]);h.extend(p.ext.type.search,{html:function(a){return H(a)?a:"string"===typeof a?a.replace(Nb," ").replace(wa,""):""},string:function(a){return H(a)?a:"string"===typeof a?a.replace(Nb," "):a}});h.extend(!0,p.ext.renderer,{header:{_:function(a,b,c,d){h(a.nTable).on("order.dt.DT",function(e,f,g,h){if(a===f){e=c.idx;b.removeClass(c.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass(h[e]=="asc"?d.sSortAsc:h[e]=="desc"?d.sSortDesc:c.sSortingClass)}})},jqueryui:function(a,
b,c,d){var e=c.idx;h("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(h("<span/>").addClass(d.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b);h(a.nTable).on("order.dt.DT",function(f,g,h,i){if(a===g){b.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass(i[e]=="asc"?d.sSortAsc:i[e]=="desc"?d.sSortDesc:c.sSortingClass);b.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass(i[e]=="asc"?d.sSortJUIAsc:
i[e]=="desc"?d.sSortJUIDesc:c.sSortingClassJUI)}})}}});p.render={number:function(a,b,c,d){return{display:function(e){var f=0>e?"-":"",e=Math.abs(parseFloat(e)),g=parseInt(e,10),e=c?b+(e-g).toFixed(c).substring(2):"";return f+(d||"")+g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+e}}}};h.extend(p.ext.internal,{_fnExternApiFunc:Mb,_fnBuildAjax:na,_fnAjaxUpdate:jb,_fnAjaxParameters:sb,_fnAjaxUpdateDraw:tb,_fnAjaxDataSrc:oa,_fnAddColumn:Aa,_fnColumnOptions:fa,_fnAdjustColumnSizing:V,_fnVisibleToColumnIndex:ga,
_fnColumnIndexToVisible:Y,_fnVisbleColumns:Z,_fnGetColumns:X,_fnColumnTypes:Da,_fnApplyColumnDefs:hb,_fnHungarianMap:T,_fnCamelToHungarian:G,_fnLanguageCompat:N,_fnBrowserDetect:fb,_fnAddData:I,_fnAddTr:ha,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==l?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:A,_fnSetCellData:Ea,_fnSplitObjNotation:Ga,_fnGetObjectDataFn:U,_fnSetObjectDataFn:Ba,_fnGetDataMaster:Ha,_fnClearTable:ja,
_fnDeleteIndex:ka,_fnInvalidateRow:la,_fnGetRowElements:ia,_fnCreateTr:Fa,_fnBuildHead:ib,_fnDrawHead:ba,_fnDraw:K,_fnReDraw:L,_fnAddOptionsHtml:lb,_fnDetectHeader:aa,_fnGetUniqueThs:ma,_fnFeatureHtmlFilter:nb,_fnFilterComplete:ca,_fnFilterCustom:wb,_fnFilterColumn:vb,_fnFilter:ub,_fnFilterCreateSearch:Na,_fnEscapeRegex:Oa,_fnFilterData:xb,_fnFeatureHtmlInfo:qb,_fnUpdateInfo:Ab,_fnInfoMacros:Bb,_fnInitialise:ra,_fnInitComplete:pa,_fnLengthChange:Pa,_fnFeatureHtmlLength:mb,_fnFeatureHtmlPaginate:rb,
_fnPageChange:Ra,_fnFeatureHtmlProcessing:ob,_fnProcessingDisplay:B,_fnFeatureHtmlTable:pb,_fnScrollDraw:W,_fnApplyToChildren:F,_fnCalculateColumnWidths:Ca,_fnThrottle:Ma,_fnConvertToWidth:Cb,_fnScrollingWidthAdjust:Eb,_fnGetWidestNode:Db,_fnGetMaxLenString:Fb,_fnStringToCss:s,_fnScrollBarWidth:Gb,_fnSortFlatten:R,_fnSort:kb,_fnSortAria:Ib,_fnSortListener:Sa,_fnSortAttachListener:Ka,_fnSortingClasses:sa,_fnSortData:Hb,_fnSaveState:ta,_fnLoadState:Jb,_fnSettingsFromNode:ua,_fnLog:P,_fnMap:D,_fnBindAction:Ta,
_fnCallbackReg:x,_fnCallbackFire:u,_fnLengthOverflow:Qa,_fnRenderer:La,_fnDataSource:z,_fnRowAttributes:Ia,_fnCalculateEnd:function(){}});h.fn.dataTable=p;h.fn.dataTableSettings=p.settings;h.fn.dataTableExt=p.ext;h.fn.DataTable=function(a){return h(this).dataTable(a).api()};h.each(p,function(a,b){h.fn.DataTable[a]=b});return h.fn.dataTable};"function"===typeof define&&define.amd?define("datatables",["jquery"],N):"object"===typeof exports?N(require("jquery")):jQuery&&!jQuery.fn.dataTable&&N(jQuery)})(window,
document);

/*!
 TableTools 2.2.3
 2009-2014 SpryMedia Ltd - datatables.net/license

 ZeroClipboard 1.0.4
 Author: Joseph Huckaby - MIT licensed
*/
var TableTools;
(function(n,k,q){var p=function(m,p){var g={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){"string"==typeof a&&(a=k.getElementById(a));a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a);this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(RegExp("\\s*"+a+
"\\s*"))});return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,c){(a=this.clients[a])&&a.receiveEvent(b,c)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a){var b={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};""!==a.style.width&&(b.width=a.style.width.replace("px",""));""!==a.style.height&&(b.height=a.style.height.replace("px",""));for(;a;)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;return b},
Client:function(a){this.handlers={};this.id=g.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;g.register(this.id,this);a&&this.glue(a)}};g.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(a,b){this.domElement=g.$(a);var c=99;this.domElement.style.zIndex&&(c=parseInt(this.domElement.style.zIndex,10)+1);var d=g.getDOMObjectPosition(this.domElement);this.div=k.createElement("div");var f=
this.div.style;f.position="absolute";f.left="0px";f.top="0px";f.width=d.width+"px";f.height=d.height+"px";f.zIndex=c;"undefined"!=typeof b&&""!==b&&(this.div.title=b);0!==d.width&&0!==d.height&&(this.sized=!0);this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(d.width,d.height).replace(/&/g,"&amp;"))},positionElement:function(){var a=g.getDOMObjectPosition(this.domElement),b=this.div.style;b.position="absolute";b.width=a.width+"px";b.height=a.height+"px";0!==a.width&&
0!==a.height&&(this.sized=!0,b=this.div.childNodes[0],b.width=a.width,b.height=a.height)},getHTML:function(a,b){var c="",d="id="+this.id+"&width="+a+"&height="+b;if(navigator.userAgent.match(/MSIE/))var f=location.href.match(/^https/i)?"https://":"http://",c=c+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+f+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+
g.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>');else c+='<embed id="'+this.movieId+'" src="'+g.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+
d+'" wmode="transparent" />';return c},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=k.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(b){}this.div=this.domElement=null}},reposition:function(a){a&&((this.domElement=g.$(a))||this.hide());if(this.domElement&&this.div){var a=g.getDOMObjectPosition(this.domElement),b=this.div.style;b.left=""+a.left+
"px";b.top=""+a.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a;this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a;this.ready&&this.movie.setText(a)},setCharSet:function(a){this.charSet=a;this.ready&&this.movie.setCharSet(a)},setBomInc:function(a){this.incBom=a;this.ready&&this.movie.setBomInc(a)},setFileName:function(a){this.fileName=a;this.ready&&this.movie.setFileName(a)},setAction:function(a){this.action=
a;this.ready&&this.movie.setAction(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){var c,a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=k.getElementById(this.movieId);if(!this.movie){c=this;setTimeout(function(){c.receiveEvent("load",
null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){c=this;setTimeout(function(){c.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);break;case "mouseover":this.domElement&&this.cssEffects&&
this.recoverActive&&this.domElement.addClass("active");break;case "mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var d=0,f=this.handlers[a].length;d<
f;d++){var e=this.handlers[a][d];if("function"==typeof e)e(this,b);else if("object"==typeof e&&2==e.length)e[0][e[1]](this,b);else if("string"==typeof e)n[e](this,b)}}};n.ZeroClipboard_TableTools=g;var e=jQuery;TableTools=function(a,b){!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:e.fn.dataTable.Api?(new e.fn.dataTable.Api(a)).settings()[0]:a.fnSettings(),print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},
buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,background:null}};this.classes=e.extend(!0,{},TableTools.classes);this.s.dt.bJUI&&e.extend(!0,this.classes,TableTools.classes_themeroller);this.fnSettings=function(){return this.s};"undefined"==typeof b&&(b={});TableTools._aInstances.push(this);
this._fnConstruct(b);return this};TableTools.prototype={fnGetSelected:function(a){var b=[],c=this.s.dt.aoData,d=this.s.dt.aiDisplay,f;if(a){a=0;for(f=d.length;a<f;a++)c[d[a]]._DTTT_selected&&b.push(c[d[a]].nTr)}else{a=0;for(f=c.length;a<f;a++)c[a]._DTTT_selected&&b.push(c[a].nTr)}return b},fnGetSelectedData:function(){var a=[],b=this.s.dt.aoData,c,d;c=0;for(d=b.length;c<d;c++)b[c]._DTTT_selected&&a.push(this.s.dt.oInstance.fnGetData(c));return a},fnGetSelectedIndexes:function(a){var b=[],c=this.s.dt.aoData,
d=this.s.dt.aiDisplay,f;if(a){a=0;for(f=d.length;a<f;a++)c[d[a]]._DTTT_selected&&b.push(d[a])}else{a=0;for(f=c.length;a<f;a++)c[a]._DTTT_selected&&b.push(a)}return b},fnIsSelected:function(a){a=this.s.dt.oInstance.fnGetPosition(a);return!0===this.s.dt.aoData[a]._DTTT_selected?!0:!1},fnSelectAll:function(a){this._fnRowSelect(a?this.s.dt.aiDisplay:this.s.dt.aoData)},fnSelectNone:function(a){this._fnRowDeselect(this.fnGetSelectedIndexes(a))},fnSelect:function(a){"single"==this.s.select.type&&this.fnSelectNone();
this._fnRowSelect(a)},fnDeselect:function(a){this._fnRowDeselect(a)},fnGetTitle:function(a){var b="";"undefined"!=typeof a.sTitle&&""!==a.sTitle?b=a.sTitle:(a=k.getElementsByTagName("title"),0<a.length&&(b=a[0].innerHTML));return 4>"¡".toString().length?b.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):b.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(a){var b=this.s.dt.aoColumns,a=this._fnColumnTargets(a.mColumns),c=[],d=0,f=0,e,i;e=0;for(i=a.length;e<i;e++)a[e]&&(d=b[e].nTh.offsetWidth,
f+=d,c.push(d));e=0;for(i=c.length;e<i;e++)c[e]/=f;return c.join("\t")},fnGetTableData:function(a){if(this.s.dt)return this._fnGetDataTablesData(a)},fnSetText:function(a,b){this._fnFlashSetText(a,b)},fnResizeButtons:function(){for(var a in g.clients)if(a){var b=g.clients[a];"undefined"!=typeof b.domElement&&b.domElement.parentNode&&b.positionElement()}},fnResizeRequired:function(){for(var a in g.clients)if(a){var b=g.clients[a];if("undefined"!=typeof b.domElement&&b.domElement.parentNode==this.dom.container&&
!1===b.sized)return!0}return!1},fnPrint:function(a,b){b===q&&(b={});a===q||a?this._fnPrintStart(b):this._fnPrintEnd()},fnInfo:function(a,b){var c=e("<div/>").addClass(this.classes.print.info).html(a).appendTo("body");setTimeout(function(){c.fadeOut("normal",function(){c.remove()})},b)},fnContainer:function(){return this.dom.container},_fnConstruct:function(a){var b=this;this._fnCustomiseSettings(a);this.dom.container=k.createElement(this.s.tags.container);this.dom.container.className=this.classes.container;
"none"!=this.s.select.type&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){e(b.s.dt.nTBody).off("click.DTTT_Select","tr");e(b.dom.container).empty();var a=e.inArray(b,TableTools._aInstances);-1!==a&&TableTools._aInstances.splice(a,1)}})},_fnCustomiseSettings:function(a){"undefined"==typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=!0);this.dom.table=this.s.dt.nTable;
this.s.custom=e.extend({},TableTools.DEFAULTS,a);this.s.swfPath=this.s.custom.sSwfPath;"undefined"!=typeof g&&(g.moviePath=this.s.swfPath);this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass);this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},
_fnButtonDefinations:function(a,b){for(var c,d=0,f=a.length;d<f;d++){if("string"==typeof a[d]){if("undefined"==typeof TableTools.BUTTONS[a[d]]){alert("TableTools: Warning - unknown button type: "+a[d]);continue}c=e.extend({},TableTools.BUTTONS[a[d]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[a[d].sExtends]){alert("TableTools: Warning - unknown button type: "+a[d].sExtends);continue}c=e.extend({},TableTools.BUTTONS[a[d].sExtends],!0);c=e.extend(c,a[d],!0)}(c=this._fnCreateButton(c,e(b).hasClass(this.classes.collection.container)))&&
b.appendChild(c)}},_fnCreateButton:function(a,b){var c=this._fnButtonBase(a,b);if(a.sAction.match(/flash/)){if(!this._fnHasFlash())return!1;this._fnFlashConfig(c,a)}else"text"==a.sAction?this._fnTextConfig(c,a):"div"==a.sAction?this._fnTextConfig(c,a):"collection"==a.sAction&&(this._fnTextConfig(c,a),this._fnCollectionConfig(c,a));if(-1!==this.s.dt.iTabIndex)e(c).attr("tabindex",this.s.dt.iTabIndex).attr("aria-controls",this.s.dt.sTableId).on("keyup.DTTT",function(a){13===a.keyCode&&(a.stopPropagation(),
e(this).trigger("click"))}).on("mousedown.DTTT",function(b){a.sAction.match(/flash/)||b.preventDefault()});return c},_fnButtonBase:function(a,b){var c,d,f;b?(c=a.sTag&&"default"!==a.sTag?a.sTag:this.s.tags.collection.button,d=a.sLinerTag&&"default"!==a.sLinerTag?a.sLiner:this.s.tags.collection.liner,f=this.classes.collection.buttons.normal):(c=a.sTag&&"default"!==a.sTag?a.sTag:this.s.tags.button,d=a.sLinerTag&&"default"!==a.sLinerTag?a.sLiner:this.s.tags.liner,f=this.classes.buttons.normal);c=k.createElement(c);
d=k.createElement(d);var e=this._fnGetMasterSettings();c.className=f+" "+a.sButtonClass;c.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+e.buttonCounter);c.appendChild(d);d.innerHTML=a.sButtonText;e.buttonCounter++;return c},_fnGetMasterSettings:function(){if(this.s.master)return this.s;for(var a=TableTools._aInstances,b=0,c=a.length;b<c;b++)if(this.dom.table==a[b].s.dt.nTable)return a[b].s},_fnCollectionConfig:function(a,b){var c=k.createElement(this.s.tags.collection.container);c.style.display=
"none";c.className=this.classes.collection.container;b._collection=c;k.body.appendChild(c);this._fnButtonDefinations(b.aButtons,c)},_fnCollectionShow:function(a,b){var c=this,d=e(a).offset(),f=b._collection,j=d.left,d=d.top+e(a).outerHeight(),i=e(n).height(),h=e(k).height(),o=e(n).width(),g=e(k).width();f.style.position="absolute";f.style.left=j+"px";f.style.top=d+"px";f.style.display="block";e(f).css("opacity",0);var l=k.createElement("div");l.style.position="absolute";l.style.left="0px";l.style.top=
"0px";l.style.height=(i>h?i:h)+"px";l.style.width=(o>g?o:g)+"px";l.className=this.classes.collection.background;e(l).css("opacity",0);k.body.appendChild(l);k.body.appendChild(f);i=e(f).outerWidth();o=e(f).outerHeight();j+i>g&&(f.style.left=g-i+"px");d+o>h&&(f.style.top=d-o-e(a).outerHeight()+"px");this.dom.collection.collection=f;this.dom.collection.background=l;setTimeout(function(){e(f).animate({opacity:1},500);e(l).animate({opacity:0.25},500)},10);this.fnResizeButtons();e(l).click(function(){c._fnCollectionHide.call(c,
null,null)})},_fnCollectionHide:function(a,b){!(null!==b&&"collection"==b.sExtends)&&null!==this.dom.collection.collection&&(e(this.dom.collection.collection).animate({opacity:0},500,function(){this.style.display="none"}),e(this.dom.collection.background).animate({opacity:0},500,function(){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var a=this,b=this.s.dt;e(b.nTable).addClass(this.classes.select.table);
"os"===this.s.select.type&&(e(b.nTBody).on("mousedown.DTTT_Select","tr",function(a){if(a.shiftKey)e(b.nTBody).css("-moz-user-select","none").one("selectstart.DTTT_Select","tr",function(){return!1})}),e(b.nTBody).on("mouseup.DTTT_Select","tr",function(){e(b.nTBody).css("-moz-user-select","")}));e(b.nTBody).on("click.DTTT_Select",this.s.custom.sRowSelector,function(c){var d=this.nodeName.toLowerCase()==="tr"?this:e(this).parents("tr")[0],f=a.s.select,j=a.s.dt.oInstance.fnGetPosition(d);if(d.parentNode==
b.nTBody&&b.oInstance.fnGetData(d)!==null){if(f.type=="os")if(c.ctrlKey||c.metaKey)a.fnIsSelected(d)?a._fnRowDeselect(d,c):a._fnRowSelect(d,c);else if(c.shiftKey){var i=a.s.dt.aiDisplay.slice(),h=e.inArray(f.lastRow,i),o=e.inArray(j,i);if(a.fnGetSelected().length===0||h===-1)i.splice(e.inArray(j,i)+1,i.length);else{if(h>o)var g=o,o=h,h=g;i.splice(o+1,i.length);i.splice(0,h)}if(a.fnIsSelected(d)){i.splice(e.inArray(j,i),1);a._fnRowDeselect(i,c)}else a._fnRowSelect(i,c)}else if(a.fnIsSelected(d)&&a.fnGetSelected().length===
1)a._fnRowDeselect(d,c);else{a.fnSelectNone();a._fnRowSelect(d,c)}else if(a.fnIsSelected(d))a._fnRowDeselect(d,c);else if(f.type=="single"){a.fnSelectNone();a._fnRowSelect(d,c)}else f.type=="multi"&&a._fnRowSelect(d,c);f.lastRow=j}});b.oApi._fnCallbackReg(b,"aoRowCreatedCallback",function(c,d,f){b.aoData[f]._DTTT_selected&&e(c).addClass(a.classes.select.row)},"TableTools-SelectAll")}},_fnRowSelect:function(a,b){var c=this._fnSelectData(a),d=[],f,j;f=0;for(j=c.length;f<j;f++)c[f].nTr&&d.push(c[f].nTr);
if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,b,d,!0)){f=0;for(j=c.length;f<j;f++)c[f]._DTTT_selected=!0,c[f].nTr&&e(c[f].nTr).addClass(this.classes.select.row);null!==this.s.select.postSelected&&this.s.select.postSelected.call(this,d);TableTools._fnEventDispatch(this,"select",d,!0)}},_fnRowDeselect:function(a,b){var c=this._fnSelectData(a),d=[],f,j;f=0;for(j=c.length;f<j;f++)c[f].nTr&&d.push(c[f].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,
b,d,!1)){f=0;for(j=c.length;f<j;f++)c[f]._DTTT_selected=!1,c[f].nTr&&e(c[f].nTr).removeClass(this.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,d);TableTools._fnEventDispatch(this,"select",d,!1)}},_fnSelectData:function(a){var b=[],c,d,f;if(a.nodeName)c=this.s.dt.oInstance.fnGetPosition(a),b.push(this.s.dt.aoData[c]);else if("undefined"!==typeof a.length){d=0;for(f=a.length;d<f;d++)a[d].nodeName?(c=this.s.dt.oInstance.fnGetPosition(a[d]),b.push(this.s.dt.aoData[c])):
"number"===typeof a[d]?b.push(this.s.dt.aoData[a[d]]):b.push(a[d])}else b.push(a);return b},_fnTextConfig:function(a,b){var c=this;null!==b.fnInit&&b.fnInit.call(this,a,b);""!==b.sToolTip&&(a.title=b.sToolTip);e(a).hover(function(){b.fnMouseover!==null&&b.fnMouseover.call(this,a,b,null)},function(){b.fnMouseout!==null&&b.fnMouseout.call(this,a,b,null)});null!==b.fnSelect&&TableTools._fnEventListen(this,"select",function(d){b.fnSelect.call(c,a,b,d)});e(a).click(function(d){b.fnClick!==null&&b.fnClick.call(c,
a,b,null,d);b.fnComplete!==null&&b.fnComplete.call(c,a,b,null,null);c._fnCollectionHide(a,b)})},_fnHasFlash:function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(a){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==q&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},_fnFlashConfig:function(a,b){var c=this,d=new g.Client;null!==b.fnInit&&b.fnInit.call(this,a,b);d.setHandCursor(!0);"flash_save"==b.sAction?
(d.setAction("save"),d.setCharSet("utf16le"==b.sCharSet?"UTF16LE":"UTF8"),d.setBomInc(b.bBomInc),d.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):"flash_pdf"==b.sAction?(d.setAction("pdf"),d.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):d.setAction("copy");d.addEventListener("mouseOver",function(){b.fnMouseover!==null&&b.fnMouseover.call(c,a,b,d)});d.addEventListener("mouseOut",function(){b.fnMouseout!==null&&b.fnMouseout.call(c,a,b,d)});d.addEventListener("mouseDown",function(){b.fnClick!==
null&&b.fnClick.call(c,a,b,d)});d.addEventListener("complete",function(f,e){b.fnComplete!==null&&b.fnComplete.call(c,a,b,d,e);c._fnCollectionHide(a,b)});this._fnFlashGlue(d,a,b.sToolTip)},_fnFlashGlue:function(a,b,c){var d=this,f=b.getAttribute("id");k.getElementById(f)?a.glue(b,c):setTimeout(function(){d._fnFlashGlue(a,b,c)},100)},_fnFlashSetText:function(a,b){var c=this._fnChunkData(b,8192);a.clearText();for(var d=0,f=c.length;d<f;d++)a.appendText(c[d])},_fnColumnTargets:function(a){var b=[],c=
this.s.dt,d,f=c.aoColumns;d=f.length;if("function"==typeof a){a=a.call(this,c);for(c=0;c<d;c++)b.push(-1!==e.inArray(c,a)?!0:!1)}else if("object"==typeof a){for(c=0;c<d;c++)b.push(!1);c=0;for(d=a.length;c<d;c++)b[a[c]]=!0}else if("visible"==a)for(c=0;c<d;c++)b.push(f[c].bVisible?!0:!1);else if("hidden"==a)for(c=0;c<d;c++)b.push(f[c].bVisible?!1:!0);else if("sortable"==a)for(c=0;c<d;c++)b.push(f[c].bSortable?!0:!1);else for(c=0;c<d;c++)b.push(!0);return b},_fnNewline:function(a){return"auto"==a.sNewLine?
navigator.userAgent.match(/Windows/)?"\r\n":"\n":a.sNewLine},_fnGetDataTablesData:function(a){var b,c,d,f,j,i=[],h="",g=this.s.dt,k,l=RegExp(a.sFieldBoundary,"g"),n=this._fnColumnTargets(a.mColumns);d="undefined"!=typeof a.bSelectedOnly?a.bSelectedOnly:!1;if(a.bHeader){j=[];b=0;for(c=g.aoColumns.length;b<c;b++)n[b]&&(h=g.aoColumns[b].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),h=this._fnHtmlDecode(h),j.push(this._fnBoundData(h,a.sFieldBoundary,l)));i.push(j.join(a.sFieldSeperator))}d=
!0;var m;f=this.fnGetSelectedIndexes();m=(d="none"!==this.s.select.type&&d&&0!==f.length)?f:p.Api?(new p.Api(g)).rows(a.oSelectorOpts).indexes().flatten().toArray():g.oInstance.$("tr",a.oSelectorOpts).map(function(a,b){return g.oInstance.fnGetPosition(b)}).get();d=0;for(f=m.length;d<f;d++){k=g.aoData[m[d]].nTr;j=[];b=0;for(c=g.aoColumns.length;b<c;b++)n[b]&&(h=g.oApi._fnGetCellData(g,m[d],b,"display"),a.fnCellRender?h=a.fnCellRender(h,b,k,m[d])+"":"string"==typeof h?(h=h.replace(/\n/g," "),h=h.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,
"$1$2$3"),h=h.replace(/<.*?>/g,"")):h+="",h=h.replace(/^\s+/,"").replace(/\s+$/,""),h=this._fnHtmlDecode(h),j.push(this._fnBoundData(h,a.sFieldBoundary,l)));i.push(j.join(a.sFieldSeperator));a.bOpenRows&&(b=e.grep(g.aoOpenRows,function(a){return a.nParent===k}),1===b.length&&(h=this._fnBoundData(e("td",b[0].nTr).html(),a.sFieldBoundary,l),i.push(h)))}if(a.bFooter&&null!==g.nTFoot){j=[];b=0;for(c=g.aoColumns.length;b<c;b++)n[b]&&null!==g.aoColumns[b].nTf&&(h=g.aoColumns[b].nTf.innerHTML.replace(/\n/g,
" ").replace(/<.*?>/g,""),h=this._fnHtmlDecode(h),j.push(this._fnBoundData(h,a.sFieldBoundary,l)));i.push(j.join(a.sFieldSeperator))}return i.join(this._fnNewline(a))},_fnBoundData:function(a,b,c){return""===b?a:b+a.replace(c,b+b)+b},_fnChunkData:function(a,b){for(var c=[],d=a.length,f=0;f<d;f+=b)f+b<d?c.push(a.substring(f,f+b)):c.push(a.substring(f,d));return c},_fnHtmlDecode:function(a){if(-1===a.indexOf("&"))return a;var b=k.createElement("div");return a.replace(/&([^\s]*?);/g,function(a,d){if("#"===
a.substr(1,1))return String.fromCharCode(Number(d.substr(1)));b.innerHTML=a;return b.childNodes[0].nodeValue})},_fnPrintStart:function(a){var b=this,c=this.s.dt;this._fnPrintHideNodes(c.nTable);this.s.print.saveStart=c._iDisplayStart;this.s.print.saveLength=c._iDisplayLength;a.bShowAll&&(c._iDisplayStart=0,c._iDisplayLength=-1,c.oApi._fnCalculateEnd&&c.oApi._fnCalculateEnd(c),c.oApi._fnDraw(c));if(""!==c.oScroll.sX||""!==c.oScroll.sY)this._fnPrintScrollStart(c),e(this.s.dt.nTable).bind("draw.DTTT_Print",
function(){b._fnPrintScrollStart(c)});var d=c.aanFeatures,f;for(f in d)if("i"!=f&&"t"!=f&&1==f.length)for(var g=0,i=d[f].length;g<i;g++)this.dom.print.hidden.push({node:d[f][g],display:"block"}),d[f][g].style.display="none";e(k.body).addClass(this.classes.print.body);""!==a.sInfo&&this.fnInfo(a.sInfo,3E3);a.sMessage&&e("<div/>").addClass(this.classes.print.message).html(a.sMessage).prependTo("body");this.s.print.saveScroll=e(n).scrollTop();n.scrollTo(0,0);e(k).bind("keydown.DTTT",function(a){if(a.keyCode==
27){a.preventDefault();b._fnPrintEnd.call(b,a)}})},_fnPrintEnd:function(){var a=this.s.dt,b=this.s.print;this._fnPrintShowNodes();if(""!==a.oScroll.sX||""!==a.oScroll.sY)e(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd();n.scrollTo(0,b.saveScroll);e("div."+this.classes.print.message).remove();e(k.body).removeClass("DTTT_Print");a._iDisplayStart=b.saveStart;a._iDisplayLength=b.saveLength;a.oApi._fnCalculateEnd&&a.oApi._fnCalculateEnd(a);a.oApi._fnDraw(a);e(k).unbind("keydown.DTTT")},
_fnPrintScrollStart:function(){var a=this.s.dt;a.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var b=a.nTable.parentNode,c;c=a.nTable.getElementsByTagName("thead");0<c.length&&a.nTable.removeChild(c[0]);null!==a.nTFoot&&(c=a.nTable.getElementsByTagName("tfoot"),0<c.length&&a.nTable.removeChild(c[0]));c=a.nTHead.cloneNode(!0);a.nTable.insertBefore(c,a.nTable.childNodes[0]);null!==a.nTFoot&&(c=a.nTFoot.cloneNode(!0),a.nTable.insertBefore(c,a.nTable.childNodes[1]));""!==a.oScroll.sX&&
(a.nTable.style.width=e(a.nTable).outerWidth()+"px",b.style.width=e(a.nTable).outerWidth()+"px",b.style.overflow="visible");""!==a.oScroll.sY&&(b.style.height=e(a.nTable).outerHeight()+"px",b.style.overflow="visible")},_fnPrintScrollEnd:function(){var a=this.s.dt,b=a.nTable.parentNode;""!==a.oScroll.sX&&(b.style.width=a.oApi._fnStringToCss(a.oScroll.sX),b.style.overflow="auto");""!==a.oScroll.sY&&(b.style.height=a.oApi._fnStringToCss(a.oScroll.sY),b.style.overflow="auto")},_fnPrintShowNodes:function(){for(var a=
this.dom.print.hidden,b=0,c=a.length;b<c;b++)a[b].node.style.display=a[b].display;a.splice(0,a.length)},_fnPrintHideNodes:function(a){for(var b=this.dom.print.hidden,c=a.parentNode,d=c.childNodes,f=0,g=d.length;f<g;f++)if(d[f]!=a&&1==d[f].nodeType){var i=e(d[f]).css("display");"none"!=i&&(b.push({node:d[f],display:i}),d[f].style.display="none")}"BODY"!=c.nodeName.toUpperCase()&&this._fnPrintHideNodes(c)}};TableTools._aInstances=[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){for(var a=
[],b=0,c=TableTools._aInstances.length;b<c;b++)TableTools._aInstances[b].s.master&&a.push(TableTools._aInstances[b]);return a};TableTools.fnGetInstance=function(a){"object"!=typeof a&&(a=k.getElementById(a));for(var b=0,c=TableTools._aInstances.length;b<c;b++)if(TableTools._aInstances[b].s.master&&TableTools._aInstances[b].dom.table==a)return TableTools._aInstances[b];return null};TableTools._fnEventListen=function(a,b,c){TableTools._aListeners.push({that:a,type:b,fn:c})};TableTools._fnEventDispatch=
function(a,b,c,d){for(var f=TableTools._aListeners,e=0,g=f.length;e<g;e++)a.dom.table==f[e].that.dom.table&&f[e].type==b&&f[e].fn(c,d)};TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,oSelectorOpts:q,fnMouseover:null,fnMouseout:null,
fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};TableTools.BUTTONS={csv:e.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))}}),xls:e.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))}}),
copy:e.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))},fnComplete:function(a,b,c,d){a=d.split("\n").length;b.bHeader&&a--;null!==this.s.dt.nTFoot&&b.bFooter&&a--;this.fnInfo("<h6>Table copied</h6><p>Copied "+a+" row"+(1==a?"":"s")+" to the clipboard.</p>",1500)}}),pdf:e.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",
sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(a,b,c){this.fnSetText(c,"title:"+this.fnGetTitle(b)+"\nmessage:"+b.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(b)+"\norientation:"+b.sPdfOrientation+"\nsize:"+b.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(b))}}),print:e.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.</p>",sMessage:null,bShowAll:!0,
sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(a,b){this.fnPrint(!0,b)}}),text:e.extend({},TableTools.buttonBase),select:e.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(a){0!==this.fnGetSelected().length?e(a).removeClass(this.classes.buttons.disabled):e(a).addClass(this.classes.buttons.disabled)},fnInit:function(a){e(a).addClass(this.classes.buttons.disabled)}}),select_single:e.extend({},TableTools.buttonBase,{sButtonText:"Select button",
fnSelect:function(a){1==this.fnGetSelected().length?e(a).removeClass(this.classes.buttons.disabled):e(a).addClass(this.classes.buttons.disabled)},fnInit:function(a){e(a).addClass(this.classes.buttons.disabled)}}),select_all:e.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(){this.fnSelectAll()},fnSelect:function(a){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?e(a).addClass(this.classes.buttons.disabled):e(a).removeClass(this.classes.buttons.disabled)}}),select_none:e.extend({},
TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(){this.fnSelectNone()},fnSelect:function(a){0!==this.fnGetSelected().length?e(a).removeClass(this.classes.buttons.disabled):e(a).addClass(this.classes.buttons.disabled)},fnInit:function(a){e(a).addClass(this.classes.buttons.disabled)}}),ajax:e.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(a,b){var c=this.fnGetTableData(b);e.ajax({url:b.sAjaxUrl,data:[{name:"tableData",value:c}],success:b.fnAjaxComplete,
dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(){alert("Ajax complete")}}),div:e.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:e.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(a,b){this._fnCollectionShow(a,b)}})};TableTools.buttons=TableTools.BUTTONS;
TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},
collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};TableTools.DEFAULTS={sSwfPath:"../swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sRowSelector:"tr",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};TableTools.defaults=TableTools.DEFAULTS;TableTools.prototype.CLASS="TableTools";TableTools.version="2.2.3";
e.fn.dataTable.Api&&e.fn.dataTable.Api.register("tabletools()",function(){var a=null;0<this.context.length&&(a=TableTools.fnGetInstance(this.context[0].nTable));return a});"function"==typeof e.fn.dataTable&&"function"==typeof e.fn.dataTableExt.fnVersionCheck&&e.fn.dataTableExt.fnVersionCheck("1.9.0")?e.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInit;return(new TableTools(a.oInstance,b?b.tableTools||b.oTableTools||{}:{})).dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools requires DataTables 1.9.0 or newer - www.datatables.net/download");
e.fn.DataTable.TableTools=TableTools;"function"==typeof m.fn.dataTable&&"function"==typeof m.fn.dataTableExt.fnVersionCheck&&m.fn.dataTableExt.fnVersionCheck("1.9.0")?m.fn.dataTableExt.aoFeatures.push({fnInit:function(a){a=new TableTools(a.oInstance,"undefined"!=typeof a.oInit.oTableTools?a.oInit.oTableTools:{});TableTools._aInstances.push(a);return a.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download");
m.fn.dataTable.TableTools=TableTools;return m.fn.DataTable.TableTools=TableTools};"function"===typeof define&&define.amd?define(["jquery","datatables"],p):"object"===typeof exports?p(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.TableTools&&p(jQuery,jQuery.fn.dataTable)})(window,document);

function $JSCompiler_alias_THROW$$($jscomp_throw_param$$){throw $jscomp_throw_param$$;}var $JSCompiler_alias_VOID$$=void 0,$JSCompiler_alias_TRUE$$=!0,$JSCompiler_alias_NULL$$=null,$JSCompiler_alias_FALSE$$=!1,$JSCompiler_prototypeAlias$$,$goog$global$$=this;
function $goog$typeOf$$($value$$38$$){var $s$$2$$=typeof $value$$38$$;if("object"==$s$$2$$)if($value$$38$$){if($value$$38$$ instanceof Array)return"array";if($value$$38$$ instanceof Object)return $s$$2$$;var $className$$1$$=Object.prototype.toString.call($value$$38$$);if("[object Window]"==$className$$1$$)return"object";if("[object Array]"==$className$$1$$||"number"==typeof $value$$38$$.length&&"undefined"!=typeof $value$$38$$.splice&&"undefined"!=typeof $value$$38$$.propertyIsEnumerable&&!$value$$38$$.propertyIsEnumerable("splice"))return"array";
if("[object Function]"==$className$$1$$||"undefined"!=typeof $value$$38$$.call&&"undefined"!=typeof $value$$38$$.propertyIsEnumerable&&!$value$$38$$.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==$s$$2$$&&"undefined"==typeof $value$$38$$.call)return"object";return $s$$2$$}function $goog$isArrayLike$$($val$$4$$){var $type$$46$$=$goog$typeOf$$($val$$4$$);return"array"==$type$$46$$||"object"==$type$$46$$&&"number"==typeof $val$$4$$.length}
function $goog$isString$$($val$$6$$){return"string"==typeof $val$$6$$}function $goog$isFunction$$($val$$9$$){return"function"==$goog$typeOf$$($val$$9$$)}function $goog$isObject$$($type$$47_val$$10$$){$type$$47_val$$10$$=$goog$typeOf$$($type$$47_val$$10$$);return"object"==$type$$47_val$$10$$||"array"==$type$$47_val$$10$$||"function"==$type$$47_val$$10$$}var $goog$UID_PROPERTY_$$="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),$goog$uidCounter_$$=0;
function $goog$bindNative_$$($fn$$,$selfObj$$1$$,$var_args$$17$$){return $fn$$.call.apply($fn$$.bind,arguments)}
function $goog$bindJs_$$($fn$$1$$,$selfObj$$2$$,$var_args$$18$$){$fn$$1$$||$JSCompiler_alias_THROW$$(Error());if(2<arguments.length){var $boundArgs$$=Array.prototype.slice.call(arguments,2);return function(){var $newArgs$$=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply($newArgs$$,$boundArgs$$);return $fn$$1$$.apply($selfObj$$2$$,$newArgs$$)}}return function(){return $fn$$1$$.apply($selfObj$$2$$,arguments)}}
function $goog$bind$$($fn$$2$$,$selfObj$$3$$,$var_args$$19$$){$goog$bind$$=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$goog$bindNative_$$:$goog$bindJs_$$;return $goog$bind$$.apply($JSCompiler_alias_NULL$$,arguments)}
function $goog$partial$$($fn$$3$$,$var_args$$20$$){var $args$$=Array.prototype.slice.call(arguments,1);return function(){var $newArgs$$1$$=Array.prototype.slice.call(arguments);$newArgs$$1$$.unshift.apply($newArgs$$1$$,$args$$);return $fn$$3$$.apply(this,$newArgs$$1$$)}}var $goog$now$$=Date.now||function(){return+new Date};
function $goog$inherits$$($childCtor$$,$parentCtor$$){function $tempCtor$$(){}$tempCtor$$.prototype=$parentCtor$$.prototype;$childCtor$$.$superClass_$=$parentCtor$$.prototype;$childCtor$$.prototype=new $tempCtor$$};function $goog$string$subs$$($str$$12$$,$var_args$$22$$){for(var $i$$5$$=1;$i$$5$$<arguments.length;$i$$5$$++)var $replacement$$=(""+arguments[$i$$5$$]).replace(/\$/g,"$$$$"),$str$$12$$=$str$$12$$.replace(/\%s/,$replacement$$);return $str$$12$$}function $goog$string$trim$$($str$$25$$){return $str$$25$$.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}
function $goog$string$htmlEscape$$($str$$31$$){if(!$goog$string$allRe_$$.test($str$$31$$))return $str$$31$$;-1!=$str$$31$$.indexOf("&")&&($str$$31$$=$str$$31$$.replace($goog$string$amperRe_$$,"&amp;"));-1!=$str$$31$$.indexOf("<")&&($str$$31$$=$str$$31$$.replace($goog$string$ltRe_$$,"&lt;"));-1!=$str$$31$$.indexOf(">")&&($str$$31$$=$str$$31$$.replace($goog$string$gtRe_$$,"&gt;"));-1!=$str$$31$$.indexOf('"')&&($str$$31$$=$str$$31$$.replace($goog$string$quotRe_$$,"&quot;"));return $str$$31$$}
var $goog$string$amperRe_$$=/&/g,$goog$string$ltRe_$$=/</g,$goog$string$gtRe_$$=/>/g,$goog$string$quotRe_$$=/\"/g,$goog$string$allRe_$$=/[&<>\"]/,$goog$string$toCamelCaseCache_$$={};function $goog$string$toCamelCase$$($str$$42$$){return $goog$string$toCamelCaseCache_$$[$str$$42$$]||($goog$string$toCamelCaseCache_$$[$str$$42$$]=(""+$str$$42$$).replace(/\-([a-z])/g,function($all$$,$match$$){return $match$$.toUpperCase()}))};var $goog$userAgent$detectedOpera_$$,$goog$userAgent$detectedIe_$$,$goog$userAgent$detectedWebkit_$$,$goog$userAgent$detectedGecko_$$;function $goog$userAgent$getUserAgentString$$(){return $goog$global$$.navigator?$goog$global$$.navigator.userAgent:$JSCompiler_alias_NULL$$}$goog$userAgent$detectedGecko_$$=$goog$userAgent$detectedWebkit_$$=$goog$userAgent$detectedIe_$$=$goog$userAgent$detectedOpera_$$=$JSCompiler_alias_FALSE$$;var $ua$$inline_9$$;
if($ua$$inline_9$$=$goog$userAgent$getUserAgentString$$()){var $navigator$$inline_10$$=$goog$global$$.navigator;$goog$userAgent$detectedOpera_$$=0==$ua$$inline_9$$.indexOf("Opera");$goog$userAgent$detectedIe_$$=!$goog$userAgent$detectedOpera_$$&&-1!=$ua$$inline_9$$.indexOf("MSIE");$goog$userAgent$detectedWebkit_$$=!$goog$userAgent$detectedOpera_$$&&-1!=$ua$$inline_9$$.indexOf("WebKit");$goog$userAgent$detectedGecko_$$=!$goog$userAgent$detectedOpera_$$&&!$goog$userAgent$detectedWebkit_$$&&"Gecko"==
$navigator$$inline_10$$.product}var $goog$userAgent$OPERA$$=$goog$userAgent$detectedOpera_$$,$goog$userAgent$IE$$=$goog$userAgent$detectedIe_$$,$goog$userAgent$GECKO$$=$goog$userAgent$detectedGecko_$$,$goog$userAgent$WEBKIT$$=$goog$userAgent$detectedWebkit_$$,$navigator$$inline_12$$=$goog$global$$.navigator,$goog$userAgent$MAC$$=-1!=($navigator$$inline_12$$&&$navigator$$inline_12$$.platform||"").indexOf("Mac"),$goog$userAgent$VERSION$$;
a:{var $version$$inline_15$$="",$re$$inline_16$$;if($goog$userAgent$OPERA$$&&$goog$global$$.opera)var $operaVersion$$inline_17$$=$goog$global$$.opera.version,$version$$inline_15$$="function"==typeof $operaVersion$$inline_17$$?$operaVersion$$inline_17$$():$operaVersion$$inline_17$$;else if($goog$userAgent$GECKO$$?$re$$inline_16$$=/rv\:([^\);]+)(\)|;)/:$goog$userAgent$IE$$?$re$$inline_16$$=/MSIE\s+([^\);]+)(\)|;)/:$goog$userAgent$WEBKIT$$&&($re$$inline_16$$=/WebKit\/(\S+)/),$re$$inline_16$$)var $arr$$inline_18$$=
$re$$inline_16$$.exec($goog$userAgent$getUserAgentString$$()),$version$$inline_15$$=$arr$$inline_18$$?$arr$$inline_18$$[1]:"";if($goog$userAgent$IE$$){var $docMode$$inline_19$$,$doc$$inline_137$$=$goog$global$$.document;$docMode$$inline_19$$=$doc$$inline_137$$?$doc$$inline_137$$.documentMode:$JSCompiler_alias_VOID$$;if($docMode$$inline_19$$>parseFloat($version$$inline_15$$)){$goog$userAgent$VERSION$$=""+$docMode$$inline_19$$;break a}}$goog$userAgent$VERSION$$=$version$$inline_15$$}
var $goog$userAgent$isVersionCache_$$={};
function $goog$userAgent$isVersion$$($version$$8$$){var $JSCompiler_temp$$5_order$$inline_23$$;if(!($JSCompiler_temp$$5_order$$inline_23$$=$goog$userAgent$isVersionCache_$$[$version$$8$$])){$JSCompiler_temp$$5_order$$inline_23$$=0;for(var $v1Subs$$inline_24$$=$goog$string$trim$$(""+$goog$userAgent$VERSION$$).split("."),$v2Subs$$inline_25$$=$goog$string$trim$$(""+$version$$8$$).split("."),$subCount$$inline_26$$=Math.max($v1Subs$$inline_24$$.length,$v2Subs$$inline_25$$.length),$subIdx$$inline_27$$=
0;0==$JSCompiler_temp$$5_order$$inline_23$$&&$subIdx$$inline_27$$<$subCount$$inline_26$$;$subIdx$$inline_27$$++){var $v1Sub$$inline_28$$=$v1Subs$$inline_24$$[$subIdx$$inline_27$$]||"",$v2Sub$$inline_29$$=$v2Subs$$inline_25$$[$subIdx$$inline_27$$]||"",$v1CompParser$$inline_30$$=RegExp("(\\d*)(\\D*)","g"),$v2CompParser$$inline_31$$=RegExp("(\\d*)(\\D*)","g");do{var $v1Comp$$inline_32$$=$v1CompParser$$inline_30$$.exec($v1Sub$$inline_28$$)||["","",""],$v2Comp$$inline_33$$=$v2CompParser$$inline_31$$.exec($v2Sub$$inline_29$$)||
["","",""];if(0==$v1Comp$$inline_32$$[0].length&&0==$v2Comp$$inline_33$$[0].length)break;$JSCompiler_temp$$5_order$$inline_23$$=((0==$v1Comp$$inline_32$$[1].length?0:parseInt($v1Comp$$inline_32$$[1],10))<(0==$v2Comp$$inline_33$$[1].length?0:parseInt($v2Comp$$inline_33$$[1],10))?-1:(0==$v1Comp$$inline_32$$[1].length?0:parseInt($v1Comp$$inline_32$$[1],10))>(0==$v2Comp$$inline_33$$[1].length?0:parseInt($v2Comp$$inline_33$$[1],10))?1:0)||((0==$v1Comp$$inline_32$$[2].length)<(0==$v2Comp$$inline_33$$[2].length)?
-1:(0==$v1Comp$$inline_32$$[2].length)>(0==$v2Comp$$inline_33$$[2].length)?1:0)||($v1Comp$$inline_32$$[2]<$v2Comp$$inline_33$$[2]?-1:$v1Comp$$inline_32$$[2]>$v2Comp$$inline_33$$[2]?1:0)}while(0==$JSCompiler_temp$$5_order$$inline_23$$)}$JSCompiler_temp$$5_order$$inline_23$$=$goog$userAgent$isVersionCache_$$[$version$$8$$]=0<=$JSCompiler_temp$$5_order$$inline_23$$}return $JSCompiler_temp$$5_order$$inline_23$$}var $goog$userAgent$isDocumentModeCache_$$={};
function $goog$userAgent$isDocumentMode$$(){return $goog$userAgent$isDocumentModeCache_$$[9]||($goog$userAgent$isDocumentModeCache_$$[9]=$goog$userAgent$IE$$&&document.documentMode&&9<=document.documentMode)};function $goog$object$forEach$$($obj$$21$$,$f$$){for(var $key$$16$$ in $obj$$21$$)$f$$.call($JSCompiler_alias_VOID$$,$obj$$21$$[$key$$16$$],$key$$16$$,$obj$$21$$)}var $goog$object$PROTOTYPE_FIELDS_$$="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
function $goog$object$extend$$($target$$35$$,$var_args$$25$$){for(var $key$$39$$,$source$$2$$,$i$$16$$=1;$i$$16$$<arguments.length;$i$$16$$++){$source$$2$$=arguments[$i$$16$$];for($key$$39$$ in $source$$2$$)$target$$35$$[$key$$39$$]=$source$$2$$[$key$$39$$];for(var $j$$1$$=0;$j$$1$$<$goog$object$PROTOTYPE_FIELDS_$$.length;$j$$1$$++)$key$$39$$=$goog$object$PROTOTYPE_FIELDS_$$[$j$$1$$],Object.prototype.hasOwnProperty.call($source$$2$$,$key$$39$$)&&($target$$35$$[$key$$39$$]=$source$$2$$[$key$$39$$])}}
;function $goog$debug$Error$$($opt_msg$$){this.stack=Error().stack||"";if($opt_msg$$)this.message=""+$opt_msg$$}$goog$inherits$$($goog$debug$Error$$,Error);$goog$debug$Error$$.prototype.name="CustomError";function $goog$asserts$AssertionError$$($messagePattern$$,$messageArgs$$){$messageArgs$$.unshift($messagePattern$$);$goog$debug$Error$$.call(this,$goog$string$subs$$.apply($JSCompiler_alias_NULL$$,$messageArgs$$));$messageArgs$$.shift();this.$messagePattern$=$messagePattern$$}$goog$inherits$$($goog$asserts$AssertionError$$,$goog$debug$Error$$);$goog$asserts$AssertionError$$.prototype.name="AssertionError";
function $goog$asserts$assert$$($condition$$,$opt_message$$8$$,$var_args$$29$$){if(!$condition$$){var $givenArgs$$inline_36$$=Array.prototype.slice.call(arguments,2),$message$$inline_37$$="Assertion failed";if($opt_message$$8$$)var $message$$inline_37$$=$message$$inline_37$$+(": "+$opt_message$$8$$),$args$$inline_38$$=$givenArgs$$inline_36$$;$JSCompiler_alias_THROW$$(new $goog$asserts$AssertionError$$(""+$message$$inline_37$$,$args$$inline_38$$||[]))}};var $goog$array$ARRAY_PROTOTYPE_$$=Array.prototype;function $goog$array$indexOf$$($arr$$12$$,$obj$$48$$){if($goog$isString$$($arr$$12$$))return!$goog$isString$$($obj$$48$$)||1!=$obj$$48$$.length?-1:$arr$$12$$.indexOf($obj$$48$$,0);for(var $i$$20$$=0;$i$$20$$<$arr$$12$$.length;$i$$20$$++)if($i$$20$$ in $arr$$12$$&&$arr$$12$$[$i$$20$$]===$obj$$48$$)return $i$$20$$;return-1}
function $goog$array$forEach$$($arr$$16$$,$f$$8$$,$opt_obj$$7$$){for(var $l$$2$$=$arr$$16$$.length,$arr2$$=$goog$isString$$($arr$$16$$)?$arr$$16$$.split(""):$arr$$16$$,$i$$22$$=0;$i$$22$$<$l$$2$$;$i$$22$$++)$i$$22$$ in $arr2$$&&$f$$8$$.call($opt_obj$$7$$,$arr2$$[$i$$22$$],$i$$22$$,$arr$$16$$)}
function $goog$array$map$$($arr$$21$$,$f$$13$$,$opt_obj$$12$$){for(var $l$$5$$=$arr$$21$$.length,$res$$6$$=Array($l$$5$$),$arr2$$3$$=$goog$isString$$($arr$$21$$)?$arr$$21$$.split(""):$arr$$21$$,$i$$25$$=0;$i$$25$$<$l$$5$$;$i$$25$$++)$i$$25$$ in $arr2$$3$$&&($res$$6$$[$i$$25$$]=$f$$13$$.call($opt_obj$$12$$,$arr2$$3$$[$i$$25$$],$i$$25$$,$arr$$21$$));return $res$$6$$}
function $goog$array$concat$$($var_args$$38$$){return $goog$array$ARRAY_PROTOTYPE_$$.concat.apply($goog$array$ARRAY_PROTOTYPE_$$,arguments)}function $goog$array$clone$$($arr$$42$$){if("array"==$goog$typeOf$$($arr$$42$$))return $goog$array$concat$$($arr$$42$$);for(var $rv$$7$$=[],$i$$37$$=0,$len$$=$arr$$42$$.length;$i$$37$$<$len$$;$i$$37$$++)$rv$$7$$[$i$$37$$]=$arr$$42$$[$i$$37$$];return $rv$$7$$}
function $goog$array$slice$$($arr$$44$$,$start$$5$$,$opt_end$$5$$){$goog$asserts$assert$$($arr$$44$$.length!=$JSCompiler_alias_NULL$$);return 2>=arguments.length?$goog$array$ARRAY_PROTOTYPE_$$.slice.call($arr$$44$$,$start$$5$$):$goog$array$ARRAY_PROTOTYPE_$$.slice.call($arr$$44$$,$start$$5$$,$opt_end$$5$$)};function $goog$dom$classes$add$$($element$$10$$,$var_args$$43$$){var $className$$inline_140_classes$$;$className$$inline_140_classes$$=($className$$inline_140_classes$$=$element$$10$$.className)&&"function"==typeof $className$$inline_140_classes$$.split?$className$$inline_140_classes$$.split(/\s+/):[];var $args$$3_args$$inline_41$$=$goog$array$slice$$(arguments,1),$b$$18_classes$$inline_40$$;$b$$18_classes$$inline_40$$=$className$$inline_140_classes$$;for(var $rv$$inline_42$$=0,$i$$inline_43$$=0;$i$$inline_43$$<
$args$$3_args$$inline_41$$.length;$i$$inline_43$$++)0<=$goog$array$indexOf$$($b$$18_classes$$inline_40$$,$args$$3_args$$inline_41$$[$i$$inline_43$$])||($b$$18_classes$$inline_40$$.push($args$$3_args$$inline_41$$[$i$$inline_43$$]),$rv$$inline_42$$++);$b$$18_classes$$inline_40$$=$rv$$inline_42$$==$args$$3_args$$inline_41$$.length;$element$$10$$.className=$className$$inline_140_classes$$.join(" ");return $b$$18_classes$$inline_40$$};var $goog$dom$BrowserFeature$CAN_ADD_NAME_OR_TYPE_ATTRIBUTES$$=!$goog$userAgent$IE$$||$goog$userAgent$isDocumentMode$$();!$goog$userAgent$GECKO$$&&!$goog$userAgent$IE$$||$goog$userAgent$IE$$&&$goog$userAgent$isDocumentMode$$()||$goog$userAgent$GECKO$$&&$goog$userAgent$isVersion$$("1.9.1");var $goog$dom$BrowserFeature$CAN_USE_INNER_TEXT$$=$goog$userAgent$IE$$&&!$goog$userAgent$isVersion$$("9");function $goog$dom$getElementsByTagNameAndClass_$$($className$$10_opt_tag$$1_tagName$$1$$,$opt_class$$1$$,$els_opt_el$$3_parent$$5$$){$els_opt_el$$3_parent$$5$$=$els_opt_el$$3_parent$$5$$||document;$className$$10_opt_tag$$1_tagName$$1$$=$className$$10_opt_tag$$1_tagName$$1$$&&"*"!=$className$$10_opt_tag$$1_tagName$$1$$?$className$$10_opt_tag$$1_tagName$$1$$.toUpperCase():"";if($els_opt_el$$3_parent$$5$$.querySelectorAll&&$els_opt_el$$3_parent$$5$$.querySelector&&(!$goog$userAgent$WEBKIT$$||"CSS1Compat"==
document.compatMode||$goog$userAgent$isVersion$$("528"))&&($className$$10_opt_tag$$1_tagName$$1$$||$opt_class$$1$$))return $els_opt_el$$3_parent$$5$$.querySelectorAll($className$$10_opt_tag$$1_tagName$$1$$+($opt_class$$1$$?"."+$opt_class$$1$$:""));if($opt_class$$1$$&&$els_opt_el$$3_parent$$5$$.getElementsByClassName){$els_opt_el$$3_parent$$5$$=$els_opt_el$$3_parent$$5$$.getElementsByClassName($opt_class$$1$$);if($className$$10_opt_tag$$1_tagName$$1$$){for(var $arrayLike$$={},$len$$1$$=0,$i$$51$$=
0,$el$$1$$;$el$$1$$=$els_opt_el$$3_parent$$5$$[$i$$51$$];$i$$51$$++)$className$$10_opt_tag$$1_tagName$$1$$==$el$$1$$.nodeName&&($arrayLike$$[$len$$1$$++]=$el$$1$$);$arrayLike$$.length=$len$$1$$;return $arrayLike$$}return $els_opt_el$$3_parent$$5$$}$els_opt_el$$3_parent$$5$$=$els_opt_el$$3_parent$$5$$.getElementsByTagName($className$$10_opt_tag$$1_tagName$$1$$||"*");if($opt_class$$1$$){$arrayLike$$={};for($i$$51$$=$len$$1$$=0;$el$$1$$=$els_opt_el$$3_parent$$5$$[$i$$51$$];$i$$51$$++)$className$$10_opt_tag$$1_tagName$$1$$=
$el$$1$$.className,"function"==typeof $className$$10_opt_tag$$1_tagName$$1$$.split&&0<=$goog$array$indexOf$$($className$$10_opt_tag$$1_tagName$$1$$.split(/\s+/),$opt_class$$1$$)&&($arrayLike$$[$len$$1$$++]=$el$$1$$);$arrayLike$$.length=$len$$1$$;return $arrayLike$$}return $els_opt_el$$3_parent$$5$$}
function $goog$dom$setProperties$$($element$$18$$,$properties$$){$goog$object$forEach$$($properties$$,function($val$$19$$,$key$$43$$){"style"==$key$$43$$?$element$$18$$.style.cssText=$val$$19$$:"class"==$key$$43$$?$element$$18$$.className=$val$$19$$:"for"==$key$$43$$?$element$$18$$.htmlFor=$val$$19$$:$key$$43$$ in $goog$dom$DIRECT_ATTRIBUTE_MAP_$$?$element$$18$$.setAttribute($goog$dom$DIRECT_ATTRIBUTE_MAP_$$[$key$$43$$],$val$$19$$):0==$key$$43$$.lastIndexOf("aria-",0)?$element$$18$$.setAttribute($key$$43$$,
$val$$19$$):$element$$18$$[$key$$43$$]=$val$$19$$})}var $goog$dom$DIRECT_ATTRIBUTE_MAP_$$={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function $goog$dom$createDom$$($tagName$$2$$,$opt_attributes$$,$var_args$$45$$){var $args$$inline_46$$=arguments,$doc$$inline_47$$=document,$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$=$args$$inline_46$$[0],$attributes$$inline_49$$=$args$$inline_46$$[1];if(!$goog$dom$BrowserFeature$CAN_ADD_NAME_OR_TYPE_ATTRIBUTES$$&&$attributes$$inline_49$$&&($attributes$$inline_49$$.name||$attributes$$inline_49$$.type)){$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$=["<",$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$];
$attributes$$inline_49$$.name&&$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$.push(' name="',$goog$string$htmlEscape$$($attributes$$inline_49$$.name),'"');if($attributes$$inline_49$$.type){$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$.push(' type="',$goog$string$htmlEscape$$($attributes$$inline_49$$.type),'"');var $clone$$inline_51$$={};$goog$object$extend$$($clone$$inline_51$$,$attributes$$inline_49$$);$attributes$$inline_49$$=$clone$$inline_51$$;delete $attributes$$inline_49$$.type}$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$.push(">");
$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$=$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$.join("")}$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$=$doc$$inline_47$$.createElement($element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$);if($attributes$$inline_49$$)$goog$isString$$($attributes$$inline_49$$)?$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$.className=$attributes$$inline_49$$:"array"==$goog$typeOf$$($attributes$$inline_49$$)?
$goog$dom$classes$add$$.apply($JSCompiler_alias_NULL$$,[$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$].concat($attributes$$inline_49$$)):$goog$dom$setProperties$$($element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$,$attributes$$inline_49$$);2<$args$$inline_46$$.length&&$goog$dom$append_$$($doc$$inline_47$$,$element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$,$args$$inline_46$$);return $element$$inline_52_tagName$$inline_48_tagNameArr$$inline_50$$}
function $goog$dom$append_$$($doc$$12$$,$parent$$6$$,$args$$8$$){function $childHandler$$($child$$1$$){$child$$1$$&&$parent$$6$$.appendChild($goog$isString$$($child$$1$$)?$doc$$12$$.createTextNode($child$$1$$):$child$$1$$)}for(var $i$$52$$=2;$i$$52$$<$args$$8$$.length;$i$$52$$++){var $arg$$5$$=$args$$8$$[$i$$52$$];if($goog$isArrayLike$$($arg$$5$$)&&!($goog$isObject$$($arg$$5$$)&&0<$arg$$5$$.nodeType)){var $JSCompiler_inline_result$$54$$;a:{if($arg$$5$$&&"number"==typeof $arg$$5$$.length){if($goog$isObject$$($arg$$5$$)){$JSCompiler_inline_result$$54$$=
"function"==typeof $arg$$5$$.item||"string"==typeof $arg$$5$$.item;break a}if($goog$isFunction$$($arg$$5$$)){$JSCompiler_inline_result$$54$$="function"==typeof $arg$$5$$.item;break a}}$JSCompiler_inline_result$$54$$=$JSCompiler_alias_FALSE$$}$goog$array$forEach$$($JSCompiler_inline_result$$54$$?$goog$array$clone$$($arg$$5$$):$arg$$5$$,$childHandler$$)}else $childHandler$$($arg$$5$$)}}
var $goog$dom$TAGS_TO_IGNORE_$$={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},$goog$dom$PREDEFINED_TAG_VALUES_$$={IMG:" ",BR:"\n"};
function $goog$dom$getTextContent$$($node$$16_textContent$$){if($goog$dom$BrowserFeature$CAN_USE_INNER_TEXT$$&&"innerText"in $node$$16_textContent$$)$node$$16_textContent$$=$node$$16_textContent$$.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var $buf$$=[];$goog$dom$getTextContent_$$($node$$16_textContent$$,$buf$$,$JSCompiler_alias_TRUE$$);$node$$16_textContent$$=$buf$$.join("")}$node$$16_textContent$$=$node$$16_textContent$$.replace(/ \xAD /g," ").replace(/\xAD/g,"");$node$$16_textContent$$=$node$$16_textContent$$.replace(/\u200B/g,
"");$goog$dom$BrowserFeature$CAN_USE_INNER_TEXT$$||($node$$16_textContent$$=$node$$16_textContent$$.replace(/ +/g," "));" "!=$node$$16_textContent$$&&($node$$16_textContent$$=$node$$16_textContent$$.replace(/^\s*/,""));return $node$$16_textContent$$}
function $goog$dom$getTextContent_$$($child$$7_node$$18$$,$buf$$2$$,$normalizeWhitespace$$){if(!($child$$7_node$$18$$.nodeName in $goog$dom$TAGS_TO_IGNORE_$$))if(3==$child$$7_node$$18$$.nodeType)$normalizeWhitespace$$?$buf$$2$$.push((""+$child$$7_node$$18$$.nodeValue).replace(/(\r\n|\r|\n)/g,"")):$buf$$2$$.push($child$$7_node$$18$$.nodeValue);else if($child$$7_node$$18$$.nodeName in $goog$dom$PREDEFINED_TAG_VALUES_$$)$buf$$2$$.push($goog$dom$PREDEFINED_TAG_VALUES_$$[$child$$7_node$$18$$.nodeName]);
else for($child$$7_node$$18$$=$child$$7_node$$18$$.firstChild;$child$$7_node$$18$$;)$goog$dom$getTextContent_$$($child$$7_node$$18$$,$buf$$2$$,$normalizeWhitespace$$),$child$$7_node$$18$$=$child$$7_node$$18$$.nextSibling}
function $goog$dom$getAncestorByTagNameAndClass$$($element$$27$$,$opt_tag$$2$$){var $tagName$$4$$=$opt_tag$$2$$?$opt_tag$$2$$.toUpperCase():$JSCompiler_alias_NULL$$;return $goog$dom$getAncestor$$($element$$27$$,function($node$$21$$){return(!$tagName$$4$$||$node$$21$$.nodeName==$tagName$$4$$)&&$JSCompiler_alias_TRUE$$})}
function $goog$dom$getAncestor$$($element$$29$$,$matcher$$){for(var $steps$$=0;$element$$29$$;){if($matcher$$($element$$29$$))return $element$$29$$;$element$$29$$=$element$$29$$.parentNode;$steps$$++}return $JSCompiler_alias_NULL$$};function $goog$style$setStyle_$$($element$$32$$,$value$$55$$,$style$$1$$){$element$$32$$.style[$goog$string$toCamelCase$$($style$$1$$)]=$value$$55$$};function $goog$Disposable$$(){}$goog$Disposable$$.prototype.$disposed_$=$JSCompiler_alias_FALSE$$;$goog$Disposable$$.prototype.$dispose$=function $$goog$Disposable$$$$$dispose$$(){if(!this.$disposed_$)this.$disposed_$=$JSCompiler_alias_TRUE$$,this.$disposeInternal$()};$goog$Disposable$$.prototype.$disposeInternal$=function $$goog$Disposable$$$$$disposeInternal$$(){this.$dependentDisposables_$&&$goog$disposeAll$$.apply($JSCompiler_alias_NULL$$,this.$dependentDisposables_$)};
function $goog$dispose$$($obj$$60$$){$obj$$60$$&&"function"==typeof $obj$$60$$.$dispose$&&$obj$$60$$.$dispose$()}function $goog$disposeAll$$($var_args$$49$$){for(var $i$$57$$=0,$len$$2$$=arguments.length;$i$$57$$<$len$$2$$;++$i$$57$$){var $disposable$$1$$=arguments[$i$$57$$];$goog$isArrayLike$$($disposable$$1$$)?$goog$disposeAll$$.apply($JSCompiler_alias_NULL$$,$disposable$$1$$):$goog$dispose$$($disposable$$1$$)}};function $goog$events$Listener$$(){}var $goog$events$Listener$counter_$$=0;$JSCompiler_prototypeAlias$$=$goog$events$Listener$$.prototype;$JSCompiler_prototypeAlias$$.key=0;$JSCompiler_prototypeAlias$$.$removed$=$JSCompiler_alias_FALSE$$;$JSCompiler_prototypeAlias$$.$callOnce$=$JSCompiler_alias_FALSE$$;
$JSCompiler_prototypeAlias$$.$init$=function $$JSCompiler_prototypeAlias$$$$init$$($listener$$26$$,$proxy$$,$src$$5$$,$type$$51$$,$capture$$,$opt_handler$$){$goog$isFunction$$($listener$$26$$)?this.$isFunctionListener_$=$JSCompiler_alias_TRUE$$:$listener$$26$$&&$listener$$26$$.handleEvent&&$goog$isFunction$$($listener$$26$$.handleEvent)?this.$isFunctionListener_$=$JSCompiler_alias_FALSE$$:$JSCompiler_alias_THROW$$(Error("Invalid listener argument"));this.$listener$=$listener$$26$$;this.$proxy$=$proxy$$;
this.src=$src$$5$$;this.type=$type$$51$$;this.capture=!!$capture$$;this.$handler$=$opt_handler$$;this.$callOnce$=$JSCompiler_alias_FALSE$$;this.key=++$goog$events$Listener$counter_$$;this.$removed$=$JSCompiler_alias_FALSE$$};$JSCompiler_prototypeAlias$$.handleEvent=function $$JSCompiler_prototypeAlias$$$handleEvent$($eventObject$$){return this.$isFunctionListener_$?this.$listener$.call(this.$handler$||this.src,$eventObject$$):this.$listener$.handleEvent.call(this.$listener$,$eventObject$$)};!$goog$userAgent$IE$$||$goog$userAgent$isDocumentMode$$();var $goog$events$BrowserFeature$HAS_W3C_EVENT_SUPPORT$$=!$goog$userAgent$IE$$||$goog$userAgent$isDocumentMode$$();$goog$userAgent$IE$$&&$goog$userAgent$isVersion$$("8");!$goog$userAgent$WEBKIT$$||$goog$userAgent$isVersion$$("528");$goog$userAgent$GECKO$$&&$goog$userAgent$isVersion$$("1.9b")||$goog$userAgent$IE$$&&$goog$userAgent$isVersion$$("8")||$goog$userAgent$OPERA$$&&$goog$userAgent$isVersion$$("9.5")||$goog$userAgent$WEBKIT$$&&$goog$userAgent$isVersion$$("528");
!$goog$userAgent$GECKO$$||$goog$userAgent$isVersion$$("8");function $goog$events$Event$$($type$$52$$,$opt_target$$1$$){this.type=$type$$52$$;this.currentTarget=this.target=$opt_target$$1$$}$goog$inherits$$($goog$events$Event$$,$goog$Disposable$$);$goog$events$Event$$.prototype.$disposeInternal$=function $$goog$events$Event$$$$$disposeInternal$$(){delete this.type;delete this.target;delete this.currentTarget};$goog$events$Event$$.prototype.$propagationStopped_$=$JSCompiler_alias_FALSE$$;$goog$events$Event$$.prototype.$returnValue_$=$JSCompiler_alias_TRUE$$;function $goog$reflect$sinkValue$$($x$$54$$){$goog$reflect$sinkValue$$[" "]($x$$54$$);return $x$$54$$}$goog$reflect$sinkValue$$[" "]=function $$goog$reflect$sinkValue$$$__0$(){};function $goog$events$BrowserEvent$$($opt_e$$,$opt_currentTarget$$){$opt_e$$&&this.$init$($opt_e$$,$opt_currentTarget$$)}$goog$inherits$$($goog$events$BrowserEvent$$,$goog$events$Event$$);$JSCompiler_prototypeAlias$$=$goog$events$BrowserEvent$$.prototype;$JSCompiler_prototypeAlias$$.target=$JSCompiler_alias_NULL$$;$JSCompiler_prototypeAlias$$.relatedTarget=$JSCompiler_alias_NULL$$;$JSCompiler_prototypeAlias$$.offsetX=0;$JSCompiler_prototypeAlias$$.offsetY=0;$JSCompiler_prototypeAlias$$.clientX=0;
$JSCompiler_prototypeAlias$$.clientY=0;$JSCompiler_prototypeAlias$$.screenX=0;$JSCompiler_prototypeAlias$$.screenY=0;$JSCompiler_prototypeAlias$$.button=0;$JSCompiler_prototypeAlias$$.keyCode=0;$JSCompiler_prototypeAlias$$.charCode=0;$JSCompiler_prototypeAlias$$.ctrlKey=$JSCompiler_alias_FALSE$$;$JSCompiler_prototypeAlias$$.altKey=$JSCompiler_alias_FALSE$$;$JSCompiler_prototypeAlias$$.shiftKey=$JSCompiler_alias_FALSE$$;$JSCompiler_prototypeAlias$$.metaKey=$JSCompiler_alias_FALSE$$;
$JSCompiler_prototypeAlias$$.$platformModifierKey$=$JSCompiler_alias_FALSE$$;$JSCompiler_prototypeAlias$$.$event_$=$JSCompiler_alias_NULL$$;
$JSCompiler_prototypeAlias$$.$init$=function $$JSCompiler_prototypeAlias$$$$init$$($e$$10$$,$opt_currentTarget$$1$$){var $type$$54$$=this.type=$e$$10$$.type;$goog$events$Event$$.call(this,$type$$54$$);this.target=$e$$10$$.target||$e$$10$$.srcElement;this.currentTarget=$opt_currentTarget$$1$$;var $relatedTarget$$=$e$$10$$.relatedTarget;if($relatedTarget$$){if($goog$userAgent$GECKO$$){var $JSCompiler_inline_result$$57$$;a:{try{$goog$reflect$sinkValue$$($relatedTarget$$.nodeName);$JSCompiler_inline_result$$57$$=
$JSCompiler_alias_TRUE$$;break a}catch($e$$inline_59$$){}$JSCompiler_inline_result$$57$$=$JSCompiler_alias_FALSE$$}$JSCompiler_inline_result$$57$$||($relatedTarget$$=$JSCompiler_alias_NULL$$)}}else if("mouseover"==$type$$54$$)$relatedTarget$$=$e$$10$$.fromElement;else if("mouseout"==$type$$54$$)$relatedTarget$$=$e$$10$$.toElement;this.relatedTarget=$relatedTarget$$;this.offsetX=$goog$userAgent$WEBKIT$$||$e$$10$$.offsetX!==$JSCompiler_alias_VOID$$?$e$$10$$.offsetX:$e$$10$$.layerX;this.offsetY=$goog$userAgent$WEBKIT$$||
$e$$10$$.offsetY!==$JSCompiler_alias_VOID$$?$e$$10$$.offsetY:$e$$10$$.layerY;this.clientX=$e$$10$$.clientX!==$JSCompiler_alias_VOID$$?$e$$10$$.clientX:$e$$10$$.pageX;this.clientY=$e$$10$$.clientY!==$JSCompiler_alias_VOID$$?$e$$10$$.clientY:$e$$10$$.pageY;this.screenX=$e$$10$$.screenX||0;this.screenY=$e$$10$$.screenY||0;this.button=$e$$10$$.button;this.keyCode=$e$$10$$.keyCode||0;this.charCode=$e$$10$$.charCode||("keypress"==$type$$54$$?$e$$10$$.keyCode:0);this.ctrlKey=$e$$10$$.ctrlKey;this.altKey=
$e$$10$$.altKey;this.shiftKey=$e$$10$$.shiftKey;this.metaKey=$e$$10$$.metaKey;this.$platformModifierKey$=$goog$userAgent$MAC$$?$e$$10$$.metaKey:$e$$10$$.ctrlKey;this.state=$e$$10$$.state;this.$event_$=$e$$10$$;delete this.$returnValue_$;delete this.$propagationStopped_$};
$JSCompiler_prototypeAlias$$.$disposeInternal$=function $$JSCompiler_prototypeAlias$$$$disposeInternal$$(){$goog$events$BrowserEvent$$.$superClass_$.$disposeInternal$.call(this);this.relatedTarget=this.currentTarget=this.target=this.$event_$=$JSCompiler_alias_NULL$$};var $goog$events$listeners_$$={},$goog$events$listenerTree_$$={},$goog$events$sources_$$={},$goog$events$onStringMap_$$={};
function $goog$events$listen$$($src$$8$$,$type$$55$$,$key$$45_listener$$29$$,$capture$$1_opt_capt$$2$$,$opt_handler$$1$$){if($type$$55$$){if("array"==$goog$typeOf$$($type$$55$$)){for(var $i$$61_proxy$$1$$=0;$i$$61_proxy$$1$$<$type$$55$$.length;$i$$61_proxy$$1$$++)$goog$events$listen$$($src$$8$$,$type$$55$$[$i$$61_proxy$$1$$],$key$$45_listener$$29$$,$capture$$1_opt_capt$$2$$,$opt_handler$$1$$);return $JSCompiler_alias_NULL$$}var $capture$$1_opt_capt$$2$$=!!$capture$$1_opt_capt$$2$$,$listenerObj_map$$=
$goog$events$listenerTree_$$;$type$$55$$ in $listenerObj_map$$||($listenerObj_map$$[$type$$55$$]={$count_$:0,$remaining_$:0});$listenerObj_map$$=$listenerObj_map$$[$type$$55$$];$capture$$1_opt_capt$$2$$ in $listenerObj_map$$||($listenerObj_map$$[$capture$$1_opt_capt$$2$$]={$count_$:0,$remaining_$:0},$listenerObj_map$$.$count_$++);var $listenerObj_map$$=$listenerObj_map$$[$capture$$1_opt_capt$$2$$],$srcUid$$=$src$$8$$[$goog$UID_PROPERTY_$$]||($src$$8$$[$goog$UID_PROPERTY_$$]=++$goog$uidCounter_$$),
$listenerArray$$;$listenerObj_map$$.$remaining_$++;if($listenerObj_map$$[$srcUid$$]){$listenerArray$$=$listenerObj_map$$[$srcUid$$];for($i$$61_proxy$$1$$=0;$i$$61_proxy$$1$$<$listenerArray$$.length;$i$$61_proxy$$1$$++)if($listenerObj_map$$=$listenerArray$$[$i$$61_proxy$$1$$],$listenerObj_map$$.$listener$==$key$$45_listener$$29$$&&$listenerObj_map$$.$handler$==$opt_handler$$1$$){if($listenerObj_map$$.$removed$)break;return $listenerArray$$[$i$$61_proxy$$1$$].key}}else $listenerArray$$=$listenerObj_map$$[$srcUid$$]=
[],$listenerObj_map$$.$count_$++;$i$$61_proxy$$1$$=$goog$events$getProxy$$();$i$$61_proxy$$1$$.src=$src$$8$$;$listenerObj_map$$=new $goog$events$Listener$$;$listenerObj_map$$.$init$($key$$45_listener$$29$$,$i$$61_proxy$$1$$,$src$$8$$,$type$$55$$,$capture$$1_opt_capt$$2$$,$opt_handler$$1$$);$key$$45_listener$$29$$=$listenerObj_map$$.key;$i$$61_proxy$$1$$.key=$key$$45_listener$$29$$;$listenerArray$$.push($listenerObj_map$$);$goog$events$listeners_$$[$key$$45_listener$$29$$]=$listenerObj_map$$;$goog$events$sources_$$[$srcUid$$]||
($goog$events$sources_$$[$srcUid$$]=[]);$goog$events$sources_$$[$srcUid$$].push($listenerObj_map$$);$src$$8$$.addEventListener?($src$$8$$==$goog$global$$||!$src$$8$$.$customEvent_$)&&$src$$8$$.addEventListener($type$$55$$,$i$$61_proxy$$1$$,$capture$$1_opt_capt$$2$$):$src$$8$$.attachEvent($type$$55$$ in $goog$events$onStringMap_$$?$goog$events$onStringMap_$$[$type$$55$$]:$goog$events$onStringMap_$$[$type$$55$$]="on"+$type$$55$$,$i$$61_proxy$$1$$);return $key$$45_listener$$29$$}$JSCompiler_alias_THROW$$(Error("Invalid event type"))}
function $goog$events$getProxy$$(){var $proxyCallbackFunction$$=$goog$events$handleBrowserEvent_$$,$f$$25$$=$goog$events$BrowserFeature$HAS_W3C_EVENT_SUPPORT$$?function($eventObject$$1$$){return $proxyCallbackFunction$$.call($f$$25$$.src,$f$$25$$.key,$eventObject$$1$$)}:function($eventObject$$2_v$$){$eventObject$$2_v$$=$proxyCallbackFunction$$.call($f$$25$$.src,$f$$25$$.key,$eventObject$$2_v$$);if(!$eventObject$$2_v$$)return $eventObject$$2_v$$};return $f$$25$$}
function $goog$events$unlistenByKey$$($key$$47$$){if(!$goog$events$listeners_$$[$key$$47$$])return $JSCompiler_alias_FALSE$$;var $listener$$33$$=$goog$events$listeners_$$[$key$$47$$];if($listener$$33$$.$removed$)return $JSCompiler_alias_FALSE$$;var $src$$12_srcUid$$1$$=$listener$$33$$.src,$type$$58$$=$listener$$33$$.type,$listenerArray$$2_proxy$$2$$=$listener$$33$$.$proxy$,$capture$$3$$=$listener$$33$$.capture;$src$$12_srcUid$$1$$.removeEventListener?($src$$12_srcUid$$1$$==$goog$global$$||!$src$$12_srcUid$$1$$.$customEvent_$)&&
$src$$12_srcUid$$1$$.removeEventListener($type$$58$$,$listenerArray$$2_proxy$$2$$,$capture$$3$$):$src$$12_srcUid$$1$$.detachEvent&&$src$$12_srcUid$$1$$.detachEvent($type$$58$$ in $goog$events$onStringMap_$$?$goog$events$onStringMap_$$[$type$$58$$]:$goog$events$onStringMap_$$[$type$$58$$]="on"+$type$$58$$,$listenerArray$$2_proxy$$2$$);$src$$12_srcUid$$1$$=$src$$12_srcUid$$1$$[$goog$UID_PROPERTY_$$]||($src$$12_srcUid$$1$$[$goog$UID_PROPERTY_$$]=++$goog$uidCounter_$$);$listenerArray$$2_proxy$$2$$=$goog$events$listenerTree_$$[$type$$58$$][$capture$$3$$][$src$$12_srcUid$$1$$];
if($goog$events$sources_$$[$src$$12_srcUid$$1$$]){var $sourcesArray$$=$goog$events$sources_$$[$src$$12_srcUid$$1$$],$i$$inline_63$$=$goog$array$indexOf$$($sourcesArray$$,$listener$$33$$);0<=$i$$inline_63$$&&($goog$asserts$assert$$($sourcesArray$$.length!=$JSCompiler_alias_NULL$$),$goog$array$ARRAY_PROTOTYPE_$$.splice.call($sourcesArray$$,$i$$inline_63$$,1));0==$sourcesArray$$.length&&delete $goog$events$sources_$$[$src$$12_srcUid$$1$$]}$listener$$33$$.$removed$=$JSCompiler_alias_TRUE$$;$listenerArray$$2_proxy$$2$$.$needsCleanup_$=
$JSCompiler_alias_TRUE$$;$goog$events$cleanUp_$$($type$$58$$,$capture$$3$$,$src$$12_srcUid$$1$$,$listenerArray$$2_proxy$$2$$);delete $goog$events$listeners_$$[$key$$47$$];return $JSCompiler_alias_TRUE$$}
function $goog$events$cleanUp_$$($type$$59$$,$capture$$4$$,$srcUid$$2$$,$listenerArray$$3$$){if(!$listenerArray$$3$$.$locked_$&&$listenerArray$$3$$.$needsCleanup_$){for(var $oldIndex$$=0,$newIndex$$=0;$oldIndex$$<$listenerArray$$3$$.length;$oldIndex$$++)$listenerArray$$3$$[$oldIndex$$].$removed$?$listenerArray$$3$$[$oldIndex$$].$proxy$.src=$JSCompiler_alias_NULL$$:($oldIndex$$!=$newIndex$$&&($listenerArray$$3$$[$newIndex$$]=$listenerArray$$3$$[$oldIndex$$]),$newIndex$$++);$listenerArray$$3$$.length=
$newIndex$$;$listenerArray$$3$$.$needsCleanup_$=$JSCompiler_alias_FALSE$$;0==$newIndex$$&&(delete $goog$events$listenerTree_$$[$type$$59$$][$capture$$4$$][$srcUid$$2$$],$goog$events$listenerTree_$$[$type$$59$$][$capture$$4$$].$count_$--,0==$goog$events$listenerTree_$$[$type$$59$$][$capture$$4$$].$count_$&&(delete $goog$events$listenerTree_$$[$type$$59$$][$capture$$4$$],$goog$events$listenerTree_$$[$type$$59$$].$count_$--),0==$goog$events$listenerTree_$$[$type$$59$$].$count_$&&delete $goog$events$listenerTree_$$[$type$$59$$])}}
function $goog$events$fireListeners_$$($listenerArray$$5_map$$4$$,$obj$$66_objUid$$2$$,$type$$65$$,$capture$$9$$,$eventObject$$4$$){var $retval$$=1,$obj$$66_objUid$$2$$=$obj$$66_objUid$$2$$[$goog$UID_PROPERTY_$$]||($obj$$66_objUid$$2$$[$goog$UID_PROPERTY_$$]=++$goog$uidCounter_$$);if($listenerArray$$5_map$$4$$[$obj$$66_objUid$$2$$]){$listenerArray$$5_map$$4$$.$remaining_$--;$listenerArray$$5_map$$4$$=$listenerArray$$5_map$$4$$[$obj$$66_objUid$$2$$];$listenerArray$$5_map$$4$$.$locked_$?$listenerArray$$5_map$$4$$.$locked_$++:
$listenerArray$$5_map$$4$$.$locked_$=1;try{for(var $length$$16$$=$listenerArray$$5_map$$4$$.length,$i$$67$$=0;$i$$67$$<$length$$16$$;$i$$67$$++){var $listener$$39$$=$listenerArray$$5_map$$4$$[$i$$67$$];$listener$$39$$&&!$listener$$39$$.$removed$&&($retval$$&=$goog$events$fireListener$$($listener$$39$$,$eventObject$$4$$)!==$JSCompiler_alias_FALSE$$)}}finally{$listenerArray$$5_map$$4$$.$locked_$--,$goog$events$cleanUp_$$($type$$65$$,$capture$$9$$,$obj$$66_objUid$$2$$,$listenerArray$$5_map$$4$$)}}return Boolean($retval$$)}
function $goog$events$fireListener$$($listener$$40$$,$eventObject$$5$$){var $rv$$13$$=$listener$$40$$.handleEvent($eventObject$$5$$);$listener$$40$$.$callOnce$&&$goog$events$unlistenByKey$$($listener$$40$$.key);return $rv$$13$$}
function $goog$events$handleBrowserEvent_$$($key$$49$$,$opt_evt$$){if(!$goog$events$listeners_$$[$key$$49$$])return $JSCompiler_alias_TRUE$$;var $listener$$41$$=$goog$events$listeners_$$[$key$$49$$],$be$$1_type$$67$$=$listener$$41$$.type,$map$$6$$=$goog$events$listenerTree_$$;if(!($be$$1_type$$67$$ in $map$$6$$))return $JSCompiler_alias_TRUE$$;var $map$$6$$=$map$$6$$[$be$$1_type$$67$$],$ieEvent_part$$inline_67_retval$$1$$,$targetsMap$$1$$;if(!$goog$events$BrowserFeature$HAS_W3C_EVENT_SUPPORT$$){var $JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$;
if(!($JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$=$opt_evt$$))a:{$JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$="window.event".split(".");for(var $cur$$inline_66_hasBubble$$1$$=$goog$global$$;$ieEvent_part$$inline_67_retval$$1$$=$JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$.shift();)if($cur$$inline_66_hasBubble$$1$$[$ieEvent_part$$inline_67_retval$$1$$]!=$JSCompiler_alias_NULL$$)$cur$$inline_66_hasBubble$$1$$=$cur$$inline_66_hasBubble$$1$$[$ieEvent_part$$inline_67_retval$$1$$];
else{$JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$=$JSCompiler_alias_NULL$$;break a}$JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$=$cur$$inline_66_hasBubble$$1$$}$ieEvent_part$$inline_67_retval$$1$$=$JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$;$JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$=$JSCompiler_alias_TRUE$$ in $map$$6$$;$cur$$inline_66_hasBubble$$1$$=$JSCompiler_alias_FALSE$$ in $map$$6$$;if($JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$){if(0>$ieEvent_part$$inline_67_retval$$1$$.keyCode||
$ieEvent_part$$inline_67_retval$$1$$.returnValue!=$JSCompiler_alias_VOID$$)return $JSCompiler_alias_TRUE$$;a:{var $evt$$14_useReturnValue$$inline_70$$=$JSCompiler_alias_FALSE$$;if(0==$ieEvent_part$$inline_67_retval$$1$$.keyCode)try{$ieEvent_part$$inline_67_retval$$1$$.keyCode=-1;break a}catch($ex$$inline_71$$){$evt$$14_useReturnValue$$inline_70$$=$JSCompiler_alias_TRUE$$}if($evt$$14_useReturnValue$$inline_70$$||$ieEvent_part$$inline_67_retval$$1$$.returnValue==$JSCompiler_alias_VOID$$)$ieEvent_part$$inline_67_retval$$1$$.returnValue=
$JSCompiler_alias_TRUE$$}}$evt$$14_useReturnValue$$inline_70$$=new $goog$events$BrowserEvent$$;$evt$$14_useReturnValue$$inline_70$$.$init$($ieEvent_part$$inline_67_retval$$1$$,this);$ieEvent_part$$inline_67_retval$$1$$=$JSCompiler_alias_TRUE$$;try{if($JSCompiler_temp$$8_hasCapture$$2_parts$$inline_65$$){for(var $ancestors$$2$$=[],$parent$$19$$=$evt$$14_useReturnValue$$inline_70$$.currentTarget;$parent$$19$$;$parent$$19$$=$parent$$19$$.parentNode)$ancestors$$2$$.push($parent$$19$$);$targetsMap$$1$$=
$map$$6$$[$JSCompiler_alias_TRUE$$];$targetsMap$$1$$.$remaining_$=$targetsMap$$1$$.$count_$;for(var $i$$69$$=$ancestors$$2$$.length-1;!$evt$$14_useReturnValue$$inline_70$$.$propagationStopped_$&&0<=$i$$69$$&&$targetsMap$$1$$.$remaining_$;$i$$69$$--)$evt$$14_useReturnValue$$inline_70$$.currentTarget=$ancestors$$2$$[$i$$69$$],$ieEvent_part$$inline_67_retval$$1$$&=$goog$events$fireListeners_$$($targetsMap$$1$$,$ancestors$$2$$[$i$$69$$],$be$$1_type$$67$$,$JSCompiler_alias_TRUE$$,$evt$$14_useReturnValue$$inline_70$$);
if($cur$$inline_66_hasBubble$$1$$){$targetsMap$$1$$=$map$$6$$[$JSCompiler_alias_FALSE$$];$targetsMap$$1$$.$remaining_$=$targetsMap$$1$$.$count_$;for($i$$69$$=0;!$evt$$14_useReturnValue$$inline_70$$.$propagationStopped_$&&$i$$69$$<$ancestors$$2$$.length&&$targetsMap$$1$$.$remaining_$;$i$$69$$++)$evt$$14_useReturnValue$$inline_70$$.currentTarget=$ancestors$$2$$[$i$$69$$],$ieEvent_part$$inline_67_retval$$1$$&=$goog$events$fireListeners_$$($targetsMap$$1$$,$ancestors$$2$$[$i$$69$$],$be$$1_type$$67$$,
$JSCompiler_alias_FALSE$$,$evt$$14_useReturnValue$$inline_70$$)}}else $ieEvent_part$$inline_67_retval$$1$$=$goog$events$fireListener$$($listener$$41$$,$evt$$14_useReturnValue$$inline_70$$)}finally{if($ancestors$$2$$)$ancestors$$2$$.length=0;$evt$$14_useReturnValue$$inline_70$$.$dispose$()}return $ieEvent_part$$inline_67_retval$$1$$}$be$$1_type$$67$$=new $goog$events$BrowserEvent$$($opt_evt$$,this);try{$ieEvent_part$$inline_67_retval$$1$$=$goog$events$fireListener$$($listener$$41$$,$be$$1_type$$67$$)}finally{$be$$1_type$$67$$.$dispose$()}return $ieEvent_part$$inline_67_retval$$1$$}
;function $goog$events$EventHandler$$($opt_handler$$7$$){this.$handler_$=$opt_handler$$7$$;this.$keys_$=[]}$goog$inherits$$($goog$events$EventHandler$$,$goog$Disposable$$);var $goog$events$EventHandler$typeArray_$$=[];
function $JSCompiler_StaticMethods_listen$$($JSCompiler_StaticMethods_listen$self$$,$src$$16$$,$type$$68$$,$opt_fn$$,$opt_handler$$8$$){"array"!=$goog$typeOf$$($type$$68$$)&&($goog$events$EventHandler$typeArray_$$[0]=$type$$68$$,$type$$68$$=$goog$events$EventHandler$typeArray_$$);for(var $i$$70$$=0;$i$$70$$<$type$$68$$.length;$i$$70$$++)$JSCompiler_StaticMethods_listen$self$$.$keys_$.push($goog$events$listen$$($src$$16$$,$type$$68$$[$i$$70$$],$opt_fn$$||$JSCompiler_StaticMethods_listen$self$$,$JSCompiler_alias_FALSE$$,
$opt_handler$$8$$||$JSCompiler_StaticMethods_listen$self$$.$handler_$||$JSCompiler_StaticMethods_listen$self$$))}$goog$events$EventHandler$$.prototype.$disposeInternal$=function $$goog$events$EventHandler$$$$$disposeInternal$$(){$goog$events$EventHandler$$.$superClass_$.$disposeInternal$.call(this);$goog$array$forEach$$(this.$keys_$,$goog$events$unlistenByKey$$);this.$keys_$.length=0};$goog$events$EventHandler$$.prototype.handleEvent=function $$goog$events$EventHandler$$$$handleEvent$(){$JSCompiler_alias_THROW$$(Error("EventHandler.handleEvent not implemented"))};var $goog$Timer$defaultTimerObject$$=$goog$global$$.window;
function $goog$Timer$callOnce$$($listener$$45$$,$opt_delay$$,$opt_handler$$13$$){$goog$isFunction$$($listener$$45$$)?$opt_handler$$13$$&&($listener$$45$$=$goog$bind$$($listener$$45$$,$opt_handler$$13$$)):$listener$$45$$&&"function"==typeof $listener$$45$$.handleEvent?$listener$$45$$=$goog$bind$$($listener$$45$$.handleEvent,$listener$$45$$):$JSCompiler_alias_THROW$$(Error("Invalid listener argument"));return 2147483647<$opt_delay$$?-1:$goog$Timer$defaultTimerObject$$.setTimeout($listener$$45$$,$opt_delay$$||
0)};function $picnet$ui$filter$FilterState$$($id$$2$$,$value$$63$$,$idx$$,$type$$73$$){this.id=$id$$2$$;this.value=$value$$63$$;this.$idx$=$idx$$;this.type=$type$$73$$}$picnet$ui$filter$FilterState$$.prototype.toString=function $$picnet$ui$filter$FilterState$$$$toString$(){return"id["+this.id+"] value["+this.value+"] idx["+this.$idx$+"] type["+this.type+"]"};function $picnet$ui$filter$GenericListFilterOptions$$(){}$picnet$ui$filter$GenericListFilterOptions$$.prototype.additionalFilterTriggers=[];$picnet$ui$filter$GenericListFilterOptions$$.prototype.clearFiltersControls=[];$picnet$ui$filter$GenericListFilterOptions$$.prototype.filterDelay=250;$picnet$ui$filter$GenericListFilterOptions$$.prototype.filterToolTipMessage='Quotes (") match phrases. (not) excludes a match from the results. (or) can be used to do Or searches. I.e. [red or blue] will match either red or blue. Numeric values support >=, >, <=, <, = and != operators.';
$picnet$ui$filter$GenericListFilterOptions$$.prototype.enableCookies=$JSCompiler_alias_TRUE$$;$picnet$ui$filter$GenericListFilterOptions$$.prototype.matchingElement=$JSCompiler_alias_NULL$$;$picnet$ui$filter$GenericListFilterOptions$$.prototype.filteringElements=$JSCompiler_alias_NULL$$;$picnet$ui$filter$GenericListFilterOptions$$.prototype.additionalFilterValueCookieId=$JSCompiler_alias_NULL$$;function $picnet$ui$filter$SearchEngine$$(){this.$precedences_$={or:1,and:2,not:3}}
function $JSCompiler_StaticMethods_doesTextMatchTokens$$($textToMatch$$,$postFixTokens$$,$exactMatch$$){if(!$postFixTokens$$)return $JSCompiler_alias_TRUE$$;for(var $textToMatch$$=$exactMatch$$?$textToMatch$$:$textToMatch$$.toLowerCase(),$stackResult$$=[],$stackResult1_token$$4$$,$stackResult2$$,$i$$73$$=0;$i$$73$$<$postFixTokens$$.length;$i$$73$$++)$stackResult1_token$$4$$=$postFixTokens$$[$i$$73$$],"and"!==$stackResult1_token$$4$$&&"or"!==$stackResult1_token$$4$$&&"not"!==$stackResult1_token$$4$$?
0===$stackResult1_token$$4$$.indexOf(">")||0===$stackResult1_token$$4$$.indexOf("<")||0===$stackResult1_token$$4$$.indexOf("=")||0===$stackResult1_token$$4$$.indexOf("!=")?$stackResult$$.push($JSCompiler_StaticMethods_doesNumberMatchToken$$($stackResult1_token$$4$$,$textToMatch$$)):$stackResult$$.push($exactMatch$$?$textToMatch$$===$stackResult1_token$$4$$:0<=$textToMatch$$.indexOf($stackResult1_token$$4$$)):"and"===$stackResult1_token$$4$$?($stackResult1_token$$4$$=$stackResult$$.pop(),$stackResult2$$=
$stackResult$$.pop(),$stackResult$$.push($stackResult1_token$$4$$&&$stackResult2$$)):"or"===$stackResult1_token$$4$$?($stackResult1_token$$4$$=$stackResult$$.pop(),$stackResult2$$=$stackResult$$.pop(),$stackResult$$.push($stackResult1_token$$4$$||$stackResult2$$)):"not"===$stackResult1_token$$4$$&&($stackResult1_token$$4$$=$stackResult$$.pop(),$stackResult$$.push(!$stackResult1_token$$4$$));return 1===$stackResult$$.length&&$stackResult$$.pop()}
function $JSCompiler_StaticMethods_doesNumberMatchToken$$($token$$5$$,$text$$9$$){var $op_txt$$inline_76$$,$exp$$,$actual$$;$op_txt$$inline_76$$=$text$$9$$;"$"===$op_txt$$inline_76$$.charAt(0)&&($op_txt$$inline_76$$=$op_txt$$inline_76$$.substring(1));$actual$$=parseFloat($op_txt$$inline_76$$);if(0===$token$$5$$.indexOf("="))$op_txt$$inline_76$$="=",$exp$$=parseFloat($token$$5$$.substring(1));else if(0===$token$$5$$.indexOf("!="))$op_txt$$inline_76$$="!=",$exp$$=parseFloat($token$$5$$.substring(2));
else if(0===$token$$5$$.indexOf(">="))$op_txt$$inline_76$$=">=",$exp$$=parseFloat($token$$5$$.substring(2));else if(0===$token$$5$$.indexOf(">"))$op_txt$$inline_76$$=">",$exp$$=parseFloat($token$$5$$.substring(1));else if(0===$token$$5$$.indexOf("<="))$op_txt$$inline_76$$="<=",$exp$$=parseFloat($token$$5$$.substring(2));else if(0===$token$$5$$.indexOf("<"))$op_txt$$inline_76$$="<",$exp$$=parseFloat($token$$5$$.substring(1));else return $JSCompiler_alias_TRUE$$;switch($op_txt$$inline_76$$){case "!=":return $actual$$!==
$exp$$;case "=":return $actual$$===$exp$$;case ">=":return $actual$$>=$exp$$;case ">":return $actual$$>$exp$$;case "<=":return $actual$$<=$exp$$;case "<":return $actual$$<$exp$$}$JSCompiler_alias_THROW$$(Error("Could not find a number operation: "+$op_txt$$inline_76$$))}
function $JSCompiler_StaticMethods_normaliseTerm$$($tokens$$,$token$$7$$,$term$$){for(var $idx$$1$$=$token$$7$$.indexOf($term$$);-1!==$idx$$1$$;)0<$idx$$1$$&&$tokens$$.push($token$$7$$.substring(0,$idx$$1$$)),$tokens$$.push($term$$),$token$$7$$=$token$$7$$.substring($idx$$1$$+1),$idx$$1$$=$token$$7$$.indexOf($term$$);return $token$$7$$};function $goog$net$Cookies$$($context$$){this.$document_$=$context$$}var $goog$net$Cookies$SPLIT_RE_$$=/\s*;\s*/;
$goog$net$Cookies$$.prototype.set=function $$goog$net$Cookies$$$$set$($name$$61$$,$value$$65$$,$expiresStr_opt_maxAge$$,$opt_path_pathStr$$,$domainStr_opt_domain$$,$opt_secure_secureStr$$){/[;=\s]/.test($name$$61$$)&&$JSCompiler_alias_THROW$$(Error('Invalid cookie name "'+$name$$61$$+'"'));/[;\r\n]/.test($value$$65$$)&&$JSCompiler_alias_THROW$$(Error('Invalid cookie value "'+$value$$65$$+'"'));$expiresStr_opt_maxAge$$!==$JSCompiler_alias_VOID$$||($expiresStr_opt_maxAge$$=-1);$domainStr_opt_domain$$=
$domainStr_opt_domain$$?";domain="+$domainStr_opt_domain$$:"";$opt_path_pathStr$$=$opt_path_pathStr$$?";path="+$opt_path_pathStr$$:"";$opt_secure_secureStr$$=$opt_secure_secureStr$$?";secure":"";$expiresStr_opt_maxAge$$=0>$expiresStr_opt_maxAge$$?"":0==$expiresStr_opt_maxAge$$?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date($goog$now$$()+1E3*$expiresStr_opt_maxAge$$)).toUTCString();this.$document_$.cookie=$name$$61$$+"="+$value$$65$$+$domainStr_opt_domain$$+$opt_path_pathStr$$+
$expiresStr_opt_maxAge$$+$opt_secure_secureStr$$};$goog$net$Cookies$$.prototype.get=function $$goog$net$Cookies$$$$get$($name$$62$$,$opt_default$$){for(var $nameEq$$=$name$$62$$+"=",$parts$$3$$=(this.$document_$.cookie||"").split($goog$net$Cookies$SPLIT_RE_$$),$i$$77$$=0,$part$$2$$;$part$$2$$=$parts$$3$$[$i$$77$$];$i$$77$$++)if(0==$part$$2$$.indexOf($nameEq$$))return $part$$2$$.substr($nameEq$$.length);return $opt_default$$};var $goog$net$cookies$$=new $goog$net$Cookies$$(document);
$goog$net$cookies$$.$MAX_COOKIE_LENGTH$=3950;function $picnet$ui$filter$GenericListFilter$$($filterInput$$,$list$$,$options$$2$$){this.list=$list$$;this.options=$options$$2$$;this.$filterInput$=$filterInput$$;this.$filters$=[this.$filterInput$];this.$eventHandler$=new $goog$events$EventHandler$$(this);this.search=new $picnet$ui$filter$SearchEngine$$;this.$initialiseFilters$()}$goog$inherits$$($picnet$ui$filter$GenericListFilter$$,$goog$Disposable$$);var $picnet$ui$filter$GenericListFilter$filteridx$$=0;$JSCompiler_prototypeAlias$$=$picnet$ui$filter$GenericListFilter$$.prototype;
$JSCompiler_prototypeAlias$$.$initialiseFilters$=function $$JSCompiler_prototypeAlias$$$$initialiseFilters$$(){this.$filterKey$=(this.list.getAttribute("id")||this.list.getAttribute("name")||"")+"_"+ ++$picnet$ui$filter$GenericListFilter$filteridx$$+"_filters";this.$initialiseControlCaches$();$JSCompiler_StaticMethods_registerListenersOnFilters$$(this);var $additionalFilterStates$$inline_87_filterState$$inline_82$$=this.options.enableCookies&&$goog$net$cookies$$.get(this.$filterKey$);if($additionalFilterStates$$inline_87_filterState$$inline_82$$){for(var $additionalFilterStates$$inline_87_filterState$$inline_82$$=
$additionalFilterStates$$inline_87_filterState$$inline_82$$.split("|"),$additionalStates$$inline_88_states$$inline_83$$=[],$additionalFilterValueCookieId$$inline_86_i$$inline_84$$=0;$additionalFilterValueCookieId$$inline_86_i$$inline_84$$<$additionalFilterStates$$inline_87_filterState$$inline_82$$.length;$additionalFilterValueCookieId$$inline_86_i$$inline_84$$++){var $additionalState$$inline_89_state$$inline_85$$=$additionalFilterStates$$inline_87_filterState$$inline_82$$[$additionalFilterValueCookieId$$inline_86_i$$inline_84$$].split(",");
$additionalStates$$inline_88_states$$inline_83$$.push(new $picnet$ui$filter$FilterState$$($additionalState$$inline_89_state$$inline_85$$[0],$additionalState$$inline_89_state$$inline_85$$[3],parseInt($additionalState$$inline_89_state$$inline_85$$[1],10),$additionalState$$inline_89_state$$inline_85$$[2]))}$JSCompiler_StaticMethods_applyFilterStates$$(this,$additionalStates$$inline_88_states$$inline_83$$,$JSCompiler_alias_TRUE$$)}if($additionalFilterValueCookieId$$inline_86_i$$inline_84$$=this.options.additionalFilterValueCookieId)if($additionalFilterStates$$inline_87_filterState$$inline_82$$=
this.options.enableCookies&&$goog$net$cookies$$.get($additionalFilterValueCookieId$$inline_86_i$$inline_84$$)){$additionalFilterStates$$inline_87_filterState$$inline_82$$=$additionalFilterStates$$inline_87_filterState$$inline_82$$.split("|");$additionalStates$$inline_88_states$$inline_83$$=[];for($additionalFilterValueCookieId$$inline_86_i$$inline_84$$=0;$additionalFilterValueCookieId$$inline_86_i$$inline_84$$<$additionalFilterStates$$inline_87_filterState$$inline_82$$.length;$additionalFilterValueCookieId$$inline_86_i$$inline_84$$++)$additionalState$$inline_89_state$$inline_85$$=
$additionalFilterStates$$inline_87_filterState$$inline_82$$[$additionalFilterValueCookieId$$inline_86_i$$inline_84$$].split(","),$additionalStates$$inline_88_states$$inline_83$$.push(new $picnet$ui$filter$FilterState$$($additionalState$$inline_89_state$$inline_85$$[0],$additionalState$$inline_89_state$$inline_85$$[3],parseInt($additionalState$$inline_89_state$$inline_85$$[1],10),$additionalState$$inline_89_state$$inline_85$$[2]));$JSCompiler_StaticMethods_applyFilterStates$$(this,$additionalStates$$inline_88_states$$inline_83$$,
$JSCompiler_alias_TRUE$$)}};
function $JSCompiler_StaticMethods_registerListenersOnFilters$$($JSCompiler_StaticMethods_registerListenersOnFilters$self$$){var a;$goog$array$forEach$$($JSCompiler_StaticMethods_registerListenersOnFilters$self$$.$filters$,function($filter$$){$JSCompiler_StaticMethods_listen$$(this.$eventHandler$,$filter$$,"text"===$filter$$.getAttribute("type")?"keyup":"change",this.$onFilterChanged$,this)},$JSCompiler_StaticMethods_registerListenersOnFilters$self$$);if($JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.clearFiltersControls)for(var $i$$81$$=0;$i$$81$$<
$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.clearFiltersControls.length;$i$$81$$++)$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.clearFiltersControls[$i$$81$$].length&&($JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.clearFiltersControls[$i$$81$$]=$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.clearFiltersControls[$i$$81$$][0]),$JSCompiler_StaticMethods_listen$$($JSCompiler_StaticMethods_registerListenersOnFilters$self$$.$eventHandler$,
$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.clearFiltersControls[$i$$81$$],"click",$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.$clearAllFilters$,$JSCompiler_StaticMethods_registerListenersOnFilters$self$$);if($JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.additionalFilterTriggers)for($i$$81$$=0;$i$$81$$<$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.additionalFilterTriggers.length;$i$$81$$++){var $trigger$$=$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.additionalFilterTriggers[$i$$81$$];
$trigger$$.length&&(a=$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.additionalFilterTriggers[$i$$81$$]=$trigger$$[0],$trigger$$=a);var $type$$74$$=$trigger$$.options?"select-one":$trigger$$.getAttribute("type");switch($type$$74$$){case "select-one":$JSCompiler_StaticMethods_listen$$($JSCompiler_StaticMethods_registerListenersOnFilters$self$$.$eventHandler$,$trigger$$,"change",$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.$onFilterChanged$,$JSCompiler_StaticMethods_registerListenersOnFilters$self$$);
break;case "text":$trigger$$.setAttribute("title",$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.options.filterToolTipMessage);$JSCompiler_StaticMethods_listen$$($JSCompiler_StaticMethods_registerListenersOnFilters$self$$.$eventHandler$,$trigger$$,"keyup",$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.$onFilterChanged$,$JSCompiler_StaticMethods_registerListenersOnFilters$self$$);break;case "checkbox":$JSCompiler_StaticMethods_listen$$($JSCompiler_StaticMethods_registerListenersOnFilters$self$$.$eventHandler$,
$trigger$$,"click",$JSCompiler_StaticMethods_registerListenersOnFilters$self$$.$onFilterChanged$,$JSCompiler_StaticMethods_registerListenersOnFilters$self$$);break;default:$JSCompiler_alias_THROW$$("Filter type "+$type$$74$$+" is not supported")}}}
$JSCompiler_prototypeAlias$$.$clearAllFilters$=function $$JSCompiler_prototypeAlias$$$$clearAllFilters$$(){$goog$array$forEach$$(this.$filters$,this.$clearFilterValue$,this);this.options.additionalFilterTriggers&&$goog$array$forEach$$(this.options.additionalFilterTriggers,this.$clearFilterValue$,this);this.refresh()};
$JSCompiler_prototypeAlias$$.$clearFilterValue$=function $$JSCompiler_prototypeAlias$$$$clearFilterValue$$($f$$26$$){var $type$$75$$=$f$$26$$.options?"select-one":$f$$26$$.getAttribute("type");switch($type$$75$$){case "select-one":$f$$26$$.selectedIndex=0;break;case "text":$f$$26$$.value="";break;case "checkbox":$f$$26$$.checked=$JSCompiler_alias_FALSE$$;break;default:$JSCompiler_alias_THROW$$("Filter type "+$type$$75$$+" is not supported")}};
$JSCompiler_prototypeAlias$$.$initialiseControlCaches$=function $$JSCompiler_prototypeAlias$$$$initialiseControlCaches$$(){this.$listItems$=this.list.childNodes};$JSCompiler_prototypeAlias$$.$onFilterChanged$=function $$JSCompiler_prototypeAlias$$$$onFilterChanged$$(){this.$lastkeytime$=(new Date).getTime();this.$quickFindTimer$()};
$JSCompiler_prototypeAlias$$.$quickFindTimer$=function $$JSCompiler_prototypeAlias$$$$quickFindTimer$$(){if(this.$lastTimerID$)clearTimeout(this.$lastTimerID$),this.$lastTimerID$=0;this.$cancelQuickFind$=$JSCompiler_alias_TRUE$$;var $delay$$3$$=this.options.filterDelay;(new Date).getTime()-this.$lastkeytime$>=$delay$$3$$?this.refresh():this.$lastTimerID$=$goog$Timer$callOnce$$(function(){this.$quickFindTimer$.call(this)},$delay$$3$$/3,this)};
$JSCompiler_prototypeAlias$$.refresh=function $$JSCompiler_prototypeAlias$$$refresh$(){this.$cancelQuickFind$=$JSCompiler_alias_FALSE$$;clearTimeout(this.$lastTimerID$);var $filterStates$$=this.$getFilterStates$();$JSCompiler_StaticMethods_applyFilterStates$$(this,$filterStates$$,$JSCompiler_alias_FALSE$$);if(this.options.enableCookies){for(var $val$$inline_93$$=[],$additionalFilter$$inline_94$$=[],$additionalFilterValueCookieId$$inline_95$$=$JSCompiler_alias_NULL$$,$i$$inline_96$$=0;$i$$inline_96$$<
$filterStates$$.length;$i$$inline_96$$++){var $state$$inline_97$$=$filterStates$$[$i$$inline_96$$],$val$$inline_93$$=$JSCompiler_StaticMethods_addFilterStateToStringArray$$($val$$inline_93$$,$state$$inline_97$$),$additionalFilterValueCookieId$$inline_95$$=this.options.additionalFilterValueCookieId;if(this.options.additionalFilterTriggers&&$additionalFilterValueCookieId$$inline_95$$)for(var $j$$inline_98$$=0;$j$$inline_98$$<this.options.additionalFilterTriggers.length;$j$$inline_98$$++)$state$$inline_97$$.id===
this.options.additionalFilterTriggers[$j$$inline_98$$].getAttribute("id")&&($additionalFilter$$inline_94$$=$JSCompiler_StaticMethods_addFilterStateToStringArray$$($additionalFilter$$inline_94$$,$state$$inline_97$$))}$goog$net$cookies$$.set(this.$filterKey$,$val$$inline_93$$.join(""),999999);this.options.additionalFilterTriggers&&$additionalFilterValueCookieId$$inline_95$$&&$goog$net$cookies$$.set($additionalFilterValueCookieId$$inline_95$$,$additionalFilter$$inline_94$$.join(""),999999)}};
$JSCompiler_prototypeAlias$$.$getFilterStates$=function $$JSCompiler_prototypeAlias$$$$getFilterStates$$(){var $state$$1$$=this.$getFilterStateForFilter$(this.$filterInput$);return $state$$1$$?[$state$$1$$]:[]};
$JSCompiler_prototypeAlias$$.$getFilterStateForFilter$=function $$JSCompiler_prototypeAlias$$$$getFilterStateForFilter$$($filter$$1$$){var $type$$76$$=$filter$$1$$.options?"select-one":$filter$$1$$.getAttribute("type"),$value$$67$$;switch($type$$76$$){case "text":$value$$67$$=$filter$$1$$.value===$JSCompiler_alias_NULL$$?$JSCompiler_alias_NULL$$:$filter$$1$$.value.toLowerCase();break;case "select-one":$value$$67$$=0===$filter$$1$$.selectedIndex?$JSCompiler_alias_NULL$$:$filter$$1$$.options[$filter$$1$$.selectedIndex].value;
break;case "checkbox":$value$$67$$=$filter$$1$$.checked;break;default:$JSCompiler_alias_THROW$$("Filter type "+$type$$76$$+" is not supported")}return $value$$67$$===$JSCompiler_alias_NULL$$||0>=$value$$67$$.length?$JSCompiler_alias_NULL$$:new $picnet$ui$filter$FilterState$$($filter$$1$$.getAttribute("id"),$value$$67$$,0,$type$$76$$)};
function $JSCompiler_StaticMethods_addFilterStateToStringArray$$($cookieStringArray$$,$filterState$$1$$){0<$cookieStringArray$$.length&&$cookieStringArray$$.push("|");$cookieStringArray$$.push($filterState$$1$$.id);$cookieStringArray$$.push(",");$cookieStringArray$$.push($filterState$$1$$.$idx$);$cookieStringArray$$.push(",");$cookieStringArray$$.push($filterState$$1$$.type);$cookieStringArray$$.push(",");$cookieStringArray$$.push($filterState$$1$$.value);return $cookieStringArray$$}
function $JSCompiler_StaticMethods_applyFilterStates$$($JSCompiler_StaticMethods_applyFilterStates$self$$,$filterStates$$2$$,$setValueOnFilter$$){$JSCompiler_StaticMethods_applyFilterStates$self$$.options.filteringElements&&$JSCompiler_StaticMethods_applyFilterStates$self$$.options.filteringElements($filterStates$$2$$);$JSCompiler_StaticMethods_applyFilterStatesImpl$$($JSCompiler_StaticMethods_applyFilterStates$self$$,$filterStates$$2$$,$setValueOnFilter$$);$JSCompiler_StaticMethods_applyFilterStates$self$$.options.filteredElements&&
$JSCompiler_StaticMethods_applyFilterStates$self$$.options.filteredElements($filterStates$$2$$)}
function $JSCompiler_StaticMethods_applyFilterStatesImpl$$($JSCompiler_StaticMethods_applyFilterStatesImpl$self$$,$filterStates$$3$$,$setValueOnFilter$$1$$){$JSCompiler_StaticMethods_clearElementFilteredStates$$($JSCompiler_StaticMethods_applyFilterStatesImpl$self$$);if(!(0===(!$filterStates$$3$$||$filterStates$$3$$.length)&&$JSCompiler_StaticMethods_applyFilterStatesImpl$self$$.options.matchingElement))if($filterStates$$3$$===$JSCompiler_alias_NULL$$||0===$filterStates$$3$$.length)$JSCompiler_StaticMethods_applyStateToElements$$($JSCompiler_StaticMethods_applyFilterStatesImpl$self$$,
$JSCompiler_alias_NULL$$);else for(var $i$$84$$=0;$i$$84$$<$filterStates$$3$$.length;$i$$84$$++){var $state$$3$$=$filterStates$$3$$[$i$$84$$];if($setValueOnFilter$$1$$&&$state$$3$$.type&&$state$$3$$.id){var $filter$$2$$=$goog$isString$$($state$$3$$.id)?document.getElementById($state$$3$$.id):$state$$3$$.id;0===$filter$$2$$.length&&$JSCompiler_alias_THROW$$("Could not find the speficied filter: "+$state$$3$$.id);switch($state$$3$$.type){case "select-one":$goog$array$forEach$$($filter$$2$$.options,
function($o$$1$$,$idx$$2$$){$o$$1$$.value===$state$$3$$.value?($o$$1$$.setAttribute("selected","selected"),$filter$$2$$.selectedIndex=$idx$$2$$):$o$$1$$.removeAttribute("selected")});break;case "text":$filter$$2$$.value=$state$$3$$.value;break;case "checkbox":$filter$$2$$.checked="true"===$state$$3$$.value;break;default:$JSCompiler_alias_THROW$$("Filter type "+$state$$3$$.type+" is not supported")}}$JSCompiler_StaticMethods_applyStateToElements$$($JSCompiler_StaticMethods_applyFilterStatesImpl$self$$,
$state$$3$$)}$JSCompiler_StaticMethods_hideElementsThatDoNotMatchAnyFiltres$$($JSCompiler_StaticMethods_applyFilterStatesImpl$self$$)}function $JSCompiler_StaticMethods_clearElementFilteredStates$$($JSCompiler_StaticMethods_clearElementFilteredStates$self$$){$goog$array$forEach$$($JSCompiler_StaticMethods_clearElementFilteredStates$self$$.$listItems$,function($r$$){$r$$.removeAttribute("filtermatch")})}
function $JSCompiler_StaticMethods_applyStateToElements$$($JSCompiler_StaticMethods_applyStateToElements$self$$,$filterState$$2$$){for(var $normalisedTokens$$3$$=$JSCompiler_StaticMethods_getNormalisedSearchTokensForState$$($JSCompiler_StaticMethods_applyStateToElements$self$$,$filterState$$2$$),$i$$85$$=0;$i$$85$$<$JSCompiler_StaticMethods_applyStateToElements$self$$.$listItems$.length&&!$JSCompiler_StaticMethods_applyStateToElements$self$$.$cancelQuickFind$;$i$$85$$++){var $item$$=$JSCompiler_StaticMethods_applyStateToElements$self$$.$listItems$[$i$$85$$];
$item$$.getAttribute("filtermatch")||$JSCompiler_StaticMethods_applyStateToElements$self$$.$doesElementContainText$($filterState$$2$$,$item$$,$normalisedTokens$$3$$)||$item$$.setAttribute("filtermatch","false")}}
function $JSCompiler_StaticMethods_getNormalisedSearchTokensForState$$($JSCompiler_StaticMethods_getNormalisedSearchTokensForState$self$$,$state$$4$$){if($state$$4$$===$JSCompiler_alias_NULL$$)return $JSCompiler_alias_NULL$$;switch($state$$4$$.type){case "select-one":return[$state$$4$$.value];case "text":var $JSCompiler_StaticMethods_parseSearchTokens$self$$inline_101_JSCompiler_inline_result$$100$$;$JSCompiler_StaticMethods_parseSearchTokens$self$$inline_101_JSCompiler_inline_result$$100$$=$JSCompiler_StaticMethods_getNormalisedSearchTokensForState$self$$.search;
var $matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$=$state$$4$$.value;if($matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$){var $matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$=$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$.toLowerCase(),$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$;$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$=
$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$.replace(">= ",">=").replace("> ",">").replace("<= ","<=").replace("< ","<").replace("!= ","!=").replace("= ","=");for(var $i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$=/([^"^\s]+)\s*|"([^"]+)"\s*/g,$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$=[],$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$=$JSCompiler_alias_NULL$$;$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$=
$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$.exec($exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$);)$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$.push($i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$[1]||$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$[2]);$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$=[];
for($i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$=0;$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$<$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$.length;$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$++)$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$=$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$[$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$],
$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$=$JSCompiler_StaticMethods_normaliseTerm$$($exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$,$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$,"("),$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$=$JSCompiler_StaticMethods_normaliseTerm$$($exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$,$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$,
")"),0<$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$.length&&$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.push($i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$);$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$=$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$;$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$=
[];for(var $lastToken$$inline_153_normalisedTokens$$inline_159$$,$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$=0;$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$<$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$.length;$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$++)if(($i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$=$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$[$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$])&&
0!==$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$.length)0===$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$.indexOf("-")&&($i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$="not",$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$[$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$]=$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$[$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$].substring(1),
$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$--),$lastToken$$inline_153_normalisedTokens$$inline_159$$&&"("!==$lastToken$$inline_153_normalisedTokens$$inline_159$$&&"not"!==$lastToken$$inline_153_normalisedTokens$$inline_159$$&&"and"!==$lastToken$$inline_153_normalisedTokens$$inline_159$$&&"or"!==$lastToken$$inline_153_normalisedTokens$$inline_159$$&&"and"!==$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$&&"or"!==$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$&&
")"!==$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$&&$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.push("and"),$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.push($i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$),$lastToken$$inline_153_normalisedTokens$$inline_159$$=$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$;$lastToken$$inline_153_normalisedTokens$$inline_159$$=
$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$;$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$="";$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$=[];for($i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$=0;$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$<$lastToken$$inline_153_normalisedTokens$$inline_159$$.length;$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$++){var $token$$inline_164$$=
$lastToken$$inline_153_normalisedTokens$$inline_159$$[$i$$inline_163_match$$inline_174_token$$inline_149_token$$inline_155$$];if(0!==$token$$inline_164$$.length)if("and"!==$token$$inline_164$$&&"or"!==$token$$inline_164$$&&"not"!==$token$$inline_164$$&&"("!==$token$$inline_164$$&&")"!==$token$$inline_164$$)$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$=$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$+"|"+$token$$inline_164$$;else if(0===
$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.length||"("===$token$$inline_164$$)$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.push($token$$inline_164$$);else if(")"===$token$$inline_164$$)for($i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$=$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.pop();"("!==$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$&&
0<$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.length;)$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$=$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$+"|"+$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$,$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$=$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.pop();
else{if("("!==$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$[$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.length-1])for(;0!==$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.length&&!("("===$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$[$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.length-
1]);)if($JSCompiler_StaticMethods_parseSearchTokens$self$$inline_101_JSCompiler_inline_result$$100$$.$precedences_$[$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$[$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.length-1]]>$JSCompiler_StaticMethods_parseSearchTokens$self$$inline_101_JSCompiler_inline_result$$100$$.$precedences_$[$token$$inline_164$$])$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$=
$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.pop(),$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$=$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$+"|"+$i$$inline_148_i$$inline_154_regex$$inline_172_stackOperator$$inline_162$$;else break;$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.push($token$$inline_164$$)}}for(;0<$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.length;)$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$=
$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$+"|"+$exp$$inline_171_newTokens$$inline_152_normalisedTokens$$inline_147_stackOps$$inline_161$$.pop();$JSCompiler_StaticMethods_parseSearchTokens$self$$inline_101_JSCompiler_inline_result$$100$$=$matches$$inline_173_postFix$$inline_160_text$$inline_102_tokens$$inline_151$$.substring(1).split("|")}else $JSCompiler_StaticMethods_parseSearchTokens$self$$inline_101_JSCompiler_inline_result$$100$$=$JSCompiler_alias_NULL$$;return $JSCompiler_StaticMethods_parseSearchTokens$self$$inline_101_JSCompiler_inline_result$$100$$;
case "checkbox":return $JSCompiler_alias_NULL$$;default:$JSCompiler_alias_THROW$$("State type "+$state$$4$$.type+" is not supported")}}
function $JSCompiler_StaticMethods_hideElementsThatDoNotMatchAnyFiltres$$($JSCompiler_StaticMethods_hideElementsThatDoNotMatchAnyFiltres$self$$){for(var $i$$86$$=0;$i$$86$$<$JSCompiler_StaticMethods_hideElementsThatDoNotMatchAnyFiltres$self$$.$listItems$.length&&!$JSCompiler_StaticMethods_hideElementsThatDoNotMatchAnyFiltres$self$$.$cancelQuickFind$;$i$$86$$++){var $item$$1$$=$JSCompiler_StaticMethods_hideElementsThatDoNotMatchAnyFiltres$self$$.$listItems$[$i$$86$$],$show$$="false"!==$item$$1$$.getAttribute("filtermatch");
$item$$1$$.style.display=$show$$?"":"none"}}
$JSCompiler_prototypeAlias$$.$doesElementContainText$=function $$JSCompiler_prototypeAlias$$$$doesElementContainText$$($state$$5$$,$item$$2$$,$textTokens$$1$$,$optText_text$$inline_167$$){var $JSCompiler_temp$$135_JSCompiler_temp$$2_exact_object$$inline_112$$=$state$$5$$!=$JSCompiler_alias_NULL$$&&"select-one"===$state$$5$$.type;$optText_text$$inline_167$$||($optText_text$$inline_167$$=$goog$string$trim$$($goog$dom$getTextContent$$($item$$2$$)));if($JSCompiler_temp$$135_JSCompiler_temp$$2_exact_object$$inline_112$$=$JSCompiler_StaticMethods_doesTextMatchTokens$$($optText_text$$inline_167$$,
$textTokens$$1$$,$JSCompiler_temp$$135_JSCompiler_temp$$2_exact_object$$inline_112$$))this.options.matchingElement?($JSCompiler_temp$$135_JSCompiler_temp$$2_exact_object$$inline_112$$=$item$$2$$,window.jQuery&&($JSCompiler_temp$$135_JSCompiler_temp$$2_exact_object$$inline_112$$=window.jQuery($item$$2$$)),$JSCompiler_temp$$135_JSCompiler_temp$$2_exact_object$$inline_112$$=this.options.matchingElement($state$$5$$,$JSCompiler_temp$$135_JSCompiler_temp$$2_exact_object$$inline_112$$,$textTokens$$1$$)):
$JSCompiler_temp$$135_JSCompiler_temp$$2_exact_object$$inline_112$$=$JSCompiler_alias_TRUE$$;return $JSCompiler_temp$$135_JSCompiler_temp$$2_exact_object$$inline_112$$};
$JSCompiler_prototypeAlias$$.$disposeInternal$=function $$JSCompiler_prototypeAlias$$$$disposeInternal$$(){$picnet$ui$filter$GenericListFilter$$.$superClass_$.$disposeInternal$.call(this);$goog$dispose$$(this.options);$goog$dispose$$(this.$eventHandler$);$goog$dispose$$(this.search);delete this.list;delete this.$filterInput$;delete this.$listItems$;delete this.$filters$};function $picnet$ui$filter$TableFilterOptions$$(){}$goog$inherits$$($picnet$ui$filter$TableFilterOptions$$,$picnet$ui$filter$GenericListFilterOptions$$);function $picnet$ui$filter$TableFilter$$($grid$$,$options$$3$$){$options$$3$$.matchingRow&&($options$$3$$.matchingElement=$options$$3$$.matchingRow);$options$$3$$.filteringRows&&($options$$3$$.filteringElements=$options$$3$$.filteringRows);$options$$3$$.filteredRows&&($options$$3$$.filteredElements=$options$$3$$.filteredRows);$picnet$ui$filter$GenericListFilter$$.call(this,$JSCompiler_alias_NULL$$,$grid$$,$options$$3$$)}$goog$inherits$$($picnet$ui$filter$TableFilter$$,$picnet$ui$filter$GenericListFilter$$);
$JSCompiler_prototypeAlias$$=$picnet$ui$filter$TableFilter$$.prototype;$JSCompiler_prototypeAlias$$.$initialiseFilters$=function $$JSCompiler_prototypeAlias$$$$initialiseFilters$$(){this.$thead$=$goog$dom$getElementsByTagNameAndClass_$$("thead",$JSCompiler_alias_NULL$$,this.options.frozenHeaderTable||this.list)[0];this.$tbody$=$goog$dom$getElementsByTagNameAndClass_$$("tbody",$JSCompiler_alias_NULL$$,this.list)[0];$picnet$ui$filter$TableFilter$$.$superClass_$.$initialiseFilters$.call(this)};
$JSCompiler_prototypeAlias$$.$initialiseControlCaches$=function $$JSCompiler_prototypeAlias$$$$initialiseControlCaches$$(){this.headers=$goog$dom$getElementsByTagNameAndClass_$$("th",$JSCompiler_alias_NULL$$,this.$thead$);this.$listItems$=$goog$dom$getElementsByTagNameAndClass_$$("tr",$JSCompiler_alias_NULL$$,this.$tbody$);$JSCompiler_StaticMethods_buildFiltersRow$$(this);var $tHeadFilters$$=$goog$dom$getElementsByTagNameAndClass_$$("tr","filters",this.$thead$)[0];this.$filters$=$goog$array$concat$$($goog$array$map$$($goog$dom$getElementsByTagNameAndClass_$$("input",
$JSCompiler_alias_NULL$$,$tHeadFilters$$),function($ctl$$){return $ctl$$}),$goog$array$map$$($goog$dom$getElementsByTagNameAndClass_$$("select",$JSCompiler_alias_NULL$$,$tHeadFilters$$),function($ctl$$1$$){return $ctl$$1$$}));this.$filterColumnIndexes$=$goog$array$map$$(this.$filters$,this.$getColumnIndexOfFilter$,this)};
$JSCompiler_prototypeAlias$$.$getColumnIndexOfFilter$=function $$JSCompiler_prototypeAlias$$$$getColumnIndexOfFilter$$($f$$27_td$$){var $f$$27_td$$=$goog$dom$getAncestorByTagNameAndClass$$($f$$27_td$$,"TD"),$cells$$=$goog$dom$getAncestorByTagNameAndClass$$($f$$27_td$$,"TR").getElementsByTagName("td");return $goog$array$indexOf$$($cells$$,$f$$27_td$$)};
function $JSCompiler_StaticMethods_buildFiltersRow$$($JSCompiler_StaticMethods_buildFiltersRow$self$$){for(var $tr$$1$$=$goog$dom$createDom$$("tr",{"class":"filters"}),$i$$87$$=0;$i$$87$$<$JSCompiler_StaticMethods_buildFiltersRow$self$$.headers.length;$i$$87$$++){var $element$$inline_119_filterType$$inline_117_header$$2_td$$1$$=$JSCompiler_StaticMethods_buildFiltersRow$self$$.headers[$i$$87$$],$filterClass_visible$$="none"!=$element$$inline_119_filterType$$inline_117_header$$2_td$$1$$.style.display;
if($filterClass_visible$$){var $JSCompiler_StaticMethods_getFilterDom$self$$inline_114_headerText$$="false"===$element$$inline_119_filterType$$inline_117_header$$2_td$$1$$.getAttribute("filter")||!$filterClass_visible$$?"":$goog$dom$getTextContent$$($element$$inline_119_filterType$$inline_117_header$$2_td$$1$$),$filterClass_visible$$=$element$$inline_119_filterType$$inline_117_header$$2_td$$1$$.getAttribute("filter-class");if($JSCompiler_StaticMethods_getFilterDom$self$$inline_114_headerText$$&&1<
$JSCompiler_StaticMethods_getFilterDom$self$$inline_114_headerText$$.length){var $filter$$3$$;a:{var $JSCompiler_StaticMethods_getFilterDom$self$$inline_114_headerText$$=$JSCompiler_StaticMethods_buildFiltersRow$self$$,$colIdx$$inline_115$$=$i$$87$$,$element$$inline_119_filterType$$inline_117_header$$2_td$$1$$=$element$$inline_119_filterType$$inline_117_header$$2_td$$1$$.getAttribute("filter-type")||"text";switch($element$$inline_119_filterType$$inline_117_header$$2_td$$1$$){case "text":$filter$$3$$=
$goog$dom$createDom$$("input",{type:"search",id:"filter_"+$colIdx$$inline_115$$,"class":"filter",title:$JSCompiler_StaticMethods_getFilterDom$self$$inline_114_headerText$$.options.filterToolTipMessage});break a;case "ddl":$filter$$3$$=$JSCompiler_StaticMethods_getSelectFilter$$($JSCompiler_StaticMethods_getFilterDom$self$$inline_114_headerText$$,$colIdx$$inline_115$$);break a;default:$JSCompiler_alias_THROW$$("filter-type: "+$element$$inline_119_filterType$$inline_117_header$$2_td$$1$$+" is not supported")}}$element$$inline_119_filterType$$inline_117_header$$2_td$$1$$=
$filter$$3$$;$goog$isString$$("width")?$goog$style$setStyle_$$($element$$inline_119_filterType$$inline_117_header$$2_td$$1$$,"95%","width"):$goog$object$forEach$$("width",$goog$partial$$($goog$style$setStyle_$$,$element$$inline_119_filterType$$inline_117_header$$2_td$$1$$));$element$$inline_119_filterType$$inline_117_header$$2_td$$1$$=$goog$dom$createDom$$("td",$JSCompiler_alias_NULL$$,$filter$$3$$)}else $element$$inline_119_filterType$$inline_117_header$$2_td$$1$$=$goog$dom$createDom$$("td",{},"");
$filterClass_visible$$&&$goog$dom$classes$add$$($element$$inline_119_filterType$$inline_117_header$$2_td$$1$$,$filterClass_visible$$);$tr$$1$$.appendChild($element$$inline_119_filterType$$inline_117_header$$2_td$$1$$)}}$JSCompiler_StaticMethods_buildFiltersRow$self$$.$thead$.appendChild($tr$$1$$)}
function $JSCompiler_StaticMethods_getSelectFilter$$($JSCompiler_StaticMethods_getSelectFilter$self$$,$colIdx$$1$$){var $select$$=$goog$dom$createDom$$("select",{id:"filter_"+$colIdx$$1$$,"class":"filter"},$goog$dom$createDom$$("option",{},$JSCompiler_StaticMethods_getSelectFilter$self$$.options.selectOptionLabel)),$cells$$1$$=$goog$array$map$$($JSCompiler_StaticMethods_getSelectFilter$self$$.$listItems$,function($r$$1$$){return $r$$1$$.cells[$colIdx$$1$$]}),$values$$7$$=[];$goog$array$forEach$$($cells$$1$$,
function($td$$2_txt$$1$$){($td$$2_txt$$1$$=$goog$string$trim$$($goog$dom$getTextContent$$($td$$2_txt$$1$$)))&&!("&nbsp;"===$td$$2_txt$$1$$||0<=$goog$array$indexOf$$($values$$7$$,$td$$2_txt$$1$$))&&$values$$7$$.push($td$$2_txt$$1$$)});$values$$7$$.sort();$goog$array$forEach$$($values$$7$$,function($child$$inline_128_txt$$2$$){$child$$inline_128_txt$$2$$=$goog$dom$createDom$$("option",{value:$child$$inline_128_txt$$2$$.replace('"',"&#034;")},$child$$inline_128_txt$$2$$);$select$$.appendChild($child$$inline_128_txt$$2$$)});
return $select$$}
$JSCompiler_prototypeAlias$$.$getFilterStates$=function $$JSCompiler_prototypeAlias$$$$getFilterStates$$(){for(var $filterStates$$4$$=[],$i$$88$$=0;$i$$88$$<this.$filters$.length;$i$$88$$++){var $state$$7$$=this.$getFilterStateForFilter$(this.$filters$[$i$$88$$]);$state$$7$$&&$filterStates$$4$$.push($state$$7$$)}if(!this.options.additionalFilterTriggers)return $filterStates$$4$$;for($i$$88$$=0;$i$$88$$<this.options.additionalFilterTriggers.length;$i$$88$$++)($state$$7$$=this.$getFilterStateForFilter$(this.options.additionalFilterTriggers[$i$$88$$]))&&$filterStates$$4$$.push($state$$7$$);
return $filterStates$$4$$};
$JSCompiler_prototypeAlias$$.$getFilterStateForFilter$=function $$JSCompiler_prototypeAlias$$$$getFilterStateForFilter$$($JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$){var $state$$8$$=$picnet$ui$filter$TableFilter$$.$superClass_$.$getFilterStateForFilter$.call(this,$JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$);if($state$$8$$){$JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$=$goog$dom$getAncestorByTagNameAndClass$$($JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$,"TD");
if(!$JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$||0>=$JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$.length)$JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$=-1;else var $filterRow$$inline_133$$=$goog$dom$getAncestorByTagNameAndClass$$($JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$,"TR"),$JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$=$goog$array$indexOf$$($filterRow$$inline_133$$.cells,$JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$);
$state$$8$$.$idx$=$JSCompiler_inline_result$$130_filter$$4_filterCell$$inline_132$$}return $state$$8$$};
$JSCompiler_prototypeAlias$$.$doesElementContainText$=function $$JSCompiler_prototypeAlias$$$$doesElementContainText$$($state$$9$$,$tr$$2$$,$textTokens$$5$$){var $cells$$2$$=$tr$$2$$.getElementsByTagName("td"),$columnIdx_txt$$3$$=$state$$9$$===$JSCompiler_alias_NULL$$?-1:$state$$9$$.$idx$;if(0>$columnIdx_txt$$3$$){for(var $columnIdx_txt$$3$$=[],$i$$89$$=0;$i$$89$$<$cells$$2$$.length;$i$$89$$++){var $header$$5$$=this.headers[$i$$89$$];"none"!=$header$$5$$.style.display&&"false"!==$header$$5$$.getAttribute("filter")&&
$columnIdx_txt$$3$$.push($goog$string$trim$$($goog$dom$getTextContent$$($cells$$2$$[$i$$89$$])))}return $picnet$ui$filter$TableFilter$$.$superClass_$.$doesElementContainText$.call(this,$state$$9$$,$tr$$2$$,$textTokens$$5$$,$columnIdx_txt$$3$$.join("\t"))}return $picnet$ui$filter$TableFilter$$.$superClass_$.$doesElementContainText$.call(this,$state$$9$$,$cells$$2$$[$columnIdx_txt$$3$$],$textTokens$$5$$)};
$JSCompiler_prototypeAlias$$.$disposeInternal$=function $$JSCompiler_prototypeAlias$$$$disposeInternal$$(){$picnet$ui$filter$TableFilter$$.$superClass_$.$disposeInternal$.call(this);delete this.$filterColumnIndexes$;delete this.headers;delete this.$thead$;delete this.$tbody$};var $jq$$=window.jQuery;
$jq$$&&function($jq$$1$$){$jq$$1$$.$tableFilter$=function $$jq$$1$$$$tableFilter$$($element$$67$$,$opts$$){var $tf$$;this.$init$=function $this$$init$$(){var $options$$4$$=$jq$$1$$.extend({},new $picnet$ui$filter$TableFilterOptions$$,$opts$$);$tf$$=new $picnet$ui$filter$TableFilter$$($element$$67$$,$options$$4$$)};this.refresh=function $this$refresh$(){$picnet$ui$filter$TableFilter$$.$superClass_$.refresh.call($tf$$)};this.$init$()};$jq$$1$$.fn.tableFilter=function $$jq$$1$$$fn$tableFilter$($options$$5$$){return $goog$array$forEach$$(this,function($t$$){if($JSCompiler_alias_VOID$$===
$jq$$1$$($t$$).data("tableFilter")||$jq$$1$$($t$$).data("tableFilter")===$JSCompiler_alias_NULL$$){var $plugin$$1$$=new $jq$$1$$.$tableFilter$($t$$,$options$$5$$);$jq$$1$$($t$$).data("tableFilter",$plugin$$1$$)}})};$jq$$1$$.fn.tableFilterRefresh=function $$jq$$1$$$fn$tableFilterRefresh$(){return $goog$array$forEach$$(this,function($t$$1$$){$JSCompiler_alias_VOID$$!==$jq$$1$$($t$$1$$).data("tableFilter")&&$jq$$1$$($t$$1$$).data("tableFilter")!==$JSCompiler_alias_NULL$$&&$jq$$1$$($t$$1$$).data("tableFilter").refresh()})}}($jq$$);

/*
 jQuery Plugin: Table Filter - version 0.2

 LICENSE: http://hail2u.mit-license.org/2009
*/
(function(a){a.fn.addTableFilter=function(d){var b=a.extend({},a.fn.addTableFilter.defaults,d),c,e;this.is("table")&&(this.attr("id")||this.attr({id:"t-"+Math.floor(99999999*Math.random())}),c=this.attr("id"),d=c+"-filtering",e=a("<label/>").attr({"for":d}).append(b.labelText),b=a("<input/>").attr({id:d,type:"search",size:b.size}),a("<p/>").addClass("formTableFilter").append(e).append(b).insertBefore(this),a("#"+d).delayBind("keyup",function(){var b=a(this).val().toLowerCase().split(" ");a("#"+c+" tbody tr").each(function(){var d=
a(this).html().toLowerCase().replace(/<.+?>/g,"").replace(/\s+/g," "),c=0;a.each(b,function(){if(0>d.indexOf(this))return c=1,!1});c?a(this).hide():a(this).show()})},300));return this};a.fn.addTableFilter.defaults={labelText:"Keyword(s): ",size:32};a.fn.delayBind=function(d,b,c,e){a.isFunction(b)&&(e=c,c=b,b=void 0);var g=this,f=null;return this.bind(d,b,function(b){clearTimeout(f);f=setTimeout(function(){c.apply(g,[a.extend({},b)])},e)})}})(jQuery);

/*
* jQuery UI Tag-it!
*
* @version v2.0 (06/2011)
*
* Copyright 2011, Levy Carneiro Jr.
* Released under the MIT license.
* http://aehlke.github.com/tag-it/LICENSE
*
* Homepage:
*   http://aehlke.github.com/tag-it/
*
* Authors:
*   Levy Carneiro Jr.
*   Martin Rehfeld
*   Tobias Schmidt
*   Skylar Challand
*   Alex Ehlke
*
* Maintainer:
*   Alex Ehlke - Twitter: @aehlke
*
* Dependencies:
*   jQuery v1.4+
*   jQuery UI v1.8+
*/
(function($) {

    $.widget('ui.tagit', {
        options: {
            itemName          : 'item',
            fieldName         : 'tags',
            availableTags     : [],
            tagSource         : null,
            removeConfirmation: false,
            caseSensitive     : true,
            placeholderText   : null,

            // When enabled, quotes are not neccesary
            // for inputting multi-word tags.
            allowSpaces: false,

            // Whether to animate tag removals or not.
            animate: true,

            // The below options are for using a single field instead of several
            // for our form values.
            //
            // When enabled, will use a single hidden field for the form,
            // rather than one per tag. It will delimit tags in the field
            // with singleFieldDelimiter.
            //
            // The easiest way to use singleField is to just instantiate tag-it
            // on an INPUT element, in which case singleField is automatically
            // set to true, and singleFieldNode is set to that element. This 
            // way, you don't need to fiddle with these options.
            singleField: false,

            singleFieldDelimiter: ',',

            // Set this to an input DOM node to use an existing form field.
            // Any text in it will be erased on init. But it will be
            // populated with the text of tags as they are created,
            // delimited by singleFieldDelimiter.
            //
            // If this is not set, we create an input node for it,
            // with the name given in settings.fieldName, 
            // ignoring settings.itemName.
            singleFieldNode: null,

            // Optionally set a tabindex attribute on the input that gets
            // created for tag-it.
            tabIndex: null,


            // Event callbacks.
            onTagAdded  : null,
            onTagRemoved: null,
            onTagClicked: null,
            onTagChanged: null
        },


        _create: function() {
            // for handling static scoping inside callbacks
            var that = this;

            // There are 2 kinds of DOM nodes this widget can be instantiated on:
            //     1. UL, OL, or some element containing either of these.
            //     2. INPUT, in which case 'singleField' is overridden to true,
            //        a UL is created and the INPUT is hidden.
            if (this.element.is('input')) {
                this.tagList = $('<ul></ul>').insertAfter(this.element);
                this.options.singleField = true;
                this.options.singleFieldNode = this.element;
                this.element.css('display', 'none');
            } else {
                this.tagList = this.element.find('ul, ol').andSelf().last();
            }

            this._tagInput = $('<input type="text" />').addClass('ui-widget-content');
            if (this.options.tabIndex) {
                this._tagInput.attr('tabindex', this.options.tabIndex);
            }
            if (this.options.placeholderText) {
                this._tagInput.attr('placeholder', this.options.placeholderText);
            }

            this.options.tagSource = this.options.tagSource || function(search, showChoices) {
                var filter = search.term.toLowerCase();
                var choices = $.grep(this.options.availableTags, function(element) {
                    // Only match autocomplete options that begin with the search term.
                    // (Case insensitive.)
                    return (element.toLowerCase().indexOf(filter) === 0);
                });
                showChoices(this._subtractArray(choices, this.assignedTags()));
            };

            // Bind tagSource callback functions to this context.
            if ($.isFunction(this.options.tagSource)) {
                this.options.tagSource = $.proxy(this.options.tagSource, this);
            }

            this.tagList
                .addClass('tagit')
                .addClass('ui-widget ui-widget-content ui-corner-all')
                // Create the input field.
                .append($('<li class="tagit-new"></li>').append(this._tagInput))
                .click(function(e) {
                    var target = $(e.target);
                    if (target.hasClass('tagit-label')) {
                        that._trigger('onTagClicked', e, target.closest('.tagit-choice'));
                    } else {
                        // Sets the focus() to the input field, if the user
                        // clicks anywhere inside the UL. This is needed
                        // because the input field needs to be of a small size.
                        that._tagInput.focus();
                    }
                });

            // Add existing tags from the list, if any.
            this.tagList.children('li').each(function() {
                if (!$(this).hasClass('tagit-new')) {
                    that.createTag($(this).html(), $(this).attr('class'));
                    $(this).remove();
                }
            });

            // Single field support.
            if (this.options.singleField) {
                if (this.options.singleFieldNode) {
                    // Add existing tags from the input field.
                    var node = $(this.options.singleFieldNode);
                    var tags = node.val().split(this.options.singleFieldDelimiter);
                    node.val('');
                    $.each(tags, function(index, tag) {
                        that.createTag(tag);
                    });
                } else {
                    // Create our single field input after our list.
                    this.options.singleFieldNode = this.tagList.after('<input type="hidden" style="display:none;" value="" name="' + this.options.fieldName + '" />');
                }
            }

            // Events.
            this._tagInput
                .keydown(function(event) {
                    // Backspace is not detected within a keypress, so it must use keydown.
                    if (event.which == $.ui.keyCode.BACKSPACE && that._tagInput.val() === '') {
                        var tag = that._lastTag();
                        if (!that.options.removeConfirmation || tag.hasClass('remove')) {
                            // When backspace is pressed, the last tag is deleted.
                            that.removeTag(tag);
                        } else if (that.options.removeConfirmation) {
                            tag.addClass('remove ui-state-highlight');
                        }
                    } else if (that.options.removeConfirmation) {
                        that._lastTag().removeClass('remove ui-state-highlight');
                    }

                    // Comma/Space/Enter are all valid delimiters for new tags,
                    // except when there is an open quote or if setting allowSpaces = true.
                    // Tab will also create a tag, unless the tag input is empty, in which case it isn't caught.
                    if (
                        event.which == $.ui.keyCode.COMMA ||
                        event.which == $.ui.keyCode.ENTER ||
                        (
                            event.which == $.ui.keyCode.TAB &&
                            that._tagInput.val() !== ''
                        ) ||
                        (
                            event.which == $.ui.keyCode.SPACE &&
                            that.options.allowSpaces !== true &&
                            (
                                $.trim(that._tagInput.val()).replace( /^s*/, '' ).charAt(0) != '"' ||
                                (
                                    $.trim(that._tagInput.val()).charAt(0) == '"' &&
                                    $.trim(that._tagInput.val()).charAt($.trim(that._tagInput.val()).length - 1) == '"' &&
                                    $.trim(that._tagInput.val()).length - 1 !== 0
                                )
                            )
                        )
                    ) {
                        event.preventDefault();
                        that.createTag(that._cleanedInput());

                        // The autocomplete doesn't close automatically when TAB is pressed.
                        // So let's ensure that it closes.
                        that._tagInput.autocomplete('close');
                    }
                }).blur(function(e){
                    // Create a tag when the element loses focus (unless it's empty).
                    // Removed by mikeymckay because it breaks the onTagChange event
                    //that.createTag(that._cleanedInput());
                });
                

            // Autocomplete.
            if (this.options.availableTags || this.options.tagSource) {
                this._tagInput.autocomplete({
                    source: this.options.tagSource,
                    select: function(event, ui) {
                        // Delete the last tag if we autocomplete something despite the input being empty
                        // This happens because the input's blur event causes the tag to be created when
                        // the user clicks an autocomplete item.
                        // The only artifact of this is that while the user holds down the mouse button
                        // on the selected autocomplete item, a tag is shown with the pre-autocompleted text,
                        // and is changed to the autocompleted text upon mouseup.
                        if (that._tagInput.val() === '') {
                            that.removeTag(that._lastTag(), false);
                        }
                        that.createTag(ui.item.value);
                        // Preventing the tag input to be updated with the chosen value.
                        return false;
                    }
                });
            }
        },

        _cleanedInput: function() {
            // Returns the contents of the tag input, cleaned and ready to be passed to createTag
            return $.trim(this._tagInput.val().replace(/^"(.*)"$/, '$1'));
        },

        _lastTag: function() {
            return this.tagList.children('.tagit-choice:last');
        },

        assignedTags: function() {
            // Returns an array of tag string values
            var that = this;
            var tags = [];
            if (this.options.singleField) {
                tags = $(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter);
                if (tags[0] === '') {
                    tags = [];
                }
            } else {
                this.tagList.children('.tagit-choice').each(function() {
                    tags.push(that.tagLabel(this));
                });
            }
            return tags;
        },

        _updateSingleTagsField: function(tags) {
            // Takes a list of tag string values, updates this.options.singleFieldNode.val to the tags delimited by this.options.singleFieldDelimiter
            $(this.options.singleFieldNode).val(tags.join(this.options.singleFieldDelimiter));
        },

        _subtractArray: function(a1, a2) {
            var result = [];
            for (var i = 0; i < a1.length; i++) {
                if ($.inArray(a1[i], a2) == -1) {
                    result.push(a1[i]);
                }
            }
            return result;
        },

        tagLabel: function(tag) {
            // Returns the tag's string label.
            if (this.options.singleField) {
                return $(tag).children('.tagit-label').text();
            } else {
                return $(tag).children('input').val();
            }
        },

        _isNew: function(value) {
            var that = this;
            var isNew = true;
            this.tagList.children('.tagit-choice').each(function(i) {
                if (that._formatStr(value) == that._formatStr(that.tagLabel(this))) {
                    isNew = false;
                    return false;
                }
            });
            return isNew;
        },

        _formatStr: function(str) {
            if (this.options.caseSensitive) {
                return str;
            }
            return $.trim(str.toLowerCase());
        },

        createTag: function(value, additionalClass) {
            var that = this;
            // Automatically trims the value of leading and trailing whitespace.
            value = $.trim(value);

            if (!this._isNew(value) || value === '') {
                return false;
            }

            var label = $(this.options.onTagClicked ? '<a class="tagit-label"></a>' : '<span class="tagit-label"></span>').text(value);

            // Create tag.
            var tag = $('<li></li>')
                .addClass('tagit-choice ui-widget-content ui-state-default ui-corner-all')
                .addClass(additionalClass)
                .append(label);

            // Button for removing the tag.
            var removeTagIcon = $('<span></span>')
                .addClass('ui-icon ui-icon-close');
            var removeTag = $('<a><span class="text-icon">\xd7</span></a>') // \xd7 is an X
                .addClass('tagit-close')
                .append(removeTagIcon)
                .click(function(e) {
                    // Removes a tag when the little 'x' is clicked.
                    that.removeTag(tag);
                });
            tag.append(removeTag);

            // Unless options.singleField is set, each tag has a hidden input field inline.
            if (this.options.singleField) {
                var tags = this.assignedTags();
                tags.push(value);
                this._updateSingleTagsField(tags);
            } else {
                var escapedValue = label.html();
                tag.append('<input type="hidden" style="display:none;" value="' + escapedValue + '" name="' + this.options.itemName + '[' + this.options.fieldName + '][]" />');
            }

            this._trigger('onTagAdded', null, tag);

            // Cleaning the input.
            this._tagInput.val('');

            // insert tag
            this._tagInput.parent().before(tag);

            this._trigger('onTagChanged', null, tag);
        },
        
        removeTag: function(tag, animate) {
            animate = animate || this.options.animate;

            tag = $(tag);

            this._trigger('onTagRemoved', null, tag);

            if (this.options.singleField) {
                var tags = this.assignedTags();
                var removedTagLabel = this.tagLabel(tag);
                tags = $.grep(tags, function(el){
                    return el != removedTagLabel;
                });
                this._updateSingleTagsField(tags);
            }
            // Animate the removal.
            if (animate) {
                tag.fadeOut('fast').hide('blind', {direction: 'horizontal'}, 'fast', function(){
                    tag.remove();
                }).dequeue();
            } else {
                tag.remove();
            }
            this._trigger('onTagChanged', null, tag);
        },

        removeAll: function() {
            // Removes all tags.
            var that = this;
            this.tagList.children('.tagit-choice').each(function(index, tag) {
                that.removeTag(tag, false);
            });
        }

    });

})(jQuery);



// moment.js
// version : 2.0.0
// author : Tim Wood
// license : MIT
// momentjs.com
(function(t){function n(t,n){return function(e){return u(t.call(this,e),n)}}function e(t){return function(n){return this.lang().ordinal(t.call(this,n))}}function s(){}function r(t){i(this,t)}function a(t){var n=this._data={},e=t.years||t.year||t.y||0,s=t.months||t.month||t.M||0,r=t.weeks||t.week||t.w||0,a=t.days||t.day||t.d||0,i=t.hours||t.hour||t.h||0,u=t.minutes||t.minute||t.m||0,d=t.seconds||t.second||t.s||0,c=t.milliseconds||t.millisecond||t.ms||0;this._milliseconds=c+1e3*d+6e4*u+36e5*i,this._days=a+7*r,this._months=s+12*e,n.milliseconds=c%1e3,d+=o(c/1e3),n.seconds=d%60,u+=o(d/60),n.minutes=u%60,i+=o(u/60),n.hours=i%24,a+=o(i/24),a+=7*r,n.days=a%30,s+=o(a/30),n.months=s%12,e+=o(s/12),n.years=e}function i(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function o(t){return 0>t?Math.ceil(t):Math.floor(t)}function u(t,n){for(var e=t+"";n>e.length;)e="0"+e;return e}function d(t,n,e){var s,r=n._milliseconds,a=n._days,i=n._months;r&&t._d.setTime(+t+r*e),a&&t.date(t.date()+a*e),i&&(s=t.date(),t.date(1).month(t.month()+i*e).date(Math.min(s,t.daysInMonth())))}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t,n){var e,s=Math.min(t.length,n.length),r=Math.abs(t.length-n.length),a=0;for(e=0;s>e;e++)~~t[e]!==~~n[e]&&a++;return a+r}function f(t,n){return n.abbr=t,x[t]||(x[t]=new s),x[t].set(n),x[t]}function l(t){return t?(!x[t]&&W&&require("./lang/"+t),x[t]):O.fn._lang}function _(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function m(t){var n,e,s=t.match(A);for(n=0,e=s.length;e>n;n++)s[n]=rn[s[n]]?rn[s[n]]:_(s[n]);return function(r){var a="";for(n=0;e>n;n++)a+="function"==typeof s[n].call?s[n].call(r,t):s[n];return a}}function y(t,n){function e(n){return t.lang().longDateFormat(n)||n}for(var s=5;s--&&P.test(n);)n=n.replace(P,e);return nn[n]||(nn[n]=m(n)),nn[n](t)}function M(t){switch(t){case"DDDD":return E;case"YYYY":return N;case"YYYYY":return $;case"S":case"SS":case"SSS":case"DDD":return V;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return I;case"X":return R;case"Z":case"ZZ":return X;case"T":return j;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return J;default:return RegExp(t.replace("\\",""))}}function D(t,n,e){var s,r=e._a;switch(t){case"M":case"MM":r[1]=null==n?0:~~n-1;break;case"MMM":case"MMMM":s=l(e._l).monthsParse(n),null!=s?r[1]=s:e._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=n&&(r[2]=~~n);break;case"YY":r[0]=~~n+(~~n>68?1900:2e3);break;case"YYYY":case"YYYYY":r[0]=~~n;break;case"a":case"A":e._isPm="pm"===(n+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":r[3]=~~n;break;case"m":case"mm":r[4]=~~n;break;case"s":case"ss":r[5]=~~n;break;case"S":case"SS":case"SSS":r[6]=~~(1e3*("0."+n));break;case"X":e._d=new Date(1e3*parseFloat(n));break;case"Z":case"ZZ":e._useUTC=!0,s=(n+"").match(K),s&&s[1]&&(e._tzh=~~s[1]),s&&s[2]&&(e._tzm=~~s[2]),s&&"+"===s[0]&&(e._tzh=-e._tzh,e._tzm=-e._tzm)}null==n&&(e._isValid=!1)}function Y(t){var n,e,s=[];if(!t._d){for(n=0;7>n;n++)t._a[n]=s[n]=null==t._a[n]?2===n?1:0:t._a[n];s[3]+=t._tzh||0,s[4]+=t._tzm||0,e=new Date(0),t._useUTC?(e.setUTCFullYear(s[0],s[1],s[2]),e.setUTCHours(s[3],s[4],s[5],s[6])):(e.setFullYear(s[0],s[1],s[2]),e.setHours(s[3],s[4],s[5],s[6])),t._d=e}}function p(t){var n,e,s=t._f.match(A),r=t._i;for(t._a=[],n=0;s.length>n;n++)e=(M(s[n]).exec(r)||[])[0],e&&(r=r.slice(r.indexOf(e)+e.length)),rn[s[n]]&&D(s[n],e,t);t._isPm&&12>t._a[3]&&(t._a[3]+=12),t._isPm===!1&&12===t._a[3]&&(t._a[3]=0),Y(t)}function g(t){var n,e,s,a,o,u=99;for(a=t._f.length;a>0;a--){if(n=i({},t),n._f=t._f[a-1],p(n),e=new r(n),e.isValid()){s=e;break}o=h(n._a,e.toArray()),u>o&&(u=o,s=e)}i(t,s)}function w(t){var n,e=t._i;if(q.exec(e)){for(t._f="YYYY-MM-DDT",n=0;4>n;n++)if(G[n][1].exec(e)){t._f+=G[n][0];break}X.exec(e)&&(t._f+=" Z"),p(t)}else t._d=new Date(e)}function T(n){var e=n._i,s=Z.exec(e);e===t?n._d=new Date:s?n._d=new Date(+s[1]):"string"==typeof e?w(n):c(e)?(n._a=e.slice(0),Y(n)):n._d=e instanceof Date?new Date(+e):new Date(e)}function v(t,n,e,s,r){return r.relativeTime(n||1,!!e,t,s)}function k(t,n,e){var s=U(Math.abs(t)/1e3),r=U(s/60),a=U(r/60),i=U(a/24),o=U(i/365),u=45>s&&["s",s]||1===r&&["m"]||45>r&&["mm",r]||1===a&&["h"]||22>a&&["hh",a]||1===i&&["d"]||25>=i&&["dd",i]||45>=i&&["M"]||345>i&&["MM",U(i/30)]||1===o&&["y"]||["yy",o];return u[2]=n,u[3]=t>0,u[4]=e,v.apply({},u)}function S(t,n,e){var s=e-n,r=e-t.day();return r>s&&(r-=7),s-7>r&&(r+=7),Math.ceil(O(t).add("d",r).dayOfYear()/7)}function b(t){var n=t._i,e=t._f;return null===n||""===n?null:("string"==typeof n&&(t._i=n=l().preparse(n)),O.isMoment(n)?(t=i({},n),t._d=new Date(+n._d)):e?c(e)?g(t):p(t):T(t),new r(t))}function F(t,n){O.fn[t]=O.fn[t+"s"]=function(t){var e=this._isUTC?"UTC":"";return null!=t?(this._d["set"+e+n](t),this):this._d["get"+e+n]()}}function L(t){O.duration.fn[t]=function(){return this._data[t]}}function H(t,n){O.duration.fn["as"+t]=function(){return+this/n}}for(var O,z,C="2.0.0",U=Math.round,x={},W="undefined"!=typeof module&&module.exports,Z=/^\/?Date\((\-?\d+)/i,A=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,J=/\d\d?/,V=/\d{1,3}/,E=/\d{3}/,N=/\d{1,4}/,$=/[+\-]?\d{1,6}/,I=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,X=/Z|[\+\-]\d\d:?\d\d/i,j=/T/i,R=/[\+\-]?\d+(\.\d{1,3})?/,q=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,B="YYYY-MM-DDTHH:mm:ssZ",G=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],K=/([\+\-]|\d\d)/gi,Q="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),tn={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},nn={},en="DDD w W M D d".split(" "),sn="M D H h m s w W".split(" "),rn={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},YYYYY:function(){return u(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return u(~~(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},Z:function(){var t=-this.zone(),n="+";return 0>t&&(t=-t,n="-"),n+u(~~(t/60),2)+":"+u(~~t%60,2)},ZZ:function(){var t=-this.zone(),n="+";return 0>t&&(t=-t,n="-"),n+u(~~(10*t/6),4)},X:function(){return this.unix()}};en.length;)z=en.pop(),rn[z+"o"]=e(rn[z]);for(;sn.length;)z=sn.pop(),rn[z+z]=n(rn[z],2);for(rn.DDDD=n(rn.DDD,3),s.prototype={set:function(t){var n,e;for(e in t)n=t[e],"function"==typeof n?this[e]=n:this["_"+e]=n},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var n,e,s;for(this._monthsParse||(this._monthsParse=[]),n=0;12>n;n++)if(this._monthsParse[n]||(e=O([2e3,n]),s="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[n]=RegExp(s.replace(".",""),"i")),this._monthsParse[n].test(t))return n},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var n=this._longDateFormat[t];return!n&&this._longDateFormat[t.toUpperCase()]&&(n=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=n),n},meridiem:function(t,n,e){return t>11?e?"pm":"PM":e?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,n){var e=this._calendar[t];return"function"==typeof e?e.apply(n):e},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,n,e,s){var r=this._relativeTime[e];return"function"==typeof r?r(t,n,e,s):r.replace(/%d/i,t)},pastFuture:function(t,n){var e=this._relativeTime[t>0?"future":"past"];return"function"==typeof e?e(n):e.replace(/%s/i,n)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return S(t,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},O=function(t,n,e){return b({_i:t,_f:n,_l:e,_isUTC:!1})},O.utc=function(t,n,e){return b({_useUTC:!0,_isUTC:!0,_l:e,_i:t,_f:n})},O.unix=function(t){return O(1e3*t)},O.duration=function(t,n){var e,s=O.isDuration(t),r="number"==typeof t,i=s?t._data:r?{}:t;return r&&(n?i[n]=t:i.milliseconds=t),e=new a(i),s&&t.hasOwnProperty("_lang")&&(e._lang=t._lang),e},O.version=C,O.defaultFormat=B,O.lang=function(n,e){return n?(e?f(n,e):x[n]||l(n),O.duration.fn._lang=O.fn._lang=l(n),t):O.fn._lang._abbr},O.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),l(t)},O.isMoment=function(t){return t instanceof r},O.isDuration=function(t){return t instanceof a},O.fn=r.prototype={clone:function(){return O(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return O(this).utc().format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!h(this._a,(this._isUTC?O.utc(this._a):O(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){var n=y(this,t||O.defaultFormat);return this.lang().postformat(n)},add:function(t,n){var e;return e="string"==typeof t?O.duration(+n,t):O.duration(t,n),d(this,e,1),this},subtract:function(t,n){var e;return e="string"==typeof t?O.duration(+n,t):O.duration(t,n),d(this,e,-1),this},diff:function(t,n,e){var s,r,a=this._isUTC?O(t).utc():O(t).local(),i=6e4*(this.zone()-a.zone());return n&&(n=n.replace(/s$/,"")),"year"===n||"month"===n?(s=432e5*(this.daysInMonth()+a.daysInMonth()),r=12*(this.year()-a.year())+(this.month()-a.month()),r+=(this-O(this).startOf("month")-(a-O(a).startOf("month")))/s,"year"===n&&(r/=12)):(s=this-a-i,r="second"===n?s/1e3:"minute"===n?s/6e4:"hour"===n?s/36e5:"day"===n?s/864e5:"week"===n?s/6048e5:s),e?r:o(r)},from:function(t,n){return O.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!n)},fromNow:function(t){return this.from(O(),t)},calendar:function(){var t=this.diff(O().startOf("day"),"days",!0),n=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){var t=this.year();return 0===t%4&&0!==t%100||0===t%400},isDST:function(){return this.zone()<O([this.year()]).zone()||this.zone()<O([this.year(),5]).zone()},day:function(t){var n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?n:this.add({d:t-n})},startOf:function(t){switch(t=t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.day(0),this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(n,e){return e=e!==t?e:"millisecond",+this.clone().startOf(e)>+O(n).startOf(e)},isBefore:function(n,e){return e=e!==t?e:"millisecond",+this.clone().startOf(e)<+O(n).startOf(e)},isSame:function(n,e){return e=e!==t?e:"millisecond",+this.clone().startOf(e)===+O(n).startOf(e)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return O.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(t){var n=U((O(this).startOf("day")-O(this).startOf("year"))/864e5)+1;return null==t?n:this.add("d",t-n)},isoWeek:function(t){var n=S(this,1,4);return null==t?n:this.add("d",7*(t-n))},week:function(t){var n=this.lang().week(this);return null==t?n:this.add("d",7*(t-n))},lang:function(n){return n===t?this._lang:(this._lang=l(n),this)}},z=0;Q.length>z;z++)F(Q[z].toLowerCase().replace(/s$/,""),Q[z]);F("year","FullYear"),O.fn.days=O.fn.day,O.fn.weeks=O.fn.week,O.fn.isoWeeks=O.fn.isoWeek,O.duration.fn=a.prototype={weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var n=+this,e=k(n,!t,this.lang());return t&&(e=this.lang().pastFuture(n,e)),this.lang().postformat(e)},lang:O.fn.lang};for(z in tn)tn.hasOwnProperty(z)&&(H(z,tn[z]),L(z.toLowerCase()));H("Weeks",6048e5),O.lang("en",{ordinal:function(t){var n=t%10,e=1===~~(t%100/10)?"th":1===n?"st":2===n?"nd":3===n?"rd":"th";return t+e}}),W&&(module.exports=O),"undefined"==typeof ender&&(this.moment=O),"function"==typeof define&&define.amd&&define("moment",[],function(){return O})}).call(this);
/*!
 * jQuery Cookie Plugin
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function($) {
    $.cookie = function(key, value, options) {

        // key and at least value given, set cookie...
        if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null || value === undefined)) {
            options = $.extend({}, options);

            if (value === null || value === undefined) {
                options.expires = -1;
            }

            if (typeof options.expires === 'number') {
                var days = options.expires, t = options.expires = new Date();
                t.setDate(t.getDate() + days);
            }

            value = String(value);

            return (document.cookie = [
                encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),
                options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
                options.path    ? '; path=' + options.path : '',
                options.domain  ? '; domain=' + options.domain : '',
                options.secure  ? '; secure' : ''
            ].join(''));
        }

        // key and possibly options given, get cookie...
        options = value || {};
        var decode = options.raw ? function(s) { return s; } : decodeURIComponent;

        var pairs = document.cookie.split('; ');
        for (var i = 0, pair; pair = pairs[i] && pairs[i].split('='); i++) {
            if (decode(pair[0]) === key) return decode(pair[1] || ''); // IE saves cookies with empty string as "c; ", e.g. without "=" as opposed to EOMB, thus pair[1] may be undefined
        }
        return null;
    };
})(jQuery);

/**
*
*  Base64 encode / decode
*  http://www.webtoolkit.info/
*
**/
 
var Base64 = {
 
	// private property
	_keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
 
	// public method for encoding
	encode : function (input) {
		var output = "";
		var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
		var i = 0;
 
		input = Base64._utf8_encode(input);
 
		while (i < input.length) {
 
			chr1 = input.charCodeAt(i++);
			chr2 = input.charCodeAt(i++);
			chr3 = input.charCodeAt(i++);
 
			enc1 = chr1 >> 2;
			enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
			enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
			enc4 = chr3 & 63;
 
			if (isNaN(chr2)) {
				enc3 = enc4 = 64;
			} else if (isNaN(chr3)) {
				enc4 = 64;
			}
 
			output = output +
			this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
			this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);
 
		}
 
		return output;
	},
 
	// public method for decoding
	decode : function (input) {
		var output = "";
		var chr1, chr2, chr3;
		var enc1, enc2, enc3, enc4;
		var i = 0;
 
		input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
 
		while (i < input.length) {
 
			enc1 = this._keyStr.indexOf(input.charAt(i++));
			enc2 = this._keyStr.indexOf(input.charAt(i++));
			enc3 = this._keyStr.indexOf(input.charAt(i++));
			enc4 = this._keyStr.indexOf(input.charAt(i++));
 
			chr1 = (enc1 << 2) | (enc2 >> 4);
			chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
			chr3 = ((enc3 & 3) << 6) | enc4;
 
			output = output + String.fromCharCode(chr1);
 
			if (enc3 != 64) {
				output = output + String.fromCharCode(chr2);
			}
			if (enc4 != 64) {
				output = output + String.fromCharCode(chr3);
			}
 
		}
 
		output = Base64._utf8_decode(output);
 
		return output;
 
	},
 
	// private method for UTF-8 encoding
	_utf8_encode : function (string) {
		string = string.replace(/\r\n/g,"\n");
		var utftext = "";
 
		for (var n = 0; n < string.length; n++) {
 
			var c = string.charCodeAt(n);
 
			if (c < 128) {
				utftext += String.fromCharCode(c);
			}
			else if((c > 127) && (c < 2048)) {
				utftext += String.fromCharCode((c >> 6) | 192);
				utftext += String.fromCharCode((c & 63) | 128);
			}
			else {
				utftext += String.fromCharCode((c >> 12) | 224);
				utftext += String.fromCharCode(((c >> 6) & 63) | 128);
				utftext += String.fromCharCode((c & 63) | 128);
			}
 
		}
 
		return utftext;
	},
 
	// private method for UTF-8 decoding
	_utf8_decode : function (utftext) {
		var string = "";
		var i = 0;
		var c = c1 = c2 = 0;
 
		while ( i < utftext.length ) {
 
			c = utftext.charCodeAt(i);
 
			if (c < 128) {
				string += String.fromCharCode(c);
				i++;
			}
			else if((c > 191) && (c < 224)) {
				c2 = utftext.charCodeAt(i+1);
				string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
				i += 2;
			}
			else {
				c2 = utftext.charCodeAt(i+1);
				c3 = utftext.charCodeAt(i+2);
				string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
				i += 3;
			}
 
		}
 
		return string;
	}
 
}
/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS PUB 180-1
 * Version 2.1a Copyright Paul Johnston 2000 - 2002.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */

/*
 * Configurable variables. You may need to tweak these to be compatible with
 * the server-side, but the defaults work in most cases.
 */
var hexcase = 0;  /* hex output format. 0 - lowercase; 1 - uppercase        */
var b64pad  = "="; /* base-64 pad character. "=" for strict RFC compliance   */
var chrsz   = 8;  /* bits per input character. 8 - ASCII; 16 - Unicode      */

/*
 * These are the functions you'll usually want to call
 * They take string arguments and return either hex or base-64 encoded strings
 */
function hex_sha1(s){return binb2hex(core_sha1(str2binb(s),s.length * chrsz));}
function b64_sha1(s){return binb2b64(core_sha1(str2binb(s),s.length * chrsz));}
function str_sha1(s){return binb2str(core_sha1(str2binb(s),s.length * chrsz));}
function hex_hmac_sha1(key, data){ return binb2hex(core_hmac_sha1(key, data));}
function b64_hmac_sha1(key, data){ return binb2b64(core_hmac_sha1(key, data));}
function str_hmac_sha1(key, data){ return binb2str(core_hmac_sha1(key, data));}

/*
 * Perform a simple self-test to see if the VM is working
 */
function sha1_vm_test()
{
  return hex_sha1("abc") == "a9993e364706816aba3e25717850c26c9cd0d89d";
}

/*
 * Calculate the SHA-1 of an array of big-endian words, and a bit length
 */
function core_sha1(x, len)
{
  /* append padding */
  x[len >> 5] |= 0x80 << (24 - len % 32);
  x[((len + 64 >> 9) << 4) + 15] = len;

  var w = Array(80);
  var a =  1732584193;
  var b = -271733879;
  var c = -1732584194;
  var d =  271733878;
  var e = -1009589776;

  for(var i = 0; i < x.length; i += 16)
  {
    var olda = a;
    var oldb = b;
    var oldc = c;
    var oldd = d;
    var olde = e;

    for(var j = 0; j < 80; j++)
    {
      if(j < 16) w[j] = x[i + j];
      else w[j] = rol(w[j-3] ^ w[j-8] ^ w[j-14] ^ w[j-16], 1);
      var t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)),
                       safe_add(safe_add(e, w[j]), sha1_kt(j)));
      e = d;
      d = c;
      c = rol(b, 30);
      b = a;
      a = t;
    }

    a = safe_add(a, olda);
    b = safe_add(b, oldb);
    c = safe_add(c, oldc);
    d = safe_add(d, oldd);
    e = safe_add(e, olde);
  }
  return Array(a, b, c, d, e);

}

/*
 * Perform the appropriate triplet combination function for the current
 * iteration
 */
function sha1_ft(t, b, c, d)
{
  if(t < 20) return (b & c) | ((~b) & d);
  if(t < 40) return b ^ c ^ d;
  if(t < 60) return (b & c) | (b & d) | (c & d);
  return b ^ c ^ d;
}

/*
 * Determine the appropriate additive constant for the current iteration
 */
function sha1_kt(t)
{
  return (t < 20) ?  1518500249 : (t < 40) ?  1859775393 :
         (t < 60) ? -1894007588 : -899497514;
}

/*
 * Calculate the HMAC-SHA1 of a key and some data
 */
function core_hmac_sha1(key, data)
{
  var bkey = str2binb(key);
  if(bkey.length > 16) bkey = core_sha1(bkey, key.length * chrsz);

  var ipad = Array(16), opad = Array(16);
  for(var i = 0; i < 16; i++)
  {
    ipad[i] = bkey[i] ^ 0x36363636;
    opad[i] = bkey[i] ^ 0x5C5C5C5C;
  }

  var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * chrsz);
  return core_sha1(opad.concat(hash), 512 + 160);
}

/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */
function safe_add(x, y)
{
  var lsw = (x & 0xFFFF) + (y & 0xFFFF);
  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return (msw << 16) | (lsw & 0xFFFF);
}

/*
 * Bitwise rotate a 32-bit number to the left.
 */
function rol(num, cnt)
{
  return (num << cnt) | (num >>> (32 - cnt));
}

/*
 * Convert an 8-bit or 16-bit string to an array of big-endian words
 * In 8-bit function, characters >255 have their hi-byte silently ignored.
 */
function str2binb(str)
{
  var bin = Array();
  var mask = (1 << chrsz) - 1;
  for(var i = 0; i < str.length * chrsz; i += chrsz)
    bin[i>>5] |= (str.charCodeAt(i / chrsz) & mask) << (32 - chrsz - i%32);
  return bin;
}

/*
 * Convert an array of big-endian words to a string
 */
function binb2str(bin)
{
  var str = "";
  var mask = (1 << chrsz) - 1;
  for(var i = 0; i < bin.length * 32; i += chrsz)
    str += String.fromCharCode((bin[i>>5] >>> (32 - chrsz - i%32)) & mask);
  return str;
}

/*
 * Convert an array of big-endian words to a hex string.
 */
function binb2hex(binarray)
{
  var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
  var str = "";
  for(var i = 0; i < binarray.length * 4; i++)
  {
    str += hex_tab.charAt((binarray[i>>2] >> ((3 - i%4)*8+4)) & 0xF) +
           hex_tab.charAt((binarray[i>>2] >> ((3 - i%4)*8  )) & 0xF);
  }
  return str;
}

/*
 * Convert an array of big-endian words to a base-64 string
 */
function binb2b64(binarray)
{
  var tab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  var str = "";
  for(var i = 0; i < binarray.length * 4; i += 3)
  {
    var triplet = (((binarray[i   >> 2] >> 8 * (3 -  i   %4)) & 0xFF) << 16)
                | (((binarray[i+1 >> 2] >> 8 * (3 - (i+1)%4)) & 0xFF) << 8 )
                |  ((binarray[i+2 >> 2] >> 8 * (3 - (i+2)%4)) & 0xFF);
    for(var j = 0; j < 4; j++)
    {
      if(i * 8 + j * 6 > binarray.length * 32) str += b64pad;
      else str += tab.charAt((triplet >> 6*(3-j)) & 0x3F);
    }
  }
  return str;
}

/**
 * CoffeeScript Compiler v1.9.2
 * http://coffeescript.org
 *
 * Copyright 2011, Jeremy Ashkenas
 * Released under the MIT License
 */
(function(root){var CoffeeScript=function(){function require(e){return require[e]}return require["./helpers"]=function(){var e={},t={exports:e};return function(){var t,n,i,r,s,o;e.starts=function(e,t,n){return t===e.substr(n,t.length)},e.ends=function(e,t,n){var i;return i=t.length,t===e.substr(e.length-i-(n||0),i)},e.repeat=s=function(e,t){var n;for(n="";t>0;)1&t&&(n+=e),t>>>=1,e+=e;return n},e.compact=function(e){var t,n,i,r;for(r=[],t=0,i=e.length;i>t;t++)n=e[t],n&&r.push(n);return r},e.count=function(e,t){var n,i;if(n=i=0,!t.length)return 1/0;for(;i=1+e.indexOf(t,i);)n++;return n},e.merge=function(e,t){return n(n({},e),t)},n=e.extend=function(e,t){var n,i;for(n in t)i=t[n],e[n]=i;return e},e.flatten=i=function(e){var t,n,r,s;for(n=[],r=0,s=e.length;s>r;r++)t=e[r],t instanceof Array?n=n.concat(i(t)):n.push(t);return n},e.del=function(e,t){var n;return n=e[t],delete e[t],n},e.some=null!=(r=Array.prototype.some)?r:function(e){var t,n,i;for(n=0,i=this.length;i>n;n++)if(t=this[n],e(t))return!0;return!1},e.invertLiterate=function(e){var t,n,i;return i=!0,n=function(){var n,r,s,o;for(s=e.split("\n"),o=[],n=0,r=s.length;r>n;n++)t=s[n],i&&/^([ ]{4}|[ ]{0,3}\t)/.test(t)?o.push(t):(i=/^\s*$/.test(t))?o.push(t):o.push("# "+t);return o}(),n.join("\n")},t=function(e,t){return t?{first_line:e.first_line,first_column:e.first_column,last_line:t.last_line,last_column:t.last_column}:e},e.addLocationDataFn=function(e,n){return function(i){return"object"==typeof i&&i.updateLocationDataIfMissing&&i.updateLocationDataIfMissing(t(e,n)),i}},e.locationDataToString=function(e){var t;return"2"in e&&"first_line"in e[2]?t=e[2]:"first_line"in e&&(t=e),t?t.first_line+1+":"+(t.first_column+1)+"-"+(t.last_line+1+":"+(t.last_column+1)):"No location data"},e.baseFileName=function(e,t,n){var i,r;return null==t&&(t=!1),null==n&&(n=!1),r=n?/\\|\//:/\//,i=e.split(r),e=i[i.length-1],t&&e.indexOf(".")>=0?(i=e.split("."),i.pop(),"coffee"===i[i.length-1]&&i.length>1&&i.pop(),i.join(".")):e},e.isCoffee=function(e){return/\.((lit)?coffee|coffee\.md)$/.test(e)},e.isLiterate=function(e){return/\.(litcoffee|coffee\.md)$/.test(e)},e.throwSyntaxError=function(e,t){var n;throw n=new SyntaxError(e),n.location=t,n.toString=o,n.stack=""+n,n},e.updateSyntaxError=function(e,t,n){return e.toString===o&&(e.code||(e.code=t),e.filename||(e.filename=n),e.stack=""+e),e},o=function(){var e,t,n,i,r,o,a,c,l,h,u,p,d,f,m;return this.code&&this.location?(u=this.location,a=u.first_line,o=u.first_column,l=u.last_line,c=u.last_column,null==l&&(l=a),null==c&&(c=o),r=this.filename||"[stdin]",e=this.code.split("\n")[a],m=o,i=a===l?c+1:e.length,h=e.slice(0,m).replace(/[^\s]/g," ")+s("^",i-m),"undefined"!=typeof process&&null!==process&&(n=(null!=(p=process.stdout)?p.isTTY:void 0)&&!(null!=(d=process.env)?d.NODE_DISABLE_COLORS:void 0)),(null!=(f=this.colorful)?f:n)&&(t=function(e){return"[1;31m"+e+"[0m"},e=e.slice(0,m)+t(e.slice(m,i))+e.slice(i),h=t(h)),r+":"+(a+1)+":"+(o+1)+": error: "+this.message+"\n"+e+"\n"+h):Error.prototype.toString.call(this)},e.nameWhitespaceCharacter=function(e){switch(e){case" ":return"space";case"\n":return"newline";case"\r":return"carriage return";case"	":return"tab";default:return e}}}.call(this),t.exports}(),require["./rewriter"]=function(){var e={},t={exports:e};return function(){var t,n,i,r,s,o,a,c,l,h,u,p,d,f,m,g,v,y,b,k=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},w=[].slice;for(f=function(e,t,n){var i;return i=[e,t],i.generated=!0,n&&(i.origin=n),i},e.Rewriter=function(){function e(){}return e.prototype.rewrite=function(e){return this.tokens=e,this.removeLeadingNewlines(),this.closeOpenCalls(),this.closeOpenIndexes(),this.normalizeLines(),this.tagPostfixConditionals(),this.addImplicitBracesAndParens(),this.addLocationDataToGeneratedTokens(),this.tokens},e.prototype.scanTokens=function(e){var t,n,i;for(i=this.tokens,t=0;n=i[t];)t+=e.call(this,n,t,i);return!0},e.prototype.detectEnd=function(e,t,n){var i,o,a,c,l;for(l=this.tokens,i=0;c=l[e];){if(0===i&&t.call(this,c,e))return n.call(this,c,e);if(!c||0>i)return n.call(this,c,e-1);o=c[0],k.call(s,o)>=0?i+=1:(a=c[0],k.call(r,a)>=0&&(i-=1)),e+=1}return e-1},e.prototype.removeLeadingNewlines=function(){var e,t,n,i,r;for(i=this.tokens,e=t=0,n=i.length;n>t&&(r=i[e][0],"TERMINATOR"===r);e=++t);return e?this.tokens.splice(0,e):void 0},e.prototype.closeOpenCalls=function(){var e,t;return t=function(e,t){var n;return")"===(n=e[0])||"CALL_END"===n||"OUTDENT"===e[0]&&")"===this.tag(t-1)},e=function(e,t){return this.tokens["OUTDENT"===e[0]?t-1:t][0]="CALL_END"},this.scanTokens(function(n,i){return"CALL_START"===n[0]&&this.detectEnd(i+1,t,e),1})},e.prototype.closeOpenIndexes=function(){var e,t;return t=function(e){var t;return"]"===(t=e[0])||"INDEX_END"===t},e=function(e){return e[0]="INDEX_END"},this.scanTokens(function(n,i){return"INDEX_START"===n[0]&&this.detectEnd(i+1,t,e),1})},e.prototype.indexOfTag=function(){var e,t,n,i,r,s,o;for(t=arguments[0],r=arguments.length>=2?w.call(arguments,1):[],e=0,n=i=0,s=r.length;s>=0?s>i:i>s;n=s>=0?++i:--i){for(;"HERECOMMENT"===this.tag(t+n+e);)e+=2;if(null!=r[n]&&("string"==typeof r[n]&&(r[n]=[r[n]]),o=this.tag(t+n+e),0>k.call(r[n],o)))return-1}return t+n+e-1},e.prototype.looksObjectish=function(e){var t,n;return this.indexOfTag(e,"@",null,":")>-1||this.indexOfTag(e,null,":")>-1?!0:(n=this.indexOfTag(e,s),n>-1&&(t=null,this.detectEnd(n+1,function(e){var t;return t=e[0],k.call(r,t)>=0},function(e,n){return t=n}),":"===this.tag(t+1))?!0:!1)},e.prototype.findTagsBackwards=function(e,t){var n,i,o,a,c,l,h;for(n=[];e>=0&&(n.length||(a=this.tag(e),0>k.call(t,a)&&(c=this.tag(e),0>k.call(s,c)||this.tokens[e].generated)&&(l=this.tag(e),0>k.call(u,l))));)i=this.tag(e),k.call(r,i)>=0&&n.push(this.tag(e)),o=this.tag(e),k.call(s,o)>=0&&n.length&&n.pop(),e-=1;return h=this.tag(e),k.call(t,h)>=0},e.prototype.addImplicitBracesAndParens=function(){var e,t;return e=[],t=null,this.scanTokens(function(i,h,p){var d,m,g,v,y,b,w,T,C,E,F,N,L,x,S,D,R,A,I,_,O,$,j,M,B,V,P,U;if(U=i[0],F=(N=h>0?p[h-1]:[])[0],C=(p.length-1>h?p[h+1]:[])[0],j=function(){return e[e.length-1]},M=h,g=function(e){return h-M+e},v=function(){var e,t;return null!=(e=j())?null!=(t=e[2])?t.ours:void 0:void 0},y=function(){var e;return v()&&"("===(null!=(e=j())?e[0]:void 0)},w=function(){var e;return v()&&"{"===(null!=(e=j())?e[0]:void 0)},b=function(){var e;return v&&"CONTROL"===(null!=(e=j())?e[0]:void 0)},B=function(t){var n;return n=null!=t?t:h,e.push(["(",n,{ours:!0}]),p.splice(n,0,f("CALL_START","(")),null==t?h+=1:void 0},d=function(){return e.pop(),p.splice(h,0,f("CALL_END",")",["","end of input",i[2]])),h+=1},V=function(t,n){var r,s;return null==n&&(n=!0),r=null!=t?t:h,e.push(["{",r,{sameLine:!0,startsLine:n,ours:!0}]),s=new String("{"),s.generated=!0,p.splice(r,0,f("{",s,i)),null==t?h+=1:void 0},m=function(t){return t=null!=t?t:h,e.pop(),p.splice(t,0,f("}","}",i)),h+=1},y()&&("IF"===U||"TRY"===U||"FINALLY"===U||"CATCH"===U||"CLASS"===U||"SWITCH"===U))return e.push(["CONTROL",h,{ours:!0}]),g(1);if("INDENT"===U&&v()){if("=>"!==F&&"->"!==F&&"["!==F&&"("!==F&&","!==F&&"{"!==F&&"TRY"!==F&&"ELSE"!==F&&"="!==F)for(;y();)d();return b()&&e.pop(),e.push([U,h]),g(1)}if(k.call(s,U)>=0)return e.push([U,h]),g(1);if(k.call(r,U)>=0){for(;v();)y()?d():w()?m():e.pop();t=e.pop()}if((k.call(c,U)>=0&&i.spaced||"?"===U&&h>0&&!p[h-1].spaced)&&(k.call(o,C)>=0||k.call(l,C)>=0&&!(null!=(L=p[h+1])?L.spaced:void 0)&&!(null!=(x=p[h+1])?x.newLine:void 0)))return"?"===U&&(U=i[0]="FUNC_EXIST"),B(h+1),g(2);if(k.call(c,U)>=0&&this.indexOfTag(h+1,"INDENT",null,":")>-1&&!this.findTagsBackwards(h,["CLASS","EXTENDS","IF","CATCH","SWITCH","LEADING_WHEN","FOR","WHILE","UNTIL"]))return B(h+1),e.push(["INDENT",h+2]),g(3);if(":"===U){for(I=function(){var e;switch(!1){case e=this.tag(h-1),0>k.call(r,e):return t[1];case"@"!==this.tag(h-2):return h-2;default:return h-1}}.call(this);"HERECOMMENT"===this.tag(I-2);)I-=2;return this.insideForDeclaration="FOR"===C,P=0===I||(S=this.tag(I-1),k.call(u,S)>=0)||p[I-1].newLine,j()&&(D=j(),$=D[0],O=D[1],("{"===$||"INDENT"===$&&"{"===this.tag(O-1))&&(P||","===this.tag(I-1)||"{"===this.tag(I-1)))?g(1):(V(I,!!P),g(2))}if(w()&&k.call(u,U)>=0&&(j()[2].sameLine=!1),T="OUTDENT"===F||N.newLine,k.call(a,U)>=0||k.call(n,U)>=0&&T)for(;v();)if(R=j(),$=R[0],O=R[1],A=R[2],_=A.sameLine,P=A.startsLine,y()&&","!==F)d();else if(w()&&!this.insideForDeclaration&&_&&"TERMINATOR"!==U&&":"!==F)m();else{if(!w()||"TERMINATOR"!==U||","===F||P&&this.looksObjectish(h+1))break;if("HERECOMMENT"===C)return g(1);m()}if(!(","!==U||this.looksObjectish(h+1)||!w()||this.insideForDeclaration||"TERMINATOR"===C&&this.looksObjectish(h+2)))for(E="OUTDENT"===C?1:0;w();)m(h+E);return g(1)})},e.prototype.addLocationDataToGeneratedTokens=function(){return this.scanTokens(function(e,t,n){var i,r,s,o,a,c;return e[2]?1:e.generated||e.explicit?("{"===e[0]&&(s=null!=(a=n[t+1])?a[2]:void 0)?(r=s.first_line,i=s.first_column):(o=null!=(c=n[t-1])?c[2]:void 0)?(r=o.last_line,i=o.last_column):r=i=0,e[2]={first_line:r,first_column:i,last_line:r,last_column:i},1):1})},e.prototype.normalizeLines=function(){var e,t,r,s,o;return o=r=s=null,t=function(e,t){var r,s,a,c;return";"!==e[1]&&(r=e[0],k.call(p,r)>=0)&&!("TERMINATOR"===e[0]&&(s=this.tag(t+1),k.call(i,s)>=0))&&!("ELSE"===e[0]&&"THEN"!==o)&&!!("CATCH"!==(a=e[0])&&"FINALLY"!==a||"->"!==o&&"=>"!==o)||(c=e[0],k.call(n,c)>=0&&this.tokens[t-1].newLine)},e=function(e,t){return this.tokens.splice(","===this.tag(t-1)?t-1:t,0,s)},this.scanTokens(function(n,a,c){var l,h,u,p,f,m;if(m=n[0],"TERMINATOR"===m){if("ELSE"===this.tag(a+1)&&"OUTDENT"!==this.tag(a-1))return c.splice.apply(c,[a,1].concat(w.call(this.indentation()))),1;if(u=this.tag(a+1),k.call(i,u)>=0)return c.splice(a,1),0}if("CATCH"===m)for(l=h=1;2>=h;l=++h)if("OUTDENT"===(p=this.tag(a+l))||"TERMINATOR"===p||"FINALLY"===p)return c.splice.apply(c,[a+l,0].concat(w.call(this.indentation()))),2+l;return k.call(d,m)>=0&&"INDENT"!==this.tag(a+1)&&("ELSE"!==m||"IF"!==this.tag(a+1))?(o=m,f=this.indentation(c[a]),r=f[0],s=f[1],"THEN"===o&&(r.fromThen=!0),c.splice(a+1,0,r),this.detectEnd(a+2,t,e),"THEN"===m&&c.splice(a,1),1):1})},e.prototype.tagPostfixConditionals=function(){var e,t,n;return n=null,t=function(e,t){var n,i;return i=e[0],n=this.tokens[t-1][0],"TERMINATOR"===i||"INDENT"===i&&0>k.call(d,n)},e=function(e){return"INDENT"!==e[0]||e.generated&&!e.fromThen?n[0]="POST_"+n[0]:void 0},this.scanTokens(function(i,r){return"IF"!==i[0]?1:(n=i,this.detectEnd(r+1,t,e),1)})},e.prototype.indentation=function(e){var t,n;return t=["INDENT",2],n=["OUTDENT",2],e?(t.generated=n.generated=!0,t.origin=n.origin=e):t.explicit=n.explicit=!0,[t,n]},e.prototype.generate=f,e.prototype.tag=function(e){var t;return null!=(t=this.tokens[e])?t[0]:void 0},e}(),t=[["(",")"],["[","]"],["{","}"],["INDENT","OUTDENT"],["CALL_START","CALL_END"],["PARAM_START","PARAM_END"],["INDEX_START","INDEX_END"],["STRING_START","STRING_END"],["REGEX_START","REGEX_END"]],e.INVERSES=h={},s=[],r=[],m=0,v=t.length;v>m;m++)y=t[m],g=y[0],b=y[1],s.push(h[b]=g),r.push(h[g]=b);i=["CATCH","THEN","ELSE","FINALLY"].concat(r),c=["IDENTIFIER","SUPER",")","CALL_END","]","INDEX_END","@","THIS"],o=["IDENTIFIER","NUMBER","STRING","STRING_START","JS","REGEX","REGEX_START","NEW","PARAM_START","CLASS","IF","TRY","SWITCH","THIS","BOOL","NULL","UNDEFINED","UNARY","YIELD","UNARY_MATH","SUPER","THROW","@","->","=>","[","(","{","--","++"],l=["+","-"],a=["POST_IF","FOR","WHILE","UNTIL","WHEN","BY","LOOP","TERMINATOR"],d=["ELSE","->","=>","TRY","FINALLY","THEN"],p=["TERMINATOR","CATCH","FINALLY","ELSE","OUTDENT","LEADING_WHEN"],u=["TERMINATOR","INDENT","OUTDENT"],n=[".","?.","::","?::"]}.call(this),t.exports}(),require["./lexer"]=function(){var e={},t={exports:e};return function(){var t,n,i,r,s,o,a,c,l,h,u,p,d,f,m,g,v,y,b,k,w,T,C,E,F,N,L,x,S,D,R,A,I,_,O,$,j,M,B,V,P,U,G,H,q,X,W,Y,K,z,J,Q,Z,et,tt,nt,it,rt,st,ot,at,ct,lt,ht,ut=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};ot=require("./rewriter"),P=ot.Rewriter,w=ot.INVERSES,at=require("./helpers"),nt=at.count,lt=at.starts,tt=at.compact,ct=at.repeat,it=at.invertLiterate,st=at.locationDataToString,ht=at.throwSyntaxError,e.Lexer=S=function(){function e(){}return e.prototype.tokenize=function(e,t){var n,i,r,s;for(null==t&&(t={}),this.literate=t.literate,this.indent=0,this.baseIndent=0,this.indebt=0,this.outdebt=0,this.indents=[],this.ends=[],this.tokens=[],this.chunkLine=t.line||0,this.chunkColumn=t.column||0,e=this.clean(e),r=0;this.chunk=e.slice(r);)if(n=this.identifierToken()||this.commentToken()||this.whitespaceToken()||this.lineToken()||this.stringToken()||this.numberToken()||this.regexToken()||this.jsToken()||this.literalToken(),s=this.getLineAndColumnFromChunk(n),this.chunkLine=s[0],this.chunkColumn=s[1],r+=n,t.untilBalanced&&0===this.ends.length)return{tokens:this.tokens,index:r};return this.closeIndentation(),(i=this.ends.pop())&&this.error("missing "+i.tag,i.origin[2]),t.rewrite===!1?this.tokens:(new P).rewrite(this.tokens)},e.prototype.clean=function(e){return e.charCodeAt(0)===t&&(e=e.slice(1)),e=e.replace(/\r/g,"").replace(z,""),et.test(e)&&(e="\n"+e,this.chunkLine--),this.literate&&(e=it(e)),e},e.prototype.identifierToken=function(){var e,t,n,i,r,c,l,h,u,p,d,f,m,g,y;return(l=v.exec(this.chunk))?(c=l[0],i=l[1],e=l[2],r=i.length,h=void 0,"own"===i&&"FOR"===this.tag()?(this.token("OWN",i),i.length):"from"===i&&"YIELD"===this.tag()?(this.token("FROM",i),i.length):(p=this.tokens,u=p[p.length-1],n=e||null!=u&&("."===(d=u[0])||"?."===d||"::"===d||"?::"===d||!u.spaced&&"@"===u[0]),g="IDENTIFIER",!n&&(ut.call(E,i)>=0||ut.call(a,i)>=0)&&(g=i.toUpperCase(),"WHEN"===g&&(f=this.tag(),ut.call(N,f)>=0)?g="LEADING_WHEN":"FOR"===g?this.seenFor=!0:"UNLESS"===g?g="IF":ut.call(J,g)>=0?g="UNARY":ut.call(B,g)>=0&&("INSTANCEOF"!==g&&this.seenFor?(g="FOR"+g,this.seenFor=!1):(g="RELATION","!"===this.value()&&(h=this.tokens.pop(),i="!"+i)))),ut.call(C,i)>=0&&(n?(g="IDENTIFIER",i=new String(i),i.reserved=!0):ut.call(V,i)>=0&&this.error("reserved word '"+i+"'",{length:i.length})),n||(ut.call(s,i)>=0&&(i=o[i]),g=function(){switch(i){case"!":return"UNARY";case"==":case"!=":return"COMPARE";case"&&":case"||":return"LOGIC";case"true":case"false":return"BOOL";case"break":case"continue":return"STATEMENT";default:return g}}()),y=this.token(g,i,0,r),y.variable=!n,h&&(m=[h[2].first_line,h[2].first_column],y[2].first_line=m[0],y[2].first_column=m[1]),e&&(t=c.lastIndexOf(":"),this.token(":",":",t,e.length)),c.length)):0},e.prototype.numberToken=function(){var e,t,n,i,r;return(n=I.exec(this.chunk))?(i=n[0],t=i.length,/^0[BOX]/.test(i)?this.error("radix prefix in '"+i+"' must be lowercase",{offset:1}):/E/.test(i)&&!/^0x/.test(i)?this.error("exponential notation in '"+i+"' must be indicated with a lowercase 'e'",{offset:i.indexOf("E")}):/^0\d*[89]/.test(i)?this.error("decimal literal '"+i+"' must not be prefixed with '0'",{length:t}):/^0\d+/.test(i)&&this.error("octal literal '"+i+"' must be prefixed with '0o'",{length:t}),(r=/^0o([0-7]+)/.exec(i))&&(i="0x"+parseInt(r[1],8).toString(16)),(e=/^0b([01]+)/.exec(i))&&(i="0x"+parseInt(e[1],2).toString(16)),this.token("NUMBER",i,0,t),t):0},e.prototype.stringToken=function(){var e,t,n,i,r,s,o,a,c,l,h,u,m,g,v,y;if(h=(Y.exec(this.chunk)||[])[0],!h)return 0;if(g=function(){switch(h){case"'":return W;case'"':return q;case"'''":return f;case'"""':return p}}(),s=3===h.length,u=this.matchWithInterpolations(g,h),y=u.tokens,r=u.index,e=y.length-1,n=h.charAt(0),s){for(a=null,i=function(){var e,t,n;for(n=[],o=e=0,t=y.length;t>e;o=++e)v=y[o],"NEOSTRING"===v[0]&&n.push(v[1]);return n}().join("#{}");l=d.exec(i);)t=l[1],(null===a||(m=t.length)>0&&a.length>m)&&(a=t);a&&(c=RegExp("^"+a,"gm")),this.mergeInterpolationTokens(y,{delimiter:n},function(t){return function(n,i){return n=t.formatString(n),0===i&&(n=n.replace(F,"")),i===e&&(n=n.replace(K,"")),c&&(n=n.replace(c,"")),n}}(this))}else this.mergeInterpolationTokens(y,{delimiter:n},function(t){return function(n,i){return n=t.formatString(n),n=n.replace(G,function(t,r){return 0===i&&0===r||i===e&&r+t.length===n.length?"":" "})}}(this));return r},e.prototype.commentToken=function(){var e,t,n;return(n=this.chunk.match(c))?(e=n[0],t=n[1],t&&((n=u.exec(e))&&this.error("block comments cannot contain "+n[0],{offset:n.index,length:n[0].length}),t.indexOf("\n")>=0&&(t=t.replace(RegExp("\\n"+ct(" ",this.indent),"g"),"\n")),this.token("HERECOMMENT",t,0,e.length)),e.length):0},e.prototype.jsToken=function(){var e,t;return"`"===this.chunk.charAt(0)&&(e=T.exec(this.chunk))?(this.token("JS",(t=e[0]).slice(1,-1),0,t.length),t.length):0},e.prototype.regexToken=function(){var e,t,n,r,s,o,a,c,l,h,u,p,d;switch(!1){case!(o=M.exec(this.chunk)):this.error("regular expressions cannot begin with "+o[2],{offset:o.index+o[1].length});break;case!(o=this.matchWithInterpolations(m,"///")):d=o.tokens,s=o.index;break;case!(o=$.exec(this.chunk)):if(p=o[0],e=o[1],t=o[2],this.validateEscapes(e,{isRegex:!0,offsetInChunk:1}),s=p.length,l=this.tokens,c=l[l.length-1],c)if(c.spaced&&(h=c[0],ut.call(i,h)>=0)){if(!t||O.test(p))return 0}else if(u=c[0],ut.call(A,u)>=0)return 0;t||this.error("missing / (unclosed regex)");break;default:return 0}switch(r=j.exec(this.chunk.slice(s))[0],n=s+r.length,a=this.makeToken("REGEX",null,0,n),!1){case!!Z.test(r):this.error("invalid regular expression flags "+r,{offset:s,length:r.length});break;case!(p||1===d.length):null==e&&(e=this.formatHeregex(d[0][1])),this.token("REGEX",""+this.makeDelimitedLiteral(e,{delimiter:"/"})+r,0,n,a);break;default:this.token("REGEX_START","(",0,0,a),this.token("IDENTIFIER","RegExp",0,0),this.token("CALL_START","(",0,0),this.mergeInterpolationTokens(d,{delimiter:'"',"double":!0},this.formatHeregex),r&&(this.token(",",",",s,0),this.token("STRING",'"'+r+'"',s,r.length)),this.token(")",")",n,0),this.token("REGEX_END",")",n,0)}return n},e.prototype.lineToken=function(){var e,t,n,i,r;if(!(n=R.exec(this.chunk)))return 0;if(t=n[0],this.seenFor=!1,r=t.length-1-t.lastIndexOf("\n"),i=this.unfinished(),r-this.indebt===this.indent)return i?this.suppressNewlines():this.newlineToken(0),t.length;if(r>this.indent){if(i)return this.indebt=r-this.indent,this.suppressNewlines(),t.length;if(!this.tokens.length)return this.baseIndent=this.indent=r,t.length;e=r-this.indent+this.outdebt,this.token("INDENT",e,t.length-r,r),this.indents.push(e),this.ends.push({tag:"OUTDENT"}),this.outdebt=this.indebt=0,this.indent=r}else this.baseIndent>r?this.error("missing indentation",{offset:t.length}):(this.indebt=0,this.outdentToken(this.indent-r,i,t.length));return t.length},e.prototype.outdentToken=function(e,t,n){var i,r,s,o;for(i=this.indent-e;e>0;)s=this.indents[this.indents.length-1],s?s===this.outdebt?(e-=this.outdebt,this.outdebt=0):this.outdebt>s?(this.outdebt-=s,e-=s):(r=this.indents.pop()+this.outdebt,n&&(o=this.chunk[n],ut.call(y,o)>=0)&&(i-=r-e,e=r),this.outdebt=0,this.pair("OUTDENT"),this.token("OUTDENT",e,0,n),e-=r):e=0;for(r&&(this.outdebt-=e);";"===this.value();)this.tokens.pop();return"TERMINATOR"===this.tag()||t||this.token("TERMINATOR","\n",n,0),this.indent=i,this},e.prototype.whitespaceToken=function(){var e,t,n,i;return(e=et.exec(this.chunk))||(t="\n"===this.chunk.charAt(0))?(i=this.tokens,n=i[i.length-1],n&&(n[e?"spaced":"newLine"]=!0),e?e[0].length:0):0},e.prototype.newlineToken=function(e){for(;";"===this.value();)this.tokens.pop();return"TERMINATOR"!==this.tag()&&this.token("TERMINATOR","\n",e,0),this},e.prototype.suppressNewlines=function(){return"\\"===this.value()&&this.tokens.pop(),this},e.prototype.literalToken=function(){var e,t,n,s,o,a,c,u,p,d;if((e=_.exec(this.chunk))?(d=e[0],r.test(d)&&this.tagParameters()):d=this.chunk.charAt(0),u=d,n=this.tokens,t=n[n.length-1],"="===d&&t&&(!t[1].reserved&&(s=t[1],ut.call(C,s)>=0)&&this.error("reserved word '"+t[1]+"' can't be assigned",t[2]),"||"===(o=t[1])||"&&"===o))return t[0]="COMPOUND_ASSIGN",t[1]+="=",d.length;if(";"===d)this.seenFor=!1,u="TERMINATOR";else if(ut.call(D,d)>=0)u="MATH";else if(ut.call(l,d)>=0)u="COMPARE";else if(ut.call(h,d)>=0)u="COMPOUND_ASSIGN";else if(ut.call(J,d)>=0)u="UNARY";else if(ut.call(Q,d)>=0)u="UNARY_MATH";else if(ut.call(U,d)>=0)u="SHIFT";else if(ut.call(x,d)>=0||"?"===d&&(null!=t?t.spaced:void 0))u="LOGIC";else if(t&&!t.spaced)if("("===d&&(a=t[0],ut.call(i,a)>=0))"?"===t[0]&&(t[0]="FUNC_EXIST"),u="CALL_START";else if("["===d&&(c=t[0],ut.call(b,c)>=0))switch(u="INDEX_START",t[0]){case"?":t[0]="INDEX_SOAK"}switch(p=this.makeToken(u,d),d){case"(":case"{":case"[":this.ends.push({tag:w[d],origin:p});break;case")":case"}":case"]":this.pair(d)}return this.tokens.push(p),d.length},e.prototype.tagParameters=function(){var e,t,n,i;if(")"!==this.tag())return this;for(t=[],i=this.tokens,e=i.length,i[--e][0]="PARAM_END";n=i[--e];)switch(n[0]){case")":t.push(n);break;case"(":case"CALL_START":if(!t.length)return"("===n[0]?(n[0]="PARAM_START",this):this;t.pop()}return this},e.prototype.closeIndentation=function(){return this.outdentToken(this.indent)},e.prototype.matchWithInterpolations=function(t,n){var i,r,s,o,a,c,l,h,u,p,d,f,m,g,v;if(v=[],h=n.length,this.chunk.slice(0,h)!==n)return null;for(m=this.chunk.slice(h);;){if(g=t.exec(m)[0],this.validateEscapes(g,{isRegex:"/"===n.charAt(0),offsetInChunk:h}),v.push(this.makeToken("NEOSTRING",g,h)),m=m.slice(g.length),h+=g.length,"#{"!==m.slice(0,2))break;p=this.getLineAndColumnFromChunk(h+1),c=p[0],r=p[1],d=(new e).tokenize(m.slice(1),{line:c,column:r,untilBalanced:!0}),l=d.tokens,o=d.index,o+=1,u=l[0],i=l[l.length-1],u[0]=u[1]="(",i[0]=i[1]=")",i.origin=["","end of interpolation",i[2]],"TERMINATOR"===(null!=(f=l[1])?f[0]:void 0)&&l.splice(1,1),v.push(["TOKENS",l]),m=m.slice(o),h+=o}return m.slice(0,n.length)!==n&&this.error("missing "+n,{length:n.length}),s=v[0],a=v[v.length-1],s[2].first_column-=n.length,a[2].last_column+=n.length,0===a[1].length&&(a[2].last_column-=1),{tokens:v,index:h+n.length}},e.prototype.mergeInterpolationTokens=function(e,t,n){var i,r,s,o,a,c,l,h,u,p,d,f,m,g,v,y;for(e.length>1&&(u=this.token("STRING_START","(",0,0)),s=this.tokens.length,o=a=0,l=e.length;l>a;o=++a){switch(g=e[o],m=g[0],y=g[1],m){case"TOKENS":if(2===y.length)continue;h=y[0],v=y;break;case"NEOSTRING":if(i=n(g[1],o),0===i.length){if(0!==o)continue;r=this.tokens.length}2===o&&null!=r&&this.tokens.splice(r,2),g[0]="STRING",g[1]=this.makeDelimitedLiteral(i,t),h=g,v=[g]}this.tokens.length>s&&(p=this.token("+","+"),p[2]={first_line:h[2].first_line,first_column:h[2].first_column,last_line:h[2].first_line,last_column:h[2].first_column}),(d=this.tokens).push.apply(d,v)}return u?(c=e[e.length-1],u.origin=["STRING",null,{first_line:u[2].first_line,first_column:u[2].first_column,last_line:c[2].last_line,last_column:c[2].last_column}],f=this.token("STRING_END",")"),f[2]={first_line:c[2].last_line,first_column:c[2].last_column,last_line:c[2].last_line,last_column:c[2].last_column}):void 0},e.prototype.pair=function(e){var t,n,i,r,s;return i=this.ends,n=i[i.length-1],e!==(s=null!=n?n.tag:void 0)?("OUTDENT"!==s&&this.error("unmatched "+e),r=this.indents,t=r[r.length-1],this.outdentToken(t,!0),this.pair(e)):this.ends.pop()},e.prototype.getLineAndColumnFromChunk=function(e){var t,n,i,r,s;return 0===e?[this.chunkLine,this.chunkColumn]:(s=e>=this.chunk.length?this.chunk:this.chunk.slice(0,+(e-1)+1||9e9),i=nt(s,"\n"),t=this.chunkColumn,i>0?(r=s.split("\n"),n=r[r.length-1],t=n.length):t+=s.length,[this.chunkLine+i,t])},e.prototype.makeToken=function(e,t,n,i){var r,s,o,a,c;return null==n&&(n=0),null==i&&(i=t.length),s={},o=this.getLineAndColumnFromChunk(n),s.first_line=o[0],s.first_column=o[1],r=Math.max(0,i-1),a=this.getLineAndColumnFromChunk(n+r),s.last_line=a[0],s.last_column=a[1],c=[e,t,s]},e.prototype.token=function(e,t,n,i,r){var s;return s=this.makeToken(e,t,n,i),r&&(s.origin=r),this.tokens.push(s),s},e.prototype.tag=function(){var e,t;return e=this.tokens,t=e[e.length-1],null!=t?t[0]:void 0},e.prototype.value=function(){var e,t;return e=this.tokens,t=e[e.length-1],null!=t?t[1]:void 0},e.prototype.unfinished=function(){var e;return L.test(this.chunk)||"\\"===(e=this.tag())||"."===e||"?."===e||"?::"===e||"UNARY"===e||"MATH"===e||"UNARY_MATH"===e||"+"===e||"-"===e||"YIELD"===e||"**"===e||"SHIFT"===e||"RELATION"===e||"COMPARE"===e||"LOGIC"===e||"THROW"===e||"EXTENDS"===e},e.prototype.formatString=function(e){return e.replace(X,"$1")},e.prototype.formatHeregex=function(e){return e.replace(g,"$1$2")},e.prototype.validateEscapes=function(e,t){var n,i,r,s,o,a,c,l;return null==t&&(t={}),s=k.exec(e),!s||(s[0],n=s[1],a=s[2],i=s[3],l=s[4],t.isRegex&&a&&"0"!==a.charAt(0))?void 0:(o=a?"octal escape sequences are not allowed":"invalid escape sequence",r="\\"+(a||i||l),this.error(o+" "+r,{offset:(null!=(c=t.offsetInChunk)?c:0)+s.index+n.length,length:r.length}))},e.prototype.makeDelimitedLiteral=function(e,t){var n;return null==t&&(t={}),""===e&&"/"===t.delimiter&&(e="(?:)"),n=RegExp("(\\\\\\\\)|(\\\\0(?=[1-7]))|\\\\?("+t.delimiter+")|\\\\?(?:(\\n)|(\\r)|(\\u2028)|(\\u2029))|(\\\\.)","g"),e=e.replace(n,function(e,n,i,r,s,o,a,c,l){switch(!1){case!n:return t.double?n+n:n;case!i:return"\\x00";case!r:return"\\"+r;case!s:return"\\n";case!o:return"\\r";case!a:return"\\u2028";case!c:return"\\u2029";case!l:return t.double?"\\"+l:l}}),""+t.delimiter+e+t.delimiter},e.prototype.error=function(e,t){var n,i,r,s,o,a;return null==t&&(t={}),r="first_line"in t?t:(o=this.getLineAndColumnFromChunk(null!=(s=t.offset)?s:0),i=o[0],n=o[1],o,{first_line:i,first_column:n,last_column:n+(null!=(a=t.length)?a:1)-1}),ht(e,r)},e}(),E=["true","false","null","this","new","delete","typeof","in","instanceof","return","throw","break","continue","debugger","yield","if","else","switch","for","while","do","try","catch","finally","class","extends","super"],a=["undefined","then","unless","until","loop","of","by","when"],o={and:"&&",or:"||",is:"==",isnt:"!=",not:"!",yes:"true",no:"false",on:"true",off:"false"},s=function(){var e;e=[];for(rt in o)e.push(rt);return e}(),a=a.concat(s),V=["case","default","function","var","void","with","const","let","enum","export","import","native","implements","interface","package","private","protected","public","static"],H=["arguments","eval","yield*"],C=E.concat(V).concat(H),e.RESERVED=V.concat(E).concat(a).concat(H),e.STRICT_PROSCRIBED=H,t=65279,v=/^(?!\d)((?:(?!\s)[$\w\x7f-\uffff])+)([^\n\S]*:(?!:))?/,I=/^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i,_=/^(?:[-=]>|[-+*\/%<>&|^!?=]=|>>>=?|([-+:])\1|([&|<>*\/%])\2=?|\?(\.|::)|\.{2,3})/,et=/^[^\n\S]+/,c=/^###([^#][\s\S]*?)(?:###[^\n\S]*|###$)|^(?:\s*#(?!##[^#]).*)+/,r=/^[-=]>/,R=/^(?:\n[^\n\S]*)+/,T=/^`[^\\`]*(?:\\.[^\\`]*)*`/,Y=/^(?:'''|"""|'|")/,W=/^(?:[^\\']|\\[\s\S])*/,q=/^(?:[^\\"#]|\\[\s\S]|\#(?!\{))*/,f=/^(?:[^\\']|\\[\s\S]|'(?!''))*/,p=/^(?:[^\\"#]|\\[\s\S]|"(?!"")|\#(?!\{))*/,X=/((?:\\\\)+)|\\[^\S\n]*\n\s*/g,G=/\s*\n\s*/g,d=/\n+([^\n\S]*)(?=\S)/g,$=/^\/(?!\/)((?:[^[\/\n\\]|\\[^\n]|\[(?:\\[^\n]|[^\]\n\\])*\])*)(\/)?/,j=/^\w*/,Z=/^(?!.*(.).*\1)[imgy]*$/,m=/^(?:[^\\\/#]|\\[\s\S]|\/(?!\/\/)|\#(?!\{))*/,g=/((?:\\\\)+)|\\(\s)|\s+(?:#.*)?/g,M=/^(\/|\/{3}\s*)(\*)/,O=/^\/=?\s/,u=/\*\//,L=/^\s*(?:,|\??\.(?![.\d])|::)/,k=/((?:^|[^\\])(?:\\\\)*)\\(?:(0[0-7]|[1-7])|(x(?![\da-fA-F]{2}).{0,2})|(u(?![\da-fA-F]{4}).{0,4}))/,F=/^[^\n\S]*\n/,K=/\n[^\n\S]*$/,z=/\s+$/,h=["-=","+=","/=","*=","%=","||=","&&=","?=","<<=",">>=",">>>=","&=","^=","|=","**=","//=","%%="],J=["NEW","TYPEOF","DELETE","DO"],Q=["!","~"],x=["&&","||","&","|","^"],U=["<<",">>",">>>"],l=["==","!=","<",">","<=",">="],D=["*","/","%","//","%%"],B=["IN","OF","INSTANCEOF"],n=["TRUE","FALSE"],i=["IDENTIFIER",")","]","?","@","THIS","SUPER"],b=i.concat(["NUMBER","STRING","STRING_END","REGEX","REGEX_END","BOOL","NULL","UNDEFINED","}","::"]),A=b.concat(["++","--"]),N=["INDENT","OUTDENT","TERMINATOR"],y=[")","}","]"]}.call(this),t.exports}(),require["./parser"]=function(){var e={},t={exports:e},n=function(){function e(){this.yy={}}var t=function(e,t,n,i){for(n=n||{},i=e.length;i--;n[e[i]]=t);return n},n=[1,20],i=[1,75],r=[1,71],s=[1,76],o=[1,77],a=[1,73],c=[1,74],l=[1,50],h=[1,52],u=[1,53],p=[1,54],d=[1,55],f=[1,45],m=[1,46],g=[1,27],v=[1,60],y=[1,61],b=[1,70],k=[1,43],w=[1,26],T=[1,58],C=[1,59],E=[1,57],F=[1,38],N=[1,44],L=[1,56],x=[1,65],S=[1,66],D=[1,67],R=[1,68],A=[1,42],I=[1,64],_=[1,29],O=[1,30],$=[1,31],j=[1,32],M=[1,33],B=[1,34],V=[1,35],P=[1,78],U=[1,6,26,34,108],G=[1,88],H=[1,81],q=[1,80],X=[1,79],W=[1,82],Y=[1,83],K=[1,84],z=[1,85],J=[1,86],Q=[1,87],Z=[1,91],et=[1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,135,136,141,142,143,144,145,146,147],tt=[1,97],nt=[1,98],it=[1,99],rt=[1,100],st=[1,102],ot=[1,103],at=[1,96],ct=[2,112],lt=[1,6,25,26,34,55,60,63,72,73,74,75,77,79,80,84,90,91,92,97,99,108,110,111,112,116,117,132,135,136,141,142,143,144,145,146,147],ht=[2,79],ut=[1,108],pt=[2,58],dt=[1,112],ft=[1,117],mt=[1,118],gt=[1,120],vt=[1,6,25,26,34,46,55,60,63,72,73,74,75,77,79,80,84,90,91,92,97,99,108,110,111,112,116,117,132,135,136,141,142,143,144,145,146,147],yt=[2,76],bt=[1,6,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,135,136,141,142,143,144,145,146,147],kt=[1,155],wt=[1,157],Tt=[1,152],Ct=[1,6,25,26,34,46,55,60,63,72,73,74,75,77,79,80,84,86,90,91,92,97,99,108,110,111,112,116,117,132,135,136,139,140,141,142,143,144,145,146,147,148],Et=[2,95],Ft=[1,6,25,26,34,49,55,60,63,72,73,74,75,77,79,80,84,90,91,92,97,99,108,110,111,112,116,117,132,135,136,141,142,143,144,145,146,147],Nt=[1,6,25,26,34,46,49,55,60,63,72,73,74,75,77,79,80,84,86,90,91,92,97,99,108,110,111,112,116,117,123,124,132,135,136,139,140,141,142,143,144,145,146,147,148],Lt=[1,206],xt=[1,205],St=[1,6,25,26,34,38,55,60,63,72,73,74,75,77,79,80,84,90,91,92,97,99,108,110,111,112,116,117,132,135,136,141,142,143,144,145,146,147],Dt=[2,56],Rt=[1,216],At=[6,25,26,55,60],It=[6,25,26,46,55,60,63],_t=[1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,135,136,142,144,145,146,147],Ot=[1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132],$t=[72,73,74,75,77,80,90,91],jt=[1,235],Mt=[2,133],Bt=[1,6,25,26,34,46,55,60,63,72,73,74,75,77,79,80,84,90,91,92,97,99,108,110,111,112,116,117,123,124,132,135,136,141,142,143,144,145,146,147],Vt=[1,244],Pt=[6,25,26,60,92,97],Ut=[1,6,25,26,34,55,60,63,79,84,92,97,99,108,117,132],Gt=[1,6,25,26,34,55,60,63,79,84,92,97,99,108,111,117,132],Ht=[123,124],qt=[60,123,124],Xt=[1,255],Wt=[6,25,26,60,84],Yt=[6,25,26,49,60,84],Kt=[1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,135,136,144,145,146,147],zt=[11,28,30,32,33,36,37,40,41,42,43,44,51,52,53,57,58,79,82,85,89,94,95,96,102,106,107,110,112,114,116,125,131,133,134,135,136,137,139,140],Jt=[2,122],Qt=[6,25,26],Zt=[2,57],en=[1,268],tn=[1,269],nn=[1,6,25,26,34,55,60,63,79,84,92,97,99,104,105,108,110,111,112,116,117,127,129,132,135,136,141,142,143,144,145,146,147],rn=[26,127,129],sn=[1,6,26,34,55,60,63,79,84,92,97,99,108,111,117,132],on=[2,71],an=[1,291],cn=[1,292],ln=[1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,127,132,135,136,141,142,143,144,145,146,147],hn=[1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,112,116,117,132],un=[1,303],pn=[1,304],dn=[6,25,26,60],fn=[1,6,25,26,34,55,60,63,79,84,92,97,99,104,108,110,111,112,116,117,132,135,136,141,142,143,144,145,146,147],mn=[25,60],gn={trace:function(){},yy:{},symbols_:{error:2,Root:3,Body:4,Line:5,TERMINATOR:6,Expression:7,Statement:8,Return:9,Comment:10,STATEMENT:11,Value:12,Invocation:13,Code:14,Operation:15,Assign:16,If:17,Try:18,While:19,For:20,Switch:21,Class:22,Throw:23,Block:24,INDENT:25,OUTDENT:26,Identifier:27,IDENTIFIER:28,AlphaNumeric:29,NUMBER:30,String:31,STRING:32,STRING_START:33,STRING_END:34,Regex:35,REGEX:36,REGEX_START:37,REGEX_END:38,Literal:39,JS:40,DEBUGGER:41,UNDEFINED:42,NULL:43,BOOL:44,Assignable:45,"=":46,AssignObj:47,ObjAssignable:48,":":49,ThisProperty:50,RETURN:51,HERECOMMENT:52,PARAM_START:53,ParamList:54,PARAM_END:55,FuncGlyph:56,"->":57,"=>":58,OptComma:59,",":60,Param:61,ParamVar:62,"...":63,Array:64,Object:65,Splat:66,SimpleAssignable:67,Accessor:68,Parenthetical:69,Range:70,This:71,".":72,"?.":73,"::":74,"?::":75,Index:76,INDEX_START:77,IndexValue:78,INDEX_END:79,INDEX_SOAK:80,Slice:81,"{":82,AssignList:83,"}":84,CLASS:85,EXTENDS:86,OptFuncExist:87,Arguments:88,SUPER:89,FUNC_EXIST:90,CALL_START:91,CALL_END:92,ArgList:93,THIS:94,"@":95,"[":96,"]":97,RangeDots:98,"..":99,Arg:100,SimpleArgs:101,TRY:102,Catch:103,FINALLY:104,CATCH:105,THROW:106,"(":107,")":108,WhileSource:109,WHILE:110,WHEN:111,UNTIL:112,Loop:113,LOOP:114,ForBody:115,FOR:116,BY:117,ForStart:118,ForSource:119,ForVariables:120,OWN:121,ForValue:122,FORIN:123,FOROF:124,SWITCH:125,Whens:126,ELSE:127,When:128,LEADING_WHEN:129,IfBlock:130,IF:131,POST_IF:132,UNARY:133,UNARY_MATH:134,"-":135,"+":136,YIELD:137,FROM:138,"--":139,"++":140,"?":141,MATH:142,"**":143,SHIFT:144,COMPARE:145,LOGIC:146,RELATION:147,COMPOUND_ASSIGN:148,$accept:0,$end:1},terminals_:{2:"error",6:"TERMINATOR",11:"STATEMENT",25:"INDENT",26:"OUTDENT",28:"IDENTIFIER",30:"NUMBER",32:"STRING",33:"STRING_START",34:"STRING_END",36:"REGEX",37:"REGEX_START",38:"REGEX_END",40:"JS",41:"DEBUGGER",42:"UNDEFINED",43:"NULL",44:"BOOL",46:"=",49:":",51:"RETURN",52:"HERECOMMENT",53:"PARAM_START",55:"PARAM_END",57:"->",58:"=>",60:",",63:"...",72:".",73:"?.",74:"::",75:"?::",77:"INDEX_START",79:"INDEX_END",80:"INDEX_SOAK",82:"{",84:"}",85:"CLASS",86:"EXTENDS",89:"SUPER",90:"FUNC_EXIST",91:"CALL_START",92:"CALL_END",94:"THIS",95:"@",96:"[",97:"]",99:"..",102:"TRY",104:"FINALLY",105:"CATCH",106:"THROW",107:"(",108:")",110:"WHILE",111:"WHEN",112:"UNTIL",114:"LOOP",116:"FOR",117:"BY",121:"OWN",123:"FORIN",124:"FOROF",125:"SWITCH",127:"ELSE",129:"LEADING_WHEN",131:"IF",132:"POST_IF",133:"UNARY",134:"UNARY_MATH",135:"-",136:"+",137:"YIELD",138:"FROM",139:"--",140:"++",141:"?",142:"MATH",143:"**",144:"SHIFT",145:"COMPARE",146:"LOGIC",147:"RELATION",148:"COMPOUND_ASSIGN"},productions_:[0,[3,0],[3,1],[4,1],[4,3],[4,2],[5,1],[5,1],[8,1],[8,1],[8,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[24,2],[24,3],[27,1],[29,1],[29,1],[31,1],[31,3],[35,1],[35,3],[39,1],[39,1],[39,1],[39,1],[39,1],[39,1],[39,1],[16,3],[16,4],[16,5],[47,1],[47,3],[47,5],[47,1],[48,1],[48,1],[48,1],[9,2],[9,1],[10,1],[14,5],[14,2],[56,1],[56,1],[59,0],[59,1],[54,0],[54,1],[54,3],[54,4],[54,6],[61,1],[61,2],[61,3],[61,1],[62,1],[62,1],[62,1],[62,1],[66,2],[67,1],[67,2],[67,2],[67,1],[45,1],[45,1],[45,1],[12,1],[12,1],[12,1],[12,1],[12,1],[68,2],[68,2],[68,2],[68,2],[68,1],[68,1],[76,3],[76,2],[78,1],[78,1],[65,4],[83,0],[83,1],[83,3],[83,4],[83,6],[22,1],[22,2],[22,3],[22,4],[22,2],[22,3],[22,4],[22,5],[13,3],[13,3],[13,1],[13,2],[87,0],[87,1],[88,2],[88,4],[71,1],[71,1],[50,2],[64,2],[64,4],[98,1],[98,1],[70,5],[81,3],[81,2],[81,2],[81,1],[93,1],[93,3],[93,4],[93,4],[93,6],[100,1],[100,1],[100,1],[101,1],[101,3],[18,2],[18,3],[18,4],[18,5],[103,3],[103,3],[103,2],[23,2],[69,3],[69,5],[109,2],[109,4],[109,2],[109,4],[19,2],[19,2],[19,2],[19,1],[113,2],[113,2],[20,2],[20,2],[20,2],[115,2],[115,4],[115,2],[118,2],[118,3],[122,1],[122,1],[122,1],[122,1],[120,1],[120,3],[119,2],[119,2],[119,4],[119,4],[119,4],[119,6],[119,6],[21,5],[21,7],[21,4],[21,6],[126,1],[126,2],[128,3],[128,4],[130,3],[130,5],[17,1],[17,3],[17,3],[17,3],[15,2],[15,2],[15,2],[15,2],[15,2],[15,2],[15,3],[15,2],[15,2],[15,2],[15,2],[15,2],[15,3],[15,3],[15,3],[15,3],[15,3],[15,3],[15,3],[15,3],[15,3],[15,5],[15,4],[15,3]],performAction:function(e,t,n,i,r,s,o){var a=s.length-1;
switch(r){case 1:return this.$=i.addLocationDataFn(o[a],o[a])(new i.Block);case 2:return this.$=s[a];case 3:this.$=i.addLocationDataFn(o[a],o[a])(i.Block.wrap([s[a]]));break;case 4:this.$=i.addLocationDataFn(o[a-2],o[a])(s[a-2].push(s[a]));break;case 5:this.$=s[a-1];break;case 6:case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 27:case 32:case 34:case 45:case 46:case 47:case 48:case 56:case 57:case 67:case 68:case 69:case 70:case 75:case 76:case 79:case 83:case 89:case 133:case 134:case 136:case 166:case 167:case 183:case 189:this.$=s[a];break;case 10:case 25:case 26:case 28:case 30:case 33:case 35:this.$=i.addLocationDataFn(o[a],o[a])(new i.Literal(s[a]));break;case 23:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Block);break;case 24:case 31:case 90:this.$=i.addLocationDataFn(o[a-2],o[a])(s[a-1]);break;case 29:case 146:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Parens(s[a-1]));break;case 36:this.$=i.addLocationDataFn(o[a],o[a])(new i.Undefined);break;case 37:this.$=i.addLocationDataFn(o[a],o[a])(new i.Null);break;case 38:this.$=i.addLocationDataFn(o[a],o[a])(new i.Bool(s[a]));break;case 39:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Assign(s[a-2],s[a]));break;case 40:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.Assign(s[a-3],s[a]));break;case 41:this.$=i.addLocationDataFn(o[a-4],o[a])(new i.Assign(s[a-4],s[a-1]));break;case 42:case 72:case 77:case 78:case 80:case 81:case 82:case 168:case 169:this.$=i.addLocationDataFn(o[a],o[a])(new i.Value(s[a]));break;case 43:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Assign(i.addLocationDataFn(o[a-2])(new i.Value(s[a-2])),s[a],"object"));break;case 44:this.$=i.addLocationDataFn(o[a-4],o[a])(new i.Assign(i.addLocationDataFn(o[a-4])(new i.Value(s[a-4])),s[a-1],"object"));break;case 49:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Return(s[a]));break;case 50:this.$=i.addLocationDataFn(o[a],o[a])(new i.Return);break;case 51:this.$=i.addLocationDataFn(o[a],o[a])(new i.Comment(s[a]));break;case 52:this.$=i.addLocationDataFn(o[a-4],o[a])(new i.Code(s[a-3],s[a],s[a-1]));break;case 53:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Code([],s[a],s[a-1]));break;case 54:this.$=i.addLocationDataFn(o[a],o[a])("func");break;case 55:this.$=i.addLocationDataFn(o[a],o[a])("boundfunc");break;case 58:case 95:this.$=i.addLocationDataFn(o[a],o[a])([]);break;case 59:case 96:case 128:case 170:this.$=i.addLocationDataFn(o[a],o[a])([s[a]]);break;case 60:case 97:case 129:this.$=i.addLocationDataFn(o[a-2],o[a])(s[a-2].concat(s[a]));break;case 61:case 98:case 130:this.$=i.addLocationDataFn(o[a-3],o[a])(s[a-3].concat(s[a]));break;case 62:case 99:case 132:this.$=i.addLocationDataFn(o[a-5],o[a])(s[a-5].concat(s[a-2]));break;case 63:this.$=i.addLocationDataFn(o[a],o[a])(new i.Param(s[a]));break;case 64:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Param(s[a-1],null,!0));break;case 65:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Param(s[a-2],s[a]));break;case 66:case 135:this.$=i.addLocationDataFn(o[a],o[a])(new i.Expansion);break;case 71:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Splat(s[a-1]));break;case 73:this.$=i.addLocationDataFn(o[a-1],o[a])(s[a-1].add(s[a]));break;case 74:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Value(s[a-1],[].concat(s[a])));break;case 84:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Access(s[a]));break;case 85:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Access(s[a],"soak"));break;case 86:this.$=i.addLocationDataFn(o[a-1],o[a])([i.addLocationDataFn(o[a-1])(new i.Access(new i.Literal("prototype"))),i.addLocationDataFn(o[a])(new i.Access(s[a]))]);break;case 87:this.$=i.addLocationDataFn(o[a-1],o[a])([i.addLocationDataFn(o[a-1])(new i.Access(new i.Literal("prototype"),"soak")),i.addLocationDataFn(o[a])(new i.Access(s[a]))]);break;case 88:this.$=i.addLocationDataFn(o[a],o[a])(new i.Access(new i.Literal("prototype")));break;case 91:this.$=i.addLocationDataFn(o[a-1],o[a])(i.extend(s[a],{soak:!0}));break;case 92:this.$=i.addLocationDataFn(o[a],o[a])(new i.Index(s[a]));break;case 93:this.$=i.addLocationDataFn(o[a],o[a])(new i.Slice(s[a]));break;case 94:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.Obj(s[a-2],s[a-3].generated));break;case 100:this.$=i.addLocationDataFn(o[a],o[a])(new i.Class);break;case 101:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Class(null,null,s[a]));break;case 102:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Class(null,s[a]));break;case 103:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.Class(null,s[a-1],s[a]));break;case 104:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Class(s[a]));break;case 105:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Class(s[a-1],null,s[a]));break;case 106:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.Class(s[a-2],s[a]));break;case 107:this.$=i.addLocationDataFn(o[a-4],o[a])(new i.Class(s[a-3],s[a-1],s[a]));break;case 108:case 109:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Call(s[a-2],s[a],s[a-1]));break;case 110:this.$=i.addLocationDataFn(o[a],o[a])(new i.Call("super",[new i.Splat(new i.Literal("arguments"))]));break;case 111:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Call("super",s[a]));break;case 112:this.$=i.addLocationDataFn(o[a],o[a])(!1);break;case 113:this.$=i.addLocationDataFn(o[a],o[a])(!0);break;case 114:this.$=i.addLocationDataFn(o[a-1],o[a])([]);break;case 115:case 131:this.$=i.addLocationDataFn(o[a-3],o[a])(s[a-2]);break;case 116:case 117:this.$=i.addLocationDataFn(o[a],o[a])(new i.Value(new i.Literal("this")));break;case 118:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Value(i.addLocationDataFn(o[a-1])(new i.Literal("this")),[i.addLocationDataFn(o[a])(new i.Access(s[a]))],"this"));break;case 119:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Arr([]));break;case 120:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.Arr(s[a-2]));break;case 121:this.$=i.addLocationDataFn(o[a],o[a])("inclusive");break;case 122:this.$=i.addLocationDataFn(o[a],o[a])("exclusive");break;case 123:this.$=i.addLocationDataFn(o[a-4],o[a])(new i.Range(s[a-3],s[a-1],s[a-2]));break;case 124:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Range(s[a-2],s[a],s[a-1]));break;case 125:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Range(s[a-1],null,s[a]));break;case 126:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Range(null,s[a],s[a-1]));break;case 127:this.$=i.addLocationDataFn(o[a],o[a])(new i.Range(null,null,s[a]));break;case 137:this.$=i.addLocationDataFn(o[a-2],o[a])([].concat(s[a-2],s[a]));break;case 138:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Try(s[a]));break;case 139:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Try(s[a-1],s[a][0],s[a][1]));break;case 140:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.Try(s[a-2],null,null,s[a]));break;case 141:this.$=i.addLocationDataFn(o[a-4],o[a])(new i.Try(s[a-3],s[a-2][0],s[a-2][1],s[a]));break;case 142:this.$=i.addLocationDataFn(o[a-2],o[a])([s[a-1],s[a]]);break;case 143:this.$=i.addLocationDataFn(o[a-2],o[a])([i.addLocationDataFn(o[a-1])(new i.Value(s[a-1])),s[a]]);break;case 144:this.$=i.addLocationDataFn(o[a-1],o[a])([null,s[a]]);break;case 145:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Throw(s[a]));break;case 147:this.$=i.addLocationDataFn(o[a-4],o[a])(new i.Parens(s[a-2]));break;case 148:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.While(s[a]));break;case 149:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.While(s[a-2],{guard:s[a]}));break;case 150:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.While(s[a],{invert:!0}));break;case 151:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.While(s[a-2],{invert:!0,guard:s[a]}));break;case 152:this.$=i.addLocationDataFn(o[a-1],o[a])(s[a-1].addBody(s[a]));break;case 153:case 154:this.$=i.addLocationDataFn(o[a-1],o[a])(s[a].addBody(i.addLocationDataFn(o[a-1])(i.Block.wrap([s[a-1]]))));break;case 155:this.$=i.addLocationDataFn(o[a],o[a])(s[a]);break;case 156:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.While(i.addLocationDataFn(o[a-1])(new i.Literal("true"))).addBody(s[a]));break;case 157:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.While(i.addLocationDataFn(o[a-1])(new i.Literal("true"))).addBody(i.addLocationDataFn(o[a])(i.Block.wrap([s[a]]))));break;case 158:case 159:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.For(s[a-1],s[a]));break;case 160:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.For(s[a],s[a-1]));break;case 161:this.$=i.addLocationDataFn(o[a-1],o[a])({source:i.addLocationDataFn(o[a])(new i.Value(s[a]))});break;case 162:this.$=i.addLocationDataFn(o[a-3],o[a])({source:i.addLocationDataFn(o[a-2])(new i.Value(s[a-2])),step:s[a]});break;case 163:this.$=i.addLocationDataFn(o[a-1],o[a])(function(){return s[a].own=s[a-1].own,s[a].name=s[a-1][0],s[a].index=s[a-1][1],s[a]}());break;case 164:this.$=i.addLocationDataFn(o[a-1],o[a])(s[a]);break;case 165:this.$=i.addLocationDataFn(o[a-2],o[a])(function(){return s[a].own=!0,s[a]}());break;case 171:this.$=i.addLocationDataFn(o[a-2],o[a])([s[a-2],s[a]]);break;case 172:this.$=i.addLocationDataFn(o[a-1],o[a])({source:s[a]});break;case 173:this.$=i.addLocationDataFn(o[a-1],o[a])({source:s[a],object:!0});break;case 174:this.$=i.addLocationDataFn(o[a-3],o[a])({source:s[a-2],guard:s[a]});break;case 175:this.$=i.addLocationDataFn(o[a-3],o[a])({source:s[a-2],guard:s[a],object:!0});break;case 176:this.$=i.addLocationDataFn(o[a-3],o[a])({source:s[a-2],step:s[a]});break;case 177:this.$=i.addLocationDataFn(o[a-5],o[a])({source:s[a-4],guard:s[a-2],step:s[a]});break;case 178:this.$=i.addLocationDataFn(o[a-5],o[a])({source:s[a-4],step:s[a-2],guard:s[a]});break;case 179:this.$=i.addLocationDataFn(o[a-4],o[a])(new i.Switch(s[a-3],s[a-1]));break;case 180:this.$=i.addLocationDataFn(o[a-6],o[a])(new i.Switch(s[a-5],s[a-3],s[a-1]));break;case 181:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.Switch(null,s[a-1]));break;case 182:this.$=i.addLocationDataFn(o[a-5],o[a])(new i.Switch(null,s[a-3],s[a-1]));break;case 184:this.$=i.addLocationDataFn(o[a-1],o[a])(s[a-1].concat(s[a]));break;case 185:this.$=i.addLocationDataFn(o[a-2],o[a])([[s[a-1],s[a]]]);break;case 186:this.$=i.addLocationDataFn(o[a-3],o[a])([[s[a-2],s[a-1]]]);break;case 187:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.If(s[a-1],s[a],{type:s[a-2]}));break;case 188:this.$=i.addLocationDataFn(o[a-4],o[a])(s[a-4].addElse(i.addLocationDataFn(o[a-2],o[a])(new i.If(s[a-1],s[a],{type:s[a-2]}))));break;case 190:this.$=i.addLocationDataFn(o[a-2],o[a])(s[a-2].addElse(s[a]));break;case 191:case 192:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.If(s[a],i.addLocationDataFn(o[a-2])(i.Block.wrap([s[a-2]])),{type:s[a-1],statement:!0}));break;case 193:case 194:case 197:case 198:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Op(s[a-1],s[a]));break;case 195:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Op("-",s[a]));break;case 196:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Op("+",s[a]));break;case 199:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Op(s[a-2].concat(s[a-1]),s[a]));break;case 200:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Op("--",s[a]));break;case 201:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Op("++",s[a]));break;case 202:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Op("--",s[a-1],null,!0));break;case 203:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Op("++",s[a-1],null,!0));break;case 204:this.$=i.addLocationDataFn(o[a-1],o[a])(new i.Existence(s[a-1]));break;case 205:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Op("+",s[a-2],s[a]));break;case 206:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Op("-",s[a-2],s[a]));break;case 207:case 208:case 209:case 210:case 211:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Op(s[a-1],s[a-2],s[a]));break;case 212:this.$=i.addLocationDataFn(o[a-2],o[a])(function(){return"!"===s[a-1].charAt(0)?new i.Op(s[a-1].slice(1),s[a-2],s[a]).invert():new i.Op(s[a-1],s[a-2],s[a])}());break;case 213:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Assign(s[a-2],s[a],s[a-1]));break;case 214:this.$=i.addLocationDataFn(o[a-4],o[a])(new i.Assign(s[a-4],s[a-1],s[a-3]));break;case 215:this.$=i.addLocationDataFn(o[a-3],o[a])(new i.Assign(s[a-3],s[a],s[a-2]));break;case 216:this.$=i.addLocationDataFn(o[a-2],o[a])(new i.Extends(s[a-2],s[a]))}},table:[{1:[2,1],3:1,4:2,5:3,7:4,8:5,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{1:[3]},{1:[2,2],6:P},t(U,[2,3]),t(U,[2,6],{118:69,109:89,115:90,110:x,112:S,116:R,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(U,[2,7],{118:69,109:92,115:93,110:x,112:S,116:R,132:Z}),t(et,[2,11],{87:94,68:95,76:101,72:tt,73:nt,74:it,75:rt,77:st,80:ot,90:at,91:ct}),t(et,[2,12],{76:101,87:104,68:105,72:tt,73:nt,74:it,75:rt,77:st,80:ot,90:at,91:ct}),t(et,[2,13]),t(et,[2,14]),t(et,[2,15]),t(et,[2,16]),t(et,[2,17]),t(et,[2,18]),t(et,[2,19]),t(et,[2,20]),t(et,[2,21]),t(et,[2,22]),t(et,[2,8]),t(et,[2,9]),t(et,[2,10]),t(lt,ht,{46:[1,106]}),t(lt,[2,80]),t(lt,[2,81]),t(lt,[2,82]),t(lt,[2,83]),t([1,6,25,26,34,38,55,60,63,72,73,74,75,77,79,80,84,90,92,97,99,108,110,111,112,116,117,132,135,136,141,142,143,144,145,146,147],[2,110],{88:107,91:ut}),t([6,25,55,60],pt,{54:109,61:110,62:111,27:113,50:114,64:115,65:116,28:i,63:dt,82:b,95:ft,96:mt}),{24:119,25:gt},{7:121,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:123,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:124,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:125,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:127,8:126,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,138:[1,128],139:B,140:V},{12:130,13:131,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:132,50:63,64:47,65:48,67:129,69:23,70:24,71:25,82:b,89:w,94:T,95:C,96:E,107:L},{12:130,13:131,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:132,50:63,64:47,65:48,67:133,69:23,70:24,71:25,82:b,89:w,94:T,95:C,96:E,107:L},t(vt,yt,{86:[1,137],139:[1,134],140:[1,135],148:[1,136]}),t(et,[2,189],{127:[1,138]}),{24:139,25:gt},{24:140,25:gt},t(et,[2,155]),{24:141,25:gt},{7:142,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:[1,143],27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(bt,[2,100],{39:22,69:23,70:24,71:25,64:47,65:48,29:49,35:51,27:62,50:63,31:72,12:130,13:131,45:132,24:144,67:146,25:gt,28:i,30:r,32:s,33:o,36:a,37:c,40:l,41:h,42:u,43:p,44:d,82:b,86:[1,145],89:w,94:T,95:C,96:E,107:L}),{7:147,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t([1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,141,142,143,144,145,146,147],[2,50],{12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,9:18,10:19,45:21,39:22,69:23,70:24,71:25,56:28,67:36,130:37,109:39,113:40,115:41,64:47,65:48,29:49,35:51,27:62,50:63,118:69,31:72,8:122,7:148,11:n,28:i,30:r,32:s,33:o,36:a,37:c,40:l,41:h,42:u,43:p,44:d,51:f,52:m,53:g,57:v,58:y,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,114:D,125:A,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V}),t(et,[2,51]),t(vt,[2,77]),t(vt,[2,78]),t(lt,[2,32]),t(lt,[2,33]),t(lt,[2,34]),t(lt,[2,35]),t(lt,[2,36]),t(lt,[2,37]),t(lt,[2,38]),{4:149,5:3,7:4,8:5,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:[1,150],27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:151,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:kt,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,63:wt,64:47,65:48,66:156,67:36,69:23,70:24,71:25,82:b,85:k,89:w,93:153,94:T,95:C,96:E,97:Tt,100:154,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(lt,[2,116]),t(lt,[2,117],{27:158,28:i}),{25:[2,54]},{25:[2,55]},t(Ct,[2,72]),t(Ct,[2,75]),{7:159,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:160,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:161,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:163,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,24:162,25:gt,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{27:168,28:i,50:169,64:170,65:171,70:164,82:b,95:ft,96:E,120:165,121:[1,166],122:167},{119:172,123:[1,173],124:[1,174]},t([6,25,60,84],Et,{31:72,83:175,47:176,48:177,10:178,27:179,29:180,50:181,28:i,30:r,32:s,33:o,52:m,95:ft}),t(Ft,[2,26]),t(Ft,[2,27]),t(lt,[2,30]),{12:130,13:182,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:132,50:63,64:47,65:48,67:183,69:23,70:24,71:25,82:b,89:w,94:T,95:C,96:E,107:L},t(Nt,[2,25]),t(Ft,[2,28]),{4:184,5:3,7:4,8:5,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(U,[2,5],{7:4,8:5,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,9:18,10:19,45:21,39:22,69:23,70:24,71:25,56:28,67:36,130:37,109:39,113:40,115:41,64:47,65:48,29:49,35:51,27:62,50:63,118:69,31:72,5:185,11:n,28:i,30:r,32:s,33:o,36:a,37:c,40:l,41:h,42:u,43:p,44:d,51:f,52:m,53:g,57:v,58:y,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,110:x,112:S,114:D,116:R,125:A,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V}),t(et,[2,204]),{7:186,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:187,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:188,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:189,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:190,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:191,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:192,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:193,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:194,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(et,[2,154]),t(et,[2,159]),{7:195,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(et,[2,153]),t(et,[2,158]),{88:196,91:ut},t(Ct,[2,73]),{91:[2,113]},{27:197,28:i},{27:198,28:i},t(Ct,[2,88],{27:199,28:i}),{27:200,28:i},t(Ct,[2,89]),{7:202,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,63:Lt,64:47,65:48,67:36,69:23,70:24,71:25,78:201,81:203,82:b,85:k,89:w,94:T,95:C,96:E,98:204,99:xt,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{76:207,77:st,80:ot},{88:208,91:ut},t(Ct,[2,74]),{6:[1,210],7:209,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:[1,211],27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(St,[2,111]),{7:214,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:kt,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,63:wt,64:47,65:48,66:156,67:36,69:23,70:24,71:25,82:b,85:k,89:w,92:[1,212],93:213,94:T,95:C,96:E,100:154,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t([6,25],Dt,{59:217,55:[1,215],60:Rt}),t(At,[2,59]),t(At,[2,63],{46:[1,219],63:[1,218]}),t(At,[2,66]),t(It,[2,67]),t(It,[2,68]),t(It,[2,69]),t(It,[2,70]),{27:158,28:i},{7:214,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:kt,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,63:wt,64:47,65:48,66:156,67:36,69:23,70:24,71:25,82:b,85:k,89:w,93:153,94:T,95:C,96:E,97:Tt,100:154,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(et,[2,53]),{4:221,5:3,7:4,8:5,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,26:[1,220],27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t([1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,135,136,142,143,144,145,146,147],[2,193],{118:69,109:89,115:90,141:X}),{109:92,110:x,112:S,115:93,116:R,118:69,132:Z},t(_t,[2,194],{118:69,109:89,115:90,141:X,143:Y}),t(_t,[2,195],{118:69,109:89,115:90,141:X,143:Y}),t(_t,[2,196],{118:69,109:89,115:90,141:X,143:Y}),t(et,[2,197],{118:69,109:92,115:93}),t(Ot,[2,198],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{7:222,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(et,[2,200],{72:yt,73:yt,74:yt,75:yt,77:yt,80:yt,90:yt,91:yt}),{68:95,72:tt,73:nt,74:it,75:rt,76:101,77:st,80:ot,87:94,90:at,91:ct},{68:105,72:tt,73:nt,74:it,75:rt,76:101,77:st,80:ot,87:104,90:at,91:ct},t($t,ht),t(et,[2,201],{72:yt,73:yt,74:yt,75:yt,77:yt,80:yt,90:yt,91:yt}),t(et,[2,202]),t(et,[2,203]),{6:[1,225],7:223,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:[1,224],27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:226,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{24:227,25:gt,131:[1,228]},t(et,[2,138],{103:229,104:[1,230],105:[1,231]}),t(et,[2,152]),t(et,[2,160]),{25:[1,232],109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},{126:233,128:234,129:jt},t(et,[2,101]),{7:236,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(bt,[2,104],{24:237,25:gt,72:yt,73:yt,74:yt,75:yt,77:yt,80:yt,90:yt,91:yt,86:[1,238]}),t(Ot,[2,145],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Ot,[2,49],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{6:P,108:[1,239]},{4:240,5:3,7:4,8:5,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t([6,25,60,97],Mt,{118:69,109:89,115:90,98:241,63:[1,242],99:xt,110:x,112:S,116:R,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Bt,[2,119]),t([6,25,97],Dt,{59:243,60:Vt}),t(Pt,[2,128]),{7:214,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:kt,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,63:wt,64:47,65:48,66:156,67:36,69:23,70:24,71:25,82:b,85:k,89:w,93:245,94:T,95:C,96:E,100:154,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(Pt,[2,134]),t(Pt,[2,135]),t(Nt,[2,118]),{24:246,25:gt,109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},t(Ut,[2,148],{118:69,109:89,115:90,110:x,111:[1,247],112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Ut,[2,150],{118:69,109:89,115:90,110:x,111:[1,248],112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(et,[2,156]),t(Gt,[2,157],{118:69,109:89,115:90,110:x,112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t([1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,132,135,136,141,142,143,144,145,146,147],[2,161],{117:[1,249]}),t(Ht,[2,164]),{27:168,28:i,50:169,64:170,65:171,82:b,95:ft,96:mt,120:250,122:167},t(Ht,[2,170],{60:[1,251]}),t(qt,[2,166]),t(qt,[2,167]),t(qt,[2,168]),t(qt,[2,169]),t(et,[2,163]),{7:252,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:253,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t([6,25,84],Dt,{59:254,60:Xt}),t(Wt,[2,96]),t(Wt,[2,42],{49:[1,256]}),t(Wt,[2,45]),t(Yt,[2,46]),t(Yt,[2,47]),t(Yt,[2,48]),{38:[1,257],68:105,72:tt,73:nt,74:it,75:rt,76:101,77:st,80:ot,87:104,90:at,91:ct},t($t,yt),{6:P,34:[1,258]},t(U,[2,4]),t(Kt,[2,205],{118:69,109:89,115:90,141:X,142:W,143:Y}),t(Kt,[2,206],{118:69,109:89,115:90,141:X,142:W,143:Y}),t(_t,[2,207],{118:69,109:89,115:90,141:X,143:Y}),t(_t,[2,208],{118:69,109:89,115:90,141:X,143:Y}),t([1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,144,145,146,147],[2,209],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y}),t([1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,145,146],[2,210],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,147:Q}),t([1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,146],[2,211],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,147:Q}),t([1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,117,132,145,146,147],[2,212],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K}),t(Gt,[2,192],{118:69,109:89,115:90,110:x,112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Gt,[2,191],{118:69,109:89,115:90,110:x,112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(St,[2,108]),t(Ct,[2,84]),t(Ct,[2,85]),t(Ct,[2,86]),t(Ct,[2,87]),{79:[1,259]},{63:Lt,79:[2,92],98:260,99:xt,109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},{79:[2,93]},{7:261,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,79:[2,127],82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(zt,[2,121]),t(zt,Jt),t(Ct,[2,91]),t(St,[2,109]),t(Ot,[2,39],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{7:262,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:263,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(St,[2,114]),t([6,25,92],Dt,{59:264,60:Vt}),t(Pt,Mt,{118:69,109:89,115:90,63:[1,265],110:x,112:S,116:R,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{56:266,57:v,58:y},t(Qt,Zt,{62:111,27:113,50:114,64:115,65:116,61:267,28:i,63:dt,82:b,95:ft,96:mt}),{6:en,25:tn},t(At,[2,64]),{7:270,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(nn,[2,23]),{6:P,26:[1,271]},t(Ot,[2,199],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Ot,[2,213],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{7:272,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:273,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(Ot,[2,216],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(et,[2,190]),{7:274,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(et,[2,139],{104:[1,275]}),{24:276,25:gt},{24:279,25:gt,27:277,28:i,65:278,82:b},{126:280,128:234,129:jt},{26:[1,281],127:[1,282],128:283,129:jt},t(rn,[2,183]),{7:285,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,101:284,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(sn,[2,102],{118:69,109:89,115:90,24:286,25:gt,110:x,112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(et,[2,105]),{7:287,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(lt,[2,146]),{6:P,26:[1,288]},{7:289,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t([11,28,30,32,33,36,37,40,41,42,43,44,51,52,53,57,58,82,85,89,94,95,96,102,106,107,110,112,114,116,125,131,133,134,135,136,137,139,140],Jt,{6:on,25:on,60:on,97:on}),{6:an,25:cn,97:[1,290]},t([6,25,26,92,97],Zt,{12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,9:18,10:19,45:21,39:22,69:23,70:24,71:25,56:28,67:36,130:37,109:39,113:40,115:41,64:47,65:48,29:49,35:51,27:62,50:63,118:69,31:72,8:122,66:156,7:214,100:293,11:n,28:i,30:r,32:s,33:o,36:a,37:c,40:l,41:h,42:u,43:p,44:d,51:f,52:m,53:g,57:v,58:y,63:wt,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,110:x,112:S,114:D,116:R,125:A,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V}),t(Qt,Dt,{59:294,60:Vt}),t(ln,[2,187]),{7:295,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:296,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:297,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(Ht,[2,165]),{27:168,28:i,50:169,64:170,65:171,82:b,95:ft,96:mt,122:298},t([1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,112,116,132],[2,172],{118:69,109:89,115:90,111:[1,299],117:[1,300],135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(hn,[2,173],{118:69,109:89,115:90,111:[1,301],135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{6:un,25:pn,84:[1,302]},t([6,25,26,84],Zt,{31:72,48:177,10:178,27:179,29:180,50:181,47:305,28:i,30:r,32:s,33:o,52:m,95:ft}),{7:306,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:[1,307],27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(lt,[2,31]),t(Ft,[2,29]),t(Ct,[2,90]),{7:308,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,79:[2,125],82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{79:[2,126],109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},t(Ot,[2,40],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{26:[1,309],109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},{6:an,25:cn,92:[1,310]},t(Pt,on),{24:311,25:gt},t(At,[2,60]),{27:113,28:i,50:114,61:312,62:111,63:dt,64:115,65:116,82:b,95:ft,96:mt},t(dn,pt,{61:110,62:111,27:113,50:114,64:115,65:116,54:313,28:i,63:dt,82:b,95:ft,96:mt}),t(At,[2,65],{118:69,109:89,115:90,110:x,112:S,116:R,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(nn,[2,24]),{26:[1,314],109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},t(Ot,[2,215],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{24:315,25:gt,109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},{24:316,25:gt},t(et,[2,140]),{24:317,25:gt},{24:318,25:gt},t(fn,[2,144]),{26:[1,319],127:[1,320],128:283,129:jt},t(et,[2,181]),{24:321,25:gt},t(rn,[2,184]),{24:322,25:gt,60:[1,323]},t(mn,[2,136],{118:69,109:89,115:90,110:x,112:S,116:R,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(et,[2,103]),t(sn,[2,106],{118:69,109:89,115:90,24:324,25:gt,110:x,112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{108:[1,325]},{97:[1,326],109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},t(Bt,[2,120]),{7:214,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,63:wt,64:47,65:48,66:156,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,100:327,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:214,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,25:kt,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,63:wt,64:47,65:48,66:156,67:36,69:23,70:24,71:25,82:b,85:k,89:w,93:328,94:T,95:C,96:E,100:154,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(Pt,[2,129]),{6:an,25:cn,26:[1,329]},t(Gt,[2,149],{118:69,109:89,115:90,110:x,112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Gt,[2,151],{118:69,109:89,115:90,110:x,112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Gt,[2,162],{118:69,109:89,115:90,110:x,112:S,116:R,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Ht,[2,171]),{7:330,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:331,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:332,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(Bt,[2,94]),{10:178,27:179,28:i,29:180,30:r,31:72,32:s,33:o,47:333,48:177,50:181,52:m,95:ft},t(dn,Et,{31:72,47:176,48:177,10:178,27:179,29:180,50:181,83:334,28:i,30:r,32:s,33:o,52:m,95:ft}),t(Wt,[2,97]),t(Wt,[2,43],{118:69,109:89,115:90,110:x,112:S,116:R,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{7:335,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{79:[2,124],109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},t(et,[2,41]),t(St,[2,115]),t(et,[2,52]),t(At,[2,61]),t(Qt,Dt,{59:336,60:Rt}),t(et,[2,214]),t(ln,[2,188]),t(et,[2,141]),t(fn,[2,142]),t(fn,[2,143]),t(et,[2,179]),{24:337,25:gt},{26:[1,338]},t(rn,[2,185],{6:[1,339]}),{7:340,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},t(et,[2,107]),t(lt,[2,147]),t(lt,[2,123]),t(Pt,[2,130]),t(Qt,Dt,{59:341,60:Vt}),t(Pt,[2,131]),t([1,6,25,26,34,55,60,63,79,84,92,97,99,108,110,111,112,116,132],[2,174],{118:69,109:89,115:90,117:[1,342],135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(hn,[2,176],{118:69,109:89,115:90,111:[1,343],135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Ot,[2,175],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Wt,[2,98]),t(Qt,Dt,{59:344,60:Xt}),{26:[1,345],109:89,110:x,112:S,115:90,116:R,118:69,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q},{6:en,25:tn,26:[1,346]},{26:[1,347]},t(et,[2,182]),t(rn,[2,186]),t(mn,[2,137],{118:69,109:89,115:90,110:x,112:S,116:R,132:G,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),{6:an,25:cn,26:[1,348]},{7:349,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{7:350,8:122,9:18,10:19,11:n,12:6,13:7,14:8,15:9,16:10,17:11,18:12,19:13,20:14,21:15,22:16,23:17,27:62,28:i,29:49,30:r,31:72,32:s,33:o,35:51,36:a,37:c,39:22,40:l,41:h,42:u,43:p,44:d,45:21,50:63,51:f,52:m,53:g,56:28,57:v,58:y,64:47,65:48,67:36,69:23,70:24,71:25,82:b,85:k,89:w,94:T,95:C,96:E,102:F,106:N,107:L,109:39,110:x,112:S,113:40,114:D,115:41,116:R,118:69,125:A,130:37,131:I,133:_,134:O,135:$,136:j,137:M,139:B,140:V},{6:un,25:pn,26:[1,351]},t(Wt,[2,44]),t(At,[2,62]),t(et,[2,180]),t(Pt,[2,132]),t(Ot,[2,177],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Ot,[2,178],{118:69,109:89,115:90,135:H,136:q,141:X,142:W,143:Y,144:K,145:z,146:J,147:Q}),t(Wt,[2,99])],defaultActions:{60:[2,54],61:[2,55],96:[2,113],203:[2,93]},parseError:function(e,t){if(!t.recoverable)throw Error(e);
this.trace(e)},parse:function(e){function t(){var e;return e=f.lex()||p,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],s=[],o=this.table,a="",c=0,l=0,h=0,u=2,p=1,d=s.slice.call(arguments,1),f=Object.create(this.lexer),m={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(m.yy[g]=this.yy[g]);f.setInput(e,m.yy),m.yy.lexer=f,m.yy.parser=this,f.yylloc===void 0&&(f.yylloc={});var v=f.yylloc;s.push(v);var y=f.options&&f.options.ranges;this.parseError="function"==typeof m.yy.parseError?m.yy.parseError:Object.getPrototypeOf(this).parseError;for(var b,k,w,T,C,E,F,N,L,x={};;){if(w=i[i.length-1],this.defaultActions[w]?T=this.defaultActions[w]:((null===b||b===void 0)&&(b=t()),T=o[w]&&o[w][b]),T===void 0||!T.length||!T[0]){var S="";L=[];for(E in o[w])this.terminals_[E]&&E>u&&L.push("'"+this.terminals_[E]+"'");S=f.showPosition?"Parse error on line "+(c+1)+":\n"+f.showPosition()+"\nExpecting "+L.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(c+1)+": Unexpected "+(b==p?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(S,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:v,expected:L})}if(T[0]instanceof Array&&T.length>1)throw Error("Parse Error: multiple actions possible at state: "+w+", token: "+b);switch(T[0]){case 1:i.push(b),r.push(f.yytext),s.push(f.yylloc),i.push(T[1]),b=null,k?(b=k,k=null):(l=f.yyleng,a=f.yytext,c=f.yylineno,v=f.yylloc,h>0&&h--);break;case 2:if(F=this.productions_[T[1]][1],x.$=r[r.length-F],x._$={first_line:s[s.length-(F||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(F||1)].first_column,last_column:s[s.length-1].last_column},y&&(x._$.range=[s[s.length-(F||1)].range[0],s[s.length-1].range[1]]),C=this.performAction.apply(x,[a,l,c,m.yy,T[1],r,s].concat(d)),C!==void 0)return C;F&&(i=i.slice(0,2*-1*F),r=r.slice(0,-1*F),s=s.slice(0,-1*F)),i.push(this.productions_[T[1]][0]),r.push(x.$),s.push(x._$),N=o[i[i.length-2]][i[i.length-1]],i.push(N);break;case 3:return!0}}return!0}};return e.prototype=gn,gn.Parser=e,new e}();return require!==void 0&&e!==void 0&&(e.parser=n,e.Parser=n.Parser,e.parse=function(){return n.parse.apply(n,arguments)},e.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),process.exit(1));var n=require("fs").readFileSync(require("path").normalize(t[1]),"utf8");return e.parser.parse(n)},t!==void 0&&require.main===t&&e.main(process.argv.slice(1))),t.exports}(),require["./scope"]=function(){var e={},t={exports:e};return function(){var t,n=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};e.Scope=t=function(){function e(e,t,n,i){var r,s;this.parent=e,this.expressions=t,this.method=n,this.referencedVars=i,this.variables=[{name:"arguments",type:"arguments"}],this.positions={},this.parent||(this.utilities={}),this.root=null!=(r=null!=(s=this.parent)?s.root:void 0)?r:this}return e.prototype.add=function(e,t,n){return this.shared&&!n?this.parent.add(e,t,n):Object.prototype.hasOwnProperty.call(this.positions,e)?this.variables[this.positions[e]].type=t:this.positions[e]=this.variables.push({name:e,type:t})-1},e.prototype.namedMethod=function(){var e;return(null!=(e=this.method)?e.name:void 0)||!this.parent?this.method:this.parent.namedMethod()},e.prototype.find=function(e){return this.check(e)?!0:(this.add(e,"var"),!1)},e.prototype.parameter=function(e){return this.shared&&this.parent.check(e,!0)?void 0:this.add(e,"param")},e.prototype.check=function(e){var t;return!!(this.type(e)||(null!=(t=this.parent)?t.check(e):void 0))},e.prototype.temporary=function(e,t,n){return null==n&&(n=!1),n?(t+parseInt(e,36)).toString(36).replace(/\d/g,"a"):e+(t||"")},e.prototype.type=function(e){var t,n,i,r;for(i=this.variables,t=0,n=i.length;n>t;t++)if(r=i[t],r.name===e)return r.type;return null},e.prototype.freeVariable=function(e,t){var i,r,s;for(null==t&&(t={}),i=0;;){if(s=this.temporary(e,i,t.single),!(this.check(s)||n.call(this.root.referencedVars,s)>=0))break;i++}return(null!=(r=t.reserve)?r:!0)&&this.add(s,"var",!0),s},e.prototype.assign=function(e,t){return this.add(e,{value:t,assigned:!0},!0),this.hasAssignments=!0},e.prototype.hasDeclarations=function(){return!!this.declaredVariables().length},e.prototype.declaredVariables=function(){var e;return function(){var t,n,i,r;for(i=this.variables,r=[],t=0,n=i.length;n>t;t++)e=i[t],"var"===e.type&&r.push(e.name);return r}.call(this).sort()},e.prototype.assignedVariables=function(){var e,t,n,i,r;for(n=this.variables,i=[],e=0,t=n.length;t>e;e++)r=n[e],r.type.assigned&&i.push(r.name+" = "+r.type.value);return i},e}()}.call(this),t.exports}(),require["./nodes"]=function(){var e={},t={exports:e};return function(){var t,n,i,r,s,o,a,c,l,h,u,p,d,f,m,g,v,y,b,k,w,T,C,E,F,N,L,x,S,D,R,A,I,_,O,$,j,M,B,V,P,U,G,H,q,X,W,Y,K,z,J,Q,Z,et,tt,nt,it,rt,st,ot,at,ct,lt,ht,ut,pt,dt,ft,mt,gt,vt,yt,bt,kt=function(e,t){function n(){this.constructor=e}for(var i in t)wt.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},wt={}.hasOwnProperty,Tt=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},Ct=[].slice;Error.stackTraceLimit=1/0,P=require("./scope").Scope,dt=require("./lexer"),$=dt.RESERVED,V=dt.STRICT_PROSCRIBED,ft=require("./helpers"),et=ft.compact,rt=ft.flatten,it=ft.extend,ht=ft.merge,tt=ft.del,gt=ft.starts,nt=ft.ends,mt=ft.some,Z=ft.addLocationDataFn,lt=ft.locationDataToString,vt=ft.throwSyntaxError,e.extend=it,e.addLocationDataFn=Z,Q=function(){return!0},D=function(){return!1},X=function(){return this},S=function(){return this.negated=!this.negated,this},e.CodeFragment=l=function(){function e(e,t){var n;this.code=""+t,this.locationData=null!=e?e.locationData:void 0,this.type=(null!=e?null!=(n=e.constructor)?n.name:void 0:void 0)||"unknown"}return e.prototype.toString=function(){return""+this.code+(this.locationData?": "+lt(this.locationData):"")},e}(),st=function(e){var t;return function(){var n,i,r;for(r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(t.code);return r}().join("")},e.Base=r=function(){function e(){}return e.prototype.compile=function(e,t){return st(this.compileToFragments(e,t))},e.prototype.compileToFragments=function(e,t){var n;return e=it({},e),t&&(e.level=t),n=this.unfoldSoak(e)||this,n.tab=e.indent,e.level!==L&&n.isStatement(e)?n.compileClosure(e):n.compileNode(e)},e.prototype.compileClosure=function(e){var n,i,r,a,l,h,u;return(a=this.jumps())&&a.error("cannot use a pure statement in an expression"),e.sharedScope=!0,r=new c([],s.wrap([this])),n=[],((i=this.contains(at))||this.contains(ct))&&(n=[new x("this")],i?(l="apply",n.push(new x("arguments"))):l="call",r=new z(r,[new t(new x(l))])),h=new o(r,n).compileNode(e),(r.isGenerator||(null!=(u=r.base)?u.isGenerator:void 0))&&(h.unshift(this.makeCode("(yield* ")),h.push(this.makeCode(")"))),h},e.prototype.cache=function(e,t,n){var r,s,o;return r=null!=n?n(this):this.isComplex(),r?(s=new x(e.scope.freeVariable("ref")),o=new i(s,this),t?[o.compileToFragments(e,t),[this.makeCode(s.value)]]:[o,s]):(s=t?this.compileToFragments(e,t):this,[s,s])},e.prototype.cacheToCodeFragments=function(e){return[st(e[0]),st(e[1])]},e.prototype.makeReturn=function(e){var t;return t=this.unwrapAll(),e?new o(new x(e+".push"),[t]):new M(t)},e.prototype.contains=function(e){var t;return t=void 0,this.traverseChildren(!1,function(n){return e(n)?(t=n,!1):void 0}),t},e.prototype.lastNonComment=function(e){var t;for(t=e.length;t--;)if(!(e[t]instanceof h))return e[t];return null},e.prototype.toString=function(e,t){var n;return null==e&&(e=""),null==t&&(t=this.constructor.name),n="\n"+e+t,this.soak&&(n+="?"),this.eachChild(function(t){return n+=t.toString(e+q)}),n},e.prototype.eachChild=function(e){var t,n,i,r,s,o,a,c;if(!this.children)return this;for(a=this.children,i=0,s=a.length;s>i;i++)if(t=a[i],this[t])for(c=rt([this[t]]),r=0,o=c.length;o>r;r++)if(n=c[r],e(n)===!1)return this;return this},e.prototype.traverseChildren=function(e,t){return this.eachChild(function(n){var i;return i=t(n),i!==!1?n.traverseChildren(e,t):void 0})},e.prototype.invert=function(){return new I("!",this)},e.prototype.unwrapAll=function(){var e;for(e=this;e!==(e=e.unwrap()););return e},e.prototype.children=[],e.prototype.isStatement=D,e.prototype.jumps=D,e.prototype.isComplex=Q,e.prototype.isChainable=D,e.prototype.isAssignable=D,e.prototype.unwrap=X,e.prototype.unfoldSoak=D,e.prototype.assigns=D,e.prototype.updateLocationDataIfMissing=function(e){return this.locationData?this:(this.locationData=e,this.eachChild(function(t){return t.updateLocationDataIfMissing(e)}))},e.prototype.error=function(e){return vt(e,this.locationData)},e.prototype.makeCode=function(e){return new l(this,e)},e.prototype.wrapInBraces=function(e){return[].concat(this.makeCode("("),e,this.makeCode(")"))},e.prototype.joinFragmentArrays=function(e,t){var n,i,r,s,o;for(n=[],r=s=0,o=e.length;o>s;r=++s)i=e[r],r&&n.push(this.makeCode(t)),n=n.concat(i);return n},e}(),e.Block=s=function(e){function t(e){this.expressions=et(rt(e||[]))}return kt(t,e),t.prototype.children=["expressions"],t.prototype.push=function(e){return this.expressions.push(e),this},t.prototype.pop=function(){return this.expressions.pop()},t.prototype.unshift=function(e){return this.expressions.unshift(e),this},t.prototype.unwrap=function(){return 1===this.expressions.length?this.expressions[0]:this},t.prototype.isEmpty=function(){return!this.expressions.length},t.prototype.isStatement=function(e){var t,n,i,r;for(r=this.expressions,n=0,i=r.length;i>n;n++)if(t=r[n],t.isStatement(e))return!0;return!1},t.prototype.jumps=function(e){var t,n,i,r,s;for(s=this.expressions,n=0,r=s.length;r>n;n++)if(t=s[n],i=t.jumps(e))return i},t.prototype.makeReturn=function(e){var t,n;for(n=this.expressions.length;n--;)if(t=this.expressions[n],!(t instanceof h)){this.expressions[n]=t.makeReturn(e),t instanceof M&&!t.expression&&this.expressions.splice(n,1);break}return this},t.prototype.compileToFragments=function(e,n){return null==e&&(e={}),e.scope?t.__super__.compileToFragments.call(this,e,n):this.compileRoot(e)},t.prototype.compileNode=function(e){var n,i,r,s,o,a,c,l,h;for(this.tab=e.indent,h=e.level===L,i=[],l=this.expressions,s=o=0,a=l.length;a>o;s=++o)c=l[s],c=c.unwrapAll(),c=c.unfoldSoak(e)||c,c instanceof t?i.push(c.compileNode(e)):h?(c.front=!0,r=c.compileToFragments(e),c.isStatement(e)||(r.unshift(this.makeCode(""+this.tab)),r.push(this.makeCode(";"))),i.push(r)):i.push(c.compileToFragments(e,E));return h?this.spaced?[].concat(this.joinFragmentArrays(i,"\n\n"),this.makeCode("\n")):this.joinFragmentArrays(i,"\n"):(n=i.length?this.joinFragmentArrays(i,", "):[this.makeCode("void 0")],i.length>1&&e.level>=E?this.wrapInBraces(n):n)},t.prototype.compileRoot=function(e){var t,n,i,r,s,o,a,c,l,u,p;for(e.indent=e.bare?"":q,e.level=L,this.spaced=!0,e.scope=new P(null,this,null,null!=(l=e.referencedVars)?l:[]),u=e.locals||[],r=0,s=u.length;s>r;r++)o=u[r],e.scope.parameter(o);return a=[],e.bare||(c=function(){var e,n,r,s;for(r=this.expressions,s=[],i=e=0,n=r.length;n>e&&(t=r[i],t.unwrap()instanceof h);i=++e)s.push(t);return s}.call(this),p=this.expressions.slice(c.length),this.expressions=c,c.length&&(a=this.compileNode(ht(e,{indent:""})),a.push(this.makeCode("\n"))),this.expressions=p),n=this.compileWithDeclarations(e),e.bare?n:[].concat(a,this.makeCode("(function() {\n"),n,this.makeCode("\n}).call(this);\n"))},t.prototype.compileWithDeclarations=function(e){var t,n,i,r,s,o,a,c,l,u,p,d,f,m;for(r=[],c=[],l=this.expressions,s=o=0,a=l.length;a>o&&(i=l[s],i=i.unwrap(),i instanceof h||i instanceof x);s=++o);return e=ht(e,{level:L}),s&&(d=this.expressions.splice(s,9e9),u=[this.spaced,!1],m=u[0],this.spaced=u[1],p=[this.compileNode(e),m],r=p[0],this.spaced=p[1],this.expressions=d),c=this.compileNode(e),f=e.scope,f.expressions===this&&(n=e.scope.hasDeclarations(),t=f.hasAssignments,n||t?(s&&r.push(this.makeCode("\n")),r.push(this.makeCode(this.tab+"var ")),n&&r.push(this.makeCode(f.declaredVariables().join(", "))),t&&(n&&r.push(this.makeCode(",\n"+(this.tab+q))),r.push(this.makeCode(f.assignedVariables().join(",\n"+(this.tab+q))))),r.push(this.makeCode(";\n"+(this.spaced?"\n":"")))):r.length&&c.length&&r.push(this.makeCode("\n"))),r.concat(c)},t.wrap=function(e){return 1===e.length&&e[0]instanceof t?e[0]:new t(e)},t}(r),e.Literal=x=function(e){function t(e){this.value=e}return kt(t,e),t.prototype.makeReturn=function(){return this.isStatement()?this:t.__super__.makeReturn.apply(this,arguments)},t.prototype.isAssignable=function(){return g.test(this.value)},t.prototype.isStatement=function(){var e;return"break"===(e=this.value)||"continue"===e||"debugger"===e},t.prototype.isComplex=D,t.prototype.assigns=function(e){return e===this.value},t.prototype.jumps=function(e){return"break"!==this.value||(null!=e?e.loop:void 0)||(null!=e?e.block:void 0)?"continue"!==this.value||(null!=e?e.loop:void 0)?void 0:this:this},t.prototype.compileNode=function(e){var t,n,i;return n="this"===this.value?(null!=(i=e.scope.method)?i.bound:void 0)?e.scope.method.context:this.value:this.value.reserved?'"'+this.value+'"':this.value,t=this.isStatement()?""+this.tab+n+";":n,[this.makeCode(t)]},t.prototype.toString=function(){return' "'+this.value+'"'},t}(r),e.Undefined=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return kt(t,e),t.prototype.isAssignable=D,t.prototype.isComplex=D,t.prototype.compileNode=function(e){return[this.makeCode(e.level>=T?"(void 0)":"void 0")]},t}(r),e.Null=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return kt(t,e),t.prototype.isAssignable=D,t.prototype.isComplex=D,t.prototype.compileNode=function(){return[this.makeCode("null")]},t}(r),e.Bool=function(e){function t(e){this.val=e}return kt(t,e),t.prototype.isAssignable=D,t.prototype.isComplex=D,t.prototype.compileNode=function(){return[this.makeCode(this.val)]},t}(r),e.Return=M=function(e){function t(e){this.expression=e}return kt(t,e),t.prototype.children=["expression"],t.prototype.isStatement=Q,t.prototype.makeReturn=X,t.prototype.jumps=X,t.prototype.compileToFragments=function(e,n){var i,r;return i=null!=(r=this.expression)?r.makeReturn():void 0,!i||i instanceof t?t.__super__.compileToFragments.call(this,e,n):i.compileToFragments(e,n)},t.prototype.compileNode=function(e){var t,n,i;return t=[],n=null!=(i=this.expression)?"function"==typeof i.isYieldReturn?i.isYieldReturn():void 0:void 0,n||t.push(this.makeCode(this.tab+("return"+(this.expression?" ":"")))),this.expression&&(t=t.concat(this.expression.compileToFragments(e,N))),n||t.push(this.makeCode(";")),t},t}(r),e.Value=z=function(e){function t(e,n,i){return!n&&e instanceof t?e:(this.base=e,this.properties=n||[],i&&(this[i]=!0),this)}return kt(t,e),t.prototype.children=["base","properties"],t.prototype.add=function(e){return this.properties=this.properties.concat(e),this},t.prototype.hasProperties=function(){return!!this.properties.length},t.prototype.bareLiteral=function(e){return!this.properties.length&&this.base instanceof e},t.prototype.isArray=function(){return this.bareLiteral(n)},t.prototype.isRange=function(){return this.bareLiteral(j)},t.prototype.isComplex=function(){return this.hasProperties()||this.base.isComplex()},t.prototype.isAssignable=function(){return this.hasProperties()||this.base.isAssignable()},t.prototype.isSimpleNumber=function(){return this.bareLiteral(x)&&B.test(this.base.value)},t.prototype.isString=function(){return this.bareLiteral(x)&&y.test(this.base.value)},t.prototype.isRegex=function(){return this.bareLiteral(x)&&v.test(this.base.value)},t.prototype.isAtomic=function(){var e,t,n,i;for(i=this.properties.concat(this.base),e=0,t=i.length;t>e;e++)if(n=i[e],n.soak||n instanceof o)return!1;return!0},t.prototype.isNotCallable=function(){return this.isSimpleNumber()||this.isString()||this.isRegex()||this.isArray()||this.isRange()||this.isSplice()||this.isObject()},t.prototype.isStatement=function(e){return!this.properties.length&&this.base.isStatement(e)},t.prototype.assigns=function(e){return!this.properties.length&&this.base.assigns(e)},t.prototype.jumps=function(e){return!this.properties.length&&this.base.jumps(e)},t.prototype.isObject=function(e){return this.properties.length?!1:this.base instanceof A&&(!e||this.base.generated)},t.prototype.isSplice=function(){var e,t;return t=this.properties,e=t[t.length-1],e instanceof U},t.prototype.looksStatic=function(e){var t;return this.base.value===e&&1===this.properties.length&&"prototype"!==(null!=(t=this.properties[0].name)?t.value:void 0)},t.prototype.unwrap=function(){return this.properties.length?this:this.base},t.prototype.cacheReference=function(e){var n,r,s,o,a;return a=this.properties,s=a[a.length-1],2>this.properties.length&&!this.base.isComplex()&&!(null!=s?s.isComplex():void 0)?[this,this]:(n=new t(this.base,this.properties.slice(0,-1)),n.isComplex()&&(r=new x(e.scope.freeVariable("base")),n=new t(new O(new i(r,n)))),s?(s.isComplex()&&(o=new x(e.scope.freeVariable("name")),s=new w(new i(o,s.index)),o=new w(o)),[n.add(s),new t(r||n.base,[o||s])]):[n,r])},t.prototype.compileNode=function(e){var t,n,i,r,s;for(this.base.front=this.front,s=this.properties,t=this.base.compileToFragments(e,s.length?T:null),(this.base instanceof O||s.length)&&B.test(st(t))&&t.push(this.makeCode(".")),n=0,i=s.length;i>n;n++)r=s[n],t.push.apply(t,r.compileToFragments(e));return t},t.prototype.unfoldSoak=function(e){return null!=this.unfoldedSoak?this.unfoldedSoak:this.unfoldedSoak=function(n){return function(){var r,s,o,a,c,l,h,p,d,f;if(o=n.base.unfoldSoak(e))return(p=o.body.properties).push.apply(p,n.properties),o;for(d=n.properties,s=a=0,c=d.length;c>a;s=++a)if(l=d[s],l.soak)return l.soak=!1,r=new t(n.base,n.properties.slice(0,s)),f=new t(n.base,n.properties.slice(s)),r.isComplex()&&(h=new x(e.scope.freeVariable("ref")),r=new O(new i(h,r)),f.base=h),new b(new u(r),f,{soak:!0});return!1}}(this)()},t}(r),e.Comment=h=function(e){function t(e){this.comment=e}return kt(t,e),t.prototype.isStatement=Q,t.prototype.makeReturn=X,t.prototype.compileNode=function(e,t){var n,i;return i=this.comment.replace(/^(\s*)# /gm,"$1 * "),n="/*"+ut(i,this.tab)+(Tt.call(i,"\n")>=0?"\n"+this.tab:"")+" */",(t||e.level)===L&&(n=e.indent+n),[this.makeCode("\n"),this.makeCode(n)]},t}(r),e.Call=o=function(e){function n(e,t,n){this.args=null!=t?t:[],this.soak=n,this.isNew=!1,this.isSuper="super"===e,this.variable=this.isSuper?null:e,e instanceof z&&e.isNotCallable()&&e.error("literal is not a function")}return kt(n,e),n.prototype.children=["variable","args"],n.prototype.newInstance=function(){var e,t;return e=(null!=(t=this.variable)?t.base:void 0)||this.variable,e instanceof n&&!e.isNew?e.newInstance():this.isNew=!0,this},n.prototype.superReference=function(e){var n,r,s,o,a,c,l,h;return a=e.scope.namedMethod(),(null!=a?a.klass:void 0)?(o=a.klass,c=a.name,h=a.variable,o.isComplex()&&(s=new x(e.scope.parent.freeVariable("base")),r=new z(new O(new i(s,o))),h.base=r,h.properties.splice(0,o.properties.length)),(c.isComplex()||c instanceof w&&c.index.isAssignable())&&(l=new x(e.scope.parent.freeVariable("name")),c=new w(new i(l,c.index)),h.properties.pop(),h.properties.push(c)),n=[new t(new x("__super__"))],a["static"]&&n.push(new t(new x("constructor"))),n.push(null!=l?new w(l):c),new z(null!=s?s:o,n).compile(e)):(null!=a?a.ctor:void 0)?a.name+".__super__.constructor":this.error("cannot call super outside of an instance method.")},n.prototype.superThis=function(e){var t;return t=e.scope.method,t&&!t.klass&&t.context||"this"},n.prototype.unfoldSoak=function(e){var t,i,r,s,o,a,c,l,h;if(this.soak){if(this.variable){if(i=yt(e,this,"variable"))return i;c=new z(this.variable).cacheReference(e),s=c[0],h=c[1]}else s=new x(this.superReference(e)),h=new z(s);return h=new n(h,this.args),h.isNew=this.isNew,s=new x("typeof "+s.compile(e)+' === "function"'),new b(s,new z(h),{soak:!0})}for(t=this,a=[];;)if(t.variable instanceof n)a.push(t),t=t.variable;else{if(!(t.variable instanceof z))break;if(a.push(t),!((t=t.variable.base)instanceof n))break}for(l=a.reverse(),r=0,o=l.length;o>r;r++)t=l[r],i&&(t.variable instanceof n?t.variable=i:t.variable.base=i),i=yt(e,t,"variable");return i},n.prototype.compileNode=function(e){var t,n,i,r,s,o,a,c,l,h;if(null!=(l=this.variable)&&(l.front=this.front),r=G.compileSplattedArray(e,this.args,!0),r.length)return this.compileSplat(e,r);for(i=[],h=this.args,n=o=0,a=h.length;a>o;n=++o)t=h[n],n&&i.push(this.makeCode(", ")),i.push.apply(i,t.compileToFragments(e,E));return s=[],this.isSuper?(c=this.superReference(e)+(".call("+this.superThis(e)),i.length&&(c+=", "),s.push(this.makeCode(c))):(this.isNew&&s.push(this.makeCode("new ")),s.push.apply(s,this.variable.compileToFragments(e,T)),s.push(this.makeCode("("))),s.push.apply(s,i),s.push(this.makeCode(")")),s},n.prototype.compileSplat=function(e,t){var n,i,r,s,o,a;return this.isSuper?[].concat(this.makeCode(this.superReference(e)+".apply("+this.superThis(e)+", "),t,this.makeCode(")")):this.isNew?(s=this.tab+q,[].concat(this.makeCode("(function(func, args, ctor) {\n"+s+"ctor.prototype = func.prototype;\n"+s+"var child = new ctor, result = func.apply(child, args);\n"+s+"return Object(result) === result ? result : child;\n"+this.tab+"})("),this.variable.compileToFragments(e,E),this.makeCode(", "),t,this.makeCode(", function(){})"))):(n=[],i=new z(this.variable),(o=i.properties.pop())&&i.isComplex()?(a=e.scope.freeVariable("ref"),n=n.concat(this.makeCode("("+a+" = "),i.compileToFragments(e,E),this.makeCode(")"),o.compileToFragments(e))):(r=i.compileToFragments(e,T),B.test(st(r))&&(r=this.wrapInBraces(r)),o?(a=st(r),r.push.apply(r,o.compileToFragments(e))):a="null",n=n.concat(r)),n=n.concat(this.makeCode(".apply("+a+", "),t,this.makeCode(")")))},n}(r),e.Extends=d=function(e){function t(e,t){this.child=e,this.parent=t}return kt(t,e),t.prototype.children=["child","parent"],t.prototype.compileToFragments=function(e){return new o(new z(new x(bt("extend",e))),[this.child,this.parent]).compileToFragments(e)},t}(r),e.Access=t=function(e){function t(e,t){this.name=e,this.name.asKey=!0,this.soak="soak"===t}return kt(t,e),t.prototype.children=["name"],t.prototype.compileToFragments=function(e){var t;return t=this.name.compileToFragments(e),g.test(st(t))?t.unshift(this.makeCode(".")):(t.unshift(this.makeCode("[")),t.push(this.makeCode("]"))),t},t.prototype.isComplex=D,t}(r),e.Index=w=function(e){function t(e){this.index=e}return kt(t,e),t.prototype.children=["index"],t.prototype.compileToFragments=function(e){return[].concat(this.makeCode("["),this.index.compileToFragments(e,N),this.makeCode("]"))},t.prototype.isComplex=function(){return this.index.isComplex()},t}(r),e.Range=j=function(e){function t(e,t,n){this.from=e,this.to=t,this.exclusive="exclusive"===n,this.equals=this.exclusive?"":"="}return kt(t,e),t.prototype.children=["from","to"],t.prototype.compileVariables=function(e){var t,n,i,r,s,o;return e=ht(e,{top:!0}),t=tt(e,"isComplex"),n=this.cacheToCodeFragments(this.from.cache(e,E,t)),this.fromC=n[0],this.fromVar=n[1],i=this.cacheToCodeFragments(this.to.cache(e,E,t)),this.toC=i[0],this.toVar=i[1],(o=tt(e,"step"))&&(r=this.cacheToCodeFragments(o.cache(e,E,t)),this.step=r[0],this.stepVar=r[1]),s=[this.fromVar.match(R),this.toVar.match(R)],this.fromNum=s[0],this.toNum=s[1],this.stepVar?this.stepNum=this.stepVar.match(R):void 0},t.prototype.compileNode=function(e){var t,n,i,r,s,o,a,c,l,h,u,p,d,f;return this.fromVar||this.compileVariables(e),e.index?(a=this.fromNum&&this.toNum,s=tt(e,"index"),o=tt(e,"name"),l=o&&o!==s,f=s+" = "+this.fromC,this.toC!==this.toVar&&(f+=", "+this.toC),this.step!==this.stepVar&&(f+=", "+this.step),h=[s+" <"+this.equals,s+" >"+this.equals],c=h[0],r=h[1],n=this.stepNum?pt(this.stepNum[0])>0?c+" "+this.toVar:r+" "+this.toVar:a?(u=[pt(this.fromNum[0]),pt(this.toNum[0])],i=u[0],d=u[1],u,d>=i?c+" "+d:r+" "+d):(t=this.stepVar?this.stepVar+" > 0":this.fromVar+" <= "+this.toVar,t+" ? "+c+" "+this.toVar+" : "+r+" "+this.toVar),p=this.stepVar?s+" += "+this.stepVar:a?l?d>=i?"++"+s:"--"+s:d>=i?s+"++":s+"--":l?t+" ? ++"+s+" : --"+s:t+" ? "+s+"++ : "+s+"--",l&&(f=o+" = "+f),l&&(p=o+" = "+p),[this.makeCode(f+"; "+n+"; "+p)]):this.compileArray(e)},t.prototype.compileArray=function(e){var t,n,i,r,s,o,a,c,l,h,u,p,d;return this.fromNum&&this.toNum&&20>=Math.abs(this.fromNum-this.toNum)?(l=function(){p=[];for(var e=h=+this.fromNum,t=+this.toNum;t>=h?t>=e:e>=t;t>=h?e++:e--)p.push(e);return p}.apply(this),this.exclusive&&l.pop(),[this.makeCode("["+l.join(", ")+"]")]):(o=this.tab+q,s=e.scope.freeVariable("i",{single:!0}),u=e.scope.freeVariable("results"),c="\n"+o+u+" = [];",this.fromNum&&this.toNum?(e.index=s,n=st(this.compileNode(e))):(d=s+" = "+this.fromC+(this.toC!==this.toVar?", "+this.toC:""),i=this.fromVar+" <= "+this.toVar,n="var "+d+"; "+i+" ? "+s+" <"+this.equals+" "+this.toVar+" : "+s+" >"+this.equals+" "+this.toVar+"; "+i+" ? "+s+"++ : "+s+"--"),a="{ "+u+".push("+s+"); }\n"+o+"return "+u+";\n"+e.indent,r=function(e){return null!=e?e.contains(at):void 0},(r(this.from)||r(this.to))&&(t=", arguments"),[this.makeCode("(function() {"+c+"\n"+o+"for ("+n+")"+a+"}).apply(this"+(null!=t?t:"")+")")])},t}(r),e.Slice=U=function(e){function t(e){this.range=e,t.__super__.constructor.call(this)}return kt(t,e),t.prototype.children=["range"],t.prototype.compileNode=function(e){var t,n,i,r,s,o,a;return s=this.range,o=s.to,i=s.from,r=i&&i.compileToFragments(e,N)||[this.makeCode("0")],o&&(t=o.compileToFragments(e,N),n=st(t),(this.range.exclusive||-1!==+n)&&(a=", "+(this.range.exclusive?n:B.test(n)?""+(+n+1):(t=o.compileToFragments(e,T),"+"+st(t)+" + 1 || 9e9")))),[this.makeCode(".slice("+st(r)+(a||"")+")")]},t}(r),e.Obj=A=function(e){function n(e,t){this.generated=null!=t?t:!1,this.objects=this.properties=e||[]}return kt(n,e),n.prototype.children=["properties"],n.prototype.compileNode=function(e){var n,r,s,o,a,c,l,u,p,d,f,m,g,v,y,b,k,w,T,C,E;if(T=this.properties,this.generated)for(l=0,g=T.length;g>l;l++)b=T[l],b instanceof z&&b.error("cannot have an implicit value in an implicit object");for(r=p=0,v=T.length;v>p&&(w=T[r],!((w.variable||w).base instanceof O));r=++p);for(s=T.length>r,a=e.indent+=q,m=this.lastNonComment(this.properties),n=[],s&&(k=e.scope.freeVariable("obj"),n.push(this.makeCode("(\n"+a+k+" = "))),n.push(this.makeCode("{"+(0===T.length||0===r?"}":"\n"))),o=f=0,y=T.length;y>f;o=++f)w=T[o],o===r&&(0!==o&&n.push(this.makeCode("\n"+a+"}")),n.push(this.makeCode(",\n"))),u=o===T.length-1||o===r-1?"":w===m||w instanceof h?"\n":",\n",c=w instanceof h?"":a,s&&r>o&&(c+=q),w instanceof i&&w.variable instanceof z&&w.variable.hasProperties()&&w.variable.error("Invalid object key"),w instanceof z&&w["this"]&&(w=new i(w.properties[0].name,w,"object")),w instanceof h||(r>o?(w instanceof i||(w=new i(w,w,"object")),(w.variable.base||w.variable).asKey=!0):(w instanceof i?(d=w.variable,E=w.value):(C=w.base.cache(e),d=C[0],E=C[1]),w=new i(new z(new x(k),[new t(d)]),E))),c&&n.push(this.makeCode(c)),n.push.apply(n,w.compileToFragments(e,L)),u&&n.push(this.makeCode(u));return s?n.push(this.makeCode(",\n"+a+k+"\n"+this.tab+")")):0!==T.length&&n.push(this.makeCode("\n"+this.tab+"}")),this.front&&!s?this.wrapInBraces(n):n},n.prototype.assigns=function(e){var t,n,i,r;for(r=this.properties,t=0,n=r.length;n>t;t++)if(i=r[t],i.assigns(e))return!0;return!1},n}(r),e.Arr=n=function(e){function t(e){this.objects=e||[]}return kt(t,e),t.prototype.children=["objects"],t.prototype.compileNode=function(e){var t,n,i,r,s,o,a;if(!this.objects.length)return[this.makeCode("[]")];if(e.indent+=q,t=G.compileSplattedArray(e,this.objects),t.length)return t;for(t=[],n=function(){var t,n,i,r;for(i=this.objects,r=[],t=0,n=i.length;n>t;t++)a=i[t],r.push(a.compileToFragments(e,E));return r}.call(this),r=s=0,o=n.length;o>s;r=++s)i=n[r],r&&t.push(this.makeCode(", ")),t.push.apply(t,i);return st(t).indexOf("\n")>=0?(t.unshift(this.makeCode("[\n"+e.indent)),t.push(this.makeCode("\n"+this.tab+"]"))):(t.unshift(this.makeCode("[")),t.push(this.makeCode("]"))),t},t.prototype.assigns=function(e){var t,n,i,r;for(r=this.objects,t=0,n=r.length;n>t;t++)if(i=r[t],i.assigns(e))return!0;return!1},t}(r),e.Class=a=function(e){function n(e,t,n){this.variable=e,this.parent=t,this.body=null!=n?n:new s,this.boundFuncs=[],this.body.classBody=!0}return kt(n,e),n.prototype.children=["variable","parent","body"],n.prototype.determineName=function(){var e,n,i;return this.variable?(n=this.variable.properties,i=n[n.length-1],e=i?i instanceof t&&i.name.value:this.variable.base.value,Tt.call(V,e)>=0&&this.variable.error("class variable name may not be "+e),e&&(e=g.test(e)&&e)):null},n.prototype.setContext=function(e){return this.body.traverseChildren(!1,function(t){return t.classBody?!1:t instanceof x&&"this"===t.value?t.value=e:t instanceof c&&t.bound?t.context=e:void 0})},n.prototype.addBoundFunctions=function(e){var n,i,r,s,o;for(o=this.boundFuncs,i=0,r=o.length;r>i;i++)n=o[i],s=new z(new x("this"),[new t(n)]).compile(e),this.ctor.body.unshift(new x(s+" = "+bt("bind",e)+"("+s+", this)"))},n.prototype.addProperties=function(e,n,r){var s,o,a,l,h,u;return u=e.base.properties.slice(0),l=function(){var e;for(e=[];o=u.shift();)o instanceof i&&(a=o.variable.base,delete o.context,h=o.value,"constructor"===a.value?(this.ctor&&o.error("cannot define more than one constructor in a class"),h.bound&&o.error("cannot define a constructor as a bound function"),h instanceof c?o=this.ctor=h:(this.externalCtor=r.classScope.freeVariable("class"),o=new i(new x(this.externalCtor),h))):o.variable["this"]?h["static"]=!0:(s=a.isComplex()?new w(a):new t(a),o.variable=new z(new x(n),[new t(new x("prototype")),s]),h instanceof c&&h.bound&&(this.boundFuncs.push(a),h.bound=!1))),e.push(o);return e}.call(this),et(l)},n.prototype.walkBody=function(e,t){return this.traverseChildren(!1,function(r){return function(o){var a,c,l,h,u,p,d;if(a=!0,o instanceof n)return!1;if(o instanceof s){for(d=c=o.expressions,l=h=0,u=d.length;u>h;l=++h)p=d[l],p instanceof i&&p.variable.looksStatic(e)?p.value["static"]=!0:p instanceof z&&p.isObject(!0)&&(a=!1,c[l]=r.addProperties(p,e,t));o.expressions=c=rt(c)}return a&&!(o instanceof n)}}(this))},n.prototype.hoistDirectivePrologue=function(){var e,t,n;for(t=0,e=this.body.expressions;(n=e[t])&&n instanceof h||n instanceof z&&n.isString();)++t;return this.directives=e.splice(0,t)},n.prototype.ensureConstructor=function(e){return this.ctor||(this.ctor=new c,this.externalCtor?this.ctor.body.push(new x(this.externalCtor+".apply(this, arguments)")):this.parent&&this.ctor.body.push(new x(e+".__super__.constructor.apply(this, arguments)")),this.ctor.body.makeReturn(),this.body.expressions.unshift(this.ctor)),this.ctor.ctor=this.ctor.name=e,this.ctor.klass=null,this.ctor.noReturn=!0},n.prototype.compileNode=function(e){var t,n,r,a,l,h,u,p,f;return(a=this.body.jumps())&&a.error("Class bodies cannot contain pure statements"),(n=this.body.contains(at))&&n.error("Class bodies shouldn't reference arguments"),u=this.determineName()||"_Class",u.reserved&&(u="_"+u),h=new x(u),r=new c([],s.wrap([this.body])),t=[],e.classScope=r.makeScope(e.scope),this.hoistDirectivePrologue(),this.setContext(u),this.walkBody(u,e),this.ensureConstructor(u),this.addBoundFunctions(e),this.body.spaced=!0,this.body.expressions.push(h),this.parent&&(f=new x(e.classScope.freeVariable("superClass",{reserve:!1})),this.body.expressions.unshift(new d(h,f)),r.params.push(new _(f)),t.push(this.parent)),(p=this.body.expressions).unshift.apply(p,this.directives),l=new O(new o(r,t)),this.variable&&(l=new i(this.variable,l)),l.compileToFragments(e)},n}(r),e.Assign=i=function(e){function n(e,t,n,i){var r,s,o;this.variable=e,this.value=t,this.context=n,this.param=i&&i.param,this.subpattern=i&&i.subpattern,o=s=this.variable.unwrapAll().value,r=Tt.call(V,o)>=0,r&&"object"!==this.context&&this.variable.error('variable name may not be "'+s+'"')}return kt(n,e),n.prototype.children=["variable","value"],n.prototype.isStatement=function(e){return(null!=e?e.level:void 0)===L&&null!=this.context&&Tt.call(this.context,"?")>=0
},n.prototype.assigns=function(e){return this["object"===this.context?"value":"variable"].assigns(e)},n.prototype.unfoldSoak=function(e){return yt(e,this,"variable")},n.prototype.compileNode=function(e){var t,n,i,r,s,o,a,l,h,u,p,d,f,m;if(i=this.variable instanceof z){if(this.variable.isArray()||this.variable.isObject())return this.compilePatternMatch(e);if(this.variable.isSplice())return this.compileSplice(e);if("||="===(l=this.context)||"&&="===l||"?="===l)return this.compileConditional(e);if("**="===(h=this.context)||"//="===h||"%%="===h)return this.compileSpecialMath(e)}return this.value instanceof c&&(this.value["static"]?(this.value.klass=this.variable.base,this.value.name=this.variable.properties[0],this.value.variable=this.variable):(null!=(u=this.variable.properties)?u.length:void 0)>=2&&(p=this.variable.properties,o=p.length>=3?Ct.call(p,0,r=p.length-2):(r=0,[]),a=p[r++],s=p[r++],"prototype"===(null!=(d=a.name)?d.value:void 0)&&(this.value.klass=new z(this.variable.base,o),this.value.name=s,this.value.variable=this.variable))),this.context||(m=this.variable.unwrapAll(),m.isAssignable()||this.variable.error('"'+this.variable.compile(e)+'" cannot be assigned'),("function"==typeof m.hasProperties?m.hasProperties():void 0)||(this.param?e.scope.add(m.value,"var"):e.scope.find(m.value))),f=this.value.compileToFragments(e,E),n=this.variable.compileToFragments(e,E),"object"===this.context?n.concat(this.makeCode(": "),f):(t=n.concat(this.makeCode(" "+(this.context||"=")+" "),f),E>=e.level?t:this.wrapInBraces(t))},n.prototype.compilePatternMatch=function(e){var i,r,s,o,a,c,l,h,u,d,f,m,v,y,b,k,T,C,N,S,D,R,A,I,_,j,M,B;if(I=e.level===L,j=this.value,y=this.variable.base.objects,!(b=y.length))return s=j.compileToFragments(e),e.level>=F?this.wrapInBraces(s):s;if(h=this.variable.isObject(),I&&1===b&&!((v=y[0])instanceof G))return v instanceof n?(T=v,C=T.variable,l=C.base,v=T.value):l=h?v["this"]?v.properties[0].name:v:new x(0),i=g.test(l.unwrap().value||0),j=new z(j),j.properties.push(new(i?t:w)(l)),N=v.unwrap().value,Tt.call($,N)>=0&&v.error("assignment to a reserved word: "+v.compile(e)),new n(v,j,null,{param:this.param}).compileToFragments(e,L);for(M=j.compileToFragments(e,E),B=st(M),r=[],o=!1,(!g.test(B)||this.variable.assigns(B))&&(r.push([this.makeCode((k=e.scope.freeVariable("ref"))+" = ")].concat(Ct.call(M))),M=[this.makeCode(k)],B=k),c=d=0,f=y.length;f>d;c=++d){if(v=y[c],l=c,h&&(v instanceof n?(S=v,D=S.variable,l=D.base,v=S.value):v.base instanceof O?(R=new z(v.unwrapAll()).cacheReference(e),v=R[0],l=R[1]):l=v["this"]?v.properties[0].name:v),!o&&v instanceof G)m=v.name.unwrap().value,v=v.unwrap(),_=b+" <= "+B+".length ? "+bt("slice",e)+".call("+B+", "+c,(A=b-c-1)?(u=e.scope.freeVariable("i",{single:!0}),_+=", "+u+" = "+B+".length - "+A+") : ("+u+" = "+c+", [])"):_+=") : []",_=new x(_),o=u+"++";else{if(!o&&v instanceof p){(A=b-c-1)&&(1===A?o=B+".length - 1":(u=e.scope.freeVariable("i",{single:!0}),_=new x(u+" = "+B+".length - "+A),o=u+"++",r.push(_.compileToFragments(e,E))));continue}m=v.unwrap().value,(v instanceof G||v instanceof p)&&v.error("multiple splats/expansions are disallowed in an assignment"),"number"==typeof l?(l=new x(o||l),i=!1):i=h&&g.test(l.unwrap().value||0),_=new z(new x(B),[new(i?t:w)(l)])}null!=m&&Tt.call($,m)>=0&&v.error("assignment to a reserved word: "+v.compile(e)),r.push(new n(v,_,null,{param:this.param,subpattern:!0}).compileToFragments(e,E))}return I||this.subpattern||r.push(M),a=this.joinFragmentArrays(r,", "),E>e.level?a:this.wrapInBraces(a)},n.prototype.compileConditional=function(e){var t,i,r,s;return r=this.variable.cacheReference(e),i=r[0],s=r[1],!i.properties.length&&i.base instanceof x&&"this"!==i.base.value&&!e.scope.check(i.base.value)&&this.variable.error('the variable "'+i.base.value+"\" can't be assigned with "+this.context+" because it has not been declared before"),Tt.call(this.context,"?")>=0?(e.isExistentialEquals=!0,new b(new u(i),s,{type:"if"}).addElse(new n(s,this.value,"=")).compileToFragments(e)):(t=new I(this.context.slice(0,-1),i,new n(s,this.value,"=")).compileToFragments(e),E>=e.level?t:this.wrapInBraces(t))},n.prototype.compileSpecialMath=function(e){var t,i,r;return i=this.variable.cacheReference(e),t=i[0],r=i[1],new n(t,new I(this.context.slice(0,-1),r,this.value)).compileToFragments(e)},n.prototype.compileSplice=function(e){var t,n,i,r,s,o,a,c,l,h,u,p;return a=this.variable.properties.pop().range,i=a.from,h=a.to,n=a.exclusive,o=this.variable.compile(e),i?(c=this.cacheToCodeFragments(i.cache(e,F)),r=c[0],s=c[1]):r=s="0",h?i instanceof z&&i.isSimpleNumber()&&h instanceof z&&h.isSimpleNumber()?(h=h.compile(e)-s,n||(h+=1)):(h=h.compile(e,T)+" - "+s,n||(h+=" + 1")):h="9e9",l=this.value.cache(e,E),u=l[0],p=l[1],t=[].concat(this.makeCode("[].splice.apply("+o+", ["+r+", "+h+"].concat("),u,this.makeCode(")), "),p),e.level>L?this.wrapInBraces(t):t},n}(r),e.Code=c=function(e){function t(e,t,n){this.params=e||[],this.body=t||new s,this.bound="boundfunc"===n,this.isGenerator=!!this.body.contains(function(e){var t;return e instanceof I&&("yield"===(t=e.operator)||"yield*"===t)})}return kt(t,e),t.prototype.children=["params","body"],t.prototype.isStatement=function(){return!!this.ctor},t.prototype.jumps=D,t.prototype.makeScope=function(e){return new P(e,this.body,this)},t.prototype.compileNode=function(e){var r,a,c,l,h,u,d,f,m,g,v,y,k,w,C,E,F,N,L,S,D,R,A,O,$,j,M,B,V,P,U,G,H;if(this.bound&&(null!=(A=e.scope.method)?A.bound:void 0)&&(this.context=e.scope.method.context),this.bound&&!this.context)return this.context="_this",H=new t([new _(new x(this.context))],new s([this])),a=new o(H,[new x("this")]),a.updateLocationDataIfMissing(this.locationData),a.compileNode(e);for(e.scope=tt(e,"classScope")||this.makeScope(e.scope),e.scope.shared=tt(e,"sharedScope"),e.indent+=q,delete e.bare,delete e.isExistentialEquals,L=[],l=[],O=this.params,u=0,m=O.length;m>u;u++)N=O[u],N instanceof p||e.scope.parameter(N.asReference(e));for($=this.params,d=0,g=$.length;g>d;d++)if(N=$[d],N.splat||N instanceof p){for(j=this.params,f=0,v=j.length;v>f;f++)F=j[f],F instanceof p||!F.name.value||e.scope.add(F.name.value,"var",!0);V=new i(new z(new n(function(){var t,n,i,r;for(i=this.params,r=[],n=0,t=i.length;t>n;n++)F=i[n],r.push(F.asReference(e));return r}.call(this))),new z(new x("arguments")));break}for(M=this.params,E=0,y=M.length;y>E;E++)N=M[E],N.isComplex()?(U=R=N.asReference(e),N.value&&(U=new I("?",R,N.value)),l.push(new i(new z(N.name),U,"=",{param:!0}))):(R=N,N.value&&(C=new x(R.name.value+" == null"),U=new i(new z(N.name),N.value,"="),l.push(new b(C,U)))),V||L.push(R);for(G=this.body.isEmpty(),V&&l.unshift(V),l.length&&(B=this.body.expressions).unshift.apply(B,l),h=S=0,k=L.length;k>S;h=++S)F=L[h],L[h]=F.compileToFragments(e),e.scope.parameter(st(L[h]));for(P=[],this.eachParamName(function(e,t){return Tt.call(P,e)>=0&&t.error("multiple parameters named "+e),P.push(e)}),G||this.noReturn||this.body.makeReturn(),c="function",this.isGenerator&&(c+="*"),this.ctor&&(c+=" "+this.name),c+="(",r=[this.makeCode(c)],h=D=0,w=L.length;w>D;h=++D)F=L[h],h&&r.push(this.makeCode(", ")),r.push.apply(r,F);return r.push(this.makeCode(") {")),this.body.isEmpty()||(r=r.concat(this.makeCode("\n"),this.body.compileWithDeclarations(e),this.makeCode("\n"+this.tab))),r.push(this.makeCode("}")),this.ctor?[this.makeCode(this.tab)].concat(Ct.call(r)):this.front||e.level>=T?this.wrapInBraces(r):r},t.prototype.eachParamName=function(e){var t,n,i,r,s;for(r=this.params,s=[],t=0,n=r.length;n>t;t++)i=r[t],s.push(i.eachName(e));return s},t.prototype.traverseChildren=function(e,n){return e?t.__super__.traverseChildren.call(this,e,n):void 0},t}(r),e.Param=_=function(e){function t(e,t,n){var i,r;this.name=e,this.value=t,this.splat=n,r=i=this.name.unwrapAll().value,Tt.call(V,r)>=0&&this.name.error('parameter name "'+i+'" is not allowed')}return kt(t,e),t.prototype.children=["name","value"],t.prototype.compileToFragments=function(e){return this.name.compileToFragments(e,E)},t.prototype.asReference=function(e){var t,n;return this.reference?this.reference:(n=this.name,n["this"]?(t=n.properties[0].name.value,t.reserved&&(t="_"+t),n=new x(e.scope.freeVariable(t))):n.isComplex()&&(n=new x(e.scope.freeVariable("arg"))),n=new z(n),this.splat&&(n=new G(n)),n.updateLocationDataIfMissing(this.locationData),this.reference=n)},t.prototype.isComplex=function(){return this.name.isComplex()},t.prototype.eachName=function(e,t){var n,r,s,o,a,c;if(null==t&&(t=this.name),n=function(t){return e("@"+t.properties[0].name.value,t)},t instanceof x)return e(t.value,t);if(t instanceof z)return n(t);for(c=t.objects,r=0,s=c.length;s>r;r++)a=c[r],a instanceof i?this.eachName(e,a.value.unwrap()):a instanceof G?(o=a.name.unwrap(),e(o.value,o)):a instanceof z?a.isArray()||a.isObject()?this.eachName(e,a.base):a["this"]?n(a):e(a.base.value,a.base):a instanceof p||a.error("illegal parameter "+a.compile())},t}(r),e.Splat=G=function(e){function t(e){this.name=e.compile?e:new x(e)}return kt(t,e),t.prototype.children=["name"],t.prototype.isAssignable=Q,t.prototype.assigns=function(e){return this.name.assigns(e)},t.prototype.compileToFragments=function(e){return this.name.compileToFragments(e)},t.prototype.unwrap=function(){return this.name},t.compileSplattedArray=function(e,n,i){var r,s,o,a,c,l,h,u,p,d,f;for(h=-1;(f=n[++h])&&!(f instanceof t););if(h>=n.length)return[];if(1===n.length)return f=n[0],c=f.compileToFragments(e,E),i?c:[].concat(f.makeCode(bt("slice",e)+".call("),c,f.makeCode(")"));for(r=n.slice(h),l=u=0,d=r.length;d>u;l=++u)f=r[l],o=f.compileToFragments(e,E),r[l]=f instanceof t?[].concat(f.makeCode(bt("slice",e)+".call("),o,f.makeCode(")")):[].concat(f.makeCode("["),o,f.makeCode("]"));return 0===h?(f=n[0],a=f.joinFragmentArrays(r.slice(1),", "),r[0].concat(f.makeCode(".concat("),a,f.makeCode(")"))):(s=function(){var t,i,r,s;for(r=n.slice(0,h),s=[],t=0,i=r.length;i>t;t++)f=r[t],s.push(f.compileToFragments(e,E));return s}(),s=n[0].joinFragmentArrays(s,", "),a=n[h].joinFragmentArrays(r,", "),p=n[n.length-1],[].concat(n[0].makeCode("["),s,n[h].makeCode("].concat("),a,p.makeCode(")")))},t}(r),e.Expansion=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return kt(t,e),t.prototype.isComplex=D,t.prototype.compileNode=function(){return this.error("Expansion must be used inside a destructuring assignment or parameter list")},t.prototype.asReference=function(){return this},t.prototype.eachName=function(){},t}(r),e.While=J=function(e){function t(e,t){this.condition=(null!=t?t.invert:void 0)?e.invert():e,this.guard=null!=t?t.guard:void 0}return kt(t,e),t.prototype.children=["condition","guard","body"],t.prototype.isStatement=Q,t.prototype.makeReturn=function(e){return e?t.__super__.makeReturn.apply(this,arguments):(this.returns=!this.jumps({loop:!0}),this)},t.prototype.addBody=function(e){return this.body=e,this},t.prototype.jumps=function(){var e,t,n,i,r;if(e=this.body.expressions,!e.length)return!1;for(t=0,i=e.length;i>t;t++)if(r=e[t],n=r.jumps({loop:!0}))return n;return!1},t.prototype.compileNode=function(e){var t,n,i,r;return e.indent+=q,r="",n=this.body,n.isEmpty()?n=this.makeCode(""):(this.returns&&(n.makeReturn(i=e.scope.freeVariable("results")),r=""+this.tab+i+" = [];\n"),this.guard&&(n.expressions.length>1?n.expressions.unshift(new b(new O(this.guard).invert(),new x("continue"))):this.guard&&(n=s.wrap([new b(this.guard,n)]))),n=[].concat(this.makeCode("\n"),n.compileToFragments(e,L),this.makeCode("\n"+this.tab))),t=[].concat(this.makeCode(r+this.tab+"while ("),this.condition.compileToFragments(e,N),this.makeCode(") {"),n,this.makeCode("}")),this.returns&&t.push(this.makeCode("\n"+this.tab+"return "+i+";")),t},t}(r),e.Op=I=function(e){function n(e,t,n,i){if("in"===e)return new k(t,n);if("do"===e)return this.generateDo(t);if("new"===e){if(t instanceof o&&!t["do"]&&!t.isNew)return t.newInstance();(t instanceof c&&t.bound||t["do"])&&(t=new O(t))}return this.operator=r[e]||e,this.first=t,this.second=n,this.flip=!!i,this}var r,s;return kt(n,e),r={"==":"===","!=":"!==",of:"in",yieldfrom:"yield*"},s={"!==":"===","===":"!=="},n.prototype.children=["first","second"],n.prototype.isSimpleNumber=D,n.prototype.isYield=function(){var e;return"yield"===(e=this.operator)||"yield*"===e},n.prototype.isYieldReturn=function(){return this.isYield()&&this.first instanceof M},n.prototype.isUnary=function(){return!this.second},n.prototype.isComplex=function(){var e;return!(this.isUnary()&&("+"===(e=this.operator)||"-"===e)&&this.first instanceof z&&this.first.isSimpleNumber())},n.prototype.isChainable=function(){var e;return"<"===(e=this.operator)||">"===e||">="===e||"<="===e||"==="===e||"!=="===e},n.prototype.invert=function(){var e,t,i,r,o;if(this.isChainable()&&this.first.isChainable()){for(e=!0,t=this;t&&t.operator;)e&&(e=t.operator in s),t=t.first;if(!e)return new O(this).invert();for(t=this;t&&t.operator;)t.invert=!t.invert,t.operator=s[t.operator],t=t.first;return this}return(r=s[this.operator])?(this.operator=r,this.first.unwrap()instanceof n&&this.first.invert(),this):this.second?new O(this).invert():"!"===this.operator&&(i=this.first.unwrap())instanceof n&&("!"===(o=i.operator)||"in"===o||"instanceof"===o)?i:new n("!",this)},n.prototype.unfoldSoak=function(e){var t;return("++"===(t=this.operator)||"--"===t||"delete"===t)&&yt(e,this,"first")},n.prototype.generateDo=function(e){var t,n,r,s,a,l,h,u;for(l=[],n=e instanceof i&&(h=e.value.unwrap())instanceof c?h:e,u=n.params||[],r=0,s=u.length;s>r;r++)a=u[r],a.value?(l.push(a.value),delete a.value):l.push(a);return t=new o(e,l),t["do"]=!0,t},n.prototype.compileNode=function(e){var t,n,i,r,s,o;if(n=this.isChainable()&&this.first.isChainable(),n||(this.first.front=this.front),"delete"===this.operator&&e.scope.check(this.first.unwrapAll().value)&&this.error("delete operand may not be argument or var"),("--"===(r=this.operator)||"++"===r)&&(s=this.first.unwrapAll().value,Tt.call(V,s)>=0)&&this.error('cannot increment/decrement "'+this.first.unwrapAll().value+'"'),this.isYield())return this.compileYield(e);if(this.isUnary())return this.compileUnary(e);if(n)return this.compileChain(e);switch(this.operator){case"?":return this.compileExistence(e);case"**":return this.compilePower(e);case"//":return this.compileFloorDivision(e);case"%%":return this.compileModulo(e);default:return i=this.first.compileToFragments(e,F),o=this.second.compileToFragments(e,F),t=[].concat(i,this.makeCode(" "+this.operator+" "),o),F>=e.level?t:this.wrapInBraces(t)}},n.prototype.compileChain=function(e){var t,n,i,r;return i=this.first.second.cache(e),this.first.second=i[0],r=i[1],n=this.first.compileToFragments(e,F),t=n.concat(this.makeCode(" "+(this.invert?"&&":"||")+" "),r.compileToFragments(e),this.makeCode(" "+this.operator+" "),this.second.compileToFragments(e,F)),this.wrapInBraces(t)},n.prototype.compileExistence=function(e){var t,n;return this.first.isComplex()?(n=new x(e.scope.freeVariable("ref")),t=new O(new i(n,this.first))):(t=this.first,n=t),new b(new u(t),n,{type:"if"}).addElse(this.second).compileToFragments(e)},n.prototype.compileUnary=function(e){var t,i,r;return i=[],t=this.operator,i.push([this.makeCode(t)]),"!"===t&&this.first instanceof u?(this.first.negated=!this.first.negated,this.first.compileToFragments(e)):e.level>=T?new O(this).compileToFragments(e):(r="+"===t||"-"===t,("new"===t||"typeof"===t||"delete"===t||r&&this.first instanceof n&&this.first.operator===t)&&i.push([this.makeCode(" ")]),(r&&this.first instanceof n||"new"===t&&this.first.isStatement(e))&&(this.first=new O(this.first)),i.push(this.first.compileToFragments(e,F)),this.flip&&i.reverse(),this.joinFragmentArrays(i,""))},n.prototype.compileYield=function(e){var t,n;return n=[],t=this.operator,null==e.scope.parent&&this.error("yield statements must occur within a function generator."),Tt.call(Object.keys(this.first),"expression")>=0&&!(this.first instanceof W)?this.isYieldReturn()?n.push(this.first.compileToFragments(e,L)):null!=this.first.expression&&n.push(this.first.expression.compileToFragments(e,F)):(n.push([this.makeCode("("+t+" ")]),n.push(this.first.compileToFragments(e,F)),n.push([this.makeCode(")")])),this.joinFragmentArrays(n,"")},n.prototype.compilePower=function(e){var n;return n=new z(new x("Math"),[new t(new x("pow"))]),new o(n,[this.first,this.second]).compileToFragments(e)},n.prototype.compileFloorDivision=function(e){var i,r;return r=new z(new x("Math"),[new t(new x("floor"))]),i=new n("/",this.first,this.second),new o(r,[i]).compileToFragments(e)},n.prototype.compileModulo=function(e){var t;return t=new z(new x(bt("modulo",e))),new o(t,[this.first,this.second]).compileToFragments(e)},n.prototype.toString=function(e){return n.__super__.toString.call(this,e,this.constructor.name+" "+this.operator)},n}(r),e.In=k=function(e){function t(e,t){this.object=e,this.array=t}return kt(t,e),t.prototype.children=["object","array"],t.prototype.invert=S,t.prototype.compileNode=function(e){var t,n,i,r,s;if(this.array instanceof z&&this.array.isArray()&&this.array.base.objects.length){for(s=this.array.base.objects,n=0,i=s.length;i>n;n++)if(r=s[n],r instanceof G){t=!0;break}if(!t)return this.compileOrTest(e)}return this.compileLoopTest(e)},t.prototype.compileOrTest=function(e){var t,n,i,r,s,o,a,c,l,h,u,p;for(c=this.object.cache(e,F),u=c[0],a=c[1],l=this.negated?[" !== "," && "]:[" === "," || "],t=l[0],n=l[1],p=[],h=this.array.base.objects,i=s=0,o=h.length;o>s;i=++s)r=h[i],i&&p.push(this.makeCode(n)),p=p.concat(i?a:u,this.makeCode(t),r.compileToFragments(e,T));return F>e.level?p:this.wrapInBraces(p)},t.prototype.compileLoopTest=function(e){var t,n,i,r;return i=this.object.cache(e,E),r=i[0],n=i[1],t=[].concat(this.makeCode(bt("indexOf",e)+".call("),this.array.compileToFragments(e,E),this.makeCode(", "),n,this.makeCode(") "+(this.negated?"< 0":">= 0"))),st(r)===st(n)?t:(t=r.concat(this.makeCode(", "),t),E>e.level?t:this.wrapInBraces(t))},t.prototype.toString=function(e){return t.__super__.toString.call(this,e,this.constructor.name+(this.negated?"!":""))},t}(r),e.Try=Y=function(e){function t(e,t,n,i){this.attempt=e,this.errorVariable=t,this.recovery=n,this.ensure=i}return kt(t,e),t.prototype.children=["attempt","recovery","ensure"],t.prototype.isStatement=Q,t.prototype.jumps=function(e){var t;return this.attempt.jumps(e)||(null!=(t=this.recovery)?t.jumps(e):void 0)},t.prototype.makeReturn=function(e){return this.attempt&&(this.attempt=this.attempt.makeReturn(e)),this.recovery&&(this.recovery=this.recovery.makeReturn(e)),this},t.prototype.compileNode=function(e){var t,n,r,s;return e.indent+=q,s=this.attempt.compileToFragments(e,L),t=this.recovery?(r=new x("_error"),this.errorVariable?this.recovery.unshift(new i(this.errorVariable,r)):void 0,[].concat(this.makeCode(" catch ("),r.compileToFragments(e),this.makeCode(") {\n"),this.recovery.compileToFragments(e,L),this.makeCode("\n"+this.tab+"}"))):this.ensure||this.recovery?[]:[this.makeCode(" catch (_error) {}")],n=this.ensure?[].concat(this.makeCode(" finally {\n"),this.ensure.compileToFragments(e,L),this.makeCode("\n"+this.tab+"}")):[],[].concat(this.makeCode(this.tab+"try {\n"),s,this.makeCode("\n"+this.tab+"}"),t,n)},t}(r),e.Throw=W=function(e){function t(e){this.expression=e}return kt(t,e),t.prototype.children=["expression"],t.prototype.isStatement=Q,t.prototype.jumps=D,t.prototype.makeReturn=X,t.prototype.compileNode=function(e){return[].concat(this.makeCode(this.tab+"throw "),this.expression.compileToFragments(e),this.makeCode(";"))},t}(r),e.Existence=u=function(e){function t(e){this.expression=e}return kt(t,e),t.prototype.children=["expression"],t.prototype.invert=S,t.prototype.compileNode=function(e){var t,n,i,r;return this.expression.front=this.front,i=this.expression.compile(e,F),g.test(i)&&!e.scope.check(i)?(r=this.negated?["===","||"]:["!==","&&"],t=r[0],n=r[1],i="typeof "+i+" "+t+' "undefined" '+n+" "+i+" "+t+" null"):i=i+" "+(this.negated?"==":"!=")+" null",[this.makeCode(C>=e.level?i:"("+i+")")]},t}(r),e.Parens=O=function(e){function t(e){this.body=e}return kt(t,e),t.prototype.children=["body"],t.prototype.unwrap=function(){return this.body},t.prototype.isComplex=function(){return this.body.isComplex()},t.prototype.compileNode=function(e){var t,n,i;return n=this.body.unwrap(),n instanceof z&&n.isAtomic()?(n.front=this.front,n.compileToFragments(e)):(i=n.compileToFragments(e,N),t=F>e.level&&(n instanceof I||n instanceof o||n instanceof f&&n.returns),t?i:this.wrapInBraces(i))},t}(r),e.For=f=function(e){function t(e,t){var n;this.source=t.source,this.guard=t.guard,this.step=t.step,this.name=t.name,this.index=t.index,this.body=s.wrap([e]),this.own=!!t.own,this.object=!!t.object,this.object&&(n=[this.index,this.name],this.name=n[0],this.index=n[1]),this.index instanceof z&&this.index.error("index cannot be a pattern matching expression"),this.range=this.source instanceof z&&this.source.base instanceof j&&!this.source.properties.length,this.pattern=this.name instanceof z,this.range&&this.index&&this.index.error("indexes do not apply to range loops"),this.range&&this.pattern&&this.name.error("cannot pattern match over range loops"),this.own&&!this.object&&this.name.error("cannot use own with for-in"),this.returns=!1}return kt(t,e),t.prototype.children=["body","source","guard","step"],t.prototype.compileNode=function(e){var t,n,r,o,a,c,l,h,u,p,d,f,m,v,y,k,w,T,C,F,N,S,D,A,I,_,$,j,B,V,P,U,G,H;return t=s.wrap([this.body]),D=t.expressions,T=D[D.length-1],(null!=T?T.jumps():void 0)instanceof M&&(this.returns=!1),B=this.range?this.source.base:this.source,j=e.scope,this.pattern||(F=this.name&&this.name.compile(e,E)),v=this.index&&this.index.compile(e,E),F&&!this.pattern&&j.find(F),v&&j.find(v),this.returns&&($=j.freeVariable("results")),y=this.object&&v||j.freeVariable("i",{single:!0}),k=this.range&&F||v||y,w=k!==y?k+" = ":"",this.step&&!this.range&&(A=this.cacheToCodeFragments(this.step.cache(e,E,ot)),V=A[0],U=A[1],P=U.match(R)),this.pattern&&(F=y),H="",d="",l="",f=this.tab+q,this.range?p=B.compileToFragments(ht(e,{index:y,name:F,step:this.step,isComplex:ot})):(G=this.source.compile(e,E),!F&&!this.own||g.test(G)||(l+=""+this.tab+(S=j.freeVariable("ref"))+" = "+G+";\n",G=S),F&&!this.pattern&&(N=F+" = "+G+"["+k+"]"),this.object||(V!==U&&(l+=""+this.tab+V+";\n"),this.step&&P&&(u=0>pt(P[0]))||(C=j.freeVariable("len")),a=""+w+y+" = 0, "+C+" = "+G+".length",c=""+w+y+" = "+G+".length - 1",r=y+" < "+C,o=y+" >= 0",this.step?(P?u&&(r=o,a=c):(r=U+" > 0 ? "+r+" : "+o,a="("+U+" > 0 ? ("+a+") : "+c+")"),m=y+" += "+U):m=""+(k!==y?"++"+y:y+"++"),p=[this.makeCode(a+"; "+r+"; "+w+m)])),this.returns&&(I=""+this.tab+$+" = [];\n",_="\n"+this.tab+"return "+$+";",t.makeReturn($)),this.guard&&(t.expressions.length>1?t.expressions.unshift(new b(new O(this.guard).invert(),new x("continue"))):this.guard&&(t=s.wrap([new b(this.guard,t)]))),this.pattern&&t.expressions.unshift(new i(this.name,new x(G+"["+k+"]"))),h=[].concat(this.makeCode(l),this.pluckDirectCall(e,t)),N&&(H="\n"+f+N+";"),this.object&&(p=[this.makeCode(k+" in "+G)],this.own&&(d="\n"+f+"if (!"+bt("hasProp",e)+".call("+G+", "+k+")) continue;")),n=t.compileToFragments(ht(e,{indent:f}),L),n&&n.length>0&&(n=[].concat(this.makeCode("\n"),n,this.makeCode("\n"))),[].concat(h,this.makeCode(""+(I||"")+this.tab+"for ("),p,this.makeCode(") {"+d+H),n,this.makeCode(this.tab+"}"+(_||"")))},t.prototype.pluckDirectCall=function(e,t){var n,r,s,a,l,h,u,p,d,f,m,g,v,y,b,k;for(r=[],d=t.expressions,l=h=0,u=d.length;u>h;l=++h)s=d[l],s=s.unwrapAll(),s instanceof o&&(k=null!=(f=s.variable)?f.unwrapAll():void 0,(k instanceof c||k instanceof z&&(null!=(m=k.base)?m.unwrapAll():void 0)instanceof c&&1===k.properties.length&&("call"===(g=null!=(v=k.properties[0].name)?v.value:void 0)||"apply"===g))&&(a=(null!=(y=k.base)?y.unwrapAll():void 0)||k,p=new x(e.scope.freeVariable("fn")),n=new z(p),k.base&&(b=[n,k],k.base=b[0],n=b[1]),t.expressions[l]=new o(n,s.args),r=r.concat(this.makeCode(this.tab),new i(p,a).compileToFragments(e,L),this.makeCode(";\n"))));return r},t}(J),e.Switch=H=function(e){function t(e,t,n){this.subject=e,this.cases=t,this.otherwise=n}return kt(t,e),t.prototype.children=["subject","cases","otherwise"],t.prototype.isStatement=Q,t.prototype.jumps=function(e){var t,n,i,r,s,o,a,c;for(null==e&&(e={block:!0}),o=this.cases,i=0,s=o.length;s>i;i++)if(a=o[i],n=a[0],t=a[1],r=t.jumps(e))return r;return null!=(c=this.otherwise)?c.jumps(e):void 0},t.prototype.makeReturn=function(e){var t,n,i,r,o;for(r=this.cases,t=0,n=r.length;n>t;t++)i=r[t],i[1].makeReturn(e);return e&&(this.otherwise||(this.otherwise=new s([new x("void 0")]))),null!=(o=this.otherwise)&&o.makeReturn(e),this},t.prototype.compileNode=function(e){var t,n,i,r,s,o,a,c,l,h,u,p,d,f,m,g;for(c=e.indent+q,l=e.indent=c+q,o=[].concat(this.makeCode(this.tab+"switch ("),this.subject?this.subject.compileToFragments(e,N):this.makeCode("false"),this.makeCode(") {\n")),f=this.cases,a=h=0,p=f.length;p>h;a=++h){for(m=f[a],r=m[0],t=m[1],g=rt([r]),u=0,d=g.length;d>u;u++)i=g[u],this.subject||(i=i.invert()),o=o.concat(this.makeCode(c+"case "),i.compileToFragments(e,N),this.makeCode(":\n"));if((n=t.compileToFragments(e,L)).length>0&&(o=o.concat(n,this.makeCode("\n"))),a===this.cases.length-1&&!this.otherwise)break;s=this.lastNonComment(t.expressions),s instanceof M||s instanceof x&&s.jumps()&&"debugger"!==s.value||o.push(i.makeCode(l+"break;\n"))}return this.otherwise&&this.otherwise.expressions.length&&o.push.apply(o,[this.makeCode(c+"default:\n")].concat(Ct.call(this.otherwise.compileToFragments(e,L)),[this.makeCode("\n")])),o.push(this.makeCode(this.tab+"}")),o},t}(r),e.If=b=function(e){function t(e,t,n){this.body=t,null==n&&(n={}),this.condition="unless"===n.type?e.invert():e,this.elseBody=null,this.isChain=!1,this.soak=n.soak}return kt(t,e),t.prototype.children=["condition","body","elseBody"],t.prototype.bodyNode=function(){var e;return null!=(e=this.body)?e.unwrap():void 0},t.prototype.elseBodyNode=function(){var e;return null!=(e=this.elseBody)?e.unwrap():void 0},t.prototype.addElse=function(e){return this.isChain?this.elseBodyNode().addElse(e):(this.isChain=e instanceof t,this.elseBody=this.ensureBlock(e),this.elseBody.updateLocationDataIfMissing(e.locationData)),this},t.prototype.isStatement=function(e){var t;return(null!=e?e.level:void 0)===L||this.bodyNode().isStatement(e)||(null!=(t=this.elseBodyNode())?t.isStatement(e):void 0)},t.prototype.jumps=function(e){var t;return this.body.jumps(e)||(null!=(t=this.elseBody)?t.jumps(e):void 0)},t.prototype.compileNode=function(e){return this.isStatement(e)?this.compileStatement(e):this.compileExpression(e)},t.prototype.makeReturn=function(e){return e&&(this.elseBody||(this.elseBody=new s([new x("void 0")]))),this.body&&(this.body=new s([this.body.makeReturn(e)])),this.elseBody&&(this.elseBody=new s([this.elseBody.makeReturn(e)])),this},t.prototype.ensureBlock=function(e){return e instanceof s?e:new s([e])},t.prototype.compileStatement=function(e){var n,i,r,s,o,a,c;return r=tt(e,"chainChild"),(o=tt(e,"isExistentialEquals"))?new t(this.condition.invert(),this.elseBodyNode(),{type:"if"}).compileToFragments(e):(c=e.indent+q,s=this.condition.compileToFragments(e,N),i=this.ensureBlock(this.body).compileToFragments(ht(e,{indent:c})),a=[].concat(this.makeCode("if ("),s,this.makeCode(") {\n"),i,this.makeCode("\n"+this.tab+"}")),r||a.unshift(this.makeCode(this.tab)),this.elseBody?(n=a.concat(this.makeCode(" else ")),this.isChain?(e.chainChild=!0,n=n.concat(this.elseBody.unwrap().compileToFragments(e,L))):n=n.concat(this.makeCode("{\n"),this.elseBody.compileToFragments(ht(e,{indent:c}),L),this.makeCode("\n"+this.tab+"}")),n):a)},t.prototype.compileExpression=function(e){var t,n,i,r;return i=this.condition.compileToFragments(e,C),n=this.bodyNode().compileToFragments(e,E),t=this.elseBodyNode()?this.elseBodyNode().compileToFragments(e,E):[this.makeCode("void 0")],r=i.concat(this.makeCode(" ? "),n,this.makeCode(" : "),t),e.level>=C?this.wrapInBraces(r):r},t.prototype.unfoldSoak=function(){return this.soak&&this},t}(r),K={extend:function(e){return"function(child, parent) { for (var key in parent) { if ("+bt("hasProp",e)+".call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; }"},bind:function(){return"function(fn, me){ return function(){ return fn.apply(me, arguments); }; }"},indexOf:function(){return"[].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }"},modulo:function(){return"function(a, b) { return (+a % (b = +b) + b) % b; }"},hasProp:function(){return"{}.hasOwnProperty"},slice:function(){return"[].slice"}},L=1,N=2,E=3,C=4,F=5,T=6,q="  ",g=/^(?!\d)[$\w\x7f-\uffff]+$/,B=/^[+-]?\d+$/,m=/^[+-]?0x[\da-f]+/i,R=/^[+-]?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)$/i,y=/^['"]/,v=/^\//,bt=function(e,t){var n,i;return i=t.scope.root,e in i.utilities?i.utilities[e]:(n=i.freeVariable(e),i.assign(n,K[e](t)),i.utilities[e]=n)},ut=function(e,t){return e=e.replace(/\n/g,"$&"+t),e.replace(/\s+$/,"")},pt=function(e){return null==e?0:e.match(m)?parseInt(e,16):parseFloat(e)},at=function(e){return e instanceof x&&"arguments"===e.value&&!e.asKey},ct=function(e){return e instanceof x&&"this"===e.value&&!e.asKey||e instanceof c&&e.bound||e instanceof o&&e.isSuper},ot=function(e){return e.isComplex()||("function"==typeof e.isAssignable?e.isAssignable():void 0)},yt=function(e,t,n){var i;if(i=t[n].unfoldSoak(e))return t[n]=i.body,i.body=new z(t),i}}.call(this),t.exports}(),require["./sourcemap"]=function(){var e={},t={exports:e};return function(){var e,n;e=function(){function e(e){this.line=e,this.columns=[]}return e.prototype.add=function(e,t,n){var i,r;return r=t[0],i=t[1],null==n&&(n={}),this.columns[e]&&n.noReplace?void 0:this.columns[e]={line:this.line,column:e,sourceLine:r,sourceColumn:i}},e.prototype.sourceLocation=function(e){for(var t;!((t=this.columns[e])||0>=e);)e--;return t&&[t.sourceLine,t.sourceColumn]},e}(),n=function(){function t(){this.lines=[]}var n,i,r,s;return t.prototype.add=function(t,n,i){var r,s,o,a;return null==i&&(i={}),o=n[0],s=n[1],a=(r=this.lines)[o]||(r[o]=new e(o)),a.add(s,t,i)},t.prototype.sourceLocation=function(e){var t,n,i;for(n=e[0],t=e[1];!((i=this.lines[n])||0>=n);)n--;return i&&i.sourceLocation(t)},t.prototype.generate=function(e,t){var n,i,r,s,o,a,c,l,h,u,p,d,f,m,g,v;for(null==e&&(e={}),null==t&&(t=null),v=0,s=0,a=0,o=0,d=!1,n="",f=this.lines,u=i=0,c=f.length;c>i;u=++i)if(h=f[u])for(m=h.columns,r=0,l=m.length;l>r;r++)if(p=m[r]){for(;p.line>v;)s=0,d=!1,n+=";",v++;d&&(n+=",",d=!1),n+=this.encodeVlq(p.column-s),s=p.column,n+=this.encodeVlq(0),n+=this.encodeVlq(p.sourceLine-a),a=p.sourceLine,n+=this.encodeVlq(p.sourceColumn-o),o=p.sourceColumn,d=!0}return g={version:3,file:e.generatedFile||"",sourceRoot:e.sourceRoot||"",sources:e.sourceFiles||[""],names:[],mappings:n},e.inline&&(g.sourcesContent=[t]),JSON.stringify(g,null,2)},r=5,i=1<<r,s=i-1,t.prototype.encodeVlq=function(e){var t,n,o,a;for(t="",o=0>e?1:0,a=(Math.abs(e)<<1)+o;a||!t;)n=a&s,a>>=r,a&&(n|=i),t+=this.encodeBase64(n);return t},n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.prototype.encodeBase64=function(e){return n[e]||function(){throw Error("Cannot Base64 encode value: "+e)}()},t}(),t.exports=n}.call(this),t.exports}(),require["./coffee-script"]=function(){var e={},t={exports:e};return function(){var t,n,i,r,s,o,a,c,l,h,u,p,d,f,m,g,v,y,b={}.hasOwnProperty,k=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};if(a=require("fs"),v=require("vm"),f=require("path"),t=require("./lexer").Lexer,d=require("./parser").parser,l=require("./helpers"),n=require("./sourcemap"),e.VERSION="1.9.2",e.FILE_EXTENSIONS=[".coffee",".litcoffee",".coffee.md"],e.helpers=l,y=function(e){return function(t,n){var i;null==n&&(n={});try{return e.call(this,t,n)
}catch(r){throw i=r,l.updateSyntaxError(i,t,n.filename)}}},e.compile=r=y(function(e,t){var i,r,s,o,a,c,h,u,f,m,g,v,y,b,k;for(v=l.merge,o=l.extend,t=o({},t),t.sourceMap&&(g=new n),k=p.tokenize(e,t),t.referencedVars=function(){var e,t,n;for(n=[],e=0,t=k.length;t>e;e++)b=k[e],b.variable&&n.push(b[1]);return n}(),c=d.parse(k).compileToFragments(t),s=0,t.header&&(s+=1),t.shiftLine&&(s+=1),r=0,f="",u=0,m=c.length;m>u;u++)a=c[u],t.sourceMap&&(a.locationData&&g.add([a.locationData.first_line,a.locationData.first_column],[s,r],{noReplace:!0}),y=l.count(a.code,"\n"),s+=y,y?r=a.code.length-(a.code.lastIndexOf("\n")+1):r+=a.code.length),f+=a.code;return t.header&&(h="Generated by CoffeeScript "+this.VERSION,f="// "+h+"\n"+f),t.sourceMap?(i={js:f},i.sourceMap=g,i.v3SourceMap=g.generate(t,e),i):f}),e.tokens=y(function(e,t){return p.tokenize(e,t)}),e.nodes=y(function(e,t){return"string"==typeof e?d.parse(p.tokenize(e,t)):d.parse(e)}),e.run=function(e,t){var n,i,s,o;return null==t&&(t={}),s=require.main,s.filename=process.argv[1]=t.filename?a.realpathSync(t.filename):".",s.moduleCache&&(s.moduleCache={}),i=t.filename?f.dirname(a.realpathSync(t.filename)):a.realpathSync("."),s.paths=require("module")._nodeModulePaths(i),(!l.isCoffee(s.filename)||require.extensions)&&(n=r(e,t),e=null!=(o=n.js)?o:n),s._compile(e,s.filename)},e.eval=function(e,t){var n,i,s,o,a,c,l,h,u,p,d,m,g,y,k,w,T;if(null==t&&(t={}),e=e.trim()){if(o=null!=(m=v.Script.createContext)?m:v.createContext,c=null!=(g=v.isContext)?g:function(){return t.sandbox instanceof o().constructor},o){if(null!=t.sandbox){if(c(t.sandbox))w=t.sandbox;else{w=o(),y=t.sandbox;for(h in y)b.call(y,h)&&(T=y[h],w[h]=T)}w.global=w.root=w.GLOBAL=w}else w=global;if(w.__filename=t.filename||"eval",w.__dirname=f.dirname(w.__filename),w===global&&!w.module&&!w.require){for(n=require("module"),w.module=i=new n(t.modulename||"eval"),w.require=s=function(e){return n._load(e,i,!0)},i.filename=w.__filename,k=Object.getOwnPropertyNames(require),a=0,u=k.length;u>a;a++)d=k[a],"paths"!==d&&(s[d]=require[d]);s.paths=i.paths=n._nodeModulePaths(process.cwd()),s.resolve=function(e){return n._resolveFilename(e,i)}}}p={};for(h in t)b.call(t,h)&&(T=t[h],p[h]=T);return p.bare=!0,l=r(e,p),w===global?v.runInThisContext(l):v.runInContext(l,w)}},e.register=function(){return require("./register")},require.extensions)for(m=this.FILE_EXTENSIONS,h=0,u=m.length;u>h;h++)s=m[h],null==(i=require.extensions)[s]&&(i[s]=function(){throw Error("Use CoffeeScript.register() or require the coffee-script/register module to require "+s+" files.")});e._compileFile=function(e,t){var n,i,s,o;null==t&&(t=!1),s=a.readFileSync(e,"utf8"),o=65279===s.charCodeAt(0)?s.substring(1):s;try{n=r(o,{filename:e,sourceMap:t,literate:l.isLiterate(e)})}catch(c){throw i=c,l.updateSyntaxError(i,o,e)}return n},p=new t,d.lexer={lex:function(){var e,t;return t=d.tokens[this.pos++],t?(e=t[0],this.yytext=t[1],this.yylloc=t[2],d.errorToken=t.origin||t,this.yylineno=this.yylloc.first_line):e="",e},setInput:function(e){return d.tokens=e,this.pos=0},upcomingInput:function(){return""}},d.yy=require("./nodes"),d.yy.parseError=function(e,t){var n,i,r,s,o,a;return o=t.token,s=d.errorToken,a=d.tokens,i=s[0],r=s[1],n=s[2],r=function(){switch(!1){case s!==a[a.length-1]:return"end of input";case"INDENT"!==i&&"OUTDENT"!==i:return"indentation";case"IDENTIFIER"!==i&&"NUMBER"!==i&&"STRING"!==i&&"STRING_START"!==i&&"REGEX"!==i&&"REGEX_START"!==i:return i.replace(/_START$/,"").toLowerCase();default:return l.nameWhitespaceCharacter(r)}}(),l.throwSyntaxError("unexpected "+r,n)},o=function(e,t){var n,i,r,s,o,a,c,l,h,u,p,d;return s=void 0,r="",e.isNative()?r="native":(e.isEval()?(s=e.getScriptNameOrSourceURL(),s||(r=e.getEvalOrigin()+", ")):s=e.getFileName(),s||(s="<anonymous>"),l=e.getLineNumber(),i=e.getColumnNumber(),u=t(s,l,i),r=u?s+":"+u[0]+":"+u[1]:s+":"+l+":"+i),o=e.getFunctionName(),a=e.isConstructor(),c=!(e.isToplevel()||a),c?(h=e.getMethodName(),d=e.getTypeName(),o?(p=n="",d&&o.indexOf(d)&&(p=d+"."),h&&o.indexOf("."+h)!==o.length-h.length-1&&(n=" [as "+h+"]"),""+p+o+n+" ("+r+")"):d+"."+(h||"<anonymous>")+" ("+r+")"):a?"new "+(o||"<anonymous>")+" ("+r+")":o?o+" ("+r+")":r},g={},c=function(t){var n,i;if(g[t])return g[t];if(i=null!=f?f.extname(t):void 0,!(0>k.call(e.FILE_EXTENSIONS,i)))return n=e._compileFile(t,!0),g[t]=n.sourceMap},Error.prepareStackTrace=function(t,n){var i,r,s;return s=function(e,t,n){var i,r;return r=c(e),r&&(i=r.sourceLocation([t-1,n-1])),i?[i[0]+1,i[1]+1]:null},r=function(){var t,r,a;for(a=[],t=0,r=n.length;r>t&&(i=n[t],i.getFunction()!==e.run);t++)a.push("  at "+o(i,s));return a}(),""+t+"\n"+r.join("\n")+"\n"}}.call(this),t.exports}(),require["./browser"]=function(){var exports={},module={exports:exports};return function(){var CoffeeScript,compile,runScripts,indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};CoffeeScript=require("./coffee-script"),CoffeeScript.require=require,compile=CoffeeScript.compile,CoffeeScript.eval=function(code,options){return null==options&&(options={}),null==options.bare&&(options.bare=!0),eval(compile(code,options))},CoffeeScript.run=function(e,t){return null==t&&(t={}),t.bare=!0,t.shiftLine=!0,Function(compile(e,t))()},"undefined"!=typeof window&&null!==window&&("undefined"!=typeof btoa&&null!==btoa&&"undefined"!=typeof JSON&&null!==JSON&&"undefined"!=typeof unescape&&null!==unescape&&"undefined"!=typeof encodeURIComponent&&null!==encodeURIComponent&&(compile=function(e,t){var n,i,r;return null==t&&(t={}),t.sourceMap=!0,t.inline=!0,i=CoffeeScript.compile(e,t),n=i.js,r=i.v3SourceMap,n+"\n//# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(r)))+"\n//# sourceURL=coffeescript"}),CoffeeScript.load=function(e,t,n,i){var r;return null==n&&(n={}),null==i&&(i=!1),n.sourceFiles=[e],r=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest,r.open("GET",e,!0),"overrideMimeType"in r&&r.overrideMimeType("text/plain"),r.onreadystatechange=function(){var s,o;if(4===r.readyState){if(0!==(o=r.status)&&200!==o)throw Error("Could not load "+e);if(s=[r.responseText,n],i||CoffeeScript.run.apply(CoffeeScript,s),t)return t(s)}},r.send(null)},runScripts=function(){var e,t,n,i,r,s,o,a,c,l,h;for(h=window.document.getElementsByTagName("script"),t=["text/coffeescript","text/literate-coffeescript"],e=function(){var e,n,i,r;for(r=[],e=0,n=h.length;n>e;e++)c=h[e],i=c.type,indexOf.call(t,i)>=0&&r.push(c);return r}(),s=0,n=function(){var t;return t=e[s],t instanceof Array?(CoffeeScript.run.apply(CoffeeScript,t),s++,n()):void 0},i=function(i,r){var s,o;return s={literate:i.type===t[1]},o=i.src||i.getAttribute("data-src"),o?CoffeeScript.load(o,function(t){return e[r]=t,n()},s,!0):(s.sourceFiles=["embedded"],e[r]=[i.innerHTML,s])},r=o=0,a=e.length;a>o;r=++o)l=e[r],i(l,r);return n()},window.addEventListener?window.addEventListener("DOMContentLoaded",runScripts,!1):window.attachEvent("onload",runScripts))}.call(this),module.exports}(),require["./coffee-script"]}();"function"==typeof define&&define.amd?define(function(){return CoffeeScript}):root.CoffeeScript=CoffeeScript})(this);
/*!
 * typeahead.js 0.9.3
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */

(function($) {
    var VERSION = "0.9.3";
    var utils = {
        isMsie: function() {
            var match = /(msie) ([\w.]+)/i.exec(navigator.userAgent);
            return match ? parseInt(match[2], 10) : false;
        },
        isBlankString: function(str) {
            return !str || /^\s*$/.test(str);
        },
        escapeRegExChars: function(str) {
            return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
        },
        isString: function(obj) {
            return typeof obj === "string";
        },
        isNumber: function(obj) {
            return typeof obj === "number";
        },
        isArray: $.isArray,
        isFunction: $.isFunction,
        isObject: $.isPlainObject,
        isUndefined: function(obj) {
            return typeof obj === "undefined";
        },
        bind: $.proxy,
        bindAll: function(obj) {
            var val;
            for (var key in obj) {
                $.isFunction(val = obj[key]) && (obj[key] = $.proxy(val, obj));
            }
        },
        indexOf: function(haystack, needle) {
            for (var i = 0; i < haystack.length; i++) {
                if (haystack[i] === needle) {
                    return i;
                }
            }
            return -1;
        },
        each: $.each,
        map: $.map,
        filter: $.grep,
        every: function(obj, test) {
            var result = true;
            if (!obj) {
                return result;
            }
            $.each(obj, function(key, val) {
                if (!(result = test.call(null, val, key, obj))) {
                    return false;
                }
            });
            return !!result;
        },
        some: function(obj, test) {
            var result = false;
            if (!obj) {
                return result;
            }
            $.each(obj, function(key, val) {
                if (result = test.call(null, val, key, obj)) {
                    return false;
                }
            });
            return !!result;
        },
        mixin: $.extend,
        getUniqueId: function() {
            var counter = 0;
            return function() {
                return counter++;
            };
        }(),
        defer: function(fn) {
            setTimeout(fn, 0);
        },
        debounce: function(func, wait, immediate) {
            var timeout, result;
            return function() {
                var context = this, args = arguments, later, callNow;
                later = function() {
                    timeout = null;
                    if (!immediate) {
                        result = func.apply(context, args);
                    }
                };
                callNow = immediate && !timeout;
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
                if (callNow) {
                    result = func.apply(context, args);
                }
                return result;
            };
        },
        throttle: function(func, wait) {
            var context, args, timeout, result, previous, later;
            previous = 0;
            later = function() {
                previous = new Date();
                timeout = null;
                result = func.apply(context, args);
            };
            return function() {
                var now = new Date(), remaining = wait - (now - previous);
                context = this;
                args = arguments;
                if (remaining <= 0) {
                    clearTimeout(timeout);
                    timeout = null;
                    previous = now;
                    result = func.apply(context, args);
                } else if (!timeout) {
                    timeout = setTimeout(later, remaining);
                }
                return result;
            };
        },
        tokenizeQuery: function(str) {
            return $.trim(str).toLowerCase().split(/[\s]+/);
        },
        tokenizeText: function(str) {
            return $.trim(str).toLowerCase().split(/[\s\-_]+/);
        },
        getProtocol: function() {
            return location.protocol;
        },
        noop: function() {}
    };
    var EventTarget = function() {
        var eventSplitter = /\s+/;
        return {
            on: function(events, callback) {
                var event;
                if (!callback) {
                    return this;
                }
                this._callbacks = this._callbacks || {};
                events = events.split(eventSplitter);
                while (event = events.shift()) {
                    this._callbacks[event] = this._callbacks[event] || [];
                    this._callbacks[event].push(callback);
                }
                return this;
            },
            trigger: function(events, data) {
                var event, callbacks;
                if (!this._callbacks) {
                    return this;
                }
                events = events.split(eventSplitter);
                while (event = events.shift()) {
                    if (callbacks = this._callbacks[event]) {
                        for (var i = 0; i < callbacks.length; i += 1) {
                            callbacks[i].call(this, {
                                type: event,
                                data: data
                            });
                        }
                    }
                }
                return this;
            }
        };
    }();
    var EventBus = function() {
        var namespace = "typeahead:";
        function EventBus(o) {
            if (!o || !o.el) {
                $.error("EventBus initialized without el");
            }
            this.$el = $(o.el);
        }
        utils.mixin(EventBus.prototype, {
            trigger: function(type) {
                var args = [].slice.call(arguments, 1);
                this.$el.trigger(namespace + type, args);
            }
        });
        return EventBus;
    }();
    var PersistentStorage = function() {
        var ls, methods;
        try {
            ls = window.localStorage;
            ls.setItem("~~~", "!");
            ls.removeItem("~~~");
        } catch (err) {
            ls = null;
        }
        function PersistentStorage(namespace) {
            this.prefix = [ "__", namespace, "__" ].join("");
            this.ttlKey = "__ttl__";
            this.keyMatcher = new RegExp("^" + this.prefix);
        }
        if (ls && window.JSON) {
            methods = {
                _prefix: function(key) {
                    return this.prefix + key;
                },
                _ttlKey: function(key) {
                    return this._prefix(key) + this.ttlKey;
                },
                get: function(key) {
                    if (this.isExpired(key)) {
                        this.remove(key);
                    }
                    return decode(ls.getItem(this._prefix(key)));
                },
                set: function(key, val, ttl) {
                    if (utils.isNumber(ttl)) {
                        ls.setItem(this._ttlKey(key), encode(now() + ttl));
                    } else {
                        ls.removeItem(this._ttlKey(key));
                    }
                    return ls.setItem(this._prefix(key), encode(val));
                },
                remove: function(key) {
                    ls.removeItem(this._ttlKey(key));
                    ls.removeItem(this._prefix(key));
                    return this;
                },
                clear: function() {
                    var i, key, keys = [], len = ls.length;
                    for (i = 0; i < len; i++) {
                        if ((key = ls.key(i)).match(this.keyMatcher)) {
                            keys.push(key.replace(this.keyMatcher, ""));
                        }
                    }
                    for (i = keys.length; i--; ) {
                        this.remove(keys[i]);
                    }
                    return this;
                },
                isExpired: function(key) {
                    var ttl = decode(ls.getItem(this._ttlKey(key)));
                    return utils.isNumber(ttl) && now() > ttl ? true : false;
                }
            };
        } else {
            methods = {
                get: utils.noop,
                set: utils.noop,
                remove: utils.noop,
                clear: utils.noop,
                isExpired: utils.noop
            };
        }
        utils.mixin(PersistentStorage.prototype, methods);
        return PersistentStorage;
        function now() {
            return new Date().getTime();
        }
        function encode(val) {
            return JSON.stringify(utils.isUndefined(val) ? null : val);
        }
        function decode(val) {
            return JSON.parse(val);
        }
    }();
    var RequestCache = function() {
        function RequestCache(o) {
            utils.bindAll(this);
            o = o || {};
            this.sizeLimit = o.sizeLimit || 10;
            this.cache = {};
            this.cachedKeysByAge = [];
        }
        utils.mixin(RequestCache.prototype, {
            get: function(url) {
                return this.cache[url];
            },
            set: function(url, resp) {
                var requestToEvict;
                if (this.cachedKeysByAge.length === this.sizeLimit) {
                    requestToEvict = this.cachedKeysByAge.shift();
                    delete this.cache[requestToEvict];
                }
                this.cache[url] = resp;
                this.cachedKeysByAge.push(url);
            }
        });
        return RequestCache;
    }();
    var Transport = function() {
        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests, requestCache;
        function Transport(o) {
            utils.bindAll(this);
            o = utils.isString(o) ? {
                url: o
            } : o;
            requestCache = requestCache || new RequestCache();
            maxPendingRequests = utils.isNumber(o.maxParallelRequests) ? o.maxParallelRequests : maxPendingRequests || 6;
            this.url = o.url;
            this.wildcard = o.wildcard || "%QUERY";
            this.filter = o.filter;
            this.replace = o.replace;
            this.ajaxSettings = {
                type: "get",
                cache: o.cache,
                timeout: o.timeout,
                dataType: o.dataType || "json",
                beforeSend: o.beforeSend
            };
            this._get = (/^throttle$/i.test(o.rateLimitFn) ? utils.throttle : utils.debounce)(this._get, o.rateLimitWait || 300);
        }
        utils.mixin(Transport.prototype, {
            _get: function(url, cb) {
                var that = this;
                if (belowPendingRequestsThreshold()) {
                    this._sendRequest(url).done(done);
                } else {
                    this.onDeckRequestArgs = [].slice.call(arguments, 0);
                }
                function done(resp) {
                    var data = that.filter ? that.filter(resp) : resp;
                    cb && cb(data);
                    requestCache.set(url, resp);
                }
            },
            _sendRequest: function(url) {
                var that = this, jqXhr = pendingRequests[url];
                if (!jqXhr) {
                    incrementPendingRequests();
                    jqXhr = pendingRequests[url] = $.ajax(url, this.ajaxSettings).always(always);
                }
                return jqXhr;
                function always() {
                    decrementPendingRequests();
                    pendingRequests[url] = null;
                    if (that.onDeckRequestArgs) {
                        that._get.apply(that, that.onDeckRequestArgs);
                        that.onDeckRequestArgs = null;
                    }
                }
            },
            get: function(query, cb) {
                var that = this, encodedQuery = encodeURIComponent(query || ""), url, resp;
                cb = cb || utils.noop;
                url = this.replace ? this.replace(this.url, encodedQuery) : this.url.replace(this.wildcard, encodedQuery);
                if (resp = requestCache.get(url)) {
                    utils.defer(function() {
                        cb(that.filter ? that.filter(resp) : resp);
                    });
                } else {
                    this._get(url, cb);
                }
                return !!resp;
            }
        });
        return Transport;
        function incrementPendingRequests() {
            pendingRequestsCount++;
        }
        function decrementPendingRequests() {
            pendingRequestsCount--;
        }
        function belowPendingRequestsThreshold() {
            return pendingRequestsCount < maxPendingRequests;
        }
    }();
    var Dataset = function() {
        var keys = {
            thumbprint: "thumbprint",
            protocol: "protocol",
            itemHash: "itemHash",
            adjacencyList: "adjacencyList"
        };
        function Dataset(o) {
            utils.bindAll(this);
            if (utils.isString(o.template) && !o.engine) {
                $.error("no template engine specified");
            }
            if (!o.local && !o.prefetch && !o.remote) {
                $.error("one of local, prefetch, or remote is required");
            }
            this.name = o.name || utils.getUniqueId();
            this.limit = o.limit || 5;
            this.minLength = o.minLength || 1;
            this.header = o.header;
            this.footer = o.footer;
            this.valueKey = o.valueKey || "value";
            this.template = compileTemplate(o.template, o.engine, this.valueKey);
            this.local = o.local;
            this.prefetch = o.prefetch;
            this.remote = o.remote;
            this.itemHash = {};
            this.adjacencyList = {};
            this.storage = o.name ? new PersistentStorage(o.name) : null;
        }
        utils.mixin(Dataset.prototype, {
            _processLocalData: function(data) {
                this._mergeProcessedData(this._processData(data));
            },
            _loadPrefetchData: function(o) {
                var that = this, thumbprint = VERSION + (o.thumbprint || ""), storedThumbprint, storedProtocol, storedItemHash, storedAdjacencyList, isExpired, deferred;
                if (this.storage) {
                    storedThumbprint = this.storage.get(keys.thumbprint);
                    storedProtocol = this.storage.get(keys.protocol);
                    storedItemHash = this.storage.get(keys.itemHash);
                    storedAdjacencyList = this.storage.get(keys.adjacencyList);
                }
                isExpired = storedThumbprint !== thumbprint || storedProtocol !== utils.getProtocol();
                o = utils.isString(o) ? {
                    url: o
                } : o;
                o.ttl = utils.isNumber(o.ttl) ? o.ttl : 24 * 60 * 60 * 1e3;
                if (storedItemHash && storedAdjacencyList && !isExpired) {
                    this._mergeProcessedData({
                        itemHash: storedItemHash,
                        adjacencyList: storedAdjacencyList
                    });
                    deferred = $.Deferred().resolve();
                } else {
                    deferred = $.getJSON(o.url).done(processPrefetchData);
                }
                return deferred;
                function processPrefetchData(data) {
                    var filteredData = o.filter ? o.filter(data) : data, processedData = that._processData(filteredData), itemHash = processedData.itemHash, adjacencyList = processedData.adjacencyList;
                    if (that.storage) {
                        that.storage.set(keys.itemHash, itemHash, o.ttl);
                        that.storage.set(keys.adjacencyList, adjacencyList, o.ttl);
                        that.storage.set(keys.thumbprint, thumbprint, o.ttl);
                        that.storage.set(keys.protocol, utils.getProtocol(), o.ttl);
                    }
                    that._mergeProcessedData(processedData);
                }
            },
            _transformDatum: function(datum) {
                var value = utils.isString(datum) ? datum : datum[this.valueKey], tokens = datum.tokens || utils.tokenizeText(value), item = {
                    value: value,
                    tokens: tokens
                };
                if (utils.isString(datum)) {
                    item.datum = {};
                    item.datum[this.valueKey] = datum;
                } else {
                    item.datum = datum;
                }
                item.tokens = utils.filter(item.tokens, function(token) {
                    return !utils.isBlankString(token);
                });
                item.tokens = utils.map(item.tokens, function(token) {
                    return token.toLowerCase();
                });
                return item;
            },
            _processData: function(data) {
                var that = this, itemHash = {}, adjacencyList = {};
                utils.each(data, function(i, datum) {
                    var item = that._transformDatum(datum), id = utils.getUniqueId(item.value);
                    itemHash[id] = item;
                    utils.each(item.tokens, function(i, token) {
                        var character = token.charAt(0), adjacency = adjacencyList[character] || (adjacencyList[character] = [ id ]);
                        !~utils.indexOf(adjacency, id) && adjacency.push(id);
                    });
                });
                return {
                    itemHash: itemHash,
                    adjacencyList: adjacencyList
                };
            },
            _mergeProcessedData: function(processedData) {
                var that = this;
                utils.mixin(this.itemHash, processedData.itemHash);
                utils.each(processedData.adjacencyList, function(character, adjacency) {
                    var masterAdjacency = that.adjacencyList[character];
                    that.adjacencyList[character] = masterAdjacency ? masterAdjacency.concat(adjacency) : adjacency;
                });
            },
            _getLocalSuggestions: function(terms) {
                var that = this, firstChars = [], lists = [], shortestList, suggestions = [];
                utils.each(terms, function(i, term) {
                    var firstChar = term.charAt(0);
                    !~utils.indexOf(firstChars, firstChar) && firstChars.push(firstChar);
                });
                utils.each(firstChars, function(i, firstChar) {
                    var list = that.adjacencyList[firstChar];
                    if (!list) {
                        return false;
                    }
                    lists.push(list);
                    if (!shortestList || list.length < shortestList.length) {
                        shortestList = list;
                    }
                });
                if (lists.length < firstChars.length) {
                    return [];
                }
                utils.each(shortestList, function(i, id) {
                    var item = that.itemHash[id], isCandidate, isMatch;
                    isCandidate = utils.every(lists, function(list) {
                        return ~utils.indexOf(list, id);
                    });
                    isMatch = isCandidate && utils.every(terms, function(term) {
                        return utils.some(item.tokens, function(token) {
                            return token.indexOf(term) === 0;
                        });
                    });
                    isMatch && suggestions.push(item);
                });
                return suggestions;
            },
            initialize: function() {
                var deferred;
                this.local && this._processLocalData(this.local);
                this.transport = this.remote ? new Transport(this.remote) : null;
                deferred = this.prefetch ? this._loadPrefetchData(this.prefetch) : $.Deferred().resolve();
                this.local = this.prefetch = this.remote = null;
                this.initialize = function() {
                    return deferred;
                };
                return deferred;
            },
            getSuggestions: function(query, cb) {
                var that = this, terms, suggestions, cacheHit = false;
                if (query.length < this.minLength) {
                    return;
                }
                terms = utils.tokenizeQuery(query);
                suggestions = this._getLocalSuggestions(terms).slice(0, this.limit);
                if (suggestions.length < this.limit && this.transport) {
                    cacheHit = this.transport.get(query, processRemoteData);
                }
                !cacheHit && cb && cb(suggestions);
                function processRemoteData(data) {
                    suggestions = suggestions.slice(0);
                    utils.each(data, function(i, datum) {
                        var item = that._transformDatum(datum), isDuplicate;
                        isDuplicate = utils.some(suggestions, function(suggestion) {
                            return item.value === suggestion.value;
                        });
                        !isDuplicate && suggestions.push(item);
                        return suggestions.length < that.limit;
                    });
                    cb && cb(suggestions);
                }
            }
        });
        return Dataset;
        function compileTemplate(template, engine, valueKey) {
            var renderFn, compiledTemplate;
            if (utils.isFunction(template)) {
                renderFn = template;
            } else if (utils.isString(template)) {
                compiledTemplate = engine.compile(template);
                renderFn = utils.bind(compiledTemplate.render, compiledTemplate);
            } else {
                renderFn = function(context) {
                    return "<p>" + context[valueKey] + "</p>";
                };
            }
            return renderFn;
        }
    }();
    var InputView = function() {
        function InputView(o) {
            var that = this;
            utils.bindAll(this);
            this.specialKeyCodeMap = {
                9: "tab",
                27: "esc",
                37: "left",
                39: "right",
                13: "enter",
                38: "up",
                40: "down"
            };
            this.$hint = $(o.hint);
            this.$input = $(o.input).on("blur.tt", this._handleBlur).on("focus.tt", this._handleFocus).on("keydown.tt", this._handleSpecialKeyEvent);
            if (!utils.isMsie()) {
                this.$input.on("input.tt", this._compareQueryToInputValue);
            } else {
                this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function($e) {
                    if (that.specialKeyCodeMap[$e.which || $e.keyCode]) {
                        return;
                    }
                    utils.defer(that._compareQueryToInputValue);
                });
            }
            this.query = this.$input.val();
            this.$overflowHelper = buildOverflowHelper(this.$input);
        }
        utils.mixin(InputView.prototype, EventTarget, {
            _handleFocus: function() {
                this.trigger("focused");
            },
            _handleBlur: function() {
                this.trigger("blured");
            },
            _handleSpecialKeyEvent: function($e) {
                var keyName = this.specialKeyCodeMap[$e.which || $e.keyCode];
                keyName && this.trigger(keyName + "Keyed", $e);
            },
            _compareQueryToInputValue: function() {
                var inputValue = this.getInputValue(), isSameQuery = compareQueries(this.query, inputValue), isSameQueryExceptWhitespace = isSameQuery ? this.query.length !== inputValue.length : false;
                if (isSameQueryExceptWhitespace) {
                    this.trigger("whitespaceChanged", {
                        value: this.query
                    });
                } else if (!isSameQuery) {
                    this.trigger("queryChanged", {
                        value: this.query = inputValue
                    });
                }
            },
            destroy: function() {
                this.$hint.off(".tt");
                this.$input.off(".tt");
                this.$hint = this.$input = this.$overflowHelper = null;
            },
            focus: function() {
                this.$input.focus();
            },
            blur: function() {
                this.$input.blur();
            },
            getQuery: function() {
                return this.query;
            },
            setQuery: function(query) {
                this.query = query;
            },
            getInputValue: function() {
                return this.$input.val();
            },
            setInputValue: function(value, silent) {
                this.$input.val(value);
                !silent && this._compareQueryToInputValue();
            },
            getHintValue: function() {
                return this.$hint.val();
            },
            setHintValue: function(value) {
                this.$hint.val(value);
            },
            getLanguageDirection: function() {
                return (this.$input.css("direction") || "ltr").toLowerCase();
            },
            isOverflow: function() {
                this.$overflowHelper.text(this.getInputValue());
                return this.$overflowHelper.width() > this.$input.width();
            },
            isCursorAtEnd: function() {
                var valueLength = this.$input.val().length, selectionStart = this.$input[0].selectionStart, range;
                if (utils.isNumber(selectionStart)) {
                    return selectionStart === valueLength;
                } else if (document.selection) {
                    range = document.selection.createRange();
                    range.moveStart("character", -valueLength);
                    return valueLength === range.text.length;
                }
                return true;
            }
        });
        return InputView;
        function buildOverflowHelper($input) {
            return $("<span></span>").css({
                position: "absolute",
                left: "-9999px",
                visibility: "hidden",
                whiteSpace: "nowrap",
                fontFamily: $input.css("font-family"),
                fontSize: $input.css("font-size"),
                fontStyle: $input.css("font-style"),
                fontVariant: $input.css("font-variant"),
                fontWeight: $input.css("font-weight"),
                wordSpacing: $input.css("word-spacing"),
                letterSpacing: $input.css("letter-spacing"),
                textIndent: $input.css("text-indent"),
                textRendering: $input.css("text-rendering"),
                textTransform: $input.css("text-transform")
            }).insertAfter($input);
        }
        function compareQueries(a, b) {
            a = (a || "").replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
            b = (b || "").replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
            return a === b;
        }
    }();
    var DropdownView = function() {
        var html = {
            suggestionsList: '<span class="tt-suggestions"></span>'
        }, css = {
            suggestionsList: {
                display: "block"
            },
            suggestion: {
                whiteSpace: "nowrap",
                cursor: "pointer"
            },
            suggestionChild: {
                whiteSpace: "normal"
            }
        };
        function DropdownView(o) {
            utils.bindAll(this);
            this.isOpen = false;
            this.isEmpty = true;
            this.isMouseOverDropdown = false;
            this.$menu = $(o.menu).on("mouseenter.tt", this._handleMouseenter).on("mouseleave.tt", this._handleMouseleave).on("click.tt", ".tt-suggestion", this._handleSelection).on("mouseover.tt", ".tt-suggestion", this._handleMouseover);
        }
        utils.mixin(DropdownView.prototype, EventTarget, {
            _handleMouseenter: function() {
                this.isMouseOverDropdown = true;
            },
            _handleMouseleave: function() {
                this.isMouseOverDropdown = false;
            },
            _handleMouseover: function($e) {
                var $suggestion = $($e.currentTarget);
                this._getSuggestions().removeClass("tt-is-under-cursor");
                $suggestion.addClass("tt-is-under-cursor");
            },
            _handleSelection: function($e) {
                var $suggestion = $($e.currentTarget);
                this.trigger("suggestionSelected", extractSuggestion($suggestion));
            },
            _show: function() {
                this.$menu.css("display", "block");
            },
            _hide: function() {
                this.$menu.hide();
            },
            _moveCursor: function(increment) {
                var $suggestions, $cur, nextIndex, $underCursor;
                if (!this.isVisible()) {
                    return;
                }
                $suggestions = this._getSuggestions();
                $cur = $suggestions.filter(".tt-is-under-cursor");
                $cur.removeClass("tt-is-under-cursor");
                nextIndex = $suggestions.index($cur) + increment;
                nextIndex = (nextIndex + 1) % ($suggestions.length + 1) - 1;
                if (nextIndex === -1) {
                    this.trigger("cursorRemoved");
                    return;
                } else if (nextIndex < -1) {
                    nextIndex = $suggestions.length - 1;
                }
                $underCursor = $suggestions.eq(nextIndex).addClass("tt-is-under-cursor");
                this._ensureVisibility($underCursor);
                this.trigger("cursorMoved", extractSuggestion($underCursor));
            },
            _getSuggestions: function() {
                return this.$menu.find(".tt-suggestions > .tt-suggestion");
            },
            _ensureVisibility: function($el) {
                var menuHeight = this.$menu.height() + parseInt(this.$menu.css("paddingTop"), 10) + parseInt(this.$menu.css("paddingBottom"), 10), menuScrollTop = this.$menu.scrollTop(), elTop = $el.position().top, elBottom = elTop + $el.outerHeight(true);
                if (elTop < 0) {
                    this.$menu.scrollTop(menuScrollTop + elTop);
                } else if (menuHeight < elBottom) {
                    this.$menu.scrollTop(menuScrollTop + (elBottom - menuHeight));
                }
            },
            destroy: function() {
                this.$menu.off(".tt");
                this.$menu = null;
            },
            isVisible: function() {
                return this.isOpen && !this.isEmpty;
            },
            closeUnlessMouseIsOverDropdown: function() {
                if (!this.isMouseOverDropdown) {
                    this.close();
                }
            },
            close: function() {
                if (this.isOpen) {
                    this.isOpen = false;
                    this.isMouseOverDropdown = false;
                    this._hide();
                    this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor");
                    this.trigger("closed");
                }
            },
            open: function() {
                if (!this.isOpen) {
                    this.isOpen = true;
                    !this.isEmpty && this._show();
                    this.trigger("opened");
                }
            },
            setLanguageDirection: function(dir) {
                var ltrCss = {
                    left: "0",
                    right: "auto"
                }, rtlCss = {
                    left: "auto",
                    right: " 0"
                };
                dir === "ltr" ? this.$menu.css(ltrCss) : this.$menu.css(rtlCss);
            },
            moveCursorUp: function() {
                this._moveCursor(-1);
            },
            moveCursorDown: function() {
                this._moveCursor(+1);
            },
            getSuggestionUnderCursor: function() {
                var $suggestion = this._getSuggestions().filter(".tt-is-under-cursor").first();
                return $suggestion.length > 0 ? extractSuggestion($suggestion) : null;
            },
            getFirstSuggestion: function() {
                var $suggestion = this._getSuggestions().first();
                return $suggestion.length > 0 ? extractSuggestion($suggestion) : null;
            },
            renderSuggestions: function(dataset, suggestions) {
                var datasetClassName = "tt-dataset-" + dataset.name, wrapper = '<div class="tt-suggestion">%body</div>', compiledHtml, $suggestionsList, $dataset = this.$menu.find("." + datasetClassName), elBuilder, fragment, $el;
                if ($dataset.length === 0) {
                    $suggestionsList = $(html.suggestionsList).css(css.suggestionsList);
                    $dataset = $("<div></div>").addClass(datasetClassName).append(dataset.header).append($suggestionsList).append(dataset.footer).appendTo(this.$menu);
                }
                if (suggestions.length > 0) {
                    this.isEmpty = false;
                    this.isOpen && this._show();
                    elBuilder = document.createElement("div");
                    fragment = document.createDocumentFragment();
                    utils.each(suggestions, function(i, suggestion) {
                        suggestion.dataset = dataset.name;
                        compiledHtml = dataset.template(suggestion.datum);
                        elBuilder.innerHTML = wrapper.replace("%body", compiledHtml);
                        $el = $(elBuilder.firstChild).css(css.suggestion).data("suggestion", suggestion);
                        $el.children().each(function() {
                            $(this).css(css.suggestionChild);
                        });
                        fragment.appendChild($el[0]);
                    });
                    $dataset.show().find(".tt-suggestions").html(fragment);
                } else {
                    this.clearSuggestions(dataset.name);
                }
                this.trigger("suggestionsRendered");
            },
            clearSuggestions: function(datasetName) {
                var $datasets = datasetName ? this.$menu.find(".tt-dataset-" + datasetName) : this.$menu.find('[class^="tt-dataset-"]'), $suggestions = $datasets.find(".tt-suggestions");
                $datasets.hide();
                $suggestions.empty();
                if (this._getSuggestions().length === 0) {
                    this.isEmpty = true;
                    this._hide();
                }
            }
        });
        return DropdownView;
        function extractSuggestion($el) {
            return $el.data("suggestion");
        }
    }();
    var TypeaheadView = function() {
        var html = {
            wrapper: '<span class="twitter-typeahead"></span>',
            hint: '<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',
            dropdown: '<span class="tt-dropdown-menu"></span>'
        }, css = {
            wrapper: {
                position: "relative",
                display: "inline-block"
            },
            hint: {
                position: "absolute",
                top: "0",
                left: "0",
                borderColor: "transparent",
                boxShadow: "none"
            },
            query: {
                position: "relative",
                verticalAlign: "top",
                backgroundColor: "transparent"
            },
            dropdown: {
                position: "absolute",
                top: "100%",
                left: "0",
                zIndex: "100",
                display: "none"
            }
        };
        if (utils.isMsie()) {
            utils.mixin(css.query, {
                backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
            });
        }
        if (utils.isMsie() && utils.isMsie() <= 7) {
            utils.mixin(css.wrapper, {
                display: "inline",
                zoom: "1"
            });
            utils.mixin(css.query, {
                marginTop: "-1px"
            });
        }
        function TypeaheadView(o) {
            var $menu, $input, $hint;
            utils.bindAll(this);
            this.$node = buildDomStructure(o.input);
            this.datasets = o.datasets;
            this.dir = null;
            this.eventBus = o.eventBus;
            $menu = this.$node.find(".tt-dropdown-menu");
            $input = this.$node.find(".tt-query");
            $hint = this.$node.find(".tt-hint");
            this.dropdownView = new DropdownView({
                menu: $menu
            }).on("suggestionSelected", this._handleSelection).on("cursorMoved", this._clearHint).on("cursorMoved", this._setInputValueToSuggestionUnderCursor).on("cursorRemoved", this._setInputValueToQuery).on("cursorRemoved", this._updateHint).on("suggestionsRendered", this._updateHint).on("opened", this._updateHint).on("closed", this._clearHint).on("opened closed", this._propagateEvent);
            this.inputView = new InputView({
                input: $input,
                hint: $hint
            }).on("focused", this._openDropdown).on("blured", this._closeDropdown).on("blured", this._setInputValueToQuery).on("enterKeyed tabKeyed", this._handleSelection).on("queryChanged", this._clearHint).on("queryChanged", this._clearSuggestions).on("queryChanged", this._getSuggestions).on("whitespaceChanged", this._updateHint).on("queryChanged whitespaceChanged", this._openDropdown).on("queryChanged whitespaceChanged", this._setLanguageDirection).on("escKeyed", this._closeDropdown).on("escKeyed", this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed", this._managePreventDefault).on("upKeyed downKeyed", this._moveDropdownCursor).on("upKeyed downKeyed", this._openDropdown).on("tabKeyed leftKeyed rightKeyed", this._autocomplete);
        }
        utils.mixin(TypeaheadView.prototype, EventTarget, {
            _managePreventDefault: function(e) {
                var $e = e.data, hint, inputValue, preventDefault = false;
                switch (e.type) {
                  case "tabKeyed":
                    hint = this.inputView.getHintValue();
                    inputValue = this.inputView.getInputValue();
                    preventDefault = hint && hint !== inputValue;
                    break;

                  case "upKeyed":
                  case "downKeyed":
                    preventDefault = !$e.shiftKey && !$e.ctrlKey && !$e.metaKey;
                    break;
                }
                preventDefault && $e.preventDefault();
            },
            _setLanguageDirection: function() {
                var dir = this.inputView.getLanguageDirection();
                if (dir !== this.dir) {
                    this.dir = dir;
                    this.$node.css("direction", dir);
                    this.dropdownView.setLanguageDirection(dir);
                }
            },
            _updateHint: function() {
                var suggestion = this.dropdownView.getFirstSuggestion(), hint = suggestion ? suggestion.value : null, dropdownIsVisible = this.dropdownView.isVisible(), inputHasOverflow = this.inputView.isOverflow(), inputValue, query, escapedQuery, beginsWithQuery, match;
                if (hint && dropdownIsVisible && !inputHasOverflow) {
                    inputValue = this.inputView.getInputValue();
                    query = inputValue.replace(/\s{2,}/g, " ").replace(/^\s+/g, "");
                    escapedQuery = utils.escapeRegExChars(query);
                    beginsWithQuery = new RegExp("^(?:" + escapedQuery + ")(.*$)", "i");
                    match = beginsWithQuery.exec(hint);
                    this.inputView.setHintValue(inputValue + (match ? match[1] : ""));
                }
            },
            _clearHint: function() {
                this.inputView.setHintValue("");
            },
            _clearSuggestions: function() {
                this.dropdownView.clearSuggestions();
            },
            _setInputValueToQuery: function() {
                this.inputView.setInputValue(this.inputView.getQuery());
            },
            _setInputValueToSuggestionUnderCursor: function(e) {
                var suggestion = e.data;
                this.inputView.setInputValue(suggestion.value, true);
            },
            _openDropdown: function() {
                this.dropdownView.open();
            },
            _closeDropdown: function(e) {
                this.dropdownView[e.type === "blured" ? "closeUnlessMouseIsOverDropdown" : "close"]();
            },
            _moveDropdownCursor: function(e) {
                var $e = e.data;
                if (!$e.shiftKey && !$e.ctrlKey && !$e.metaKey) {
                    this.dropdownView[e.type === "upKeyed" ? "moveCursorUp" : "moveCursorDown"]();
                }
            },
            _handleSelection: function(e) {
                var byClick = e.type === "suggestionSelected", suggestion = byClick ? e.data : this.dropdownView.getSuggestionUnderCursor();
                if (suggestion) {
                    this.inputView.setInputValue(suggestion.value);
                    byClick ? this.inputView.focus() : e.data.preventDefault();
                    byClick && utils.isMsie() ? utils.defer(this.dropdownView.close) : this.dropdownView.close();
                    this.eventBus.trigger("selected", suggestion.datum, suggestion.dataset);
                }
            },
            _getSuggestions: function() {
                var that = this, query = this.inputView.getQuery();
                if (utils.isBlankString(query)) {
                    return;
                }
                utils.each(this.datasets, function(i, dataset) {
                    dataset.getSuggestions(query, function(suggestions) {
                        if (query === that.inputView.getQuery()) {
                            that.dropdownView.renderSuggestions(dataset, suggestions);
                        }
                    });
                });
            },
            _autocomplete: function(e) {
                var isCursorAtEnd, ignoreEvent, query, hint, suggestion;
                if (e.type === "rightKeyed" || e.type === "leftKeyed") {
                    isCursorAtEnd = this.inputView.isCursorAtEnd();
                    ignoreEvent = this.inputView.getLanguageDirection() === "ltr" ? e.type === "leftKeyed" : e.type === "rightKeyed";
                    if (!isCursorAtEnd || ignoreEvent) {
                        return;
                    }
                }
                query = this.inputView.getQuery();
                hint = this.inputView.getHintValue();
                if (hint !== "" && query !== hint) {
                    suggestion = this.dropdownView.getFirstSuggestion();
                    this.inputView.setInputValue(suggestion.value);
                    this.eventBus.trigger("autocompleted", suggestion.datum, suggestion.dataset);
                }
            },
            _propagateEvent: function(e) {
                this.eventBus.trigger(e.type);
            },
            destroy: function() {
                this.inputView.destroy();
                this.dropdownView.destroy();
                destroyDomStructure(this.$node);
                this.$node = null;
            },
            setQuery: function(query) {
                this.inputView.setQuery(query);
                this.inputView.setInputValue(query);
                this._clearHint();
                this._clearSuggestions();
                this._getSuggestions();
            }
        });
        return TypeaheadView;
        function buildDomStructure(input) {
            var $wrapper = $(html.wrapper), $dropdown = $(html.dropdown), $input = $(input), $hint = $(html.hint);
            $wrapper = $wrapper.css(css.wrapper);
            $dropdown = $dropdown.css(css.dropdown);
            $hint.css(css.hint).css({
                backgroundAttachment: $input.css("background-attachment"),
                backgroundClip: $input.css("background-clip"),
                backgroundColor: $input.css("background-color"),
                backgroundImage: $input.css("background-image"),
                backgroundOrigin: $input.css("background-origin"),
                backgroundPosition: $input.css("background-position"),
                backgroundRepeat: $input.css("background-repeat"),
                backgroundSize: $input.css("background-size")
            });
            $input.data("ttAttrs", {
                dir: $input.attr("dir"),
                autocomplete: $input.attr("autocomplete"),
                spellcheck: $input.attr("spellcheck"),
                style: $input.attr("style")
            });
            $input.addClass("tt-query").attr({
                autocomplete: "off",
                spellcheck: false
            }).css(css.query);
            try {
                !$input.attr("dir") && $input.attr("dir", "auto");
            } catch (e) {}
            return $input.wrap($wrapper).parent().prepend($hint).append($dropdown);
        }
        function destroyDomStructure($node) {
            var $input = $node.find(".tt-query");
            utils.each($input.data("ttAttrs"), function(key, val) {
                utils.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);
            });
            $input.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter($node);
            $node.remove();
        }
    }();
    (function() {
        var cache = {}, viewKey = "ttView", methods;
        methods = {
            initialize: function(datasetDefs) {
                var datasets;
                datasetDefs = utils.isArray(datasetDefs) ? datasetDefs : [ datasetDefs ];
                if (datasetDefs.length === 0) {
                    $.error("no datasets provided");
                }
                datasets = utils.map(datasetDefs, function(o) {
                    var dataset = cache[o.name] ? cache[o.name] : new Dataset(o);
                    if (o.name) {
                        cache[o.name] = dataset;
                    }
                    return dataset;
                });
                return this.each(initialize);
                function initialize() {
                    var $input = $(this), deferreds, eventBus = new EventBus({
                        el: $input
                    });
                    deferreds = utils.map(datasets, function(dataset) {
                        return dataset.initialize();
                    });
                    $input.data(viewKey, new TypeaheadView({
                        input: $input,
                        eventBus: eventBus = new EventBus({
                            el: $input
                        }),
                        datasets: datasets
                    }));
                    $.when.apply($, deferreds).always(function() {
                        utils.defer(function() {
                            eventBus.trigger("initialized");
                        });
                    });
                }
            },
            destroy: function() {
                return this.each(destroy);
                function destroy() {
                    var $this = $(this), view = $this.data(viewKey);
                    if (view) {
                        view.destroy();
                        $this.removeData(viewKey);
                    }
                }
            },
            setQuery: function(query) {
                return this.each(setQuery);
                function setQuery() {
                    var view = $(this).data(viewKey);
                    view && view.setQuery(query);
                }
            }
        };
        jQuery.fn.typeahead = function(method) {
            if (methods[method]) {
                return methods[method].apply(this, [].slice.call(arguments, 1));
            } else {
                return methods.initialize.apply(this, arguments);
            }
        };
    })();
})(window.jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImQzLnYzLm1pbi5qcyIsImpxdWVyeS0yLjEuMC5taW4uanMiLCJqcXVlcnktbWlncmF0ZS0xLjIuMS5taW4uanMiLCJqcXVlcnktdWkuanMiLCJwaXZvdC5qcyIsImQzX3JlbmRlcmVycy5qcyIsInVuZGVyc2NvcmUtbWluLmpzIiwiYmFja2JvbmUtbWluLmpzIiwianF1ZXJ5LmNvdWNoLmpzIiwiYmFja2JvbmUtY291Y2hkYi5qcyIsImpxbS1jb25maWcuanMiLCJqcXVlcnkubW9iaWxlLTEuMS4wLm1pbi5qcyIsImpxdWVyeS5tb2JpbGUuZGF0ZWJveC5taW4uanMiLCJqcW0uYXV0b0NvbXBsZXRlLm1pbi0xLjMuanMiLCJoYW5kbGViYXJzLmpzIiwiZm9ybTJqcy5qcyIsImpzMmZvcm0uanMiLCJqcXVlcnkudG9PYmplY3QuanMiLCJpbmZsZWN0aW9uLmpzIiwianF1ZXJ5LmRhdGVGb3JtYXQtMS4wLmpzIiwidGFibGUyQ1NWLmpzIiwianF1ZXJ5LnRhYmxlc29ydGVyLm1pbi5qcyIsImpxdWVyeS5kYXRhVGFibGVzLm1pbi5qcyIsImRhdGFUYWJsZXMudGFibGVUb29scy5taW4uanMiLCJwaWNuZXQudGFibGUuZmlsdGVyLm1pbi5qcyIsImpxdWVyeS50YWJsZS1maWx0ZXIubWluLmpzIiwidGFnLWl0LmpzIiwibW9tZW50Lm1pbi5qcyIsImpxdWVyeS5jb29raWUuanMiLCJiYXNlNjQuanMiLCJzaGExLmpzIiwiY29mZmVlLXNjcmlwdC5qcyIsInR5cGVhaGVhZC5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL3RnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzUxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwRkE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM3a0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3I5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbFVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNocEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekVBO0FBQ0E7QUFDQTtBQUNBO0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM3WUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJsaWJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbigpe2Z1bmN0aW9uIG4obil7cmV0dXJuIG4mJihuLm93bmVyRG9jdW1lbnR8fG4uZG9jdW1lbnR8fG4pLmRvY3VtZW50RWxlbWVudH1mdW5jdGlvbiB0KG4pe3JldHVybiBuJiYobi5vd25lckRvY3VtZW50JiZuLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXd8fG4uZG9jdW1lbnQmJm58fG4uZGVmYXVsdFZpZXcpfWZ1bmN0aW9uIGUobix0KXtyZXR1cm4gdD5uPy0xOm4+dD8xOm4+PXQ/MDowLzB9ZnVuY3Rpb24gcihuKXtyZXR1cm4gbnVsbD09PW4/MC8wOitufWZ1bmN0aW9uIHUobil7cmV0dXJuIWlzTmFOKG4pfWZ1bmN0aW9uIGkobil7cmV0dXJue2xlZnQ6ZnVuY3Rpb24odCxlLHIsdSl7Zm9yKGFyZ3VtZW50cy5sZW5ndGg8MyYmKHI9MCksYXJndW1lbnRzLmxlbmd0aDw0JiYodT10Lmxlbmd0aCk7dT5yOyl7dmFyIGk9cit1Pj4+MTtuKHRbaV0sZSk8MD9yPWkrMTp1PWl9cmV0dXJuIHJ9LHJpZ2h0OmZ1bmN0aW9uKHQsZSxyLHUpe2Zvcihhcmd1bWVudHMubGVuZ3RoPDMmJihyPTApLGFyZ3VtZW50cy5sZW5ndGg8NCYmKHU9dC5sZW5ndGgpO3U+cjspe3ZhciBpPXIrdT4+PjE7bih0W2ldLGUpPjA/dT1pOnI9aSsxfXJldHVybiByfX19ZnVuY3Rpb24gbyhuKXtyZXR1cm4gbi5sZW5ndGh9ZnVuY3Rpb24gYShuKXtmb3IodmFyIHQ9MTtuKnQlMTspdCo9MTA7cmV0dXJuIHR9ZnVuY3Rpb24gYyhuLHQpe2Zvcih2YXIgZSBpbiB0KU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxlLHt2YWx1ZTp0W2VdLGVudW1lcmFibGU6ITF9KX1mdW5jdGlvbiBsKCl7dGhpcy5fPU9iamVjdC5jcmVhdGUobnVsbCl9ZnVuY3Rpb24gcyhuKXtyZXR1cm4obis9XCJcIik9PT1wYXx8blswXT09PXZhP3ZhK246bn1mdW5jdGlvbiBmKG4pe3JldHVybihuKz1cIlwiKVswXT09PXZhP24uc2xpY2UoMSk6bn1mdW5jdGlvbiBoKG4pe3JldHVybiBzKG4paW4gdGhpcy5ffWZ1bmN0aW9uIGcobil7cmV0dXJuKG49cyhuKSlpbiB0aGlzLl8mJmRlbGV0ZSB0aGlzLl9bbl19ZnVuY3Rpb24gcCgpe3ZhciBuPVtdO2Zvcih2YXIgdCBpbiB0aGlzLl8pbi5wdXNoKGYodCkpO3JldHVybiBufWZ1bmN0aW9uIHYoKXt2YXIgbj0wO2Zvcih2YXIgdCBpbiB0aGlzLl8pKytuO3JldHVybiBufWZ1bmN0aW9uIGQoKXtmb3IodmFyIG4gaW4gdGhpcy5fKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIG0oKXt0aGlzLl89T2JqZWN0LmNyZWF0ZShudWxsKX1mdW5jdGlvbiB5KG4pe3JldHVybiBufWZ1bmN0aW9uIE0obix0LGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciByPWUuYXBwbHkodCxhcmd1bWVudHMpO3JldHVybiByPT09dD9uOnJ9fWZ1bmN0aW9uIHgobix0KXtpZih0IGluIG4pcmV0dXJuIHQ7dD10LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSk7Zm9yKHZhciBlPTAscj1kYS5sZW5ndGg7cj5lOysrZSl7dmFyIHU9ZGFbZV0rdDtpZih1IGluIG4pcmV0dXJuIHV9fWZ1bmN0aW9uIGIoKXt9ZnVuY3Rpb24gXygpe31mdW5jdGlvbiB3KG4pe2Z1bmN0aW9uIHQoKXtmb3IodmFyIHQscj1lLHU9LTEsaT1yLmxlbmd0aDsrK3U8aTspKHQ9clt1XS5vbikmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBufXZhciBlPVtdLHI9bmV3IGw7cmV0dXJuIHQub249ZnVuY3Rpb24odCx1KXt2YXIgaSxvPXIuZ2V0KHQpO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDI/byYmby5vbjoobyYmKG8ub249bnVsbCxlPWUuc2xpY2UoMCxpPWUuaW5kZXhPZihvKSkuY29uY2F0KGUuc2xpY2UoaSsxKSksci5yZW1vdmUodCkpLHUmJmUucHVzaChyLnNldCh0LHtvbjp1fSkpLG4pfSx0fWZ1bmN0aW9uIFMoKXt0YS5ldmVudC5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIGsoKXtmb3IodmFyIG4sdD10YS5ldmVudDtuPXQuc291cmNlRXZlbnQ7KXQ9bjtyZXR1cm4gdH1mdW5jdGlvbiBFKG4pe2Zvcih2YXIgdD1uZXcgXyxlPTAscj1hcmd1bWVudHMubGVuZ3RoOysrZTxyOyl0W2FyZ3VtZW50c1tlXV09dyh0KTtyZXR1cm4gdC5vZj1mdW5jdGlvbihlLHIpe3JldHVybiBmdW5jdGlvbih1KXt0cnl7dmFyIGk9dS5zb3VyY2VFdmVudD10YS5ldmVudDt1LnRhcmdldD1uLHRhLmV2ZW50PXUsdFt1LnR5cGVdLmFwcGx5KGUscil9ZmluYWxseXt0YS5ldmVudD1pfX19LHR9ZnVuY3Rpb24gQShuKXtyZXR1cm4geWEobixfYSksbn1mdW5jdGlvbiBOKG4pe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bjpmdW5jdGlvbigpe3JldHVybiBNYShuLHRoaXMpfX1mdW5jdGlvbiBDKG4pe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bjpmdW5jdGlvbigpe3JldHVybiB4YShuLHRoaXMpfX1mdW5jdGlvbiB6KG4sdCl7ZnVuY3Rpb24gZSgpe3RoaXMucmVtb3ZlQXR0cmlidXRlKG4pfWZ1bmN0aW9uIHIoKXt0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKG4uc3BhY2Usbi5sb2NhbCl9ZnVuY3Rpb24gdSgpe3RoaXMuc2V0QXR0cmlidXRlKG4sdCl9ZnVuY3Rpb24gaSgpe3RoaXMuc2V0QXR0cmlidXRlTlMobi5zcGFjZSxuLmxvY2FsLHQpfWZ1bmN0aW9uIG8oKXt2YXIgZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtudWxsPT1lP3RoaXMucmVtb3ZlQXR0cmlidXRlKG4pOnRoaXMuc2V0QXR0cmlidXRlKG4sZSl9ZnVuY3Rpb24gYSgpe3ZhciBlPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO251bGw9PWU/dGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhuLnNwYWNlLG4ubG9jYWwpOnRoaXMuc2V0QXR0cmlidXRlTlMobi5zcGFjZSxuLmxvY2FsLGUpfXJldHVybiBuPXRhLm5zLnF1YWxpZnkobiksbnVsbD09dD9uLmxvY2FsP3I6ZTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P24ubG9jYWw/YTpvOm4ubG9jYWw/aTp1fWZ1bmN0aW9uIHEobil7cmV0dXJuIG4udHJpbSgpLnJlcGxhY2UoL1xccysvZyxcIiBcIil9ZnVuY3Rpb24gTChuKXtyZXR1cm4gbmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKVwiK3RhLnJlcXVvdGUobikrXCIoPzpcXFxccyt8JClcIixcImdcIil9ZnVuY3Rpb24gVChuKXtyZXR1cm4obitcIlwiKS50cmltKCkuc3BsaXQoL158XFxzKy8pfWZ1bmN0aW9uIFIobix0KXtmdW5jdGlvbiBlKCl7Zm9yKHZhciBlPS0xOysrZTx1OyluW2VdKHRoaXMsdCl9ZnVuY3Rpb24gcigpe2Zvcih2YXIgZT0tMSxyPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpOysrZTx1OyluW2VdKHRoaXMscil9bj1UKG4pLm1hcChEKTt2YXIgdT1uLmxlbmd0aDtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3I6ZX1mdW5jdGlvbiBEKG4pe3ZhciB0PUwobik7cmV0dXJuIGZ1bmN0aW9uKGUscil7aWYodT1lLmNsYXNzTGlzdClyZXR1cm4gcj91LmFkZChuKTp1LnJlbW92ZShuKTt2YXIgdT1lLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiO3I/KHQubGFzdEluZGV4PTAsdC50ZXN0KHUpfHxlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIscSh1K1wiIFwiK24pKSk6ZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLHEodS5yZXBsYWNlKHQsXCIgXCIpKSl9fWZ1bmN0aW9uIFAobix0LGUpe2Z1bmN0aW9uIHIoKXt0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG4pfWZ1bmN0aW9uIHUoKXt0aGlzLnN0eWxlLnNldFByb3BlcnR5KG4sdCxlKX1mdW5jdGlvbiBpKCl7dmFyIHI9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bnVsbD09cj90aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG4pOnRoaXMuc3R5bGUuc2V0UHJvcGVydHkobixyLGUpfXJldHVybiBudWxsPT10P3I6XCJmdW5jdGlvblwiPT10eXBlb2YgdD9pOnV9ZnVuY3Rpb24gVShuLHQpe2Z1bmN0aW9uIGUoKXtkZWxldGUgdGhpc1tuXX1mdW5jdGlvbiByKCl7dGhpc1tuXT10fWZ1bmN0aW9uIHUoKXt2YXIgZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtudWxsPT1lP2RlbGV0ZSB0aGlzW25dOnRoaXNbbl09ZX1yZXR1cm4gbnVsbD09dD9lOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dTpyfWZ1bmN0aW9uIGoobil7ZnVuY3Rpb24gdCgpe3ZhciB0PXRoaXMub3duZXJEb2N1bWVudCxlPXRoaXMubmFtZXNwYWNlVVJJO3JldHVybiBlP3QuY3JlYXRlRWxlbWVudE5TKGUsbik6dC5jcmVhdGVFbGVtZW50KG4pfWZ1bmN0aW9uIGUoKXtyZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuLnNwYWNlLG4ubG9jYWwpfXJldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bjoobj10YS5ucy5xdWFsaWZ5KG4pKS5sb2NhbD9lOnR9ZnVuY3Rpb24gRigpe3ZhciBuPXRoaXMucGFyZW50Tm9kZTtuJiZuLnJlbW92ZUNoaWxkKHRoaXMpfWZ1bmN0aW9uIEgobil7cmV0dXJue19fZGF0YV9fOm59fWZ1bmN0aW9uIE8obil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGJhKHRoaXMsbil9fWZ1bmN0aW9uIEkobil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGh8fChuPWUpLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJmU/bih0Ll9fZGF0YV9fLGUuX19kYXRhX18pOiF0LSFlfX1mdW5jdGlvbiBZKG4sdCl7Zm9yKHZhciBlPTAscj1uLmxlbmd0aDtyPmU7ZSsrKWZvcih2YXIgdSxpPW5bZV0sbz0wLGE9aS5sZW5ndGg7YT5vO28rKykodT1pW29dKSYmdCh1LG8sZSk7cmV0dXJuIG59ZnVuY3Rpb24gWihuKXtyZXR1cm4geWEobixTYSksbn1mdW5jdGlvbiBWKG4pe3ZhciB0LGU7cmV0dXJuIGZ1bmN0aW9uKHIsdSxpKXt2YXIgbyxhPW5baV0udXBkYXRlLGM9YS5sZW5ndGg7Zm9yKGkhPWUmJihlPWksdD0wKSx1Pj10JiYodD11KzEpOyEobz1hW3RdKSYmKyt0PGM7KTtyZXR1cm4gb319ZnVuY3Rpb24gWChuLHQsZSl7ZnVuY3Rpb24gcigpe3ZhciB0PXRoaXNbb107dCYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLHQsdC4kKSxkZWxldGUgdGhpc1tvXSl9ZnVuY3Rpb24gdSgpe3ZhciB1PWModCxyYShhcmd1bWVudHMpKTtyLmNhbGwodGhpcyksdGhpcy5hZGRFdmVudExpc3RlbmVyKG4sdGhpc1tvXT11LHUuJD1lKSx1Ll89dH1mdW5jdGlvbiBpKCl7dmFyIHQsZT1uZXcgUmVnRXhwKFwiXl9fb24oW14uXSspXCIrdGEucmVxdW90ZShuKStcIiRcIik7Zm9yKHZhciByIGluIHRoaXMpaWYodD1yLm1hdGNoKGUpKXt2YXIgdT10aGlzW3JdO3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0WzFdLHUsdS4kKSxkZWxldGUgdGhpc1tyXX19dmFyIG89XCJfX29uXCIrbixhPW4uaW5kZXhPZihcIi5cIiksYz0kO2E+MCYmKG49bi5zbGljZSgwLGEpKTt2YXIgbD1rYS5nZXQobik7cmV0dXJuIGwmJihuPWwsYz1CKSxhP3Q/dTpyOnQ/YjppfWZ1bmN0aW9uICQobix0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dGEuZXZlbnQ7dGEuZXZlbnQ9ZSx0WzBdPXRoaXMuX19kYXRhX187dHJ5e24uYXBwbHkodGhpcyx0KX1maW5hbGx5e3RhLmV2ZW50PXJ9fX1mdW5jdGlvbiBCKG4sdCl7dmFyIGU9JChuLHQpO3JldHVybiBmdW5jdGlvbihuKXt2YXIgdD10aGlzLHI9bi5yZWxhdGVkVGFyZ2V0O3ImJihyPT09dHx8OCZyLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpKXx8ZS5jYWxsKHQsbil9fWZ1bmN0aW9uIFcoZSl7dmFyIHI9XCIuZHJhZ3N1cHByZXNzLVwiKyArK0FhLHU9XCJjbGlja1wiK3IsaT10YS5zZWxlY3QodChlKSkub24oXCJ0b3VjaG1vdmVcIityLFMpLm9uKFwiZHJhZ3N0YXJ0XCIrcixTKS5vbihcInNlbGVjdHN0YXJ0XCIrcixTKTtpZihudWxsPT1FYSYmKEVhPVwib25zZWxlY3RzdGFydFwiaW4gZT8hMTp4KGUuc3R5bGUsXCJ1c2VyU2VsZWN0XCIpKSxFYSl7dmFyIG89bihlKS5zdHlsZSxhPW9bRWFdO29bRWFdPVwibm9uZVwifXJldHVybiBmdW5jdGlvbihuKXtpZihpLm9uKHIsbnVsbCksRWEmJihvW0VhXT1hKSxuKXt2YXIgdD1mdW5jdGlvbigpe2kub24odSxudWxsKX07aS5vbih1LGZ1bmN0aW9uKCl7UygpLHQoKX0sITApLHNldFRpbWVvdXQodCwwKX19fWZ1bmN0aW9uIEoobixlKXtlLmNoYW5nZWRUb3VjaGVzJiYoZT1lLmNoYW5nZWRUb3VjaGVzWzBdKTt2YXIgcj1uLm93bmVyU1ZHRWxlbWVudHx8bjtpZihyLmNyZWF0ZVNWR1BvaW50KXt2YXIgdT1yLmNyZWF0ZVNWR1BvaW50KCk7aWYoMD5OYSl7dmFyIGk9dChuKTtpZihpLnNjcm9sbFh8fGkuc2Nyb2xsWSl7cj10YS5zZWxlY3QoXCJib2R5XCIpLmFwcGVuZChcInN2Z1wiKS5zdHlsZSh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowLGxlZnQ6MCxtYXJnaW46MCxwYWRkaW5nOjAsYm9yZGVyOlwibm9uZVwifSxcImltcG9ydGFudFwiKTt2YXIgbz1yWzBdWzBdLmdldFNjcmVlbkNUTSgpO05hPSEoby5mfHxvLmUpLHIucmVtb3ZlKCl9fXJldHVybiBOYT8odS54PWUucGFnZVgsdS55PWUucGFnZVkpOih1Lng9ZS5jbGllbnRYLHUueT1lLmNsaWVudFkpLHU9dS5tYXRyaXhUcmFuc2Zvcm0obi5nZXRTY3JlZW5DVE0oKS5pbnZlcnNlKCkpLFt1LngsdS55XX12YXIgYT1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybltlLmNsaWVudFgtYS5sZWZ0LW4uY2xpZW50TGVmdCxlLmNsaWVudFktYS50b3Atbi5jbGllbnRUb3BdfWZ1bmN0aW9uIEcoKXtyZXR1cm4gdGEuZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uaWRlbnRpZmllcn1mdW5jdGlvbiBLKG4pe3JldHVybiBuPjA/MTowPm4/LTE6MH1mdW5jdGlvbiBRKG4sdCxlKXtyZXR1cm4odFswXS1uWzBdKSooZVsxXS1uWzFdKS0odFsxXS1uWzFdKSooZVswXS1uWzBdKX1mdW5jdGlvbiBudChuKXtyZXR1cm4gbj4xPzA6LTE+bj9xYTpNYXRoLmFjb3Mobil9ZnVuY3Rpb24gdHQobil7cmV0dXJuIG4+MT9SYTotMT5uPy1SYTpNYXRoLmFzaW4obil9ZnVuY3Rpb24gZXQobil7cmV0dXJuKChuPU1hdGguZXhwKG4pKS0xL24pLzJ9ZnVuY3Rpb24gcnQobil7cmV0dXJuKChuPU1hdGguZXhwKG4pKSsxL24pLzJ9ZnVuY3Rpb24gdXQobil7cmV0dXJuKChuPU1hdGguZXhwKDIqbikpLTEpLyhuKzEpfWZ1bmN0aW9uIGl0KG4pe3JldHVybihuPU1hdGguc2luKG4vMikpKm59ZnVuY3Rpb24gb3QoKXt9ZnVuY3Rpb24gYXQobix0LGUpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgYXQ/KHRoaXMuaD0rbix0aGlzLnM9K3Qsdm9pZCh0aGlzLmw9K2UpKTphcmd1bWVudHMubGVuZ3RoPDI/biBpbnN0YW5jZW9mIGF0P25ldyBhdChuLmgsbi5zLG4ubCk6YnQoXCJcIituLF90LGF0KTpuZXcgYXQobix0LGUpfWZ1bmN0aW9uIGN0KG4sdCxlKXtmdW5jdGlvbiByKG4pe3JldHVybiBuPjM2MD9uLT0zNjA6MD5uJiYobis9MzYwKSw2MD5uP2krKG8taSkqbi82MDoxODA+bj9vOjI0MD5uP2krKG8taSkqKDI0MC1uKS82MDppfWZ1bmN0aW9uIHUobil7cmV0dXJuIE1hdGgucm91bmQoMjU1KnIobikpfXZhciBpLG87cmV0dXJuIG49aXNOYU4obik/MDoobiU9MzYwKTwwP24rMzYwOm4sdD1pc05hTih0KT8wOjA+dD8wOnQ+MT8xOnQsZT0wPmU/MDplPjE/MTplLG89LjU+PWU/ZSooMSt0KTplK3QtZSp0LGk9MiplLW8sbmV3IG10KHUobisxMjApLHUobiksdShuLTEyMCkpfWZ1bmN0aW9uIGx0KG4sdCxlKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGx0Pyh0aGlzLmg9K24sdGhpcy5jPSt0LHZvaWQodGhpcy5sPStlKSk6YXJndW1lbnRzLmxlbmd0aDwyP24gaW5zdGFuY2VvZiBsdD9uZXcgbHQobi5oLG4uYyxuLmwpOm4gaW5zdGFuY2VvZiBmdD9ndChuLmwsbi5hLG4uYik6Z3QoKG49d3QoKG49dGEucmdiKG4pKS5yLG4uZyxuLmIpKS5sLG4uYSxuLmIpOm5ldyBsdChuLHQsZSl9ZnVuY3Rpb24gc3Qobix0LGUpe3JldHVybiBpc05hTihuKSYmKG49MCksaXNOYU4odCkmJih0PTApLG5ldyBmdChlLE1hdGguY29zKG4qPURhKSp0LE1hdGguc2luKG4pKnQpfWZ1bmN0aW9uIGZ0KG4sdCxlKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGZ0Pyh0aGlzLmw9K24sdGhpcy5hPSt0LHZvaWQodGhpcy5iPStlKSk6YXJndW1lbnRzLmxlbmd0aDwyP24gaW5zdGFuY2VvZiBmdD9uZXcgZnQobi5sLG4uYSxuLmIpOm4gaW5zdGFuY2VvZiBsdD9zdChuLmgsbi5jLG4ubCk6d3QoKG49bXQobikpLnIsbi5nLG4uYik6bmV3IGZ0KG4sdCxlKX1mdW5jdGlvbiBodChuLHQsZSl7dmFyIHI9KG4rMTYpLzExNix1PXIrdC81MDAsaT1yLWUvMjAwO3JldHVybiB1PXB0KHUpKlhhLHI9cHQocikqJGEsaT1wdChpKSpCYSxuZXcgbXQoZHQoMy4yNDA0NTQyKnUtMS41MzcxMzg1KnItLjQ5ODUzMTQqaSksZHQoLS45NjkyNjYqdSsxLjg3NjAxMDgqcisuMDQxNTU2KmkpLGR0KC4wNTU2NDM0KnUtLjIwNDAyNTkqcisxLjA1NzIyNTIqaSkpfWZ1bmN0aW9uIGd0KG4sdCxlKXtyZXR1cm4gbj4wP25ldyBsdChNYXRoLmF0YW4yKGUsdCkqUGEsTWF0aC5zcXJ0KHQqdCtlKmUpLG4pOm5ldyBsdCgwLzAsMC8wLG4pfWZ1bmN0aW9uIHB0KG4pe3JldHVybiBuPi4yMDY4OTMwMzQ/bipuKm46KG4tNC8yOSkvNy43ODcwMzd9ZnVuY3Rpb24gdnQobil7cmV0dXJuIG4+LjAwODg1Nj9NYXRoLnBvdyhuLDEvMyk6Ny43ODcwMzcqbis0LzI5fWZ1bmN0aW9uIGR0KG4pe3JldHVybiBNYXRoLnJvdW5kKDI1NSooLjAwMzA0Pj1uPzEyLjkyKm46MS4wNTUqTWF0aC5wb3cobiwxLzIuNCktLjA1NSkpfWZ1bmN0aW9uIG10KG4sdCxlKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG10Pyh0aGlzLnI9fn5uLHRoaXMuZz1+fnQsdm9pZCh0aGlzLmI9fn5lKSk6YXJndW1lbnRzLmxlbmd0aDwyP24gaW5zdGFuY2VvZiBtdD9uZXcgbXQobi5yLG4uZyxuLmIpOmJ0KFwiXCIrbixtdCxjdCk6bmV3IG10KG4sdCxlKX1mdW5jdGlvbiB5dChuKXtyZXR1cm4gbmV3IG10KG4+PjE2LG4+PjgmMjU1LDI1NSZuKX1mdW5jdGlvbiBNdChuKXtyZXR1cm4geXQobikrXCJcIn1mdW5jdGlvbiB4dChuKXtyZXR1cm4gMTY+bj9cIjBcIitNYXRoLm1heCgwLG4pLnRvU3RyaW5nKDE2KTpNYXRoLm1pbigyNTUsbikudG9TdHJpbmcoMTYpfWZ1bmN0aW9uIGJ0KG4sdCxlKXt2YXIgcix1LGksbz0wLGE9MCxjPTA7aWYocj0vKFthLXpdKylcXCgoLiopXFwpL2kuZXhlYyhuKSlzd2l0Y2godT1yWzJdLnNwbGl0KFwiLFwiKSxyWzFdKXtjYXNlXCJoc2xcIjpyZXR1cm4gZShwYXJzZUZsb2F0KHVbMF0pLHBhcnNlRmxvYXQodVsxXSkvMTAwLHBhcnNlRmxvYXQodVsyXSkvMTAwKTtjYXNlXCJyZ2JcIjpyZXR1cm4gdChrdCh1WzBdKSxrdCh1WzFdKSxrdCh1WzJdKSl9cmV0dXJuKGk9R2EuZ2V0KG4udG9Mb3dlckNhc2UoKSkpP3QoaS5yLGkuZyxpLmIpOihudWxsPT1ufHxcIiNcIiE9PW4uY2hhckF0KDApfHxpc05hTihpPXBhcnNlSW50KG4uc2xpY2UoMSksMTYpKXx8KDQ9PT1uLmxlbmd0aD8obz0oMzg0MCZpKT4+NCxvPW8+PjR8byxhPTI0MCZpLGE9YT4+NHxhLGM9MTUmaSxjPWM8PDR8Yyk6Nz09PW4ubGVuZ3RoJiYobz0oMTY3MTE2ODAmaSk+PjE2LGE9KDY1MjgwJmkpPj44LGM9MjU1JmkpKSx0KG8sYSxjKSl9ZnVuY3Rpb24gX3Qobix0LGUpe3ZhciByLHUsaT1NYXRoLm1pbihuLz0yNTUsdC89MjU1LGUvPTI1NSksbz1NYXRoLm1heChuLHQsZSksYT1vLWksYz0obytpKS8yO3JldHVybiBhPyh1PS41PmM/YS8obytpKTphLygyLW8taSkscj1uPT1vPyh0LWUpL2ErKGU+dD82OjApOnQ9PW8/KGUtbikvYSsyOihuLXQpL2ErNCxyKj02MCk6KHI9MC8wLHU9Yz4wJiYxPmM/MDpyKSxuZXcgYXQocix1LGMpfWZ1bmN0aW9uIHd0KG4sdCxlKXtuPVN0KG4pLHQ9U3QodCksZT1TdChlKTt2YXIgcj12dCgoLjQxMjQ1NjQqbisuMzU3NTc2MSp0Ky4xODA0Mzc1KmUpL1hhKSx1PXZ0KCguMjEyNjcyOSpuKy43MTUxNTIyKnQrLjA3MjE3NSplKS8kYSksaT12dCgoLjAxOTMzMzkqbisuMTE5MTkyKnQrLjk1MDMwNDEqZSkvQmEpO3JldHVybiBmdCgxMTYqdS0xNiw1MDAqKHItdSksMjAwKih1LWkpKX1mdW5jdGlvbiBTdChuKXtyZXR1cm4obi89MjU1KTw9LjA0MDQ1P24vMTIuOTI6TWF0aC5wb3coKG4rLjA1NSkvMS4wNTUsMi40KX1mdW5jdGlvbiBrdChuKXt2YXIgdD1wYXJzZUZsb2F0KG4pO3JldHVyblwiJVwiPT09bi5jaGFyQXQobi5sZW5ndGgtMSk/TWF0aC5yb3VuZCgyLjU1KnQpOnR9ZnVuY3Rpb24gRXQobil7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uOmZ1bmN0aW9uKCl7cmV0dXJuIG59fWZ1bmN0aW9uIEF0KG4pe3JldHVybiBmdW5jdGlvbih0LGUscil7cmV0dXJuIDI9PT1hcmd1bWVudHMubGVuZ3RoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiYocj1lLGU9bnVsbCksTnQodCxlLG4scil9fWZ1bmN0aW9uIE50KG4sdCxlLHIpe2Z1bmN0aW9uIHUoKXt2YXIgbix0PWMuc3RhdHVzO2lmKCF0JiZ6dChjKXx8dD49MjAwJiYzMDA+dHx8MzA0PT09dCl7dHJ5e249ZS5jYWxsKGksYyl9Y2F0Y2gocil7cmV0dXJuIHZvaWQgby5lcnJvci5jYWxsKGkscil9by5sb2FkLmNhbGwoaSxuKX1lbHNlIG8uZXJyb3IuY2FsbChpLGMpfXZhciBpPXt9LG89dGEuZGlzcGF0Y2goXCJiZWZvcmVzZW5kXCIsXCJwcm9ncmVzc1wiLFwibG9hZFwiLFwiZXJyb3JcIiksYT17fSxjPW5ldyBYTUxIdHRwUmVxdWVzdCxsPW51bGw7cmV0dXJuIXRoaXMuWERvbWFpblJlcXVlc3R8fFwid2l0aENyZWRlbnRpYWxzXCJpbiBjfHwhL14oaHR0cChzKT86KT9cXC9cXC8vLnRlc3Qobil8fChjPW5ldyBYRG9tYWluUmVxdWVzdCksXCJvbmxvYWRcImluIGM/Yy5vbmxvYWQ9Yy5vbmVycm9yPXU6Yy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtjLnJlYWR5U3RhdGU+MyYmdSgpfSxjLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24obil7dmFyIHQ9dGEuZXZlbnQ7dGEuZXZlbnQ9bjt0cnl7by5wcm9ncmVzcy5jYWxsKGksYyl9ZmluYWxseXt0YS5ldmVudD10fX0saS5oZWFkZXI9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj0obitcIlwiKS50b0xvd2VyQ2FzZSgpLGFyZ3VtZW50cy5sZW5ndGg8Mj9hW25dOihudWxsPT10P2RlbGV0ZSBhW25dOmFbbl09dCtcIlwiLGkpfSxpLm1pbWVUeXBlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PW51bGw9PW4/bnVsbDpuK1wiXCIsaSk6dH0saS5yZXNwb25zZVR5cGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGw9bixpKTpsfSxpLnJlc3BvbnNlPWZ1bmN0aW9uKG4pe3JldHVybiBlPW4saX0sW1wiZ2V0XCIsXCJwb3N0XCJdLmZvckVhY2goZnVuY3Rpb24obil7aVtuXT1mdW5jdGlvbigpe3JldHVybiBpLnNlbmQuYXBwbHkoaSxbbl0uY29uY2F0KHJhKGFyZ3VtZW50cykpKX19KSxpLnNlbmQ9ZnVuY3Rpb24oZSxyLHUpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYodT1yLHI9bnVsbCksYy5vcGVuKGUsbiwhMCksbnVsbD09dHx8XCJhY2NlcHRcImluIGF8fChhLmFjY2VwdD10K1wiLCovKlwiKSxjLnNldFJlcXVlc3RIZWFkZXIpZm9yKHZhciBzIGluIGEpYy5zZXRSZXF1ZXN0SGVhZGVyKHMsYVtzXSk7cmV0dXJuIG51bGwhPXQmJmMub3ZlcnJpZGVNaW1lVHlwZSYmYy5vdmVycmlkZU1pbWVUeXBlKHQpLG51bGwhPWwmJihjLnJlc3BvbnNlVHlwZT1sKSxudWxsIT11JiZpLm9uKFwiZXJyb3JcIix1KS5vbihcImxvYWRcIixmdW5jdGlvbihuKXt1KG51bGwsbil9KSxvLmJlZm9yZXNlbmQuY2FsbChpLGMpLGMuc2VuZChudWxsPT1yP251bGw6ciksaX0saS5hYm9ydD1mdW5jdGlvbigpe3JldHVybiBjLmFib3J0KCksaX0sdGEucmViaW5kKGksbyxcIm9uXCIpLG51bGw9PXI/aTppLmdldChDdChyKSl9ZnVuY3Rpb24gQ3Qobil7cmV0dXJuIDE9PT1uLmxlbmd0aD9mdW5jdGlvbih0LGUpe24obnVsbD09dD9lOm51bGwpfTpufWZ1bmN0aW9uIHp0KG4pe3ZhciB0PW4ucmVzcG9uc2VUeXBlO3JldHVybiB0JiZcInRleHRcIiE9PXQ/bi5yZXNwb25zZTpuLnJlc3BvbnNlVGV4dH1mdW5jdGlvbiBxdCgpe3ZhciBuPUx0KCksdD1UdCgpLW47dD4yND8oaXNGaW5pdGUodCkmJihjbGVhclRpbWVvdXQodGMpLHRjPXNldFRpbWVvdXQocXQsdCkpLG5jPTApOihuYz0xLHJjKHF0KSl9ZnVuY3Rpb24gTHQoKXt2YXIgbj1EYXRlLm5vdygpO2ZvcihlYz1LYTtlYzspbj49ZWMudCYmKGVjLmY9ZWMuYyhuLWVjLnQpKSxlYz1lYy5uO3JldHVybiBufWZ1bmN0aW9uIFR0KCl7Zm9yKHZhciBuLHQ9S2EsZT0xLzA7dDspdC5mP3Q9bj9uLm49dC5uOkthPXQubjoodC50PGUmJihlPXQudCksdD0obj10KS5uKTtyZXR1cm4gUWE9bixlfWZ1bmN0aW9uIFJ0KG4sdCl7cmV0dXJuIHQtKG4/TWF0aC5jZWlsKE1hdGgubG9nKG4pL01hdGguTE4xMCk6MSl9ZnVuY3Rpb24gRHQobix0KXt2YXIgZT1NYXRoLnBvdygxMCwzKmdhKDgtdCkpO3JldHVybntzY2FsZTp0Pjg/ZnVuY3Rpb24obil7cmV0dXJuIG4vZX06ZnVuY3Rpb24obil7cmV0dXJuIG4qZX0sc3ltYm9sOm59fWZ1bmN0aW9uIFB0KG4pe3ZhciB0PW4uZGVjaW1hbCxlPW4udGhvdXNhbmRzLHI9bi5ncm91cGluZyx1PW4uY3VycmVuY3ksaT1yJiZlP2Z1bmN0aW9uKG4sdCl7Zm9yKHZhciB1PW4ubGVuZ3RoLGk9W10sbz0wLGE9clswXSxjPTA7dT4wJiZhPjAmJihjK2ErMT50JiYoYT1NYXRoLm1heCgxLHQtYykpLGkucHVzaChuLnN1YnN0cmluZyh1LT1hLHUrYSkpLCEoKGMrPWErMSk+dCkpOylhPXJbbz0obysxKSVyLmxlbmd0aF07cmV0dXJuIGkucmV2ZXJzZSgpLmpvaW4oZSl9Onk7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBlPWljLmV4ZWMobikscj1lWzFdfHxcIiBcIixvPWVbMl18fFwiPlwiLGE9ZVszXXx8XCItXCIsYz1lWzRdfHxcIlwiLGw9ZVs1XSxzPStlWzZdLGY9ZVs3XSxoPWVbOF0sZz1lWzldLHA9MSx2PVwiXCIsZD1cIlwiLG09ITEseT0hMDtzd2l0Y2goaCYmKGg9K2guc3Vic3RyaW5nKDEpKSwobHx8XCIwXCI9PT1yJiZcIj1cIj09PW8pJiYobD1yPVwiMFwiLG89XCI9XCIpLGcpe2Nhc2VcIm5cIjpmPSEwLGc9XCJnXCI7YnJlYWs7Y2FzZVwiJVwiOnA9MTAwLGQ9XCIlXCIsZz1cImZcIjticmVhaztjYXNlXCJwXCI6cD0xMDAsZD1cIiVcIixnPVwiclwiO2JyZWFrO2Nhc2VcImJcIjpjYXNlXCJvXCI6Y2FzZVwieFwiOmNhc2VcIlhcIjpcIiNcIj09PWMmJih2PVwiMFwiK2cudG9Mb3dlckNhc2UoKSk7Y2FzZVwiY1wiOnk9ITE7Y2FzZVwiZFwiOm09ITAsaD0wO2JyZWFrO2Nhc2VcInNcIjpwPS0xLGc9XCJyXCJ9XCIkXCI9PT1jJiYodj11WzBdLGQ9dVsxXSksXCJyXCIhPWd8fGh8fChnPVwiZ1wiKSxudWxsIT1oJiYoXCJnXCI9PWc/aD1NYXRoLm1heCgxLE1hdGgubWluKDIxLGgpKTooXCJlXCI9PWd8fFwiZlwiPT1nKSYmKGg9TWF0aC5tYXgoMCxNYXRoLm1pbigyMCxoKSkpKSxnPW9jLmdldChnKXx8VXQ7dmFyIE09bCYmZjtyZXR1cm4gZnVuY3Rpb24obil7dmFyIGU9ZDtpZihtJiZuJTEpcmV0dXJuXCJcIjt2YXIgdT0wPm58fDA9PT1uJiYwPjEvbj8obj0tbixcIi1cIik6XCItXCI9PT1hP1wiXCI6YTtpZigwPnApe3ZhciBjPXRhLmZvcm1hdFByZWZpeChuLGgpO249Yy5zY2FsZShuKSxlPWMuc3ltYm9sK2R9ZWxzZSBuKj1wO249ZyhuLGgpO3ZhciB4LGIsXz1uLmxhc3RJbmRleE9mKFwiLlwiKTtpZigwPl8pe3ZhciB3PXk/bi5sYXN0SW5kZXhPZihcImVcIik6LTE7MD53Pyh4PW4sYj1cIlwiKTooeD1uLnN1YnN0cmluZygwLHcpLGI9bi5zdWJzdHJpbmcodykpfWVsc2UgeD1uLnN1YnN0cmluZygwLF8pLGI9dCtuLnN1YnN0cmluZyhfKzEpOyFsJiZmJiYoeD1pKHgsMS8wKSk7dmFyIFM9di5sZW5ndGgreC5sZW5ndGgrYi5sZW5ndGgrKE0/MDp1Lmxlbmd0aCksaz1zPlM/bmV3IEFycmF5KFM9cy1TKzEpLmpvaW4ocik6XCJcIjtyZXR1cm4gTSYmKHg9aShrK3gsay5sZW5ndGg/cy1iLmxlbmd0aDoxLzApKSx1Kz12LG49eCtiLChcIjxcIj09PW8/dStuK2s6XCI+XCI9PT1vP2srdStuOlwiXlwiPT09bz9rLnN1YnN0cmluZygwLFM+Pj0xKSt1K24ray5zdWJzdHJpbmcoUyk6dSsoTT9uOmsrbikpK2V9fX1mdW5jdGlvbiBVdChuKXtyZXR1cm4gbitcIlwifWZ1bmN0aW9uIGp0KCl7dGhpcy5fPW5ldyBEYXRlKGFyZ3VtZW50cy5sZW5ndGg+MT9EYXRlLlVUQy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6YXJndW1lbnRzWzBdKX1mdW5jdGlvbiBGdChuLHQsZSl7ZnVuY3Rpb24gcih0KXt2YXIgZT1uKHQpLHI9aShlLDEpO3JldHVybiByLXQ+dC1lP2U6cn1mdW5jdGlvbiB1KGUpe3JldHVybiB0KGU9bihuZXcgY2MoZS0xKSksMSksZX1mdW5jdGlvbiBpKG4sZSl7cmV0dXJuIHQobj1uZXcgY2MoK24pLGUpLG59ZnVuY3Rpb24gbyhuLHIsaSl7dmFyIG89dShuKSxhPVtdO2lmKGk+MSlmb3IoO3I+bzspZShvKSVpfHxhLnB1c2gobmV3IERhdGUoK28pKSx0KG8sMSk7ZWxzZSBmb3IoO3I+bzspYS5wdXNoKG5ldyBEYXRlKCtvKSksdChvLDEpO3JldHVybiBhfWZ1bmN0aW9uIGEobix0LGUpe3RyeXtjYz1qdDt2YXIgcj1uZXcganQ7cmV0dXJuIHIuXz1uLG8ocix0LGUpfWZpbmFsbHl7Y2M9RGF0ZX19bi5mbG9vcj1uLG4ucm91bmQ9cixuLmNlaWw9dSxuLm9mZnNldD1pLG4ucmFuZ2U9bzt2YXIgYz1uLnV0Yz1IdChuKTtyZXR1cm4gYy5mbG9vcj1jLGMucm91bmQ9SHQociksYy5jZWlsPUh0KHUpLGMub2Zmc2V0PUh0KGkpLGMucmFuZ2U9YSxufWZ1bmN0aW9uIEh0KG4pe3JldHVybiBmdW5jdGlvbih0LGUpe3RyeXtjYz1qdDt2YXIgcj1uZXcganQ7cmV0dXJuIHIuXz10LG4ocixlKS5ffWZpbmFsbHl7Y2M9RGF0ZX19fWZ1bmN0aW9uIE90KG4pe2Z1bmN0aW9uIHQobil7ZnVuY3Rpb24gdCh0KXtmb3IodmFyIGUsdSxpLG89W10sYT0tMSxjPTA7KythPHI7KTM3PT09bi5jaGFyQ29kZUF0KGEpJiYoby5wdXNoKG4uc2xpY2UoYyxhKSksbnVsbCE9KHU9c2NbZT1uLmNoYXJBdCgrK2EpXSkmJihlPW4uY2hhckF0KCsrYSkpLChpPU5bZV0pJiYoZT1pKHQsbnVsbD09dT9cImVcIj09PWU/XCIgXCI6XCIwXCI6dSkpLG8ucHVzaChlKSxjPWErMSk7cmV0dXJuIG8ucHVzaChuLnNsaWNlKGMsYSkpLG8uam9pbihcIlwiKX12YXIgcj1uLmxlbmd0aDtyZXR1cm4gdC5wYXJzZT1mdW5jdGlvbih0KXt2YXIgcj17eToxOTAwLG06MCxkOjEsSDowLE06MCxTOjAsTDowLFo6bnVsbH0sdT1lKHIsbix0LDApO2lmKHUhPXQubGVuZ3RoKXJldHVybiBudWxsO1wicFwiaW4gciYmKHIuSD1yLkglMTIrMTIqci5wKTt2YXIgaT1udWxsIT1yLlomJmNjIT09anQsbz1uZXcoaT9qdDpjYyk7cmV0dXJuXCJqXCJpbiByP28uc2V0RnVsbFllYXIoci55LDAsci5qKTpcIndcImluIHImJihcIldcImluIHJ8fFwiVVwiaW4gcik/KG8uc2V0RnVsbFllYXIoci55LDAsMSksby5zZXRGdWxsWWVhcihyLnksMCxcIldcImluIHI/KHIudys2KSU3Kzcqci5XLShvLmdldERheSgpKzUpJTc6ci53Kzcqci5VLShvLmdldERheSgpKzYpJTcpKTpvLnNldEZ1bGxZZWFyKHIueSxyLm0sci5kKSxvLnNldEhvdXJzKHIuSCsoci5aLzEwMHwwKSxyLk0rci5aJTEwMCxyLlMsci5MKSxpP28uXzpvfSx0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIG59LHR9ZnVuY3Rpb24gZShuLHQsZSxyKXtmb3IodmFyIHUsaSxvLGE9MCxjPXQubGVuZ3RoLGw9ZS5sZW5ndGg7Yz5hOyl7aWYocj49bClyZXR1cm4tMTtpZih1PXQuY2hhckNvZGVBdChhKyspLDM3PT09dSl7aWYobz10LmNoYXJBdChhKyspLGk9Q1tvIGluIHNjP3QuY2hhckF0KGErKyk6b10sIWl8fChyPWkobixlLHIpKTwwKXJldHVybi0xfWVsc2UgaWYodSE9ZS5jaGFyQ29kZUF0KHIrKykpcmV0dXJuLTF9cmV0dXJuIHJ9ZnVuY3Rpb24gcihuLHQsZSl7Xy5sYXN0SW5kZXg9MDt2YXIgcj1fLmV4ZWModC5zbGljZShlKSk7cmV0dXJuIHI/KG4udz13LmdldChyWzBdLnRvTG93ZXJDYXNlKCkpLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIHUobix0LGUpe3gubGFzdEluZGV4PTA7dmFyIHI9eC5leGVjKHQuc2xpY2UoZSkpO3JldHVybiByPyhuLnc9Yi5nZXQoclswXS50b0xvd2VyQ2FzZSgpKSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBpKG4sdCxlKXtFLmxhc3RJbmRleD0wO3ZhciByPUUuZXhlYyh0LnNsaWNlKGUpKTtyZXR1cm4gcj8obi5tPUEuZ2V0KHJbMF0udG9Mb3dlckNhc2UoKSksZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gbyhuLHQsZSl7Uy5sYXN0SW5kZXg9MDt2YXIgcj1TLmV4ZWModC5zbGljZShlKSk7cmV0dXJuIHI/KG4ubT1rLmdldChyWzBdLnRvTG93ZXJDYXNlKCkpLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGEobix0LHIpe3JldHVybiBlKG4sTi5jLnRvU3RyaW5nKCksdCxyKX1mdW5jdGlvbiBjKG4sdCxyKXtyZXR1cm4gZShuLE4ueC50b1N0cmluZygpLHQscil9ZnVuY3Rpb24gbChuLHQscil7cmV0dXJuIGUobixOLlgudG9TdHJpbmcoKSx0LHIpfWZ1bmN0aW9uIHMobix0LGUpe3ZhciByPU0uZ2V0KHQuc2xpY2UoZSxlKz0yKS50b0xvd2VyQ2FzZSgpKTtyZXR1cm4gbnVsbD09cj8tMToobi5wPXIsZSl9dmFyIGY9bi5kYXRlVGltZSxoPW4uZGF0ZSxnPW4udGltZSxwPW4ucGVyaW9kcyx2PW4uZGF5cyxkPW4uc2hvcnREYXlzLG09bi5tb250aHMseT1uLnNob3J0TW9udGhzO3QudXRjPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGUobil7dHJ5e2NjPWp0O3ZhciB0PW5ldyBjYztyZXR1cm4gdC5fPW4scih0KX1maW5hbGx5e2NjPURhdGV9fXZhciByPXQobik7cmV0dXJuIGUucGFyc2U9ZnVuY3Rpb24obil7dHJ5e2NjPWp0O3ZhciB0PXIucGFyc2Uobik7cmV0dXJuIHQmJnQuX31maW5hbGx5e2NjPURhdGV9fSxlLnRvU3RyaW5nPXIudG9TdHJpbmcsZX0sdC5tdWx0aT10LnV0Yy5tdWx0aT1hZTt2YXIgTT10YS5tYXAoKSx4PVl0KHYpLGI9WnQodiksXz1ZdChkKSx3PVp0KGQpLFM9WXQobSksaz1adChtKSxFPVl0KHkpLEE9WnQoeSk7cC5mb3JFYWNoKGZ1bmN0aW9uKG4sdCl7TS5zZXQobi50b0xvd2VyQ2FzZSgpLHQpfSk7dmFyIE49e2E6ZnVuY3Rpb24obil7cmV0dXJuIGRbbi5nZXREYXkoKV19LEE6ZnVuY3Rpb24obil7cmV0dXJuIHZbbi5nZXREYXkoKV19LGI6ZnVuY3Rpb24obil7cmV0dXJuIHlbbi5nZXRNb250aCgpXX0sQjpmdW5jdGlvbihuKXtyZXR1cm4gbVtuLmdldE1vbnRoKCldfSxjOnQoZiksZDpmdW5jdGlvbihuLHQpe3JldHVybiBJdChuLmdldERhdGUoKSx0LDIpfSxlOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIEl0KG4uZ2V0RGF0ZSgpLHQsMil9LEg6ZnVuY3Rpb24obix0KXtyZXR1cm4gSXQobi5nZXRIb3VycygpLHQsMil9LEk6ZnVuY3Rpb24obix0KXtyZXR1cm4gSXQobi5nZXRIb3VycygpJTEyfHwxMix0LDIpfSxqOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIEl0KDErYWMuZGF5T2ZZZWFyKG4pLHQsMyl9LEw6ZnVuY3Rpb24obix0KXtyZXR1cm4gSXQobi5nZXRNaWxsaXNlY29uZHMoKSx0LDMpfSxtOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIEl0KG4uZ2V0TW9udGgoKSsxLHQsMil9LE06ZnVuY3Rpb24obix0KXtyZXR1cm4gSXQobi5nZXRNaW51dGVzKCksdCwyKX0scDpmdW5jdGlvbihuKXtyZXR1cm4gcFsrKG4uZ2V0SG91cnMoKT49MTIpXX0sUzpmdW5jdGlvbihuLHQpe3JldHVybiBJdChuLmdldFNlY29uZHMoKSx0LDIpfSxVOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIEl0KGFjLnN1bmRheU9mWWVhcihuKSx0LDIpfSx3OmZ1bmN0aW9uKG4pe3JldHVybiBuLmdldERheSgpfSxXOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIEl0KGFjLm1vbmRheU9mWWVhcihuKSx0LDIpfSx4OnQoaCksWDp0KGcpLHk6ZnVuY3Rpb24obix0KXtyZXR1cm4gSXQobi5nZXRGdWxsWWVhcigpJTEwMCx0LDIpfSxZOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIEl0KG4uZ2V0RnVsbFllYXIoKSUxZTQsdCw0KX0sWjppZSxcIiVcIjpmdW5jdGlvbigpe3JldHVyblwiJVwifX0sQz17YTpyLEE6dSxiOmksQjpvLGM6YSxkOlF0LGU6UXQsSDp0ZSxJOnRlLGo6bmUsTDp1ZSxtOkt0LE06ZWUscDpzLFM6cmUsVTpYdCx3OlZ0LFc6JHQseDpjLFg6bCx5Old0LFk6QnQsWjpKdCxcIiVcIjpvZX07cmV0dXJuIHR9ZnVuY3Rpb24gSXQobix0LGUpe3ZhciByPTA+bj9cIi1cIjpcIlwiLHU9KHI/LW46bikrXCJcIixpPXUubGVuZ3RoO3JldHVybiByKyhlPmk/bmV3IEFycmF5KGUtaSsxKS5qb2luKHQpK3U6dSl9ZnVuY3Rpb24gWXQobil7cmV0dXJuIG5ldyBSZWdFeHAoXCJeKD86XCIrbi5tYXAodGEucmVxdW90ZSkuam9pbihcInxcIikrXCIpXCIsXCJpXCIpfWZ1bmN0aW9uIFp0KG4pe2Zvcih2YXIgdD1uZXcgbCxlPS0xLHI9bi5sZW5ndGg7KytlPHI7KXQuc2V0KG5bZV0udG9Mb3dlckNhc2UoKSxlKTtyZXR1cm4gdH1mdW5jdGlvbiBWdChuLHQsZSl7ZmMubGFzdEluZGV4PTA7dmFyIHI9ZmMuZXhlYyh0LnNsaWNlKGUsZSsxKSk7cmV0dXJuIHI/KG4udz0rclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBYdChuLHQsZSl7ZmMubGFzdEluZGV4PTA7dmFyIHI9ZmMuZXhlYyh0LnNsaWNlKGUpKTtyZXR1cm4gcj8obi5VPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uICR0KG4sdCxlKXtmYy5sYXN0SW5kZXg9MDt2YXIgcj1mYy5leGVjKHQuc2xpY2UoZSkpO3JldHVybiByPyhuLlc9K3JbMF0sZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gQnQobix0LGUpe2ZjLmxhc3RJbmRleD0wO3ZhciByPWZjLmV4ZWModC5zbGljZShlLGUrNCkpO3JldHVybiByPyhuLnk9K3JbMF0sZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gV3Qobix0LGUpe2ZjLmxhc3RJbmRleD0wO3ZhciByPWZjLmV4ZWModC5zbGljZShlLGUrMikpO3JldHVybiByPyhuLnk9R3QoK3JbMF0pLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIEp0KG4sdCxlKXtyZXR1cm4vXlsrLV1cXGR7NH0kLy50ZXN0KHQ9dC5zbGljZShlLGUrNSkpPyhuLlo9LXQsZSs1KTotMX1mdW5jdGlvbiBHdChuKXtyZXR1cm4gbisobj42OD8xOTAwOjJlMyl9ZnVuY3Rpb24gS3Qobix0LGUpe2ZjLmxhc3RJbmRleD0wO3ZhciByPWZjLmV4ZWModC5zbGljZShlLGUrMikpO3JldHVybiByPyhuLm09clswXS0xLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIFF0KG4sdCxlKXtmYy5sYXN0SW5kZXg9MDt2YXIgcj1mYy5leGVjKHQuc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8obi5kPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIG5lKG4sdCxlKXtmYy5sYXN0SW5kZXg9MDt2YXIgcj1mYy5leGVjKHQuc2xpY2UoZSxlKzMpKTtyZXR1cm4gcj8obi5qPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIHRlKG4sdCxlKXtmYy5sYXN0SW5kZXg9MDt2YXIgcj1mYy5leGVjKHQuc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8obi5IPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGVlKG4sdCxlKXtmYy5sYXN0SW5kZXg9MDt2YXIgcj1mYy5leGVjKHQuc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8obi5NPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIHJlKG4sdCxlKXtmYy5sYXN0SW5kZXg9MDt2YXIgcj1mYy5leGVjKHQuc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8obi5TPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIHVlKG4sdCxlKXtmYy5sYXN0SW5kZXg9MDt2YXIgcj1mYy5leGVjKHQuc2xpY2UoZSxlKzMpKTtyZXR1cm4gcj8obi5MPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGllKG4pe3ZhciB0PW4uZ2V0VGltZXpvbmVPZmZzZXQoKSxlPXQ+MD9cIi1cIjpcIitcIixyPWdhKHQpLzYwfDAsdT1nYSh0KSU2MDtyZXR1cm4gZStJdChyLFwiMFwiLDIpK0l0KHUsXCIwXCIsMil9ZnVuY3Rpb24gb2Uobix0LGUpe2hjLmxhc3RJbmRleD0wO3ZhciByPWhjLmV4ZWModC5zbGljZShlLGUrMSkpO3JldHVybiByP2UrclswXS5sZW5ndGg6LTF9ZnVuY3Rpb24gYWUobil7Zm9yKHZhciB0PW4ubGVuZ3RoLGU9LTE7KytlPHQ7KW5bZV1bMF09dGhpcyhuW2VdWzBdKTtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj1uW2VdOyFyWzFdKHQpOylyPW5bKytlXTtyZXR1cm4gclswXSh0KX19ZnVuY3Rpb24gY2UoKXt9ZnVuY3Rpb24gbGUobix0LGUpe3ZhciByPWUucz1uK3QsdT1yLW4saT1yLXU7ZS50PW4taSsodC11KX1mdW5jdGlvbiBzZShuLHQpe24mJmRjLmhhc093blByb3BlcnR5KG4udHlwZSkmJmRjW24udHlwZV0obix0KX1mdW5jdGlvbiBmZShuLHQsZSl7dmFyIHIsdT0tMSxpPW4ubGVuZ3RoLWU7Zm9yKHQubGluZVN0YXJ0KCk7Kyt1PGk7KXI9blt1XSx0LnBvaW50KHJbMF0sclsxXSxyWzJdKTt0LmxpbmVFbmQoKX1mdW5jdGlvbiBoZShuLHQpe3ZhciBlPS0xLHI9bi5sZW5ndGg7Zm9yKHQucG9seWdvblN0YXJ0KCk7KytlPHI7KWZlKG5bZV0sdCwxKTt0LnBvbHlnb25FbmQoKX1mdW5jdGlvbiBnZSgpe2Z1bmN0aW9uIG4obix0KXtuKj1EYSx0PXQqRGEvMitxYS80O3ZhciBlPW4tcixvPWU+PTA/MTotMSxhPW8qZSxjPU1hdGguY29zKHQpLGw9TWF0aC5zaW4odCkscz1pKmwsZj11KmMrcypNYXRoLmNvcyhhKSxoPXMqbypNYXRoLnNpbihhKTt5Yy5hZGQoTWF0aC5hdGFuMihoLGYpKSxyPW4sdT1jLGk9bH12YXIgdCxlLHIsdSxpO01jLnBvaW50PWZ1bmN0aW9uKG8sYSl7TWMucG9pbnQ9bixyPSh0PW8pKkRhLHU9TWF0aC5jb3MoYT0oZT1hKSpEYS8yK3FhLzQpLGk9TWF0aC5zaW4oYSl9LE1jLmxpbmVFbmQ9ZnVuY3Rpb24oKXtuKHQsZSl9fWZ1bmN0aW9uIHBlKG4pe3ZhciB0PW5bMF0sZT1uWzFdLHI9TWF0aC5jb3MoZSk7cmV0dXJuW3IqTWF0aC5jb3ModCkscipNYXRoLnNpbih0KSxNYXRoLnNpbihlKV19ZnVuY3Rpb24gdmUobix0KXtyZXR1cm4gblswXSp0WzBdK25bMV0qdFsxXStuWzJdKnRbMl19ZnVuY3Rpb24gZGUobix0KXtyZXR1cm5bblsxXSp0WzJdLW5bMl0qdFsxXSxuWzJdKnRbMF0tblswXSp0WzJdLG5bMF0qdFsxXS1uWzFdKnRbMF1dfWZ1bmN0aW9uIG1lKG4sdCl7blswXSs9dFswXSxuWzFdKz10WzFdLG5bMl0rPXRbMl19ZnVuY3Rpb24geWUobix0KXtyZXR1cm5bblswXSp0LG5bMV0qdCxuWzJdKnRdfWZ1bmN0aW9uIE1lKG4pe3ZhciB0PU1hdGguc3FydChuWzBdKm5bMF0rblsxXSpuWzFdK25bMl0qblsyXSk7blswXS89dCxuWzFdLz10LG5bMl0vPXR9ZnVuY3Rpb24geGUobil7cmV0dXJuW01hdGguYXRhbjIoblsxXSxuWzBdKSx0dChuWzJdKV19ZnVuY3Rpb24gYmUobix0KXtyZXR1cm4gZ2EoblswXS10WzBdKTxDYSYmZ2EoblsxXS10WzFdKTxDYX1mdW5jdGlvbiBfZShuLHQpe24qPURhO3ZhciBlPU1hdGguY29zKHQqPURhKTt3ZShlKk1hdGguY29zKG4pLGUqTWF0aC5zaW4obiksTWF0aC5zaW4odCkpfWZ1bmN0aW9uIHdlKG4sdCxlKXsrK3hjLF9jKz0obi1fYykveGMsd2MrPSh0LXdjKS94YyxTYys9KGUtU2MpL3hjfWZ1bmN0aW9uIFNlKCl7ZnVuY3Rpb24gbihuLHUpe24qPURhO3ZhciBpPU1hdGguY29zKHUqPURhKSxvPWkqTWF0aC5jb3MobiksYT1pKk1hdGguc2luKG4pLGM9TWF0aC5zaW4odSksbD1NYXRoLmF0YW4yKE1hdGguc3FydCgobD1lKmMtciphKSpsKyhsPXIqby10KmMpKmwrKGw9dCphLWUqbykqbCksdCpvK2UqYStyKmMpO2JjKz1sLGtjKz1sKih0Kyh0PW8pKSxFYys9bCooZSsoZT1hKSksQWMrPWwqKHIrKHI9YykpLHdlKHQsZSxyKX12YXIgdCxlLHI7cWMucG9pbnQ9ZnVuY3Rpb24odSxpKXt1Kj1EYTt2YXIgbz1NYXRoLmNvcyhpKj1EYSk7dD1vKk1hdGguY29zKHUpLGU9bypNYXRoLnNpbih1KSxyPU1hdGguc2luKGkpLHFjLnBvaW50PW4sd2UodCxlLHIpfX1mdW5jdGlvbiBrZSgpe3FjLnBvaW50PV9lfWZ1bmN0aW9uIEVlKCl7ZnVuY3Rpb24gbihuLHQpe24qPURhO3ZhciBlPU1hdGguY29zKHQqPURhKSxvPWUqTWF0aC5jb3MobiksYT1lKk1hdGguc2luKG4pLGM9TWF0aC5zaW4odCksbD11KmMtaSphLHM9aSpvLXIqYyxmPXIqYS11Km8saD1NYXRoLnNxcnQobCpsK3MqcytmKmYpLGc9cipvK3UqYStpKmMscD1oJiYtbnQoZykvaCx2PU1hdGguYXRhbjIoaCxnKTtOYys9cCpsLENjKz1wKnMsemMrPXAqZixiYys9dixrYys9dioocisocj1vKSksRWMrPXYqKHUrKHU9YSkpLEFjKz12KihpKyhpPWMpKSx3ZShyLHUsaSl9dmFyIHQsZSxyLHUsaTtxYy5wb2ludD1mdW5jdGlvbihvLGEpe3Q9byxlPWEscWMucG9pbnQ9bixvKj1EYTt2YXIgYz1NYXRoLmNvcyhhKj1EYSk7cj1jKk1hdGguY29zKG8pLHU9YypNYXRoLnNpbihvKSxpPU1hdGguc2luKGEpLHdlKHIsdSxpKX0scWMubGluZUVuZD1mdW5jdGlvbigpe24odCxlKSxxYy5saW5lRW5kPWtlLHFjLnBvaW50PV9lfX1mdW5jdGlvbiBBZShuLHQpe2Z1bmN0aW9uIGUoZSxyKXtyZXR1cm4gZT1uKGUsciksdChlWzBdLGVbMV0pfXJldHVybiBuLmludmVydCYmdC5pbnZlcnQmJihlLmludmVydD1mdW5jdGlvbihlLHIpe3JldHVybiBlPXQuaW52ZXJ0KGUsciksZSYmbi5pbnZlcnQoZVswXSxlWzFdKX0pLGV9ZnVuY3Rpb24gTmUoKXtyZXR1cm4hMH1mdW5jdGlvbiBDZShuLHQsZSxyLHUpe3ZhciBpPVtdLG89W107aWYobi5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKCEoKHQ9bi5sZW5ndGgtMSk8PTApKXt2YXIgdCxlPW5bMF0scj1uW3RdO2lmKGJlKGUscikpe3UubGluZVN0YXJ0KCk7Zm9yKHZhciBhPTA7dD5hOysrYSl1LnBvaW50KChlPW5bYV0pWzBdLGVbMV0pO3JldHVybiB2b2lkIHUubGluZUVuZCgpfXZhciBjPW5ldyBxZShlLG4sbnVsbCwhMCksbD1uZXcgcWUoZSxudWxsLGMsITEpO2Mubz1sLGkucHVzaChjKSxvLnB1c2gobCksYz1uZXcgcWUocixuLG51bGwsITEpLGw9bmV3IHFlKHIsbnVsbCxjLCEwKSxjLm89bCxpLnB1c2goYyksby5wdXNoKGwpfX0pLG8uc29ydCh0KSx6ZShpKSx6ZShvKSxpLmxlbmd0aCl7Zm9yKHZhciBhPTAsYz1lLGw9by5sZW5ndGg7bD5hOysrYSlvW2FdLmU9Yz0hYztmb3IodmFyIHMsZixoPWlbMF07Oyl7Zm9yKHZhciBnPWgscD0hMDtnLnY7KWlmKChnPWcubik9PT1oKXJldHVybjtzPWcueix1LmxpbmVTdGFydCgpO2Rve2lmKGcudj1nLm8udj0hMCxnLmUpe2lmKHApZm9yKHZhciBhPTAsbD1zLmxlbmd0aDtsPmE7KythKXUucG9pbnQoKGY9c1thXSlbMF0sZlsxXSk7ZWxzZSByKGcueCxnLm4ueCwxLHUpO2c9Zy5ufWVsc2V7aWYocCl7cz1nLnAuejtmb3IodmFyIGE9cy5sZW5ndGgtMTthPj0wOy0tYSl1LnBvaW50KChmPXNbYV0pWzBdLGZbMV0pfWVsc2UgcihnLngsZy5wLngsLTEsdSk7Zz1nLnB9Zz1nLm8scz1nLnoscD0hcH13aGlsZSghZy52KTt1LmxpbmVFbmQoKX19fWZ1bmN0aW9uIHplKG4pe2lmKHQ9bi5sZW5ndGgpe2Zvcih2YXIgdCxlLHI9MCx1PW5bMF07KytyPHQ7KXUubj1lPW5bcl0sZS5wPXUsdT1lO3Uubj1lPW5bMF0sZS5wPXV9fWZ1bmN0aW9uIHFlKG4sdCxlLHIpe3RoaXMueD1uLHRoaXMuej10LHRoaXMubz1lLHRoaXMuZT1yLHRoaXMudj0hMSx0aGlzLm49dGhpcy5wPW51bGx9ZnVuY3Rpb24gTGUobix0LGUscil7cmV0dXJuIGZ1bmN0aW9uKHUsaSl7ZnVuY3Rpb24gbyh0LGUpe3ZhciByPXUodCxlKTtuKHQ9clswXSxlPXJbMV0pJiZpLnBvaW50KHQsZSl9ZnVuY3Rpb24gYShuLHQpe3ZhciBlPXUobix0KTtkLnBvaW50KGVbMF0sZVsxXSl9ZnVuY3Rpb24gYygpe3kucG9pbnQ9YSxkLmxpbmVTdGFydCgpfWZ1bmN0aW9uIGwoKXt5LnBvaW50PW8sZC5saW5lRW5kKCl9ZnVuY3Rpb24gcyhuLHQpe3YucHVzaChbbix0XSk7dmFyIGU9dShuLHQpO3gucG9pbnQoZVswXSxlWzFdKX1mdW5jdGlvbiBmKCl7eC5saW5lU3RhcnQoKSx2PVtdfWZ1bmN0aW9uIGgoKXtzKHZbMF1bMF0sdlswXVsxXSkseC5saW5lRW5kKCk7dmFyIG4sdD14LmNsZWFuKCksZT1NLmJ1ZmZlcigpLHI9ZS5sZW5ndGg7aWYodi5wb3AoKSxwLnB1c2godiksdj1udWxsLHIpaWYoMSZ0KXtuPWVbMF07dmFyIHUscj1uLmxlbmd0aC0xLG89LTE7aWYocj4wKXtmb3IoYnx8KGkucG9seWdvblN0YXJ0KCksYj0hMCksaS5saW5lU3RhcnQoKTsrK288cjspaS5wb2ludCgodT1uW29dKVswXSx1WzFdKTtpLmxpbmVFbmQoKX19ZWxzZSByPjEmJjImdCYmZS5wdXNoKGUucG9wKCkuY29uY2F0KGUuc2hpZnQoKSkpLGcucHVzaChlLmZpbHRlcihUZSkpfXZhciBnLHAsdixkPXQoaSksbT11LmludmVydChyWzBdLHJbMV0pLHk9e3BvaW50Om8sbGluZVN0YXJ0OmMsbGluZUVuZDpsLHBvbHlnb25TdGFydDpmdW5jdGlvbigpe3kucG9pbnQ9cyx5LmxpbmVTdGFydD1mLHkubGluZUVuZD1oLGc9W10scD1bXX0scG9seWdvbkVuZDpmdW5jdGlvbigpe3kucG9pbnQ9byx5LmxpbmVTdGFydD1jLHkubGluZUVuZD1sLGc9dGEubWVyZ2UoZyk7dmFyIG49RmUobSxwKTtnLmxlbmd0aD8oYnx8KGkucG9seWdvblN0YXJ0KCksYj0hMCksQ2UoZyxEZSxuLGUsaSkpOm4mJihifHwoaS5wb2x5Z29uU3RhcnQoKSxiPSEwKSxpLmxpbmVTdGFydCgpLGUobnVsbCxudWxsLDEsaSksaS5saW5lRW5kKCkpLGImJihpLnBvbHlnb25FbmQoKSxiPSExKSxnPXA9bnVsbH0sc3BoZXJlOmZ1bmN0aW9uKCl7aS5wb2x5Z29uU3RhcnQoKSxpLmxpbmVTdGFydCgpLGUobnVsbCxudWxsLDEsaSksaS5saW5lRW5kKCksaS5wb2x5Z29uRW5kKCl9fSxNPVJlKCkseD10KE0pLGI9ITE7cmV0dXJuIHl9fWZ1bmN0aW9uIFRlKG4pe3JldHVybiBuLmxlbmd0aD4xfWZ1bmN0aW9uIFJlKCl7dmFyIG4sdD1bXTtyZXR1cm57bGluZVN0YXJ0OmZ1bmN0aW9uKCl7dC5wdXNoKG49W10pfSxwb2ludDpmdW5jdGlvbih0LGUpe24ucHVzaChbdCxlXSl9LGxpbmVFbmQ6YixidWZmZXI6ZnVuY3Rpb24oKXt2YXIgZT10O3JldHVybiB0PVtdLG49bnVsbCxlfSxyZWpvaW46ZnVuY3Rpb24oKXt0Lmxlbmd0aD4xJiZ0LnB1c2godC5wb3AoKS5jb25jYXQodC5zaGlmdCgpKSl9fX1mdW5jdGlvbiBEZShuLHQpe3JldHVybigobj1uLngpWzBdPDA/blsxXS1SYS1DYTpSYS1uWzFdKS0oKHQ9dC54KVswXTwwP3RbMV0tUmEtQ2E6UmEtdFsxXSl9ZnVuY3Rpb24gUGUobil7dmFyIHQsZT0wLzAscj0wLzAsdT0wLzA7cmV0dXJue2xpbmVTdGFydDpmdW5jdGlvbigpe24ubGluZVN0YXJ0KCksdD0xfSxwb2ludDpmdW5jdGlvbihpLG8pe3ZhciBhPWk+MD9xYTotcWEsYz1nYShpLWUpO2dhKGMtcWEpPENhPyhuLnBvaW50KGUscj0ocitvKS8yPjA/UmE6LVJhKSxuLnBvaW50KHUsciksbi5saW5lRW5kKCksbi5saW5lU3RhcnQoKSxuLnBvaW50KGEsciksbi5wb2ludChpLHIpLHQ9MCk6dSE9PWEmJmM+PXFhJiYoZ2EoZS11KTxDYSYmKGUtPXUqQ2EpLGdhKGktYSk8Q2EmJihpLT1hKkNhKSxyPVVlKGUscixpLG8pLG4ucG9pbnQodSxyKSxuLmxpbmVFbmQoKSxuLmxpbmVTdGFydCgpLG4ucG9pbnQoYSxyKSx0PTApLG4ucG9pbnQoZT1pLHI9byksdT1hfSxsaW5lRW5kOmZ1bmN0aW9uKCl7bi5saW5lRW5kKCksZT1yPTAvMH0sY2xlYW46ZnVuY3Rpb24oKXtyZXR1cm4gMi10fX19ZnVuY3Rpb24gVWUobix0LGUscil7dmFyIHUsaSxvPU1hdGguc2luKG4tZSk7cmV0dXJuIGdhKG8pPkNhP01hdGguYXRhbigoTWF0aC5zaW4odCkqKGk9TWF0aC5jb3MocikpKk1hdGguc2luKGUpLU1hdGguc2luKHIpKih1PU1hdGguY29zKHQpKSpNYXRoLnNpbihuKSkvKHUqaSpvKSk6KHQrcikvMn1mdW5jdGlvbiBqZShuLHQsZSxyKXt2YXIgdTtpZihudWxsPT1uKXU9ZSpSYSxyLnBvaW50KC1xYSx1KSxyLnBvaW50KDAsdSksci5wb2ludChxYSx1KSxyLnBvaW50KHFhLDApLHIucG9pbnQocWEsLXUpLHIucG9pbnQoMCwtdSksci5wb2ludCgtcWEsLXUpLHIucG9pbnQoLXFhLDApLHIucG9pbnQoLXFhLHUpO2Vsc2UgaWYoZ2EoblswXS10WzBdKT5DYSl7dmFyIGk9blswXTx0WzBdP3FhOi1xYTt1PWUqaS8yLHIucG9pbnQoLWksdSksci5wb2ludCgwLHUpLHIucG9pbnQoaSx1KX1lbHNlIHIucG9pbnQodFswXSx0WzFdKX1mdW5jdGlvbiBGZShuLHQpe3ZhciBlPW5bMF0scj1uWzFdLHU9W01hdGguc2luKGUpLC1NYXRoLmNvcyhlKSwwXSxpPTAsbz0wO3ljLnJlc2V0KCk7Zm9yKHZhciBhPTAsYz10Lmxlbmd0aDtjPmE7KythKXt2YXIgbD10W2FdLHM9bC5sZW5ndGg7aWYocylmb3IodmFyIGY9bFswXSxoPWZbMF0sZz1mWzFdLzIrcWEvNCxwPU1hdGguc2luKGcpLHY9TWF0aC5jb3MoZyksZD0xOzspe2Q9PT1zJiYoZD0wKSxuPWxbZF07dmFyIG09blswXSx5PW5bMV0vMitxYS80LE09TWF0aC5zaW4oeSkseD1NYXRoLmNvcyh5KSxiPW0taCxfPWI+PTA/MTotMSx3PV8qYixTPXc+cWEsaz1wKk07aWYoeWMuYWRkKE1hdGguYXRhbjIoaypfKk1hdGguc2luKHcpLHYqeCtrKk1hdGguY29zKHcpKSksaSs9Uz9iK18qTGE6YixTXmg+PWVebT49ZSl7dmFyIEU9ZGUocGUoZikscGUobikpO01lKEUpO3ZhciBBPWRlKHUsRSk7TWUoQSk7dmFyIE49KFNeYj49MD8tMToxKSp0dChBWzJdKTsocj5OfHxyPT09TiYmKEVbMF18fEVbMV0pKSYmKG8rPVNeYj49MD8xOi0xKX1pZighZCsrKWJyZWFrO2g9bSxwPU0sdj14LGY9bn19cmV0dXJuKC1DYT5pfHxDYT5pJiYwPnljKV4xJm99ZnVuY3Rpb24gSGUobil7ZnVuY3Rpb24gdChuLHQpe3JldHVybiBNYXRoLmNvcyhuKSpNYXRoLmNvcyh0KT5pfWZ1bmN0aW9uIGUobil7dmFyIGUsaSxjLGwscztyZXR1cm57bGluZVN0YXJ0OmZ1bmN0aW9uKCl7bD1jPSExLHM9MX0scG9pbnQ6ZnVuY3Rpb24oZixoKXt2YXIgZyxwPVtmLGhdLHY9dChmLGgpLGQ9bz92PzA6dShmLGgpOnY/dShmKygwPmY/cWE6LXFhKSxoKTowO2lmKCFlJiYobD1jPXYpJiZuLmxpbmVTdGFydCgpLHYhPT1jJiYoZz1yKGUscCksKGJlKGUsZyl8fGJlKHAsZykpJiYocFswXSs9Q2EscFsxXSs9Q2Esdj10KHBbMF0scFsxXSkpKSx2IT09YylzPTAsdj8obi5saW5lU3RhcnQoKSxnPXIocCxlKSxuLnBvaW50KGdbMF0sZ1sxXSkpOihnPXIoZSxwKSxuLnBvaW50KGdbMF0sZ1sxXSksbi5saW5lRW5kKCkpLGU9ZztlbHNlIGlmKGEmJmUmJm9edil7dmFyIG07ZCZpfHwhKG09cihwLGUsITApKXx8KHM9MCxvPyhuLmxpbmVTdGFydCgpLG4ucG9pbnQobVswXVswXSxtWzBdWzFdKSxuLnBvaW50KG1bMV1bMF0sbVsxXVsxXSksbi5saW5lRW5kKCkpOihuLnBvaW50KG1bMV1bMF0sbVsxXVsxXSksbi5saW5lRW5kKCksbi5saW5lU3RhcnQoKSxuLnBvaW50KG1bMF1bMF0sbVswXVsxXSkpKX0hdnx8ZSYmYmUoZSxwKXx8bi5wb2ludChwWzBdLHBbMV0pLGU9cCxjPXYsaT1kfSxsaW5lRW5kOmZ1bmN0aW9uKCl7YyYmbi5saW5lRW5kKCksZT1udWxsfSxjbGVhbjpmdW5jdGlvbigpe3JldHVybiBzfChsJiZjKTw8MX19fWZ1bmN0aW9uIHIobix0LGUpe3ZhciByPXBlKG4pLHU9cGUodCksbz1bMSwwLDBdLGE9ZGUocix1KSxjPXZlKGEsYSksbD1hWzBdLHM9Yy1sKmw7aWYoIXMpcmV0dXJuIWUmJm47dmFyIGY9aSpjL3MsaD0taSpsL3MsZz1kZShvLGEpLHA9eWUobyxmKSx2PXllKGEsaCk7bWUocCx2KTt2YXIgZD1nLG09dmUocCxkKSx5PXZlKGQsZCksTT1tKm0teSoodmUocCxwKS0xKTtpZighKDA+TSkpe3ZhciB4PU1hdGguc3FydChNKSxiPXllKGQsKC1tLXgpL3kpO2lmKG1lKGIscCksYj14ZShiKSwhZSlyZXR1cm4gYjt2YXIgXyx3PW5bMF0sUz10WzBdLGs9blsxXSxFPXRbMV07dz5TJiYoXz13LHc9UyxTPV8pO3ZhciBBPVMtdyxOPWdhKEEtcWEpPENhLEM9Tnx8Q2E+QTtpZighTiYmaz5FJiYoXz1rLGs9RSxFPV8pLEM/Tj9rK0U+MF5iWzFdPChnYShiWzBdLXcpPENhP2s6RSk6azw9YlsxXSYmYlsxXTw9RTpBPnFhXih3PD1iWzBdJiZiWzBdPD1TKSl7dmFyIHo9eWUoZCwoLW0reCkveSk7cmV0dXJuIG1lKHoscCksW2IseGUoeildfX19ZnVuY3Rpb24gdSh0LGUpe3ZhciByPW8/bjpxYS1uLHU9MDtyZXR1cm4tcj50P3V8PTE6dD5yJiYodXw9MiksLXI+ZT91fD00OmU+ciYmKHV8PTgpLHV9dmFyIGk9TWF0aC5jb3Mobiksbz1pPjAsYT1nYShpKT5DYSxjPWdyKG4sNipEYSk7cmV0dXJuIExlKHQsZSxjLG8/WzAsLW5dOlstcWEsbi1xYV0pfWZ1bmN0aW9uIE9lKG4sdCxlLHIpe3JldHVybiBmdW5jdGlvbih1KXt2YXIgaSxvPXUuYSxhPXUuYixjPW8ueCxsPW8ueSxzPWEueCxmPWEueSxoPTAsZz0xLHA9cy1jLHY9Zi1sO2lmKGk9bi1jLHB8fCEoaT4wKSl7aWYoaS89cCwwPnApe2lmKGg+aSlyZXR1cm47Zz5pJiYoZz1pKX1lbHNlIGlmKHA+MCl7aWYoaT5nKXJldHVybjtpPmgmJihoPWkpfWlmKGk9ZS1jLHB8fCEoMD5pKSl7aWYoaS89cCwwPnApe2lmKGk+ZylyZXR1cm47aT5oJiYoaD1pKX1lbHNlIGlmKHA+MCl7aWYoaD5pKXJldHVybjtnPmkmJihnPWkpfWlmKGk9dC1sLHZ8fCEoaT4wKSl7aWYoaS89diwwPnYpe2lmKGg+aSlyZXR1cm47Zz5pJiYoZz1pKX1lbHNlIGlmKHY+MCl7aWYoaT5nKXJldHVybjtpPmgmJihoPWkpfWlmKGk9ci1sLHZ8fCEoMD5pKSl7aWYoaS89diwwPnYpe2lmKGk+ZylyZXR1cm47aT5oJiYoaD1pKX1lbHNlIGlmKHY+MCl7aWYoaD5pKXJldHVybjtnPmkmJihnPWkpfXJldHVybiBoPjAmJih1LmE9e3g6YytoKnAseTpsK2gqdn0pLDE+ZyYmKHUuYj17eDpjK2cqcCx5OmwrZyp2fSksdX19fX19fWZ1bmN0aW9uIEllKG4sdCxlLHIpe2Z1bmN0aW9uIHUocix1KXtyZXR1cm4gZ2EoclswXS1uKTxDYT91PjA/MDozOmdhKHJbMF0tZSk8Q2E/dT4wPzI6MTpnYShyWzFdLXQpPENhP3U+MD8xOjA6dT4wPzM6Mn1mdW5jdGlvbiBpKG4sdCl7cmV0dXJuIG8obi54LHQueCl9ZnVuY3Rpb24gbyhuLHQpe3ZhciBlPXUobiwxKSxyPXUodCwxKTtyZXR1cm4gZSE9PXI/ZS1yOjA9PT1lP3RbMV0tblsxXToxPT09ZT9uWzBdLXRbMF06Mj09PWU/blsxXS10WzFdOnRbMF0tblswXX1yZXR1cm4gZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhuKXtmb3IodmFyIHQ9MCxlPWQubGVuZ3RoLHI9blsxXSx1PTA7ZT51OysrdSlmb3IodmFyIGksbz0xLGE9ZFt1XSxjPWEubGVuZ3RoLGw9YVswXTtjPm87KytvKWk9YVtvXSxsWzFdPD1yP2lbMV0+ciYmUShsLGksbik+MCYmKyt0OmlbMV08PXImJlEobCxpLG4pPDAmJi0tdCxsPWk7cmV0dXJuIDAhPT10fWZ1bmN0aW9uIGwoaSxhLGMsbCl7dmFyIHM9MCxmPTA7aWYobnVsbD09aXx8KHM9dShpLGMpKSE9PShmPXUoYSxjKSl8fG8oaSxhKTwwXmM+MCl7ZG8gbC5wb2ludCgwPT09c3x8Mz09PXM/bjplLHM+MT9yOnQpO3doaWxlKChzPShzK2MrNCklNCkhPT1mKX1lbHNlIGwucG9pbnQoYVswXSxhWzFdKX1mdW5jdGlvbiBzKHUsaSl7cmV0dXJuIHU+PW4mJmU+PXUmJmk+PXQmJnI+PWl9ZnVuY3Rpb24gZihuLHQpe3Mobix0KSYmYS5wb2ludChuLHQpfWZ1bmN0aW9uIGgoKXtDLnBvaW50PXAsZCYmZC5wdXNoKG09W10pLFM9ITAsdz0hMSxiPV89MC8wfWZ1bmN0aW9uIGcoKXt2JiYocCh5LE0pLHgmJncmJkEucmVqb2luKCksdi5wdXNoKEEuYnVmZmVyKCkpKSxDLnBvaW50PWYsdyYmYS5saW5lRW5kKCl9ZnVuY3Rpb24gcChuLHQpe249TWF0aC5tYXgoLVRjLE1hdGgubWluKFRjLG4pKSx0PU1hdGgubWF4KC1UYyxNYXRoLm1pbihUYyx0KSk7dmFyIGU9cyhuLHQpO2lmKGQmJm0ucHVzaChbbix0XSksUyl5PW4sTT10LHg9ZSxTPSExLGUmJihhLmxpbmVTdGFydCgpLGEucG9pbnQobix0KSk7ZWxzZSBpZihlJiZ3KWEucG9pbnQobix0KTtlbHNle3ZhciByPXthOnt4OmIseTpffSxiOnt4Om4seTp0fX07TihyKT8od3x8KGEubGluZVN0YXJ0KCksYS5wb2ludChyLmEueCxyLmEueSkpLGEucG9pbnQoci5iLngsci5iLnkpLGV8fGEubGluZUVuZCgpLGs9ITEpOmUmJihhLmxpbmVTdGFydCgpLGEucG9pbnQobix0KSxrPSExKX1iPW4sXz10LHc9ZX12YXIgdixkLG0seSxNLHgsYixfLHcsUyxrLEU9YSxBPVJlKCksTj1PZShuLHQsZSxyKSxDPXtwb2ludDpmLGxpbmVTdGFydDpoLGxpbmVFbmQ6Zyxwb2x5Z29uU3RhcnQ6ZnVuY3Rpb24oKXthPUEsdj1bXSxkPVtdLGs9ITB9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXthPUUsdj10YS5tZXJnZSh2KTt2YXIgdD1jKFtuLHJdKSxlPWsmJnQsdT12Lmxlbmd0aDsoZXx8dSkmJihhLnBvbHlnb25TdGFydCgpLGUmJihhLmxpbmVTdGFydCgpLGwobnVsbCxudWxsLDEsYSksYS5saW5lRW5kKCkpLHUmJkNlKHYsaSx0LGwsYSksYS5wb2x5Z29uRW5kKCkpLHY9ZD1tPW51bGx9fTtyZXR1cm4gQ319ZnVuY3Rpb24gWWUobil7dmFyIHQ9MCxlPXFhLzMscj1pcihuKSx1PXIodCxlKTtyZXR1cm4gdS5wYXJhbGxlbHM9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/cih0PW5bMF0qcWEvMTgwLGU9blsxXSpxYS8xODApOlt0L3FhKjE4MCxlL3FhKjE4MF19LHV9ZnVuY3Rpb24gWmUobix0KXtmdW5jdGlvbiBlKG4sdCl7dmFyIGU9TWF0aC5zcXJ0KGktMip1Kk1hdGguc2luKHQpKS91O3JldHVybltlKk1hdGguc2luKG4qPXUpLG8tZSpNYXRoLmNvcyhuKV19dmFyIHI9TWF0aC5zaW4obiksdT0ocitNYXRoLnNpbih0KSkvMixpPTErciooMip1LXIpLG89TWF0aC5zcXJ0KGkpL3U7cmV0dXJuIGUuaW52ZXJ0PWZ1bmN0aW9uKG4sdCl7dmFyIGU9by10O3JldHVybltNYXRoLmF0YW4yKG4sZSkvdSx0dCgoaS0obipuK2UqZSkqdSp1KS8oMip1KSldfSxlfWZ1bmN0aW9uIFZlKCl7ZnVuY3Rpb24gbihuLHQpe0RjKz11Km4tcip0LHI9bix1PXR9dmFyIHQsZSxyLHU7SGMucG9pbnQ9ZnVuY3Rpb24oaSxvKXtIYy5wb2ludD1uLHQ9cj1pLGU9dT1vfSxIYy5saW5lRW5kPWZ1bmN0aW9uKCl7bih0LGUpfX1mdW5jdGlvbiBYZShuLHQpe1BjPm4mJihQYz1uKSxuPmpjJiYoamM9biksVWM+dCYmKFVjPXQpLHQ+RmMmJihGYz10KX1mdW5jdGlvbiAkZSgpe2Z1bmN0aW9uIG4obix0KXtvLnB1c2goXCJNXCIsbixcIixcIix0LGkpfWZ1bmN0aW9uIHQobix0KXtvLnB1c2goXCJNXCIsbixcIixcIix0KSxhLnBvaW50PWV9ZnVuY3Rpb24gZShuLHQpe28ucHVzaChcIkxcIixuLFwiLFwiLHQpfWZ1bmN0aW9uIHIoKXthLnBvaW50PW59ZnVuY3Rpb24gdSgpe28ucHVzaChcIlpcIil9dmFyIGk9QmUoNC41KSxvPVtdLGE9e3BvaW50Om4sbGluZVN0YXJ0OmZ1bmN0aW9uKCl7YS5wb2ludD10fSxsaW5lRW5kOnIscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7YS5saW5lRW5kPXV9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXthLmxpbmVFbmQ9cixhLnBvaW50PW59LHBvaW50UmFkaXVzOmZ1bmN0aW9uKG4pe3JldHVybiBpPUJlKG4pLGF9LHJlc3VsdDpmdW5jdGlvbigpe2lmKG8ubGVuZ3RoKXt2YXIgbj1vLmpvaW4oXCJcIik7cmV0dXJuIG89W10sbn19fTtyZXR1cm4gYX1mdW5jdGlvbiBCZShuKXtyZXR1cm5cIm0wLFwiK24rXCJhXCIrbitcIixcIituK1wiIDAgMSwxIDAsXCIrLTIqbitcImFcIituK1wiLFwiK24rXCIgMCAxLDEgMCxcIisyKm4rXCJ6XCJ9ZnVuY3Rpb24gV2Uobix0KXtfYys9bix3Yys9dCwrK1NjfWZ1bmN0aW9uIEplKCl7ZnVuY3Rpb24gbihuLHIpe3ZhciB1PW4tdCxpPXItZSxvPU1hdGguc3FydCh1KnUraSppKTtrYys9byoodCtuKS8yLEVjKz1vKihlK3IpLzIsQWMrPW8sV2UodD1uLGU9cil9dmFyIHQsZTtJYy5wb2ludD1mdW5jdGlvbihyLHUpe0ljLnBvaW50PW4sV2UodD1yLGU9dSl9fWZ1bmN0aW9uIEdlKCl7SWMucG9pbnQ9V2V9ZnVuY3Rpb24gS2UoKXtmdW5jdGlvbiBuKG4sdCl7dmFyIGU9bi1yLGk9dC11LG89TWF0aC5zcXJ0KGUqZStpKmkpO2tjKz1vKihyK24pLzIsRWMrPW8qKHUrdCkvMixBYys9byxvPXUqbi1yKnQsTmMrPW8qKHIrbiksQ2MrPW8qKHUrdCksemMrPTMqbyxXZShyPW4sdT10KX12YXIgdCxlLHIsdTtJYy5wb2ludD1mdW5jdGlvbihpLG8pe0ljLnBvaW50PW4sV2UodD1yPWksZT11PW8pfSxJYy5saW5lRW5kPWZ1bmN0aW9uKCl7bih0LGUpfX1mdW5jdGlvbiBRZShuKXtmdW5jdGlvbiB0KHQsZSl7bi5tb3ZlVG8odCtvLGUpLG4uYXJjKHQsZSxvLDAsTGEpfWZ1bmN0aW9uIGUodCxlKXtuLm1vdmVUbyh0LGUpLGEucG9pbnQ9cn1mdW5jdGlvbiByKHQsZSl7bi5saW5lVG8odCxlKX1mdW5jdGlvbiB1KCl7YS5wb2ludD10fWZ1bmN0aW9uIGkoKXtuLmNsb3NlUGF0aCgpfXZhciBvPTQuNSxhPXtwb2ludDp0LGxpbmVTdGFydDpmdW5jdGlvbigpe2EucG9pbnQ9ZX0sbGluZUVuZDp1LHBvbHlnb25TdGFydDpmdW5jdGlvbigpe2EubGluZUVuZD1pfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7YS5saW5lRW5kPXUsYS5wb2ludD10fSxwb2ludFJhZGl1czpmdW5jdGlvbihuKXtyZXR1cm4gbz1uLGF9LHJlc3VsdDpifTtyZXR1cm4gYX1mdW5jdGlvbiBucihuKXtmdW5jdGlvbiB0KG4pe3JldHVybihhP3I6ZSkobil9ZnVuY3Rpb24gZSh0KXtyZXR1cm4gcnIodCxmdW5jdGlvbihlLHIpe2U9bihlLHIpLHQucG9pbnQoZVswXSxlWzFdKX0pfWZ1bmN0aW9uIHIodCl7ZnVuY3Rpb24gZShlLHIpe2U9bihlLHIpLHQucG9pbnQoZVswXSxlWzFdKX1mdW5jdGlvbiByKCl7TT0wLzAsUy5wb2ludD1pLHQubGluZVN0YXJ0KCl9ZnVuY3Rpb24gaShlLHIpe3ZhciBpPXBlKFtlLHJdKSxvPW4oZSxyKTt1KE0seCx5LGIsXyx3LE09b1swXSx4PW9bMV0seT1lLGI9aVswXSxfPWlbMV0sdz1pWzJdLGEsdCksdC5wb2ludChNLHgpfWZ1bmN0aW9uIG8oKXtTLnBvaW50PWUsdC5saW5lRW5kKCl9ZnVuY3Rpb24gYygpe3IoKSxTLnBvaW50PWwsUy5saW5lRW5kPXN9ZnVuY3Rpb24gbChuLHQpe2koZj1uLGg9dCksZz1NLHA9eCx2PWIsZD1fLG09dyxTLnBvaW50PWl9ZnVuY3Rpb24gcygpe3UoTSx4LHksYixfLHcsZyxwLGYsdixkLG0sYSx0KSxTLmxpbmVFbmQ9byxvKCl9dmFyIGYsaCxnLHAsdixkLG0seSxNLHgsYixfLHcsUz17cG9pbnQ6ZSxsaW5lU3RhcnQ6cixsaW5lRW5kOm8scG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7dC5wb2x5Z29uU3RhcnQoKSxTLmxpbmVTdGFydD1jXG59LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXt0LnBvbHlnb25FbmQoKSxTLmxpbmVTdGFydD1yfX07cmV0dXJuIFN9ZnVuY3Rpb24gdSh0LGUscixhLGMsbCxzLGYsaCxnLHAsdixkLG0pe3ZhciB5PXMtdCxNPWYtZSx4PXkqeStNKk07aWYoeD40KmkmJmQtLSl7dmFyIGI9YStnLF89YytwLHc9bCt2LFM9TWF0aC5zcXJ0KGIqYitfKl8rdyp3KSxrPU1hdGguYXNpbih3Lz1TKSxFPWdhKGdhKHcpLTEpPENhfHxnYShyLWgpPENhPyhyK2gpLzI6TWF0aC5hdGFuMihfLGIpLEE9bihFLGspLE49QVswXSxDPUFbMV0sej1OLXQscT1DLWUsTD1NKnoteSpxOyhMKkwveD5pfHxnYSgoeSp6K00qcSkveC0uNSk+LjN8fG8+YSpnK2MqcCtsKnYpJiYodSh0LGUscixhLGMsbCxOLEMsRSxiLz1TLF8vPVMsdyxkLG0pLG0ucG9pbnQoTixDKSx1KE4sQyxFLGIsXyx3LHMsZixoLGcscCx2LGQsbSkpfX12YXIgaT0uNSxvPU1hdGguY29zKDMwKkRhKSxhPTE2O3JldHVybiB0LnByZWNpc2lvbj1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT0oaT1uKm4pPjAmJjE2LHQpOk1hdGguc3FydChpKX0sdH1mdW5jdGlvbiB0cihuKXt2YXIgdD1ucihmdW5jdGlvbih0LGUpe3JldHVybiBuKFt0KlBhLGUqUGFdKX0pO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gb3IodChuKSl9fWZ1bmN0aW9uIGVyKG4pe3RoaXMuc3RyZWFtPW59ZnVuY3Rpb24gcnIobix0KXtyZXR1cm57cG9pbnQ6dCxzcGhlcmU6ZnVuY3Rpb24oKXtuLnNwaGVyZSgpfSxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXtuLmxpbmVTdGFydCgpfSxsaW5lRW5kOmZ1bmN0aW9uKCl7bi5saW5lRW5kKCl9LHBvbHlnb25TdGFydDpmdW5jdGlvbigpe24ucG9seWdvblN0YXJ0KCl9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXtuLnBvbHlnb25FbmQoKX19fWZ1bmN0aW9uIHVyKG4pe3JldHVybiBpcihmdW5jdGlvbigpe3JldHVybiBufSkoKX1mdW5jdGlvbiBpcihuKXtmdW5jdGlvbiB0KG4pe3JldHVybiBuPWEoblswXSpEYSxuWzFdKkRhKSxbblswXSpoK2MsbC1uWzFdKmhdfWZ1bmN0aW9uIGUobil7cmV0dXJuIG49YS5pbnZlcnQoKG5bMF0tYykvaCwobC1uWzFdKS9oKSxuJiZbblswXSpQYSxuWzFdKlBhXX1mdW5jdGlvbiByKCl7YT1BZShvPWxyKG0sTSx4KSxpKTt2YXIgbj1pKHYsZCk7cmV0dXJuIGM9Zy1uWzBdKmgsbD1wK25bMV0qaCx1KCl9ZnVuY3Rpb24gdSgpe3JldHVybiBzJiYocy52YWxpZD0hMSxzPW51bGwpLHR9dmFyIGksbyxhLGMsbCxzLGY9bnIoZnVuY3Rpb24obix0KXtyZXR1cm4gbj1pKG4sdCksW25bMF0qaCtjLGwtblsxXSpoXX0pLGg9MTUwLGc9NDgwLHA9MjUwLHY9MCxkPTAsbT0wLE09MCx4PTAsYj1MYyxfPXksdz1udWxsLFM9bnVsbDtyZXR1cm4gdC5zdHJlYW09ZnVuY3Rpb24obil7cmV0dXJuIHMmJihzLnZhbGlkPSExKSxzPW9yKGIobyxmKF8obikpKSkscy52YWxpZD0hMCxzfSx0LmNsaXBBbmdsZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYj1udWxsPT1uPyh3PW4sTGMpOkhlKCh3PStuKSpEYSksdSgpKTp3fSx0LmNsaXBFeHRlbnQ9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KFM9bixfPW4/SWUoblswXVswXSxuWzBdWzFdLG5bMV1bMF0sblsxXVsxXSk6eSx1KCkpOlN9LHQuc2NhbGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGg9K24scigpKTpofSx0LnRyYW5zbGF0ZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZz0rblswXSxwPStuWzFdLHIoKSk6W2cscF19LHQuY2VudGVyPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh2PW5bMF0lMzYwKkRhLGQ9blsxXSUzNjAqRGEscigpKTpbdipQYSxkKlBhXX0sdC5yb3RhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG09blswXSUzNjAqRGEsTT1uWzFdJTM2MCpEYSx4PW4ubGVuZ3RoPjI/blsyXSUzNjAqRGE6MCxyKCkpOlttKlBhLE0qUGEseCpQYV19LHRhLnJlYmluZCh0LGYsXCJwcmVjaXNpb25cIiksZnVuY3Rpb24oKXtyZXR1cm4gaT1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0LmludmVydD1pLmludmVydCYmZSxyKCl9fWZ1bmN0aW9uIG9yKG4pe3JldHVybiBycihuLGZ1bmN0aW9uKHQsZSl7bi5wb2ludCh0KkRhLGUqRGEpfSl9ZnVuY3Rpb24gYXIobix0KXtyZXR1cm5bbix0XX1mdW5jdGlvbiBjcihuLHQpe3JldHVybltuPnFhP24tTGE6LXFhPm4/bitMYTpuLHRdfWZ1bmN0aW9uIGxyKG4sdCxlKXtyZXR1cm4gbj90fHxlP0FlKGZyKG4pLGhyKHQsZSkpOmZyKG4pOnR8fGU/aHIodCxlKTpjcn1mdW5jdGlvbiBzcihuKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gdCs9bixbdD5xYT90LUxhOi1xYT50P3QrTGE6dCxlXX19ZnVuY3Rpb24gZnIobil7dmFyIHQ9c3Iobik7cmV0dXJuIHQuaW52ZXJ0PXNyKC1uKSx0fWZ1bmN0aW9uIGhyKG4sdCl7ZnVuY3Rpb24gZShuLHQpe3ZhciBlPU1hdGguY29zKHQpLGE9TWF0aC5jb3MobikqZSxjPU1hdGguc2luKG4pKmUsbD1NYXRoLnNpbih0KSxzPWwqcithKnU7cmV0dXJuW01hdGguYXRhbjIoYyppLXMqbyxhKnItbCp1KSx0dChzKmkrYypvKV19dmFyIHI9TWF0aC5jb3MobiksdT1NYXRoLnNpbihuKSxpPU1hdGguY29zKHQpLG89TWF0aC5zaW4odCk7cmV0dXJuIGUuaW52ZXJ0PWZ1bmN0aW9uKG4sdCl7dmFyIGU9TWF0aC5jb3ModCksYT1NYXRoLmNvcyhuKSplLGM9TWF0aC5zaW4obikqZSxsPU1hdGguc2luKHQpLHM9bCppLWMqbztyZXR1cm5bTWF0aC5hdGFuMihjKmkrbCpvLGEqcitzKnUpLHR0KHMqci1hKnUpXX0sZX1mdW5jdGlvbiBncihuLHQpe3ZhciBlPU1hdGguY29zKG4pLHI9TWF0aC5zaW4obik7cmV0dXJuIGZ1bmN0aW9uKHUsaSxvLGEpe3ZhciBjPW8qdDtudWxsIT11Pyh1PXByKGUsdSksaT1wcihlLGkpLChvPjA/aT51OnU+aSkmJih1Kz1vKkxhKSk6KHU9bitvKkxhLGk9bi0uNSpjKTtmb3IodmFyIGwscz11O28+MD9zPmk6aT5zO3MtPWMpYS5wb2ludCgobD14ZShbZSwtcipNYXRoLmNvcyhzKSwtcipNYXRoLnNpbihzKV0pKVswXSxsWzFdKX19ZnVuY3Rpb24gcHIobix0KXt2YXIgZT1wZSh0KTtlWzBdLT1uLE1lKGUpO3ZhciByPW50KC1lWzFdKTtyZXR1cm4oKC1lWzJdPDA/LXI6cikrMipNYXRoLlBJLUNhKSUoMipNYXRoLlBJKX1mdW5jdGlvbiB2cihuLHQsZSl7dmFyIHI9dGEucmFuZ2Uobix0LUNhLGUpLmNvbmNhdCh0KTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHIubWFwKGZ1bmN0aW9uKHQpe3JldHVybltuLHRdfSl9fWZ1bmN0aW9uIGRyKG4sdCxlKXt2YXIgcj10YS5yYW5nZShuLHQtQ2EsZSkuY29uY2F0KHQpO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gci5tYXAoZnVuY3Rpb24odCl7cmV0dXJuW3Qsbl19KX19ZnVuY3Rpb24gbXIobil7cmV0dXJuIG4uc291cmNlfWZ1bmN0aW9uIHlyKG4pe3JldHVybiBuLnRhcmdldH1mdW5jdGlvbiBNcihuLHQsZSxyKXt2YXIgdT1NYXRoLmNvcyh0KSxpPU1hdGguc2luKHQpLG89TWF0aC5jb3MociksYT1NYXRoLnNpbihyKSxjPXUqTWF0aC5jb3MobiksbD11Kk1hdGguc2luKG4pLHM9bypNYXRoLmNvcyhlKSxmPW8qTWF0aC5zaW4oZSksaD0yKk1hdGguYXNpbihNYXRoLnNxcnQoaXQoci10KSt1Km8qaXQoZS1uKSkpLGc9MS9NYXRoLnNpbihoKSxwPWg/ZnVuY3Rpb24obil7dmFyIHQ9TWF0aC5zaW4obio9aCkqZyxlPU1hdGguc2luKGgtbikqZyxyPWUqYyt0KnMsdT1lKmwrdCpmLG89ZSppK3QqYTtyZXR1cm5bTWF0aC5hdGFuMih1LHIpKlBhLE1hdGguYXRhbjIobyxNYXRoLnNxcnQocipyK3UqdSkpKlBhXX06ZnVuY3Rpb24oKXtyZXR1cm5bbipQYSx0KlBhXX07cmV0dXJuIHAuZGlzdGFuY2U9aCxwfWZ1bmN0aW9uIHhyKCl7ZnVuY3Rpb24gbihuLHUpe3ZhciBpPU1hdGguc2luKHUqPURhKSxvPU1hdGguY29zKHUpLGE9Z2EoKG4qPURhKS10KSxjPU1hdGguY29zKGEpO1ljKz1NYXRoLmF0YW4yKE1hdGguc3FydCgoYT1vKk1hdGguc2luKGEpKSphKyhhPXIqaS1lKm8qYykqYSksZSppK3IqbypjKSx0PW4sZT1pLHI9b312YXIgdCxlLHI7WmMucG9pbnQ9ZnVuY3Rpb24odSxpKXt0PXUqRGEsZT1NYXRoLnNpbihpKj1EYSkscj1NYXRoLmNvcyhpKSxaYy5wb2ludD1ufSxaYy5saW5lRW5kPWZ1bmN0aW9uKCl7WmMucG9pbnQ9WmMubGluZUVuZD1ifX1mdW5jdGlvbiBicihuLHQpe2Z1bmN0aW9uIGUodCxlKXt2YXIgcj1NYXRoLmNvcyh0KSx1PU1hdGguY29zKGUpLGk9bihyKnUpO3JldHVybltpKnUqTWF0aC5zaW4odCksaSpNYXRoLnNpbihlKV19cmV0dXJuIGUuaW52ZXJ0PWZ1bmN0aW9uKG4sZSl7dmFyIHI9TWF0aC5zcXJ0KG4qbitlKmUpLHU9dChyKSxpPU1hdGguc2luKHUpLG89TWF0aC5jb3ModSk7cmV0dXJuW01hdGguYXRhbjIobippLHIqbyksTWF0aC5hc2luKHImJmUqaS9yKV19LGV9ZnVuY3Rpb24gX3Iobix0KXtmdW5jdGlvbiBlKG4sdCl7bz4wPy1SYStDYT50JiYodD0tUmErQ2EpOnQ+UmEtQ2EmJih0PVJhLUNhKTt2YXIgZT1vL01hdGgucG93KHUodCksaSk7cmV0dXJuW2UqTWF0aC5zaW4oaSpuKSxvLWUqTWF0aC5jb3MoaSpuKV19dmFyIHI9TWF0aC5jb3MobiksdT1mdW5jdGlvbihuKXtyZXR1cm4gTWF0aC50YW4ocWEvNCtuLzIpfSxpPW49PT10P01hdGguc2luKG4pOk1hdGgubG9nKHIvTWF0aC5jb3ModCkpL01hdGgubG9nKHUodCkvdShuKSksbz1yKk1hdGgucG93KHUobiksaSkvaTtyZXR1cm4gaT8oZS5pbnZlcnQ9ZnVuY3Rpb24obix0KXt2YXIgZT1vLXQscj1LKGkpKk1hdGguc3FydChuKm4rZSplKTtyZXR1cm5bTWF0aC5hdGFuMihuLGUpL2ksMipNYXRoLmF0YW4oTWF0aC5wb3coby9yLDEvaSkpLVJhXX0sZSk6U3J9ZnVuY3Rpb24gd3Iobix0KXtmdW5jdGlvbiBlKG4sdCl7dmFyIGU9aS10O3JldHVybltlKk1hdGguc2luKHUqbiksaS1lKk1hdGguY29zKHUqbildfXZhciByPU1hdGguY29zKG4pLHU9bj09PXQ/TWF0aC5zaW4obik6KHItTWF0aC5jb3ModCkpLyh0LW4pLGk9ci91K247cmV0dXJuIGdhKHUpPENhP2FyOihlLmludmVydD1mdW5jdGlvbihuLHQpe3ZhciBlPWktdDtyZXR1cm5bTWF0aC5hdGFuMihuLGUpL3UsaS1LKHUpKk1hdGguc3FydChuKm4rZSplKV19LGUpfWZ1bmN0aW9uIFNyKG4sdCl7cmV0dXJuW24sTWF0aC5sb2coTWF0aC50YW4ocWEvNCt0LzIpKV19ZnVuY3Rpb24ga3Iobil7dmFyIHQsZT11cihuKSxyPWUuc2NhbGUsdT1lLnRyYW5zbGF0ZSxpPWUuY2xpcEV4dGVudDtyZXR1cm4gZS5zY2FsZT1mdW5jdGlvbigpe3ZhciBuPXIuYXBwbHkoZSxhcmd1bWVudHMpO3JldHVybiBuPT09ZT90P2UuY2xpcEV4dGVudChudWxsKTplOm59LGUudHJhbnNsYXRlPWZ1bmN0aW9uKCl7dmFyIG49dS5hcHBseShlLGFyZ3VtZW50cyk7cmV0dXJuIG49PT1lP3Q/ZS5jbGlwRXh0ZW50KG51bGwpOmU6bn0sZS5jbGlwRXh0ZW50PWZ1bmN0aW9uKG4pe3ZhciBvPWkuYXBwbHkoZSxhcmd1bWVudHMpO2lmKG89PT1lKXtpZih0PW51bGw9PW4pe3ZhciBhPXFhKnIoKSxjPXUoKTtpKFtbY1swXS1hLGNbMV0tYV0sW2NbMF0rYSxjWzFdK2FdXSl9fWVsc2UgdCYmKG89bnVsbCk7cmV0dXJuIG99LGUuY2xpcEV4dGVudChudWxsKX1mdW5jdGlvbiBFcihuLHQpe3JldHVybltNYXRoLmxvZyhNYXRoLnRhbihxYS80K3QvMikpLC1uXX1mdW5jdGlvbiBBcihuKXtyZXR1cm4gblswXX1mdW5jdGlvbiBOcihuKXtyZXR1cm4gblsxXX1mdW5jdGlvbiBDcihuKXtmb3IodmFyIHQ9bi5sZW5ndGgsZT1bMCwxXSxyPTIsdT0yO3Q+dTt1Kyspe2Zvcig7cj4xJiZRKG5bZVtyLTJdXSxuW2Vbci0xXV0sblt1XSk8PTA7KS0tcjtlW3IrK109dX1yZXR1cm4gZS5zbGljZSgwLHIpfWZ1bmN0aW9uIHpyKG4sdCl7cmV0dXJuIG5bMF0tdFswXXx8blsxXS10WzFdfWZ1bmN0aW9uIHFyKG4sdCxlKXtyZXR1cm4oZVswXS10WzBdKSooblsxXS10WzFdKTwoZVsxXS10WzFdKSooblswXS10WzBdKX1mdW5jdGlvbiBMcihuLHQsZSxyKXt2YXIgdT1uWzBdLGk9ZVswXSxvPXRbMF0tdSxhPXJbMF0taSxjPW5bMV0sbD1lWzFdLHM9dFsxXS1jLGY9clsxXS1sLGg9KGEqKGMtbCktZioodS1pKSkvKGYqby1hKnMpO3JldHVyblt1K2gqbyxjK2gqc119ZnVuY3Rpb24gVHIobil7dmFyIHQ9blswXSxlPW5bbi5sZW5ndGgtMV07cmV0dXJuISh0WzBdLWVbMF18fHRbMV0tZVsxXSl9ZnVuY3Rpb24gUnIoKXt0dSh0aGlzKSx0aGlzLmVkZ2U9dGhpcy5zaXRlPXRoaXMuY2lyY2xlPW51bGx9ZnVuY3Rpb24gRHIobil7dmFyIHQ9ZWwucG9wKCl8fG5ldyBScjtyZXR1cm4gdC5zaXRlPW4sdH1mdW5jdGlvbiBQcihuKXtYcihuKSxRYy5yZW1vdmUobiksZWwucHVzaChuKSx0dShuKX1mdW5jdGlvbiBVcihuKXt2YXIgdD1uLmNpcmNsZSxlPXQueCxyPXQuY3ksdT17eDplLHk6cn0saT1uLlAsbz1uLk4sYT1bbl07UHIobik7Zm9yKHZhciBjPWk7Yy5jaXJjbGUmJmdhKGUtYy5jaXJjbGUueCk8Q2EmJmdhKHItYy5jaXJjbGUuY3kpPENhOylpPWMuUCxhLnVuc2hpZnQoYyksUHIoYyksYz1pO2EudW5zaGlmdChjKSxYcihjKTtmb3IodmFyIGw9bztsLmNpcmNsZSYmZ2EoZS1sLmNpcmNsZS54KTxDYSYmZ2Eoci1sLmNpcmNsZS5jeSk8Q2E7KW89bC5OLGEucHVzaChsKSxQcihsKSxsPW87YS5wdXNoKGwpLFhyKGwpO3ZhciBzLGY9YS5sZW5ndGg7Zm9yKHM9MTtmPnM7KytzKWw9YVtzXSxjPWFbcy0xXSxLcihsLmVkZ2UsYy5zaXRlLGwuc2l0ZSx1KTtjPWFbMF0sbD1hW2YtMV0sbC5lZGdlPUpyKGMuc2l0ZSxsLnNpdGUsbnVsbCx1KSxWcihjKSxWcihsKX1mdW5jdGlvbiBqcihuKXtmb3IodmFyIHQsZSxyLHUsaT1uLngsbz1uLnksYT1RYy5fO2E7KWlmKHI9RnIoYSxvKS1pLHI+Q2EpYT1hLkw7ZWxzZXtpZih1PWktSHIoYSxvKSwhKHU+Q2EpKXtyPi1DYT8odD1hLlAsZT1hKTp1Pi1DYT8odD1hLGU9YS5OKTp0PWU9YTticmVha31pZighYS5SKXt0PWE7YnJlYWt9YT1hLlJ9dmFyIGM9RHIobik7aWYoUWMuaW5zZXJ0KHQsYyksdHx8ZSl7aWYodD09PWUpcmV0dXJuIFhyKHQpLGU9RHIodC5zaXRlKSxRYy5pbnNlcnQoYyxlKSxjLmVkZ2U9ZS5lZGdlPUpyKHQuc2l0ZSxjLnNpdGUpLFZyKHQpLHZvaWQgVnIoZSk7aWYoIWUpcmV0dXJuIHZvaWQoYy5lZGdlPUpyKHQuc2l0ZSxjLnNpdGUpKTtYcih0KSxYcihlKTt2YXIgbD10LnNpdGUscz1sLngsZj1sLnksaD1uLngtcyxnPW4ueS1mLHA9ZS5zaXRlLHY9cC54LXMsZD1wLnktZixtPTIqKGgqZC1nKnYpLHk9aCpoK2cqZyxNPXYqditkKmQseD17eDooZCp5LWcqTSkvbStzLHk6KGgqTS12KnkpL20rZn07S3IoZS5lZGdlLGwscCx4KSxjLmVkZ2U9SnIobCxuLG51bGwseCksZS5lZGdlPUpyKG4scCxudWxsLHgpLFZyKHQpLFZyKGUpfX1mdW5jdGlvbiBGcihuLHQpe3ZhciBlPW4uc2l0ZSxyPWUueCx1PWUueSxpPXUtdDtpZighaSlyZXR1cm4gcjt2YXIgbz1uLlA7aWYoIW8pcmV0dXJuLTEvMDtlPW8uc2l0ZTt2YXIgYT1lLngsYz1lLnksbD1jLXQ7aWYoIWwpcmV0dXJuIGE7dmFyIHM9YS1yLGY9MS9pLTEvbCxoPXMvbDtyZXR1cm4gZj8oLWgrTWF0aC5zcXJ0KGgqaC0yKmYqKHMqcy8oLTIqbCktYytsLzIrdS1pLzIpKSkvZityOihyK2EpLzJ9ZnVuY3Rpb24gSHIobix0KXt2YXIgZT1uLk47aWYoZSlyZXR1cm4gRnIoZSx0KTt2YXIgcj1uLnNpdGU7cmV0dXJuIHIueT09PXQ/ci54OjEvMH1mdW5jdGlvbiBPcihuKXt0aGlzLnNpdGU9bix0aGlzLmVkZ2VzPVtdfWZ1bmN0aW9uIElyKG4pe2Zvcih2YXIgdCxlLHIsdSxpLG8sYSxjLGwscyxmPW5bMF1bMF0saD1uWzFdWzBdLGc9blswXVsxXSxwPW5bMV1bMV0sdj1LYyxkPXYubGVuZ3RoO2QtLTspaWYoaT12W2RdLGkmJmkucHJlcGFyZSgpKWZvcihhPWkuZWRnZXMsYz1hLmxlbmd0aCxvPTA7Yz5vOylzPWFbb10uZW5kKCkscj1zLngsdT1zLnksbD1hWysrbyVjXS5zdGFydCgpLHQ9bC54LGU9bC55LChnYShyLXQpPkNhfHxnYSh1LWUpPkNhKSYmKGEuc3BsaWNlKG8sMCxuZXcgUXIoR3IoaS5zaXRlLHMsZ2Eoci1mKTxDYSYmcC11PkNhP3t4OmYseTpnYSh0LWYpPENhP2U6cH06Z2EodS1wKTxDYSYmaC1yPkNhP3t4OmdhKGUtcCk8Q2E/dDpoLHk6cH06Z2Eoci1oKTxDYSYmdS1nPkNhP3t4OmgseTpnYSh0LWgpPENhP2U6Z306Z2EodS1nKTxDYSYmci1mPkNhP3t4OmdhKGUtZyk8Q2E/dDpmLHk6Z306bnVsbCksaS5zaXRlLG51bGwpKSwrK2MpfWZ1bmN0aW9uIFlyKG4sdCl7cmV0dXJuIHQuYW5nbGUtbi5hbmdsZX1mdW5jdGlvbiBacigpe3R1KHRoaXMpLHRoaXMueD10aGlzLnk9dGhpcy5hcmM9dGhpcy5zaXRlPXRoaXMuY3k9bnVsbH1mdW5jdGlvbiBWcihuKXt2YXIgdD1uLlAsZT1uLk47aWYodCYmZSl7dmFyIHI9dC5zaXRlLHU9bi5zaXRlLGk9ZS5zaXRlO2lmKHIhPT1pKXt2YXIgbz11LngsYT11LnksYz1yLngtbyxsPXIueS1hLHM9aS54LW8sZj1pLnktYSxoPTIqKGMqZi1sKnMpO2lmKCEoaD49LXphKSl7dmFyIGc9YypjK2wqbCxwPXMqcytmKmYsdj0oZipnLWwqcCkvaCxkPShjKnAtcypnKS9oLGY9ZCthLG09cmwucG9wKCl8fG5ldyBacjttLmFyYz1uLG0uc2l0ZT11LG0ueD12K28sbS55PWYrTWF0aC5zcXJ0KHYqditkKmQpLG0uY3k9ZixuLmNpcmNsZT1tO2Zvcih2YXIgeT1udWxsLE09dGwuXztNOylpZihtLnk8TS55fHxtLnk9PT1NLnkmJm0ueDw9TS54KXtpZighTS5MKXt5PU0uUDticmVha31NPU0uTH1lbHNle2lmKCFNLlIpe3k9TTticmVha31NPU0uUn10bC5pbnNlcnQoeSxtKSx5fHwobmw9bSl9fX19ZnVuY3Rpb24gWHIobil7dmFyIHQ9bi5jaXJjbGU7dCYmKHQuUHx8KG5sPXQuTiksdGwucmVtb3ZlKHQpLHJsLnB1c2godCksdHUodCksbi5jaXJjbGU9bnVsbCl9ZnVuY3Rpb24gJHIobil7Zm9yKHZhciB0LGU9R2Mscj1PZShuWzBdWzBdLG5bMF1bMV0sblsxXVswXSxuWzFdWzFdKSx1PWUubGVuZ3RoO3UtLTspdD1lW3VdLCghQnIodCxuKXx8IXIodCl8fGdhKHQuYS54LXQuYi54KTxDYSYmZ2EodC5hLnktdC5iLnkpPENhKSYmKHQuYT10LmI9bnVsbCxlLnNwbGljZSh1LDEpKX1mdW5jdGlvbiBCcihuLHQpe3ZhciBlPW4uYjtpZihlKXJldHVybiEwO3ZhciByLHUsaT1uLmEsbz10WzBdWzBdLGE9dFsxXVswXSxjPXRbMF1bMV0sbD10WzFdWzFdLHM9bi5sLGY9bi5yLGg9cy54LGc9cy55LHA9Zi54LHY9Zi55LGQ9KGgrcCkvMixtPShnK3YpLzI7aWYodj09PWcpe2lmKG8+ZHx8ZD49YSlyZXR1cm47aWYoaD5wKXtpZihpKXtpZihpLnk+PWwpcmV0dXJufWVsc2UgaT17eDpkLHk6Y307ZT17eDpkLHk6bH19ZWxzZXtpZihpKXtpZihpLnk8YylyZXR1cm59ZWxzZSBpPXt4OmQseTpsfTtlPXt4OmQseTpjfX19ZWxzZSBpZihyPShoLXApLyh2LWcpLHU9bS1yKmQsLTE+cnx8cj4xKWlmKGg+cCl7aWYoaSl7aWYoaS55Pj1sKXJldHVybn1lbHNlIGk9e3g6KGMtdSkvcix5OmN9O2U9e3g6KGwtdSkvcix5Omx9fWVsc2V7aWYoaSl7aWYoaS55PGMpcmV0dXJufWVsc2UgaT17eDoobC11KS9yLHk6bH07ZT17eDooYy11KS9yLHk6Y319ZWxzZSBpZih2Pmcpe2lmKGkpe2lmKGkueD49YSlyZXR1cm59ZWxzZSBpPXt4Om8seTpyKm8rdX07ZT17eDphLHk6ciphK3V9fWVsc2V7aWYoaSl7aWYoaS54PG8pcmV0dXJufWVsc2UgaT17eDphLHk6ciphK3V9O2U9e3g6byx5OnIqbyt1fX1yZXR1cm4gbi5hPWksbi5iPWUsITB9ZnVuY3Rpb24gV3Iobix0KXt0aGlzLmw9bix0aGlzLnI9dCx0aGlzLmE9dGhpcy5iPW51bGx9ZnVuY3Rpb24gSnIobix0LGUscil7dmFyIHU9bmV3IFdyKG4sdCk7cmV0dXJuIEdjLnB1c2godSksZSYmS3IodSxuLHQsZSksciYmS3IodSx0LG4sciksS2Nbbi5pXS5lZGdlcy5wdXNoKG5ldyBRcih1LG4sdCkpLEtjW3QuaV0uZWRnZXMucHVzaChuZXcgUXIodSx0LG4pKSx1fWZ1bmN0aW9uIEdyKG4sdCxlKXt2YXIgcj1uZXcgV3IobixudWxsKTtyZXR1cm4gci5hPXQsci5iPWUsR2MucHVzaChyKSxyfWZ1bmN0aW9uIEtyKG4sdCxlLHIpe24uYXx8bi5iP24ubD09PWU/bi5iPXI6bi5hPXI6KG4uYT1yLG4ubD10LG4ucj1lKX1mdW5jdGlvbiBRcihuLHQsZSl7dmFyIHI9bi5hLHU9bi5iO3RoaXMuZWRnZT1uLHRoaXMuc2l0ZT10LHRoaXMuYW5nbGU9ZT9NYXRoLmF0YW4yKGUueS10LnksZS54LXQueCk6bi5sPT09dD9NYXRoLmF0YW4yKHUueC1yLngsci55LXUueSk6TWF0aC5hdGFuMihyLngtdS54LHUueS1yLnkpfWZ1bmN0aW9uIG51KCl7dGhpcy5fPW51bGx9ZnVuY3Rpb24gdHUobil7bi5VPW4uQz1uLkw9bi5SPW4uUD1uLk49bnVsbH1mdW5jdGlvbiBldShuLHQpe3ZhciBlPXQscj10LlIsdT1lLlU7dT91Lkw9PT1lP3UuTD1yOnUuUj1yOm4uXz1yLHIuVT11LGUuVT1yLGUuUj1yLkwsZS5SJiYoZS5SLlU9ZSksci5MPWV9ZnVuY3Rpb24gcnUobix0KXt2YXIgZT10LHI9dC5MLHU9ZS5VO3U/dS5MPT09ZT91Lkw9cjp1LlI9cjpuLl89cixyLlU9dSxlLlU9cixlLkw9ci5SLGUuTCYmKGUuTC5VPWUpLHIuUj1lfWZ1bmN0aW9uIHV1KG4pe2Zvcig7bi5MOyluPW4uTDtyZXR1cm4gbn1mdW5jdGlvbiBpdShuLHQpe3ZhciBlLHIsdSxpPW4uc29ydChvdSkucG9wKCk7Zm9yKEdjPVtdLEtjPW5ldyBBcnJheShuLmxlbmd0aCksUWM9bmV3IG51LHRsPW5ldyBudTs7KWlmKHU9bmwsaSYmKCF1fHxpLnk8dS55fHxpLnk9PT11LnkmJmkueDx1LngpKShpLnghPT1lfHxpLnkhPT1yKSYmKEtjW2kuaV09bmV3IE9yKGkpLGpyKGkpLGU9aS54LHI9aS55KSxpPW4ucG9wKCk7ZWxzZXtpZighdSlicmVhaztVcih1LmFyYyl9dCYmKCRyKHQpLElyKHQpKTt2YXIgbz17Y2VsbHM6S2MsZWRnZXM6R2N9O3JldHVybiBRYz10bD1HYz1LYz1udWxsLG99ZnVuY3Rpb24gb3Uobix0KXtyZXR1cm4gdC55LW4ueXx8dC54LW4ueH1mdW5jdGlvbiBhdShuLHQsZSl7cmV0dXJuKG4ueC1lLngpKih0Lnktbi55KS0obi54LXQueCkqKGUueS1uLnkpfWZ1bmN0aW9uIGN1KG4pe3JldHVybiBuLnh9ZnVuY3Rpb24gbHUobil7cmV0dXJuIG4ueX1mdW5jdGlvbiBzdSgpe3JldHVybntsZWFmOiEwLG5vZGVzOltdLHBvaW50Om51bGwseDpudWxsLHk6bnVsbH19ZnVuY3Rpb24gZnUobix0LGUscix1LGkpe2lmKCFuKHQsZSxyLHUsaSkpe3ZhciBvPS41KihlK3UpLGE9LjUqKHIraSksYz10Lm5vZGVzO2NbMF0mJmZ1KG4sY1swXSxlLHIsbyxhKSxjWzFdJiZmdShuLGNbMV0sbyxyLHUsYSksY1syXSYmZnUobixjWzJdLGUsYSxvLGkpLGNbM10mJmZ1KG4sY1szXSxvLGEsdSxpKX19ZnVuY3Rpb24gaHUobix0LGUscix1LGksbyl7dmFyIGEsYz0xLzA7cmV0dXJuIGZ1bmN0aW9uIGwobixzLGYsaCxnKXtpZighKHM+aXx8Zj5vfHxyPmh8fHU+Zykpe2lmKHA9bi5wb2ludCl7dmFyIHAsdj10LW4ueCxkPWUtbi55LG09dip2K2QqZDtpZihjPm0pe3ZhciB5PU1hdGguc3FydChjPW0pO3I9dC15LHU9ZS15LGk9dCt5LG89ZSt5LGE9cH19Zm9yKHZhciBNPW4ubm9kZXMseD0uNSoocytoKSxiPS41KihmK2cpLF89dD49eCx3PWU+PWIsUz13PDwxfF8saz1TKzQ7az5TOysrUylpZihuPU1bMyZTXSlzd2l0Y2goMyZTKXtjYXNlIDA6bChuLHMsZix4LGIpO2JyZWFrO2Nhc2UgMTpsKG4seCxmLGgsYik7YnJlYWs7Y2FzZSAyOmwobixzLGIseCxnKTticmVhaztjYXNlIDM6bChuLHgsYixoLGcpfX19KG4scix1LGksbyksYX1mdW5jdGlvbiBndShuLHQpe249dGEucmdiKG4pLHQ9dGEucmdiKHQpO3ZhciBlPW4ucixyPW4uZyx1PW4uYixpPXQuci1lLG89dC5nLXIsYT10LmItdTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuXCIjXCIreHQoTWF0aC5yb3VuZChlK2kqbikpK3h0KE1hdGgucm91bmQocitvKm4pKSt4dChNYXRoLnJvdW5kKHUrYSpuKSl9fWZ1bmN0aW9uIHB1KG4sdCl7dmFyIGUscj17fSx1PXt9O2ZvcihlIGluIG4pZSBpbiB0P3JbZV09bXUobltlXSx0W2VdKTp1W2VdPW5bZV07Zm9yKGUgaW4gdCllIGluIG58fCh1W2VdPXRbZV0pO3JldHVybiBmdW5jdGlvbihuKXtmb3IoZSBpbiByKXVbZV09cltlXShuKTtyZXR1cm4gdX19ZnVuY3Rpb24gdnUobix0KXtyZXR1cm4gbj0rbix0PSt0LGZ1bmN0aW9uKGUpe3JldHVybiBuKigxLWUpK3QqZX19ZnVuY3Rpb24gZHUobix0KXt2YXIgZSxyLHUsaT1pbC5sYXN0SW5kZXg9b2wubGFzdEluZGV4PTAsbz0tMSxhPVtdLGM9W107Zm9yKG4rPVwiXCIsdCs9XCJcIjsoZT1pbC5leGVjKG4pKSYmKHI9b2wuZXhlYyh0KSk7KSh1PXIuaW5kZXgpPmkmJih1PXQuc2xpY2UoaSx1KSxhW29dP2Fbb10rPXU6YVsrK29dPXUpLChlPWVbMF0pPT09KHI9clswXSk/YVtvXT9hW29dKz1yOmFbKytvXT1yOihhWysrb109bnVsbCxjLnB1c2goe2k6byx4OnZ1KGUscil9KSksaT1vbC5sYXN0SW5kZXg7cmV0dXJuIGk8dC5sZW5ndGgmJih1PXQuc2xpY2UoaSksYVtvXT9hW29dKz11OmFbKytvXT11KSxhLmxlbmd0aDwyP2NbMF0/KHQ9Y1swXS54LGZ1bmN0aW9uKG4pe3JldHVybiB0KG4pK1wiXCJ9KTpmdW5jdGlvbigpe3JldHVybiB0fToodD1jLmxlbmd0aCxmdW5jdGlvbihuKXtmb3IodmFyIGUscj0wO3Q+cjsrK3IpYVsoZT1jW3JdKS5pXT1lLngobik7cmV0dXJuIGEuam9pbihcIlwiKX0pfWZ1bmN0aW9uIG11KG4sdCl7Zm9yKHZhciBlLHI9dGEuaW50ZXJwb2xhdG9ycy5sZW5ndGg7LS1yPj0wJiYhKGU9dGEuaW50ZXJwb2xhdG9yc1tyXShuLHQpKTspO3JldHVybiBlfWZ1bmN0aW9uIHl1KG4sdCl7dmFyIGUscj1bXSx1PVtdLGk9bi5sZW5ndGgsbz10Lmxlbmd0aCxhPU1hdGgubWluKG4ubGVuZ3RoLHQubGVuZ3RoKTtmb3IoZT0wO2E+ZTsrK2Upci5wdXNoKG11KG5bZV0sdFtlXSkpO2Zvcig7aT5lOysrZSl1W2VdPW5bZV07Zm9yKDtvPmU7KytlKXVbZV09dFtlXTtyZXR1cm4gZnVuY3Rpb24obil7Zm9yKGU9MDthPmU7KytlKXVbZV09cltlXShuKTtyZXR1cm4gdX19ZnVuY3Rpb24gTXUobil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiAwPj10PzA6dD49MT8xOm4odCl9fWZ1bmN0aW9uIHh1KG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gMS1uKDEtdCl9fWZ1bmN0aW9uIGJ1KG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4uNSooLjU+dD9uKDIqdCk6Mi1uKDItMip0KSl9fWZ1bmN0aW9uIF91KG4pe3JldHVybiBuKm59ZnVuY3Rpb24gd3Uobil7cmV0dXJuIG4qbipufWZ1bmN0aW9uIFN1KG4pe2lmKDA+PW4pcmV0dXJuIDA7aWYobj49MSlyZXR1cm4gMTt2YXIgdD1uKm4sZT10Km47cmV0dXJuIDQqKC41Pm4/ZTozKihuLXQpK2UtLjc1KX1mdW5jdGlvbiBrdShuKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KHQsbil9fWZ1bmN0aW9uIEV1KG4pe3JldHVybiAxLU1hdGguY29zKG4qUmEpfWZ1bmN0aW9uIEF1KG4pe3JldHVybiBNYXRoLnBvdygyLDEwKihuLTEpKX1mdW5jdGlvbiBOdShuKXtyZXR1cm4gMS1NYXRoLnNxcnQoMS1uKm4pfWZ1bmN0aW9uIEN1KG4sdCl7dmFyIGU7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9LjQ1KSxhcmd1bWVudHMubGVuZ3RoP2U9dC9MYSpNYXRoLmFzaW4oMS9uKToobj0xLGU9dC80KSxmdW5jdGlvbihyKXtyZXR1cm4gMStuKk1hdGgucG93KDIsLTEwKnIpKk1hdGguc2luKChyLWUpKkxhL3QpfX1mdW5jdGlvbiB6dShuKXtyZXR1cm4gbnx8KG49MS43MDE1OCksZnVuY3Rpb24odCl7cmV0dXJuIHQqdCooKG4rMSkqdC1uKX19ZnVuY3Rpb24gcXUobil7cmV0dXJuIDEvMi43NT5uPzcuNTYyNSpuKm46Mi8yLjc1Pm4/Ny41NjI1KihuLT0xLjUvMi43NSkqbisuNzU6Mi41LzIuNzU+bj83LjU2MjUqKG4tPTIuMjUvMi43NSkqbisuOTM3NTo3LjU2MjUqKG4tPTIuNjI1LzIuNzUpKm4rLjk4NDM3NX1mdW5jdGlvbiBMdShuLHQpe249dGEuaGNsKG4pLHQ9dGEuaGNsKHQpO3ZhciBlPW4uaCxyPW4uYyx1PW4ubCxpPXQuaC1lLG89dC5jLXIsYT10LmwtdTtyZXR1cm4gaXNOYU4obykmJihvPTAscj1pc05hTihyKT90LmM6ciksaXNOYU4oaSk/KGk9MCxlPWlzTmFOKGUpP3QuaDplKTppPjE4MD9pLT0zNjA6LTE4MD5pJiYoaSs9MzYwKSxmdW5jdGlvbihuKXtyZXR1cm4gc3QoZStpKm4scitvKm4sdSthKm4pK1wiXCJ9fWZ1bmN0aW9uIFR1KG4sdCl7bj10YS5oc2wobiksdD10YS5oc2wodCk7dmFyIGU9bi5oLHI9bi5zLHU9bi5sLGk9dC5oLWUsbz10LnMtcixhPXQubC11O3JldHVybiBpc05hTihvKSYmKG89MCxyPWlzTmFOKHIpP3QuczpyKSxpc05hTihpKT8oaT0wLGU9aXNOYU4oZSk/dC5oOmUpOmk+MTgwP2ktPTM2MDotMTgwPmkmJihpKz0zNjApLGZ1bmN0aW9uKG4pe3JldHVybiBjdChlK2kqbixyK28qbix1K2EqbikrXCJcIn19ZnVuY3Rpb24gUnUobix0KXtuPXRhLmxhYihuKSx0PXRhLmxhYih0KTt2YXIgZT1uLmwscj1uLmEsdT1uLmIsaT10LmwtZSxvPXQuYS1yLGE9dC5iLXU7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBodChlK2kqbixyK28qbix1K2EqbikrXCJcIn19ZnVuY3Rpb24gRHUobix0KXtyZXR1cm4gdC09bixmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5yb3VuZChuK3QqZSl9fWZ1bmN0aW9uIFB1KG4pe3ZhciB0PVtuLmEsbi5iXSxlPVtuLmMsbi5kXSxyPWp1KHQpLHU9VXUodCxlKSxpPWp1KEZ1KGUsdCwtdSkpfHwwO3RbMF0qZVsxXTxlWzBdKnRbMV0mJih0WzBdKj0tMSx0WzFdKj0tMSxyKj0tMSx1Kj0tMSksdGhpcy5yb3RhdGU9KHI/TWF0aC5hdGFuMih0WzFdLHRbMF0pOk1hdGguYXRhbjIoLWVbMF0sZVsxXSkpKlBhLHRoaXMudHJhbnNsYXRlPVtuLmUsbi5mXSx0aGlzLnNjYWxlPVtyLGldLHRoaXMuc2tldz1pP01hdGguYXRhbjIodSxpKSpQYTowfWZ1bmN0aW9uIFV1KG4sdCl7cmV0dXJuIG5bMF0qdFswXStuWzFdKnRbMV19ZnVuY3Rpb24ganUobil7dmFyIHQ9TWF0aC5zcXJ0KFV1KG4sbikpO3JldHVybiB0JiYoblswXS89dCxuWzFdLz10KSx0fWZ1bmN0aW9uIEZ1KG4sdCxlKXtyZXR1cm4gblswXSs9ZSp0WzBdLG5bMV0rPWUqdFsxXSxufWZ1bmN0aW9uIEh1KG4sdCl7dmFyIGUscj1bXSx1PVtdLGk9dGEudHJhbnNmb3JtKG4pLG89dGEudHJhbnNmb3JtKHQpLGE9aS50cmFuc2xhdGUsYz1vLnRyYW5zbGF0ZSxsPWkucm90YXRlLHM9by5yb3RhdGUsZj1pLnNrZXcsaD1vLnNrZXcsZz1pLnNjYWxlLHA9by5zY2FsZTtyZXR1cm4gYVswXSE9Y1swXXx8YVsxXSE9Y1sxXT8oci5wdXNoKFwidHJhbnNsYXRlKFwiLG51bGwsXCIsXCIsbnVsbCxcIilcIiksdS5wdXNoKHtpOjEseDp2dShhWzBdLGNbMF0pfSx7aTozLHg6dnUoYVsxXSxjWzFdKX0pKTpyLnB1c2goY1swXXx8Y1sxXT9cInRyYW5zbGF0ZShcIitjK1wiKVwiOlwiXCIpLGwhPXM/KGwtcz4xODA/cys9MzYwOnMtbD4xODAmJihsKz0zNjApLHUucHVzaCh7aTpyLnB1c2goci5wb3AoKStcInJvdGF0ZShcIixudWxsLFwiKVwiKS0yLHg6dnUobCxzKX0pKTpzJiZyLnB1c2goci5wb3AoKStcInJvdGF0ZShcIitzK1wiKVwiKSxmIT1oP3UucHVzaCh7aTpyLnB1c2goci5wb3AoKStcInNrZXdYKFwiLG51bGwsXCIpXCIpLTIseDp2dShmLGgpfSk6aCYmci5wdXNoKHIucG9wKCkrXCJza2V3WChcIitoK1wiKVwiKSxnWzBdIT1wWzBdfHxnWzFdIT1wWzFdPyhlPXIucHVzaChyLnBvcCgpK1wic2NhbGUoXCIsbnVsbCxcIixcIixudWxsLFwiKVwiKSx1LnB1c2goe2k6ZS00LHg6dnUoZ1swXSxwWzBdKX0se2k6ZS0yLHg6dnUoZ1sxXSxwWzFdKX0pKTooMSE9cFswXXx8MSE9cFsxXSkmJnIucHVzaChyLnBvcCgpK1wic2NhbGUoXCIrcCtcIilcIiksZT11Lmxlbmd0aCxmdW5jdGlvbihuKXtmb3IodmFyIHQsaT0tMTsrK2k8ZTspclsodD11W2ldKS5pXT10Lngobik7cmV0dXJuIHIuam9pbihcIlwiKX19ZnVuY3Rpb24gT3Uobix0KXtyZXR1cm4gdD0odC09bj0rbil8fDEvdCxmdW5jdGlvbihlKXtyZXR1cm4oZS1uKS90fX1mdW5jdGlvbiBJdShuLHQpe3JldHVybiB0PSh0LT1uPStuKXx8MS90LGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLm1heCgwLE1hdGgubWluKDEsKGUtbikvdCkpfX1mdW5jdGlvbiBZdShuKXtmb3IodmFyIHQ9bi5zb3VyY2UsZT1uLnRhcmdldCxyPVZ1KHQsZSksdT1bdF07dCE9PXI7KXQ9dC5wYXJlbnQsdS5wdXNoKHQpO2Zvcih2YXIgaT11Lmxlbmd0aDtlIT09cjspdS5zcGxpY2UoaSwwLGUpLGU9ZS5wYXJlbnQ7cmV0dXJuIHV9ZnVuY3Rpb24gWnUobil7Zm9yKHZhciB0PVtdLGU9bi5wYXJlbnQ7bnVsbCE9ZTspdC5wdXNoKG4pLG49ZSxlPWUucGFyZW50O3JldHVybiB0LnB1c2gobiksdH1mdW5jdGlvbiBWdShuLHQpe2lmKG49PT10KXJldHVybiBuO2Zvcih2YXIgZT1adShuKSxyPVp1KHQpLHU9ZS5wb3AoKSxpPXIucG9wKCksbz1udWxsO3U9PT1pOylvPXUsdT1lLnBvcCgpLGk9ci5wb3AoKTtyZXR1cm4gb31mdW5jdGlvbiBYdShuKXtuLmZpeGVkfD0yfWZ1bmN0aW9uICR1KG4pe24uZml4ZWQmPS03fWZ1bmN0aW9uIEJ1KG4pe24uZml4ZWR8PTQsbi5weD1uLngsbi5weT1uLnl9ZnVuY3Rpb24gV3Uobil7bi5maXhlZCY9LTV9ZnVuY3Rpb24gSnUobix0LGUpe3ZhciByPTAsdT0wO2lmKG4uY2hhcmdlPTAsIW4ubGVhZilmb3IodmFyIGksbz1uLm5vZGVzLGE9by5sZW5ndGgsYz0tMTsrK2M8YTspaT1vW2NdLG51bGwhPWkmJihKdShpLHQsZSksbi5jaGFyZ2UrPWkuY2hhcmdlLHIrPWkuY2hhcmdlKmkuY3gsdSs9aS5jaGFyZ2UqaS5jeSk7aWYobi5wb2ludCl7bi5sZWFmfHwobi5wb2ludC54Kz1NYXRoLnJhbmRvbSgpLS41LG4ucG9pbnQueSs9TWF0aC5yYW5kb20oKS0uNSk7dmFyIGw9dCplW24ucG9pbnQuaW5kZXhdO24uY2hhcmdlKz1uLnBvaW50Q2hhcmdlPWwscis9bCpuLnBvaW50LngsdSs9bCpuLnBvaW50Lnl9bi5jeD1yL24uY2hhcmdlLG4uY3k9dS9uLmNoYXJnZX1mdW5jdGlvbiBHdShuLHQpe3JldHVybiB0YS5yZWJpbmQobix0LFwic29ydFwiLFwiY2hpbGRyZW5cIixcInZhbHVlXCIpLG4ubm9kZXM9bixuLmxpbmtzPXJpLG59ZnVuY3Rpb24gS3Uobix0KXtmb3IodmFyIGU9W25dO251bGwhPShuPWUucG9wKCkpOylpZih0KG4pLCh1PW4uY2hpbGRyZW4pJiYocj11Lmxlbmd0aCkpZm9yKHZhciByLHU7LS1yPj0wOyllLnB1c2godVtyXSl9ZnVuY3Rpb24gUXUobix0KXtmb3IodmFyIGU9W25dLHI9W107bnVsbCE9KG49ZS5wb3AoKSk7KWlmKHIucHVzaChuKSwoaT1uLmNoaWxkcmVuKSYmKHU9aS5sZW5ndGgpKWZvcih2YXIgdSxpLG89LTE7KytvPHU7KWUucHVzaChpW29dKTtmb3IoO251bGwhPShuPXIucG9wKCkpOyl0KG4pfWZ1bmN0aW9uIG5pKG4pe3JldHVybiBuLmNoaWxkcmVufWZ1bmN0aW9uIHRpKG4pe3JldHVybiBuLnZhbHVlfWZ1bmN0aW9uIGVpKG4sdCl7cmV0dXJuIHQudmFsdWUtbi52YWx1ZX1mdW5jdGlvbiByaShuKXtyZXR1cm4gdGEubWVyZ2Uobi5tYXAoZnVuY3Rpb24obil7cmV0dXJuKG4uY2hpbGRyZW58fFtdKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJue3NvdXJjZTpuLHRhcmdldDp0fX0pfSkpfWZ1bmN0aW9uIHVpKG4pe3JldHVybiBuLnh9ZnVuY3Rpb24gaWkobil7cmV0dXJuIG4ueX1mdW5jdGlvbiBvaShuLHQsZSl7bi55MD10LG4ueT1lfWZ1bmN0aW9uIGFpKG4pe3JldHVybiB0YS5yYW5nZShuLmxlbmd0aCl9ZnVuY3Rpb24gY2kobil7Zm9yKHZhciB0PS0xLGU9blswXS5sZW5ndGgscj1bXTsrK3Q8ZTspclt0XT0wO3JldHVybiByfWZ1bmN0aW9uIGxpKG4pe2Zvcih2YXIgdCxlPTEscj0wLHU9blswXVsxXSxpPW4ubGVuZ3RoO2k+ZTsrK2UpKHQ9bltlXVsxXSk+dSYmKHI9ZSx1PXQpO3JldHVybiByfWZ1bmN0aW9uIHNpKG4pe3JldHVybiBuLnJlZHVjZShmaSwwKX1mdW5jdGlvbiBmaShuLHQpe3JldHVybiBuK3RbMV19ZnVuY3Rpb24gaGkobix0KXtyZXR1cm4gZ2kobixNYXRoLmNlaWwoTWF0aC5sb2codC5sZW5ndGgpL01hdGguTE4yKzEpKX1mdW5jdGlvbiBnaShuLHQpe2Zvcih2YXIgZT0tMSxyPStuWzBdLHU9KG5bMV0tcikvdCxpPVtdOysrZTw9dDspaVtlXT11KmUrcjtyZXR1cm4gaX1mdW5jdGlvbiBwaShuKXtyZXR1cm5bdGEubWluKG4pLHRhLm1heChuKV19ZnVuY3Rpb24gdmkobix0KXtyZXR1cm4gbi52YWx1ZS10LnZhbHVlfWZ1bmN0aW9uIGRpKG4sdCl7dmFyIGU9bi5fcGFja19uZXh0O24uX3BhY2tfbmV4dD10LHQuX3BhY2tfcHJldj1uLHQuX3BhY2tfbmV4dD1lLGUuX3BhY2tfcHJldj10fWZ1bmN0aW9uIG1pKG4sdCl7bi5fcGFja19uZXh0PXQsdC5fcGFja19wcmV2PW59ZnVuY3Rpb24geWkobix0KXt2YXIgZT10Lngtbi54LHI9dC55LW4ueSx1PW4ucit0LnI7cmV0dXJuLjk5OSp1KnU+ZSplK3Iqcn1mdW5jdGlvbiBNaShuKXtmdW5jdGlvbiB0KG4pe3M9TWF0aC5taW4obi54LW4ucixzKSxmPU1hdGgubWF4KG4ueCtuLnIsZiksaD1NYXRoLm1pbihuLnktbi5yLGgpLGc9TWF0aC5tYXgobi55K24ucixnKX1pZigoZT1uLmNoaWxkcmVuKSYmKGw9ZS5sZW5ndGgpKXt2YXIgZSxyLHUsaSxvLGEsYyxsLHM9MS8wLGY9LTEvMCxoPTEvMCxnPS0xLzA7aWYoZS5mb3JFYWNoKHhpKSxyPWVbMF0sci54PS1yLnIsci55PTAsdChyKSxsPjEmJih1PWVbMV0sdS54PXUucix1Lnk9MCx0KHUpLGw+MikpZm9yKGk9ZVsyXSx3aShyLHUsaSksdChpKSxkaShyLGkpLHIuX3BhY2tfcHJldj1pLGRpKGksdSksdT1yLl9wYWNrX25leHQsbz0zO2w+bztvKyspe3dpKHIsdSxpPWVbb10pO3ZhciBwPTAsdj0xLGQ9MTtmb3IoYT11Ll9wYWNrX25leHQ7YSE9PXU7YT1hLl9wYWNrX25leHQsdisrKWlmKHlpKGEsaSkpe3A9MTticmVha31pZigxPT1wKWZvcihjPXIuX3BhY2tfcHJldjtjIT09YS5fcGFja19wcmV2JiYheWkoYyxpKTtjPWMuX3BhY2tfcHJldixkKyspO3A/KGQ+dnx8dj09ZCYmdS5yPHIucj9taShyLHU9YSk6bWkocj1jLHUpLG8tLSk6KGRpKHIsaSksdT1pLHQoaSkpfXZhciBtPShzK2YpLzIseT0oaCtnKS8yLE09MDtmb3Iobz0wO2w+bztvKyspaT1lW29dLGkueC09bSxpLnktPXksTT1NYXRoLm1heChNLGkucitNYXRoLnNxcnQoaS54KmkueCtpLnkqaS55KSk7bi5yPU0sZS5mb3JFYWNoKGJpKX19ZnVuY3Rpb24geGkobil7bi5fcGFja19uZXh0PW4uX3BhY2tfcHJldj1ufWZ1bmN0aW9uIGJpKG4pe2RlbGV0ZSBuLl9wYWNrX25leHQsZGVsZXRlIG4uX3BhY2tfcHJldn1mdW5jdGlvbiBfaShuLHQsZSxyKXt2YXIgdT1uLmNoaWxkcmVuO2lmKG4ueD10Kz1yKm4ueCxuLnk9ZSs9cipuLnksbi5yKj1yLHUpZm9yKHZhciBpPS0xLG89dS5sZW5ndGg7KytpPG87KV9pKHVbaV0sdCxlLHIpfWZ1bmN0aW9uIHdpKG4sdCxlKXt2YXIgcj1uLnIrZS5yLHU9dC54LW4ueCxpPXQueS1uLnk7aWYociYmKHV8fGkpKXt2YXIgbz10LnIrZS5yLGE9dSp1K2kqaTtvKj1vLHIqPXI7dmFyIGM9LjUrKHItbykvKDIqYSksbD1NYXRoLnNxcnQoTWF0aC5tYXgoMCwyKm8qKHIrYSktKHItPWEpKnItbypvKSkvKDIqYSk7ZS54PW4ueCtjKnUrbCppLGUueT1uLnkrYyppLWwqdX1lbHNlIGUueD1uLngrcixlLnk9bi55fWZ1bmN0aW9uIFNpKG4sdCl7cmV0dXJuIG4ucGFyZW50PT10LnBhcmVudD8xOjJ9ZnVuY3Rpb24ga2kobil7dmFyIHQ9bi5jaGlsZHJlbjtyZXR1cm4gdC5sZW5ndGg/dFswXTpuLnR9ZnVuY3Rpb24gRWkobil7dmFyIHQsZT1uLmNoaWxkcmVuO3JldHVybih0PWUubGVuZ3RoKT9lW3QtMV06bi50fWZ1bmN0aW9uIEFpKG4sdCxlKXt2YXIgcj1lLyh0Lmktbi5pKTt0LmMtPXIsdC5zKz1lLG4uYys9cix0LnorPWUsdC5tKz1lfWZ1bmN0aW9uIE5pKG4pe2Zvcih2YXIgdCxlPTAscj0wLHU9bi5jaGlsZHJlbixpPXUubGVuZ3RoOy0taT49MDspdD11W2ldLHQueis9ZSx0Lm0rPWUsZSs9dC5zKyhyKz10LmMpfWZ1bmN0aW9uIENpKG4sdCxlKXtyZXR1cm4gbi5hLnBhcmVudD09PXQucGFyZW50P24uYTplfWZ1bmN0aW9uIHppKG4pe3JldHVybiAxK3RhLm1heChuLGZ1bmN0aW9uKG4pe3JldHVybiBuLnl9KX1mdW5jdGlvbiBxaShuKXtyZXR1cm4gbi5yZWR1Y2UoZnVuY3Rpb24obix0KXtyZXR1cm4gbit0Lnh9LDApL24ubGVuZ3RofWZ1bmN0aW9uIExpKG4pe3ZhciB0PW4uY2hpbGRyZW47cmV0dXJuIHQmJnQubGVuZ3RoP0xpKHRbMF0pOm59ZnVuY3Rpb24gVGkobil7dmFyIHQsZT1uLmNoaWxkcmVuO3JldHVybiBlJiYodD1lLmxlbmd0aCk/VGkoZVt0LTFdKTpufWZ1bmN0aW9uIFJpKG4pe3JldHVybnt4Om4ueCx5Om4ueSxkeDpuLmR4LGR5Om4uZHl9fWZ1bmN0aW9uIERpKG4sdCl7dmFyIGU9bi54K3RbM10scj1uLnkrdFswXSx1PW4uZHgtdFsxXS10WzNdLGk9bi5keS10WzBdLXRbMl07cmV0dXJuIDA+dSYmKGUrPXUvMix1PTApLDA+aSYmKHIrPWkvMixpPTApLHt4OmUseTpyLGR4OnUsZHk6aX19ZnVuY3Rpb24gUGkobil7dmFyIHQ9blswXSxlPW5bbi5sZW5ndGgtMV07cmV0dXJuIGU+dD9bdCxlXTpbZSx0XX1mdW5jdGlvbiBVaShuKXtyZXR1cm4gbi5yYW5nZUV4dGVudD9uLnJhbmdlRXh0ZW50KCk6UGkobi5yYW5nZSgpKX1mdW5jdGlvbiBqaShuLHQsZSxyKXt2YXIgdT1lKG5bMF0sblsxXSksaT1yKHRbMF0sdFsxXSk7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBpKHUobikpfX1mdW5jdGlvbiBGaShuLHQpe3ZhciBlLHI9MCx1PW4ubGVuZ3RoLTEsaT1uW3JdLG89blt1XTtyZXR1cm4gaT5vJiYoZT1yLHI9dSx1PWUsZT1pLGk9byxvPWUpLG5bcl09dC5mbG9vcihpKSxuW3VdPXQuY2VpbChvKSxufWZ1bmN0aW9uIEhpKG4pe3JldHVybiBuP3tmbG9vcjpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5mbG9vcih0L24pKm59LGNlaWw6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguY2VpbCh0L24pKm59fTptbH1mdW5jdGlvbiBPaShuLHQsZSxyKXt2YXIgdT1bXSxpPVtdLG89MCxhPU1hdGgubWluKG4ubGVuZ3RoLHQubGVuZ3RoKS0xO2ZvcihuW2FdPG5bMF0mJihuPW4uc2xpY2UoKS5yZXZlcnNlKCksdD10LnNsaWNlKCkucmV2ZXJzZSgpKTsrK288PWE7KXUucHVzaChlKG5bby0xXSxuW29dKSksaS5wdXNoKHIodFtvLTFdLHRbb10pKTtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9dGEuYmlzZWN0KG4sdCwxLGEpLTE7cmV0dXJuIGlbZV0odVtlXSh0KSl9fWZ1bmN0aW9uIElpKG4sdCxlLHIpe2Z1bmN0aW9uIHUoKXt2YXIgdT1NYXRoLm1pbihuLmxlbmd0aCx0Lmxlbmd0aCk+Mj9PaTpqaSxjPXI/SXU6T3U7cmV0dXJuIG89dShuLHQsYyxlKSxhPXUodCxuLGMsbXUpLGl9ZnVuY3Rpb24gaShuKXtyZXR1cm4gbyhuKX12YXIgbyxhO3JldHVybiBpLmludmVydD1mdW5jdGlvbihuKXtyZXR1cm4gYShuKX0saS5kb21haW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49dC5tYXAoTnVtYmVyKSx1KCkpOm59LGkucmFuZ2U9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9bix1KCkpOnR9LGkucmFuZ2VSb3VuZD1mdW5jdGlvbihuKXtyZXR1cm4gaS5yYW5nZShuKS5pbnRlcnBvbGF0ZShEdSl9LGkuY2xhbXA9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9bix1KCkpOnJ9LGkuaW50ZXJwb2xhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9bix1KCkpOmV9LGkudGlja3M9ZnVuY3Rpb24odCl7cmV0dXJuIFhpKG4sdCl9LGkudGlja0Zvcm1hdD1mdW5jdGlvbih0LGUpe3JldHVybiAkaShuLHQsZSl9LGkubmljZT1mdW5jdGlvbih0KXtyZXR1cm4gWmkobix0KSx1KCl9LGkuY29weT1mdW5jdGlvbigpe3JldHVybiBJaShuLHQsZSxyKX0sdSgpfWZ1bmN0aW9uIFlpKG4sdCl7cmV0dXJuIHRhLnJlYmluZChuLHQsXCJyYW5nZVwiLFwicmFuZ2VSb3VuZFwiLFwiaW50ZXJwb2xhdGVcIixcImNsYW1wXCIpfWZ1bmN0aW9uIFppKG4sdCl7cmV0dXJuIEZpKG4sSGkoVmkobix0KVsyXSkpfWZ1bmN0aW9uIFZpKG4sdCl7bnVsbD09dCYmKHQ9MTApO3ZhciBlPVBpKG4pLHI9ZVsxXS1lWzBdLHU9TWF0aC5wb3coMTAsTWF0aC5mbG9vcihNYXRoLmxvZyhyL3QpL01hdGguTE4xMCkpLGk9dC9yKnU7cmV0dXJuLjE1Pj1pP3UqPTEwOi4zNT49aT91Kj01Oi43NT49aSYmKHUqPTIpLGVbMF09TWF0aC5jZWlsKGVbMF0vdSkqdSxlWzFdPU1hdGguZmxvb3IoZVsxXS91KSp1Ky41KnUsZVsyXT11LGV9ZnVuY3Rpb24gWGkobix0KXtyZXR1cm4gdGEucmFuZ2UuYXBwbHkodGEsVmkobix0KSl9ZnVuY3Rpb24gJGkobix0LGUpe3ZhciByPVZpKG4sdCk7aWYoZSl7dmFyIHU9aWMuZXhlYyhlKTtpZih1LnNoaWZ0KCksXCJzXCI9PT11WzhdKXt2YXIgaT10YS5mb3JtYXRQcmVmaXgoTWF0aC5tYXgoZ2EoclswXSksZ2EoclsxXSkpKTtyZXR1cm4gdVs3XXx8KHVbN109XCIuXCIrQmkoaS5zY2FsZShyWzJdKSkpLHVbOF09XCJmXCIsZT10YS5mb3JtYXQodS5qb2luKFwiXCIpKSxmdW5jdGlvbihuKXtyZXR1cm4gZShpLnNjYWxlKG4pKStpLnN5bWJvbH19dVs3XXx8KHVbN109XCIuXCIrV2kodVs4XSxyKSksZT11LmpvaW4oXCJcIil9ZWxzZSBlPVwiLC5cIitCaShyWzJdKStcImZcIjtyZXR1cm4gdGEuZm9ybWF0KGUpfWZ1bmN0aW9uIEJpKG4pe3JldHVybi1NYXRoLmZsb29yKE1hdGgubG9nKG4pL01hdGguTE4xMCsuMDEpfWZ1bmN0aW9uIFdpKG4sdCl7dmFyIGU9QmkodFsyXSk7cmV0dXJuIG4gaW4geWw/TWF0aC5hYnMoZS1CaShNYXRoLm1heChnYSh0WzBdKSxnYSh0WzFdKSkpKSsgKyhcImVcIiE9PW4pOmUtMiooXCIlXCI9PT1uKX1mdW5jdGlvbiBKaShuLHQsZSxyKXtmdW5jdGlvbiB1KG4pe3JldHVybihlP01hdGgubG9nKDA+bj8wOm4pOi1NYXRoLmxvZyhuPjA/MDotbikpL01hdGgubG9nKHQpfWZ1bmN0aW9uIGkobil7cmV0dXJuIGU/TWF0aC5wb3codCxuKTotTWF0aC5wb3codCwtbil9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gbih1KHQpKX1yZXR1cm4gby5pbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGkobi5pbnZlcnQodCkpfSxvLmRvbWFpbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT10WzBdPj0wLG4uZG9tYWluKChyPXQubWFwKE51bWJlcikpLm1hcCh1KSksbyk6cn0sby5iYXNlPWZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PStlLG4uZG9tYWluKHIubWFwKHUpKSxvKTp0fSxvLm5pY2U9ZnVuY3Rpb24oKXt2YXIgdD1GaShyLm1hcCh1KSxlP01hdGg6eGwpO3JldHVybiBuLmRvbWFpbih0KSxyPXQubWFwKGkpLG99LG8udGlja3M9ZnVuY3Rpb24oKXt2YXIgbj1QaShyKSxvPVtdLGE9blswXSxjPW5bMV0sbD1NYXRoLmZsb29yKHUoYSkpLHM9TWF0aC5jZWlsKHUoYykpLGY9dCUxPzI6dDtpZihpc0Zpbml0ZShzLWwpKXtpZihlKXtmb3IoO3M+bDtsKyspZm9yKHZhciBoPTE7Zj5oO2grKylvLnB1c2goaShsKSpoKTtvLnB1c2goaShsKSl9ZWxzZSBmb3Ioby5wdXNoKGkobCkpO2wrKzxzOylmb3IodmFyIGg9Zi0xO2g+MDtoLS0pby5wdXNoKGkobCkqaCk7Zm9yKGw9MDtvW2xdPGE7bCsrKTtmb3Iocz1vLmxlbmd0aDtvW3MtMV0+YztzLS0pO289by5zbGljZShsLHMpfXJldHVybiBvfSxvLnRpY2tGb3JtYXQ9ZnVuY3Rpb24obix0KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gTWw7YXJndW1lbnRzLmxlbmd0aDwyP3Q9TWw6XCJmdW5jdGlvblwiIT10eXBlb2YgdCYmKHQ9dGEuZm9ybWF0KHQpKTt2YXIgcixhPU1hdGgubWF4KC4xLG4vby50aWNrcygpLmxlbmd0aCksYz1lPyhyPTFlLTEyLE1hdGguY2VpbCk6KHI9LTFlLTEyLE1hdGguZmxvb3IpO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbi9pKGModShuKStyKSk8PWE/dChuKTpcIlwifX0sby5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIEppKG4uY29weSgpLHQsZSxyKX0sWWkobyxuKX1mdW5jdGlvbiBHaShuLHQsZSl7ZnVuY3Rpb24gcih0KXtyZXR1cm4gbih1KHQpKX12YXIgdT1LaSh0KSxpPUtpKDEvdCk7cmV0dXJuIHIuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBpKG4uaW52ZXJ0KHQpKX0sci5kb21haW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG4uZG9tYWluKChlPXQubWFwKE51bWJlcikpLm1hcCh1KSkscik6ZX0sci50aWNrcz1mdW5jdGlvbihuKXtyZXR1cm4gWGkoZSxuKX0sci50aWNrRm9ybWF0PWZ1bmN0aW9uKG4sdCl7cmV0dXJuICRpKGUsbix0KX0sci5uaWNlPWZ1bmN0aW9uKG4pe3JldHVybiByLmRvbWFpbihaaShlLG4pKX0sci5leHBvbmVudD1mdW5jdGlvbihvKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1LaSh0PW8pLGk9S2koMS90KSxuLmRvbWFpbihlLm1hcCh1KSkscik6dH0sci5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIEdpKG4uY29weSgpLHQsZSl9LFlpKHIsbil9ZnVuY3Rpb24gS2kobil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiAwPnQ/LU1hdGgucG93KC10LG4pOk1hdGgucG93KHQsbil9fWZ1bmN0aW9uIFFpKG4sdCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gaVsoKHUuZ2V0KGUpfHwoXCJyYW5nZVwiPT09dC50P3Uuc2V0KGUsbi5wdXNoKGUpKTowLzApKS0xKSVpLmxlbmd0aF19ZnVuY3Rpb24gcih0LGUpe3JldHVybiB0YS5yYW5nZShuLmxlbmd0aCkubWFwKGZ1bmN0aW9uKG4pe3JldHVybiB0K2Uqbn0pfXZhciB1LGksbztyZXR1cm4gZS5kb21haW49ZnVuY3Rpb24ocil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG47bj1bXSx1PW5ldyBsO2Zvcih2YXIgaSxvPS0xLGE9ci5sZW5ndGg7KytvPGE7KXUuaGFzKGk9cltvXSl8fHUuc2V0KGksbi5wdXNoKGkpKTtyZXR1cm4gZVt0LnRdLmFwcGx5KGUsdC5hKX0sZS5yYW5nZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT1uLG89MCx0PXt0OlwicmFuZ2VcIixhOmFyZ3VtZW50c30sZSk6aX0sZS5yYW5nZVBvaW50cz1mdW5jdGlvbih1LGEpe2FyZ3VtZW50cy5sZW5ndGg8MiYmKGE9MCk7dmFyIGM9dVswXSxsPXVbMV0scz1uLmxlbmd0aDwyPyhjPShjK2wpLzIsMCk6KGwtYykvKG4ubGVuZ3RoLTErYSk7cmV0dXJuIGk9cihjK3MqYS8yLHMpLG89MCx0PXt0OlwicmFuZ2VQb2ludHNcIixhOmFyZ3VtZW50c30sZX0sZS5yYW5nZVJvdW5kUG9pbnRzPWZ1bmN0aW9uKHUsYSl7YXJndW1lbnRzLmxlbmd0aDwyJiYoYT0wKTt2YXIgYz11WzBdLGw9dVsxXSxzPW4ubGVuZ3RoPDI/KGM9bD1NYXRoLnJvdW5kKChjK2wpLzIpLDApOihsLWMpLyhuLmxlbmd0aC0xK2EpfDA7cmV0dXJuIGk9cihjK01hdGgucm91bmQocyphLzIrKGwtYy0obi5sZW5ndGgtMSthKSpzKS8yKSxzKSxvPTAsdD17dDpcInJhbmdlUm91bmRQb2ludHNcIixhOmFyZ3VtZW50c30sZX0sZS5yYW5nZUJhbmRzPWZ1bmN0aW9uKHUsYSxjKXthcmd1bWVudHMubGVuZ3RoPDImJihhPTApLGFyZ3VtZW50cy5sZW5ndGg8MyYmKGM9YSk7dmFyIGw9dVsxXTx1WzBdLHM9dVtsLTBdLGY9dVsxLWxdLGg9KGYtcykvKG4ubGVuZ3RoLWErMipjKTtyZXR1cm4gaT1yKHMraCpjLGgpLGwmJmkucmV2ZXJzZSgpLG89aCooMS1hKSx0PXt0OlwicmFuZ2VCYW5kc1wiLGE6YXJndW1lbnRzfSxlfSxlLnJhbmdlUm91bmRCYW5kcz1mdW5jdGlvbih1LGEsYyl7YXJndW1lbnRzLmxlbmd0aDwyJiYoYT0wKSxhcmd1bWVudHMubGVuZ3RoPDMmJihjPWEpO3ZhciBsPXVbMV08dVswXSxzPXVbbC0wXSxmPXVbMS1sXSxoPU1hdGguZmxvb3IoKGYtcykvKG4ubGVuZ3RoLWErMipjKSk7cmV0dXJuIGk9cihzK01hdGgucm91bmQoKGYtcy0obi5sZW5ndGgtYSkqaCkvMiksaCksbCYmaS5yZXZlcnNlKCksbz1NYXRoLnJvdW5kKGgqKDEtYSkpLHQ9e3Q6XCJyYW5nZVJvdW5kQmFuZHNcIixhOmFyZ3VtZW50c30sZX0sZS5yYW5nZUJhbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gb30sZS5yYW5nZUV4dGVudD1mdW5jdGlvbigpe3JldHVybiBQaSh0LmFbMF0pfSxlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gUWkobix0KX0sZS5kb21haW4obil9ZnVuY3Rpb24gbm8obix0KXtmdW5jdGlvbiBpKCl7dmFyIGU9MCxyPXQubGVuZ3RoO2ZvcihhPVtdOysrZTxyOylhW2UtMV09dGEucXVhbnRpbGUobixlL3IpO3JldHVybiBvfWZ1bmN0aW9uIG8obil7cmV0dXJuIGlzTmFOKG49K24pP3ZvaWQgMDp0W3RhLmJpc2VjdChhLG4pXX12YXIgYTtyZXR1cm4gby5kb21haW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49dC5tYXAocikuZmlsdGVyKHUpLnNvcnQoZSksaSgpKTpufSxvLnJhbmdlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PW4saSgpKTp0fSxvLnF1YW50aWxlcz1mdW5jdGlvbigpe3JldHVybiBhfSxvLmludmVydEV4dGVudD1mdW5jdGlvbihlKXtyZXR1cm4gZT10LmluZGV4T2YoZSksMD5lP1swLzAsMC8wXTpbZT4wP2FbZS0xXTpuWzBdLGU8YS5sZW5ndGg/YVtlXTpuW24ubGVuZ3RoLTFdXX0sby5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIG5vKG4sdCl9LGkoKX1mdW5jdGlvbiB0byhuLHQsZSl7ZnVuY3Rpb24gcih0KXtyZXR1cm4gZVtNYXRoLm1heCgwLE1hdGgubWluKG8sTWF0aC5mbG9vcihpKih0LW4pKSkpXX1mdW5jdGlvbiB1KCl7cmV0dXJuIGk9ZS5sZW5ndGgvKHQtbiksbz1lLmxlbmd0aC0xLHJ9dmFyIGksbztyZXR1cm4gci5kb21haW49ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49K2VbMF0sdD0rZVtlLmxlbmd0aC0xXSx1KCkpOltuLHRdfSxyLnJhbmdlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPW4sdSgpKTplfSxyLmludmVydEV4dGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdD1lLmluZGV4T2YodCksdD0wPnQ/MC8wOnQvaStuLFt0LHQrMS9pXX0sci5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIHRvKG4sdCxlKX0sdSgpfWZ1bmN0aW9uIGVvKG4sdCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZT49ZT90W3RhLmJpc2VjdChuLGUpXTp2b2lkIDB9cmV0dXJuIGUuZG9tYWluPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPXQsZSk6bn0sZS5yYW5nZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD1uLGUpOnR9LGUuaW52ZXJ0RXh0ZW50PWZ1bmN0aW9uKGUpe3JldHVybiBlPXQuaW5kZXhPZihlKSxbbltlLTFdLG5bZV1dfSxlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gZW8obix0KX0sZX1mdW5jdGlvbiBybyhuKXtmdW5jdGlvbiB0KG4pe3JldHVybitufXJldHVybiB0LmludmVydD10LHQuZG9tYWluPXQucmFuZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49ZS5tYXAodCksdCk6bn0sdC50aWNrcz1mdW5jdGlvbih0KXtyZXR1cm4gWGkobix0KX0sdC50aWNrRm9ybWF0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuICRpKG4sdCxlKX0sdC5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIHJvKG4pfSx0fWZ1bmN0aW9uIHVvKCl7cmV0dXJuIDB9ZnVuY3Rpb24gaW8obil7cmV0dXJuIG4uaW5uZXJSYWRpdXN9ZnVuY3Rpb24gb28obil7cmV0dXJuIG4ub3V0ZXJSYWRpdXN9ZnVuY3Rpb24gYW8obil7cmV0dXJuIG4uc3RhcnRBbmdsZX1mdW5jdGlvbiBjbyhuKXtyZXR1cm4gbi5lbmRBbmdsZX1mdW5jdGlvbiBsbyhuKXtyZXR1cm4gbiYmbi5wYWRBbmdsZX1mdW5jdGlvbiBzbyhuLHQsZSxyKXtyZXR1cm4obi1lKSp0LSh0LXIpKm4+MD8wOjF9ZnVuY3Rpb24gZm8obix0LGUscix1KXt2YXIgaT1uWzBdLXRbMF0sbz1uWzFdLXRbMV0sYT0odT9yOi1yKS9NYXRoLnNxcnQoaSppK28qbyksYz1hKm8sbD0tYSppLHM9blswXStjLGY9blsxXStsLGg9dFswXStjLGc9dFsxXStsLHA9KHMraCkvMix2PShmK2cpLzIsZD1oLXMsbT1nLWYseT1kKmQrbSptLE09ZS1yLHg9cypnLWgqZixiPSgwPm0/LTE6MSkqTWF0aC5zcXJ0KE0qTSp5LXgqeCksXz0oeCptLWQqYikveSx3PSgteCpkLW0qYikveSxTPSh4Km0rZCpiKS95LGs9KC14KmQrbSpiKS95LEU9Xy1wLEE9dy12LE49Uy1wLEM9ay12O3JldHVybiBFKkUrQSpBPk4qTitDKkMmJihfPVMsdz1rKSxbW18tYyx3LWxdLFtfKmUvTSx3KmUvTV1dfWZ1bmN0aW9uIGhvKG4pe2Z1bmN0aW9uIHQodCl7ZnVuY3Rpb24gbygpe2wucHVzaChcIk1cIixpKG4ocyksYSkpfWZvcih2YXIgYyxsPVtdLHM9W10sZj0tMSxoPXQubGVuZ3RoLGc9RXQoZSkscD1FdChyKTsrK2Y8aDspdS5jYWxsKHRoaXMsYz10W2ZdLGYpP3MucHVzaChbK2cuY2FsbCh0aGlzLGMsZiksK3AuY2FsbCh0aGlzLGMsZildKTpzLmxlbmd0aCYmKG8oKSxzPVtdKTtyZXR1cm4gcy5sZW5ndGgmJm8oKSxsLmxlbmd0aD9sLmpvaW4oXCJcIik6bnVsbH12YXIgZT1BcixyPU5yLHU9TmUsaT1nbyxvPWkua2V5LGE9Ljc7cmV0dXJuIHQueD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1uLHQpOmV9LHQueT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj1uLHQpOnJ9LHQuZGVmaW5lZD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1uLHQpOnV9LHQuaW50ZXJwb2xhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9pPW46KGk9RWwuZ2V0KG4pfHxnbykua2V5LHQpOm99LHQudGVuc2lvbj1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT1uLHQpOmF9LHR9ZnVuY3Rpb24gZ28obil7cmV0dXJuIG4uam9pbihcIkxcIil9ZnVuY3Rpb24gcG8obil7cmV0dXJuIGdvKG4pK1wiWlwifWZ1bmN0aW9uIHZvKG4pe2Zvcih2YXIgdD0wLGU9bi5sZW5ndGgscj1uWzBdLHU9W3JbMF0sXCIsXCIsclsxXV07Kyt0PGU7KXUucHVzaChcIkhcIiwoclswXSsocj1uW3RdKVswXSkvMixcIlZcIixyWzFdKTtyZXR1cm4gZT4xJiZ1LnB1c2goXCJIXCIsclswXSksdS5qb2luKFwiXCIpfWZ1bmN0aW9uIG1vKG4pe2Zvcih2YXIgdD0wLGU9bi5sZW5ndGgscj1uWzBdLHU9W3JbMF0sXCIsXCIsclsxXV07Kyt0PGU7KXUucHVzaChcIlZcIiwocj1uW3RdKVsxXSxcIkhcIixyWzBdKTtyZXR1cm4gdS5qb2luKFwiXCIpfWZ1bmN0aW9uIHlvKG4pe2Zvcih2YXIgdD0wLGU9bi5sZW5ndGgscj1uWzBdLHU9W3JbMF0sXCIsXCIsclsxXV07Kyt0PGU7KXUucHVzaChcIkhcIiwocj1uW3RdKVswXSxcIlZcIixyWzFdKTtyZXR1cm4gdS5qb2luKFwiXCIpfWZ1bmN0aW9uIE1vKG4sdCl7cmV0dXJuIG4ubGVuZ3RoPDQ/Z28obik6blsxXStfbyhuLnNsaWNlKDEsLTEpLHdvKG4sdCkpfWZ1bmN0aW9uIHhvKG4sdCl7cmV0dXJuIG4ubGVuZ3RoPDM/Z28obik6blswXStfbygobi5wdXNoKG5bMF0pLG4pLHdvKFtuW24ubGVuZ3RoLTJdXS5jb25jYXQobixbblsxXV0pLHQpKX1mdW5jdGlvbiBibyhuLHQpe3JldHVybiBuLmxlbmd0aDwzP2dvKG4pOm5bMF0rX28obix3byhuLHQpKX1mdW5jdGlvbiBfbyhuLHQpe2lmKHQubGVuZ3RoPDF8fG4ubGVuZ3RoIT10Lmxlbmd0aCYmbi5sZW5ndGghPXQubGVuZ3RoKzIpcmV0dXJuIGdvKG4pO3ZhciBlPW4ubGVuZ3RoIT10Lmxlbmd0aCxyPVwiXCIsdT1uWzBdLGk9blsxXSxvPXRbMF0sYT1vLGM9MTtpZihlJiYocis9XCJRXCIrKGlbMF0tMipvWzBdLzMpK1wiLFwiKyhpWzFdLTIqb1sxXS8zKStcIixcIitpWzBdK1wiLFwiK2lbMV0sdT1uWzFdLGM9MiksdC5sZW5ndGg+MSl7YT10WzFdLGk9bltjXSxjKysscis9XCJDXCIrKHVbMF0rb1swXSkrXCIsXCIrKHVbMV0rb1sxXSkrXCIsXCIrKGlbMF0tYVswXSkrXCIsXCIrKGlbMV0tYVsxXSkrXCIsXCIraVswXStcIixcIitpWzFdO2Zvcih2YXIgbD0yO2w8dC5sZW5ndGg7bCsrLGMrKylpPW5bY10sYT10W2xdLHIrPVwiU1wiKyhpWzBdLWFbMF0pK1wiLFwiKyhpWzFdLWFbMV0pK1wiLFwiK2lbMF0rXCIsXCIraVsxXX1pZihlKXt2YXIgcz1uW2NdO3IrPVwiUVwiKyhpWzBdKzIqYVswXS8zKStcIixcIisoaVsxXSsyKmFbMV0vMykrXCIsXCIrc1swXStcIixcIitzWzFdfXJldHVybiByfWZ1bmN0aW9uIHdvKG4sdCl7Zm9yKHZhciBlLHI9W10sdT0oMS10KS8yLGk9blswXSxvPW5bMV0sYT0xLGM9bi5sZW5ndGg7KythPGM7KWU9aSxpPW8sbz1uW2FdLHIucHVzaChbdSoob1swXS1lWzBdKSx1KihvWzFdLWVbMV0pXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gU28obil7aWYobi5sZW5ndGg8MylyZXR1cm4gZ28obik7dmFyIHQ9MSxlPW4ubGVuZ3RoLHI9blswXSx1PXJbMF0saT1yWzFdLG89W3UsdSx1LChyPW5bMV0pWzBdXSxhPVtpLGksaSxyWzFdXSxjPVt1LFwiLFwiLGksXCJMXCIsTm8oQ2wsbyksXCIsXCIsTm8oQ2wsYSldO2ZvcihuLnB1c2gobltlLTFdKTsrK3Q8PWU7KXI9blt0XSxvLnNoaWZ0KCksby5wdXNoKHJbMF0pLGEuc2hpZnQoKSxhLnB1c2goclsxXSksQ28oYyxvLGEpO3JldHVybiBuLnBvcCgpLGMucHVzaChcIkxcIixyKSxjLmpvaW4oXCJcIil9ZnVuY3Rpb24ga28obil7aWYobi5sZW5ndGg8NClyZXR1cm4gZ28obik7Zm9yKHZhciB0LGU9W10scj0tMSx1PW4ubGVuZ3RoLGk9WzBdLG89WzBdOysrcjwzOyl0PW5bcl0saS5wdXNoKHRbMF0pLG8ucHVzaCh0WzFdKTtmb3IoZS5wdXNoKE5vKENsLGkpK1wiLFwiK05vKENsLG8pKSwtLXI7KytyPHU7KXQ9bltyXSxpLnNoaWZ0KCksaS5wdXNoKHRbMF0pLG8uc2hpZnQoKSxvLnB1c2godFsxXSksQ28oZSxpLG8pO3JldHVybiBlLmpvaW4oXCJcIil9ZnVuY3Rpb24gRW8obil7Zm9yKHZhciB0LGUscj0tMSx1PW4ubGVuZ3RoLGk9dSs0LG89W10sYT1bXTsrK3I8NDspZT1uW3IldV0sby5wdXNoKGVbMF0pLGEucHVzaChlWzFdKTtmb3IodD1bTm8oQ2wsbyksXCIsXCIsTm8oQ2wsYSldLC0tcjsrK3I8aTspZT1uW3IldV0sby5zaGlmdCgpLG8ucHVzaChlWzBdKSxhLnNoaWZ0KCksYS5wdXNoKGVbMV0pLENvKHQsbyxhKTtyZXR1cm4gdC5qb2luKFwiXCIpfWZ1bmN0aW9uIEFvKG4sdCl7dmFyIGU9bi5sZW5ndGgtMTtpZihlKWZvcih2YXIgcix1LGk9blswXVswXSxvPW5bMF1bMV0sYT1uW2VdWzBdLWksYz1uW2VdWzFdLW8sbD0tMTsrK2w8PWU7KXI9bltsXSx1PWwvZSxyWzBdPXQqclswXSsoMS10KSooaSt1KmEpLHJbMV09dCpyWzFdKygxLXQpKihvK3UqYyk7cmV0dXJuIFNvKG4pfWZ1bmN0aW9uIE5vKG4sdCl7cmV0dXJuIG5bMF0qdFswXStuWzFdKnRbMV0rblsyXSp0WzJdK25bM10qdFszXX1mdW5jdGlvbiBDbyhuLHQsZSl7bi5wdXNoKFwiQ1wiLE5vKEFsLHQpLFwiLFwiLE5vKEFsLGUpLFwiLFwiLE5vKE5sLHQpLFwiLFwiLE5vKE5sLGUpLFwiLFwiLE5vKENsLHQpLFwiLFwiLE5vKENsLGUpKX1mdW5jdGlvbiB6byhuLHQpe3JldHVybih0WzFdLW5bMV0pLyh0WzBdLW5bMF0pfWZ1bmN0aW9uIHFvKG4pe2Zvcih2YXIgdD0wLGU9bi5sZW5ndGgtMSxyPVtdLHU9blswXSxpPW5bMV0sbz1yWzBdPXpvKHUsaSk7Kyt0PGU7KXJbdF09KG8rKG89em8odT1pLGk9blt0KzFdKSkpLzI7cmV0dXJuIHJbdF09byxyfWZ1bmN0aW9uIExvKG4pe2Zvcih2YXIgdCxlLHIsdSxpPVtdLG89cW8obiksYT0tMSxjPW4ubGVuZ3RoLTE7KythPGM7KXQ9em8oblthXSxuW2ErMV0pLGdhKHQpPENhP29bYV09b1thKzFdPTA6KGU9b1thXS90LHI9b1thKzFdL3QsdT1lKmUrcipyLHU+OSYmKHU9Myp0L01hdGguc3FydCh1KSxvW2FdPXUqZSxvW2ErMV09dSpyKSk7Zm9yKGE9LTE7KythPD1jOyl1PShuW01hdGgubWluKGMsYSsxKV1bMF0tbltNYXRoLm1heCgwLGEtMSldWzBdKS8oNiooMStvW2FdKm9bYV0pKSxpLnB1c2goW3V8fDAsb1thXSp1fHwwXSk7cmV0dXJuIGl9ZnVuY3Rpb24gVG8obil7cmV0dXJuIG4ubGVuZ3RoPDM/Z28obik6blswXStfbyhuLExvKG4pKX1mdW5jdGlvbiBSbyhuKXtmb3IodmFyIHQsZSxyLHU9LTEsaT1uLmxlbmd0aDsrK3U8aTspdD1uW3VdLGU9dFswXSxyPXRbMV0tUmEsdFswXT1lKk1hdGguY29zKHIpLHRbMV09ZSpNYXRoLnNpbihyKTtyZXR1cm4gbn1mdW5jdGlvbiBEbyhuKXtmdW5jdGlvbiB0KHQpe2Z1bmN0aW9uIGMoKXt2LnB1c2goXCJNXCIsYShuKG0pLGYpLHMsbChuKGQucmV2ZXJzZSgpKSxmKSxcIlpcIil9Zm9yKHZhciBoLGcscCx2PVtdLGQ9W10sbT1bXSx5PS0xLE09dC5sZW5ndGgseD1FdChlKSxiPUV0KHUpLF89ZT09PXI/ZnVuY3Rpb24oKXtyZXR1cm4gZ306RXQociksdz11PT09aT9mdW5jdGlvbigpe3JldHVybiBwfTpFdChpKTsrK3k8TTspby5jYWxsKHRoaXMsaD10W3ldLHkpPyhkLnB1c2goW2c9K3guY2FsbCh0aGlzLGgseSkscD0rYi5jYWxsKHRoaXMsaCx5KV0pLG0ucHVzaChbK18uY2FsbCh0aGlzLGgseSksK3cuY2FsbCh0aGlzLGgseSldKSk6ZC5sZW5ndGgmJihjKCksZD1bXSxtPVtdKTtyZXR1cm4gZC5sZW5ndGgmJmMoKSx2Lmxlbmd0aD92LmpvaW4oXCJcIik6bnVsbH12YXIgZT1BcixyPUFyLHU9MCxpPU5yLG89TmUsYT1nbyxjPWEua2V5LGw9YSxzPVwiTFwiLGY9Ljc7cmV0dXJuIHQueD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1yPW4sdCk6cn0sdC54MD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1uLHQpOmV9LHQueDE9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9bix0KTpyXG59LHQueT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1pPW4sdCk6aX0sdC55MD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1uLHQpOnV9LHQueTE9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9bix0KTppfSx0LmRlZmluZWQ9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89bix0KTpvfSx0LmludGVycG9sYXRlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPVwiZnVuY3Rpb25cIj09dHlwZW9mIG4/YT1uOihhPUVsLmdldChuKXx8Z28pLmtleSxsPWEucmV2ZXJzZXx8YSxzPWEuY2xvc2VkP1wiTVwiOlwiTFwiLHQpOmN9LHQudGVuc2lvbj1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZj1uLHQpOmZ9LHR9ZnVuY3Rpb24gUG8obil7cmV0dXJuIG4ucmFkaXVzfWZ1bmN0aW9uIFVvKG4pe3JldHVybltuLngsbi55XX1mdW5jdGlvbiBqbyhuKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlPXRbMF0scj10WzFdLVJhO3JldHVybltlKk1hdGguY29zKHIpLGUqTWF0aC5zaW4ocildfX1mdW5jdGlvbiBGbygpe3JldHVybiA2NH1mdW5jdGlvbiBIbygpe3JldHVyblwiY2lyY2xlXCJ9ZnVuY3Rpb24gT28obil7dmFyIHQ9TWF0aC5zcXJ0KG4vcWEpO3JldHVyblwiTTAsXCIrdCtcIkFcIit0K1wiLFwiK3QrXCIgMCAxLDEgMCxcIistdCtcIkFcIit0K1wiLFwiK3QrXCIgMCAxLDEgMCxcIit0K1wiWlwifWZ1bmN0aW9uIElvKG4pe3JldHVybiBmdW5jdGlvbigpe3ZhciB0LGU7KHQ9dGhpc1tuXSkmJihlPXRbdC5hY3RpdmVdKSYmKC0tdC5jb3VudD9kZWxldGUgdFt0LmFjdGl2ZV06ZGVsZXRlIHRoaXNbbl0sdC5hY3RpdmUrPS41LGUuZXZlbnQmJmUuZXZlbnQuaW50ZXJydXB0LmNhbGwodGhpcyx0aGlzLl9fZGF0YV9fLGUuaW5kZXgpKX19ZnVuY3Rpb24gWW8obix0LGUpe3JldHVybiB5YShuLFBsKSxuLm5hbWVzcGFjZT10LG4uaWQ9ZSxufWZ1bmN0aW9uIFpvKG4sdCxlLHIpe3ZhciB1PW4uaWQsaT1uLm5hbWVzcGFjZTtyZXR1cm4gWShuLFwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZnVuY3Rpb24obixvLGEpe25baV1bdV0udHdlZW4uc2V0KHQscihlLmNhbGwobixuLl9fZGF0YV9fLG8sYSkpKX06KGU9cihlKSxmdW5jdGlvbihuKXtuW2ldW3VdLnR3ZWVuLnNldCh0LGUpfSkpfWZ1bmN0aW9uIFZvKG4pe3JldHVybiBudWxsPT1uJiYobj1cIlwiKSxmdW5jdGlvbigpe3RoaXMudGV4dENvbnRlbnQ9bn19ZnVuY3Rpb24gWG8obil7cmV0dXJuIG51bGw9PW4/XCJfX3RyYW5zaXRpb25fX1wiOlwiX190cmFuc2l0aW9uX1wiK24rXCJfX1wifWZ1bmN0aW9uICRvKG4sdCxlLHIsdSl7dmFyIGk9bltlXXx8KG5bZV09e2FjdGl2ZTowLGNvdW50OjB9KSxvPWlbcl07aWYoIW8pe3ZhciBhPXUudGltZTtvPWlbcl09e3R3ZWVuOm5ldyBsLHRpbWU6YSxkZWxheTp1LmRlbGF5LGR1cmF0aW9uOnUuZHVyYXRpb24sZWFzZTp1LmVhc2UsaW5kZXg6dH0sdT1udWxsLCsraS5jb3VudCx0YS50aW1lcihmdW5jdGlvbih1KXtmdW5jdGlvbiBjKGUpe2lmKGkuYWN0aXZlPnIpcmV0dXJuIHMoKTt2YXIgdT1pW2kuYWN0aXZlXTt1JiYoLS1pLmNvdW50LGRlbGV0ZSBpW2kuYWN0aXZlXSx1LmV2ZW50JiZ1LmV2ZW50LmludGVycnVwdC5jYWxsKG4sbi5fX2RhdGFfXyx1LmluZGV4KSksaS5hY3RpdmU9cixvLmV2ZW50JiZvLmV2ZW50LnN0YXJ0LmNhbGwobixuLl9fZGF0YV9fLHQpLG8udHdlZW4uZm9yRWFjaChmdW5jdGlvbihlLHIpeyhyPXIuY2FsbChuLG4uX19kYXRhX18sdCkpJiZ2LnB1c2gocil9KSxoPW8uZWFzZSxmPW8uZHVyYXRpb24sdGEudGltZXIoZnVuY3Rpb24oKXtyZXR1cm4gcC5jPWwoZXx8MSk/TmU6bCwxfSwwLGEpfWZ1bmN0aW9uIGwoZSl7aWYoaS5hY3RpdmUhPT1yKXJldHVybiAxO2Zvcih2YXIgdT1lL2YsYT1oKHUpLGM9di5sZW5ndGg7Yz4wOyl2Wy0tY10uY2FsbChuLGEpO3JldHVybiB1Pj0xPyhvLmV2ZW50JiZvLmV2ZW50LmVuZC5jYWxsKG4sbi5fX2RhdGFfXyx0KSxzKCkpOnZvaWQgMH1mdW5jdGlvbiBzKCl7cmV0dXJuLS1pLmNvdW50P2RlbGV0ZSBpW3JdOmRlbGV0ZSBuW2VdLDF9dmFyIGYsaCxnPW8uZGVsYXkscD1lYyx2PVtdO3JldHVybiBwLnQ9ZythLHU+PWc/Yyh1LWcpOnZvaWQocC5jPWMpfSwwLGEpfX1mdW5jdGlvbiBCbyhuLHQsZSl7bi5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24obil7dmFyIHI9dChuKTtyZXR1cm5cInRyYW5zbGF0ZShcIisoaXNGaW5pdGUocik/cjplKG4pKStcIiwwKVwifSl9ZnVuY3Rpb24gV28obix0LGUpe24uYXR0cihcInRyYW5zZm9ybVwiLGZ1bmN0aW9uKG4pe3ZhciByPXQobik7cmV0dXJuXCJ0cmFuc2xhdGUoMCxcIisoaXNGaW5pdGUocik/cjplKG4pKStcIilcIn0pfWZ1bmN0aW9uIEpvKG4pe3JldHVybiBuLnRvSVNPU3RyaW5nKCl9ZnVuY3Rpb24gR28obix0LGUpe2Z1bmN0aW9uIHIodCl7cmV0dXJuIG4odCl9ZnVuY3Rpb24gdShuLGUpe3ZhciByPW5bMV0tblswXSx1PXIvZSxpPXRhLmJpc2VjdChWbCx1KTtyZXR1cm4gaT09VmwubGVuZ3RoP1t0LnllYXIsVmkobi5tYXAoZnVuY3Rpb24obil7cmV0dXJuIG4vMzE1MzZlNn0pLGUpWzJdXTppP3RbdS9WbFtpLTFdPFZsW2ldL3U/aS0xOmldOltCbCxWaShuLGUpWzJdXX1yZXR1cm4gci5pbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIEtvKG4uaW52ZXJ0KHQpKX0sci5kb21haW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG4uZG9tYWluKHQpLHIpOm4uZG9tYWluKCkubWFwKEtvKX0sci5uaWNlPWZ1bmN0aW9uKG4sdCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4haXNOYU4oZSkmJiFuLnJhbmdlKGUsS28oK2UrMSksdCkubGVuZ3RofXZhciBpPXIuZG9tYWluKCksbz1QaShpKSxhPW51bGw9PW4/dShvLDEwKTpcIm51bWJlclwiPT10eXBlb2YgbiYmdShvLG4pO3JldHVybiBhJiYobj1hWzBdLHQ9YVsxXSksci5kb21haW4oRmkoaSx0PjE/e2Zsb29yOmZ1bmN0aW9uKHQpe2Zvcig7ZSh0PW4uZmxvb3IodCkpOyl0PUtvKHQtMSk7cmV0dXJuIHR9LGNlaWw6ZnVuY3Rpb24odCl7Zm9yKDtlKHQ9bi5jZWlsKHQpKTspdD1LbygrdCsxKTtyZXR1cm4gdH19Om4pKX0sci50aWNrcz1mdW5jdGlvbihuLHQpe3ZhciBlPVBpKHIuZG9tYWluKCkpLGk9bnVsbD09bj91KGUsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBuP3UoZSxuKTohbi5yYW5nZSYmW3tyYW5nZTpufSx0XTtyZXR1cm4gaSYmKG49aVswXSx0PWlbMV0pLG4ucmFuZ2UoZVswXSxLbygrZVsxXSsxKSwxPnQ/MTp0KX0sci50aWNrRm9ybWF0PWZ1bmN0aW9uKCl7cmV0dXJuIGV9LHIuY29weT1mdW5jdGlvbigpe3JldHVybiBHbyhuLmNvcHkoKSx0LGUpfSxZaShyLG4pfWZ1bmN0aW9uIEtvKG4pe3JldHVybiBuZXcgRGF0ZShuKX1mdW5jdGlvbiBRbyhuKXtyZXR1cm4gSlNPTi5wYXJzZShuLnJlc3BvbnNlVGV4dCl9ZnVuY3Rpb24gbmEobil7dmFyIHQ9dWEuY3JlYXRlUmFuZ2UoKTtyZXR1cm4gdC5zZWxlY3ROb2RlKHVhLmJvZHkpLHQuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KG4ucmVzcG9uc2VUZXh0KX12YXIgdGE9e3ZlcnNpb246XCIzLjUuNVwifSxlYT1bXS5zbGljZSxyYT1mdW5jdGlvbihuKXtyZXR1cm4gZWEuY2FsbChuKX0sdWE9dGhpcy5kb2N1bWVudDtpZih1YSl0cnl7cmEodWEuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXMpWzBdLm5vZGVUeXBlfWNhdGNoKGlhKXtyYT1mdW5jdGlvbihuKXtmb3IodmFyIHQ9bi5sZW5ndGgsZT1uZXcgQXJyYXkodCk7dC0tOyllW3RdPW5bdF07cmV0dXJuIGV9fWlmKERhdGUubm93fHwoRGF0ZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9KSx1YSl0cnl7dWEuY3JlYXRlRWxlbWVudChcIkRJVlwiKS5zdHlsZS5zZXRQcm9wZXJ0eShcIm9wYWNpdHlcIiwwLFwiXCIpfWNhdGNoKG9hKXt2YXIgYWE9dGhpcy5FbGVtZW50LnByb3RvdHlwZSxjYT1hYS5zZXRBdHRyaWJ1dGUsbGE9YWEuc2V0QXR0cmlidXRlTlMsc2E9dGhpcy5DU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZSxmYT1zYS5zZXRQcm9wZXJ0eTthYS5zZXRBdHRyaWJ1dGU9ZnVuY3Rpb24obix0KXtjYS5jYWxsKHRoaXMsbix0K1wiXCIpfSxhYS5zZXRBdHRyaWJ1dGVOUz1mdW5jdGlvbihuLHQsZSl7bGEuY2FsbCh0aGlzLG4sdCxlK1wiXCIpfSxzYS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihuLHQsZSl7ZmEuY2FsbCh0aGlzLG4sdCtcIlwiLGUpfX10YS5hc2NlbmRpbmc9ZSx0YS5kZXNjZW5kaW5nPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4+dD8tMTp0Pm4/MTp0Pj1uPzA6MC8wfSx0YS5taW49ZnVuY3Rpb24obix0KXt2YXIgZSxyLHU9LTEsaT1uLmxlbmd0aDtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKDsrK3U8aTspaWYobnVsbCE9KHI9blt1XSkmJnI+PXIpe2U9cjticmVha31mb3IoOysrdTxpOyludWxsIT0ocj1uW3VdKSYmZT5yJiYoZT1yKX1lbHNle2Zvcig7Kyt1PGk7KWlmKG51bGwhPShyPXQuY2FsbChuLG5bdV0sdSkpJiZyPj1yKXtlPXI7YnJlYWt9Zm9yKDsrK3U8aTspbnVsbCE9KHI9dC5jYWxsKG4sblt1XSx1KSkmJmU+ciYmKGU9cil9cmV0dXJuIGV9LHRhLm1heD1mdW5jdGlvbihuLHQpe3ZhciBlLHIsdT0tMSxpPW4ubGVuZ3RoO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IoOysrdTxpOylpZihudWxsIT0ocj1uW3VdKSYmcj49cil7ZT1yO2JyZWFrfWZvcig7Kyt1PGk7KW51bGwhPShyPW5bdV0pJiZyPmUmJihlPXIpfWVsc2V7Zm9yKDsrK3U8aTspaWYobnVsbCE9KHI9dC5jYWxsKG4sblt1XSx1KSkmJnI+PXIpe2U9cjticmVha31mb3IoOysrdTxpOyludWxsIT0ocj10LmNhbGwobixuW3VdLHUpKSYmcj5lJiYoZT1yKX1yZXR1cm4gZX0sdGEuZXh0ZW50PWZ1bmN0aW9uKG4sdCl7dmFyIGUscix1LGk9LTEsbz1uLmxlbmd0aDtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKDsrK2k8bzspaWYobnVsbCE9KHI9bltpXSkmJnI+PXIpe2U9dT1yO2JyZWFrfWZvcig7KytpPG87KW51bGwhPShyPW5baV0pJiYoZT5yJiYoZT1yKSxyPnUmJih1PXIpKX1lbHNle2Zvcig7KytpPG87KWlmKG51bGwhPShyPXQuY2FsbChuLG5baV0saSkpJiZyPj1yKXtlPXU9cjticmVha31mb3IoOysraTxvOyludWxsIT0ocj10LmNhbGwobixuW2ldLGkpKSYmKGU+ciYmKGU9cikscj51JiYodT1yKSl9cmV0dXJuW2UsdV19LHRhLnN1bT1mdW5jdGlvbihuLHQpe3ZhciBlLHI9MCxpPW4ubGVuZ3RoLG89LTE7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKDsrK288aTspdShlPStuW29dKSYmKHIrPWUpO2Vsc2UgZm9yKDsrK288aTspdShlPSt0LmNhbGwobixuW29dLG8pKSYmKHIrPWUpO3JldHVybiByfSx0YS5tZWFuPWZ1bmN0aW9uKG4sdCl7dmFyIGUsaT0wLG89bi5sZW5ndGgsYT0tMSxjPW87aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKDsrK2E8bzspdShlPXIoblthXSkpP2krPWU6LS1jO2Vsc2UgZm9yKDsrK2E8bzspdShlPXIodC5jYWxsKG4sblthXSxhKSkpP2krPWU6LS1jO3JldHVybiBjP2kvYzp2b2lkIDB9LHRhLnF1YW50aWxlPWZ1bmN0aW9uKG4sdCl7dmFyIGU9KG4ubGVuZ3RoLTEpKnQrMSxyPU1hdGguZmxvb3IoZSksdT0rbltyLTFdLGk9ZS1yO3JldHVybiBpP3UraSoobltyXS11KTp1fSx0YS5tZWRpYW49ZnVuY3Rpb24obix0KXt2YXIgaSxvPVtdLGE9bi5sZW5ndGgsYz0tMTtpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IoOysrYzxhOyl1KGk9cihuW2NdKSkmJm8ucHVzaChpKTtlbHNlIGZvcig7KytjPGE7KXUoaT1yKHQuY2FsbChuLG5bY10sYykpKSYmby5wdXNoKGkpO3JldHVybiBvLmxlbmd0aD90YS5xdWFudGlsZShvLnNvcnQoZSksLjUpOnZvaWQgMH0sdGEudmFyaWFuY2U9ZnVuY3Rpb24obix0KXt2YXIgZSxpLG89bi5sZW5ndGgsYT0wLGM9MCxsPS0xLHM9MDtpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IoOysrbDxvOyl1KGU9cihuW2xdKSkmJihpPWUtYSxhKz1pLysrcyxjKz1pKihlLWEpKTtlbHNlIGZvcig7KytsPG87KXUoZT1yKHQuY2FsbChuLG5bbF0sbCkpKSYmKGk9ZS1hLGErPWkvKytzLGMrPWkqKGUtYSkpO3JldHVybiBzPjE/Yy8ocy0xKTp2b2lkIDB9LHRhLmRldmlhdGlvbj1mdW5jdGlvbigpe3ZhciBuPXRhLnZhcmlhbmNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbj9NYXRoLnNxcnQobik6bn07dmFyIGhhPWkoZSk7dGEuYmlzZWN0TGVmdD1oYS5sZWZ0LHRhLmJpc2VjdD10YS5iaXNlY3RSaWdodD1oYS5yaWdodCx0YS5iaXNlY3Rvcj1mdW5jdGlvbihuKXtyZXR1cm4gaSgxPT09bi5sZW5ndGg/ZnVuY3Rpb24odCxyKXtyZXR1cm4gZShuKHQpLHIpfTpuKX0sdGEuc2h1ZmZsZT1mdW5jdGlvbihuLHQsZSl7KGk9YXJndW1lbnRzLmxlbmd0aCk8MyYmKGU9bi5sZW5ndGgsMj5pJiYodD0wKSk7Zm9yKHZhciByLHUsaT1lLXQ7aTspdT1NYXRoLnJhbmRvbSgpKmktLXwwLHI9bltpK3RdLG5baSt0XT1uW3UrdF0sblt1K3RdPXI7cmV0dXJuIG59LHRhLnBlcm11dGU9ZnVuY3Rpb24obix0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1uZXcgQXJyYXkoZSk7ZS0tOylyW2VdPW5bdFtlXV07cmV0dXJuIHJ9LHRhLnBhaXJzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdCxlPTAscj1uLmxlbmd0aC0xLHU9blswXSxpPW5ldyBBcnJheSgwPnI/MDpyKTtyPmU7KWlbZV09W3Q9dSx1PW5bKytlXV07cmV0dXJuIGl9LHRhLnppcD1mdW5jdGlvbigpe2lmKCEocj1hcmd1bWVudHMubGVuZ3RoKSlyZXR1cm5bXTtmb3IodmFyIG49LTEsdD10YS5taW4oYXJndW1lbnRzLG8pLGU9bmV3IEFycmF5KHQpOysrbjx0Oylmb3IodmFyIHIsdT0tMSxpPWVbbl09bmV3IEFycmF5KHIpOysrdTxyOylpW3VdPWFyZ3VtZW50c1t1XVtuXTtyZXR1cm4gZX0sdGEudHJhbnNwb3NlPWZ1bmN0aW9uKG4pe3JldHVybiB0YS56aXAuYXBwbHkodGEsbil9LHRhLmtleXM9ZnVuY3Rpb24obil7dmFyIHQ9W107Zm9yKHZhciBlIGluIG4pdC5wdXNoKGUpO3JldHVybiB0fSx0YS52YWx1ZXM9ZnVuY3Rpb24obil7dmFyIHQ9W107Zm9yKHZhciBlIGluIG4pdC5wdXNoKG5bZV0pO3JldHVybiB0fSx0YS5lbnRyaWVzPWZ1bmN0aW9uKG4pe3ZhciB0PVtdO2Zvcih2YXIgZSBpbiBuKXQucHVzaCh7a2V5OmUsdmFsdWU6bltlXX0pO3JldHVybiB0fSx0YS5tZXJnZT1mdW5jdGlvbihuKXtmb3IodmFyIHQsZSxyLHU9bi5sZW5ndGgsaT0tMSxvPTA7KytpPHU7KW8rPW5baV0ubGVuZ3RoO2ZvcihlPW5ldyBBcnJheShvKTstLXU+PTA7KWZvcihyPW5bdV0sdD1yLmxlbmd0aDstLXQ+PTA7KWVbLS1vXT1yW3RdO3JldHVybiBlfTt2YXIgZ2E9TWF0aC5hYnM7dGEucmFuZ2U9ZnVuY3Rpb24obix0LGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg8MyYmKGU9MSxhcmd1bWVudHMubGVuZ3RoPDImJih0PW4sbj0wKSksKHQtbikvZT09PTEvMCl0aHJvdyBuZXcgRXJyb3IoXCJpbmZpbml0ZSByYW5nZVwiKTt2YXIgcix1PVtdLGk9YShnYShlKSksbz0tMTtpZihuKj1pLHQqPWksZSo9aSwwPmUpZm9yKDsocj1uK2UqKytvKT50Oyl1LnB1c2goci9pKTtlbHNlIGZvcig7KHI9bitlKisrbyk8dDspdS5wdXNoKHIvaSk7cmV0dXJuIHV9LHRhLm1hcD1mdW5jdGlvbihuLHQpe3ZhciBlPW5ldyBsO2lmKG4gaW5zdGFuY2VvZiBsKW4uZm9yRWFjaChmdW5jdGlvbihuLHQpe2Uuc2V0KG4sdCl9KTtlbHNlIGlmKEFycmF5LmlzQXJyYXkobikpe3ZhciByLHU9LTEsaT1uLmxlbmd0aDtpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IoOysrdTxpOyllLnNldCh1LG5bdV0pO2Vsc2UgZm9yKDsrK3U8aTspZS5zZXQodC5jYWxsKG4scj1uW3VdLHUpLHIpfWVsc2UgZm9yKHZhciBvIGluIG4pZS5zZXQobyxuW29dKTtyZXR1cm4gZX07dmFyIHBhPVwiX19wcm90b19fXCIsdmE9XCJcXHgwMFwiO2MobCx7aGFzOmgsZ2V0OmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLl9bcyhuKV19LHNldDpmdW5jdGlvbihuLHQpe3JldHVybiB0aGlzLl9bcyhuKV09dH0scmVtb3ZlOmcsa2V5czpwLHZhbHVlczpmdW5jdGlvbigpe3ZhciBuPVtdO2Zvcih2YXIgdCBpbiB0aGlzLl8pbi5wdXNoKHRoaXMuX1t0XSk7cmV0dXJuIG59LGVudHJpZXM6ZnVuY3Rpb24oKXt2YXIgbj1bXTtmb3IodmFyIHQgaW4gdGhpcy5fKW4ucHVzaCh7a2V5OmYodCksdmFsdWU6dGhpcy5fW3RdfSk7cmV0dXJuIG59LHNpemU6dixlbXB0eTpkLGZvckVhY2g6ZnVuY3Rpb24obil7Zm9yKHZhciB0IGluIHRoaXMuXyluLmNhbGwodGhpcyxmKHQpLHRoaXMuX1t0XSl9fSksdGEubmVzdD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCxvLGEpe2lmKGE+PWkubGVuZ3RoKXJldHVybiByP3IuY2FsbCh1LG8pOmU/by5zb3J0KGUpOm87Zm9yKHZhciBjLHMsZixoLGc9LTEscD1vLmxlbmd0aCx2PWlbYSsrXSxkPW5ldyBsOysrZzxwOykoaD1kLmdldChjPXYocz1vW2ddKSkpP2gucHVzaChzKTpkLnNldChjLFtzXSk7cmV0dXJuIHQ/KHM9dCgpLGY9ZnVuY3Rpb24oZSxyKXtzLnNldChlLG4odCxyLGEpKX0pOihzPXt9LGY9ZnVuY3Rpb24oZSxyKXtzW2VdPW4odCxyLGEpfSksZC5mb3JFYWNoKGYpLHN9ZnVuY3Rpb24gdChuLGUpe2lmKGU+PWkubGVuZ3RoKXJldHVybiBuO3ZhciByPVtdLHU9b1tlKytdO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24obix1KXtyLnB1c2goe2tleTpuLHZhbHVlczp0KHUsZSl9KX0pLHU/ci5zb3J0KGZ1bmN0aW9uKG4sdCl7cmV0dXJuIHUobi5rZXksdC5rZXkpfSk6cn12YXIgZSxyLHU9e30saT1bXSxvPVtdO3JldHVybiB1Lm1hcD1mdW5jdGlvbih0LGUpe3JldHVybiBuKGUsdCwwKX0sdS5lbnRyaWVzPWZ1bmN0aW9uKGUpe3JldHVybiB0KG4odGEubWFwLGUsMCksMCl9LHUua2V5PWZ1bmN0aW9uKG4pe3JldHVybiBpLnB1c2gobiksdX0sdS5zb3J0S2V5cz1mdW5jdGlvbihuKXtyZXR1cm4gb1tpLmxlbmd0aC0xXT1uLHV9LHUuc29ydFZhbHVlcz1mdW5jdGlvbihuKXtyZXR1cm4gZT1uLHV9LHUucm9sbHVwPWZ1bmN0aW9uKG4pe3JldHVybiByPW4sdX0sdX0sdGEuc2V0PWZ1bmN0aW9uKG4pe3ZhciB0PW5ldyBtO2lmKG4pZm9yKHZhciBlPTAscj1uLmxlbmd0aDtyPmU7KytlKXQuYWRkKG5bZV0pO3JldHVybiB0fSxjKG0se2hhczpoLGFkZDpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5fW3Mobis9XCJcIildPSEwLG59LHJlbW92ZTpnLHZhbHVlczpwLHNpemU6dixlbXB0eTpkLGZvckVhY2g6ZnVuY3Rpb24obil7Zm9yKHZhciB0IGluIHRoaXMuXyluLmNhbGwodGhpcyxmKHQpKX19KSx0YS5iZWhhdmlvcj17fSx0YS5yZWJpbmQ9ZnVuY3Rpb24obix0KXtmb3IodmFyIGUscj0xLHU9YXJndW1lbnRzLmxlbmd0aDsrK3I8dTspbltlPWFyZ3VtZW50c1tyXV09TShuLHQsdFtlXSk7cmV0dXJuIG59O3ZhciBkYT1bXCJ3ZWJraXRcIixcIm1zXCIsXCJtb3pcIixcIk1velwiLFwib1wiLFwiT1wiXTt0YS5kaXNwYXRjaD1mdW5jdGlvbigpe2Zvcih2YXIgbj1uZXcgXyx0PS0xLGU9YXJndW1lbnRzLmxlbmd0aDsrK3Q8ZTspblthcmd1bWVudHNbdF1dPXcobik7cmV0dXJuIG59LF8ucHJvdG90eXBlLm9uPWZ1bmN0aW9uKG4sdCl7dmFyIGU9bi5pbmRleE9mKFwiLlwiKSxyPVwiXCI7aWYoZT49MCYmKHI9bi5zbGljZShlKzEpLG49bi5zbGljZSgwLGUpKSxuKXJldHVybiBhcmd1bWVudHMubGVuZ3RoPDI/dGhpc1tuXS5vbihyKTp0aGlzW25dLm9uKHIsdCk7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKG51bGw9PXQpZm9yKG4gaW4gdGhpcyl0aGlzLmhhc093blByb3BlcnR5KG4pJiZ0aGlzW25dLm9uKHIsbnVsbCk7cmV0dXJuIHRoaXN9fSx0YS5ldmVudD1udWxsLHRhLnJlcXVvdGU9ZnVuY3Rpb24obil7cmV0dXJuIG4ucmVwbGFjZShtYSxcIlxcXFwkJlwiKX07dmFyIG1hPS9bXFxcXFxcXlxcJFxcKlxcK1xcP1xcfFxcW1xcXVxcKFxcKVxcLlxce1xcfV0vZyx5YT17fS5fX3Byb3RvX18/ZnVuY3Rpb24obix0KXtuLl9fcHJvdG9fXz10fTpmdW5jdGlvbihuLHQpe2Zvcih2YXIgZSBpbiB0KW5bZV09dFtlXX0sTWE9ZnVuY3Rpb24obix0KXtyZXR1cm4gdC5xdWVyeVNlbGVjdG9yKG4pfSx4YT1mdW5jdGlvbihuLHQpe3JldHVybiB0LnF1ZXJ5U2VsZWN0b3JBbGwobil9LGJhPWZ1bmN0aW9uKG4sdCl7dmFyIGU9bi5tYXRjaGVzfHxuW3gobixcIm1hdGNoZXNTZWxlY3RvclwiKV07cmV0dXJuKGJhPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIGUuY2FsbChuLHQpfSkobix0KX07XCJmdW5jdGlvblwiPT10eXBlb2YgU2l6emxlJiYoTWE9ZnVuY3Rpb24obix0KXtyZXR1cm4gU2l6emxlKG4sdClbMF18fG51bGx9LHhhPVNpenpsZSxiYT1TaXp6bGUubWF0Y2hlc1NlbGVjdG9yKSx0YS5zZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGEuc2VsZWN0KHVhLmRvY3VtZW50RWxlbWVudCl9O3ZhciBfYT10YS5zZWxlY3Rpb24ucHJvdG90eXBlPVtdO19hLnNlbGVjdD1mdW5jdGlvbihuKXt2YXIgdCxlLHIsdSxpPVtdO249TihuKTtmb3IodmFyIG89LTEsYT10aGlzLmxlbmd0aDsrK288YTspe2kucHVzaCh0PVtdKSx0LnBhcmVudE5vZGU9KHI9dGhpc1tvXSkucGFyZW50Tm9kZTtmb3IodmFyIGM9LTEsbD1yLmxlbmd0aDsrK2M8bDspKHU9cltjXSk/KHQucHVzaChlPW4uY2FsbCh1LHUuX19kYXRhX18sYyxvKSksZSYmXCJfX2RhdGFfX1wiaW4gdSYmKGUuX19kYXRhX189dS5fX2RhdGFfXykpOnQucHVzaChudWxsKX1yZXR1cm4gQShpKX0sX2Euc2VsZWN0QWxsPWZ1bmN0aW9uKG4pe3ZhciB0LGUscj1bXTtuPUMobik7Zm9yKHZhciB1PS0xLGk9dGhpcy5sZW5ndGg7Kyt1PGk7KWZvcih2YXIgbz10aGlzW3VdLGE9LTEsYz1vLmxlbmd0aDsrK2E8YzspKGU9b1thXSkmJihyLnB1c2godD1yYShuLmNhbGwoZSxlLl9fZGF0YV9fLGEsdSkpKSx0LnBhcmVudE5vZGU9ZSk7cmV0dXJuIEEocil9O3ZhciB3YT17c3ZnOlwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIix4aHRtbDpcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIix4bGluazpcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIix4bWw6XCJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2VcIix4bWxuczpcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCJ9O3RhLm5zPXtwcmVmaXg6d2EscXVhbGlmeTpmdW5jdGlvbihuKXt2YXIgdD1uLmluZGV4T2YoXCI6XCIpLGU9bjtyZXR1cm4gdD49MCYmKGU9bi5zbGljZSgwLHQpLG49bi5zbGljZSh0KzEpKSx3YS5oYXNPd25Qcm9wZXJ0eShlKT97c3BhY2U6d2FbZV0sbG9jYWw6bn06bn19LF9hLmF0dHI9ZnVuY3Rpb24obix0KXtpZihhcmd1bWVudHMubGVuZ3RoPDIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuKXt2YXIgZT10aGlzLm5vZGUoKTtyZXR1cm4gbj10YS5ucy5xdWFsaWZ5KG4pLG4ubG9jYWw/ZS5nZXRBdHRyaWJ1dGVOUyhuLnNwYWNlLG4ubG9jYWwpOmUuZ2V0QXR0cmlidXRlKG4pfWZvcih0IGluIG4pdGhpcy5lYWNoKHoodCxuW3RdKSk7cmV0dXJuIHRoaXN9cmV0dXJuIHRoaXMuZWFjaCh6KG4sdCkpfSxfYS5jbGFzc2VkPWZ1bmN0aW9uKG4sdCl7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXtpZihcInN0cmluZ1wiPT10eXBlb2Ygbil7dmFyIGU9dGhpcy5ub2RlKCkscj0obj1UKG4pKS5sZW5ndGgsdT0tMTtpZih0PWUuY2xhc3NMaXN0KXtmb3IoOysrdTxyOylpZighdC5jb250YWlucyhuW3VdKSlyZXR1cm4hMX1lbHNlIGZvcih0PWUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7Kyt1PHI7KWlmKCFMKG5bdV0pLnRlc3QodCkpcmV0dXJuITE7cmV0dXJuITB9Zm9yKHQgaW4gbil0aGlzLmVhY2goUih0LG5bdF0pKTtyZXR1cm4gdGhpc31yZXR1cm4gdGhpcy5lYWNoKFIobix0KSl9LF9hLnN0eWxlPWZ1bmN0aW9uKG4sZSxyKXt2YXIgdT1hcmd1bWVudHMubGVuZ3RoO2lmKDM+dSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIG4pezI+dSYmKGU9XCJcIik7Zm9yKHIgaW4gbil0aGlzLmVhY2goUChyLG5bcl0sZSkpO3JldHVybiB0aGlzfWlmKDI+dSl7dmFyIGk9dGhpcy5ub2RlKCk7cmV0dXJuIHQoaSkuZ2V0Q29tcHV0ZWRTdHlsZShpLG51bGwpLmdldFByb3BlcnR5VmFsdWUobil9cj1cIlwifXJldHVybiB0aGlzLmVhY2goUChuLGUscikpfSxfYS5wcm9wZXJ0eT1mdW5jdGlvbihuLHQpe2lmKGFyZ3VtZW50cy5sZW5ndGg8Mil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pcmV0dXJuIHRoaXMubm9kZSgpW25dO2Zvcih0IGluIG4pdGhpcy5lYWNoKFUodCxuW3RdKSk7cmV0dXJuIHRoaXN9cmV0dXJuIHRoaXMuZWFjaChVKG4sdCkpfSxfYS50ZXh0PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP3RoaXMuZWFjaChcImZ1bmN0aW9uXCI9PXR5cGVvZiBuP2Z1bmN0aW9uKCl7dmFyIHQ9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy50ZXh0Q29udGVudD1udWxsPT10P1wiXCI6dH06bnVsbD09bj9mdW5jdGlvbigpe3RoaXMudGV4dENvbnRlbnQ9XCJcIn06ZnVuY3Rpb24oKXt0aGlzLnRleHRDb250ZW50PW59KTp0aGlzLm5vZGUoKS50ZXh0Q29udGVudH0sX2EuaHRtbD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90aGlzLmVhY2goXCJmdW5jdGlvblwiPT10eXBlb2Ygbj9mdW5jdGlvbigpe3ZhciB0PW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuaW5uZXJIVE1MPW51bGw9PXQ/XCJcIjp0fTpudWxsPT1uP2Z1bmN0aW9uKCl7dGhpcy5pbm5lckhUTUw9XCJcIn06ZnVuY3Rpb24oKXt0aGlzLmlubmVySFRNTD1ufSk6dGhpcy5ub2RlKCkuaW5uZXJIVE1MfSxfYS5hcHBlbmQ9ZnVuY3Rpb24obil7cmV0dXJuIG49aihuKSx0aGlzLnNlbGVjdChmdW5jdGlvbigpe3JldHVybiB0aGlzLmFwcGVuZENoaWxkKG4uYXBwbHkodGhpcyxhcmd1bWVudHMpKX0pfSxfYS5pbnNlcnQ9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj1qKG4pLHQ9Tih0KSx0aGlzLnNlbGVjdChmdW5jdGlvbigpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8bnVsbCl9KX0sX2EucmVtb3ZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChGKX0sX2EuZGF0YT1mdW5jdGlvbihuLHQpe2Z1bmN0aW9uIGUobixlKXt2YXIgcix1LGksbz1uLmxlbmd0aCxmPWUubGVuZ3RoLGg9TWF0aC5taW4obyxmKSxnPW5ldyBBcnJheShmKSxwPW5ldyBBcnJheShmKSx2PW5ldyBBcnJheShvKTtpZih0KXt2YXIgZCxtPW5ldyBsLHk9bmV3IEFycmF5KG8pO2ZvcihyPS0xOysrcjxvOyltLmhhcyhkPXQuY2FsbCh1PW5bcl0sdS5fX2RhdGFfXyxyKSk/dltyXT11Om0uc2V0KGQsdSkseVtyXT1kO2ZvcihyPS0xOysrcjxmOykodT1tLmdldChkPXQuY2FsbChlLGk9ZVtyXSxyKSkpP3UhPT0hMCYmKGdbcl09dSx1Ll9fZGF0YV9fPWkpOnBbcl09SChpKSxtLnNldChkLCEwKTtmb3Iocj0tMTsrK3I8bzspbS5nZXQoeVtyXSkhPT0hMCYmKHZbcl09bltyXSl9ZWxzZXtmb3Iocj0tMTsrK3I8aDspdT1uW3JdLGk9ZVtyXSx1Pyh1Ll9fZGF0YV9fPWksZ1tyXT11KTpwW3JdPUgoaSk7Zm9yKDtmPnI7KytyKXBbcl09SChlW3JdKTtmb3IoO28+cjsrK3IpdltyXT1uW3JdfXAudXBkYXRlPWcscC5wYXJlbnROb2RlPWcucGFyZW50Tm9kZT12LnBhcmVudE5vZGU9bi5wYXJlbnROb2RlLGEucHVzaChwKSxjLnB1c2goZykscy5wdXNoKHYpfXZhciByLHUsaT0tMSxvPXRoaXMubGVuZ3RoO2lmKCFhcmd1bWVudHMubGVuZ3RoKXtmb3Iobj1uZXcgQXJyYXkobz0ocj10aGlzWzBdKS5sZW5ndGgpOysraTxvOykodT1yW2ldKSYmKG5baV09dS5fX2RhdGFfXyk7cmV0dXJuIG59dmFyIGE9WihbXSksYz1BKFtdKSxzPUEoW10pO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pZm9yKDsrK2k8bzspZShyPXRoaXNbaV0sbi5jYWxsKHIsci5wYXJlbnROb2RlLl9fZGF0YV9fLGkpKTtlbHNlIGZvcig7KytpPG87KWUocj10aGlzW2ldLG4pO3JldHVybiBjLmVudGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGF9LGMuZXhpdD1mdW5jdGlvbigpe3JldHVybiBzfSxjfSxfYS5kYXR1bT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90aGlzLnByb3BlcnR5KFwiX19kYXRhX19cIixuKTp0aGlzLnByb3BlcnR5KFwiX19kYXRhX19cIil9LF9hLmZpbHRlcj1mdW5jdGlvbihuKXt2YXIgdCxlLHIsdT1bXTtcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiYobj1PKG4pKTtmb3IodmFyIGk9MCxvPXRoaXMubGVuZ3RoO28+aTtpKyspe3UucHVzaCh0PVtdKSx0LnBhcmVudE5vZGU9KGU9dGhpc1tpXSkucGFyZW50Tm9kZTtmb3IodmFyIGE9MCxjPWUubGVuZ3RoO2M+YTthKyspKHI9ZVthXSkmJm4uY2FsbChyLHIuX19kYXRhX18sYSxpKSYmdC5wdXNoKHIpfXJldHVybiBBKHUpfSxfYS5vcmRlcj1mdW5jdGlvbigpe2Zvcih2YXIgbj0tMSx0PXRoaXMubGVuZ3RoOysrbjx0Oylmb3IodmFyIGUscj10aGlzW25dLHU9ci5sZW5ndGgtMSxpPXJbdV07LS11Pj0wOykoZT1yW3VdKSYmKGkmJmkhPT1lLm5leHRTaWJsaW5nJiZpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsaSksaT1lKTtyZXR1cm4gdGhpc30sX2Euc29ydD1mdW5jdGlvbihuKXtuPUkuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Zvcih2YXIgdD0tMSxlPXRoaXMubGVuZ3RoOysrdDxlOyl0aGlzW3RdLnNvcnQobik7cmV0dXJuIHRoaXMub3JkZXIoKX0sX2EuZWFjaD1mdW5jdGlvbihuKXtyZXR1cm4gWSh0aGlzLGZ1bmN0aW9uKHQsZSxyKXtuLmNhbGwodCx0Ll9fZGF0YV9fLGUscil9KX0sX2EuY2FsbD1mdW5jdGlvbihuKXt2YXIgdD1yYShhcmd1bWVudHMpO3JldHVybiBuLmFwcGx5KHRbMF09dGhpcyx0KSx0aGlzfSxfYS5lbXB0eT1mdW5jdGlvbigpe3JldHVybiF0aGlzLm5vZGUoKX0sX2Eubm9kZT1mdW5jdGlvbigpe2Zvcih2YXIgbj0wLHQ9dGhpcy5sZW5ndGg7dD5uO24rKylmb3IodmFyIGU9dGhpc1tuXSxyPTAsdT1lLmxlbmd0aDt1PnI7cisrKXt2YXIgaT1lW3JdO2lmKGkpcmV0dXJuIGl9cmV0dXJuIG51bGx9LF9hLnNpemU9ZnVuY3Rpb24oKXt2YXIgbj0wO3JldHVybiBZKHRoaXMsZnVuY3Rpb24oKXsrK259KSxufTt2YXIgU2E9W107dGEuc2VsZWN0aW9uLmVudGVyPVosdGEuc2VsZWN0aW9uLmVudGVyLnByb3RvdHlwZT1TYSxTYS5hcHBlbmQ9X2EuYXBwZW5kLFNhLmVtcHR5PV9hLmVtcHR5LFNhLm5vZGU9X2Eubm9kZSxTYS5jYWxsPV9hLmNhbGwsU2Euc2l6ZT1fYS5zaXplLFNhLnNlbGVjdD1mdW5jdGlvbihuKXtmb3IodmFyIHQsZSxyLHUsaSxvPVtdLGE9LTEsYz10aGlzLmxlbmd0aDsrK2E8Yzspe3I9KHU9dGhpc1thXSkudXBkYXRlLG8ucHVzaCh0PVtdKSx0LnBhcmVudE5vZGU9dS5wYXJlbnROb2RlO2Zvcih2YXIgbD0tMSxzPXUubGVuZ3RoOysrbDxzOykoaT11W2xdKT8odC5wdXNoKHJbbF09ZT1uLmNhbGwodS5wYXJlbnROb2RlLGkuX19kYXRhX18sbCxhKSksZS5fX2RhdGFfXz1pLl9fZGF0YV9fKTp0LnB1c2gobnVsbCl9cmV0dXJuIEEobyl9LFNhLmluc2VydD1mdW5jdGlvbihuLHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDImJih0PVYodGhpcykpLF9hLmluc2VydC5jYWxsKHRoaXMsbix0KX0sdGEuc2VsZWN0PWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0PyhlPVtNYSh0LHVhKV0sZS5wYXJlbnROb2RlPXVhLmRvY3VtZW50RWxlbWVudCk6KGU9W3RdLGUucGFyZW50Tm9kZT1uKHQpKSxBKFtlXSl9LHRhLnNlbGVjdEFsbD1mdW5jdGlvbihuKXt2YXIgdDtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Ygbj8odD1yYSh4YShuLHVhKSksdC5wYXJlbnROb2RlPXVhLmRvY3VtZW50RWxlbWVudCk6KHQ9bix0LnBhcmVudE5vZGU9bnVsbCksQShbdF0pfSxfYS5vbj1mdW5jdGlvbihuLHQsZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aDtpZigzPnIpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBuKXsyPnImJih0PSExKTtmb3IoZSBpbiBuKXRoaXMuZWFjaChYKGUsbltlXSx0KSk7cmV0dXJuIHRoaXN9aWYoMj5yKXJldHVybihyPXRoaXMubm9kZSgpW1wiX19vblwiK25dKSYmci5fO2U9ITF9cmV0dXJuIHRoaXMuZWFjaChYKG4sdCxlKSl9O3ZhciBrYT10YS5tYXAoe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIn0pO3VhJiZrYS5mb3JFYWNoKGZ1bmN0aW9uKG4pe1wib25cIituIGluIHVhJiZrYS5yZW1vdmUobil9KTt2YXIgRWEsQWE9MDt0YS5tb3VzZT1mdW5jdGlvbihuKXtyZXR1cm4gSihuLGsoKSl9O3ZhciBOYT10aGlzLm5hdmlnYXRvciYmL1dlYktpdC8udGVzdCh0aGlzLm5hdmlnYXRvci51c2VyQWdlbnQpPy0xOjA7dGEudG91Y2g9ZnVuY3Rpb24obix0LGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg8MyYmKGU9dCx0PWsoKS5jaGFuZ2VkVG91Y2hlcyksdClmb3IodmFyIHIsdT0wLGk9dC5sZW5ndGg7aT51OysrdSlpZigocj10W3VdKS5pZGVudGlmaWVyPT09ZSlyZXR1cm4gSihuLHIpfSx0YS5iZWhhdmlvci5kcmFnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3RoaXMub24oXCJtb3VzZWRvd24uZHJhZ1wiLGkpLm9uKFwidG91Y2hzdGFydC5kcmFnXCIsbyl9ZnVuY3Rpb24gZShuLHQsZSxpLG8pe3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt2YXIgbixlLHI9dChoLHYpO3ImJihuPXJbMF0tTVswXSxlPXJbMV0tTVsxXSxwfD1ufGUsTT1yLGcoe3R5cGU6XCJkcmFnXCIseDpyWzBdK2xbMF0seTpyWzFdK2xbMV0sZHg6bixkeTplfSkpfWZ1bmN0aW9uIGMoKXt0KGgsdikmJihtLm9uKGkrZCxudWxsKS5vbihvK2QsbnVsbCkseShwJiZ0YS5ldmVudC50YXJnZXQ9PT1mKSxnKHt0eXBlOlwiZHJhZ2VuZFwifSkpfXZhciBsLHM9dGhpcyxmPXRhLmV2ZW50LnRhcmdldCxoPXMucGFyZW50Tm9kZSxnPXIub2Yocyxhcmd1bWVudHMpLHA9MCx2PW4oKSxkPVwiLmRyYWdcIisobnVsbD09dj9cIlwiOlwiLVwiK3YpLG09dGEuc2VsZWN0KGUoZikpLm9uKGkrZCxhKS5vbihvK2QsYykseT1XKGYpLE09dChoLHYpO3U/KGw9dS5hcHBseShzLGFyZ3VtZW50cyksbD1bbC54LU1bMF0sbC55LU1bMV1dKTpsPVswLDBdLGcoe3R5cGU6XCJkcmFnc3RhcnRcIn0pfX12YXIgcj1FKG4sXCJkcmFnXCIsXCJkcmFnc3RhcnRcIixcImRyYWdlbmRcIiksdT1udWxsLGk9ZShiLHRhLm1vdXNlLHQsXCJtb3VzZW1vdmVcIixcIm1vdXNldXBcIiksbz1lKEcsdGEudG91Y2gseSxcInRvdWNobW92ZVwiLFwidG91Y2hlbmRcIik7cmV0dXJuIG4ub3JpZ2luPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PXQsbik6dX0sdGEucmViaW5kKG4scixcIm9uXCIpfSx0YS50b3VjaGVzPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9aygpLnRvdWNoZXMpLHQ/cmEodCkubWFwKGZ1bmN0aW9uKHQpe3ZhciBlPUoobix0KTtyZXR1cm4gZS5pZGVudGlmaWVyPXQuaWRlbnRpZmllcixlfSk6W119O3ZhciBDYT0xZS02LHphPUNhKkNhLHFhPU1hdGguUEksTGE9MipxYSxUYT1MYS1DYSxSYT1xYS8yLERhPXFhLzE4MCxQYT0xODAvcWEsVWE9TWF0aC5TUVJUMixqYT0yLEZhPTQ7dGEuaW50ZXJwb2xhdGVab29tPWZ1bmN0aW9uKG4sdCl7ZnVuY3Rpb24gZShuKXt2YXIgdD1uKnk7aWYobSl7dmFyIGU9cnQodiksbz1pLyhqYSpoKSooZSp1dChVYSp0K3YpLWV0KHYpKTtyZXR1cm5bcitvKmwsdStvKnMsaSplL3J0KFVhKnQrdildfXJldHVybltyK24qbCx1K24qcyxpKk1hdGguZXhwKFVhKnQpXX12YXIgcj1uWzBdLHU9blsxXSxpPW5bMl0sbz10WzBdLGE9dFsxXSxjPXRbMl0sbD1vLXIscz1hLXUsZj1sKmwrcypzLGg9TWF0aC5zcXJ0KGYpLGc9KGMqYy1pKmkrRmEqZikvKDIqaSpqYSpoKSxwPShjKmMtaSppLUZhKmYpLygyKmMqamEqaCksdj1NYXRoLmxvZyhNYXRoLnNxcnQoZypnKzEpLWcpLGQ9TWF0aC5sb2coTWF0aC5zcXJ0KHAqcCsxKS1wKSxtPWQtdix5PShtfHxNYXRoLmxvZyhjL2kpKS9VYTtyZXR1cm4gZS5kdXJhdGlvbj0xZTMqeSxlfSx0YS5iZWhhdmlvci56b29tPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuKXtuLm9uKHEsZikub24oT2ErXCIuem9vbVwiLGcpLm9uKFwiZGJsY2xpY2suem9vbVwiLHApLm9uKFIsaCl9ZnVuY3Rpb24gZShuKXtyZXR1cm5bKG5bMF0tay54KS9rLmssKG5bMV0tay55KS9rLmtdfWZ1bmN0aW9uIHIobil7cmV0dXJuW25bMF0qay5rK2sueCxuWzFdKmsuaytrLnldfWZ1bmN0aW9uIHUobil7ay5rPU1hdGgubWF4KE5bMF0sTWF0aC5taW4oTlsxXSxuKSl9ZnVuY3Rpb24gaShuLHQpe3Q9cih0KSxrLngrPW5bMF0tdFswXSxrLnkrPW5bMV0tdFsxXX1mdW5jdGlvbiBvKHQsZSxyLG8pe3QuX19jaGFydF9fPXt4OmsueCx5OmsueSxrOmsua30sdShNYXRoLnBvdygyLG8pKSxpKGQ9ZSxyKSx0PXRhLnNlbGVjdCh0KSxDPjAmJih0PXQudHJhbnNpdGlvbigpLmR1cmF0aW9uKEMpKSx0LmNhbGwobi5ldmVudCl9ZnVuY3Rpb24gYSgpe2ImJmIuZG9tYWluKHgucmFuZ2UoKS5tYXAoZnVuY3Rpb24obil7cmV0dXJuKG4tay54KS9rLmt9KS5tYXAoeC5pbnZlcnQpKSx3JiZ3LmRvbWFpbihfLnJhbmdlKCkubWFwKGZ1bmN0aW9uKG4pe3JldHVybihuLWsueSkvay5rfSkubWFwKF8uaW52ZXJ0KSl9ZnVuY3Rpb24gYyhuKXt6Kyt8fG4oe3R5cGU6XCJ6b29tc3RhcnRcIn0pfWZ1bmN0aW9uIGwobil7YSgpLG4oe3R5cGU6XCJ6b29tXCIsc2NhbGU6ay5rLHRyYW5zbGF0ZTpbay54LGsueV19KX1mdW5jdGlvbiBzKG4pey0tenx8bih7dHlwZTpcInpvb21lbmRcIn0pLGQ9bnVsbH1mdW5jdGlvbiBmKCl7ZnVuY3Rpb24gbigpe2Y9MSxpKHRhLm1vdXNlKHUpLGcpLGwoYSl9ZnVuY3Rpb24gcigpe2gub24oTCxudWxsKS5vbihULG51bGwpLHAoZiYmdGEuZXZlbnQudGFyZ2V0PT09bykscyhhKX12YXIgdT10aGlzLG89dGEuZXZlbnQudGFyZ2V0LGE9RC5vZih1LGFyZ3VtZW50cyksZj0wLGg9dGEuc2VsZWN0KHQodSkpLm9uKEwsbikub24oVCxyKSxnPWUodGEubW91c2UodSkpLHA9Vyh1KTtEbC5jYWxsKHUpLGMoYSl9ZnVuY3Rpb24gaCgpe2Z1bmN0aW9uIG4oKXt2YXIgbj10YS50b3VjaGVzKHApO3JldHVybiBnPWsuayxuLmZvckVhY2goZnVuY3Rpb24obil7bi5pZGVudGlmaWVyIGluIGQmJihkW24uaWRlbnRpZmllcl09ZShuKSl9KSxufWZ1bmN0aW9uIHQoKXt2YXIgdD10YS5ldmVudC50YXJnZXQ7dGEuc2VsZWN0KHQpLm9uKHgscikub24oYixhKSxfLnB1c2godCk7Zm9yKHZhciBlPXRhLmV2ZW50LmNoYW5nZWRUb3VjaGVzLHU9MCxpPWUubGVuZ3RoO2k+dTsrK3UpZFtlW3VdLmlkZW50aWZpZXJdPW51bGw7dmFyIGM9bigpLGw9RGF0ZS5ub3coKTtpZigxPT09Yy5sZW5ndGgpe2lmKDUwMD5sLU0pe3ZhciBzPWNbMF07byhwLHMsZFtzLmlkZW50aWZpZXJdLE1hdGguZmxvb3IoTWF0aC5sb2coay5rKS9NYXRoLkxOMikrMSksUygpfU09bH1lbHNlIGlmKGMubGVuZ3RoPjEpe3ZhciBzPWNbMF0sZj1jWzFdLGg9c1swXS1mWzBdLGc9c1sxXS1mWzFdO209aCpoK2cqZ319ZnVuY3Rpb24gcigpe3ZhciBuLHQsZSxyLG89dGEudG91Y2hlcyhwKTtEbC5jYWxsKHApO2Zvcih2YXIgYT0wLGM9by5sZW5ndGg7Yz5hOysrYSxyPW51bGwpaWYoZT1vW2FdLHI9ZFtlLmlkZW50aWZpZXJdKXtpZih0KWJyZWFrO249ZSx0PXJ9aWYocil7dmFyIHM9KHM9ZVswXS1uWzBdKSpzKyhzPWVbMV0tblsxXSkqcyxmPW0mJk1hdGguc3FydChzL20pO249WyhuWzBdK2VbMF0pLzIsKG5bMV0rZVsxXSkvMl0sdD1bKHRbMF0rclswXSkvMiwodFsxXStyWzFdKS8yXSx1KGYqZyl9TT1udWxsLGkobix0KSxsKHYpfWZ1bmN0aW9uIGEoKXtpZih0YS5ldmVudC50b3VjaGVzLmxlbmd0aCl7Zm9yKHZhciB0PXRhLmV2ZW50LmNoYW5nZWRUb3VjaGVzLGU9MCxyPXQubGVuZ3RoO3I+ZTsrK2UpZGVsZXRlIGRbdFtlXS5pZGVudGlmaWVyXTtmb3IodmFyIHUgaW4gZClyZXR1cm4gdm9pZCBuKCl9dGEuc2VsZWN0QWxsKF8pLm9uKHksbnVsbCksdy5vbihxLGYpLm9uKFIsaCksRSgpLHModil9dmFyIGcscD10aGlzLHY9RC5vZihwLGFyZ3VtZW50cyksZD17fSxtPTAseT1cIi56b29tLVwiK3RhLmV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXIseD1cInRvdWNobW92ZVwiK3ksYj1cInRvdWNoZW5kXCIreSxfPVtdLHc9dGEuc2VsZWN0KHApLEU9VyhwKTt0KCksYyh2KSx3Lm9uKHEsbnVsbCkub24oUix0KX1mdW5jdGlvbiBnKCl7dmFyIG49RC5vZih0aGlzLGFyZ3VtZW50cyk7eT9jbGVhclRpbWVvdXQoeSk6KHY9ZShkPW18fHRhLm1vdXNlKHRoaXMpKSxEbC5jYWxsKHRoaXMpLGMobikpLHk9c2V0VGltZW91dChmdW5jdGlvbigpe3k9bnVsbCxzKG4pfSw1MCksUygpLHUoTWF0aC5wb3coMiwuMDAyKkhhKCkpKmsuayksaShkLHYpLGwobil9ZnVuY3Rpb24gcCgpe3ZhciBuPXRhLm1vdXNlKHRoaXMpLHQ9TWF0aC5sb2coay5rKS9NYXRoLkxOMjtvKHRoaXMsbixlKG4pLHRhLmV2ZW50LnNoaWZ0S2V5P01hdGguY2VpbCh0KS0xOk1hdGguZmxvb3IodCkrMSl9dmFyIHYsZCxtLHksTSx4LGIsXyx3LGs9e3g6MCx5OjAsazoxfSxBPVs5NjAsNTAwXSxOPUlhLEM9MjUwLHo9MCxxPVwibW91c2Vkb3duLnpvb21cIixMPVwibW91c2Vtb3ZlLnpvb21cIixUPVwibW91c2V1cC56b29tXCIsUj1cInRvdWNoc3RhcnQuem9vbVwiLEQ9RShuLFwiem9vbXN0YXJ0XCIsXCJ6b29tXCIsXCJ6b29tZW5kXCIpO3JldHVybiBPYXx8KE9hPVwib253aGVlbFwiaW4gdWE/KEhhPWZ1bmN0aW9uKCl7cmV0dXJuLXRhLmV2ZW50LmRlbHRhWSoodGEuZXZlbnQuZGVsdGFNb2RlPzEyMDoxKX0sXCJ3aGVlbFwiKTpcIm9ubW91c2V3aGVlbFwiaW4gdWE/KEhhPWZ1bmN0aW9uKCl7cmV0dXJuIHRhLmV2ZW50LndoZWVsRGVsdGF9LFwibW91c2V3aGVlbFwiKTooSGE9ZnVuY3Rpb24oKXtyZXR1cm4tdGEuZXZlbnQuZGV0YWlsfSxcIk1vek1vdXNlUGl4ZWxTY3JvbGxcIikpLG4uZXZlbnQ9ZnVuY3Rpb24obil7bi5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49RC5vZih0aGlzLGFyZ3VtZW50cyksdD1rO1RsP3RhLnNlbGVjdCh0aGlzKS50cmFuc2l0aW9uKCkuZWFjaChcInN0YXJ0Lnpvb21cIixmdW5jdGlvbigpe2s9dGhpcy5fX2NoYXJ0X198fHt4OjAseTowLGs6MX0sYyhuKX0pLnR3ZWVuKFwiem9vbTp6b29tXCIsZnVuY3Rpb24oKXt2YXIgZT1BWzBdLHI9QVsxXSx1PWQ/ZFswXTplLzIsaT1kP2RbMV06ci8yLG89dGEuaW50ZXJwb2xhdGVab29tKFsodS1rLngpL2suaywoaS1rLnkpL2suayxlL2sua10sWyh1LXQueCkvdC5rLChpLXQueSkvdC5rLGUvdC5rXSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciByPW8odCksYT1lL3JbMl07dGhpcy5fX2NoYXJ0X189az17eDp1LXJbMF0qYSx5OmktclsxXSphLGs6YX0sbChuKX19KS5lYWNoKFwiaW50ZXJydXB0Lnpvb21cIixmdW5jdGlvbigpe3Mobil9KS5lYWNoKFwiZW5kLnpvb21cIixmdW5jdGlvbigpe3Mobil9KToodGhpcy5fX2NoYXJ0X189ayxjKG4pLGwobikscyhuKSl9KX0sbi50cmFuc2xhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGs9e3g6K3RbMF0seTordFsxXSxrOmsua30sYSgpLG4pOltrLngsay55XX0sbi5zY2FsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaz17eDprLngseTprLnksazordH0sYSgpLG4pOmsua30sbi5zY2FsZUV4dGVudD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oTj1udWxsPT10P0lhOlsrdFswXSwrdFsxXV0sbik6Tn0sbi5jZW50ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG09dCYmWyt0WzBdLCt0WzFdXSxuKTptfSxuLnNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KEE9dCYmWyt0WzBdLCt0WzFdXSxuKTpBfSxuLmR1cmF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhDPSt0LG4pOkN9LG4ueD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYj10LHg9dC5jb3B5KCksaz17eDowLHk6MCxrOjF9LG4pOmJ9LG4ueT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odz10LF89dC5jb3B5KCksaz17eDowLHk6MCxrOjF9LG4pOnd9LHRhLnJlYmluZChuLEQsXCJvblwiKX07dmFyIEhhLE9hLElhPVswLDEvMF07dGEuY29sb3I9b3Qsb3QucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmdiKCkrXCJcIn0sdGEuaHNsPWF0O3ZhciBZYT1hdC5wcm90b3R5cGU9bmV3IG90O1lhLmJyaWdodGVyPWZ1bmN0aW9uKG4pe3JldHVybiBuPU1hdGgucG93KC43LGFyZ3VtZW50cy5sZW5ndGg/bjoxKSxuZXcgYXQodGhpcy5oLHRoaXMucyx0aGlzLmwvbil9LFlhLmRhcmtlcj1mdW5jdGlvbihuKXtyZXR1cm4gbj1NYXRoLnBvdyguNyxhcmd1bWVudHMubGVuZ3RoP246MSksbmV3IGF0KHRoaXMuaCx0aGlzLnMsbip0aGlzLmwpfSxZYS5yZ2I9ZnVuY3Rpb24oKXtyZXR1cm4gY3QodGhpcy5oLHRoaXMucyx0aGlzLmwpfSx0YS5oY2w9bHQ7dmFyIFphPWx0LnByb3RvdHlwZT1uZXcgb3Q7WmEuYnJpZ2h0ZXI9ZnVuY3Rpb24obil7cmV0dXJuIG5ldyBsdCh0aGlzLmgsdGhpcy5jLE1hdGgubWluKDEwMCx0aGlzLmwrVmEqKGFyZ3VtZW50cy5sZW5ndGg/bjoxKSkpfSxaYS5kYXJrZXI9ZnVuY3Rpb24obil7cmV0dXJuIG5ldyBsdCh0aGlzLmgsdGhpcy5jLE1hdGgubWF4KDAsdGhpcy5sLVZhKihhcmd1bWVudHMubGVuZ3RoP246MSkpKX0sWmEucmdiPWZ1bmN0aW9uKCl7cmV0dXJuIHN0KHRoaXMuaCx0aGlzLmMsdGhpcy5sKS5yZ2IoKX0sdGEubGFiPWZ0O3ZhciBWYT0xOCxYYT0uOTUwNDcsJGE9MSxCYT0xLjA4ODgzLFdhPWZ0LnByb3RvdHlwZT1uZXcgb3Q7V2EuYnJpZ2h0ZXI9ZnVuY3Rpb24obil7cmV0dXJuIG5ldyBmdChNYXRoLm1pbigxMDAsdGhpcy5sK1ZhKihhcmd1bWVudHMubGVuZ3RoP246MSkpLHRoaXMuYSx0aGlzLmIpfSxXYS5kYXJrZXI9ZnVuY3Rpb24obil7cmV0dXJuIG5ldyBmdChNYXRoLm1heCgwLHRoaXMubC1WYSooYXJndW1lbnRzLmxlbmd0aD9uOjEpKSx0aGlzLmEsdGhpcy5iKX0sV2EucmdiPWZ1bmN0aW9uKCl7cmV0dXJuIGh0KHRoaXMubCx0aGlzLmEsdGhpcy5iKX0sdGEucmdiPW10O3ZhciBKYT1tdC5wcm90b3R5cGU9bmV3IG90O0phLmJyaWdodGVyPWZ1bmN0aW9uKG4pe249TWF0aC5wb3coLjcsYXJndW1lbnRzLmxlbmd0aD9uOjEpO3ZhciB0PXRoaXMucixlPXRoaXMuZyxyPXRoaXMuYix1PTMwO3JldHVybiB0fHxlfHxyPyh0JiZ1PnQmJih0PXUpLGUmJnU+ZSYmKGU9dSksciYmdT5yJiYocj11KSxuZXcgbXQoTWF0aC5taW4oMjU1LHQvbiksTWF0aC5taW4oMjU1LGUvbiksTWF0aC5taW4oMjU1LHIvbikpKTpuZXcgbXQodSx1LHUpfSxKYS5kYXJrZXI9ZnVuY3Rpb24obil7cmV0dXJuIG49TWF0aC5wb3coLjcsYXJndW1lbnRzLmxlbmd0aD9uOjEpLG5ldyBtdChuKnRoaXMucixuKnRoaXMuZyxuKnRoaXMuYil9LEphLmhzbD1mdW5jdGlvbigpe3JldHVybiBfdCh0aGlzLnIsdGhpcy5nLHRoaXMuYil9LEphLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCIjXCIreHQodGhpcy5yKSt4dCh0aGlzLmcpK3h0KHRoaXMuYil9O3ZhciBHYT10YS5tYXAoe2FsaWNlYmx1ZToxNTc5MjM4MyxhbnRpcXVld2hpdGU6MTY0NDQzNzUsYXF1YTo2NTUzNSxhcXVhbWFyaW5lOjgzODg1NjQsYXp1cmU6MTU3OTQxNzUsYmVpZ2U6MTYxMTkyNjAsYmlzcXVlOjE2NzcwMjQ0LGJsYWNrOjAsYmxhbmNoZWRhbG1vbmQ6MTY3NzIwNDUsYmx1ZToyNTUsYmx1ZXZpb2xldDo5MDU1MjAyLGJyb3duOjEwODI0MjM0LGJ1cmx5d29vZDoxNDU5NjIzMSxjYWRldGJsdWU6NjI2NjUyOCxjaGFydHJldXNlOjgzODgzNTIsY2hvY29sYXRlOjEzNzg5NDcwLGNvcmFsOjE2NzQ0MjcyLGNvcm5mbG93ZXJibHVlOjY1OTE5ODEsY29ybnNpbGs6MTY3NzUzODgsY3JpbXNvbjoxNDQyMzEwMCxjeWFuOjY1NTM1LGRhcmtibHVlOjEzOSxkYXJrY3lhbjozNTcyMyxkYXJrZ29sZGVucm9kOjEyMDkyOTM5LGRhcmtncmF5OjExMTE5MDE3LGRhcmtncmVlbjoyNTYwMCxkYXJrZ3JleToxMTExOTAxNyxkYXJra2hha2k6MTI0MzMyNTksZGFya21hZ2VudGE6OTEwOTY0MyxkYXJrb2xpdmVncmVlbjo1NTk3OTk5LGRhcmtvcmFuZ2U6MTY3NDc1MjAsZGFya29yY2hpZDoxMDA0MDAxMixkYXJrcmVkOjkxMDk1MDQsZGFya3NhbG1vbjoxNTMwODQxMCxkYXJrc2VhZ3JlZW46OTQxOTkxOSxkYXJrc2xhdGVibHVlOjQ3MzQzNDcsZGFya3NsYXRlZ3JheTozMTAwNDk1LGRhcmtzbGF0ZWdyZXk6MzEwMDQ5NSxkYXJrdHVycXVvaXNlOjUyOTQ1LGRhcmt2aW9sZXQ6OTY5OTUzOSxkZWVwcGluazoxNjcxNjk0NyxkZWVwc2t5Ymx1ZTo0OTE1MSxkaW1ncmF5OjY5MDgyNjUsZGltZ3JleTo2OTA4MjY1LGRvZGdlcmJsdWU6MjAwMzE5OSxmaXJlYnJpY2s6MTE2NzQxNDYsZmxvcmFsd2hpdGU6MTY3NzU5MjAsZm9yZXN0Z3JlZW46MjI2Mzg0MixmdWNoc2lhOjE2NzExOTM1LGdhaW5zYm9ybzoxNDQ3NDQ2MCxnaG9zdHdoaXRlOjE2MzE2NjcxLGdvbGQ6MTY3NjY3MjAsZ29sZGVucm9kOjE0MzI5MTIwLGdyYXk6ODQyMTUwNCxncmVlbjozMjc2OCxncmVlbnllbGxvdzoxMTQwMzA1NSxncmV5Ojg0MjE1MDQsaG9uZXlkZXc6MTU3OTQxNjAsaG90cGluazoxNjczODc0MCxpbmRpYW5yZWQ6MTM0NTg1MjQsaW5kaWdvOjQ5MTUzMzAsaXZvcnk6MTY3NzcyMDAsa2hha2k6MTU3ODc2NjAsbGF2ZW5kZXI6MTUxMzI0MTAsbGF2ZW5kZXJibHVzaDoxNjc3MzM2NSxsYXduZ3JlZW46ODE5MDk3NixsZW1vbmNoaWZmb246MTY3NzU4ODUsbGlnaHRibHVlOjExMzkzMjU0LGxpZ2h0Y29yYWw6MTU3NjE1MzYsbGlnaHRjeWFuOjE0NzQ1NTk5LGxpZ2h0Z29sZGVucm9keWVsbG93OjE2NDQ4MjEwLGxpZ2h0Z3JheToxMzg4MjMyMyxsaWdodGdyZWVuOjk0OTgyNTYsbGlnaHRncmV5OjEzODgyMzIzLGxpZ2h0cGluazoxNjc1ODQ2NSxsaWdodHNhbG1vbjoxNjc1Mjc2MixsaWdodHNlYWdyZWVuOjIxNDI4OTAsbGlnaHRza3libHVlOjg5MDAzNDYsbGlnaHRzbGF0ZWdyYXk6NzgzMzc1MyxsaWdodHNsYXRlZ3JleTo3ODMzNzUzLGxpZ2h0c3RlZWxibHVlOjExNTg0NzM0LGxpZ2h0eWVsbG93OjE2Nzc3MTg0LGxpbWU6NjUyODAsbGltZWdyZWVuOjMzMjkzMzAsbGluZW46MTY0NDU2NzAsbWFnZW50YToxNjcxMTkzNSxtYXJvb246ODM4ODYwOCxtZWRpdW1hcXVhbWFyaW5lOjY3MzczMjIsbWVkaXVtYmx1ZToyMDUsbWVkaXVtb3JjaGlkOjEyMjExNjY3LG1lZGl1bXB1cnBsZTo5NjYyNjgzLG1lZGl1bXNlYWdyZWVuOjM5NzgwOTcsbWVkaXVtc2xhdGVibHVlOjgwODc3OTAsbWVkaXVtc3ByaW5nZ3JlZW46NjQxNTQsbWVkaXVtdHVycXVvaXNlOjQ3NzIzMDAsbWVkaXVtdmlvbGV0cmVkOjEzMDQ3MTczLG1pZG5pZ2h0Ymx1ZToxNjQ0OTEyLG1pbnRjcmVhbToxNjEyMTg1MCxtaXN0eXJvc2U6MTY3NzAyNzMsbW9jY2FzaW46MTY3NzAyMjksbmF2YWpvd2hpdGU6MTY3Njg2ODUsbmF2eToxMjgsb2xkbGFjZToxNjY0MzU1OCxvbGl2ZTo4NDIxMzc2LG9saXZlZHJhYjo3MDQ4NzM5LG9yYW5nZToxNjc1MzkyMCxvcmFuZ2VyZWQ6MTY3MjkzNDQsb3JjaGlkOjE0MzE1NzM0LHBhbGVnb2xkZW5yb2Q6MTU2NTcxMzAscGFsZWdyZWVuOjEwMDI1ODgwLHBhbGV0dXJxdW9pc2U6MTE1Mjk5NjYscGFsZXZpb2xldHJlZDoxNDM4MTIwMyxwYXBheWF3aGlwOjE2NzczMDc3LHBlYWNocHVmZjoxNjc2NzY3MyxwZXJ1OjEzNDY4OTkxLHBpbms6MTY3NjEwMzUscGx1bToxNDUyNDYzNyxwb3dkZXJibHVlOjExNTkxOTEwLHB1cnBsZTo4Mzg4NzM2LHJlYmVjY2FwdXJwbGU6NjY5Nzg4MSxyZWQ6MTY3MTE2ODAscm9zeWJyb3duOjEyMzU3NTE5LHJveWFsYmx1ZTo0Mjg2OTQ1LHNhZGRsZWJyb3duOjkxMjcxODcsc2FsbW9uOjE2NDE2ODgyLHNhbmR5YnJvd246MTYwMzI4NjQsc2VhZ3JlZW46MzA1MDMyNyxzZWFzaGVsbDoxNjc3NDYzOCxzaWVubmE6MTA1MDY3OTcsc2lsdmVyOjEyNjMyMjU2LHNreWJsdWU6ODkwMDMzMSxzbGF0ZWJsdWU6Njk3MDA2MSxzbGF0ZWdyYXk6NzM3Mjk0NCxzbGF0ZWdyZXk6NzM3Mjk0NCxzbm93OjE2Nzc1OTMwLHNwcmluZ2dyZWVuOjY1NDA3LHN0ZWVsYmx1ZTo0NjIwOTgwLHRhbjoxMzgwODc4MCx0ZWFsOjMyODk2LHRoaXN0bGU6MTQyMDQ4ODgsdG9tYXRvOjE2NzM3MDk1LHR1cnF1b2lzZTo0MjUxODU2LHZpb2xldDoxNTYzMTA4Nix3aGVhdDoxNjExMzMzMSx3aGl0ZToxNjc3NzIxNSx3aGl0ZXNtb2tlOjE2MTE5Mjg1LHllbGxvdzoxNjc3Njk2MCx5ZWxsb3dncmVlbjoxMDE0NTA3NH0pO0dhLmZvckVhY2goZnVuY3Rpb24obix0KXtHYS5zZXQobix5dCh0KSl9KSx0YS5mdW5jdG9yPUV0LHRhLnhocj1BdCh5KSx0YS5kc3Y9ZnVuY3Rpb24obix0KXtmdW5jdGlvbiBlKG4sZSxpKXthcmd1bWVudHMubGVuZ3RoPDMmJihpPWUsZT1udWxsKTt2YXIgbz1OdChuLHQsbnVsbD09ZT9yOnUoZSksaSk7cmV0dXJuIG8ucm93PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP28ucmVzcG9uc2UobnVsbD09KGU9bik/cjp1KG4pKTplfSxvfWZ1bmN0aW9uIHIobil7cmV0dXJuIGUucGFyc2Uobi5yZXNwb25zZVRleHQpfWZ1bmN0aW9uIHUobil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLnBhcnNlKHQucmVzcG9uc2VUZXh0LG4pfX1mdW5jdGlvbiBpKHQpe3JldHVybiB0Lm1hcChvKS5qb2luKG4pfWZ1bmN0aW9uIG8obil7cmV0dXJuIGEudGVzdChuKT8nXCInK24ucmVwbGFjZSgvXFxcIi9nLCdcIlwiJykrJ1wiJzpufXZhciBhPW5ldyBSZWdFeHAoJ1tcIicrbitcIlxcbl1cIiksYz1uLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGUucGFyc2U9ZnVuY3Rpb24obix0KXt2YXIgcjtyZXR1cm4gZS5wYXJzZVJvd3MobixmdW5jdGlvbihuLGUpe2lmKHIpcmV0dXJuIHIobixlLTEpO3ZhciB1PW5ldyBGdW5jdGlvbihcImRcIixcInJldHVybiB7XCIrbi5tYXAoZnVuY3Rpb24obix0KXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkobikrXCI6IGRbXCIrdCtcIl1cIn0pLmpvaW4oXCIsXCIpK1wifVwiKTtyPXQ/ZnVuY3Rpb24obixlKXtyZXR1cm4gdCh1KG4pLGUpfTp1fSl9LGUucGFyc2VSb3dzPWZ1bmN0aW9uKG4sdCl7ZnVuY3Rpb24gZSgpe2lmKHM+PWwpcmV0dXJuIG87aWYodSlyZXR1cm4gdT0hMSxpO3ZhciB0PXM7aWYoMzQ9PT1uLmNoYXJDb2RlQXQodCkpe2Zvcih2YXIgZT10O2UrKzxsOylpZigzND09PW4uY2hhckNvZGVBdChlKSl7aWYoMzQhPT1uLmNoYXJDb2RlQXQoZSsxKSlicmVhazsrK2V9cz1lKzI7dmFyIHI9bi5jaGFyQ29kZUF0KGUrMSk7cmV0dXJuIDEzPT09cj8odT0hMCwxMD09PW4uY2hhckNvZGVBdChlKzIpJiYrK3MpOjEwPT09ciYmKHU9ITApLG4uc2xpY2UodCsxLGUpLnJlcGxhY2UoL1wiXCIvZywnXCInKX1mb3IoO2w+czspe3ZhciByPW4uY2hhckNvZGVBdChzKyspLGE9MTtpZigxMD09PXIpdT0hMDtlbHNlIGlmKDEzPT09cil1PSEwLDEwPT09bi5jaGFyQ29kZUF0KHMpJiYoKytzLCsrYSk7ZWxzZSBpZihyIT09Yyljb250aW51ZTtyZXR1cm4gbi5zbGljZSh0LHMtYSl9cmV0dXJuIG4uc2xpY2UodCl9Zm9yKHZhciByLHUsaT17fSxvPXt9LGE9W10sbD1uLmxlbmd0aCxzPTAsZj0wOyhyPWUoKSkhPT1vOyl7Zm9yKHZhciBoPVtdO3IhPT1pJiZyIT09bzspaC5wdXNoKHIpLHI9ZSgpO3QmJm51bGw9PShoPXQoaCxmKyspKXx8YS5wdXNoKGgpfXJldHVybiBhfSxlLmZvcm1hdD1mdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHRbMF0pKXJldHVybiBlLmZvcm1hdFJvd3ModCk7dmFyIHI9bmV3IG0sdT1bXTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Zvcih2YXIgdCBpbiBuKXIuaGFzKHQpfHx1LnB1c2goci5hZGQodCkpfSksW3UubWFwKG8pLmpvaW4obildLmNvbmNhdCh0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdS5tYXAoZnVuY3Rpb24obil7cmV0dXJuIG8odFtuXSl9KS5qb2luKG4pfSkpLmpvaW4oXCJcXG5cIil9LGUuZm9ybWF0Um93cz1mdW5jdGlvbihuKXtyZXR1cm4gbi5tYXAoaSkuam9pbihcIlxcblwiKX0sZX0sdGEuY3N2PXRhLmRzdihcIixcIixcInRleHQvY3N2XCIpLHRhLnRzdj10YS5kc3YoXCJcdFwiLFwidGV4dC90YWItc2VwYXJhdGVkLXZhbHVlc1wiKTt2YXIgS2EsUWEsbmMsdGMsZWMscmM9dGhpc1t4KHRoaXMsXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIildfHxmdW5jdGlvbihuKXtzZXRUaW1lb3V0KG4sMTcpfTt0YS50aW1lcj1mdW5jdGlvbihuLHQsZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aDsyPnImJih0PTApLDM+ciYmKGU9RGF0ZS5ub3coKSk7dmFyIHU9ZSt0LGk9e2M6bix0OnUsZjohMSxuOm51bGx9O1FhP1FhLm49aTpLYT1pLFFhPWksbmN8fCh0Yz1jbGVhclRpbWVvdXQodGMpLG5jPTEscmMocXQpKX0sdGEudGltZXIuZmx1c2g9ZnVuY3Rpb24oKXtMdCgpLFR0KCl9LHRhLnJvdW5kPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQ/TWF0aC5yb3VuZChuKih0PU1hdGgucG93KDEwLHQpKSkvdDpNYXRoLnJvdW5kKG4pfTt2YXIgdWM9W1wieVwiLFwielwiLFwiYVwiLFwiZlwiLFwicFwiLFwiblwiLFwiXFx4YjVcIixcIm1cIixcIlwiLFwia1wiLFwiTVwiLFwiR1wiLFwiVFwiLFwiUFwiLFwiRVwiLFwiWlwiLFwiWVwiXS5tYXAoRHQpO3RhLmZvcm1hdFByZWZpeD1mdW5jdGlvbihuLHQpe3ZhciBlPTA7cmV0dXJuIG4mJigwPm4mJihuKj0tMSksdCYmKG49dGEucm91bmQobixSdChuLHQpKSksZT0xK01hdGguZmxvb3IoMWUtMTIrTWF0aC5sb2cobikvTWF0aC5MTjEwKSxlPU1hdGgubWF4KC0yNCxNYXRoLm1pbigyNCwzKk1hdGguZmxvb3IoKGUtMSkvMykpKSksdWNbOCtlLzNdfTt2YXIgaWM9Lyg/OihbXntdKT8oWzw+PV5dKSk/KFsrXFwtIF0pPyhbJCNdKT8oMCk/KFxcZCspPygsKT8oXFwuLT9cXGQrKT8oW2EteiVdKT8vaSxvYz10YS5tYXAoe2I6ZnVuY3Rpb24obil7cmV0dXJuIG4udG9TdHJpbmcoMil9LGM6ZnVuY3Rpb24obil7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobil9LG86ZnVuY3Rpb24obil7cmV0dXJuIG4udG9TdHJpbmcoOCl9LHg6ZnVuY3Rpb24obil7cmV0dXJuIG4udG9TdHJpbmcoMTYpfSxYOmZ1bmN0aW9uKG4pe3JldHVybiBuLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpfSxnOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4udG9QcmVjaXNpb24odCl9LGU6ZnVuY3Rpb24obix0KXtyZXR1cm4gbi50b0V4cG9uZW50aWFsKHQpfSxmOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4udG9GaXhlZCh0KX0scjpmdW5jdGlvbihuLHQpe3JldHVybihuPXRhLnJvdW5kKG4sUnQobix0KSkpLnRvRml4ZWQoTWF0aC5tYXgoMCxNYXRoLm1pbigyMCxSdChuKigxKzFlLTE1KSx0KSkpKX19KSxhYz10YS50aW1lPXt9LGNjPURhdGU7anQucHJvdG90eXBlPXtnZXREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5nZXRVVENEYXRlKCl9LGdldERheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDRGF5KCl9LGdldEZ1bGxZZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5nZXRVVENGdWxsWWVhcigpfSxnZXRIb3VyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDSG91cnMoKX0sZ2V0TWlsbGlzZWNvbmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5nZXRVVENNaWxsaXNlY29uZHMoKX0sZ2V0TWludXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDTWludXRlcygpfSxnZXRNb250aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDTW9udGgoKX0sZ2V0U2Vjb25kczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDU2Vjb25kcygpfSxnZXRUaW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5nZXRUaW1lKCl9LGdldFRpbWV6b25lT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDB9LHZhbHVlT2Y6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLnZhbHVlT2YoKX0sc2V0RGF0ZTpmdW5jdGlvbigpe2xjLnNldFVUQ0RhdGUuYXBwbHkodGhpcy5fLGFyZ3VtZW50cyl9LHNldERheTpmdW5jdGlvbigpe2xjLnNldFVUQ0RheS5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0RnVsbFllYXI6ZnVuY3Rpb24oKXtsYy5zZXRVVENGdWxsWWVhci5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0SG91cnM6ZnVuY3Rpb24oKXtsYy5zZXRVVENIb3Vycy5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0TWlsbGlzZWNvbmRzOmZ1bmN0aW9uKCl7bGMuc2V0VVRDTWlsbGlzZWNvbmRzLmFwcGx5KHRoaXMuXyxhcmd1bWVudHMpfSxzZXRNaW51dGVzOmZ1bmN0aW9uKCl7bGMuc2V0VVRDTWludXRlcy5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0TW9udGg6ZnVuY3Rpb24oKXtsYy5zZXRVVENNb250aC5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0U2Vjb25kczpmdW5jdGlvbigpe2xjLnNldFVUQ1NlY29uZHMuYXBwbHkodGhpcy5fLGFyZ3VtZW50cyl9LHNldFRpbWU6ZnVuY3Rpb24oKXtsYy5zZXRUaW1lLmFwcGx5KHRoaXMuXyxhcmd1bWVudHMpfX07dmFyIGxjPURhdGUucHJvdG90eXBlO2FjLnllYXI9RnQoZnVuY3Rpb24obil7cmV0dXJuIG49YWMuZGF5KG4pLG4uc2V0TW9udGgoMCwxKSxufSxmdW5jdGlvbihuLHQpe24uc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpK3QpfSxmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRGdWxsWWVhcigpfSksYWMueWVhcnM9YWMueWVhci5yYW5nZSxhYy55ZWFycy51dGM9YWMueWVhci51dGMucmFuZ2UsYWMuZGF5PUZ0KGZ1bmN0aW9uKG4pe3ZhciB0PW5ldyBjYygyZTMsMCk7cmV0dXJuIHQuc2V0RnVsbFllYXIobi5nZXRGdWxsWWVhcigpLG4uZ2V0TW9udGgoKSxuLmdldERhdGUoKSksdH0sZnVuY3Rpb24obix0KXtuLnNldERhdGUobi5nZXREYXRlKCkrdCl9LGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldERhdGUoKS0xfSksYWMuZGF5cz1hYy5kYXkucmFuZ2UsYWMuZGF5cy51dGM9YWMuZGF5LnV0Yy5yYW5nZSxhYy5kYXlPZlllYXI9ZnVuY3Rpb24obil7dmFyIHQ9YWMueWVhcihuKTtyZXR1cm4gTWF0aC5mbG9vcigobi10LTZlNCoobi5nZXRUaW1lem9uZU9mZnNldCgpLXQuZ2V0VGltZXpvbmVPZmZzZXQoKSkpLzg2NGU1KX0sW1wic3VuZGF5XCIsXCJtb25kYXlcIixcInR1ZXNkYXlcIixcIndlZG5lc2RheVwiLFwidGh1cnNkYXlcIixcImZyaWRheVwiLFwic2F0dXJkYXlcIl0uZm9yRWFjaChmdW5jdGlvbihuLHQpe3Q9Ny10O3ZhciBlPWFjW25dPUZ0KGZ1bmN0aW9uKG4pe3JldHVybihuPWFjLmRheShuKSkuc2V0RGF0ZShuLmdldERhdGUoKS0obi5nZXREYXkoKSt0KSU3KSxufSxmdW5jdGlvbihuLHQpe24uc2V0RGF0ZShuLmdldERhdGUoKSs3Kk1hdGguZmxvb3IodCkpfSxmdW5jdGlvbihuKXt2YXIgZT1hYy55ZWFyKG4pLmdldERheSgpO3JldHVybiBNYXRoLmZsb29yKChhYy5kYXlPZlllYXIobikrKGUrdCklNykvNyktKGUhPT10KX0pO2FjW24rXCJzXCJdPWUucmFuZ2UsYWNbbitcInNcIl0udXRjPWUudXRjLnJhbmdlLGFjW24rXCJPZlllYXJcIl09ZnVuY3Rpb24obil7dmFyIGU9YWMueWVhcihuKS5nZXREYXkoKTtyZXR1cm4gTWF0aC5mbG9vcigoYWMuZGF5T2ZZZWFyKG4pKyhlK3QpJTcpLzcpfX0pLGFjLndlZWs9YWMuc3VuZGF5LGFjLndlZWtzPWFjLnN1bmRheS5yYW5nZSxhYy53ZWVrcy51dGM9YWMuc3VuZGF5LnV0Yy5yYW5nZSxhYy53ZWVrT2ZZZWFyPWFjLnN1bmRheU9mWWVhcjt2YXIgc2M9e1wiLVwiOlwiXCIsXzpcIiBcIiwwOlwiMFwifSxmYz0vXlxccypcXGQrLyxoYz0vXiUvO3RhLmxvY2FsZT1mdW5jdGlvbihuKXtyZXR1cm57bnVtYmVyRm9ybWF0OlB0KG4pLHRpbWVGb3JtYXQ6T3Qobil9fTt2YXIgZ2M9dGEubG9jYWxlKHtkZWNpbWFsOlwiLlwiLHRob3VzYW5kczpcIixcIixncm91cGluZzpbM10sY3VycmVuY3k6W1wiJFwiLFwiXCJdLGRhdGVUaW1lOlwiJWEgJWIgJWUgJVggJVlcIixkYXRlOlwiJW0vJWQvJVlcIix0aW1lOlwiJUg6JU06JVNcIixwZXJpb2RzOltcIkFNXCIsXCJQTVwiXSxkYXlzOltcIlN1bmRheVwiLFwiTW9uZGF5XCIsXCJUdWVzZGF5XCIsXCJXZWRuZXNkYXlcIixcIlRodXJzZGF5XCIsXCJGcmlkYXlcIixcIlNhdHVyZGF5XCJdLHNob3J0RGF5czpbXCJTdW5cIixcIk1vblwiLFwiVHVlXCIsXCJXZWRcIixcIlRodVwiLFwiRnJpXCIsXCJTYXRcIl0sbW9udGhzOltcIkphbnVhcnlcIixcIkZlYnJ1YXJ5XCIsXCJNYXJjaFwiLFwiQXByaWxcIixcIk1heVwiLFwiSnVuZVwiLFwiSnVseVwiLFwiQXVndXN0XCIsXCJTZXB0ZW1iZXJcIixcIk9jdG9iZXJcIixcIk5vdmVtYmVyXCIsXCJEZWNlbWJlclwiXSxzaG9ydE1vbnRoczpbXCJKYW5cIixcIkZlYlwiLFwiTWFyXCIsXCJBcHJcIixcIk1heVwiLFwiSnVuXCIsXCJKdWxcIixcIkF1Z1wiLFwiU2VwXCIsXCJPY3RcIixcIk5vdlwiLFwiRGVjXCJdfSk7dGEuZm9ybWF0PWdjLm51bWJlckZvcm1hdCx0YS5nZW89e30sY2UucHJvdG90eXBlPXtzOjAsdDowLGFkZDpmdW5jdGlvbihuKXtsZShuLHRoaXMudCxwYyksbGUocGMucyx0aGlzLnMsdGhpcyksdGhpcy5zP3RoaXMudCs9cGMudDp0aGlzLnM9cGMudFxufSxyZXNldDpmdW5jdGlvbigpe3RoaXMucz10aGlzLnQ9MH0sdmFsdWVPZjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN9fTt2YXIgcGM9bmV3IGNlO3RhLmdlby5zdHJlYW09ZnVuY3Rpb24obix0KXtuJiZ2Yy5oYXNPd25Qcm9wZXJ0eShuLnR5cGUpP3ZjW24udHlwZV0obix0KTpzZShuLHQpfTt2YXIgdmM9e0ZlYXR1cmU6ZnVuY3Rpb24obix0KXtzZShuLmdlb21ldHJ5LHQpfSxGZWF0dXJlQ29sbGVjdGlvbjpmdW5jdGlvbihuLHQpe2Zvcih2YXIgZT1uLmZlYXR1cmVzLHI9LTEsdT1lLmxlbmd0aDsrK3I8dTspc2UoZVtyXS5nZW9tZXRyeSx0KX19LGRjPXtTcGhlcmU6ZnVuY3Rpb24obix0KXt0LnNwaGVyZSgpfSxQb2ludDpmdW5jdGlvbihuLHQpe249bi5jb29yZGluYXRlcyx0LnBvaW50KG5bMF0sblsxXSxuWzJdKX0sTXVsdGlQb2ludDpmdW5jdGlvbihuLHQpe2Zvcih2YXIgZT1uLmNvb3JkaW5hdGVzLHI9LTEsdT1lLmxlbmd0aDsrK3I8dTspbj1lW3JdLHQucG9pbnQoblswXSxuWzFdLG5bMl0pfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKG4sdCl7ZmUobi5jb29yZGluYXRlcyx0LDApfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24obix0KXtmb3IodmFyIGU9bi5jb29yZGluYXRlcyxyPS0xLHU9ZS5sZW5ndGg7KytyPHU7KWZlKGVbcl0sdCwwKX0sUG9seWdvbjpmdW5jdGlvbihuLHQpe2hlKG4uY29vcmRpbmF0ZXMsdCl9LE11bHRpUG9seWdvbjpmdW5jdGlvbihuLHQpe2Zvcih2YXIgZT1uLmNvb3JkaW5hdGVzLHI9LTEsdT1lLmxlbmd0aDsrK3I8dTspaGUoZVtyXSx0KX0sR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKG4sdCl7Zm9yKHZhciBlPW4uZ2VvbWV0cmllcyxyPS0xLHU9ZS5sZW5ndGg7KytyPHU7KXNlKGVbcl0sdCl9fTt0YS5nZW8uYXJlYT1mdW5jdGlvbihuKXtyZXR1cm4gbWM9MCx0YS5nZW8uc3RyZWFtKG4sTWMpLG1jfTt2YXIgbWMseWM9bmV3IGNlLE1jPXtzcGhlcmU6ZnVuY3Rpb24oKXttYys9NCpxYX0scG9pbnQ6YixsaW5lU3RhcnQ6YixsaW5lRW5kOmIscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7eWMucmVzZXQoKSxNYy5saW5lU3RhcnQ9Z2V9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXt2YXIgbj0yKnljO21jKz0wPm4/NCpxYStuOm4sTWMubGluZVN0YXJ0PU1jLmxpbmVFbmQ9TWMucG9pbnQ9Yn19O3RhLmdlby5ib3VuZHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4sdCl7TS5wdXNoKHg9W3M9bixoPW5dKSxmPnQmJihmPXQpLHQ+ZyYmKGc9dCl9ZnVuY3Rpb24gdCh0LGUpe3ZhciByPXBlKFt0KkRhLGUqRGFdKTtpZihtKXt2YXIgdT1kZShtLHIpLGk9W3VbMV0sLXVbMF0sMF0sbz1kZShpLHUpO01lKG8pLG89eGUobyk7dmFyIGM9dC1wLGw9Yz4wPzE6LTEsdj1vWzBdKlBhKmwsZD1nYShjKT4xODA7aWYoZF4odj5sKnAmJmwqdD52KSl7dmFyIHk9b1sxXSpQYTt5PmcmJihnPXkpfWVsc2UgaWYodj0odiszNjApJTM2MC0xODAsZF4odj5sKnAmJmwqdD52KSl7dmFyIHk9LW9bMV0qUGE7Zj55JiYoZj15KX1lbHNlIGY+ZSYmKGY9ZSksZT5nJiYoZz1lKTtkP3A+dD9hKHMsdCk+YShzLGgpJiYoaD10KTphKHQsaCk+YShzLGgpJiYocz10KTpoPj1zPyhzPnQmJihzPXQpLHQ+aCYmKGg9dCkpOnQ+cD9hKHMsdCk+YShzLGgpJiYoaD10KTphKHQsaCk+YShzLGgpJiYocz10KX1lbHNlIG4odCxlKTttPXIscD10fWZ1bmN0aW9uIGUoKXtiLnBvaW50PXR9ZnVuY3Rpb24gcigpe3hbMF09cyx4WzFdPWgsYi5wb2ludD1uLG09bnVsbH1mdW5jdGlvbiB1KG4sZSl7aWYobSl7dmFyIHI9bi1wO3krPWdhKHIpPjE4MD9yKyhyPjA/MzYwOi0zNjApOnJ9ZWxzZSB2PW4sZD1lO01jLnBvaW50KG4sZSksdChuLGUpfWZ1bmN0aW9uIGkoKXtNYy5saW5lU3RhcnQoKX1mdW5jdGlvbiBvKCl7dSh2LGQpLE1jLmxpbmVFbmQoKSxnYSh5KT5DYSYmKHM9LShoPTE4MCkpLHhbMF09cyx4WzFdPWgsbT1udWxsfWZ1bmN0aW9uIGEobix0KXtyZXR1cm4odC09bik8MD90KzM2MDp0fWZ1bmN0aW9uIGMobix0KXtyZXR1cm4gblswXS10WzBdfWZ1bmN0aW9uIGwobix0KXtyZXR1cm4gdFswXTw9dFsxXT90WzBdPD1uJiZuPD10WzFdOm48dFswXXx8dFsxXTxufXZhciBzLGYsaCxnLHAsdixkLG0seSxNLHgsYj17cG9pbnQ6bixsaW5lU3RhcnQ6ZSxsaW5lRW5kOnIscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7Yi5wb2ludD11LGIubGluZVN0YXJ0PWksYi5saW5lRW5kPW8seT0wLE1jLnBvbHlnb25TdGFydCgpfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7TWMucG9seWdvbkVuZCgpLGIucG9pbnQ9bixiLmxpbmVTdGFydD1lLGIubGluZUVuZD1yLDA+eWM/KHM9LShoPTE4MCksZj0tKGc9OTApKTp5PkNhP2c9OTA6LUNhPnkmJihmPS05MCkseFswXT1zLHhbMV09aH19O3JldHVybiBmdW5jdGlvbihuKXtnPWg9LShzPWY9MS8wKSxNPVtdLHRhLmdlby5zdHJlYW0obixiKTt2YXIgdD1NLmxlbmd0aDtpZih0KXtNLnNvcnQoYyk7Zm9yKHZhciBlLHI9MSx1PU1bMF0saT1bdV07dD5yOysrcillPU1bcl0sbChlWzBdLHUpfHxsKGVbMV0sdSk/KGEodVswXSxlWzFdKT5hKHVbMF0sdVsxXSkmJih1WzFdPWVbMV0pLGEoZVswXSx1WzFdKT5hKHVbMF0sdVsxXSkmJih1WzBdPWVbMF0pKTppLnB1c2godT1lKTtmb3IodmFyIG8sZSxwPS0xLzAsdD1pLmxlbmd0aC0xLHI9MCx1PWlbdF07dD49cjt1PWUsKytyKWU9aVtyXSwobz1hKHVbMV0sZVswXSkpPnAmJihwPW8scz1lWzBdLGg9dVsxXSl9cmV0dXJuIE09eD1udWxsLDEvMD09PXN8fDEvMD09PWY/W1swLzAsMC8wXSxbMC8wLDAvMF1dOltbcyxmXSxbaCxnXV19fSgpLHRhLmdlby5jZW50cm9pZD1mdW5jdGlvbihuKXt4Yz1iYz1fYz13Yz1TYz1rYz1FYz1BYz1OYz1DYz16Yz0wLHRhLmdlby5zdHJlYW0obixxYyk7dmFyIHQ9TmMsZT1DYyxyPXpjLHU9dCp0K2UqZStyKnI7cmV0dXJuIHphPnUmJih0PWtjLGU9RWMscj1BYyxDYT5iYyYmKHQ9X2MsZT13YyxyPVNjKSx1PXQqdCtlKmUrcipyLHphPnUpP1swLzAsMC8wXTpbTWF0aC5hdGFuMihlLHQpKlBhLHR0KHIvTWF0aC5zcXJ0KHUpKSpQYV19O3ZhciB4YyxiYyxfYyx3YyxTYyxrYyxFYyxBYyxOYyxDYyx6YyxxYz17c3BoZXJlOmIscG9pbnQ6X2UsbGluZVN0YXJ0OlNlLGxpbmVFbmQ6a2UscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7cWMubGluZVN0YXJ0PUVlfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7cWMubGluZVN0YXJ0PVNlfX0sTGM9TGUoTmUsUGUsamUsWy1xYSwtcWEvMl0pLFRjPTFlOTt0YS5nZW8uY2xpcEV4dGVudD1mdW5jdGlvbigpe3ZhciBuLHQsZSxyLHUsaSxvPXtzdHJlYW06ZnVuY3Rpb24obil7cmV0dXJuIHUmJih1LnZhbGlkPSExKSx1PWkobiksdS52YWxpZD0hMCx1fSxleHRlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9SWUobj0rYVswXVswXSx0PSthWzBdWzFdLGU9K2FbMV1bMF0scj0rYVsxXVsxXSksdSYmKHUudmFsaWQ9ITEsdT1udWxsKSxvKTpbW24sdF0sW2Uscl1dfX07cmV0dXJuIG8uZXh0ZW50KFtbMCwwXSxbOTYwLDUwMF1dKX0sKHRhLmdlby5jb25pY0VxdWFsQXJlYT1mdW5jdGlvbigpe3JldHVybiBZZShaZSl9KS5yYXc9WmUsdGEuZ2VvLmFsYmVycz1mdW5jdGlvbigpe3JldHVybiB0YS5nZW8uY29uaWNFcXVhbEFyZWEoKS5yb3RhdGUoWzk2LDBdKS5jZW50ZXIoWy0uNiwzOC43XSkucGFyYWxsZWxzKFsyOS41LDQ1LjVdKS5zY2FsZSgxMDcwKX0sdGEuZ2VvLmFsYmVyc1VzYT1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obil7dmFyIGk9blswXSxvPW5bMV07cmV0dXJuIHQ9bnVsbCxlKGksbyksdHx8KHIoaSxvKSx0KXx8dShpLG8pLHR9dmFyIHQsZSxyLHUsaT10YS5nZW8uYWxiZXJzKCksbz10YS5nZW8uY29uaWNFcXVhbEFyZWEoKS5yb3RhdGUoWzE1NCwwXSkuY2VudGVyKFstMiw1OC41XSkucGFyYWxsZWxzKFs1NSw2NV0pLGE9dGEuZ2VvLmNvbmljRXF1YWxBcmVhKCkucm90YXRlKFsxNTcsMF0pLmNlbnRlcihbLTMsMTkuOV0pLnBhcmFsbGVscyhbOCwxOF0pLGM9e3BvaW50OmZ1bmN0aW9uKG4sZSl7dD1bbixlXX19O3JldHVybiBuLmludmVydD1mdW5jdGlvbihuKXt2YXIgdD1pLnNjYWxlKCksZT1pLnRyYW5zbGF0ZSgpLHI9KG5bMF0tZVswXSkvdCx1PShuWzFdLWVbMV0pL3Q7cmV0dXJuKHU+PS4xMiYmLjIzND51JiZyPj0tLjQyNSYmLS4yMTQ+cj9vOnU+PS4xNjYmJi4yMzQ+dSYmcj49LS4yMTQmJi0uMTE1PnI/YTppKS5pbnZlcnQobil9LG4uc3RyZWFtPWZ1bmN0aW9uKG4pe3ZhciB0PWkuc3RyZWFtKG4pLGU9by5zdHJlYW0obikscj1hLnN0cmVhbShuKTtyZXR1cm57cG9pbnQ6ZnVuY3Rpb24obix1KXt0LnBvaW50KG4sdSksZS5wb2ludChuLHUpLHIucG9pbnQobix1KX0sc3BoZXJlOmZ1bmN0aW9uKCl7dC5zcGhlcmUoKSxlLnNwaGVyZSgpLHIuc3BoZXJlKCl9LGxpbmVTdGFydDpmdW5jdGlvbigpe3QubGluZVN0YXJ0KCksZS5saW5lU3RhcnQoKSxyLmxpbmVTdGFydCgpfSxsaW5lRW5kOmZ1bmN0aW9uKCl7dC5saW5lRW5kKCksZS5saW5lRW5kKCksci5saW5lRW5kKCl9LHBvbHlnb25TdGFydDpmdW5jdGlvbigpe3QucG9seWdvblN0YXJ0KCksZS5wb2x5Z29uU3RhcnQoKSxyLnBvbHlnb25TdGFydCgpfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7dC5wb2x5Z29uRW5kKCksZS5wb2x5Z29uRW5kKCksci5wb2x5Z29uRW5kKCl9fX0sbi5wcmVjaXNpb249ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGkucHJlY2lzaW9uKHQpLG8ucHJlY2lzaW9uKHQpLGEucHJlY2lzaW9uKHQpLG4pOmkucHJlY2lzaW9uKCl9LG4uc2NhbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGkuc2NhbGUodCksby5zY2FsZSguMzUqdCksYS5zY2FsZSh0KSxuLnRyYW5zbGF0ZShpLnRyYW5zbGF0ZSgpKSk6aS5zY2FsZSgpfSxuLnRyYW5zbGF0ZT1mdW5jdGlvbih0KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gaS50cmFuc2xhdGUoKTt2YXIgbD1pLnNjYWxlKCkscz0rdFswXSxmPSt0WzFdO3JldHVybiBlPWkudHJhbnNsYXRlKHQpLmNsaXBFeHRlbnQoW1tzLS40NTUqbCxmLS4yMzgqbF0sW3MrLjQ1NSpsLGYrLjIzOCpsXV0pLnN0cmVhbShjKS5wb2ludCxyPW8udHJhbnNsYXRlKFtzLS4zMDcqbCxmKy4yMDEqbF0pLmNsaXBFeHRlbnQoW1tzLS40MjUqbCtDYSxmKy4xMipsK0NhXSxbcy0uMjE0KmwtQ2EsZisuMjM0KmwtQ2FdXSkuc3RyZWFtKGMpLnBvaW50LHU9YS50cmFuc2xhdGUoW3MtLjIwNSpsLGYrLjIxMipsXSkuY2xpcEV4dGVudChbW3MtLjIxNCpsK0NhLGYrLjE2NipsK0NhXSxbcy0uMTE1KmwtQ2EsZisuMjM0KmwtQ2FdXSkuc3RyZWFtKGMpLnBvaW50LG59LG4uc2NhbGUoMTA3MCl9O3ZhciBSYyxEYyxQYyxVYyxqYyxGYyxIYz17cG9pbnQ6YixsaW5lU3RhcnQ6YixsaW5lRW5kOmIscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7RGM9MCxIYy5saW5lU3RhcnQ9VmV9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXtIYy5saW5lU3RhcnQ9SGMubGluZUVuZD1IYy5wb2ludD1iLFJjKz1nYShEYy8yKX19LE9jPXtwb2ludDpYZSxsaW5lU3RhcnQ6YixsaW5lRW5kOmIscG9seWdvblN0YXJ0OmIscG9seWdvbkVuZDpifSxJYz17cG9pbnQ6V2UsbGluZVN0YXJ0OkplLGxpbmVFbmQ6R2UscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7SWMubGluZVN0YXJ0PUtlfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7SWMucG9pbnQ9V2UsSWMubGluZVN0YXJ0PUplLEljLmxpbmVFbmQ9R2V9fTt0YS5nZW8ucGF0aD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obil7cmV0dXJuIG4mJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZpLnBvaW50UmFkaXVzKCthLmFwcGx5KHRoaXMsYXJndW1lbnRzKSksbyYmby52YWxpZHx8KG89dShpKSksdGEuZ2VvLnN0cmVhbShuLG8pKSxpLnJlc3VsdCgpfWZ1bmN0aW9uIHQoKXtyZXR1cm4gbz1udWxsLG59dmFyIGUscix1LGksbyxhPTQuNTtyZXR1cm4gbi5hcmVhPWZ1bmN0aW9uKG4pe3JldHVybiBSYz0wLHRhLmdlby5zdHJlYW0obix1KEhjKSksUmN9LG4uY2VudHJvaWQ9ZnVuY3Rpb24obil7cmV0dXJuIF9jPXdjPVNjPWtjPUVjPUFjPU5jPUNjPXpjPTAsdGEuZ2VvLnN0cmVhbShuLHUoSWMpKSx6Yz9bTmMvemMsQ2MvemNdOkFjP1trYy9BYyxFYy9BY106U2M/W19jL1NjLHdjL1NjXTpbMC8wLDAvMF19LG4uYm91bmRzPWZ1bmN0aW9uKG4pe3JldHVybiBqYz1GYz0tKFBjPVVjPTEvMCksdGEuZ2VvLnN0cmVhbShuLHUoT2MpKSxbW1BjLFVjXSxbamMsRmNdXX0sbi5wcm9qZWN0aW9uPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PShlPW4pP24uc3RyZWFtfHx0cihuKTp5LHQoKSk6ZX0sbi5jb250ZXh0PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPW51bGw9PShyPW4pP25ldyAkZTpuZXcgUWUobiksXCJmdW5jdGlvblwiIT10eXBlb2YgYSYmaS5wb2ludFJhZGl1cyhhKSx0KCkpOnJ9LG4ucG9pbnRSYWRpdXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9XCJmdW5jdGlvblwiPT10eXBlb2YgdD90OihpLnBvaW50UmFkaXVzKCt0KSwrdCksbik6YX0sbi5wcm9qZWN0aW9uKHRhLmdlby5hbGJlcnNVc2EoKSkuY29udGV4dChudWxsKX0sdGEuZ2VvLnRyYW5zZm9ybT1mdW5jdGlvbihuKXtyZXR1cm57c3RyZWFtOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBlcih0KTtmb3IodmFyIHIgaW4gbillW3JdPW5bcl07cmV0dXJuIGV9fX0sZXIucHJvdG90eXBlPXtwb2ludDpmdW5jdGlvbihuLHQpe3RoaXMuc3RyZWFtLnBvaW50KG4sdCl9LHNwaGVyZTpmdW5jdGlvbigpe3RoaXMuc3RyZWFtLnNwaGVyZSgpfSxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLnN0cmVhbS5saW5lU3RhcnQoKX0sbGluZUVuZDpmdW5jdGlvbigpe3RoaXMuc3RyZWFtLmxpbmVFbmQoKX0scG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5zdHJlYW0ucG9seWdvblN0YXJ0KCl9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXt0aGlzLnN0cmVhbS5wb2x5Z29uRW5kKCl9fSx0YS5nZW8ucHJvamVjdGlvbj11cix0YS5nZW8ucHJvamVjdGlvbk11dGF0b3I9aXIsKHRhLmdlby5lcXVpcmVjdGFuZ3VsYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdXIoYXIpfSkucmF3PWFyLmludmVydD1hcix0YS5nZW8ucm90YXRpb249ZnVuY3Rpb24obil7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gdD1uKHRbMF0qRGEsdFsxXSpEYSksdFswXSo9UGEsdFsxXSo9UGEsdH1yZXR1cm4gbj1scihuWzBdJTM2MCpEYSxuWzFdKkRhLG4ubGVuZ3RoPjI/blsyXSpEYTowKSx0LmludmVydD1mdW5jdGlvbih0KXtyZXR1cm4gdD1uLmludmVydCh0WzBdKkRhLHRbMV0qRGEpLHRbMF0qPVBhLHRbMV0qPVBhLHR9LHR9LGNyLmludmVydD1hcix0YS5nZW8uY2lyY2xlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIHI/ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6cix0PWxyKC1uWzBdKkRhLC1uWzFdKkRhLDApLmludmVydCx1PVtdO3JldHVybiBlKG51bGwsbnVsbCwxLHtwb2ludDpmdW5jdGlvbihuLGUpe3UucHVzaChuPXQobixlKSksblswXSo9UGEsblsxXSo9UGF9fSkse3R5cGU6XCJQb2x5Z29uXCIsY29vcmRpbmF0ZXM6W3VdfX12YXIgdCxlLHI9WzAsMF0sdT02O3JldHVybiBuLm9yaWdpbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj10LG4pOnJ9LG4uYW5nbGU9ZnVuY3Rpb24ocil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9Z3IoKHQ9K3IpKkRhLHUqRGEpLG4pOnR9LG4ucHJlY2lzaW9uPWZ1bmN0aW9uKHIpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPWdyKHQqRGEsKHU9K3IpKkRhKSxuKTp1fSxuLmFuZ2xlKDkwKX0sdGEuZ2VvLmRpc3RhbmNlPWZ1bmN0aW9uKG4sdCl7dmFyIGUscj0odFswXS1uWzBdKSpEYSx1PW5bMV0qRGEsaT10WzFdKkRhLG89TWF0aC5zaW4ociksYT1NYXRoLmNvcyhyKSxjPU1hdGguc2luKHUpLGw9TWF0aC5jb3ModSkscz1NYXRoLnNpbihpKSxmPU1hdGguY29zKGkpO3JldHVybiBNYXRoLmF0YW4yKE1hdGguc3FydCgoZT1mKm8pKmUrKGU9bCpzLWMqZiphKSplKSxjKnMrbCpmKmEpfSx0YS5nZW8uZ3JhdGljdWxlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3JldHVybnt0eXBlOlwiTXVsdGlMaW5lU3RyaW5nXCIsY29vcmRpbmF0ZXM6dCgpfX1mdW5jdGlvbiB0KCl7cmV0dXJuIHRhLnJhbmdlKE1hdGguY2VpbChpL2QpKmQsdSxkKS5tYXAoaCkuY29uY2F0KHRhLnJhbmdlKE1hdGguY2VpbChsL20pKm0sYyxtKS5tYXAoZykpLmNvbmNhdCh0YS5yYW5nZShNYXRoLmNlaWwoci9wKSpwLGUscCkuZmlsdGVyKGZ1bmN0aW9uKG4pe3JldHVybiBnYShuJWQpPkNhfSkubWFwKHMpKS5jb25jYXQodGEucmFuZ2UoTWF0aC5jZWlsKGEvdikqdixvLHYpLmZpbHRlcihmdW5jdGlvbihuKXtyZXR1cm4gZ2EobiVtKT5DYX0pLm1hcChmKSl9dmFyIGUscix1LGksbyxhLGMsbCxzLGYsaCxnLHA9MTAsdj1wLGQ9OTAsbT0zNjAseT0yLjU7cmV0dXJuIG4ubGluZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLm1hcChmdW5jdGlvbihuKXtyZXR1cm57dHlwZTpcIkxpbmVTdHJpbmdcIixjb29yZGluYXRlczpufX0pfSxuLm91dGxpbmU9ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIlBvbHlnb25cIixjb29yZGluYXRlczpbaChpKS5jb25jYXQoZyhjKS5zbGljZSgxKSxoKHUpLnJldmVyc2UoKS5zbGljZSgxKSxnKGwpLnJldmVyc2UoKS5zbGljZSgxKSldfX0sbi5leHRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/bi5tYWpvckV4dGVudCh0KS5taW5vckV4dGVudCh0KTpuLm1pbm9yRXh0ZW50KCl9LG4ubWFqb3JFeHRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9K3RbMF1bMF0sdT0rdFsxXVswXSxsPSt0WzBdWzFdLGM9K3RbMV1bMV0saT51JiYodD1pLGk9dSx1PXQpLGw+YyYmKHQ9bCxsPWMsYz10KSxuLnByZWNpc2lvbih5KSk6W1tpLGxdLFt1LGNdXX0sbi5taW5vckV4dGVudD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0rdFswXVswXSxlPSt0WzFdWzBdLGE9K3RbMF1bMV0sbz0rdFsxXVsxXSxyPmUmJih0PXIscj1lLGU9dCksYT5vJiYodD1hLGE9byxvPXQpLG4ucHJlY2lzaW9uKHkpKTpbW3IsYV0sW2Usb11dfSxuLnN0ZXA9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/bi5tYWpvclN0ZXAodCkubWlub3JTdGVwKHQpOm4ubWlub3JTdGVwKCl9LG4ubWFqb3JTdGVwPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhkPSt0WzBdLG09K3RbMV0sbik6W2QsbV19LG4ubWlub3JTdGVwPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhwPSt0WzBdLHY9K3RbMV0sbik6W3Asdl19LG4ucHJlY2lzaW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh5PSt0LHM9dnIoYSxvLDkwKSxmPWRyKHIsZSx5KSxoPXZyKGwsYyw5MCksZz1kcihpLHUseSksbik6eX0sbi5tYWpvckV4dGVudChbWy0xODAsLTkwK0NhXSxbMTgwLDkwLUNhXV0pLm1pbm9yRXh0ZW50KFtbLTE4MCwtODAtQ2FdLFsxODAsODArQ2FdXSl9LHRhLmdlby5ncmVhdEFyYz1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXtyZXR1cm57dHlwZTpcIkxpbmVTdHJpbmdcIixjb29yZGluYXRlczpbdHx8ci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZXx8dS5hcHBseSh0aGlzLGFyZ3VtZW50cyldfX12YXIgdCxlLHI9bXIsdT15cjtyZXR1cm4gbi5kaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0YS5nZW8uZGlzdGFuY2UodHx8ci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZXx8dS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxuLnNvdXJjZT1mdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj1lLHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9udWxsOmUsbik6cn0sbi50YXJnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHU9dCxlPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/bnVsbDp0LG4pOnV9LG4ucHJlY2lzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/bjowfSxufSx0YS5nZW8uaW50ZXJwb2xhdGU9ZnVuY3Rpb24obix0KXtyZXR1cm4gTXIoblswXSpEYSxuWzFdKkRhLHRbMF0qRGEsdFsxXSpEYSl9LHRhLmdlby5sZW5ndGg9ZnVuY3Rpb24obil7cmV0dXJuIFljPTAsdGEuZ2VvLnN0cmVhbShuLFpjKSxZY307dmFyIFljLFpjPXtzcGhlcmU6Yixwb2ludDpiLGxpbmVTdGFydDp4cixsaW5lRW5kOmIscG9seWdvblN0YXJ0OmIscG9seWdvbkVuZDpifSxWYz1icihmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5zcXJ0KDIvKDErbikpfSxmdW5jdGlvbihuKXtyZXR1cm4gMipNYXRoLmFzaW4obi8yKX0pOyh0YS5nZW8uYXppbXV0aGFsRXF1YWxBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIHVyKFZjKX0pLnJhdz1WYzt2YXIgWGM9YnIoZnVuY3Rpb24obil7dmFyIHQ9TWF0aC5hY29zKG4pO3JldHVybiB0JiZ0L01hdGguc2luKHQpfSx5KTsodGEuZ2VvLmF6aW11dGhhbEVxdWlkaXN0YW50PWZ1bmN0aW9uKCl7cmV0dXJuIHVyKFhjKX0pLnJhdz1YYywodGEuZ2VvLmNvbmljQ29uZm9ybWFsPWZ1bmN0aW9uKCl7cmV0dXJuIFllKF9yKX0pLnJhdz1fciwodGEuZ2VvLmNvbmljRXF1aWRpc3RhbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gWWUod3IpfSkucmF3PXdyO3ZhciAkYz1icihmdW5jdGlvbihuKXtyZXR1cm4gMS9ufSxNYXRoLmF0YW4pOyh0YS5nZW8uZ25vbW9uaWM9ZnVuY3Rpb24oKXtyZXR1cm4gdXIoJGMpfSkucmF3PSRjLFNyLmludmVydD1mdW5jdGlvbihuLHQpe3JldHVybltuLDIqTWF0aC5hdGFuKE1hdGguZXhwKHQpKS1SYV19LCh0YS5nZW8ubWVyY2F0b3I9ZnVuY3Rpb24oKXtyZXR1cm4ga3IoU3IpfSkucmF3PVNyO3ZhciBCYz1icihmdW5jdGlvbigpe3JldHVybiAxfSxNYXRoLmFzaW4pOyh0YS5nZW8ub3J0aG9ncmFwaGljPWZ1bmN0aW9uKCl7cmV0dXJuIHVyKEJjKX0pLnJhdz1CYzt2YXIgV2M9YnIoZnVuY3Rpb24obil7cmV0dXJuIDEvKDErbil9LGZ1bmN0aW9uKG4pe3JldHVybiAyKk1hdGguYXRhbihuKX0pOyh0YS5nZW8uc3RlcmVvZ3JhcGhpYz1mdW5jdGlvbigpe3JldHVybiB1cihXYyl9KS5yYXc9V2MsRXIuaW52ZXJ0PWZ1bmN0aW9uKG4sdCl7cmV0dXJuWy10LDIqTWF0aC5hdGFuKE1hdGguZXhwKG4pKS1SYV19LCh0YS5nZW8udHJhbnN2ZXJzZU1lcmNhdG9yPWZ1bmN0aW9uKCl7dmFyIG49a3IoRXIpLHQ9bi5jZW50ZXIsZT1uLnJvdGF0ZTtyZXR1cm4gbi5jZW50ZXI9ZnVuY3Rpb24obil7cmV0dXJuIG4/dChbLW5bMV0sblswXV0pOihuPXQoKSxbblsxXSwtblswXV0pfSxuLnJvdGF0ZT1mdW5jdGlvbihuKXtyZXR1cm4gbj9lKFtuWzBdLG5bMV0sbi5sZW5ndGg+Mj9uWzJdKzkwOjkwXSk6KG49ZSgpLFtuWzBdLG5bMV0sblsyXS05MF0pfSxlKFswLDAsOTBdKX0pLnJhdz1Fcix0YS5nZW9tPXt9LHRhLmdlb20uaHVsbD1mdW5jdGlvbihuKXtmdW5jdGlvbiB0KG4pe2lmKG4ubGVuZ3RoPDMpcmV0dXJuW107dmFyIHQsdT1FdChlKSxpPUV0KHIpLG89bi5sZW5ndGgsYT1bXSxjPVtdO2Zvcih0PTA7bz50O3QrKylhLnB1c2goWyt1LmNhbGwodGhpcyxuW3RdLHQpLCtpLmNhbGwodGhpcyxuW3RdLHQpLHRdKTtmb3IoYS5zb3J0KHpyKSx0PTA7bz50O3QrKyljLnB1c2goW2FbdF1bMF0sLWFbdF1bMV1dKTt2YXIgbD1DcihhKSxzPUNyKGMpLGY9c1swXT09PWxbMF0saD1zW3MubGVuZ3RoLTFdPT09bFtsLmxlbmd0aC0xXSxnPVtdO2Zvcih0PWwubGVuZ3RoLTE7dD49MDstLXQpZy5wdXNoKG5bYVtsW3RdXVsyXV0pO2Zvcih0PStmO3Q8cy5sZW5ndGgtaDsrK3QpZy5wdXNoKG5bYVtzW3RdXVsyXV0pO3JldHVybiBnfXZhciBlPUFyLHI9TnI7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dChuKToodC54PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPW4sdCk6ZX0sdC55PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPW4sdCk6cn0sdCl9LHRhLmdlb20ucG9seWdvbj1mdW5jdGlvbihuKXtyZXR1cm4geWEobixKYyksbn07dmFyIEpjPXRhLmdlb20ucG9seWdvbi5wcm90b3R5cGU9W107SmMuYXJlYT1mdW5jdGlvbigpe2Zvcih2YXIgbix0PS0xLGU9dGhpcy5sZW5ndGgscj10aGlzW2UtMV0sdT0wOysrdDxlOyluPXIscj10aGlzW3RdLHUrPW5bMV0qclswXS1uWzBdKnJbMV07cmV0dXJuLjUqdX0sSmMuY2VudHJvaWQ9ZnVuY3Rpb24obil7dmFyIHQsZSxyPS0xLHU9dGhpcy5sZW5ndGgsaT0wLG89MCxhPXRoaXNbdS0xXTtmb3IoYXJndW1lbnRzLmxlbmd0aHx8KG49LTEvKDYqdGhpcy5hcmVhKCkpKTsrK3I8dTspdD1hLGE9dGhpc1tyXSxlPXRbMF0qYVsxXS1hWzBdKnRbMV0saSs9KHRbMF0rYVswXSkqZSxvKz0odFsxXSthWzFdKSplO3JldHVybltpKm4sbypuXX0sSmMuY2xpcD1mdW5jdGlvbihuKXtmb3IodmFyIHQsZSxyLHUsaSxvLGE9VHIobiksYz0tMSxsPXRoaXMubGVuZ3RoLVRyKHRoaXMpLHM9dGhpc1tsLTFdOysrYzxsOyl7Zm9yKHQ9bi5zbGljZSgpLG4ubGVuZ3RoPTAsdT10aGlzW2NdLGk9dFsocj10Lmxlbmd0aC1hKS0xXSxlPS0xOysrZTxyOylvPXRbZV0scXIobyxzLHUpPyhxcihpLHMsdSl8fG4ucHVzaChMcihpLG8scyx1KSksbi5wdXNoKG8pKTpxcihpLHMsdSkmJm4ucHVzaChMcihpLG8scyx1KSksaT1vO2EmJm4ucHVzaChuWzBdKSxzPXV9cmV0dXJuIG59O3ZhciBHYyxLYyxRYyxubCx0bCxlbD1bXSxybD1bXTtPci5wcm90b3R5cGUucHJlcGFyZT1mdW5jdGlvbigpe2Zvcih2YXIgbix0PXRoaXMuZWRnZXMsZT10Lmxlbmd0aDtlLS07KW49dFtlXS5lZGdlLG4uYiYmbi5hfHx0LnNwbGljZShlLDEpO3JldHVybiB0LnNvcnQoWXIpLHQubGVuZ3RofSxRci5wcm90b3R5cGU9e3N0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZS5sPT09dGhpcy5zaXRlP3RoaXMuZWRnZS5hOnRoaXMuZWRnZS5ifSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlLmw9PT10aGlzLnNpdGU/dGhpcy5lZGdlLmI6dGhpcy5lZGdlLmF9fSxudS5wcm90b3R5cGU9e2luc2VydDpmdW5jdGlvbihuLHQpe3ZhciBlLHIsdTtpZihuKXtpZih0LlA9bix0Lk49bi5OLG4uTiYmKG4uTi5QPXQpLG4uTj10LG4uUil7Zm9yKG49bi5SO24uTDspbj1uLkw7bi5MPXR9ZWxzZSBuLlI9dDtlPW59ZWxzZSB0aGlzLl8/KG49dXUodGhpcy5fKSx0LlA9bnVsbCx0Lk49bixuLlA9bi5MPXQsZT1uKToodC5QPXQuTj1udWxsLHRoaXMuXz10LGU9bnVsbCk7Zm9yKHQuTD10LlI9bnVsbCx0LlU9ZSx0LkM9ITAsbj10O2UmJmUuQzspcj1lLlUsZT09PXIuTD8odT1yLlIsdSYmdS5DPyhlLkM9dS5DPSExLHIuQz0hMCxuPXIpOihuPT09ZS5SJiYoZXUodGhpcyxlKSxuPWUsZT1uLlUpLGUuQz0hMSxyLkM9ITAscnUodGhpcyxyKSkpOih1PXIuTCx1JiZ1LkM/KGUuQz11LkM9ITEsci5DPSEwLG49cik6KG49PT1lLkwmJihydSh0aGlzLGUpLG49ZSxlPW4uVSksZS5DPSExLHIuQz0hMCxldSh0aGlzLHIpKSksZT1uLlU7dGhpcy5fLkM9ITF9LHJlbW92ZTpmdW5jdGlvbihuKXtuLk4mJihuLk4uUD1uLlApLG4uUCYmKG4uUC5OPW4uTiksbi5OPW4uUD1udWxsO3ZhciB0LGUscix1PW4uVSxpPW4uTCxvPW4uUjtpZihlPWk/bz91dShvKTppOm8sdT91Lkw9PT1uP3UuTD1lOnUuUj1lOnRoaXMuXz1lLGkmJm8/KHI9ZS5DLGUuQz1uLkMsZS5MPWksaS5VPWUsZSE9PW8/KHU9ZS5VLGUuVT1uLlUsbj1lLlIsdS5MPW4sZS5SPW8sby5VPWUpOihlLlU9dSx1PWUsbj1lLlIpKToocj1uLkMsbj1lKSxuJiYobi5VPXUpLCFyKXtpZihuJiZuLkMpcmV0dXJuIHZvaWQobi5DPSExKTtkb3tpZihuPT09dGhpcy5fKWJyZWFrO2lmKG49PT11Lkwpe2lmKHQ9dS5SLHQuQyYmKHQuQz0hMSx1LkM9ITAsZXUodGhpcyx1KSx0PXUuUiksdC5MJiZ0LkwuQ3x8dC5SJiZ0LlIuQyl7dC5SJiZ0LlIuQ3x8KHQuTC5DPSExLHQuQz0hMCxydSh0aGlzLHQpLHQ9dS5SKSx0LkM9dS5DLHUuQz10LlIuQz0hMSxldSh0aGlzLHUpLG49dGhpcy5fO2JyZWFrfX1lbHNlIGlmKHQ9dS5MLHQuQyYmKHQuQz0hMSx1LkM9ITAscnUodGhpcyx1KSx0PXUuTCksdC5MJiZ0LkwuQ3x8dC5SJiZ0LlIuQyl7dC5MJiZ0LkwuQ3x8KHQuUi5DPSExLHQuQz0hMCxldSh0aGlzLHQpLHQ9dS5MKSx0LkM9dS5DLHUuQz10LkwuQz0hMSxydSh0aGlzLHUpLG49dGhpcy5fO2JyZWFrfXQuQz0hMCxuPXUsdT11LlV9d2hpbGUoIW4uQyk7biYmKG4uQz0hMSl9fX0sdGEuZ2VvbS52b3Jvbm9pPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQobil7dmFyIHQ9bmV3IEFycmF5KG4ubGVuZ3RoKSxyPWFbMF1bMF0sdT1hWzBdWzFdLGk9YVsxXVswXSxvPWFbMV1bMV07cmV0dXJuIGl1KGUobiksYSkuY2VsbHMuZm9yRWFjaChmdW5jdGlvbihlLGEpe3ZhciBjPWUuZWRnZXMsbD1lLnNpdGUscz10W2FdPWMubGVuZ3RoP2MubWFwKGZ1bmN0aW9uKG4pe3ZhciB0PW4uc3RhcnQoKTtyZXR1cm5bdC54LHQueV19KTpsLng+PXImJmwueDw9aSYmbC55Pj11JiZsLnk8PW8/W1tyLG9dLFtpLG9dLFtpLHVdLFtyLHVdXTpbXTtzLnBvaW50PW5bYV19KSx0fWZ1bmN0aW9uIGUobil7cmV0dXJuIG4ubWFwKGZ1bmN0aW9uKG4sdCl7cmV0dXJue3g6TWF0aC5yb3VuZChpKG4sdCkvQ2EpKkNhLHk6TWF0aC5yb3VuZChvKG4sdCkvQ2EpKkNhLGk6dH19KX12YXIgcj1Bcix1PU5yLGk9cixvPXUsYT11bDtyZXR1cm4gbj90KG4pOih0LmxpbmtzPWZ1bmN0aW9uKG4pe3JldHVybiBpdShlKG4pKS5lZGdlcy5maWx0ZXIoZnVuY3Rpb24obil7cmV0dXJuIG4ubCYmbi5yfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybntzb3VyY2U6blt0LmwuaV0sdGFyZ2V0Om5bdC5yLmldfX0pfSx0LnRyaWFuZ2xlcz1mdW5jdGlvbihuKXt2YXIgdD1bXTtyZXR1cm4gaXUoZShuKSkuY2VsbHMuZm9yRWFjaChmdW5jdGlvbihlLHIpe2Zvcih2YXIgdSxpLG89ZS5zaXRlLGE9ZS5lZGdlcy5zb3J0KFlyKSxjPS0xLGw9YS5sZW5ndGgscz1hW2wtMV0uZWRnZSxmPXMubD09PW8/cy5yOnMubDsrK2M8bDspdT1zLGk9ZixzPWFbY10uZWRnZSxmPXMubD09PW8/cy5yOnMubCxyPGkuaSYmcjxmLmkmJmF1KG8saSxmKTwwJiZ0LnB1c2goW25bcl0sbltpLmldLG5bZi5pXV0pfSksdH0sdC54PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPUV0KHI9biksdCk6cn0sdC55PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvPUV0KHU9biksdCk6dX0sdC5jbGlwRXh0ZW50PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPW51bGw9PW4/dWw6bix0KTphPT09dWw/bnVsbDphfSx0LnNpemU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dC5jbGlwRXh0ZW50KG4mJltbMCwwXSxuXSk6YT09PXVsP251bGw6YSYmYVsxXX0sdCl9O3ZhciB1bD1bWy0xZTYsLTFlNl0sWzFlNiwxZTZdXTt0YS5nZW9tLmRlbGF1bmF5PWZ1bmN0aW9uKG4pe3JldHVybiB0YS5nZW9tLnZvcm9ub2koKS50cmlhbmdsZXMobil9LHRhLmdlb20ucXVhZHRyZWU9ZnVuY3Rpb24obix0LGUscix1KXtmdW5jdGlvbiBpKG4pe2Z1bmN0aW9uIGkobix0LGUscix1LGksbyxhKXtpZighaXNOYU4oZSkmJiFpc05hTihyKSlpZihuLmxlYWYpe3ZhciBjPW4ueCxzPW4ueTtpZihudWxsIT1jKWlmKGdhKGMtZSkrZ2Eocy1yKTwuMDEpbChuLHQsZSxyLHUsaSxvLGEpO2Vsc2V7dmFyIGY9bi5wb2ludDtuLng9bi55PW4ucG9pbnQ9bnVsbCxsKG4sZixjLHMsdSxpLG8sYSksbChuLHQsZSxyLHUsaSxvLGEpfWVsc2Ugbi54PWUsbi55PXIsbi5wb2ludD10fWVsc2UgbChuLHQsZSxyLHUsaSxvLGEpfWZ1bmN0aW9uIGwobix0LGUscix1LG8sYSxjKXt2YXIgbD0uNSoodSthKSxzPS41KihvK2MpLGY9ZT49bCxoPXI+PXMsZz1oPDwxfGY7bi5sZWFmPSExLG49bi5ub2Rlc1tnXXx8KG4ubm9kZXNbZ109c3UoKSksZj91PWw6YT1sLGg/bz1zOmM9cyxpKG4sdCxlLHIsdSxvLGEsYyl9dmFyIHMsZixoLGcscCx2LGQsbSx5LE09RXQoYSkseD1FdChjKTtpZihudWxsIT10KXY9dCxkPWUsbT1yLHk9dTtlbHNlIGlmKG09eT0tKHY9ZD0xLzApLGY9W10saD1bXSxwPW4ubGVuZ3RoLG8pZm9yKGc9MDtwPmc7KytnKXM9bltnXSxzLng8diYmKHY9cy54KSxzLnk8ZCYmKGQ9cy55KSxzLng+bSYmKG09cy54KSxzLnk+eSYmKHk9cy55KSxmLnB1c2gocy54KSxoLnB1c2gocy55KTtlbHNlIGZvcihnPTA7cD5nOysrZyl7dmFyIGI9K00ocz1uW2ddLGcpLF89K3gocyxnKTt2PmImJih2PWIpLGQ+XyYmKGQ9XyksYj5tJiYobT1iKSxfPnkmJih5PV8pLGYucHVzaChiKSxoLnB1c2goXyl9dmFyIHc9bS12LFM9eS1kO3c+Uz95PWQrdzptPXYrUzt2YXIgaz1zdSgpO2lmKGsuYWRkPWZ1bmN0aW9uKG4pe2koayxuLCtNKG4sKytnKSwreChuLGcpLHYsZCxtLHkpfSxrLnZpc2l0PWZ1bmN0aW9uKG4pe2Z1KG4sayx2LGQsbSx5KX0say5maW5kPWZ1bmN0aW9uKG4pe3JldHVybiBodShrLG5bMF0sblsxXSx2LGQsbSx5KX0sZz0tMSxudWxsPT10KXtmb3IoOysrZzxwOylpKGssbltnXSxmW2ddLGhbZ10sdixkLG0seSk7LS1nfWVsc2Ugbi5mb3JFYWNoKGsuYWRkKTtyZXR1cm4gZj1oPW49cz1udWxsLGt9dmFyIG8sYT1BcixjPU5yO3JldHVybihvPWFyZ3VtZW50cy5sZW5ndGgpPyhhPWN1LGM9bHUsMz09PW8mJih1PWUscj10LGU9dD0wKSxpKG4pKTooaS54PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPW4saSk6YX0saS55PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPW4saSk6Y30saS5leHRlbnQ9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG51bGw9PW4/dD1lPXI9dT1udWxsOih0PStuWzBdWzBdLGU9K25bMF1bMV0scj0rblsxXVswXSx1PStuWzFdWzFdKSxpKTpudWxsPT10P251bGw6W1t0LGVdLFtyLHVdXX0saS5zaXplPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhudWxsPT1uP3Q9ZT1yPXU9bnVsbDoodD1lPTAscj0rblswXSx1PStuWzFdKSxpKTpudWxsPT10P251bGw6W3ItdCx1LWVdfSxpKX0sdGEuaW50ZXJwb2xhdGVSZ2I9Z3UsdGEuaW50ZXJwb2xhdGVPYmplY3Q9cHUsdGEuaW50ZXJwb2xhdGVOdW1iZXI9dnUsdGEuaW50ZXJwb2xhdGVTdHJpbmc9ZHU7dmFyIGlsPS9bLStdPyg/OlxcZCtcXC4/XFxkKnxcXC4/XFxkKykoPzpbZUVdWy0rXT9cXGQrKT8vZyxvbD1uZXcgUmVnRXhwKGlsLnNvdXJjZSxcImdcIik7dGEuaW50ZXJwb2xhdGU9bXUsdGEuaW50ZXJwb2xhdG9ycz1bZnVuY3Rpb24obix0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4oXCJzdHJpbmdcIj09PWU/R2EuaGFzKHQpfHwvXigjfHJnYlxcKHxoc2xcXCgpLy50ZXN0KHQpP2d1OmR1OnQgaW5zdGFuY2VvZiBvdD9ndTpBcnJheS5pc0FycmF5KHQpP3l1Olwib2JqZWN0XCI9PT1lJiZpc05hTih0KT9wdTp2dSkobix0KX1dLHRhLmludGVycG9sYXRlQXJyYXk9eXU7dmFyIGFsPWZ1bmN0aW9uKCl7cmV0dXJuIHl9LGNsPXRhLm1hcCh7bGluZWFyOmFsLHBvbHk6a3UscXVhZDpmdW5jdGlvbigpe3JldHVybiBfdX0sY3ViaWM6ZnVuY3Rpb24oKXtyZXR1cm4gd3V9LHNpbjpmdW5jdGlvbigpe3JldHVybiBFdX0sZXhwOmZ1bmN0aW9uKCl7cmV0dXJuIEF1fSxjaXJjbGU6ZnVuY3Rpb24oKXtyZXR1cm4gTnV9LGVsYXN0aWM6Q3UsYmFjazp6dSxib3VuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gcXV9fSksbGw9dGEubWFwKHtcImluXCI6eSxvdXQ6eHUsXCJpbi1vdXRcIjpidSxcIm91dC1pblwiOmZ1bmN0aW9uKG4pe3JldHVybiBidSh4dShuKSl9fSk7dGEuZWFzZT1mdW5jdGlvbihuKXt2YXIgdD1uLmluZGV4T2YoXCItXCIpLGU9dD49MD9uLnNsaWNlKDAsdCk6bixyPXQ+PTA/bi5zbGljZSh0KzEpOlwiaW5cIjtyZXR1cm4gZT1jbC5nZXQoZSl8fGFsLHI9bGwuZ2V0KHIpfHx5LE11KHIoZS5hcHBseShudWxsLGVhLmNhbGwoYXJndW1lbnRzLDEpKSkpfSx0YS5pbnRlcnBvbGF0ZUhjbD1MdSx0YS5pbnRlcnBvbGF0ZUhzbD1UdSx0YS5pbnRlcnBvbGF0ZUxhYj1SdSx0YS5pbnRlcnBvbGF0ZVJvdW5kPUR1LHRhLnRyYW5zZm9ybT1mdW5jdGlvbihuKXt2YXIgdD11YS5jcmVhdGVFbGVtZW50TlModGEubnMucHJlZml4LnN2ZyxcImdcIik7cmV0dXJuKHRhLnRyYW5zZm9ybT1mdW5jdGlvbihuKXtpZihudWxsIT1uKXt0LnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLG4pO3ZhciBlPXQudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKX1yZXR1cm4gbmV3IFB1KGU/ZS5tYXRyaXg6c2wpfSkobil9LFB1LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwidHJhbnNsYXRlKFwiK3RoaXMudHJhbnNsYXRlK1wiKXJvdGF0ZShcIit0aGlzLnJvdGF0ZStcIilza2V3WChcIit0aGlzLnNrZXcrXCIpc2NhbGUoXCIrdGhpcy5zY2FsZStcIilcIn07dmFyIHNsPXthOjEsYjowLGM6MCxkOjEsZTowLGY6MH07dGEuaW50ZXJwb2xhdGVUcmFuc2Zvcm09SHUsdGEubGF5b3V0PXt9LHRhLmxheW91dC5idW5kbGU9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24obil7Zm9yKHZhciB0PVtdLGU9LTEscj1uLmxlbmd0aDsrK2U8cjspdC5wdXNoKFl1KG5bZV0pKTtyZXR1cm4gdH19LHRhLmxheW91dC5jaG9yZD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt2YXIgbixsLGYsaCxnLHA9e30sdj1bXSxkPXRhLnJhbmdlKGkpLG09W107Zm9yKGU9W10scj1bXSxuPTAsaD0tMTsrK2g8aTspe2ZvcihsPTAsZz0tMTsrK2c8aTspbCs9dVtoXVtnXTt2LnB1c2gobCksbS5wdXNoKHRhLnJhbmdlKGkpKSxuKz1sfWZvcihvJiZkLnNvcnQoZnVuY3Rpb24obix0KXtyZXR1cm4gbyh2W25dLHZbdF0pfSksYSYmbS5mb3JFYWNoKGZ1bmN0aW9uKG4sdCl7bi5zb3J0KGZ1bmN0aW9uKG4sZSl7cmV0dXJuIGEodVt0XVtuXSx1W3RdW2VdKX0pfSksbj0oTGEtcyppKS9uLGw9MCxoPS0xOysraDxpOyl7Zm9yKGY9bCxnPS0xOysrZzxpOyl7dmFyIHk9ZFtoXSxNPW1beV1bZ10seD11W3ldW01dLGI9bCxfPWwrPXgqbjtwW3krXCItXCIrTV09e2luZGV4Onksc3ViaW5kZXg6TSxzdGFydEFuZ2xlOmIsZW5kQW5nbGU6Xyx2YWx1ZTp4fX1yW3ldPXtpbmRleDp5LHN0YXJ0QW5nbGU6ZixlbmRBbmdsZTpsLHZhbHVlOihsLWYpL259LGwrPXN9Zm9yKGg9LTE7KytoPGk7KWZvcihnPWgtMTsrK2c8aTspe3ZhciB3PXBbaCtcIi1cIitnXSxTPXBbZytcIi1cIitoXTsody52YWx1ZXx8Uy52YWx1ZSkmJmUucHVzaCh3LnZhbHVlPFMudmFsdWU/e3NvdXJjZTpTLHRhcmdldDp3fTp7c291cmNlOncsdGFyZ2V0OlN9KX1jJiZ0KCl9ZnVuY3Rpb24gdCgpe2Uuc29ydChmdW5jdGlvbihuLHQpe3JldHVybiBjKChuLnNvdXJjZS52YWx1ZStuLnRhcmdldC52YWx1ZSkvMiwodC5zb3VyY2UudmFsdWUrdC50YXJnZXQudmFsdWUpLzIpfSl9dmFyIGUscix1LGksbyxhLGMsbD17fSxzPTA7cmV0dXJuIGwubWF0cml4PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPSh1PW4pJiZ1Lmxlbmd0aCxlPXI9bnVsbCxsKTp1fSxsLnBhZGRpbmc9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHM9bixlPXI9bnVsbCxsKTpzfSxsLnNvcnRHcm91cHM9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89bixlPXI9bnVsbCxsKTpvfSxsLnNvcnRTdWJncm91cHM9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9bixlPW51bGwsbCk6YX0sbC5zb3J0Q2hvcmRzPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPW4sZSYmdCgpLGwpOmN9LGwuY2hvcmRzPWZ1bmN0aW9uKCl7cmV0dXJuIGV8fG4oKSxlfSxsLmdyb3Vwcz1mdW5jdGlvbigpe3JldHVybiByfHxuKCkscn0sbH0sdGEubGF5b3V0LmZvcmNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuKXtyZXR1cm4gZnVuY3Rpb24odCxlLHIsdSl7aWYodC5wb2ludCE9PW4pe3ZhciBpPXQuY3gtbi54LG89dC5jeS1uLnksYT11LWUsYz1pKmkrbypvO2lmKGM+YSphL2Qpe2lmKHA+Yyl7dmFyIGw9dC5jaGFyZ2UvYztuLnB4LT1pKmwsbi5weS09bypsfXJldHVybiEwfWlmKHQucG9pbnQmJmMmJnA+Yyl7dmFyIGw9dC5wb2ludENoYXJnZS9jO24ucHgtPWkqbCxuLnB5LT1vKmx9fXJldHVybiF0LmNoYXJnZX19ZnVuY3Rpb24gdChuKXtuLnB4PXRhLmV2ZW50Lngsbi5weT10YS5ldmVudC55LGEucmVzdW1lKCl9dmFyIGUscix1LGksbyxhPXt9LGM9dGEuZGlzcGF0Y2goXCJzdGFydFwiLFwidGlja1wiLFwiZW5kXCIpLGw9WzEsMV0scz0uOSxmPWZsLGg9aGwsZz0tMzAscD1nbCx2PS4xLGQ9LjY0LG09W10sTT1bXTtyZXR1cm4gYS50aWNrPWZ1bmN0aW9uKCl7aWYoKHIqPS45OSk8LjAwNSlyZXR1cm4gYy5lbmQoe3R5cGU6XCJlbmRcIixhbHBoYTpyPTB9KSwhMDt2YXIgdCxlLGEsZixoLHAsZCx5LHgsYj1tLmxlbmd0aCxfPU0ubGVuZ3RoO2ZvcihlPTA7Xz5lOysrZSlhPU1bZV0sZj1hLnNvdXJjZSxoPWEudGFyZ2V0LHk9aC54LWYueCx4PWgueS1mLnksKHA9eSp5K3gqeCkmJihwPXIqaVtlXSooKHA9TWF0aC5zcXJ0KHApKS11W2VdKS9wLHkqPXAseCo9cCxoLngtPXkqKGQ9Zi53ZWlnaHQvKGgud2VpZ2h0K2Yud2VpZ2h0KSksaC55LT14KmQsZi54Kz15KihkPTEtZCksZi55Kz14KmQpO2lmKChkPXIqdikmJih5PWxbMF0vMix4PWxbMV0vMixlPS0xLGQpKWZvcig7KytlPGI7KWE9bVtlXSxhLngrPSh5LWEueCkqZCxhLnkrPSh4LWEueSkqZDtpZihnKWZvcihKdSh0PXRhLmdlb20ucXVhZHRyZWUobSkscixvKSxlPS0xOysrZTxiOykoYT1tW2VdKS5maXhlZHx8dC52aXNpdChuKGEpKTtmb3IoZT0tMTsrK2U8YjspYT1tW2VdLGEuZml4ZWQ/KGEueD1hLnB4LGEueT1hLnB5KTooYS54LT0oYS5weC0oYS5weD1hLngpKSpzLGEueS09KGEucHktKGEucHk9YS55KSkqcyk7Yy50aWNrKHt0eXBlOlwidGlja1wiLGFscGhhOnJ9KX0sYS5ub2Rlcz1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obT1uLGEpOm19LGEubGlua3M9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KE09bixhKTpNfSxhLnNpemU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGw9bixhKTpsfSxhLmxpbmtEaXN0YW5jZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246K24sYSk6Zn0sYS5kaXN0YW5jZT1hLmxpbmtEaXN0YW5jZSxhLmxpbmtTdHJlbmd0aD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246K24sYSk6aH0sYS5mcmljdGlvbj1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocz0rbixhKTpzfSxhLmNoYXJnZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246K24sYSk6Z30sYS5jaGFyZ2VEaXN0YW5jZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocD1uKm4sYSk6TWF0aC5zcXJ0KHApfSxhLmdyYXZpdHk9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHY9K24sYSk6dn0sYS50aGV0YT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZD1uKm4sYSk6TWF0aC5zcXJ0KGQpfSxhLmFscGhhPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPStuLHI/cj1uPjA/bjowOm4+MCYmKGMuc3RhcnQoe3R5cGU6XCJzdGFydFwiLGFscGhhOnI9bn0pLHRhLnRpbWVyKGEudGljaykpLGEpOnJ9LGEuc3RhcnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4scil7aWYoIWUpe2ZvcihlPW5ldyBBcnJheShjKSxhPTA7Yz5hOysrYSllW2FdPVtdO2ZvcihhPTA7cz5hOysrYSl7dmFyIHU9TVthXTtlW3Uuc291cmNlLmluZGV4XS5wdXNoKHUudGFyZ2V0KSxlW3UudGFyZ2V0LmluZGV4XS5wdXNoKHUuc291cmNlKX19Zm9yKHZhciBpLG89ZVt0XSxhPS0xLGw9by5sZW5ndGg7KythPGw7KWlmKCFpc05hTihpPW9bYV1bbl0pKXJldHVybiBpO3JldHVybiBNYXRoLnJhbmRvbSgpKnJ9dmFyIHQsZSxyLGM9bS5sZW5ndGgscz1NLmxlbmd0aCxwPWxbMF0sdj1sWzFdO2Zvcih0PTA7Yz50OysrdCkocj1tW3RdKS5pbmRleD10LHIud2VpZ2h0PTA7Zm9yKHQ9MDtzPnQ7Kyt0KXI9TVt0XSxcIm51bWJlclwiPT10eXBlb2Ygci5zb3VyY2UmJihyLnNvdXJjZT1tW3Iuc291cmNlXSksXCJudW1iZXJcIj09dHlwZW9mIHIudGFyZ2V0JiYoci50YXJnZXQ9bVtyLnRhcmdldF0pLCsrci5zb3VyY2Uud2VpZ2h0LCsrci50YXJnZXQud2VpZ2h0O2Zvcih0PTA7Yz50OysrdClyPW1bdF0saXNOYU4oci54KSYmKHIueD1uKFwieFwiLHApKSxpc05hTihyLnkpJiYoci55PW4oXCJ5XCIsdikpLGlzTmFOKHIucHgpJiYoci5weD1yLngpLGlzTmFOKHIucHkpJiYoci5weT1yLnkpO2lmKHU9W10sXCJmdW5jdGlvblwiPT10eXBlb2YgZilmb3IodD0wO3M+dDsrK3QpdVt0XT0rZi5jYWxsKHRoaXMsTVt0XSx0KTtlbHNlIGZvcih0PTA7cz50OysrdCl1W3RdPWY7aWYoaT1bXSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBoKWZvcih0PTA7cz50OysrdClpW3RdPStoLmNhbGwodGhpcyxNW3RdLHQpO2Vsc2UgZm9yKHQ9MDtzPnQ7Kyt0KWlbdF09aDtpZihvPVtdLFwiZnVuY3Rpb25cIj09dHlwZW9mIGcpZm9yKHQ9MDtjPnQ7Kyt0KW9bdF09K2cuY2FsbCh0aGlzLG1bdF0sdCk7ZWxzZSBmb3IodD0wO2M+dDsrK3Qpb1t0XT1nO3JldHVybiBhLnJlc3VtZSgpfSxhLnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiBhLmFscGhhKC4xKX0sYS5zdG9wPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYWxwaGEoMCl9LGEuZHJhZz1mdW5jdGlvbigpe3JldHVybiBlfHwoZT10YS5iZWhhdmlvci5kcmFnKCkub3JpZ2luKHkpLm9uKFwiZHJhZ3N0YXJ0LmZvcmNlXCIsWHUpLm9uKFwiZHJhZy5mb3JjZVwiLHQpLm9uKFwiZHJhZ2VuZC5mb3JjZVwiLCR1KSksYXJndW1lbnRzLmxlbmd0aD92b2lkIHRoaXMub24oXCJtb3VzZW92ZXIuZm9yY2VcIixCdSkub24oXCJtb3VzZW91dC5mb3JjZVwiLFd1KS5jYWxsKGUpOmV9LHRhLnJlYmluZChhLGMsXCJvblwiKX07dmFyIGZsPTIwLGhsPTEsZ2w9MS8wO3RhLmxheW91dC5oaWVyYXJjaHk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHUpe3ZhciBpLG89W3VdLGE9W107Zm9yKHUuZGVwdGg9MDtudWxsIT0oaT1vLnBvcCgpKTspaWYoYS5wdXNoKGkpLChsPWUuY2FsbChuLGksaS5kZXB0aCkpJiYoYz1sLmxlbmd0aCkpe2Zvcih2YXIgYyxsLHM7LS1jPj0wOylvLnB1c2gocz1sW2NdKSxzLnBhcmVudD1pLHMuZGVwdGg9aS5kZXB0aCsxO3ImJihpLnZhbHVlPTApLGkuY2hpbGRyZW49bH1lbHNlIHImJihpLnZhbHVlPStyLmNhbGwobixpLGkuZGVwdGgpfHwwKSxkZWxldGUgaS5jaGlsZHJlbjtyZXR1cm4gUXUodSxmdW5jdGlvbihuKXt2YXIgZSx1O3QmJihlPW4uY2hpbGRyZW4pJiZlLnNvcnQodCksciYmKHU9bi5wYXJlbnQpJiYodS52YWx1ZSs9bi52YWx1ZSl9KSxhfXZhciB0PWVpLGU9bmkscj10aTtyZXR1cm4gbi5zb3J0PWZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PWUsbik6dH0sbi5jaGlsZHJlbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT10LG4pOmV9LG4udmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9dCxuKTpyfSxuLnJldmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIHImJihLdSh0LGZ1bmN0aW9uKG4pe24uY2hpbGRyZW4mJihuLnZhbHVlPTApfSksUXUodCxmdW5jdGlvbih0KXt2YXIgZTt0LmNoaWxkcmVufHwodC52YWx1ZT0rci5jYWxsKG4sdCx0LmRlcHRoKXx8MCksKGU9dC5wYXJlbnQpJiYoZS52YWx1ZSs9dC52YWx1ZSl9KSksdH0sbn0sdGEubGF5b3V0LnBhcnRpdGlvbj1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCxlLHIsdSl7dmFyIGk9dC5jaGlsZHJlbjtpZih0Lng9ZSx0Lnk9dC5kZXB0aCp1LHQuZHg9cix0LmR5PXUsaSYmKG89aS5sZW5ndGgpKXt2YXIgbyxhLGMsbD0tMTtmb3Iocj10LnZhbHVlP3IvdC52YWx1ZTowOysrbDxvOyluKGE9aVtsXSxlLGM9YS52YWx1ZSpyLHUpLGUrPWN9fWZ1bmN0aW9uIHQobil7dmFyIGU9bi5jaGlsZHJlbixyPTA7aWYoZSYmKHU9ZS5sZW5ndGgpKWZvcih2YXIgdSxpPS0xOysraTx1OylyPU1hdGgubWF4KHIsdChlW2ldKSk7cmV0dXJuIDErcn1mdW5jdGlvbiBlKGUsaSl7dmFyIG89ci5jYWxsKHRoaXMsZSxpKTtyZXR1cm4gbihvWzBdLDAsdVswXSx1WzFdL3Qob1swXSkpLG99dmFyIHI9dGEubGF5b3V0LmhpZXJhcmNoeSgpLHU9WzEsMV07cmV0dXJuIGUuc2l6ZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1uLGUpOnV9LEd1KGUscil9LHRhLmxheW91dC5waWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG8pe3ZhciBhLGM9by5sZW5ndGgsbD1vLm1hcChmdW5jdGlvbihlLHIpe3JldHVybit0LmNhbGwobixlLHIpfSkscz0rKFwiZnVuY3Rpb25cIj09dHlwZW9mIHI/ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ciksZj0oXCJmdW5jdGlvblwiPT10eXBlb2YgdT91LmFwcGx5KHRoaXMsYXJndW1lbnRzKTp1KS1zLGg9TWF0aC5taW4oTWF0aC5hYnMoZikvYywrKFwiZnVuY3Rpb25cIj09dHlwZW9mIGk/aS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6aSkpLGc9aCooMD5mPy0xOjEpLHA9KGYtYypnKS90YS5zdW0obCksdj10YS5yYW5nZShjKSxkPVtdO3JldHVybiBudWxsIT1lJiZ2LnNvcnQoZT09PXBsP2Z1bmN0aW9uKG4sdCl7cmV0dXJuIGxbdF0tbFtuXX06ZnVuY3Rpb24obix0KXtyZXR1cm4gZShvW25dLG9bdF0pfSksdi5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Rbbl09e2RhdGE6b1tuXSx2YWx1ZTphPWxbbl0sc3RhcnRBbmdsZTpzLGVuZEFuZ2xlOnMrPWEqcCtnLHBhZEFuZ2xlOmh9fSksZH12YXIgdD1OdW1iZXIsZT1wbCxyPTAsdT1MYSxpPTA7cmV0dXJuIG4udmFsdWU9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ZSxuKTp0fSxuLnNvcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9dCxuKTplfSxuLnN0YXJ0QW5nbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9dCxuKTpyfSxuLmVuZEFuZ2xlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PXQsbik6dX0sbi5wYWRBbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT10LG4pOml9LG59O3ZhciBwbD17fTt0YS5sYXlvdXQuc3RhY2s9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKGEsYyl7aWYoIShoPWEubGVuZ3RoKSlyZXR1cm4gYTt2YXIgbD1hLm1hcChmdW5jdGlvbihlLHIpe3JldHVybiB0LmNhbGwobixlLHIpfSkscz1sLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXAoZnVuY3Rpb24odCxlKXtyZXR1cm5baS5jYWxsKG4sdCxlKSxvLmNhbGwobix0LGUpXX0pfSksZj1lLmNhbGwobixzLGMpO2w9dGEucGVybXV0ZShsLGYpLHM9dGEucGVybXV0ZShzLGYpO3ZhciBoLGcscCx2LGQ9ci5jYWxsKG4scyxjKSxtPWxbMF0ubGVuZ3RoO2ZvcihwPTA7bT5wOysrcClmb3IodS5jYWxsKG4sbFswXVtwXSx2PWRbcF0sc1swXVtwXVsxXSksZz0xO2g+ZzsrK2cpdS5jYWxsKG4sbFtnXVtwXSx2Kz1zW2ctMV1bcF1bMV0sc1tnXVtwXVsxXSk7cmV0dXJuIGF9dmFyIHQ9eSxlPWFpLHI9Y2ksdT1vaSxpPXVpLG89aWk7cmV0dXJuIG4udmFsdWVzPWZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PWUsbik6dH0sbi5vcmRlcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6dmwuZ2V0KHQpfHxhaSxuKTplfSxuLm9mZnNldD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6ZGwuZ2V0KHQpfHxjaSxuKTpyfSxuLng9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9dCxuKTppfSxuLnk9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89dCxuKTpvfSxuLm91dD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT10LG4pOnV9LG59O3ZhciB2bD10YS5tYXAoe1wiaW5zaWRlLW91dFwiOmZ1bmN0aW9uKG4pe3ZhciB0LGUscj1uLmxlbmd0aCx1PW4ubWFwKGxpKSxpPW4ubWFwKHNpKSxvPXRhLnJhbmdlKHIpLnNvcnQoZnVuY3Rpb24obix0KXtyZXR1cm4gdVtuXS11W3RdfSksYT0wLGM9MCxsPVtdLHM9W107Zm9yKHQ9MDtyPnQ7Kyt0KWU9b1t0XSxjPmE/KGErPWlbZV0sbC5wdXNoKGUpKTooYys9aVtlXSxzLnB1c2goZSkpO3JldHVybiBzLnJldmVyc2UoKS5jb25jYXQobCl9LHJldmVyc2U6ZnVuY3Rpb24obil7cmV0dXJuIHRhLnJhbmdlKG4ubGVuZ3RoKS5yZXZlcnNlKCl9LFwiZGVmYXVsdFwiOmFpfSksZGw9dGEubWFwKHtzaWxob3VldHRlOmZ1bmN0aW9uKG4pe3ZhciB0LGUscix1PW4ubGVuZ3RoLGk9blswXS5sZW5ndGgsbz1bXSxhPTAsYz1bXTtmb3IoZT0wO2k+ZTsrK2Upe2Zvcih0PTAscj0wO3U+dDt0Kyspcis9blt0XVtlXVsxXTtyPmEmJihhPXIpLG8ucHVzaChyKX1mb3IoZT0wO2k+ZTsrK2UpY1tlXT0oYS1vW2VdKS8yO3JldHVybiBjfSx3aWdnbGU6ZnVuY3Rpb24obil7dmFyIHQsZSxyLHUsaSxvLGEsYyxsLHM9bi5sZW5ndGgsZj1uWzBdLGg9Zi5sZW5ndGgsZz1bXTtmb3IoZ1swXT1jPWw9MCxlPTE7aD5lOysrZSl7Zm9yKHQ9MCx1PTA7cz50OysrdCl1Kz1uW3RdW2VdWzFdO2Zvcih0PTAsaT0wLGE9ZltlXVswXS1mW2UtMV1bMF07cz50OysrdCl7Zm9yKHI9MCxvPShuW3RdW2VdWzFdLW5bdF1bZS0xXVsxXSkvKDIqYSk7dD5yOysrcilvKz0obltyXVtlXVsxXS1uW3JdW2UtMV1bMV0pL2E7aSs9bypuW3RdW2VdWzFdfWdbZV09Yy09dT9pL3UqYTowLGw+YyYmKGw9Yyl9Zm9yKGU9MDtoPmU7KytlKWdbZV0tPWw7cmV0dXJuIGd9LGV4cGFuZDpmdW5jdGlvbihuKXt2YXIgdCxlLHIsdT1uLmxlbmd0aCxpPW5bMF0ubGVuZ3RoLG89MS91LGE9W107Zm9yKGU9MDtpPmU7KytlKXtmb3IodD0wLHI9MDt1PnQ7dCsrKXIrPW5bdF1bZV1bMV07aWYocilmb3IodD0wO3U+dDt0Kyspblt0XVtlXVsxXS89cjtlbHNlIGZvcih0PTA7dT50O3QrKyluW3RdW2VdWzFdPW99Zm9yKGU9MDtpPmU7KytlKWFbZV09MDtyZXR1cm4gYX0semVybzpjaX0pO3RhLmxheW91dC5oaXN0b2dyYW09ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4saSl7Zm9yKHZhciBvLGEsYz1bXSxsPW4ubWFwKGUsdGhpcykscz1yLmNhbGwodGhpcyxsLGkpLGY9dS5jYWxsKHRoaXMscyxsLGkpLGk9LTEsaD1sLmxlbmd0aCxnPWYubGVuZ3RoLTEscD10PzE6MS9oOysraTxnOylvPWNbaV09W10sby5keD1mW2krMV0tKG8ueD1mW2ldKSxvLnk9MDtpZihnPjApZm9yKGk9LTE7KytpPGg7KWE9bFtpXSxhPj1zWzBdJiZhPD1zWzFdJiYobz1jW3RhLmJpc2VjdChmLGEsMSxnKS0xXSxvLnkrPXAsby5wdXNoKG5baV0pKTtyZXR1cm4gY312YXIgdD0hMCxlPU51bWJlcixyPXBpLHU9aGk7cmV0dXJuIG4udmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9dCxuKTplfSxuLnJhbmdlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPUV0KHQpLG4pOnJ9LG4uYmlucz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1cIm51bWJlclwiPT10eXBlb2YgdD9mdW5jdGlvbihuKXtyZXR1cm4gZ2kobix0KX06RXQodCksbik6dX0sbi5mcmVxdWVuY3k9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ISFlLG4pOnR9LG59LHRhLmxheW91dC5wYWNrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLGkpe3ZhciBvPWUuY2FsbCh0aGlzLG4saSksYT1vWzBdLGM9dVswXSxsPXVbMV0scz1udWxsPT10P01hdGguc3FydDpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdH07aWYoYS54PWEueT0wLFF1KGEsZnVuY3Rpb24obil7bi5yPStzKG4udmFsdWUpfSksUXUoYSxNaSkscil7dmFyIGY9cioodD8xOk1hdGgubWF4KDIqYS5yL2MsMiphLnIvbCkpLzI7UXUoYSxmdW5jdGlvbihuKXtuLnIrPWZ9KSxRdShhLE1pKSxRdShhLGZ1bmN0aW9uKG4pe24uci09Zn0pfXJldHVybiBfaShhLGMvMixsLzIsdD8xOjEvTWF0aC5tYXgoMiphLnIvYywyKmEuci9sKSksb312YXIgdCxlPXRhLmxheW91dC5oaWVyYXJjaHkoKS5zb3J0KHZpKSxyPTAsdT1bMSwxXTtyZXR1cm4gbi5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PXQsbik6dX0sbi5yYWRpdXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9bnVsbD09ZXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOitlLG4pOnR9LG4ucGFkZGluZz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0rdCxuKTpyfSxHdShuLGUpfSx0YS5sYXlvdXQudHJlZT1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obix1KXt2YXIgcz1vLmNhbGwodGhpcyxuLHUpLGY9c1swXSxoPXQoZik7aWYoUXUoaCxlKSxoLnBhcmVudC5tPS1oLnosS3UoaCxyKSxsKUt1KGYsaSk7ZWxzZXt2YXIgZz1mLHA9Zix2PWY7S3UoZixmdW5jdGlvbihuKXtuLng8Zy54JiYoZz1uKSxuLng+cC54JiYocD1uKSxuLmRlcHRoPnYuZGVwdGgmJih2PW4pfSk7dmFyIGQ9YShnLHApLzItZy54LG09Y1swXS8ocC54K2EocCxnKS8yK2QpLHk9Y1sxXS8odi5kZXB0aHx8MSk7S3UoZixmdW5jdGlvbihuKXtuLng9KG4ueCtkKSptLG4ueT1uLmRlcHRoKnl9KX1yZXR1cm4gc31mdW5jdGlvbiB0KG4pe2Zvcih2YXIgdCxlPXtBOm51bGwsY2hpbGRyZW46W25dfSxyPVtlXTtudWxsIT0odD1yLnBvcCgpKTspZm9yKHZhciB1LGk9dC5jaGlsZHJlbixvPTAsYT1pLmxlbmd0aDthPm87KytvKXIucHVzaCgoaVtvXT11PXtfOmlbb10scGFyZW50OnQsY2hpbGRyZW46KHU9aVtvXS5jaGlsZHJlbikmJnUuc2xpY2UoKXx8W10sQTpudWxsLGE6bnVsbCx6OjAsbTowLGM6MCxzOjAsdDpudWxsLGk6b30pLmE9dSk7cmV0dXJuIGUuY2hpbGRyZW5bMF19ZnVuY3Rpb24gZShuKXt2YXIgdD1uLmNoaWxkcmVuLGU9bi5wYXJlbnQuY2hpbGRyZW4scj1uLmk/ZVtuLmktMV06bnVsbDtpZih0Lmxlbmd0aCl7Tmkobik7dmFyIGk9KHRbMF0ueit0W3QubGVuZ3RoLTFdLnopLzI7cj8obi56PXIueithKG4uXyxyLl8pLG4ubT1uLnotaSk6bi56PWl9ZWxzZSByJiYobi56PXIueithKG4uXyxyLl8pKTtuLnBhcmVudC5BPXUobixyLG4ucGFyZW50LkF8fGVbMF0pfWZ1bmN0aW9uIHIobil7bi5fLng9bi56K24ucGFyZW50Lm0sbi5tKz1uLnBhcmVudC5tfWZ1bmN0aW9uIHUobix0LGUpe2lmKHQpe2Zvcih2YXIgcix1PW4saT1uLG89dCxjPXUucGFyZW50LmNoaWxkcmVuWzBdLGw9dS5tLHM9aS5tLGY9by5tLGg9Yy5tO289RWkobyksdT1raSh1KSxvJiZ1OyljPWtpKGMpLGk9RWkoaSksaS5hPW4scj1vLnorZi11LnotbCthKG8uXyx1Ll8pLHI+MCYmKEFpKENpKG8sbixlKSxuLHIpLGwrPXIscys9ciksZis9by5tLGwrPXUubSxoKz1jLm0scys9aS5tO28mJiFFaShpKSYmKGkudD1vLGkubSs9Zi1zKSx1JiYha2koYykmJihjLnQ9dSxjLm0rPWwtaCxlPW4pfXJldHVybiBlfWZ1bmN0aW9uIGkobil7bi54Kj1jWzBdLG4ueT1uLmRlcHRoKmNbMV19dmFyIG89dGEubGF5b3V0LmhpZXJhcmNoeSgpLnNvcnQobnVsbCkudmFsdWUobnVsbCksYT1TaSxjPVsxLDFdLGw9bnVsbDtyZXR1cm4gbi5zZXBhcmF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPXQsbik6YX0sbi5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhsPW51bGw9PShjPXQpP2k6bnVsbCxuKTpsP251bGw6Y30sbi5ub2RlU2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obD1udWxsPT0oYz10KT9udWxsOmksbik6bD9jOm51bGx9LEd1KG4sbyl9LHRhLmxheW91dC5jbHVzdGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLGkpe3ZhciBvLGE9dC5jYWxsKHRoaXMsbixpKSxjPWFbMF0sbD0wO1F1KGMsZnVuY3Rpb24obil7dmFyIHQ9bi5jaGlsZHJlbjt0JiZ0Lmxlbmd0aD8obi54PXFpKHQpLG4ueT16aSh0KSk6KG4ueD1vP2wrPWUobixvKTowLG4ueT0wLG89bil9KTt2YXIgcz1MaShjKSxmPVRpKGMpLGg9cy54LWUocyxmKS8yLGc9Zi54K2UoZixzKS8yO3JldHVybiBRdShjLHU/ZnVuY3Rpb24obil7bi54PShuLngtYy54KSpyWzBdLG4ueT0oYy55LW4ueSkqclsxXX06ZnVuY3Rpb24obil7bi54PShuLngtaCkvKGctaCkqclswXSxuLnk9KDEtKGMueT9uLnkvYy55OjEpKSpyWzFdfSksYX12YXIgdD10YS5sYXlvdXQuaGllcmFyY2h5KCkuc29ydChudWxsKS52YWx1ZShudWxsKSxlPVNpLHI9WzEsMV0sdT0hMTtyZXR1cm4gbi5zZXBhcmF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPXQsbik6ZX0sbi5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PW51bGw9PShyPXQpLG4pOnU/bnVsbDpyfSxuLm5vZGVTaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PW51bGwhPShyPXQpLG4pOnU/cjpudWxsfSxHdShuLHQpfSx0YS5sYXlvdXQudHJlZW1hcD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obix0KXtmb3IodmFyIGUscix1PS0xLGk9bi5sZW5ndGg7Kyt1PGk7KXI9KGU9blt1XSkudmFsdWUqKDA+dD8wOnQpLGUuYXJlYT1pc05hTihyKXx8MD49cj8wOnJ9ZnVuY3Rpb24gdChlKXt2YXIgaT1lLmNoaWxkcmVuO2lmKGkmJmkubGVuZ3RoKXt2YXIgbyxhLGMsbD1mKGUpLHM9W10saD1pLnNsaWNlKCkscD0xLzAsdj1cInNsaWNlXCI9PT1nP2wuZHg6XCJkaWNlXCI9PT1nP2wuZHk6XCJzbGljZS1kaWNlXCI9PT1nPzEmZS5kZXB0aD9sLmR5OmwuZHg6TWF0aC5taW4obC5keCxsLmR5KTtmb3IobihoLGwuZHgqbC5keS9lLnZhbHVlKSxzLmFyZWE9MDsoYz1oLmxlbmd0aCk+MDspcy5wdXNoKG89aFtjLTFdKSxzLmFyZWErPW8uYXJlYSxcInNxdWFyaWZ5XCIhPT1nfHwoYT1yKHMsdikpPD1wPyhoLnBvcCgpLHA9YSk6KHMuYXJlYS09cy5wb3AoKS5hcmVhLHUocyx2LGwsITEpLHY9TWF0aC5taW4obC5keCxsLmR5KSxzLmxlbmd0aD1zLmFyZWE9MCxwPTEvMCk7cy5sZW5ndGgmJih1KHMsdixsLCEwKSxzLmxlbmd0aD1zLmFyZWE9MCksaS5mb3JFYWNoKHQpfX1mdW5jdGlvbiBlKHQpe3ZhciByPXQuY2hpbGRyZW47aWYociYmci5sZW5ndGgpe3ZhciBpLG89Zih0KSxhPXIuc2xpY2UoKSxjPVtdO2ZvcihuKGEsby5keCpvLmR5L3QudmFsdWUpLGMuYXJlYT0wO2k9YS5wb3AoKTspYy5wdXNoKGkpLGMuYXJlYSs9aS5hcmVhLG51bGwhPWkueiYmKHUoYyxpLno/by5keDpvLmR5LG8sIWEubGVuZ3RoKSxjLmxlbmd0aD1jLmFyZWE9MCk7ci5mb3JFYWNoKGUpfX1mdW5jdGlvbiByKG4sdCl7Zm9yKHZhciBlLHI9bi5hcmVhLHU9MCxpPTEvMCxvPS0xLGE9bi5sZW5ndGg7KytvPGE7KShlPW5bb10uYXJlYSkmJihpPmUmJihpPWUpLGU+dSYmKHU9ZSkpO3JldHVybiByKj1yLHQqPXQscj9NYXRoLm1heCh0KnUqcC9yLHIvKHQqaSpwKSk6MS8wfWZ1bmN0aW9uIHUobix0LGUscil7dmFyIHUsaT0tMSxvPW4ubGVuZ3RoLGE9ZS54LGw9ZS55LHM9dD9jKG4uYXJlYS90KTowO2lmKHQ9PWUuZHgpe2Zvcigocnx8cz5lLmR5KSYmKHM9ZS5keSk7KytpPG87KXU9bltpXSx1Lng9YSx1Lnk9bCx1LmR5PXMsYSs9dS5keD1NYXRoLm1pbihlLngrZS5keC1hLHM/Yyh1LmFyZWEvcyk6MCk7dS56PSEwLHUuZHgrPWUueCtlLmR4LWEsZS55Kz1zLGUuZHktPXN9ZWxzZXtmb3IoKHJ8fHM+ZS5keCkmJihzPWUuZHgpOysraTxvOyl1PW5baV0sdS54PWEsdS55PWwsdS5keD1zLGwrPXUuZHk9TWF0aC5taW4oZS55K2UuZHktbCxzP2ModS5hcmVhL3MpOjApO3Uuej0hMSx1LmR5Kz1lLnkrZS5keS1sLGUueCs9cyxlLmR4LT1zfX1mdW5jdGlvbiBpKHIpe3ZhciB1PW98fGEociksaT11WzBdO3JldHVybiBpLng9MCxpLnk9MCxpLmR4PWxbMF0saS5keT1sWzFdLG8mJmEucmV2YWx1ZShpKSxuKFtpXSxpLmR4KmkuZHkvaS52YWx1ZSksKG8/ZTp0KShpKSxoJiYobz11KSx1fXZhciBvLGE9dGEubGF5b3V0LmhpZXJhcmNoeSgpLGM9TWF0aC5yb3VuZCxsPVsxLDFdLHM9bnVsbCxmPVJpLGg9ITEsZz1cInNxdWFyaWZ5XCIscD0uNSooMStNYXRoLnNxcnQoNSkpO1xucmV0dXJuIGkuc2l6ZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obD1uLGkpOmx9LGkucGFkZGluZz1mdW5jdGlvbihuKXtmdW5jdGlvbiB0KHQpe3ZhciBlPW4uY2FsbChpLHQsdC5kZXB0aCk7cmV0dXJuIG51bGw9PWU/UmkodCk6RGkodCxcIm51bWJlclwiPT10eXBlb2YgZT9bZSxlLGUsZV06ZSl9ZnVuY3Rpb24gZSh0KXtyZXR1cm4gRGkodCxuKX1pZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gczt2YXIgcjtyZXR1cm4gZj1udWxsPT0ocz1uKT9SaTpcImZ1bmN0aW9uXCI9PShyPXR5cGVvZiBuKT90OlwibnVtYmVyXCI9PT1yPyhuPVtuLG4sbixuXSxlKTplLGl9LGkucm91bmQ9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGM9bj9NYXRoLnJvdW5kOk51bWJlcixpKTpjIT1OdW1iZXJ9LGkuc3RpY2t5PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhoPW4sbz1udWxsLGkpOmh9LGkucmF0aW89ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHA9bixpKTpwfSxpLm1vZGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGc9bitcIlwiLGkpOmd9LEd1KGksYSl9LHRhLnJhbmRvbT17bm9ybWFsOmZ1bmN0aW9uKG4sdCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDtyZXR1cm4gMj5lJiYodD0xKSwxPmUmJihuPTApLGZ1bmN0aW9uKCl7dmFyIGUscix1O2RvIGU9MipNYXRoLnJhbmRvbSgpLTEscj0yKk1hdGgucmFuZG9tKCktMSx1PWUqZStyKnI7d2hpbGUoIXV8fHU+MSk7cmV0dXJuIG4rdCplKk1hdGguc3FydCgtMipNYXRoLmxvZyh1KS91KX19LGxvZ05vcm1hbDpmdW5jdGlvbigpe3ZhciBuPXRhLnJhbmRvbS5ub3JtYWwuYXBwbHkodGEsYXJndW1lbnRzKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5leHAobigpKX19LGJhdGVzOmZ1bmN0aW9uKG4pe3ZhciB0PXRhLnJhbmRvbS5pcndpbkhhbGwobik7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQoKS9ufX0saXJ3aW5IYWxsOmZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtuPmU7ZSsrKXQrPU1hdGgucmFuZG9tKCk7cmV0dXJuIHR9fX0sdGEuc2NhbGU9e307dmFyIG1sPXtmbG9vcjp5LGNlaWw6eX07dGEuc2NhbGUubGluZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIElpKFswLDFdLFswLDFdLG11LCExKX07dmFyIHlsPXtzOjEsZzoxLHA6MSxyOjEsZToxfTt0YS5zY2FsZS5sb2c9ZnVuY3Rpb24oKXtyZXR1cm4gSmkodGEuc2NhbGUubGluZWFyKCkuZG9tYWluKFswLDFdKSwxMCwhMCxbMSwxMF0pfTt2YXIgTWw9dGEuZm9ybWF0KFwiLjBlXCIpLHhsPXtmbG9vcjpmdW5jdGlvbihuKXtyZXR1cm4tTWF0aC5jZWlsKC1uKX0sY2VpbDpmdW5jdGlvbihuKXtyZXR1cm4tTWF0aC5mbG9vcigtbil9fTt0YS5zY2FsZS5wb3c9ZnVuY3Rpb24oKXtyZXR1cm4gR2kodGEuc2NhbGUubGluZWFyKCksMSxbMCwxXSl9LHRhLnNjYWxlLnNxcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGEuc2NhbGUucG93KCkuZXhwb25lbnQoLjUpfSx0YS5zY2FsZS5vcmRpbmFsPWZ1bmN0aW9uKCl7cmV0dXJuIFFpKFtdLHt0OlwicmFuZ2VcIixhOltbXV19KX0sdGEuc2NhbGUuY2F0ZWdvcnkxMD1mdW5jdGlvbigpe3JldHVybiB0YS5zY2FsZS5vcmRpbmFsKCkucmFuZ2UoYmwpfSx0YS5zY2FsZS5jYXRlZ29yeTIwPWZ1bmN0aW9uKCl7cmV0dXJuIHRhLnNjYWxlLm9yZGluYWwoKS5yYW5nZShfbCl9LHRhLnNjYWxlLmNhdGVnb3J5MjBiPWZ1bmN0aW9uKCl7cmV0dXJuIHRhLnNjYWxlLm9yZGluYWwoKS5yYW5nZSh3bCl9LHRhLnNjYWxlLmNhdGVnb3J5MjBjPWZ1bmN0aW9uKCl7cmV0dXJuIHRhLnNjYWxlLm9yZGluYWwoKS5yYW5nZShTbCl9O3ZhciBibD1bMjA2MjI2MCwxNjc0NDIwNiwyOTI0NTg4LDE0MDM0NzI4LDk3MjU4ODUsOTE5NzEzMSwxNDkwNzMzMCw4MzU1NzExLDEyMzY5MTg2LDE1NTYxNzVdLm1hcChNdCksX2w9WzIwNjIyNjAsMTE0NTQ0NDAsMTY3NDQyMDYsMTY3NTk2NzIsMjkyNDU4OCwxMDAxODY5OCwxNDAzNDcyOCwxNjc1MDc0Miw5NzI1ODg1LDEyOTU1ODYxLDkxOTcxMzEsMTI4ODUxNDAsMTQ5MDczMzAsMTYyMzQxOTQsODM1NTcxMSwxMzA5MjgwNywxMjM2OTE4NiwxNDQwODU4OSwxNTU2MTc1LDEwNDEwNzI1XS5tYXAoTXQpLHdsPVszNzUwNzc3LDUzOTU2MTksNzA0MDcxOSwxMDI2NDI4Niw2NTE5MDk3LDkyMTY1OTQsMTE5MTUxMTUsMTM1NTY2MzYsOTIwMjk5MywxMjQyNjgwOSwxNTE4NjUxNCwxNTE5MDkzMiw4NjY2MTY5LDExMzU2NDkwLDE0MDQ5NjQzLDE1MTc3MzcyLDgwNzc2ODMsMTA4MzQzMjQsMTM1Mjg1MDksMTQ1ODk2NTRdLm1hcChNdCksU2w9WzMyNDQ3MzMsNzA1NzExMCwxMDQwNjYyNSwxMzAzMjQzMSwxNTA5NTA1MywxNjYxNjc2NCwxNjYyNTI1OSwxNjYzNDAxOCwzMjUzMDc2LDc2NTI0NzAsMTA2MDcwMDMsMTMxMDE1MDQsNzY5NTI4MSwxMDM5NDMxMiwxMjM2OTM3MiwxNDM0Mjg5MSw2NTEzNTA3LDk4Njg5NTAsMTI0MzQ4NzcsMTQyNzcwODFdLm1hcChNdCk7dGEuc2NhbGUucXVhbnRpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gbm8oW10sW10pfSx0YS5zY2FsZS5xdWFudGl6ZT1mdW5jdGlvbigpe3JldHVybiB0bygwLDEsWzAsMV0pfSx0YS5zY2FsZS50aHJlc2hvbGQ9ZnVuY3Rpb24oKXtyZXR1cm4gZW8oWy41XSxbMCwxXSl9LHRhLnNjYWxlLmlkZW50aXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHJvKFswLDFdKX0sdGEuc3ZnPXt9LHRhLnN2Zy5hcmM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKCl7dmFyIG49TWF0aC5tYXgoMCwrZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpLGw9TWF0aC5tYXgoMCwrci5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHM9by5hcHBseSh0aGlzLGFyZ3VtZW50cyktUmEsZj1hLmFwcGx5KHRoaXMsYXJndW1lbnRzKS1SYSxoPU1hdGguYWJzKGYtcyksZz1zPmY/MDoxO2lmKG4+bCYmKHA9bCxsPW4sbj1wKSxoPj1UYSlyZXR1cm4gdChsLGcpKyhuP3QobiwxLWcpOlwiXCIpK1wiWlwiO3ZhciBwLHYsZCxtLHksTSx4LGIsXyx3LFMsayxFPTAsQT0wLE49W107aWYoKG09KCtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8MCkvMikmJihkPWk9PT1rbD9NYXRoLnNxcnQobipuK2wqbCk6K2kuYXBwbHkodGhpcyxhcmd1bWVudHMpLGd8fChBKj0tMSksbCYmKEE9dHQoZC9sKk1hdGguc2luKG0pKSksbiYmKEU9dHQoZC9uKk1hdGguc2luKG0pKSkpLGwpe3k9bCpNYXRoLmNvcyhzK0EpLE09bCpNYXRoLnNpbihzK0EpLHg9bCpNYXRoLmNvcyhmLUEpLGI9bCpNYXRoLnNpbihmLUEpO3ZhciBDPU1hdGguYWJzKGYtcy0yKkEpPD1xYT8wOjE7aWYoQSYmc28oeSxNLHgsYik9PT1nXkMpe3ZhciB6PShzK2YpLzI7eT1sKk1hdGguY29zKHopLE09bCpNYXRoLnNpbih6KSx4PWI9bnVsbH19ZWxzZSB5PU09MDtpZihuKXtfPW4qTWF0aC5jb3MoZi1FKSx3PW4qTWF0aC5zaW4oZi1FKSxTPW4qTWF0aC5jb3MocytFKSxrPW4qTWF0aC5zaW4ocytFKTt2YXIgcT1NYXRoLmFicyhzLWYrMipFKTw9cWE/MDoxO2lmKEUmJnNvKF8sdyxTLGspPT09MS1nXnEpe3ZhciBMPShzK2YpLzI7Xz1uKk1hdGguY29zKEwpLHc9bipNYXRoLnNpbihMKSxTPWs9bnVsbH19ZWxzZSBfPXc9MDtpZigocD1NYXRoLm1pbihNYXRoLmFicyhsLW4pLzIsK3UuYXBwbHkodGhpcyxhcmd1bWVudHMpKSk+LjAwMSl7dj1sPm5eZz8wOjE7dmFyIFQ9bnVsbD09Uz9bXyx3XTpudWxsPT14P1t5LE1dOkxyKFt5LE1dLFtTLGtdLFt4LGJdLFtfLHddKSxSPXktVFswXSxEPU0tVFsxXSxQPXgtVFswXSxVPWItVFsxXSxqPTEvTWF0aC5zaW4oTWF0aC5hY29zKChSKlArRCpVKS8oTWF0aC5zcXJ0KFIqUitEKkQpKk1hdGguc3FydChQKlArVSpVKSkpLzIpLEY9TWF0aC5zcXJ0KFRbMF0qVFswXStUWzFdKlRbMV0pO2lmKG51bGwhPXgpe3ZhciBIPU1hdGgubWluKHAsKGwtRikvKGorMSkpLE89Zm8obnVsbD09Uz9bXyx3XTpbUyxrXSxbeSxNXSxsLEgsZyksST1mbyhbeCxiXSxbXyx3XSxsLEgsZyk7cD09PUg/Ti5wdXNoKFwiTVwiLE9bMF0sXCJBXCIsSCxcIixcIixILFwiIDAgMCxcIix2LFwiIFwiLE9bMV0sXCJBXCIsbCxcIixcIixsLFwiIDAgXCIsMS1nXnNvKE9bMV1bMF0sT1sxXVsxXSxJWzFdWzBdLElbMV1bMV0pLFwiLFwiLGcsXCIgXCIsSVsxXSxcIkFcIixILFwiLFwiLEgsXCIgMCAwLFwiLHYsXCIgXCIsSVswXSk6Ti5wdXNoKFwiTVwiLE9bMF0sXCJBXCIsSCxcIixcIixILFwiIDAgMSxcIix2LFwiIFwiLElbMF0pfWVsc2UgTi5wdXNoKFwiTVwiLHksXCIsXCIsTSk7aWYobnVsbCE9Uyl7dmFyIFk9TWF0aC5taW4ocCwobi1GKS8oai0xKSksWj1mbyhbeSxNXSxbUyxrXSxuLC1ZLGcpLFY9Zm8oW18sd10sbnVsbD09eD9beSxNXTpbeCxiXSxuLC1ZLGcpO3A9PT1ZP04ucHVzaChcIkxcIixWWzBdLFwiQVwiLFksXCIsXCIsWSxcIiAwIDAsXCIsdixcIiBcIixWWzFdLFwiQVwiLG4sXCIsXCIsbixcIiAwIFwiLGdec28oVlsxXVswXSxWWzFdWzFdLFpbMV1bMF0sWlsxXVsxXSksXCIsXCIsMS1nLFwiIFwiLFpbMV0sXCJBXCIsWSxcIixcIixZLFwiIDAgMCxcIix2LFwiIFwiLFpbMF0pOk4ucHVzaChcIkxcIixWWzBdLFwiQVwiLFksXCIsXCIsWSxcIiAwIDAsXCIsdixcIiBcIixaWzBdKX1lbHNlIE4ucHVzaChcIkxcIixfLFwiLFwiLHcpfWVsc2UgTi5wdXNoKFwiTVwiLHksXCIsXCIsTSksbnVsbCE9eCYmTi5wdXNoKFwiQVwiLGwsXCIsXCIsbCxcIiAwIFwiLEMsXCIsXCIsZyxcIiBcIix4LFwiLFwiLGIpLE4ucHVzaChcIkxcIixfLFwiLFwiLHcpLG51bGwhPVMmJk4ucHVzaChcIkFcIixuLFwiLFwiLG4sXCIgMCBcIixxLFwiLFwiLDEtZyxcIiBcIixTLFwiLFwiLGspO3JldHVybiBOLnB1c2goXCJaXCIpLE4uam9pbihcIlwiKX1mdW5jdGlvbiB0KG4sdCl7cmV0dXJuXCJNMCxcIituK1wiQVwiK24rXCIsXCIrbitcIiAwIDEsXCIrdCtcIiAwLFwiKy1uK1wiQVwiK24rXCIsXCIrbitcIiAwIDEsXCIrdCtcIiAwLFwiK259dmFyIGU9aW8scj1vbyx1PXVvLGk9a2wsbz1hbyxhPWNvLGM9bG87cmV0dXJuIG4uaW5uZXJSYWRpdXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9RXQodCksbik6ZX0sbi5vdXRlclJhZGl1cz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj1FdCh0KSxuKTpyfSxuLmNvcm5lclJhZGl1cz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1FdCh0KSxuKTp1fSxuLnBhZFJhZGl1cz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT10PT1rbD9rbDpFdCh0KSxuKTppfSxuLnN0YXJ0QW5nbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89RXQodCksbik6b30sbi5lbmRBbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT1FdCh0KSxuKTphfSxuLnBhZEFuZ2xlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPUV0KHQpLG4pOmN9LG4uY2VudHJvaWQ9ZnVuY3Rpb24oKXt2YXIgbj0oK2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKyArci5hcHBseSh0aGlzLGFyZ3VtZW50cykpLzIsdD0oK28uYXBwbHkodGhpcyxhcmd1bWVudHMpKyArYS5hcHBseSh0aGlzLGFyZ3VtZW50cykpLzItUmE7cmV0dXJuW01hdGguY29zKHQpKm4sTWF0aC5zaW4odCkqbl19LG59O3ZhciBrbD1cImF1dG9cIjt0YS5zdmcubGluZT1mdW5jdGlvbigpe3JldHVybiBobyh5KX07dmFyIEVsPXRhLm1hcCh7bGluZWFyOmdvLFwibGluZWFyLWNsb3NlZFwiOnBvLHN0ZXA6dm8sXCJzdGVwLWJlZm9yZVwiOm1vLFwic3RlcC1hZnRlclwiOnlvLGJhc2lzOlNvLFwiYmFzaXMtb3BlblwiOmtvLFwiYmFzaXMtY2xvc2VkXCI6RW8sYnVuZGxlOkFvLGNhcmRpbmFsOmJvLFwiY2FyZGluYWwtb3BlblwiOk1vLFwiY2FyZGluYWwtY2xvc2VkXCI6eG8sbW9ub3RvbmU6VG99KTtFbC5mb3JFYWNoKGZ1bmN0aW9uKG4sdCl7dC5rZXk9bix0LmNsb3NlZD0vLWNsb3NlZCQvLnRlc3Qobil9KTt2YXIgQWw9WzAsMi8zLDEvMywwXSxObD1bMCwxLzMsMi8zLDBdLENsPVswLDEvNiwyLzMsMS82XTt0YS5zdmcubGluZS5yYWRpYWw9ZnVuY3Rpb24oKXt2YXIgbj1obyhSbyk7cmV0dXJuIG4ucmFkaXVzPW4ueCxkZWxldGUgbi54LG4uYW5nbGU9bi55LGRlbGV0ZSBuLnksbn0sbW8ucmV2ZXJzZT15byx5by5yZXZlcnNlPW1vLHRhLnN2Zy5hcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIERvKHkpfSx0YS5zdmcuYXJlYS5yYWRpYWw9ZnVuY3Rpb24oKXt2YXIgbj1EbyhSbyk7cmV0dXJuIG4ucmFkaXVzPW4ueCxkZWxldGUgbi54LG4uaW5uZXJSYWRpdXM9bi54MCxkZWxldGUgbi54MCxuLm91dGVyUmFkaXVzPW4ueDEsZGVsZXRlIG4ueDEsbi5hbmdsZT1uLnksZGVsZXRlIG4ueSxuLnN0YXJ0QW5nbGU9bi55MCxkZWxldGUgbi55MCxuLmVuZEFuZ2xlPW4ueTEsZGVsZXRlIG4ueTEsbn0sdGEuc3ZnLmNob3JkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLGEpe3ZhciBjPXQodGhpcyxpLG4sYSksbD10KHRoaXMsbyxuLGEpO3JldHVyblwiTVwiK2MucDArcihjLnIsYy5wMSxjLmExLWMuYTApKyhlKGMsbCk/dShjLnIsYy5wMSxjLnIsYy5wMCk6dShjLnIsYy5wMSxsLnIsbC5wMCkrcihsLnIsbC5wMSxsLmExLWwuYTApK3UobC5yLGwucDEsYy5yLGMucDApKStcIlpcIn1mdW5jdGlvbiB0KG4sdCxlLHIpe3ZhciB1PXQuY2FsbChuLGUsciksaT1hLmNhbGwobix1LHIpLG89Yy5jYWxsKG4sdSxyKS1SYSxzPWwuY2FsbChuLHUsciktUmE7cmV0dXJue3I6aSxhMDpvLGExOnMscDA6W2kqTWF0aC5jb3MobyksaSpNYXRoLnNpbihvKV0scDE6W2kqTWF0aC5jb3MocyksaSpNYXRoLnNpbihzKV19fWZ1bmN0aW9uIGUobix0KXtyZXR1cm4gbi5hMD09dC5hMCYmbi5hMT09dC5hMX1mdW5jdGlvbiByKG4sdCxlKXtyZXR1cm5cIkFcIituK1wiLFwiK24rXCIgMCBcIisgKyhlPnFhKStcIiwxIFwiK3R9ZnVuY3Rpb24gdShuLHQsZSxyKXtyZXR1cm5cIlEgMCwwIFwiK3J9dmFyIGk9bXIsbz15cixhPVBvLGM9YW8sbD1jbztyZXR1cm4gbi5yYWRpdXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9RXQodCksbik6YX0sbi5zb3VyY2U9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9RXQodCksbik6aX0sbi50YXJnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89RXQodCksbik6b30sbi5zdGFydEFuZ2xlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPUV0KHQpLG4pOmN9LG4uZW5kQW5nbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGw9RXQodCksbik6bH0sbn0sdGEuc3ZnLmRpYWdvbmFsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHUpe3ZhciBpPXQuY2FsbCh0aGlzLG4sdSksbz1lLmNhbGwodGhpcyxuLHUpLGE9KGkueStvLnkpLzIsYz1baSx7eDppLngseTphfSx7eDpvLngseTphfSxvXTtyZXR1cm4gYz1jLm1hcChyKSxcIk1cIitjWzBdK1wiQ1wiK2NbMV0rXCIgXCIrY1syXStcIiBcIitjWzNdfXZhciB0PW1yLGU9eXIscj1VbztyZXR1cm4gbi5zb3VyY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9RXQoZSksbik6dH0sbi50YXJnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9RXQodCksbik6ZX0sbi5wcm9qZWN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPXQsbik6cn0sbn0sdGEuc3ZnLmRpYWdvbmFsLnJhZGlhbD1mdW5jdGlvbigpe3ZhciBuPXRhLnN2Zy5kaWFnb25hbCgpLHQ9VW8sZT1uLnByb2plY3Rpb247cmV0dXJuIG4ucHJvamVjdGlvbj1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9lKGpvKHQ9bikpOnR9LG59LHRhLnN2Zy5zeW1ib2w9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4scil7cmV0dXJuKHpsLmdldCh0LmNhbGwodGhpcyxuLHIpKXx8T28pKGUuY2FsbCh0aGlzLG4scikpfXZhciB0PUhvLGU9Rm87cmV0dXJuIG4udHlwZT1mdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD1FdChlKSxuKTp0fSxuLnNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9RXQodCksbik6ZX0sbn07dmFyIHpsPXRhLm1hcCh7Y2lyY2xlOk9vLGNyb3NzOmZ1bmN0aW9uKG4pe3ZhciB0PU1hdGguc3FydChuLzUpLzI7cmV0dXJuXCJNXCIrLTMqdCtcIixcIistdCtcIkhcIistdCtcIlZcIistMyp0K1wiSFwiK3QrXCJWXCIrLXQrXCJIXCIrMyp0K1wiVlwiK3QrXCJIXCIrdCtcIlZcIiszKnQrXCJIXCIrLXQrXCJWXCIrdCtcIkhcIistMyp0K1wiWlwifSxkaWFtb25kOmZ1bmN0aW9uKG4pe3ZhciB0PU1hdGguc3FydChuLygyKkxsKSksZT10KkxsO3JldHVyblwiTTAsXCIrLXQrXCJMXCIrZStcIiwwIDAsXCIrdCtcIiBcIistZStcIiwwWlwifSxzcXVhcmU6ZnVuY3Rpb24obil7dmFyIHQ9TWF0aC5zcXJ0KG4pLzI7cmV0dXJuXCJNXCIrLXQrXCIsXCIrLXQrXCJMXCIrdCtcIixcIistdCtcIiBcIit0K1wiLFwiK3QrXCIgXCIrLXQrXCIsXCIrdCtcIlpcIn0sXCJ0cmlhbmdsZS1kb3duXCI6ZnVuY3Rpb24obil7dmFyIHQ9TWF0aC5zcXJ0KG4vcWwpLGU9dCpxbC8yO3JldHVyblwiTTAsXCIrZStcIkxcIit0K1wiLFwiKy1lK1wiIFwiKy10K1wiLFwiKy1lK1wiWlwifSxcInRyaWFuZ2xlLXVwXCI6ZnVuY3Rpb24obil7dmFyIHQ9TWF0aC5zcXJ0KG4vcWwpLGU9dCpxbC8yO3JldHVyblwiTTAsXCIrLWUrXCJMXCIrdCtcIixcIitlK1wiIFwiKy10K1wiLFwiK2UrXCJaXCJ9fSk7dGEuc3ZnLnN5bWJvbFR5cGVzPXpsLmtleXMoKTt2YXIgcWw9TWF0aC5zcXJ0KDMpLExsPU1hdGgudGFuKDMwKkRhKTtfYS50cmFuc2l0aW9uPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdCxlLHI9VGx8fCsrVWwsdT1YbyhuKSxpPVtdLG89Umx8fHt0aW1lOkRhdGUubm93KCksZWFzZTpTdSxkZWxheTowLGR1cmF0aW9uOjI1MH0sYT0tMSxjPXRoaXMubGVuZ3RoOysrYTxjOyl7aS5wdXNoKHQ9W10pO2Zvcih2YXIgbD10aGlzW2FdLHM9LTEsZj1sLmxlbmd0aDsrK3M8ZjspKGU9bFtzXSkmJiRvKGUscyx1LHIsbyksdC5wdXNoKGUpfXJldHVybiBZbyhpLHUscil9LF9hLmludGVycnVwdD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKG51bGw9PW4/RGw6SW8oWG8obikpKX07dmFyIFRsLFJsLERsPUlvKFhvKCkpLFBsPVtdLFVsPTA7UGwuY2FsbD1fYS5jYWxsLFBsLmVtcHR5PV9hLmVtcHR5LFBsLm5vZGU9X2Eubm9kZSxQbC5zaXplPV9hLnNpemUsdGEudHJhbnNpdGlvbj1mdW5jdGlvbihuLHQpe3JldHVybiBuJiZuLnRyYW5zaXRpb24/VGw/bi50cmFuc2l0aW9uKHQpOm46dGEuc2VsZWN0aW9uKCkudHJhbnNpdGlvbihuKX0sdGEudHJhbnNpdGlvbi5wcm90b3R5cGU9UGwsUGwuc2VsZWN0PWZ1bmN0aW9uKG4pe3ZhciB0LGUscix1PXRoaXMuaWQsaT10aGlzLm5hbWVzcGFjZSxvPVtdO249TihuKTtmb3IodmFyIGE9LTEsYz10aGlzLmxlbmd0aDsrK2E8Yzspe28ucHVzaCh0PVtdKTtmb3IodmFyIGw9dGhpc1thXSxzPS0xLGY9bC5sZW5ndGg7KytzPGY7KShyPWxbc10pJiYoZT1uLmNhbGwocixyLl9fZGF0YV9fLHMsYSkpPyhcIl9fZGF0YV9fXCJpbiByJiYoZS5fX2RhdGFfXz1yLl9fZGF0YV9fKSwkbyhlLHMsaSx1LHJbaV1bdV0pLHQucHVzaChlKSk6dC5wdXNoKG51bGwpfXJldHVybiBZbyhvLGksdSl9LFBsLnNlbGVjdEFsbD1mdW5jdGlvbihuKXt2YXIgdCxlLHIsdSxpLG89dGhpcy5pZCxhPXRoaXMubmFtZXNwYWNlLGM9W107bj1DKG4pO2Zvcih2YXIgbD0tMSxzPXRoaXMubGVuZ3RoOysrbDxzOylmb3IodmFyIGY9dGhpc1tsXSxoPS0xLGc9Zi5sZW5ndGg7KytoPGc7KWlmKHI9ZltoXSl7aT1yW2FdW29dLGU9bi5jYWxsKHIsci5fX2RhdGFfXyxoLGwpLGMucHVzaCh0PVtdKTtmb3IodmFyIHA9LTEsdj1lLmxlbmd0aDsrK3A8djspKHU9ZVtwXSkmJiRvKHUscCxhLG8saSksdC5wdXNoKHUpfXJldHVybiBZbyhjLGEsbyl9LFBsLmZpbHRlcj1mdW5jdGlvbihuKXt2YXIgdCxlLHIsdT1bXTtcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiYobj1PKG4pKTtmb3IodmFyIGk9MCxvPXRoaXMubGVuZ3RoO28+aTtpKyspe3UucHVzaCh0PVtdKTtmb3IodmFyIGU9dGhpc1tpXSxhPTAsYz1lLmxlbmd0aDtjPmE7YSsrKShyPWVbYV0pJiZuLmNhbGwocixyLl9fZGF0YV9fLGEsaSkmJnQucHVzaChyKX1yZXR1cm4gWW8odSx0aGlzLm5hbWVzcGFjZSx0aGlzLmlkKX0sUGwudHdlZW49ZnVuY3Rpb24obix0KXt2YXIgZT10aGlzLmlkLHI9dGhpcy5uYW1lc3BhY2U7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8Mj90aGlzLm5vZGUoKVtyXVtlXS50d2Vlbi5nZXQobik6WSh0aGlzLG51bGw9PXQ/ZnVuY3Rpb24odCl7dFtyXVtlXS50d2Vlbi5yZW1vdmUobil9OmZ1bmN0aW9uKHUpe3Vbcl1bZV0udHdlZW4uc2V0KG4sdCl9KX0sUGwuYXR0cj1mdW5jdGlvbihuLHQpe2Z1bmN0aW9uIGUoKXt0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKX1mdW5jdGlvbiByKCl7dGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhhLnNwYWNlLGEubG9jYWwpfWZ1bmN0aW9uIHUobil7cmV0dXJuIG51bGw9PW4/ZToobis9XCJcIixmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5nZXRBdHRyaWJ1dGUoYSk7cmV0dXJuIGUhPT1uJiYodD1vKGUsbiksZnVuY3Rpb24obil7dGhpcy5zZXRBdHRyaWJ1dGUoYSx0KG4pKX0pfSl9ZnVuY3Rpb24gaShuKXtyZXR1cm4gbnVsbD09bj9yOihuKz1cIlwiLGZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmdldEF0dHJpYnV0ZU5TKGEuc3BhY2UsYS5sb2NhbCk7cmV0dXJuIGUhPT1uJiYodD1vKGUsbiksZnVuY3Rpb24obil7dGhpcy5zZXRBdHRyaWJ1dGVOUyhhLnNwYWNlLGEubG9jYWwsdChuKSl9KX0pfWlmKGFyZ3VtZW50cy5sZW5ndGg8Mil7Zm9yKHQgaW4gbil0aGlzLmF0dHIodCxuW3RdKTtyZXR1cm4gdGhpc312YXIgbz1cInRyYW5zZm9ybVwiPT1uP0h1Om11LGE9dGEubnMucXVhbGlmeShuKTtyZXR1cm4gWm8odGhpcyxcImF0dHIuXCIrbix0LGEubG9jYWw/aTp1KX0sUGwuYXR0clR3ZWVuPWZ1bmN0aW9uKG4sdCl7ZnVuY3Rpb24gZShuLGUpe3ZhciByPXQuY2FsbCh0aGlzLG4sZSx0aGlzLmdldEF0dHJpYnV0ZSh1KSk7cmV0dXJuIHImJmZ1bmN0aW9uKG4pe3RoaXMuc2V0QXR0cmlidXRlKHUscihuKSl9fWZ1bmN0aW9uIHIobixlKXt2YXIgcj10LmNhbGwodGhpcyxuLGUsdGhpcy5nZXRBdHRyaWJ1dGVOUyh1LnNwYWNlLHUubG9jYWwpKTtyZXR1cm4gciYmZnVuY3Rpb24obil7dGhpcy5zZXRBdHRyaWJ1dGVOUyh1LnNwYWNlLHUubG9jYWwscihuKSl9fXZhciB1PXRhLm5zLnF1YWxpZnkobik7cmV0dXJuIHRoaXMudHdlZW4oXCJhdHRyLlwiK24sdS5sb2NhbD9yOmUpfSxQbC5zdHlsZT1mdW5jdGlvbihuLGUscil7ZnVuY3Rpb24gdSgpe3RoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobil9ZnVuY3Rpb24gaShlKXtyZXR1cm4gbnVsbD09ZT91OihlKz1cIlwiLGZ1bmN0aW9uKCl7dmFyIHUsaT10KHRoaXMpLmdldENvbXB1dGVkU3R5bGUodGhpcyxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKG4pO3JldHVybiBpIT09ZSYmKHU9bXUoaSxlKSxmdW5jdGlvbih0KXt0aGlzLnN0eWxlLnNldFByb3BlcnR5KG4sdSh0KSxyKX0pfSl9dmFyIG89YXJndW1lbnRzLmxlbmd0aDtpZigzPm8pe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBuKXsyPm8mJihlPVwiXCIpO2ZvcihyIGluIG4pdGhpcy5zdHlsZShyLG5bcl0sZSk7cmV0dXJuIHRoaXN9cj1cIlwifXJldHVybiBabyh0aGlzLFwic3R5bGUuXCIrbixlLGkpfSxQbC5zdHlsZVR3ZWVuPWZ1bmN0aW9uKG4sZSxyKXtmdW5jdGlvbiB1KHUsaSl7dmFyIG89ZS5jYWxsKHRoaXMsdSxpLHQodGhpcykuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLG51bGwpLmdldFByb3BlcnR5VmFsdWUobikpO3JldHVybiBvJiZmdW5jdGlvbih0KXt0aGlzLnN0eWxlLnNldFByb3BlcnR5KG4sbyh0KSxyKX19cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MyYmKHI9XCJcIiksdGhpcy50d2VlbihcInN0eWxlLlwiK24sdSl9LFBsLnRleHQ9ZnVuY3Rpb24obil7cmV0dXJuIFpvKHRoaXMsXCJ0ZXh0XCIsbixWbyl9LFBsLnJlbW92ZT1mdW5jdGlvbigpe3ZhciBuPXRoaXMubmFtZXNwYWNlO3JldHVybiB0aGlzLmVhY2goXCJlbmQudHJhbnNpdGlvblwiLGZ1bmN0aW9uKCl7dmFyIHQ7dGhpc1tuXS5jb3VudDwyJiYodD10aGlzLnBhcmVudE5vZGUpJiZ0LnJlbW92ZUNoaWxkKHRoaXMpfSl9LFBsLmVhc2U9ZnVuY3Rpb24obil7dmFyIHQ9dGhpcy5pZCxlPXRoaXMubmFtZXNwYWNlO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDE/dGhpcy5ub2RlKClbZV1bdF0uZWFzZTooXCJmdW5jdGlvblwiIT10eXBlb2YgbiYmKG49dGEuZWFzZS5hcHBseSh0YSxhcmd1bWVudHMpKSxZKHRoaXMsZnVuY3Rpb24ocil7cltlXVt0XS5lYXNlPW59KSl9LFBsLmRlbGF5PWZ1bmN0aW9uKG4pe3ZhciB0PXRoaXMuaWQsZT10aGlzLm5hbWVzcGFjZTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwxP3RoaXMubm9kZSgpW2VdW3RdLmRlbGF5OlkodGhpcyxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuP2Z1bmN0aW9uKHIsdSxpKXtyW2VdW3RdLmRlbGF5PStuLmNhbGwocixyLl9fZGF0YV9fLHUsaSl9OihuPStuLGZ1bmN0aW9uKHIpe3JbZV1bdF0uZGVsYXk9bn0pKX0sUGwuZHVyYXRpb249ZnVuY3Rpb24obil7dmFyIHQ9dGhpcy5pZCxlPXRoaXMubmFtZXNwYWNlO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDE/dGhpcy5ub2RlKClbZV1bdF0uZHVyYXRpb246WSh0aGlzLFwiZnVuY3Rpb25cIj09dHlwZW9mIG4/ZnVuY3Rpb24ocix1LGkpe3JbZV1bdF0uZHVyYXRpb249TWF0aC5tYXgoMSxuLmNhbGwocixyLl9fZGF0YV9fLHUsaSkpfToobj1NYXRoLm1heCgxLG4pLGZ1bmN0aW9uKHIpe3JbZV1bdF0uZHVyYXRpb249bn0pKX0sUGwuZWFjaD1mdW5jdGlvbihuLHQpe3ZhciBlPXRoaXMuaWQscj10aGlzLm5hbWVzcGFjZTtpZihhcmd1bWVudHMubGVuZ3RoPDIpe3ZhciB1PVJsLGk9VGw7dHJ5e1RsPWUsWSh0aGlzLGZ1bmN0aW9uKHQsdSxpKXtSbD10W3JdW2VdLG4uY2FsbCh0LHQuX19kYXRhX18sdSxpKX0pfWZpbmFsbHl7Umw9dSxUbD1pfX1lbHNlIFkodGhpcyxmdW5jdGlvbih1KXt2YXIgaT11W3JdW2VdOyhpLmV2ZW50fHwoaS5ldmVudD10YS5kaXNwYXRjaChcInN0YXJ0XCIsXCJlbmRcIixcImludGVycnVwdFwiKSkpLm9uKG4sdCl9KTtyZXR1cm4gdGhpc30sUGwudHJhbnNpdGlvbj1mdW5jdGlvbigpe2Zvcih2YXIgbix0LGUscix1PXRoaXMuaWQsaT0rK1VsLG89dGhpcy5uYW1lc3BhY2UsYT1bXSxjPTAsbD10aGlzLmxlbmd0aDtsPmM7YysrKXthLnB1c2gobj1bXSk7Zm9yKHZhciB0PXRoaXNbY10scz0wLGY9dC5sZW5ndGg7Zj5zO3MrKykoZT10W3NdKSYmKHI9ZVtvXVt1XSwkbyhlLHMsbyxpLHt0aW1lOnIudGltZSxlYXNlOnIuZWFzZSxkZWxheTpyLmRlbGF5K3IuZHVyYXRpb24sZHVyYXRpb246ci5kdXJhdGlvbn0pKSxuLnB1c2goZSl9cmV0dXJuIFlvKGEsbyxpKX0sdGEuc3ZnLmF4aXM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4pe24uZWFjaChmdW5jdGlvbigpe3ZhciBuLGw9dGEuc2VsZWN0KHRoaXMpLHM9dGhpcy5fX2NoYXJ0X198fGUsZj10aGlzLl9fY2hhcnRfXz1lLmNvcHkoKSxoPW51bGw9PWM/Zi50aWNrcz9mLnRpY2tzLmFwcGx5KGYsYSk6Zi5kb21haW4oKTpjLGc9bnVsbD09dD9mLnRpY2tGb3JtYXQ/Zi50aWNrRm9ybWF0LmFwcGx5KGYsYSk6eTp0LHA9bC5zZWxlY3RBbGwoXCIudGlja1wiKS5kYXRhKGgsZiksdj1wLmVudGVyKCkuaW5zZXJ0KFwiZ1wiLFwiLmRvbWFpblwiKS5hdHRyKFwiY2xhc3NcIixcInRpY2tcIikuc3R5bGUoXCJvcGFjaXR5XCIsQ2EpLGQ9dGEudHJhbnNpdGlvbihwLmV4aXQoKSkuc3R5bGUoXCJvcGFjaXR5XCIsQ2EpLnJlbW92ZSgpLG09dGEudHJhbnNpdGlvbihwLm9yZGVyKCkpLnN0eWxlKFwib3BhY2l0eVwiLDEpLE09TWF0aC5tYXgodSwwKStvLHg9VWkoZiksYj1sLnNlbGVjdEFsbChcIi5kb21haW5cIikuZGF0YShbMF0pLF89KGIuZW50ZXIoKS5hcHBlbmQoXCJwYXRoXCIpLmF0dHIoXCJjbGFzc1wiLFwiZG9tYWluXCIpLHRhLnRyYW5zaXRpb24oYikpO3YuYXBwZW5kKFwibGluZVwiKSx2LmFwcGVuZChcInRleHRcIik7dmFyIHcsUyxrLEUsQT12LnNlbGVjdChcImxpbmVcIiksTj1tLnNlbGVjdChcImxpbmVcIiksQz1wLnNlbGVjdChcInRleHRcIikudGV4dChnKSx6PXYuc2VsZWN0KFwidGV4dFwiKSxxPW0uc2VsZWN0KFwidGV4dFwiKSxMPVwidG9wXCI9PT1yfHxcImxlZnRcIj09PXI/LTE6MTtpZihcImJvdHRvbVwiPT09cnx8XCJ0b3BcIj09PXI/KG49Qm8sdz1cInhcIixrPVwieVwiLFM9XCJ4MlwiLEU9XCJ5MlwiLEMuYXR0cihcImR5XCIsMD5MP1wiMGVtXCI6XCIuNzFlbVwiKS5zdHlsZShcInRleHQtYW5jaG9yXCIsXCJtaWRkbGVcIiksXy5hdHRyKFwiZFwiLFwiTVwiK3hbMF0rXCIsXCIrTCppK1wiVjBIXCIreFsxXStcIlZcIitMKmkpKToobj1Xbyx3PVwieVwiLGs9XCJ4XCIsUz1cInkyXCIsRT1cIngyXCIsQy5hdHRyKFwiZHlcIixcIi4zMmVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwwPkw/XCJlbmRcIjpcInN0YXJ0XCIpLF8uYXR0cihcImRcIixcIk1cIitMKmkrXCIsXCIreFswXStcIkgwVlwiK3hbMV0rXCJIXCIrTCppKSksQS5hdHRyKEUsTCp1KSx6LmF0dHIoayxMKk0pLE4uYXR0cihTLDApLmF0dHIoRSxMKnUpLHEuYXR0cih3LDApLmF0dHIoayxMKk0pLGYucmFuZ2VCYW5kKXt2YXIgVD1mLFI9VC5yYW5nZUJhbmQoKS8yO3M9Zj1mdW5jdGlvbihuKXtyZXR1cm4gVChuKStSfX1lbHNlIHMucmFuZ2VCYW5kP3M9ZjpkLmNhbGwobixmLHMpO3YuY2FsbChuLHMsZiksbS5jYWxsKG4sZixmKX0pfXZhciB0LGU9dGEuc2NhbGUubGluZWFyKCkscj1qbCx1PTYsaT02LG89MyxhPVsxMF0sYz1udWxsO3JldHVybiBuLnNjYWxlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPXQsbik6ZX0sbi5vcmllbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9dCBpbiBGbD90K1wiXCI6amwsbik6cn0sbi50aWNrcz1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPWFyZ3VtZW50cyxuKTphfSxuLnRpY2tWYWx1ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGM9dCxuKTpjfSxuLnRpY2tGb3JtYXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ZSxuKTp0fSxuLnRpY2tTaXplPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg7cmV0dXJuIGU/KHU9K3QsaT0rYXJndW1lbnRzW2UtMV0sbik6dX0sbi5pbm5lclRpY2tTaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PSt0LG4pOnV9LG4ub3V0ZXJUaWNrU2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT0rdCxuKTppfSxuLnRpY2tQYWRkaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvPSt0LG4pOm99LG4udGlja1N1YmRpdmlkZT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiZufSxufTt2YXIgamw9XCJib3R0b21cIixGbD17dG9wOjEscmlnaHQ6MSxib3R0b206MSxsZWZ0OjF9O3RhLnN2Zy5icnVzaD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCl7dC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dGEuc2VsZWN0KHRoaXMpLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcImFsbFwiKS5zdHlsZShcIi13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvclwiLFwicmdiYSgwLDAsMCwwKVwiKS5vbihcIm1vdXNlZG93bi5icnVzaFwiLGkpLm9uKFwidG91Y2hzdGFydC5icnVzaFwiLGkpLG89dC5zZWxlY3RBbGwoXCIuYmFja2dyb3VuZFwiKS5kYXRhKFswXSk7by5lbnRlcigpLmFwcGVuZChcInJlY3RcIikuYXR0cihcImNsYXNzXCIsXCJiYWNrZ3JvdW5kXCIpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLnN0eWxlKFwiY3Vyc29yXCIsXCJjcm9zc2hhaXJcIiksdC5zZWxlY3RBbGwoXCIuZXh0ZW50XCIpLmRhdGEoWzBdKS5lbnRlcigpLmFwcGVuZChcInJlY3RcIikuYXR0cihcImNsYXNzXCIsXCJleHRlbnRcIikuc3R5bGUoXCJjdXJzb3JcIixcIm1vdmVcIik7dmFyIGE9dC5zZWxlY3RBbGwoXCIucmVzaXplXCIpLmRhdGEodix5KTthLmV4aXQoKS5yZW1vdmUoKSxhLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbihuKXtyZXR1cm5cInJlc2l6ZSBcIitufSkuc3R5bGUoXCJjdXJzb3JcIixmdW5jdGlvbihuKXtyZXR1cm4gSGxbbl19KS5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJ4XCIsZnVuY3Rpb24obil7cmV0dXJuL1tld10kLy50ZXN0KG4pPy0zOm51bGx9KS5hdHRyKFwieVwiLGZ1bmN0aW9uKG4pe3JldHVybi9eW25zXS8udGVzdChuKT8tMzpudWxsfSkuYXR0cihcIndpZHRoXCIsNikuYXR0cihcImhlaWdodFwiLDYpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLGEuc3R5bGUoXCJkaXNwbGF5XCIsbi5lbXB0eSgpP1wibm9uZVwiOm51bGwpO3ZhciBjLGY9dGEudHJhbnNpdGlvbih0KSxoPXRhLnRyYW5zaXRpb24obyk7bCYmKGM9VWkobCksaC5hdHRyKFwieFwiLGNbMF0pLmF0dHIoXCJ3aWR0aFwiLGNbMV0tY1swXSkscihmKSkscyYmKGM9VWkocyksaC5hdHRyKFwieVwiLGNbMF0pLmF0dHIoXCJoZWlnaHRcIixjWzFdLWNbMF0pLHUoZikpLGUoZil9KX1mdW5jdGlvbiBlKG4pe24uc2VsZWN0QWxsKFwiLnJlc2l6ZVwiKS5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24obil7cmV0dXJuXCJ0cmFuc2xhdGUoXCIrZlsrL2UkLy50ZXN0KG4pXStcIixcIitoWysvXnMvLnRlc3QobildK1wiKVwifSl9ZnVuY3Rpb24gcihuKXtuLnNlbGVjdChcIi5leHRlbnRcIikuYXR0cihcInhcIixmWzBdKSxuLnNlbGVjdEFsbChcIi5leHRlbnQsLm4+cmVjdCwucz5yZWN0XCIpLmF0dHIoXCJ3aWR0aFwiLGZbMV0tZlswXSl9ZnVuY3Rpb24gdShuKXtuLnNlbGVjdChcIi5leHRlbnRcIikuYXR0cihcInlcIixoWzBdKSxuLnNlbGVjdEFsbChcIi5leHRlbnQsLmU+cmVjdCwudz5yZWN0XCIpLmF0dHIoXCJoZWlnaHRcIixoWzFdLWhbMF0pfWZ1bmN0aW9uIGkoKXtmdW5jdGlvbiBpKCl7MzI9PXRhLmV2ZW50LmtleUNvZGUmJihDfHwoTT1udWxsLHFbMF0tPWZbMV0scVsxXS09aFsxXSxDPTIpLFMoKSl9ZnVuY3Rpb24gdigpezMyPT10YS5ldmVudC5rZXlDb2RlJiYyPT1DJiYocVswXSs9ZlsxXSxxWzFdKz1oWzFdLEM9MCxTKCkpfWZ1bmN0aW9uIGQoKXt2YXIgbj10YS5tb3VzZShiKSx0PSExO3gmJihuWzBdKz14WzBdLG5bMV0rPXhbMV0pLEN8fCh0YS5ldmVudC5hbHRLZXk/KE18fChNPVsoZlswXStmWzFdKS8yLChoWzBdK2hbMV0pLzJdKSxxWzBdPWZbKyhuWzBdPE1bMF0pXSxxWzFdPWhbKyhuWzFdPE1bMV0pXSk6TT1udWxsKSxBJiZtKG4sbCwwKSYmKHIoayksdD0hMCksTiYmbShuLHMsMSkmJih1KGspLHQ9ITApLHQmJihlKGspLHcoe3R5cGU6XCJicnVzaFwiLG1vZGU6Qz9cIm1vdmVcIjpcInJlc2l6ZVwifSkpfWZ1bmN0aW9uIG0obix0LGUpe3ZhciByLHUsaT1VaSh0KSxjPWlbMF0sbD1pWzFdLHM9cVtlXSx2PWU/aDpmLGQ9dlsxXS12WzBdO3JldHVybiBDJiYoYy09cyxsLT1kK3MpLHI9KGU/cDpnKT9NYXRoLm1heChjLE1hdGgubWluKGwsbltlXSkpOm5bZV0sQz91PShyKz1zKStkOihNJiYocz1NYXRoLm1heChjLE1hdGgubWluKGwsMipNW2VdLXIpKSkscj5zPyh1PXIscj1zKTp1PXMpLHZbMF0hPXJ8fHZbMV0hPXU/KGU/YT1udWxsOm89bnVsbCx2WzBdPXIsdlsxXT11LCEwKTp2b2lkIDB9ZnVuY3Rpb24geSgpe2QoKSxrLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcImFsbFwiKS5zZWxlY3RBbGwoXCIucmVzaXplXCIpLnN0eWxlKFwiZGlzcGxheVwiLG4uZW1wdHkoKT9cIm5vbmVcIjpudWxsKSx0YS5zZWxlY3QoXCJib2R5XCIpLnN0eWxlKFwiY3Vyc29yXCIsbnVsbCksTC5vbihcIm1vdXNlbW92ZS5icnVzaFwiLG51bGwpLm9uKFwibW91c2V1cC5icnVzaFwiLG51bGwpLm9uKFwidG91Y2htb3ZlLmJydXNoXCIsbnVsbCkub24oXCJ0b3VjaGVuZC5icnVzaFwiLG51bGwpLm9uKFwia2V5ZG93bi5icnVzaFwiLG51bGwpLm9uKFwia2V5dXAuYnJ1c2hcIixudWxsKSx6KCksdyh7dHlwZTpcImJydXNoZW5kXCJ9KX12YXIgTSx4LGI9dGhpcyxfPXRhLnNlbGVjdCh0YS5ldmVudC50YXJnZXQpLHc9Yy5vZihiLGFyZ3VtZW50cyksaz10YS5zZWxlY3QoYiksRT1fLmRhdHVtKCksQT0hL14obnxzKSQvLnRlc3QoRSkmJmwsTj0hL14oZXx3KSQvLnRlc3QoRSkmJnMsQz1fLmNsYXNzZWQoXCJleHRlbnRcIiksej1XKGIpLHE9dGEubW91c2UoYiksTD10YS5zZWxlY3QodChiKSkub24oXCJrZXlkb3duLmJydXNoXCIsaSkub24oXCJrZXl1cC5icnVzaFwiLHYpO2lmKHRhLmV2ZW50LmNoYW5nZWRUb3VjaGVzP0wub24oXCJ0b3VjaG1vdmUuYnJ1c2hcIixkKS5vbihcInRvdWNoZW5kLmJydXNoXCIseSk6TC5vbihcIm1vdXNlbW92ZS5icnVzaFwiLGQpLm9uKFwibW91c2V1cC5icnVzaFwiLHkpLGsuaW50ZXJydXB0KCkuc2VsZWN0QWxsKFwiKlwiKS5pbnRlcnJ1cHQoKSxDKXFbMF09ZlswXS1xWzBdLHFbMV09aFswXS1xWzFdO2Vsc2UgaWYoRSl7dmFyIFQ9Ky93JC8udGVzdChFKSxSPSsvXm4vLnRlc3QoRSk7eD1bZlsxLVRdLXFbMF0saFsxLVJdLXFbMV1dLHFbMF09ZltUXSxxWzFdPWhbUl19ZWxzZSB0YS5ldmVudC5hbHRLZXkmJihNPXEuc2xpY2UoKSk7ay5zdHlsZShcInBvaW50ZXItZXZlbnRzXCIsXCJub25lXCIpLnNlbGVjdEFsbChcIi5yZXNpemVcIikuc3R5bGUoXCJkaXNwbGF5XCIsbnVsbCksdGEuc2VsZWN0KFwiYm9keVwiKS5zdHlsZShcImN1cnNvclwiLF8uc3R5bGUoXCJjdXJzb3JcIikpLHcoe3R5cGU6XCJicnVzaHN0YXJ0XCJ9KSxkKCl9dmFyIG8sYSxjPUUobixcImJydXNoc3RhcnRcIixcImJydXNoXCIsXCJicnVzaGVuZFwiKSxsPW51bGwscz1udWxsLGY9WzAsMF0saD1bMCwwXSxnPSEwLHA9ITAsdj1PbFswXTtyZXR1cm4gbi5ldmVudD1mdW5jdGlvbihuKXtuLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1jLm9mKHRoaXMsYXJndW1lbnRzKSx0PXt4OmYseTpoLGk6byxqOmF9LGU9dGhpcy5fX2NoYXJ0X198fHQ7dGhpcy5fX2NoYXJ0X189dCxUbD90YS5zZWxlY3QodGhpcykudHJhbnNpdGlvbigpLmVhY2goXCJzdGFydC5icnVzaFwiLGZ1bmN0aW9uKCl7bz1lLmksYT1lLmosZj1lLngsaD1lLnksbih7dHlwZTpcImJydXNoc3RhcnRcIn0pfSkudHdlZW4oXCJicnVzaDpicnVzaFwiLGZ1bmN0aW9uKCl7dmFyIGU9eXUoZix0LngpLHI9eXUoaCx0LnkpO3JldHVybiBvPWE9bnVsbCxmdW5jdGlvbih1KXtmPXQueD1lKHUpLGg9dC55PXIodSksbih7dHlwZTpcImJydXNoXCIsbW9kZTpcInJlc2l6ZVwifSl9fSkuZWFjaChcImVuZC5icnVzaFwiLGZ1bmN0aW9uKCl7bz10LmksYT10Lmosbih7dHlwZTpcImJydXNoXCIsbW9kZTpcInJlc2l6ZVwifSksbih7dHlwZTpcImJydXNoZW5kXCJ9KX0pOihuKHt0eXBlOlwiYnJ1c2hzdGFydFwifSksbih7dHlwZTpcImJydXNoXCIsbW9kZTpcInJlc2l6ZVwifSksbih7dHlwZTpcImJydXNoZW5kXCJ9KSl9KX0sbi54PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhsPXQsdj1PbFshbDw8MXwhc10sbik6bH0sbi55PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhzPXQsdj1PbFshbDw8MXwhc10sbik6c30sbi5jbGFtcD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obCYmcz8oZz0hIXRbMF0scD0hIXRbMV0pOmw/Zz0hIXQ6cyYmKHA9ISF0KSxuKTpsJiZzP1tnLHBdOmw/ZzpzP3A6bnVsbH0sbi5leHRlbnQ9ZnVuY3Rpb24odCl7dmFyIGUscix1LGksYztyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obCYmKGU9dFswXSxyPXRbMV0scyYmKGU9ZVswXSxyPXJbMF0pLG89W2Uscl0sbC5pbnZlcnQmJihlPWwoZSkscj1sKHIpKSxlPnImJihjPWUsZT1yLHI9YyksKGUhPWZbMF18fHIhPWZbMV0pJiYoZj1bZSxyXSkpLHMmJih1PXRbMF0saT10WzFdLGwmJih1PXVbMV0saT1pWzFdKSxhPVt1LGldLHMuaW52ZXJ0JiYodT1zKHUpLGk9cyhpKSksdT5pJiYoYz11LHU9aSxpPWMpLCh1IT1oWzBdfHxpIT1oWzFdKSYmKGg9W3UsaV0pKSxuKToobCYmKG8/KGU9b1swXSxyPW9bMV0pOihlPWZbMF0scj1mWzFdLGwuaW52ZXJ0JiYoZT1sLmludmVydChlKSxyPWwuaW52ZXJ0KHIpKSxlPnImJihjPWUsZT1yLHI9YykpKSxzJiYoYT8odT1hWzBdLGk9YVsxXSk6KHU9aFswXSxpPWhbMV0scy5pbnZlcnQmJih1PXMuaW52ZXJ0KHUpLGk9cy5pbnZlcnQoaSkpLHU+aSYmKGM9dSx1PWksaT1jKSkpLGwmJnM/W1tlLHVdLFtyLGldXTpsP1tlLHJdOnMmJlt1LGldKX0sbi5jbGVhcj1mdW5jdGlvbigpe3JldHVybiBuLmVtcHR5KCl8fChmPVswLDBdLGg9WzAsMF0sbz1hPW51bGwpLG59LG4uZW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4hIWwmJmZbMF09PWZbMV18fCEhcyYmaFswXT09aFsxXX0sdGEucmViaW5kKG4sYyxcIm9uXCIpfTt2YXIgSGw9e246XCJucy1yZXNpemVcIixlOlwiZXctcmVzaXplXCIsczpcIm5zLXJlc2l6ZVwiLHc6XCJldy1yZXNpemVcIixudzpcIm53c2UtcmVzaXplXCIsbmU6XCJuZXN3LXJlc2l6ZVwiLHNlOlwibndzZS1yZXNpemVcIixzdzpcIm5lc3ctcmVzaXplXCJ9LE9sPVtbXCJuXCIsXCJlXCIsXCJzXCIsXCJ3XCIsXCJud1wiLFwibmVcIixcInNlXCIsXCJzd1wiXSxbXCJlXCIsXCJ3XCJdLFtcIm5cIixcInNcIl0sW11dLElsPWFjLmZvcm1hdD1nYy50aW1lRm9ybWF0LFlsPUlsLnV0YyxabD1ZbChcIiVZLSVtLSVkVCVIOiVNOiVTLiVMWlwiKTtJbC5pc289RGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcmJituZXcgRGF0ZShcIjIwMDAtMDEtMDFUMDA6MDA6MDAuMDAwWlwiKT9KbzpabCxKby5wYXJzZT1mdW5jdGlvbihuKXt2YXIgdD1uZXcgRGF0ZShuKTtyZXR1cm4gaXNOYU4odCk/bnVsbDp0fSxKby50b1N0cmluZz1abC50b1N0cmluZyxhYy5zZWNvbmQ9RnQoZnVuY3Rpb24obil7cmV0dXJuIG5ldyBjYygxZTMqTWF0aC5mbG9vcihuLzFlMykpfSxmdW5jdGlvbihuLHQpe24uc2V0VGltZShuLmdldFRpbWUoKSsxZTMqTWF0aC5mbG9vcih0KSl9LGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldFNlY29uZHMoKX0pLGFjLnNlY29uZHM9YWMuc2Vjb25kLnJhbmdlLGFjLnNlY29uZHMudXRjPWFjLnNlY29uZC51dGMucmFuZ2UsYWMubWludXRlPUZ0KGZ1bmN0aW9uKG4pe3JldHVybiBuZXcgY2MoNmU0Kk1hdGguZmxvb3Iobi82ZTQpKX0sZnVuY3Rpb24obix0KXtuLnNldFRpbWUobi5nZXRUaW1lKCkrNmU0Kk1hdGguZmxvb3IodCkpfSxmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRNaW51dGVzKCl9KSxhYy5taW51dGVzPWFjLm1pbnV0ZS5yYW5nZSxhYy5taW51dGVzLnV0Yz1hYy5taW51dGUudXRjLnJhbmdlLGFjLmhvdXI9RnQoZnVuY3Rpb24obil7dmFyIHQ9bi5nZXRUaW1lem9uZU9mZnNldCgpLzYwO3JldHVybiBuZXcgY2MoMzZlNSooTWF0aC5mbG9vcihuLzM2ZTUtdCkrdCkpfSxmdW5jdGlvbihuLHQpe24uc2V0VGltZShuLmdldFRpbWUoKSszNmU1Kk1hdGguZmxvb3IodCkpfSxmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRIb3VycygpfSksYWMuaG91cnM9YWMuaG91ci5yYW5nZSxhYy5ob3Vycy51dGM9YWMuaG91ci51dGMucmFuZ2UsYWMubW9udGg9RnQoZnVuY3Rpb24obil7cmV0dXJuIG49YWMuZGF5KG4pLG4uc2V0RGF0ZSgxKSxufSxmdW5jdGlvbihuLHQpe24uc2V0TW9udGgobi5nZXRNb250aCgpK3QpfSxmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRNb250aCgpfSksYWMubW9udGhzPWFjLm1vbnRoLnJhbmdlLGFjLm1vbnRocy51dGM9YWMubW9udGgudXRjLnJhbmdlO3ZhciBWbD1bMWUzLDVlMywxNWUzLDNlNCw2ZTQsM2U1LDllNSwxOGU1LDM2ZTUsMTA4ZTUsMjE2ZTUsNDMyZTUsODY0ZTUsMTcyOGU1LDYwNDhlNSwyNTkyZTYsNzc3NmU2LDMxNTM2ZTZdLFhsPVtbYWMuc2Vjb25kLDFdLFthYy5zZWNvbmQsNV0sW2FjLnNlY29uZCwxNV0sW2FjLnNlY29uZCwzMF0sW2FjLm1pbnV0ZSwxXSxbYWMubWludXRlLDVdLFthYy5taW51dGUsMTVdLFthYy5taW51dGUsMzBdLFthYy5ob3VyLDFdLFthYy5ob3VyLDNdLFthYy5ob3VyLDZdLFthYy5ob3VyLDEyXSxbYWMuZGF5LDFdLFthYy5kYXksMl0sW2FjLndlZWssMV0sW2FjLm1vbnRoLDFdLFthYy5tb250aCwzXSxbYWMueWVhciwxXV0sJGw9SWwubXVsdGkoW1tcIi4lTFwiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldE1pbGxpc2Vjb25kcygpfV0sW1wiOiVTXCIsZnVuY3Rpb24obil7cmV0dXJuIG4uZ2V0U2Vjb25kcygpfV0sW1wiJUk6JU1cIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRNaW51dGVzKCl9XSxbXCIlSSAlcFwiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldEhvdXJzKCl9XSxbXCIlYSAlZFwiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldERheSgpJiYxIT1uLmdldERhdGUoKX1dLFtcIiViICVkXCIsZnVuY3Rpb24obil7cmV0dXJuIDEhPW4uZ2V0RGF0ZSgpfV0sW1wiJUJcIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRNb250aCgpfV0sW1wiJVlcIixOZV1dKSxCbD17cmFuZ2U6ZnVuY3Rpb24obix0LGUpe3JldHVybiB0YS5yYW5nZShNYXRoLmNlaWwobi9lKSplLCt0LGUpLm1hcChLbyl9LGZsb29yOnksY2VpbDp5fTtYbC55ZWFyPWFjLnllYXIsYWMuc2NhbGU9ZnVuY3Rpb24oKXtyZXR1cm4gR28odGEuc2NhbGUubGluZWFyKCksWGwsJGwpfTt2YXIgV2w9WGwubWFwKGZ1bmN0aW9uKG4pe3JldHVybltuWzBdLnV0YyxuWzFdXX0pLEpsPVlsLm11bHRpKFtbXCIuJUxcIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRVVENNaWxsaXNlY29uZHMoKX1dLFtcIjolU1wiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldFVUQ1NlY29uZHMoKX1dLFtcIiVJOiVNXCIsZnVuY3Rpb24obil7cmV0dXJuIG4uZ2V0VVRDTWludXRlcygpfV0sW1wiJUkgJXBcIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRVVENIb3VycygpfV0sW1wiJWEgJWRcIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRVVENEYXkoKSYmMSE9bi5nZXRVVENEYXRlKCl9XSxbXCIlYiAlZFwiLGZ1bmN0aW9uKG4pe3JldHVybiAxIT1uLmdldFVUQ0RhdGUoKX1dLFtcIiVCXCIsZnVuY3Rpb24obil7cmV0dXJuIG4uZ2V0VVRDTW9udGgoKX1dLFtcIiVZXCIsTmVdXSk7V2wueWVhcj1hYy55ZWFyLnV0YyxhYy5zY2FsZS51dGM9ZnVuY3Rpb24oKXtyZXR1cm4gR28odGEuc2NhbGUubGluZWFyKCksV2wsSmwpfSx0YS50ZXh0PUF0KGZ1bmN0aW9uKG4pe3JldHVybiBuLnJlc3BvbnNlVGV4dH0pLHRhLmpzb249ZnVuY3Rpb24obix0KXtyZXR1cm4gTnQobixcImFwcGxpY2F0aW9uL2pzb25cIixRbyx0KX0sdGEuaHRtbD1mdW5jdGlvbihuLHQpe3JldHVybiBOdChuLFwidGV4dC9odG1sXCIsbmEsdCl9LHRhLnhtbD1BdChmdW5jdGlvbihuKXtyZXR1cm4gbi5yZXNwb25zZVhNTH0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodGEpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzJiYobW9kdWxlLmV4cG9ydHM9dGEpLHRoaXMuZDM9dGF9KCk7IiwiLyohIGpRdWVyeSB2Mi4xLjAgfCAoYykgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZSAqL1xuIWZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpO3JldHVybiBiKGEpfTpiKGEpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZD1jLnNsaWNlLGU9Yy5jb25jYXQsZj1jLnB1c2gsZz1jLmluZGV4T2YsaD17fSxpPWgudG9TdHJpbmcsaj1oLmhhc093blByb3BlcnR5LGs9XCJcIi50cmltLGw9e30sbT1hLmRvY3VtZW50LG49XCIyLjEuMFwiLG89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IG8uZm4uaW5pdChhLGIpfSxwPS9eLW1zLS8scT0vLShbXFxkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O28uZm49by5wcm90b3R5cGU9e2pxdWVyeTpuLGNvbnN0cnVjdG9yOm8sc2VsZWN0b3I6XCJcIixsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGQuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hPzA+YT90aGlzW2ErdGhpcy5sZW5ndGhdOnRoaXNbYV06ZC5jYWxsKHRoaXMpfSxwdXNoU3RhY2s6ZnVuY3Rpb24oYSl7dmFyIGI9by5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksYSk7cmV0dXJuIGIucHJldk9iamVjdD10aGlzLGIuY29udGV4dD10aGlzLmNvbnRleHQsYn0sZWFjaDpmdW5jdGlvbihhLGIpe3JldHVybiBvLmVhY2godGhpcyxhLGIpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZC5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6Zixzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LG8uZXh0ZW5kPW8uZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSxcIm9iamVjdFwiPT10eXBlb2YgZ3x8by5pc0Z1bmN0aW9uKGcpfHwoZz17fSksaD09PWkmJihnPXRoaXMsaC0tKTtpPmg7aCsrKWlmKG51bGwhPShhPWFyZ3VtZW50c1toXSkpZm9yKGIgaW4gYSljPWdbYl0sZD1hW2JdLGchPT1kJiYoaiYmZCYmKG8uaXNQbGFpbk9iamVjdChkKXx8KGU9by5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZvLmlzQXJyYXkoYyk/YzpbXSk6Zj1jJiZvLmlzUGxhaW5PYmplY3QoYyk/Yzp7fSxnW2JdPW8uZXh0ZW5kKGosZixkKSk6dm9pZCAwIT09ZCYmKGdbYl09ZCkpO3JldHVybiBnfSxvLmV4dGVuZCh7ZXhwYW5kbzpcImpRdWVyeVwiKyhuK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xcRC9nLFwiXCIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKGEpfSxub29wOmZ1bmN0aW9uKCl7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVyblwiZnVuY3Rpb25cIj09PW8udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5LGlzV2luZG93OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZhPT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4gYS1wYXJzZUZsb2F0KGEpPj0wfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe2lmKFwib2JqZWN0XCIhPT1vLnR5cGUoYSl8fGEubm9kZVR5cGV8fG8uaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFqLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpKXJldHVybiExfWNhdGNoKGIpe3JldHVybiExfXJldHVybiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2ZvcihiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2hbaS5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXt2YXIgYixjPWV2YWw7YT1vLnRyaW0oYSksYSYmKDE9PT1hLmluZGV4T2YoXCJ1c2Ugc3RyaWN0XCIpPyhiPW0uY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxiLnRleHQ9YSxtLmhlYWQuYXBwZW5kQ2hpbGQoYikucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk6YyhhKSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHAsXCJtcy1cIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9MCxmPWEubGVuZ3RoLGc9cyhhKTtpZihjKXtpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmsuY2FsbChhKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/by5tZXJnZShjLFwic3RyaW5nXCI9PXR5cGVvZiBhP1thXTphKTpmLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6Zy5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2M+ZDtkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztnPmY7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGY9MCxnPWEubGVuZ3RoLGg9cyhhKSxpPVtdO2lmKGgpZm9yKDtnPmY7ZisrKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO2Vsc2UgZm9yKGYgaW4gYSlkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtyZXR1cm4gZS5hcHBseShbXSxpKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYz1hW2JdLGI9YSxhPWMpLG8uaXNGdW5jdGlvbihhKT8oZT1kLmNhbGwoYXJndW1lbnRzLDIpLGY9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShifHx0aGlzLGUuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGYuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxvLmd1aWQrKyxmKTp2b2lkIDB9LG5vdzpEYXRlLm5vdyxzdXBwb3J0Omx9KSxvLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7aFtcIltvYmplY3QgXCIrYitcIl1cIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj1hLmxlbmd0aCxjPW8udHlwZShhKTtyZXR1cm5cImZ1bmN0aW9uXCI9PT1jfHxvLmlzV2luZG93KGEpPyExOjE9PT1hLm5vZGVUeXBlJiZiPyEwOlwiYXJyYXlcIj09PWN8fDA9PT1ifHxcIm51bWJlclwiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgdD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHM9XCJzaXp6bGVcIistbmV3IERhdGUsdD1hLmRvY3VtZW50LHU9MCx2PTAsdz1lYigpLHg9ZWIoKSx5PWViKCksej1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGo9ITApLDB9LEE9XCJ1bmRlZmluZWRcIixCPTE8PDMxLEM9e30uaGFzT3duUHJvcGVydHksRD1bXSxFPUQucG9wLEY9RC5wdXNoLEc9RC5wdXNoLEg9RC5zbGljZSxJPUQuaW5kZXhPZnx8ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmxlbmd0aDtjPmI7YisrKWlmKHRoaXNbYl09PT1hKXJldHVybiBiO3JldHVybi0xfSxKPVwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixLPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixMPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsTT1MLnJlcGxhY2UoXCJ3XCIsXCJ3I1wiKSxOPVwiXFxcXFtcIitLK1wiKihcIitMK1wiKVwiK0srXCIqKD86KFsqXiR8IX5dPz0pXCIrSytcIiooPzooWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfChcIitNK1wiKXwpfClcIitLK1wiKlxcXFxdXCIsTz1cIjooXCIrTCtcIikoPzpcXFxcKCgoWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIitOLnJlcGxhY2UoMyw4KStcIikqKXwuKilcXFxcKXwpXCIsUD1uZXcgUmVnRXhwKFwiXlwiK0srXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiK0srXCIrJFwiLFwiZ1wiKSxRPW5ldyBSZWdFeHAoXCJeXCIrSytcIiosXCIrSytcIipcIiksUj1uZXcgUmVnRXhwKFwiXlwiK0srXCIqKFs+K35dfFwiK0srXCIpXCIrSytcIipcIiksUz1uZXcgUmVnRXhwKFwiPVwiK0srXCIqKFteXFxcXF0nXFxcIl0qPylcIitLK1wiKlxcXFxdXCIsXCJnXCIpLFQ9bmV3IFJlZ0V4cChPKSxVPW5ldyBSZWdFeHAoXCJeXCIrTStcIiRcIiksVj17SUQ6bmV3IFJlZ0V4cChcIl4jKFwiK0wrXCIpXCIpLENMQVNTOm5ldyBSZWdFeHAoXCJeXFxcXC4oXCIrTCtcIilcIiksVEFHOm5ldyBSZWdFeHAoXCJeKFwiK0wucmVwbGFjZShcIndcIixcIncqXCIpK1wiKVwiKSxBVFRSOm5ldyBSZWdFeHAoXCJeXCIrTiksUFNFVURPOm5ldyBSZWdFeHAoXCJeXCIrTyksQ0hJTEQ6bmV3IFJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIrSytcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiK0srXCIqKD86KFsrLV18KVwiK0srXCIqKFxcXFxkKyl8KSlcIitLK1wiKlxcXFwpfClcIixcImlcIiksYm9vbDpuZXcgUmVnRXhwKFwiXig/OlwiK0orXCIpJFwiLFwiaVwiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cChcIl5cIitLK1wiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIitLK1wiKigoPzotXFxcXGQpP1xcXFxkKilcIitLK1wiKlxcXFwpfCkoPz1bXi1dfCQpXCIsXCJpXCIpfSxXPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWD0vXmhcXGQkL2ksWT0vXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLFo9L14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sJD0vWyt+XS8sXz0vJ3xcXFxcL2csYWI9bmV3IFJlZ0V4cChcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiK0srXCI/fChcIitLK1wiKXwuKVwiLFwiaWdcIiksYmI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVwiMHhcIitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX07dHJ5e0cuYXBwbHkoRD1ILmNhbGwodC5jaGlsZE5vZGVzKSx0LmNoaWxkTm9kZXMpLERbdC5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goY2Ipe0c9e2FwcGx5OkQubGVuZ3RoP2Z1bmN0aW9uKGEsYil7Ri5hcHBseShhLEguY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGRiKGEsYixkLGUpe3ZhciBmLGcsaCxpLGosbSxwLHEsdSx2O2lmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp0KSE9PWwmJmsoYiksYj1ifHxsLGQ9ZHx8W10sIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBkO2lmKDEhPT0oaT1iLm5vZGVUeXBlKSYmOSE9PWkpcmV0dXJuW107aWYobiYmIWUpe2lmKGY9Wi5leGVjKGEpKWlmKGg9ZlsxXSl7aWYoOT09PWkpe2lmKGc9Yi5nZXRFbGVtZW50QnlJZChoKSwhZ3x8IWcucGFyZW50Tm9kZSlyZXR1cm4gZDtpZihnLmlkPT09aClyZXR1cm4gZC5wdXNoKGcpLGR9ZWxzZSBpZihiLm93bmVyRG9jdW1lbnQmJihnPWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChoKSkmJnIoYixnKSYmZy5pZD09PWgpcmV0dXJuIGQucHVzaChnKSxkfWVsc2V7aWYoZlsyXSlyZXR1cm4gRy5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGg9ZlszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBHLmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGgpKSxkfWlmKGMucXNhJiYoIW98fCFvLnRlc3QoYSkpKXtpZihxPXA9cyx1PWIsdj05PT09aSYmYSwxPT09aSYmXCJvYmplY3RcIiE9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7bT1vYihhKSwocD1iLmdldEF0dHJpYnV0ZShcImlkXCIpKT9xPXAucmVwbGFjZShfLFwiXFxcXCQmXCIpOmIuc2V0QXR0cmlidXRlKFwiaWRcIixxKSxxPVwiW2lkPSdcIitxK1wiJ10gXCIsaj1tLmxlbmd0aDt3aGlsZShqLS0pbVtqXT1xK3BiKG1bal0pO3U9JC50ZXN0KGEpJiZtYihiLnBhcmVudE5vZGUpfHxiLHY9bS5qb2luKFwiLFwiKX1pZih2KXRyeXtyZXR1cm4gRy5hcHBseShkLHUucXVlcnlTZWxlY3RvckFsbCh2KSksZH1jYXRjaCh3KXt9ZmluYWxseXtwfHxiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIHhiKGEucmVwbGFjZShQLFwiJDFcIiksYixkLGUpfWZ1bmN0aW9uIGViKCl7dmFyIGE9W107ZnVuY3Rpb24gYihjLGUpe3JldHVybiBhLnB1c2goYytcIiBcIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrXCIgXCJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gZmIoYSl7cmV0dXJuIGFbc109ITAsYX1mdW5jdGlvbiBnYihhKXt2YXIgYj1sLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24gaGIoYSxiKXt2YXIgYz1hLnNwbGl0KFwifFwiKSxlPWEubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBpYihhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QiktKH5hLnNvdXJjZUluZGV4fHxCKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gamIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1jJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBrYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihcImlucHV0XCI9PT1jfHxcImJ1dHRvblwiPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIGxiKGEpe3JldHVybiBmYihmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixmYihmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG1iKGEpe3JldHVybiBhJiZ0eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PUEmJmF9Yz1kYi5zdXBwb3J0PXt9LGY9ZGIuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiP1wiSFRNTFwiIT09Yi5ub2RlTmFtZTohMX0saz1kYi5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlPWE/YS5vd25lckRvY3VtZW50fHxhOnQsZz1lLmRlZmF1bHRWaWV3O3JldHVybiBlIT09bCYmOT09PWUubm9kZVR5cGUmJmUuZG9jdW1lbnRFbGVtZW50PyhsPWUsbT1lLmRvY3VtZW50RWxlbWVudCxuPSFmKGUpLGcmJmchPT1nLnRvcCYmKGcuYWRkRXZlbnRMaXN0ZW5lcj9nLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixmdW5jdGlvbigpe2soKX0sITEpOmcuYXR0YWNoRXZlbnQmJmcuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGZ1bmN0aW9uKCl7aygpfSkpLGMuYXR0cmlidXRlcz1nYihmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9XCJpXCIsIWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1nYihmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlLmNyZWF0ZUNvbW1lbnQoXCJcIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9WS50ZXN0KGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkmJmdiKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+XCIsYS5maXJzdENoaWxkLmNsYXNzTmFtZT1cImlcIiwyPT09YS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiaVwiKS5sZW5ndGh9KSxjLmdldEJ5SWQ9Z2IoZnVuY3Rpb24oYSl7cmV0dXJuIG0uYXBwZW5kQ2hpbGQoYSkuaWQ9cywhZS5nZXRFbGVtZW50c0J5TmFtZXx8IWUuZ2V0RWxlbWVudHNCeU5hbWUocykubGVuZ3RofSksYy5nZXRCeUlkPyhkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYi5nZXRFbGVtZW50QnlJZCE9PUEmJm4pe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGMmJmMucGFyZW50Tm9kZT9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYWIsYmIpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGFiLGJiKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9dHlwZW9mIGEuZ2V0QXR0cmlidXRlTm9kZSE9PUEmJmEuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiBjJiZjLnZhbHVlPT09Yn19KSxkLmZpbmQuVEFHPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdHlwZW9mIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1BP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6dm9pZCAwfTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT0wLGY9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtpZihcIipcIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuIHR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT1BJiZuP2IuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKTp2b2lkIDB9LHA9W10sbz1bXSwoYy5xc2E9WS50ZXN0KGUucXVlcnlTZWxlY3RvckFsbCkpJiYoZ2IoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9XCI8c2VsZWN0IHQ9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbdF49JyddXCIpLmxlbmd0aCYmby5wdXNoKFwiWypeJF09XCIrSytcIiooPzonJ3xcXFwiXFxcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGh8fG8ucHVzaChcIlxcXFxbXCIrSytcIiooPzp2YWx1ZXxcIitKK1wiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGh8fG8ucHVzaChcIjpjaGVja2VkXCIpfSksZ2IoZnVuY3Rpb24oYSl7dmFyIGI9ZS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJEXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCYmby5wdXNoKFwibmFtZVwiK0srXCIqWypeJHwhfl0/PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGh8fG8ucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSxvLnB1c2goXCIsLio6XCIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj1ZLnRlc3QocT1tLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8bS5tb3pNYXRjaGVzU2VsZWN0b3J8fG0ub01hdGNoZXNTZWxlY3Rvcnx8bS5tc01hdGNoZXNTZWxlY3RvcikpJiZnYihmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXEuY2FsbChhLFwiZGl2XCIpLHEuY2FsbChhLFwiW3MhPScnXTp4XCIpLHAucHVzaChcIiE9XCIsTyl9KSxvPW8ubGVuZ3RoJiZuZXcgUmVnRXhwKG8uam9pbihcInxcIikpLHA9cC5sZW5ndGgmJm5ldyBSZWdFeHAocC5qb2luKFwifFwiKSksYj1ZLnRlc3QobS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikscj1ifHxZLnRlc3QobS5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSx6PWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gaj0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1lfHxhLm93bmVyRG9jdW1lbnQ9PT10JiZyKHQsYSk/LTE6Yj09PWV8fGIub3duZXJEb2N1bWVudD09PXQmJnIodCxiKT8xOmk/SS5jYWxsKGksYSktSS5jYWxsKGksYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGo9ITAsMDt2YXIgYyxkPTAsZj1hLnBhcmVudE5vZGUsZz1iLnBhcmVudE5vZGUsaD1bYV0saz1bYl07aWYoIWZ8fCFnKXJldHVybiBhPT09ZT8tMTpiPT09ZT8xOmY/LTE6Zz8xOmk/SS5jYWxsKGksYSktSS5jYWxsKGksYik6MDtpZihmPT09ZylyZXR1cm4gaWIoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSlrLnVuc2hpZnQoYyk7d2hpbGUoaFtkXT09PWtbZF0pZCsrO3JldHVybiBkP2liKGhbZF0sa1tkXSk6aFtkXT09PXQ/LTE6a1tkXT09PXQ/MTowfSxlKTpsfSxkYi5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGRiKGEsbnVsbCxudWxsLGIpfSxkYi5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PWwmJmsoYSksYj1iLnJlcGxhY2UoUyxcIj0nJDEnXVwiKSwhKCFjLm1hdGNoZXNTZWxlY3Rvcnx8IW58fHAmJnAudGVzdChiKXx8byYmby50ZXN0KGIpKSl0cnl7dmFyIGQ9cS5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZGIoYixsLG51bGwsW2FdKS5sZW5ndGg+MH0sZGIuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PWwmJmsoYSkscihhLGIpfSxkYi5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1sJiZrKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmQy5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFuKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFuP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZGIuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIrYSl9LGRiLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGo9IWMuZGV0ZWN0RHVwbGljYXRlcyxpPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KHopLGope3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBpPW51bGwsYX0sZT1kYi5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9XCJcIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWRiLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmZiLG1hdGNoOlYsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOntcIj5cIjp7ZGlyOlwicGFyZW50Tm9kZVwiLGZpcnN0OiEwfSxcIiBcIjp7ZGlyOlwicGFyZW50Tm9kZVwifSxcIitcIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCIsZmlyc3Q6ITB9LFwiflwiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoYWIsYmIpLGFbM109KGFbNF18fGFbNV18fFwiXCIpLnJlcGxhY2UoYWIsYmIpLFwifj1cIj09PWFbMl0mJihhWzNdPVwiIFwiK2FbM10rXCIgXCIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLFwibnRoXCI9PT1hWzFdLnNsaWNlKDAsMyk/KGFbM118fGRiLmVycm9yKGFbMF0pLGFbNF09KyhhWzRdP2FbNV0rKGFbNl18fDEpOjIqKFwiZXZlblwiPT09YVszXXx8XCJvZGRcIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHxcIm9kZFwiPT09YVszXSkpOmFbM10mJmRiLmVycm9yKGFbMF0pLGF9LFBTRVVETzpmdW5jdGlvbihhKXt2YXIgYixjPSFhWzVdJiZhWzJdO3JldHVybiBWLkNISUxELnRlc3QoYVswXSk/bnVsbDooYVszXSYmdm9pZCAwIT09YVs0XT9hWzJdPWFbNF06YyYmVC50ZXN0KGMpJiYoYj1vYihjLCEwKSkmJihiPWMuaW5kZXhPZihcIilcIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShhYixiYikudG9Mb3dlckNhc2UoKTtyZXR1cm5cIipcIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj13W2ErXCIgXCJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKFwiKF58XCIrSytcIilcIithK1wiKFwiK0srXCJ8JClcIikpJiZ3KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdChcInN0cmluZ1wiPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHx0eXBlb2YgYS5nZXRBdHRyaWJ1dGUhPT1BJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZGIuYXR0cihkLGEpO3JldHVybiBudWxsPT1lP1wiIT1cIj09PWI6Yj8oZSs9XCJcIixcIj1cIj09PWI/ZT09PWM6XCIhPVwiPT09Yj9lIT09YzpcIl49XCI9PT1iP2MmJjA9PT1lLmluZGV4T2YoYyk6XCIqPVwiPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6XCIkPVwiPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOlwifj1cIj09PWI/KFwiIFwiK2UrXCIgXCIpLmluZGV4T2YoYyk+LTE6XCJ8PVwiPT09Yj9lPT09Y3x8ZS5zbGljZSgwLGMubGVuZ3RoKzEpPT09YytcIi1cIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPVwibnRoXCIhPT1hLnNsaWNlKDAsMyksZz1cImxhc3RcIiE9PWEuc2xpY2UoLTQpLGg9XCJvZi10eXBlXCI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz9cIm5leHRTaWJsaW5nXCI6XCJwcmV2aW91c1NpYmxpbmdcIixxPWIucGFyZW50Tm9kZSxyPWgmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSx0PSFpJiYhaDtpZihxKXtpZihmKXt3aGlsZShwKXtsPWI7d2hpbGUobD1sW3BdKWlmKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9XCJvbmx5XCI9PT1hJiYhbyYmXCJuZXh0U2libGluZ1wifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZ0KXtrPXFbc118fChxW3NdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXUmJmpbMV0sbT1qWzBdPT09dSYmalsyXSxsPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigxPT09bC5ub2RlVHlwZSYmKyttJiZsPT09Yil7a1thXT1bdSxuLG1dO2JyZWFrfX1lbHNlIGlmKHQmJihqPShiW3NdfHwoYltzXT17fSkpW2FdKSYmalswXT09PXUpbT1qWzFdO2Vsc2Ugd2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSkmJisrbSYmKHQmJigobFtzXXx8KGxbc109e30pKVthXT1bdSxtXSksbD09PWIpKWJyZWFrO3JldHVybiBtLT1lLG09PT1kfHxtJWQ9PT0wJiZtL2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxkYi5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrYSk7cmV0dXJuIGVbc10/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsXCJcIixiXSxkLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9mYihmdW5jdGlvbihhLGMpe3ZhciBkLGY9ZShhLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWQ9SS5jYWxsKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmZiKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1nKGEucmVwbGFjZShQLFwiJDFcIikpO3JldHVybiBkW3NdP2ZiKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLCFjLnBvcCgpfX0pLGhhczpmYihmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGRiKGEsYikubGVuZ3RoPjB9fSksY29udGFpbnM6ZmIoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmZiKGZ1bmN0aW9uKGEpe3JldHVybiBVLnRlc3QoYXx8XCJcIil8fGRiLmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrYSksYT1hLnJlcGxhY2UoYWIsYmIpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1uP2IubGFuZzpiLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHxiLmdldEF0dHJpYnV0ZShcImxhbmdcIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErXCItXCIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW19LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bC5hY3RpdmVFbGVtZW50JiYoIWwuaGFzRm9jdXN8fGwuaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmISFhLmNoZWNrZWR8fFwib3B0aW9uXCI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWC50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gVy50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJlwiYnV0dG9uXCI9PT1hLnR5cGV8fFwiYnV0dG9uXCI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVyblwiaW5wdXRcIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJ0ZXh0XCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfHxcInRleHRcIj09PWIudG9Mb3dlckNhc2UoKSl9LGZpcnN0OmxiKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpsYihmdW5jdGlvbihhLGIpe3JldHVybltiLTFdfSksZXE6bGIoZnVuY3Rpb24oYSxiLGMpe3JldHVyblswPmM/YytiOmNdfSksZXZlbjpsYihmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLG9kZDpsYihmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLGx0OmxiKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOy0tZD49MDspYS5wdXNoKGQpO3JldHVybiBhfSksZ3Q6bGIoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7KytkPGI7KWEucHVzaChkKTtyZXR1cm4gYX0pfX0sZC5wc2V1ZG9zLm50aD1kLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pZC5wc2V1ZG9zW2JdPWpiKGIpO2ZvcihiIGlue3N1Ym1pdDohMCxyZXNldDohMH0pZC5wc2V1ZG9zW2JdPWtiKGIpO2Z1bmN0aW9uIG5iKCl7fW5iLnByb3RvdHlwZT1kLmZpbHRlcnM9ZC5wc2V1ZG9zLGQuc2V0RmlsdGVycz1uZXcgbmI7ZnVuY3Rpb24gb2IoYSxiKXt2YXIgYyxlLGYsZyxoLGksaixrPXhbYStcIiBcIl07aWYoaylyZXR1cm4gYj8wOmsuc2xpY2UoMCk7aD1hLGk9W10saj1kLnByZUZpbHRlcjt3aGlsZShoKXsoIWN8fChlPVEuZXhlYyhoKSkpJiYoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1SLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFAsXCIgXCIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVZbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9kYi5lcnJvcihhKTp4KGEsaSkuc2xpY2UoMCl9ZnVuY3Rpb24gcGIoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aCxkPVwiXCI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHFiKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJlwicGFyZW50Tm9kZVwiPT09ZCxmPXYrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaj1bdSxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGk9YltzXXx8KGJbc109e30pLChoPWlbZF0pJiZoWzBdPT09dSYmaFsxXT09PWYpcmV0dXJuIGpbMl09aFsyXTtpZihpW2RdPWosalsyXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHJiKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHNiKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJighY3x8YyhmLGQsZSkpJiYoZy5wdXNoKGYpLGomJmIucHVzaChoKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdGIoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFtzXSYmKGQ9dGIoZCkpLGUmJiFlW3NdJiYoZT10YihlLGYpKSxmYihmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx3YihifHxcIipcIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOnNiKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj1zYihyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/SS5jYWxsKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj1zYihyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6Ry5hcHBseShnLHIpfSl9ZnVuY3Rpb24gdWIoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGk9Z3x8ZC5yZWxhdGl2ZVtcIiBcIl0saj1nPzE6MCxrPXFiKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saSwhMCksbD1xYihmdW5jdGlvbihhKXtyZXR1cm4gSS5jYWxsKGIsYSk+LTF9LGksITApLG09W2Z1bmN0aW9uKGEsYyxkKXtyZXR1cm4hZyYmKGR8fGMhPT1oKXx8KChiPWMpLm5vZGVUeXBlP2soYSxjLGQpOmwoYSxjLGQpKX1dO2Y+ajtqKyspaWYoYz1kLnJlbGF0aXZlW2Fbal0udHlwZV0pbT1bcWIocmIobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2pdLnR5cGVdLmFwcGx5KG51bGwsYVtqXS5tYXRjaGVzKSxjW3NdKXtmb3IoZT0rK2o7Zj5lO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHRiKGo+MSYmcmIobSksaj4xJiZwYihhLnNsaWNlKDAsai0xKS5jb25jYXQoe3ZhbHVlOlwiIFwiPT09YVtqLTJdLnR5cGU/XCIqXCI6XCJcIn0pKS5yZXBsYWNlKFAsXCIkMVwiKSxjLGU+aiYmdWIoYS5zbGljZShqLGUpKSxmPmUmJnViKGE9YS5zbGljZShlKSksZj5lJiZwYihhKSl9bS5wdXNoKGMpfXJldHVybiByYihtKX1mdW5jdGlvbiB2YihhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGksaixrKXt2YXIgbSxuLG8scD0wLHE9XCIwXCIscj1mJiZbXSxzPVtdLHQ9aCx2PWZ8fGUmJmQuZmluZC5UQUcoXCIqXCIsayksdz11Kz1udWxsPT10PzE6TWF0aC5yYW5kb20oKXx8LjEseD12Lmxlbmd0aDtmb3IoayYmKGg9ZyE9PWwmJmcpO3EhPT14JiZudWxsIT0obT12W3FdKTtxKyspe2lmKGUmJm0pe249MDt3aGlsZShvPWFbbisrXSlpZihvKG0sZyxpKSl7ai5wdXNoKG0pO2JyZWFrfWsmJih1PXcpfWMmJigobT0hbyYmbSkmJnAtLSxmJiZyLnB1c2gobSkpfWlmKHArPXEsYyYmcSE9PXApe249MDt3aGlsZShvPWJbbisrXSlvKHIscyxnLGkpO2lmKGYpe2lmKHA+MCl3aGlsZShxLS0pcltxXXx8c1txXXx8KHNbcV09RS5jYWxsKGopKTtzPXNiKHMpfUcuYXBwbHkoaixzKSxrJiYhZiYmcy5sZW5ndGg+MCYmcCtiLmxlbmd0aD4xJiZkYi51bmlxdWVTb3J0KGopfXJldHVybiBrJiYodT13LGg9dCkscn07cmV0dXJuIGM/ZmIoZik6Zn1nPWRiLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj15W2ErXCIgXCJdO2lmKCFmKXtifHwoYj1vYihhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj11YihiW2NdKSxmW3NdP2QucHVzaChmKTplLnB1c2goZik7Zj15KGEsdmIoZSxkKSl9cmV0dXJuIGZ9O2Z1bmN0aW9uIHdiKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZGIoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHhiKGEsYixlLGYpe3ZhciBoLGksaixrLGwsbT1vYihhKTtpZighZiYmMT09PW0ubGVuZ3RoKXtpZihpPW1bMF09bVswXS5zbGljZSgwKSxpLmxlbmd0aD4yJiZcIklEXCI9PT0oaj1pWzBdKS50eXBlJiZjLmdldEJ5SWQmJjk9PT1iLm5vZGVUeXBlJiZuJiZkLnJlbGF0aXZlW2lbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChqLm1hdGNoZXNbMF0ucmVwbGFjZShhYixiYiksYil8fFtdKVswXSwhYilyZXR1cm4gZTthPWEuc2xpY2UoaS5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aD1WLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6aS5sZW5ndGg7d2hpbGUoaC0tKXtpZihqPWlbaF0sZC5yZWxhdGl2ZVtrPWoudHlwZV0pYnJlYWs7aWYoKGw9ZC5maW5kW2tdKSYmKGY9bChqLm1hdGNoZXNbMF0ucmVwbGFjZShhYixiYiksJC50ZXN0KGlbMF0udHlwZSkmJm1iKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoaS5zcGxpY2UoaCwxKSxhPWYubGVuZ3RoJiZwYihpKSwhYSlyZXR1cm4gRy5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4gZyhhLG0pKGYsYiwhbixlLCQudGVzdChhKSYmbWIoYi5wYXJlbnROb2RlKXx8YiksZX1yZXR1cm4gYy5zb3J0U3RhYmxlPXMuc3BsaXQoXCJcIikuc29ydCh6KS5qb2luKFwiXCIpPT09cyxjLmRldGVjdER1cGxpY2F0ZXM9ISFqLGsoKSxjLnNvcnREZXRhY2hlZD1nYihmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGwuY3JlYXRlRWxlbWVudChcImRpdlwiKSl9KSxnYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxoYihcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmZ2IoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGhiKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fFwiaW5wdXRcIiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxnYihmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxoYihKLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxkYn0oYSk7by5maW5kPXQsby5leHByPXQuc2VsZWN0b3JzLG8uZXhwcltcIjpcIl09by5leHByLnBzZXVkb3Msby51bmlxdWU9dC51bmlxdWVTb3J0LG8udGV4dD10LmdldFRleHQsby5pc1hNTERvYz10LmlzWE1MLG8uY29udGFpbnM9dC5jb250YWluczt2YXIgdT1vLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHY9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLHc9L14uW146I1xcW1xcLixdKiQvO2Z1bmN0aW9uIHgoYSxiLGMpe2lmKG8uaXNGdW5jdGlvbihiKSlyZXR1cm4gby5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk7aWYoYi5ub2RlVHlwZSlyZXR1cm4gby5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1iIT09Y30pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKXtpZih3LnRlc3QoYikpcmV0dXJuIG8uZmlsdGVyKGIsYSxjKTtiPW8uZmlsdGVyKGIsYSl9cmV0dXJuIG8uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBnLmNhbGwoYixhKT49MCE9PWN9KX1vLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9XCI6bm90KFwiK2ErXCIpXCIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/by5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTpvLmZpbmQubWF0Y2hlcyhhLG8uZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sby5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmxlbmd0aCxkPVtdLGU9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobyhhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2M+YjtiKyspaWYoby5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7Yz5iO2IrKylvLmZpbmQoYSxlW2JdLGQpO3JldHVybiBkPXRoaXMucHVzaFN0YWNrKGM+MT9vLnVuaXF1ZShkKTpkKSxkLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcitcIiBcIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsXCJzdHJpbmdcIj09dHlwZW9mIGEmJnUudGVzdChhKT9vKGEpOmF8fFtdLCExKS5sZW5ndGh9fSk7dmFyIHksej0vXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxBPW8uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2lmKGM9XCI8XCI9PT1hWzBdJiZcIj5cIj09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG8/YlswXTpiLG8ubWVyZ2UodGhpcyxvLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOm0sITApKSx2LnRlc3QoY1sxXSkmJm8uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW8uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPW0uZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1tLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6by5pc0Z1bmN0aW9uKGEpP1widW5kZWZpbmVkXCIhPXR5cGVvZiB5LnJlYWR5P3kucmVhZHkoYSk6YShvKToodm9pZCAwIT09YS5zZWxlY3RvciYmKHRoaXMuc2VsZWN0b3I9YS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9YS5jb250ZXh0KSxvLm1ha2VBcnJheShhLHRoaXMpKX07QS5wcm90b3R5cGU9by5mbix5PW8obSk7dmFyIEI9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sQz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtvLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZvKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY319KSxvLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGEpe3ZhciBiPW8oYSx0aGlzKSxjPWIubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2M+YTthKyspaWYoby5jb250YWlucyh0aGlzLGJbYV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPXUudGVzdChhKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGE/byhhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmby5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP28udW5pcXVlKGYpOmYpfSxpbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gYT9cInN0cmluZ1wiPT10eXBlb2YgYT9nLmNhbGwobyhhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8udW5pcXVlKG8ubWVyZ2UodGhpcy5nZXQoKSxvKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW8uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gby5kaXIoYSxcInBhcmVudE5vZGVcIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG8uZGlyKGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG8uZGlyKGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gby5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gby5kaXIoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG8uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG8uc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIG8uc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fG8ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7by5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW8ubWFwKHRoaXMsYixjKTtyZXR1cm5cIlVudGlsXCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJihlPW8uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihDW2FdfHxvLnVuaXF1ZShlKSxCLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRT0vXFxTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBvLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1vLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0ZbYV18fEcoYSk6by5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZixnLGg9W10saT0hYS5vbmNlJiZbXSxqPWZ1bmN0aW9uKGwpe2ZvcihiPWEubWVtb3J5JiZsLGM9ITAsZz1lfHwwLGU9MCxmPWgubGVuZ3RoLGQ9ITA7aCYmZj5nO2crKylpZihoW2ddLmFwcGx5KGxbMF0sbFsxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSl7Yj0hMTticmVha31kPSExLGgmJihpP2kubGVuZ3RoJiZqKGkuc2hpZnQoKSk6Yj9oPVtdOmsuZGlzYWJsZSgpKX0saz17YWRkOmZ1bmN0aW9uKCl7aWYoaCl7dmFyIGM9aC5sZW5ndGg7IWZ1bmN0aW9uIGcoYil7by5lYWNoKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1vLnR5cGUoYyk7XCJmdW5jdGlvblwiPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm8uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1vLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9vLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG8uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLG8uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixvLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLG8uQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sYz1cInBlbmRpbmdcIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG8uRGVmZXJyZWQoZnVuY3Rpb24oYyl7by5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1vLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm8uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZD9jLnByb21pc2UoKTp0aGlzLGc/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9vLmV4dGVuZChhLGQpOmR9fSxlPXt9O3JldHVybiBkLnBpcGU9ZC50aGVuLG8uZWFjaChiLGZ1bmN0aW9uKGEsZil7dmFyIGc9ZlsyXSxoPWZbM107ZFtmWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2M9aH0sYlsxXmFdWzJdLmRpc2FibGUsYlsyXVsyXS5sb2NrKSxlW2ZbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZlswXStcIldpdGhcIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmby5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpvLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm8uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtvLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBvLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG8uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP28ucmVhZHlXYWl0Kys6by5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1vLnJlYWR5V2FpdDpvLmlzUmVhZHkpfHwoby5pc1JlYWR5PSEwLGEhPT0hMCYmLS1vLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChtLFtvXSksby5mbi50cmlnZ2VyJiZvKG0pLnRyaWdnZXIoXCJyZWFkeVwiKS5vZmYoXCJyZWFkeVwiKSkpfX0pO2Z1bmN0aW9uIEkoKXttLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEksITEpLG8ucmVhZHkoKX1vLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7cmV0dXJuIEh8fChIPW8uRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT1tLnJlYWR5U3RhdGU/c2V0VGltZW91dChvLnJlYWR5KToobS5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixJLCExKSkpLEgucHJvbWlzZShiKX0sby5yZWFkeS5wcm9taXNlKCk7dmFyIEo9by5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09by50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpby5hY2Nlc3MoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsby5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG8oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn07by5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gSygpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmNhY2hlPXt9LDAse2dldDpmdW5jdGlvbigpe3JldHVybnt9fX0pLHRoaXMuZXhwYW5kbz1vLmV4cGFuZG8rTWF0aC5yYW5kb20oKX1LLnVpZD0xLEsuYWNjZXB0cz1vLmFjY2VwdERhdGEsSy5wcm90b3R5cGU9e2tleTpmdW5jdGlvbihhKXtpZighSy5hY2NlcHRzKGEpKXJldHVybiAwO3ZhciBiPXt9LGM9YVt0aGlzLmV4cGFuZG9dO2lmKCFjKXtjPUsudWlkKys7dHJ5e2JbdGhpcy5leHBhbmRvXT17dmFsdWU6Y30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxiKX1jYXRjaChkKXtiW3RoaXMuZXhwYW5kb109YyxvLmV4dGVuZChhLGIpfX1yZXR1cm4gdGhpcy5jYWNoZVtjXXx8KHRoaXMuY2FjaGVbY109e30pLGN9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmtleShhKSxmPXRoaXMuY2FjaGVbZV07aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYoby5pc0VtcHR5T2JqZWN0KGYpKW8uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz8oZD10aGlzLmdldChhLGIpLHZvaWQgMCE9PWQ/ZDp0aGlzLmdldChhLG8uY2FtZWxDYXNlKGIpKSk6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXMua2V5KGEpLGc9dGhpcy5jYWNoZVtmXTtpZih2b2lkIDA9PT1iKXRoaXMuY2FjaGVbZl09e307ZWxzZXtvLmlzQXJyYXkoYik/ZD1iLmNvbmNhdChiLm1hcChvLmNhbWVsQ2FzZSkpOihlPW8uY2FtZWxDYXNlKGIpLGIgaW4gZz9kPVtiLGVdOihkPWUsZD1kIGluIGc/W2RdOmQubWF0Y2goRSl8fFtdKSksYz1kLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGdbZFtjXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiFvLmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oYSl7YVt0aGlzLmV4cGFuZG9dJiZkZWxldGUgdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfX07dmFyIEw9bmV3IEssTT1uZXcgSyxOPS9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7dmFyIGQ7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpaWYoZD1cImRhdGEtXCIrYi5yZXBsYWNlKE8sXCItJDFcIikudG9Mb3dlckNhc2UoKSxjPWEuZ2V0QXR0cmlidXRlKGQpLFwic3RyaW5nXCI9PXR5cGVvZiBjKXt0cnl7Yz1cInRydWVcIj09PWM/ITA6XCJmYWxzZVwiPT09Yz8hMTpcIm51bGxcIj09PWM/bnVsbDorYytcIlwiPT09Yz8rYzpOLnRlc3QoYyk/by5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9by5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTS5hY2Nlc3MoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7TS5yZW1vdmUoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBMLmFjY2VzcyhhLGIsYyl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7TC5yZW1vdmUoYSxiKX19KSxvLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXNbMF0sZz1mJiZmLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09YSl7aWYodGhpcy5sZW5ndGgmJihlPU0uZ2V0KGYpLDE9PT1mLm5vZGVUeXBlJiYhTC5nZXQoZixcImhhc0RhdGFBdHRyc1wiKSkpe2M9Zy5sZW5ndGg7XG53aGlsZShjLS0pZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZihcImRhdGEtXCIpJiYoZD1vLmNhbWVsQ2FzZShkLnNsaWNlKDUpKSxQKGYsZCxlW2RdKSk7TC5zZXQoZixcImhhc0RhdGFBdHRyc1wiLCEwKX1yZXR1cm4gZX1yZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtNLnNldCh0aGlzLGEpfSk6Sih0aGlzLGZ1bmN0aW9uKGIpe3ZhciBjLGQ9by5jYW1lbENhc2UoYSk7aWYoZiYmdm9pZCAwPT09Yil7aWYoYz1NLmdldChmLGEpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1NLmdldChmLGQpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1QKGYsZCx2b2lkIDApLHZvaWQgMCE9PWMpcmV0dXJuIGN9ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1NLmdldCh0aGlzLGQpO00uc2V0KHRoaXMsZCxiKSwtMSE9PWEuaW5kZXhPZihcIi1cIikmJnZvaWQgMCE9PWMmJk0uc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtNLnJlbW92ZSh0aGlzLGEpfSl9fSksby5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8XCJmeFwiKStcInF1ZXVlXCIsZD1MLmdldChhLGIpLGMmJighZHx8by5pc0FycmF5KGMpP2Q9TC5hY2Nlc3MoYSxiLG8ubWFrZUFycmF5KGMpKTpkLnB1c2goYykpLGR8fFtdKTp2b2lkIDB9LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fFwiZnhcIjt2YXIgYz1vLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW8uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7by5kZXF1ZXVlKGEsYil9O1wiaW5wcm9ncmVzc1wiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKFwiZnhcIj09PWImJmMudW5zaGlmdChcImlucHJvZ3Jlc3NcIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YitcInF1ZXVlSG9va3NcIjtyZXR1cm4gTC5nZXQoYSxjKXx8TC5hY2Nlc3MoYSxjLHtlbXB0eTpvLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpe0wucmVtb3ZlKGEsW2IrXCJxdWV1ZVwiLGNdKX0pfSl9fSksby5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPVwiZnhcIixjLS0pLGFyZ3VtZW50cy5sZW5ndGg8Yz9vLnF1ZXVlKHRoaXNbMF0sYSk6dm9pZCAwPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPW8ucXVldWUodGhpcyxhLGIpO28uX3F1ZXVlSG9va3ModGhpcyxhKSxcImZ4XCI9PT1hJiZcImlucHJvZ3Jlc3NcIiE9PWNbMF0mJm8uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe28uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8XCJmeFwiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MSxlPW8uRGVmZXJyZWQoKSxmPXRoaXMsZz10aGlzLmxlbmd0aCxoPWZ1bmN0aW9uKCl7LS1kfHxlLnJlc29sdmVXaXRoKGYsW2ZdKX07XCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8XCJmeFwiO3doaWxlKGctLSljPUwuZ2V0KGZbZ10sYStcInF1ZXVlSG9va3NcIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIFE9L1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLFI9W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLFM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1ifHxhLFwibm9uZVwiPT09by5jc3MoYSxcImRpc3BsYXlcIil8fCFvLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX0sVD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaTshZnVuY3Rpb24oKXt2YXIgYT1tLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxiPWEuYXBwZW5kQ2hpbGQobS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtiLmlubmVySFRNTD1cIjxpbnB1dCB0eXBlPSdyYWRpbycgY2hlY2tlZD0nY2hlY2tlZCcgbmFtZT0ndCcvPlwiLGwuY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD1cIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIixsLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIFU9XCJ1bmRlZmluZWRcIjtsLmZvY3VzaW5CdWJibGVzPVwib25mb2N1c2luXCJpbiBhO3ZhciBWPS9ea2V5LyxXPS9eKD86bW91c2V8Y29udGV4dG1lbnUpfGNsaWNrLyxYPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxZPS9eKFteLl0qKSg/OlxcLiguKyl8KSQvO2Z1bmN0aW9uIFooKXtyZXR1cm4hMH1mdW5jdGlvbiAkKCl7cmV0dXJuITF9ZnVuY3Rpb24gXygpe3RyeXtyZXR1cm4gbS5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319by5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbixwLHEscj1MLmdldChhKTtpZihyKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxjLmd1aWR8fChjLmd1aWQ9by5ndWlkKyspLChpPXIuZXZlbnRzKXx8KGk9ci5ldmVudHM9e30pLChnPXIuaGFuZGxlKXx8KGc9ci5oYW5kbGU9ZnVuY3Rpb24oYil7cmV0dXJuIHR5cGVvZiBvIT09VSYmby5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/by5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPVkuZXhlYyhiW2pdKXx8W10sbj1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxuJiYobD1vLmV2ZW50LnNwZWNpYWxbbl18fHt9LG49KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG4sbD1vLmV2ZW50LnNwZWNpYWxbbl18fHt9LGs9by5leHRlbmQoe3R5cGU6bixvcmlnVHlwZTpxLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmby5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpwLmpvaW4oXCIuXCIpfSxmKSwobT1pW25dKXx8KG09aVtuXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobixnLCExKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG8uZXZlbnQuZ2xvYmFsW25dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbixwLHEscj1MLmhhc0RhdGEoYSkmJkwuZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPVkuZXhlYyhiW2pdKXx8W10sbj1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxuKXtsPW8uZXZlbnQuc3BlY2lhbFtuXXx8e30sbj0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8bixtPWlbbl18fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Auam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpLGc9Zj1tLmxlbmd0aDt3aGlsZShmLS0paz1tW2ZdLCFlJiZxIT09ay5vcmlnVHlwZXx8YyYmYy5ndWlkIT09ay5ndWlkfHxoJiYhaC50ZXN0KGsubmFtZXNwYWNlKXx8ZCYmZCE9PWsuc2VsZWN0b3ImJihcIioqXCIhPT1kfHwhay5zZWxlY3Rvcil8fChtLnNwbGljZShmLDEpLGsuc2VsZWN0b3ImJm0uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsaykpO2cmJiFtLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG8ucmVtb3ZlRXZlbnQoYSxuLHIuaGFuZGxlKSxkZWxldGUgaVtuXSl9ZWxzZSBmb3IobiBpbiBpKW8uZXZlbnQucmVtb3ZlKGEsbitiW2pdLGMsZCwhMCk7by5pc0VtcHR5T2JqZWN0KGkpJiYoZGVsZXRlIHIuaGFuZGxlLEwucmVtb3ZlKGEsXCJldmVudHNcIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaSxrLGwsbixwPVtkfHxtXSxxPWouY2FsbChiLFwidHlwZVwiKT9iLnR5cGU6YixyPWouY2FsbChiLFwibmFtZXNwYWNlXCIpP2IubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihnPWg9ZD1kfHxtLDMhPT1kLm5vZGVUeXBlJiY4IT09ZC5ub2RlVHlwZSYmIVgudGVzdChxK28uZXZlbnQudHJpZ2dlcmVkKSYmKHEuaW5kZXhPZihcIi5cIik+PTAmJihyPXEuc3BsaXQoXCIuXCIpLHE9ci5zaGlmdCgpLHIuc29ydCgpKSxrPXEuaW5kZXhPZihcIjpcIik8MCYmXCJvblwiK3EsYj1iW28uZXhwYW5kb10/YjpuZXcgby5FdmVudChxLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1lPzI6MyxiLm5hbWVzcGFjZT1yLmpvaW4oXCIuXCIpLGIubmFtZXNwYWNlX3JlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoXCIoXnxcXFxcLilcIityLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWQpLGM9bnVsbD09Yz9bYl06by5tYWtlQXJyYXkoYyxbYl0pLG49by5ldmVudC5zcGVjaWFsW3FdfHx7fSxlfHwhbi50cmlnZ2VyfHxuLnRyaWdnZXIuYXBwbHkoZCxjKSE9PSExKSl7aWYoIWUmJiFuLm5vQnViYmxlJiYhby5pc1dpbmRvdyhkKSl7Zm9yKGk9bi5kZWxlZ2F0ZVR5cGV8fHEsWC50ZXN0KGkrcSl8fChnPWcucGFyZW50Tm9kZSk7ZztnPWcucGFyZW50Tm9kZSlwLnB1c2goZyksaD1nO2g9PT0oZC5vd25lckRvY3VtZW50fHxtKSYmcC5wdXNoKGguZGVmYXVsdFZpZXd8fGgucGFyZW50V2luZG93fHxhKX1mPTA7d2hpbGUoKGc9cFtmKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSliLnR5cGU9Zj4xP2k6bi5iaW5kVHlwZXx8cSxsPShMLmdldChnLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXSYmTC5nZXQoZyxcImhhbmRsZVwiKSxsJiZsLmFwcGx5KGcsYyksbD1rJiZnW2tdLGwmJmwuYXBwbHkmJm8uYWNjZXB0RGF0YShnKSYmKGIucmVzdWx0PWwuYXBwbHkoZyxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO3JldHVybiBiLnR5cGU9cSxlfHxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxuLl9kZWZhdWx0JiZuLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYykhPT0hMXx8IW8uYWNjZXB0RGF0YShkKXx8ayYmby5pc0Z1bmN0aW9uKGRbcV0pJiYhby5pc1dpbmRvdyhkKSYmKGg9ZFtrXSxoJiYoZFtrXT1udWxsKSxvLmV2ZW50LnRyaWdnZXJlZD1xLGRbcV0oKSxvLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsaCYmKGRba109aCkpLGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1vLmV2ZW50LmZpeChhKTt2YXIgYixjLGUsZixnLGg9W10saT1kLmNhbGwoYXJndW1lbnRzKSxqPShMLmdldCh0aGlzLFwiZXZlbnRzXCIpfHx7fSlbYS50eXBlXXx8W10saz1vLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1vLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghYS5uYW1lc3BhY2VfcmV8fGEubmFtZXNwYWNlX3JlLnRlc3QoZy5uYW1lc3BhY2UpKSYmKGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxlPSgoby5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1lJiYoYS5yZXN1bHQ9ZSk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHxcImNsaWNrXCIhPT1hLnR5cGUpKWZvcig7aSE9PXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoaS5kaXNhYmxlZCE9PSEwfHxcImNsaWNrXCIhPT1hLnR5cGUpe2ZvcihkPVtdLGM9MDtoPmM7YysrKWY9YltjXSxlPWYuc2VsZWN0b3IrXCIgXCIsdm9pZCAwPT09ZFtlXSYmKGRbZV09Zi5uZWVkc0NvbnRleHQ/byhlLHRoaXMpLmluZGV4KGkpPj0wOm8uZmluZChlLHRoaXMsbnVsbCxbaV0pLmxlbmd0aCksZFtlXSYmZC5wdXNoKGYpO2QubGVuZ3RoJiZnLnB1c2goe2VsZW06aSxoYW5kbGVyczpkfSl9cmV0dXJuIGg8Yi5sZW5ndGgmJmcucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOmIuc2xpY2UoaCl9KSxnfSxwcm9wczpcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6XCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6XCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9Yi5idXR0b247cmV0dXJuIG51bGw9PWEucGFnZVgmJm51bGwhPWIuY2xpZW50WCYmKGM9YS50YXJnZXQub3duZXJEb2N1bWVudHx8bSxkPWMuZG9jdW1lbnRFbGVtZW50LGU9Yy5ib2R5LGEucGFnZVg9Yi5jbGllbnRYKyhkJiZkLnNjcm9sbExlZnR8fGUmJmUuc2Nyb2xsTGVmdHx8MCktKGQmJmQuY2xpZW50TGVmdHx8ZSYmZS5jbGllbnRMZWZ0fHwwKSxhLnBhZ2VZPWIuY2xpZW50WSsoZCYmZC5zY3JvbGxUb3B8fGUmJmUuc2Nyb2xsVG9wfHwwKS0oZCYmZC5jbGllbnRUb3B8fGUmJmUuY2xpZW50VG9wfHwwKSksYS53aGljaHx8dm9pZCAwPT09Znx8KGEud2hpY2g9MSZmPzE6MiZmPzM6NCZmPzI6MCksYX19LGZpeDpmdW5jdGlvbihhKXtpZihhW28uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxkLGU9YS50eXBlLGY9YSxnPXRoaXMuZml4SG9va3NbZV07Z3x8KHRoaXMuZml4SG9va3NbZV09Zz1XLnRlc3QoZSk/dGhpcy5tb3VzZUhvb2tzOlYudGVzdChlKT90aGlzLmtleUhvb2tzOnt9KSxkPWcucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoZy5wcm9wcyk6dGhpcy5wcm9wcyxhPW5ldyBvLkV2ZW50KGYpLGI9ZC5sZW5ndGg7d2hpbGUoYi0tKWM9ZFtiXSxhW2NdPWZbY107cmV0dXJuIGEudGFyZ2V0fHwoYS50YXJnZXQ9bSksMz09PWEudGFyZ2V0Lm5vZGVUeXBlJiYoYS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZSksZy5maWx0ZXI/Zy5maWx0ZXIoYSxmKTphfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcyE9PV8oKSYmdGhpcy5mb2N1cz8odGhpcy5mb2N1cygpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09XygpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3Vzb3V0XCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuXCJjaGVja2JveFwiPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZvLm5vZGVOYW1lKHRoaXMsXCJpbnB1dFwiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBvLm5vZGVOYW1lKGEudGFyZ2V0LFwiYVwiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1vLmV4dGVuZChuZXcgby5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2Q/by5ldmVudC50cmlnZ2VyKGUsbnVsbCxiKTpvLmV2ZW50LmRpc3BhdGNoLmNhbGwoYixlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZjLnByZXZlbnREZWZhdWx0KCl9fSxvLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfSxvLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBvLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEuZ2V0UHJldmVudERlZmF1bHQmJmEuZ2V0UHJldmVudERlZmF1bHQoKT9aOiQpOnRoaXMudHlwZT1hLGImJm8uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG8ubm93KCksdm9pZCh0aGlzW28uZXhwYW5kb109ITApKTpuZXcgby5FdmVudChhLGIpfSxvLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOiQsaXNQcm9wYWdhdGlvblN0b3BwZWQ6JCxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDokLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVosYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVosdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG8uZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwifSxmdW5jdGlvbihhLGIpe28uZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuKCFlfHxlIT09ZCYmIW8uY29udGFpbnMoZCxlKSkmJihhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGwuZm9jdXNpbkJ1YmJsZXN8fG8uZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7by5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG8uZXZlbnQuZml4KGEpLCEwKX07by5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPUwuYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTC5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpLTE7ZT9MLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLEwucmVtb3ZlKGQsYikpfX19KSxvLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGM9Y3x8YixiPXZvaWQgMCk7Zm9yKGcgaW4gYSl0aGlzLm9uKGcsYixjLGFbZ10sZSk7cmV0dXJuIHRoaXN9aWYobnVsbD09YyYmbnVsbD09ZD8oZD1iLGM9Yj12b2lkIDApOm51bGw9PWQmJihcInN0cmluZ1wiPT10eXBlb2YgYj8oZD1jLGM9dm9pZCAwKTooZD1jLGM9YixiPXZvaWQgMCkpLGQ9PT0hMSlkPSQ7ZWxzZSBpZighZClyZXR1cm4gdGhpcztyZXR1cm4gMT09PWUmJihmPWQsZD1mdW5jdGlvbihhKXtyZXR1cm4gbygpLm9mZihhKSxmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5ndWlkPWYuZ3VpZHx8KGYuZ3VpZD1vLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe28uZXZlbnQuYWRkKHRoaXMsYSxkLGMsYil9KX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixvKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlK1wiLlwiK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybihiPT09ITF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGIpJiYoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPSQpLHRoaXMuZWFjaChmdW5jdGlvbigpe28uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7by5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/by5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIGFiPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxiYj0vPChbXFx3Ol0rKS8sY2I9Lzx8JiM/XFx3KzsvLGRiPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksZWI9L2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxmYj0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdiPS9edHJ1ZVxcLyguKikvLGhiPS9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZyxpYj17b3B0aW9uOlsxLFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2liLm9wdGdyb3VwPWliLm9wdGlvbixpYi50Ym9keT1pYi50Zm9vdD1pYi5jb2xncm91cD1pYi5jYXB0aW9uPWliLnRoZWFkLGliLnRoPWliLnRkO2Z1bmN0aW9uIGpiKGEsYil7cmV0dXJuIG8ubm9kZU5hbWUoYSxcInRhYmxlXCIpJiZvLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCxcInRyXCIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRib2R5XCIpKTphfWZ1bmN0aW9uIGtiKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpK1wiL1wiK2EudHlwZSxhfWZ1bmN0aW9uIGxiKGEpe3ZhciBiPWdiLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksYX1mdW5jdGlvbiBtYihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylMLnNldChhW2NdLFwiZ2xvYmFsRXZhbFwiLCFifHxMLmdldChiW2NdLFwiZ2xvYmFsRXZhbFwiKSl9ZnVuY3Rpb24gbmIoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihMLmhhc0RhdGEoYSkmJihmPUwuYWNjZXNzKGEpLGc9TC5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2Q+YztjKyspby5ldmVudC5hZGQoYixlLGpbZV1bY10pfU0uaGFzRGF0YShhKSYmKGg9TS5hY2Nlc3MoYSksaT1vLmV4dGVuZCh7fSxoKSxNLnNldChiLGkpKX19ZnVuY3Rpb24gb2IoYSxiKXt2YXIgYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYnx8XCIqXCIpOmEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8XCIqXCIpOltdO3JldHVybiB2b2lkIDA9PT1ifHxiJiZvLm5vZGVOYW1lKGEsYik/by5tZXJnZShbYV0sYyk6Y31mdW5jdGlvbiBwYihhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImlucHV0XCI9PT1jJiZULnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOihcImlucHV0XCI9PT1jfHxcInRleHRhcmVhXCI9PT1jKSYmKGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1vLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9by5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxvLmlzWE1MRG9jKGEpKSlmb3IoZz1vYihoKSxmPW9iKGEpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspcGIoZltkXSxnW2RdKTtpZihiKWlmKGMpZm9yKGY9Znx8b2IoYSksZz1nfHxvYihoKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKW5iKGZbZF0sZ1tkXSk7ZWxzZSBuYihhLGgpO3JldHVybiBnPW9iKGgsXCJzY3JpcHRcIiksZy5sZW5ndGg+MCYmbWIoZywhaSYmb2IoYSxcInNjcmlwdFwiKSksaH0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsZixnLGgsaSxqLGs9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbD1bXSxtPTAsbj1hLmxlbmd0aDtuPm07bSsrKWlmKGU9YVttXSxlfHwwPT09ZSlpZihcIm9iamVjdFwiPT09by50eXBlKGUpKW8ubWVyZ2UobCxlLm5vZGVUeXBlP1tlXTplKTtlbHNlIGlmKGNiLnRlc3QoZSkpe2Y9Znx8ay5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGc9KGJiLmV4ZWMoZSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpLGg9aWJbZ118fGliLl9kZWZhdWx0LGYuaW5uZXJIVE1MPWhbMV0rZS5yZXBsYWNlKGFiLFwiPCQxPjwvJDI+XCIpK2hbMl0saj1oWzBdO3doaWxlKGotLSlmPWYubGFzdENoaWxkO28ubWVyZ2UobCxmLmNoaWxkTm9kZXMpLGY9ay5maXJzdENoaWxkLGYudGV4dENvbnRlbnQ9XCJcIn1lbHNlIGwucHVzaChiLmNyZWF0ZVRleHROb2RlKGUpKTtrLnRleHRDb250ZW50PVwiXCIsbT0wO3doaWxlKGU9bFttKytdKWlmKCghZHx8LTE9PT1vLmluQXJyYXkoZSxkKSkmJihpPW8uY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpLGY9b2Ioay5hcHBlbmRDaGlsZChlKSxcInNjcmlwdFwiKSxpJiZtYihmKSxjKSl7aj0wO3doaWxlKGU9ZltqKytdKWZiLnRlc3QoZS50eXBlfHxcIlwiKSYmYy5wdXNoKGUpfXJldHVybiBrfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlLGYsZyxoPW8uZXZlbnQuc3BlY2lhbCxpPTA7dm9pZCAwIT09KGM9YVtpXSk7aSsrKXtpZihvLmFjY2VwdERhdGEoYykmJihmPWNbTC5leHBhbmRvXSxmJiYoYj1MLmNhY2hlW2ZdKSkpe2lmKGQ9T2JqZWN0LmtleXMoYi5ldmVudHN8fHt9KSxkLmxlbmd0aClmb3IoZz0wO3ZvaWQgMCE9PShlPWRbZ10pO2crKyloW2VdP28uZXZlbnQucmVtb3ZlKGMsZSk6by5yZW1vdmVFdmVudChjLGUsYi5oYW5kbGUpO0wuY2FjaGVbZl0mJmRlbGV0ZSBMLmNhY2hlW2ZdfWRlbGV0ZSBNLmNhY2hlW2NbTS5leHBhbmRvXV19fX0pLG8uZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/by50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7KDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKSYmKHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWpiKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9amIodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD1hP28uZmlsdGVyKGEsdGhpcyk6dGhpcyxlPTA7bnVsbCE9KGM9ZFtlXSk7ZSsrKWJ8fDEhPT1jLm5vZGVUeXBlfHxvLmNsZWFuRGF0YShvYihjKSksYy5wYXJlbnROb2RlJiYoYiYmby5jb250YWlucyhjLm93bmVyRG9jdW1lbnQsYykmJm1iKG9iKGMsXCJzY3JpcHRcIikpLGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtudWxsIT0oYT10aGlzW2JdKTtiKyspMT09PWEubm9kZVR5cGUmJihvLmNsZWFuRGF0YShvYihhLCExKSksYS50ZXh0Q29udGVudD1cIlwiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBvLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYhZGIudGVzdChhKSYmIWliWyhiYi5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKGFiLFwiPCQxPjwvJDI+XCIpO3RyeXtmb3IoO2Q+YztjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKG8uY2xlYW5EYXRhKG9iKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthPXRoaXMucGFyZW50Tm9kZSxvLmNsZWFuRGF0YShvYih0aGlzKSksYSYmYS5yZXBsYWNlQ2hpbGQoYix0aGlzKX0pLGEmJihhLmxlbmd0aHx8YS5ub2RlVHlwZSk/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVtb3ZlKGEsITApfSxkb21NYW5pcDpmdW5jdGlvbihhLGIpe2E9ZS5hcHBseShbXSxhKTt2YXIgYyxkLGYsZyxoLGksaj0wLGs9dGhpcy5sZW5ndGgsbT10aGlzLG49ay0xLHA9YVswXSxxPW8uaXNGdW5jdGlvbihwKTtpZihxfHxrPjEmJlwic3RyaW5nXCI9PXR5cGVvZiBwJiYhbC5jaGVja0Nsb25lJiZlYi50ZXN0KHApKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9bS5lcShjKTtxJiYoYVswXT1wLmNhbGwodGhpcyxjLGQuaHRtbCgpKSksZC5kb21NYW5pcChhLGIpfSk7aWYoayYmKGM9by5idWlsZEZyYWdtZW50KGEsdGhpc1swXS5vd25lckRvY3VtZW50LCExLHRoaXMpLGQ9Yy5maXJzdENoaWxkLDE9PT1jLmNoaWxkTm9kZXMubGVuZ3RoJiYoYz1kKSxkKSl7Zm9yKGY9by5tYXAob2IoYyxcInNjcmlwdFwiKSxrYiksZz1mLmxlbmd0aDtrPmo7aisrKWg9YyxqIT09biYmKGg9by5jbG9uZShoLCEwLCEwKSxnJiZvLm1lcmdlKGYsb2IoaCxcInNjcmlwdFwiKSkpLGIuY2FsbCh0aGlzW2pdLGgsaik7aWYoZylmb3IoaT1mW2YubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsby5tYXAoZixsYiksaj0wO2c+ajtqKyspaD1mW2pdLGZiLnRlc3QoaC50eXBlfHxcIlwiKSYmIUwuYWNjZXNzKGgsXCJnbG9iYWxFdmFsXCIpJiZvLmNvbnRhaW5zKGksaCkmJihoLnNyYz9vLl9ldmFsVXJsJiZvLl9ldmFsVXJsKGguc3JjKTpvLmdsb2JhbEV2YWwoaC50ZXh0Q29udGVudC5yZXBsYWNlKGhiLFwiXCIpKSl9cmV0dXJuIHRoaXN9fSksby5lYWNoKHthcHBlbmRUbzpcImFwcGVuZFwiLHByZXBlbmRUbzpcInByZXBlbmRcIixpbnNlcnRCZWZvcmU6XCJiZWZvcmVcIixpbnNlcnRBZnRlcjpcImFmdGVyXCIscmVwbGFjZUFsbDpcInJlcGxhY2VXaXRoXCJ9LGZ1bmN0aW9uKGEsYil7by5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1bXSxlPW8oYSksZz1lLmxlbmd0aC0xLGg9MDtnPj1oO2grKyljPWg9PT1nP3RoaXM6dGhpcy5jbG9uZSghMCksbyhlW2hdKVtiXShjKSxmLmFwcGx5KGQsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQpfX0pO3ZhciBxYixyYj17fTtmdW5jdGlvbiBzYihiLGMpe3ZhciBkPW8oYy5jcmVhdGVFbGVtZW50KGIpKS5hcHBlbmRUbyhjLmJvZHkpLGU9YS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZT9hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGRbMF0pLmRpc3BsYXk6by5jc3MoZFswXSxcImRpc3BsYXlcIik7cmV0dXJuIGQuZGV0YWNoKCksZX1mdW5jdGlvbiB0YihhKXt2YXIgYj1tLGM9cmJbYV07cmV0dXJuIGN8fChjPXNiKGEsYiksXCJub25lXCIhPT1jJiZjfHwocWI9KHFifHxvKFwiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPlwiKSkuYXBwZW5kVG8oYi5kb2N1bWVudEVsZW1lbnQpLGI9cWJbMF0uY29udGVudERvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1zYihhLGIpLHFiLmRldGFjaCgpKSxyYlthXT1jKSxjfXZhciB1Yj0vXm1hcmdpbi8sdmI9bmV3IFJlZ0V4cChcIl4oXCIrUStcIikoPyFweClbYS16JV0rJFwiLFwiaVwiKSx3Yj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYSxudWxsKX07ZnVuY3Rpb24geGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHx3YihhKSxjJiYoZz1jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl0pLGMmJihcIlwiIT09Z3x8by5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW8uc3R5bGUoYSxiKSksdmIudGVzdChnKSYmdWIudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nK1wiXCI6Z31mdW5jdGlvbiB5YihhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0hZnVuY3Rpb24oKXt2YXIgYixjLGQ9XCJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jazstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3hcIixlPW0uZG9jdW1lbnRFbGVtZW50LGY9bS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGc9bS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2cuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGcuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLGwuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWcuc3R5bGUuYmFja2dyb3VuZENsaXAsZi5zdHlsZS5jc3NUZXh0PVwiYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHhcIixmLmFwcGVuZENoaWxkKGcpO2Z1bmN0aW9uIGgoKXtnLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzoxcHg7Ym9yZGVyOjFweDtkaXNwbGF5OmJsb2NrO3dpZHRoOjRweDttYXJnaW4tdG9wOjElO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxJVwiLGUuYXBwZW5kQ2hpbGQoZik7dmFyIGQ9YS5nZXRDb21wdXRlZFN0eWxlKGcsbnVsbCk7Yj1cIjElXCIhPT1kLnRvcCxjPVwiNHB4XCI9PT1kLndpZHRoLGUucmVtb3ZlQ2hpbGQoZil9YS5nZXRDb21wdXRlZFN0eWxlJiZvLmV4dGVuZChsLHtwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxifSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZoKCksY30scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3ZhciBiLGM9Zy5hcHBlbmRDaGlsZChtLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO3JldHVybiBjLnN0eWxlLmNzc1RleHQ9Zy5zdHlsZS5jc3NUZXh0PWQsYy5zdHlsZS5tYXJnaW5SaWdodD1jLnN0eWxlLndpZHRoPVwiMFwiLGcuc3R5bGUud2lkdGg9XCIxcHhcIixlLmFwcGVuZENoaWxkKGYpLGI9IXBhcnNlRmxvYXQoYS5nZXRDb21wdXRlZFN0eWxlKGMsbnVsbCkubWFyZ2luUmlnaHQpLGUucmVtb3ZlQ2hpbGQoZiksZy5pbm5lckhUTUw9XCJcIixifX0pfSgpLG8uc3dhcD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07dmFyIHpiPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxBYj1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSguKikkXCIsXCJpXCIpLEJiPW5ldyBSZWdFeHAoXCJeKFsrLV0pPShcIitRK1wiKVwiLFwiaVwiKSxDYj17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIixkaXNwbGF5OlwiYmxvY2tcIn0sRGI9e2xldHRlclNwYWNpbmc6MCxmb250V2VpZ2h0OjQwMH0sRWI9W1wiV2Via2l0XCIsXCJPXCIsXCJNb3pcIixcIm1zXCJdO2Z1bmN0aW9uIEZiKGEsYil7aWYoYiBpbiBhKXJldHVybiBiO3ZhciBjPWJbMF0udG9VcHBlckNhc2UoKStiLnNsaWNlKDEpLGQ9YixlPUViLmxlbmd0aDt3aGlsZShlLS0paWYoYj1FYltlXStjLGIgaW4gYSlyZXR1cm4gYjtyZXR1cm4gZH1mdW5jdGlvbiBHYihhLGIsYyl7dmFyIGQ9QWIuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMV0tKGN8fDApKSsoZFsyXXx8XCJweFwiKTpifWZ1bmN0aW9uIEhiKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD9cImJvcmRlclwiOlwiY29udGVudFwiKT80Olwid2lkdGhcIj09PWI/MTowLGc9MDs0PmY7Zis9MilcIm1hcmdpblwiPT09YyYmKGcrPW8uY3NzKGEsYytSW2ZdLCEwLGUpKSxkPyhcImNvbnRlbnRcIj09PWMmJihnLT1vLmNzcyhhLFwicGFkZGluZ1wiK1JbZl0sITAsZSkpLFwibWFyZ2luXCIhPT1jJiYoZy09by5jc3MoYSxcImJvcmRlclwiK1JbZl0rXCJXaWR0aFwiLCEwLGUpKSk6KGcrPW8uY3NzKGEsXCJwYWRkaW5nXCIrUltmXSwhMCxlKSxcInBhZGRpbmdcIiE9PWMmJihnKz1vLmNzcyhhLFwiYm9yZGVyXCIrUltmXStcIldpZHRoXCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiBJYihhLGIsYyl7dmFyIGQ9ITAsZT1cIndpZHRoXCI9PT1iP2Eub2Zmc2V0V2lkdGg6YS5vZmZzZXRIZWlnaHQsZj13YihhKSxnPVwiYm9yZGVyLWJveFwiPT09by5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9eGIoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSx2Yi50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGwuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStIYihhLGIsY3x8KGc/XCJib3JkZXJcIjpcImNvbnRlbnRcIiksZCxmKStcInB4XCJ9ZnVuY3Rpb24gSmIoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109TC5nZXQoZCxcIm9sZGRpc3BsYXlcIiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8XCJub25lXCIhPT1jfHwoZC5zdHlsZS5kaXNwbGF5PVwiXCIpLFwiXCI9PT1kLnN0eWxlLmRpc3BsYXkmJlMoZCkmJihmW2ddPUwuYWNjZXNzKGQsXCJvbGRkaXNwbGF5XCIsdGIoZC5ub2RlTmFtZSkpKSk6ZltnXXx8KGU9UyhkKSwoYyYmXCJub25lXCIhPT1jfHwhZSkmJkwuc2V0KGQsXCJvbGRkaXNwbGF5XCIsZT9jOm8uY3NzKGQsXCJkaXNwbGF5XCIpKSkpO2ZvcihnPTA7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGImJlwibm9uZVwiIT09ZC5zdHlsZS5kaXNwbGF5JiZcIlwiIT09ZC5zdHlsZS5kaXNwbGF5fHwoZC5zdHlsZS5kaXNwbGF5PWI/ZltnXXx8XCJcIjpcIm5vbmVcIikpO3JldHVybiBhfW8uZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9eGIoYSxcIm9wYWNpdHlcIik7cmV0dXJuXCJcIj09PWM/XCIxXCI6Y319fX0sY3NzTnVtYmVyOntjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e1wiZmxvYXRcIjpcImNzc0Zsb2F0XCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9by5jYW1lbENhc2UoYiksaT1hLnN0eWxlO3JldHVybiBiPW8uY3NzUHJvcHNbaF18fChvLmNzc1Byb3BzW2hdPUZiKGksaCkpLGc9by5jc3NIb29rc1tiXXx8by5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsXCJzdHJpbmdcIj09PWYmJihlPUJiLmV4ZWMoYykpJiYoYz0oZVsxXSsxKSplWzJdK3BhcnNlRmxvYXQoby5jc3MoYSxiKSksZj1cIm51bWJlclwiKSxudWxsIT1jJiZjPT09YyYmKFwibnVtYmVyXCIhPT1mfHxvLmNzc051bWJlcltoXXx8KGMrPVwicHhcIiksbC5jbGVhckNsb25lU3R5bGV8fFwiXCIhPT1jfHwwIT09Yi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKXx8KGlbYl09XCJpbmhlcml0XCIpLGcmJlwic2V0XCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpfHwoaVtiXT1cIlwiLGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9by5jYW1lbENhc2UoYik7cmV0dXJuIGI9by5jc3NQcm9wc1toXXx8KG8uY3NzUHJvcHNbaF09RmIoYS5zdHlsZSxoKSksZz1vLmNzc0hvb2tzW2JdfHxvLmNzc0hvb2tzW2hdLGcmJlwiZ2V0XCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT14YihhLGIsZCkpLFwibm9ybWFsXCI9PT1lJiZiIGluIERiJiYoZT1EYltiXSksXCJcIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fG8uaXNOdW1lcmljKGYpP2Z8fDA6ZSk6ZX19KSxvLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihhLGIpe28uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/MD09PWEub2Zmc2V0V2lkdGgmJnpiLnRlc3Qoby5jc3MoYSxcImRpc3BsYXlcIikpP28uc3dhcChhLENiLGZ1bmN0aW9uKCl7cmV0dXJuIEliKGEsYixkKX0pOkliKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCYmd2IoYSk7cmV0dXJuIEdiKGEsYyxkP0hiKGEsYixkLFwiYm9yZGVyLWJveFwiPT09by5jc3MoYSxcImJveFNpemluZ1wiLCExLGUpLGUpOjApfX19KSxvLmNzc0hvb2tzLm1hcmdpblJpZ2h0PXliKGwucmVsaWFibGVNYXJnaW5SaWdodCxmdW5jdGlvbihhLGIpe3JldHVybiBiP28uc3dhcChhLHtkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCJ9LHhiLFthLFwibWFyZ2luUmlnaHRcIl0pOnZvaWQgMH0pLG8uZWFjaCh7bWFyZ2luOlwiXCIscGFkZGluZzpcIlwiLGJvcmRlcjpcIldpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7by5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPVwic3RyaW5nXCI9PXR5cGVvZiBjP2Muc3BsaXQoXCIgXCIpOltjXTs0PmQ7ZCsrKWVbYStSW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LHViLnRlc3QoYSl8fChvLmNzc0hvb2tzW2ErYl0uc2V0PUdiKX0pLG8uZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKG8uaXNBcnJheShiKSl7Zm9yKGQ9d2IoYSksZT1iLmxlbmd0aDtlPmc7ZysrKWZbYltnXV09by5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP28uc3R5bGUoYSxiLGMpOm8uY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEpiKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEpiKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uyh0aGlzKT9vKHRoaXMpLnNob3coKTpvKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIEtiKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBLYi5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW8uVHdlZW49S2IsS2IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpLYixpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxcInN3aW5nXCIsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChvLmNzc051bWJlcltjXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPUtiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpLYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1LYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5wb3M9Yj10aGlzLm9wdGlvbnMuZHVyYXRpb24/by5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpLYi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxLYi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9S2IucHJvdG90eXBlLEtiLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbnVsbD09YS5lbGVtW2EucHJvcF18fGEuZWxlbS5zdHlsZSYmbnVsbCE9YS5lbGVtLnN0eWxlW2EucHJvcF0/KGI9by5jc3MoYS5lbGVtLGEucHJvcCxcIlwiKSxiJiZcImF1dG9cIiE9PWI/YjowKTphLmVsZW1bYS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGEpe28uZnguc3RlcFthLnByb3BdP28uZnguc3RlcFthLnByb3BdKGEpOmEuZWxlbS5zdHlsZSYmKG51bGwhPWEuZWxlbS5zdHlsZVtvLmNzc1Byb3BzW2EucHJvcF1dfHxvLmNzc0hvb2tzW2EucHJvcF0pP28uc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpOmEuZWxlbVthLnByb3BdPWEubm93fX19LEtiLnByb3BIb29rcy5zY3JvbGxUb3A9S2IucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sby5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfX0sby5meD1LYi5wcm90b3R5cGUuaW5pdCxvLmZ4LnN0ZXA9e307dmFyIExiLE1iLE5iPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxPYj1uZXcgUmVnRXhwKFwiXig/OihbKy1dKT18KShcIitRK1wiKShbYS16JV0qKSRcIixcImlcIiksUGI9L3F1ZXVlSG9va3MkLyxRYj1bVmJdLFJiPXtcIipcIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYiksZD1jLmN1cigpLGU9T2IuZXhlYyhiKSxmPWUmJmVbM118fChvLmNzc051bWJlclthXT9cIlwiOlwicHhcIiksZz0oby5jc3NOdW1iZXJbYV18fFwicHhcIiE9PWYmJitkKSYmT2IuZXhlYyhvLmNzcyhjLmVsZW0sYSkpLGg9MSxpPTIwO2lmKGcmJmdbM10hPT1mKXtmPWZ8fGdbM10sZT1lfHxbXSxnPStkfHwxO2RvIGg9aHx8XCIuNVwiLGcvPWgsby5zdHlsZShjLmVsZW0sYSxnK2YpO3doaWxlKGghPT0oaD1jLmN1cigpL2QpJiYxIT09aCYmLS1pKX1yZXR1cm4gZSYmKGc9Yy5zdGFydD0rZ3x8K2R8fDAsYy51bml0PWYsYy5lbmQ9ZVsxXT9nKyhlWzFdKzEpKmVbMl06K2VbMl0pLGN9XX07ZnVuY3Rpb24gU2IoKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe0xiPXZvaWQgMH0pLExiPW8ubm93KCl9ZnVuY3Rpb24gVGIoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowOzQ+ZDtkKz0yLWIpYz1SW2RdLGVbXCJtYXJnaW5cIitjXT1lW1wicGFkZGluZ1wiK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIFViKGEsYixjKXtmb3IodmFyIGQsZT0oUmJbYl18fFtdKS5jb25jYXQoUmJbXCIqXCJdKSxmPTAsZz1lLmxlbmd0aDtnPmY7ZisrKWlmKGQ9ZVtmXS5jYWxsKGMsYixhKSlyZXR1cm4gZH1mdW5jdGlvbiBWYihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz10aGlzLGw9e30sbT1hLnN0eWxlLG49YS5ub2RlVHlwZSYmUyhhKSxwPUwuZ2V0KGEsXCJmeHNob3dcIik7Yy5xdWV1ZXx8KGg9by5fcXVldWVIb29rcyhhLFwiZnhcIiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssay5hbHdheXMoZnVuY3Rpb24oKXtrLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxvLnF1ZXVlKGEsXCJmeFwiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJihcImhlaWdodFwiaW4gYnx8XCJ3aWR0aFwiaW4gYikmJihjLm92ZXJmbG93PVttLm92ZXJmbG93LG0ub3ZlcmZsb3dYLG0ub3ZlcmZsb3dZXSxqPW8uY3NzKGEsXCJkaXNwbGF5XCIpLFwibm9uZVwiPT09aiYmKGo9dGIoYS5ub2RlTmFtZSkpLFwiaW5saW5lXCI9PT1qJiZcIm5vbmVcIj09PW8uY3NzKGEsXCJmbG9hdFwiKSYmKG0uZGlzcGxheT1cImlubGluZS1ibG9ja1wiKSksYy5vdmVyZmxvdyYmKG0ub3ZlcmZsb3c9XCJoaWRkZW5cIixrLmFsd2F5cyhmdW5jdGlvbigpe20ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxtLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG0ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sTmIuZXhlYyhlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHxcInRvZ2dsZVwiPT09ZSxlPT09KG4/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWV8fCFwfHx2b2lkIDA9PT1wW2RdKWNvbnRpbnVlO249ITB9bFtkXT1wJiZwW2RdfHxvLnN0eWxlKGEsZCl9aWYoIW8uaXNFbXB0eU9iamVjdChsKSl7cD9cImhpZGRlblwiaW4gcCYmKG49cC5oaWRkZW4pOnA9TC5hY2Nlc3MoYSxcImZ4c2hvd1wiLHt9KSxmJiYocC5oaWRkZW49IW4pLG4/byhhKS5zaG93KCk6ay5kb25lKGZ1bmN0aW9uKCl7byhhKS5oaWRlKCl9KSxrLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtMLnJlbW92ZShhLFwiZnhzaG93XCIpO2ZvcihiIGluIGwpby5zdHlsZShhLGIsbFtiXSl9KTtmb3IoZCBpbiBsKWc9VWIobj9wW2RdOjAsZCxrKSxkIGluIHB8fChwW2RdPWcuc3RhcnQsbiYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD1cIndpZHRoXCI9PT1kfHxcImhlaWdodFwiPT09ZD8xOjApKX19ZnVuY3Rpb24gV2IoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1vLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG8uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9by5jc3NIb29rc1tkXSxnJiZcImV4cGFuZFwiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIFhiKGEsYixjKXt2YXIgZCxlLGY9MCxnPVFiLmxlbmd0aCxoPW8uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPUxifHxTYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpvLmV4dGVuZCh7fSxiKSxvcHRzOm8uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6TGJ8fFNiKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1vLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihXYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9UWJbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBvLm1hcChrLFViLGopLG8uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG8uZngudGltZXIoby5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9by5BbmltYXRpb249by5leHRlbmQoWGIse3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtvLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVtcIipcIl0pOmE9YS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLFJiW2NdPVJiW2NdfHxbXSxSYltjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP1FiLnVuc2hpZnQoYSk6UWIucHVzaChhKX19KSxvLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9vLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG8uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhby5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1vLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBvLmZ4LnNwZWVkcz9vLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTpvLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9XCJmeFwiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtvLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm8uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxvLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihTKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW8uaXNFbXB0eU9iamVjdChhKSxmPW8uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1YYih0aGlzLG8uZXh0ZW5kKHt9LGEpLGYpOyhlfHxMLmdldCh0aGlzLFwiZmluaXNoXCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhK1wicXVldWVIb29rc1wiLGY9by50aW1lcnMsZz1MLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZQYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyhifHwhYykmJm8uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9TC5nZXQodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1vLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsby5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxvLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9by5mbltiXTtvLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShUYihiLCEwKSxhLGQsZSl9fSksby5lYWNoKHtzbGlkZURvd246VGIoXCJzaG93XCIpLHNsaWRlVXA6VGIoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOlRiKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXtvLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG8udGltZXJzPVtdLG8uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPW8udGltZXJzO2ZvcihMYj1vLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fG8uZnguc3RvcCgpLExiPXZvaWQgMH0sby5meC50aW1lcj1mdW5jdGlvbihhKXtvLnRpbWVycy5wdXNoKGEpLGEoKT9vLmZ4LnN0YXJ0KCk6by50aW1lcnMucG9wKCl9LG8uZnguaW50ZXJ2YWw9MTMsby5meC5zdGFydD1mdW5jdGlvbigpe01ifHwoTWI9c2V0SW50ZXJ2YWwoby5meC50aWNrLG8uZnguaW50ZXJ2YWwpKX0sby5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChNYiksTWI9bnVsbH0sby5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sby5mbi5kZWxheT1mdW5jdGlvbihhLGIpe3JldHVybiBhPW8uZng/by5meC5zcGVlZHNbYV18fGE6YSxiPWJ8fFwiZnhcIix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhPW0uY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGI9bS5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGM9Yi5hcHBlbmRDaGlsZChtLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO2EudHlwZT1cImNoZWNrYm94XCIsbC5jaGVja09uPVwiXCIhPT1hLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGwub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1tLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnZhbHVlPVwidFwiLGEudHlwZT1cInJhZGlvXCIsbC5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZX0oKTt2YXIgWWIsWmIsJGI9by5leHByLmF0dHJIYW5kbGU7by5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG8uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7by5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxvLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09VT9vLnByb3AoYSxiLGMpOigxPT09ZiYmby5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9by5hdHRySG9va3NbYl18fChvLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP1piOlliKSksdm9pZCAwPT09Yz9kJiZcImdldFwiaW4gZCYmbnVsbCE9PShlPWQuZ2V0KGEsYikpP2U6KGU9by5maW5kLmF0dHIoYSxiKSxudWxsPT1lP3ZvaWQgMDplKTpudWxsIT09Yz9kJiZcInNldFwiaW4gZCYmdm9pZCAwIT09KGU9ZC5zZXQoYSxjLGIpKT9lOihhLnNldEF0dHJpYnV0ZShiLGMrXCJcIiksYyk6dm9pZCBvLnJlbW92ZUF0dHIoYSxiKSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9MCxmPWImJmIubWF0Y2goRSk7aWYoZiYmMT09PWEubm9kZVR5cGUpd2hpbGUoYz1mW2UrK10pZD1vLnByb3BGaXhbY118fGMsby5leHByLm1hdGNoLmJvb2wudGVzdChjKSYmKGFbZF09ITEpLGEucmVtb3ZlQXR0cmlidXRlKGMpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PWImJm8ubm9kZU5hbWUoYSxcImlucHV0XCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZShcInR5cGVcIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fX0pLFpiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/by5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sby5lYWNoKG8uZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXFx3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPSRiW2JdfHxvLmZpbmQuYXR0cjskYltiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtcbnJldHVybiBkfHwoZj0kYltiXSwkYltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsJGJbYl09ZiksZX19KTt2YXIgX2I9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTtvLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsby5wcm9wLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tvLnByb3BGaXhbYV18fGFdfSl9fSksby5leHRlbmQoe3Byb3BGaXg6e1wiZm9yXCI6XCJodG1sRm9yXCIsXCJjbGFzc1wiOlwiY2xhc3NOYW1lXCJ9LHByb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWEubm9kZVR5cGU7aWYoYSYmMyE9PWcmJjghPT1nJiYyIT09ZylyZXR1cm4gZj0xIT09Z3x8IW8uaXNYTUxEb2MoYSksZiYmKGI9by5wcm9wRml4W2JdfHxiLGU9by5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5oYXNBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKXx8X2IudGVzdChhLm5vZGVOYW1lKXx8YS5ocmVmP2EudGFiSW5kZXg6LTF9fX19KSxsLm9wdFNlbGVjdGVkfHwoby5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH19KSxvLmVhY2goW1widGFiSW5kZXhcIixcInJlYWRPbmx5XCIsXCJtYXhMZW5ndGhcIixcImNlbGxTcGFjaW5nXCIsXCJjZWxsUGFkZGluZ1wiLFwicm93U3BhblwiLFwiY29sU3BhblwiLFwidXNlTWFwXCIsXCJmcmFtZUJvcmRlclwiLFwiY29udGVudEVkaXRhYmxlXCJdLGZ1bmN0aW9uKCl7by5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBhYz0vW1xcdFxcclxcblxcZl0vZztvLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9XCJzdHJpbmdcIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYoby5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7byh0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aj5pO2krKylpZihjPXRoaXNbaV0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYyxcIiBcIik6XCIgXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPDAmJihkKz1lK1wiIFwiKTtnPW8udHJpbShkKSxjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MD09PWFyZ3VtZW50cy5sZW5ndGh8fFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG8uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe28odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8XCJcIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oXCIgXCIrYy5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWMsXCIgXCIpOlwiXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pd2hpbGUoZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPj0wKWQ9ZC5yZXBsYWNlKFwiIFwiK2UrXCIgXCIsXCIgXCIpO2c9YT9vLnRyaW0oZCk6XCJcIixjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGImJlwic3RyaW5nXCI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnRoaXMuZWFjaChvLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oYyl7byh0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHRoaXMuY2xhc3NOYW1lLGIpLGIpfTpmdW5jdGlvbigpe2lmKFwic3RyaW5nXCI9PT1jKXt2YXIgYixkPTAsZT1vKHRoaXMpLGY9YS5tYXRjaChFKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZShjPT09VXx8XCJib29sZWFuXCI9PT1jKSYmKHRoaXMuY2xhc3NOYW1lJiZMLnNldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiLHRoaXMuY2xhc3NOYW1lKSx0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8YT09PSExP1wiXCI6TC5nZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIiBcIithK1wiIFwiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJihcIiBcIit0aGlzW2NdLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYyxcIiBcIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgYmM9L1xcci9nO28uZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1vLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMsbyh0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOm8uaXNBcnJheShlKSYmKGU9by5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmErXCJcIn0pKSxiPW8udmFsSG9va3NbdGhpcy50eXBlXXx8by52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwic2V0XCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsXCJ2YWx1ZVwiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1vLnZhbEhvb2tzW2UudHlwZV18fG8udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcImdldFwiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSxcInZhbHVlXCIpKT9jOihjPWUudmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGJjLFwiXCIpOm51bGw9PWM/XCJcIjpjKX19fSksby5leHRlbmQoe3ZhbEhvb2tzOntzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPVwic2VsZWN0LW9uZVwiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLCEoIWMuc2VsZWN0ZWQmJmkhPT1lfHwobC5vcHREaXNhYmxlZD9jLmRpc2FibGVkOm51bGwhPT1jLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpKXx8Yy5wYXJlbnROb2RlLmRpc2FibGVkJiZvLm5vZGVOYW1lKGMucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7aWYoYj1vKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9by5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0pZD1lW2ddLChkLnNlbGVjdGVkPW8uaW5BcnJheShvKGQpLnZhbCgpLGYpPj0wKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksby5lYWNoKFtcInJhZGlvXCIsXCJjaGVja2JveFwiXSxmdW5jdGlvbigpe28udmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihhLGIpe3JldHVybiBvLmlzQXJyYXkoYik/YS5jaGVja2VkPW8uaW5BcnJheShvKGEpLnZhbCgpLGIpPj0wOnZvaWQgMH19LGwuY2hlY2tPbnx8KG8udmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKT9cIm9uXCI6YS52YWx1ZX0pfSksby5lYWNoKFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe28uZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLG8uZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX0sYmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoYSxcIioqXCIpOnRoaXMub2ZmKGIsYXx8XCIqKlwiLGMpfX0pO3ZhciBjYz1vLm5vdygpLGRjPS9cXD8vO28ucGFyc2VKU09OPWZ1bmN0aW9uKGEpe3JldHVybiBKU09OLnBhcnNlKGErXCJcIil9LG8ucGFyc2VYTUw9ZnVuY3Rpb24oYSl7dmFyIGIsYztpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7dHJ5e2M9bmV3IERPTVBhcnNlcixiPWMucGFyc2VGcm9tU3RyaW5nKGEsXCJ0ZXh0L3htbFwiKX1jYXRjaChkKXtiPXZvaWQgMH1yZXR1cm4oIWJ8fGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJzZXJlcnJvclwiKS5sZW5ndGgpJiZvLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK2EpLGJ9O3ZhciBlYyxmYyxnYz0vIy4qJC8saGM9LyhbPyZdKV89W14mXSovLGljPS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvZ20samM9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sa2M9L14oPzpHRVR8SEVBRCkkLyxsYz0vXlxcL1xcLy8sbWM9L14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sbmM9e30sb2M9e30scGM9XCIqL1wiLmNvbmNhdChcIipcIik7dHJ5e2ZjPWxvY2F0aW9uLmhyZWZ9Y2F0Y2gocWMpe2ZjPW0uY3JlYXRlRWxlbWVudChcImFcIiksZmMuaHJlZj1cIlwiLGZjPWZjLmhyZWZ9ZWM9bWMuZXhlYyhmYy50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gcmMoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWIsYj1cIipcIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihvLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pXCIrXCI9PT1kWzBdPyhkPWQuc2xpY2UoMSl8fFwiKlwiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gc2MoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09b2M7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxvLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Yganx8Znx8ZVtqXT9mPyEoaT1qKTp2b2lkIDA6KGIuZGF0YVR5cGVzLnVuc2hpZnQoaiksZyhqKSwhMSl9KSxpfXJldHVybiBnKGIuZGF0YVR5cGVzWzBdKXx8IWVbXCIqXCJdJiZnKFwiKlwiKX1mdW5jdGlvbiB0YyhhLGIpe3ZhciBjLGQsZT1vLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZvLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gdWMoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKFwiKlwiPT09aVswXSlpLnNoaWZ0KCksdm9pZCAwPT09ZCYmKGQ9YS5taW1lVHlwZXx8Yi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7aWYoZClmb3IoZSBpbiBoKWlmKGhbZV0mJmhbZV0udGVzdChkKSl7aS51bnNoaWZ0KGUpO2JyZWFrfWlmKGlbMF1pbiBjKWY9aVswXTtlbHNle2ZvcihlIGluIGMpe2lmKCFpWzBdfHxhLmNvbnZlcnRlcnNbZStcIiBcIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gdmMoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZihcIipcIj09PWYpZj1pO2Vsc2UgaWYoXCIqXCIhPT1pJiZpIT09Zil7aWYoZz1qW2krXCIgXCIrZl18fGpbXCIqIFwiK2ZdLCFnKWZvcihlIGluIGopaWYoaD1lLnNwbGl0KFwiIFwiKSxoWzFdPT09ZiYmKGc9altpK1wiIFwiK2hbMF1dfHxqW1wiKiBcIitoWzBdXSkpe2c9PT0hMD9nPWpbZV06altlXSE9PSEwJiYoZj1oWzBdLGsudW5zaGlmdChoWzFdKSk7YnJlYWt9aWYoZyE9PSEwKWlmKGcmJmFbXCJ0aHJvd3NcIl0pYj1nKGIpO2Vsc2UgdHJ5e2I9ZyhiKX1jYXRjaChsKXtyZXR1cm57c3RhdGU6XCJwYXJzZXJlcnJvclwiLGVycm9yOmc/bDpcIk5vIGNvbnZlcnNpb24gZnJvbSBcIitpK1wiIHRvIFwiK2Z9fX1yZXR1cm57c3RhdGU6XCJzdWNjZXNzXCIsZGF0YTpifX1vLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6ZmMsdHlwZTpcIkdFVFwiLGlzTG9jYWw6amMudGVzdChlY1sxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsYWNjZXB0czp7XCIqXCI6cGMsdGV4dDpcInRleHQvcGxhaW5cIixodG1sOlwidGV4dC9odG1sXCIseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGpzb246XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIn0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDpcInJlc3BvbnNlWE1MXCIsdGV4dDpcInJlc3BvbnNlVGV4dFwiLGpzb246XCJyZXNwb25zZUpTT05cIn0sY29udmVydGVyczp7XCIqIHRleHRcIjpTdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOm8ucGFyc2VKU09OLFwidGV4dCB4bWxcIjpvLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj90Yyh0YyhhLG8uYWpheFNldHRpbmdzKSxiKTp0YyhvLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpyYyhuYyksYWpheFRyYW5zcG9ydDpyYyhvYyksYWpheDpmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxiPWJ8fHt9O3ZhciBjLGQsZSxmLGcsaCxpLGosaz1vLmFqYXhTZXR1cCh7fSxiKSxsPWsuY29udGV4dHx8ayxtPWsuY29udGV4dCYmKGwubm9kZVR5cGV8fGwuanF1ZXJ5KT9vKGwpOm8uZXZlbnQsbj1vLkRlZmVycmVkKCkscD1vLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHE9ay5zdGF0dXNDb2RlfHx7fSxyPXt9LHM9e30sdD0wLHU9XCJjYW5jZWxlZFwiLHY9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dCl7aWYoIWYpe2Y9e307d2hpbGUoYj1pYy5leGVjKGUpKWZbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9ZlthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT10P2U6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdHx8KGE9c1tjXT1zW2NdfHxhLHJbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdHx8KGsubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dClmb3IoYiBpbiBhKXFbYl09W3FbYl0sYVtiXV07ZWxzZSB2LmFsd2F5cyhhW3Yuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHU7cmV0dXJuIGMmJmMuYWJvcnQoYikseCgwLGIpLHRoaXN9fTtpZihuLnByb21pc2UodikuY29tcGxldGU9cC5hZGQsdi5zdWNjZXNzPXYuZG9uZSx2LmVycm9yPXYuZmFpbCxrLnVybD0oKGF8fGsudXJsfHxmYykrXCJcIikucmVwbGFjZShnYyxcIlwiKS5yZXBsYWNlKGxjLGVjWzFdK1wiLy9cIiksay50eXBlPWIubWV0aG9kfHxiLnR5cGV8fGsubWV0aG9kfHxrLnR5cGUsay5kYXRhVHlwZXM9by50cmltKGsuZGF0YVR5cGV8fFwiKlwiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXCJcIl0sbnVsbD09ay5jcm9zc0RvbWFpbiYmKGg9bWMuZXhlYyhrLnVybC50b0xvd2VyQ2FzZSgpKSxrLmNyb3NzRG9tYWluPSEoIWh8fGhbMV09PT1lY1sxXSYmaFsyXT09PWVjWzJdJiYoaFszXXx8KFwiaHR0cDpcIj09PWhbMV0/XCI4MFwiOlwiNDQzXCIpKT09PShlY1szXXx8KFwiaHR0cDpcIj09PWVjWzFdP1wiODBcIjpcIjQ0M1wiKSkpKSxrLmRhdGEmJmsucHJvY2Vzc0RhdGEmJlwic3RyaW5nXCIhPXR5cGVvZiBrLmRhdGEmJihrLmRhdGE9by5wYXJhbShrLmRhdGEsay50cmFkaXRpb25hbCkpLHNjKG5jLGssYix2KSwyPT09dClyZXR1cm4gdjtpPWsuZ2xvYmFsLGkmJjA9PT1vLmFjdGl2ZSsrJiZvLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIiksay50eXBlPWsudHlwZS50b1VwcGVyQ2FzZSgpLGsuaGFzQ29udGVudD0ha2MudGVzdChrLnR5cGUpLGQ9ay51cmwsay5oYXNDb250ZW50fHwoay5kYXRhJiYoZD1rLnVybCs9KGRjLnRlc3QoZCk/XCImXCI6XCI/XCIpK2suZGF0YSxkZWxldGUgay5kYXRhKSxrLmNhY2hlPT09ITEmJihrLnVybD1oYy50ZXN0KGQpP2QucmVwbGFjZShoYyxcIiQxXz1cIitjYysrKTpkKyhkYy50ZXN0KGQpP1wiJlwiOlwiP1wiKStcIl89XCIrY2MrKykpLGsuaWZNb2RpZmllZCYmKG8ubGFzdE1vZGlmaWVkW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLG8ubGFzdE1vZGlmaWVkW2RdKSxvLmV0YWdbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIixvLmV0YWdbZF0pKSwoay5kYXRhJiZrLmhhc0NvbnRlbnQmJmsuY29udGVudFR5cGUhPT0hMXx8Yi5jb250ZW50VHlwZSkmJnYuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLGsuY29udGVudFR5cGUpLHYuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLGsuZGF0YVR5cGVzWzBdJiZrLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dP2suYWNjZXB0c1trLmRhdGFUeXBlc1swXV0rKFwiKlwiIT09ay5kYXRhVHlwZXNbMF0/XCIsIFwiK3BjK1wiOyBxPTAuMDFcIjpcIlwiKTprLmFjY2VwdHNbXCIqXCJdKTtmb3IoaiBpbiBrLmhlYWRlcnMpdi5zZXRSZXF1ZXN0SGVhZGVyKGosay5oZWFkZXJzW2pdKTtpZihrLmJlZm9yZVNlbmQmJihrLmJlZm9yZVNlbmQuY2FsbChsLHYsayk9PT0hMXx8Mj09PXQpKXJldHVybiB2LmFib3J0KCk7dT1cImFib3J0XCI7Zm9yKGogaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pdltqXShrW2pdKTtpZihjPXNjKG9jLGssYix2KSl7di5yZWFkeVN0YXRlPTEsaSYmbS50cmlnZ2VyKFwiYWpheFNlbmRcIixbdixrXSksay5hc3luYyYmay50aW1lb3V0PjAmJihnPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2LmFib3J0KFwidGltZW91dFwiKX0say50aW1lb3V0KSk7dHJ5e3Q9MSxjLnNlbmQocix4KX1jYXRjaCh3KXtpZighKDI+dCkpdGhyb3cgdzt4KC0xLHcpfX1lbHNlIHgoLTEsXCJObyBUcmFuc3BvcnRcIik7ZnVuY3Rpb24geChhLGIsZixoKXt2YXIgaixyLHMsdSx3LHg9YjsyIT09dCYmKHQ9MixnJiZjbGVhclRpbWVvdXQoZyksYz12b2lkIDAsZT1ofHxcIlwiLHYucmVhZHlTdGF0ZT1hPjA/NDowLGo9YT49MjAwJiYzMDA+YXx8MzA0PT09YSxmJiYodT11YyhrLHYsZikpLHU9dmMoayx1LHYsaiksaj8oay5pZk1vZGlmaWVkJiYodz12LmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSx3JiYoby5sYXN0TW9kaWZpZWRbZF09dyksdz12LmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKSx3JiYoby5ldGFnW2RdPXcpKSwyMDQ9PT1hfHxcIkhFQURcIj09PWsudHlwZT94PVwibm9jb250ZW50XCI6MzA0PT09YT94PVwibm90bW9kaWZpZWRcIjooeD11LnN0YXRlLHI9dS5kYXRhLHM9dS5lcnJvcixqPSFzKSk6KHM9eCwoYXx8IXgpJiYoeD1cImVycm9yXCIsMD5hJiYoYT0wKSkpLHYuc3RhdHVzPWEsdi5zdGF0dXNUZXh0PShifHx4KStcIlwiLGo/bi5yZXNvbHZlV2l0aChsLFtyLHgsdl0pOm4ucmVqZWN0V2l0aChsLFt2LHgsc10pLHYuc3RhdHVzQ29kZShxKSxxPXZvaWQgMCxpJiZtLnRyaWdnZXIoaj9cImFqYXhTdWNjZXNzXCI6XCJhamF4RXJyb3JcIixbdixrLGo/cjpzXSkscC5maXJlV2l0aChsLFt2LHhdKSxpJiYobS50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW3Ysa10pLC0tby5hY3RpdmV8fG8uZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpKSl9cmV0dXJuIHZ9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBvLmdldChhLGIsYyxcImpzb25cIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiBvLmdldChhLHZvaWQgMCxiLFwic2NyaXB0XCIpfX0pLG8uZWFjaChbXCJnZXRcIixcInBvc3RcIl0sZnVuY3Rpb24oYSxiKXtvW2JdPWZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBvLmlzRnVuY3Rpb24oYykmJihlPWV8fGQsZD1jLGM9dm9pZCAwKSxvLmFqYXgoe3VybDphLHR5cGU6YixkYXRhVHlwZTplLGRhdGE6YyxzdWNjZXNzOmR9KX19KSxvLmVhY2goW1wiYWpheFN0YXJ0XCIsXCJhamF4U3RvcFwiLFwiYWpheENvbXBsZXRlXCIsXCJhamF4RXJyb3JcIixcImFqYXhTdWNjZXNzXCIsXCJhamF4U2VuZFwiXSxmdW5jdGlvbihhLGIpe28uZm5bYl09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub24oYixhKX19KSxvLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBvLmFqYXgoe3VybDphLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSl9LG8uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBvLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe28odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9byhhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goby5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGIpe28odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX06ZnVuY3Rpb24oKXt2YXIgYj1vKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPW8uaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe28odGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtvLm5vZGVOYW1lKHRoaXMsXCJib2R5XCIpfHxvKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxvLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wfSxvLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFvLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciB3Yz0vJTIwL2cseGM9L1xcW1xcXSQvLHljPS9cXHI/XFxuL2csemM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLEFjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBCYyhhLGIsYyxkKXt2YXIgZTtpZihvLmlzQXJyYXkoYikpby5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx4Yy50ZXN0KGEpP2QoYSxlKTpCYyhhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PW8udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKUJjKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9by5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9by5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iP1wiXCI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1vLmFqYXhTZXR0aW5ncyYmby5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG8uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFvLmlzUGxhaW5PYmplY3QoYSkpby5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlCYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKS5yZXBsYWNlKHdjLFwiK1wiKX0sby5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBvLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9by5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9vLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFvKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZBYy50ZXN0KHRoaXMubm9kZU5hbWUpJiYhemMudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVQudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1vKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6by5pc0FycmF5KGMpP28ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZSh5YyxcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKHljLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLG8uYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGEpe319O3ZhciBDYz0wLERjPXt9LEVjPXswOjIwMCwxMjIzOjIwNH0sRmM9by5hamF4U2V0dGluZ3MueGhyKCk7YS5BY3RpdmVYT2JqZWN0JiZvKGEpLm9uKFwidW5sb2FkXCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gRGMpRGNbYV0oKX0pLGwuY29ycz0hIUZjJiZcIndpdGhDcmVkZW50aWFsc1wiaW4gRmMsbC5hamF4PUZjPSEhRmMsby5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBsLmNvcnN8fEZjJiYhYS5jcm9zc0RvbWFpbj97c2VuZDpmdW5jdGlvbihjLGQpe3ZhciBlLGY9YS54aHIoKSxnPSsrQ2M7aWYoZi5vcGVuKGEudHlwZSxhLnVybCxhLmFzeW5jLGEudXNlcm5hbWUsYS5wYXNzd29yZCksYS54aHJGaWVsZHMpZm9yKGUgaW4gYS54aHJGaWVsZHMpZltlXT1hLnhockZpZWxkc1tlXTthLm1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZShhLm1pbWVUeXBlKSxhLmNyb3NzRG9tYWlufHxjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7Zm9yKGUgaW4gYylmLnNldFJlcXVlc3RIZWFkZXIoZSxjW2VdKTtiPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2ImJihkZWxldGUgRGNbZ10sYj1mLm9ubG9hZD1mLm9uZXJyb3I9bnVsbCxcImFib3J0XCI9PT1hP2YuYWJvcnQoKTpcImVycm9yXCI9PT1hP2QoZi5zdGF0dXMsZi5zdGF0dXNUZXh0KTpkKEVjW2Yuc3RhdHVzXXx8Zi5zdGF0dXMsZi5zdGF0dXNUZXh0LFwic3RyaW5nXCI9PXR5cGVvZiBmLnJlc3BvbnNlVGV4dD97dGV4dDpmLnJlc3BvbnNlVGV4dH06dm9pZCAwLGYuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGYub25sb2FkPWIoKSxmLm9uZXJyb3I9YihcImVycm9yXCIpLGI9RGNbZ109YihcImFib3J0XCIpLGYuc2VuZChhLmhhc0NvbnRlbnQmJmEuZGF0YXx8bnVsbCl9LGFib3J0OmZ1bmN0aW9uKCl7YiYmYigpfX06dm9pZCAwfSksby5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDpcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOntcInRleHQgc2NyaXB0XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIG8uZ2xvYmFsRXZhbChhKSxhfX19KSxvLmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIixmdW5jdGlvbihhKXt2b2lkIDA9PT1hLmNhY2hlJiYoYS5jYWNoZT0hMSksYS5jcm9zc0RvbWFpbiYmKGEudHlwZT1cIkdFVFwiKX0pLG8uYWpheFRyYW5zcG9ydChcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZCxlKXtiPW8oXCI8c2NyaXB0PlwiKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmEuc2NyaXB0Q2hhcnNldCxzcmM6YS51cmx9KS5vbihcImxvYWQgZXJyb3JcIixjPWZ1bmN0aW9uKGEpe2IucmVtb3ZlKCksYz1udWxsLGEmJmUoXCJlcnJvclwiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLG0uaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgR2M9W10sSGM9Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztvLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1HYy5wb3AoKXx8by5leHBhbmRvK1wiX1wiK2NjKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxvLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKEhjLnRlc3QoYi51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIGIuZGF0YSYmIShiLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZIYy50ZXN0KGIuZGF0YSkmJlwiZGF0YVwiKTtyZXR1cm4gaHx8XCJqc29ucFwiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW8uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKEhjLFwiJDFcIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KGRjLnRlc3QoYi51cmwpP1wiJlwiOlwiP1wiKStiLmpzb25wK1wiPVwiK2UpLGIuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG8uZXJyb3IoZStcIiB3YXMgbm90IGNhbGxlZFwiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT1cImpzb25cIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe2FbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxHYy5wdXNoKGUpKSxnJiZvLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLFwic2NyaXB0XCIpOnZvaWQgMH0pLG8ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7XCJib29sZWFuXCI9PXR5cGVvZiBiJiYoYz1iLGI9ITEpLGI9Ynx8bTt2YXIgZD12LmV4ZWMoYSksZT0hYyYmW107cmV0dXJuIGQ/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9by5idWlsZEZyYWdtZW50KFthXSxiLGUpLGUmJmUubGVuZ3RoJiZvKGUpLnJlbW92ZSgpLG8ubWVyZ2UoW10sZC5jaGlsZE5vZGVzKSl9O3ZhciBJYz1vLmZuLmxvYWQ7by5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmSWMpcmV0dXJuIEljLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD49MCYmKGQ9YS5zbGljZShoKSxhPWEuc2xpY2UoMCxoKSksby5pc0Z1bmN0aW9uKGIpPyhjPWIsYj12b2lkIDApOmImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoZT1cIlBPU1RcIiksZy5sZW5ndGg+MCYmby5hamF4KHt1cmw6YSx0eXBlOmUsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9vKFwiPGRpdj5cIikuYXBwZW5kKG8ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuY29tcGxldGUoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goYyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KSx0aGlzfSxvLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gby5ncmVwKG8udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgSmM9YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gS2MoYSl7cmV0dXJuIG8uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31vLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW8uY3NzKGEsXCJwb3NpdGlvblwiKSxsPW8oYSksbT17fTtcInN0YXRpY1wiPT09ayYmKGEuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxoPWwub2Zmc2V0KCksZj1vLmNzcyhhLFwidG9wXCIpLGk9by5jc3MoYSxcImxlZnRcIiksaj0oXCJhYnNvbHV0ZVwiPT09a3x8XCJmaXhlZFwiPT09aykmJihmK2kpLmluZGV4T2YoXCJhdXRvXCIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxvLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsaCkpLG51bGwhPWIudG9wJiYobS50b3A9Yi50b3AtaC50b3ArZyksbnVsbCE9Yi5sZWZ0JiYobS5sZWZ0PWIubGVmdC1oLmxlZnQrZSksXCJ1c2luZ1wiaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG8uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtvLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXRoaXNbMF0sZT17dG9wOjAsbGVmdDowfSxmPWQmJmQub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG8uY29udGFpbnMoYixkKT8odHlwZW9mIGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09VSYmKGU9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1LYyhmKSx7dG9wOmUudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTplfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuXCJmaXhlZFwiPT09by5jc3MoYyxcInBvc2l0aW9uXCIpP2I9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxvLm5vZGVOYW1lKGFbMF0sXCJodG1sXCIpfHwoZD1hLm9mZnNldCgpKSxkLnRvcCs9by5jc3MoYVswXSxcImJvcmRlclRvcFdpZHRoXCIsITApLGQubGVmdCs9by5jc3MoYVswXSxcImJvcmRlckxlZnRXaWR0aFwiLCEwKSkse3RvcDpiLnRvcC1kLnRvcC1vLmNzcyhjLFwibWFyZ2luVG9wXCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1vLmNzcyhjLFwibWFyZ2luTGVmdFwiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8SmM7d2hpbGUoYSYmIW8ubm9kZU5hbWUoYSxcImh0bWxcIikmJlwic3RhdGljXCI9PT1vLmNzcyhhLFwicG9zaXRpb25cIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8SmN9KX19KSxvLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGIsYyl7dmFyIGQ9XCJwYWdlWU9mZnNldFwiPT09YztvLmZuW2JdPWZ1bmN0aW9uKGUpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixlLGYpe3ZhciBnPUtjKGIpO3JldHVybiB2b2lkIDA9PT1mP2c/Z1tjXTpiW2VdOnZvaWQoZz9nLnNjcm9sbFRvKGQ/YS5wYWdlWE9mZnNldDpmLGQ/ZjphLnBhZ2VZT2Zmc2V0KTpiW2VdPWYpfSxiLGUsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxvLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7by5jc3NIb29rc1tiXT15YihsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz14YihhLGIpLHZiLnRlc3QoYyk/byhhKS5wb3NpdGlvbigpW2JdK1wicHhcIjpjKTp2b2lkIDB9KX0pLG8uZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe28uZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXtvLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gby5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGVbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxlW1wib2Zmc2V0XCIrYV0sZVtcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZD9vLmNzcyhiLGMsZyk6by5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxvLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG8uZm4uYW5kU2VsZj1vLmZuLmFkZEJhY2ssXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBvfSk7dmFyIExjPWEualF1ZXJ5LE1jPWEuJDtyZXR1cm4gby5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1vJiYoYS4kPU1jKSxiJiZhLmpRdWVyeT09PW8mJihhLmpRdWVyeT1MYyksb30sdHlwZW9mIGI9PT1VJiYoYS5qUXVlcnk9YS4kPW8pLG99KTtcbiIsIi8qISBqUXVlcnkgTWlncmF0ZSB2MS4yLjEgfCAoYykgMjAwNSwgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovXG5qUXVlcnkubWlncmF0ZU11dGU9PT12b2lkIDAmJihqUXVlcnkubWlncmF0ZU11dGU9ITApLGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKG4pe3ZhciByPXQuY29uc29sZTtpW25dfHwoaVtuXT0hMCxlLm1pZ3JhdGVXYXJuaW5ncy5wdXNoKG4pLHImJnIud2FybiYmIWUubWlncmF0ZU11dGUmJihyLndhcm4oXCJKUU1JR1JBVEU6IFwiK24pLGUubWlncmF0ZVRyYWNlJiZyLnRyYWNlJiZyLnRyYWNlKCkpKX1mdW5jdGlvbiBhKHQsYSxpLG8pe2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSl0cnl7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGEse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiByKG8pLGl9LHNldDpmdW5jdGlvbihlKXtyKG8pLGk9ZX19KSxufWNhdGNoKHMpe31lLl9kZWZpbmVQcm9wZXJ0eUJyb2tlbj0hMCx0W2FdPWl9dmFyIGk9e307ZS5taWdyYXRlV2FybmluZ3M9W10sIWUubWlncmF0ZU11dGUmJnQuY29uc29sZSYmdC5jb25zb2xlLmxvZyYmdC5jb25zb2xlLmxvZyhcIkpRTUlHUkFURTogTG9nZ2luZyBpcyBhY3RpdmVcIiksZS5taWdyYXRlVHJhY2U9PT1uJiYoZS5taWdyYXRlVHJhY2U9ITApLGUubWlncmF0ZVJlc2V0PWZ1bmN0aW9uKCl7aT17fSxlLm1pZ3JhdGVXYXJuaW5ncy5sZW5ndGg9MH0sXCJCYWNrQ29tcGF0XCI9PT1kb2N1bWVudC5jb21wYXRNb2RlJiZyKFwialF1ZXJ5IGlzIG5vdCBjb21wYXRpYmxlIHdpdGggUXVpcmtzIE1vZGVcIik7dmFyIG89ZShcIjxpbnB1dC8+XCIse3NpemU6MX0pLmF0dHIoXCJzaXplXCIpJiZlLmF0dHJGbixzPWUuYXR0cix1PWUuYXR0ckhvb2tzLnZhbHVlJiZlLmF0dHJIb29rcy52YWx1ZS5nZXR8fGZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGM9ZS5hdHRySG9va3MudmFsdWUmJmUuYXR0ckhvb2tzLnZhbHVlLnNldHx8ZnVuY3Rpb24oKXtyZXR1cm4gbn0sbD0vXig/OmlucHV0fGJ1dHRvbikkL2ksZD0vXlsyMzhdJC8scD0vXig/OmF1dG9mb2N1c3xhdXRvcGxheXxhc3luY3xjaGVja2VkfGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkfHNlbGVjdGVkKSQvaSxmPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2k7YShlLFwiYXR0ckZuXCIsb3x8e30sXCJqUXVlcnkuYXR0ckZuIGlzIGRlcHJlY2F0ZWRcIiksZS5hdHRyPWZ1bmN0aW9uKHQsYSxpLHUpe3ZhciBjPWEudG9Mb3dlckNhc2UoKSxnPXQmJnQubm9kZVR5cGU7cmV0dXJuIHUmJig0PnMubGVuZ3RoJiZyKFwialF1ZXJ5LmZuLmF0dHIoIHByb3BzLCBwYXNzICkgaXMgZGVwcmVjYXRlZFwiKSx0JiYhZC50ZXN0KGcpJiYobz9hIGluIG86ZS5pc0Z1bmN0aW9uKGUuZm5bYV0pKSk/ZSh0KVthXShpKTooXCJ0eXBlXCI9PT1hJiZpIT09biYmbC50ZXN0KHQubm9kZU5hbWUpJiZ0LnBhcmVudE5vZGUmJnIoXCJDYW4ndCBjaGFuZ2UgdGhlICd0eXBlJyBvZiBhbiBpbnB1dCBvciBidXR0b24gaW4gSUUgNi83LzhcIiksIWUuYXR0ckhvb2tzW2NdJiZwLnRlc3QoYykmJihlLmF0dHJIb29rc1tjXT17Z2V0OmZ1bmN0aW9uKHQscil7dmFyIGEsaT1lLnByb3AodCxyKTtyZXR1cm4gaT09PSEwfHxcImJvb2xlYW5cIiE9dHlwZW9mIGkmJihhPXQuZ2V0QXR0cmlidXRlTm9kZShyKSkmJmEubm9kZVZhbHVlIT09ITE/ci50b0xvd2VyQ2FzZSgpOm59LHNldDpmdW5jdGlvbih0LG4scil7dmFyIGE7cmV0dXJuIG49PT0hMT9lLnJlbW92ZUF0dHIodCxyKTooYT1lLnByb3BGaXhbcl18fHIsYSBpbiB0JiYodFthXT0hMCksdC5zZXRBdHRyaWJ1dGUocixyLnRvTG93ZXJDYXNlKCkpKSxyfX0sZi50ZXN0KGMpJiZyKFwialF1ZXJ5LmZuLmF0dHIoJ1wiK2MrXCInKSBtYXkgdXNlIHByb3BlcnR5IGluc3RlYWQgb2YgYXR0cmlidXRlXCIpKSxzLmNhbGwoZSx0LGEsaSkpfSxlLmF0dHJIb29rcy52YWx1ZT17Z2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49KGUubm9kZU5hbWV8fFwiXCIpLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJidXR0b25cIj09PW4/dS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KFwiaW5wdXRcIiE9PW4mJlwib3B0aW9uXCIhPT1uJiZyKFwialF1ZXJ5LmZuLmF0dHIoJ3ZhbHVlJykgbm8gbG9uZ2VyIGdldHMgcHJvcGVydGllc1wiKSx0IGluIGU/ZS52YWx1ZTpudWxsKX0sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIGE9KGUubm9kZU5hbWV8fFwiXCIpLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJidXR0b25cIj09PWE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KFwiaW5wdXRcIiE9PWEmJlwib3B0aW9uXCIhPT1hJiZyKFwialF1ZXJ5LmZuLmF0dHIoJ3ZhbHVlJywgdmFsKSBubyBsb25nZXIgc2V0cyBwcm9wZXJ0aWVzXCIpLGUudmFsdWU9dCxuKX19O3ZhciBnLGgsdj1lLmZuLmluaXQsbT1lLnBhcnNlSlNPTix5PS9eKFtePF0qKSg8W1xcd1xcV10rPikoW14+XSopJC87ZS5mbi5pbml0PWZ1bmN0aW9uKHQsbixhKXt2YXIgaTtyZXR1cm4gdCYmXCJzdHJpbmdcIj09dHlwZW9mIHQmJiFlLmlzUGxhaW5PYmplY3QobikmJihpPXkuZXhlYyhlLnRyaW0odCkpKSYmaVswXSYmKFwiPFwiIT09dC5jaGFyQXQoMCkmJnIoXCIkKGh0bWwpIEhUTUwgc3RyaW5ncyBtdXN0IHN0YXJ0IHdpdGggJzwnIGNoYXJhY3RlclwiKSxpWzNdJiZyKFwiJChodG1sKSBIVE1MIHRleHQgYWZ0ZXIgbGFzdCB0YWcgaXMgaWdub3JlZFwiKSxcIiNcIj09PWlbMF0uY2hhckF0KDApJiYocihcIkhUTUwgc3RyaW5nIGNhbm5vdCBzdGFydCB3aXRoIGEgJyMnIGNoYXJhY3RlclwiKSxlLmVycm9yKFwiSlFNSUdSQVRFOiBJbnZhbGlkIHNlbGVjdG9yIHN0cmluZyAoWFNTKVwiKSksbiYmbi5jb250ZXh0JiYobj1uLmNvbnRleHQpLGUucGFyc2VIVE1MKT92LmNhbGwodGhpcyxlLnBhcnNlSFRNTChpWzJdLG4sITApLG4sYSk6di5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZm4uaW5pdC5wcm90b3R5cGU9ZS5mbixlLnBhcnNlSlNPTj1mdW5jdGlvbihlKXtyZXR1cm4gZXx8bnVsbD09PWU/bS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KHIoXCJqUXVlcnkucGFyc2VKU09OIHJlcXVpcmVzIGEgdmFsaWQgSlNPTiBzdHJpbmdcIiksbnVsbCl9LGUudWFNYXRjaD1mdW5jdGlvbihlKXtlPWUudG9Mb3dlckNhc2UoKTt2YXIgdD0vKGNocm9tZSlbIFxcL10oW1xcdy5dKykvLmV4ZWMoZSl8fC8od2Via2l0KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyhlKXx8LyhvcGVyYSkoPzouKnZlcnNpb258KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyhlKXx8Lyhtc2llKSAoW1xcdy5dKykvLmV4ZWMoZSl8fDA+ZS5pbmRleE9mKFwiY29tcGF0aWJsZVwiKSYmLyhtb3ppbGxhKSg/Oi4qPyBydjooW1xcdy5dKyl8KS8uZXhlYyhlKXx8W107cmV0dXJue2Jyb3dzZXI6dFsxXXx8XCJcIix2ZXJzaW9uOnRbMl18fFwiMFwifX0sZS5icm93c2VyfHwoZz1lLnVhTWF0Y2gobmF2aWdhdG9yLnVzZXJBZ2VudCksaD17fSxnLmJyb3dzZXImJihoW2cuYnJvd3Nlcl09ITAsaC52ZXJzaW9uPWcudmVyc2lvbiksaC5jaHJvbWU/aC53ZWJraXQ9ITA6aC53ZWJraXQmJihoLnNhZmFyaT0hMCksZS5icm93c2VyPWgpLGEoZSxcImJyb3dzZXJcIixlLmJyb3dzZXIsXCJqUXVlcnkuYnJvd3NlciBpcyBkZXByZWNhdGVkXCIpLGUuc3ViPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3JldHVybiBuZXcgdC5mbi5pbml0KGUsbil9ZS5leHRlbmQoITAsdCx0aGlzKSx0LnN1cGVyY2xhc3M9dGhpcyx0LmZuPXQucHJvdG90eXBlPXRoaXMoKSx0LmZuLmNvbnN0cnVjdG9yPXQsdC5zdWI9dGhpcy5zdWIsdC5mbi5pbml0PWZ1bmN0aW9uKHIsYSl7cmV0dXJuIGEmJmEgaW5zdGFuY2VvZiBlJiYhKGEgaW5zdGFuY2VvZiB0KSYmKGE9dChhKSksZS5mbi5pbml0LmNhbGwodGhpcyxyLGEsbil9LHQuZm4uaW5pdC5wcm90b3R5cGU9dC5mbjt2YXIgbj10KGRvY3VtZW50KTtyZXR1cm4gcihcImpRdWVyeS5zdWIoKSBpcyBkZXByZWNhdGVkXCIpLHR9LGUuYWpheFNldHVwKHtjb252ZXJ0ZXJzOntcInRleHQganNvblwiOmUucGFyc2VKU09OfX0pO3ZhciBiPWUuZm4uZGF0YTtlLmZuLmRhdGE9ZnVuY3Rpb24odCl7dmFyIGEsaSxvPXRoaXNbMF07cmV0dXJuIW98fFwiZXZlbnRzXCIhPT10fHwxIT09YXJndW1lbnRzLmxlbmd0aHx8KGE9ZS5kYXRhKG8sdCksaT1lLl9kYXRhKG8sdCksYSE9PW4mJmEhPT1pfHxpPT09bik/Yi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KHIoXCJVc2Ugb2YgalF1ZXJ5LmZuLmRhdGEoJ2V2ZW50cycpIGlzIGRlcHJlY2F0ZWRcIiksaSl9O3ZhciBqPS9cXC8oamF2YXxlY21hKXNjcmlwdC9pLHc9ZS5mbi5hbmRTZWxmfHxlLmZuLmFkZEJhY2s7ZS5mbi5hbmRTZWxmPWZ1bmN0aW9uKCl7cmV0dXJuIHIoXCJqUXVlcnkuZm4uYW5kU2VsZigpIHJlcGxhY2VkIGJ5IGpRdWVyeS5mbi5hZGRCYWNrKClcIiksdy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuY2xlYW58fChlLmNsZWFuPWZ1bmN0aW9uKHQsYSxpLG8pe2E9YXx8ZG9jdW1lbnQsYT0hYS5ub2RlVHlwZSYmYVswXXx8YSxhPWEub3duZXJEb2N1bWVudHx8YSxyKFwialF1ZXJ5LmNsZWFuKCkgaXMgZGVwcmVjYXRlZFwiKTt2YXIgcyx1LGMsbCxkPVtdO2lmKGUubWVyZ2UoZCxlLmJ1aWxkRnJhZ21lbnQodCxhKS5jaGlsZE5vZGVzKSxpKWZvcihjPWZ1bmN0aW9uKGUpe3JldHVybiFlLnR5cGV8fGoudGVzdChlLnR5cGUpP28/by5wdXNoKGUucGFyZW50Tm9kZT9lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSk6ZSk6aS5hcHBlbmRDaGlsZChlKTpufSxzPTA7bnVsbCE9KHU9ZFtzXSk7cysrKWUubm9kZU5hbWUodSxcInNjcmlwdFwiKSYmYyh1KXx8KGkuYXBwZW5kQ2hpbGQodSksdS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PW4mJihsPWUuZ3JlcChlLm1lcmdlKFtdLHUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIikpLGMpLGQuc3BsaWNlLmFwcGx5KGQsW3MrMSwwXS5jb25jYXQobCkpLHMrPWwubGVuZ3RoKSk7cmV0dXJuIGR9KTt2YXIgUT1lLmV2ZW50LmFkZCx4PWUuZXZlbnQucmVtb3ZlLGs9ZS5ldmVudC50cmlnZ2VyLE49ZS5mbi50b2dnbGUsVD1lLmZuLmxpdmUsTT1lLmZuLmRpZSxTPVwiYWpheFN0YXJ0fGFqYXhTdG9wfGFqYXhTZW5kfGFqYXhDb21wbGV0ZXxhamF4RXJyb3J8YWpheFN1Y2Nlc3NcIixDPVJlZ0V4cChcIlxcXFxiKD86XCIrUytcIilcXFxcYlwiKSxIPS8oPzpefFxccylob3ZlcihcXC5cXFMrfClcXGIvLEE9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIHR8fGUuZXZlbnQuc3BlY2lhbC5ob3Zlcj90OihILnRlc3QodCkmJnIoXCInaG92ZXInIHBzZXVkby1ldmVudCBpcyBkZXByZWNhdGVkLCB1c2UgJ21vdXNlZW50ZXIgbW91c2VsZWF2ZSdcIiksdCYmdC5yZXBsYWNlKEgsXCJtb3VzZWVudGVyJDEgbW91c2VsZWF2ZSQxXCIpKX07ZS5ldmVudC5wcm9wcyYmXCJhdHRyQ2hhbmdlXCIhPT1lLmV2ZW50LnByb3BzWzBdJiZlLmV2ZW50LnByb3BzLnVuc2hpZnQoXCJhdHRyQ2hhbmdlXCIsXCJhdHRyTmFtZVwiLFwicmVsYXRlZE5vZGVcIixcInNyY0VsZW1lbnRcIiksZS5ldmVudC5kaXNwYXRjaCYmYShlLmV2ZW50LFwiaGFuZGxlXCIsZS5ldmVudC5kaXNwYXRjaCxcImpRdWVyeS5ldmVudC5oYW5kbGUgaXMgdW5kb2N1bWVudGVkIGFuZCBkZXByZWNhdGVkXCIpLGUuZXZlbnQuYWRkPWZ1bmN0aW9uKGUsdCxuLGEsaSl7ZSE9PWRvY3VtZW50JiZDLnRlc3QodCkmJnIoXCJBSkFYIGV2ZW50cyBzaG91bGQgYmUgYXR0YWNoZWQgdG8gZG9jdW1lbnQ6IFwiK3QpLFEuY2FsbCh0aGlzLGUsQSh0fHxcIlwiKSxuLGEsaSl9LGUuZXZlbnQucmVtb3ZlPWZ1bmN0aW9uKGUsdCxuLHIsYSl7eC5jYWxsKHRoaXMsZSxBKHQpfHxcIlwiLG4scixhKX0sZS5mbi5lcnJvcj1mdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gcihcImpRdWVyeS5mbi5lcnJvcigpIGlzIGRlcHJlY2F0ZWRcIiksZS5zcGxpY2UoMCwwLFwiZXJyb3JcIiksYXJndW1lbnRzLmxlbmd0aD90aGlzLmJpbmQuYXBwbHkodGhpcyxlKToodGhpcy50cmlnZ2VySGFuZGxlci5hcHBseSh0aGlzLGUpLHRoaXMpfSxlLmZuLnRvZ2dsZT1mdW5jdGlvbih0LG4pe2lmKCFlLmlzRnVuY3Rpb24odCl8fCFlLmlzRnVuY3Rpb24obikpcmV0dXJuIE4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3IoXCJqUXVlcnkuZm4udG9nZ2xlKGhhbmRsZXIsIGhhbmRsZXIuLi4pIGlzIGRlcHJlY2F0ZWRcIik7dmFyIGE9YXJndW1lbnRzLGk9dC5ndWlkfHxlLmd1aWQrKyxvPTAscz1mdW5jdGlvbihuKXt2YXIgcj0oZS5fZGF0YSh0aGlzLFwibGFzdFRvZ2dsZVwiK3QuZ3VpZCl8fDApJW87cmV0dXJuIGUuX2RhdGEodGhpcyxcImxhc3RUb2dnbGVcIit0Lmd1aWQscisxKSxuLnByZXZlbnREZWZhdWx0KCksYVtyXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fCExfTtmb3Iocy5ndWlkPWk7YS5sZW5ndGg+bzspYVtvKytdLmd1aWQ9aTtyZXR1cm4gdGhpcy5jbGljayhzKX0sZS5mbi5saXZlPWZ1bmN0aW9uKHQsbixhKXtyZXR1cm4gcihcImpRdWVyeS5mbi5saXZlKCkgaXMgZGVwcmVjYXRlZFwiKSxUP1QuYXBwbHkodGhpcyxhcmd1bWVudHMpOihlKHRoaXMuY29udGV4dCkub24odCx0aGlzLnNlbGVjdG9yLG4sYSksdGhpcyl9LGUuZm4uZGllPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHIoXCJqUXVlcnkuZm4uZGllKCkgaXMgZGVwcmVjYXRlZFwiKSxNP00uYXBwbHkodGhpcyxhcmd1bWVudHMpOihlKHRoaXMuY29udGV4dCkub2ZmKHQsdGhpcy5zZWxlY3Rvcnx8XCIqKlwiLG4pLHRoaXMpfSxlLmV2ZW50LnRyaWdnZXI9ZnVuY3Rpb24oZSx0LG4sYSl7cmV0dXJuIG58fEMudGVzdChlKXx8cihcIkdsb2JhbCBldmVudHMgYXJlIHVuZG9jdW1lbnRlZCBhbmQgZGVwcmVjYXRlZFwiKSxrLmNhbGwodGhpcyxlLHQsbnx8ZG9jdW1lbnQsYSl9LGUuZWFjaChTLnNwbGl0KFwifFwiKSxmdW5jdGlvbih0LG4pe2UuZXZlbnQuc3BlY2lhbFtuXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0IT09ZG9jdW1lbnQmJihlLmV2ZW50LmFkZChkb2N1bWVudCxuK1wiLlwiK2UuZ3VpZCxmdW5jdGlvbigpe2UuZXZlbnQudHJpZ2dlcihuLG51bGwsdCwhMCl9KSxlLl9kYXRhKHRoaXMsbixlLmd1aWQrKykpLCExfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09ZG9jdW1lbnQmJmUuZXZlbnQucmVtb3ZlKGRvY3VtZW50LG4rXCIuXCIrZS5fZGF0YSh0aGlzLG4pKSwhMX19fSl9KGpRdWVyeSx3aW5kb3cpOyIsIi8qISBqUXVlcnkgVUkgLSB2MS4xMS4zIC0gMjAxNS0wMi0xMlxuKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4qIEluY2x1ZGVzOiBjb3JlLmpzLCB3aWRnZXQuanMsIG1vdXNlLmpzLCBwb3NpdGlvbi5qcywgYWNjb3JkaW9uLmpzLCBhdXRvY29tcGxldGUuanMsIGJ1dHRvbi5qcywgZGF0ZXBpY2tlci5qcywgZGlhbG9nLmpzLCBkcmFnZ2FibGUuanMsIGRyb3BwYWJsZS5qcywgZWZmZWN0LmpzLCBlZmZlY3QtYmxpbmQuanMsIGVmZmVjdC1ib3VuY2UuanMsIGVmZmVjdC1jbGlwLmpzLCBlZmZlY3QtZHJvcC5qcywgZWZmZWN0LWV4cGxvZGUuanMsIGVmZmVjdC1mYWRlLmpzLCBlZmZlY3QtZm9sZC5qcywgZWZmZWN0LWhpZ2hsaWdodC5qcywgZWZmZWN0LXB1ZmYuanMsIGVmZmVjdC1wdWxzYXRlLmpzLCBlZmZlY3Qtc2NhbGUuanMsIGVmZmVjdC1zaGFrZS5qcywgZWZmZWN0LXNpemUuanMsIGVmZmVjdC1zbGlkZS5qcywgZWZmZWN0LXRyYW5zZmVyLmpzLCBtZW51LmpzLCBwcm9ncmVzc2Jhci5qcywgcmVzaXphYmxlLmpzLCBzZWxlY3RhYmxlLmpzLCBzZWxlY3RtZW51LmpzLCBzbGlkZXIuanMsIHNvcnRhYmxlLmpzLCBzcGlubmVyLmpzLCB0YWJzLmpzLCB0b29sdGlwLmpzXG4qIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzOyBMaWNlbnNlZCBNSVQgKi9cblxuKGZ1bmN0aW9uKCBmYWN0b3J5ICkge1xuXHRpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXG5cdFx0Ly8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuXHRcdGRlZmluZShbIFwianF1ZXJ5XCIgXSwgZmFjdG9yeSApO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXG5cdFx0ZmFjdG9yeSggalF1ZXJ5ICk7XG5cdH1cbn0oZnVuY3Rpb24oICQgKSB7XG4vKiFcbiAqIGpRdWVyeSBVSSBDb3JlIDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS9cbiAqL1xuXG5cbi8vICQudWkgbWlnaHQgZXhpc3QgZnJvbSBjb21wb25lbnRzIHdpdGggbm8gZGVwZW5kZW5jaWVzLCBlLmcuLCAkLnVpLnBvc2l0aW9uXG4kLnVpID0gJC51aSB8fCB7fTtcblxuJC5leHRlbmQoICQudWksIHtcblx0dmVyc2lvbjogXCIxLjExLjNcIixcblxuXHRrZXlDb2RlOiB7XG5cdFx0QkFDS1NQQUNFOiA4LFxuXHRcdENPTU1BOiAxODgsXG5cdFx0REVMRVRFOiA0Nixcblx0XHRET1dOOiA0MCxcblx0XHRFTkQ6IDM1LFxuXHRcdEVOVEVSOiAxMyxcblx0XHRFU0NBUEU6IDI3LFxuXHRcdEhPTUU6IDM2LFxuXHRcdExFRlQ6IDM3LFxuXHRcdFBBR0VfRE9XTjogMzQsXG5cdFx0UEFHRV9VUDogMzMsXG5cdFx0UEVSSU9EOiAxOTAsXG5cdFx0UklHSFQ6IDM5LFxuXHRcdFNQQUNFOiAzMixcblx0XHRUQUI6IDksXG5cdFx0VVA6IDM4XG5cdH1cbn0pO1xuXG4vLyBwbHVnaW5zXG4kLmZuLmV4dGVuZCh7XG5cdHNjcm9sbFBhcmVudDogZnVuY3Rpb24oIGluY2x1ZGVIaWRkZW4gKSB7XG5cdFx0dmFyIHBvc2l0aW9uID0gdGhpcy5jc3MoIFwicG9zaXRpb25cIiApLFxuXHRcdFx0ZXhjbHVkZVN0YXRpY1BhcmVudCA9IHBvc2l0aW9uID09PSBcImFic29sdXRlXCIsXG5cdFx0XHRvdmVyZmxvd1JlZ2V4ID0gaW5jbHVkZUhpZGRlbiA/IC8oYXV0b3xzY3JvbGx8aGlkZGVuKS8gOiAvKGF1dG98c2Nyb2xsKS8sXG5cdFx0XHRzY3JvbGxQYXJlbnQgPSB0aGlzLnBhcmVudHMoKS5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgcGFyZW50ID0gJCggdGhpcyApO1xuXHRcdFx0XHRpZiAoIGV4Y2x1ZGVTdGF0aWNQYXJlbnQgJiYgcGFyZW50LmNzcyggXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBvdmVyZmxvd1JlZ2V4LnRlc3QoIHBhcmVudC5jc3MoIFwib3ZlcmZsb3dcIiApICsgcGFyZW50LmNzcyggXCJvdmVyZmxvdy15XCIgKSArIHBhcmVudC5jc3MoIFwib3ZlcmZsb3cteFwiICkgKTtcblx0XHRcdH0pLmVxKCAwICk7XG5cblx0XHRyZXR1cm4gcG9zaXRpb24gPT09IFwiZml4ZWRcIiB8fCAhc2Nyb2xsUGFyZW50Lmxlbmd0aCA/ICQoIHRoaXNbIDAgXS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgOiBzY3JvbGxQYXJlbnQ7XG5cdH0sXG5cblx0dW5pcXVlSWQ6IChmdW5jdGlvbigpIHtcblx0XHR2YXIgdXVpZCA9IDA7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICF0aGlzLmlkICkge1xuXHRcdFx0XHRcdHRoaXMuaWQgPSBcInVpLWlkLVwiICsgKCArK3V1aWQgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fTtcblx0fSkoKSxcblxuXHRyZW1vdmVVbmlxdWVJZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmICggL151aS1pZC1cXGQrJC8udGVzdCggdGhpcy5pZCApICkge1xuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQXR0ciggXCJpZFwiICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG4vLyBzZWxlY3RvcnNcbmZ1bmN0aW9uIGZvY3VzYWJsZSggZWxlbWVudCwgaXNUYWJJbmRleE5vdE5hTiApIHtcblx0dmFyIG1hcCwgbWFwTmFtZSwgaW1nLFxuXHRcdG5vZGVOYW1lID0gZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRpZiAoIFwiYXJlYVwiID09PSBub2RlTmFtZSApIHtcblx0XHRtYXAgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cdFx0bWFwTmFtZSA9IG1hcC5uYW1lO1xuXHRcdGlmICggIWVsZW1lbnQuaHJlZiB8fCAhbWFwTmFtZSB8fCBtYXAubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJtYXBcIiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0aW1nID0gJCggXCJpbWdbdXNlbWFwPScjXCIgKyBtYXBOYW1lICsgXCInXVwiIClbIDAgXTtcblx0XHRyZXR1cm4gISFpbWcgJiYgdmlzaWJsZSggaW1nICk7XG5cdH1cblx0cmV0dXJuICggL14oaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QpJC8udGVzdCggbm9kZU5hbWUgKSA/XG5cdFx0IWVsZW1lbnQuZGlzYWJsZWQgOlxuXHRcdFwiYVwiID09PSBub2RlTmFtZSA/XG5cdFx0XHRlbGVtZW50LmhyZWYgfHwgaXNUYWJJbmRleE5vdE5hTiA6XG5cdFx0XHRpc1RhYkluZGV4Tm90TmFOKSAmJlxuXHRcdC8vIHRoZSBlbGVtZW50IGFuZCBhbGwgb2YgaXRzIGFuY2VzdG9ycyBtdXN0IGJlIHZpc2libGVcblx0XHR2aXNpYmxlKCBlbGVtZW50ICk7XG59XG5cbmZ1bmN0aW9uIHZpc2libGUoIGVsZW1lbnQgKSB7XG5cdHJldHVybiAkLmV4cHIuZmlsdGVycy52aXNpYmxlKCBlbGVtZW50ICkgJiZcblx0XHQhJCggZWxlbWVudCApLnBhcmVudHMoKS5hZGRCYWNrKCkuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuICQuY3NzKCB0aGlzLCBcInZpc2liaWxpdHlcIiApID09PSBcImhpZGRlblwiO1xuXHRcdH0pLmxlbmd0aDtcbn1cblxuJC5leHRlbmQoICQuZXhwclsgXCI6XCIgXSwge1xuXHRkYXRhOiAkLmV4cHIuY3JlYXRlUHNldWRvID9cblx0XHQkLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKCBkYXRhTmFtZSApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICEhJC5kYXRhKCBlbGVtLCBkYXRhTmFtZSApO1xuXHRcdFx0fTtcblx0XHR9KSA6XG5cdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcblx0XHRmdW5jdGlvbiggZWxlbSwgaSwgbWF0Y2ggKSB7XG5cdFx0XHRyZXR1cm4gISEkLmRhdGEoIGVsZW0sIG1hdGNoWyAzIF0gKTtcblx0XHR9LFxuXG5cdGZvY3VzYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGZvY3VzYWJsZSggZWxlbWVudCwgIWlzTmFOKCAkLmF0dHIoIGVsZW1lbnQsIFwidGFiaW5kZXhcIiApICkgKTtcblx0fSxcblxuXHR0YWJiYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG5cdFx0dmFyIHRhYkluZGV4ID0gJC5hdHRyKCBlbGVtZW50LCBcInRhYmluZGV4XCIgKSxcblx0XHRcdGlzVGFiSW5kZXhOYU4gPSBpc05hTiggdGFiSW5kZXggKTtcblx0XHRyZXR1cm4gKCBpc1RhYkluZGV4TmFOIHx8IHRhYkluZGV4ID49IDAgKSAmJiBmb2N1c2FibGUoIGVsZW1lbnQsICFpc1RhYkluZGV4TmFOICk7XG5cdH1cbn0pO1xuXG4vLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxuaWYgKCAhJCggXCI8YT5cIiApLm91dGVyV2lkdGgoIDEgKS5qcXVlcnkgKSB7XG5cdCQuZWFjaCggWyBcIldpZHRoXCIsIFwiSGVpZ2h0XCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdFx0dmFyIHNpZGUgPSBuYW1lID09PSBcIldpZHRoXCIgPyBbIFwiTGVmdFwiLCBcIlJpZ2h0XCIgXSA6IFsgXCJUb3BcIiwgXCJCb3R0b21cIiBdLFxuXHRcdFx0dHlwZSA9IG5hbWUudG9Mb3dlckNhc2UoKSxcblx0XHRcdG9yaWcgPSB7XG5cdFx0XHRcdGlubmVyV2lkdGg6ICQuZm4uaW5uZXJXaWR0aCxcblx0XHRcdFx0aW5uZXJIZWlnaHQ6ICQuZm4uaW5uZXJIZWlnaHQsXG5cdFx0XHRcdG91dGVyV2lkdGg6ICQuZm4ub3V0ZXJXaWR0aCxcblx0XHRcdFx0b3V0ZXJIZWlnaHQ6ICQuZm4ub3V0ZXJIZWlnaHRcblx0XHRcdH07XG5cblx0XHRmdW5jdGlvbiByZWR1Y2UoIGVsZW0sIHNpemUsIGJvcmRlciwgbWFyZ2luICkge1xuXHRcdFx0JC5lYWNoKCBzaWRlLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2l6ZSAtPSBwYXJzZUZsb2F0KCAkLmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyB0aGlzICkgKSB8fCAwO1xuXHRcdFx0XHRpZiAoIGJvcmRlciApIHtcblx0XHRcdFx0XHRzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgdGhpcyArIFwiV2lkdGhcIiApICkgfHwgMDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIG1hcmdpbiApIHtcblx0XHRcdFx0XHRzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCBcIm1hcmdpblwiICsgdGhpcyApICkgfHwgMDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gc2l6ZTtcblx0XHR9XG5cblx0XHQkLmZuWyBcImlubmVyXCIgKyBuYW1lIF0gPSBmdW5jdGlvbiggc2l6ZSApIHtcblx0XHRcdGlmICggc2l6ZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gb3JpZ1sgXCJpbm5lclwiICsgbmFtZSBdLmNhbGwoIHRoaXMgKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0JCggdGhpcyApLmNzcyggdHlwZSwgcmVkdWNlKCB0aGlzLCBzaXplICkgKyBcInB4XCIgKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQkLmZuWyBcIm91dGVyXCIgKyBuYW1lXSA9IGZ1bmN0aW9uKCBzaXplLCBtYXJnaW4gKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBzaXplICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRyZXR1cm4gb3JpZ1sgXCJvdXRlclwiICsgbmFtZSBdLmNhbGwoIHRoaXMsIHNpemUgKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0JCggdGhpcykuY3NzKCB0eXBlLCByZWR1Y2UoIHRoaXMsIHNpemUsIHRydWUsIG1hcmdpbiApICsgXCJweFwiICk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9KTtcbn1cblxuLy8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcbmlmICggISQuZm4uYWRkQmFjayApIHtcblx0JC5mbi5hZGRCYWNrID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/XG5cdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApXG5cdFx0KTtcblx0fTtcbn1cblxuLy8gc3VwcG9ydDogalF1ZXJ5IDEuNi4xLCAxLjYuMiAoaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvOTQxMylcbmlmICggJCggXCI8YT5cIiApLmRhdGEoIFwiYS1iXCIsIFwiYVwiICkucmVtb3ZlRGF0YSggXCJhLWJcIiApLmRhdGEoIFwiYS1iXCIgKSApIHtcblx0JC5mbi5yZW1vdmVEYXRhID0gKGZ1bmN0aW9uKCByZW1vdmVEYXRhICkge1xuXHRcdHJldHVybiBmdW5jdGlvbigga2V5ICkge1xuXHRcdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtb3ZlRGF0YS5jYWxsKCB0aGlzLCAkLmNhbWVsQ2FzZSgga2V5ICkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiByZW1vdmVEYXRhLmNhbGwoIHRoaXMgKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9KSggJC5mbi5yZW1vdmVEYXRhICk7XG59XG5cbi8vIGRlcHJlY2F0ZWRcbiQudWkuaWUgPSAhIS9tc2llIFtcXHcuXSsvLmV4ZWMoIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSApO1xuXG4kLmZuLmV4dGVuZCh7XG5cdGZvY3VzOiAoZnVuY3Rpb24oIG9yaWcgKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBkZWxheSwgZm4gKSB7XG5cdFx0XHRyZXR1cm4gdHlwZW9mIGRlbGF5ID09PSBcIm51bWJlclwiID9cblx0XHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBlbGVtID0gdGhpcztcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JCggZWxlbSApLmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRpZiAoIGZuICkge1xuXHRcdFx0XHRcdFx0XHRmbi5jYWxsKCBlbGVtICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgZGVsYXkgKTtcblx0XHRcdFx0fSkgOlxuXHRcdFx0XHRvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9O1xuXHR9KSggJC5mbi5mb2N1cyApLFxuXG5cdGRpc2FibGVTZWxlY3Rpb246IChmdW5jdGlvbigpIHtcblx0XHR2YXIgZXZlbnRUeXBlID0gXCJvbnNlbGVjdHN0YXJ0XCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApID9cblx0XHRcdFwic2VsZWN0c3RhcnRcIiA6XG5cdFx0XHRcIm1vdXNlZG93blwiO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuYmluZCggZXZlbnRUeXBlICsgXCIudWktZGlzYWJsZVNlbGVjdGlvblwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9KSgpLFxuXG5cdGVuYWJsZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudW5iaW5kKCBcIi51aS1kaXNhYmxlU2VsZWN0aW9uXCIgKTtcblx0fSxcblxuXHR6SW5kZXg6IGZ1bmN0aW9uKCB6SW5kZXggKSB7XG5cdFx0aWYgKCB6SW5kZXggIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiB0aGlzLmNzcyggXCJ6SW5kZXhcIiwgekluZGV4ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdHZhciBlbGVtID0gJCggdGhpc1sgMCBdICksIHBvc2l0aW9uLCB2YWx1ZTtcblx0XHRcdHdoaWxlICggZWxlbS5sZW5ndGggJiYgZWxlbVsgMCBdICE9PSBkb2N1bWVudCApIHtcblx0XHRcdFx0Ly8gSWdub3JlIHotaW5kZXggaWYgcG9zaXRpb24gaXMgc2V0IHRvIGEgdmFsdWUgd2hlcmUgei1pbmRleCBpcyBpZ25vcmVkIGJ5IHRoZSBicm93c2VyXG5cdFx0XHRcdC8vIFRoaXMgbWFrZXMgYmVoYXZpb3Igb2YgdGhpcyBmdW5jdGlvbiBjb25zaXN0ZW50IGFjcm9zcyBicm93c2Vyc1xuXHRcdFx0XHQvLyBXZWJLaXQgYWx3YXlzIHJldHVybnMgYXV0byBpZiB0aGUgZWxlbWVudCBpcyBwb3NpdGlvbmVkXG5cdFx0XHRcdHBvc2l0aW9uID0gZWxlbS5jc3MoIFwicG9zaXRpb25cIiApO1xuXHRcdFx0XHRpZiAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwicmVsYXRpdmVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xuXHRcdFx0XHRcdC8vIElFIHJldHVybnMgMCB3aGVuIHpJbmRleCBpcyBub3Qgc3BlY2lmaWVkXG5cdFx0XHRcdFx0Ly8gb3RoZXIgYnJvd3NlcnMgcmV0dXJuIGEgc3RyaW5nXG5cdFx0XHRcdFx0Ly8gd2UgaWdub3JlIHRoZSBjYXNlIG9mIG5lc3RlZCBlbGVtZW50cyB3aXRoIGFuIGV4cGxpY2l0IHZhbHVlIG9mIDBcblx0XHRcdFx0XHQvLyA8ZGl2IHN0eWxlPVwiei1pbmRleDogLTEwO1wiPjxkaXYgc3R5bGU9XCJ6LWluZGV4OiAwO1wiPjwvZGl2PjwvZGl2PlxuXHRcdFx0XHRcdHZhbHVlID0gcGFyc2VJbnQoIGVsZW0uY3NzKCBcInpJbmRleFwiICksIDEwICk7XG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIHZhbHVlICkgJiYgdmFsdWUgIT09IDAgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsZW0gPSBlbGVtLnBhcmVudCgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiAwO1xuXHR9XG59KTtcblxuLy8gJC51aS5wbHVnaW4gaXMgZGVwcmVjYXRlZC4gVXNlICQud2lkZ2V0KCkgZXh0ZW5zaW9ucyBpbnN0ZWFkLlxuJC51aS5wbHVnaW4gPSB7XG5cdGFkZDogZnVuY3Rpb24oIG1vZHVsZSwgb3B0aW9uLCBzZXQgKSB7XG5cdFx0dmFyIGksXG5cdFx0XHRwcm90byA9ICQudWlbIG1vZHVsZSBdLnByb3RvdHlwZTtcblx0XHRmb3IgKCBpIGluIHNldCApIHtcblx0XHRcdHByb3RvLnBsdWdpbnNbIGkgXSA9IHByb3RvLnBsdWdpbnNbIGkgXSB8fCBbXTtcblx0XHRcdHByb3RvLnBsdWdpbnNbIGkgXS5wdXNoKCBbIG9wdGlvbiwgc2V0WyBpIF0gXSApO1xuXHRcdH1cblx0fSxcblx0Y2FsbDogZnVuY3Rpb24oIGluc3RhbmNlLCBuYW1lLCBhcmdzLCBhbGxvd0Rpc2Nvbm5lY3RlZCApIHtcblx0XHR2YXIgaSxcblx0XHRcdHNldCA9IGluc3RhbmNlLnBsdWdpbnNbIG5hbWUgXTtcblxuXHRcdGlmICggIXNldCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoICFhbGxvd0Rpc2Nvbm5lY3RlZCAmJiAoICFpbnN0YW5jZS5lbGVtZW50WyAwIF0ucGFyZW50Tm9kZSB8fCBpbnN0YW5jZS5lbGVtZW50WyAwIF0ucGFyZW50Tm9kZS5ub2RlVHlwZSA9PT0gMTEgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkrKyApIHtcblx0XHRcdGlmICggaW5zdGFuY2Uub3B0aW9uc1sgc2V0WyBpIF1bIDAgXSBdICkge1xuXHRcdFx0XHRzZXRbIGkgXVsgMSBdLmFwcGx5KCBpbnN0YW5jZS5lbGVtZW50LCBhcmdzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIFdpZGdldCAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2pRdWVyeS53aWRnZXQvXG4gKi9cblxuXG52YXIgd2lkZ2V0X3V1aWQgPSAwLFxuXHR3aWRnZXRfc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbiQuY2xlYW5EYXRhID0gKGZ1bmN0aW9uKCBvcmlnICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW1zICkge1xuXHRcdHZhciBldmVudHMsIGVsZW0sIGk7XG5cdFx0Zm9yICggaSA9IDA7IChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcblx0XHRcdHRyeSB7XG5cblx0XHRcdFx0Ly8gT25seSB0cmlnZ2VyIHJlbW92ZSB3aGVuIG5lY2Vzc2FyeSB0byBzYXZlIHRpbWVcblx0XHRcdFx0ZXZlbnRzID0gJC5fZGF0YSggZWxlbSwgXCJldmVudHNcIiApO1xuXHRcdFx0XHRpZiAoIGV2ZW50cyAmJiBldmVudHMucmVtb3ZlICkge1xuXHRcdFx0XHRcdCQoIGVsZW0gKS50cmlnZ2VySGFuZGxlciggXCJyZW1vdmVcIiApO1xuXHRcdFx0XHR9XG5cblx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzgyMzVcblx0XHRcdH0gY2F0Y2ggKCBlICkge31cblx0XHR9XG5cdFx0b3JpZyggZWxlbXMgKTtcblx0fTtcbn0pKCAkLmNsZWFuRGF0YSApO1xuXG4kLndpZGdldCA9IGZ1bmN0aW9uKCBuYW1lLCBiYXNlLCBwcm90b3R5cGUgKSB7XG5cdHZhciBmdWxsTmFtZSwgZXhpc3RpbmdDb25zdHJ1Y3RvciwgY29uc3RydWN0b3IsIGJhc2VQcm90b3R5cGUsXG5cdFx0Ly8gcHJveGllZFByb3RvdHlwZSBhbGxvd3MgdGhlIHByb3ZpZGVkIHByb3RvdHlwZSB0byByZW1haW4gdW5tb2RpZmllZFxuXHRcdC8vIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQgYXMgYSBtaXhpbiBmb3IgbXVsdGlwbGUgd2lkZ2V0cyAoIzg4NzYpXG5cdFx0cHJveGllZFByb3RvdHlwZSA9IHt9LFxuXHRcdG5hbWVzcGFjZSA9IG5hbWUuc3BsaXQoIFwiLlwiIClbIDAgXTtcblxuXHRuYW1lID0gbmFtZS5zcGxpdCggXCIuXCIgKVsgMSBdO1xuXHRmdWxsTmFtZSA9IG5hbWVzcGFjZSArIFwiLVwiICsgbmFtZTtcblxuXHRpZiAoICFwcm90b3R5cGUgKSB7XG5cdFx0cHJvdG90eXBlID0gYmFzZTtcblx0XHRiYXNlID0gJC5XaWRnZXQ7XG5cdH1cblxuXHQvLyBjcmVhdGUgc2VsZWN0b3IgZm9yIHBsdWdpblxuXHQkLmV4cHJbIFwiOlwiIF1bIGZ1bGxOYW1lLnRvTG93ZXJDYXNlKCkgXSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiAhISQuZGF0YSggZWxlbSwgZnVsbE5hbWUgKTtcblx0fTtcblxuXHQkWyBuYW1lc3BhY2UgXSA9ICRbIG5hbWVzcGFjZSBdIHx8IHt9O1xuXHRleGlzdGluZ0NvbnN0cnVjdG9yID0gJFsgbmFtZXNwYWNlIF1bIG5hbWUgXTtcblx0Y29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMsIGVsZW1lbnQgKSB7XG5cdFx0Ly8gYWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IFwibmV3XCIga2V5d29yZFxuXHRcdGlmICggIXRoaXMuX2NyZWF0ZVdpZGdldCApIHtcblx0XHRcdHJldHVybiBuZXcgY29uc3RydWN0b3IoIG9wdGlvbnMsIGVsZW1lbnQgKTtcblx0XHR9XG5cblx0XHQvLyBhbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgaW5pdGlhbGl6aW5nIGZvciBzaW1wbGUgaW5oZXJpdGFuY2Vcblx0XHQvLyBtdXN0IHVzZSBcIm5ld1wiIGtleXdvcmQgKHRoZSBjb2RlIGFib3ZlIGFsd2F5cyBwYXNzZXMgYXJncylcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLl9jcmVhdGVXaWRnZXQoIG9wdGlvbnMsIGVsZW1lbnQgKTtcblx0XHR9XG5cdH07XG5cdC8vIGV4dGVuZCB3aXRoIHRoZSBleGlzdGluZyBjb25zdHJ1Y3RvciB0byBjYXJyeSBvdmVyIGFueSBzdGF0aWMgcHJvcGVydGllc1xuXHQkLmV4dGVuZCggY29uc3RydWN0b3IsIGV4aXN0aW5nQ29uc3RydWN0b3IsIHtcblx0XHR2ZXJzaW9uOiBwcm90b3R5cGUudmVyc2lvbixcblx0XHQvLyBjb3B5IHRoZSBvYmplY3QgdXNlZCB0byBjcmVhdGUgdGhlIHByb3RvdHlwZSBpbiBjYXNlIHdlIG5lZWQgdG9cblx0XHQvLyByZWRlZmluZSB0aGUgd2lkZ2V0IGxhdGVyXG5cdFx0X3Byb3RvOiAkLmV4dGVuZCgge30sIHByb3RvdHlwZSApLFxuXHRcdC8vIHRyYWNrIHdpZGdldHMgdGhhdCBpbmhlcml0IGZyb20gdGhpcyB3aWRnZXQgaW4gY2FzZSB0aGlzIHdpZGdldCBpc1xuXHRcdC8vIHJlZGVmaW5lZCBhZnRlciBhIHdpZGdldCBpbmhlcml0cyBmcm9tIGl0XG5cdFx0X2NoaWxkQ29uc3RydWN0b3JzOiBbXVxuXHR9KTtcblxuXHRiYXNlUHJvdG90eXBlID0gbmV3IGJhc2UoKTtcblx0Ly8gd2UgbmVlZCB0byBtYWtlIHRoZSBvcHRpb25zIGhhc2ggYSBwcm9wZXJ0eSBkaXJlY3RseSBvbiB0aGUgbmV3IGluc3RhbmNlXG5cdC8vIG90aGVyd2lzZSB3ZSdsbCBtb2RpZnkgdGhlIG9wdGlvbnMgaGFzaCBvbiB0aGUgcHJvdG90eXBlIHRoYXQgd2UncmVcblx0Ly8gaW5oZXJpdGluZyBmcm9tXG5cdGJhc2VQcm90b3R5cGUub3B0aW9ucyA9ICQud2lkZ2V0LmV4dGVuZCgge30sIGJhc2VQcm90b3R5cGUub3B0aW9ucyApO1xuXHQkLmVhY2goIHByb3RvdHlwZSwgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xuXHRcdGlmICggISQuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHByb3hpZWRQcm90b3R5cGVbIHByb3AgXSA9IHZhbHVlO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSAoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgX3N1cGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJhc2UucHJvdG90eXBlWyBwcm9wIF0uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRfc3VwZXJBcHBseSA9IGZ1bmN0aW9uKCBhcmdzICkge1xuXHRcdFx0XHRcdHJldHVybiBiYXNlLnByb3RvdHlwZVsgcHJvcCBdLmFwcGx5KCB0aGlzLCBhcmdzICk7XG5cdFx0XHRcdH07XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBfX3N1cGVyID0gdGhpcy5fc3VwZXIsXG5cdFx0XHRcdFx0X19zdXBlckFwcGx5ID0gdGhpcy5fc3VwZXJBcHBseSxcblx0XHRcdFx0XHRyZXR1cm5WYWx1ZTtcblxuXHRcdFx0XHR0aGlzLl9zdXBlciA9IF9zdXBlcjtcblx0XHRcdFx0dGhpcy5fc3VwZXJBcHBseSA9IF9zdXBlckFwcGx5O1xuXG5cdFx0XHRcdHJldHVyblZhbHVlID0gdmFsdWUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHRcdHRoaXMuX3N1cGVyID0gX19zdXBlcjtcblx0XHRcdFx0dGhpcy5fc3VwZXJBcHBseSA9IF9fc3VwZXJBcHBseTtcblxuXHRcdFx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XG5cdFx0XHR9O1xuXHRcdH0pKCk7XG5cdH0pO1xuXHRjb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSAkLndpZGdldC5leHRlbmQoIGJhc2VQcm90b3R5cGUsIHtcblx0XHQvLyBUT0RPOiByZW1vdmUgc3VwcG9ydCBmb3Igd2lkZ2V0RXZlbnRQcmVmaXhcblx0XHQvLyBhbHdheXMgdXNlIHRoZSBuYW1lICsgYSBjb2xvbiBhcyB0aGUgcHJlZml4LCBlLmcuLCBkcmFnZ2FibGU6c3RhcnRcblx0XHQvLyBkb24ndCBwcmVmaXggZm9yIHdpZGdldHMgdGhhdCBhcmVuJ3QgRE9NLWJhc2VkXG5cdFx0d2lkZ2V0RXZlbnRQcmVmaXg6IGV4aXN0aW5nQ29uc3RydWN0b3IgPyAoYmFzZVByb3RvdHlwZS53aWRnZXRFdmVudFByZWZpeCB8fCBuYW1lKSA6IG5hbWVcblx0fSwgcHJveGllZFByb3RvdHlwZSwge1xuXHRcdGNvbnN0cnVjdG9yOiBjb25zdHJ1Y3Rvcixcblx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZSxcblx0XHR3aWRnZXROYW1lOiBuYW1lLFxuXHRcdHdpZGdldEZ1bGxOYW1lOiBmdWxsTmFtZVxuXHR9KTtcblxuXHQvLyBJZiB0aGlzIHdpZGdldCBpcyBiZWluZyByZWRlZmluZWQgdGhlbiB3ZSBuZWVkIHRvIGZpbmQgYWxsIHdpZGdldHMgdGhhdFxuXHQvLyBhcmUgaW5oZXJpdGluZyBmcm9tIGl0IGFuZCByZWRlZmluZSBhbGwgb2YgdGhlbSBzbyB0aGF0IHRoZXkgaW5oZXJpdCBmcm9tXG5cdC8vIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGlzIHdpZGdldC4gV2UncmUgZXNzZW50aWFsbHkgdHJ5aW5nIHRvIHJlcGxhY2Ugb25lXG5cdC8vIGxldmVsIGluIHRoZSBwcm90b3R5cGUgY2hhaW4uXG5cdGlmICggZXhpc3RpbmdDb25zdHJ1Y3RvciApIHtcblx0XHQkLmVhY2goIGV4aXN0aW5nQ29uc3RydWN0b3IuX2NoaWxkQ29uc3RydWN0b3JzLCBmdW5jdGlvbiggaSwgY2hpbGQgKSB7XG5cdFx0XHR2YXIgY2hpbGRQcm90b3R5cGUgPSBjaGlsZC5wcm90b3R5cGU7XG5cblx0XHRcdC8vIHJlZGVmaW5lIHRoZSBjaGlsZCB3aWRnZXQgdXNpbmcgdGhlIHNhbWUgcHJvdG90eXBlIHRoYXQgd2FzXG5cdFx0XHQvLyBvcmlnaW5hbGx5IHVzZWQsIGJ1dCBpbmhlcml0IGZyb20gdGhlIG5ldyB2ZXJzaW9uIG9mIHRoZSBiYXNlXG5cdFx0XHQkLndpZGdldCggY2hpbGRQcm90b3R5cGUubmFtZXNwYWNlICsgXCIuXCIgKyBjaGlsZFByb3RvdHlwZS53aWRnZXROYW1lLCBjb25zdHJ1Y3RvciwgY2hpbGQuX3Byb3RvICk7XG5cdFx0fSk7XG5cdFx0Ly8gcmVtb3ZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNoaWxkIGNvbnN0cnVjdG9ycyBmcm9tIHRoZSBvbGQgY29uc3RydWN0b3Jcblx0XHQvLyBzbyB0aGUgb2xkIGNoaWxkIGNvbnN0cnVjdG9ycyBjYW4gYmUgZ2FyYmFnZSBjb2xsZWN0ZWRcblx0XHRkZWxldGUgZXhpc3RpbmdDb25zdHJ1Y3Rvci5fY2hpbGRDb25zdHJ1Y3RvcnM7XG5cdH0gZWxzZSB7XG5cdFx0YmFzZS5fY2hpbGRDb25zdHJ1Y3RvcnMucHVzaCggY29uc3RydWN0b3IgKTtcblx0fVxuXG5cdCQud2lkZ2V0LmJyaWRnZSggbmFtZSwgY29uc3RydWN0b3IgKTtcblxuXHRyZXR1cm4gY29uc3RydWN0b3I7XG59O1xuXG4kLndpZGdldC5leHRlbmQgPSBmdW5jdGlvbiggdGFyZ2V0ICkge1xuXHR2YXIgaW5wdXQgPSB3aWRnZXRfc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksXG5cdFx0aW5wdXRJbmRleCA9IDAsXG5cdFx0aW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsXG5cdFx0a2V5LFxuXHRcdHZhbHVlO1xuXHRmb3IgKCA7IGlucHV0SW5kZXggPCBpbnB1dExlbmd0aDsgaW5wdXRJbmRleCsrICkge1xuXHRcdGZvciAoIGtleSBpbiBpbnB1dFsgaW5wdXRJbmRleCBdICkge1xuXHRcdFx0dmFsdWUgPSBpbnB1dFsgaW5wdXRJbmRleCBdWyBrZXkgXTtcblx0XHRcdGlmICggaW5wdXRbIGlucHV0SW5kZXggXS5oYXNPd25Qcm9wZXJ0eSgga2V5ICkgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0Ly8gQ2xvbmUgb2JqZWN0c1xuXHRcdFx0XHRpZiAoICQuaXNQbGFpbk9iamVjdCggdmFsdWUgKSApIHtcblx0XHRcdFx0XHR0YXJnZXRbIGtleSBdID0gJC5pc1BsYWluT2JqZWN0KCB0YXJnZXRbIGtleSBdICkgP1xuXHRcdFx0XHRcdFx0JC53aWRnZXQuZXh0ZW5kKCB7fSwgdGFyZ2V0WyBrZXkgXSwgdmFsdWUgKSA6XG5cdFx0XHRcdFx0XHQvLyBEb24ndCBleHRlbmQgc3RyaW5ncywgYXJyYXlzLCBldGMuIHdpdGggb2JqZWN0c1xuXHRcdFx0XHRcdFx0JC53aWRnZXQuZXh0ZW5kKCB7fSwgdmFsdWUgKTtcblx0XHRcdFx0Ly8gQ29weSBldmVyeXRoaW5nIGVsc2UgYnkgcmVmZXJlbmNlXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGFyZ2V0WyBrZXkgXSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG4kLndpZGdldC5icmlkZ2UgPSBmdW5jdGlvbiggbmFtZSwgb2JqZWN0ICkge1xuXHR2YXIgZnVsbE5hbWUgPSBvYmplY3QucHJvdG90eXBlLndpZGdldEZ1bGxOYW1lIHx8IG5hbWU7XG5cdCQuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdHZhciBpc01ldGhvZENhbGwgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIixcblx0XHRcdGFyZ3MgPSB3aWRnZXRfc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksXG5cdFx0XHRyZXR1cm5WYWx1ZSA9IHRoaXM7XG5cblx0XHRpZiAoIGlzTWV0aG9kQ2FsbCApIHtcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG1ldGhvZFZhbHVlLFxuXHRcdFx0XHRcdGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApO1xuXHRcdFx0XHRpZiAoIG9wdGlvbnMgPT09IFwiaW5zdGFuY2VcIiApIHtcblx0XHRcdFx0XHRyZXR1cm5WYWx1ZSA9IGluc3RhbmNlO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICFpbnN0YW5jZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gJC5lcnJvciggXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiICsgbmFtZSArIFwiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyBcIiArXG5cdFx0XHRcdFx0XHRcImF0dGVtcHRlZCB0byBjYWxsIG1ldGhvZCAnXCIgKyBvcHRpb25zICsgXCInXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICEkLmlzRnVuY3Rpb24oIGluc3RhbmNlW29wdGlvbnNdICkgfHwgb3B0aW9ucy5jaGFyQXQoIDAgKSA9PT0gXCJfXCIgKSB7XG5cdFx0XHRcdFx0cmV0dXJuICQuZXJyb3IoIFwibm8gc3VjaCBtZXRob2QgJ1wiICsgb3B0aW9ucyArIFwiJyBmb3IgXCIgKyBuYW1lICsgXCIgd2lkZ2V0IGluc3RhbmNlXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRtZXRob2RWYWx1ZSA9IGluc3RhbmNlWyBvcHRpb25zIF0uYXBwbHkoIGluc3RhbmNlLCBhcmdzICk7XG5cdFx0XHRcdGlmICggbWV0aG9kVmFsdWUgIT09IGluc3RhbmNlICYmIG1ldGhvZFZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuVmFsdWUgPSBtZXRob2RWYWx1ZSAmJiBtZXRob2RWYWx1ZS5qcXVlcnkgP1xuXHRcdFx0XHRcdFx0cmV0dXJuVmFsdWUucHVzaFN0YWNrKCBtZXRob2RWYWx1ZS5nZXQoKSApIDpcblx0XHRcdFx0XHRcdG1ldGhvZFZhbHVlO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gQWxsb3cgbXVsdGlwbGUgaGFzaGVzIHRvIGJlIHBhc3NlZCBvbiBpbml0XG5cdFx0XHRpZiAoIGFyZ3MubGVuZ3RoICkge1xuXHRcdFx0XHRvcHRpb25zID0gJC53aWRnZXQuZXh0ZW5kLmFwcGx5KCBudWxsLCBbIG9wdGlvbnMgXS5jb25jYXQoYXJncykgKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgaW5zdGFuY2UgPSAkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lICk7XG5cdFx0XHRcdGlmICggaW5zdGFuY2UgKSB7XG5cdFx0XHRcdFx0aW5zdGFuY2Uub3B0aW9uKCBvcHRpb25zIHx8IHt9ICk7XG5cdFx0XHRcdFx0aWYgKCBpbnN0YW5jZS5faW5pdCApIHtcblx0XHRcdFx0XHRcdGluc3RhbmNlLl9pbml0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQuZGF0YSggdGhpcywgZnVsbE5hbWUsIG5ldyBvYmplY3QoIG9wdGlvbnMsIHRoaXMgKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XG5cdH07XG59O1xuXG4kLldpZGdldCA9IGZ1bmN0aW9uKCAvKiBvcHRpb25zLCBlbGVtZW50ICovICkge307XG4kLldpZGdldC5fY2hpbGRDb25zdHJ1Y3RvcnMgPSBbXTtcblxuJC5XaWRnZXQucHJvdG90eXBlID0ge1xuXHR3aWRnZXROYW1lOiBcIndpZGdldFwiLFxuXHR3aWRnZXRFdmVudFByZWZpeDogXCJcIixcblx0ZGVmYXVsdEVsZW1lbnQ6IFwiPGRpdj5cIixcblx0b3B0aW9uczoge1xuXHRcdGRpc2FibGVkOiBmYWxzZSxcblxuXHRcdC8vIGNhbGxiYWNrc1xuXHRcdGNyZWF0ZTogbnVsbFxuXHR9LFxuXHRfY3JlYXRlV2lkZ2V0OiBmdW5jdGlvbiggb3B0aW9ucywgZWxlbWVudCApIHtcblx0XHRlbGVtZW50ID0gJCggZWxlbWVudCB8fCB0aGlzLmRlZmF1bHRFbGVtZW50IHx8IHRoaXMgKVsgMCBdO1xuXHRcdHRoaXMuZWxlbWVudCA9ICQoIGVsZW1lbnQgKTtcblx0XHR0aGlzLnV1aWQgPSB3aWRnZXRfdXVpZCsrO1xuXHRcdHRoaXMuZXZlbnROYW1lc3BhY2UgPSBcIi5cIiArIHRoaXMud2lkZ2V0TmFtZSArIHRoaXMudXVpZDtcblxuXHRcdHRoaXMuYmluZGluZ3MgPSAkKCk7XG5cdFx0dGhpcy5ob3ZlcmFibGUgPSAkKCk7XG5cdFx0dGhpcy5mb2N1c2FibGUgPSAkKCk7XG5cblx0XHRpZiAoIGVsZW1lbnQgIT09IHRoaXMgKSB7XG5cdFx0XHQkLmRhdGEoIGVsZW1lbnQsIHRoaXMud2lkZ2V0RnVsbE5hbWUsIHRoaXMgKTtcblx0XHRcdHRoaXMuX29uKCB0cnVlLCB0aGlzLmVsZW1lbnQsIHtcblx0XHRcdFx0cmVtb3ZlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdFx0aWYgKCBldmVudC50YXJnZXQgPT09IGVsZW1lbnQgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmRlc3Ryb3koKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5kb2N1bWVudCA9ICQoIGVsZW1lbnQuc3R5bGUgP1xuXHRcdFx0XHQvLyBlbGVtZW50IHdpdGhpbiB0aGUgZG9jdW1lbnRcblx0XHRcdFx0ZWxlbWVudC5vd25lckRvY3VtZW50IDpcblx0XHRcdFx0Ly8gZWxlbWVudCBpcyB3aW5kb3cgb3IgZG9jdW1lbnRcblx0XHRcdFx0ZWxlbWVudC5kb2N1bWVudCB8fCBlbGVtZW50ICk7XG5cdFx0XHR0aGlzLndpbmRvdyA9ICQoIHRoaXMuZG9jdW1lbnRbMF0uZGVmYXVsdFZpZXcgfHwgdGhpcy5kb2N1bWVudFswXS5wYXJlbnRXaW5kb3cgKTtcblx0XHR9XG5cblx0XHR0aGlzLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LFxuXHRcdFx0dGhpcy5vcHRpb25zLFxuXHRcdFx0dGhpcy5fZ2V0Q3JlYXRlT3B0aW9ucygpLFxuXHRcdFx0b3B0aW9ucyApO1xuXG5cdFx0dGhpcy5fY3JlYXRlKCk7XG5cdFx0dGhpcy5fdHJpZ2dlciggXCJjcmVhdGVcIiwgbnVsbCwgdGhpcy5fZ2V0Q3JlYXRlRXZlbnREYXRhKCkgKTtcblx0XHR0aGlzLl9pbml0KCk7XG5cdH0sXG5cdF9nZXRDcmVhdGVPcHRpb25zOiAkLm5vb3AsXG5cdF9nZXRDcmVhdGVFdmVudERhdGE6ICQubm9vcCxcblx0X2NyZWF0ZTogJC5ub29wLFxuXHRfaW5pdDogJC5ub29wLFxuXG5cdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuX2Rlc3Ryb3koKTtcblx0XHQvLyB3ZSBjYW4gcHJvYmFibHkgcmVtb3ZlIHRoZSB1bmJpbmQgY2FsbHMgaW4gMi4wXG5cdFx0Ly8gYWxsIGV2ZW50IGJpbmRpbmdzIHNob3VsZCBnbyB0aHJvdWdoIHRoaXMuX29uKClcblx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdC51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKVxuXHRcdFx0LnJlbW92ZURhdGEoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKVxuXHRcdFx0Ly8gc3VwcG9ydDoganF1ZXJ5IDwxLjYuM1xuXHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvOTQxM1xuXHRcdFx0LnJlbW92ZURhdGEoICQuY2FtZWxDYXNlKCB0aGlzLndpZGdldEZ1bGxOYW1lICkgKTtcblx0XHR0aGlzLndpZGdldCgpXG5cdFx0XHQudW5iaW5kKCB0aGlzLmV2ZW50TmFtZXNwYWNlIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtZGlzYWJsZWRcIiApXG5cdFx0XHQucmVtb3ZlQ2xhc3MoXG5cdFx0XHRcdHRoaXMud2lkZ2V0RnVsbE5hbWUgKyBcIi1kaXNhYmxlZCBcIiArXG5cdFx0XHRcdFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xuXG5cdFx0Ly8gY2xlYW4gdXAgZXZlbnRzIGFuZCBzdGF0ZXNcblx0XHR0aGlzLmJpbmRpbmdzLnVuYmluZCggdGhpcy5ldmVudE5hbWVzcGFjZSApO1xuXHRcdHRoaXMuaG92ZXJhYmxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcblx0XHR0aGlzLmZvY3VzYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XG5cdH0sXG5cdF9kZXN0cm95OiAkLm5vb3AsXG5cblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50O1xuXHR9LFxuXG5cdG9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSBrZXksXG5cdFx0XHRwYXJ0cyxcblx0XHRcdGN1ck9wdGlvbixcblx0XHRcdGk7XG5cblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDAgKSB7XG5cdFx0XHQvLyBkb24ndCByZXR1cm4gYSByZWZlcmVuY2UgdG8gdGhlIGludGVybmFsIGhhc2hcblx0XHRcdHJldHVybiAkLndpZGdldC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMgKTtcblx0XHR9XG5cblx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHQvLyBoYW5kbGUgbmVzdGVkIGtleXMsIGUuZy4sIFwiZm9vLmJhclwiID0+IHsgZm9vOiB7IGJhcjogX19fIH0gfVxuXHRcdFx0b3B0aW9ucyA9IHt9O1xuXHRcdFx0cGFydHMgPSBrZXkuc3BsaXQoIFwiLlwiICk7XG5cdFx0XHRrZXkgPSBwYXJ0cy5zaGlmdCgpO1xuXHRcdFx0aWYgKCBwYXJ0cy5sZW5ndGggKSB7XG5cdFx0XHRcdGN1ck9wdGlvbiA9IG9wdGlvbnNbIGtleSBdID0gJC53aWRnZXQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zWyBrZXkgXSApO1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKyApIHtcblx0XHRcdFx0XHRjdXJPcHRpb25bIHBhcnRzWyBpIF0gXSA9IGN1ck9wdGlvblsgcGFydHNbIGkgXSBdIHx8IHt9O1xuXHRcdFx0XHRcdGN1ck9wdGlvbiA9IGN1ck9wdGlvblsgcGFydHNbIGkgXSBdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGtleSA9IHBhcnRzLnBvcCgpO1xuXHRcdFx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGN1ck9wdGlvblsga2V5IF0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjdXJPcHRpb25bIGtleSBdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGN1ck9wdGlvblsga2V5IF0gPSB2YWx1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA9PT0gMSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5vcHRpb25zWyBrZXkgXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRoaXMub3B0aW9uc1sga2V5IF07XG5cdFx0XHRcdH1cblx0XHRcdFx0b3B0aW9uc1sga2V5IF0gPSB2YWx1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLl9zZXRPcHRpb25zKCBvcHRpb25zICk7XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdHZhciBrZXk7XG5cblx0XHRmb3IgKCBrZXkgaW4gb3B0aW9ucyApIHtcblx0XHRcdHRoaXMuX3NldE9wdGlvbigga2V5LCBvcHRpb25zWyBrZXkgXSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHR0aGlzLm9wdGlvbnNbIGtleSBdID0gdmFsdWU7XG5cblx0XHRpZiAoIGtleSA9PT0gXCJkaXNhYmxlZFwiICkge1xuXHRcdFx0dGhpcy53aWRnZXQoKVxuXHRcdFx0XHQudG9nZ2xlQ2xhc3MoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKyBcIi1kaXNhYmxlZFwiLCAhIXZhbHVlICk7XG5cblx0XHRcdC8vIElmIHRoZSB3aWRnZXQgaXMgYmVjb21pbmcgZGlzYWJsZWQsIHRoZW4gbm90aGluZyBpcyBpbnRlcmFjdGl2ZVxuXHRcdFx0aWYgKCB2YWx1ZSApIHtcblx0XHRcdFx0dGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtaG92ZXJcIiApO1xuXHRcdFx0XHR0aGlzLmZvY3VzYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0ZW5hYmxlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyh7IGRpc2FibGVkOiBmYWxzZSB9KTtcblx0fSxcblx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoeyBkaXNhYmxlZDogdHJ1ZSB9KTtcblx0fSxcblxuXHRfb246IGZ1bmN0aW9uKCBzdXBwcmVzc0Rpc2FibGVkQ2hlY2ssIGVsZW1lbnQsIGhhbmRsZXJzICkge1xuXHRcdHZhciBkZWxlZ2F0ZUVsZW1lbnQsXG5cdFx0XHRpbnN0YW5jZSA9IHRoaXM7XG5cblx0XHQvLyBubyBzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgZmxhZywgc2h1ZmZsZSBhcmd1bWVudHNcblx0XHRpZiAoIHR5cGVvZiBzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgIT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0aGFuZGxlcnMgPSBlbGVtZW50O1xuXHRcdFx0ZWxlbWVudCA9IHN1cHByZXNzRGlzYWJsZWRDaGVjaztcblx0XHRcdHN1cHByZXNzRGlzYWJsZWRDaGVjayA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIG5vIGVsZW1lbnQgYXJndW1lbnQsIHNodWZmbGUgYW5kIHVzZSB0aGlzLmVsZW1lbnRcblx0XHRpZiAoICFoYW5kbGVycyApIHtcblx0XHRcdGhhbmRsZXJzID0gZWxlbWVudDtcblx0XHRcdGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG5cdFx0XHRkZWxlZ2F0ZUVsZW1lbnQgPSB0aGlzLndpZGdldCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtZW50ID0gZGVsZWdhdGVFbGVtZW50ID0gJCggZWxlbWVudCApO1xuXHRcdFx0dGhpcy5iaW5kaW5ncyA9IHRoaXMuYmluZGluZ3MuYWRkKCBlbGVtZW50ICk7XG5cdFx0fVxuXG5cdFx0JC5lYWNoKCBoYW5kbGVycywgZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVyICkge1xuXHRcdFx0ZnVuY3Rpb24gaGFuZGxlclByb3h5KCkge1xuXHRcdFx0XHQvLyBhbGxvdyB3aWRnZXRzIHRvIGN1c3RvbWl6ZSB0aGUgZGlzYWJsZWQgaGFuZGxpbmdcblx0XHRcdFx0Ly8gLSBkaXNhYmxlZCBhcyBhbiBhcnJheSBpbnN0ZWFkIG9mIGJvb2xlYW5cblx0XHRcdFx0Ly8gLSBkaXNhYmxlZCBjbGFzcyBhcyBtZXRob2QgZm9yIGRpc2FibGluZyBpbmRpdmlkdWFsIHBhcnRzXG5cdFx0XHRcdGlmICggIXN1cHByZXNzRGlzYWJsZWRDaGVjayAmJlxuXHRcdFx0XHRcdFx0KCBpbnN0YW5jZS5vcHRpb25zLmRpc2FibGVkID09PSB0cnVlIHx8XG5cdFx0XHRcdFx0XHRcdCQoIHRoaXMgKS5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuICggdHlwZW9mIGhhbmRsZXIgPT09IFwic3RyaW5nXCIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApXG5cdFx0XHRcdFx0LmFwcGx5KCBpbnN0YW5jZSwgYXJndW1lbnRzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGNvcHkgdGhlIGd1aWQgc28gZGlyZWN0IHVuYmluZGluZyB3b3Jrc1xuXHRcdFx0aWYgKCB0eXBlb2YgaGFuZGxlciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0aGFuZGxlclByb3h5Lmd1aWQgPSBoYW5kbGVyLmd1aWQgPVxuXHRcdFx0XHRcdGhhbmRsZXIuZ3VpZCB8fCBoYW5kbGVyUHJveHkuZ3VpZCB8fCAkLmd1aWQrKztcblx0XHRcdH1cblxuXHRcdFx0dmFyIG1hdGNoID0gZXZlbnQubWF0Y2goIC9eKFtcXHc6LV0qKVxccyooLiopJC8gKSxcblx0XHRcdFx0ZXZlbnROYW1lID0gbWF0Y2hbMV0gKyBpbnN0YW5jZS5ldmVudE5hbWVzcGFjZSxcblx0XHRcdFx0c2VsZWN0b3IgPSBtYXRjaFsyXTtcblx0XHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRcdGRlbGVnYXRlRWxlbWVudC5kZWxlZ2F0ZSggc2VsZWN0b3IsIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtZW50LmJpbmQoIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0X29mZjogZnVuY3Rpb24oIGVsZW1lbnQsIGV2ZW50TmFtZSApIHtcblx0XHRldmVudE5hbWUgPSAoZXZlbnROYW1lIHx8IFwiXCIpLnNwbGl0KCBcIiBcIiApLmpvaW4oIHRoaXMuZXZlbnROYW1lc3BhY2UgKyBcIiBcIiApICtcblx0XHRcdHRoaXMuZXZlbnROYW1lc3BhY2U7XG5cdFx0ZWxlbWVudC51bmJpbmQoIGV2ZW50TmFtZSApLnVuZGVsZWdhdGUoIGV2ZW50TmFtZSApO1xuXG5cdFx0Ly8gQ2xlYXIgdGhlIHN0YWNrIHRvIGF2b2lkIG1lbW9yeSBsZWFrcyAoIzEwMDU2KVxuXHRcdHRoaXMuYmluZGluZ3MgPSAkKCB0aGlzLmJpbmRpbmdzLm5vdCggZWxlbWVudCApLmdldCgpICk7XG5cdFx0dGhpcy5mb2N1c2FibGUgPSAkKCB0aGlzLmZvY3VzYWJsZS5ub3QoIGVsZW1lbnQgKS5nZXQoKSApO1xuXHRcdHRoaXMuaG92ZXJhYmxlID0gJCggdGhpcy5ob3ZlcmFibGUubm90KCBlbGVtZW50ICkuZ2V0KCkgKTtcblx0fSxcblxuXHRfZGVsYXk6IGZ1bmN0aW9uKCBoYW5kbGVyLCBkZWxheSApIHtcblx0XHRmdW5jdGlvbiBoYW5kbGVyUHJveHkoKSB7XG5cdFx0XHRyZXR1cm4gKCB0eXBlb2YgaGFuZGxlciA9PT0gXCJzdHJpbmdcIiA/IGluc3RhbmNlWyBoYW5kbGVyIF0gOiBoYW5kbGVyIClcblx0XHRcdFx0LmFwcGx5KCBpbnN0YW5jZSwgYXJndW1lbnRzICk7XG5cdFx0fVxuXHRcdHZhciBpbnN0YW5jZSA9IHRoaXM7XG5cdFx0cmV0dXJuIHNldFRpbWVvdXQoIGhhbmRsZXJQcm94eSwgZGVsYXkgfHwgMCApO1xuXHR9LFxuXG5cdF9ob3ZlcmFibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuXHRcdHRoaXMuaG92ZXJhYmxlID0gdGhpcy5ob3ZlcmFibGUuYWRkKCBlbGVtZW50ICk7XG5cdFx0dGhpcy5fb24oIGVsZW1lbnQsIHtcblx0XHRcdG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0JCggZXZlbnQuY3VycmVudFRhcmdldCApLmFkZENsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcblx0XHRcdH0sXG5cdFx0XHRtb3VzZWxlYXZlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0X2ZvY3VzYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG5cdFx0dGhpcy5mb2N1c2FibGUgPSB0aGlzLmZvY3VzYWJsZS5hZGQoIGVsZW1lbnQgKTtcblx0XHR0aGlzLl9vbiggZWxlbWVudCwge1xuXHRcdFx0Zm9jdXNpbjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHQkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkuYWRkQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xuXHRcdFx0fSxcblx0XHRcdGZvY3Vzb3V0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0X3RyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBldmVudCwgZGF0YSApIHtcblx0XHR2YXIgcHJvcCwgb3JpZyxcblx0XHRcdGNhbGxiYWNrID0gdGhpcy5vcHRpb25zWyB0eXBlIF07XG5cblx0XHRkYXRhID0gZGF0YSB8fCB7fTtcblx0XHRldmVudCA9ICQuRXZlbnQoIGV2ZW50ICk7XG5cdFx0ZXZlbnQudHlwZSA9ICggdHlwZSA9PT0gdGhpcy53aWRnZXRFdmVudFByZWZpeCA/XG5cdFx0XHR0eXBlIDpcblx0XHRcdHRoaXMud2lkZ2V0RXZlbnRQcmVmaXggKyB0eXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHQvLyB0aGUgb3JpZ2luYWwgZXZlbnQgbWF5IGNvbWUgZnJvbSBhbnkgZWxlbWVudFxuXHRcdC8vIHNvIHdlIG5lZWQgdG8gcmVzZXQgdGhlIHRhcmdldCBvbiB0aGUgbmV3IGV2ZW50XG5cdFx0ZXZlbnQudGFyZ2V0ID0gdGhpcy5lbGVtZW50WyAwIF07XG5cblx0XHQvLyBjb3B5IG9yaWdpbmFsIGV2ZW50IHByb3BlcnRpZXMgb3ZlciB0byB0aGUgbmV3IGV2ZW50XG5cdFx0b3JpZyA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XG5cdFx0aWYgKCBvcmlnICkge1xuXHRcdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0XHRpZiAoICEoIHByb3AgaW4gZXZlbnQgKSApIHtcblx0XHRcdFx0XHRldmVudFsgcHJvcCBdID0gb3JpZ1sgcHJvcCBdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIGV2ZW50LCBkYXRhICk7XG5cdFx0cmV0dXJuICEoICQuaXNGdW5jdGlvbiggY2FsbGJhY2sgKSAmJlxuXHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMuZWxlbWVudFswXSwgWyBldmVudCBdLmNvbmNhdCggZGF0YSApICkgPT09IGZhbHNlIHx8XG5cdFx0XHRldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApO1xuXHR9XG59O1xuXG4kLmVhY2goIHsgc2hvdzogXCJmYWRlSW5cIiwgaGlkZTogXCJmYWRlT3V0XCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgZGVmYXVsdEVmZmVjdCApIHtcblx0JC5XaWRnZXQucHJvdG90eXBlWyBcIl9cIiArIG1ldGhvZCBdID0gZnVuY3Rpb24oIGVsZW1lbnQsIG9wdGlvbnMsIGNhbGxiYWNrICkge1xuXHRcdGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvcHRpb25zID0geyBlZmZlY3Q6IG9wdGlvbnMgfTtcblx0XHR9XG5cdFx0dmFyIGhhc09wdGlvbnMsXG5cdFx0XHRlZmZlY3ROYW1lID0gIW9wdGlvbnMgP1xuXHRcdFx0XHRtZXRob2QgOlxuXHRcdFx0XHRvcHRpb25zID09PSB0cnVlIHx8IHR5cGVvZiBvcHRpb25zID09PSBcIm51bWJlclwiID9cblx0XHRcdFx0XHRkZWZhdWx0RWZmZWN0IDpcblx0XHRcdFx0XHRvcHRpb25zLmVmZmVjdCB8fCBkZWZhdWx0RWZmZWN0O1xuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRvcHRpb25zID0geyBkdXJhdGlvbjogb3B0aW9ucyB9O1xuXHRcdH1cblx0XHRoYXNPcHRpb25zID0gISQuaXNFbXB0eU9iamVjdCggb3B0aW9ucyApO1xuXHRcdG9wdGlvbnMuY29tcGxldGUgPSBjYWxsYmFjaztcblx0XHRpZiAoIG9wdGlvbnMuZGVsYXkgKSB7XG5cdFx0XHRlbGVtZW50LmRlbGF5KCBvcHRpb25zLmRlbGF5ICk7XG5cdFx0fVxuXHRcdGlmICggaGFzT3B0aW9ucyAmJiAkLmVmZmVjdHMgJiYgJC5lZmZlY3RzLmVmZmVjdFsgZWZmZWN0TmFtZSBdICkge1xuXHRcdFx0ZWxlbWVudFsgbWV0aG9kIF0oIG9wdGlvbnMgKTtcblx0XHR9IGVsc2UgaWYgKCBlZmZlY3ROYW1lICE9PSBtZXRob2QgJiYgZWxlbWVudFsgZWZmZWN0TmFtZSBdICkge1xuXHRcdFx0ZWxlbWVudFsgZWZmZWN0TmFtZSBdKCBvcHRpb25zLmR1cmF0aW9uLCBvcHRpb25zLmVhc2luZywgY2FsbGJhY2sgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWxlbWVudC5xdWV1ZShmdW5jdGlvbiggbmV4dCApIHtcblx0XHRcdFx0JCggdGhpcyApWyBtZXRob2QgXSgpO1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoIGVsZW1lbnRbIDAgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5leHQoKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcbn0pO1xuXG52YXIgd2lkZ2V0ID0gJC53aWRnZXQ7XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgTW91c2UgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9tb3VzZS9cbiAqL1xuXG5cbnZhciBtb3VzZUhhbmRsZWQgPSBmYWxzZTtcbiQoIGRvY3VtZW50ICkubW91c2V1cCggZnVuY3Rpb24oKSB7XG5cdG1vdXNlSGFuZGxlZCA9IGZhbHNlO1xufSk7XG5cbnZhciBtb3VzZSA9ICQud2lkZ2V0KFwidWkubW91c2VcIiwge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXHRvcHRpb25zOiB7XG5cdFx0Y2FuY2VsOiBcImlucHV0LHRleHRhcmVhLGJ1dHRvbixzZWxlY3Qsb3B0aW9uXCIsXG5cdFx0ZGlzdGFuY2U6IDEsXG5cdFx0ZGVsYXk6IDBcblx0fSxcblx0X21vdXNlSW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzO1xuXG5cdFx0dGhpcy5lbGVtZW50XG5cdFx0XHQuYmluZChcIm1vdXNlZG93bi5cIiArIHRoaXMud2lkZ2V0TmFtZSwgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0cmV0dXJuIHRoYXQuX21vdXNlRG93bihldmVudCk7XG5cdFx0XHR9KVxuXHRcdFx0LmJpbmQoXCJjbGljay5cIiArIHRoaXMud2lkZ2V0TmFtZSwgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0aWYgKHRydWUgPT09ICQuZGF0YShldmVudC50YXJnZXQsIHRoYXQud2lkZ2V0TmFtZSArIFwiLnByZXZlbnRDbGlja0V2ZW50XCIpKSB7XG5cdFx0XHRcdFx0JC5yZW1vdmVEYXRhKGV2ZW50LnRhcmdldCwgdGhhdC53aWRnZXROYW1lICsgXCIucHJldmVudENsaWNrRXZlbnRcIik7XG5cdFx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuXHR9LFxuXG5cdC8vIFRPRE86IG1ha2Ugc3VyZSBkZXN0cm95aW5nIG9uZSBpbnN0YW5jZSBvZiBtb3VzZSBkb2Vzbid0IG1lc3Mgd2l0aFxuXHQvLyBvdGhlciBpbnN0YW5jZXMgb2YgbW91c2Vcblx0X21vdXNlRGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbGVtZW50LnVuYmluZChcIi5cIiArIHRoaXMud2lkZ2V0TmFtZSk7XG5cdFx0aWYgKCB0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSApIHtcblx0XHRcdHRoaXMuZG9jdW1lbnRcblx0XHRcdFx0LnVuYmluZChcIm1vdXNlbW92ZS5cIiArIHRoaXMud2lkZ2V0TmFtZSwgdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpXG5cdFx0XHRcdC51bmJpbmQoXCJtb3VzZXVwLlwiICsgdGhpcy53aWRnZXROYW1lLCB0aGlzLl9tb3VzZVVwRGVsZWdhdGUpO1xuXHRcdH1cblx0fSxcblxuXHRfbW91c2VEb3duOiBmdW5jdGlvbihldmVudCkge1xuXHRcdC8vIGRvbid0IGxldCBtb3JlIHRoYW4gb25lIHdpZGdldCBoYW5kbGUgbW91c2VTdGFydFxuXHRcdGlmICggbW91c2VIYW5kbGVkICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuX21vdXNlTW92ZWQgPSBmYWxzZTtcblxuXHRcdC8vIHdlIG1heSBoYXZlIG1pc3NlZCBtb3VzZXVwIChvdXQgb2Ygd2luZG93KVxuXHRcdCh0aGlzLl9tb3VzZVN0YXJ0ZWQgJiYgdGhpcy5fbW91c2VVcChldmVudCkpO1xuXG5cdFx0dGhpcy5fbW91c2VEb3duRXZlbnQgPSBldmVudDtcblxuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdGJ0bklzTGVmdCA9IChldmVudC53aGljaCA9PT0gMSksXG5cdFx0XHQvLyBldmVudC50YXJnZXQubm9kZU5hbWUgd29ya3MgYXJvdW5kIGEgYnVnIGluIElFIDggd2l0aFxuXHRcdFx0Ly8gZGlzYWJsZWQgaW5wdXRzICgjNzYyMClcblx0XHRcdGVsSXNDYW5jZWwgPSAodHlwZW9mIHRoaXMub3B0aW9ucy5jYW5jZWwgPT09IFwic3RyaW5nXCIgJiYgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID8gJChldmVudC50YXJnZXQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLmNhbmNlbCkubGVuZ3RoIDogZmFsc2UpO1xuXHRcdGlmICghYnRuSXNMZWZ0IHx8IGVsSXNDYW5jZWwgfHwgIXRoaXMuX21vdXNlQ2FwdHVyZShldmVudCkpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdHRoaXMubW91c2VEZWxheU1ldCA9ICF0aGlzLm9wdGlvbnMuZGVsYXk7XG5cdFx0aWYgKCF0aGlzLm1vdXNlRGVsYXlNZXQpIHtcblx0XHRcdHRoaXMuX21vdXNlRGVsYXlUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoYXQubW91c2VEZWxheU1ldCA9IHRydWU7XG5cdFx0XHR9LCB0aGlzLm9wdGlvbnMuZGVsYXkpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGV2ZW50KSAmJiB0aGlzLl9tb3VzZURlbGF5TWV0KGV2ZW50KSkge1xuXHRcdFx0dGhpcy5fbW91c2VTdGFydGVkID0gKHRoaXMuX21vdXNlU3RhcnQoZXZlbnQpICE9PSBmYWxzZSk7XG5cdFx0XHRpZiAoIXRoaXMuX21vdXNlU3RhcnRlZCkge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDbGljayBldmVudCBtYXkgbmV2ZXIgaGF2ZSBmaXJlZCAoR2Vja28gJiBPcGVyYSlcblx0XHRpZiAodHJ1ZSA9PT0gJC5kYXRhKGV2ZW50LnRhcmdldCwgdGhpcy53aWRnZXROYW1lICsgXCIucHJldmVudENsaWNrRXZlbnRcIikpIHtcblx0XHRcdCQucmVtb3ZlRGF0YShldmVudC50YXJnZXQsIHRoaXMud2lkZ2V0TmFtZSArIFwiLnByZXZlbnRDbGlja0V2ZW50XCIpO1xuXHRcdH1cblxuXHRcdC8vIHRoZXNlIGRlbGVnYXRlcyBhcmUgcmVxdWlyZWQgdG8ga2VlcCBjb250ZXh0XG5cdFx0dGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0cmV0dXJuIHRoYXQuX21vdXNlTW92ZShldmVudCk7XG5cdFx0fTtcblx0XHR0aGlzLl9tb3VzZVVwRGVsZWdhdGUgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0cmV0dXJuIHRoYXQuX21vdXNlVXAoZXZlbnQpO1xuXHRcdH07XG5cblx0XHR0aGlzLmRvY3VtZW50XG5cdFx0XHQuYmluZCggXCJtb3VzZW1vdmUuXCIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlTW92ZURlbGVnYXRlIClcblx0XHRcdC5iaW5kKCBcIm1vdXNldXAuXCIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSApO1xuXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdG1vdXNlSGFuZGxlZCA9IHRydWU7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblx0X21vdXNlTW92ZTogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHQvLyBPbmx5IGNoZWNrIGZvciBtb3VzZXVwcyBvdXRzaWRlIHRoZSBkb2N1bWVudCBpZiB5b3UndmUgbW92ZWQgaW5zaWRlIHRoZSBkb2N1bWVudFxuXHRcdC8vIGF0IGxlYXN0IG9uY2UuIFRoaXMgcHJldmVudHMgdGhlIGZpcmluZyBvZiBtb3VzZXVwIGluIHRoZSBjYXNlIG9mIElFPDksIHdoaWNoIHdpbGxcblx0XHQvLyBmaXJlIGEgbW91c2Vtb3ZlIGV2ZW50IGlmIGNvbnRlbnQgaXMgcGxhY2VkIHVuZGVyIHRoZSBjdXJzb3IuIFNlZSAjNzc3OFxuXHRcdC8vIFN1cHBvcnQ6IElFIDw5XG5cdFx0aWYgKCB0aGlzLl9tb3VzZU1vdmVkICkge1xuXHRcdFx0Ly8gSUUgbW91c2V1cCBjaGVjayAtIG1vdXNldXAgaGFwcGVuZWQgd2hlbiBtb3VzZSB3YXMgb3V0IG9mIHdpbmRvd1xuXHRcdFx0aWYgKCQudWkuaWUgJiYgKCAhZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA8IDkgKSAmJiAhZXZlbnQuYnV0dG9uKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9tb3VzZVVwKGV2ZW50KTtcblxuXHRcdFx0Ly8gSWZyYW1lIG1vdXNldXAgY2hlY2sgLSBtb3VzZXVwIG9jY3VycmVkIGluIGFub3RoZXIgZG9jdW1lbnRcblx0XHRcdH0gZWxzZSBpZiAoICFldmVudC53aGljaCApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX21vdXNlVXAoIGV2ZW50ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBldmVudC53aGljaCB8fCBldmVudC5idXR0b24gKSB7XG5cdFx0XHR0aGlzLl9tb3VzZU1vdmVkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5fbW91c2VTdGFydGVkKSB7XG5cdFx0XHR0aGlzLl9tb3VzZURyYWcoZXZlbnQpO1xuXHRcdFx0cmV0dXJuIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX21vdXNlRGlzdGFuY2VNZXQoZXZlbnQpICYmIHRoaXMuX21vdXNlRGVsYXlNZXQoZXZlbnQpKSB7XG5cdFx0XHR0aGlzLl9tb3VzZVN0YXJ0ZWQgPVxuXHRcdFx0XHQodGhpcy5fbW91c2VTdGFydCh0aGlzLl9tb3VzZURvd25FdmVudCwgZXZlbnQpICE9PSBmYWxzZSk7XG5cdFx0XHQodGhpcy5fbW91c2VTdGFydGVkID8gdGhpcy5fbW91c2VEcmFnKGV2ZW50KSA6IHRoaXMuX21vdXNlVXAoZXZlbnQpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gIXRoaXMuX21vdXNlU3RhcnRlZDtcblx0fSxcblxuXHRfbW91c2VVcDogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR0aGlzLmRvY3VtZW50XG5cdFx0XHQudW5iaW5kKCBcIm1vdXNlbW92ZS5cIiArIHRoaXMud2lkZ2V0TmFtZSwgdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUgKVxuXHRcdFx0LnVuYmluZCggXCJtb3VzZXVwLlwiICsgdGhpcy53aWRnZXROYW1lLCB0aGlzLl9tb3VzZVVwRGVsZWdhdGUgKTtcblxuXHRcdGlmICh0aGlzLl9tb3VzZVN0YXJ0ZWQpIHtcblx0XHRcdHRoaXMuX21vdXNlU3RhcnRlZCA9IGZhbHNlO1xuXG5cdFx0XHRpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLl9tb3VzZURvd25FdmVudC50YXJnZXQpIHtcblx0XHRcdFx0JC5kYXRhKGV2ZW50LnRhcmdldCwgdGhpcy53aWRnZXROYW1lICsgXCIucHJldmVudENsaWNrRXZlbnRcIiwgdHJ1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX21vdXNlU3RvcChldmVudCk7XG5cdFx0fVxuXG5cdFx0bW91c2VIYW5kbGVkID0gZmFsc2U7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXG5cdF9tb3VzZURpc3RhbmNlTWV0OiBmdW5jdGlvbihldmVudCkge1xuXHRcdHJldHVybiAoTWF0aC5tYXgoXG5cdFx0XHRcdE1hdGguYWJzKHRoaXMuX21vdXNlRG93bkV2ZW50LnBhZ2VYIC0gZXZlbnQucGFnZVgpLFxuXHRcdFx0XHRNYXRoLmFicyh0aGlzLl9tb3VzZURvd25FdmVudC5wYWdlWSAtIGV2ZW50LnBhZ2VZKVxuXHRcdFx0KSA+PSB0aGlzLm9wdGlvbnMuZGlzdGFuY2Vcblx0XHQpO1xuXHR9LFxuXG5cdF9tb3VzZURlbGF5TWV0OiBmdW5jdGlvbigvKiBldmVudCAqLykge1xuXHRcdHJldHVybiB0aGlzLm1vdXNlRGVsYXlNZXQ7XG5cdH0sXG5cblx0Ly8gVGhlc2UgYXJlIHBsYWNlaG9sZGVyIG1ldGhvZHMsIHRvIGJlIG92ZXJyaWRlbiBieSBleHRlbmRpbmcgcGx1Z2luXG5cdF9tb3VzZVN0YXJ0OiBmdW5jdGlvbigvKiBldmVudCAqLykge30sXG5cdF9tb3VzZURyYWc6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7fSxcblx0X21vdXNlU3RvcDogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHt9LFxuXHRfbW91c2VDYXB0dXJlOiBmdW5jdGlvbigvKiBldmVudCAqLykgeyByZXR1cm4gdHJ1ZTsgfVxufSk7XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgUG9zaXRpb24gMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9wb3NpdGlvbi9cbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiQudWkgPSAkLnVpIHx8IHt9O1xuXG52YXIgY2FjaGVkU2Nyb2xsYmFyV2lkdGgsIHN1cHBvcnRzT2Zmc2V0RnJhY3Rpb25zLFxuXHRtYXggPSBNYXRoLm1heCxcblx0YWJzID0gTWF0aC5hYnMsXG5cdHJvdW5kID0gTWF0aC5yb3VuZCxcblx0cmhvcml6b250YWwgPSAvbGVmdHxjZW50ZXJ8cmlnaHQvLFxuXHRydmVydGljYWwgPSAvdG9wfGNlbnRlcnxib3R0b20vLFxuXHRyb2Zmc2V0ID0gL1tcXCtcXC1dXFxkKyhcXC5bXFxkXSspPyU/Lyxcblx0cnBvc2l0aW9uID0gL15cXHcrLyxcblx0cnBlcmNlbnQgPSAvJSQvLFxuXHRfcG9zaXRpb24gPSAkLmZuLnBvc2l0aW9uO1xuXG5mdW5jdGlvbiBnZXRPZmZzZXRzKCBvZmZzZXRzLCB3aWR0aCwgaGVpZ2h0ICkge1xuXHRyZXR1cm4gW1xuXHRcdHBhcnNlRmxvYXQoIG9mZnNldHNbIDAgXSApICogKCBycGVyY2VudC50ZXN0KCBvZmZzZXRzWyAwIF0gKSA/IHdpZHRoIC8gMTAwIDogMSApLFxuXHRcdHBhcnNlRmxvYXQoIG9mZnNldHNbIDEgXSApICogKCBycGVyY2VudC50ZXN0KCBvZmZzZXRzWyAxIF0gKSA/IGhlaWdodCAvIDEwMCA6IDEgKVxuXHRdO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNzcyggZWxlbWVudCwgcHJvcGVydHkgKSB7XG5cdHJldHVybiBwYXJzZUludCggJC5jc3MoIGVsZW1lbnQsIHByb3BlcnR5ICksIDEwICkgfHwgMDtcbn1cblxuZnVuY3Rpb24gZ2V0RGltZW5zaW9ucyggZWxlbSApIHtcblx0dmFyIHJhdyA9IGVsZW1bMF07XG5cdGlmICggcmF3Lm5vZGVUeXBlID09PSA5ICkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR3aWR0aDogZWxlbS53aWR0aCgpLFxuXHRcdFx0aGVpZ2h0OiBlbGVtLmhlaWdodCgpLFxuXHRcdFx0b2Zmc2V0OiB7IHRvcDogMCwgbGVmdDogMCB9XG5cdFx0fTtcblx0fVxuXHRpZiAoICQuaXNXaW5kb3coIHJhdyApICkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR3aWR0aDogZWxlbS53aWR0aCgpLFxuXHRcdFx0aGVpZ2h0OiBlbGVtLmhlaWdodCgpLFxuXHRcdFx0b2Zmc2V0OiB7IHRvcDogZWxlbS5zY3JvbGxUb3AoKSwgbGVmdDogZWxlbS5zY3JvbGxMZWZ0KCkgfVxuXHRcdH07XG5cdH1cblx0aWYgKCByYXcucHJldmVudERlZmF1bHQgKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHdpZHRoOiAwLFxuXHRcdFx0aGVpZ2h0OiAwLFxuXHRcdFx0b2Zmc2V0OiB7IHRvcDogcmF3LnBhZ2VZLCBsZWZ0OiByYXcucGFnZVggfVxuXHRcdH07XG5cdH1cblx0cmV0dXJuIHtcblx0XHR3aWR0aDogZWxlbS5vdXRlcldpZHRoKCksXG5cdFx0aGVpZ2h0OiBlbGVtLm91dGVySGVpZ2h0KCksXG5cdFx0b2Zmc2V0OiBlbGVtLm9mZnNldCgpXG5cdH07XG59XG5cbiQucG9zaXRpb24gPSB7XG5cdHNjcm9sbGJhcldpZHRoOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoIGNhY2hlZFNjcm9sbGJhcldpZHRoICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm4gY2FjaGVkU2Nyb2xsYmFyV2lkdGg7XG5cdFx0fVxuXHRcdHZhciB3MSwgdzIsXG5cdFx0XHRkaXYgPSAkKCBcIjxkaXYgc3R5bGU9J2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47Jz48ZGl2IHN0eWxlPSdoZWlnaHQ6MTAwcHg7d2lkdGg6YXV0bzsnPjwvZGl2PjwvZGl2PlwiICksXG5cdFx0XHRpbm5lckRpdiA9IGRpdi5jaGlsZHJlbigpWzBdO1xuXG5cdFx0JCggXCJib2R5XCIgKS5hcHBlbmQoIGRpdiApO1xuXHRcdHcxID0gaW5uZXJEaXYub2Zmc2V0V2lkdGg7XG5cdFx0ZGl2LmNzcyggXCJvdmVyZmxvd1wiLCBcInNjcm9sbFwiICk7XG5cblx0XHR3MiA9IGlubmVyRGl2Lm9mZnNldFdpZHRoO1xuXG5cdFx0aWYgKCB3MSA9PT0gdzIgKSB7XG5cdFx0XHR3MiA9IGRpdlswXS5jbGllbnRXaWR0aDtcblx0XHR9XG5cblx0XHRkaXYucmVtb3ZlKCk7XG5cblx0XHRyZXR1cm4gKGNhY2hlZFNjcm9sbGJhcldpZHRoID0gdzEgLSB3Mik7XG5cdH0sXG5cdGdldFNjcm9sbEluZm86IGZ1bmN0aW9uKCB3aXRoaW4gKSB7XG5cdFx0dmFyIG92ZXJmbG93WCA9IHdpdGhpbi5pc1dpbmRvdyB8fCB3aXRoaW4uaXNEb2N1bWVudCA/IFwiXCIgOlxuXHRcdFx0XHR3aXRoaW4uZWxlbWVudC5jc3MoIFwib3ZlcmZsb3cteFwiICksXG5cdFx0XHRvdmVyZmxvd1kgPSB3aXRoaW4uaXNXaW5kb3cgfHwgd2l0aGluLmlzRG9jdW1lbnQgPyBcIlwiIDpcblx0XHRcdFx0d2l0aGluLmVsZW1lbnQuY3NzKCBcIm92ZXJmbG93LXlcIiApLFxuXHRcdFx0aGFzT3ZlcmZsb3dYID0gb3ZlcmZsb3dYID09PSBcInNjcm9sbFwiIHx8XG5cdFx0XHRcdCggb3ZlcmZsb3dYID09PSBcImF1dG9cIiAmJiB3aXRoaW4ud2lkdGggPCB3aXRoaW4uZWxlbWVudFswXS5zY3JvbGxXaWR0aCApLFxuXHRcdFx0aGFzT3ZlcmZsb3dZID0gb3ZlcmZsb3dZID09PSBcInNjcm9sbFwiIHx8XG5cdFx0XHRcdCggb3ZlcmZsb3dZID09PSBcImF1dG9cIiAmJiB3aXRoaW4uaGVpZ2h0IDwgd2l0aGluLmVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0ICk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHdpZHRoOiBoYXNPdmVyZmxvd1kgPyAkLnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCkgOiAwLFxuXHRcdFx0aGVpZ2h0OiBoYXNPdmVyZmxvd1ggPyAkLnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCkgOiAwXG5cdFx0fTtcblx0fSxcblx0Z2V0V2l0aGluSW5mbzogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG5cdFx0dmFyIHdpdGhpbkVsZW1lbnQgPSAkKCBlbGVtZW50IHx8IHdpbmRvdyApLFxuXHRcdFx0aXNXaW5kb3cgPSAkLmlzV2luZG93KCB3aXRoaW5FbGVtZW50WzBdICksXG5cdFx0XHRpc0RvY3VtZW50ID0gISF3aXRoaW5FbGVtZW50WyAwIF0gJiYgd2l0aGluRWxlbWVudFsgMCBdLm5vZGVUeXBlID09PSA5O1xuXHRcdHJldHVybiB7XG5cdFx0XHRlbGVtZW50OiB3aXRoaW5FbGVtZW50LFxuXHRcdFx0aXNXaW5kb3c6IGlzV2luZG93LFxuXHRcdFx0aXNEb2N1bWVudDogaXNEb2N1bWVudCxcblx0XHRcdG9mZnNldDogd2l0aGluRWxlbWVudC5vZmZzZXQoKSB8fCB7IGxlZnQ6IDAsIHRvcDogMCB9LFxuXHRcdFx0c2Nyb2xsTGVmdDogd2l0aGluRWxlbWVudC5zY3JvbGxMZWZ0KCksXG5cdFx0XHRzY3JvbGxUb3A6IHdpdGhpbkVsZW1lbnQuc2Nyb2xsVG9wKCksXG5cblx0XHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSAxLjYueFxuXHRcdFx0Ly8galF1ZXJ5IDEuNiBkb2Vzbid0IHN1cHBvcnQgLm91dGVyV2lkdGgvSGVpZ2h0KCkgb24gZG9jdW1lbnRzIG9yIHdpbmRvd3Ncblx0XHRcdHdpZHRoOiBpc1dpbmRvdyB8fCBpc0RvY3VtZW50ID8gd2l0aGluRWxlbWVudC53aWR0aCgpIDogd2l0aGluRWxlbWVudC5vdXRlcldpZHRoKCksXG5cdFx0XHRoZWlnaHQ6IGlzV2luZG93IHx8IGlzRG9jdW1lbnQgPyB3aXRoaW5FbGVtZW50LmhlaWdodCgpIDogd2l0aGluRWxlbWVudC5vdXRlckhlaWdodCgpXG5cdFx0fTtcblx0fVxufTtcblxuJC5mbi5wb3NpdGlvbiA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRpZiAoICFvcHRpb25zIHx8ICFvcHRpb25zLm9mICkge1xuXHRcdHJldHVybiBfcG9zaXRpb24uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHR9XG5cblx0Ly8gbWFrZSBhIGNvcHksIHdlIGRvbid0IHdhbnQgdG8gbW9kaWZ5IGFyZ3VtZW50c1xuXHRvcHRpb25zID0gJC5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cblx0dmFyIGF0T2Zmc2V0LCB0YXJnZXRXaWR0aCwgdGFyZ2V0SGVpZ2h0LCB0YXJnZXRPZmZzZXQsIGJhc2VQb3NpdGlvbiwgZGltZW5zaW9ucyxcblx0XHR0YXJnZXQgPSAkKCBvcHRpb25zLm9mICksXG5cdFx0d2l0aGluID0gJC5wb3NpdGlvbi5nZXRXaXRoaW5JbmZvKCBvcHRpb25zLndpdGhpbiApLFxuXHRcdHNjcm9sbEluZm8gPSAkLnBvc2l0aW9uLmdldFNjcm9sbEluZm8oIHdpdGhpbiApLFxuXHRcdGNvbGxpc2lvbiA9ICggb3B0aW9ucy5jb2xsaXNpb24gfHwgXCJmbGlwXCIgKS5zcGxpdCggXCIgXCIgKSxcblx0XHRvZmZzZXRzID0ge307XG5cblx0ZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoIHRhcmdldCApO1xuXHRpZiAoIHRhcmdldFswXS5wcmV2ZW50RGVmYXVsdCApIHtcblx0XHQvLyBmb3JjZSBsZWZ0IHRvcCB0byBhbGxvdyBmbGlwcGluZ1xuXHRcdG9wdGlvbnMuYXQgPSBcImxlZnQgdG9wXCI7XG5cdH1cblx0dGFyZ2V0V2lkdGggPSBkaW1lbnNpb25zLndpZHRoO1xuXHR0YXJnZXRIZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodDtcblx0dGFyZ2V0T2Zmc2V0ID0gZGltZW5zaW9ucy5vZmZzZXQ7XG5cdC8vIGNsb25lIHRvIHJldXNlIG9yaWdpbmFsIHRhcmdldE9mZnNldCBsYXRlclxuXHRiYXNlUG9zaXRpb24gPSAkLmV4dGVuZCgge30sIHRhcmdldE9mZnNldCApO1xuXG5cdC8vIGZvcmNlIG15IGFuZCBhdCB0byBoYXZlIHZhbGlkIGhvcml6b250YWwgYW5kIHZlcnRpY2FsIHBvc2l0aW9uc1xuXHQvLyBpZiBhIHZhbHVlIGlzIG1pc3Npbmcgb3IgaW52YWxpZCwgaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2VudGVyXG5cdCQuZWFjaCggWyBcIm15XCIsIFwiYXRcIiBdLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgcG9zID0gKCBvcHRpb25zWyB0aGlzIF0gfHwgXCJcIiApLnNwbGl0KCBcIiBcIiApLFxuXHRcdFx0aG9yaXpvbnRhbE9mZnNldCxcblx0XHRcdHZlcnRpY2FsT2Zmc2V0O1xuXG5cdFx0aWYgKCBwb3MubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRwb3MgPSByaG9yaXpvbnRhbC50ZXN0KCBwb3NbIDAgXSApID9cblx0XHRcdFx0cG9zLmNvbmNhdCggWyBcImNlbnRlclwiIF0gKSA6XG5cdFx0XHRcdHJ2ZXJ0aWNhbC50ZXN0KCBwb3NbIDAgXSApID9cblx0XHRcdFx0XHRbIFwiY2VudGVyXCIgXS5jb25jYXQoIHBvcyApIDpcblx0XHRcdFx0XHRbIFwiY2VudGVyXCIsIFwiY2VudGVyXCIgXTtcblx0XHR9XG5cdFx0cG9zWyAwIF0gPSByaG9yaXpvbnRhbC50ZXN0KCBwb3NbIDAgXSApID8gcG9zWyAwIF0gOiBcImNlbnRlclwiO1xuXHRcdHBvc1sgMSBdID0gcnZlcnRpY2FsLnRlc3QoIHBvc1sgMSBdICkgPyBwb3NbIDEgXSA6IFwiY2VudGVyXCI7XG5cblx0XHQvLyBjYWxjdWxhdGUgb2Zmc2V0c1xuXHRcdGhvcml6b250YWxPZmZzZXQgPSByb2Zmc2V0LmV4ZWMoIHBvc1sgMCBdICk7XG5cdFx0dmVydGljYWxPZmZzZXQgPSByb2Zmc2V0LmV4ZWMoIHBvc1sgMSBdICk7XG5cdFx0b2Zmc2V0c1sgdGhpcyBdID0gW1xuXHRcdFx0aG9yaXpvbnRhbE9mZnNldCA/IGhvcml6b250YWxPZmZzZXRbIDAgXSA6IDAsXG5cdFx0XHR2ZXJ0aWNhbE9mZnNldCA/IHZlcnRpY2FsT2Zmc2V0WyAwIF0gOiAwXG5cdFx0XTtcblxuXHRcdC8vIHJlZHVjZSB0byBqdXN0IHRoZSBwb3NpdGlvbnMgd2l0aG91dCB0aGUgb2Zmc2V0c1xuXHRcdG9wdGlvbnNbIHRoaXMgXSA9IFtcblx0XHRcdHJwb3NpdGlvbi5leGVjKCBwb3NbIDAgXSApWyAwIF0sXG5cdFx0XHRycG9zaXRpb24uZXhlYyggcG9zWyAxIF0gKVsgMCBdXG5cdFx0XTtcblx0fSk7XG5cblx0Ly8gbm9ybWFsaXplIGNvbGxpc2lvbiBvcHRpb25cblx0aWYgKCBjb2xsaXNpb24ubGVuZ3RoID09PSAxICkge1xuXHRcdGNvbGxpc2lvblsgMSBdID0gY29sbGlzaW9uWyAwIF07XG5cdH1cblxuXHRpZiAoIG9wdGlvbnMuYXRbIDAgXSA9PT0gXCJyaWdodFwiICkge1xuXHRcdGJhc2VQb3NpdGlvbi5sZWZ0ICs9IHRhcmdldFdpZHRoO1xuXHR9IGVsc2UgaWYgKCBvcHRpb25zLmF0WyAwIF0gPT09IFwiY2VudGVyXCIgKSB7XG5cdFx0YmFzZVBvc2l0aW9uLmxlZnQgKz0gdGFyZ2V0V2lkdGggLyAyO1xuXHR9XG5cblx0aWYgKCBvcHRpb25zLmF0WyAxIF0gPT09IFwiYm90dG9tXCIgKSB7XG5cdFx0YmFzZVBvc2l0aW9uLnRvcCArPSB0YXJnZXRIZWlnaHQ7XG5cdH0gZWxzZSBpZiAoIG9wdGlvbnMuYXRbIDEgXSA9PT0gXCJjZW50ZXJcIiApIHtcblx0XHRiYXNlUG9zaXRpb24udG9wICs9IHRhcmdldEhlaWdodCAvIDI7XG5cdH1cblxuXHRhdE9mZnNldCA9IGdldE9mZnNldHMoIG9mZnNldHMuYXQsIHRhcmdldFdpZHRoLCB0YXJnZXRIZWlnaHQgKTtcblx0YmFzZVBvc2l0aW9uLmxlZnQgKz0gYXRPZmZzZXRbIDAgXTtcblx0YmFzZVBvc2l0aW9uLnRvcCArPSBhdE9mZnNldFsgMSBdO1xuXG5cdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNvbGxpc2lvblBvc2l0aW9uLCB1c2luZyxcblx0XHRcdGVsZW0gPSAkKCB0aGlzICksXG5cdFx0XHRlbGVtV2lkdGggPSBlbGVtLm91dGVyV2lkdGgoKSxcblx0XHRcdGVsZW1IZWlnaHQgPSBlbGVtLm91dGVySGVpZ2h0KCksXG5cdFx0XHRtYXJnaW5MZWZ0ID0gcGFyc2VDc3MoIHRoaXMsIFwibWFyZ2luTGVmdFwiICksXG5cdFx0XHRtYXJnaW5Ub3AgPSBwYXJzZUNzcyggdGhpcywgXCJtYXJnaW5Ub3BcIiApLFxuXHRcdFx0Y29sbGlzaW9uV2lkdGggPSBlbGVtV2lkdGggKyBtYXJnaW5MZWZ0ICsgcGFyc2VDc3MoIHRoaXMsIFwibWFyZ2luUmlnaHRcIiApICsgc2Nyb2xsSW5mby53aWR0aCxcblx0XHRcdGNvbGxpc2lvbkhlaWdodCA9IGVsZW1IZWlnaHQgKyBtYXJnaW5Ub3AgKyBwYXJzZUNzcyggdGhpcywgXCJtYXJnaW5Cb3R0b21cIiApICsgc2Nyb2xsSW5mby5oZWlnaHQsXG5cdFx0XHRwb3NpdGlvbiA9ICQuZXh0ZW5kKCB7fSwgYmFzZVBvc2l0aW9uICksXG5cdFx0XHRteU9mZnNldCA9IGdldE9mZnNldHMoIG9mZnNldHMubXksIGVsZW0ub3V0ZXJXaWR0aCgpLCBlbGVtLm91dGVySGVpZ2h0KCkgKTtcblxuXHRcdGlmICggb3B0aW9ucy5teVsgMCBdID09PSBcInJpZ2h0XCIgKSB7XG5cdFx0XHRwb3NpdGlvbi5sZWZ0IC09IGVsZW1XaWR0aDtcblx0XHR9IGVsc2UgaWYgKCBvcHRpb25zLm15WyAwIF0gPT09IFwiY2VudGVyXCIgKSB7XG5cdFx0XHRwb3NpdGlvbi5sZWZ0IC09IGVsZW1XaWR0aCAvIDI7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLm15WyAxIF0gPT09IFwiYm90dG9tXCIgKSB7XG5cdFx0XHRwb3NpdGlvbi50b3AgLT0gZWxlbUhlaWdodDtcblx0XHR9IGVsc2UgaWYgKCBvcHRpb25zLm15WyAxIF0gPT09IFwiY2VudGVyXCIgKSB7XG5cdFx0XHRwb3NpdGlvbi50b3AgLT0gZWxlbUhlaWdodCAvIDI7XG5cdFx0fVxuXG5cdFx0cG9zaXRpb24ubGVmdCArPSBteU9mZnNldFsgMCBdO1xuXHRcdHBvc2l0aW9uLnRvcCArPSBteU9mZnNldFsgMSBdO1xuXG5cdFx0Ly8gaWYgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGZyYWN0aW9ucywgdGhlbiByb3VuZCBmb3IgY29uc2lzdGVudCByZXN1bHRzXG5cdFx0aWYgKCAhc3VwcG9ydHNPZmZzZXRGcmFjdGlvbnMgKSB7XG5cdFx0XHRwb3NpdGlvbi5sZWZ0ID0gcm91bmQoIHBvc2l0aW9uLmxlZnQgKTtcblx0XHRcdHBvc2l0aW9uLnRvcCA9IHJvdW5kKCBwb3NpdGlvbi50b3AgKTtcblx0XHR9XG5cblx0XHRjb2xsaXNpb25Qb3NpdGlvbiA9IHtcblx0XHRcdG1hcmdpbkxlZnQ6IG1hcmdpbkxlZnQsXG5cdFx0XHRtYXJnaW5Ub3A6IG1hcmdpblRvcFxuXHRcdH07XG5cblx0XHQkLmVhY2goIFsgXCJsZWZ0XCIsIFwidG9wXCIgXSwgZnVuY3Rpb24oIGksIGRpciApIHtcblx0XHRcdGlmICggJC51aS5wb3NpdGlvblsgY29sbGlzaW9uWyBpIF0gXSApIHtcblx0XHRcdFx0JC51aS5wb3NpdGlvblsgY29sbGlzaW9uWyBpIF0gXVsgZGlyIF0oIHBvc2l0aW9uLCB7XG5cdFx0XHRcdFx0dGFyZ2V0V2lkdGg6IHRhcmdldFdpZHRoLFxuXHRcdFx0XHRcdHRhcmdldEhlaWdodDogdGFyZ2V0SGVpZ2h0LFxuXHRcdFx0XHRcdGVsZW1XaWR0aDogZWxlbVdpZHRoLFxuXHRcdFx0XHRcdGVsZW1IZWlnaHQ6IGVsZW1IZWlnaHQsXG5cdFx0XHRcdFx0Y29sbGlzaW9uUG9zaXRpb246IGNvbGxpc2lvblBvc2l0aW9uLFxuXHRcdFx0XHRcdGNvbGxpc2lvbldpZHRoOiBjb2xsaXNpb25XaWR0aCxcblx0XHRcdFx0XHRjb2xsaXNpb25IZWlnaHQ6IGNvbGxpc2lvbkhlaWdodCxcblx0XHRcdFx0XHRvZmZzZXQ6IFsgYXRPZmZzZXRbIDAgXSArIG15T2Zmc2V0WyAwIF0sIGF0T2Zmc2V0IFsgMSBdICsgbXlPZmZzZXRbIDEgXSBdLFxuXHRcdFx0XHRcdG15OiBvcHRpb25zLm15LFxuXHRcdFx0XHRcdGF0OiBvcHRpb25zLmF0LFxuXHRcdFx0XHRcdHdpdGhpbjogd2l0aGluLFxuXHRcdFx0XHRcdGVsZW06IGVsZW1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRpZiAoIG9wdGlvbnMudXNpbmcgKSB7XG5cdFx0XHQvLyBhZGRzIGZlZWRiYWNrIGFzIHNlY29uZCBhcmd1bWVudCB0byB1c2luZyBjYWxsYmFjaywgaWYgcHJlc2VudFxuXHRcdFx0dXNpbmcgPSBmdW5jdGlvbiggcHJvcHMgKSB7XG5cdFx0XHRcdHZhciBsZWZ0ID0gdGFyZ2V0T2Zmc2V0LmxlZnQgLSBwb3NpdGlvbi5sZWZ0LFxuXHRcdFx0XHRcdHJpZ2h0ID0gbGVmdCArIHRhcmdldFdpZHRoIC0gZWxlbVdpZHRoLFxuXHRcdFx0XHRcdHRvcCA9IHRhcmdldE9mZnNldC50b3AgLSBwb3NpdGlvbi50b3AsXG5cdFx0XHRcdFx0Ym90dG9tID0gdG9wICsgdGFyZ2V0SGVpZ2h0IC0gZWxlbUhlaWdodCxcblx0XHRcdFx0XHRmZWVkYmFjayA9IHtcblx0XHRcdFx0XHRcdHRhcmdldDoge1xuXHRcdFx0XHRcdFx0XHRlbGVtZW50OiB0YXJnZXQsXG5cdFx0XHRcdFx0XHRcdGxlZnQ6IHRhcmdldE9mZnNldC5sZWZ0LFxuXHRcdFx0XHRcdFx0XHR0b3A6IHRhcmdldE9mZnNldC50b3AsXG5cdFx0XHRcdFx0XHRcdHdpZHRoOiB0YXJnZXRXaWR0aCxcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiB0YXJnZXRIZWlnaHRcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRlbGVtZW50OiB7XG5cdFx0XHRcdFx0XHRcdGVsZW1lbnQ6IGVsZW0sXG5cdFx0XHRcdFx0XHRcdGxlZnQ6IHBvc2l0aW9uLmxlZnQsXG5cdFx0XHRcdFx0XHRcdHRvcDogcG9zaXRpb24udG9wLFxuXHRcdFx0XHRcdFx0XHR3aWR0aDogZWxlbVdpZHRoLFxuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IGVsZW1IZWlnaHRcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRob3Jpem9udGFsOiByaWdodCA8IDAgPyBcImxlZnRcIiA6IGxlZnQgPiAwID8gXCJyaWdodFwiIDogXCJjZW50ZXJcIixcblx0XHRcdFx0XHRcdHZlcnRpY2FsOiBib3R0b20gPCAwID8gXCJ0b3BcIiA6IHRvcCA+IDAgPyBcImJvdHRvbVwiIDogXCJtaWRkbGVcIlxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdGlmICggdGFyZ2V0V2lkdGggPCBlbGVtV2lkdGggJiYgYWJzKCBsZWZ0ICsgcmlnaHQgKSA8IHRhcmdldFdpZHRoICkge1xuXHRcdFx0XHRcdGZlZWRiYWNrLmhvcml6b250YWwgPSBcImNlbnRlclwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggdGFyZ2V0SGVpZ2h0IDwgZWxlbUhlaWdodCAmJiBhYnMoIHRvcCArIGJvdHRvbSApIDwgdGFyZ2V0SGVpZ2h0ICkge1xuXHRcdFx0XHRcdGZlZWRiYWNrLnZlcnRpY2FsID0gXCJtaWRkbGVcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIG1heCggYWJzKCBsZWZ0ICksIGFicyggcmlnaHQgKSApID4gbWF4KCBhYnMoIHRvcCApLCBhYnMoIGJvdHRvbSApICkgKSB7XG5cdFx0XHRcdFx0ZmVlZGJhY2suaW1wb3J0YW50ID0gXCJob3Jpem9udGFsXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZmVlZGJhY2suaW1wb3J0YW50ID0gXCJ2ZXJ0aWNhbFwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG9wdGlvbnMudXNpbmcuY2FsbCggdGhpcywgcHJvcHMsIGZlZWRiYWNrICk7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGVsZW0ub2Zmc2V0KCAkLmV4dGVuZCggcG9zaXRpb24sIHsgdXNpbmc6IHVzaW5nIH0gKSApO1xuXHR9KTtcbn07XG5cbiQudWkucG9zaXRpb24gPSB7XG5cdGZpdDoge1xuXHRcdGxlZnQ6IGZ1bmN0aW9uKCBwb3NpdGlvbiwgZGF0YSApIHtcblx0XHRcdHZhciB3aXRoaW4gPSBkYXRhLndpdGhpbixcblx0XHRcdFx0d2l0aGluT2Zmc2V0ID0gd2l0aGluLmlzV2luZG93ID8gd2l0aGluLnNjcm9sbExlZnQgOiB3aXRoaW4ub2Zmc2V0LmxlZnQsXG5cdFx0XHRcdG91dGVyV2lkdGggPSB3aXRoaW4ud2lkdGgsXG5cdFx0XHRcdGNvbGxpc2lvblBvc0xlZnQgPSBwb3NpdGlvbi5sZWZ0IC0gZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LFxuXHRcdFx0XHRvdmVyTGVmdCA9IHdpdGhpbk9mZnNldCAtIGNvbGxpc2lvblBvc0xlZnQsXG5cdFx0XHRcdG92ZXJSaWdodCA9IGNvbGxpc2lvblBvc0xlZnQgKyBkYXRhLmNvbGxpc2lvbldpZHRoIC0gb3V0ZXJXaWR0aCAtIHdpdGhpbk9mZnNldCxcblx0XHRcdFx0bmV3T3ZlclJpZ2h0O1xuXG5cdFx0XHQvLyBlbGVtZW50IGlzIHdpZGVyIHRoYW4gd2l0aGluXG5cdFx0XHRpZiAoIGRhdGEuY29sbGlzaW9uV2lkdGggPiBvdXRlcldpZHRoICkge1xuXHRcdFx0XHQvLyBlbGVtZW50IGlzIGluaXRpYWxseSBvdmVyIHRoZSBsZWZ0IHNpZGUgb2Ygd2l0aGluXG5cdFx0XHRcdGlmICggb3ZlckxlZnQgPiAwICYmIG92ZXJSaWdodCA8PSAwICkge1xuXHRcdFx0XHRcdG5ld092ZXJSaWdodCA9IHBvc2l0aW9uLmxlZnQgKyBvdmVyTGVmdCArIGRhdGEuY29sbGlzaW9uV2lkdGggLSBvdXRlcldpZHRoIC0gd2l0aGluT2Zmc2V0O1xuXHRcdFx0XHRcdHBvc2l0aW9uLmxlZnQgKz0gb3ZlckxlZnQgLSBuZXdPdmVyUmlnaHQ7XG5cdFx0XHRcdC8vIGVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgcmlnaHQgc2lkZSBvZiB3aXRoaW5cblx0XHRcdFx0fSBlbHNlIGlmICggb3ZlclJpZ2h0ID4gMCAmJiBvdmVyTGVmdCA8PSAwICkge1xuXHRcdFx0XHRcdHBvc2l0aW9uLmxlZnQgPSB3aXRoaW5PZmZzZXQ7XG5cdFx0XHRcdC8vIGVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgYm90aCBsZWZ0IGFuZCByaWdodCBzaWRlcyBvZiB3aXRoaW5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIG92ZXJMZWZ0ID4gb3ZlclJpZ2h0ICkge1xuXHRcdFx0XHRcdFx0cG9zaXRpb24ubGVmdCA9IHdpdGhpbk9mZnNldCArIG91dGVyV2lkdGggLSBkYXRhLmNvbGxpc2lvbldpZHRoO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRwb3NpdGlvbi5sZWZ0ID0gd2l0aGluT2Zmc2V0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0Ly8gdG9vIGZhciBsZWZ0IC0+IGFsaWduIHdpdGggbGVmdCBlZGdlXG5cdFx0XHR9IGVsc2UgaWYgKCBvdmVyTGVmdCA+IDAgKSB7XG5cdFx0XHRcdHBvc2l0aW9uLmxlZnQgKz0gb3ZlckxlZnQ7XG5cdFx0XHQvLyB0b28gZmFyIHJpZ2h0IC0+IGFsaWduIHdpdGggcmlnaHQgZWRnZVxuXHRcdFx0fSBlbHNlIGlmICggb3ZlclJpZ2h0ID4gMCApIHtcblx0XHRcdFx0cG9zaXRpb24ubGVmdCAtPSBvdmVyUmlnaHQ7XG5cdFx0XHQvLyBhZGp1c3QgYmFzZWQgb24gcG9zaXRpb24gYW5kIG1hcmdpblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cG9zaXRpb24ubGVmdCA9IG1heCggcG9zaXRpb24ubGVmdCAtIGNvbGxpc2lvblBvc0xlZnQsIHBvc2l0aW9uLmxlZnQgKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHRvcDogZnVuY3Rpb24oIHBvc2l0aW9uLCBkYXRhICkge1xuXHRcdFx0dmFyIHdpdGhpbiA9IGRhdGEud2l0aGluLFxuXHRcdFx0XHR3aXRoaW5PZmZzZXQgPSB3aXRoaW4uaXNXaW5kb3cgPyB3aXRoaW4uc2Nyb2xsVG9wIDogd2l0aGluLm9mZnNldC50b3AsXG5cdFx0XHRcdG91dGVySGVpZ2h0ID0gZGF0YS53aXRoaW4uaGVpZ2h0LFxuXHRcdFx0XHRjb2xsaXNpb25Qb3NUb3AgPSBwb3NpdGlvbi50b3AgLSBkYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCxcblx0XHRcdFx0b3ZlclRvcCA9IHdpdGhpbk9mZnNldCAtIGNvbGxpc2lvblBvc1RvcCxcblx0XHRcdFx0b3ZlckJvdHRvbSA9IGNvbGxpc2lvblBvc1RvcCArIGRhdGEuY29sbGlzaW9uSGVpZ2h0IC0gb3V0ZXJIZWlnaHQgLSB3aXRoaW5PZmZzZXQsXG5cdFx0XHRcdG5ld092ZXJCb3R0b207XG5cblx0XHRcdC8vIGVsZW1lbnQgaXMgdGFsbGVyIHRoYW4gd2l0aGluXG5cdFx0XHRpZiAoIGRhdGEuY29sbGlzaW9uSGVpZ2h0ID4gb3V0ZXJIZWlnaHQgKSB7XG5cdFx0XHRcdC8vIGVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgdGhlIHRvcCBvZiB3aXRoaW5cblx0XHRcdFx0aWYgKCBvdmVyVG9wID4gMCAmJiBvdmVyQm90dG9tIDw9IDAgKSB7XG5cdFx0XHRcdFx0bmV3T3ZlckJvdHRvbSA9IHBvc2l0aW9uLnRvcCArIG92ZXJUb3AgKyBkYXRhLmNvbGxpc2lvbkhlaWdodCAtIG91dGVySGVpZ2h0IC0gd2l0aGluT2Zmc2V0O1xuXHRcdFx0XHRcdHBvc2l0aW9uLnRvcCArPSBvdmVyVG9wIC0gbmV3T3ZlckJvdHRvbTtcblx0XHRcdFx0Ly8gZWxlbWVudCBpcyBpbml0aWFsbHkgb3ZlciBib3R0b20gb2Ygd2l0aGluXG5cdFx0XHRcdH0gZWxzZSBpZiAoIG92ZXJCb3R0b20gPiAwICYmIG92ZXJUb3AgPD0gMCApIHtcblx0XHRcdFx0XHRwb3NpdGlvbi50b3AgPSB3aXRoaW5PZmZzZXQ7XG5cdFx0XHRcdC8vIGVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgYm90aCB0b3AgYW5kIGJvdHRvbSBvZiB3aXRoaW5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIG92ZXJUb3AgPiBvdmVyQm90dG9tICkge1xuXHRcdFx0XHRcdFx0cG9zaXRpb24udG9wID0gd2l0aGluT2Zmc2V0ICsgb3V0ZXJIZWlnaHQgLSBkYXRhLmNvbGxpc2lvbkhlaWdodDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cG9zaXRpb24udG9wID0gd2l0aGluT2Zmc2V0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0Ly8gdG9vIGZhciB1cCAtPiBhbGlnbiB3aXRoIHRvcFxuXHRcdFx0fSBlbHNlIGlmICggb3ZlclRvcCA+IDAgKSB7XG5cdFx0XHRcdHBvc2l0aW9uLnRvcCArPSBvdmVyVG9wO1xuXHRcdFx0Ly8gdG9vIGZhciBkb3duIC0+IGFsaWduIHdpdGggYm90dG9tIGVkZ2Vcblx0XHRcdH0gZWxzZSBpZiAoIG92ZXJCb3R0b20gPiAwICkge1xuXHRcdFx0XHRwb3NpdGlvbi50b3AgLT0gb3ZlckJvdHRvbTtcblx0XHRcdC8vIGFkanVzdCBiYXNlZCBvbiBwb3NpdGlvbiBhbmQgbWFyZ2luXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwb3NpdGlvbi50b3AgPSBtYXgoIHBvc2l0aW9uLnRvcCAtIGNvbGxpc2lvblBvc1RvcCwgcG9zaXRpb24udG9wICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRmbGlwOiB7XG5cdFx0bGVmdDogZnVuY3Rpb24oIHBvc2l0aW9uLCBkYXRhICkge1xuXHRcdFx0dmFyIHdpdGhpbiA9IGRhdGEud2l0aGluLFxuXHRcdFx0XHR3aXRoaW5PZmZzZXQgPSB3aXRoaW4ub2Zmc2V0LmxlZnQgKyB3aXRoaW4uc2Nyb2xsTGVmdCxcblx0XHRcdFx0b3V0ZXJXaWR0aCA9IHdpdGhpbi53aWR0aCxcblx0XHRcdFx0b2Zmc2V0TGVmdCA9IHdpdGhpbi5pc1dpbmRvdyA/IHdpdGhpbi5zY3JvbGxMZWZ0IDogd2l0aGluLm9mZnNldC5sZWZ0LFxuXHRcdFx0XHRjb2xsaXNpb25Qb3NMZWZ0ID0gcG9zaXRpb24ubGVmdCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCxcblx0XHRcdFx0b3ZlckxlZnQgPSBjb2xsaXNpb25Qb3NMZWZ0IC0gb2Zmc2V0TGVmdCxcblx0XHRcdFx0b3ZlclJpZ2h0ID0gY29sbGlzaW9uUG9zTGVmdCArIGRhdGEuY29sbGlzaW9uV2lkdGggLSBvdXRlcldpZHRoIC0gb2Zmc2V0TGVmdCxcblx0XHRcdFx0bXlPZmZzZXQgPSBkYXRhLm15WyAwIF0gPT09IFwibGVmdFwiID9cblx0XHRcdFx0XHQtZGF0YS5lbGVtV2lkdGggOlxuXHRcdFx0XHRcdGRhdGEubXlbIDAgXSA9PT0gXCJyaWdodFwiID9cblx0XHRcdFx0XHRcdGRhdGEuZWxlbVdpZHRoIDpcblx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdGF0T2Zmc2V0ID0gZGF0YS5hdFsgMCBdID09PSBcImxlZnRcIiA/XG5cdFx0XHRcdFx0ZGF0YS50YXJnZXRXaWR0aCA6XG5cdFx0XHRcdFx0ZGF0YS5hdFsgMCBdID09PSBcInJpZ2h0XCIgP1xuXHRcdFx0XHRcdFx0LWRhdGEudGFyZ2V0V2lkdGggOlxuXHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0b2Zmc2V0ID0gLTIgKiBkYXRhLm9mZnNldFsgMCBdLFxuXHRcdFx0XHRuZXdPdmVyUmlnaHQsXG5cdFx0XHRcdG5ld092ZXJMZWZ0O1xuXG5cdFx0XHRpZiAoIG92ZXJMZWZ0IDwgMCApIHtcblx0XHRcdFx0bmV3T3ZlclJpZ2h0ID0gcG9zaXRpb24ubGVmdCArIG15T2Zmc2V0ICsgYXRPZmZzZXQgKyBvZmZzZXQgKyBkYXRhLmNvbGxpc2lvbldpZHRoIC0gb3V0ZXJXaWR0aCAtIHdpdGhpbk9mZnNldDtcblx0XHRcdFx0aWYgKCBuZXdPdmVyUmlnaHQgPCAwIHx8IG5ld092ZXJSaWdodCA8IGFicyggb3ZlckxlZnQgKSApIHtcblx0XHRcdFx0XHRwb3NpdGlvbi5sZWZ0ICs9IG15T2Zmc2V0ICsgYXRPZmZzZXQgKyBvZmZzZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoIG92ZXJSaWdodCA+IDAgKSB7XG5cdFx0XHRcdG5ld092ZXJMZWZ0ID0gcG9zaXRpb24ubGVmdCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCArIG15T2Zmc2V0ICsgYXRPZmZzZXQgKyBvZmZzZXQgLSBvZmZzZXRMZWZ0O1xuXHRcdFx0XHRpZiAoIG5ld092ZXJMZWZ0ID4gMCB8fCBhYnMoIG5ld092ZXJMZWZ0ICkgPCBvdmVyUmlnaHQgKSB7XG5cdFx0XHRcdFx0cG9zaXRpb24ubGVmdCArPSBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHR0b3A6IGZ1bmN0aW9uKCBwb3NpdGlvbiwgZGF0YSApIHtcblx0XHRcdHZhciB3aXRoaW4gPSBkYXRhLndpdGhpbixcblx0XHRcdFx0d2l0aGluT2Zmc2V0ID0gd2l0aGluLm9mZnNldC50b3AgKyB3aXRoaW4uc2Nyb2xsVG9wLFxuXHRcdFx0XHRvdXRlckhlaWdodCA9IHdpdGhpbi5oZWlnaHQsXG5cdFx0XHRcdG9mZnNldFRvcCA9IHdpdGhpbi5pc1dpbmRvdyA/IHdpdGhpbi5zY3JvbGxUb3AgOiB3aXRoaW4ub2Zmc2V0LnRvcCxcblx0XHRcdFx0Y29sbGlzaW9uUG9zVG9wID0gcG9zaXRpb24udG9wIC0gZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AsXG5cdFx0XHRcdG92ZXJUb3AgPSBjb2xsaXNpb25Qb3NUb3AgLSBvZmZzZXRUb3AsXG5cdFx0XHRcdG92ZXJCb3R0b20gPSBjb2xsaXNpb25Qb3NUb3AgKyBkYXRhLmNvbGxpc2lvbkhlaWdodCAtIG91dGVySGVpZ2h0IC0gb2Zmc2V0VG9wLFxuXHRcdFx0XHR0b3AgPSBkYXRhLm15WyAxIF0gPT09IFwidG9wXCIsXG5cdFx0XHRcdG15T2Zmc2V0ID0gdG9wID9cblx0XHRcdFx0XHQtZGF0YS5lbGVtSGVpZ2h0IDpcblx0XHRcdFx0XHRkYXRhLm15WyAxIF0gPT09IFwiYm90dG9tXCIgP1xuXHRcdFx0XHRcdFx0ZGF0YS5lbGVtSGVpZ2h0IDpcblx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdGF0T2Zmc2V0ID0gZGF0YS5hdFsgMSBdID09PSBcInRvcFwiID9cblx0XHRcdFx0XHRkYXRhLnRhcmdldEhlaWdodCA6XG5cdFx0XHRcdFx0ZGF0YS5hdFsgMSBdID09PSBcImJvdHRvbVwiID9cblx0XHRcdFx0XHRcdC1kYXRhLnRhcmdldEhlaWdodCA6XG5cdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRvZmZzZXQgPSAtMiAqIGRhdGEub2Zmc2V0WyAxIF0sXG5cdFx0XHRcdG5ld092ZXJUb3AsXG5cdFx0XHRcdG5ld092ZXJCb3R0b207XG5cdFx0XHRpZiAoIG92ZXJUb3AgPCAwICkge1xuXHRcdFx0XHRuZXdPdmVyQm90dG9tID0gcG9zaXRpb24udG9wICsgbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldCArIGRhdGEuY29sbGlzaW9uSGVpZ2h0IC0gb3V0ZXJIZWlnaHQgLSB3aXRoaW5PZmZzZXQ7XG5cdFx0XHRcdGlmICggbmV3T3ZlckJvdHRvbSA8IDAgfHwgbmV3T3ZlckJvdHRvbSA8IGFicyggb3ZlclRvcCApICkge1xuXHRcdFx0XHRcdHBvc2l0aW9uLnRvcCArPSBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0O1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKCBvdmVyQm90dG9tID4gMCApIHtcblx0XHRcdFx0bmV3T3ZlclRvcCA9IHBvc2l0aW9uLnRvcCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wICsgbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldCAtIG9mZnNldFRvcDtcblx0XHRcdFx0aWYgKCBuZXdPdmVyVG9wID4gMCB8fCBhYnMoIG5ld092ZXJUb3AgKSA8IG92ZXJCb3R0b20gKSB7XG5cdFx0XHRcdFx0cG9zaXRpb24udG9wICs9IG15T2Zmc2V0ICsgYXRPZmZzZXQgKyBvZmZzZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGZsaXBmaXQ6IHtcblx0XHRsZWZ0OiBmdW5jdGlvbigpIHtcblx0XHRcdCQudWkucG9zaXRpb24uZmxpcC5sZWZ0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdCQudWkucG9zaXRpb24uZml0LmxlZnQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH0sXG5cdFx0dG9wOiBmdW5jdGlvbigpIHtcblx0XHRcdCQudWkucG9zaXRpb24uZmxpcC50b3AuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0JC51aS5wb3NpdGlvbi5maXQudG9wLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9XG5cdH1cbn07XG5cbi8vIGZyYWN0aW9uIHN1cHBvcnQgdGVzdFxuKGZ1bmN0aW9uKCkge1xuXHR2YXIgdGVzdEVsZW1lbnQsIHRlc3RFbGVtZW50UGFyZW50LCB0ZXN0RWxlbWVudFN0eWxlLCBvZmZzZXRMZWZ0LCBpLFxuXHRcdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJib2R5XCIgKVsgMCBdLFxuXHRcdGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcblxuXHQvL0NyZWF0ZSBhIFwiZmFrZSBib2R5XCIgZm9yIHRlc3RpbmcgYmFzZWQgb24gbWV0aG9kIHVzZWQgaW4galF1ZXJ5LnN1cHBvcnRcblx0dGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBib2R5ID8gXCJkaXZcIiA6IFwiYm9keVwiICk7XG5cdHRlc3RFbGVtZW50U3R5bGUgPSB7XG5cdFx0dmlzaWJpbGl0eTogXCJoaWRkZW5cIixcblx0XHR3aWR0aDogMCxcblx0XHRoZWlnaHQ6IDAsXG5cdFx0Ym9yZGVyOiAwLFxuXHRcdG1hcmdpbjogMCxcblx0XHRiYWNrZ3JvdW5kOiBcIm5vbmVcIlxuXHR9O1xuXHRpZiAoIGJvZHkgKSB7XG5cdFx0JC5leHRlbmQoIHRlc3RFbGVtZW50U3R5bGUsIHtcblx0XHRcdHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG5cdFx0XHRsZWZ0OiBcIi0xMDAwcHhcIixcblx0XHRcdHRvcDogXCItMTAwMHB4XCJcblx0XHR9KTtcblx0fVxuXHRmb3IgKCBpIGluIHRlc3RFbGVtZW50U3R5bGUgKSB7XG5cdFx0dGVzdEVsZW1lbnQuc3R5bGVbIGkgXSA9IHRlc3RFbGVtZW50U3R5bGVbIGkgXTtcblx0fVxuXHR0ZXN0RWxlbWVudC5hcHBlbmRDaGlsZCggZGl2ICk7XG5cdHRlc3RFbGVtZW50UGFyZW50ID0gYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdHRlc3RFbGVtZW50UGFyZW50Lmluc2VydEJlZm9yZSggdGVzdEVsZW1lbnQsIHRlc3RFbGVtZW50UGFyZW50LmZpcnN0Q2hpbGQgKTtcblxuXHRkaXYuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMC43NDMyMjIycHg7XCI7XG5cblx0b2Zmc2V0TGVmdCA9ICQoIGRpdiApLm9mZnNldCgpLmxlZnQ7XG5cdHN1cHBvcnRzT2Zmc2V0RnJhY3Rpb25zID0gb2Zmc2V0TGVmdCA+IDEwICYmIG9mZnNldExlZnQgPCAxMTtcblxuXHR0ZXN0RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuXHR0ZXN0RWxlbWVudFBhcmVudC5yZW1vdmVDaGlsZCggdGVzdEVsZW1lbnQgKTtcbn0pKCk7XG5cbn0pKCk7XG5cbnZhciBwb3NpdGlvbiA9ICQudWkucG9zaXRpb247XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgQWNjb3JkaW9uIDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vYWNjb3JkaW9uL1xuICovXG5cblxudmFyIGFjY29yZGlvbiA9ICQud2lkZ2V0KCBcInVpLmFjY29yZGlvblwiLCB7XG5cdHZlcnNpb246IFwiMS4xMS4zXCIsXG5cdG9wdGlvbnM6IHtcblx0XHRhY3RpdmU6IDAsXG5cdFx0YW5pbWF0ZToge30sXG5cdFx0Y29sbGFwc2libGU6IGZhbHNlLFxuXHRcdGV2ZW50OiBcImNsaWNrXCIsXG5cdFx0aGVhZGVyOiBcIj4gbGkgPiA6Zmlyc3QtY2hpbGQsPiA6bm90KGxpKTpldmVuXCIsXG5cdFx0aGVpZ2h0U3R5bGU6IFwiYXV0b1wiLFxuXHRcdGljb25zOiB7XG5cdFx0XHRhY3RpdmVIZWFkZXI6IFwidWktaWNvbi10cmlhbmdsZS0xLXNcIixcblx0XHRcdGhlYWRlcjogXCJ1aS1pY29uLXRyaWFuZ2xlLTEtZVwiXG5cdFx0fSxcblxuXHRcdC8vIGNhbGxiYWNrc1xuXHRcdGFjdGl2YXRlOiBudWxsLFxuXHRcdGJlZm9yZUFjdGl2YXRlOiBudWxsXG5cdH0sXG5cblx0aGlkZVByb3BzOiB7XG5cdFx0Ym9yZGVyVG9wV2lkdGg6IFwiaGlkZVwiLFxuXHRcdGJvcmRlckJvdHRvbVdpZHRoOiBcImhpZGVcIixcblx0XHRwYWRkaW5nVG9wOiBcImhpZGVcIixcblx0XHRwYWRkaW5nQm90dG9tOiBcImhpZGVcIixcblx0XHRoZWlnaHQ6IFwiaGlkZVwiXG5cdH0sXG5cblx0c2hvd1Byb3BzOiB7XG5cdFx0Ym9yZGVyVG9wV2lkdGg6IFwic2hvd1wiLFxuXHRcdGJvcmRlckJvdHRvbVdpZHRoOiBcInNob3dcIixcblx0XHRwYWRkaW5nVG9wOiBcInNob3dcIixcblx0XHRwYWRkaW5nQm90dG9tOiBcInNob3dcIixcblx0XHRoZWlnaHQ6IFwic2hvd1wiXG5cdH0sXG5cblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cdFx0dGhpcy5wcmV2U2hvdyA9IHRoaXMucHJldkhpZGUgPSAkKCk7XG5cdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLWFjY29yZGlvbiB1aS13aWRnZXQgdWktaGVscGVyLXJlc2V0XCIgKVxuXHRcdFx0Ly8gQVJJQVxuXHRcdFx0LmF0dHIoIFwicm9sZVwiLCBcInRhYmxpc3RcIiApO1xuXG5cdFx0Ly8gZG9uJ3QgYWxsb3cgY29sbGFwc2libGU6IGZhbHNlIGFuZCBhY3RpdmU6IGZhbHNlIC8gbnVsbFxuXHRcdGlmICggIW9wdGlvbnMuY29sbGFwc2libGUgJiYgKG9wdGlvbnMuYWN0aXZlID09PSBmYWxzZSB8fCBvcHRpb25zLmFjdGl2ZSA9PSBudWxsKSApIHtcblx0XHRcdG9wdGlvbnMuYWN0aXZlID0gMDtcblx0XHR9XG5cblx0XHR0aGlzLl9wcm9jZXNzUGFuZWxzKCk7XG5cdFx0Ly8gaGFuZGxlIG5lZ2F0aXZlIHZhbHVlc1xuXHRcdGlmICggb3B0aW9ucy5hY3RpdmUgPCAwICkge1xuXHRcdFx0b3B0aW9ucy5hY3RpdmUgKz0gdGhpcy5oZWFkZXJzLmxlbmd0aDtcblx0XHR9XG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xuXHR9LFxuXG5cdF9nZXRDcmVhdGVFdmVudERhdGE6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRoZWFkZXI6IHRoaXMuYWN0aXZlLFxuXHRcdFx0cGFuZWw6ICF0aGlzLmFjdGl2ZS5sZW5ndGggPyAkKCkgOiB0aGlzLmFjdGl2ZS5uZXh0KClcblx0XHR9O1xuXHR9LFxuXG5cdF9jcmVhdGVJY29uczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGljb25zID0gdGhpcy5vcHRpb25zLmljb25zO1xuXHRcdGlmICggaWNvbnMgKSB7XG5cdFx0XHQkKCBcIjxzcGFuPlwiIClcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWFjY29yZGlvbi1oZWFkZXItaWNvbiB1aS1pY29uIFwiICsgaWNvbnMuaGVhZGVyIClcblx0XHRcdFx0LnByZXBlbmRUbyggdGhpcy5oZWFkZXJzICk7XG5cdFx0XHR0aGlzLmFjdGl2ZS5jaGlsZHJlbiggXCIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uXCIgKVxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIGljb25zLmhlYWRlciApXG5cdFx0XHRcdC5hZGRDbGFzcyggaWNvbnMuYWN0aXZlSGVhZGVyICk7XG5cdFx0XHR0aGlzLmhlYWRlcnMuYWRkQ2xhc3MoIFwidWktYWNjb3JkaW9uLWljb25zXCIgKTtcblx0XHR9XG5cdH0sXG5cblx0X2Rlc3Ryb3lJY29uczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5oZWFkZXJzXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYWNjb3JkaW9uLWljb25zXCIgKVxuXHRcdFx0LmNoaWxkcmVuKCBcIi51aS1hY2NvcmRpb24taGVhZGVyLWljb25cIiApXG5cdFx0XHRcdC5yZW1vdmUoKTtcblx0fSxcblxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNvbnRlbnRzO1xuXG5cdFx0Ly8gY2xlYW4gdXAgbWFpbiBlbGVtZW50XG5cdFx0dGhpcy5lbGVtZW50XG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYWNjb3JkaW9uIHVpLXdpZGdldCB1aS1oZWxwZXItcmVzZXRcIiApXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKTtcblxuXHRcdC8vIGNsZWFuIHVwIGhlYWRlcnNcblx0XHR0aGlzLmhlYWRlcnNcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1hY2NvcmRpb24taGVhZGVyIHVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWRlZmF1bHQgXCIgK1xuXHRcdFx0XHRcInVpLWNvcm5lci1hbGwgdWktc3RhdGUtYWN0aXZlIHVpLXN0YXRlLWRpc2FibGVkIHVpLWNvcm5lci10b3BcIiApXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1leHBhbmRlZFwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiApXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwidGFiSW5kZXhcIiApXG5cdFx0XHQucmVtb3ZlVW5pcXVlSWQoKTtcblxuXHRcdHRoaXMuX2Rlc3Ryb3lJY29ucygpO1xuXG5cdFx0Ly8gY2xlYW4gdXAgY29udGVudCBwYW5lbHNcblx0XHRjb250ZW50cyA9IHRoaXMuaGVhZGVycy5uZXh0KClcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1oZWxwZXItcmVzZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSBcIiArXG5cdFx0XHRcdFwidWktYWNjb3JkaW9uLWNvbnRlbnQgdWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIHVpLXN0YXRlLWRpc2FibGVkXCIgKVxuXHRcdFx0LmNzcyggXCJkaXNwbGF5XCIsIFwiXCIgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtaGlkZGVuXCIgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1sYWJlbGxlZGJ5XCIgKVxuXHRcdFx0LnJlbW92ZVVuaXF1ZUlkKCk7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSAhPT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRjb250ZW50cy5jc3MoIFwiaGVpZ2h0XCIsIFwiXCIgKTtcblx0XHR9XG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0aWYgKCBrZXkgPT09IFwiYWN0aXZlXCIgKSB7XG5cdFx0XHQvLyBfYWN0aXZhdGUoKSB3aWxsIGhhbmRsZSBpbnZhbGlkIHZhbHVlcyBhbmQgdXBkYXRlIHRoaXMub3B0aW9uc1xuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHZhbHVlICk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgPT09IFwiZXZlbnRcIiApIHtcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmV2ZW50ICkge1xuXHRcdFx0XHR0aGlzLl9vZmYoIHRoaXMuaGVhZGVycywgdGhpcy5vcHRpb25zLmV2ZW50ICk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9zZXR1cEV2ZW50cyggdmFsdWUgKTtcblx0XHR9XG5cblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApO1xuXG5cdFx0Ly8gc2V0dGluZyBjb2xsYXBzaWJsZTogZmFsc2Ugd2hpbGUgY29sbGFwc2VkOyBvcGVuIGZpcnN0IHBhbmVsXG5cdFx0aWYgKCBrZXkgPT09IFwiY29sbGFwc2libGVcIiAmJiAhdmFsdWUgJiYgdGhpcy5vcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggMCApO1xuXHRcdH1cblxuXHRcdGlmICgga2V5ID09PSBcImljb25zXCIgKSB7XG5cdFx0XHR0aGlzLl9kZXN0cm95SWNvbnMoKTtcblx0XHRcdGlmICggdmFsdWUgKSB7XG5cdFx0XHRcdHRoaXMuX2NyZWF0ZUljb25zKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gIzUzMzIgLSBvcGFjaXR5IGRvZXNuJ3QgY2FzY2FkZSB0byBwb3NpdGlvbmVkIGVsZW1lbnRzIGluIElFXG5cdFx0Ly8gc28gd2UgbmVlZCB0byBhZGQgdGhlIGRpc2FibGVkIGNsYXNzIHRvIHRoZSBoZWFkZXJzIGFuZCBwYW5lbHNcblx0XHRpZiAoIGtleSA9PT0gXCJkaXNhYmxlZFwiICkge1xuXHRcdFx0dGhpcy5lbGVtZW50XG5cdFx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCAhIXZhbHVlIClcblx0XHRcdFx0LmF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiLCB2YWx1ZSApO1xuXHRcdFx0dGhpcy5oZWFkZXJzLmFkZCggdGhpcy5oZWFkZXJzLm5leHQoKSApXG5cdFx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCAhIXZhbHVlICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9rZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCBldmVudC5hbHRLZXkgfHwgZXZlbnQuY3RybEtleSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIga2V5Q29kZSA9ICQudWkua2V5Q29kZSxcblx0XHRcdGxlbmd0aCA9IHRoaXMuaGVhZGVycy5sZW5ndGgsXG5cdFx0XHRjdXJyZW50SW5kZXggPSB0aGlzLmhlYWRlcnMuaW5kZXgoIGV2ZW50LnRhcmdldCApLFxuXHRcdFx0dG9Gb2N1cyA9IGZhbHNlO1xuXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcblx0XHRcdGNhc2Uga2V5Q29kZS5SSUdIVDpcblx0XHRcdGNhc2Uga2V5Q29kZS5ET1dOOlxuXHRcdFx0XHR0b0ZvY3VzID0gdGhpcy5oZWFkZXJzWyAoIGN1cnJlbnRJbmRleCArIDEgKSAlIGxlbmd0aCBdO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2Uga2V5Q29kZS5MRUZUOlxuXHRcdFx0Y2FzZSBrZXlDb2RlLlVQOlxuXHRcdFx0XHR0b0ZvY3VzID0gdGhpcy5oZWFkZXJzWyAoIGN1cnJlbnRJbmRleCAtIDEgKyBsZW5ndGggKSAlIGxlbmd0aCBdO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2Uga2V5Q29kZS5TUEFDRTpcblx0XHRcdGNhc2Uga2V5Q29kZS5FTlRFUjpcblx0XHRcdFx0dGhpcy5fZXZlbnRIYW5kbGVyKCBldmVudCApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2Uga2V5Q29kZS5IT01FOlxuXHRcdFx0XHR0b0ZvY3VzID0gdGhpcy5oZWFkZXJzWyAwIF07XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBrZXlDb2RlLkVORDpcblx0XHRcdFx0dG9Gb2N1cyA9IHRoaXMuaGVhZGVyc1sgbGVuZ3RoIC0gMSBdO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRpZiAoIHRvRm9jdXMgKSB7XG5cdFx0XHQkKCBldmVudC50YXJnZXQgKS5hdHRyKCBcInRhYkluZGV4XCIsIC0xICk7XG5cdFx0XHQkKCB0b0ZvY3VzICkuYXR0ciggXCJ0YWJJbmRleFwiLCAwICk7XG5cdFx0XHR0b0ZvY3VzLmZvY3VzKCk7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblxuXHRfcGFuZWxLZXlEb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuVVAgJiYgZXZlbnQuY3RybEtleSApIHtcblx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5wcmV2KCkuZm9jdXMoKTtcblx0XHR9XG5cdH0sXG5cblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cdFx0dGhpcy5fcHJvY2Vzc1BhbmVscygpO1xuXG5cdFx0Ly8gd2FzIGNvbGxhcHNlZCBvciBubyBwYW5lbFxuXHRcdGlmICggKCBvcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgJiYgb3B0aW9ucy5jb2xsYXBzaWJsZSA9PT0gdHJ1ZSApIHx8ICF0aGlzLmhlYWRlcnMubGVuZ3RoICkge1xuXHRcdFx0b3B0aW9ucy5hY3RpdmUgPSBmYWxzZTtcblx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xuXHRcdC8vIGFjdGl2ZSBmYWxzZSBvbmx5IHdoZW4gY29sbGFwc2libGUgaXMgdHJ1ZVxuXHRcdH0gZWxzZSBpZiAoIG9wdGlvbnMuYWN0aXZlID09PSBmYWxzZSApIHtcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCAwICk7XG5cdFx0Ly8gd2FzIGFjdGl2ZSwgYnV0IGFjdGl2ZSBwYW5lbCBpcyBnb25lXG5cdFx0fSBlbHNlIGlmICggdGhpcy5hY3RpdmUubGVuZ3RoICYmICEkLmNvbnRhaW5zKCB0aGlzLmVsZW1lbnRbIDAgXSwgdGhpcy5hY3RpdmVbIDAgXSApICkge1xuXHRcdFx0Ly8gYWxsIHJlbWFpbmluZyBwYW5lbCBhcmUgZGlzYWJsZWRcblx0XHRcdGlmICggdGhpcy5oZWFkZXJzLmxlbmd0aCA9PT0gdGhpcy5oZWFkZXJzLmZpbmQoXCIudWktc3RhdGUtZGlzYWJsZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRvcHRpb25zLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR0aGlzLmFjdGl2ZSA9ICQoKTtcblx0XHRcdC8vIGFjdGl2YXRlIHByZXZpb3VzIHBhbmVsXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggTWF0aC5tYXgoIDAsIG9wdGlvbnMuYWN0aXZlIC0gMSApICk7XG5cdFx0XHR9XG5cdFx0Ly8gd2FzIGFjdGl2ZSwgYWN0aXZlIHBhbmVsIHN0aWxsIGV4aXN0c1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBtYWtlIHN1cmUgYWN0aXZlIGluZGV4IGlzIGNvcnJlY3Rcblx0XHRcdG9wdGlvbnMuYWN0aXZlID0gdGhpcy5oZWFkZXJzLmluZGV4KCB0aGlzLmFjdGl2ZSApO1xuXHRcdH1cblxuXHRcdHRoaXMuX2Rlc3Ryb3lJY29ucygpO1xuXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xuXHR9LFxuXG5cdF9wcm9jZXNzUGFuZWxzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJldkhlYWRlcnMgPSB0aGlzLmhlYWRlcnMsXG5cdFx0XHRwcmV2UGFuZWxzID0gdGhpcy5wYW5lbHM7XG5cblx0XHR0aGlzLmhlYWRlcnMgPSB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLmhlYWRlciApXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktYWNjb3JkaW9uLWhlYWRlciB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGxcIiApO1xuXG5cdFx0dGhpcy5wYW5lbHMgPSB0aGlzLmhlYWRlcnMubmV4dCgpXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktYWNjb3JkaW9uLWNvbnRlbnQgdWktaGVscGVyLXJlc2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIiApXG5cdFx0XHQuZmlsdGVyKCBcIjpub3QoLnVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSlcIiApXG5cdFx0XHQuaGlkZSgpO1xuXG5cdFx0Ly8gQXZvaWQgbWVtb3J5IGxlYWtzICgjMTAwNTYpXG5cdFx0aWYgKCBwcmV2UGFuZWxzICkge1xuXHRcdFx0dGhpcy5fb2ZmKCBwcmV2SGVhZGVycy5ub3QoIHRoaXMuaGVhZGVycyApICk7XG5cdFx0XHR0aGlzLl9vZmYoIHByZXZQYW5lbHMubm90KCB0aGlzLnBhbmVscyApICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9yZWZyZXNoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgbWF4SGVpZ2h0LFxuXHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0XHRcdGhlaWdodFN0eWxlID0gb3B0aW9ucy5oZWlnaHRTdHlsZSxcblx0XHRcdHBhcmVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnQoKTtcblxuXHRcdHRoaXMuYWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggb3B0aW9ucy5hY3RpdmUgKVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSB1aS1jb3JuZXItdG9wXCIgKVxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiApO1xuXHRcdHRoaXMuYWN0aXZlLm5leHQoKVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZVwiIClcblx0XHRcdC5zaG93KCk7XG5cblx0XHR0aGlzLmhlYWRlcnNcblx0XHRcdC5hdHRyKCBcInJvbGVcIiwgXCJ0YWJcIiApXG5cdFx0XHQuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGhlYWRlciA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHRoZWFkZXJJZCA9IGhlYWRlci51bmlxdWVJZCgpLmF0dHIoIFwiaWRcIiApLFxuXHRcdFx0XHRcdHBhbmVsID0gaGVhZGVyLm5leHQoKSxcblx0XHRcdFx0XHRwYW5lbElkID0gcGFuZWwudW5pcXVlSWQoKS5hdHRyKCBcImlkXCIgKTtcblx0XHRcdFx0aGVhZGVyLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiLCBwYW5lbElkICk7XG5cdFx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGhlYWRlcklkICk7XG5cdFx0XHR9KVxuXHRcdFx0Lm5leHQoKVxuXHRcdFx0XHQuYXR0ciggXCJyb2xlXCIsIFwidGFicGFuZWxcIiApO1xuXG5cdFx0dGhpcy5oZWFkZXJzXG5cdFx0XHQubm90KCB0aGlzLmFjdGl2ZSApXG5cdFx0XHQuYXR0cih7XG5cdFx0XHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcImZhbHNlXCIsXG5cdFx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXG5cdFx0XHRcdHRhYkluZGV4OiAtMVxuXHRcdFx0fSlcblx0XHRcdC5uZXh0KClcblx0XHRcdFx0LmF0dHIoe1xuXHRcdFx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcblx0XHRcdFx0fSlcblx0XHRcdFx0LmhpZGUoKTtcblxuXHRcdC8vIG1ha2Ugc3VyZSBhdCBsZWFzdCBvbmUgaGVhZGVyIGlzIGluIHRoZSB0YWIgb3JkZXJcblx0XHRpZiAoICF0aGlzLmFjdGl2ZS5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLmhlYWRlcnMuZXEoIDAgKS5hdHRyKCBcInRhYkluZGV4XCIsIDAgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5hY3RpdmUuYXR0cih7XG5cdFx0XHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcInRydWVcIixcblx0XHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxuXHRcdFx0XHR0YWJJbmRleDogMFxuXHRcdFx0fSlcblx0XHRcdC5uZXh0KClcblx0XHRcdFx0LmF0dHIoe1xuXHRcdFx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJmYWxzZVwiXG5cdFx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuX2NyZWF0ZUljb25zKCk7XG5cblx0XHR0aGlzLl9zZXR1cEV2ZW50cyggb3B0aW9ucy5ldmVudCApO1xuXG5cdFx0aWYgKCBoZWlnaHRTdHlsZSA9PT0gXCJmaWxsXCIgKSB7XG5cdFx0XHRtYXhIZWlnaHQgPSBwYXJlbnQuaGVpZ2h0KCk7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc2libGluZ3MoIFwiOnZpc2libGVcIiApLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdHBvc2l0aW9uID0gZWxlbS5jc3MoIFwicG9zaXRpb25cIiApO1xuXG5cdFx0XHRcdGlmICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRtYXhIZWlnaHQgLT0gZWxlbS5vdXRlckhlaWdodCggdHJ1ZSApO1xuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMuaGVhZGVycy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRtYXhIZWlnaHQgLT0gJCggdGhpcyApLm91dGVySGVpZ2h0KCB0cnVlICk7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5oZWFkZXJzLm5leHQoKVxuXHRcdFx0XHQuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKCB0aGlzICkuaGVpZ2h0KCBNYXRoLm1heCggMCwgbWF4SGVpZ2h0IC1cblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5pbm5lckhlaWdodCgpICsgJCggdGhpcyApLmhlaWdodCgpICkgKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNzcyggXCJvdmVyZmxvd1wiLCBcImF1dG9cIiApO1xuXHRcdH0gZWxzZSBpZiAoIGhlaWdodFN0eWxlID09PSBcImF1dG9cIiApIHtcblx0XHRcdG1heEhlaWdodCA9IDA7XG5cdFx0XHR0aGlzLmhlYWRlcnMubmV4dCgpXG5cdFx0XHRcdC5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdG1heEhlaWdodCA9IE1hdGgubWF4KCBtYXhIZWlnaHQsICQoIHRoaXMgKS5jc3MoIFwiaGVpZ2h0XCIsIFwiXCIgKS5oZWlnaHQoKSApO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuaGVpZ2h0KCBtYXhIZWlnaHQgKTtcblx0XHR9XG5cdH0sXG5cblx0X2FjdGl2YXRlOiBmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0dmFyIGFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoIGluZGV4IClbIDAgXTtcblxuXHRcdC8vIHRyeWluZyB0byBhY3RpdmF0ZSB0aGUgYWxyZWFkeSBhY3RpdmUgcGFuZWxcblx0XHRpZiAoIGFjdGl2ZSA9PT0gdGhpcy5hY3RpdmVbIDAgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyB0cnlpbmcgdG8gY29sbGFwc2UsIHNpbXVsYXRlIGEgY2xpY2sgb24gdGhlIGN1cnJlbnRseSBhY3RpdmUgaGVhZGVyXG5cdFx0YWN0aXZlID0gYWN0aXZlIHx8IHRoaXMuYWN0aXZlWyAwIF07XG5cblx0XHR0aGlzLl9ldmVudEhhbmRsZXIoe1xuXHRcdFx0dGFyZ2V0OiBhY3RpdmUsXG5cdFx0XHRjdXJyZW50VGFyZ2V0OiBhY3RpdmUsXG5cdFx0XHRwcmV2ZW50RGVmYXVsdDogJC5ub29wXG5cdFx0fSk7XG5cdH0sXG5cblx0X2ZpbmRBY3RpdmU6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSBcIm51bWJlclwiID8gdGhpcy5oZWFkZXJzLmVxKCBzZWxlY3RvciApIDogJCgpO1xuXHR9LFxuXG5cdF9zZXR1cEV2ZW50czogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBldmVudHMgPSB7XG5cdFx0XHRrZXlkb3duOiBcIl9rZXlkb3duXCJcblx0XHR9O1xuXHRcdGlmICggZXZlbnQgKSB7XG5cdFx0XHQkLmVhY2goIGV2ZW50LnNwbGl0KCBcIiBcIiApLCBmdW5jdGlvbiggaW5kZXgsIGV2ZW50TmFtZSApIHtcblx0XHRcdFx0ZXZlbnRzWyBldmVudE5hbWUgXSA9IFwiX2V2ZW50SGFuZGxlclwiO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fb2ZmKCB0aGlzLmhlYWRlcnMuYWRkKCB0aGlzLmhlYWRlcnMubmV4dCgpICkgKTtcblx0XHR0aGlzLl9vbiggdGhpcy5oZWFkZXJzLCBldmVudHMgKTtcblx0XHR0aGlzLl9vbiggdGhpcy5oZWFkZXJzLm5leHQoKSwgeyBrZXlkb3duOiBcIl9wYW5lbEtleURvd25cIiB9KTtcblx0XHR0aGlzLl9ob3ZlcmFibGUoIHRoaXMuaGVhZGVycyApO1xuXHRcdHRoaXMuX2ZvY3VzYWJsZSggdGhpcy5oZWFkZXJzICk7XG5cdH0sXG5cblx0X2V2ZW50SGFuZGxlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0YWN0aXZlID0gdGhpcy5hY3RpdmUsXG5cdFx0XHRjbGlja2VkID0gJCggZXZlbnQuY3VycmVudFRhcmdldCApLFxuXHRcdFx0Y2xpY2tlZElzQWN0aXZlID0gY2xpY2tlZFsgMCBdID09PSBhY3RpdmVbIDAgXSxcblx0XHRcdGNvbGxhcHNpbmcgPSBjbGlja2VkSXNBY3RpdmUgJiYgb3B0aW9ucy5jb2xsYXBzaWJsZSxcblx0XHRcdHRvU2hvdyA9IGNvbGxhcHNpbmcgPyAkKCkgOiBjbGlja2VkLm5leHQoKSxcblx0XHRcdHRvSGlkZSA9IGFjdGl2ZS5uZXh0KCksXG5cdFx0XHRldmVudERhdGEgPSB7XG5cdFx0XHRcdG9sZEhlYWRlcjogYWN0aXZlLFxuXHRcdFx0XHRvbGRQYW5lbDogdG9IaWRlLFxuXHRcdFx0XHRuZXdIZWFkZXI6IGNvbGxhcHNpbmcgPyAkKCkgOiBjbGlja2VkLFxuXHRcdFx0XHRuZXdQYW5lbDogdG9TaG93XG5cdFx0XHR9O1xuXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGlmIChcblx0XHRcdFx0Ly8gY2xpY2sgb24gYWN0aXZlIGhlYWRlciwgYnV0IG5vdCBjb2xsYXBzaWJsZVxuXHRcdFx0XHQoIGNsaWNrZWRJc0FjdGl2ZSAmJiAhb3B0aW9ucy5jb2xsYXBzaWJsZSApIHx8XG5cdFx0XHRcdC8vIGFsbG93IGNhbmNlbGluZyBhY3RpdmF0aW9uXG5cdFx0XHRcdCggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVBY3RpdmF0ZVwiLCBldmVudCwgZXZlbnREYXRhICkgPT09IGZhbHNlICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0b3B0aW9ucy5hY3RpdmUgPSBjb2xsYXBzaW5nID8gZmFsc2UgOiB0aGlzLmhlYWRlcnMuaW5kZXgoIGNsaWNrZWQgKTtcblxuXHRcdC8vIHdoZW4gdGhlIGNhbGwgdG8gLl90b2dnbGUoKSBjb21lcyBhZnRlciB0aGUgY2xhc3MgY2hhbmdlc1xuXHRcdC8vIGl0IGNhdXNlcyBhIHZlcnkgb2RkIGJ1ZyBpbiBJRSA4IChzZWUgIzY3MjApXG5cdFx0dGhpcy5hY3RpdmUgPSBjbGlja2VkSXNBY3RpdmUgPyAkKCkgOiBjbGlja2VkO1xuXHRcdHRoaXMuX3RvZ2dsZSggZXZlbnREYXRhICk7XG5cblx0XHQvLyBzd2l0Y2ggY2xhc3Nlc1xuXHRcdC8vIGNvcm5lciBjbGFzc2VzIG9uIHRoZSBwcmV2aW91c2x5IGFjdGl2ZSBoZWFkZXIgc3RheSBhZnRlciB0aGUgYW5pbWF0aW9uXG5cdFx0YWN0aXZlLnJlbW92ZUNsYXNzKCBcInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiICk7XG5cdFx0aWYgKCBvcHRpb25zLmljb25zICkge1xuXHRcdFx0YWN0aXZlLmNoaWxkcmVuKCBcIi51aS1hY2NvcmRpb24taGVhZGVyLWljb25cIiApXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggb3B0aW9ucy5pY29ucy5hY3RpdmVIZWFkZXIgKVxuXHRcdFx0XHQuYWRkQ2xhc3MoIG9wdGlvbnMuaWNvbnMuaGVhZGVyICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhY2xpY2tlZElzQWN0aXZlICkge1xuXHRcdFx0Y2xpY2tlZFxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiIClcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSB1aS1jb3JuZXItdG9wXCIgKTtcblx0XHRcdGlmICggb3B0aW9ucy5pY29ucyApIHtcblx0XHRcdFx0Y2xpY2tlZC5jaGlsZHJlbiggXCIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uXCIgKVxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggb3B0aW9ucy5pY29ucy5oZWFkZXIgKVxuXHRcdFx0XHRcdC5hZGRDbGFzcyggb3B0aW9ucy5pY29ucy5hY3RpdmVIZWFkZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0Y2xpY2tlZFxuXHRcdFx0XHQubmV4dCgpXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmVcIiApO1xuXHRcdH1cblx0fSxcblxuXHRfdG9nZ2xlOiBmdW5jdGlvbiggZGF0YSApIHtcblx0XHR2YXIgdG9TaG93ID0gZGF0YS5uZXdQYW5lbCxcblx0XHRcdHRvSGlkZSA9IHRoaXMucHJldlNob3cubGVuZ3RoID8gdGhpcy5wcmV2U2hvdyA6IGRhdGEub2xkUGFuZWw7XG5cblx0XHQvLyBoYW5kbGUgYWN0aXZhdGluZyBhIHBhbmVsIGR1cmluZyB0aGUgYW5pbWF0aW9uIGZvciBhbm90aGVyIGFjdGl2YXRpb25cblx0XHR0aGlzLnByZXZTaG93LmFkZCggdGhpcy5wcmV2SGlkZSApLnN0b3AoIHRydWUsIHRydWUgKTtcblx0XHR0aGlzLnByZXZTaG93ID0gdG9TaG93O1xuXHRcdHRoaXMucHJldkhpZGUgPSB0b0hpZGU7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hbmltYXRlICkge1xuXHRcdFx0dGhpcy5fYW5pbWF0ZSggdG9TaG93LCB0b0hpZGUsIGRhdGEgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dG9IaWRlLmhpZGUoKTtcblx0XHRcdHRvU2hvdy5zaG93KCk7XG5cdFx0XHR0aGlzLl90b2dnbGVDb21wbGV0ZSggZGF0YSApO1xuXHRcdH1cblxuXHRcdHRvSGlkZS5hdHRyKHtcblx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcblx0XHR9KTtcblx0XHR0b0hpZGUucHJldigpLmF0dHIoe1xuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwiZmFsc2VcIixcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCJcblx0XHR9KTtcblx0XHQvLyBpZiB3ZSdyZSBzd2l0Y2hpbmcgcGFuZWxzLCByZW1vdmUgdGhlIG9sZCBoZWFkZXIgZnJvbSB0aGUgdGFiIG9yZGVyXG5cdFx0Ly8gaWYgd2UncmUgb3BlbmluZyBmcm9tIGNvbGxhcHNlZCBzdGF0ZSwgcmVtb3ZlIHRoZSBwcmV2aW91cyBoZWFkZXIgZnJvbSB0aGUgdGFiIG9yZGVyXG5cdFx0Ly8gaWYgd2UncmUgY29sbGFwc2luZywgdGhlbiBrZWVwIHRoZSBjb2xsYXBzaW5nIGhlYWRlciBpbiB0aGUgdGFiIG9yZGVyXG5cdFx0aWYgKCB0b1Nob3cubGVuZ3RoICYmIHRvSGlkZS5sZW5ndGggKSB7XG5cdFx0XHR0b0hpZGUucHJldigpLmF0dHIoe1xuXHRcdFx0XHRcInRhYkluZGV4XCI6IC0xLFxuXHRcdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJmYWxzZVwiXG5cdFx0XHR9KTtcblx0XHR9IGVsc2UgaWYgKCB0b1Nob3cubGVuZ3RoICkge1xuXHRcdFx0dGhpcy5oZWFkZXJzLmZpbHRlcihmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KCAkKCB0aGlzICkuYXR0ciggXCJ0YWJJbmRleFwiICksIDEwICkgPT09IDA7XG5cdFx0XHR9KVxuXHRcdFx0LmF0dHIoIFwidGFiSW5kZXhcIiwgLTEgKTtcblx0XHR9XG5cblx0XHR0b1Nob3dcblx0XHRcdC5hdHRyKCBcImFyaWEtaGlkZGVuXCIsIFwiZmFsc2VcIiApXG5cdFx0XHQucHJldigpXG5cdFx0XHRcdC5hdHRyKHtcblx0XHRcdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJ0cnVlXCIsXG5cdFx0XHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxuXHRcdFx0XHRcdHRhYkluZGV4OiAwXG5cdFx0XHRcdH0pO1xuXHR9LFxuXG5cdF9hbmltYXRlOiBmdW5jdGlvbiggdG9TaG93LCB0b0hpZGUsIGRhdGEgKSB7XG5cdFx0dmFyIHRvdGFsLCBlYXNpbmcsIGR1cmF0aW9uLFxuXHRcdFx0dGhhdCA9IHRoaXMsXG5cdFx0XHRhZGp1c3QgPSAwLFxuXHRcdFx0ZG93biA9IHRvU2hvdy5sZW5ndGggJiZcblx0XHRcdFx0KCAhdG9IaWRlLmxlbmd0aCB8fCAoIHRvU2hvdy5pbmRleCgpIDwgdG9IaWRlLmluZGV4KCkgKSApLFxuXHRcdFx0YW5pbWF0ZSA9IHRoaXMub3B0aW9ucy5hbmltYXRlIHx8IHt9LFxuXHRcdFx0b3B0aW9ucyA9IGRvd24gJiYgYW5pbWF0ZS5kb3duIHx8IGFuaW1hdGUsXG5cdFx0XHRjb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGF0Ll90b2dnbGVDb21wbGV0ZSggZGF0YSApO1xuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRkdXJhdGlvbiA9IG9wdGlvbnM7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRlYXNpbmcgPSBvcHRpb25zO1xuXHRcdH1cblx0XHQvLyBmYWxsIGJhY2sgZnJvbSBvcHRpb25zIHRvIGFuaW1hdGlvbiBpbiBjYXNlIG9mIHBhcnRpYWwgZG93biBzZXR0aW5nc1xuXHRcdGVhc2luZyA9IGVhc2luZyB8fCBvcHRpb25zLmVhc2luZyB8fCBhbmltYXRlLmVhc2luZztcblx0XHRkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IG9wdGlvbnMuZHVyYXRpb24gfHwgYW5pbWF0ZS5kdXJhdGlvbjtcblxuXHRcdGlmICggIXRvSGlkZS5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gdG9TaG93LmFuaW1hdGUoIHRoaXMuc2hvd1Byb3BzLCBkdXJhdGlvbiwgZWFzaW5nLCBjb21wbGV0ZSApO1xuXHRcdH1cblx0XHRpZiAoICF0b1Nob3cubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIHRvSGlkZS5hbmltYXRlKCB0aGlzLmhpZGVQcm9wcywgZHVyYXRpb24sIGVhc2luZywgY29tcGxldGUgKTtcblx0XHR9XG5cblx0XHR0b3RhbCA9IHRvU2hvdy5zaG93KCkub3V0ZXJIZWlnaHQoKTtcblx0XHR0b0hpZGUuYW5pbWF0ZSggdGhpcy5oaWRlUHJvcHMsIHtcblx0XHRcdGR1cmF0aW9uOiBkdXJhdGlvbixcblx0XHRcdGVhc2luZzogZWFzaW5nLFxuXHRcdFx0c3RlcDogZnVuY3Rpb24oIG5vdywgZnggKSB7XG5cdFx0XHRcdGZ4Lm5vdyA9IE1hdGgucm91bmQoIG5vdyApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHRvU2hvd1xuXHRcdFx0LmhpZGUoKVxuXHRcdFx0LmFuaW1hdGUoIHRoaXMuc2hvd1Byb3BzLCB7XG5cdFx0XHRcdGR1cmF0aW9uOiBkdXJhdGlvbixcblx0XHRcdFx0ZWFzaW5nOiBlYXNpbmcsXG5cdFx0XHRcdGNvbXBsZXRlOiBjb21wbGV0ZSxcblx0XHRcdFx0c3RlcDogZnVuY3Rpb24oIG5vdywgZnggKSB7XG5cdFx0XHRcdFx0Zngubm93ID0gTWF0aC5yb3VuZCggbm93ICk7XG5cdFx0XHRcdFx0aWYgKCBmeC5wcm9wICE9PSBcImhlaWdodFwiICkge1xuXHRcdFx0XHRcdFx0YWRqdXN0ICs9IGZ4Lm5vdztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0aGF0Lm9wdGlvbnMuaGVpZ2h0U3R5bGUgIT09IFwiY29udGVudFwiICkge1xuXHRcdFx0XHRcdFx0Zngubm93ID0gTWF0aC5yb3VuZCggdG90YWwgLSB0b0hpZGUub3V0ZXJIZWlnaHQoKSAtIGFkanVzdCApO1xuXHRcdFx0XHRcdFx0YWRqdXN0ID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9LFxuXG5cdF90b2dnbGVDb21wbGV0ZTogZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0dmFyIHRvSGlkZSA9IGRhdGEub2xkUGFuZWw7XG5cblx0XHR0b0hpZGVcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmVcIiApXG5cdFx0XHQucHJldigpXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb3JuZXItdG9wXCIgKVxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiICk7XG5cblx0XHQvLyBXb3JrIGFyb3VuZCBmb3IgcmVuZGVyaW5nIGJ1ZyBpbiBJRSAoIzU0MjEpXG5cdFx0aWYgKCB0b0hpZGUubGVuZ3RoICkge1xuXHRcdFx0dG9IaWRlLnBhcmVudCgpWyAwIF0uY2xhc3NOYW1lID0gdG9IaWRlLnBhcmVudCgpWyAwIF0uY2xhc3NOYW1lO1xuXHRcdH1cblx0XHR0aGlzLl90cmlnZ2VyKCBcImFjdGl2YXRlXCIsIG51bGwsIGRhdGEgKTtcblx0fVxufSk7XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgTWVudSAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL21lbnUvXG4gKi9cblxuXG52YXIgbWVudSA9ICQud2lkZ2V0KCBcInVpLm1lbnVcIiwge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXHRkZWZhdWx0RWxlbWVudDogXCI8dWw+XCIsXG5cdGRlbGF5OiAzMDAsXG5cdG9wdGlvbnM6IHtcblx0XHRpY29uczoge1xuXHRcdFx0c3VibWVudTogXCJ1aS1pY29uLWNhcmF0LTEtZVwiXG5cdFx0fSxcblx0XHRpdGVtczogXCI+ICpcIixcblx0XHRtZW51czogXCJ1bFwiLFxuXHRcdHBvc2l0aW9uOiB7XG5cdFx0XHRteTogXCJsZWZ0LTEgdG9wXCIsXG5cdFx0XHRhdDogXCJyaWdodCB0b3BcIlxuXHRcdH0sXG5cdFx0cm9sZTogXCJtZW51XCIsXG5cblx0XHQvLyBjYWxsYmFja3Ncblx0XHRibHVyOiBudWxsLFxuXHRcdGZvY3VzOiBudWxsLFxuXHRcdHNlbGVjdDogbnVsbFxuXHR9LFxuXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuYWN0aXZlTWVudSA9IHRoaXMuZWxlbWVudDtcblxuXHRcdC8vIEZsYWcgdXNlZCB0byBwcmV2ZW50IGZpcmluZyBvZiB0aGUgY2xpY2sgaGFuZGxlclxuXHRcdC8vIGFzIHRoZSBldmVudCBidWJibGVzIHVwIHRocm91Z2ggbmVzdGVkIG1lbnVzXG5cdFx0dGhpcy5tb3VzZUhhbmRsZWQgPSBmYWxzZTtcblx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdC51bmlxdWVJZCgpXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktbWVudSB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnRcIiApXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktbWVudS1pY29uc1wiLCAhIXRoaXMuZWxlbWVudC5maW5kKCBcIi51aS1pY29uXCIgKS5sZW5ndGggKVxuXHRcdFx0LmF0dHIoe1xuXHRcdFx0XHRyb2xlOiB0aGlzLm9wdGlvbnMucm9sZSxcblx0XHRcdFx0dGFiSW5kZXg6IDBcblx0XHRcdH0pO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKVxuXHRcdFx0XHQuYXR0ciggXCJhcmlhLWRpc2FibGVkXCIsIFwidHJ1ZVwiICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fb24oe1xuXHRcdFx0Ly8gUHJldmVudCBmb2N1cyBmcm9tIHN0aWNraW5nIHRvIGxpbmtzIGluc2lkZSBtZW51IGFmdGVyIGNsaWNraW5nXG5cdFx0XHQvLyB0aGVtIChmb2N1cyBzaG91bGQgYWx3YXlzIHN0YXkgb24gVUwgZHVyaW5nIG5hdmlnYXRpb24pLlxuXHRcdFx0XCJtb3VzZWRvd24gLnVpLW1lbnUtaXRlbVwiOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9LFxuXHRcdFx0XCJjbGljayAudWktbWVudS1pdGVtXCI6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9ICQoIGV2ZW50LnRhcmdldCApO1xuXHRcdFx0XHRpZiAoICF0aGlzLm1vdXNlSGFuZGxlZCAmJiB0YXJnZXQubm90KCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdHRoaXMuc2VsZWN0KCBldmVudCApO1xuXG5cdFx0XHRcdFx0Ly8gT25seSBzZXQgdGhlIG1vdXNlSGFuZGxlZCBmbGFnIGlmIHRoZSBldmVudCB3aWxsIGJ1YmJsZSwgc2VlICM5NDY5LlxuXHRcdFx0XHRcdGlmICggIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLm1vdXNlSGFuZGxlZCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gT3BlbiBzdWJtZW51IG9uIGNsaWNrXG5cdFx0XHRcdFx0aWYgKCB0YXJnZXQuaGFzKCBcIi51aS1tZW51XCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmV4cGFuZCggZXZlbnQgKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAhdGhpcy5lbGVtZW50LmlzKCBcIjpmb2N1c1wiICkgJiYgJCggdGhpcy5kb2N1bWVudFsgMCBdLmFjdGl2ZUVsZW1lbnQgKS5jbG9zZXN0KCBcIi51aS1tZW51XCIgKS5sZW5ndGggKSB7XG5cblx0XHRcdFx0XHRcdC8vIFJlZGlyZWN0IGZvY3VzIHRvIHRoZSBtZW51XG5cdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJmb2N1c1wiLCBbIHRydWUgXSApO1xuXG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgYWN0aXZlIGl0ZW0gaXMgb24gdGhlIHRvcCBsZXZlbCwgbGV0IGl0IHN0YXkgYWN0aXZlLlxuXHRcdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBibHVyIHRoZSBhY3RpdmUgaXRlbSBzaW5jZSBpdCBpcyBubyBsb25nZXIgdmlzaWJsZS5cblx0XHRcdFx0XHRcdGlmICggdGhpcy5hY3RpdmUgJiYgdGhpcy5hY3RpdmUucGFyZW50cyggXCIudWktbWVudVwiICkubGVuZ3RoID09PSAxICkge1xuXHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMudGltZXIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRcIm1vdXNlZW50ZXIgLnVpLW1lbnUtaXRlbVwiOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdC8vIElnbm9yZSBtb3VzZSBldmVudHMgd2hpbGUgdHlwZWFoZWFkIGlzIGFjdGl2ZSwgc2VlICMxMDQ1OC5cblx0XHRcdFx0Ly8gUHJldmVudHMgZm9jdXNpbmcgdGhlIHdyb25nIGl0ZW0gd2hlbiB0eXBlYWhlYWQgY2F1c2VzIGEgc2Nyb2xsIHdoaWxlIHRoZSBtb3VzZVxuXHRcdFx0XHQvLyBpcyBvdmVyIGFuIGl0ZW0gaW4gdGhlIG1lbnVcblx0XHRcdFx0aWYgKCB0aGlzLnByZXZpb3VzRmlsdGVyICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gJCggZXZlbnQuY3VycmVudFRhcmdldCApO1xuXHRcdFx0XHQvLyBSZW1vdmUgdWktc3RhdGUtYWN0aXZlIGNsYXNzIGZyb20gc2libGluZ3Mgb2YgdGhlIG5ld2x5IGZvY3VzZWQgbWVudSBpdGVtXG5cdFx0XHRcdC8vIHRvIGF2b2lkIGEganVtcCBjYXVzZWQgYnkgYWRqYWNlbnQgZWxlbWVudHMgYm90aCBoYXZpbmcgYSBjbGFzcyB3aXRoIGEgYm9yZGVyXG5cdFx0XHRcdHRhcmdldC5zaWJsaW5ncyggXCIudWktc3RhdGUtYWN0aXZlXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXHRcdFx0XHR0aGlzLmZvY3VzKCBldmVudCwgdGFyZ2V0ICk7XG5cdFx0XHR9LFxuXHRcdFx0bW91c2VsZWF2ZTogXCJjb2xsYXBzZUFsbFwiLFxuXHRcdFx0XCJtb3VzZWxlYXZlIC51aS1tZW51XCI6IFwiY29sbGFwc2VBbGxcIixcblx0XHRcdGZvY3VzOiBmdW5jdGlvbiggZXZlbnQsIGtlZXBBY3RpdmVJdGVtICkge1xuXHRcdFx0XHQvLyBJZiB0aGVyZSdzIGFscmVhZHkgYW4gYWN0aXZlIGl0ZW0sIGtlZXAgaXQgYWN0aXZlXG5cdFx0XHRcdC8vIElmIG5vdCwgYWN0aXZhdGUgdGhlIGZpcnN0IGl0ZW1cblx0XHRcdFx0dmFyIGl0ZW0gPSB0aGlzLmFjdGl2ZSB8fCB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zICkuZXEoIDAgKTtcblxuXHRcdFx0XHRpZiAoICFrZWVwQWN0aXZlSXRlbSApIHtcblx0XHRcdFx0XHR0aGlzLmZvY3VzKCBldmVudCwgaXRlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0Ymx1cjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHR0aGlzLl9kZWxheShmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoICEkLmNvbnRhaW5zKCB0aGlzLmVsZW1lbnRbMF0sIHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCApICkge1xuXHRcdFx0XHRcdFx0dGhpcy5jb2xsYXBzZUFsbCggZXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdGtleWRvd246IFwiX2tleWRvd25cIlxuXHRcdH0pO1xuXG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cblx0XHQvLyBDbGlja3Mgb3V0c2lkZSBvZiBhIG1lbnUgY29sbGFwc2UgYW55IG9wZW4gbWVudXNcblx0XHR0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwge1xuXHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0aWYgKCB0aGlzLl9jbG9zZU9uRG9jdW1lbnRDbGljayggZXZlbnQgKSApIHtcblx0XHRcdFx0XHR0aGlzLmNvbGxhcHNlQWxsKCBldmVudCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVzZXQgdGhlIG1vdXNlSGFuZGxlZCBmbGFnXG5cdFx0XHRcdHRoaXMubW91c2VIYW5kbGVkID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIERlc3Ryb3kgKHN1YiltZW51c1xuXHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIgKVxuXHRcdFx0LmZpbmQoIFwiLnVpLW1lbnVcIiApLmFkZEJhY2soKVxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktbWVudSB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktbWVudS1pY29ucyB1aS1mcm9udFwiIClcblx0XHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiIClcblx0XHRcdFx0LnJlbW92ZUF0dHIoIFwidGFiSW5kZXhcIiApXG5cdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtbGFiZWxsZWRieVwiIClcblx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1leHBhbmRlZFwiIClcblx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1oaWRkZW5cIiApXG5cdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtZGlzYWJsZWRcIiApXG5cdFx0XHRcdC5yZW1vdmVVbmlxdWVJZCgpXG5cdFx0XHRcdC5zaG93KCk7XG5cblx0XHQvLyBEZXN0cm95IG1lbnUgaXRlbXNcblx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCIudWktbWVudS1pdGVtXCIgKVxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLW1lbnUtaXRlbVwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWRpc2FibGVkXCIgKVxuXHRcdFx0LnJlbW92ZVVuaXF1ZUlkKClcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcInRhYkluZGV4XCIgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtaGFzcG9wdXBcIiApXG5cdFx0XHQuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGVsZW0gPSAkKCB0aGlzICk7XG5cdFx0XHRcdGlmICggZWxlbS5kYXRhKCBcInVpLW1lbnUtc3VibWVudS1jYXJhdFwiICkgKSB7XG5cdFx0XHRcdFx0ZWxlbS5yZW1vdmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHQvLyBEZXN0cm95IG1lbnUgZGl2aWRlcnNcblx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCIudWktbWVudS1kaXZpZGVyXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1tZW51LWRpdmlkZXIgdWktd2lkZ2V0LWNvbnRlbnRcIiApO1xuXHR9LFxuXG5cdF9rZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIG1hdGNoLCBwcmV2LCBjaGFyYWN0ZXIsIHNraXAsXG5cdFx0XHRwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG5cblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xuXHRcdGNhc2UgJC51aS5rZXlDb2RlLlBBR0VfVVA6XG5cdFx0XHR0aGlzLnByZXZpb3VzUGFnZSggZXZlbnQgKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJC51aS5rZXlDb2RlLlBBR0VfRE9XTjpcblx0XHRcdHRoaXMubmV4dFBhZ2UoIGV2ZW50ICk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICQudWkua2V5Q29kZS5IT01FOlxuXHRcdFx0dGhpcy5fbW92ZSggXCJmaXJzdFwiLCBcImZpcnN0XCIsIGV2ZW50ICk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICQudWkua2V5Q29kZS5FTkQ6XG5cdFx0XHR0aGlzLl9tb3ZlKCBcImxhc3RcIiwgXCJsYXN0XCIsIGV2ZW50ICk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICQudWkua2V5Q29kZS5VUDpcblx0XHRcdHRoaXMucHJldmlvdXMoIGV2ZW50ICk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICQudWkua2V5Q29kZS5ET1dOOlxuXHRcdFx0dGhpcy5uZXh0KCBldmVudCApO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuTEVGVDpcblx0XHRcdHRoaXMuY29sbGFwc2UoIGV2ZW50ICk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICQudWkua2V5Q29kZS5SSUdIVDpcblx0XHRcdGlmICggdGhpcy5hY3RpdmUgJiYgIXRoaXMuYWN0aXZlLmlzKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSB7XG5cdFx0XHRcdHRoaXMuZXhwYW5kKCBldmVudCApO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuRU5URVI6XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuU1BBQ0U6XG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggZXZlbnQgKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJC51aS5rZXlDb2RlLkVTQ0FQRTpcblx0XHRcdHRoaXMuY29sbGFwc2UoIGV2ZW50ICk7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0cHJldmVudERlZmF1bHQgPSBmYWxzZTtcblx0XHRcdHByZXYgPSB0aGlzLnByZXZpb3VzRmlsdGVyIHx8IFwiXCI7XG5cdFx0XHRjaGFyYWN0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCBldmVudC5rZXlDb2RlICk7XG5cdFx0XHRza2lwID0gZmFsc2U7XG5cblx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5maWx0ZXJUaW1lciApO1xuXG5cdFx0XHRpZiAoIGNoYXJhY3RlciA9PT0gcHJldiApIHtcblx0XHRcdFx0c2tpcCA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjaGFyYWN0ZXIgPSBwcmV2ICsgY2hhcmFjdGVyO1xuXHRcdFx0fVxuXG5cdFx0XHRtYXRjaCA9IHRoaXMuX2ZpbHRlck1lbnVJdGVtcyggY2hhcmFjdGVyICk7XG5cdFx0XHRtYXRjaCA9IHNraXAgJiYgbWF0Y2guaW5kZXgoIHRoaXMuYWN0aXZlLm5leHQoKSApICE9PSAtMSA/XG5cdFx0XHRcdHRoaXMuYWN0aXZlLm5leHRBbGwoIFwiLnVpLW1lbnUtaXRlbVwiICkgOlxuXHRcdFx0XHRtYXRjaDtcblxuXHRcdFx0Ly8gSWYgbm8gbWF0Y2hlcyBvbiB0aGUgY3VycmVudCBmaWx0ZXIsIHJlc2V0IHRvIHRoZSBsYXN0IGNoYXJhY3RlciBwcmVzc2VkXG5cdFx0XHQvLyB0byBtb3ZlIGRvd24gdGhlIG1lbnUgdG8gdGhlIGZpcnN0IGl0ZW0gdGhhdCBzdGFydHMgd2l0aCB0aGF0IGNoYXJhY3RlclxuXHRcdFx0aWYgKCAhbWF0Y2gubGVuZ3RoICkge1xuXHRcdFx0XHRjaGFyYWN0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCBldmVudC5rZXlDb2RlICk7XG5cdFx0XHRcdG1hdGNoID0gdGhpcy5fZmlsdGVyTWVudUl0ZW1zKCBjaGFyYWN0ZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBtYXRjaC5sZW5ndGggKSB7XG5cdFx0XHRcdHRoaXMuZm9jdXMoIGV2ZW50LCBtYXRjaCApO1xuXHRcdFx0XHR0aGlzLnByZXZpb3VzRmlsdGVyID0gY2hhcmFjdGVyO1xuXHRcdFx0XHR0aGlzLmZpbHRlclRpbWVyID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZGVsZXRlIHRoaXMucHJldmlvdXNGaWx0ZXI7XG5cdFx0XHRcdH0sIDEwMDAgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlbGV0ZSB0aGlzLnByZXZpb3VzRmlsdGVyO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggcHJldmVudERlZmF1bHQgKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblxuXHRfYWN0aXZhdGU6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoICF0aGlzLmFjdGl2ZS5pcyggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xuXHRcdFx0aWYgKCB0aGlzLmFjdGl2ZS5pcyggXCJbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddXCIgKSApIHtcblx0XHRcdFx0dGhpcy5leHBhbmQoIGV2ZW50ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnNlbGVjdCggZXZlbnQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1lbnVzLCBpdGVtcyxcblx0XHRcdHRoYXQgPSB0aGlzLFxuXHRcdFx0aWNvbiA9IHRoaXMub3B0aW9ucy5pY29ucy5zdWJtZW51LFxuXHRcdFx0c3VibWVudXMgPSB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLm1lbnVzICk7XG5cblx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktbWVudS1pY29uc1wiLCAhIXRoaXMuZWxlbWVudC5maW5kKCBcIi51aS1pY29uXCIgKS5sZW5ndGggKTtcblxuXHRcdC8vIEluaXRpYWxpemUgbmVzdGVkIG1lbnVzXG5cdFx0c3VibWVudXMuZmlsdGVyKCBcIjpub3QoLnVpLW1lbnUpXCIgKVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWZyb250XCIgKVxuXHRcdFx0LmhpZGUoKVxuXHRcdFx0LmF0dHIoe1xuXHRcdFx0XHRyb2xlOiB0aGlzLm9wdGlvbnMucm9sZSxcblx0XHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcInRydWVcIixcblx0XHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwiZmFsc2VcIlxuXHRcdFx0fSlcblx0XHRcdC5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbWVudSA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHRpdGVtID0gbWVudS5wYXJlbnQoKSxcblx0XHRcdFx0XHRzdWJtZW51Q2FyYXQgPSAkKCBcIjxzcGFuPlwiIClcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1tZW51LWljb24gdWktaWNvbiBcIiArIGljb24gKVxuXHRcdFx0XHRcdFx0LmRhdGEoIFwidWktbWVudS1zdWJtZW51LWNhcmF0XCIsIHRydWUgKTtcblxuXHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0LmF0dHIoIFwiYXJpYS1oYXNwb3B1cFwiLCBcInRydWVcIiApXG5cdFx0XHRcdFx0LnByZXBlbmQoIHN1Ym1lbnVDYXJhdCApO1xuXHRcdFx0XHRtZW51LmF0dHIoIFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGl0ZW0uYXR0ciggXCJpZFwiICkgKTtcblx0XHRcdH0pO1xuXG5cdFx0bWVudXMgPSBzdWJtZW51cy5hZGQoIHRoaXMuZWxlbWVudCApO1xuXHRcdGl0ZW1zID0gbWVudXMuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zICk7XG5cblx0XHQvLyBJbml0aWFsaXplIG1lbnUtaXRlbXMgY29udGFpbmluZyBzcGFjZXMgYW5kL29yIGRhc2hlcyBvbmx5IGFzIGRpdmlkZXJzXG5cdFx0aXRlbXMubm90KCBcIi51aS1tZW51LWl0ZW1cIiApLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaXRlbSA9ICQoIHRoaXMgKTtcblx0XHRcdGlmICggdGhhdC5faXNEaXZpZGVyKCBpdGVtICkgKSB7XG5cdFx0XHRcdGl0ZW0uYWRkQ2xhc3MoIFwidWktd2lkZ2V0LWNvbnRlbnQgdWktbWVudS1kaXZpZGVyXCIgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIERvbid0IHJlZnJlc2ggbGlzdCBpdGVtcyB0aGF0IGFyZSBhbHJlYWR5IGFkYXB0ZWRcblx0XHRpdGVtcy5ub3QoIFwiLnVpLW1lbnUtaXRlbSwgLnVpLW1lbnUtZGl2aWRlclwiIClcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1tZW51LWl0ZW1cIiApXG5cdFx0XHQudW5pcXVlSWQoKVxuXHRcdFx0LmF0dHIoe1xuXHRcdFx0XHR0YWJJbmRleDogLTEsXG5cdFx0XHRcdHJvbGU6IHRoaXMuX2l0ZW1Sb2xlKClcblx0XHRcdH0pO1xuXG5cdFx0Ly8gQWRkIGFyaWEtZGlzYWJsZWQgYXR0cmlidXRlIHRvIGFueSBkaXNhYmxlZCBtZW51IGl0ZW1cblx0XHRpdGVtcy5maWx0ZXIoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKS5hdHRyKCBcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIgKTtcblxuXHRcdC8vIElmIHRoZSBhY3RpdmUgaXRlbSBoYXMgYmVlbiByZW1vdmVkLCBibHVyIHRoZSBtZW51XG5cdFx0aWYgKCB0aGlzLmFjdGl2ZSAmJiAhJC5jb250YWlucyggdGhpcy5lbGVtZW50WyAwIF0sIHRoaXMuYWN0aXZlWyAwIF0gKSApIHtcblx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdH1cblx0fSxcblxuXHRfaXRlbVJvbGU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRtZW51OiBcIm1lbnVpdGVtXCIsXG5cdFx0XHRsaXN0Ym94OiBcIm9wdGlvblwiXG5cdFx0fVsgdGhpcy5vcHRpb25zLnJvbGUgXTtcblx0fSxcblxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHRpZiAoIGtleSA9PT0gXCJpY29uc1wiICkge1xuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLW1lbnUtaWNvblwiIClcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMuaWNvbnMuc3VibWVudSApXG5cdFx0XHRcdC5hZGRDbGFzcyggdmFsdWUuc3VibWVudSApO1xuXHRcdH1cblx0XHRpZiAoIGtleSA9PT0gXCJkaXNhYmxlZFwiICkge1xuXHRcdFx0dGhpcy5lbGVtZW50XG5cdFx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCAhIXZhbHVlIClcblx0XHRcdFx0LmF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiLCB2YWx1ZSApO1xuXHRcdH1cblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApO1xuXHR9LFxuXG5cdGZvY3VzOiBmdW5jdGlvbiggZXZlbnQsIGl0ZW0gKSB7XG5cdFx0dmFyIG5lc3RlZCwgZm9jdXNlZDtcblx0XHR0aGlzLmJsdXIoIGV2ZW50LCBldmVudCAmJiBldmVudC50eXBlID09PSBcImZvY3VzXCIgKTtcblxuXHRcdHRoaXMuX3Njcm9sbEludG9WaWV3KCBpdGVtICk7XG5cblx0XHR0aGlzLmFjdGl2ZSA9IGl0ZW0uZmlyc3QoKTtcblx0XHRmb2N1c2VkID0gdGhpcy5hY3RpdmUuYWRkQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7XG5cdFx0Ly8gT25seSB1cGRhdGUgYXJpYS1hY3RpdmVkZXNjZW5kYW50IGlmIHRoZXJlJ3MgYSByb2xlXG5cdFx0Ly8gb3RoZXJ3aXNlIHdlIGFzc3VtZSBmb2N1cyBpcyBtYW5hZ2VkIGVsc2V3aGVyZVxuXHRcdGlmICggdGhpcy5vcHRpb25zLnJvbGUgKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIiwgZm9jdXNlZC5hdHRyKCBcImlkXCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIEhpZ2hsaWdodCBhY3RpdmUgcGFyZW50IG1lbnUgaXRlbSwgaWYgYW55XG5cdFx0dGhpcy5hY3RpdmVcblx0XHRcdC5wYXJlbnQoKVxuXHRcdFx0LmNsb3Nlc3QoIFwiLnVpLW1lbnUtaXRlbVwiIClcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXG5cdFx0aWYgKCBldmVudCAmJiBldmVudC50eXBlID09PSBcImtleWRvd25cIiApIHtcblx0XHRcdHRoaXMuX2Nsb3NlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudGltZXIgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhpcy5fY2xvc2UoKTtcblx0XHRcdH0sIHRoaXMuZGVsYXkgKTtcblx0XHR9XG5cblx0XHRuZXN0ZWQgPSBpdGVtLmNoaWxkcmVuKCBcIi51aS1tZW51XCIgKTtcblx0XHRpZiAoIG5lc3RlZC5sZW5ndGggJiYgZXZlbnQgJiYgKCAvXm1vdXNlLy50ZXN0KCBldmVudC50eXBlICkgKSApIHtcblx0XHRcdHRoaXMuX3N0YXJ0T3BlbmluZyhuZXN0ZWQpO1xuXHRcdH1cblx0XHR0aGlzLmFjdGl2ZU1lbnUgPSBpdGVtLnBhcmVudCgpO1xuXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJmb2N1c1wiLCBldmVudCwgeyBpdGVtOiBpdGVtIH0gKTtcblx0fSxcblxuXHRfc2Nyb2xsSW50b1ZpZXc6IGZ1bmN0aW9uKCBpdGVtICkge1xuXHRcdHZhciBib3JkZXJUb3AsIHBhZGRpbmdUb3AsIG9mZnNldCwgc2Nyb2xsLCBlbGVtZW50SGVpZ2h0LCBpdGVtSGVpZ2h0O1xuXHRcdGlmICggdGhpcy5faGFzU2Nyb2xsKCkgKSB7XG5cdFx0XHRib3JkZXJUb3AgPSBwYXJzZUZsb2F0KCAkLmNzcyggdGhpcy5hY3RpdmVNZW51WzBdLCBcImJvcmRlclRvcFdpZHRoXCIgKSApIHx8IDA7XG5cdFx0XHRwYWRkaW5nVG9wID0gcGFyc2VGbG9hdCggJC5jc3MoIHRoaXMuYWN0aXZlTWVudVswXSwgXCJwYWRkaW5nVG9wXCIgKSApIHx8IDA7XG5cdFx0XHRvZmZzZXQgPSBpdGVtLm9mZnNldCgpLnRvcCAtIHRoaXMuYWN0aXZlTWVudS5vZmZzZXQoKS50b3AgLSBib3JkZXJUb3AgLSBwYWRkaW5nVG9wO1xuXHRcdFx0c2Nyb2xsID0gdGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcCgpO1xuXHRcdFx0ZWxlbWVudEhlaWdodCA9IHRoaXMuYWN0aXZlTWVudS5oZWlnaHQoKTtcblx0XHRcdGl0ZW1IZWlnaHQgPSBpdGVtLm91dGVySGVpZ2h0KCk7XG5cblx0XHRcdGlmICggb2Zmc2V0IDwgMCApIHtcblx0XHRcdFx0dGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcCggc2Nyb2xsICsgb2Zmc2V0ICk7XG5cdFx0XHR9IGVsc2UgaWYgKCBvZmZzZXQgKyBpdGVtSGVpZ2h0ID4gZWxlbWVudEhlaWdodCApIHtcblx0XHRcdFx0dGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcCggc2Nyb2xsICsgb2Zmc2V0IC0gZWxlbWVudEhlaWdodCArIGl0ZW1IZWlnaHQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ymx1cjogZnVuY3Rpb24oIGV2ZW50LCBmcm9tRm9jdXMgKSB7XG5cdFx0aWYgKCAhZnJvbUZvY3VzICkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhdGhpcy5hY3RpdmUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5hY3RpdmUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xuXHRcdHRoaXMuYWN0aXZlID0gbnVsbDtcblxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiYmx1clwiLCBldmVudCwgeyBpdGVtOiB0aGlzLmFjdGl2ZSB9ICk7XG5cdH0sXG5cblx0X3N0YXJ0T3BlbmluZzogZnVuY3Rpb24oIHN1Ym1lbnUgKSB7XG5cdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7XG5cblx0XHQvLyBEb24ndCBvcGVuIGlmIGFscmVhZHkgb3BlbiBmaXhlcyBhIEZpcmVmb3ggYnVnIHRoYXQgY2F1c2VkIGEgLjUgcGl4ZWxcblx0XHQvLyBzaGlmdCBpbiB0aGUgc3VibWVudSBwb3NpdGlvbiB3aGVuIG1vdXNpbmcgb3ZlciB0aGUgY2FyYXQgaWNvblxuXHRcdGlmICggc3VibWVudS5hdHRyKCBcImFyaWEtaGlkZGVuXCIgKSAhPT0gXCJ0cnVlXCIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy50aW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fY2xvc2UoKTtcblx0XHRcdHRoaXMuX29wZW4oIHN1Ym1lbnUgKTtcblx0XHR9LCB0aGlzLmRlbGF5ICk7XG5cdH0sXG5cblx0X29wZW46IGZ1bmN0aW9uKCBzdWJtZW51ICkge1xuXHRcdHZhciBwb3NpdGlvbiA9ICQuZXh0ZW5kKHtcblx0XHRcdG9mOiB0aGlzLmFjdGl2ZVxuXHRcdH0sIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApO1xuXG5cdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7XG5cdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLW1lbnVcIiApLm5vdCggc3VibWVudS5wYXJlbnRzKCBcIi51aS1tZW51XCIgKSApXG5cdFx0XHQuaGlkZSgpXG5cdFx0XHQuYXR0ciggXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIiApO1xuXG5cdFx0c3VibWVudVxuXHRcdFx0LnNob3coKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1oaWRkZW5cIiApXG5cdFx0XHQuYXR0ciggXCJhcmlhLWV4cGFuZGVkXCIsIFwidHJ1ZVwiIClcblx0XHRcdC5wb3NpdGlvbiggcG9zaXRpb24gKTtcblx0fSxcblxuXHRjb2xsYXBzZUFsbDogZnVuY3Rpb24oIGV2ZW50LCBhbGwgKSB7XG5cdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7XG5cdFx0dGhpcy50aW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gSWYgd2Ugd2VyZSBwYXNzZWQgYW4gZXZlbnQsIGxvb2sgZm9yIHRoZSBzdWJtZW51IHRoYXQgY29udGFpbnMgdGhlIGV2ZW50XG5cdFx0XHR2YXIgY3VycmVudE1lbnUgPSBhbGwgPyB0aGlzLmVsZW1lbnQgOlxuXHRcdFx0XHQkKCBldmVudCAmJiBldmVudC50YXJnZXQgKS5jbG9zZXN0KCB0aGlzLmVsZW1lbnQuZmluZCggXCIudWktbWVudVwiICkgKTtcblxuXHRcdFx0Ly8gSWYgd2UgZm91bmQgbm8gdmFsaWQgc3VibWVudSBhbmNlc3RvciwgdXNlIHRoZSBtYWluIG1lbnUgdG8gY2xvc2UgYWxsIHN1YiBtZW51cyBhbnl3YXlcblx0XHRcdGlmICggIWN1cnJlbnRNZW51Lmxlbmd0aCApIHtcblx0XHRcdFx0Y3VycmVudE1lbnUgPSB0aGlzLmVsZW1lbnQ7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX2Nsb3NlKCBjdXJyZW50TWVudSApO1xuXG5cdFx0XHR0aGlzLmJsdXIoIGV2ZW50ICk7XG5cdFx0XHR0aGlzLmFjdGl2ZU1lbnUgPSBjdXJyZW50TWVudTtcblx0XHR9LCB0aGlzLmRlbGF5ICk7XG5cdH0sXG5cblx0Ly8gV2l0aCBubyBhcmd1bWVudHMsIGNsb3NlcyB0aGUgY3VycmVudGx5IGFjdGl2ZSBtZW51IC0gaWYgbm90aGluZyBpcyBhY3RpdmVcblx0Ly8gaXQgY2xvc2VzIGFsbCBtZW51cy4gIElmIHBhc3NlZCBhbiBhcmd1bWVudCwgaXQgd2lsbCBzZWFyY2ggZm9yIG1lbnVzIEJFTE9XXG5cdF9jbG9zZTogZnVuY3Rpb24oIHN0YXJ0TWVudSApIHtcblx0XHRpZiAoICFzdGFydE1lbnUgKSB7XG5cdFx0XHRzdGFydE1lbnUgPSB0aGlzLmFjdGl2ZSA/IHRoaXMuYWN0aXZlLnBhcmVudCgpIDogdGhpcy5lbGVtZW50O1xuXHRcdH1cblxuXHRcdHN0YXJ0TWVudVxuXHRcdFx0LmZpbmQoIFwiLnVpLW1lbnVcIiApXG5cdFx0XHRcdC5oaWRlKClcblx0XHRcdFx0LmF0dHIoIFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIgKVxuXHRcdFx0XHQuYXR0ciggXCJhcmlhLWV4cGFuZGVkXCIsIFwiZmFsc2VcIiApXG5cdFx0XHQuZW5kKClcblx0XHRcdC5maW5kKCBcIi51aS1zdGF0ZS1hY3RpdmVcIiApLm5vdCggXCIudWktc3RhdGUtZm9jdXNcIiApXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXHR9LFxuXG5cdF9jbG9zZU9uRG9jdW1lbnRDbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHJldHVybiAhJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggXCIudWktbWVudVwiICkubGVuZ3RoO1xuXHR9LFxuXG5cdF9pc0RpdmlkZXI6IGZ1bmN0aW9uKCBpdGVtICkge1xuXG5cdFx0Ly8gTWF0Y2ggaHlwaGVuLCBlbSBkYXNoLCBlbiBkYXNoXG5cdFx0cmV0dXJuICEvW15cXC1cXHUyMDE0XFx1MjAxM1xcc10vLnRlc3QoIGl0ZW0udGV4dCgpICk7XG5cdH0sXG5cblx0Y29sbGFwc2U6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHR2YXIgbmV3SXRlbSA9IHRoaXMuYWN0aXZlICYmXG5cdFx0XHR0aGlzLmFjdGl2ZS5wYXJlbnQoKS5jbG9zZXN0KCBcIi51aS1tZW51LWl0ZW1cIiwgdGhpcy5lbGVtZW50ICk7XG5cdFx0aWYgKCBuZXdJdGVtICYmIG5ld0l0ZW0ubGVuZ3RoICkge1xuXHRcdFx0dGhpcy5fY2xvc2UoKTtcblx0XHRcdHRoaXMuZm9jdXMoIGV2ZW50LCBuZXdJdGVtICk7XG5cdFx0fVxuXHR9LFxuXG5cdGV4cGFuZDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBuZXdJdGVtID0gdGhpcy5hY3RpdmUgJiZcblx0XHRcdHRoaXMuYWN0aXZlXG5cdFx0XHRcdC5jaGlsZHJlbiggXCIudWktbWVudSBcIiApXG5cdFx0XHRcdC5maW5kKCB0aGlzLm9wdGlvbnMuaXRlbXMgKVxuXHRcdFx0XHQuZmlyc3QoKTtcblxuXHRcdGlmICggbmV3SXRlbSAmJiBuZXdJdGVtLmxlbmd0aCApIHtcblx0XHRcdHRoaXMuX29wZW4oIG5ld0l0ZW0ucGFyZW50KCkgKTtcblxuXHRcdFx0Ly8gRGVsYXkgc28gRmlyZWZveCB3aWxsIG5vdCBoaWRlIGFjdGl2ZWRlc2NlbmRhbnQgY2hhbmdlIGluIGV4cGFuZGluZyBzdWJtZW51IGZyb20gQVRcblx0XHRcdHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLmZvY3VzKCBldmVudCwgbmV3SXRlbSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cdG5leHQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHR0aGlzLl9tb3ZlKCBcIm5leHRcIiwgXCJmaXJzdFwiLCBldmVudCApO1xuXHR9LFxuXG5cdHByZXZpb3VzOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dGhpcy5fbW92ZSggXCJwcmV2XCIsIFwibGFzdFwiLCBldmVudCApO1xuXHR9LFxuXG5cdGlzRmlyc3RJdGVtOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5hY3RpdmUgJiYgIXRoaXMuYWN0aXZlLnByZXZBbGwoIFwiLnVpLW1lbnUtaXRlbVwiICkubGVuZ3RoO1xuXHR9LFxuXG5cdGlzTGFzdEl0ZW06IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmFjdGl2ZSAmJiAhdGhpcy5hY3RpdmUubmV4dEFsbCggXCIudWktbWVudS1pdGVtXCIgKS5sZW5ndGg7XG5cdH0sXG5cblx0X21vdmU6IGZ1bmN0aW9uKCBkaXJlY3Rpb24sIGZpbHRlciwgZXZlbnQgKSB7XG5cdFx0dmFyIG5leHQ7XG5cdFx0aWYgKCB0aGlzLmFjdGl2ZSApIHtcblx0XHRcdGlmICggZGlyZWN0aW9uID09PSBcImZpcnN0XCIgfHwgZGlyZWN0aW9uID09PSBcImxhc3RcIiApIHtcblx0XHRcdFx0bmV4dCA9IHRoaXMuYWN0aXZlXG5cdFx0XHRcdFx0WyBkaXJlY3Rpb24gPT09IFwiZmlyc3RcIiA/IFwicHJldkFsbFwiIDogXCJuZXh0QWxsXCIgXSggXCIudWktbWVudS1pdGVtXCIgKVxuXHRcdFx0XHRcdC5lcSggLTEgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5leHQgPSB0aGlzLmFjdGl2ZVxuXHRcdFx0XHRcdFsgZGlyZWN0aW9uICsgXCJBbGxcIiBdKCBcIi51aS1tZW51LWl0ZW1cIiApXG5cdFx0XHRcdFx0LmVxKCAwICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICggIW5leHQgfHwgIW5leHQubGVuZ3RoIHx8ICF0aGlzLmFjdGl2ZSApIHtcblx0XHRcdG5leHQgPSB0aGlzLmFjdGl2ZU1lbnUuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zIClbIGZpbHRlciBdKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5mb2N1cyggZXZlbnQsIG5leHQgKTtcblx0fSxcblxuXHRuZXh0UGFnZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBpdGVtLCBiYXNlLCBoZWlnaHQ7XG5cblx0XHRpZiAoICF0aGlzLmFjdGl2ZSApIHtcblx0XHRcdHRoaXMubmV4dCggZXZlbnQgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKCB0aGlzLmlzTGFzdEl0ZW0oKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKCB0aGlzLl9oYXNTY3JvbGwoKSApIHtcblx0XHRcdGJhc2UgPSB0aGlzLmFjdGl2ZS5vZmZzZXQoKS50b3A7XG5cdFx0XHRoZWlnaHQgPSB0aGlzLmVsZW1lbnQuaGVpZ2h0KCk7XG5cdFx0XHR0aGlzLmFjdGl2ZS5uZXh0QWxsKCBcIi51aS1tZW51LWl0ZW1cIiApLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGl0ZW0gPSAkKCB0aGlzICk7XG5cdFx0XHRcdHJldHVybiBpdGVtLm9mZnNldCgpLnRvcCAtIGJhc2UgLSBoZWlnaHQgPCAwO1xuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMuZm9jdXMoIGV2ZW50LCBpdGVtICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZm9jdXMoIGV2ZW50LCB0aGlzLmFjdGl2ZU1lbnUuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zIClcblx0XHRcdFx0WyAhdGhpcy5hY3RpdmUgPyBcImZpcnN0XCIgOiBcImxhc3RcIiBdKCkgKTtcblx0XHR9XG5cdH0sXG5cblx0cHJldmlvdXNQYWdlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIGl0ZW0sIGJhc2UsIGhlaWdodDtcblx0XHRpZiAoICF0aGlzLmFjdGl2ZSApIHtcblx0XHRcdHRoaXMubmV4dCggZXZlbnQgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKCB0aGlzLmlzRmlyc3RJdGVtKCkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICggdGhpcy5faGFzU2Nyb2xsKCkgKSB7XG5cdFx0XHRiYXNlID0gdGhpcy5hY3RpdmUub2Zmc2V0KCkudG9wO1xuXHRcdFx0aGVpZ2h0ID0gdGhpcy5lbGVtZW50LmhlaWdodCgpO1xuXHRcdFx0dGhpcy5hY3RpdmUucHJldkFsbCggXCIudWktbWVudS1pdGVtXCIgKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpdGVtID0gJCggdGhpcyApO1xuXHRcdFx0XHRyZXR1cm4gaXRlbS5vZmZzZXQoKS50b3AgLSBiYXNlICsgaGVpZ2h0ID4gMDtcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLmZvY3VzKCBldmVudCwgaXRlbSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmZvY3VzKCBldmVudCwgdGhpcy5hY3RpdmVNZW51LmZpbmQoIHRoaXMub3B0aW9ucy5pdGVtcyApLmZpcnN0KCkgKTtcblx0XHR9XG5cdH0sXG5cblx0X2hhc1Njcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpIDwgdGhpcy5lbGVtZW50LnByb3AoIFwic2Nyb2xsSGVpZ2h0XCIgKTtcblx0fSxcblxuXHRzZWxlY3Q6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHQvLyBUT0RPOiBJdCBzaG91bGQgbmV2ZXIgYmUgcG9zc2libGUgdG8gbm90IGhhdmUgYW4gYWN0aXZlIGl0ZW0gYXQgdGhpc1xuXHRcdC8vIHBvaW50LCBidXQgdGhlIHRlc3RzIGRvbid0IHRyaWdnZXIgbW91c2VlbnRlciBiZWZvcmUgY2xpY2suXG5cdFx0dGhpcy5hY3RpdmUgPSB0aGlzLmFjdGl2ZSB8fCAkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBcIi51aS1tZW51LWl0ZW1cIiApO1xuXHRcdHZhciB1aSA9IHsgaXRlbTogdGhpcy5hY3RpdmUgfTtcblx0XHRpZiAoICF0aGlzLmFjdGl2ZS5oYXMoIFwiLnVpLW1lbnVcIiApLmxlbmd0aCApIHtcblx0XHRcdHRoaXMuY29sbGFwc2VBbGwoIGV2ZW50LCB0cnVlICk7XG5cdFx0fVxuXHRcdHRoaXMuX3RyaWdnZXIoIFwic2VsZWN0XCIsIGV2ZW50LCB1aSApO1xuXHR9LFxuXG5cdF9maWx0ZXJNZW51SXRlbXM6IGZ1bmN0aW9uKGNoYXJhY3Rlcikge1xuXHRcdHZhciBlc2NhcGVkQ2hhcmFjdGVyID0gY2hhcmFjdGVyLnJlcGxhY2UoIC9bXFwtXFxbXFxde30oKSorPy4sXFxcXFxcXiR8I1xcc10vZywgXCJcXFxcJCZcIiApLFxuXHRcdFx0cmVnZXggPSBuZXcgUmVnRXhwKCBcIl5cIiArIGVzY2FwZWRDaGFyYWN0ZXIsIFwiaVwiICk7XG5cblx0XHRyZXR1cm4gdGhpcy5hY3RpdmVNZW51XG5cdFx0XHQuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zIClcblxuXHRcdFx0Ly8gT25seSBtYXRjaCBvbiBpdGVtcywgbm90IGRpdmlkZXJzIG9yIG90aGVyIGNvbnRlbnQgKCMxMDU3MSlcblx0XHRcdC5maWx0ZXIoIFwiLnVpLW1lbnUtaXRlbVwiIClcblx0XHRcdC5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiByZWdleC50ZXN0KCAkLnRyaW0oICQoIHRoaXMgKS50ZXh0KCkgKSApO1xuXHRcdFx0fSk7XG5cdH1cbn0pO1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIEF1dG9jb21wbGV0ZSAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2F1dG9jb21wbGV0ZS9cbiAqL1xuXG5cbiQud2lkZ2V0KCBcInVpLmF1dG9jb21wbGV0ZVwiLCB7XG5cdHZlcnNpb246IFwiMS4xMS4zXCIsXG5cdGRlZmF1bHRFbGVtZW50OiBcIjxpbnB1dD5cIixcblx0b3B0aW9uczoge1xuXHRcdGFwcGVuZFRvOiBudWxsLFxuXHRcdGF1dG9Gb2N1czogZmFsc2UsXG5cdFx0ZGVsYXk6IDMwMCxcblx0XHRtaW5MZW5ndGg6IDEsXG5cdFx0cG9zaXRpb246IHtcblx0XHRcdG15OiBcImxlZnQgdG9wXCIsXG5cdFx0XHRhdDogXCJsZWZ0IGJvdHRvbVwiLFxuXHRcdFx0Y29sbGlzaW9uOiBcIm5vbmVcIlxuXHRcdH0sXG5cdFx0c291cmNlOiBudWxsLFxuXG5cdFx0Ly8gY2FsbGJhY2tzXG5cdFx0Y2hhbmdlOiBudWxsLFxuXHRcdGNsb3NlOiBudWxsLFxuXHRcdGZvY3VzOiBudWxsLFxuXHRcdG9wZW46IG51bGwsXG5cdFx0cmVzcG9uc2U6IG51bGwsXG5cdFx0c2VhcmNoOiBudWxsLFxuXHRcdHNlbGVjdDogbnVsbFxuXHR9LFxuXG5cdHJlcXVlc3RJbmRleDogMCxcblx0cGVuZGluZzogMCxcblxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcblx0XHQvLyBTb21lIGJyb3dzZXJzIG9ubHkgcmVwZWF0IGtleWRvd24gZXZlbnRzLCBub3Qga2V5cHJlc3MgZXZlbnRzLFxuXHRcdC8vIHNvIHdlIHVzZSB0aGUgc3VwcHJlc3NLZXlQcmVzcyBmbGFnIHRvIGRldGVybWluZSBpZiB3ZSd2ZSBhbHJlYWR5XG5cdFx0Ly8gaGFuZGxlZCB0aGUga2V5ZG93biBldmVudC4gIzcyNjlcblx0XHQvLyBVbmZvcnR1bmF0ZWx5IHRoZSBjb2RlIGZvciAmIGluIGtleXByZXNzIGlzIHRoZSBzYW1lIGFzIHRoZSB1cCBhcnJvdyxcblx0XHQvLyBzbyB3ZSB1c2UgdGhlIHN1cHByZXNzS2V5UHJlc3NSZXBlYXQgZmxhZyB0byBhdm9pZCBoYW5kbGluZyBrZXlwcmVzc1xuXHRcdC8vIGV2ZW50cyB3aGVuIHdlIGtub3cgdGhlIGtleWRvd24gZXZlbnQgd2FzIHVzZWQgdG8gbW9kaWZ5IHRoZVxuXHRcdC8vIHNlYXJjaCB0ZXJtLiAjNzc5OVxuXHRcdHZhciBzdXBwcmVzc0tleVByZXNzLCBzdXBwcmVzc0tleVByZXNzUmVwZWF0LCBzdXBwcmVzc0lucHV0LFxuXHRcdFx0bm9kZU5hbWUgPSB0aGlzLmVsZW1lbnRbIDAgXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0aXNUZXh0YXJlYSA9IG5vZGVOYW1lID09PSBcInRleHRhcmVhXCIsXG5cdFx0XHRpc0lucHV0ID0gbm9kZU5hbWUgPT09IFwiaW5wdXRcIjtcblxuXHRcdHRoaXMuaXNNdWx0aUxpbmUgPVxuXHRcdFx0Ly8gVGV4dGFyZWFzIGFyZSBhbHdheXMgbXVsdGktbGluZVxuXHRcdFx0aXNUZXh0YXJlYSA/IHRydWUgOlxuXHRcdFx0Ly8gSW5wdXRzIGFyZSBhbHdheXMgc2luZ2xlLWxpbmUsIGV2ZW4gaWYgaW5zaWRlIGEgY29udGVudEVkaXRhYmxlIGVsZW1lbnRcblx0XHRcdC8vIElFIGFsc28gdHJlYXRzIGlucHV0cyBhcyBjb250ZW50RWRpdGFibGVcblx0XHRcdGlzSW5wdXQgPyBmYWxzZSA6XG5cdFx0XHQvLyBBbGwgb3RoZXIgZWxlbWVudCB0eXBlcyBhcmUgZGV0ZXJtaW5lZCBieSB3aGV0aGVyIG9yIG5vdCB0aGV5J3JlIGNvbnRlbnRFZGl0YWJsZVxuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiaXNDb250ZW50RWRpdGFibGVcIiApO1xuXG5cdFx0dGhpcy52YWx1ZU1ldGhvZCA9IHRoaXMuZWxlbWVudFsgaXNUZXh0YXJlYSB8fCBpc0lucHV0ID8gXCJ2YWxcIiA6IFwidGV4dFwiIF07XG5cdFx0dGhpcy5pc05ld01lbnUgPSB0cnVlO1xuXG5cdFx0dGhpcy5lbGVtZW50XG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktYXV0b2NvbXBsZXRlLWlucHV0XCIgKVxuXHRcdFx0LmF0dHIoIFwiYXV0b2NvbXBsZXRlXCIsIFwib2ZmXCIgKTtcblxuXHRcdHRoaXMuX29uKCB0aGlzLmVsZW1lbnQsIHtcblx0XHRcdGtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0aWYgKCB0aGlzLmVsZW1lbnQucHJvcCggXCJyZWFkT25seVwiICkgKSB7XG5cdFx0XHRcdFx0c3VwcHJlc3NLZXlQcmVzcyA9IHRydWU7XG5cdFx0XHRcdFx0c3VwcHJlc3NJbnB1dCA9IHRydWU7XG5cdFx0XHRcdFx0c3VwcHJlc3NLZXlQcmVzc1JlcGVhdCA9IHRydWU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0c3VwcHJlc3NLZXlQcmVzcyA9IGZhbHNlO1xuXHRcdFx0XHRzdXBwcmVzc0lucHV0ID0gZmFsc2U7XG5cdFx0XHRcdHN1cHByZXNzS2V5UHJlc3NSZXBlYXQgPSBmYWxzZTtcblx0XHRcdFx0dmFyIGtleUNvZGUgPSAkLnVpLmtleUNvZGU7XG5cdFx0XHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XG5cdFx0XHRcdGNhc2Uga2V5Q29kZS5QQUdFX1VQOlxuXHRcdFx0XHRcdHN1cHByZXNzS2V5UHJlc3MgPSB0cnVlO1xuXHRcdFx0XHRcdHRoaXMuX21vdmUoIFwicHJldmlvdXNQYWdlXCIsIGV2ZW50ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2Uga2V5Q29kZS5QQUdFX0RPV046XG5cdFx0XHRcdFx0c3VwcHJlc3NLZXlQcmVzcyA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5fbW92ZSggXCJuZXh0UGFnZVwiLCBldmVudCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIGtleUNvZGUuVVA6XG5cdFx0XHRcdFx0c3VwcHJlc3NLZXlQcmVzcyA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5fa2V5RXZlbnQoIFwicHJldmlvdXNcIiwgZXZlbnQgKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBrZXlDb2RlLkRPV046XG5cdFx0XHRcdFx0c3VwcHJlc3NLZXlQcmVzcyA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5fa2V5RXZlbnQoIFwibmV4dFwiLCBldmVudCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIGtleUNvZGUuRU5URVI6XG5cdFx0XHRcdFx0Ly8gd2hlbiBtZW51IGlzIG9wZW4gYW5kIGhhcyBmb2N1c1xuXHRcdFx0XHRcdGlmICggdGhpcy5tZW51LmFjdGl2ZSApIHtcblx0XHRcdFx0XHRcdC8vICM2MDU1IC0gT3BlcmEgc3RpbGwgYWxsb3dzIHRoZSBrZXlwcmVzcyB0byBvY2N1clxuXHRcdFx0XHRcdFx0Ly8gd2hpY2ggY2F1c2VzIGZvcm1zIHRvIHN1Ym1pdFxuXHRcdFx0XHRcdFx0c3VwcHJlc3NLZXlQcmVzcyA9IHRydWU7XG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0dGhpcy5tZW51LnNlbGVjdCggZXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2Uga2V5Q29kZS5UQUI6XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm1lbnUuYWN0aXZlICkge1xuXHRcdFx0XHRcdFx0dGhpcy5tZW51LnNlbGVjdCggZXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2Uga2V5Q29kZS5FU0NBUEU6XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm1lbnUuZWxlbWVudC5pcyggXCI6dmlzaWJsZVwiICkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICF0aGlzLmlzTXVsdGlMaW5lICkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl92YWx1ZSggdGhpcy50ZXJtICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCBldmVudCApO1xuXHRcdFx0XHRcdFx0Ly8gRGlmZmVyZW50IGJyb3dzZXJzIGhhdmUgZGlmZmVyZW50IGRlZmF1bHQgYmVoYXZpb3IgZm9yIGVzY2FwZVxuXHRcdFx0XHRcdFx0Ly8gU2luZ2xlIHByZXNzIGNhbiBtZWFuIHVuZG8gb3IgY2xlYXJcblx0XHRcdFx0XHRcdC8vIERvdWJsZSBwcmVzcyBpbiBJRSBtZWFucyBjbGVhciB0aGUgd2hvbGUgZm9ybVxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0c3VwcHJlc3NLZXlQcmVzc1JlcGVhdCA9IHRydWU7XG5cdFx0XHRcdFx0Ly8gc2VhcmNoIHRpbWVvdXQgc2hvdWxkIGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIGlucHV0IHZhbHVlIGlzIGNoYW5nZWRcblx0XHRcdFx0XHR0aGlzLl9zZWFyY2hUaW1lb3V0KCBldmVudCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0a2V5cHJlc3M6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0aWYgKCBzdXBwcmVzc0tleVByZXNzICkge1xuXHRcdFx0XHRcdHN1cHByZXNzS2V5UHJlc3MgPSBmYWxzZTtcblx0XHRcdFx0XHRpZiAoICF0aGlzLmlzTXVsdGlMaW5lIHx8IHRoaXMubWVudS5lbGVtZW50LmlzKCBcIjp2aXNpYmxlXCIgKSApIHtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIHN1cHByZXNzS2V5UHJlc3NSZXBlYXQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gcmVwbGljYXRlIHNvbWUga2V5IGhhbmRsZXJzIHRvIGFsbG93IHRoZW0gdG8gcmVwZWF0IGluIEZpcmVmb3ggYW5kIE9wZXJhXG5cdFx0XHRcdHZhciBrZXlDb2RlID0gJC51aS5rZXlDb2RlO1xuXHRcdFx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xuXHRcdFx0XHRjYXNlIGtleUNvZGUuUEFHRV9VUDpcblx0XHRcdFx0XHR0aGlzLl9tb3ZlKCBcInByZXZpb3VzUGFnZVwiLCBldmVudCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIGtleUNvZGUuUEFHRV9ET1dOOlxuXHRcdFx0XHRcdHRoaXMuX21vdmUoIFwibmV4dFBhZ2VcIiwgZXZlbnQgKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBrZXlDb2RlLlVQOlxuXHRcdFx0XHRcdHRoaXMuX2tleUV2ZW50KCBcInByZXZpb3VzXCIsIGV2ZW50ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2Uga2V5Q29kZS5ET1dOOlxuXHRcdFx0XHRcdHRoaXMuX2tleUV2ZW50KCBcIm5leHRcIiwgZXZlbnQgKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGlucHV0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdGlmICggc3VwcHJlc3NJbnB1dCApIHtcblx0XHRcdFx0XHRzdXBwcmVzc0lucHV0ID0gZmFsc2U7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5fc2VhcmNoVGltZW91dCggZXZlbnQgKTtcblx0XHRcdH0sXG5cdFx0XHRmb2N1czogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDtcblx0XHRcdFx0dGhpcy5wcmV2aW91cyA9IHRoaXMuX3ZhbHVlKCk7XG5cdFx0XHR9LFxuXHRcdFx0Ymx1cjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRpZiAoIHRoaXMuY2FuY2VsQmx1ciApIHtcblx0XHRcdFx0XHRkZWxldGUgdGhpcy5jYW5jZWxCbHVyO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5zZWFyY2hpbmcgKTtcblx0XHRcdFx0dGhpcy5jbG9zZSggZXZlbnQgKTtcblx0XHRcdFx0dGhpcy5fY2hhbmdlKCBldmVudCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5faW5pdFNvdXJjZSgpO1xuXHRcdHRoaXMubWVudSA9ICQoIFwiPHVsPlwiIClcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1hdXRvY29tcGxldGUgdWktZnJvbnRcIiApXG5cdFx0XHQuYXBwZW5kVG8oIHRoaXMuX2FwcGVuZFRvKCkgKVxuXHRcdFx0Lm1lbnUoe1xuXHRcdFx0XHQvLyBkaXNhYmxlIEFSSUEgc3VwcG9ydCwgdGhlIGxpdmUgcmVnaW9uIHRha2VzIGNhcmUgb2YgdGhhdFxuXHRcdFx0XHRyb2xlOiBudWxsXG5cdFx0XHR9KVxuXHRcdFx0LmhpZGUoKVxuXHRcdFx0Lm1lbnUoIFwiaW5zdGFuY2VcIiApO1xuXG5cdFx0dGhpcy5fb24oIHRoaXMubWVudS5lbGVtZW50LCB7XG5cdFx0XHRtb3VzZWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0Ly8gcHJldmVudCBtb3ZpbmcgZm9jdXMgb3V0IG9mIHRoZSB0ZXh0IGZpZWxkXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0Ly8gSUUgZG9lc24ndCBwcmV2ZW50IG1vdmluZyBmb2N1cyBldmVuIHdpdGggZXZlbnQucHJldmVudERlZmF1bHQoKVxuXHRcdFx0XHQvLyBzbyB3ZSBzZXQgYSBmbGFnIHRvIGtub3cgd2hlbiB3ZSBzaG91bGQgaWdub3JlIHRoZSBibHVyIGV2ZW50XG5cdFx0XHRcdHRoaXMuY2FuY2VsQmx1ciA9IHRydWU7XG5cdFx0XHRcdHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmNhbmNlbEJsdXI7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vIGNsaWNraW5nIG9uIHRoZSBzY3JvbGxiYXIgY2F1c2VzIGZvY3VzIHRvIHNoaWZ0IHRvIHRoZSBib2R5XG5cdFx0XHRcdC8vIGJ1dCB3ZSBjYW4ndCBkZXRlY3QgYSBtb3VzZXVwIG9yIGEgY2xpY2sgaW1tZWRpYXRlbHkgYWZ0ZXJ3YXJkXG5cdFx0XHRcdC8vIHNvIHdlIGhhdmUgdG8gdHJhY2sgdGhlIG5leHQgbW91c2Vkb3duIGFuZCBjbG9zZSB0aGUgbWVudSBpZlxuXHRcdFx0XHQvLyB0aGUgdXNlciBjbGlja3Mgc29tZXdoZXJlIG91dHNpZGUgb2YgdGhlIGF1dG9jb21wbGV0ZVxuXHRcdFx0XHR2YXIgbWVudUVsZW1lbnQgPSB0aGlzLm1lbnUuZWxlbWVudFsgMCBdO1xuXHRcdFx0XHRpZiAoICEkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBcIi51aS1tZW51LWl0ZW1cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHR0aGlzLl9kZWxheShmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHZhciB0aGF0ID0gdGhpcztcblx0XHRcdFx0XHRcdHRoaXMuZG9jdW1lbnQub25lKCBcIm1vdXNlZG93blwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggZXZlbnQudGFyZ2V0ICE9PSB0aGF0LmVsZW1lbnRbIDAgXSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnQudGFyZ2V0ICE9PSBtZW51RWxlbWVudCAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0ISQuY29udGFpbnMoIG1lbnVFbGVtZW50LCBldmVudC50YXJnZXQgKSApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGF0LmNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0bWVudWZvY3VzOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHR2YXIgbGFiZWwsIGl0ZW07XG5cdFx0XHRcdC8vIHN1cHBvcnQ6IEZpcmVmb3hcblx0XHRcdFx0Ly8gUHJldmVudCBhY2NpZGVudGFsIGFjdGl2YXRpb24gb2YgbWVudSBpdGVtcyBpbiBGaXJlZm94ICgjNzAyNCAjOTExOClcblx0XHRcdFx0aWYgKCB0aGlzLmlzTmV3TWVudSApIHtcblx0XHRcdFx0XHR0aGlzLmlzTmV3TWVudSA9IGZhbHNlO1xuXHRcdFx0XHRcdGlmICggZXZlbnQub3JpZ2luYWxFdmVudCAmJiAvXm1vdXNlLy50ZXN0KCBldmVudC5vcmlnaW5hbEV2ZW50LnR5cGUgKSApIHtcblx0XHRcdFx0XHRcdHRoaXMubWVudS5ibHVyKCk7XG5cblx0XHRcdFx0XHRcdHRoaXMuZG9jdW1lbnQub25lKCBcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0JCggZXZlbnQudGFyZ2V0ICkudHJpZ2dlciggZXZlbnQub3JpZ2luYWxFdmVudCApO1xuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpdGVtID0gdWkuaXRlbS5kYXRhKCBcInVpLWF1dG9jb21wbGV0ZS1pdGVtXCIgKTtcblx0XHRcdFx0aWYgKCBmYWxzZSAhPT0gdGhpcy5fdHJpZ2dlciggXCJmb2N1c1wiLCBldmVudCwgeyBpdGVtOiBpdGVtIH0gKSApIHtcblx0XHRcdFx0XHQvLyB1c2UgdmFsdWUgdG8gbWF0Y2ggd2hhdCB3aWxsIGVuZCB1cCBpbiB0aGUgaW5wdXQsIGlmIGl0IHdhcyBhIGtleSBldmVudFxuXHRcdFx0XHRcdGlmICggZXZlbnQub3JpZ2luYWxFdmVudCAmJiAvXmtleS8udGVzdCggZXZlbnQub3JpZ2luYWxFdmVudC50eXBlICkgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl92YWx1ZSggaXRlbS52YWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFubm91bmNlIHRoZSB2YWx1ZSBpbiB0aGUgbGl2ZVJlZ2lvblxuXHRcdFx0XHRsYWJlbCA9IHVpLml0ZW0uYXR0ciggXCJhcmlhLWxhYmVsXCIgKSB8fCBpdGVtLnZhbHVlO1xuXHRcdFx0XHRpZiAoIGxhYmVsICYmICQudHJpbSggbGFiZWwgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0dGhpcy5saXZlUmVnaW9uLmNoaWxkcmVuKCkuaGlkZSgpO1xuXHRcdFx0XHRcdCQoIFwiPGRpdj5cIiApLnRleHQoIGxhYmVsICkuYXBwZW5kVG8oIHRoaXMubGl2ZVJlZ2lvbiApO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0bWVudXNlbGVjdDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0dmFyIGl0ZW0gPSB1aS5pdGVtLmRhdGEoIFwidWktYXV0b2NvbXBsZXRlLWl0ZW1cIiApLFxuXHRcdFx0XHRcdHByZXZpb3VzID0gdGhpcy5wcmV2aW91cztcblxuXHRcdFx0XHQvLyBvbmx5IHRyaWdnZXIgd2hlbiBmb2N1cyB3YXMgbG9zdCAoY2xpY2sgb24gbWVudSlcblx0XHRcdFx0aWYgKCB0aGlzLmVsZW1lbnRbIDAgXSAhPT0gdGhpcy5kb2N1bWVudFsgMCBdLmFjdGl2ZUVsZW1lbnQgKSB7XG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50LmZvY3VzKCk7XG5cdFx0XHRcdFx0dGhpcy5wcmV2aW91cyA9IHByZXZpb3VzO1xuXHRcdFx0XHRcdC8vICM2MTA5IC0gSUUgdHJpZ2dlcnMgdHdvIGZvY3VzIGV2ZW50cyBhbmQgdGhlIHNlY29uZFxuXHRcdFx0XHRcdC8vIGlzIGFzeW5jaHJvbm91cywgc28gd2UgbmVlZCB0byByZXNldCB0aGUgcHJldmlvdXNcblx0XHRcdFx0XHQvLyB0ZXJtIHN5bmNocm9ub3VzbHkgYW5kIGFzeW5jaHJvbm91c2x5IDotKFxuXHRcdFx0XHRcdHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dGhpcy5wcmV2aW91cyA9IHByZXZpb3VzO1xuXHRcdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEl0ZW0gPSBpdGVtO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBmYWxzZSAhPT0gdGhpcy5fdHJpZ2dlciggXCJzZWxlY3RcIiwgZXZlbnQsIHsgaXRlbTogaXRlbSB9ICkgKSB7XG5cdFx0XHRcdFx0dGhpcy5fdmFsdWUoIGl0ZW0udmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyByZXNldCB0aGUgdGVybSBhZnRlciB0aGUgc2VsZWN0IGV2ZW50XG5cdFx0XHRcdC8vIHRoaXMgYWxsb3dzIGN1c3RvbSBzZWxlY3QgaGFuZGxpbmcgdG8gd29yayBwcm9wZXJseVxuXHRcdFx0XHR0aGlzLnRlcm0gPSB0aGlzLl92YWx1ZSgpO1xuXG5cdFx0XHRcdHRoaXMuY2xvc2UoIGV2ZW50ICk7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMubGl2ZVJlZ2lvbiA9ICQoIFwiPHNwYW4+XCIsIHtcblx0XHRcdFx0cm9sZTogXCJzdGF0dXNcIixcblx0XHRcdFx0XCJhcmlhLWxpdmVcIjogXCJhc3NlcnRpdmVcIixcblx0XHRcdFx0XCJhcmlhLXJlbGV2YW50XCI6IFwiYWRkaXRpb25zXCJcblx0XHRcdH0pXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlXCIgKVxuXHRcdFx0LmFwcGVuZFRvKCB0aGlzLmRvY3VtZW50WyAwIF0uYm9keSApO1xuXG5cdFx0Ly8gdHVybmluZyBvZmYgYXV0b2NvbXBsZXRlIHByZXZlbnRzIHRoZSBicm93c2VyIGZyb20gcmVtZW1iZXJpbmcgdGhlXG5cdFx0Ly8gdmFsdWUgd2hlbiBuYXZpZ2F0aW5nIHRocm91Z2ggaGlzdG9yeSwgc28gd2UgcmUtZW5hYmxlIGF1dG9jb21wbGV0ZVxuXHRcdC8vIGlmIHRoZSBwYWdlIGlzIHVubG9hZGVkIGJlZm9yZSB0aGUgd2lkZ2V0IGlzIGRlc3Ryb3llZC4gIzc3OTBcblx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHtcblx0XHRcdGJlZm9yZXVubG9hZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCBcImF1dG9jb21wbGV0ZVwiICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuXHRcdGNsZWFyVGltZW91dCggdGhpcy5zZWFyY2hpbmcgKTtcblx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1hdXRvY29tcGxldGUtaW5wdXRcIiApXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJhdXRvY29tcGxldGVcIiApO1xuXHRcdHRoaXMubWVudS5lbGVtZW50LnJlbW92ZSgpO1xuXHRcdHRoaXMubGl2ZVJlZ2lvbi5yZW1vdmUoKTtcblx0fSxcblxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApO1xuXHRcdGlmICgga2V5ID09PSBcInNvdXJjZVwiICkge1xuXHRcdFx0dGhpcy5faW5pdFNvdXJjZSgpO1xuXHRcdH1cblx0XHRpZiAoIGtleSA9PT0gXCJhcHBlbmRUb1wiICkge1xuXHRcdFx0dGhpcy5tZW51LmVsZW1lbnQuYXBwZW5kVG8oIHRoaXMuX2FwcGVuZFRvKCkgKTtcblx0XHR9XG5cdFx0aWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiAmJiB2YWx1ZSAmJiB0aGlzLnhociApIHtcblx0XHRcdHRoaXMueGhyLmFib3J0KCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9hcHBlbmRUbzogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsZW1lbnQgPSB0aGlzLm9wdGlvbnMuYXBwZW5kVG87XG5cblx0XHRpZiAoIGVsZW1lbnQgKSB7XG5cdFx0XHRlbGVtZW50ID0gZWxlbWVudC5qcXVlcnkgfHwgZWxlbWVudC5ub2RlVHlwZSA/XG5cdFx0XHRcdCQoIGVsZW1lbnQgKSA6XG5cdFx0XHRcdHRoaXMuZG9jdW1lbnQuZmluZCggZWxlbWVudCApLmVxKCAwICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhZWxlbWVudCB8fCAhZWxlbWVudFsgMCBdICkge1xuXHRcdFx0ZWxlbWVudCA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1mcm9udFwiICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhZWxlbWVudC5sZW5ndGggKSB7XG5cdFx0XHRlbGVtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdLmJvZHk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH0sXG5cblx0X2luaXRTb3VyY2U6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBhcnJheSwgdXJsLFxuXHRcdFx0dGhhdCA9IHRoaXM7XG5cdFx0aWYgKCAkLmlzQXJyYXkoIHRoaXMub3B0aW9ucy5zb3VyY2UgKSApIHtcblx0XHRcdGFycmF5ID0gdGhpcy5vcHRpb25zLnNvdXJjZTtcblx0XHRcdHRoaXMuc291cmNlID0gZnVuY3Rpb24oIHJlcXVlc3QsIHJlc3BvbnNlICkge1xuXHRcdFx0XHRyZXNwb25zZSggJC51aS5hdXRvY29tcGxldGUuZmlsdGVyKCBhcnJheSwgcmVxdWVzdC50ZXJtICkgKTtcblx0XHRcdH07XG5cdFx0fSBlbHNlIGlmICggdHlwZW9mIHRoaXMub3B0aW9ucy5zb3VyY2UgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHR1cmwgPSB0aGlzLm9wdGlvbnMuc291cmNlO1xuXHRcdFx0dGhpcy5zb3VyY2UgPSBmdW5jdGlvbiggcmVxdWVzdCwgcmVzcG9uc2UgKSB7XG5cdFx0XHRcdGlmICggdGhhdC54aHIgKSB7XG5cdFx0XHRcdFx0dGhhdC54aHIuYWJvcnQoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGF0LnhociA9ICQuYWpheCh7XG5cdFx0XHRcdFx0dXJsOiB1cmwsXG5cdFx0XHRcdFx0ZGF0YTogcmVxdWVzdCxcblx0XHRcdFx0XHRkYXRhVHlwZTogXCJqc29uXCIsXG5cdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZSggZGF0YSApO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UoW10pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnNvdXJjZSA9IHRoaXMub3B0aW9ucy5zb3VyY2U7XG5cdFx0fVxuXHR9LFxuXG5cdF9zZWFyY2hUaW1lb3V0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLnNlYXJjaGluZyApO1xuXHRcdHRoaXMuc2VhcmNoaW5nID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIFNlYXJjaCBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQsIG9yIGlmIHRoZSB1c2VyIHJldHlwZXMgdGhlIHNhbWUgdmFsdWUgKHNlZSAjNzQzNClcblx0XHRcdHZhciBlcXVhbFZhbHVlcyA9IHRoaXMudGVybSA9PT0gdGhpcy5fdmFsdWUoKSxcblx0XHRcdFx0bWVudVZpc2libGUgPSB0aGlzLm1lbnUuZWxlbWVudC5pcyggXCI6dmlzaWJsZVwiICksXG5cdFx0XHRcdG1vZGlmaWVyS2V5ID0gZXZlbnQuYWx0S2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleTtcblxuXHRcdFx0aWYgKCAhZXF1YWxWYWx1ZXMgfHwgKCBlcXVhbFZhbHVlcyAmJiAhbWVudVZpc2libGUgJiYgIW1vZGlmaWVyS2V5ICkgKSB7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDtcblx0XHRcdFx0dGhpcy5zZWFyY2goIG51bGwsIGV2ZW50ICk7XG5cdFx0XHR9XG5cdFx0fSwgdGhpcy5vcHRpb25zLmRlbGF5ICk7XG5cdH0sXG5cblx0c2VhcmNoOiBmdW5jdGlvbiggdmFsdWUsIGV2ZW50ICkge1xuXHRcdHZhbHVlID0gdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogdGhpcy5fdmFsdWUoKTtcblxuXHRcdC8vIGFsd2F5cyBzYXZlIHRoZSBhY3R1YWwgdmFsdWUsIG5vdCB0aGUgb25lIHBhc3NlZCBhcyBhbiBhcmd1bWVudFxuXHRcdHRoaXMudGVybSA9IHRoaXMuX3ZhbHVlKCk7XG5cblx0XHRpZiAoIHZhbHVlLmxlbmd0aCA8IHRoaXMub3B0aW9ucy5taW5MZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jbG9zZSggZXZlbnQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwic2VhcmNoXCIsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLl9zZWFyY2goIHZhbHVlICk7XG5cdH0sXG5cblx0X3NlYXJjaDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHRoaXMucGVuZGluZysrO1xuXHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS1hdXRvY29tcGxldGUtbG9hZGluZ1wiICk7XG5cdFx0dGhpcy5jYW5jZWxTZWFyY2ggPSBmYWxzZTtcblxuXHRcdHRoaXMuc291cmNlKCB7IHRlcm06IHZhbHVlIH0sIHRoaXMuX3Jlc3BvbnNlKCkgKTtcblx0fSxcblxuXHRfcmVzcG9uc2U6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbmRleCA9ICsrdGhpcy5yZXF1ZXN0SW5kZXg7XG5cblx0XHRyZXR1cm4gJC5wcm94eShmdW5jdGlvbiggY29udGVudCApIHtcblx0XHRcdGlmICggaW5kZXggPT09IHRoaXMucmVxdWVzdEluZGV4ICkge1xuXHRcdFx0XHR0aGlzLl9fcmVzcG9uc2UoIGNvbnRlbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5wZW5kaW5nLS07XG5cdFx0XHRpZiAoICF0aGlzLnBlbmRpbmcgKSB7XG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1hdXRvY29tcGxldGUtbG9hZGluZ1wiICk7XG5cdFx0XHR9XG5cdFx0fSwgdGhpcyApO1xuXHR9LFxuXG5cdF9fcmVzcG9uc2U6IGZ1bmN0aW9uKCBjb250ZW50ICkge1xuXHRcdGlmICggY29udGVudCApIHtcblx0XHRcdGNvbnRlbnQgPSB0aGlzLl9ub3JtYWxpemUoIGNvbnRlbnQgKTtcblx0XHR9XG5cdFx0dGhpcy5fdHJpZ2dlciggXCJyZXNwb25zZVwiLCBudWxsLCB7IGNvbnRlbnQ6IGNvbnRlbnQgfSApO1xuXHRcdGlmICggIXRoaXMub3B0aW9ucy5kaXNhYmxlZCAmJiBjb250ZW50ICYmIGNvbnRlbnQubGVuZ3RoICYmICF0aGlzLmNhbmNlbFNlYXJjaCApIHtcblx0XHRcdHRoaXMuX3N1Z2dlc3QoIGNvbnRlbnQgKTtcblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwib3BlblwiICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHVzZSAuX2Nsb3NlKCkgaW5zdGVhZCBvZiAuY2xvc2UoKSBzbyB3ZSBkb24ndCBjYW5jZWwgZnV0dXJlIHNlYXJjaGVzXG5cdFx0XHR0aGlzLl9jbG9zZSgpO1xuXHRcdH1cblx0fSxcblxuXHRjbG9zZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHRoaXMuY2FuY2VsU2VhcmNoID0gdHJ1ZTtcblx0XHR0aGlzLl9jbG9zZSggZXZlbnQgKTtcblx0fSxcblxuXHRfY2xvc2U6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoIHRoaXMubWVudS5lbGVtZW50LmlzKCBcIjp2aXNpYmxlXCIgKSApIHtcblx0XHRcdHRoaXMubWVudS5lbGVtZW50LmhpZGUoKTtcblx0XHRcdHRoaXMubWVudS5ibHVyKCk7XG5cdFx0XHR0aGlzLmlzTmV3TWVudSA9IHRydWU7XG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImNsb3NlXCIsIGV2ZW50ICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9jaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoIHRoaXMucHJldmlvdXMgIT09IHRoaXMuX3ZhbHVlKCkgKSB7XG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImNoYW5nZVwiLCBldmVudCwgeyBpdGVtOiB0aGlzLnNlbGVjdGVkSXRlbSB9ICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9ub3JtYWxpemU6IGZ1bmN0aW9uKCBpdGVtcyApIHtcblx0XHQvLyBhc3N1bWUgYWxsIGl0ZW1zIGhhdmUgdGhlIHJpZ2h0IGZvcm1hdCB3aGVuIHRoZSBmaXJzdCBpdGVtIGlzIGNvbXBsZXRlXG5cdFx0aWYgKCBpdGVtcy5sZW5ndGggJiYgaXRlbXNbIDAgXS5sYWJlbCAmJiBpdGVtc1sgMCBdLnZhbHVlICkge1xuXHRcdFx0cmV0dXJuIGl0ZW1zO1xuXHRcdH1cblx0XHRyZXR1cm4gJC5tYXAoIGl0ZW1zLCBmdW5jdGlvbiggaXRlbSApIHtcblx0XHRcdGlmICggdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0bGFiZWw6IGl0ZW0sXG5cdFx0XHRcdFx0dmFsdWU6IGl0ZW1cblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdHJldHVybiAkLmV4dGVuZCgge30sIGl0ZW0sIHtcblx0XHRcdFx0bGFiZWw6IGl0ZW0ubGFiZWwgfHwgaXRlbS52YWx1ZSxcblx0XHRcdFx0dmFsdWU6IGl0ZW0udmFsdWUgfHwgaXRlbS5sYWJlbFxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0sXG5cblx0X3N1Z2dlc3Q6IGZ1bmN0aW9uKCBpdGVtcyApIHtcblx0XHR2YXIgdWwgPSB0aGlzLm1lbnUuZWxlbWVudC5lbXB0eSgpO1xuXHRcdHRoaXMuX3JlbmRlck1lbnUoIHVsLCBpdGVtcyApO1xuXHRcdHRoaXMuaXNOZXdNZW51ID0gdHJ1ZTtcblx0XHR0aGlzLm1lbnUucmVmcmVzaCgpO1xuXG5cdFx0Ly8gc2l6ZSBhbmQgcG9zaXRpb24gbWVudVxuXHRcdHVsLnNob3coKTtcblx0XHR0aGlzLl9yZXNpemVNZW51KCk7XG5cdFx0dWwucG9zaXRpb24oICQuZXh0ZW5kKHtcblx0XHRcdG9mOiB0aGlzLmVsZW1lbnRcblx0XHR9LCB0aGlzLm9wdGlvbnMucG9zaXRpb24gKSApO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzICkge1xuXHRcdFx0dGhpcy5tZW51Lm5leHQoKTtcblx0XHR9XG5cdH0sXG5cblx0X3Jlc2l6ZU1lbnU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB1bCA9IHRoaXMubWVudS5lbGVtZW50O1xuXHRcdHVsLm91dGVyV2lkdGgoIE1hdGgubWF4KFxuXHRcdFx0Ly8gRmlyZWZveCB3cmFwcyBsb25nIHRleHQgKHBvc3NpYmx5IGEgcm91bmRpbmcgYnVnKVxuXHRcdFx0Ly8gc28gd2UgYWRkIDFweCB0byBhdm9pZCB0aGUgd3JhcHBpbmcgKCM3NTEzKVxuXHRcdFx0dWwud2lkdGgoIFwiXCIgKS5vdXRlcldpZHRoKCkgKyAxLFxuXHRcdFx0dGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKVxuXHRcdCkgKTtcblx0fSxcblxuXHRfcmVuZGVyTWVudTogZnVuY3Rpb24oIHVsLCBpdGVtcyApIHtcblx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cdFx0JC5lYWNoKCBpdGVtcywgZnVuY3Rpb24oIGluZGV4LCBpdGVtICkge1xuXHRcdFx0dGhhdC5fcmVuZGVySXRlbURhdGEoIHVsLCBpdGVtICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0X3JlbmRlckl0ZW1EYXRhOiBmdW5jdGlvbiggdWwsIGl0ZW0gKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlbmRlckl0ZW0oIHVsLCBpdGVtICkuZGF0YSggXCJ1aS1hdXRvY29tcGxldGUtaXRlbVwiLCBpdGVtICk7XG5cdH0sXG5cblx0X3JlbmRlckl0ZW06IGZ1bmN0aW9uKCB1bCwgaXRlbSApIHtcblx0XHRyZXR1cm4gJCggXCI8bGk+XCIgKS50ZXh0KCBpdGVtLmxhYmVsICkuYXBwZW5kVG8oIHVsICk7XG5cdH0sXG5cblx0X21vdmU6IGZ1bmN0aW9uKCBkaXJlY3Rpb24sIGV2ZW50ICkge1xuXHRcdGlmICggIXRoaXMubWVudS5lbGVtZW50LmlzKCBcIjp2aXNpYmxlXCIgKSApIHtcblx0XHRcdHRoaXMuc2VhcmNoKCBudWxsLCBldmVudCApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoIHRoaXMubWVudS5pc0ZpcnN0SXRlbSgpICYmIC9ecHJldmlvdXMvLnRlc3QoIGRpcmVjdGlvbiApIHx8XG5cdFx0XHRcdHRoaXMubWVudS5pc0xhc3RJdGVtKCkgJiYgL15uZXh0Ly50ZXN0KCBkaXJlY3Rpb24gKSApIHtcblxuXHRcdFx0aWYgKCAhdGhpcy5pc011bHRpTGluZSApIHtcblx0XHRcdFx0dGhpcy5fdmFsdWUoIHRoaXMudGVybSApO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLm1lbnUuYmx1cigpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLm1lbnVbIGRpcmVjdGlvbiBdKCBldmVudCApO1xuXHR9LFxuXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWVudS5lbGVtZW50O1xuXHR9LFxuXG5cdF92YWx1ZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudmFsdWVNZXRob2QuYXBwbHkoIHRoaXMuZWxlbWVudCwgYXJndW1lbnRzICk7XG5cdH0sXG5cblx0X2tleUV2ZW50OiBmdW5jdGlvbigga2V5RXZlbnQsIGV2ZW50ICkge1xuXHRcdGlmICggIXRoaXMuaXNNdWx0aUxpbmUgfHwgdGhpcy5tZW51LmVsZW1lbnQuaXMoIFwiOnZpc2libGVcIiApICkge1xuXHRcdFx0dGhpcy5fbW92ZSgga2V5RXZlbnQsIGV2ZW50ICk7XG5cblx0XHRcdC8vIHByZXZlbnRzIG1vdmluZyBjdXJzb3IgdG8gYmVnaW5uaW5nL2VuZCBvZiB0aGUgdGV4dCBmaWVsZCBpbiBzb21lIGJyb3dzZXJzXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fVxufSk7XG5cbiQuZXh0ZW5kKCAkLnVpLmF1dG9jb21wbGV0ZSwge1xuXHRlc2NhcGVSZWdleDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHJldHVybiB2YWx1ZS5yZXBsYWNlKCAvW1xcLVxcW1xcXXt9KCkqKz8uLFxcXFxcXF4kfCNcXHNdL2csIFwiXFxcXCQmXCIgKTtcblx0fSxcblx0ZmlsdGVyOiBmdW5jdGlvbiggYXJyYXksIHRlcm0gKSB7XG5cdFx0dmFyIG1hdGNoZXIgPSBuZXcgUmVnRXhwKCAkLnVpLmF1dG9jb21wbGV0ZS5lc2NhcGVSZWdleCggdGVybSApLCBcImlcIiApO1xuXHRcdHJldHVybiAkLmdyZXAoIGFycmF5LCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gbWF0Y2hlci50ZXN0KCB2YWx1ZS5sYWJlbCB8fCB2YWx1ZS52YWx1ZSB8fCB2YWx1ZSApO1xuXHRcdH0pO1xuXHR9XG59KTtcblxuLy8gbGl2ZSByZWdpb24gZXh0ZW5zaW9uLCBhZGRpbmcgYSBgbWVzc2FnZXNgIG9wdGlvblxuLy8gTk9URTogVGhpcyBpcyBhbiBleHBlcmltZW50YWwgQVBJLiBXZSBhcmUgc3RpbGwgaW52ZXN0aWdhdGluZ1xuLy8gYSBmdWxsIHNvbHV0aW9uIGZvciBzdHJpbmcgbWFuaXB1bGF0aW9uIGFuZCBpbnRlcm5hdGlvbmFsaXphdGlvbi5cbiQud2lkZ2V0KCBcInVpLmF1dG9jb21wbGV0ZVwiLCAkLnVpLmF1dG9jb21wbGV0ZSwge1xuXHRvcHRpb25zOiB7XG5cdFx0bWVzc2FnZXM6IHtcblx0XHRcdG5vUmVzdWx0czogXCJObyBzZWFyY2ggcmVzdWx0cy5cIixcblx0XHRcdHJlc3VsdHM6IGZ1bmN0aW9uKCBhbW91bnQgKSB7XG5cdFx0XHRcdHJldHVybiBhbW91bnQgKyAoIGFtb3VudCA+IDEgPyBcIiByZXN1bHRzIGFyZVwiIDogXCIgcmVzdWx0IGlzXCIgKSArXG5cdFx0XHRcdFx0XCIgYXZhaWxhYmxlLCB1c2UgdXAgYW5kIGRvd24gYXJyb3cga2V5cyB0byBuYXZpZ2F0ZS5cIjtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0X19yZXNwb25zZTogZnVuY3Rpb24oIGNvbnRlbnQgKSB7XG5cdFx0dmFyIG1lc3NhZ2U7XG5cdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5jYW5jZWxTZWFyY2ggKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICggY29udGVudCAmJiBjb250ZW50Lmxlbmd0aCApIHtcblx0XHRcdG1lc3NhZ2UgPSB0aGlzLm9wdGlvbnMubWVzc2FnZXMucmVzdWx0cyggY29udGVudC5sZW5ndGggKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWVzc2FnZSA9IHRoaXMub3B0aW9ucy5tZXNzYWdlcy5ub1Jlc3VsdHM7XG5cdFx0fVxuXHRcdHRoaXMubGl2ZVJlZ2lvbi5jaGlsZHJlbigpLmhpZGUoKTtcblx0XHQkKCBcIjxkaXY+XCIgKS50ZXh0KCBtZXNzYWdlICkuYXBwZW5kVG8oIHRoaXMubGl2ZVJlZ2lvbiApO1xuXHR9XG59KTtcblxudmFyIGF1dG9jb21wbGV0ZSA9ICQudWkuYXV0b2NvbXBsZXRlO1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIEJ1dHRvbiAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2J1dHRvbi9cbiAqL1xuXG5cbnZhciBsYXN0QWN0aXZlLFxuXHRiYXNlQ2xhc3NlcyA9IFwidWktYnV0dG9uIHVpLXdpZGdldCB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGxcIixcblx0dHlwZUNsYXNzZXMgPSBcInVpLWJ1dHRvbi1pY29ucy1vbmx5IHVpLWJ1dHRvbi1pY29uLW9ubHkgdWktYnV0dG9uLXRleHQtaWNvbnMgdWktYnV0dG9uLXRleHQtaWNvbi1wcmltYXJ5IHVpLWJ1dHRvbi10ZXh0LWljb24tc2Vjb25kYXJ5IHVpLWJ1dHRvbi10ZXh0LW9ubHlcIixcblx0Zm9ybVJlc2V0SGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBmb3JtID0gJCggdGhpcyApO1xuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRmb3JtLmZpbmQoIFwiOnVpLWJ1dHRvblwiICkuYnV0dG9uKCBcInJlZnJlc2hcIiApO1xuXHRcdH0sIDEgKTtcblx0fSxcblx0cmFkaW9Hcm91cCA9IGZ1bmN0aW9uKCByYWRpbyApIHtcblx0XHR2YXIgbmFtZSA9IHJhZGlvLm5hbWUsXG5cdFx0XHRmb3JtID0gcmFkaW8uZm9ybSxcblx0XHRcdHJhZGlvcyA9ICQoIFtdICk7XG5cdFx0aWYgKCBuYW1lICkge1xuXHRcdFx0bmFtZSA9IG5hbWUucmVwbGFjZSggLycvZywgXCJcXFxcJ1wiICk7XG5cdFx0XHRpZiAoIGZvcm0gKSB7XG5cdFx0XHRcdHJhZGlvcyA9ICQoIGZvcm0gKS5maW5kKCBcIltuYW1lPSdcIiArIG5hbWUgKyBcIiddW3R5cGU9cmFkaW9dXCIgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJhZGlvcyA9ICQoIFwiW25hbWU9J1wiICsgbmFtZSArIFwiJ11bdHlwZT1yYWRpb11cIiwgcmFkaW8ub3duZXJEb2N1bWVudCApXG5cdFx0XHRcdFx0LmZpbHRlcihmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiAhdGhpcy5mb3JtO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmFkaW9zO1xuXHR9O1xuXG4kLndpZGdldCggXCJ1aS5idXR0b25cIiwge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXHRkZWZhdWx0RWxlbWVudDogXCI8YnV0dG9uPlwiLFxuXHRvcHRpb25zOiB7XG5cdFx0ZGlzYWJsZWQ6IG51bGwsXG5cdFx0dGV4dDogdHJ1ZSxcblx0XHRsYWJlbDogbnVsbCxcblx0XHRpY29uczoge1xuXHRcdFx0cHJpbWFyeTogbnVsbCxcblx0XHRcdHNlY29uZGFyeTogbnVsbFxuXHRcdH1cblx0fSxcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiZm9ybVwiIClcblx0XHRcdC51bmJpbmQoIFwicmVzZXRcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UgKVxuXHRcdFx0LmJpbmQoIFwicmVzZXRcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZvcm1SZXNldEhhbmRsZXIgKTtcblxuXHRcdGlmICggdHlwZW9mIHRoaXMub3B0aW9ucy5kaXNhYmxlZCAhPT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSAhIXRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiwgdGhpcy5vcHRpb25zLmRpc2FibGVkICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fZGV0ZXJtaW5lQnV0dG9uVHlwZSgpO1xuXHRcdHRoaXMuaGFzVGl0bGUgPSAhIXRoaXMuYnV0dG9uRWxlbWVudC5hdHRyKCBcInRpdGxlXCIgKTtcblxuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHR0b2dnbGVCdXR0b24gPSB0aGlzLnR5cGUgPT09IFwiY2hlY2tib3hcIiB8fCB0aGlzLnR5cGUgPT09IFwicmFkaW9cIixcblx0XHRcdGFjdGl2ZUNsYXNzID0gIXRvZ2dsZUJ1dHRvbiA/IFwidWktc3RhdGUtYWN0aXZlXCIgOiBcIlwiO1xuXG5cdFx0aWYgKCBvcHRpb25zLmxhYmVsID09PSBudWxsICkge1xuXHRcdFx0b3B0aW9ucy5sYWJlbCA9ICh0aGlzLnR5cGUgPT09IFwiaW5wdXRcIiA/IHRoaXMuYnV0dG9uRWxlbWVudC52YWwoKSA6IHRoaXMuYnV0dG9uRWxlbWVudC5odG1sKCkpO1xuXHRcdH1cblxuXHRcdHRoaXMuX2hvdmVyYWJsZSggdGhpcy5idXR0b25FbGVtZW50ICk7XG5cblx0XHR0aGlzLmJ1dHRvbkVsZW1lbnRcblx0XHRcdC5hZGRDbGFzcyggYmFzZUNsYXNzZXMgKVxuXHRcdFx0LmF0dHIoIFwicm9sZVwiLCBcImJ1dHRvblwiIClcblx0XHRcdC5iaW5kKCBcIm1vdXNlZW50ZXJcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggdGhpcyA9PT0gbGFzdEFjdGl2ZSApIHtcblx0XHRcdFx0XHQkKCB0aGlzICkuYWRkQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5iaW5kKCBcIm1vdXNlbGVhdmVcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCQoIHRoaXMgKS5yZW1vdmVDbGFzcyggYWN0aXZlQ2xhc3MgKTtcblx0XHRcdH0pXG5cdFx0XHQuYmluZCggXCJjbGlja1wiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHQvLyBDYW4ndCB1c2UgX2ZvY3VzYWJsZSgpIGJlY2F1c2UgdGhlIGVsZW1lbnQgdGhhdCByZWNlaXZlcyBmb2N1c1xuXHRcdC8vIGFuZCB0aGUgZWxlbWVudCB0aGF0IGdldHMgdGhlIHVpLXN0YXRlLWZvY3VzIGNsYXNzIGFyZSBkaWZmZXJlbnRcblx0XHR0aGlzLl9vbih7XG5cdFx0XHRmb2N1czogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XG5cdFx0XHR9LFxuXHRcdFx0Ymx1cjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRpZiAoIHRvZ2dsZUJ1dHRvbiApIHtcblx0XHRcdHRoaXMuZWxlbWVudC5iaW5kKCBcImNoYW5nZVwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoYXQucmVmcmVzaCgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiY2hlY2tib3hcIiApIHtcblx0XHRcdHRoaXMuYnV0dG9uRWxlbWVudC5iaW5kKCBcImNsaWNrXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmICggdGhpcy50eXBlID09PSBcInJhZGlvXCIgKSB7XG5cdFx0XHR0aGlzLmJ1dHRvbkVsZW1lbnQuYmluZCggXCJjbGlja1wiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0JCggdGhpcyApLmFkZENsYXNzKCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7XG5cdFx0XHRcdHRoYXQuYnV0dG9uRWxlbWVudC5hdHRyKCBcImFyaWEtcHJlc3NlZFwiLCBcInRydWVcIiApO1xuXG5cdFx0XHRcdHZhciByYWRpbyA9IHRoYXQuZWxlbWVudFsgMCBdO1xuXHRcdFx0XHRyYWRpb0dyb3VwKCByYWRpbyApXG5cdFx0XHRcdFx0Lm5vdCggcmFkaW8gKVxuXHRcdFx0XHRcdC5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJCggdGhpcyApLmJ1dHRvbiggXCJ3aWRnZXRcIiApWyAwIF07XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKVxuXHRcdFx0XHRcdC5hdHRyKCBcImFyaWEtcHJlc3NlZFwiLCBcImZhbHNlXCIgKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmJ1dHRvbkVsZW1lbnRcblx0XHRcdFx0LmJpbmQoIFwibW91c2Vkb3duXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCQoIHRoaXMgKS5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXHRcdFx0XHRcdGxhc3RBY3RpdmUgPSB0aGlzO1xuXHRcdFx0XHRcdHRoYXQuZG9jdW1lbnQub25lKCBcIm1vdXNldXBcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRsYXN0QWN0aXZlID0gbnVsbDtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmJpbmQoIFwibW91c2V1cFwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmJpbmQoIFwia2V5ZG93blwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlNQQUNFIHx8IGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5FTlRFUiApIHtcblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdFx0Ly8gc2VlICM4NTU5LCB3ZSBiaW5kIHRvIGJsdXIgaGVyZSBpbiBjYXNlIHRoZSBidXR0b24gZWxlbWVudCBsb3Nlc1xuXHRcdFx0XHQvLyBmb2N1cyBiZXR3ZWVuIGtleWRvd24gYW5kIGtleXVwLCBpdCB3b3VsZCBiZSBsZWZ0IGluIGFuIFwiYWN0aXZlXCIgc3RhdGVcblx0XHRcdFx0LmJpbmQoIFwia2V5dXBcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UgKyBcIiBibHVyXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdGlmICggdGhpcy5idXR0b25FbGVtZW50LmlzKFwiYVwiKSApIHtcblx0XHRcdFx0dGhpcy5idXR0b25FbGVtZW50LmtleXVwKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdFx0aWYgKCBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuU1BBQ0UgKSB7XG5cdFx0XHRcdFx0XHQvLyBUT0RPIHBhc3MgdGhyb3VnaCBvcmlnaW5hbCBldmVudCBjb3JyZWN0bHkgKGp1c3QgYXMgMm5kIGFyZ3VtZW50IGRvZXNuJ3Qgd29yaylcblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5jbGljaygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5fc2V0T3B0aW9uKCBcImRpc2FibGVkXCIsIG9wdGlvbnMuZGlzYWJsZWQgKTtcblx0XHR0aGlzLl9yZXNldEJ1dHRvbigpO1xuXHR9LFxuXG5cdF9kZXRlcm1pbmVCdXR0b25UeXBlOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgYW5jZXN0b3IsIGxhYmVsU2VsZWN0b3IsIGNoZWNrZWQ7XG5cblx0XHRpZiAoIHRoaXMuZWxlbWVudC5pcyhcIlt0eXBlPWNoZWNrYm94XVwiKSApIHtcblx0XHRcdHRoaXMudHlwZSA9IFwiY2hlY2tib3hcIjtcblx0XHR9IGVsc2UgaWYgKCB0aGlzLmVsZW1lbnQuaXMoXCJbdHlwZT1yYWRpb11cIikgKSB7XG5cdFx0XHR0aGlzLnR5cGUgPSBcInJhZGlvXCI7XG5cdFx0fSBlbHNlIGlmICggdGhpcy5lbGVtZW50LmlzKFwiaW5wdXRcIikgKSB7XG5cdFx0XHR0aGlzLnR5cGUgPSBcImlucHV0XCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudHlwZSA9IFwiYnV0dG9uXCI7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiY2hlY2tib3hcIiB8fCB0aGlzLnR5cGUgPT09IFwicmFkaW9cIiApIHtcblx0XHRcdC8vIHdlIGRvbid0IHNlYXJjaCBhZ2FpbnN0IHRoZSBkb2N1bWVudCBpbiBjYXNlIHRoZSBlbGVtZW50XG5cdFx0XHQvLyBpcyBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgRE9NXG5cdFx0XHRhbmNlc3RvciA9IHRoaXMuZWxlbWVudC5wYXJlbnRzKCkubGFzdCgpO1xuXHRcdFx0bGFiZWxTZWxlY3RvciA9IFwibGFiZWxbZm9yPSdcIiArIHRoaXMuZWxlbWVudC5hdHRyKFwiaWRcIikgKyBcIiddXCI7XG5cdFx0XHR0aGlzLmJ1dHRvbkVsZW1lbnQgPSBhbmNlc3Rvci5maW5kKCBsYWJlbFNlbGVjdG9yICk7XG5cdFx0XHRpZiAoICF0aGlzLmJ1dHRvbkVsZW1lbnQubGVuZ3RoICkge1xuXHRcdFx0XHRhbmNlc3RvciA9IGFuY2VzdG9yLmxlbmd0aCA/IGFuY2VzdG9yLnNpYmxpbmdzKCkgOiB0aGlzLmVsZW1lbnQuc2libGluZ3MoKTtcblx0XHRcdFx0dGhpcy5idXR0b25FbGVtZW50ID0gYW5jZXN0b3IuZmlsdGVyKCBsYWJlbFNlbGVjdG9yICk7XG5cdFx0XHRcdGlmICggIXRoaXMuYnV0dG9uRWxlbWVudC5sZW5ndGggKSB7XG5cdFx0XHRcdFx0dGhpcy5idXR0b25FbGVtZW50ID0gYW5jZXN0b3IuZmluZCggbGFiZWxTZWxlY3RvciApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlXCIgKTtcblxuXHRcdFx0Y2hlY2tlZCA9IHRoaXMuZWxlbWVudC5pcyggXCI6Y2hlY2tlZFwiICk7XG5cdFx0XHRpZiAoIGNoZWNrZWQgKSB7XG5cdFx0XHRcdHRoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5idXR0b25FbGVtZW50LnByb3AoIFwiYXJpYS1wcmVzc2VkXCIsIGNoZWNrZWQgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5idXR0b25FbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuXHRcdH1cblx0fSxcblxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmJ1dHRvbkVsZW1lbnQ7XG5cdH0sXG5cblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZVwiICk7XG5cdFx0dGhpcy5idXR0b25FbGVtZW50XG5cdFx0XHQucmVtb3ZlQ2xhc3MoIGJhc2VDbGFzc2VzICsgXCIgdWktc3RhdGUtYWN0aXZlIFwiICsgdHlwZUNsYXNzZXMgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtcHJlc3NlZFwiIClcblx0XHRcdC5odG1sKCB0aGlzLmJ1dHRvbkVsZW1lbnQuZmluZChcIi51aS1idXR0b24tdGV4dFwiKS5odG1sKCkgKTtcblxuXHRcdGlmICggIXRoaXMuaGFzVGl0bGUgKSB7XG5cdFx0XHR0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0ciggXCJ0aXRsZVwiICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7XG5cdFx0aWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiApIHtcblx0XHRcdHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgISF2YWx1ZSApO1xuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiwgISF2YWx1ZSApO1xuXHRcdFx0aWYgKCB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiY2hlY2tib3hcIiB8fCB0aGlzLnR5cGUgPT09IFwicmFkaW9cIiApIHtcblx0XHRcdFx0XHR0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1cyB1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX3Jlc2V0QnV0dG9uKCk7XG5cdH0sXG5cblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XG5cdFx0Ly9TZWUgIzgyMzcgJiAjODgyOFxuXHRcdHZhciBpc0Rpc2FibGVkID0gdGhpcy5lbGVtZW50LmlzKCBcImlucHV0LCBidXR0b25cIiApID8gdGhpcy5lbGVtZW50LmlzKCBcIjpkaXNhYmxlZFwiICkgOiB0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoIFwidWktYnV0dG9uLWRpc2FibGVkXCIgKTtcblxuXHRcdGlmICggaXNEaXNhYmxlZCAhPT0gdGhpcy5vcHRpb25zLmRpc2FibGVkICkge1xuXHRcdFx0dGhpcy5fc2V0T3B0aW9uKCBcImRpc2FibGVkXCIsIGlzRGlzYWJsZWQgKTtcblx0XHR9XG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwicmFkaW9cIiApIHtcblx0XHRcdHJhZGlvR3JvdXAoIHRoaXMuZWxlbWVudFswXSApLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggJCggdGhpcyApLmlzKCBcIjpjaGVja2VkXCIgKSApIHtcblx0XHRcdFx0XHQkKCB0aGlzICkuYnV0dG9uKCBcIndpZGdldFwiIClcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApXG5cdFx0XHRcdFx0XHQuYXR0ciggXCJhcmlhLXByZXNzZWRcIiwgXCJ0cnVlXCIgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKCB0aGlzICkuYnV0dG9uKCBcIndpZGdldFwiIClcblx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApXG5cdFx0XHRcdFx0XHQuYXR0ciggXCJhcmlhLXByZXNzZWRcIiwgXCJmYWxzZVwiICk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSBpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICkge1xuXHRcdFx0aWYgKCB0aGlzLmVsZW1lbnQuaXMoIFwiOmNoZWNrZWRcIiApICkge1xuXHRcdFx0XHR0aGlzLmJ1dHRvbkVsZW1lbnRcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKVxuXHRcdFx0XHRcdC5hdHRyKCBcImFyaWEtcHJlc3NlZFwiLCBcInRydWVcIiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5idXR0b25FbGVtZW50XG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWFjdGl2ZVwiIClcblx0XHRcdFx0XHQuYXR0ciggXCJhcmlhLXByZXNzZWRcIiwgXCJmYWxzZVwiICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdF9yZXNldEJ1dHRvbjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiaW5wdXRcIiApIHtcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmxhYmVsICkge1xuXHRcdFx0XHR0aGlzLmVsZW1lbnQudmFsKCB0aGlzLm9wdGlvbnMubGFiZWwgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dmFyIGJ1dHRvbkVsZW1lbnQgPSB0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoIHR5cGVDbGFzc2VzICksXG5cdFx0XHRidXR0b25UZXh0ID0gJCggXCI8c3Bhbj48L3NwYW4+XCIsIHRoaXMuZG9jdW1lbnRbMF0gKVxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnV0dG9uLXRleHRcIiApXG5cdFx0XHRcdC5odG1sKCB0aGlzLm9wdGlvbnMubGFiZWwgKVxuXHRcdFx0XHQuYXBwZW5kVG8oIGJ1dHRvbkVsZW1lbnQuZW1wdHkoKSApXG5cdFx0XHRcdC50ZXh0KCksXG5cdFx0XHRpY29ucyA9IHRoaXMub3B0aW9ucy5pY29ucyxcblx0XHRcdG11bHRpcGxlSWNvbnMgPSBpY29ucy5wcmltYXJ5ICYmIGljb25zLnNlY29uZGFyeSxcblx0XHRcdGJ1dHRvbkNsYXNzZXMgPSBbXTtcblxuXHRcdGlmICggaWNvbnMucHJpbWFyeSB8fCBpY29ucy5zZWNvbmRhcnkgKSB7XG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy50ZXh0ICkge1xuXHRcdFx0XHRidXR0b25DbGFzc2VzLnB1c2goIFwidWktYnV0dG9uLXRleHQtaWNvblwiICsgKCBtdWx0aXBsZUljb25zID8gXCJzXCIgOiAoIGljb25zLnByaW1hcnkgPyBcIi1wcmltYXJ5XCIgOiBcIi1zZWNvbmRhcnlcIiApICkgKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBpY29ucy5wcmltYXJ5ICkge1xuXHRcdFx0XHRidXR0b25FbGVtZW50LnByZXBlbmQoIFwiPHNwYW4gY2xhc3M9J3VpLWJ1dHRvbi1pY29uLXByaW1hcnkgdWktaWNvbiBcIiArIGljb25zLnByaW1hcnkgKyBcIic+PC9zcGFuPlwiICk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaWNvbnMuc2Vjb25kYXJ5ICkge1xuXHRcdFx0XHRidXR0b25FbGVtZW50LmFwcGVuZCggXCI8c3BhbiBjbGFzcz0ndWktYnV0dG9uLWljb24tc2Vjb25kYXJ5IHVpLWljb24gXCIgKyBpY29ucy5zZWNvbmRhcnkgKyBcIic+PC9zcGFuPlwiICk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggIXRoaXMub3B0aW9ucy50ZXh0ICkge1xuXHRcdFx0XHRidXR0b25DbGFzc2VzLnB1c2goIG11bHRpcGxlSWNvbnMgPyBcInVpLWJ1dHRvbi1pY29ucy1vbmx5XCIgOiBcInVpLWJ1dHRvbi1pY29uLW9ubHlcIiApO1xuXG5cdFx0XHRcdGlmICggIXRoaXMuaGFzVGl0bGUgKSB7XG5cdFx0XHRcdFx0YnV0dG9uRWxlbWVudC5hdHRyKCBcInRpdGxlXCIsICQudHJpbSggYnV0dG9uVGV4dCApICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0YnV0dG9uQ2xhc3Nlcy5wdXNoKCBcInVpLWJ1dHRvbi10ZXh0LW9ubHlcIiApO1xuXHRcdH1cblx0XHRidXR0b25FbGVtZW50LmFkZENsYXNzKCBidXR0b25DbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcblx0fVxufSk7XG5cbiQud2lkZ2V0KCBcInVpLmJ1dHRvbnNldFwiLCB7XG5cdHZlcnNpb246IFwiMS4xMS4zXCIsXG5cdG9wdGlvbnM6IHtcblx0XHRpdGVtczogXCJidXR0b24sIGlucHV0W3R5cGU9YnV0dG9uXSwgaW5wdXRbdHlwZT1zdWJtaXRdLCBpbnB1dFt0eXBlPXJlc2V0XSwgaW5wdXRbdHlwZT1jaGVja2JveF0sIGlucHV0W3R5cGU9cmFkaW9dLCBhLCA6ZGF0YSh1aS1idXR0b24pXCJcblx0fSxcblxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktYnV0dG9uc2V0XCIgKTtcblx0fSxcblxuXHRfaW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0aWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiApIHtcblx0XHRcdHRoaXMuYnV0dG9ucy5idXR0b24oIFwib3B0aW9uXCIsIGtleSwgdmFsdWUgKTtcblx0XHR9XG5cblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApO1xuXHR9LFxuXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBydGwgPSB0aGlzLmVsZW1lbnQuY3NzKCBcImRpcmVjdGlvblwiICkgPT09IFwicnRsXCIsXG5cdFx0XHRhbGxCdXR0b25zID0gdGhpcy5lbGVtZW50LmZpbmQoIHRoaXMub3B0aW9ucy5pdGVtcyApLFxuXHRcdFx0ZXhpc3RpbmdCdXR0b25zID0gYWxsQnV0dG9ucy5maWx0ZXIoIFwiOnVpLWJ1dHRvblwiICk7XG5cblx0XHQvLyBJbml0aWFsaXplIG5ldyBidXR0b25zXG5cdFx0YWxsQnV0dG9ucy5ub3QoIFwiOnVpLWJ1dHRvblwiICkuYnV0dG9uKCk7XG5cblx0XHQvLyBSZWZyZXNoIGV4aXN0aW5nIGJ1dHRvbnNcblx0XHRleGlzdGluZ0J1dHRvbnMuYnV0dG9uKCBcInJlZnJlc2hcIiApO1xuXG5cdFx0dGhpcy5idXR0b25zID0gYWxsQnV0dG9uc1xuXHRcdFx0Lm1hcChmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICQoIHRoaXMgKS5idXR0b24oIFwid2lkZ2V0XCIgKVsgMCBdO1xuXHRcdFx0fSlcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvcm5lci1hbGwgdWktY29ybmVyLWxlZnQgdWktY29ybmVyLXJpZ2h0XCIgKVxuXHRcdFx0XHQuZmlsdGVyKCBcIjpmaXJzdFwiIClcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIHJ0bCA/IFwidWktY29ybmVyLXJpZ2h0XCIgOiBcInVpLWNvcm5lci1sZWZ0XCIgKVxuXHRcdFx0XHQuZW5kKClcblx0XHRcdFx0LmZpbHRlciggXCI6bGFzdFwiIClcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIHJ0bCA/IFwidWktY29ybmVyLWxlZnRcIiA6IFwidWktY29ybmVyLXJpZ2h0XCIgKVxuXHRcdFx0XHQuZW5kKClcblx0XHRcdC5lbmQoKTtcblx0fSxcblxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWJ1dHRvbnNldFwiICk7XG5cdFx0dGhpcy5idXR0b25zXG5cdFx0XHQubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gJCggdGhpcyApLmJ1dHRvbiggXCJ3aWRnZXRcIiApWyAwIF07XG5cdFx0XHR9KVxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29ybmVyLWxlZnQgdWktY29ybmVyLXJpZ2h0XCIgKVxuXHRcdFx0LmVuZCgpXG5cdFx0XHQuYnV0dG9uKCBcImRlc3Ryb3lcIiApO1xuXHR9XG59KTtcblxudmFyIGJ1dHRvbiA9ICQudWkuYnV0dG9uO1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIERhdGVwaWNrZXIgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9kYXRlcGlja2VyL1xuICovXG5cblxuJC5leHRlbmQoJC51aSwgeyBkYXRlcGlja2VyOiB7IHZlcnNpb246IFwiMS4xMS4zXCIgfSB9KTtcblxudmFyIGRhdGVwaWNrZXJfaW5zdEFjdGl2ZTtcblxuZnVuY3Rpb24gZGF0ZXBpY2tlcl9nZXRaaW5kZXgoIGVsZW0gKSB7XG5cdHZhciBwb3NpdGlvbiwgdmFsdWU7XG5cdHdoaWxlICggZWxlbS5sZW5ndGggJiYgZWxlbVsgMCBdICE9PSBkb2N1bWVudCApIHtcblx0XHQvLyBJZ25vcmUgei1pbmRleCBpZiBwb3NpdGlvbiBpcyBzZXQgdG8gYSB2YWx1ZSB3aGVyZSB6LWluZGV4IGlzIGlnbm9yZWQgYnkgdGhlIGJyb3dzZXJcblx0XHQvLyBUaGlzIG1ha2VzIGJlaGF2aW9yIG9mIHRoaXMgZnVuY3Rpb24gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnNcblx0XHQvLyBXZWJLaXQgYWx3YXlzIHJldHVybnMgYXV0byBpZiB0aGUgZWxlbWVudCBpcyBwb3NpdGlvbmVkXG5cdFx0cG9zaXRpb24gPSBlbGVtLmNzcyggXCJwb3NpdGlvblwiICk7XG5cdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcInJlbGF0aXZlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApIHtcblx0XHRcdC8vIElFIHJldHVybnMgMCB3aGVuIHpJbmRleCBpcyBub3Qgc3BlY2lmaWVkXG5cdFx0XHQvLyBvdGhlciBicm93c2VycyByZXR1cm4gYSBzdHJpbmdcblx0XHRcdC8vIHdlIGlnbm9yZSB0aGUgY2FzZSBvZiBuZXN0ZWQgZWxlbWVudHMgd2l0aCBhbiBleHBsaWNpdCB2YWx1ZSBvZiAwXG5cdFx0XHQvLyA8ZGl2IHN0eWxlPVwiei1pbmRleDogLTEwO1wiPjxkaXYgc3R5bGU9XCJ6LWluZGV4OiAwO1wiPjwvZGl2PjwvZGl2PlxuXHRcdFx0dmFsdWUgPSBwYXJzZUludCggZWxlbS5jc3MoIFwiekluZGV4XCIgKSwgMTAgKTtcblx0XHRcdGlmICggIWlzTmFOKCB2YWx1ZSApICYmIHZhbHVlICE9PSAwICkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsZW0gPSBlbGVtLnBhcmVudCgpO1xuXHR9XG5cblx0cmV0dXJuIDA7XG59XG4vKiBEYXRlIHBpY2tlciBtYW5hZ2VyLlxuICAgVXNlIHRoZSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcywgJC5kYXRlcGlja2VyLCB0byBpbnRlcmFjdCB3aXRoIHRoZSBkYXRlIHBpY2tlci5cbiAgIFNldHRpbmdzIGZvciAoZ3JvdXBzIG9mKSBkYXRlIHBpY2tlcnMgYXJlIG1haW50YWluZWQgaW4gYW4gaW5zdGFuY2Ugb2JqZWN0LFxuICAgYWxsb3dpbmcgbXVsdGlwbGUgZGlmZmVyZW50IHNldHRpbmdzIG9uIHRoZSBzYW1lIHBhZ2UuICovXG5cbmZ1bmN0aW9uIERhdGVwaWNrZXIoKSB7XG5cdHRoaXMuX2N1ckluc3QgPSBudWxsOyAvLyBUaGUgY3VycmVudCBpbnN0YW5jZSBpbiB1c2Vcblx0dGhpcy5fa2V5RXZlbnQgPSBmYWxzZTsgLy8gSWYgdGhlIGxhc3QgZXZlbnQgd2FzIGEga2V5IGV2ZW50XG5cdHRoaXMuX2Rpc2FibGVkSW5wdXRzID0gW107IC8vIExpc3Qgb2YgZGF0ZSBwaWNrZXIgaW5wdXRzIHRoYXQgaGF2ZSBiZWVuIGRpc2FibGVkXG5cdHRoaXMuX2RhdGVwaWNrZXJTaG93aW5nID0gZmFsc2U7IC8vIFRydWUgaWYgdGhlIHBvcHVwIHBpY2tlciBpcyBzaG93aW5nICwgZmFsc2UgaWYgbm90XG5cdHRoaXMuX2luRGlhbG9nID0gZmFsc2U7IC8vIFRydWUgaWYgc2hvd2luZyB3aXRoaW4gYSBcImRpYWxvZ1wiLCBmYWxzZSBpZiBub3Rcblx0dGhpcy5fbWFpbkRpdklkID0gXCJ1aS1kYXRlcGlja2VyLWRpdlwiOyAvLyBUaGUgSUQgb2YgdGhlIG1haW4gZGF0ZXBpY2tlciBkaXZpc2lvblxuXHR0aGlzLl9pbmxpbmVDbGFzcyA9IFwidWktZGF0ZXBpY2tlci1pbmxpbmVcIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGlubGluZSBtYXJrZXIgY2xhc3Ncblx0dGhpcy5fYXBwZW5kQ2xhc3MgPSBcInVpLWRhdGVwaWNrZXItYXBwZW5kXCI7IC8vIFRoZSBuYW1lIG9mIHRoZSBhcHBlbmQgbWFya2VyIGNsYXNzXG5cdHRoaXMuX3RyaWdnZXJDbGFzcyA9IFwidWktZGF0ZXBpY2tlci10cmlnZ2VyXCI7IC8vIFRoZSBuYW1lIG9mIHRoZSB0cmlnZ2VyIG1hcmtlciBjbGFzc1xuXHR0aGlzLl9kaWFsb2dDbGFzcyA9IFwidWktZGF0ZXBpY2tlci1kaWFsb2dcIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGRpYWxvZyBtYXJrZXIgY2xhc3Ncblx0dGhpcy5fZGlzYWJsZUNsYXNzID0gXCJ1aS1kYXRlcGlja2VyLWRpc2FibGVkXCI7IC8vIFRoZSBuYW1lIG9mIHRoZSBkaXNhYmxlZCBjb3ZlcmluZyBtYXJrZXIgY2xhc3Ncblx0dGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MgPSBcInVpLWRhdGVwaWNrZXItdW5zZWxlY3RhYmxlXCI7IC8vIFRoZSBuYW1lIG9mIHRoZSB1bnNlbGVjdGFibGUgY2VsbCBtYXJrZXIgY2xhc3Ncblx0dGhpcy5fY3VycmVudENsYXNzID0gXCJ1aS1kYXRlcGlja2VyLWN1cnJlbnQtZGF5XCI7IC8vIFRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IGRheSBtYXJrZXIgY2xhc3Ncblx0dGhpcy5fZGF5T3ZlckNsYXNzID0gXCJ1aS1kYXRlcGlja2VyLWRheXMtY2VsbC1vdmVyXCI7IC8vIFRoZSBuYW1lIG9mIHRoZSBkYXkgaG92ZXIgbWFya2VyIGNsYXNzXG5cdHRoaXMucmVnaW9uYWwgPSBbXTsgLy8gQXZhaWxhYmxlIHJlZ2lvbmFsIHNldHRpbmdzLCBpbmRleGVkIGJ5IGxhbmd1YWdlIGNvZGVcblx0dGhpcy5yZWdpb25hbFtcIlwiXSA9IHsgLy8gRGVmYXVsdCByZWdpb25hbCBzZXR0aW5nc1xuXHRcdGNsb3NlVGV4dDogXCJEb25lXCIsIC8vIERpc3BsYXkgdGV4dCBmb3IgY2xvc2UgbGlua1xuXHRcdHByZXZUZXh0OiBcIlByZXZcIiwgLy8gRGlzcGxheSB0ZXh0IGZvciBwcmV2aW91cyBtb250aCBsaW5rXG5cdFx0bmV4dFRleHQ6IFwiTmV4dFwiLCAvLyBEaXNwbGF5IHRleHQgZm9yIG5leHQgbW9udGggbGlua1xuXHRcdGN1cnJlbnRUZXh0OiBcIlRvZGF5XCIsIC8vIERpc3BsYXkgdGV4dCBmb3IgY3VycmVudCBtb250aCBsaW5rXG5cdFx0bW9udGhOYW1lczogW1wiSmFudWFyeVwiLFwiRmVicnVhcnlcIixcIk1hcmNoXCIsXCJBcHJpbFwiLFwiTWF5XCIsXCJKdW5lXCIsXG5cdFx0XHRcIkp1bHlcIixcIkF1Z3VzdFwiLFwiU2VwdGVtYmVyXCIsXCJPY3RvYmVyXCIsXCJOb3ZlbWJlclwiLFwiRGVjZW1iZXJcIl0sIC8vIE5hbWVzIG9mIG1vbnRocyBmb3IgZHJvcC1kb3duIGFuZCBmb3JtYXR0aW5nXG5cdFx0bW9udGhOYW1lc1Nob3J0OiBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl0sIC8vIEZvciBmb3JtYXR0aW5nXG5cdFx0ZGF5TmFtZXM6IFtcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIiwgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJdLCAvLyBGb3IgZm9ybWF0dGluZ1xuXHRcdGRheU5hbWVzU2hvcnQ6IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXSwgLy8gRm9yIGZvcm1hdHRpbmdcblx0XHRkYXlOYW1lc01pbjogW1wiU3VcIixcIk1vXCIsXCJUdVwiLFwiV2VcIixcIlRoXCIsXCJGclwiLFwiU2FcIl0sIC8vIENvbHVtbiBoZWFkaW5ncyBmb3IgZGF5cyBzdGFydGluZyBhdCBTdW5kYXlcblx0XHR3ZWVrSGVhZGVyOiBcIldrXCIsIC8vIENvbHVtbiBoZWFkZXIgZm9yIHdlZWsgb2YgdGhlIHllYXJcblx0XHRkYXRlRm9ybWF0OiBcIm1tL2RkL3l5XCIsIC8vIFNlZSBmb3JtYXQgb3B0aW9ucyBvbiBwYXJzZURhdGVcblx0XHRmaXJzdERheTogMCwgLy8gVGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlaywgU3VuID0gMCwgTW9uID0gMSwgLi4uXG5cdFx0aXNSVEw6IGZhbHNlLCAvLyBUcnVlIGlmIHJpZ2h0LXRvLWxlZnQgbGFuZ3VhZ2UsIGZhbHNlIGlmIGxlZnQtdG8tcmlnaHRcblx0XHRzaG93TW9udGhBZnRlclllYXI6IGZhbHNlLCAvLyBUcnVlIGlmIHRoZSB5ZWFyIHNlbGVjdCBwcmVjZWRlcyBtb250aCwgZmFsc2UgZm9yIG1vbnRoIHRoZW4geWVhclxuXHRcdHllYXJTdWZmaXg6IFwiXCIgLy8gQWRkaXRpb25hbCB0ZXh0IHRvIGFwcGVuZCB0byB0aGUgeWVhciBpbiB0aGUgbW9udGggaGVhZGVyc1xuXHR9O1xuXHR0aGlzLl9kZWZhdWx0cyA9IHsgLy8gR2xvYmFsIGRlZmF1bHRzIGZvciBhbGwgdGhlIGRhdGUgcGlja2VyIGluc3RhbmNlc1xuXHRcdHNob3dPbjogXCJmb2N1c1wiLCAvLyBcImZvY3VzXCIgZm9yIHBvcHVwIG9uIGZvY3VzLFxuXHRcdFx0Ly8gXCJidXR0b25cIiBmb3IgdHJpZ2dlciBidXR0b24sIG9yIFwiYm90aFwiIGZvciBlaXRoZXJcblx0XHRzaG93QW5pbTogXCJmYWRlSW5cIiwgLy8gTmFtZSBvZiBqUXVlcnkgYW5pbWF0aW9uIGZvciBwb3B1cFxuXHRcdHNob3dPcHRpb25zOiB7fSwgLy8gT3B0aW9ucyBmb3IgZW5oYW5jZWQgYW5pbWF0aW9uc1xuXHRcdGRlZmF1bHREYXRlOiBudWxsLCAvLyBVc2VkIHdoZW4gZmllbGQgaXMgYmxhbms6IGFjdHVhbCBkYXRlLFxuXHRcdFx0Ly8gKy8tbnVtYmVyIGZvciBvZmZzZXQgZnJvbSB0b2RheSwgbnVsbCBmb3IgdG9kYXlcblx0XHRhcHBlbmRUZXh0OiBcIlwiLCAvLyBEaXNwbGF5IHRleHQgZm9sbG93aW5nIHRoZSBpbnB1dCBib3gsIGUuZy4gc2hvd2luZyB0aGUgZm9ybWF0XG5cdFx0YnV0dG9uVGV4dDogXCIuLi5cIiwgLy8gVGV4dCBmb3IgdHJpZ2dlciBidXR0b25cblx0XHRidXR0b25JbWFnZTogXCJcIiwgLy8gVVJMIGZvciB0cmlnZ2VyIGJ1dHRvbiBpbWFnZVxuXHRcdGJ1dHRvbkltYWdlT25seTogZmFsc2UsIC8vIFRydWUgaWYgdGhlIGltYWdlIGFwcGVhcnMgYWxvbmUsIGZhbHNlIGlmIGl0IGFwcGVhcnMgb24gYSBidXR0b25cblx0XHRoaWRlSWZOb1ByZXZOZXh0OiBmYWxzZSwgLy8gVHJ1ZSB0byBoaWRlIG5leHQvcHJldmlvdXMgbW9udGggbGlua3Ncblx0XHRcdC8vIGlmIG5vdCBhcHBsaWNhYmxlLCBmYWxzZSB0byBqdXN0IGRpc2FibGUgdGhlbVxuXHRcdG5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ6IGZhbHNlLCAvLyBUcnVlIGlmIGRhdGUgZm9ybWF0dGluZyBhcHBsaWVkIHRvIHByZXYvdG9kYXkvbmV4dCBsaW5rc1xuXHRcdGdvdG9DdXJyZW50OiBmYWxzZSwgLy8gVHJ1ZSBpZiB0b2RheSBsaW5rIGdvZXMgYmFjayB0byBjdXJyZW50IHNlbGVjdGlvbiBpbnN0ZWFkXG5cdFx0Y2hhbmdlTW9udGg6IGZhbHNlLCAvLyBUcnVlIGlmIG1vbnRoIGNhbiBiZSBzZWxlY3RlZCBkaXJlY3RseSwgZmFsc2UgaWYgb25seSBwcmV2L25leHRcblx0XHRjaGFuZ2VZZWFyOiBmYWxzZSwgLy8gVHJ1ZSBpZiB5ZWFyIGNhbiBiZSBzZWxlY3RlZCBkaXJlY3RseSwgZmFsc2UgaWYgb25seSBwcmV2L25leHRcblx0XHR5ZWFyUmFuZ2U6IFwiYy0xMDpjKzEwXCIsIC8vIFJhbmdlIG9mIHllYXJzIHRvIGRpc3BsYXkgaW4gZHJvcC1kb3duLFxuXHRcdFx0Ly8gZWl0aGVyIHJlbGF0aXZlIHRvIHRvZGF5J3MgeWVhciAoLW5uOitubiksIHJlbGF0aXZlIHRvIGN1cnJlbnRseSBkaXNwbGF5ZWQgeWVhclxuXHRcdFx0Ly8gKGMtbm46YytubiksIGFic29sdXRlIChubm5uOm5ubm4pLCBvciBhIGNvbWJpbmF0aW9uIG9mIHRoZSBhYm92ZSAobm5ubjotbilcblx0XHRzaG93T3RoZXJNb250aHM6IGZhbHNlLCAvLyBUcnVlIHRvIHNob3cgZGF0ZXMgaW4gb3RoZXIgbW9udGhzLCBmYWxzZSB0byBsZWF2ZSBibGFua1xuXHRcdHNlbGVjdE90aGVyTW9udGhzOiBmYWxzZSwgLy8gVHJ1ZSB0byBhbGxvdyBzZWxlY3Rpb24gb2YgZGF0ZXMgaW4gb3RoZXIgbW9udGhzLCBmYWxzZSBmb3IgdW5zZWxlY3RhYmxlXG5cdFx0c2hvd1dlZWs6IGZhbHNlLCAvLyBUcnVlIHRvIHNob3cgd2VlayBvZiB0aGUgeWVhciwgZmFsc2UgdG8gbm90IHNob3cgaXRcblx0XHRjYWxjdWxhdGVXZWVrOiB0aGlzLmlzbzg2MDFXZWVrLCAvLyBIb3cgdG8gY2FsY3VsYXRlIHRoZSB3ZWVrIG9mIHRoZSB5ZWFyLFxuXHRcdFx0Ly8gdGFrZXMgYSBEYXRlIGFuZCByZXR1cm5zIHRoZSBudW1iZXIgb2YgdGhlIHdlZWsgZm9yIGl0XG5cdFx0c2hvcnRZZWFyQ3V0b2ZmOiBcIisxMFwiLCAvLyBTaG9ydCB5ZWFyIHZhbHVlcyA8IHRoaXMgYXJlIGluIHRoZSBjdXJyZW50IGNlbnR1cnksXG5cdFx0XHQvLyA+IHRoaXMgYXJlIGluIHRoZSBwcmV2aW91cyBjZW50dXJ5LFxuXHRcdFx0Ly8gc3RyaW5nIHZhbHVlIHN0YXJ0aW5nIHdpdGggXCIrXCIgZm9yIGN1cnJlbnQgeWVhciArIHZhbHVlXG5cdFx0bWluRGF0ZTogbnVsbCwgLy8gVGhlIGVhcmxpZXN0IHNlbGVjdGFibGUgZGF0ZSwgb3IgbnVsbCBmb3Igbm8gbGltaXRcblx0XHRtYXhEYXRlOiBudWxsLCAvLyBUaGUgbGF0ZXN0IHNlbGVjdGFibGUgZGF0ZSwgb3IgbnVsbCBmb3Igbm8gbGltaXRcblx0XHRkdXJhdGlvbjogXCJmYXN0XCIsIC8vIER1cmF0aW9uIG9mIGRpc3BsYXkvY2xvc3VyZVxuXHRcdGJlZm9yZVNob3dEYXk6IG51bGwsIC8vIEZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBkYXRlIGFuZCByZXR1cm5zIGFuIGFycmF5IHdpdGhcblx0XHRcdC8vIFswXSA9IHRydWUgaWYgc2VsZWN0YWJsZSwgZmFsc2UgaWYgbm90LCBbMV0gPSBjdXN0b20gQ1NTIGNsYXNzIG5hbWUocykgb3IgXCJcIixcblx0XHRcdC8vIFsyXSA9IGNlbGwgdGl0bGUgKG9wdGlvbmFsKSwgZS5nLiAkLmRhdGVwaWNrZXIubm9XZWVrZW5kc1xuXHRcdGJlZm9yZVNob3c6IG51bGwsIC8vIEZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gaW5wdXQgZmllbGQgYW5kXG5cdFx0XHQvLyByZXR1cm5zIGEgc2V0IG9mIGN1c3RvbSBzZXR0aW5ncyBmb3IgdGhlIGRhdGUgcGlja2VyXG5cdFx0b25TZWxlY3Q6IG51bGwsIC8vIERlZmluZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gYSBkYXRlIGlzIHNlbGVjdGVkXG5cdFx0b25DaGFuZ2VNb250aFllYXI6IG51bGwsIC8vIERlZmluZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdGhlIG1vbnRoIG9yIHllYXIgaXMgY2hhbmdlZFxuXHRcdG9uQ2xvc2U6IG51bGwsIC8vIERlZmluZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdGhlIGRhdGVwaWNrZXIgaXMgY2xvc2VkXG5cdFx0bnVtYmVyT2ZNb250aHM6IDEsIC8vIE51bWJlciBvZiBtb250aHMgdG8gc2hvdyBhdCBhIHRpbWVcblx0XHRzaG93Q3VycmVudEF0UG9zOiAwLCAvLyBUaGUgcG9zaXRpb24gaW4gbXVsdGlwZSBtb250aHMgYXQgd2hpY2ggdG8gc2hvdyB0aGUgY3VycmVudCBtb250aCAoc3RhcnRpbmcgYXQgMClcblx0XHRzdGVwTW9udGhzOiAxLCAvLyBOdW1iZXIgb2YgbW9udGhzIHRvIHN0ZXAgYmFjay9mb3J3YXJkXG5cdFx0c3RlcEJpZ01vbnRoczogMTIsIC8vIE51bWJlciBvZiBtb250aHMgdG8gc3RlcCBiYWNrL2ZvcndhcmQgZm9yIHRoZSBiaWcgbGlua3Ncblx0XHRhbHRGaWVsZDogXCJcIiwgLy8gU2VsZWN0b3IgZm9yIGFuIGFsdGVybmF0ZSBmaWVsZCB0byBzdG9yZSBzZWxlY3RlZCBkYXRlcyBpbnRvXG5cdFx0YWx0Rm9ybWF0OiBcIlwiLCAvLyBUaGUgZGF0ZSBmb3JtYXQgdG8gdXNlIGZvciB0aGUgYWx0ZXJuYXRlIGZpZWxkXG5cdFx0Y29uc3RyYWluSW5wdXQ6IHRydWUsIC8vIFRoZSBpbnB1dCBpcyBjb25zdHJhaW5lZCBieSB0aGUgY3VycmVudCBkYXRlIGZvcm1hdFxuXHRcdHNob3dCdXR0b25QYW5lbDogZmFsc2UsIC8vIFRydWUgdG8gc2hvdyBidXR0b24gcGFuZWwsIGZhbHNlIHRvIG5vdCBzaG93IGl0XG5cdFx0YXV0b1NpemU6IGZhbHNlLCAvLyBUcnVlIHRvIHNpemUgdGhlIGlucHV0IGZvciB0aGUgZGF0ZSBmb3JtYXQsIGZhbHNlIHRvIGxlYXZlIGFzIGlzXG5cdFx0ZGlzYWJsZWQ6IGZhbHNlIC8vIFRoZSBpbml0aWFsIGRpc2FibGVkIHN0YXRlXG5cdH07XG5cdCQuZXh0ZW5kKHRoaXMuX2RlZmF1bHRzLCB0aGlzLnJlZ2lvbmFsW1wiXCJdKTtcblx0dGhpcy5yZWdpb25hbC5lbiA9ICQuZXh0ZW5kKCB0cnVlLCB7fSwgdGhpcy5yZWdpb25hbFsgXCJcIiBdKTtcblx0dGhpcy5yZWdpb25hbFsgXCJlbi1VU1wiIF0gPSAkLmV4dGVuZCggdHJ1ZSwge30sIHRoaXMucmVnaW9uYWwuZW4gKTtcblx0dGhpcy5kcERpdiA9IGRhdGVwaWNrZXJfYmluZEhvdmVyKCQoXCI8ZGl2IGlkPSdcIiArIHRoaXMuX21haW5EaXZJZCArIFwiJyBjbGFzcz0ndWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PlwiKSk7XG59XG5cbiQuZXh0ZW5kKERhdGVwaWNrZXIucHJvdG90eXBlLCB7XG5cdC8qIENsYXNzIG5hbWUgYWRkZWQgdG8gZWxlbWVudHMgdG8gaW5kaWNhdGUgYWxyZWFkeSBjb25maWd1cmVkIHdpdGggYSBkYXRlIHBpY2tlci4gKi9cblx0bWFya2VyQ2xhc3NOYW1lOiBcImhhc0RhdGVwaWNrZXJcIixcblxuXHQvL0tlZXAgdHJhY2sgb2YgdGhlIG1heGltdW0gbnVtYmVyIG9mIHJvd3MgZGlzcGxheWVkIChzZWUgIzcwNDMpXG5cdG1heFJvd3M6IDQsXG5cblx0Ly8gVE9ETyByZW5hbWUgdG8gXCJ3aWRnZXRcIiB3aGVuIHN3aXRjaGluZyB0byB3aWRnZXQgZmFjdG9yeVxuXHRfd2lkZ2V0RGF0ZXBpY2tlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZHBEaXY7XG5cdH0sXG5cblx0LyogT3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2V0dGluZ3MgZm9yIGFsbCBpbnN0YW5jZXMgb2YgdGhlIGRhdGUgcGlja2VyLlxuXHQgKiBAcGFyYW0gIHNldHRpbmdzICBvYmplY3QgLSB0aGUgbmV3IHNldHRpbmdzIHRvIHVzZSBhcyBkZWZhdWx0cyAoYW5vbnltb3VzIG9iamVjdClcblx0ICogQHJldHVybiB0aGUgbWFuYWdlciBvYmplY3Rcblx0ICovXG5cdHNldERlZmF1bHRzOiBmdW5jdGlvbihzZXR0aW5ncykge1xuXHRcdGRhdGVwaWNrZXJfZXh0ZW5kUmVtb3ZlKHRoaXMuX2RlZmF1bHRzLCBzZXR0aW5ncyB8fCB7fSk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0LyogQXR0YWNoIHRoZSBkYXRlIHBpY2tlciB0byBhIGpRdWVyeSBzZWxlY3Rpb24uXG5cdCAqIEBwYXJhbSAgdGFyZ2V0XHRlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuXG5cdCAqIEBwYXJhbSAgc2V0dGluZ3MgIG9iamVjdCAtIHRoZSBuZXcgc2V0dGluZ3MgdG8gdXNlIGZvciB0aGlzIGRhdGUgcGlja2VyIGluc3RhbmNlIChhbm9ueW1vdXMpXG5cdCAqL1xuXHRfYXR0YWNoRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0LCBzZXR0aW5ncykge1xuXHRcdHZhciBub2RlTmFtZSwgaW5saW5lLCBpbnN0O1xuXHRcdG5vZGVOYW1lID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0aW5saW5lID0gKG5vZGVOYW1lID09PSBcImRpdlwiIHx8IG5vZGVOYW1lID09PSBcInNwYW5cIik7XG5cdFx0aWYgKCF0YXJnZXQuaWQpIHtcblx0XHRcdHRoaXMudXVpZCArPSAxO1xuXHRcdFx0dGFyZ2V0LmlkID0gXCJkcFwiICsgdGhpcy51dWlkO1xuXHRcdH1cblx0XHRpbnN0ID0gdGhpcy5fbmV3SW5zdCgkKHRhcmdldCksIGlubGluZSk7XG5cdFx0aW5zdC5zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBzZXR0aW5ncyB8fCB7fSk7XG5cdFx0aWYgKG5vZGVOYW1lID09PSBcImlucHV0XCIpIHtcblx0XHRcdHRoaXMuX2Nvbm5lY3REYXRlcGlja2VyKHRhcmdldCwgaW5zdCk7XG5cdFx0fSBlbHNlIGlmIChpbmxpbmUpIHtcblx0XHRcdHRoaXMuX2lubGluZURhdGVwaWNrZXIodGFyZ2V0LCBpbnN0KTtcblx0XHR9XG5cdH0sXG5cblx0LyogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9iamVjdC4gKi9cblx0X25ld0luc3Q6IGZ1bmN0aW9uKHRhcmdldCwgaW5saW5lKSB7XG5cdFx0dmFyIGlkID0gdGFyZ2V0WzBdLmlkLnJlcGxhY2UoLyhbXkEtWmEtejAtOV9cXC1dKS9nLCBcIlxcXFxcXFxcJDFcIik7IC8vIGVzY2FwZSBqUXVlcnkgbWV0YSBjaGFyc1xuXHRcdHJldHVybiB7aWQ6IGlkLCBpbnB1dDogdGFyZ2V0LCAvLyBhc3NvY2lhdGVkIHRhcmdldFxuXHRcdFx0c2VsZWN0ZWREYXk6IDAsIHNlbGVjdGVkTW9udGg6IDAsIHNlbGVjdGVkWWVhcjogMCwgLy8gY3VycmVudCBzZWxlY3Rpb25cblx0XHRcdGRyYXdNb250aDogMCwgZHJhd1llYXI6IDAsIC8vIG1vbnRoIGJlaW5nIGRyYXduXG5cdFx0XHRpbmxpbmU6IGlubGluZSwgLy8gaXMgZGF0ZXBpY2tlciBpbmxpbmUgb3Igbm90XG5cdFx0XHRkcERpdjogKCFpbmxpbmUgPyB0aGlzLmRwRGl2IDogLy8gcHJlc2VudGF0aW9uIGRpdlxuXHRcdFx0ZGF0ZXBpY2tlcl9iaW5kSG92ZXIoJChcIjxkaXYgY2xhc3M9J1wiICsgdGhpcy5faW5saW5lQ2xhc3MgKyBcIiB1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCc+PC9kaXY+XCIpKSl9O1xuXHR9LFxuXG5cdC8qIEF0dGFjaCB0aGUgZGF0ZSBwaWNrZXIgdG8gYW4gaW5wdXQgZmllbGQuICovXG5cdF9jb25uZWN0RGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0LCBpbnN0KSB7XG5cdFx0dmFyIGlucHV0ID0gJCh0YXJnZXQpO1xuXHRcdGluc3QuYXBwZW5kID0gJChbXSk7XG5cdFx0aW5zdC50cmlnZ2VyID0gJChbXSk7XG5cdFx0aWYgKGlucHV0Lmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9hdHRhY2htZW50cyhpbnB1dCwgaW5zdCk7XG5cdFx0aW5wdXQuYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmtleWRvd24odGhpcy5fZG9LZXlEb3duKS5cblx0XHRcdGtleXByZXNzKHRoaXMuX2RvS2V5UHJlc3MpLmtleXVwKHRoaXMuX2RvS2V5VXApO1xuXHRcdHRoaXMuX2F1dG9TaXplKGluc3QpO1xuXHRcdCQuZGF0YSh0YXJnZXQsIFwiZGF0ZXBpY2tlclwiLCBpbnN0KTtcblx0XHQvL0lmIGRpc2FibGVkIG9wdGlvbiBpcyB0cnVlLCBkaXNhYmxlIHRoZSBkYXRlcGlja2VyIG9uY2UgaXQgaGFzIGJlZW4gYXR0YWNoZWQgdG8gdGhlIGlucHV0IChzZWUgdGlja2V0ICM1NjY1KVxuXHRcdGlmKCBpbnN0LnNldHRpbmdzLmRpc2FibGVkICkge1xuXHRcdFx0dGhpcy5fZGlzYWJsZURhdGVwaWNrZXIoIHRhcmdldCApO1xuXHRcdH1cblx0fSxcblxuXHQvKiBNYWtlIGF0dGFjaG1lbnRzIGJhc2VkIG9uIHNldHRpbmdzLiAqL1xuXHRfYXR0YWNobWVudHM6IGZ1bmN0aW9uKGlucHV0LCBpbnN0KSB7XG5cdFx0dmFyIHNob3dPbiwgYnV0dG9uVGV4dCwgYnV0dG9uSW1hZ2UsXG5cdFx0XHRhcHBlbmRUZXh0ID0gdGhpcy5fZ2V0KGluc3QsIFwiYXBwZW5kVGV4dFwiKSxcblx0XHRcdGlzUlRMID0gdGhpcy5fZ2V0KGluc3QsIFwiaXNSVExcIik7XG5cblx0XHRpZiAoaW5zdC5hcHBlbmQpIHtcblx0XHRcdGluc3QuYXBwZW5kLnJlbW92ZSgpO1xuXHRcdH1cblx0XHRpZiAoYXBwZW5kVGV4dCkge1xuXHRcdFx0aW5zdC5hcHBlbmQgPSAkKFwiPHNwYW4gY2xhc3M9J1wiICsgdGhpcy5fYXBwZW5kQ2xhc3MgKyBcIic+XCIgKyBhcHBlbmRUZXh0ICsgXCI8L3NwYW4+XCIpO1xuXHRcdFx0aW5wdXRbaXNSVEwgPyBcImJlZm9yZVwiIDogXCJhZnRlclwiXShpbnN0LmFwcGVuZCk7XG5cdFx0fVxuXG5cdFx0aW5wdXQudW5iaW5kKFwiZm9jdXNcIiwgdGhpcy5fc2hvd0RhdGVwaWNrZXIpO1xuXG5cdFx0aWYgKGluc3QudHJpZ2dlcikge1xuXHRcdFx0aW5zdC50cmlnZ2VyLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdHNob3dPbiA9IHRoaXMuX2dldChpbnN0LCBcInNob3dPblwiKTtcblx0XHRpZiAoc2hvd09uID09PSBcImZvY3VzXCIgfHwgc2hvd09uID09PSBcImJvdGhcIikgeyAvLyBwb3AtdXAgZGF0ZSBwaWNrZXIgd2hlbiBpbiB0aGUgbWFya2VkIGZpZWxkXG5cdFx0XHRpbnB1dC5mb2N1cyh0aGlzLl9zaG93RGF0ZXBpY2tlcik7XG5cdFx0fVxuXHRcdGlmIChzaG93T24gPT09IFwiYnV0dG9uXCIgfHwgc2hvd09uID09PSBcImJvdGhcIikgeyAvLyBwb3AtdXAgZGF0ZSBwaWNrZXIgd2hlbiBidXR0b24gY2xpY2tlZFxuXHRcdFx0YnV0dG9uVGV4dCA9IHRoaXMuX2dldChpbnN0LCBcImJ1dHRvblRleHRcIik7XG5cdFx0XHRidXR0b25JbWFnZSA9IHRoaXMuX2dldChpbnN0LCBcImJ1dHRvbkltYWdlXCIpO1xuXHRcdFx0aW5zdC50cmlnZ2VyID0gJCh0aGlzLl9nZXQoaW5zdCwgXCJidXR0b25JbWFnZU9ubHlcIikgP1xuXHRcdFx0XHQkKFwiPGltZy8+XCIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuXG5cdFx0XHRcdFx0YXR0cih7IHNyYzogYnV0dG9uSW1hZ2UsIGFsdDogYnV0dG9uVGV4dCwgdGl0bGU6IGJ1dHRvblRleHQgfSkgOlxuXHRcdFx0XHQkKFwiPGJ1dHRvbiB0eXBlPSdidXR0b24nPjwvYnV0dG9uPlwiKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLlxuXHRcdFx0XHRcdGh0bWwoIWJ1dHRvbkltYWdlID8gYnV0dG9uVGV4dCA6ICQoXCI8aW1nLz5cIikuYXR0cihcblx0XHRcdFx0XHR7IHNyYzpidXR0b25JbWFnZSwgYWx0OmJ1dHRvblRleHQsIHRpdGxlOmJ1dHRvblRleHQgfSkpKTtcblx0XHRcdGlucHV0W2lzUlRMID8gXCJiZWZvcmVcIiA6IFwiYWZ0ZXJcIl0oaW5zdC50cmlnZ2VyKTtcblx0XHRcdGluc3QudHJpZ2dlci5jbGljayhmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgJiYgJC5kYXRlcGlja2VyLl9sYXN0SW5wdXQgPT09IGlucHV0WzBdKSB7XG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgJiYgJC5kYXRlcGlja2VyLl9sYXN0SW5wdXQgIT09IGlucHV0WzBdKSB7XG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO1xuXHRcdFx0XHRcdCQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoaW5wdXRbMF0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoaW5wdXRbMF0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSxcblxuXHQvKiBBcHBseSB0aGUgbWF4aW11bSBsZW5ndGggZm9yIHRoZSBkYXRlIGZvcm1hdC4gKi9cblx0X2F1dG9TaXplOiBmdW5jdGlvbihpbnN0KSB7XG5cdFx0aWYgKHRoaXMuX2dldChpbnN0LCBcImF1dG9TaXplXCIpICYmICFpbnN0LmlubGluZSkge1xuXHRcdFx0dmFyIGZpbmRNYXgsIG1heCwgbWF4SSwgaSxcblx0XHRcdFx0ZGF0ZSA9IG5ldyBEYXRlKDIwMDksIDEyIC0gMSwgMjApLCAvLyBFbnN1cmUgZG91YmxlIGRpZ2l0c1xuXHRcdFx0XHRkYXRlRm9ybWF0ID0gdGhpcy5fZ2V0KGluc3QsIFwiZGF0ZUZvcm1hdFwiKTtcblxuXHRcdFx0aWYgKGRhdGVGb3JtYXQubWF0Y2goL1tETV0vKSkge1xuXHRcdFx0XHRmaW5kTWF4ID0gZnVuY3Rpb24obmFtZXMpIHtcblx0XHRcdFx0XHRtYXggPSAwO1xuXHRcdFx0XHRcdG1heEkgPSAwO1xuXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYgKG5hbWVzW2ldLmxlbmd0aCA+IG1heCkge1xuXHRcdFx0XHRcdFx0XHRtYXggPSBuYW1lc1tpXS5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdG1heEkgPSBpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF4STtcblx0XHRcdFx0fTtcblx0XHRcdFx0ZGF0ZS5zZXRNb250aChmaW5kTWF4KHRoaXMuX2dldChpbnN0LCAoZGF0ZUZvcm1hdC5tYXRjaCgvTU0vKSA/XG5cdFx0XHRcdFx0XCJtb250aE5hbWVzXCIgOiBcIm1vbnRoTmFtZXNTaG9ydFwiKSkpKTtcblx0XHRcdFx0ZGF0ZS5zZXREYXRlKGZpbmRNYXgodGhpcy5fZ2V0KGluc3QsIChkYXRlRm9ybWF0Lm1hdGNoKC9ERC8pID9cblx0XHRcdFx0XHRcImRheU5hbWVzXCIgOiBcImRheU5hbWVzU2hvcnRcIikpKSArIDIwIC0gZGF0ZS5nZXREYXkoKSk7XG5cdFx0XHR9XG5cdFx0XHRpbnN0LmlucHV0LmF0dHIoXCJzaXplXCIsIHRoaXMuX2Zvcm1hdERhdGUoaW5zdCwgZGF0ZSkubGVuZ3RoKTtcblx0XHR9XG5cdH0sXG5cblx0LyogQXR0YWNoIGFuIGlubGluZSBkYXRlIHBpY2tlciB0byBhIGRpdi4gKi9cblx0X2lubGluZURhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCwgaW5zdCkge1xuXHRcdHZhciBkaXZTcGFuID0gJCh0YXJnZXQpO1xuXHRcdGlmIChkaXZTcGFuLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRkaXZTcGFuLmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5hcHBlbmQoaW5zdC5kcERpdik7XG5cdFx0JC5kYXRhKHRhcmdldCwgXCJkYXRlcGlja2VyXCIsIGluc3QpO1xuXHRcdHRoaXMuX3NldERhdGUoaW5zdCwgdGhpcy5fZ2V0RGVmYXVsdERhdGUoaW5zdCksIHRydWUpO1xuXHRcdHRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7XG5cdFx0dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpO1xuXHRcdC8vSWYgZGlzYWJsZWQgb3B0aW9uIGlzIHRydWUsIGRpc2FibGUgdGhlIGRhdGVwaWNrZXIgYmVmb3JlIHNob3dpbmcgaXQgKHNlZSB0aWNrZXQgIzU2NjUpXG5cdFx0aWYoIGluc3Quc2V0dGluZ3MuZGlzYWJsZWQgKSB7XG5cdFx0XHR0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlciggdGFyZ2V0ICk7XG5cdFx0fVxuXHRcdC8vIFNldCBkaXNwbGF5OmJsb2NrIGluIHBsYWNlIG9mIGluc3QuZHBEaXYuc2hvdygpIHdoaWNoIHdvbid0IHdvcmsgb24gZGlzY29ubmVjdGVkIGVsZW1lbnRzXG5cdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5dWkuY29tL3RpY2tldC83NTUyIC0gQSBEYXRlcGlja2VyIGNyZWF0ZWQgb24gYSBkZXRhY2hlZCBkaXYgaGFzIHplcm8gaGVpZ2h0XG5cdFx0aW5zdC5kcERpdi5jc3MoIFwiZGlzcGxheVwiLCBcImJsb2NrXCIgKTtcblx0fSxcblxuXHQvKiBQb3AtdXAgdGhlIGRhdGUgcGlja2VyIGluIGEgXCJkaWFsb2dcIiBib3guXG5cdCAqIEBwYXJhbSAgaW5wdXQgZWxlbWVudCAtIGlnbm9yZWRcblx0ICogQHBhcmFtICBkYXRlXHRzdHJpbmcgb3IgRGF0ZSAtIHRoZSBpbml0aWFsIGRhdGUgdG8gZGlzcGxheVxuXHQgKiBAcGFyYW0gIG9uU2VsZWN0ICBmdW5jdGlvbiAtIHRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gYSBkYXRlIGlzIHNlbGVjdGVkXG5cdCAqIEBwYXJhbSAgc2V0dGluZ3MgIG9iamVjdCAtIHVwZGF0ZSB0aGUgZGlhbG9nIGRhdGUgcGlja2VyIGluc3RhbmNlJ3Mgc2V0dGluZ3MgKGFub255bW91cyBvYmplY3QpXG5cdCAqIEBwYXJhbSAgcG9zIGludFsyXSAtIGNvb3JkaW5hdGVzIGZvciB0aGUgZGlhbG9nJ3MgcG9zaXRpb24gd2l0aGluIHRoZSBzY3JlZW4gb3Jcblx0ICpcdFx0XHRcdFx0ZXZlbnQgLSB3aXRoIHgveSBjb29yZGluYXRlcyBvclxuXHQgKlx0XHRcdFx0XHRsZWF2ZSBlbXB0eSBmb3IgZGVmYXVsdCAoc2NyZWVuIGNlbnRyZSlcblx0ICogQHJldHVybiB0aGUgbWFuYWdlciBvYmplY3Rcblx0ICovXG5cdF9kaWFsb2dEYXRlcGlja2VyOiBmdW5jdGlvbihpbnB1dCwgZGF0ZSwgb25TZWxlY3QsIHNldHRpbmdzLCBwb3MpIHtcblx0XHR2YXIgaWQsIGJyb3dzZXJXaWR0aCwgYnJvd3NlckhlaWdodCwgc2Nyb2xsWCwgc2Nyb2xsWSxcblx0XHRcdGluc3QgPSB0aGlzLl9kaWFsb2dJbnN0OyAvLyBpbnRlcm5hbCBpbnN0YW5jZVxuXG5cdFx0aWYgKCFpbnN0KSB7XG5cdFx0XHR0aGlzLnV1aWQgKz0gMTtcblx0XHRcdGlkID0gXCJkcFwiICsgdGhpcy51dWlkO1xuXHRcdFx0dGhpcy5fZGlhbG9nSW5wdXQgPSAkKFwiPGlucHV0IHR5cGU9J3RleHQnIGlkPSdcIiArIGlkICtcblx0XHRcdFx0XCInIHN0eWxlPSdwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTEwMHB4OyB3aWR0aDogMHB4OycvPlwiKTtcblx0XHRcdHRoaXMuX2RpYWxvZ0lucHV0LmtleWRvd24odGhpcy5fZG9LZXlEb3duKTtcblx0XHRcdCQoXCJib2R5XCIpLmFwcGVuZCh0aGlzLl9kaWFsb2dJbnB1dCk7XG5cdFx0XHRpbnN0ID0gdGhpcy5fZGlhbG9nSW5zdCA9IHRoaXMuX25ld0luc3QodGhpcy5fZGlhbG9nSW5wdXQsIGZhbHNlKTtcblx0XHRcdGluc3Quc2V0dGluZ3MgPSB7fTtcblx0XHRcdCQuZGF0YSh0aGlzLl9kaWFsb2dJbnB1dFswXSwgXCJkYXRlcGlja2VyXCIsIGluc3QpO1xuXHRcdH1cblx0XHRkYXRlcGlja2VyX2V4dGVuZFJlbW92ZShpbnN0LnNldHRpbmdzLCBzZXR0aW5ncyB8fCB7fSk7XG5cdFx0ZGF0ZSA9IChkYXRlICYmIGRhdGUuY29uc3RydWN0b3IgPT09IERhdGUgPyB0aGlzLl9mb3JtYXREYXRlKGluc3QsIGRhdGUpIDogZGF0ZSk7XG5cdFx0dGhpcy5fZGlhbG9nSW5wdXQudmFsKGRhdGUpO1xuXG5cdFx0dGhpcy5fcG9zID0gKHBvcyA/IChwb3MubGVuZ3RoID8gcG9zIDogW3Bvcy5wYWdlWCwgcG9zLnBhZ2VZXSkgOiBudWxsKTtcblx0XHRpZiAoIXRoaXMuX3Bvcykge1xuXHRcdFx0YnJvd3NlcldpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuXHRcdFx0YnJvd3NlckhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG5cdFx0XHRzY3JvbGxYID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuXHRcdFx0c2Nyb2xsWSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG5cdFx0XHR0aGlzLl9wb3MgPSAvLyBzaG91bGQgdXNlIGFjdHVhbCB3aWR0aC9oZWlnaHQgYmVsb3dcblx0XHRcdFx0Wyhicm93c2VyV2lkdGggLyAyKSAtIDEwMCArIHNjcm9sbFgsIChicm93c2VySGVpZ2h0IC8gMikgLSAxNTAgKyBzY3JvbGxZXTtcblx0XHR9XG5cblx0XHQvLyBtb3ZlIGlucHV0IG9uIHNjcmVlbiBmb3IgZm9jdXMsIGJ1dCBoaWRkZW4gYmVoaW5kIGRpYWxvZ1xuXHRcdHRoaXMuX2RpYWxvZ0lucHV0LmNzcyhcImxlZnRcIiwgKHRoaXMuX3Bvc1swXSArIDIwKSArIFwicHhcIikuY3NzKFwidG9wXCIsIHRoaXMuX3Bvc1sxXSArIFwicHhcIik7XG5cdFx0aW5zdC5zZXR0aW5ncy5vblNlbGVjdCA9IG9uU2VsZWN0O1xuXHRcdHRoaXMuX2luRGlhbG9nID0gdHJ1ZTtcblx0XHR0aGlzLmRwRGl2LmFkZENsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKTtcblx0XHR0aGlzLl9zaG93RGF0ZXBpY2tlcih0aGlzLl9kaWFsb2dJbnB1dFswXSk7XG5cdFx0aWYgKCQuYmxvY2tVSSkge1xuXHRcdFx0JC5ibG9ja1VJKHRoaXMuZHBEaXYpO1xuXHRcdH1cblx0XHQkLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sIFwiZGF0ZXBpY2tlclwiLCBpbnN0KTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHQvKiBEZXRhY2ggYSBkYXRlcGlja2VyIGZyb20gaXRzIGNvbnRyb2wuXG5cdCAqIEBwYXJhbSAgdGFyZ2V0XHRlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuXG5cdCAqL1xuXHRfZGVzdHJveURhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCkge1xuXHRcdHZhciBub2RlTmFtZSxcblx0XHRcdCR0YXJnZXQgPSAkKHRhcmdldCksXG5cdFx0XHRpbnN0ID0gJC5kYXRhKHRhcmdldCwgXCJkYXRlcGlja2VyXCIpO1xuXG5cdFx0aWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG5vZGVOYW1lID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0JC5yZW1vdmVEYXRhKHRhcmdldCwgXCJkYXRlcGlja2VyXCIpO1xuXHRcdGlmIChub2RlTmFtZSA9PT0gXCJpbnB1dFwiKSB7XG5cdFx0XHRpbnN0LmFwcGVuZC5yZW1vdmUoKTtcblx0XHRcdGluc3QudHJpZ2dlci5yZW1vdmUoKTtcblx0XHRcdCR0YXJnZXQucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLlxuXHRcdFx0XHR1bmJpbmQoXCJmb2N1c1wiLCB0aGlzLl9zaG93RGF0ZXBpY2tlcikuXG5cdFx0XHRcdHVuYmluZChcImtleWRvd25cIiwgdGhpcy5fZG9LZXlEb3duKS5cblx0XHRcdFx0dW5iaW5kKFwia2V5cHJlc3NcIiwgdGhpcy5fZG9LZXlQcmVzcykuXG5cdFx0XHRcdHVuYmluZChcImtleXVwXCIsIHRoaXMuX2RvS2V5VXApO1xuXHRcdH0gZWxzZSBpZiAobm9kZU5hbWUgPT09IFwiZGl2XCIgfHwgbm9kZU5hbWUgPT09IFwic3BhblwiKSB7XG5cdFx0XHQkdGFyZ2V0LnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5lbXB0eSgpO1xuXHRcdH1cblxuXHRcdGlmICggZGF0ZXBpY2tlcl9pbnN0QWN0aXZlID09PSBpbnN0ICkge1xuXHRcdFx0ZGF0ZXBpY2tlcl9pbnN0QWN0aXZlID0gbnVsbDtcblx0XHR9XG5cdH0sXG5cblx0LyogRW5hYmxlIHRoZSBkYXRlIHBpY2tlciB0byBhIGpRdWVyeSBzZWxlY3Rpb24uXG5cdCAqIEBwYXJhbSAgdGFyZ2V0XHRlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuXG5cdCAqL1xuXHRfZW5hYmxlRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0KSB7XG5cdFx0dmFyIG5vZGVOYW1lLCBpbmxpbmUsXG5cdFx0XHQkdGFyZ2V0ID0gJCh0YXJnZXQpLFxuXHRcdFx0aW5zdCA9ICQuZGF0YSh0YXJnZXQsIFwiZGF0ZXBpY2tlclwiKTtcblxuXHRcdGlmICghJHRhcmdldC5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRub2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdGlmIChub2RlTmFtZSA9PT0gXCJpbnB1dFwiKSB7XG5cdFx0XHR0YXJnZXQuZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdGluc3QudHJpZ2dlci5maWx0ZXIoXCJidXR0b25cIikuXG5cdFx0XHRcdGVhY2goZnVuY3Rpb24oKSB7IHRoaXMuZGlzYWJsZWQgPSBmYWxzZTsgfSkuZW5kKCkuXG5cdFx0XHRcdGZpbHRlcihcImltZ1wiKS5jc3Moe29wYWNpdHk6IFwiMS4wXCIsIGN1cnNvcjogXCJcIn0pO1xuXHRcdH0gZWxzZSBpZiAobm9kZU5hbWUgPT09IFwiZGl2XCIgfHwgbm9kZU5hbWUgPT09IFwic3BhblwiKSB7XG5cdFx0XHRpbmxpbmUgPSAkdGFyZ2V0LmNoaWxkcmVuKFwiLlwiICsgdGhpcy5faW5saW5lQ2xhc3MpO1xuXHRcdFx0aW5saW5lLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKTtcblx0XHRcdGlubGluZS5maW5kKFwic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXJcIikuXG5cdFx0XHRcdHByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG5cdFx0fVxuXHRcdHRoaXMuX2Rpc2FibGVkSW5wdXRzID0gJC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsXG5cdFx0XHRmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gKHZhbHVlID09PSB0YXJnZXQgPyBudWxsIDogdmFsdWUpOyB9KTsgLy8gZGVsZXRlIGVudHJ5XG5cdH0sXG5cblx0LyogRGlzYWJsZSB0aGUgZGF0ZSBwaWNrZXIgdG8gYSBqUXVlcnkgc2VsZWN0aW9uLlxuXHQgKiBAcGFyYW0gIHRhcmdldFx0ZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3BhblxuXHQgKi9cblx0X2Rpc2FibGVEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQpIHtcblx0XHR2YXIgbm9kZU5hbWUsIGlubGluZSxcblx0XHRcdCR0YXJnZXQgPSAkKHRhcmdldCksXG5cdFx0XHRpbnN0ID0gJC5kYXRhKHRhcmdldCwgXCJkYXRlcGlja2VyXCIpO1xuXG5cdFx0aWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG5vZGVOYW1lID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0aWYgKG5vZGVOYW1lID09PSBcImlucHV0XCIpIHtcblx0XHRcdHRhcmdldC5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRpbnN0LnRyaWdnZXIuZmlsdGVyKFwiYnV0dG9uXCIpLlxuXHRcdFx0XHRlYWNoKGZ1bmN0aW9uKCkgeyB0aGlzLmRpc2FibGVkID0gdHJ1ZTsgfSkuZW5kKCkuXG5cdFx0XHRcdGZpbHRlcihcImltZ1wiKS5jc3Moe29wYWNpdHk6IFwiMC41XCIsIGN1cnNvcjogXCJkZWZhdWx0XCJ9KTtcblx0XHR9IGVsc2UgaWYgKG5vZGVOYW1lID09PSBcImRpdlwiIHx8IG5vZGVOYW1lID09PSBcInNwYW5cIikge1xuXHRcdFx0aW5saW5lID0gJHRhcmdldC5jaGlsZHJlbihcIi5cIiArIHRoaXMuX2lubGluZUNsYXNzKTtcblx0XHRcdGlubGluZS5jaGlsZHJlbigpLmFkZENsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIik7XG5cdFx0XHRpbmxpbmUuZmluZChcInNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLCBzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyXCIpLlxuXHRcdFx0XHRwcm9wKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG5cdFx0fVxuXHRcdHRoaXMuX2Rpc2FibGVkSW5wdXRzID0gJC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsXG5cdFx0XHRmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gKHZhbHVlID09PSB0YXJnZXQgPyBudWxsIDogdmFsdWUpOyB9KTsgLy8gZGVsZXRlIGVudHJ5XG5cdFx0dGhpcy5fZGlzYWJsZWRJbnB1dHNbdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoXSA9IHRhcmdldDtcblx0fSxcblxuXHQvKiBJcyB0aGUgZmlyc3QgZmllbGQgaW4gYSBqUXVlcnkgY29sbGVjdGlvbiBkaXNhYmxlZCBhcyBhIGRhdGVwaWNrZXI/XG5cdCAqIEBwYXJhbSAgdGFyZ2V0XHRlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuXG5cdCAqIEByZXR1cm4gYm9vbGVhbiAtIHRydWUgaWYgZGlzYWJsZWQsIGZhbHNlIGlmIGVuYWJsZWRcblx0ICovXG5cdF9pc0Rpc2FibGVkRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0KSB7XG5cdFx0aWYgKCF0YXJnZXQpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHRoaXMuX2Rpc2FibGVkSW5wdXRzW2ldID09PSB0YXJnZXQpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXHQvKiBSZXRyaWV2ZSB0aGUgaW5zdGFuY2UgZGF0YSBmb3IgdGhlIHRhcmdldCBjb250cm9sLlxuXHQgKiBAcGFyYW0gIHRhcmdldCAgZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3BhblxuXHQgKiBAcmV0dXJuICBvYmplY3QgLSB0aGUgYXNzb2NpYXRlZCBpbnN0YW5jZSBkYXRhXG5cdCAqIEB0aHJvd3MgIGVycm9yIGlmIGEgalF1ZXJ5IHByb2JsZW0gZ2V0dGluZyBkYXRhXG5cdCAqL1xuXHRfZ2V0SW5zdDogZnVuY3Rpb24odGFyZ2V0KSB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiAkLmRhdGEodGFyZ2V0LCBcImRhdGVwaWNrZXJcIik7XG5cdFx0fVxuXHRcdGNhdGNoIChlcnIpIHtcblx0XHRcdHRocm93IFwiTWlzc2luZyBpbnN0YW5jZSBkYXRhIGZvciB0aGlzIGRhdGVwaWNrZXJcIjtcblx0XHR9XG5cdH0sXG5cblx0LyogVXBkYXRlIG9yIHJldHJpZXZlIHRoZSBzZXR0aW5ncyBmb3IgYSBkYXRlIHBpY2tlciBhdHRhY2hlZCB0byBhbiBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbi5cblx0ICogQHBhcmFtICB0YXJnZXQgIGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW5cblx0ICogQHBhcmFtICBuYW1lXHRvYmplY3QgLSB0aGUgbmV3IHNldHRpbmdzIHRvIHVwZGF0ZSBvclxuXHQgKlx0XHRcdFx0c3RyaW5nIC0gdGhlIG5hbWUgb2YgdGhlIHNldHRpbmcgdG8gY2hhbmdlIG9yIHJldHJpZXZlLFxuXHQgKlx0XHRcdFx0d2hlbiByZXRyaWV2aW5nIGFsc28gXCJhbGxcIiBmb3IgYWxsIGluc3RhbmNlIHNldHRpbmdzIG9yXG5cdCAqXHRcdFx0XHRcImRlZmF1bHRzXCIgZm9yIGFsbCBnbG9iYWwgZGVmYXVsdHNcblx0ICogQHBhcmFtICB2YWx1ZSAgIGFueSAtIHRoZSBuZXcgdmFsdWUgZm9yIHRoZSBzZXR0aW5nXG5cdCAqXHRcdFx0XHQob21pdCBpZiBhYm92ZSBpcyBhbiBvYmplY3Qgb3IgdG8gcmV0cmlldmUgYSB2YWx1ZSlcblx0ICovXG5cdF9vcHRpb25EYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQsIG5hbWUsIHZhbHVlKSB7XG5cdFx0dmFyIHNldHRpbmdzLCBkYXRlLCBtaW5EYXRlLCBtYXhEYXRlLFxuXHRcdFx0aW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0KTtcblxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRyZXR1cm4gKG5hbWUgPT09IFwiZGVmYXVsdHNcIiA/ICQuZXh0ZW5kKHt9LCAkLmRhdGVwaWNrZXIuX2RlZmF1bHRzKSA6XG5cdFx0XHRcdChpbnN0ID8gKG5hbWUgPT09IFwiYWxsXCIgPyAkLmV4dGVuZCh7fSwgaW5zdC5zZXR0aW5ncykgOlxuXHRcdFx0XHR0aGlzLl9nZXQoaW5zdCwgbmFtZSkpIDogbnVsbCkpO1xuXHRcdH1cblxuXHRcdHNldHRpbmdzID0gbmFtZSB8fCB7fTtcblx0XHRpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdHNldHRpbmdzID0ge307XG5cdFx0XHRzZXR0aW5nc1tuYW1lXSA9IHZhbHVlO1xuXHRcdH1cblxuXHRcdGlmIChpbnN0KSB7XG5cdFx0XHRpZiAodGhpcy5fY3VySW5zdCA9PT0gaW5zdCkge1xuXHRcdFx0XHR0aGlzLl9oaWRlRGF0ZXBpY2tlcigpO1xuXHRcdFx0fVxuXG5cdFx0XHRkYXRlID0gdGhpcy5fZ2V0RGF0ZURhdGVwaWNrZXIodGFyZ2V0LCB0cnVlKTtcblx0XHRcdG1pbkRhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIFwibWluXCIpO1xuXHRcdFx0bWF4RGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwgXCJtYXhcIik7XG5cdFx0XHRkYXRlcGlja2VyX2V4dGVuZFJlbW92ZShpbnN0LnNldHRpbmdzLCBzZXR0aW5ncyk7XG5cdFx0XHQvLyByZWZvcm1hdCB0aGUgb2xkIG1pbkRhdGUvbWF4RGF0ZSB2YWx1ZXMgaWYgZGF0ZUZvcm1hdCBjaGFuZ2VzIGFuZCBhIG5ldyBtaW5EYXRlL21heERhdGUgaXNuJ3QgcHJvdmlkZWRcblx0XHRcdGlmIChtaW5EYXRlICE9PSBudWxsICYmIHNldHRpbmdzLmRhdGVGb3JtYXQgIT09IHVuZGVmaW5lZCAmJiBzZXR0aW5ncy5taW5EYXRlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aW5zdC5zZXR0aW5ncy5taW5EYXRlID0gdGhpcy5fZm9ybWF0RGF0ZShpbnN0LCBtaW5EYXRlKTtcblx0XHRcdH1cblx0XHRcdGlmIChtYXhEYXRlICE9PSBudWxsICYmIHNldHRpbmdzLmRhdGVGb3JtYXQgIT09IHVuZGVmaW5lZCAmJiBzZXR0aW5ncy5tYXhEYXRlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aW5zdC5zZXR0aW5ncy5tYXhEYXRlID0gdGhpcy5fZm9ybWF0RGF0ZShpbnN0LCBtYXhEYXRlKTtcblx0XHRcdH1cblx0XHRcdGlmICggXCJkaXNhYmxlZFwiIGluIHNldHRpbmdzICkge1xuXHRcdFx0XHRpZiAoIHNldHRpbmdzLmRpc2FibGVkICkge1xuXHRcdFx0XHRcdHRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHRhcmdldCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fZW5hYmxlRGF0ZXBpY2tlcih0YXJnZXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9hdHRhY2htZW50cygkKHRhcmdldCksIGluc3QpO1xuXHRcdFx0dGhpcy5fYXV0b1NpemUoaW5zdCk7XG5cdFx0XHR0aGlzLl9zZXREYXRlKGluc3QsIGRhdGUpO1xuXHRcdFx0dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpO1xuXHRcdFx0dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gY2hhbmdlIG1ldGhvZCBkZXByZWNhdGVkXG5cdF9jaGFuZ2VEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQsIG5hbWUsIHZhbHVlKSB7XG5cdFx0dGhpcy5fb3B0aW9uRGF0ZXBpY2tlcih0YXJnZXQsIG5hbWUsIHZhbHVlKTtcblx0fSxcblxuXHQvKiBSZWRyYXcgdGhlIGRhdGUgcGlja2VyIGF0dGFjaGVkIHRvIGFuIGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uLlxuXHQgKiBAcGFyYW0gIHRhcmdldCAgZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3BhblxuXHQgKi9cblx0X3JlZnJlc2hEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQpIHtcblx0XHR2YXIgaW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0KTtcblx0XHRpZiAoaW5zdCkge1xuXHRcdFx0dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTtcblx0XHR9XG5cdH0sXG5cblx0LyogU2V0IHRoZSBkYXRlcyBmb3IgYSBqUXVlcnkgc2VsZWN0aW9uLlxuXHQgKiBAcGFyYW0gIHRhcmdldCBlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuXG5cdCAqIEBwYXJhbSAgZGF0ZVx0RGF0ZSAtIHRoZSBuZXcgZGF0ZVxuXHQgKi9cblx0X3NldERhdGVEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQsIGRhdGUpIHtcblx0XHR2YXIgaW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0KTtcblx0XHRpZiAoaW5zdCkge1xuXHRcdFx0dGhpcy5fc2V0RGF0ZShpbnN0LCBkYXRlKTtcblx0XHRcdHRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7XG5cdFx0XHR0aGlzLl91cGRhdGVBbHRlcm5hdGUoaW5zdCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIEdldCB0aGUgZGF0ZShzKSBmb3IgdGhlIGZpcnN0IGVudHJ5IGluIGEgalF1ZXJ5IHNlbGVjdGlvbi5cblx0ICogQHBhcmFtICB0YXJnZXQgZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3BhblxuXHQgKiBAcGFyYW0gIG5vRGVmYXVsdCBib29sZWFuIC0gdHJ1ZSBpZiBubyBkZWZhdWx0IGRhdGUgaXMgdG8gYmUgdXNlZFxuXHQgKiBAcmV0dXJuIERhdGUgLSB0aGUgY3VycmVudCBkYXRlXG5cdCAqL1xuXHRfZ2V0RGF0ZURhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCwgbm9EZWZhdWx0KSB7XG5cdFx0dmFyIGluc3QgPSB0aGlzLl9nZXRJbnN0KHRhcmdldCk7XG5cdFx0aWYgKGluc3QgJiYgIWluc3QuaW5saW5lKSB7XG5cdFx0XHR0aGlzLl9zZXREYXRlRnJvbUZpZWxkKGluc3QsIG5vRGVmYXVsdCk7XG5cdFx0fVxuXHRcdHJldHVybiAoaW5zdCA/IHRoaXMuX2dldERhdGUoaW5zdCkgOiBudWxsKTtcblx0fSxcblxuXHQvKiBIYW5kbGUga2V5c3Ryb2tlcy4gKi9cblx0X2RvS2V5RG93bjogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgb25TZWxlY3QsIGRhdGVTdHIsIHNlbCxcblx0XHRcdGluc3QgPSAkLmRhdGVwaWNrZXIuX2dldEluc3QoZXZlbnQudGFyZ2V0KSxcblx0XHRcdGhhbmRsZWQgPSB0cnVlLFxuXHRcdFx0aXNSVEwgPSBpbnN0LmRwRGl2LmlzKFwiLnVpLWRhdGVwaWNrZXItcnRsXCIpO1xuXG5cdFx0aW5zdC5fa2V5RXZlbnQgPSB0cnVlO1xuXHRcdGlmICgkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nKSB7XG5cdFx0XHRzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcblx0XHRcdFx0Y2FzZSA5OiAkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7XG5cdFx0XHRcdFx0XHRoYW5kbGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRicmVhazsgLy8gaGlkZSBvbiB0YWIgb3V0XG5cdFx0XHRcdGNhc2UgMTM6IHNlbCA9ICQoXCJ0ZC5cIiArICQuZGF0ZXBpY2tlci5fZGF5T3ZlckNsYXNzICsgXCI6bm90KC5cIiArXG5cdFx0XHRcdFx0XHRcdFx0XHQkLmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcyArIFwiKVwiLCBpbnN0LmRwRGl2KTtcblx0XHRcdFx0XHRcdGlmIChzZWxbMF0pIHtcblx0XHRcdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9zZWxlY3REYXkoZXZlbnQudGFyZ2V0LCBpbnN0LnNlbGVjdGVkTW9udGgsIGluc3Quc2VsZWN0ZWRZZWFyLCBzZWxbMF0pO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRvblNlbGVjdCA9ICQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsIFwib25TZWxlY3RcIik7XG5cdFx0XHRcdFx0XHRpZiAob25TZWxlY3QpIHtcblx0XHRcdFx0XHRcdFx0ZGF0ZVN0ciA9ICQuZGF0ZXBpY2tlci5fZm9ybWF0RGF0ZShpbnN0KTtcblxuXHRcdFx0XHRcdFx0XHQvLyB0cmlnZ2VyIGN1c3RvbSBjYWxsYmFja1xuXHRcdFx0XHRcdFx0XHRvblNlbGVjdC5hcHBseSgoaW5zdC5pbnB1dCA/IGluc3QuaW5wdXRbMF0gOiBudWxsKSwgW2RhdGVTdHIsIGluc3RdKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBkb24ndCBzdWJtaXQgdGhlIGZvcm1cblx0XHRcdFx0Y2FzZSAyNzogJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO1xuXHRcdFx0XHRcdFx0YnJlYWs7IC8vIGhpZGUgb24gZXNjYXBlXG5cdFx0XHRcdGNhc2UgMzM6ICQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChldmVudC5jdHJsS2V5ID9cblx0XHRcdFx0XHRcdFx0LSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsIFwic3RlcEJpZ01vbnRoc1wiKSA6XG5cdFx0XHRcdFx0XHRcdC0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCBcInN0ZXBNb250aHNcIikpLCBcIk1cIik7XG5cdFx0XHRcdFx0XHRicmVhazsgLy8gcHJldmlvdXMgbW9udGgveWVhciBvbiBwYWdlIHVwLysgY3RybFxuXHRcdFx0XHRjYXNlIDM0OiAkLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LCAoZXZlbnQuY3RybEtleSA/XG5cdFx0XHRcdFx0XHRcdCskLmRhdGVwaWNrZXIuX2dldChpbnN0LCBcInN0ZXBCaWdNb250aHNcIikgOlxuXHRcdFx0XHRcdFx0XHQrJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgXCJzdGVwTW9udGhzXCIpKSwgXCJNXCIpO1xuXHRcdFx0XHRcdFx0YnJlYWs7IC8vIG5leHQgbW9udGgveWVhciBvbiBwYWdlIGRvd24vKyBjdHJsXG5cdFx0XHRcdGNhc2UgMzU6IGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcblx0XHRcdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9jbGVhckRhdGUoZXZlbnQudGFyZ2V0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7XG5cdFx0XHRcdFx0XHRicmVhazsgLy8gY2xlYXIgb24gY3RybCBvciBjb21tYW5kICtlbmRcblx0XHRcdFx0Y2FzZSAzNjogaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkge1xuXHRcdFx0XHRcdFx0XHQkLmRhdGVwaWNrZXIuX2dvdG9Ub2RheShldmVudC50YXJnZXQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aGFuZGxlZCA9IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleTtcblx0XHRcdFx0XHRcdGJyZWFrOyAvLyBjdXJyZW50IG9uIGN0cmwgb3IgY29tbWFuZCAraG9tZVxuXHRcdFx0XHRjYXNlIDM3OiBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7XG5cdFx0XHRcdFx0XHRcdCQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChpc1JUTCA/ICsxIDogLTEpLCBcIkRcIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRoYW5kbGVkID0gZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5O1xuXHRcdFx0XHRcdFx0Ly8gLTEgZGF5IG9uIGN0cmwgb3IgY29tbWFuZCArbGVmdFxuXHRcdFx0XHRcdFx0aWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQuYWx0S2V5KSB7XG5cdFx0XHRcdFx0XHRcdCQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChldmVudC5jdHJsS2V5ID9cblx0XHRcdFx0XHRcdFx0XHQtJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgXCJzdGVwQmlnTW9udGhzXCIpIDpcblx0XHRcdFx0XHRcdFx0XHQtJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgXCJzdGVwTW9udGhzXCIpKSwgXCJNXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gbmV4dCBtb250aC95ZWFyIG9uIGFsdCArbGVmdCBvbiBNYWNcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIDM4OiBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7XG5cdFx0XHRcdFx0XHRcdCQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIC03LCBcIkRcIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRoYW5kbGVkID0gZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5O1xuXHRcdFx0XHRcdFx0YnJlYWs7IC8vIC0xIHdlZWsgb24gY3RybCBvciBjb21tYW5kICt1cFxuXHRcdFx0XHRjYXNlIDM5OiBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7XG5cdFx0XHRcdFx0XHRcdCQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChpc1JUTCA/IC0xIDogKzEpLCBcIkRcIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRoYW5kbGVkID0gZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5O1xuXHRcdFx0XHRcdFx0Ly8gKzEgZGF5IG9uIGN0cmwgb3IgY29tbWFuZCArcmlnaHRcblx0XHRcdFx0XHRcdGlmIChldmVudC5vcmlnaW5hbEV2ZW50LmFsdEtleSkge1xuXHRcdFx0XHRcdFx0XHQkLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LCAoZXZlbnQuY3RybEtleSA/XG5cdFx0XHRcdFx0XHRcdFx0KyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsIFwic3RlcEJpZ01vbnRoc1wiKSA6XG5cdFx0XHRcdFx0XHRcdFx0KyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsIFwic3RlcE1vbnRoc1wiKSksIFwiTVwiKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIG5leHQgbW9udGgveWVhciBvbiBhbHQgK3JpZ2h0XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSA0MDogaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkge1xuXHRcdFx0XHRcdFx0XHQkLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LCArNywgXCJEXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aGFuZGxlZCA9IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleTtcblx0XHRcdFx0XHRcdGJyZWFrOyAvLyArMSB3ZWVrIG9uIGN0cmwgb3IgY29tbWFuZCArZG93blxuXHRcdFx0XHRkZWZhdWx0OiBoYW5kbGVkID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSAzNiAmJiBldmVudC5jdHJsS2V5KSB7IC8vIGRpc3BsYXkgdGhlIGRhdGUgcGlja2VyIG9uIGN0cmwraG9tZVxuXHRcdFx0JC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcih0aGlzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aGFuZGxlZCA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdGlmIChoYW5kbGVkKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIEZpbHRlciBlbnRlcmVkIGNoYXJhY3RlcnMgLSBiYXNlZCBvbiBkYXRlIGZvcm1hdC4gKi9cblx0X2RvS2V5UHJlc3M6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyIGNoYXJzLCBjaHIsXG5cdFx0XHRpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7XG5cblx0XHRpZiAoJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgXCJjb25zdHJhaW5JbnB1dFwiKSkge1xuXHRcdFx0Y2hhcnMgPSAkLmRhdGVwaWNrZXIuX3Bvc3NpYmxlQ2hhcnMoJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgXCJkYXRlRm9ybWF0XCIpKTtcblx0XHRcdGNociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQuY2hhckNvZGUgPT0gbnVsbCA/IGV2ZW50LmtleUNvZGUgOiBldmVudC5jaGFyQ29kZSk7XG5cdFx0XHRyZXR1cm4gZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5IHx8IChjaHIgPCBcIiBcIiB8fCAhY2hhcnMgfHwgY2hhcnMuaW5kZXhPZihjaHIpID4gLTEpO1xuXHRcdH1cblx0fSxcblxuXHQvKiBTeW5jaHJvbmlzZSBtYW51YWwgZW50cnkgYW5kIGZpZWxkL2FsdGVybmF0ZSBmaWVsZC4gKi9cblx0X2RvS2V5VXA6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyIGRhdGUsXG5cdFx0XHRpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7XG5cblx0XHRpZiAoaW5zdC5pbnB1dC52YWwoKSAhPT0gaW5zdC5sYXN0VmFsKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkYXRlID0gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZSgkLmRhdGVwaWNrZXIuX2dldChpbnN0LCBcImRhdGVGb3JtYXRcIiksXG5cdFx0XHRcdFx0KGluc3QuaW5wdXQgPyBpbnN0LmlucHV0LnZhbCgpIDogbnVsbCksXG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpO1xuXG5cdFx0XHRcdGlmIChkYXRlKSB7IC8vIG9ubHkgaWYgdmFsaWRcblx0XHRcdFx0XHQkLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQoaW5zdCk7XG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl91cGRhdGVBbHRlcm5hdGUoaW5zdCk7XG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjYXRjaCAoZXJyKSB7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdC8qIFBvcC11cCB0aGUgZGF0ZSBwaWNrZXIgZm9yIGEgZ2l2ZW4gaW5wdXQgZmllbGQuXG5cdCAqIElmIGZhbHNlIHJldHVybmVkIGZyb20gYmVmb3JlU2hvdyBldmVudCBoYW5kbGVyIGRvIG5vdCBzaG93LlxuXHQgKiBAcGFyYW0gIGlucHV0ICBlbGVtZW50IC0gdGhlIGlucHV0IGZpZWxkIGF0dGFjaGVkIHRvIHRoZSBkYXRlIHBpY2tlciBvclxuXHQgKlx0XHRcdFx0XHRldmVudCAtIGlmIHRyaWdnZXJlZCBieSBmb2N1c1xuXHQgKi9cblx0X3Nob3dEYXRlcGlja2VyOiBmdW5jdGlvbihpbnB1dCkge1xuXHRcdGlucHV0ID0gaW5wdXQudGFyZ2V0IHx8IGlucHV0O1xuXHRcdGlmIChpbnB1dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcImlucHV0XCIpIHsgLy8gZmluZCBmcm9tIGJ1dHRvbi9pbWFnZSB0cmlnZ2VyXG5cdFx0XHRpbnB1dCA9ICQoXCJpbnB1dFwiLCBpbnB1dC5wYXJlbnROb2RlKVswXTtcblx0XHR9XG5cblx0XHRpZiAoJC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihpbnB1dCkgfHwgJC5kYXRlcGlja2VyLl9sYXN0SW5wdXQgPT09IGlucHV0KSB7IC8vIGFscmVhZHkgaGVyZVxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBpbnN0LCBiZWZvcmVTaG93LCBiZWZvcmVTaG93U2V0dGluZ3MsIGlzRml4ZWQsXG5cdFx0XHRvZmZzZXQsIHNob3dBbmltLCBkdXJhdGlvbjtcblxuXHRcdGluc3QgPSAkLmRhdGVwaWNrZXIuX2dldEluc3QoaW5wdXQpO1xuXHRcdGlmICgkLmRhdGVwaWNrZXIuX2N1ckluc3QgJiYgJC5kYXRlcGlja2VyLl9jdXJJbnN0ICE9PSBpbnN0KSB7XG5cdFx0XHQkLmRhdGVwaWNrZXIuX2N1ckluc3QuZHBEaXYuc3RvcCh0cnVlLCB0cnVlKTtcblx0XHRcdGlmICggaW5zdCAmJiAkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nICkge1xuXHRcdFx0XHQkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCAkLmRhdGVwaWNrZXIuX2N1ckluc3QuaW5wdXRbMF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRiZWZvcmVTaG93ID0gJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgXCJiZWZvcmVTaG93XCIpO1xuXHRcdGJlZm9yZVNob3dTZXR0aW5ncyA9IGJlZm9yZVNob3cgPyBiZWZvcmVTaG93LmFwcGx5KGlucHV0LCBbaW5wdXQsIGluc3RdKSA6IHt9O1xuXHRcdGlmKGJlZm9yZVNob3dTZXR0aW5ncyA9PT0gZmFsc2Upe1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRkYXRlcGlja2VyX2V4dGVuZFJlbW92ZShpbnN0LnNldHRpbmdzLCBiZWZvcmVTaG93U2V0dGluZ3MpO1xuXG5cdFx0aW5zdC5sYXN0VmFsID0gbnVsbDtcblx0XHQkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCA9IGlucHV0O1xuXHRcdCQuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZChpbnN0KTtcblxuXHRcdGlmICgkLmRhdGVwaWNrZXIuX2luRGlhbG9nKSB7IC8vIGhpZGUgY3Vyc29yXG5cdFx0XHRpbnB1dC52YWx1ZSA9IFwiXCI7XG5cdFx0fVxuXHRcdGlmICghJC5kYXRlcGlja2VyLl9wb3MpIHsgLy8gcG9zaXRpb24gYmVsb3cgaW5wdXRcblx0XHRcdCQuZGF0ZXBpY2tlci5fcG9zID0gJC5kYXRlcGlja2VyLl9maW5kUG9zKGlucHV0KTtcblx0XHRcdCQuZGF0ZXBpY2tlci5fcG9zWzFdICs9IGlucHV0Lm9mZnNldEhlaWdodDsgLy8gYWRkIHRoZSBoZWlnaHRcblx0XHR9XG5cblx0XHRpc0ZpeGVkID0gZmFsc2U7XG5cdFx0JChpbnB1dCkucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRpc0ZpeGVkIHw9ICQodGhpcykuY3NzKFwicG9zaXRpb25cIikgPT09IFwiZml4ZWRcIjtcblx0XHRcdHJldHVybiAhaXNGaXhlZDtcblx0XHR9KTtcblxuXHRcdG9mZnNldCA9IHtsZWZ0OiAkLmRhdGVwaWNrZXIuX3Bvc1swXSwgdG9wOiAkLmRhdGVwaWNrZXIuX3Bvc1sxXX07XG5cdFx0JC5kYXRlcGlja2VyLl9wb3MgPSBudWxsO1xuXHRcdC8vdG8gYXZvaWQgZmxhc2hlcyBvbiBGaXJlZm94XG5cdFx0aW5zdC5kcERpdi5lbXB0eSgpO1xuXHRcdC8vIGRldGVybWluZSBzaXppbmcgb2Zmc2NyZWVuXG5cdFx0aW5zdC5kcERpdi5jc3Moe3Bvc2l0aW9uOiBcImFic29sdXRlXCIsIGRpc3BsYXk6IFwiYmxvY2tcIiwgdG9wOiBcIi0xMDAwcHhcIn0pO1xuXHRcdCQuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTtcblx0XHQvLyBmaXggd2lkdGggZm9yIGR5bmFtaWMgbnVtYmVyIG9mIGRhdGUgcGlja2Vyc1xuXHRcdC8vIGFuZCBhZGp1c3QgcG9zaXRpb24gYmVmb3JlIHNob3dpbmdcblx0XHRvZmZzZXQgPSAkLmRhdGVwaWNrZXIuX2NoZWNrT2Zmc2V0KGluc3QsIG9mZnNldCwgaXNGaXhlZCk7XG5cdFx0aW5zdC5kcERpdi5jc3Moe3Bvc2l0aW9uOiAoJC5kYXRlcGlja2VyLl9pbkRpYWxvZyAmJiAkLmJsb2NrVUkgP1xuXHRcdFx0XCJzdGF0aWNcIiA6IChpc0ZpeGVkID8gXCJmaXhlZFwiIDogXCJhYnNvbHV0ZVwiKSksIGRpc3BsYXk6IFwibm9uZVwiLFxuXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQgKyBcInB4XCIsIHRvcDogb2Zmc2V0LnRvcCArIFwicHhcIn0pO1xuXG5cdFx0aWYgKCFpbnN0LmlubGluZSkge1xuXHRcdFx0c2hvd0FuaW0gPSAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCBcInNob3dBbmltXCIpO1xuXHRcdFx0ZHVyYXRpb24gPSAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCBcImR1cmF0aW9uXCIpO1xuXHRcdFx0aW5zdC5kcERpdi5jc3MoIFwiei1pbmRleFwiLCBkYXRlcGlja2VyX2dldFppbmRleCggJCggaW5wdXQgKSApICsgMSApO1xuXHRcdFx0JC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyA9IHRydWU7XG5cblx0XHRcdGlmICggJC5lZmZlY3RzICYmICQuZWZmZWN0cy5lZmZlY3RbIHNob3dBbmltIF0gKSB7XG5cdFx0XHRcdGluc3QuZHBEaXYuc2hvdyhzaG93QW5pbSwgJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgXCJzaG93T3B0aW9uc1wiKSwgZHVyYXRpb24pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aW5zdC5kcERpdltzaG93QW5pbSB8fCBcInNob3dcIl0oc2hvd0FuaW0gPyBkdXJhdGlvbiA6IG51bGwpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICQuZGF0ZXBpY2tlci5fc2hvdWxkRm9jdXNJbnB1dCggaW5zdCApICkge1xuXHRcdFx0XHRpbnN0LmlucHV0LmZvY3VzKCk7XG5cdFx0XHR9XG5cblx0XHRcdCQuZGF0ZXBpY2tlci5fY3VySW5zdCA9IGluc3Q7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIEdlbmVyYXRlIHRoZSBkYXRlIHBpY2tlciBjb250ZW50LiAqL1xuXHRfdXBkYXRlRGF0ZXBpY2tlcjogZnVuY3Rpb24oaW5zdCkge1xuXHRcdHRoaXMubWF4Um93cyA9IDQ7IC8vUmVzZXQgdGhlIG1heCBudW1iZXIgb2Ygcm93cyBiZWluZyBkaXNwbGF5ZWQgKHNlZSAjNzA0Mylcblx0XHRkYXRlcGlja2VyX2luc3RBY3RpdmUgPSBpbnN0OyAvLyBmb3IgZGVsZWdhdGUgaG92ZXIgZXZlbnRzXG5cdFx0aW5zdC5kcERpdi5lbXB0eSgpLmFwcGVuZCh0aGlzLl9nZW5lcmF0ZUhUTUwoaW5zdCkpO1xuXHRcdHRoaXMuX2F0dGFjaEhhbmRsZXJzKGluc3QpO1xuXG5cdFx0dmFyIG9yaWd5ZWFyc2h0bWwsXG5cdFx0XHRudW1Nb250aHMgPSB0aGlzLl9nZXROdW1iZXJPZk1vbnRocyhpbnN0KSxcblx0XHRcdGNvbHMgPSBudW1Nb250aHNbMV0sXG5cdFx0XHR3aWR0aCA9IDE3LFxuXHRcdFx0YWN0aXZlQ2VsbCA9IGluc3QuZHBEaXYuZmluZCggXCIuXCIgKyB0aGlzLl9kYXlPdmVyQ2xhc3MgKyBcIiBhXCIgKTtcblxuXHRcdGlmICggYWN0aXZlQ2VsbC5sZW5ndGggPiAwICkge1xuXHRcdFx0ZGF0ZXBpY2tlcl9oYW5kbGVNb3VzZW92ZXIuYXBwbHkoIGFjdGl2ZUNlbGwuZ2V0KCAwICkgKTtcblx0XHR9XG5cblx0XHRpbnN0LmRwRGl2LnJlbW92ZUNsYXNzKFwidWktZGF0ZXBpY2tlci1tdWx0aS0yIHVpLWRhdGVwaWNrZXItbXVsdGktMyB1aS1kYXRlcGlja2VyLW11bHRpLTRcIikud2lkdGgoXCJcIik7XG5cdFx0aWYgKGNvbHMgPiAxKSB7XG5cdFx0XHRpbnN0LmRwRGl2LmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1tdWx0aS1cIiArIGNvbHMpLmNzcyhcIndpZHRoXCIsICh3aWR0aCAqIGNvbHMpICsgXCJlbVwiKTtcblx0XHR9XG5cdFx0aW5zdC5kcERpdlsobnVtTW9udGhzWzBdICE9PSAxIHx8IG51bU1vbnRoc1sxXSAhPT0gMSA/IFwiYWRkXCIgOiBcInJlbW92ZVwiKSArXG5cdFx0XHRcIkNsYXNzXCJdKFwidWktZGF0ZXBpY2tlci1tdWx0aVwiKTtcblx0XHRpbnN0LmRwRGl2Wyh0aGlzLl9nZXQoaW5zdCwgXCJpc1JUTFwiKSA/IFwiYWRkXCIgOiBcInJlbW92ZVwiKSArXG5cdFx0XHRcIkNsYXNzXCJdKFwidWktZGF0ZXBpY2tlci1ydGxcIik7XG5cblx0XHRpZiAoaW5zdCA9PT0gJC5kYXRlcGlja2VyLl9jdXJJbnN0ICYmICQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgJiYgJC5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KCBpbnN0ICkgKSB7XG5cdFx0XHRpbnN0LmlucHV0LmZvY3VzKCk7XG5cdFx0fVxuXG5cdFx0Ly8gZGVmZmVyZWQgcmVuZGVyIG9mIHRoZSB5ZWFycyBzZWxlY3QgKHRvIGF2b2lkIGZsYXNoZXMgb24gRmlyZWZveClcblx0XHRpZiggaW5zdC55ZWFyc2h0bWwgKXtcblx0XHRcdG9yaWd5ZWFyc2h0bWwgPSBpbnN0LnllYXJzaHRtbDtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0Ly9hc3N1cmUgdGhhdCBpbnN0LnllYXJzaHRtbCBkaWRuJ3QgY2hhbmdlLlxuXHRcdFx0XHRpZiggb3JpZ3llYXJzaHRtbCA9PT0gaW5zdC55ZWFyc2h0bWwgJiYgaW5zdC55ZWFyc2h0bWwgKXtcblx0XHRcdFx0XHRpbnN0LmRwRGl2LmZpbmQoXCJzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyOmZpcnN0XCIpLnJlcGxhY2VXaXRoKGluc3QueWVhcnNodG1sKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRvcmlneWVhcnNodG1sID0gaW5zdC55ZWFyc2h0bWwgPSBudWxsO1xuXHRcdFx0fSwgMCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vICM2Njk0IC0gZG9uJ3QgZm9jdXMgdGhlIGlucHV0IGlmIGl0J3MgYWxyZWFkeSBmb2N1c2VkXG5cdC8vIHRoaXMgYnJlYWtzIHRoZSBjaGFuZ2UgZXZlbnQgaW4gSUVcblx0Ly8gU3VwcG9ydDogSUUgYW5kIGpRdWVyeSA8MS45XG5cdF9zaG91bGRGb2N1c0lucHV0OiBmdW5jdGlvbiggaW5zdCApIHtcblx0XHRyZXR1cm4gaW5zdC5pbnB1dCAmJiBpbnN0LmlucHV0LmlzKCBcIjp2aXNpYmxlXCIgKSAmJiAhaW5zdC5pbnB1dC5pcyggXCI6ZGlzYWJsZWRcIiApICYmICFpbnN0LmlucHV0LmlzKCBcIjpmb2N1c1wiICk7XG5cdH0sXG5cblx0LyogQ2hlY2sgcG9zaXRpb25pbmcgdG8gcmVtYWluIG9uIHNjcmVlbi4gKi9cblx0X2NoZWNrT2Zmc2V0OiBmdW5jdGlvbihpbnN0LCBvZmZzZXQsIGlzRml4ZWQpIHtcblx0XHR2YXIgZHBXaWR0aCA9IGluc3QuZHBEaXYub3V0ZXJXaWR0aCgpLFxuXHRcdFx0ZHBIZWlnaHQgPSBpbnN0LmRwRGl2Lm91dGVySGVpZ2h0KCksXG5cdFx0XHRpbnB1dFdpZHRoID0gaW5zdC5pbnB1dCA/IGluc3QuaW5wdXQub3V0ZXJXaWR0aCgpIDogMCxcblx0XHRcdGlucHV0SGVpZ2h0ID0gaW5zdC5pbnB1dCA/IGluc3QuaW5wdXQub3V0ZXJIZWlnaHQoKSA6IDAsXG5cdFx0XHR2aWV3V2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggKyAoaXNGaXhlZCA/IDAgOiAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkpLFxuXHRcdFx0dmlld0hlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgKyAoaXNGaXhlZCA/IDAgOiAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSk7XG5cblx0XHRvZmZzZXQubGVmdCAtPSAodGhpcy5fZ2V0KGluc3QsIFwiaXNSVExcIikgPyAoZHBXaWR0aCAtIGlucHV0V2lkdGgpIDogMCk7XG5cdFx0b2Zmc2V0LmxlZnQgLT0gKGlzRml4ZWQgJiYgb2Zmc2V0LmxlZnQgPT09IGluc3QuaW5wdXQub2Zmc2V0KCkubGVmdCkgPyAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgOiAwO1xuXHRcdG9mZnNldC50b3AgLT0gKGlzRml4ZWQgJiYgb2Zmc2V0LnRvcCA9PT0gKGluc3QuaW5wdXQub2Zmc2V0KCkudG9wICsgaW5wdXRIZWlnaHQpKSA/ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIDogMDtcblxuXHRcdC8vIG5vdyBjaGVjayBpZiBkYXRlcGlja2VyIGlzIHNob3dpbmcgb3V0c2lkZSB3aW5kb3cgdmlld3BvcnQgLSBtb3ZlIHRvIGEgYmV0dGVyIHBsYWNlIGlmIHNvLlxuXHRcdG9mZnNldC5sZWZ0IC09IE1hdGgubWluKG9mZnNldC5sZWZ0LCAob2Zmc2V0LmxlZnQgKyBkcFdpZHRoID4gdmlld1dpZHRoICYmIHZpZXdXaWR0aCA+IGRwV2lkdGgpID9cblx0XHRcdE1hdGguYWJzKG9mZnNldC5sZWZ0ICsgZHBXaWR0aCAtIHZpZXdXaWR0aCkgOiAwKTtcblx0XHRvZmZzZXQudG9wIC09IE1hdGgubWluKG9mZnNldC50b3AsIChvZmZzZXQudG9wICsgZHBIZWlnaHQgPiB2aWV3SGVpZ2h0ICYmIHZpZXdIZWlnaHQgPiBkcEhlaWdodCkgP1xuXHRcdFx0TWF0aC5hYnMoZHBIZWlnaHQgKyBpbnB1dEhlaWdodCkgOiAwKTtcblxuXHRcdHJldHVybiBvZmZzZXQ7XG5cdH0sXG5cblx0LyogRmluZCBhbiBvYmplY3QncyBwb3NpdGlvbiBvbiB0aGUgc2NyZWVuLiAqL1xuXHRfZmluZFBvczogZnVuY3Rpb24ob2JqKSB7XG5cdFx0dmFyIHBvc2l0aW9uLFxuXHRcdFx0aW5zdCA9IHRoaXMuX2dldEluc3Qob2JqKSxcblx0XHRcdGlzUlRMID0gdGhpcy5fZ2V0KGluc3QsIFwiaXNSVExcIik7XG5cblx0XHR3aGlsZSAob2JqICYmIChvYmoudHlwZSA9PT0gXCJoaWRkZW5cIiB8fCBvYmoubm9kZVR5cGUgIT09IDEgfHwgJC5leHByLmZpbHRlcnMuaGlkZGVuKG9iaikpKSB7XG5cdFx0XHRvYmogPSBvYmpbaXNSVEwgPyBcInByZXZpb3VzU2libGluZ1wiIDogXCJuZXh0U2libGluZ1wiXTtcblx0XHR9XG5cblx0XHRwb3NpdGlvbiA9ICQob2JqKS5vZmZzZXQoKTtcblx0XHRyZXR1cm4gW3Bvc2l0aW9uLmxlZnQsIHBvc2l0aW9uLnRvcF07XG5cdH0sXG5cblx0LyogSGlkZSB0aGUgZGF0ZSBwaWNrZXIgZnJvbSB2aWV3LlxuXHQgKiBAcGFyYW0gIGlucHV0ICBlbGVtZW50IC0gdGhlIGlucHV0IGZpZWxkIGF0dGFjaGVkIHRvIHRoZSBkYXRlIHBpY2tlclxuXHQgKi9cblx0X2hpZGVEYXRlcGlja2VyOiBmdW5jdGlvbihpbnB1dCkge1xuXHRcdHZhciBzaG93QW5pbSwgZHVyYXRpb24sIHBvc3RQcm9jZXNzLCBvbkNsb3NlLFxuXHRcdFx0aW5zdCA9IHRoaXMuX2N1ckluc3Q7XG5cblx0XHRpZiAoIWluc3QgfHwgKGlucHV0ICYmIGluc3QgIT09ICQuZGF0YShpbnB1dCwgXCJkYXRlcGlja2VyXCIpKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9kYXRlcGlja2VyU2hvd2luZykge1xuXHRcdFx0c2hvd0FuaW0gPSB0aGlzLl9nZXQoaW5zdCwgXCJzaG93QW5pbVwiKTtcblx0XHRcdGR1cmF0aW9uID0gdGhpcy5fZ2V0KGluc3QsIFwiZHVyYXRpb25cIik7XG5cdFx0XHRwb3N0UHJvY2VzcyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkLmRhdGVwaWNrZXIuX3RpZHlEaWFsb2coaW5zdCk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBERVBSRUNBVEVEOiBhZnRlciBCQyBmb3IgMS44LnggJC5lZmZlY3RzWyBzaG93QW5pbSBdIGlzIG5vdCBuZWVkZWRcblx0XHRcdGlmICggJC5lZmZlY3RzICYmICggJC5lZmZlY3RzLmVmZmVjdFsgc2hvd0FuaW0gXSB8fCAkLmVmZmVjdHNbIHNob3dBbmltIF0gKSApIHtcblx0XHRcdFx0aW5zdC5kcERpdi5oaWRlKHNob3dBbmltLCAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCBcInNob3dPcHRpb25zXCIpLCBkdXJhdGlvbiwgcG9zdFByb2Nlc3MpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aW5zdC5kcERpdlsoc2hvd0FuaW0gPT09IFwic2xpZGVEb3duXCIgPyBcInNsaWRlVXBcIiA6XG5cdFx0XHRcdFx0KHNob3dBbmltID09PSBcImZhZGVJblwiID8gXCJmYWRlT3V0XCIgOiBcImhpZGVcIikpXSgoc2hvd0FuaW0gPyBkdXJhdGlvbiA6IG51bGwpLCBwb3N0UHJvY2Vzcyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghc2hvd0FuaW0pIHtcblx0XHRcdFx0cG9zdFByb2Nlc3MoKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX2RhdGVwaWNrZXJTaG93aW5nID0gZmFsc2U7XG5cblx0XHRcdG9uQ2xvc2UgPSB0aGlzLl9nZXQoaW5zdCwgXCJvbkNsb3NlXCIpO1xuXHRcdFx0aWYgKG9uQ2xvc2UpIHtcblx0XHRcdFx0b25DbG9zZS5hcHBseSgoaW5zdC5pbnB1dCA/IGluc3QuaW5wdXRbMF0gOiBudWxsKSwgWyhpbnN0LmlucHV0ID8gaW5zdC5pbnB1dC52YWwoKSA6IFwiXCIpLCBpbnN0XSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX2xhc3RJbnB1dCA9IG51bGw7XG5cdFx0XHRpZiAodGhpcy5faW5EaWFsb2cpIHtcblx0XHRcdFx0dGhpcy5fZGlhbG9nSW5wdXQuY3NzKHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgbGVmdDogXCIwXCIsIHRvcDogXCItMTAwcHhcIiB9KTtcblx0XHRcdFx0aWYgKCQuYmxvY2tVSSkge1xuXHRcdFx0XHRcdCQudW5ibG9ja1VJKCk7XG5cdFx0XHRcdFx0JChcImJvZHlcIikuYXBwZW5kKHRoaXMuZHBEaXYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9pbkRpYWxvZyA9IGZhbHNlO1xuXHRcdH1cblx0fSxcblxuXHQvKiBUaWR5IHVwIGFmdGVyIGEgZGlhbG9nIGRpc3BsYXkuICovXG5cdF90aWR5RGlhbG9nOiBmdW5jdGlvbihpbnN0KSB7XG5cdFx0aW5zdC5kcERpdi5yZW1vdmVDbGFzcyh0aGlzLl9kaWFsb2dDbGFzcykudW5iaW5kKFwiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXJcIik7XG5cdH0sXG5cblx0LyogQ2xvc2UgZGF0ZSBwaWNrZXIgaWYgY2xpY2tlZCBlbHNld2hlcmUuICovXG5cdF9jaGVja0V4dGVybmFsQ2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0aWYgKCEkLmRhdGVwaWNrZXIuX2N1ckluc3QpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgJHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KSxcblx0XHRcdGluc3QgPSAkLmRhdGVwaWNrZXIuX2dldEluc3QoJHRhcmdldFswXSk7XG5cblx0XHRpZiAoICggKCAkdGFyZ2V0WzBdLmlkICE9PSAkLmRhdGVwaWNrZXIuX21haW5EaXZJZCAmJlxuXHRcdFx0XHQkdGFyZ2V0LnBhcmVudHMoXCIjXCIgKyAkLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoID09PSAwICYmXG5cdFx0XHRcdCEkdGFyZ2V0Lmhhc0NsYXNzKCQuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpICYmXG5cdFx0XHRcdCEkdGFyZ2V0LmNsb3Nlc3QoXCIuXCIgKyAkLmRhdGVwaWNrZXIuX3RyaWdnZXJDbGFzcykubGVuZ3RoICYmXG5cdFx0XHRcdCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgJiYgISgkLmRhdGVwaWNrZXIuX2luRGlhbG9nICYmICQuYmxvY2tVSSkgKSApIHx8XG5cdFx0XHQoICR0YXJnZXQuaGFzQ2xhc3MoJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkgJiYgJC5kYXRlcGlja2VyLl9jdXJJbnN0ICE9PSBpbnN0ICkgKSB7XG5cdFx0XHRcdCQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTtcblx0XHR9XG5cdH0sXG5cblx0LyogQWRqdXN0IG9uZSBvZiB0aGUgZGF0ZSBzdWItZmllbGRzLiAqL1xuXHRfYWRqdXN0RGF0ZTogZnVuY3Rpb24oaWQsIG9mZnNldCwgcGVyaW9kKSB7XG5cdFx0dmFyIHRhcmdldCA9ICQoaWQpLFxuXHRcdFx0aW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTtcblxuXHRcdGlmICh0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcih0YXJnZXRbMF0pKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX2FkanVzdEluc3REYXRlKGluc3QsIG9mZnNldCArXG5cdFx0XHQocGVyaW9kID09PSBcIk1cIiA/IHRoaXMuX2dldChpbnN0LCBcInNob3dDdXJyZW50QXRQb3NcIikgOiAwKSwgLy8gdW5kbyBwb3NpdGlvbmluZ1xuXHRcdFx0cGVyaW9kKTtcblx0XHR0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO1xuXHR9LFxuXG5cdC8qIEFjdGlvbiBmb3IgY3VycmVudCBsaW5rLiAqL1xuXHRfZ290b1RvZGF5OiBmdW5jdGlvbihpZCkge1xuXHRcdHZhciBkYXRlLFxuXHRcdFx0dGFyZ2V0ID0gJChpZCksXG5cdFx0XHRpbnN0ID0gdGhpcy5fZ2V0SW5zdCh0YXJnZXRbMF0pO1xuXG5cdFx0aWYgKHRoaXMuX2dldChpbnN0LCBcImdvdG9DdXJyZW50XCIpICYmIGluc3QuY3VycmVudERheSkge1xuXHRcdFx0aW5zdC5zZWxlY3RlZERheSA9IGluc3QuY3VycmVudERheTtcblx0XHRcdGluc3QuZHJhd01vbnRoID0gaW5zdC5zZWxlY3RlZE1vbnRoID0gaW5zdC5jdXJyZW50TW9udGg7XG5cdFx0XHRpbnN0LmRyYXdZZWFyID0gaW5zdC5zZWxlY3RlZFllYXIgPSBpbnN0LmN1cnJlbnRZZWFyO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRlID0gbmV3IERhdGUoKTtcblx0XHRcdGluc3Quc2VsZWN0ZWREYXkgPSBkYXRlLmdldERhdGUoKTtcblx0XHRcdGluc3QuZHJhd01vbnRoID0gaW5zdC5zZWxlY3RlZE1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuXHRcdFx0aW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdH1cblx0XHR0aGlzLl9ub3RpZnlDaGFuZ2UoaW5zdCk7XG5cdFx0dGhpcy5fYWRqdXN0RGF0ZSh0YXJnZXQpO1xuXHR9LFxuXG5cdC8qIEFjdGlvbiBmb3Igc2VsZWN0aW5nIGEgbmV3IG1vbnRoL3llYXIuICovXG5cdF9zZWxlY3RNb250aFllYXI6IGZ1bmN0aW9uKGlkLCBzZWxlY3QsIHBlcmlvZCkge1xuXHRcdHZhciB0YXJnZXQgPSAkKGlkKSxcblx0XHRcdGluc3QgPSB0aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7XG5cblx0XHRpbnN0W1wic2VsZWN0ZWRcIiArIChwZXJpb2QgPT09IFwiTVwiID8gXCJNb250aFwiIDogXCJZZWFyXCIpXSA9XG5cdFx0aW5zdFtcImRyYXdcIiArIChwZXJpb2QgPT09IFwiTVwiID8gXCJNb250aFwiIDogXCJZZWFyXCIpXSA9XG5cdFx0XHRwYXJzZUludChzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWUsMTApO1xuXG5cdFx0dGhpcy5fbm90aWZ5Q2hhbmdlKGluc3QpO1xuXHRcdHRoaXMuX2FkanVzdERhdGUodGFyZ2V0KTtcblx0fSxcblxuXHQvKiBBY3Rpb24gZm9yIHNlbGVjdGluZyBhIGRheS4gKi9cblx0X3NlbGVjdERheTogZnVuY3Rpb24oaWQsIG1vbnRoLCB5ZWFyLCB0ZCkge1xuXHRcdHZhciBpbnN0LFxuXHRcdFx0dGFyZ2V0ID0gJChpZCk7XG5cblx0XHRpZiAoJCh0ZCkuaGFzQ2xhc3ModGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MpIHx8IHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKHRhcmdldFswXSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpbnN0ID0gdGhpcy5fZ2V0SW5zdCh0YXJnZXRbMF0pO1xuXHRcdGluc3Quc2VsZWN0ZWREYXkgPSBpbnN0LmN1cnJlbnREYXkgPSAkKFwiYVwiLCB0ZCkuaHRtbCgpO1xuXHRcdGluc3Quc2VsZWN0ZWRNb250aCA9IGluc3QuY3VycmVudE1vbnRoID0gbW9udGg7XG5cdFx0aW5zdC5zZWxlY3RlZFllYXIgPSBpbnN0LmN1cnJlbnRZZWFyID0geWVhcjtcblx0XHR0aGlzLl9zZWxlY3REYXRlKGlkLCB0aGlzLl9mb3JtYXREYXRlKGluc3QsXG5cdFx0XHRpbnN0LmN1cnJlbnREYXksIGluc3QuY3VycmVudE1vbnRoLCBpbnN0LmN1cnJlbnRZZWFyKSk7XG5cdH0sXG5cblx0LyogRXJhc2UgdGhlIGlucHV0IGZpZWxkIGFuZCBoaWRlIHRoZSBkYXRlIHBpY2tlci4gKi9cblx0X2NsZWFyRGF0ZTogZnVuY3Rpb24oaWQpIHtcblx0XHR2YXIgdGFyZ2V0ID0gJChpZCk7XG5cdFx0dGhpcy5fc2VsZWN0RGF0ZSh0YXJnZXQsIFwiXCIpO1xuXHR9LFxuXG5cdC8qIFVwZGF0ZSB0aGUgaW5wdXQgZmllbGQgd2l0aCB0aGUgc2VsZWN0ZWQgZGF0ZS4gKi9cblx0X3NlbGVjdERhdGU6IGZ1bmN0aW9uKGlkLCBkYXRlU3RyKSB7XG5cdFx0dmFyIG9uU2VsZWN0LFxuXHRcdFx0dGFyZ2V0ID0gJChpZCksXG5cdFx0XHRpbnN0ID0gdGhpcy5fZ2V0SW5zdCh0YXJnZXRbMF0pO1xuXG5cdFx0ZGF0ZVN0ciA9IChkYXRlU3RyICE9IG51bGwgPyBkYXRlU3RyIDogdGhpcy5fZm9ybWF0RGF0ZShpbnN0KSk7XG5cdFx0aWYgKGluc3QuaW5wdXQpIHtcblx0XHRcdGluc3QuaW5wdXQudmFsKGRhdGVTdHIpO1xuXHRcdH1cblx0XHR0aGlzLl91cGRhdGVBbHRlcm5hdGUoaW5zdCk7XG5cblx0XHRvblNlbGVjdCA9IHRoaXMuX2dldChpbnN0LCBcIm9uU2VsZWN0XCIpO1xuXHRcdGlmIChvblNlbGVjdCkge1xuXHRcdFx0b25TZWxlY3QuYXBwbHkoKGluc3QuaW5wdXQgPyBpbnN0LmlucHV0WzBdIDogbnVsbCksIFtkYXRlU3RyLCBpbnN0XSk7ICAvLyB0cmlnZ2VyIGN1c3RvbSBjYWxsYmFja1xuXHRcdH0gZWxzZSBpZiAoaW5zdC5pbnB1dCkge1xuXHRcdFx0aW5zdC5pbnB1dC50cmlnZ2VyKFwiY2hhbmdlXCIpOyAvLyBmaXJlIHRoZSBjaGFuZ2UgZXZlbnRcblx0XHR9XG5cblx0XHRpZiAoaW5zdC5pbmxpbmUpe1xuXHRcdFx0dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5faGlkZURhdGVwaWNrZXIoKTtcblx0XHRcdHRoaXMuX2xhc3RJbnB1dCA9IGluc3QuaW5wdXRbMF07XG5cdFx0XHRpZiAodHlwZW9mKGluc3QuaW5wdXRbMF0pICE9PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRcdGluc3QuaW5wdXQuZm9jdXMoKTsgLy8gcmVzdG9yZSBmb2N1c1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fbGFzdElucHV0ID0gbnVsbDtcblx0XHR9XG5cdH0sXG5cblx0LyogVXBkYXRlIGFueSBhbHRlcm5hdGUgZmllbGQgdG8gc3luY2hyb25pc2Ugd2l0aCB0aGUgbWFpbiBmaWVsZC4gKi9cblx0X3VwZGF0ZUFsdGVybmF0ZTogZnVuY3Rpb24oaW5zdCkge1xuXHRcdHZhciBhbHRGb3JtYXQsIGRhdGUsIGRhdGVTdHIsXG5cdFx0XHRhbHRGaWVsZCA9IHRoaXMuX2dldChpbnN0LCBcImFsdEZpZWxkXCIpO1xuXG5cdFx0aWYgKGFsdEZpZWxkKSB7IC8vIHVwZGF0ZSBhbHRlcm5hdGUgZmllbGQgdG9vXG5cdFx0XHRhbHRGb3JtYXQgPSB0aGlzLl9nZXQoaW5zdCwgXCJhbHRGb3JtYXRcIikgfHwgdGhpcy5fZ2V0KGluc3QsIFwiZGF0ZUZvcm1hdFwiKTtcblx0XHRcdGRhdGUgPSB0aGlzLl9nZXREYXRlKGluc3QpO1xuXHRcdFx0ZGF0ZVN0ciA9IHRoaXMuZm9ybWF0RGF0ZShhbHRGb3JtYXQsIGRhdGUsIHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7XG5cdFx0XHQkKGFsdEZpZWxkKS5lYWNoKGZ1bmN0aW9uKCkgeyAkKHRoaXMpLnZhbChkYXRlU3RyKTsgfSk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIFNldCBhcyBiZWZvcmVTaG93RGF5IGZ1bmN0aW9uIHRvIHByZXZlbnQgc2VsZWN0aW9uIG9mIHdlZWtlbmRzLlxuXHQgKiBAcGFyYW0gIGRhdGUgIERhdGUgLSB0aGUgZGF0ZSB0byBjdXN0b21pc2Vcblx0ICogQHJldHVybiBbYm9vbGVhbiwgc3RyaW5nXSAtIGlzIHRoaXMgZGF0ZSBzZWxlY3RhYmxlPywgd2hhdCBpcyBpdHMgQ1NTIGNsYXNzP1xuXHQgKi9cblx0bm9XZWVrZW5kczogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuXHRcdHJldHVybiBbKGRheSA+IDAgJiYgZGF5IDwgNiksIFwiXCJdO1xuXHR9LFxuXG5cdC8qIFNldCBhcyBjYWxjdWxhdGVXZWVrIHRvIGRldGVybWluZSB0aGUgd2VlayBvZiB0aGUgeWVhciBiYXNlZCBvbiB0aGUgSVNPIDg2MDEgZGVmaW5pdGlvbi5cblx0ICogQHBhcmFtICBkYXRlICBEYXRlIC0gdGhlIGRhdGUgdG8gZ2V0IHRoZSB3ZWVrIGZvclxuXHQgKiBAcmV0dXJuICBudW1iZXIgLSB0aGUgbnVtYmVyIG9mIHRoZSB3ZWVrIHdpdGhpbiB0aGUgeWVhciB0aGF0IGNvbnRhaW5zIHRoaXMgZGF0ZVxuXHQgKi9cblx0aXNvODYwMVdlZWs6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHR2YXIgdGltZSxcblx0XHRcdGNoZWNrRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcblxuXHRcdC8vIEZpbmQgVGh1cnNkYXkgb2YgdGhpcyB3ZWVrIHN0YXJ0aW5nIG9uIE1vbmRheVxuXHRcdGNoZWNrRGF0ZS5zZXREYXRlKGNoZWNrRGF0ZS5nZXREYXRlKCkgKyA0IC0gKGNoZWNrRGF0ZS5nZXREYXkoKSB8fCA3KSk7XG5cblx0XHR0aW1lID0gY2hlY2tEYXRlLmdldFRpbWUoKTtcblx0XHRjaGVja0RhdGUuc2V0TW9udGgoMCk7IC8vIENvbXBhcmUgd2l0aCBKYW4gMVxuXHRcdGNoZWNrRGF0ZS5zZXREYXRlKDEpO1xuXHRcdHJldHVybiBNYXRoLmZsb29yKE1hdGgucm91bmQoKHRpbWUgLSBjaGVja0RhdGUpIC8gODY0MDAwMDApIC8gNykgKyAxO1xuXHR9LFxuXG5cdC8qIFBhcnNlIGEgc3RyaW5nIHZhbHVlIGludG8gYSBkYXRlIG9iamVjdC5cblx0ICogU2VlIGZvcm1hdERhdGUgYmVsb3cgZm9yIHRoZSBwb3NzaWJsZSBmb3JtYXRzLlxuXHQgKlxuXHQgKiBAcGFyYW0gIGZvcm1hdCBzdHJpbmcgLSB0aGUgZXhwZWN0ZWQgZm9ybWF0IG9mIHRoZSBkYXRlXG5cdCAqIEBwYXJhbSAgdmFsdWUgc3RyaW5nIC0gdGhlIGRhdGUgaW4gdGhlIGFib3ZlIGZvcm1hdFxuXHQgKiBAcGFyYW0gIHNldHRpbmdzIE9iamVjdCAtIGF0dHJpYnV0ZXMgaW5jbHVkZTpcblx0ICpcdFx0XHRcdFx0c2hvcnRZZWFyQ3V0b2ZmICBudW1iZXIgLSB0aGUgY3V0b2ZmIHllYXIgZm9yIGRldGVybWluaW5nIHRoZSBjZW50dXJ5IChvcHRpb25hbClcblx0ICpcdFx0XHRcdFx0ZGF5TmFtZXNTaG9ydFx0c3RyaW5nWzddIC0gYWJicmV2aWF0ZWQgbmFtZXMgb2YgdGhlIGRheXMgZnJvbSBTdW5kYXkgKG9wdGlvbmFsKVxuXHQgKlx0XHRcdFx0XHRkYXlOYW1lc1x0XHRzdHJpbmdbN10gLSBuYW1lcyBvZiB0aGUgZGF5cyBmcm9tIFN1bmRheSAob3B0aW9uYWwpXG5cdCAqXHRcdFx0XHRcdG1vbnRoTmFtZXNTaG9ydCBzdHJpbmdbMTJdIC0gYWJicmV2aWF0ZWQgbmFtZXMgb2YgdGhlIG1vbnRocyAob3B0aW9uYWwpXG5cdCAqXHRcdFx0XHRcdG1vbnRoTmFtZXNcdFx0c3RyaW5nWzEyXSAtIG5hbWVzIG9mIHRoZSBtb250aHMgKG9wdGlvbmFsKVxuXHQgKiBAcmV0dXJuICBEYXRlIC0gdGhlIGV4dHJhY3RlZCBkYXRlIHZhbHVlIG9yIG51bGwgaWYgdmFsdWUgaXMgYmxhbmtcblx0ICovXG5cdHBhcnNlRGF0ZTogZnVuY3Rpb24gKGZvcm1hdCwgdmFsdWUsIHNldHRpbmdzKSB7XG5cdFx0aWYgKGZvcm1hdCA9PSBudWxsIHx8IHZhbHVlID09IG51bGwpIHtcblx0XHRcdHRocm93IFwiSW52YWxpZCBhcmd1bWVudHNcIjtcblx0XHR9XG5cblx0XHR2YWx1ZSA9ICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgPyB2YWx1ZS50b1N0cmluZygpIDogdmFsdWUgKyBcIlwiKTtcblx0XHRpZiAodmFsdWUgPT09IFwiXCIpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdHZhciBpRm9ybWF0LCBkaW0sIGV4dHJhLFxuXHRcdFx0aVZhbHVlID0gMCxcblx0XHRcdHNob3J0WWVhckN1dG9mZlRlbXAgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5zaG9ydFllYXJDdXRvZmYgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5zaG9ydFllYXJDdXRvZmYsXG5cdFx0XHRzaG9ydFllYXJDdXRvZmYgPSAodHlwZW9mIHNob3J0WWVhckN1dG9mZlRlbXAgIT09IFwic3RyaW5nXCIgPyBzaG9ydFllYXJDdXRvZmZUZW1wIDpcblx0XHRcdFx0bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICUgMTAwICsgcGFyc2VJbnQoc2hvcnRZZWFyQ3V0b2ZmVGVtcCwgMTApKSxcblx0XHRcdGRheU5hbWVzU2hvcnQgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5kYXlOYW1lc1Nob3J0IDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydCxcblx0XHRcdGRheU5hbWVzID0gKHNldHRpbmdzID8gc2V0dGluZ3MuZGF5TmFtZXMgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxcblx0XHRcdG1vbnRoTmFtZXNTaG9ydCA9IChzZXR0aW5ncyA/IHNldHRpbmdzLm1vbnRoTmFtZXNTaG9ydCA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydCxcblx0XHRcdG1vbnRoTmFtZXMgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5tb250aE5hbWVzIDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMubW9udGhOYW1lcyxcblx0XHRcdHllYXIgPSAtMSxcblx0XHRcdG1vbnRoID0gLTEsXG5cdFx0XHRkYXkgPSAtMSxcblx0XHRcdGRveSA9IC0xLFxuXHRcdFx0bGl0ZXJhbCA9IGZhbHNlLFxuXHRcdFx0ZGF0ZSxcblx0XHRcdC8vIENoZWNrIHdoZXRoZXIgYSBmb3JtYXQgY2hhcmFjdGVyIGlzIGRvdWJsZWRcblx0XHRcdGxvb2tBaGVhZCA9IGZ1bmN0aW9uKG1hdGNoKSB7XG5cdFx0XHRcdHZhciBtYXRjaGVzID0gKGlGb3JtYXQgKyAxIDwgZm9ybWF0Lmxlbmd0aCAmJiBmb3JtYXQuY2hhckF0KGlGb3JtYXQgKyAxKSA9PT0gbWF0Y2gpO1xuXHRcdFx0XHRpZiAobWF0Y2hlcykge1xuXHRcdFx0XHRcdGlGb3JtYXQrKztcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2hlcztcblx0XHRcdH0sXG5cdFx0XHQvLyBFeHRyYWN0IGEgbnVtYmVyIGZyb20gdGhlIHN0cmluZyB2YWx1ZVxuXHRcdFx0Z2V0TnVtYmVyID0gZnVuY3Rpb24obWF0Y2gpIHtcblx0XHRcdFx0dmFyIGlzRG91YmxlZCA9IGxvb2tBaGVhZChtYXRjaCksXG5cdFx0XHRcdFx0c2l6ZSA9IChtYXRjaCA9PT0gXCJAXCIgPyAxNCA6IChtYXRjaCA9PT0gXCIhXCIgPyAyMCA6XG5cdFx0XHRcdFx0KG1hdGNoID09PSBcInlcIiAmJiBpc0RvdWJsZWQgPyA0IDogKG1hdGNoID09PSBcIm9cIiA/IDMgOiAyKSkpKSxcblx0XHRcdFx0XHRtaW5TaXplID0gKG1hdGNoID09PSBcInlcIiA/IHNpemUgOiAxKSxcblx0XHRcdFx0XHRkaWdpdHMgPSBuZXcgUmVnRXhwKFwiXlxcXFxke1wiICsgbWluU2l6ZSArIFwiLFwiICsgc2l6ZSArIFwifVwiKSxcblx0XHRcdFx0XHRudW0gPSB2YWx1ZS5zdWJzdHJpbmcoaVZhbHVlKS5tYXRjaChkaWdpdHMpO1xuXHRcdFx0XHRpZiAoIW51bSkge1xuXHRcdFx0XHRcdHRocm93IFwiTWlzc2luZyBudW1iZXIgYXQgcG9zaXRpb24gXCIgKyBpVmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aVZhbHVlICs9IG51bVswXS5sZW5ndGg7XG5cdFx0XHRcdHJldHVybiBwYXJzZUludChudW1bMF0sIDEwKTtcblx0XHRcdH0sXG5cdFx0XHQvLyBFeHRyYWN0IGEgbmFtZSBmcm9tIHRoZSBzdHJpbmcgdmFsdWUgYW5kIGNvbnZlcnQgdG8gYW4gaW5kZXhcblx0XHRcdGdldE5hbWUgPSBmdW5jdGlvbihtYXRjaCwgc2hvcnROYW1lcywgbG9uZ05hbWVzKSB7XG5cdFx0XHRcdHZhciBpbmRleCA9IC0xLFxuXHRcdFx0XHRcdG5hbWVzID0gJC5tYXAobG9va0FoZWFkKG1hdGNoKSA/IGxvbmdOYW1lcyA6IHNob3J0TmFtZXMsIGZ1bmN0aW9uICh2LCBrKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gWyBbaywgdl0gXTtcblx0XHRcdFx0XHR9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gLShhWzFdLmxlbmd0aCAtIGJbMV0ubGVuZ3RoKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHQkLmVhY2gobmFtZXMsIGZ1bmN0aW9uIChpLCBwYWlyKSB7XG5cdFx0XHRcdFx0dmFyIG5hbWUgPSBwYWlyWzFdO1xuXHRcdFx0XHRcdGlmICh2YWx1ZS5zdWJzdHIoaVZhbHVlLCBuYW1lLmxlbmd0aCkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpKSB7XG5cdFx0XHRcdFx0XHRpbmRleCA9IHBhaXJbMF07XG5cdFx0XHRcdFx0XHRpVmFsdWUgKz0gbmFtZS5sZW5ndGg7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGluZGV4ICE9PSAtMSkge1xuXHRcdFx0XHRcdHJldHVybiBpbmRleCArIDE7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgXCJVbmtub3duIG5hbWUgYXQgcG9zaXRpb24gXCIgKyBpVmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHQvLyBDb25maXJtIHRoYXQgYSBsaXRlcmFsIGNoYXJhY3RlciBtYXRjaGVzIHRoZSBzdHJpbmcgdmFsdWVcblx0XHRcdGNoZWNrTGl0ZXJhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAodmFsdWUuY2hhckF0KGlWYWx1ZSkgIT09IGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpIHtcblx0XHRcdFx0XHR0aHJvdyBcIlVuZXhwZWN0ZWQgbGl0ZXJhbCBhdCBwb3NpdGlvbiBcIiArIGlWYWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpVmFsdWUrKztcblx0XHRcdH07XG5cblx0XHRmb3IgKGlGb3JtYXQgPSAwOyBpRm9ybWF0IDwgZm9ybWF0Lmxlbmd0aDsgaUZvcm1hdCsrKSB7XG5cdFx0XHRpZiAobGl0ZXJhbCkge1xuXHRcdFx0XHRpZiAoZm9ybWF0LmNoYXJBdChpRm9ybWF0KSA9PT0gXCInXCIgJiYgIWxvb2tBaGVhZChcIidcIikpIHtcblx0XHRcdFx0XHRsaXRlcmFsID0gZmFsc2U7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2hlY2tMaXRlcmFsKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN3aXRjaCAoZm9ybWF0LmNoYXJBdChpRm9ybWF0KSkge1xuXHRcdFx0XHRcdGNhc2UgXCJkXCI6XG5cdFx0XHRcdFx0XHRkYXkgPSBnZXROdW1iZXIoXCJkXCIpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcIkRcIjpcblx0XHRcdFx0XHRcdGdldE5hbWUoXCJEXCIsIGRheU5hbWVzU2hvcnQsIGRheU5hbWVzKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJvXCI6XG5cdFx0XHRcdFx0XHRkb3kgPSBnZXROdW1iZXIoXCJvXCIpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcIm1cIjpcblx0XHRcdFx0XHRcdG1vbnRoID0gZ2V0TnVtYmVyKFwibVwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJNXCI6XG5cdFx0XHRcdFx0XHRtb250aCA9IGdldE5hbWUoXCJNXCIsIG1vbnRoTmFtZXNTaG9ydCwgbW9udGhOYW1lcyk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwieVwiOlxuXHRcdFx0XHRcdFx0eWVhciA9IGdldE51bWJlcihcInlcIik7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiQFwiOlxuXHRcdFx0XHRcdFx0ZGF0ZSA9IG5ldyBEYXRlKGdldE51bWJlcihcIkBcIikpO1xuXHRcdFx0XHRcdFx0eWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcblx0XHRcdFx0XHRcdG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcblx0XHRcdFx0XHRcdGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcIiFcIjpcblx0XHRcdFx0XHRcdGRhdGUgPSBuZXcgRGF0ZSgoZ2V0TnVtYmVyKFwiIVwiKSAtIHRoaXMuX3RpY2tzVG8xOTcwKSAvIDEwMDAwKTtcblx0XHRcdFx0XHRcdHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cdFx0XHRcdFx0XHRtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XG5cdFx0XHRcdFx0XHRkYXkgPSBkYXRlLmdldERhdGUoKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCInXCI6XG5cdFx0XHRcdFx0XHRpZiAobG9va0FoZWFkKFwiJ1wiKSl7XG5cdFx0XHRcdFx0XHRcdGNoZWNrTGl0ZXJhbCgpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0bGl0ZXJhbCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0Y2hlY2tMaXRlcmFsKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoaVZhbHVlIDwgdmFsdWUubGVuZ3RoKXtcblx0XHRcdGV4dHJhID0gdmFsdWUuc3Vic3RyKGlWYWx1ZSk7XG5cdFx0XHRpZiAoIS9eXFxzKy8udGVzdChleHRyYSkpIHtcblx0XHRcdFx0dGhyb3cgXCJFeHRyYS91bnBhcnNlZCBjaGFyYWN0ZXJzIGZvdW5kIGluIGRhdGU6IFwiICsgZXh0cmE7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHllYXIgPT09IC0xKSB7XG5cdFx0XHR5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuXHRcdH0gZWxzZSBpZiAoeWVhciA8IDEwMCkge1xuXHRcdFx0eWVhciArPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgLSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgJSAxMDAgK1xuXHRcdFx0XHQoeWVhciA8PSBzaG9ydFllYXJDdXRvZmYgPyAwIDogLTEwMCk7XG5cdFx0fVxuXG5cdFx0aWYgKGRveSA+IC0xKSB7XG5cdFx0XHRtb250aCA9IDE7XG5cdFx0XHRkYXkgPSBkb3k7XG5cdFx0XHRkbyB7XG5cdFx0XHRcdGRpbSA9IHRoaXMuX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoIC0gMSk7XG5cdFx0XHRcdGlmIChkYXkgPD0gZGltKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0bW9udGgrKztcblx0XHRcdFx0ZGF5IC09IGRpbTtcblx0XHRcdH0gd2hpbGUgKHRydWUpO1xuXHRcdH1cblxuXHRcdGRhdGUgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSkpO1xuXHRcdGlmIChkYXRlLmdldEZ1bGxZZWFyKCkgIT09IHllYXIgfHwgZGF0ZS5nZXRNb250aCgpICsgMSAhPT0gbW9udGggfHwgZGF0ZS5nZXREYXRlKCkgIT09IGRheSkge1xuXHRcdFx0dGhyb3cgXCJJbnZhbGlkIGRhdGVcIjsgLy8gRS5nLiAzMS8wMi8wMFxuXHRcdH1cblx0XHRyZXR1cm4gZGF0ZTtcblx0fSxcblxuXHQvKiBTdGFuZGFyZCBkYXRlIGZvcm1hdHMuICovXG5cdEFUT006IFwieXktbW0tZGRcIiwgLy8gUkZDIDMzMzkgKElTTyA4NjAxKVxuXHRDT09LSUU6IFwiRCwgZGQgTSB5eVwiLFxuXHRJU09fODYwMTogXCJ5eS1tbS1kZFwiLFxuXHRSRkNfODIyOiBcIkQsIGQgTSB5XCIsXG5cdFJGQ184NTA6IFwiREQsIGRkLU0teVwiLFxuXHRSRkNfMTAzNjogXCJELCBkIE0geVwiLFxuXHRSRkNfMTEyMzogXCJELCBkIE0geXlcIixcblx0UkZDXzI4MjI6IFwiRCwgZCBNIHl5XCIsXG5cdFJTUzogXCJELCBkIE0geVwiLCAvLyBSRkMgODIyXG5cdFRJQ0tTOiBcIiFcIixcblx0VElNRVNUQU1QOiBcIkBcIixcblx0VzNDOiBcInl5LW1tLWRkXCIsIC8vIElTTyA4NjAxXG5cblx0X3RpY2tzVG8xOTcwOiAoKCgxOTcwIC0gMSkgKiAzNjUgKyBNYXRoLmZsb29yKDE5NzAgLyA0KSAtIE1hdGguZmxvb3IoMTk3MCAvIDEwMCkgK1xuXHRcdE1hdGguZmxvb3IoMTk3MCAvIDQwMCkpICogMjQgKiA2MCAqIDYwICogMTAwMDAwMDApLFxuXG5cdC8qIEZvcm1hdCBhIGRhdGUgb2JqZWN0IGludG8gYSBzdHJpbmcgdmFsdWUuXG5cdCAqIFRoZSBmb3JtYXQgY2FuIGJlIGNvbWJpbmF0aW9ucyBvZiB0aGUgZm9sbG93aW5nOlxuXHQgKiBkICAtIGRheSBvZiBtb250aCAobm8gbGVhZGluZyB6ZXJvKVxuXHQgKiBkZCAtIGRheSBvZiBtb250aCAodHdvIGRpZ2l0KVxuXHQgKiBvICAtIGRheSBvZiB5ZWFyIChubyBsZWFkaW5nIHplcm9zKVxuXHQgKiBvbyAtIGRheSBvZiB5ZWFyICh0aHJlZSBkaWdpdClcblx0ICogRCAgLSBkYXkgbmFtZSBzaG9ydFxuXHQgKiBERCAtIGRheSBuYW1lIGxvbmdcblx0ICogbSAgLSBtb250aCBvZiB5ZWFyIChubyBsZWFkaW5nIHplcm8pXG5cdCAqIG1tIC0gbW9udGggb2YgeWVhciAodHdvIGRpZ2l0KVxuXHQgKiBNICAtIG1vbnRoIG5hbWUgc2hvcnRcblx0ICogTU0gLSBtb250aCBuYW1lIGxvbmdcblx0ICogeSAgLSB5ZWFyICh0d28gZGlnaXQpXG5cdCAqIHl5IC0geWVhciAoZm91ciBkaWdpdClcblx0ICogQCAtIFVuaXggdGltZXN0YW1wIChtcyBzaW5jZSAwMS8wMS8xOTcwKVxuXHQgKiAhIC0gV2luZG93cyB0aWNrcyAoMTAwbnMgc2luY2UgMDEvMDEvMDAwMSlcblx0ICogXCIuLi5cIiAtIGxpdGVyYWwgdGV4dFxuXHQgKiAnJyAtIHNpbmdsZSBxdW90ZVxuXHQgKlxuXHQgKiBAcGFyYW0gIGZvcm1hdCBzdHJpbmcgLSB0aGUgZGVzaXJlZCBmb3JtYXQgb2YgdGhlIGRhdGVcblx0ICogQHBhcmFtICBkYXRlIERhdGUgLSB0aGUgZGF0ZSB2YWx1ZSB0byBmb3JtYXRcblx0ICogQHBhcmFtICBzZXR0aW5ncyBPYmplY3QgLSBhdHRyaWJ1dGVzIGluY2x1ZGU6XG5cdCAqXHRcdFx0XHRcdGRheU5hbWVzU2hvcnRcdHN0cmluZ1s3XSAtIGFiYnJldmlhdGVkIG5hbWVzIG9mIHRoZSBkYXlzIGZyb20gU3VuZGF5IChvcHRpb25hbClcblx0ICpcdFx0XHRcdFx0ZGF5TmFtZXNcdFx0c3RyaW5nWzddIC0gbmFtZXMgb2YgdGhlIGRheXMgZnJvbSBTdW5kYXkgKG9wdGlvbmFsKVxuXHQgKlx0XHRcdFx0XHRtb250aE5hbWVzU2hvcnQgc3RyaW5nWzEyXSAtIGFiYnJldmlhdGVkIG5hbWVzIG9mIHRoZSBtb250aHMgKG9wdGlvbmFsKVxuXHQgKlx0XHRcdFx0XHRtb250aE5hbWVzXHRcdHN0cmluZ1sxMl0gLSBuYW1lcyBvZiB0aGUgbW9udGhzIChvcHRpb25hbClcblx0ICogQHJldHVybiAgc3RyaW5nIC0gdGhlIGRhdGUgaW4gdGhlIGFib3ZlIGZvcm1hdFxuXHQgKi9cblx0Zm9ybWF0RGF0ZTogZnVuY3Rpb24gKGZvcm1hdCwgZGF0ZSwgc2V0dGluZ3MpIHtcblx0XHRpZiAoIWRhdGUpIHtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblxuXHRcdHZhciBpRm9ybWF0LFxuXHRcdFx0ZGF5TmFtZXNTaG9ydCA9IChzZXR0aW5ncyA/IHNldHRpbmdzLmRheU5hbWVzU2hvcnQgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LFxuXHRcdFx0ZGF5TmFtZXMgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5kYXlOYW1lcyA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzLFxuXHRcdFx0bW9udGhOYW1lc1Nob3J0ID0gKHNldHRpbmdzID8gc2V0dGluZ3MubW9udGhOYW1lc1Nob3J0IDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LFxuXHRcdFx0bW9udGhOYW1lcyA9IChzZXR0aW5ncyA/IHNldHRpbmdzLm1vbnRoTmFtZXMgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLFxuXHRcdFx0Ly8gQ2hlY2sgd2hldGhlciBhIGZvcm1hdCBjaGFyYWN0ZXIgaXMgZG91YmxlZFxuXHRcdFx0bG9va0FoZWFkID0gZnVuY3Rpb24obWF0Y2gpIHtcblx0XHRcdFx0dmFyIG1hdGNoZXMgPSAoaUZvcm1hdCArIDEgPCBmb3JtYXQubGVuZ3RoICYmIGZvcm1hdC5jaGFyQXQoaUZvcm1hdCArIDEpID09PSBtYXRjaCk7XG5cdFx0XHRcdGlmIChtYXRjaGVzKSB7XG5cdFx0XHRcdFx0aUZvcm1hdCsrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtYXRjaGVzO1xuXHRcdFx0fSxcblx0XHRcdC8vIEZvcm1hdCBhIG51bWJlciwgd2l0aCBsZWFkaW5nIHplcm8gaWYgbmVjZXNzYXJ5XG5cdFx0XHRmb3JtYXROdW1iZXIgPSBmdW5jdGlvbihtYXRjaCwgdmFsdWUsIGxlbikge1xuXHRcdFx0XHR2YXIgbnVtID0gXCJcIiArIHZhbHVlO1xuXHRcdFx0XHRpZiAobG9va0FoZWFkKG1hdGNoKSkge1xuXHRcdFx0XHRcdHdoaWxlIChudW0ubGVuZ3RoIDwgbGVuKSB7XG5cdFx0XHRcdFx0XHRudW0gPSBcIjBcIiArIG51bTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG51bTtcblx0XHRcdH0sXG5cdFx0XHQvLyBGb3JtYXQgYSBuYW1lLCBzaG9ydCBvciBsb25nIGFzIHJlcXVlc3RlZFxuXHRcdFx0Zm9ybWF0TmFtZSA9IGZ1bmN0aW9uKG1hdGNoLCB2YWx1ZSwgc2hvcnROYW1lcywgbG9uZ05hbWVzKSB7XG5cdFx0XHRcdHJldHVybiAobG9va0FoZWFkKG1hdGNoKSA/IGxvbmdOYW1lc1t2YWx1ZV0gOiBzaG9ydE5hbWVzW3ZhbHVlXSk7XG5cdFx0XHR9LFxuXHRcdFx0b3V0cHV0ID0gXCJcIixcblx0XHRcdGxpdGVyYWwgPSBmYWxzZTtcblxuXHRcdGlmIChkYXRlKSB7XG5cdFx0XHRmb3IgKGlGb3JtYXQgPSAwOyBpRm9ybWF0IDwgZm9ybWF0Lmxlbmd0aDsgaUZvcm1hdCsrKSB7XG5cdFx0XHRcdGlmIChsaXRlcmFsKSB7XG5cdFx0XHRcdFx0aWYgKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkgPT09IFwiJ1wiICYmICFsb29rQWhlYWQoXCInXCIpKSB7XG5cdFx0XHRcdFx0XHRsaXRlcmFsID0gZmFsc2U7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG91dHB1dCArPSBmb3JtYXQuY2hhckF0KGlGb3JtYXQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzd2l0Y2ggKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpIHtcblx0XHRcdFx0XHRcdGNhc2UgXCJkXCI6XG5cdFx0XHRcdFx0XHRcdG91dHB1dCArPSBmb3JtYXROdW1iZXIoXCJkXCIsIGRhdGUuZ2V0RGF0ZSgpLCAyKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlIFwiRFwiOlxuXHRcdFx0XHRcdFx0XHRvdXRwdXQgKz0gZm9ybWF0TmFtZShcIkRcIiwgZGF0ZS5nZXREYXkoKSwgZGF5TmFtZXNTaG9ydCwgZGF5TmFtZXMpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgXCJvXCI6XG5cdFx0XHRcdFx0XHRcdG91dHB1dCArPSBmb3JtYXROdW1iZXIoXCJvXCIsXG5cdFx0XHRcdFx0XHRcdFx0TWF0aC5yb3VuZCgobmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDAsIDApLmdldFRpbWUoKSkgLyA4NjQwMDAwMCksIDMpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgXCJtXCI6XG5cdFx0XHRcdFx0XHRcdG91dHB1dCArPSBmb3JtYXROdW1iZXIoXCJtXCIsIGRhdGUuZ2V0TW9udGgoKSArIDEsIDIpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgXCJNXCI6XG5cdFx0XHRcdFx0XHRcdG91dHB1dCArPSBmb3JtYXROYW1lKFwiTVwiLCBkYXRlLmdldE1vbnRoKCksIG1vbnRoTmFtZXNTaG9ydCwgbW9udGhOYW1lcyk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSBcInlcIjpcblx0XHRcdFx0XHRcdFx0b3V0cHV0ICs9IChsb29rQWhlYWQoXCJ5XCIpID8gZGF0ZS5nZXRGdWxsWWVhcigpIDpcblx0XHRcdFx0XHRcdFx0XHQoZGF0ZS5nZXRZZWFyKCkgJSAxMDAgPCAxMCA/IFwiMFwiIDogXCJcIikgKyBkYXRlLmdldFllYXIoKSAlIDEwMCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSBcIkBcIjpcblx0XHRcdFx0XHRcdFx0b3V0cHV0ICs9IGRhdGUuZ2V0VGltZSgpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgXCIhXCI6XG5cdFx0XHRcdFx0XHRcdG91dHB1dCArPSBkYXRlLmdldFRpbWUoKSAqIDEwMDAwICsgdGhpcy5fdGlja3NUbzE5NzA7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSBcIidcIjpcblx0XHRcdFx0XHRcdFx0aWYgKGxvb2tBaGVhZChcIidcIikpIHtcblx0XHRcdFx0XHRcdFx0XHRvdXRwdXQgKz0gXCInXCI7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0bGl0ZXJhbCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRvdXRwdXQgKz0gZm9ybWF0LmNoYXJBdChpRm9ybWF0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fSxcblxuXHQvKiBFeHRyYWN0IGFsbCBwb3NzaWJsZSBjaGFyYWN0ZXJzIGZyb20gdGhlIGRhdGUgZm9ybWF0LiAqL1xuXHRfcG9zc2libGVDaGFyczogZnVuY3Rpb24gKGZvcm1hdCkge1xuXHRcdHZhciBpRm9ybWF0LFxuXHRcdFx0Y2hhcnMgPSBcIlwiLFxuXHRcdFx0bGl0ZXJhbCA9IGZhbHNlLFxuXHRcdFx0Ly8gQ2hlY2sgd2hldGhlciBhIGZvcm1hdCBjaGFyYWN0ZXIgaXMgZG91YmxlZFxuXHRcdFx0bG9va0FoZWFkID0gZnVuY3Rpb24obWF0Y2gpIHtcblx0XHRcdFx0dmFyIG1hdGNoZXMgPSAoaUZvcm1hdCArIDEgPCBmb3JtYXQubGVuZ3RoICYmIGZvcm1hdC5jaGFyQXQoaUZvcm1hdCArIDEpID09PSBtYXRjaCk7XG5cdFx0XHRcdGlmIChtYXRjaGVzKSB7XG5cdFx0XHRcdFx0aUZvcm1hdCsrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtYXRjaGVzO1xuXHRcdFx0fTtcblxuXHRcdGZvciAoaUZvcm1hdCA9IDA7IGlGb3JtYXQgPCBmb3JtYXQubGVuZ3RoOyBpRm9ybWF0KyspIHtcblx0XHRcdGlmIChsaXRlcmFsKSB7XG5cdFx0XHRcdGlmIChmb3JtYXQuY2hhckF0KGlGb3JtYXQpID09PSBcIidcIiAmJiAhbG9va0FoZWFkKFwiJ1wiKSkge1xuXHRcdFx0XHRcdGxpdGVyYWwgPSBmYWxzZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjaGFycyArPSBmb3JtYXQuY2hhckF0KGlGb3JtYXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzd2l0Y2ggKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpIHtcblx0XHRcdFx0XHRjYXNlIFwiZFwiOiBjYXNlIFwibVwiOiBjYXNlIFwieVwiOiBjYXNlIFwiQFwiOlxuXHRcdFx0XHRcdFx0Y2hhcnMgKz0gXCIwMTIzNDU2Nzg5XCI7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiRFwiOiBjYXNlIFwiTVwiOlxuXHRcdFx0XHRcdFx0cmV0dXJuIG51bGw7IC8vIEFjY2VwdCBhbnl0aGluZ1xuXHRcdFx0XHRcdGNhc2UgXCInXCI6XG5cdFx0XHRcdFx0XHRpZiAobG9va0FoZWFkKFwiJ1wiKSkge1xuXHRcdFx0XHRcdFx0XHRjaGFycyArPSBcIidcIjtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGxpdGVyYWwgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdGNoYXJzICs9IGZvcm1hdC5jaGFyQXQoaUZvcm1hdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNoYXJzO1xuXHR9LFxuXG5cdC8qIEdldCBhIHNldHRpbmcgdmFsdWUsIGRlZmF1bHRpbmcgaWYgbmVjZXNzYXJ5LiAqL1xuXHRfZ2V0OiBmdW5jdGlvbihpbnN0LCBuYW1lKSB7XG5cdFx0cmV0dXJuIGluc3Quc2V0dGluZ3NbbmFtZV0gIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRpbnN0LnNldHRpbmdzW25hbWVdIDogdGhpcy5fZGVmYXVsdHNbbmFtZV07XG5cdH0sXG5cblx0LyogUGFyc2UgZXhpc3RpbmcgZGF0ZSBhbmQgaW5pdGlhbGlzZSBkYXRlIHBpY2tlci4gKi9cblx0X3NldERhdGVGcm9tRmllbGQ6IGZ1bmN0aW9uKGluc3QsIG5vRGVmYXVsdCkge1xuXHRcdGlmIChpbnN0LmlucHV0LnZhbCgpID09PSBpbnN0Lmxhc3RWYWwpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgZGF0ZUZvcm1hdCA9IHRoaXMuX2dldChpbnN0LCBcImRhdGVGb3JtYXRcIiksXG5cdFx0XHRkYXRlcyA9IGluc3QubGFzdFZhbCA9IGluc3QuaW5wdXQgPyBpbnN0LmlucHV0LnZhbCgpIDogbnVsbCxcblx0XHRcdGRlZmF1bHREYXRlID0gdGhpcy5fZ2V0RGVmYXVsdERhdGUoaW5zdCksXG5cdFx0XHRkYXRlID0gZGVmYXVsdERhdGUsXG5cdFx0XHRzZXR0aW5ncyA9IHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KTtcblxuXHRcdHRyeSB7XG5cdFx0XHRkYXRlID0gdGhpcy5wYXJzZURhdGUoZGF0ZUZvcm1hdCwgZGF0ZXMsIHNldHRpbmdzKSB8fCBkZWZhdWx0RGF0ZTtcblx0XHR9IGNhdGNoIChldmVudCkge1xuXHRcdFx0ZGF0ZXMgPSAobm9EZWZhdWx0ID8gXCJcIiA6IGRhdGVzKTtcblx0XHR9XG5cdFx0aW5zdC5zZWxlY3RlZERheSA9IGRhdGUuZ2V0RGF0ZSgpO1xuXHRcdGluc3QuZHJhd01vbnRoID0gaW5zdC5zZWxlY3RlZE1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuXHRcdGluc3QuZHJhd1llYXIgPSBpbnN0LnNlbGVjdGVkWWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcblx0XHRpbnN0LmN1cnJlbnREYXkgPSAoZGF0ZXMgPyBkYXRlLmdldERhdGUoKSA6IDApO1xuXHRcdGluc3QuY3VycmVudE1vbnRoID0gKGRhdGVzID8gZGF0ZS5nZXRNb250aCgpIDogMCk7XG5cdFx0aW5zdC5jdXJyZW50WWVhciA9IChkYXRlcyA/IGRhdGUuZ2V0RnVsbFllYXIoKSA6IDApO1xuXHRcdHRoaXMuX2FkanVzdEluc3REYXRlKGluc3QpO1xuXHR9LFxuXG5cdC8qIFJldHJpZXZlIHRoZSBkZWZhdWx0IGRhdGUgc2hvd24gb24gb3BlbmluZy4gKi9cblx0X2dldERlZmF1bHREYXRlOiBmdW5jdGlvbihpbnN0KSB7XG5cdFx0cmV0dXJuIHRoaXMuX3Jlc3RyaWN0TWluTWF4KGluc3QsXG5cdFx0XHR0aGlzLl9kZXRlcm1pbmVEYXRlKGluc3QsIHRoaXMuX2dldChpbnN0LCBcImRlZmF1bHREYXRlXCIpLCBuZXcgRGF0ZSgpKSk7XG5cdH0sXG5cblx0LyogQSBkYXRlIG1heSBiZSBzcGVjaWZpZWQgYXMgYW4gZXhhY3QgdmFsdWUgb3IgYSByZWxhdGl2ZSBvbmUuICovXG5cdF9kZXRlcm1pbmVEYXRlOiBmdW5jdGlvbihpbnN0LCBkYXRlLCBkZWZhdWx0RGF0ZSkge1xuXHRcdHZhciBvZmZzZXROdW1lcmljID0gZnVuY3Rpb24ob2Zmc2V0KSB7XG5cdFx0XHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTtcblx0XHRcdFx0ZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgb2Zmc2V0KTtcblx0XHRcdFx0cmV0dXJuIGRhdGU7XG5cdFx0XHR9LFxuXHRcdFx0b2Zmc2V0U3RyaW5nID0gZnVuY3Rpb24ob2Zmc2V0KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cmV0dXJuICQuZGF0ZXBpY2tlci5wYXJzZURhdGUoJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgXCJkYXRlRm9ybWF0XCIpLFxuXHRcdFx0XHRcdFx0b2Zmc2V0LCAkLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2F0Y2ggKGUpIHtcblx0XHRcdFx0XHQvLyBJZ25vcmVcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBkYXRlID0gKG9mZnNldC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eYy8pID9cblx0XHRcdFx0XHQkLmRhdGVwaWNrZXIuX2dldERhdGUoaW5zdCkgOiBudWxsKSB8fCBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksXG5cdFx0XHRcdFx0bW9udGggPSBkYXRlLmdldE1vbnRoKCksXG5cdFx0XHRcdFx0ZGF5ID0gZGF0ZS5nZXREYXRlKCksXG5cdFx0XHRcdFx0cGF0dGVybiA9IC8oWytcXC1dP1swLTldKylcXHMqKGR8RHx3fFd8bXxNfHl8WSk/L2csXG5cdFx0XHRcdFx0bWF0Y2hlcyA9IHBhdHRlcm4uZXhlYyhvZmZzZXQpO1xuXG5cdFx0XHRcdHdoaWxlIChtYXRjaGVzKSB7XG5cdFx0XHRcdFx0c3dpdGNoIChtYXRjaGVzWzJdIHx8IFwiZFwiKSB7XG5cdFx0XHRcdFx0XHRjYXNlIFwiZFwiIDogY2FzZSBcIkRcIiA6XG5cdFx0XHRcdFx0XHRcdGRheSArPSBwYXJzZUludChtYXRjaGVzWzFdLDEwKTsgYnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlIFwid1wiIDogY2FzZSBcIldcIiA6XG5cdFx0XHRcdFx0XHRcdGRheSArPSBwYXJzZUludChtYXRjaGVzWzFdLDEwKSAqIDc7IGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSBcIm1cIiA6IGNhc2UgXCJNXCIgOlxuXHRcdFx0XHRcdFx0XHRtb250aCArPSBwYXJzZUludChtYXRjaGVzWzFdLDEwKTtcblx0XHRcdFx0XHRcdFx0ZGF5ID0gTWF0aC5taW4oZGF5LCAkLmRhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSBcInlcIjogY2FzZSBcIllcIiA6XG5cdFx0XHRcdFx0XHRcdHllYXIgKz0gcGFyc2VJbnQobWF0Y2hlc1sxXSwxMCk7XG5cdFx0XHRcdFx0XHRcdGRheSA9IE1hdGgubWluKGRheSwgJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCh5ZWFyLCBtb250aCkpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bWF0Y2hlcyA9IHBhdHRlcm4uZXhlYyhvZmZzZXQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcblx0XHRcdH0sXG5cdFx0XHRuZXdEYXRlID0gKGRhdGUgPT0gbnVsbCB8fCBkYXRlID09PSBcIlwiID8gZGVmYXVsdERhdGUgOiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIgPyBvZmZzZXRTdHJpbmcoZGF0ZSkgOlxuXHRcdFx0XHQodHlwZW9mIGRhdGUgPT09IFwibnVtYmVyXCIgPyAoaXNOYU4oZGF0ZSkgPyBkZWZhdWx0RGF0ZSA6IG9mZnNldE51bWVyaWMoZGF0ZSkpIDogbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpKSkpO1xuXG5cdFx0bmV3RGF0ZSA9IChuZXdEYXRlICYmIG5ld0RhdGUudG9TdHJpbmcoKSA9PT0gXCJJbnZhbGlkIERhdGVcIiA/IGRlZmF1bHREYXRlIDogbmV3RGF0ZSk7XG5cdFx0aWYgKG5ld0RhdGUpIHtcblx0XHRcdG5ld0RhdGUuc2V0SG91cnMoMCk7XG5cdFx0XHRuZXdEYXRlLnNldE1pbnV0ZXMoMCk7XG5cdFx0XHRuZXdEYXRlLnNldFNlY29uZHMoMCk7XG5cdFx0XHRuZXdEYXRlLnNldE1pbGxpc2Vjb25kcygwKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ld0RhdGUpO1xuXHR9LFxuXG5cdC8qIEhhbmRsZSBzd2l0Y2ggdG8vZnJvbSBkYXlsaWdodCBzYXZpbmcuXG5cdCAqIEhvdXJzIG1heSBiZSBub24temVybyBvbiBkYXlsaWdodCBzYXZpbmcgY3V0LW92ZXI6XG5cdCAqID4gMTIgd2hlbiBtaWRuaWdodCBjaGFuZ2VvdmVyLCBidXQgdGhlbiBjYW5ub3QgZ2VuZXJhdGVcblx0ICogbWlkbmlnaHQgZGF0ZXRpbWUsIHNvIGp1bXAgdG8gMUFNLCBvdGhlcndpc2UgcmVzZXQuXG5cdCAqIEBwYXJhbSAgZGF0ZSAgKERhdGUpIHRoZSBkYXRlIHRvIGNoZWNrXG5cdCAqIEByZXR1cm4gIChEYXRlKSB0aGUgY29ycmVjdGVkIGRhdGVcblx0ICovXG5cdF9kYXlsaWdodFNhdmluZ0FkanVzdDogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdGlmICghZGF0ZSkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGRhdGUuc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpID4gMTIgPyBkYXRlLmdldEhvdXJzKCkgKyAyIDogMCk7XG5cdFx0cmV0dXJuIGRhdGU7XG5cdH0sXG5cblx0LyogU2V0IHRoZSBkYXRlKHMpIGRpcmVjdGx5LiAqL1xuXHRfc2V0RGF0ZTogZnVuY3Rpb24oaW5zdCwgZGF0ZSwgbm9DaGFuZ2UpIHtcblx0XHR2YXIgY2xlYXIgPSAhZGF0ZSxcblx0XHRcdG9yaWdNb250aCA9IGluc3Quc2VsZWN0ZWRNb250aCxcblx0XHRcdG9yaWdZZWFyID0gaW5zdC5zZWxlY3RlZFllYXIsXG5cdFx0XHRuZXdEYXRlID0gdGhpcy5fcmVzdHJpY3RNaW5NYXgoaW5zdCwgdGhpcy5fZGV0ZXJtaW5lRGF0ZShpbnN0LCBkYXRlLCBuZXcgRGF0ZSgpKSk7XG5cblx0XHRpbnN0LnNlbGVjdGVkRGF5ID0gaW5zdC5jdXJyZW50RGF5ID0gbmV3RGF0ZS5nZXREYXRlKCk7XG5cdFx0aW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBpbnN0LmN1cnJlbnRNb250aCA9IG5ld0RhdGUuZ2V0TW9udGgoKTtcblx0XHRpbnN0LmRyYXdZZWFyID0gaW5zdC5zZWxlY3RlZFllYXIgPSBpbnN0LmN1cnJlbnRZZWFyID0gbmV3RGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdGlmICgob3JpZ01vbnRoICE9PSBpbnN0LnNlbGVjdGVkTW9udGggfHwgb3JpZ1llYXIgIT09IGluc3Quc2VsZWN0ZWRZZWFyKSAmJiAhbm9DaGFuZ2UpIHtcblx0XHRcdHRoaXMuX25vdGlmeUNoYW5nZShpbnN0KTtcblx0XHR9XG5cdFx0dGhpcy5fYWRqdXN0SW5zdERhdGUoaW5zdCk7XG5cdFx0aWYgKGluc3QuaW5wdXQpIHtcblx0XHRcdGluc3QuaW5wdXQudmFsKGNsZWFyID8gXCJcIiA6IHRoaXMuX2Zvcm1hdERhdGUoaW5zdCkpO1xuXHRcdH1cblx0fSxcblxuXHQvKiBSZXRyaWV2ZSB0aGUgZGF0ZShzKSBkaXJlY3RseS4gKi9cblx0X2dldERhdGU6IGZ1bmN0aW9uKGluc3QpIHtcblx0XHR2YXIgc3RhcnREYXRlID0gKCFpbnN0LmN1cnJlbnRZZWFyIHx8IChpbnN0LmlucHV0ICYmIGluc3QuaW5wdXQudmFsKCkgPT09IFwiXCIpID8gbnVsbCA6XG5cdFx0XHR0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShcblx0XHRcdGluc3QuY3VycmVudFllYXIsIGluc3QuY3VycmVudE1vbnRoLCBpbnN0LmN1cnJlbnREYXkpKSk7XG5cdFx0XHRyZXR1cm4gc3RhcnREYXRlO1xuXHR9LFxuXG5cdC8qIEF0dGFjaCB0aGUgb254eHggaGFuZGxlcnMuICBUaGVzZSBhcmUgZGVjbGFyZWQgc3RhdGljYWxseSBzb1xuXHQgKiB0aGV5IHdvcmsgd2l0aCBzdGF0aWMgY29kZSB0cmFuc2Zvcm1lcnMgbGlrZSBDYWphLlxuXHQgKi9cblx0X2F0dGFjaEhhbmRsZXJzOiBmdW5jdGlvbihpbnN0KSB7XG5cdFx0dmFyIHN0ZXBNb250aHMgPSB0aGlzLl9nZXQoaW5zdCwgXCJzdGVwTW9udGhzXCIpLFxuXHRcdFx0aWQgPSBcIiNcIiArIGluc3QuaWQucmVwbGFjZSggL1xcXFxcXFxcL2csIFwiXFxcXFwiICk7XG5cdFx0aW5zdC5kcERpdi5maW5kKFwiW2RhdGEtaGFuZGxlcl1cIikubWFwKGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBoYW5kbGVyID0ge1xuXHRcdFx0XHRwcmV2OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGlkLCAtc3RlcE1vbnRocywgXCJNXCIpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRuZXh0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGlkLCArc3RlcE1vbnRocywgXCJNXCIpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRoaWRlOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2RheTogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdCQuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGlkKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2VsZWN0RGF5OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9zZWxlY3REYXkoaWQsICt0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtbW9udGhcIiksICt0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEteWVhclwiKSwgdGhpcyk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZWxlY3RNb250aDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdCQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKGlkLCB0aGlzLCBcIk1cIik7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZWxlY3RZZWFyOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0JC5kYXRlcGlja2VyLl9zZWxlY3RNb250aFllYXIoaWQsIHRoaXMsIFwiWVwiKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHQkKHRoaXMpLmJpbmQodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWV2ZW50XCIpLCBoYW5kbGVyW3RoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1oYW5kbGVyXCIpXSk7XG5cdFx0fSk7XG5cdH0sXG5cblx0LyogR2VuZXJhdGUgdGhlIEhUTUwgZm9yIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkYXRlIHBpY2tlci4gKi9cblx0X2dlbmVyYXRlSFRNTDogZnVuY3Rpb24oaW5zdCkge1xuXHRcdHZhciBtYXhEcmF3LCBwcmV2VGV4dCwgcHJldiwgbmV4dFRleHQsIG5leHQsIGN1cnJlbnRUZXh0LCBnb3RvRGF0ZSxcblx0XHRcdGNvbnRyb2xzLCBidXR0b25QYW5lbCwgZmlyc3REYXksIHNob3dXZWVrLCBkYXlOYW1lcywgZGF5TmFtZXNNaW4sXG5cdFx0XHRtb250aE5hbWVzLCBtb250aE5hbWVzU2hvcnQsIGJlZm9yZVNob3dEYXksIHNob3dPdGhlck1vbnRocyxcblx0XHRcdHNlbGVjdE90aGVyTW9udGhzLCBkZWZhdWx0RGF0ZSwgaHRtbCwgZG93LCByb3csIGdyb3VwLCBjb2wsIHNlbGVjdGVkRGF0ZSxcblx0XHRcdGNvcm5lckNsYXNzLCBjYWxlbmRlciwgdGhlYWQsIGRheSwgZGF5c0luTW9udGgsIGxlYWREYXlzLCBjdXJSb3dzLCBudW1Sb3dzLFxuXHRcdFx0cHJpbnREYXRlLCBkUm93LCB0Ym9keSwgZGF5U2V0dGluZ3MsIG90aGVyTW9udGgsIHVuc2VsZWN0YWJsZSxcblx0XHRcdHRlbXBEYXRlID0gbmV3IERhdGUoKSxcblx0XHRcdHRvZGF5ID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoXG5cdFx0XHRcdG5ldyBEYXRlKHRlbXBEYXRlLmdldEZ1bGxZZWFyKCksIHRlbXBEYXRlLmdldE1vbnRoKCksIHRlbXBEYXRlLmdldERhdGUoKSkpLCAvLyBjbGVhciB0aW1lXG5cdFx0XHRpc1JUTCA9IHRoaXMuX2dldChpbnN0LCBcImlzUlRMXCIpLFxuXHRcdFx0c2hvd0J1dHRvblBhbmVsID0gdGhpcy5fZ2V0KGluc3QsIFwic2hvd0J1dHRvblBhbmVsXCIpLFxuXHRcdFx0aGlkZUlmTm9QcmV2TmV4dCA9IHRoaXMuX2dldChpbnN0LCBcImhpZGVJZk5vUHJldk5leHRcIiksXG5cdFx0XHRuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0ID0gdGhpcy5fZ2V0KGluc3QsIFwibmF2aWdhdGlvbkFzRGF0ZUZvcm1hdFwiKSxcblx0XHRcdG51bU1vbnRocyA9IHRoaXMuX2dldE51bWJlck9mTW9udGhzKGluc3QpLFxuXHRcdFx0c2hvd0N1cnJlbnRBdFBvcyA9IHRoaXMuX2dldChpbnN0LCBcInNob3dDdXJyZW50QXRQb3NcIiksXG5cdFx0XHRzdGVwTW9udGhzID0gdGhpcy5fZ2V0KGluc3QsIFwic3RlcE1vbnRoc1wiKSxcblx0XHRcdGlzTXVsdGlNb250aCA9IChudW1Nb250aHNbMF0gIT09IDEgfHwgbnVtTW9udGhzWzFdICE9PSAxKSxcblx0XHRcdGN1cnJlbnREYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoKCFpbnN0LmN1cnJlbnREYXkgPyBuZXcgRGF0ZSg5OTk5LCA5LCA5KSA6XG5cdFx0XHRcdG5ldyBEYXRlKGluc3QuY3VycmVudFllYXIsIGluc3QuY3VycmVudE1vbnRoLCBpbnN0LmN1cnJlbnREYXkpKSksXG5cdFx0XHRtaW5EYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCBcIm1pblwiKSxcblx0XHRcdG1heERhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIFwibWF4XCIpLFxuXHRcdFx0ZHJhd01vbnRoID0gaW5zdC5kcmF3TW9udGggLSBzaG93Q3VycmVudEF0UG9zLFxuXHRcdFx0ZHJhd1llYXIgPSBpbnN0LmRyYXdZZWFyO1xuXG5cdFx0aWYgKGRyYXdNb250aCA8IDApIHtcblx0XHRcdGRyYXdNb250aCArPSAxMjtcblx0XHRcdGRyYXdZZWFyLS07XG5cdFx0fVxuXHRcdGlmIChtYXhEYXRlKSB7XG5cdFx0XHRtYXhEcmF3ID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUobWF4RGF0ZS5nZXRGdWxsWWVhcigpLFxuXHRcdFx0XHRtYXhEYXRlLmdldE1vbnRoKCkgLSAobnVtTW9udGhzWzBdICogbnVtTW9udGhzWzFdKSArIDEsIG1heERhdGUuZ2V0RGF0ZSgpKSk7XG5cdFx0XHRtYXhEcmF3ID0gKG1pbkRhdGUgJiYgbWF4RHJhdyA8IG1pbkRhdGUgPyBtaW5EYXRlIDogbWF4RHJhdyk7XG5cdFx0XHR3aGlsZSAodGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsIGRyYXdNb250aCwgMSkpID4gbWF4RHJhdykge1xuXHRcdFx0XHRkcmF3TW9udGgtLTtcblx0XHRcdFx0aWYgKGRyYXdNb250aCA8IDApIHtcblx0XHRcdFx0XHRkcmF3TW9udGggPSAxMTtcblx0XHRcdFx0XHRkcmF3WWVhci0tO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGluc3QuZHJhd01vbnRoID0gZHJhd01vbnRoO1xuXHRcdGluc3QuZHJhd1llYXIgPSBkcmF3WWVhcjtcblxuXHRcdHByZXZUZXh0ID0gdGhpcy5fZ2V0KGluc3QsIFwicHJldlRleHRcIik7XG5cdFx0cHJldlRleHQgPSAoIW5hdmlnYXRpb25Bc0RhdGVGb3JtYXQgPyBwcmV2VGV4dCA6IHRoaXMuZm9ybWF0RGF0ZShwcmV2VGV4dCxcblx0XHRcdHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLCBkcmF3TW9udGggLSBzdGVwTW9udGhzLCAxKSksXG5cdFx0XHR0aGlzLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpKTtcblxuXHRcdHByZXYgPSAodGhpcy5fY2FuQWRqdXN0TW9udGgoaW5zdCwgLTEsIGRyYXdZZWFyLCBkcmF3TW9udGgpID9cblx0XHRcdFwiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J3ByZXYnIGRhdGEtZXZlbnQ9J2NsaWNrJ1wiICtcblx0XHRcdFwiIHRpdGxlPSdcIiArIHByZXZUZXh0ICsgXCInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLVwiICsgKCBpc1JUTCA/IFwiZVwiIDogXCJ3XCIpICsgXCInPlwiICsgcHJldlRleHQgKyBcIjwvc3Bhbj48L2E+XCIgOlxuXHRcdFx0KGhpZGVJZk5vUHJldk5leHQgPyBcIlwiIDogXCI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQnIHRpdGxlPSdcIisgcHJldlRleHQgK1wiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS1cIiArICggaXNSVEwgPyBcImVcIiA6IFwid1wiKSArIFwiJz5cIiArIHByZXZUZXh0ICsgXCI8L3NwYW4+PC9hPlwiKSk7XG5cblx0XHRuZXh0VGV4dCA9IHRoaXMuX2dldChpbnN0LCBcIm5leHRUZXh0XCIpO1xuXHRcdG5leHRUZXh0ID0gKCFuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0ID8gbmV4dFRleHQgOiB0aGlzLmZvcm1hdERhdGUobmV4dFRleHQsXG5cdFx0XHR0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhciwgZHJhd01vbnRoICsgc3RlcE1vbnRocywgMSkpLFxuXHRcdFx0dGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKSk7XG5cblx0XHRuZXh0ID0gKHRoaXMuX2NhbkFkanVzdE1vbnRoKGluc3QsICsxLCBkcmF3WWVhciwgZHJhd01vbnRoKSA/XG5cdFx0XHRcIjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLW5leHQgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSduZXh0JyBkYXRhLWV2ZW50PSdjbGljaydcIiArXG5cdFx0XHRcIiB0aXRsZT0nXCIgKyBuZXh0VGV4dCArIFwiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS1cIiArICggaXNSVEwgPyBcIndcIiA6IFwiZVwiKSArIFwiJz5cIiArIG5leHRUZXh0ICsgXCI8L3NwYW4+PC9hPlwiIDpcblx0XHRcdChoaWRlSWZOb1ByZXZOZXh0ID8gXCJcIiA6IFwiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nXCIrIG5leHRUZXh0ICsgXCInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLVwiICsgKCBpc1JUTCA/IFwid1wiIDogXCJlXCIpICsgXCInPlwiICsgbmV4dFRleHQgKyBcIjwvc3Bhbj48L2E+XCIpKTtcblxuXHRcdGN1cnJlbnRUZXh0ID0gdGhpcy5fZ2V0KGluc3QsIFwiY3VycmVudFRleHRcIik7XG5cdFx0Z290b0RhdGUgPSAodGhpcy5fZ2V0KGluc3QsIFwiZ290b0N1cnJlbnRcIikgJiYgaW5zdC5jdXJyZW50RGF5ID8gY3VycmVudERhdGUgOiB0b2RheSk7XG5cdFx0Y3VycmVudFRleHQgPSAoIW5hdmlnYXRpb25Bc0RhdGVGb3JtYXQgPyBjdXJyZW50VGV4dCA6XG5cdFx0XHR0aGlzLmZvcm1hdERhdGUoY3VycmVudFRleHQsIGdvdG9EYXRlLCB0aGlzLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpKTtcblxuXHRcdGNvbnRyb2xzID0gKCFpbnN0LmlubGluZSA/IFwiPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWNsb3NlIHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktcHJpbWFyeSB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J2hpZGUnIGRhdGEtZXZlbnQ9J2NsaWNrJz5cIiArXG5cdFx0XHR0aGlzLl9nZXQoaW5zdCwgXCJjbG9zZVRleHRcIikgKyBcIjwvYnV0dG9uPlwiIDogXCJcIik7XG5cblx0XHRidXR0b25QYW5lbCA9IChzaG93QnV0dG9uUGFuZWwpID8gXCI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQnPlwiICsgKGlzUlRMID8gY29udHJvbHMgOiBcIlwiKSArXG5cdFx0XHQodGhpcy5faXNJblJhbmdlKGluc3QsIGdvdG9EYXRlKSA/IFwiPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWN1cnJlbnQgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1zZWNvbmRhcnkgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSd0b2RheScgZGF0YS1ldmVudD0nY2xpY2snXCIgK1xuXHRcdFx0XCI+XCIgKyBjdXJyZW50VGV4dCArIFwiPC9idXR0b24+XCIgOiBcIlwiKSArIChpc1JUTCA/IFwiXCIgOiBjb250cm9scykgKyBcIjwvZGl2PlwiIDogXCJcIjtcblxuXHRcdGZpcnN0RGF5ID0gcGFyc2VJbnQodGhpcy5fZ2V0KGluc3QsIFwiZmlyc3REYXlcIiksMTApO1xuXHRcdGZpcnN0RGF5ID0gKGlzTmFOKGZpcnN0RGF5KSA/IDAgOiBmaXJzdERheSk7XG5cblx0XHRzaG93V2VlayA9IHRoaXMuX2dldChpbnN0LCBcInNob3dXZWVrXCIpO1xuXHRcdGRheU5hbWVzID0gdGhpcy5fZ2V0KGluc3QsIFwiZGF5TmFtZXNcIik7XG5cdFx0ZGF5TmFtZXNNaW4gPSB0aGlzLl9nZXQoaW5zdCwgXCJkYXlOYW1lc01pblwiKTtcblx0XHRtb250aE5hbWVzID0gdGhpcy5fZ2V0KGluc3QsIFwibW9udGhOYW1lc1wiKTtcblx0XHRtb250aE5hbWVzU2hvcnQgPSB0aGlzLl9nZXQoaW5zdCwgXCJtb250aE5hbWVzU2hvcnRcIik7XG5cdFx0YmVmb3JlU2hvd0RheSA9IHRoaXMuX2dldChpbnN0LCBcImJlZm9yZVNob3dEYXlcIik7XG5cdFx0c2hvd090aGVyTW9udGhzID0gdGhpcy5fZ2V0KGluc3QsIFwic2hvd090aGVyTW9udGhzXCIpO1xuXHRcdHNlbGVjdE90aGVyTW9udGhzID0gdGhpcy5fZ2V0KGluc3QsIFwic2VsZWN0T3RoZXJNb250aHNcIik7XG5cdFx0ZGVmYXVsdERhdGUgPSB0aGlzLl9nZXREZWZhdWx0RGF0ZShpbnN0KTtcblx0XHRodG1sID0gXCJcIjtcblx0XHRkb3c7XG5cdFx0Zm9yIChyb3cgPSAwOyByb3cgPCBudW1Nb250aHNbMF07IHJvdysrKSB7XG5cdFx0XHRncm91cCA9IFwiXCI7XG5cdFx0XHR0aGlzLm1heFJvd3MgPSA0O1xuXHRcdFx0Zm9yIChjb2wgPSAwOyBjb2wgPCBudW1Nb250aHNbMV07IGNvbCsrKSB7XG5cdFx0XHRcdHNlbGVjdGVkRGF0ZSA9IHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLCBkcmF3TW9udGgsIGluc3Quc2VsZWN0ZWREYXkpKTtcblx0XHRcdFx0Y29ybmVyQ2xhc3MgPSBcIiB1aS1jb3JuZXItYWxsXCI7XG5cdFx0XHRcdGNhbGVuZGVyID0gXCJcIjtcblx0XHRcdFx0aWYgKGlzTXVsdGlNb250aCkge1xuXHRcdFx0XHRcdGNhbGVuZGVyICs9IFwiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1ncm91cFwiO1xuXHRcdFx0XHRcdGlmIChudW1Nb250aHNbMV0gPiAxKSB7XG5cdFx0XHRcdFx0XHRzd2l0Y2ggKGNvbCkge1xuXHRcdFx0XHRcdFx0XHRjYXNlIDA6IGNhbGVuZGVyICs9IFwiIHVpLWRhdGVwaWNrZXItZ3JvdXAtZmlyc3RcIjtcblx0XHRcdFx0XHRcdFx0XHRjb3JuZXJDbGFzcyA9IFwiIHVpLWNvcm5lci1cIiArIChpc1JUTCA/IFwicmlnaHRcIiA6IFwibGVmdFwiKTsgYnJlYWs7XG5cdFx0XHRcdFx0XHRcdGNhc2UgbnVtTW9udGhzWzFdLTE6IGNhbGVuZGVyICs9IFwiIHVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdFwiO1xuXHRcdFx0XHRcdFx0XHRcdGNvcm5lckNsYXNzID0gXCIgdWktY29ybmVyLVwiICsgKGlzUlRMID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCIpOyBicmVhaztcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdDogY2FsZW5kZXIgKz0gXCIgdWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGVcIjsgY29ybmVyQ2xhc3MgPSBcIlwiOyBicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y2FsZW5kZXIgKz0gXCInPlwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNhbGVuZGVyICs9IFwiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1oZWFkZXIgdWktd2lkZ2V0LWhlYWRlciB1aS1oZWxwZXItY2xlYXJmaXhcIiArIGNvcm5lckNsYXNzICsgXCInPlwiICtcblx0XHRcdFx0XHQoL2FsbHxsZWZ0Ly50ZXN0KGNvcm5lckNsYXNzKSAmJiByb3cgPT09IDAgPyAoaXNSVEwgPyBuZXh0IDogcHJldikgOiBcIlwiKSArXG5cdFx0XHRcdFx0KC9hbGx8cmlnaHQvLnRlc3QoY29ybmVyQ2xhc3MpICYmIHJvdyA9PT0gMCA/IChpc1JUTCA/IHByZXYgOiBuZXh0KSA6IFwiXCIpICtcblx0XHRcdFx0XHR0aGlzLl9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcihpbnN0LCBkcmF3TW9udGgsIGRyYXdZZWFyLCBtaW5EYXRlLCBtYXhEYXRlLFxuXHRcdFx0XHRcdHJvdyA+IDAgfHwgY29sID4gMCwgbW9udGhOYW1lcywgbW9udGhOYW1lc1Nob3J0KSArIC8vIGRyYXcgbW9udGggaGVhZGVyc1xuXHRcdFx0XHRcdFwiPC9kaXY+PHRhYmxlIGNsYXNzPSd1aS1kYXRlcGlja2VyLWNhbGVuZGFyJz48dGhlYWQ+XCIgK1xuXHRcdFx0XHRcdFwiPHRyPlwiO1xuXHRcdFx0XHR0aGVhZCA9IChzaG93V2VlayA/IFwiPHRoIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstY29sJz5cIiArIHRoaXMuX2dldChpbnN0LCBcIndlZWtIZWFkZXJcIikgKyBcIjwvdGg+XCIgOiBcIlwiKTtcblx0XHRcdFx0Zm9yIChkb3cgPSAwOyBkb3cgPCA3OyBkb3crKykgeyAvLyBkYXlzIG9mIHRoZSB3ZWVrXG5cdFx0XHRcdFx0ZGF5ID0gKGRvdyArIGZpcnN0RGF5KSAlIDc7XG5cdFx0XHRcdFx0dGhlYWQgKz0gXCI8dGggc2NvcGU9J2NvbCdcIiArICgoZG93ICsgZmlyc3REYXkgKyA2KSAlIDcgPj0gNSA/IFwiIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstZW5kJ1wiIDogXCJcIikgKyBcIj5cIiArXG5cdFx0XHRcdFx0XHRcIjxzcGFuIHRpdGxlPSdcIiArIGRheU5hbWVzW2RheV0gKyBcIic+XCIgKyBkYXlOYW1lc01pbltkYXldICsgXCI8L3NwYW4+PC90aD5cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYWxlbmRlciArPSB0aGVhZCArIFwiPC90cj48L3RoZWFkPjx0Ym9keT5cIjtcblx0XHRcdFx0ZGF5c0luTW9udGggPSB0aGlzLl9nZXREYXlzSW5Nb250aChkcmF3WWVhciwgZHJhd01vbnRoKTtcblx0XHRcdFx0aWYgKGRyYXdZZWFyID09PSBpbnN0LnNlbGVjdGVkWWVhciAmJiBkcmF3TW9udGggPT09IGluc3Quc2VsZWN0ZWRNb250aCkge1xuXHRcdFx0XHRcdGluc3Quc2VsZWN0ZWREYXkgPSBNYXRoLm1pbihpbnN0LnNlbGVjdGVkRGF5LCBkYXlzSW5Nb250aCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGVhZERheXMgPSAodGhpcy5fZ2V0Rmlyc3REYXlPZk1vbnRoKGRyYXdZZWFyLCBkcmF3TW9udGgpIC0gZmlyc3REYXkgKyA3KSAlIDc7XG5cdFx0XHRcdGN1clJvd3MgPSBNYXRoLmNlaWwoKGxlYWREYXlzICsgZGF5c0luTW9udGgpIC8gNyk7IC8vIGNhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIHJvd3MgdG8gZ2VuZXJhdGVcblx0XHRcdFx0bnVtUm93cyA9IChpc011bHRpTW9udGggPyB0aGlzLm1heFJvd3MgPiBjdXJSb3dzID8gdGhpcy5tYXhSb3dzIDogY3VyUm93cyA6IGN1clJvd3MpOyAvL0lmIG11bHRpcGxlIG1vbnRocywgdXNlIHRoZSBoaWdoZXIgbnVtYmVyIG9mIHJvd3MgKHNlZSAjNzA0Mylcblx0XHRcdFx0dGhpcy5tYXhSb3dzID0gbnVtUm93cztcblx0XHRcdFx0cHJpbnREYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsIGRyYXdNb250aCwgMSAtIGxlYWREYXlzKSk7XG5cdFx0XHRcdGZvciAoZFJvdyA9IDA7IGRSb3cgPCBudW1Sb3dzOyBkUm93KyspIHsgLy8gY3JlYXRlIGRhdGUgcGlja2VyIHJvd3Ncblx0XHRcdFx0XHRjYWxlbmRlciArPSBcIjx0cj5cIjtcblx0XHRcdFx0XHR0Ym9keSA9ICghc2hvd1dlZWsgPyBcIlwiIDogXCI8dGQgY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1jb2wnPlwiICtcblx0XHRcdFx0XHRcdHRoaXMuX2dldChpbnN0LCBcImNhbGN1bGF0ZVdlZWtcIikocHJpbnREYXRlKSArIFwiPC90ZD5cIik7XG5cdFx0XHRcdFx0Zm9yIChkb3cgPSAwOyBkb3cgPCA3OyBkb3crKykgeyAvLyBjcmVhdGUgZGF0ZSBwaWNrZXIgZGF5c1xuXHRcdFx0XHRcdFx0ZGF5U2V0dGluZ3MgPSAoYmVmb3JlU2hvd0RheSA/XG5cdFx0XHRcdFx0XHRcdGJlZm9yZVNob3dEYXkuYXBwbHkoKGluc3QuaW5wdXQgPyBpbnN0LmlucHV0WzBdIDogbnVsbCksIFtwcmludERhdGVdKSA6IFt0cnVlLCBcIlwiXSk7XG5cdFx0XHRcdFx0XHRvdGhlck1vbnRoID0gKHByaW50RGF0ZS5nZXRNb250aCgpICE9PSBkcmF3TW9udGgpO1xuXHRcdFx0XHRcdFx0dW5zZWxlY3RhYmxlID0gKG90aGVyTW9udGggJiYgIXNlbGVjdE90aGVyTW9udGhzKSB8fCAhZGF5U2V0dGluZ3NbMF0gfHxcblx0XHRcdFx0XHRcdFx0KG1pbkRhdGUgJiYgcHJpbnREYXRlIDwgbWluRGF0ZSkgfHwgKG1heERhdGUgJiYgcHJpbnREYXRlID4gbWF4RGF0ZSk7XG5cdFx0XHRcdFx0XHR0Ym9keSArPSBcIjx0ZCBjbGFzcz0nXCIgK1xuXHRcdFx0XHRcdFx0XHQoKGRvdyArIGZpcnN0RGF5ICsgNikgJSA3ID49IDUgPyBcIiB1aS1kYXRlcGlja2VyLXdlZWstZW5kXCIgOiBcIlwiKSArIC8vIGhpZ2hsaWdodCB3ZWVrZW5kc1xuXHRcdFx0XHRcdFx0XHQob3RoZXJNb250aCA/IFwiIHVpLWRhdGVwaWNrZXItb3RoZXItbW9udGhcIiA6IFwiXCIpICsgLy8gaGlnaGxpZ2h0IGRheXMgZnJvbSBvdGhlciBtb250aHNcblx0XHRcdFx0XHRcdFx0KChwcmludERhdGUuZ2V0VGltZSgpID09PSBzZWxlY3RlZERhdGUuZ2V0VGltZSgpICYmIGRyYXdNb250aCA9PT0gaW5zdC5zZWxlY3RlZE1vbnRoICYmIGluc3QuX2tleUV2ZW50KSB8fCAvLyB1c2VyIHByZXNzZWQga2V5XG5cdFx0XHRcdFx0XHRcdChkZWZhdWx0RGF0ZS5nZXRUaW1lKCkgPT09IHByaW50RGF0ZS5nZXRUaW1lKCkgJiYgZGVmYXVsdERhdGUuZ2V0VGltZSgpID09PSBzZWxlY3RlZERhdGUuZ2V0VGltZSgpKSA/XG5cdFx0XHRcdFx0XHRcdC8vIG9yIGRlZmF1bHREYXRlIGlzIGN1cnJlbnQgcHJpbnRlZERhdGUgYW5kIGRlZmF1bHREYXRlIGlzIHNlbGVjdGVkRGF0ZVxuXHRcdFx0XHRcdFx0XHRcIiBcIiArIHRoaXMuX2RheU92ZXJDbGFzcyA6IFwiXCIpICsgLy8gaGlnaGxpZ2h0IHNlbGVjdGVkIGRheVxuXHRcdFx0XHRcdFx0XHQodW5zZWxlY3RhYmxlID8gXCIgXCIgKyB0aGlzLl91bnNlbGVjdGFibGVDbGFzcyArIFwiIHVpLXN0YXRlLWRpc2FibGVkXCI6IFwiXCIpICsgIC8vIGhpZ2hsaWdodCB1bnNlbGVjdGFibGUgZGF5c1xuXHRcdFx0XHRcdFx0XHQob3RoZXJNb250aCAmJiAhc2hvd090aGVyTW9udGhzID8gXCJcIiA6IFwiIFwiICsgZGF5U2V0dGluZ3NbMV0gKyAvLyBoaWdobGlnaHQgY3VzdG9tIGRhdGVzXG5cdFx0XHRcdFx0XHRcdChwcmludERhdGUuZ2V0VGltZSgpID09PSBjdXJyZW50RGF0ZS5nZXRUaW1lKCkgPyBcIiBcIiArIHRoaXMuX2N1cnJlbnRDbGFzcyA6IFwiXCIpICsgLy8gaGlnaGxpZ2h0IHNlbGVjdGVkIGRheVxuXHRcdFx0XHRcdFx0XHQocHJpbnREYXRlLmdldFRpbWUoKSA9PT0gdG9kYXkuZ2V0VGltZSgpID8gXCIgdWktZGF0ZXBpY2tlci10b2RheVwiIDogXCJcIikpICsgXCInXCIgKyAvLyBoaWdobGlnaHQgdG9kYXkgKGlmIGRpZmZlcmVudClcblx0XHRcdFx0XHRcdFx0KCghb3RoZXJNb250aCB8fCBzaG93T3RoZXJNb250aHMpICYmIGRheVNldHRpbmdzWzJdID8gXCIgdGl0bGU9J1wiICsgZGF5U2V0dGluZ3NbMl0ucmVwbGFjZSgvJy9nLCBcIiYjMzk7XCIpICsgXCInXCIgOiBcIlwiKSArIC8vIGNlbGwgdGl0bGVcblx0XHRcdFx0XHRcdFx0KHVuc2VsZWN0YWJsZSA/IFwiXCIgOiBcIiBkYXRhLWhhbmRsZXI9J3NlbGVjdERheScgZGF0YS1ldmVudD0nY2xpY2snIGRhdGEtbW9udGg9J1wiICsgcHJpbnREYXRlLmdldE1vbnRoKCkgKyBcIicgZGF0YS15ZWFyPSdcIiArIHByaW50RGF0ZS5nZXRGdWxsWWVhcigpICsgXCInXCIpICsgXCI+XCIgKyAvLyBhY3Rpb25zXG5cdFx0XHRcdFx0XHRcdChvdGhlck1vbnRoICYmICFzaG93T3RoZXJNb250aHMgPyBcIiYjeGEwO1wiIDogLy8gZGlzcGxheSBmb3Igb3RoZXIgbW9udGhzXG5cdFx0XHRcdFx0XHRcdCh1bnNlbGVjdGFibGUgPyBcIjxzcGFuIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0Jz5cIiArIHByaW50RGF0ZS5nZXREYXRlKCkgKyBcIjwvc3Bhbj5cIiA6IFwiPGEgY2xhc3M9J3VpLXN0YXRlLWRlZmF1bHRcIiArXG5cdFx0XHRcdFx0XHRcdChwcmludERhdGUuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKCkgPyBcIiB1aS1zdGF0ZS1oaWdobGlnaHRcIiA6IFwiXCIpICtcblx0XHRcdFx0XHRcdFx0KHByaW50RGF0ZS5nZXRUaW1lKCkgPT09IGN1cnJlbnREYXRlLmdldFRpbWUoKSA/IFwiIHVpLXN0YXRlLWFjdGl2ZVwiIDogXCJcIikgKyAvLyBoaWdobGlnaHQgc2VsZWN0ZWQgZGF5XG5cdFx0XHRcdFx0XHRcdChvdGhlck1vbnRoID8gXCIgdWktcHJpb3JpdHktc2Vjb25kYXJ5XCIgOiBcIlwiKSArIC8vIGRpc3Rpbmd1aXNoIGRhdGVzIGZyb20gb3RoZXIgbW9udGhzXG5cdFx0XHRcdFx0XHRcdFwiJyBocmVmPScjJz5cIiArIHByaW50RGF0ZS5nZXREYXRlKCkgKyBcIjwvYT5cIikpICsgXCI8L3RkPlwiOyAvLyBkaXNwbGF5IHNlbGVjdGFibGUgZGF0ZVxuXHRcdFx0XHRcdFx0cHJpbnREYXRlLnNldERhdGUocHJpbnREYXRlLmdldERhdGUoKSArIDEpO1xuXHRcdFx0XHRcdFx0cHJpbnREYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QocHJpbnREYXRlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y2FsZW5kZXIgKz0gdGJvZHkgKyBcIjwvdHI+XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZHJhd01vbnRoKys7XG5cdFx0XHRcdGlmIChkcmF3TW9udGggPiAxMSkge1xuXHRcdFx0XHRcdGRyYXdNb250aCA9IDA7XG5cdFx0XHRcdFx0ZHJhd1llYXIrKztcblx0XHRcdFx0fVxuXHRcdFx0XHRjYWxlbmRlciArPSBcIjwvdGJvZHk+PC90YWJsZT5cIiArIChpc011bHRpTW9udGggPyBcIjwvZGl2PlwiICtcblx0XHRcdFx0XHRcdFx0KChudW1Nb250aHNbMF0gPiAwICYmIGNvbCA9PT0gbnVtTW9udGhzWzFdLTEpID8gXCI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLXJvdy1icmVhayc+PC9kaXY+XCIgOiBcIlwiKSA6IFwiXCIpO1xuXHRcdFx0XHRncm91cCArPSBjYWxlbmRlcjtcblx0XHRcdH1cblx0XHRcdGh0bWwgKz0gZ3JvdXA7XG5cdFx0fVxuXHRcdGh0bWwgKz0gYnV0dG9uUGFuZWw7XG5cdFx0aW5zdC5fa2V5RXZlbnQgPSBmYWxzZTtcblx0XHRyZXR1cm4gaHRtbDtcblx0fSxcblxuXHQvKiBHZW5lcmF0ZSB0aGUgbW9udGggYW5kIHllYXIgaGVhZGVyLiAqL1xuXHRfZ2VuZXJhdGVNb250aFllYXJIZWFkZXI6IGZ1bmN0aW9uKGluc3QsIGRyYXdNb250aCwgZHJhd1llYXIsIG1pbkRhdGUsIG1heERhdGUsXG5cdFx0XHRzZWNvbmRhcnksIG1vbnRoTmFtZXMsIG1vbnRoTmFtZXNTaG9ydCkge1xuXG5cdFx0dmFyIGluTWluWWVhciwgaW5NYXhZZWFyLCBtb250aCwgeWVhcnMsIHRoaXNZZWFyLCBkZXRlcm1pbmVZZWFyLCB5ZWFyLCBlbmRZZWFyLFxuXHRcdFx0Y2hhbmdlTW9udGggPSB0aGlzLl9nZXQoaW5zdCwgXCJjaGFuZ2VNb250aFwiKSxcblx0XHRcdGNoYW5nZVllYXIgPSB0aGlzLl9nZXQoaW5zdCwgXCJjaGFuZ2VZZWFyXCIpLFxuXHRcdFx0c2hvd01vbnRoQWZ0ZXJZZWFyID0gdGhpcy5fZ2V0KGluc3QsIFwic2hvd01vbnRoQWZ0ZXJZZWFyXCIpLFxuXHRcdFx0aHRtbCA9IFwiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci10aXRsZSc+XCIsXG5cdFx0XHRtb250aEh0bWwgPSBcIlwiO1xuXG5cdFx0Ly8gbW9udGggc2VsZWN0aW9uXG5cdFx0aWYgKHNlY29uZGFyeSB8fCAhY2hhbmdlTW9udGgpIHtcblx0XHRcdG1vbnRoSHRtbCArPSBcIjxzcGFuIGNsYXNzPSd1aS1kYXRlcGlja2VyLW1vbnRoJz5cIiArIG1vbnRoTmFtZXNbZHJhd01vbnRoXSArIFwiPC9zcGFuPlwiO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbk1pblllYXIgPSAobWluRGF0ZSAmJiBtaW5EYXRlLmdldEZ1bGxZZWFyKCkgPT09IGRyYXdZZWFyKTtcblx0XHRcdGluTWF4WWVhciA9IChtYXhEYXRlICYmIG1heERhdGUuZ2V0RnVsbFllYXIoKSA9PT0gZHJhd1llYXIpO1xuXHRcdFx0bW9udGhIdG1sICs9IFwiPHNlbGVjdCBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCcgZGF0YS1oYW5kbGVyPSdzZWxlY3RNb250aCcgZGF0YS1ldmVudD0nY2hhbmdlJz5cIjtcblx0XHRcdGZvciAoIG1vbnRoID0gMDsgbW9udGggPCAxMjsgbW9udGgrKykge1xuXHRcdFx0XHRpZiAoKCFpbk1pblllYXIgfHwgbW9udGggPj0gbWluRGF0ZS5nZXRNb250aCgpKSAmJiAoIWluTWF4WWVhciB8fCBtb250aCA8PSBtYXhEYXRlLmdldE1vbnRoKCkpKSB7XG5cdFx0XHRcdFx0bW9udGhIdG1sICs9IFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBtb250aCArIFwiJ1wiICtcblx0XHRcdFx0XHRcdChtb250aCA9PT0gZHJhd01vbnRoID8gXCIgc2VsZWN0ZWQ9J3NlbGVjdGVkJ1wiIDogXCJcIikgK1xuXHRcdFx0XHRcdFx0XCI+XCIgKyBtb250aE5hbWVzU2hvcnRbbW9udGhdICsgXCI8L29wdGlvbj5cIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bW9udGhIdG1sICs9IFwiPC9zZWxlY3Q+XCI7XG5cdFx0fVxuXG5cdFx0aWYgKCFzaG93TW9udGhBZnRlclllYXIpIHtcblx0XHRcdGh0bWwgKz0gbW9udGhIdG1sICsgKHNlY29uZGFyeSB8fCAhKGNoYW5nZU1vbnRoICYmIGNoYW5nZVllYXIpID8gXCImI3hhMDtcIiA6IFwiXCIpO1xuXHRcdH1cblxuXHRcdC8vIHllYXIgc2VsZWN0aW9uXG5cdFx0aWYgKCAhaW5zdC55ZWFyc2h0bWwgKSB7XG5cdFx0XHRpbnN0LnllYXJzaHRtbCA9IFwiXCI7XG5cdFx0XHRpZiAoc2Vjb25kYXJ5IHx8ICFjaGFuZ2VZZWFyKSB7XG5cdFx0XHRcdGh0bWwgKz0gXCI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci15ZWFyJz5cIiArIGRyYXdZZWFyICsgXCI8L3NwYW4+XCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBkZXRlcm1pbmUgcmFuZ2Ugb2YgeWVhcnMgdG8gZGlzcGxheVxuXHRcdFx0XHR5ZWFycyA9IHRoaXMuX2dldChpbnN0LCBcInllYXJSYW5nZVwiKS5zcGxpdChcIjpcIik7XG5cdFx0XHRcdHRoaXNZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuXHRcdFx0XHRkZXRlcm1pbmVZZWFyID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdFx0XHR2YXIgeWVhciA9ICh2YWx1ZS5tYXRjaCgvY1srXFwtXS4qLykgPyBkcmF3WWVhciArIHBhcnNlSW50KHZhbHVlLnN1YnN0cmluZygxKSwgMTApIDpcblx0XHRcdFx0XHRcdCh2YWx1ZS5tYXRjaCgvWytcXC1dLiovKSA/IHRoaXNZZWFyICsgcGFyc2VJbnQodmFsdWUsIDEwKSA6XG5cdFx0XHRcdFx0XHRwYXJzZUludCh2YWx1ZSwgMTApKSk7XG5cdFx0XHRcdFx0cmV0dXJuIChpc05hTih5ZWFyKSA/IHRoaXNZZWFyIDogeWVhcik7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHllYXIgPSBkZXRlcm1pbmVZZWFyKHllYXJzWzBdKTtcblx0XHRcdFx0ZW5kWWVhciA9IE1hdGgubWF4KHllYXIsIGRldGVybWluZVllYXIoeWVhcnNbMV0gfHwgXCJcIikpO1xuXHRcdFx0XHR5ZWFyID0gKG1pbkRhdGUgPyBNYXRoLm1heCh5ZWFyLCBtaW5EYXRlLmdldEZ1bGxZZWFyKCkpIDogeWVhcik7XG5cdFx0XHRcdGVuZFllYXIgPSAobWF4RGF0ZSA/IE1hdGgubWluKGVuZFllYXIsIG1heERhdGUuZ2V0RnVsbFllYXIoKSkgOiBlbmRZZWFyKTtcblx0XHRcdFx0aW5zdC55ZWFyc2h0bWwgKz0gXCI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInIGRhdGEtaGFuZGxlcj0nc2VsZWN0WWVhcicgZGF0YS1ldmVudD0nY2hhbmdlJz5cIjtcblx0XHRcdFx0Zm9yICg7IHllYXIgPD0gZW5kWWVhcjsgeWVhcisrKSB7XG5cdFx0XHRcdFx0aW5zdC55ZWFyc2h0bWwgKz0gXCI8b3B0aW9uIHZhbHVlPSdcIiArIHllYXIgKyBcIidcIiArXG5cdFx0XHRcdFx0XHQoeWVhciA9PT0gZHJhd1llYXIgPyBcIiBzZWxlY3RlZD0nc2VsZWN0ZWQnXCIgOiBcIlwiKSArXG5cdFx0XHRcdFx0XHRcIj5cIiArIHllYXIgKyBcIjwvb3B0aW9uPlwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGluc3QueWVhcnNodG1sICs9IFwiPC9zZWxlY3Q+XCI7XG5cblx0XHRcdFx0aHRtbCArPSBpbnN0LnllYXJzaHRtbDtcblx0XHRcdFx0aW5zdC55ZWFyc2h0bWwgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGh0bWwgKz0gdGhpcy5fZ2V0KGluc3QsIFwieWVhclN1ZmZpeFwiKTtcblx0XHRpZiAoc2hvd01vbnRoQWZ0ZXJZZWFyKSB7XG5cdFx0XHRodG1sICs9IChzZWNvbmRhcnkgfHwgIShjaGFuZ2VNb250aCAmJiBjaGFuZ2VZZWFyKSA/IFwiJiN4YTA7XCIgOiBcIlwiKSArIG1vbnRoSHRtbDtcblx0XHR9XG5cdFx0aHRtbCArPSBcIjwvZGl2PlwiOyAvLyBDbG9zZSBkYXRlcGlja2VyX2hlYWRlclxuXHRcdHJldHVybiBodG1sO1xuXHR9LFxuXG5cdC8qIEFkanVzdCBvbmUgb2YgdGhlIGRhdGUgc3ViLWZpZWxkcy4gKi9cblx0X2FkanVzdEluc3REYXRlOiBmdW5jdGlvbihpbnN0LCBvZmZzZXQsIHBlcmlvZCkge1xuXHRcdHZhciB5ZWFyID0gaW5zdC5kcmF3WWVhciArIChwZXJpb2QgPT09IFwiWVwiID8gb2Zmc2V0IDogMCksXG5cdFx0XHRtb250aCA9IGluc3QuZHJhd01vbnRoICsgKHBlcmlvZCA9PT0gXCJNXCIgPyBvZmZzZXQgOiAwKSxcblx0XHRcdGRheSA9IE1hdGgubWluKGluc3Quc2VsZWN0ZWREYXksIHRoaXMuX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSkgKyAocGVyaW9kID09PSBcIkRcIiA/IG9mZnNldCA6IDApLFxuXHRcdFx0ZGF0ZSA9IHRoaXMuX3Jlc3RyaWN0TWluTWF4KGluc3QsIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpKSk7XG5cblx0XHRpbnN0LnNlbGVjdGVkRGF5ID0gZGF0ZS5nZXREYXRlKCk7XG5cdFx0aW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG5cdFx0aW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdGlmIChwZXJpb2QgPT09IFwiTVwiIHx8IHBlcmlvZCA9PT0gXCJZXCIpIHtcblx0XHRcdHRoaXMuX25vdGlmeUNoYW5nZShpbnN0KTtcblx0XHR9XG5cdH0sXG5cblx0LyogRW5zdXJlIGEgZGF0ZSBpcyB3aXRoaW4gYW55IG1pbi9tYXggYm91bmRzLiAqL1xuXHRfcmVzdHJpY3RNaW5NYXg6IGZ1bmN0aW9uKGluc3QsIGRhdGUpIHtcblx0XHR2YXIgbWluRGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwgXCJtaW5cIiksXG5cdFx0XHRtYXhEYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCBcIm1heFwiKSxcblx0XHRcdG5ld0RhdGUgPSAobWluRGF0ZSAmJiBkYXRlIDwgbWluRGF0ZSA/IG1pbkRhdGUgOiBkYXRlKTtcblx0XHRyZXR1cm4gKG1heERhdGUgJiYgbmV3RGF0ZSA+IG1heERhdGUgPyBtYXhEYXRlIDogbmV3RGF0ZSk7XG5cdH0sXG5cblx0LyogTm90aWZ5IGNoYW5nZSBvZiBtb250aC95ZWFyLiAqL1xuXHRfbm90aWZ5Q2hhbmdlOiBmdW5jdGlvbihpbnN0KSB7XG5cdFx0dmFyIG9uQ2hhbmdlID0gdGhpcy5fZ2V0KGluc3QsIFwib25DaGFuZ2VNb250aFllYXJcIik7XG5cdFx0aWYgKG9uQ2hhbmdlKSB7XG5cdFx0XHRvbkNoYW5nZS5hcHBseSgoaW5zdC5pbnB1dCA/IGluc3QuaW5wdXRbMF0gOiBudWxsKSxcblx0XHRcdFx0W2luc3Quc2VsZWN0ZWRZZWFyLCBpbnN0LnNlbGVjdGVkTW9udGggKyAxLCBpbnN0XSk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIERldGVybWluZSB0aGUgbnVtYmVyIG9mIG1vbnRocyB0byBzaG93LiAqL1xuXHRfZ2V0TnVtYmVyT2ZNb250aHM6IGZ1bmN0aW9uKGluc3QpIHtcblx0XHR2YXIgbnVtTW9udGhzID0gdGhpcy5fZ2V0KGluc3QsIFwibnVtYmVyT2ZNb250aHNcIik7XG5cdFx0cmV0dXJuIChudW1Nb250aHMgPT0gbnVsbCA/IFsxLCAxXSA6ICh0eXBlb2YgbnVtTW9udGhzID09PSBcIm51bWJlclwiID8gWzEsIG51bU1vbnRoc10gOiBudW1Nb250aHMpKTtcblx0fSxcblxuXHQvKiBEZXRlcm1pbmUgdGhlIGN1cnJlbnQgbWF4aW11bSBkYXRlIC0gZW5zdXJlIG5vIHRpbWUgY29tcG9uZW50cyBhcmUgc2V0LiAqL1xuXHRfZ2V0TWluTWF4RGF0ZTogZnVuY3Rpb24oaW5zdCwgbWluTWF4KSB7XG5cdFx0cmV0dXJuIHRoaXMuX2RldGVybWluZURhdGUoaW5zdCwgdGhpcy5fZ2V0KGluc3QsIG1pbk1heCArIFwiRGF0ZVwiKSwgbnVsbCk7XG5cdH0sXG5cblx0LyogRmluZCB0aGUgbnVtYmVyIG9mIGRheXMgaW4gYSBnaXZlbiBtb250aC4gKi9cblx0X2dldERheXNJbk1vbnRoOiBmdW5jdGlvbih5ZWFyLCBtb250aCkge1xuXHRcdHJldHVybiAzMiAtIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsIG1vbnRoLCAzMikpLmdldERhdGUoKTtcblx0fSxcblxuXHQvKiBGaW5kIHRoZSBkYXkgb2YgdGhlIHdlZWsgb2YgdGhlIGZpcnN0IG9mIGEgbW9udGguICovXG5cdF9nZXRGaXJzdERheU9mTW9udGg6IGZ1bmN0aW9uKHllYXIsIG1vbnRoKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKTtcblx0fSxcblxuXHQvKiBEZXRlcm1pbmVzIGlmIHdlIHNob3VsZCBhbGxvdyBhIFwibmV4dC9wcmV2XCIgbW9udGggZGlzcGxheSBjaGFuZ2UuICovXG5cdF9jYW5BZGp1c3RNb250aDogZnVuY3Rpb24oaW5zdCwgb2Zmc2V0LCBjdXJZZWFyLCBjdXJNb250aCkge1xuXHRcdHZhciBudW1Nb250aHMgPSB0aGlzLl9nZXROdW1iZXJPZk1vbnRocyhpbnN0KSxcblx0XHRcdGRhdGUgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShjdXJZZWFyLFxuXHRcdFx0Y3VyTW9udGggKyAob2Zmc2V0IDwgMCA/IG9mZnNldCA6IG51bU1vbnRoc1swXSAqIG51bU1vbnRoc1sxXSksIDEpKTtcblxuXHRcdGlmIChvZmZzZXQgPCAwKSB7XG5cdFx0XHRkYXRlLnNldERhdGUodGhpcy5fZ2V0RGF5c0luTW9udGgoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCkpKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX2lzSW5SYW5nZShpbnN0LCBkYXRlKTtcblx0fSxcblxuXHQvKiBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgYWNjZXB0ZWQgcmFuZ2U/ICovXG5cdF9pc0luUmFuZ2U6IGZ1bmN0aW9uKGluc3QsIGRhdGUpIHtcblx0XHR2YXIgeWVhclNwbGl0LCBjdXJyZW50WWVhcixcblx0XHRcdG1pbkRhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIFwibWluXCIpLFxuXHRcdFx0bWF4RGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwgXCJtYXhcIiksXG5cdFx0XHRtaW5ZZWFyID0gbnVsbCxcblx0XHRcdG1heFllYXIgPSBudWxsLFxuXHRcdFx0eWVhcnMgPSB0aGlzLl9nZXQoaW5zdCwgXCJ5ZWFyUmFuZ2VcIik7XG5cdFx0XHRpZiAoeWVhcnMpe1xuXHRcdFx0XHR5ZWFyU3BsaXQgPSB5ZWFycy5zcGxpdChcIjpcIik7XG5cdFx0XHRcdGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuXHRcdFx0XHRtaW5ZZWFyID0gcGFyc2VJbnQoeWVhclNwbGl0WzBdLCAxMCk7XG5cdFx0XHRcdG1heFllYXIgPSBwYXJzZUludCh5ZWFyU3BsaXRbMV0sIDEwKTtcblx0XHRcdFx0aWYgKCB5ZWFyU3BsaXRbMF0ubWF0Y2goL1srXFwtXS4qLykgKSB7XG5cdFx0XHRcdFx0bWluWWVhciArPSBjdXJyZW50WWVhcjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIHllYXJTcGxpdFsxXS5tYXRjaCgvWytcXC1dLiovKSApIHtcblx0XHRcdFx0XHRtYXhZZWFyICs9IGN1cnJlbnRZZWFyO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRyZXR1cm4gKCghbWluRGF0ZSB8fCBkYXRlLmdldFRpbWUoKSA+PSBtaW5EYXRlLmdldFRpbWUoKSkgJiZcblx0XHRcdCghbWF4RGF0ZSB8fCBkYXRlLmdldFRpbWUoKSA8PSBtYXhEYXRlLmdldFRpbWUoKSkgJiZcblx0XHRcdCghbWluWWVhciB8fCBkYXRlLmdldEZ1bGxZZWFyKCkgPj0gbWluWWVhcikgJiZcblx0XHRcdCghbWF4WWVhciB8fCBkYXRlLmdldEZ1bGxZZWFyKCkgPD0gbWF4WWVhcikpO1xuXHR9LFxuXG5cdC8qIFByb3ZpZGUgdGhlIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MgZm9yIGZvcm1hdHRpbmcvcGFyc2luZy4gKi9cblx0X2dldEZvcm1hdENvbmZpZzogZnVuY3Rpb24oaW5zdCkge1xuXHRcdHZhciBzaG9ydFllYXJDdXRvZmYgPSB0aGlzLl9nZXQoaW5zdCwgXCJzaG9ydFllYXJDdXRvZmZcIik7XG5cdFx0c2hvcnRZZWFyQ3V0b2ZmID0gKHR5cGVvZiBzaG9ydFllYXJDdXRvZmYgIT09IFwic3RyaW5nXCIgPyBzaG9ydFllYXJDdXRvZmYgOlxuXHRcdFx0bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICUgMTAwICsgcGFyc2VJbnQoc2hvcnRZZWFyQ3V0b2ZmLCAxMCkpO1xuXHRcdHJldHVybiB7c2hvcnRZZWFyQ3V0b2ZmOiBzaG9ydFllYXJDdXRvZmYsXG5cdFx0XHRkYXlOYW1lc1Nob3J0OiB0aGlzLl9nZXQoaW5zdCwgXCJkYXlOYW1lc1Nob3J0XCIpLCBkYXlOYW1lczogdGhpcy5fZ2V0KGluc3QsIFwiZGF5TmFtZXNcIiksXG5cdFx0XHRtb250aE5hbWVzU2hvcnQ6IHRoaXMuX2dldChpbnN0LCBcIm1vbnRoTmFtZXNTaG9ydFwiKSwgbW9udGhOYW1lczogdGhpcy5fZ2V0KGluc3QsIFwibW9udGhOYW1lc1wiKX07XG5cdH0sXG5cblx0LyogRm9ybWF0IHRoZSBnaXZlbiBkYXRlIGZvciBkaXNwbGF5LiAqL1xuXHRfZm9ybWF0RGF0ZTogZnVuY3Rpb24oaW5zdCwgZGF5LCBtb250aCwgeWVhcikge1xuXHRcdGlmICghZGF5KSB7XG5cdFx0XHRpbnN0LmN1cnJlbnREYXkgPSBpbnN0LnNlbGVjdGVkRGF5O1xuXHRcdFx0aW5zdC5jdXJyZW50TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGg7XG5cdFx0XHRpbnN0LmN1cnJlbnRZZWFyID0gaW5zdC5zZWxlY3RlZFllYXI7XG5cdFx0fVxuXHRcdHZhciBkYXRlID0gKGRheSA/ICh0eXBlb2YgZGF5ID09PSBcIm9iamVjdFwiID8gZGF5IDpcblx0XHRcdHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpKSkgOlxuXHRcdFx0dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaW5zdC5jdXJyZW50WWVhciwgaW5zdC5jdXJyZW50TW9udGgsIGluc3QuY3VycmVudERheSkpKTtcblx0XHRyZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMuX2dldChpbnN0LCBcImRhdGVGb3JtYXRcIiksIGRhdGUsIHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7XG5cdH1cbn0pO1xuXG4vKlxuICogQmluZCBob3ZlciBldmVudHMgZm9yIGRhdGVwaWNrZXIgZWxlbWVudHMuXG4gKiBEb25lIHZpYSBkZWxlZ2F0ZSBzbyB0aGUgYmluZGluZyBvbmx5IG9jY3VycyBvbmNlIGluIHRoZSBsaWZldGltZSBvZiB0aGUgcGFyZW50IGRpdi5cbiAqIEdsb2JhbCBkYXRlcGlja2VyX2luc3RBY3RpdmUsIHNldCBieSBfdXBkYXRlRGF0ZXBpY2tlciBhbGxvd3MgdGhlIGhhbmRsZXJzIHRvIGZpbmQgdGhlaXIgd2F5IGJhY2sgdG8gdGhlIGFjdGl2ZSBwaWNrZXIuXG4gKi9cbmZ1bmN0aW9uIGRhdGVwaWNrZXJfYmluZEhvdmVyKGRwRGl2KSB7XG5cdHZhciBzZWxlY3RvciA9IFwiYnV0dG9uLCAudWktZGF0ZXBpY2tlci1wcmV2LCAudWktZGF0ZXBpY2tlci1uZXh0LCAudWktZGF0ZXBpY2tlci1jYWxlbmRhciB0ZCBhXCI7XG5cdHJldHVybiBkcERpdi5kZWxlZ2F0ZShzZWxlY3RvciwgXCJtb3VzZW91dFwiLCBmdW5jdGlvbigpIHtcblx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKTtcblx0XHRcdGlmICh0aGlzLmNsYXNzTmFtZS5pbmRleE9mKFwidWktZGF0ZXBpY2tlci1wcmV2XCIpICE9PSAtMSkge1xuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKFwidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyXCIpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1kYXRlcGlja2VyLW5leHRcIikgIT09IC0xKSB7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXJcIik7XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQuZGVsZWdhdGUoIHNlbGVjdG9yLCBcIm1vdXNlb3ZlclwiLCBkYXRlcGlja2VyX2hhbmRsZU1vdXNlb3ZlciApO1xufVxuXG5mdW5jdGlvbiBkYXRlcGlja2VyX2hhbmRsZU1vdXNlb3ZlcigpIHtcblx0aWYgKCEkLmRhdGVwaWNrZXIuX2lzRGlzYWJsZWREYXRlcGlja2VyKCBkYXRlcGlja2VyX2luc3RBY3RpdmUuaW5saW5lPyBkYXRlcGlja2VyX2luc3RBY3RpdmUuZHBEaXYucGFyZW50KClbMF0gOiBkYXRlcGlja2VyX2luc3RBY3RpdmUuaW5wdXRbMF0pKSB7XG5cdFx0JCh0aGlzKS5wYXJlbnRzKFwiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXJcIikuZmluZChcImFcIikucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKTtcblx0XHQkKHRoaXMpLmFkZENsYXNzKFwidWktc3RhdGUtaG92ZXJcIik7XG5cdFx0aWYgKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1kYXRlcGlja2VyLXByZXZcIikgIT09IC0xKSB7XG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyXCIpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5jbGFzc05hbWUuaW5kZXhPZihcInVpLWRhdGVwaWNrZXItbmV4dFwiKSAhPT0gLTEpIHtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoXCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXJcIik7XG5cdFx0fVxuXHR9XG59XG5cbi8qIGpRdWVyeSBleHRlbmQgbm93IGlnbm9yZXMgbnVsbHMhICovXG5mdW5jdGlvbiBkYXRlcGlja2VyX2V4dGVuZFJlbW92ZSh0YXJnZXQsIHByb3BzKSB7XG5cdCQuZXh0ZW5kKHRhcmdldCwgcHJvcHMpO1xuXHRmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG5cdFx0aWYgKHByb3BzW25hbWVdID09IG51bGwpIHtcblx0XHRcdHRhcmdldFtuYW1lXSA9IHByb3BzW25hbWVdO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gdGFyZ2V0O1xufVxuXG4vKiBJbnZva2UgdGhlIGRhdGVwaWNrZXIgZnVuY3Rpb25hbGl0eS5cbiAgIEBwYXJhbSAgb3B0aW9ucyAgc3RyaW5nIC0gYSBjb21tYW5kLCBvcHRpb25hbGx5IGZvbGxvd2VkIGJ5IGFkZGl0aW9uYWwgcGFyYW1ldGVycyBvclxuXHRcdFx0XHRcdE9iamVjdCAtIHNldHRpbmdzIGZvciBhdHRhY2hpbmcgbmV3IGRhdGVwaWNrZXIgZnVuY3Rpb25hbGl0eVxuICAgQHJldHVybiAgalF1ZXJ5IG9iamVjdCAqL1xuJC5mbi5kYXRlcGlja2VyID0gZnVuY3Rpb24ob3B0aW9ucyl7XG5cblx0LyogVmVyaWZ5IGFuIGVtcHR5IGNvbGxlY3Rpb24gd2Fzbid0IHBhc3NlZCAtIEZpeGVzICM2OTc2ICovXG5cdGlmICggIXRoaXMubGVuZ3RoICkge1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyogSW5pdGlhbGlzZSB0aGUgZGF0ZSBwaWNrZXIuICovXG5cdGlmICghJC5kYXRlcGlja2VyLmluaXRpYWxpemVkKSB7XG5cdFx0JChkb2N1bWVudCkubW91c2Vkb3duKCQuZGF0ZXBpY2tlci5fY2hlY2tFeHRlcm5hbENsaWNrKTtcblx0XHQkLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHR9XG5cblx0LyogQXBwZW5kIGRhdGVwaWNrZXIgbWFpbiBjb250YWluZXIgdG8gYm9keSBpZiBub3QgZXhpc3QuICovXG5cdGlmICgkKFwiI1wiKyQuZGF0ZXBpY2tlci5fbWFpbkRpdklkKS5sZW5ndGggPT09IDApIHtcblx0XHQkKFwiYm9keVwiKS5hcHBlbmQoJC5kYXRlcGlja2VyLmRwRGl2KTtcblx0fVxuXG5cdHZhciBvdGhlckFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgJiYgKG9wdGlvbnMgPT09IFwiaXNEaXNhYmxlZFwiIHx8IG9wdGlvbnMgPT09IFwiZ2V0RGF0ZVwiIHx8IG9wdGlvbnMgPT09IFwid2lkZ2V0XCIpKSB7XG5cdFx0cmV0dXJuICQuZGF0ZXBpY2tlcltcIl9cIiArIG9wdGlvbnMgKyBcIkRhdGVwaWNrZXJcIl0uXG5cdFx0XHRhcHBseSgkLmRhdGVwaWNrZXIsIFt0aGlzWzBdXS5jb25jYXQob3RoZXJBcmdzKSk7XG5cdH1cblx0aWYgKG9wdGlvbnMgPT09IFwib3B0aW9uXCIgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSBcInN0cmluZ1wiKSB7XG5cdFx0cmV0dXJuICQuZGF0ZXBpY2tlcltcIl9cIiArIG9wdGlvbnMgKyBcIkRhdGVwaWNrZXJcIl0uXG5cdFx0XHRhcHBseSgkLmRhdGVwaWNrZXIsIFt0aGlzWzBdXS5jb25jYXQob3RoZXJBcmdzKSk7XG5cdH1cblx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHR0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHQkLmRhdGVwaWNrZXJbXCJfXCIgKyBvcHRpb25zICsgXCJEYXRlcGlja2VyXCJdLlxuXHRcdFx0XHRhcHBseSgkLmRhdGVwaWNrZXIsIFt0aGlzXS5jb25jYXQob3RoZXJBcmdzKSkgOlxuXHRcdFx0JC5kYXRlcGlja2VyLl9hdHRhY2hEYXRlcGlja2VyKHRoaXMsIG9wdGlvbnMpO1xuXHR9KTtcbn07XG5cbiQuZGF0ZXBpY2tlciA9IG5ldyBEYXRlcGlja2VyKCk7IC8vIHNpbmdsZXRvbiBpbnN0YW5jZVxuJC5kYXRlcGlja2VyLmluaXRpYWxpemVkID0gZmFsc2U7XG4kLmRhdGVwaWNrZXIudXVpZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuJC5kYXRlcGlja2VyLnZlcnNpb24gPSBcIjEuMTEuM1wiO1xuXG52YXIgZGF0ZXBpY2tlciA9ICQuZGF0ZXBpY2tlcjtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBEcmFnZ2FibGUgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9kcmFnZ2FibGUvXG4gKi9cblxuXG4kLndpZGdldChcInVpLmRyYWdnYWJsZVwiLCAkLnVpLm1vdXNlLCB7XG5cdHZlcnNpb246IFwiMS4xMS4zXCIsXG5cdHdpZGdldEV2ZW50UHJlZml4OiBcImRyYWdcIixcblx0b3B0aW9uczoge1xuXHRcdGFkZENsYXNzZXM6IHRydWUsXG5cdFx0YXBwZW5kVG86IFwicGFyZW50XCIsXG5cdFx0YXhpczogZmFsc2UsXG5cdFx0Y29ubmVjdFRvU29ydGFibGU6IGZhbHNlLFxuXHRcdGNvbnRhaW5tZW50OiBmYWxzZSxcblx0XHRjdXJzb3I6IFwiYXV0b1wiLFxuXHRcdGN1cnNvckF0OiBmYWxzZSxcblx0XHRncmlkOiBmYWxzZSxcblx0XHRoYW5kbGU6IGZhbHNlLFxuXHRcdGhlbHBlcjogXCJvcmlnaW5hbFwiLFxuXHRcdGlmcmFtZUZpeDogZmFsc2UsXG5cdFx0b3BhY2l0eTogZmFsc2UsXG5cdFx0cmVmcmVzaFBvc2l0aW9uczogZmFsc2UsXG5cdFx0cmV2ZXJ0OiBmYWxzZSxcblx0XHRyZXZlcnREdXJhdGlvbjogNTAwLFxuXHRcdHNjb3BlOiBcImRlZmF1bHRcIixcblx0XHRzY3JvbGw6IHRydWUsXG5cdFx0c2Nyb2xsU2Vuc2l0aXZpdHk6IDIwLFxuXHRcdHNjcm9sbFNwZWVkOiAyMCxcblx0XHRzbmFwOiBmYWxzZSxcblx0XHRzbmFwTW9kZTogXCJib3RoXCIsXG5cdFx0c25hcFRvbGVyYW5jZTogMjAsXG5cdFx0c3RhY2s6IGZhbHNlLFxuXHRcdHpJbmRleDogZmFsc2UsXG5cblx0XHQvLyBjYWxsYmFja3Ncblx0XHRkcmFnOiBudWxsLFxuXHRcdHN0YXJ0OiBudWxsLFxuXHRcdHN0b3A6IG51bGxcblx0fSxcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oZWxwZXIgPT09IFwib3JpZ2luYWxcIiApIHtcblx0XHRcdHRoaXMuX3NldFBvc2l0aW9uUmVsYXRpdmUoKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMub3B0aW9ucy5hZGRDbGFzc2VzKXtcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLWRyYWdnYWJsZVwiKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlZCl7XG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1kcmFnZ2FibGUtZGlzYWJsZWRcIik7XG5cdFx0fVxuXHRcdHRoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpO1xuXG5cdFx0dGhpcy5fbW91c2VJbml0KCk7XG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcblx0XHRpZiAoIGtleSA9PT0gXCJoYW5kbGVcIiApIHtcblx0XHRcdHRoaXMuX3JlbW92ZUhhbmRsZUNsYXNzTmFtZSgpO1xuXHRcdFx0dGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHRpZiAoICggdGhpcy5oZWxwZXIgfHwgdGhpcy5lbGVtZW50ICkuaXMoIFwiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZ1wiICkgKSB7XG5cdFx0XHR0aGlzLmRlc3Ryb3lPbkNsZWFyID0gdHJ1ZTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWRyYWdnYWJsZSB1aS1kcmFnZ2FibGUtZHJhZ2dpbmcgdWktZHJhZ2dhYmxlLWRpc2FibGVkXCIgKTtcblx0XHR0aGlzLl9yZW1vdmVIYW5kbGVDbGFzc05hbWUoKTtcblx0XHR0aGlzLl9tb3VzZURlc3Ryb3koKTtcblx0fSxcblxuXHRfbW91c2VDYXB0dXJlOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciBvID0gdGhpcy5vcHRpb25zO1xuXG5cdFx0dGhpcy5fYmx1ckFjdGl2ZUVsZW1lbnQoIGV2ZW50ICk7XG5cblx0XHQvLyBhbW9uZyBvdGhlcnMsIHByZXZlbnQgYSBkcmFnIG9uIGEgcmVzaXphYmxlLWhhbmRsZVxuXHRcdGlmICh0aGlzLmhlbHBlciB8fCBvLmRpc2FibGVkIHx8ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiLnVpLXJlc2l6YWJsZS1oYW5kbGVcIikubGVuZ3RoID4gMCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vUXVpdCBpZiB3ZSdyZSBub3Qgb24gYSB2YWxpZCBoYW5kbGVcblx0XHR0aGlzLmhhbmRsZSA9IHRoaXMuX2dldEhhbmRsZShldmVudCk7XG5cdFx0aWYgKCF0aGlzLmhhbmRsZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHRoaXMuX2Jsb2NrRnJhbWVzKCBvLmlmcmFtZUZpeCA9PT0gdHJ1ZSA/IFwiaWZyYW1lXCIgOiBvLmlmcmFtZUZpeCApO1xuXG5cdFx0cmV0dXJuIHRydWU7XG5cblx0fSxcblxuXHRfYmxvY2tGcmFtZXM6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR0aGlzLmlmcmFtZUJsb2NrcyA9IHRoaXMuZG9jdW1lbnQuZmluZCggc2VsZWN0b3IgKS5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaWZyYW1lID0gJCggdGhpcyApO1xuXG5cdFx0XHRyZXR1cm4gJCggXCI8ZGl2PlwiIClcblx0XHRcdFx0LmNzcyggXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIgKVxuXHRcdFx0XHQuYXBwZW5kVG8oIGlmcmFtZS5wYXJlbnQoKSApXG5cdFx0XHRcdC5vdXRlcldpZHRoKCBpZnJhbWUub3V0ZXJXaWR0aCgpIClcblx0XHRcdFx0Lm91dGVySGVpZ2h0KCBpZnJhbWUub3V0ZXJIZWlnaHQoKSApXG5cdFx0XHRcdC5vZmZzZXQoIGlmcmFtZS5vZmZzZXQoKSApWyAwIF07XG5cdFx0fSk7XG5cdH0sXG5cblx0X3VuYmxvY2tGcmFtZXM6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggdGhpcy5pZnJhbWVCbG9ja3MgKSB7XG5cdFx0XHR0aGlzLmlmcmFtZUJsb2Nrcy5yZW1vdmUoKTtcblx0XHRcdGRlbGV0ZSB0aGlzLmlmcmFtZUJsb2Nrcztcblx0XHR9XG5cdH0sXG5cblx0X2JsdXJBY3RpdmVFbGVtZW50OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIGRvY3VtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdO1xuXG5cdFx0Ly8gT25seSBuZWVkIHRvIGJsdXIgaWYgdGhlIGV2ZW50IG9jY3VycmVkIG9uIHRoZSBkcmFnZ2FibGUgaXRzZWxmLCBzZWUgIzEwNTI3XG5cdFx0aWYgKCAhdGhpcy5oYW5kbGVFbGVtZW50LmlzKCBldmVudC50YXJnZXQgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBzdXBwb3J0OiBJRTlcblx0XHQvLyBJRTkgdGhyb3dzIGFuIFwiVW5zcGVjaWZpZWQgZXJyb3JcIiBhY2Nlc3NpbmcgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBmcm9tIGFuIDxpZnJhbWU+XG5cdFx0dHJ5IHtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU5LCBJRTEwXG5cdFx0XHQvLyBJZiB0aGUgPGJvZHk+IGlzIGJsdXJyZWQsIElFIHdpbGwgc3dpdGNoIHdpbmRvd3MsIHNlZSAjOTUyMFxuXHRcdFx0aWYgKCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJib2R5XCIgKSB7XG5cblx0XHRcdFx0Ly8gQmx1ciBhbnkgZWxlbWVudCB0aGF0IGN1cnJlbnRseSBoYXMgZm9jdXMsIHNlZSAjNDI2MVxuXHRcdFx0XHQkKCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICkuYmx1cigpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKCBlcnJvciApIHt9XG5cdH0sXG5cblx0X21vdXNlU3RhcnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cblx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucztcblxuXHRcdC8vQ3JlYXRlIGFuZCBhcHBlbmQgdGhlIHZpc2libGUgaGVscGVyXG5cdFx0dGhpcy5oZWxwZXIgPSB0aGlzLl9jcmVhdGVIZWxwZXIoZXZlbnQpO1xuXG5cdFx0dGhpcy5oZWxwZXIuYWRkQ2xhc3MoXCJ1aS1kcmFnZ2FibGUtZHJhZ2dpbmdcIik7XG5cblx0XHQvL0NhY2hlIHRoZSBoZWxwZXIgc2l6ZVxuXHRcdHRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTtcblxuXHRcdC8vSWYgZGRtYW5hZ2VyIGlzIHVzZWQgZm9yIGRyb3BwYWJsZXMsIHNldCB0aGUgZ2xvYmFsIGRyYWdnYWJsZVxuXHRcdGlmICgkLnVpLmRkbWFuYWdlcikge1xuXHRcdFx0JC51aS5kZG1hbmFnZXIuY3VycmVudCA9IHRoaXM7XG5cdFx0fVxuXG5cdFx0Lypcblx0XHQgKiAtIFBvc2l0aW9uIGdlbmVyYXRpb24gLVxuXHRcdCAqIFRoaXMgYmxvY2sgZ2VuZXJhdGVzIGV2ZXJ5dGhpbmcgcG9zaXRpb24gcmVsYXRlZCAtIGl0J3MgdGhlIGNvcmUgb2YgZHJhZ2dhYmxlcy5cblx0XHQgKi9cblxuXHRcdC8vQ2FjaGUgdGhlIG1hcmdpbnMgb2YgdGhlIG9yaWdpbmFsIGVsZW1lbnRcblx0XHR0aGlzLl9jYWNoZU1hcmdpbnMoKTtcblxuXHRcdC8vU3RvcmUgdGhlIGhlbHBlcidzIGNzcyBwb3NpdGlvblxuXHRcdHRoaXMuY3NzUG9zaXRpb24gPSB0aGlzLmhlbHBlci5jc3MoIFwicG9zaXRpb25cIiApO1xuXHRcdHRoaXMuc2Nyb2xsUGFyZW50ID0gdGhpcy5oZWxwZXIuc2Nyb2xsUGFyZW50KCB0cnVlICk7XG5cdFx0dGhpcy5vZmZzZXRQYXJlbnQgPSB0aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTtcblx0XHR0aGlzLmhhc0ZpeGVkQW5jZXN0b3IgPSB0aGlzLmhlbHBlci5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gJCggdGhpcyApLmNzcyggXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIjtcblx0XHRcdH0pLmxlbmd0aCA+IDA7XG5cblx0XHQvL1RoZSBlbGVtZW50J3MgYWJzb2x1dGUgcG9zaXRpb24gb24gdGhlIHBhZ2UgbWludXMgbWFyZ2luc1xuXHRcdHRoaXMucG9zaXRpb25BYnMgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCk7XG5cdFx0dGhpcy5fcmVmcmVzaE9mZnNldHMoIGV2ZW50ICk7XG5cblx0XHQvL0dlbmVyYXRlIHRoZSBvcmlnaW5hbCBwb3NpdGlvblxuXHRcdHRoaXMub3JpZ2luYWxQb3NpdGlvbiA9IHRoaXMucG9zaXRpb24gPSB0aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKCBldmVudCwgZmFsc2UgKTtcblx0XHR0aGlzLm9yaWdpbmFsUGFnZVggPSBldmVudC5wYWdlWDtcblx0XHR0aGlzLm9yaWdpbmFsUGFnZVkgPSBldmVudC5wYWdlWTtcblxuXHRcdC8vQWRqdXN0IHRoZSBtb3VzZSBvZmZzZXQgcmVsYXRpdmUgdG8gdGhlIGhlbHBlciBpZiBcImN1cnNvckF0XCIgaXMgc3VwcGxpZWRcblx0XHQoby5jdXJzb3JBdCAmJiB0aGlzLl9hZGp1c3RPZmZzZXRGcm9tSGVscGVyKG8uY3Vyc29yQXQpKTtcblxuXHRcdC8vU2V0IGEgY29udGFpbm1lbnQgaWYgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcblx0XHR0aGlzLl9zZXRDb250YWlubWVudCgpO1xuXG5cdFx0Ly9UcmlnZ2VyIGV2ZW50ICsgY2FsbGJhY2tzXG5cdFx0aWYgKHRoaXMuX3RyaWdnZXIoXCJzdGFydFwiLCBldmVudCkgPT09IGZhbHNlKSB7XG5cdFx0XHR0aGlzLl9jbGVhcigpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vUmVjYWNoZSB0aGUgaGVscGVyIHNpemVcblx0XHR0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7XG5cblx0XHQvL1ByZXBhcmUgdGhlIGRyb3BwYWJsZSBvZmZzZXRzXG5cdFx0aWYgKCQudWkuZGRtYW5hZ2VyICYmICFvLmRyb3BCZWhhdmlvdXIpIHtcblx0XHRcdCQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsIGV2ZW50KTtcblx0XHR9XG5cblx0XHQvLyBSZXNldCBoZWxwZXIncyByaWdodC9ib3R0b20gY3NzIGlmIHRoZXkncmUgc2V0IGFuZCBzZXQgZXhwbGljaXQgd2lkdGgvaGVpZ2h0IGluc3RlYWRcblx0XHQvLyBhcyB0aGlzIHByZXZlbnRzIHJlc2l6aW5nIG9mIGVsZW1lbnRzIHdpdGggcmlnaHQvYm90dG9tIHNldCAoc2VlICM3NzcyKVxuXHRcdHRoaXMuX25vcm1hbGl6ZVJpZ2h0Qm90dG9tKCk7XG5cblx0XHR0aGlzLl9tb3VzZURyYWcoZXZlbnQsIHRydWUpOyAvL0V4ZWN1dGUgdGhlIGRyYWcgb25jZSAtIHRoaXMgY2F1c2VzIHRoZSBoZWxwZXIgbm90IHRvIGJlIHZpc2libGUgYmVmb3JlIGdldHRpbmcgaXRzIGNvcnJlY3QgcG9zaXRpb25cblxuXHRcdC8vSWYgdGhlIGRkbWFuYWdlciBpcyB1c2VkIGZvciBkcm9wcGFibGVzLCBpbmZvcm0gdGhlIG1hbmFnZXIgdGhhdCBkcmFnZ2luZyBoYXMgc3RhcnRlZCAoc2VlICM1MDAzKVxuXHRcdGlmICggJC51aS5kZG1hbmFnZXIgKSB7XG5cdFx0XHQkLnVpLmRkbWFuYWdlci5kcmFnU3RhcnQodGhpcywgZXZlbnQpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdF9yZWZyZXNoT2Zmc2V0czogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHRoaXMub2Zmc2V0ID0ge1xuXHRcdFx0dG9wOiB0aGlzLnBvc2l0aW9uQWJzLnRvcCAtIHRoaXMubWFyZ2lucy50b3AsXG5cdFx0XHRsZWZ0OiB0aGlzLnBvc2l0aW9uQWJzLmxlZnQgLSB0aGlzLm1hcmdpbnMubGVmdCxcblx0XHRcdHNjcm9sbDogZmFsc2UsXG5cdFx0XHRwYXJlbnQ6IHRoaXMuX2dldFBhcmVudE9mZnNldCgpLFxuXHRcdFx0cmVsYXRpdmU6IHRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KClcblx0XHR9O1xuXG5cdFx0dGhpcy5vZmZzZXQuY2xpY2sgPSB7XG5cdFx0XHRsZWZ0OiBldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmxlZnQsXG5cdFx0XHR0b3A6IGV2ZW50LnBhZ2VZIC0gdGhpcy5vZmZzZXQudG9wXG5cdFx0fTtcblx0fSxcblxuXHRfbW91c2VEcmFnOiBmdW5jdGlvbihldmVudCwgbm9Qcm9wYWdhdGlvbikge1xuXHRcdC8vIHJlc2V0IGFueSBuZWNlc3NhcnkgY2FjaGVkIHByb3BlcnRpZXMgKHNlZSAjNTAwOSlcblx0XHRpZiAoIHRoaXMuaGFzRml4ZWRBbmNlc3RvciApIHtcblx0XHRcdHRoaXMub2Zmc2V0LnBhcmVudCA9IHRoaXMuX2dldFBhcmVudE9mZnNldCgpO1xuXHRcdH1cblxuXHRcdC8vQ29tcHV0ZSB0aGUgaGVscGVycyBwb3NpdGlvblxuXHRcdHRoaXMucG9zaXRpb24gPSB0aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKCBldmVudCwgdHJ1ZSApO1xuXHRcdHRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbyhcImFic29sdXRlXCIpO1xuXG5cdFx0Ly9DYWxsIHBsdWdpbnMgYW5kIGNhbGxiYWNrcyBhbmQgdXNlIHRoZSByZXN1bHRpbmcgcG9zaXRpb24gaWYgc29tZXRoaW5nIGlzIHJldHVybmVkXG5cdFx0aWYgKCFub1Byb3BhZ2F0aW9uKSB7XG5cdFx0XHR2YXIgdWkgPSB0aGlzLl91aUhhc2goKTtcblx0XHRcdGlmICh0aGlzLl90cmlnZ2VyKFwiZHJhZ1wiLCBldmVudCwgdWkpID09PSBmYWxzZSkge1xuXHRcdFx0XHR0aGlzLl9tb3VzZVVwKHt9KTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5wb3NpdGlvbiA9IHVpLnBvc2l0aW9uO1xuXHRcdH1cblxuXHRcdHRoaXMuaGVscGVyWyAwIF0uc3R5bGUubGVmdCA9IHRoaXMucG9zaXRpb24ubGVmdCArIFwicHhcIjtcblx0XHR0aGlzLmhlbHBlclsgMCBdLnN0eWxlLnRvcCA9IHRoaXMucG9zaXRpb24udG9wICsgXCJweFwiO1xuXG5cdFx0aWYgKCQudWkuZGRtYW5hZ2VyKSB7XG5cdFx0XHQkLnVpLmRkbWFuYWdlci5kcmFnKHRoaXMsIGV2ZW50KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cblx0X21vdXNlU3RvcDogZnVuY3Rpb24oZXZlbnQpIHtcblxuXHRcdC8vSWYgd2UgYXJlIHVzaW5nIGRyb3BwYWJsZXMsIGluZm9ybSB0aGUgbWFuYWdlciBhYm91dCB0aGUgZHJvcFxuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdGRyb3BwZWQgPSBmYWxzZTtcblx0XHRpZiAoJC51aS5kZG1hbmFnZXIgJiYgIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyKSB7XG5cdFx0XHRkcm9wcGVkID0gJC51aS5kZG1hbmFnZXIuZHJvcCh0aGlzLCBldmVudCk7XG5cdFx0fVxuXG5cdFx0Ly9pZiBhIGRyb3AgY29tZXMgZnJvbSBvdXRzaWRlIChhIHNvcnRhYmxlKVxuXHRcdGlmICh0aGlzLmRyb3BwZWQpIHtcblx0XHRcdGRyb3BwZWQgPSB0aGlzLmRyb3BwZWQ7XG5cdFx0XHR0aGlzLmRyb3BwZWQgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoKHRoaXMub3B0aW9ucy5yZXZlcnQgPT09IFwiaW52YWxpZFwiICYmICFkcm9wcGVkKSB8fCAodGhpcy5vcHRpb25zLnJldmVydCA9PT0gXCJ2YWxpZFwiICYmIGRyb3BwZWQpIHx8IHRoaXMub3B0aW9ucy5yZXZlcnQgPT09IHRydWUgfHwgKCQuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMucmV2ZXJ0KSAmJiB0aGlzLm9wdGlvbnMucmV2ZXJ0LmNhbGwodGhpcy5lbGVtZW50LCBkcm9wcGVkKSkpIHtcblx0XHRcdCQodGhpcy5oZWxwZXIpLmFuaW1hdGUodGhpcy5vcmlnaW5hbFBvc2l0aW9uLCBwYXJzZUludCh0aGlzLm9wdGlvbnMucmV2ZXJ0RHVyYXRpb24sIDEwKSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICh0aGF0Ll90cmlnZ2VyKFwic3RvcFwiLCBldmVudCkgIT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0dGhhdC5fY2xlYXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICh0aGlzLl90cmlnZ2VyKFwic3RvcFwiLCBldmVudCkgIT09IGZhbHNlKSB7XG5cdFx0XHRcdHRoaXMuX2NsZWFyKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXG5cdF9tb3VzZVVwOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dGhpcy5fdW5ibG9ja0ZyYW1lcygpO1xuXG5cdFx0Ly9JZiB0aGUgZGRtYW5hZ2VyIGlzIHVzZWQgZm9yIGRyb3BwYWJsZXMsIGluZm9ybSB0aGUgbWFuYWdlciB0aGF0IGRyYWdnaW5nIGhhcyBzdG9wcGVkIChzZWUgIzUwMDMpXG5cdFx0aWYgKCAkLnVpLmRkbWFuYWdlciApIHtcblx0XHRcdCQudWkuZGRtYW5hZ2VyLmRyYWdTdG9wKHRoaXMsIGV2ZW50KTtcblx0XHR9XG5cblx0XHQvLyBPbmx5IG5lZWQgdG8gZm9jdXMgaWYgdGhlIGV2ZW50IG9jY3VycmVkIG9uIHRoZSBkcmFnZ2FibGUgaXRzZWxmLCBzZWUgIzEwNTI3XG5cdFx0aWYgKCB0aGlzLmhhbmRsZUVsZW1lbnQuaXMoIGV2ZW50LnRhcmdldCApICkge1xuXHRcdFx0Ly8gVGhlIGludGVyYWN0aW9uIGlzIG92ZXI7IHdoZXRoZXIgb3Igbm90IHRoZSBjbGljayByZXN1bHRlZCBpbiBhIGRyYWcsIGZvY3VzIHRoZSBlbGVtZW50XG5cdFx0XHR0aGlzLmVsZW1lbnQuZm9jdXMoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gJC51aS5tb3VzZS5wcm90b3R5cGUuX21vdXNlVXAuY2FsbCh0aGlzLCBldmVudCk7XG5cdH0sXG5cblx0Y2FuY2VsOiBmdW5jdGlvbigpIHtcblxuXHRcdGlmICh0aGlzLmhlbHBlci5pcyhcIi51aS1kcmFnZ2FibGUtZHJhZ2dpbmdcIikpIHtcblx0XHRcdHRoaXMuX21vdXNlVXAoe30pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9jbGVhcigpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH0sXG5cblx0X2dldEhhbmRsZTogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLmhhbmRsZSA/XG5cdFx0XHQhISQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLm9wdGlvbnMuaGFuZGxlICkgKS5sZW5ndGggOlxuXHRcdFx0dHJ1ZTtcblx0fSxcblxuXHRfc2V0SGFuZGxlQ2xhc3NOYW1lOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmhhbmRsZUVsZW1lbnQgPSB0aGlzLm9wdGlvbnMuaGFuZGxlID9cblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLm9wdGlvbnMuaGFuZGxlICkgOiB0aGlzLmVsZW1lbnQ7XG5cdFx0dGhpcy5oYW5kbGVFbGVtZW50LmFkZENsYXNzKCBcInVpLWRyYWdnYWJsZS1oYW5kbGVcIiApO1xuXHR9LFxuXG5cdF9yZW1vdmVIYW5kbGVDbGFzc05hbWU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuaGFuZGxlRWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1kcmFnZ2FibGUtaGFuZGxlXCIgKTtcblx0fSxcblxuXHRfY3JlYXRlSGVscGVyOiBmdW5jdGlvbihldmVudCkge1xuXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRoZWxwZXJJc0Z1bmN0aW9uID0gJC5pc0Z1bmN0aW9uKCBvLmhlbHBlciApLFxuXHRcdFx0aGVscGVyID0gaGVscGVySXNGdW5jdGlvbiA/XG5cdFx0XHRcdCQoIG8uaGVscGVyLmFwcGx5KCB0aGlzLmVsZW1lbnRbIDAgXSwgWyBldmVudCBdICkgKSA6XG5cdFx0XHRcdCggby5oZWxwZXIgPT09IFwiY2xvbmVcIiA/XG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50LmNsb25lKCkucmVtb3ZlQXR0ciggXCJpZFwiICkgOlxuXHRcdFx0XHRcdHRoaXMuZWxlbWVudCApO1xuXG5cdFx0aWYgKCFoZWxwZXIucGFyZW50cyhcImJvZHlcIikubGVuZ3RoKSB7XG5cdFx0XHRoZWxwZXIuYXBwZW5kVG8oKG8uYXBwZW5kVG8gPT09IFwicGFyZW50XCIgPyB0aGlzLmVsZW1lbnRbMF0ucGFyZW50Tm9kZSA6IG8uYXBwZW5kVG8pKTtcblx0XHR9XG5cblx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnl1aS5jb20vdGlja2V0Lzk0NDZcblx0XHQvLyBhIGhlbHBlciBmdW5jdGlvbiBjYW4gcmV0dXJuIHRoZSBvcmlnaW5hbCBlbGVtZW50XG5cdFx0Ly8gd2hpY2ggd291bGRuJ3QgaGF2ZSBiZWVuIHNldCB0byByZWxhdGl2ZSBpbiBfY3JlYXRlXG5cdFx0aWYgKCBoZWxwZXJJc0Z1bmN0aW9uICYmIGhlbHBlclsgMCBdID09PSB0aGlzLmVsZW1lbnRbIDAgXSApIHtcblx0XHRcdHRoaXMuX3NldFBvc2l0aW9uUmVsYXRpdmUoKTtcblx0XHR9XG5cblx0XHRpZiAoaGVscGVyWzBdICE9PSB0aGlzLmVsZW1lbnRbMF0gJiYgISgvKGZpeGVkfGFic29sdXRlKS8pLnRlc3QoaGVscGVyLmNzcyhcInBvc2l0aW9uXCIpKSkge1xuXHRcdFx0aGVscGVyLmNzcyhcInBvc2l0aW9uXCIsIFwiYWJzb2x1dGVcIik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhlbHBlcjtcblxuXHR9LFxuXG5cdF9zZXRQb3NpdGlvblJlbGF0aXZlOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoICEoIC9eKD86cnxhfGYpLyApLnRlc3QoIHRoaXMuZWxlbWVudC5jc3MoIFwicG9zaXRpb25cIiApICkgKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRbIDAgXS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblx0XHR9XG5cdH0sXG5cblx0X2FkanVzdE9mZnNldEZyb21IZWxwZXI6IGZ1bmN0aW9uKG9iaikge1xuXHRcdGlmICh0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRvYmogPSBvYmouc3BsaXQoXCIgXCIpO1xuXHRcdH1cblx0XHRpZiAoJC5pc0FycmF5KG9iaikpIHtcblx0XHRcdG9iaiA9IHsgbGVmdDogK29ialswXSwgdG9wOiArb2JqWzFdIHx8IDAgfTtcblx0XHR9XG5cdFx0aWYgKFwibGVmdFwiIGluIG9iaikge1xuXHRcdFx0dGhpcy5vZmZzZXQuY2xpY2subGVmdCA9IG9iai5sZWZ0ICsgdGhpcy5tYXJnaW5zLmxlZnQ7XG5cdFx0fVxuXHRcdGlmIChcInJpZ2h0XCIgaW4gb2JqKSB7XG5cdFx0XHR0aGlzLm9mZnNldC5jbGljay5sZWZ0ID0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIG9iai5yaWdodCArIHRoaXMubWFyZ2lucy5sZWZ0O1xuXHRcdH1cblx0XHRpZiAoXCJ0b3BcIiBpbiBvYmopIHtcblx0XHRcdHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IG9iai50b3AgKyB0aGlzLm1hcmdpbnMudG9wO1xuXHRcdH1cblx0XHRpZiAoXCJib3R0b21cIiBpbiBvYmopIHtcblx0XHRcdHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gb2JqLmJvdHRvbSArIHRoaXMubWFyZ2lucy50b3A7XG5cdFx0fVxuXHR9LFxuXG5cdF9pc1Jvb3ROb2RlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcblx0XHRyZXR1cm4gKCAvKGh0bWx8Ym9keSkvaSApLnRlc3QoIGVsZW1lbnQudGFnTmFtZSApIHx8IGVsZW1lbnQgPT09IHRoaXMuZG9jdW1lbnRbIDAgXTtcblx0fSxcblxuXHRfZ2V0UGFyZW50T2Zmc2V0OiBmdW5jdGlvbigpIHtcblxuXHRcdC8vR2V0IHRoZSBvZmZzZXRQYXJlbnQgYW5kIGNhY2hlIGl0cyBwb3NpdGlvblxuXHRcdHZhciBwbyA9IHRoaXMub2Zmc2V0UGFyZW50Lm9mZnNldCgpLFxuXHRcdFx0ZG9jdW1lbnQgPSB0aGlzLmRvY3VtZW50WyAwIF07XG5cblx0XHQvLyBUaGlzIGlzIGEgc3BlY2lhbCBjYXNlIHdoZXJlIHdlIG5lZWQgdG8gbW9kaWZ5IGEgb2Zmc2V0IGNhbGN1bGF0ZWQgb24gc3RhcnQsIHNpbmNlIHRoZSBmb2xsb3dpbmcgaGFwcGVuZWQ6XG5cdFx0Ly8gMS4gVGhlIHBvc2l0aW9uIG9mIHRoZSBoZWxwZXIgaXMgYWJzb2x1dGUsIHNvIGl0J3MgcG9zaXRpb24gaXMgY2FsY3VsYXRlZCBiYXNlZCBvbiB0aGUgbmV4dCBwb3NpdGlvbmVkIHBhcmVudFxuXHRcdC8vIDIuIFRoZSBhY3R1YWwgb2Zmc2V0IHBhcmVudCBpcyBhIGNoaWxkIG9mIHRoZSBzY3JvbGwgcGFyZW50LCBhbmQgdGhlIHNjcm9sbCBwYXJlbnQgaXNuJ3QgdGhlIGRvY3VtZW50LCB3aGljaCBtZWFucyB0aGF0XG5cdFx0Ly8gICAgdGhlIHNjcm9sbCBpcyBpbmNsdWRlZCBpbiB0aGUgaW5pdGlhbCBjYWxjdWxhdGlvbiBvZiB0aGUgb2Zmc2V0IG9mIHRoZSBwYXJlbnQsIGFuZCBuZXZlciByZWNhbGN1bGF0ZWQgdXBvbiBkcmFnXG5cdFx0aWYgKHRoaXMuY3NzUG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiAmJiB0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gZG9jdW1lbnQgJiYgJC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSwgdGhpcy5vZmZzZXRQYXJlbnRbMF0pKSB7XG5cdFx0XHRwby5sZWZ0ICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTtcblx0XHRcdHBvLnRvcCArPSB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXMuX2lzUm9vdE5vZGUoIHRoaXMub2Zmc2V0UGFyZW50WyAwIF0gKSApIHtcblx0XHRcdHBvID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblx0XHR9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBwby50b3AgKyAocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKFwiYm9yZGVyVG9wV2lkdGhcIiksIDEwKSB8fCAwKSxcblx0XHRcdGxlZnQ6IHBvLmxlZnQgKyAocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKFwiYm9yZGVyTGVmdFdpZHRoXCIpLCAxMCkgfHwgMClcblx0XHR9O1xuXG5cdH0sXG5cblx0X2dldFJlbGF0aXZlT2Zmc2V0OiBmdW5jdGlvbigpIHtcblx0XHRpZiAoIHRoaXMuY3NzUG9zaXRpb24gIT09IFwicmVsYXRpdmVcIiApIHtcblx0XHRcdHJldHVybiB7IHRvcDogMCwgbGVmdDogMCB9O1xuXHRcdH1cblxuXHRcdHZhciBwID0gdGhpcy5lbGVtZW50LnBvc2l0aW9uKCksXG5cdFx0XHRzY3JvbGxJc1Jvb3ROb2RlID0gdGhpcy5faXNSb290Tm9kZSggdGhpcy5zY3JvbGxQYXJlbnRbIDAgXSApO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogcC50b3AgLSAoIHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcyggXCJ0b3BcIiApLCAxMCkgfHwgMCApICsgKCAhc2Nyb2xsSXNSb290Tm9kZSA/IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpIDogMCApLFxuXHRcdFx0bGVmdDogcC5sZWZ0IC0gKCBwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoIFwibGVmdFwiICksIDEwKSB8fCAwICkgKyAoICFzY3JvbGxJc1Jvb3ROb2RlID8gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpIDogMCApXG5cdFx0fTtcblxuXHR9LFxuXG5cdF9jYWNoZU1hcmdpbnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMubWFyZ2lucyA9IHtcblx0XHRcdGxlZnQ6IChwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luTGVmdFwiKSwgMTApIHx8IDApLFxuXHRcdFx0dG9wOiAocGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcyhcIm1hcmdpblRvcFwiKSwgMTApIHx8IDApLFxuXHRcdFx0cmlnaHQ6IChwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luUmlnaHRcIiksIDEwKSB8fCAwKSxcblx0XHRcdGJvdHRvbTogKHBhcnNlSW50KHRoaXMuZWxlbWVudC5jc3MoXCJtYXJnaW5Cb3R0b21cIiksIDEwKSB8fCAwKVxuXHRcdH07XG5cdH0sXG5cblx0X2NhY2hlSGVscGVyUHJvcG9ydGlvbnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuaGVscGVyUHJvcG9ydGlvbnMgPSB7XG5cdFx0XHR3aWR0aDogdGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLFxuXHRcdFx0aGVpZ2h0OiB0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpXG5cdFx0fTtcblx0fSxcblxuXHRfc2V0Q29udGFpbm1lbnQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIGlzVXNlclNjcm9sbGFibGUsIGMsIGNlLFxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcblx0XHRcdGRvY3VtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdO1xuXG5cdFx0dGhpcy5yZWxhdGl2ZUNvbnRhaW5lciA9IG51bGw7XG5cblx0XHRpZiAoICFvLmNvbnRhaW5tZW50ICkge1xuXHRcdFx0dGhpcy5jb250YWlubWVudCA9IG51bGw7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBvLmNvbnRhaW5tZW50ID09PSBcIndpbmRvd1wiICkge1xuXHRcdFx0dGhpcy5jb250YWlubWVudCA9IFtcblx0XHRcdFx0JCggd2luZG93ICkuc2Nyb2xsTGVmdCgpIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LFxuXHRcdFx0XHQkKCB3aW5kb3cgKS5zY3JvbGxUb3AoKSAtIHRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAtIHRoaXMub2Zmc2V0LnBhcmVudC50b3AsXG5cdFx0XHRcdCQoIHdpbmRvdyApLnNjcm9sbExlZnQoKSArICQoIHdpbmRvdyApLndpZHRoKCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0gdGhpcy5tYXJnaW5zLmxlZnQsXG5cdFx0XHRcdCQoIHdpbmRvdyApLnNjcm9sbFRvcCgpICsgKCAkKCB3aW5kb3cgKS5oZWlnaHQoKSB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0ICkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3Bcblx0XHRcdF07XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBvLmNvbnRhaW5tZW50ID09PSBcImRvY3VtZW50XCIpIHtcblx0XHRcdHRoaXMuY29udGFpbm1lbnQgPSBbXG5cdFx0XHRcdDAsXG5cdFx0XHRcdDAsXG5cdFx0XHRcdCQoIGRvY3VtZW50ICkud2lkdGgoKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCxcblx0XHRcdFx0KCAkKCBkb2N1bWVudCApLmhlaWdodCgpIHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQgKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gdGhpcy5tYXJnaW5zLnRvcFxuXHRcdFx0XTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIG8uY29udGFpbm1lbnQuY29uc3RydWN0b3IgPT09IEFycmF5ICkge1xuXHRcdFx0dGhpcy5jb250YWlubWVudCA9IG8uY29udGFpbm1lbnQ7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBvLmNvbnRhaW5tZW50ID09PSBcInBhcmVudFwiICkge1xuXHRcdFx0by5jb250YWlubWVudCA9IHRoaXMuaGVscGVyWyAwIF0ucGFyZW50Tm9kZTtcblx0XHR9XG5cblx0XHRjID0gJCggby5jb250YWlubWVudCApO1xuXHRcdGNlID0gY1sgMCBdO1xuXG5cdFx0aWYgKCAhY2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aXNVc2VyU2Nyb2xsYWJsZSA9IC8oc2Nyb2xsfGF1dG8pLy50ZXN0KCBjLmNzcyggXCJvdmVyZmxvd1wiICkgKTtcblxuXHRcdHRoaXMuY29udGFpbm1lbnQgPSBbXG5cdFx0XHQoIHBhcnNlSW50KCBjLmNzcyggXCJib3JkZXJMZWZ0V2lkdGhcIiApLCAxMCApIHx8IDAgKSArICggcGFyc2VJbnQoIGMuY3NzKCBcInBhZGRpbmdMZWZ0XCIgKSwgMTAgKSB8fCAwICksXG5cdFx0XHQoIHBhcnNlSW50KCBjLmNzcyggXCJib3JkZXJUb3BXaWR0aFwiICksIDEwICkgfHwgMCApICsgKCBwYXJzZUludCggYy5jc3MoIFwicGFkZGluZ1RvcFwiICksIDEwICkgfHwgMCApLFxuXHRcdFx0KCBpc1VzZXJTY3JvbGxhYmxlID8gTWF0aC5tYXgoIGNlLnNjcm9sbFdpZHRoLCBjZS5vZmZzZXRXaWR0aCApIDogY2Uub2Zmc2V0V2lkdGggKSAtXG5cdFx0XHRcdCggcGFyc2VJbnQoIGMuY3NzKCBcImJvcmRlclJpZ2h0V2lkdGhcIiApLCAxMCApIHx8IDAgKSAtXG5cdFx0XHRcdCggcGFyc2VJbnQoIGMuY3NzKCBcInBhZGRpbmdSaWdodFwiICksIDEwICkgfHwgMCApIC1cblx0XHRcdFx0dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtXG5cdFx0XHRcdHRoaXMubWFyZ2lucy5sZWZ0IC1cblx0XHRcdFx0dGhpcy5tYXJnaW5zLnJpZ2h0LFxuXHRcdFx0KCBpc1VzZXJTY3JvbGxhYmxlID8gTWF0aC5tYXgoIGNlLnNjcm9sbEhlaWdodCwgY2Uub2Zmc2V0SGVpZ2h0ICkgOiBjZS5vZmZzZXRIZWlnaHQgKSAtXG5cdFx0XHRcdCggcGFyc2VJbnQoIGMuY3NzKCBcImJvcmRlckJvdHRvbVdpZHRoXCIgKSwgMTAgKSB8fCAwICkgLVxuXHRcdFx0XHQoIHBhcnNlSW50KCBjLmNzcyggXCJwYWRkaW5nQm90dG9tXCIgKSwgMTAgKSB8fCAwICkgLVxuXHRcdFx0XHR0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtXG5cdFx0XHRcdHRoaXMubWFyZ2lucy50b3AgLVxuXHRcdFx0XHR0aGlzLm1hcmdpbnMuYm90dG9tXG5cdFx0XTtcblx0XHR0aGlzLnJlbGF0aXZlQ29udGFpbmVyID0gYztcblx0fSxcblxuXHRfY29udmVydFBvc2l0aW9uVG86IGZ1bmN0aW9uKGQsIHBvcykge1xuXG5cdFx0aWYgKCFwb3MpIHtcblx0XHRcdHBvcyA9IHRoaXMucG9zaXRpb247XG5cdFx0fVxuXG5cdFx0dmFyIG1vZCA9IGQgPT09IFwiYWJzb2x1dGVcIiA/IDEgOiAtMSxcblx0XHRcdHNjcm9sbElzUm9vdE5vZGUgPSB0aGlzLl9pc1Jvb3ROb2RlKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdICk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiAoXG5cdFx0XHRcdHBvcy50b3BcdCtcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvblxuXHRcdFx0XHR0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AgKiBtb2QgK1x0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50XG5cdFx0XHRcdHRoaXMub2Zmc2V0LnBhcmVudC50b3AgKiBtb2QgLVx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcilcblx0XHRcdFx0KCAoIHRoaXMuY3NzUG9zaXRpb24gPT09IFwiZml4ZWRcIiA/IC10aGlzLm9mZnNldC5zY3JvbGwudG9wIDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHRoaXMub2Zmc2V0LnNjcm9sbC50b3AgKSApICogbW9kKVxuXHRcdFx0KSxcblx0XHRcdGxlZnQ6IChcblx0XHRcdFx0cG9zLmxlZnQgK1x0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIGFic29sdXRlIG1vdXNlIHBvc2l0aW9uXG5cdFx0XHRcdHRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQgKiBtb2QgK1x0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50XG5cdFx0XHRcdHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0ICogbW9kXHQtXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKVxuXHRcdFx0XHQoICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gXCJmaXhlZFwiID8gLXRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0IDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0ICkgKSAqIG1vZClcblx0XHRcdClcblx0XHR9O1xuXG5cdH0sXG5cblx0X2dlbmVyYXRlUG9zaXRpb246IGZ1bmN0aW9uKCBldmVudCwgY29uc3RyYWluUG9zaXRpb24gKSB7XG5cblx0XHR2YXIgY29udGFpbm1lbnQsIGNvLCB0b3AsIGxlZnQsXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0c2Nyb2xsSXNSb290Tm9kZSA9IHRoaXMuX2lzUm9vdE5vZGUoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0gKSxcblx0XHRcdHBhZ2VYID0gZXZlbnQucGFnZVgsXG5cdFx0XHRwYWdlWSA9IGV2ZW50LnBhZ2VZO1xuXG5cdFx0Ly8gQ2FjaGUgdGhlIHNjcm9sbFxuXHRcdGlmICggIXNjcm9sbElzUm9vdE5vZGUgfHwgIXRoaXMub2Zmc2V0LnNjcm9sbCApIHtcblx0XHRcdHRoaXMub2Zmc2V0LnNjcm9sbCA9IHtcblx0XHRcdFx0dG9wOiB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxcblx0XHRcdFx0bGVmdDogdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8qXG5cdFx0ICogLSBQb3NpdGlvbiBjb25zdHJhaW5pbmcgLVxuXHRcdCAqIENvbnN0cmFpbiB0aGUgcG9zaXRpb24gdG8gYSBtaXggb2YgZ3JpZCwgY29udGFpbm1lbnQuXG5cdFx0ICovXG5cblx0XHQvLyBJZiB3ZSBhcmUgbm90IGRyYWdnaW5nIHlldCwgd2Ugd29uJ3QgY2hlY2sgZm9yIG9wdGlvbnNcblx0XHRpZiAoIGNvbnN0cmFpblBvc2l0aW9uICkge1xuXHRcdFx0aWYgKCB0aGlzLmNvbnRhaW5tZW50ICkge1xuXHRcdFx0XHRpZiAoIHRoaXMucmVsYXRpdmVDb250YWluZXIgKXtcblx0XHRcdFx0XHRjbyA9IHRoaXMucmVsYXRpdmVDb250YWluZXIub2Zmc2V0KCk7XG5cdFx0XHRcdFx0Y29udGFpbm1lbnQgPSBbXG5cdFx0XHRcdFx0XHR0aGlzLmNvbnRhaW5tZW50WyAwIF0gKyBjby5sZWZ0LFxuXHRcdFx0XHRcdFx0dGhpcy5jb250YWlubWVudFsgMSBdICsgY28udG9wLFxuXHRcdFx0XHRcdFx0dGhpcy5jb250YWlubWVudFsgMiBdICsgY28ubGVmdCxcblx0XHRcdFx0XHRcdHRoaXMuY29udGFpbm1lbnRbIDMgXSArIGNvLnRvcFxuXHRcdFx0XHRcdF07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGFpbm1lbnQgPSB0aGlzLmNvbnRhaW5tZW50O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGV2ZW50LnBhZ2VYIC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8IGNvbnRhaW5tZW50WzBdKSB7XG5cdFx0XHRcdFx0cGFnZVggPSBjb250YWlubWVudFswXSArIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGV2ZW50LnBhZ2VZIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wIDwgY29udGFpbm1lbnRbMV0pIHtcblx0XHRcdFx0XHRwYWdlWSA9IGNvbnRhaW5tZW50WzFdICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPiBjb250YWlubWVudFsyXSkge1xuXHRcdFx0XHRcdHBhZ2VYID0gY29udGFpbm1lbnRbMl0gKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChldmVudC5wYWdlWSAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IGNvbnRhaW5tZW50WzNdKSB7XG5cdFx0XHRcdFx0cGFnZVkgPSBjb250YWlubWVudFszXSArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoby5ncmlkKSB7XG5cdFx0XHRcdC8vQ2hlY2sgZm9yIGdyaWQgZWxlbWVudHMgc2V0IHRvIDAgdG8gcHJldmVudCBkaXZpZGUgYnkgMCBlcnJvciBjYXVzaW5nIGludmFsaWQgYXJndW1lbnQgZXJyb3JzIGluIElFIChzZWUgdGlja2V0ICM2OTUwKVxuXHRcdFx0XHR0b3AgPSBvLmdyaWRbMV0gPyB0aGlzLm9yaWdpbmFsUGFnZVkgKyBNYXRoLnJvdW5kKChwYWdlWSAtIHRoaXMub3JpZ2luYWxQYWdlWSkgLyBvLmdyaWRbMV0pICogby5ncmlkWzFdIDogdGhpcy5vcmlnaW5hbFBhZ2VZO1xuXHRcdFx0XHRwYWdlWSA9IGNvbnRhaW5tZW50ID8gKCh0b3AgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPj0gY29udGFpbm1lbnRbMV0gfHwgdG9wIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wID4gY29udGFpbm1lbnRbM10pID8gdG9wIDogKCh0b3AgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPj0gY29udGFpbm1lbnRbMV0pID8gdG9wIC0gby5ncmlkWzFdIDogdG9wICsgby5ncmlkWzFdKSkgOiB0b3A7XG5cblx0XHRcdFx0bGVmdCA9IG8uZ3JpZFswXSA/IHRoaXMub3JpZ2luYWxQYWdlWCArIE1hdGgucm91bmQoKHBhZ2VYIC0gdGhpcy5vcmlnaW5hbFBhZ2VYKSAvIG8uZ3JpZFswXSkgKiBvLmdyaWRbMF0gOiB0aGlzLm9yaWdpbmFsUGFnZVg7XG5cdFx0XHRcdHBhZ2VYID0gY29udGFpbm1lbnQgPyAoKGxlZnQgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID49IGNvbnRhaW5tZW50WzBdIHx8IGxlZnQgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID4gY29udGFpbm1lbnRbMl0pID8gbGVmdCA6ICgobGVmdCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPj0gY29udGFpbm1lbnRbMF0pID8gbGVmdCAtIG8uZ3JpZFswXSA6IGxlZnQgKyBvLmdyaWRbMF0pKSA6IGxlZnQ7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggby5heGlzID09PSBcInlcIiApIHtcblx0XHRcdFx0cGFnZVggPSB0aGlzLm9yaWdpbmFsUGFnZVg7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggby5heGlzID09PSBcInhcIiApIHtcblx0XHRcdFx0cGFnZVkgPSB0aGlzLm9yaWdpbmFsUGFnZVk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogKFxuXHRcdFx0XHRwYWdlWSAtXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvblxuXHRcdFx0XHR0aGlzLm9mZnNldC5jbGljay50b3BcdC1cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBDbGljayBvZmZzZXQgKHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50KVxuXHRcdFx0XHR0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AgLVx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudFxuXHRcdFx0XHR0aGlzLm9mZnNldC5wYXJlbnQudG9wICtcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKVxuXHRcdFx0XHQoIHRoaXMuY3NzUG9zaXRpb24gPT09IFwiZml4ZWRcIiA/IC10aGlzLm9mZnNldC5zY3JvbGwudG9wIDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHRoaXMub2Zmc2V0LnNjcm9sbC50b3AgKSApXG5cdFx0XHQpLFxuXHRcdFx0bGVmdDogKFxuXHRcdFx0XHRwYWdlWCAtXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvblxuXHRcdFx0XHR0aGlzLm9mZnNldC5jbGljay5sZWZ0IC1cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBDbGljayBvZmZzZXQgKHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50KVxuXHRcdFx0XHR0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0IC1cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIG5vZGVzOiBSZWxhdGl2ZSBvZmZzZXQgZnJvbSBlbGVtZW50IHRvIG9mZnNldCBwYXJlbnRcblx0XHRcdFx0dGhpcy5vZmZzZXQucGFyZW50LmxlZnQgK1x0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpXG5cdFx0XHRcdCggdGhpcy5jc3NQb3NpdGlvbiA9PT0gXCJmaXhlZFwiID8gLXRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0IDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0ICkgKVxuXHRcdFx0KVxuXHRcdH07XG5cblx0fSxcblxuXHRfY2xlYXI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuaGVscGVyLnJlbW92ZUNsYXNzKFwidWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIpO1xuXHRcdGlmICh0aGlzLmhlbHBlclswXSAhPT0gdGhpcy5lbGVtZW50WzBdICYmICF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwpIHtcblx0XHRcdHRoaXMuaGVscGVyLnJlbW92ZSgpO1xuXHRcdH1cblx0XHR0aGlzLmhlbHBlciA9IG51bGw7XG5cdFx0dGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsID0gZmFsc2U7XG5cdFx0aWYgKCB0aGlzLmRlc3Ryb3lPbkNsZWFyICkge1xuXHRcdFx0dGhpcy5kZXN0cm95KCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9ub3JtYWxpemVSaWdodEJvdHRvbTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXhpcyAhPT0gXCJ5XCIgJiYgdGhpcy5oZWxwZXIuY3NzKCBcInJpZ2h0XCIgKSAhPT0gXCJhdXRvXCIgKSB7XG5cdFx0XHR0aGlzLmhlbHBlci53aWR0aCggdGhpcy5oZWxwZXIud2lkdGgoKSApO1xuXHRcdFx0dGhpcy5oZWxwZXIuY3NzKCBcInJpZ2h0XCIsIFwiYXV0b1wiICk7XG5cdFx0fVxuXHRcdGlmICggdGhpcy5vcHRpb25zLmF4aXMgIT09IFwieFwiICYmIHRoaXMuaGVscGVyLmNzcyggXCJib3R0b21cIiApICE9PSBcImF1dG9cIiApIHtcblx0XHRcdHRoaXMuaGVscGVyLmhlaWdodCggdGhpcy5oZWxwZXIuaGVpZ2h0KCkgKTtcblx0XHRcdHRoaXMuaGVscGVyLmNzcyggXCJib3R0b21cIiwgXCJhdXRvXCIgKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gRnJvbSBub3cgb24gYnVsayBzdHVmZiAtIG1haW5seSBoZWxwZXJzXG5cblx0X3RyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBldmVudCwgdWkgKSB7XG5cdFx0dWkgPSB1aSB8fCB0aGlzLl91aUhhc2goKTtcblx0XHQkLnVpLnBsdWdpbi5jYWxsKCB0aGlzLCB0eXBlLCBbIGV2ZW50LCB1aSwgdGhpcyBdLCB0cnVlICk7XG5cblx0XHQvLyBBYnNvbHV0ZSBwb3NpdGlvbiBhbmQgb2Zmc2V0IChzZWUgIzY4ODQgKSBoYXZlIHRvIGJlIHJlY2FsY3VsYXRlZCBhZnRlciBwbHVnaW5zXG5cdFx0aWYgKCAvXihkcmFnfHN0YXJ0fHN0b3ApLy50ZXN0KCB0eXBlICkgKSB7XG5cdFx0XHR0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5fY29udmVydFBvc2l0aW9uVG8oIFwiYWJzb2x1dGVcIiApO1xuXHRcdFx0dWkub2Zmc2V0ID0gdGhpcy5wb3NpdGlvbkFicztcblx0XHR9XG5cdFx0cmV0dXJuICQuV2lkZ2V0LnByb3RvdHlwZS5fdHJpZ2dlci5jYWxsKCB0aGlzLCB0eXBlLCBldmVudCwgdWkgKTtcblx0fSxcblxuXHRwbHVnaW5zOiB7fSxcblxuXHRfdWlIYXNoOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0aGVscGVyOiB0aGlzLmhlbHBlcixcblx0XHRcdHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLFxuXHRcdFx0b3JpZ2luYWxQb3NpdGlvbjogdGhpcy5vcmlnaW5hbFBvc2l0aW9uLFxuXHRcdFx0b2Zmc2V0OiB0aGlzLnBvc2l0aW9uQWJzXG5cdFx0fTtcblx0fVxuXG59KTtcblxuJC51aS5wbHVnaW4uYWRkKCBcImRyYWdnYWJsZVwiLCBcImNvbm5lY3RUb1NvcnRhYmxlXCIsIHtcblx0c3RhcnQ6IGZ1bmN0aW9uKCBldmVudCwgdWksIGRyYWdnYWJsZSApIHtcblx0XHR2YXIgdWlTb3J0YWJsZSA9ICQuZXh0ZW5kKCB7fSwgdWksIHtcblx0XHRcdGl0ZW06IGRyYWdnYWJsZS5lbGVtZW50XG5cdFx0fSk7XG5cblx0XHRkcmFnZ2FibGUuc29ydGFibGVzID0gW107XG5cdFx0JCggZHJhZ2dhYmxlLm9wdGlvbnMuY29ubmVjdFRvU29ydGFibGUgKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNvcnRhYmxlID0gJCggdGhpcyApLnNvcnRhYmxlKCBcImluc3RhbmNlXCIgKTtcblxuXHRcdFx0aWYgKCBzb3J0YWJsZSAmJiAhc29ydGFibGUub3B0aW9ucy5kaXNhYmxlZCApIHtcblx0XHRcdFx0ZHJhZ2dhYmxlLnNvcnRhYmxlcy5wdXNoKCBzb3J0YWJsZSApO1xuXG5cdFx0XHRcdC8vIHJlZnJlc2hQb3NpdGlvbnMgaXMgY2FsbGVkIGF0IGRyYWcgc3RhcnQgdG8gcmVmcmVzaCB0aGUgY29udGFpbmVyQ2FjaGVcblx0XHRcdFx0Ly8gd2hpY2ggaXMgdXNlZCBpbiBkcmFnLiBUaGlzIGVuc3VyZXMgaXQncyBpbml0aWFsaXplZCBhbmQgc3luY2hyb25pemVkXG5cdFx0XHRcdC8vIHdpdGggYW55IGNoYW5nZXMgdGhhdCBtaWdodCBoYXZlIGhhcHBlbmVkIG9uIHRoZSBwYWdlIHNpbmNlIGluaXRpYWxpemF0aW9uLlxuXHRcdFx0XHRzb3J0YWJsZS5yZWZyZXNoUG9zaXRpb25zKCk7XG5cdFx0XHRcdHNvcnRhYmxlLl90cmlnZ2VyKFwiYWN0aXZhdGVcIiwgZXZlbnQsIHVpU29ydGFibGUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXHRzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpLCBkcmFnZ2FibGUgKSB7XG5cdFx0dmFyIHVpU29ydGFibGUgPSAkLmV4dGVuZCgge30sIHVpLCB7XG5cdFx0XHRpdGVtOiBkcmFnZ2FibGUuZWxlbWVudFxuXHRcdH0pO1xuXG5cdFx0ZHJhZ2dhYmxlLmNhbmNlbEhlbHBlclJlbW92YWwgPSBmYWxzZTtcblxuXHRcdCQuZWFjaCggZHJhZ2dhYmxlLnNvcnRhYmxlcywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc29ydGFibGUgPSB0aGlzO1xuXG5cdFx0XHRpZiAoIHNvcnRhYmxlLmlzT3ZlciApIHtcblx0XHRcdFx0c29ydGFibGUuaXNPdmVyID0gMDtcblxuXHRcdFx0XHQvLyBBbGxvdyB0aGlzIHNvcnRhYmxlIHRvIGhhbmRsZSByZW1vdmluZyB0aGUgaGVscGVyXG5cdFx0XHRcdGRyYWdnYWJsZS5jYW5jZWxIZWxwZXJSZW1vdmFsID0gdHJ1ZTtcblx0XHRcdFx0c29ydGFibGUuY2FuY2VsSGVscGVyUmVtb3ZhbCA9IGZhbHNlO1xuXG5cdFx0XHRcdC8vIFVzZSBfc3RvcmVkQ1NTIFRvIHJlc3RvcmUgcHJvcGVydGllcyBpbiB0aGUgc29ydGFibGUsXG5cdFx0XHRcdC8vIGFzIHRoaXMgYWxzbyBoYW5kbGVzIHJldmVydCAoIzk2NzUpIHNpbmNlIHRoZSBkcmFnZ2FibGVcblx0XHRcdFx0Ly8gbWF5IGhhdmUgbW9kaWZpZWQgdGhlbSBpbiB1bmV4cGVjdGVkIHdheXMgKCM4ODA5KVxuXHRcdFx0XHRzb3J0YWJsZS5fc3RvcmVkQ1NTID0ge1xuXHRcdFx0XHRcdHBvc2l0aW9uOiBzb3J0YWJsZS5wbGFjZWhvbGRlci5jc3MoIFwicG9zaXRpb25cIiApLFxuXHRcdFx0XHRcdHRvcDogc29ydGFibGUucGxhY2Vob2xkZXIuY3NzKCBcInRvcFwiICksXG5cdFx0XHRcdFx0bGVmdDogc29ydGFibGUucGxhY2Vob2xkZXIuY3NzKCBcImxlZnRcIiApXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0c29ydGFibGUuX21vdXNlU3RvcChldmVudCk7XG5cblx0XHRcdFx0Ly8gT25jZSBkcmFnIGhhcyBlbmRlZCwgdGhlIHNvcnRhYmxlIHNob3VsZCByZXR1cm4gdG8gdXNpbmdcblx0XHRcdFx0Ly8gaXRzIG9yaWdpbmFsIGhlbHBlciwgbm90IHRoZSBzaGFyZWQgaGVscGVyIGZyb20gZHJhZ2dhYmxlXG5cdFx0XHRcdHNvcnRhYmxlLm9wdGlvbnMuaGVscGVyID0gc29ydGFibGUub3B0aW9ucy5faGVscGVyO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gUHJldmVudCB0aGlzIFNvcnRhYmxlIGZyb20gcmVtb3ZpbmcgdGhlIGhlbHBlci5cblx0XHRcdFx0Ly8gSG93ZXZlciwgZG9uJ3Qgc2V0IHRoZSBkcmFnZ2FibGUgdG8gcmVtb3ZlIHRoZSBoZWxwZXJcblx0XHRcdFx0Ly8gZWl0aGVyIGFzIGFub3RoZXIgY29ubmVjdGVkIFNvcnRhYmxlIG1heSB5ZXQgaGFuZGxlIHRoZSByZW1vdmFsLlxuXHRcdFx0XHRzb3J0YWJsZS5jYW5jZWxIZWxwZXJSZW1vdmFsID0gdHJ1ZTtcblxuXHRcdFx0XHRzb3J0YWJsZS5fdHJpZ2dlciggXCJkZWFjdGl2YXRlXCIsIGV2ZW50LCB1aVNvcnRhYmxlICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cdGRyYWc6IGZ1bmN0aW9uKCBldmVudCwgdWksIGRyYWdnYWJsZSApIHtcblx0XHQkLmVhY2goIGRyYWdnYWJsZS5zb3J0YWJsZXMsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGlubmVybW9zdEludGVyc2VjdGluZyA9IGZhbHNlLFxuXHRcdFx0XHRzb3J0YWJsZSA9IHRoaXM7XG5cblx0XHRcdC8vIENvcHkgb3ZlciB2YXJpYWJsZXMgdGhhdCBzb3J0YWJsZSdzIF9pbnRlcnNlY3RzV2l0aCB1c2VzXG5cdFx0XHRzb3J0YWJsZS5wb3NpdGlvbkFicyA9IGRyYWdnYWJsZS5wb3NpdGlvbkFicztcblx0XHRcdHNvcnRhYmxlLmhlbHBlclByb3BvcnRpb25zID0gZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zO1xuXHRcdFx0c29ydGFibGUub2Zmc2V0LmNsaWNrID0gZHJhZ2dhYmxlLm9mZnNldC5jbGljaztcblxuXHRcdFx0aWYgKCBzb3J0YWJsZS5faW50ZXJzZWN0c1dpdGgoIHNvcnRhYmxlLmNvbnRhaW5lckNhY2hlICkgKSB7XG5cdFx0XHRcdGlubmVybW9zdEludGVyc2VjdGluZyA9IHRydWU7XG5cblx0XHRcdFx0JC5lYWNoKCBkcmFnZ2FibGUuc29ydGFibGVzLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvLyBDb3B5IG92ZXIgdmFyaWFibGVzIHRoYXQgc29ydGFibGUncyBfaW50ZXJzZWN0c1dpdGggdXNlc1xuXHRcdFx0XHRcdHRoaXMucG9zaXRpb25BYnMgPSBkcmFnZ2FibGUucG9zaXRpb25BYnM7XG5cdFx0XHRcdFx0dGhpcy5oZWxwZXJQcm9wb3J0aW9ucyA9IGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucztcblx0XHRcdFx0XHR0aGlzLm9mZnNldC5jbGljayA9IGRyYWdnYWJsZS5vZmZzZXQuY2xpY2s7XG5cblx0XHRcdFx0XHRpZiAoIHRoaXMgIT09IHNvcnRhYmxlICYmXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2ludGVyc2VjdHNXaXRoKCB0aGlzLmNvbnRhaW5lckNhY2hlICkgJiZcblx0XHRcdFx0XHRcdFx0JC5jb250YWlucyggc29ydGFibGUuZWxlbWVudFsgMCBdLCB0aGlzLmVsZW1lbnRbIDAgXSApICkge1xuXHRcdFx0XHRcdFx0aW5uZXJtb3N0SW50ZXJzZWN0aW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGlubmVybW9zdEludGVyc2VjdGluZztcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaW5uZXJtb3N0SW50ZXJzZWN0aW5nICkge1xuXHRcdFx0XHQvLyBJZiBpdCBpbnRlcnNlY3RzLCB3ZSB1c2UgYSBsaXR0bGUgaXNPdmVyIHZhcmlhYmxlIGFuZCBzZXQgaXQgb25jZSxcblx0XHRcdFx0Ly8gc28gdGhhdCB0aGUgbW92ZS1pbiBzdHVmZiBnZXRzIGZpcmVkIG9ubHkgb25jZS5cblx0XHRcdFx0aWYgKCAhc29ydGFibGUuaXNPdmVyICkge1xuXHRcdFx0XHRcdHNvcnRhYmxlLmlzT3ZlciA9IDE7XG5cblx0XHRcdFx0XHRzb3J0YWJsZS5jdXJyZW50SXRlbSA9IHVpLmhlbHBlclxuXHRcdFx0XHRcdFx0LmFwcGVuZFRvKCBzb3J0YWJsZS5lbGVtZW50IClcblx0XHRcdFx0XHRcdC5kYXRhKCBcInVpLXNvcnRhYmxlLWl0ZW1cIiwgdHJ1ZSApO1xuXG5cdFx0XHRcdFx0Ly8gU3RvcmUgaGVscGVyIG9wdGlvbiB0byBsYXRlciByZXN0b3JlIGl0XG5cdFx0XHRcdFx0c29ydGFibGUub3B0aW9ucy5faGVscGVyID0gc29ydGFibGUub3B0aW9ucy5oZWxwZXI7XG5cblx0XHRcdFx0XHRzb3J0YWJsZS5vcHRpb25zLmhlbHBlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHVpLmhlbHBlclsgMCBdO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvLyBGaXJlIHRoZSBzdGFydCBldmVudHMgb2YgdGhlIHNvcnRhYmxlIHdpdGggb3VyIHBhc3NlZCBicm93c2VyIGV2ZW50LFxuXHRcdFx0XHRcdC8vIGFuZCBvdXIgb3duIGhlbHBlciAoc28gaXQgZG9lc24ndCBjcmVhdGUgYSBuZXcgb25lKVxuXHRcdFx0XHRcdGV2ZW50LnRhcmdldCA9IHNvcnRhYmxlLmN1cnJlbnRJdGVtWyAwIF07XG5cdFx0XHRcdFx0c29ydGFibGUuX21vdXNlQ2FwdHVyZSggZXZlbnQsIHRydWUgKTtcblx0XHRcdFx0XHRzb3J0YWJsZS5fbW91c2VTdGFydCggZXZlbnQsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdC8vIEJlY2F1c2UgdGhlIGJyb3dzZXIgZXZlbnQgaXMgd2F5IG9mZiB0aGUgbmV3IGFwcGVuZGVkIHBvcnRsZXQsXG5cdFx0XHRcdFx0Ly8gbW9kaWZ5IG5lY2Vzc2FyeSB2YXJpYWJsZXMgdG8gcmVmbGVjdCB0aGUgY2hhbmdlc1xuXHRcdFx0XHRcdHNvcnRhYmxlLm9mZnNldC5jbGljay50b3AgPSBkcmFnZ2FibGUub2Zmc2V0LmNsaWNrLnRvcDtcblx0XHRcdFx0XHRzb3J0YWJsZS5vZmZzZXQuY2xpY2subGVmdCA9IGRyYWdnYWJsZS5vZmZzZXQuY2xpY2subGVmdDtcblx0XHRcdFx0XHRzb3J0YWJsZS5vZmZzZXQucGFyZW50LmxlZnQgLT0gZHJhZ2dhYmxlLm9mZnNldC5wYXJlbnQubGVmdCAtXG5cdFx0XHRcdFx0XHRzb3J0YWJsZS5vZmZzZXQucGFyZW50LmxlZnQ7XG5cdFx0XHRcdFx0c29ydGFibGUub2Zmc2V0LnBhcmVudC50b3AgLT0gZHJhZ2dhYmxlLm9mZnNldC5wYXJlbnQudG9wIC1cblx0XHRcdFx0XHRcdHNvcnRhYmxlLm9mZnNldC5wYXJlbnQudG9wO1xuXG5cdFx0XHRcdFx0ZHJhZ2dhYmxlLl90cmlnZ2VyKCBcInRvU29ydGFibGVcIiwgZXZlbnQgKTtcblxuXHRcdFx0XHRcdC8vIEluZm9ybSBkcmFnZ2FibGUgdGhhdCB0aGUgaGVscGVyIGlzIGluIGEgdmFsaWQgZHJvcCB6b25lLFxuXHRcdFx0XHRcdC8vIHVzZWQgc29sZWx5IGluIHRoZSByZXZlcnQgb3B0aW9uIHRvIGhhbmRsZSBcInZhbGlkL2ludmFsaWRcIi5cblx0XHRcdFx0XHRkcmFnZ2FibGUuZHJvcHBlZCA9IHNvcnRhYmxlLmVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBOZWVkIHRvIHJlZnJlc2hQb3NpdGlvbnMgb2YgYWxsIHNvcnRhYmxlcyBpbiB0aGUgY2FzZSB0aGF0XG5cdFx0XHRcdFx0Ly8gYWRkaW5nIHRvIG9uZSBzb3J0YWJsZSBjaGFuZ2VzIHRoZSBsb2NhdGlvbiBvZiB0aGUgb3RoZXIgc29ydGFibGVzICgjOTY3NSlcblx0XHRcdFx0XHQkLmVhY2goIGRyYWdnYWJsZS5zb3J0YWJsZXMsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoUG9zaXRpb25zKCk7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvLyBoYWNrIHNvIHJlY2VpdmUvdXBkYXRlIGNhbGxiYWNrcyB3b3JrIChtb3N0bHkpXG5cdFx0XHRcdFx0ZHJhZ2dhYmxlLmN1cnJlbnRJdGVtID0gZHJhZ2dhYmxlLmVsZW1lbnQ7XG5cdFx0XHRcdFx0c29ydGFibGUuZnJvbU91dHNpZGUgPSBkcmFnZ2FibGU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNvcnRhYmxlLmN1cnJlbnRJdGVtICkge1xuXHRcdFx0XHRcdHNvcnRhYmxlLl9tb3VzZURyYWcoIGV2ZW50ICk7XG5cdFx0XHRcdFx0Ly8gQ29weSB0aGUgc29ydGFibGUncyBwb3NpdGlvbiBiZWNhdXNlIHRoZSBkcmFnZ2FibGUncyBjYW4gcG90ZW50aWFsbHkgcmVmbGVjdFxuXHRcdFx0XHRcdC8vIGEgcmVsYXRpdmUgcG9zaXRpb24sIHdoaWxlIHNvcnRhYmxlIGlzIGFsd2F5cyBhYnNvbHV0ZSwgd2hpY2ggdGhlIGRyYWdnZWRcblx0XHRcdFx0XHQvLyBlbGVtZW50IGhhcyBub3cgYmVjb21lLiAoIzg4MDkpXG5cdFx0XHRcdFx0dWkucG9zaXRpb24gPSBzb3J0YWJsZS5wb3NpdGlvbjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSWYgaXQgZG9lc24ndCBpbnRlcnNlY3Qgd2l0aCB0aGUgc29ydGFibGUsIGFuZCBpdCBpbnRlcnNlY3RlZCBiZWZvcmUsXG5cdFx0XHRcdC8vIHdlIGZha2UgdGhlIGRyYWcgc3RvcCBvZiB0aGUgc29ydGFibGUsIGJ1dCBtYWtlIHN1cmUgaXQgZG9lc24ndCByZW1vdmVcblx0XHRcdFx0Ly8gdGhlIGhlbHBlciBieSB1c2luZyBjYW5jZWxIZWxwZXJSZW1vdmFsLlxuXHRcdFx0XHRpZiAoIHNvcnRhYmxlLmlzT3ZlciApIHtcblxuXHRcdFx0XHRcdHNvcnRhYmxlLmlzT3ZlciA9IDA7XG5cdFx0XHRcdFx0c29ydGFibGUuY2FuY2VsSGVscGVyUmVtb3ZhbCA9IHRydWU7XG5cblx0XHRcdFx0XHQvLyBDYWxsaW5nIHNvcnRhYmxlJ3MgbW91c2VTdG9wIHdvdWxkIHRyaWdnZXIgYSByZXZlcnQsXG5cdFx0XHRcdFx0Ly8gc28gcmV2ZXJ0IG11c3QgYmUgdGVtcG9yYXJpbHkgZmFsc2UgdW50aWwgYWZ0ZXIgbW91c2VTdG9wIGlzIGNhbGxlZC5cblx0XHRcdFx0XHRzb3J0YWJsZS5vcHRpb25zLl9yZXZlcnQgPSBzb3J0YWJsZS5vcHRpb25zLnJldmVydDtcblx0XHRcdFx0XHRzb3J0YWJsZS5vcHRpb25zLnJldmVydCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0c29ydGFibGUuX3RyaWdnZXIoIFwib3V0XCIsIGV2ZW50LCBzb3J0YWJsZS5fdWlIYXNoKCBzb3J0YWJsZSApICk7XG5cdFx0XHRcdFx0c29ydGFibGUuX21vdXNlU3RvcCggZXZlbnQsIHRydWUgKTtcblxuXHRcdFx0XHRcdC8vIHJlc3RvcmUgc29ydGFibGUgYmVoYXZpb3JzIHRoYXQgd2VyZSBtb2RmaWVkXG5cdFx0XHRcdFx0Ly8gd2hlbiB0aGUgZHJhZ2dhYmxlIGVudGVyZWQgdGhlIHNvcnRhYmxlIGFyZWEgKCM5NDgxKVxuXHRcdFx0XHRcdHNvcnRhYmxlLm9wdGlvbnMucmV2ZXJ0ID0gc29ydGFibGUub3B0aW9ucy5fcmV2ZXJ0O1xuXHRcdFx0XHRcdHNvcnRhYmxlLm9wdGlvbnMuaGVscGVyID0gc29ydGFibGUub3B0aW9ucy5faGVscGVyO1xuXG5cdFx0XHRcdFx0aWYgKCBzb3J0YWJsZS5wbGFjZWhvbGRlciApIHtcblx0XHRcdFx0XHRcdHNvcnRhYmxlLnBsYWNlaG9sZGVyLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFJlY2FsY3VsYXRlIHRoZSBkcmFnZ2FibGUncyBvZmZzZXQgY29uc2lkZXJpbmcgdGhlIHNvcnRhYmxlXG5cdFx0XHRcdFx0Ly8gbWF5IGhhdmUgbW9kaWZpZWQgdGhlbSBpbiB1bmV4cGVjdGVkIHdheXMgKCM4ODA5KVxuXHRcdFx0XHRcdGRyYWdnYWJsZS5fcmVmcmVzaE9mZnNldHMoIGV2ZW50ICk7XG5cdFx0XHRcdFx0dWkucG9zaXRpb24gPSBkcmFnZ2FibGUuX2dlbmVyYXRlUG9zaXRpb24oIGV2ZW50LCB0cnVlICk7XG5cblx0XHRcdFx0XHRkcmFnZ2FibGUuX3RyaWdnZXIoIFwiZnJvbVNvcnRhYmxlXCIsIGV2ZW50ICk7XG5cblx0XHRcdFx0XHQvLyBJbmZvcm0gZHJhZ2dhYmxlIHRoYXQgdGhlIGhlbHBlciBpcyBubyBsb25nZXIgaW4gYSB2YWxpZCBkcm9wIHpvbmVcblx0XHRcdFx0XHRkcmFnZ2FibGUuZHJvcHBlZCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0Ly8gTmVlZCB0byByZWZyZXNoUG9zaXRpb25zIG9mIGFsbCBzb3J0YWJsZXMganVzdCBpbiBjYXNlIHJlbW92aW5nXG5cdFx0XHRcdFx0Ly8gZnJvbSBvbmUgc29ydGFibGUgY2hhbmdlcyB0aGUgbG9jYXRpb24gb2Ygb3RoZXIgc29ydGFibGVzICgjOTY3NSlcblx0XHRcdFx0XHQkLmVhY2goIGRyYWdnYWJsZS5zb3J0YWJsZXMsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoUG9zaXRpb25zKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxufSk7XG5cbiQudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLCBcImN1cnNvclwiLCB7XG5cdHN0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpbnN0YW5jZSApIHtcblx0XHR2YXIgdCA9ICQoIFwiYm9keVwiICksXG5cdFx0XHRvID0gaW5zdGFuY2Uub3B0aW9ucztcblxuXHRcdGlmICh0LmNzcyhcImN1cnNvclwiKSkge1xuXHRcdFx0by5fY3Vyc29yID0gdC5jc3MoXCJjdXJzb3JcIik7XG5cdFx0fVxuXHRcdHQuY3NzKFwiY3Vyc29yXCIsIG8uY3Vyc29yKTtcblx0fSxcblx0c3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7XG5cdFx0dmFyIG8gPSBpbnN0YW5jZS5vcHRpb25zO1xuXHRcdGlmIChvLl9jdXJzb3IpIHtcblx0XHRcdCQoXCJib2R5XCIpLmNzcyhcImN1cnNvclwiLCBvLl9jdXJzb3IpO1xuXHRcdH1cblx0fVxufSk7XG5cbiQudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLCBcIm9wYWNpdHlcIiwge1xuXHRzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7XG5cdFx0dmFyIHQgPSAkKCB1aS5oZWxwZXIgKSxcblx0XHRcdG8gPSBpbnN0YW5jZS5vcHRpb25zO1xuXHRcdGlmICh0LmNzcyhcIm9wYWNpdHlcIikpIHtcblx0XHRcdG8uX29wYWNpdHkgPSB0LmNzcyhcIm9wYWNpdHlcIik7XG5cdFx0fVxuXHRcdHQuY3NzKFwib3BhY2l0eVwiLCBvLm9wYWNpdHkpO1xuXHR9LFxuXHRzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpbnN0YW5jZSApIHtcblx0XHR2YXIgbyA9IGluc3RhbmNlLm9wdGlvbnM7XG5cdFx0aWYgKG8uX29wYWNpdHkpIHtcblx0XHRcdCQodWkuaGVscGVyKS5jc3MoXCJvcGFjaXR5XCIsIG8uX29wYWNpdHkpO1xuXHRcdH1cblx0fVxufSk7XG5cbiQudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLCBcInNjcm9sbFwiLCB7XG5cdHN0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpICkge1xuXHRcdGlmICggIWkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuICkge1xuXHRcdFx0aS5zY3JvbGxQYXJlbnROb3RIaWRkZW4gPSBpLmhlbHBlci5zY3JvbGxQYXJlbnQoIGZhbHNlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBpLnNjcm9sbFBhcmVudE5vdEhpZGRlblsgMCBdICE9PSBpLmRvY3VtZW50WyAwIF0gJiYgaS5zY3JvbGxQYXJlbnROb3RIaWRkZW5bIDAgXS50YWdOYW1lICE9PSBcIkhUTUxcIiApIHtcblx0XHRcdGkub3ZlcmZsb3dPZmZzZXQgPSBpLnNjcm9sbFBhcmVudE5vdEhpZGRlbi5vZmZzZXQoKTtcblx0XHR9XG5cdH0sXG5cdGRyYWc6IGZ1bmN0aW9uKCBldmVudCwgdWksIGkgICkge1xuXG5cdFx0dmFyIG8gPSBpLm9wdGlvbnMsXG5cdFx0XHRzY3JvbGxlZCA9IGZhbHNlLFxuXHRcdFx0c2Nyb2xsUGFyZW50ID0gaS5zY3JvbGxQYXJlbnROb3RIaWRkZW5bIDAgXSxcblx0XHRcdGRvY3VtZW50ID0gaS5kb2N1bWVudFsgMCBdO1xuXG5cdFx0aWYgKCBzY3JvbGxQYXJlbnQgIT09IGRvY3VtZW50ICYmIHNjcm9sbFBhcmVudC50YWdOYW1lICE9PSBcIkhUTUxcIiApIHtcblx0XHRcdGlmICggIW8uYXhpcyB8fCBvLmF4aXMgIT09IFwieFwiICkge1xuXHRcdFx0XHRpZiAoICggaS5vdmVyZmxvd09mZnNldC50b3AgKyBzY3JvbGxQYXJlbnQub2Zmc2V0SGVpZ2h0ICkgLSBldmVudC5wYWdlWSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7XG5cdFx0XHRcdFx0c2Nyb2xsUGFyZW50LnNjcm9sbFRvcCA9IHNjcm9sbGVkID0gc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCArIG8uc2Nyb2xsU3BlZWQ7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIGV2ZW50LnBhZ2VZIC0gaS5vdmVyZmxvd09mZnNldC50b3AgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICkge1xuXHRcdFx0XHRcdHNjcm9sbFBhcmVudC5zY3JvbGxUb3AgPSBzY3JvbGxlZCA9IHNjcm9sbFBhcmVudC5zY3JvbGxUb3AgLSBvLnNjcm9sbFNwZWVkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggIW8uYXhpcyB8fCBvLmF4aXMgIT09IFwieVwiICkge1xuXHRcdFx0XHRpZiAoICggaS5vdmVyZmxvd09mZnNldC5sZWZ0ICsgc2Nyb2xsUGFyZW50Lm9mZnNldFdpZHRoICkgLSBldmVudC5wYWdlWCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7XG5cdFx0XHRcdFx0c2Nyb2xsUGFyZW50LnNjcm9sbExlZnQgPSBzY3JvbGxlZCA9IHNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0ICsgby5zY3JvbGxTcGVlZDtcblx0XHRcdFx0fSBlbHNlIGlmICggZXZlbnQucGFnZVggLSBpLm92ZXJmbG93T2Zmc2V0LmxlZnQgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICkge1xuXHRcdFx0XHRcdHNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0ID0gc2Nyb2xsZWQgPSBzY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCAtIG8uc2Nyb2xsU3BlZWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGlmICghby5heGlzIHx8IG8uYXhpcyAhPT0gXCJ4XCIpIHtcblx0XHRcdFx0aWYgKGV2ZW50LnBhZ2VZIC0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KSB7XG5cdFx0XHRcdFx0c2Nyb2xsZWQgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgLSBvLnNjcm9sbFNwZWVkKTtcblx0XHRcdFx0fSBlbHNlIGlmICgkKHdpbmRvdykuaGVpZ2h0KCkgLSAoZXZlbnQucGFnZVkgLSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KSB7XG5cdFx0XHRcdFx0c2Nyb2xsZWQgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgKyBvLnNjcm9sbFNwZWVkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIW8uYXhpcyB8fCBvLmF4aXMgIT09IFwieVwiKSB7XG5cdFx0XHRcdGlmIChldmVudC5wYWdlWCAtICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHtcblx0XHRcdFx0XHRzY3JvbGxlZCA9ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpIC0gby5zY3JvbGxTcGVlZCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgLSAoZXZlbnQucGFnZVggLSAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkpIDwgby5zY3JvbGxTZW5zaXRpdml0eSkge1xuXHRcdFx0XHRcdHNjcm9sbGVkID0gJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgKyBvLnNjcm9sbFNwZWVkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0aWYgKHNjcm9sbGVkICE9PSBmYWxzZSAmJiAkLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyKSB7XG5cdFx0XHQkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhpLCBldmVudCk7XG5cdFx0fVxuXG5cdH1cbn0pO1xuXG4kLnVpLnBsdWdpbi5hZGQoXCJkcmFnZ2FibGVcIiwgXCJzbmFwXCIsIHtcblx0c3RhcnQ6IGZ1bmN0aW9uKCBldmVudCwgdWksIGkgKSB7XG5cblx0XHR2YXIgbyA9IGkub3B0aW9ucztcblxuXHRcdGkuc25hcEVsZW1lbnRzID0gW107XG5cblx0XHQkKG8uc25hcC5jb25zdHJ1Y3RvciAhPT0gU3RyaW5nID8gKCBvLnNuYXAuaXRlbXMgfHwgXCI6ZGF0YSh1aS1kcmFnZ2FibGUpXCIgKSA6IG8uc25hcCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciAkdCA9ICQodGhpcyksXG5cdFx0XHRcdCRvID0gJHQub2Zmc2V0KCk7XG5cdFx0XHRpZiAodGhpcyAhPT0gaS5lbGVtZW50WzBdKSB7XG5cdFx0XHRcdGkuc25hcEVsZW1lbnRzLnB1c2goe1xuXHRcdFx0XHRcdGl0ZW06IHRoaXMsXG5cdFx0XHRcdFx0d2lkdGg6ICR0Lm91dGVyV2lkdGgoKSwgaGVpZ2h0OiAkdC5vdXRlckhlaWdodCgpLFxuXHRcdFx0XHRcdHRvcDogJG8udG9wLCBsZWZ0OiAkby5sZWZ0XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdH0sXG5cdGRyYWc6IGZ1bmN0aW9uKCBldmVudCwgdWksIGluc3QgKSB7XG5cblx0XHR2YXIgdHMsIGJzLCBscywgcnMsIGwsIHIsIHQsIGIsIGksIGZpcnN0LFxuXHRcdFx0byA9IGluc3Qub3B0aW9ucyxcblx0XHRcdGQgPSBvLnNuYXBUb2xlcmFuY2UsXG5cdFx0XHR4MSA9IHVpLm9mZnNldC5sZWZ0LCB4MiA9IHgxICsgaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCxcblx0XHRcdHkxID0gdWkub2Zmc2V0LnRvcCwgeTIgPSB5MSArIGluc3QuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0O1xuXG5cdFx0Zm9yIChpID0gaW5zdC5zbmFwRWxlbWVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuXG5cdFx0XHRsID0gaW5zdC5zbmFwRWxlbWVudHNbaV0ubGVmdCAtIGluc3QubWFyZ2lucy5sZWZ0O1xuXHRcdFx0ciA9IGwgKyBpbnN0LnNuYXBFbGVtZW50c1tpXS53aWR0aDtcblx0XHRcdHQgPSBpbnN0LnNuYXBFbGVtZW50c1tpXS50b3AgLSBpbnN0Lm1hcmdpbnMudG9wO1xuXHRcdFx0YiA9IHQgKyBpbnN0LnNuYXBFbGVtZW50c1tpXS5oZWlnaHQ7XG5cblx0XHRcdGlmICggeDIgPCBsIC0gZCB8fCB4MSA+IHIgKyBkIHx8IHkyIDwgdCAtIGQgfHwgeTEgPiBiICsgZCB8fCAhJC5jb250YWlucyggaW5zdC5zbmFwRWxlbWVudHNbIGkgXS5pdGVtLm93bmVyRG9jdW1lbnQsIGluc3Quc25hcEVsZW1lbnRzWyBpIF0uaXRlbSApICkge1xuXHRcdFx0XHRpZiAoaW5zdC5zbmFwRWxlbWVudHNbaV0uc25hcHBpbmcpIHtcblx0XHRcdFx0XHQoaW5zdC5vcHRpb25zLnNuYXAucmVsZWFzZSAmJiBpbnN0Lm9wdGlvbnMuc25hcC5yZWxlYXNlLmNhbGwoaW5zdC5lbGVtZW50LCBldmVudCwgJC5leHRlbmQoaW5zdC5fdWlIYXNoKCksIHsgc25hcEl0ZW06IGluc3Quc25hcEVsZW1lbnRzW2ldLml0ZW0gfSkpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpbnN0LnNuYXBFbGVtZW50c1tpXS5zbmFwcGluZyA9IGZhbHNlO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKG8uc25hcE1vZGUgIT09IFwiaW5uZXJcIikge1xuXHRcdFx0XHR0cyA9IE1hdGguYWJzKHQgLSB5MikgPD0gZDtcblx0XHRcdFx0YnMgPSBNYXRoLmFicyhiIC0geTEpIDw9IGQ7XG5cdFx0XHRcdGxzID0gTWF0aC5hYnMobCAtIHgyKSA8PSBkO1xuXHRcdFx0XHRycyA9IE1hdGguYWJzKHIgLSB4MSkgPD0gZDtcblx0XHRcdFx0aWYgKHRzKSB7XG5cdFx0XHRcdFx0dWkucG9zaXRpb24udG9wID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7IHRvcDogdCAtIGluc3QuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LCBsZWZ0OiAwIH0pLnRvcDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoYnMpIHtcblx0XHRcdFx0XHR1aS5wb3NpdGlvbi50b3AgPSBpbnN0Ll9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIsIHsgdG9wOiBiLCBsZWZ0OiAwIH0pLnRvcDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobHMpIHtcblx0XHRcdFx0XHR1aS5wb3NpdGlvbi5sZWZ0ID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7IHRvcDogMCwgbGVmdDogbCAtIGluc3QuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggfSkubGVmdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocnMpIHtcblx0XHRcdFx0XHR1aS5wb3NpdGlvbi5sZWZ0ID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7IHRvcDogMCwgbGVmdDogciB9KS5sZWZ0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZpcnN0ID0gKHRzIHx8IGJzIHx8IGxzIHx8IHJzKTtcblxuXHRcdFx0aWYgKG8uc25hcE1vZGUgIT09IFwib3V0ZXJcIikge1xuXHRcdFx0XHR0cyA9IE1hdGguYWJzKHQgLSB5MSkgPD0gZDtcblx0XHRcdFx0YnMgPSBNYXRoLmFicyhiIC0geTIpIDw9IGQ7XG5cdFx0XHRcdGxzID0gTWF0aC5hYnMobCAtIHgxKSA8PSBkO1xuXHRcdFx0XHRycyA9IE1hdGguYWJzKHIgLSB4MikgPD0gZDtcblx0XHRcdFx0aWYgKHRzKSB7XG5cdFx0XHRcdFx0dWkucG9zaXRpb24udG9wID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7IHRvcDogdCwgbGVmdDogMCB9KS50b3A7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGJzKSB7XG5cdFx0XHRcdFx0dWkucG9zaXRpb24udG9wID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7IHRvcDogYiAtIGluc3QuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LCBsZWZ0OiAwIH0pLnRvcDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobHMpIHtcblx0XHRcdFx0XHR1aS5wb3NpdGlvbi5sZWZ0ID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLCB7IHRvcDogMCwgbGVmdDogbCB9KS5sZWZ0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChycykge1xuXHRcdFx0XHRcdHVpLnBvc2l0aW9uLmxlZnQgPSBpbnN0Ll9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIsIHsgdG9wOiAwLCBsZWZ0OiByIC0gaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCB9KS5sZWZ0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICghaW5zdC5zbmFwRWxlbWVudHNbaV0uc25hcHBpbmcgJiYgKHRzIHx8IGJzIHx8IGxzIHx8IHJzIHx8IGZpcnN0KSkge1xuXHRcdFx0XHQoaW5zdC5vcHRpb25zLnNuYXAuc25hcCAmJiBpbnN0Lm9wdGlvbnMuc25hcC5zbmFwLmNhbGwoaW5zdC5lbGVtZW50LCBldmVudCwgJC5leHRlbmQoaW5zdC5fdWlIYXNoKCksIHsgc25hcEl0ZW06IGluc3Quc25hcEVsZW1lbnRzW2ldLml0ZW0gfSkpKTtcblx0XHRcdH1cblx0XHRcdGluc3Quc25hcEVsZW1lbnRzW2ldLnNuYXBwaW5nID0gKHRzIHx8IGJzIHx8IGxzIHx8IHJzIHx8IGZpcnN0KTtcblxuXHRcdH1cblxuXHR9XG59KTtcblxuJC51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsIFwic3RhY2tcIiwge1xuXHRzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7XG5cdFx0dmFyIG1pbixcblx0XHRcdG8gPSBpbnN0YW5jZS5vcHRpb25zLFxuXHRcdFx0Z3JvdXAgPSAkLm1ha2VBcnJheSgkKG8uc3RhY2spKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdFx0cmV0dXJuIChwYXJzZUludCgkKGEpLmNzcyhcInpJbmRleFwiKSwgMTApIHx8IDApIC0gKHBhcnNlSW50KCQoYikuY3NzKFwiekluZGV4XCIpLCAxMCkgfHwgMCk7XG5cdFx0XHR9KTtcblxuXHRcdGlmICghZ3JvdXAubGVuZ3RoKSB7IHJldHVybjsgfVxuXG5cdFx0bWluID0gcGFyc2VJbnQoJChncm91cFswXSkuY3NzKFwiekluZGV4XCIpLCAxMCkgfHwgMDtcblx0XHQkKGdyb3VwKS5lYWNoKGZ1bmN0aW9uKGkpIHtcblx0XHRcdCQodGhpcykuY3NzKFwiekluZGV4XCIsIG1pbiArIGkpO1xuXHRcdH0pO1xuXHRcdHRoaXMuY3NzKFwiekluZGV4XCIsIChtaW4gKyBncm91cC5sZW5ndGgpKTtcblx0fVxufSk7XG5cbiQudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLCBcInpJbmRleFwiLCB7XG5cdHN0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpbnN0YW5jZSApIHtcblx0XHR2YXIgdCA9ICQoIHVpLmhlbHBlciApLFxuXHRcdFx0byA9IGluc3RhbmNlLm9wdGlvbnM7XG5cblx0XHRpZiAodC5jc3MoXCJ6SW5kZXhcIikpIHtcblx0XHRcdG8uX3pJbmRleCA9IHQuY3NzKFwiekluZGV4XCIpO1xuXHRcdH1cblx0XHR0LmNzcyhcInpJbmRleFwiLCBvLnpJbmRleCk7XG5cdH0sXG5cdHN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWksIGluc3RhbmNlICkge1xuXHRcdHZhciBvID0gaW5zdGFuY2Uub3B0aW9ucztcblxuXHRcdGlmIChvLl96SW5kZXgpIHtcblx0XHRcdCQodWkuaGVscGVyKS5jc3MoXCJ6SW5kZXhcIiwgby5fekluZGV4KTtcblx0XHR9XG5cdH1cbn0pO1xuXG52YXIgZHJhZ2dhYmxlID0gJC51aS5kcmFnZ2FibGU7XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgUmVzaXphYmxlIDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vcmVzaXphYmxlL1xuICovXG5cblxuJC53aWRnZXQoXCJ1aS5yZXNpemFibGVcIiwgJC51aS5tb3VzZSwge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXHR3aWRnZXRFdmVudFByZWZpeDogXCJyZXNpemVcIixcblx0b3B0aW9uczoge1xuXHRcdGFsc29SZXNpemU6IGZhbHNlLFxuXHRcdGFuaW1hdGU6IGZhbHNlLFxuXHRcdGFuaW1hdGVEdXJhdGlvbjogXCJzbG93XCIsXG5cdFx0YW5pbWF0ZUVhc2luZzogXCJzd2luZ1wiLFxuXHRcdGFzcGVjdFJhdGlvOiBmYWxzZSxcblx0XHRhdXRvSGlkZTogZmFsc2UsXG5cdFx0Y29udGFpbm1lbnQ6IGZhbHNlLFxuXHRcdGdob3N0OiBmYWxzZSxcblx0XHRncmlkOiBmYWxzZSxcblx0XHRoYW5kbGVzOiBcImUscyxzZVwiLFxuXHRcdGhlbHBlcjogZmFsc2UsXG5cdFx0bWF4SGVpZ2h0OiBudWxsLFxuXHRcdG1heFdpZHRoOiBudWxsLFxuXHRcdG1pbkhlaWdodDogMTAsXG5cdFx0bWluV2lkdGg6IDEwLFxuXHRcdC8vIFNlZSAjNzk2MFxuXHRcdHpJbmRleDogOTAsXG5cblx0XHQvLyBjYWxsYmFja3Ncblx0XHRyZXNpemU6IG51bGwsXG5cdFx0c3RhcnQ6IG51bGwsXG5cdFx0c3RvcDogbnVsbFxuXHR9LFxuXG5cdF9udW06IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gcGFyc2VJbnQoIHZhbHVlLCAxMCApIHx8IDA7XG5cdH0sXG5cblx0X2lzTnVtYmVyOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0cmV0dXJuICFpc05hTiggcGFyc2VJbnQoIHZhbHVlLCAxMCApICk7XG5cdH0sXG5cblx0X2hhc1Njcm9sbDogZnVuY3Rpb24oIGVsLCBhICkge1xuXG5cdFx0aWYgKCAkKCBlbCApLmNzcyggXCJvdmVyZmxvd1wiICkgPT09IFwiaGlkZGVuXCIpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHR2YXIgc2Nyb2xsID0gKCBhICYmIGEgPT09IFwibGVmdFwiICkgPyBcInNjcm9sbExlZnRcIiA6IFwic2Nyb2xsVG9wXCIsXG5cdFx0XHRoYXMgPSBmYWxzZTtcblxuXHRcdGlmICggZWxbIHNjcm9sbCBdID4gMCApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIFRPRE86IGRldGVybWluZSB3aGljaCBjYXNlcyBhY3R1YWxseSBjYXVzZSB0aGlzIHRvIGhhcHBlblxuXHRcdC8vIGlmIHRoZSBlbGVtZW50IGRvZXNuJ3QgaGF2ZSB0aGUgc2Nyb2xsIHNldCwgc2VlIGlmIGl0J3MgcG9zc2libGUgdG9cblx0XHQvLyBzZXQgdGhlIHNjcm9sbFxuXHRcdGVsWyBzY3JvbGwgXSA9IDE7XG5cdFx0aGFzID0gKCBlbFsgc2Nyb2xsIF0gPiAwICk7XG5cdFx0ZWxbIHNjcm9sbCBdID0gMDtcblx0XHRyZXR1cm4gaGFzO1xuXHR9LFxuXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIG4sIGksIGhhbmRsZSwgYXhpcywgaG5hbWUsXG5cdFx0XHR0aGF0ID0gdGhpcyxcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnM7XG5cdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktcmVzaXphYmxlXCIpO1xuXG5cdFx0JC5leHRlbmQodGhpcywge1xuXHRcdFx0X2FzcGVjdFJhdGlvOiAhIShvLmFzcGVjdFJhdGlvKSxcblx0XHRcdGFzcGVjdFJhdGlvOiBvLmFzcGVjdFJhdGlvLFxuXHRcdFx0b3JpZ2luYWxFbGVtZW50OiB0aGlzLmVsZW1lbnQsXG5cdFx0XHRfcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50czogW10sXG5cdFx0XHRfaGVscGVyOiBvLmhlbHBlciB8fCBvLmdob3N0IHx8IG8uYW5pbWF0ZSA/IG8uaGVscGVyIHx8IFwidWktcmVzaXphYmxlLWhlbHBlclwiIDogbnVsbFxuXHRcdH0pO1xuXG5cdFx0Ly8gV3JhcCB0aGUgZWxlbWVudCBpZiBpdCBjYW5ub3QgaG9sZCBjaGlsZCBub2Rlc1xuXHRcdGlmICh0aGlzLmVsZW1lbnRbMF0ubm9kZU5hbWUubWF0Y2goL14oY2FudmFzfHRleHRhcmVhfGlucHV0fHNlbGVjdHxidXR0b258aW1nKSQvaSkpIHtcblxuXHRcdFx0dGhpcy5lbGVtZW50LndyYXAoXG5cdFx0XHRcdCQoXCI8ZGl2IGNsYXNzPSd1aS13cmFwcGVyJyBzdHlsZT0nb3ZlcmZsb3c6IGhpZGRlbjsnPjwvZGl2PlwiKS5jc3Moe1xuXHRcdFx0XHRcdHBvc2l0aW9uOiB0aGlzLmVsZW1lbnQuY3NzKFwicG9zaXRpb25cIiksXG5cdFx0XHRcdFx0d2lkdGg6IHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksXG5cdFx0XHRcdFx0aGVpZ2h0OiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSxcblx0XHRcdFx0XHR0b3A6IHRoaXMuZWxlbWVudC5jc3MoXCJ0b3BcIiksXG5cdFx0XHRcdFx0bGVmdDogdGhpcy5lbGVtZW50LmNzcyhcImxlZnRcIilcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdHRoaXMuZWxlbWVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnQoKS5kYXRhKFxuXHRcdFx0XHRcInVpLXJlc2l6YWJsZVwiLCB0aGlzLmVsZW1lbnQucmVzaXphYmxlKCBcImluc3RhbmNlXCIgKVxuXHRcdFx0KTtcblxuXHRcdFx0dGhpcy5lbGVtZW50SXNXcmFwcGVyID0gdHJ1ZTtcblxuXHRcdFx0dGhpcy5lbGVtZW50LmNzcyh7XG5cdFx0XHRcdG1hcmdpbkxlZnQ6IHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcIm1hcmdpbkxlZnRcIiksXG5cdFx0XHRcdG1hcmdpblRvcDogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwibWFyZ2luVG9wXCIpLFxuXHRcdFx0XHRtYXJnaW5SaWdodDogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwibWFyZ2luUmlnaHRcIiksXG5cdFx0XHRcdG1hcmdpbkJvdHRvbTogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwibWFyZ2luQm90dG9tXCIpXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7XG5cdFx0XHRcdG1hcmdpbkxlZnQ6IDAsXG5cdFx0XHRcdG1hcmdpblRvcDogMCxcblx0XHRcdFx0bWFyZ2luUmlnaHQ6IDAsXG5cdFx0XHRcdG1hcmdpbkJvdHRvbTogMFxuXHRcdFx0fSk7XG5cdFx0XHQvLyBzdXBwb3J0OiBTYWZhcmlcblx0XHRcdC8vIFByZXZlbnQgU2FmYXJpIHRleHRhcmVhIHJlc2l6ZVxuXHRcdFx0dGhpcy5vcmlnaW5hbFJlc2l6ZVN0eWxlID0gdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwicmVzaXplXCIpO1xuXHRcdFx0dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwicmVzaXplXCIsIFwibm9uZVwiKTtcblxuXHRcdFx0dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5wdXNoKCB0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe1xuXHRcdFx0XHRwb3NpdGlvbjogXCJzdGF0aWNcIixcblx0XHRcdFx0em9vbTogMSxcblx0XHRcdFx0ZGlzcGxheTogXCJibG9ja1wiXG5cdFx0XHR9KSApO1xuXG5cdFx0XHQvLyBzdXBwb3J0OiBJRTlcblx0XHRcdC8vIGF2b2lkIElFIGp1bXAgKGhhcmQgc2V0IHRoZSBtYXJnaW4pXG5cdFx0XHR0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoeyBtYXJnaW46IHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcIm1hcmdpblwiKSB9KTtcblxuXHRcdFx0dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKTtcblx0XHR9XG5cblx0XHR0aGlzLmhhbmRsZXMgPSBvLmhhbmRsZXMgfHxcblx0XHRcdCggISQoXCIudWktcmVzaXphYmxlLWhhbmRsZVwiLCB0aGlzLmVsZW1lbnQpLmxlbmd0aCA/XG5cdFx0XHRcdFwiZSxzLHNlXCIgOiB7XG5cdFx0XHRcdFx0bjogXCIudWktcmVzaXphYmxlLW5cIixcblx0XHRcdFx0XHRlOiBcIi51aS1yZXNpemFibGUtZVwiLFxuXHRcdFx0XHRcdHM6IFwiLnVpLXJlc2l6YWJsZS1zXCIsXG5cdFx0XHRcdFx0dzogXCIudWktcmVzaXphYmxlLXdcIixcblx0XHRcdFx0XHRzZTogXCIudWktcmVzaXphYmxlLXNlXCIsXG5cdFx0XHRcdFx0c3c6IFwiLnVpLXJlc2l6YWJsZS1zd1wiLFxuXHRcdFx0XHRcdG5lOiBcIi51aS1yZXNpemFibGUtbmVcIixcblx0XHRcdFx0XHRudzogXCIudWktcmVzaXphYmxlLW53XCJcblx0XHRcdFx0fSApO1xuXG5cdFx0aWYgKHRoaXMuaGFuZGxlcy5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nKSB7XG5cblx0XHRcdGlmICggdGhpcy5oYW5kbGVzID09PSBcImFsbFwiKSB7XG5cdFx0XHRcdHRoaXMuaGFuZGxlcyA9IFwibixlLHMsdyxzZSxzdyxuZSxud1wiO1xuXHRcdFx0fVxuXG5cdFx0XHRuID0gdGhpcy5oYW5kbGVzLnNwbGl0KFwiLFwiKTtcblx0XHRcdHRoaXMuaGFuZGxlcyA9IHt9O1xuXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykge1xuXG5cdFx0XHRcdGhhbmRsZSA9ICQudHJpbShuW2ldKTtcblx0XHRcdFx0aG5hbWUgPSBcInVpLXJlc2l6YWJsZS1cIiArIGhhbmRsZTtcblx0XHRcdFx0YXhpcyA9ICQoXCI8ZGl2IGNsYXNzPSd1aS1yZXNpemFibGUtaGFuZGxlIFwiICsgaG5hbWUgKyBcIic+PC9kaXY+XCIpO1xuXG5cdFx0XHRcdGF4aXMuY3NzKHsgekluZGV4OiBvLnpJbmRleCB9KTtcblxuXHRcdFx0XHQvLyBUT0RPIDogV2hhdCdzIGdvaW5nIG9uIGhlcmU/XG5cdFx0XHRcdGlmIChcInNlXCIgPT09IGhhbmRsZSkge1xuXHRcdFx0XHRcdGF4aXMuYWRkQ2xhc3MoXCJ1aS1pY29uIHVpLWljb24tZ3JpcHNtYWxsLWRpYWdvbmFsLXNlXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5oYW5kbGVzW2hhbmRsZV0gPSBcIi51aS1yZXNpemFibGUtXCIgKyBoYW5kbGU7XG5cdFx0XHRcdHRoaXMuZWxlbWVudC5hcHBlbmQoYXhpcyk7XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHR0aGlzLl9yZW5kZXJBeGlzID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cblx0XHRcdHZhciBpLCBheGlzLCBwYWRQb3MsIHBhZFdyYXBwZXI7XG5cblx0XHRcdHRhcmdldCA9IHRhcmdldCB8fCB0aGlzLmVsZW1lbnQ7XG5cblx0XHRcdGZvciAoaSBpbiB0aGlzLmhhbmRsZXMpIHtcblxuXHRcdFx0XHRpZiAodGhpcy5oYW5kbGVzW2ldLmNvbnN0cnVjdG9yID09PSBTdHJpbmcpIHtcblx0XHRcdFx0XHR0aGlzLmhhbmRsZXNbaV0gPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIHRoaXMuaGFuZGxlc1sgaSBdICkuZmlyc3QoKS5zaG93KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodGhpcy5lbGVtZW50SXNXcmFwcGVyICYmIHRoaXMub3JpZ2luYWxFbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC9eKHRleHRhcmVhfGlucHV0fHNlbGVjdHxidXR0b24pJC9pKSkge1xuXG5cdFx0XHRcdFx0YXhpcyA9ICQodGhpcy5oYW5kbGVzW2ldLCB0aGlzLmVsZW1lbnQpO1xuXG5cdFx0XHRcdFx0cGFkV3JhcHBlciA9IC9zd3xuZXxud3xzZXxufHMvLnRlc3QoaSkgPyBheGlzLm91dGVySGVpZ2h0KCkgOiBheGlzLm91dGVyV2lkdGgoKTtcblxuXHRcdFx0XHRcdHBhZFBvcyA9IFsgXCJwYWRkaW5nXCIsXG5cdFx0XHRcdFx0XHQvbmV8bnd8bi8udGVzdChpKSA/IFwiVG9wXCIgOlxuXHRcdFx0XHRcdFx0L3NlfHN3fHMvLnRlc3QoaSkgPyBcIkJvdHRvbVwiIDpcblx0XHRcdFx0XHRcdC9eZSQvLnRlc3QoaSkgPyBcIlJpZ2h0XCIgOiBcIkxlZnRcIiBdLmpvaW4oXCJcIik7XG5cblx0XHRcdFx0XHR0YXJnZXQuY3NzKHBhZFBvcywgcGFkV3JhcHBlcik7XG5cblx0XHRcdFx0XHR0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUT0RPOiBXaGF0J3MgdGhhdCBnb29kIGZvcj8gVGhlcmUncyBub3QgYW55dGhpbmcgdG8gYmUgZXhlY3V0ZWQgbGVmdFxuXHRcdFx0XHRpZiAoISQodGhpcy5oYW5kbGVzW2ldKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBUT0RPOiBtYWtlIHJlbmRlckF4aXMgYSBwcm90b3R5cGUgZnVuY3Rpb25cblx0XHR0aGlzLl9yZW5kZXJBeGlzKHRoaXMuZWxlbWVudCk7XG5cblx0XHR0aGlzLl9oYW5kbGVzID0gJChcIi51aS1yZXNpemFibGUtaGFuZGxlXCIsIHRoaXMuZWxlbWVudClcblx0XHRcdC5kaXNhYmxlU2VsZWN0aW9uKCk7XG5cblx0XHR0aGlzLl9oYW5kbGVzLm1vdXNlb3ZlcihmdW5jdGlvbigpIHtcblx0XHRcdGlmICghdGhhdC5yZXNpemluZykge1xuXHRcdFx0XHRpZiAodGhpcy5jbGFzc05hbWUpIHtcblx0XHRcdFx0XHRheGlzID0gdGhpcy5jbGFzc05hbWUubWF0Y2goL3VpLXJlc2l6YWJsZS0oc2V8c3d8bmV8bnd8bnxlfHN8dykvaSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhhdC5heGlzID0gYXhpcyAmJiBheGlzWzFdID8gYXhpc1sxXSA6IFwic2VcIjtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmIChvLmF1dG9IaWRlKSB7XG5cdFx0XHR0aGlzLl9oYW5kbGVzLmhpZGUoKTtcblx0XHRcdCQodGhpcy5lbGVtZW50KVxuXHRcdFx0XHQuYWRkQ2xhc3MoXCJ1aS1yZXNpemFibGUtYXV0b2hpZGVcIilcblx0XHRcdFx0Lm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKG8uZGlzYWJsZWQpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLXJlc2l6YWJsZS1hdXRvaGlkZVwiKTtcblx0XHRcdFx0XHR0aGF0Ll9oYW5kbGVzLnNob3coKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0Lm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKG8uZGlzYWJsZWQpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCF0aGF0LnJlc2l6aW5nKSB7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKFwidWktcmVzaXphYmxlLWF1dG9oaWRlXCIpO1xuXHRcdFx0XHRcdFx0dGhhdC5faGFuZGxlcy5oaWRlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHR0aGlzLl9tb3VzZUluaXQoKTtcblxuXHR9LFxuXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcblxuXHRcdHRoaXMuX21vdXNlRGVzdHJveSgpO1xuXG5cdFx0dmFyIHdyYXBwZXIsXG5cdFx0XHRfZGVzdHJveSA9IGZ1bmN0aW9uKGV4cCkge1xuXHRcdFx0XHQkKGV4cClcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoXCJ1aS1yZXNpemFibGUgdWktcmVzaXphYmxlLWRpc2FibGVkIHVpLXJlc2l6YWJsZS1yZXNpemluZ1wiKVxuXHRcdFx0XHRcdC5yZW1vdmVEYXRhKFwicmVzaXphYmxlXCIpXG5cdFx0XHRcdFx0LnJlbW92ZURhdGEoXCJ1aS1yZXNpemFibGVcIilcblx0XHRcdFx0XHQudW5iaW5kKFwiLnJlc2l6YWJsZVwiKVxuXHRcdFx0XHRcdC5maW5kKFwiLnVpLXJlc2l6YWJsZS1oYW5kbGVcIilcblx0XHRcdFx0XHRcdC5yZW1vdmUoKTtcblx0XHRcdH07XG5cblx0XHQvLyBUT0RPOiBVbndyYXAgYXQgc2FtZSBET00gcG9zaXRpb25cblx0XHRpZiAodGhpcy5lbGVtZW50SXNXcmFwcGVyKSB7XG5cdFx0XHRfZGVzdHJveSh0aGlzLmVsZW1lbnQpO1xuXHRcdFx0d3JhcHBlciA9IHRoaXMuZWxlbWVudDtcblx0XHRcdHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7XG5cdFx0XHRcdHBvc2l0aW9uOiB3cmFwcGVyLmNzcyhcInBvc2l0aW9uXCIpLFxuXHRcdFx0XHR3aWR0aDogd3JhcHBlci5vdXRlcldpZHRoKCksXG5cdFx0XHRcdGhlaWdodDogd3JhcHBlci5vdXRlckhlaWdodCgpLFxuXHRcdFx0XHR0b3A6IHdyYXBwZXIuY3NzKFwidG9wXCIpLFxuXHRcdFx0XHRsZWZ0OiB3cmFwcGVyLmNzcyhcImxlZnRcIilcblx0XHRcdH0pLmluc2VydEFmdGVyKCB3cmFwcGVyICk7XG5cdFx0XHR3cmFwcGVyLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcInJlc2l6ZVwiLCB0aGlzLm9yaWdpbmFsUmVzaXplU3R5bGUpO1xuXHRcdF9kZXN0cm95KHRoaXMub3JpZ2luYWxFbGVtZW50KTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdF9tb3VzZUNhcHR1cmU6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyIGksIGhhbmRsZSxcblx0XHRcdGNhcHR1cmUgPSBmYWxzZTtcblxuXHRcdGZvciAoaSBpbiB0aGlzLmhhbmRsZXMpIHtcblx0XHRcdGhhbmRsZSA9ICQodGhpcy5oYW5kbGVzW2ldKVswXTtcblx0XHRcdGlmIChoYW5kbGUgPT09IGV2ZW50LnRhcmdldCB8fCAkLmNvbnRhaW5zKGhhbmRsZSwgZXZlbnQudGFyZ2V0KSkge1xuXHRcdFx0XHRjYXB0dXJlID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gIXRoaXMub3B0aW9ucy5kaXNhYmxlZCAmJiBjYXB0dXJlO1xuXHR9LFxuXG5cdF9tb3VzZVN0YXJ0OiBmdW5jdGlvbihldmVudCkge1xuXG5cdFx0dmFyIGN1cmxlZnQsIGN1cnRvcCwgY3Vyc29yLFxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcblx0XHRcdGVsID0gdGhpcy5lbGVtZW50O1xuXG5cdFx0dGhpcy5yZXNpemluZyA9IHRydWU7XG5cblx0XHR0aGlzLl9yZW5kZXJQcm94eSgpO1xuXG5cdFx0Y3VybGVmdCA9IHRoaXMuX251bSh0aGlzLmhlbHBlci5jc3MoXCJsZWZ0XCIpKTtcblx0XHRjdXJ0b3AgPSB0aGlzLl9udW0odGhpcy5oZWxwZXIuY3NzKFwidG9wXCIpKTtcblxuXHRcdGlmIChvLmNvbnRhaW5tZW50KSB7XG5cdFx0XHRjdXJsZWZ0ICs9ICQoby5jb250YWlubWVudCkuc2Nyb2xsTGVmdCgpIHx8IDA7XG5cdFx0XHRjdXJ0b3AgKz0gJChvLmNvbnRhaW5tZW50KS5zY3JvbGxUb3AoKSB8fCAwO1xuXHRcdH1cblxuXHRcdHRoaXMub2Zmc2V0ID0gdGhpcy5oZWxwZXIub2Zmc2V0KCk7XG5cdFx0dGhpcy5wb3NpdGlvbiA9IHsgbGVmdDogY3VybGVmdCwgdG9wOiBjdXJ0b3AgfTtcblxuXHRcdHRoaXMuc2l6ZSA9IHRoaXMuX2hlbHBlciA/IHtcblx0XHRcdFx0d2lkdGg6IHRoaXMuaGVscGVyLndpZHRoKCksXG5cdFx0XHRcdGhlaWdodDogdGhpcy5oZWxwZXIuaGVpZ2h0KClcblx0XHRcdH0gOiB7XG5cdFx0XHRcdHdpZHRoOiBlbC53aWR0aCgpLFxuXHRcdFx0XHRoZWlnaHQ6IGVsLmhlaWdodCgpXG5cdFx0XHR9O1xuXG5cdFx0dGhpcy5vcmlnaW5hbFNpemUgPSB0aGlzLl9oZWxwZXIgPyB7XG5cdFx0XHRcdHdpZHRoOiBlbC5vdXRlcldpZHRoKCksXG5cdFx0XHRcdGhlaWdodDogZWwub3V0ZXJIZWlnaHQoKVxuXHRcdFx0fSA6IHtcblx0XHRcdFx0d2lkdGg6IGVsLndpZHRoKCksXG5cdFx0XHRcdGhlaWdodDogZWwuaGVpZ2h0KClcblx0XHRcdH07XG5cblx0XHR0aGlzLnNpemVEaWZmID0ge1xuXHRcdFx0d2lkdGg6IGVsLm91dGVyV2lkdGgoKSAtIGVsLndpZHRoKCksXG5cdFx0XHRoZWlnaHQ6IGVsLm91dGVySGVpZ2h0KCkgLSBlbC5oZWlnaHQoKVxuXHRcdH07XG5cblx0XHR0aGlzLm9yaWdpbmFsUG9zaXRpb24gPSB7IGxlZnQ6IGN1cmxlZnQsIHRvcDogY3VydG9wIH07XG5cdFx0dGhpcy5vcmlnaW5hbE1vdXNlUG9zaXRpb24gPSB7IGxlZnQ6IGV2ZW50LnBhZ2VYLCB0b3A6IGV2ZW50LnBhZ2VZIH07XG5cblx0XHR0aGlzLmFzcGVjdFJhdGlvID0gKHR5cGVvZiBvLmFzcGVjdFJhdGlvID09PSBcIm51bWJlclwiKSA/XG5cdFx0XHRvLmFzcGVjdFJhdGlvIDpcblx0XHRcdCgodGhpcy5vcmlnaW5hbFNpemUud2lkdGggLyB0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQpIHx8IDEpO1xuXG5cdFx0Y3Vyc29yID0gJChcIi51aS1yZXNpemFibGUtXCIgKyB0aGlzLmF4aXMpLmNzcyhcImN1cnNvclwiKTtcblx0XHQkKFwiYm9keVwiKS5jc3MoXCJjdXJzb3JcIiwgY3Vyc29yID09PSBcImF1dG9cIiA/IHRoaXMuYXhpcyArIFwiLXJlc2l6ZVwiIDogY3Vyc29yKTtcblxuXHRcdGVsLmFkZENsYXNzKFwidWktcmVzaXphYmxlLXJlc2l6aW5nXCIpO1xuXHRcdHRoaXMuX3Byb3BhZ2F0ZShcInN0YXJ0XCIsIGV2ZW50KTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHRfbW91c2VEcmFnOiBmdW5jdGlvbihldmVudCkge1xuXG5cdFx0dmFyIGRhdGEsIHByb3BzLFxuXHRcdFx0c21wID0gdGhpcy5vcmlnaW5hbE1vdXNlUG9zaXRpb24sXG5cdFx0XHRhID0gdGhpcy5heGlzLFxuXHRcdFx0ZHggPSAoZXZlbnQucGFnZVggLSBzbXAubGVmdCkgfHwgMCxcblx0XHRcdGR5ID0gKGV2ZW50LnBhZ2VZIC0gc21wLnRvcCkgfHwgMCxcblx0XHRcdHRyaWdnZXIgPSB0aGlzLl9jaGFuZ2VbYV07XG5cblx0XHR0aGlzLl91cGRhdGVQcmV2UHJvcGVydGllcygpO1xuXG5cdFx0aWYgKCF0cmlnZ2VyKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0ZGF0YSA9IHRyaWdnZXIuYXBwbHkodGhpcywgWyBldmVudCwgZHgsIGR5IF0pO1xuXG5cdFx0dGhpcy5fdXBkYXRlVmlydHVhbEJvdW5kYXJpZXMoZXZlbnQuc2hpZnRLZXkpO1xuXHRcdGlmICh0aGlzLl9hc3BlY3RSYXRpbyB8fCBldmVudC5zaGlmdEtleSkge1xuXHRcdFx0ZGF0YSA9IHRoaXMuX3VwZGF0ZVJhdGlvKGRhdGEsIGV2ZW50KTtcblx0XHR9XG5cblx0XHRkYXRhID0gdGhpcy5fcmVzcGVjdFNpemUoZGF0YSwgZXZlbnQpO1xuXG5cdFx0dGhpcy5fdXBkYXRlQ2FjaGUoZGF0YSk7XG5cblx0XHR0aGlzLl9wcm9wYWdhdGUoXCJyZXNpemVcIiwgZXZlbnQpO1xuXG5cdFx0cHJvcHMgPSB0aGlzLl9hcHBseUNoYW5nZXMoKTtcblxuXHRcdGlmICggIXRoaXMuX2hlbHBlciAmJiB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhJC5pc0VtcHR5T2JqZWN0KCBwcm9wcyApICkge1xuXHRcdFx0dGhpcy5fdXBkYXRlUHJldlByb3BlcnRpZXMoKTtcblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwicmVzaXplXCIsIGV2ZW50LCB0aGlzLnVpKCkgKTtcblx0XHRcdHRoaXMuX2FwcGx5Q2hhbmdlcygpO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXHRfbW91c2VTdG9wOiBmdW5jdGlvbihldmVudCkge1xuXG5cdFx0dGhpcy5yZXNpemluZyA9IGZhbHNlO1xuXHRcdHZhciBwciwgaXN0YSwgc29mZnNldGgsIHNvZmZzZXR3LCBzLCBsZWZ0LCB0b3AsXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLCB0aGF0ID0gdGhpcztcblxuXHRcdGlmICh0aGlzLl9oZWxwZXIpIHtcblxuXHRcdFx0cHIgPSB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzO1xuXHRcdFx0aXN0YSA9IHByLmxlbmd0aCAmJiAoL3RleHRhcmVhL2kpLnRlc3QocHJbMF0ubm9kZU5hbWUpO1xuXHRcdFx0c29mZnNldGggPSBpc3RhICYmIHRoaXMuX2hhc1Njcm9sbChwclswXSwgXCJsZWZ0XCIpID8gMCA6IHRoYXQuc2l6ZURpZmYuaGVpZ2h0O1xuXHRcdFx0c29mZnNldHcgPSBpc3RhID8gMCA6IHRoYXQuc2l6ZURpZmYud2lkdGg7XG5cblx0XHRcdHMgPSB7XG5cdFx0XHRcdHdpZHRoOiAodGhhdC5oZWxwZXIud2lkdGgoKSAgLSBzb2Zmc2V0dyksXG5cdFx0XHRcdGhlaWdodDogKHRoYXQuaGVscGVyLmhlaWdodCgpIC0gc29mZnNldGgpXG5cdFx0XHR9O1xuXHRcdFx0bGVmdCA9IChwYXJzZUludCh0aGF0LmVsZW1lbnQuY3NzKFwibGVmdFwiKSwgMTApICtcblx0XHRcdFx0KHRoYXQucG9zaXRpb24ubGVmdCAtIHRoYXQub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KSkgfHwgbnVsbDtcblx0XHRcdHRvcCA9IChwYXJzZUludCh0aGF0LmVsZW1lbnQuY3NzKFwidG9wXCIpLCAxMCkgK1xuXHRcdFx0XHQodGhhdC5wb3NpdGlvbi50b3AgLSB0aGF0Lm9yaWdpbmFsUG9zaXRpb24udG9wKSkgfHwgbnVsbDtcblxuXHRcdFx0aWYgKCFvLmFuaW1hdGUpIHtcblx0XHRcdFx0dGhpcy5lbGVtZW50LmNzcygkLmV4dGVuZChzLCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0pKTtcblx0XHRcdH1cblxuXHRcdFx0dGhhdC5oZWxwZXIuaGVpZ2h0KHRoYXQuc2l6ZS5oZWlnaHQpO1xuXHRcdFx0dGhhdC5oZWxwZXIud2lkdGgodGhhdC5zaXplLndpZHRoKTtcblxuXHRcdFx0aWYgKHRoaXMuX2hlbHBlciAmJiAhby5hbmltYXRlKSB7XG5cdFx0XHRcdHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0JChcImJvZHlcIikuY3NzKFwiY3Vyc29yXCIsIFwiYXV0b1wiKTtcblxuXHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXJlc2l6YWJsZS1yZXNpemluZ1wiKTtcblxuXHRcdHRoaXMuX3Byb3BhZ2F0ZShcInN0b3BcIiwgZXZlbnQpO1xuXG5cdFx0aWYgKHRoaXMuX2hlbHBlcikge1xuXHRcdFx0dGhpcy5oZWxwZXIucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXG5cdH0sXG5cblx0X3VwZGF0ZVByZXZQcm9wZXJ0aWVzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnByZXZQb3NpdGlvbiA9IHtcblx0XHRcdHRvcDogdGhpcy5wb3NpdGlvbi50b3AsXG5cdFx0XHRsZWZ0OiB0aGlzLnBvc2l0aW9uLmxlZnRcblx0XHR9O1xuXHRcdHRoaXMucHJldlNpemUgPSB7XG5cdFx0XHR3aWR0aDogdGhpcy5zaXplLndpZHRoLFxuXHRcdFx0aGVpZ2h0OiB0aGlzLnNpemUuaGVpZ2h0XG5cdFx0fTtcblx0fSxcblxuXHRfYXBwbHlDaGFuZ2VzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJvcHMgPSB7fTtcblxuXHRcdGlmICggdGhpcy5wb3NpdGlvbi50b3AgIT09IHRoaXMucHJldlBvc2l0aW9uLnRvcCApIHtcblx0XHRcdHByb3BzLnRvcCA9IHRoaXMucG9zaXRpb24udG9wICsgXCJweFwiO1xuXHRcdH1cblx0XHRpZiAoIHRoaXMucG9zaXRpb24ubGVmdCAhPT0gdGhpcy5wcmV2UG9zaXRpb24ubGVmdCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSB0aGlzLnBvc2l0aW9uLmxlZnQgKyBcInB4XCI7XG5cdFx0fVxuXHRcdGlmICggdGhpcy5zaXplLndpZHRoICE9PSB0aGlzLnByZXZTaXplLndpZHRoICkge1xuXHRcdFx0cHJvcHMud2lkdGggPSB0aGlzLnNpemUud2lkdGggKyBcInB4XCI7XG5cdFx0fVxuXHRcdGlmICggdGhpcy5zaXplLmhlaWdodCAhPT0gdGhpcy5wcmV2U2l6ZS5oZWlnaHQgKSB7XG5cdFx0XHRwcm9wcy5oZWlnaHQgPSB0aGlzLnNpemUuaGVpZ2h0ICsgXCJweFwiO1xuXHRcdH1cblxuXHRcdHRoaXMuaGVscGVyLmNzcyggcHJvcHMgKTtcblxuXHRcdHJldHVybiBwcm9wcztcblx0fSxcblxuXHRfdXBkYXRlVmlydHVhbEJvdW5kYXJpZXM6IGZ1bmN0aW9uKGZvcmNlQXNwZWN0UmF0aW8pIHtcblx0XHR2YXIgcE1pbldpZHRoLCBwTWF4V2lkdGgsIHBNaW5IZWlnaHQsIHBNYXhIZWlnaHQsIGIsXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zO1xuXG5cdFx0YiA9IHtcblx0XHRcdG1pbldpZHRoOiB0aGlzLl9pc051bWJlcihvLm1pbldpZHRoKSA/IG8ubWluV2lkdGggOiAwLFxuXHRcdFx0bWF4V2lkdGg6IHRoaXMuX2lzTnVtYmVyKG8ubWF4V2lkdGgpID8gby5tYXhXaWR0aCA6IEluZmluaXR5LFxuXHRcdFx0bWluSGVpZ2h0OiB0aGlzLl9pc051bWJlcihvLm1pbkhlaWdodCkgPyBvLm1pbkhlaWdodCA6IDAsXG5cdFx0XHRtYXhIZWlnaHQ6IHRoaXMuX2lzTnVtYmVyKG8ubWF4SGVpZ2h0KSA/IG8ubWF4SGVpZ2h0IDogSW5maW5pdHlcblx0XHR9O1xuXG5cdFx0aWYgKHRoaXMuX2FzcGVjdFJhdGlvIHx8IGZvcmNlQXNwZWN0UmF0aW8pIHtcblx0XHRcdHBNaW5XaWR0aCA9IGIubWluSGVpZ2h0ICogdGhpcy5hc3BlY3RSYXRpbztcblx0XHRcdHBNaW5IZWlnaHQgPSBiLm1pbldpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbztcblx0XHRcdHBNYXhXaWR0aCA9IGIubWF4SGVpZ2h0ICogdGhpcy5hc3BlY3RSYXRpbztcblx0XHRcdHBNYXhIZWlnaHQgPSBiLm1heFdpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbztcblxuXHRcdFx0aWYgKHBNaW5XaWR0aCA+IGIubWluV2lkdGgpIHtcblx0XHRcdFx0Yi5taW5XaWR0aCA9IHBNaW5XaWR0aDtcblx0XHRcdH1cblx0XHRcdGlmIChwTWluSGVpZ2h0ID4gYi5taW5IZWlnaHQpIHtcblx0XHRcdFx0Yi5taW5IZWlnaHQgPSBwTWluSGVpZ2h0O1xuXHRcdFx0fVxuXHRcdFx0aWYgKHBNYXhXaWR0aCA8IGIubWF4V2lkdGgpIHtcblx0XHRcdFx0Yi5tYXhXaWR0aCA9IHBNYXhXaWR0aDtcblx0XHRcdH1cblx0XHRcdGlmIChwTWF4SGVpZ2h0IDwgYi5tYXhIZWlnaHQpIHtcblx0XHRcdFx0Yi5tYXhIZWlnaHQgPSBwTWF4SGVpZ2h0O1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLl92Qm91bmRhcmllcyA9IGI7XG5cdH0sXG5cblx0X3VwZGF0ZUNhY2hlOiBmdW5jdGlvbihkYXRhKSB7XG5cdFx0dGhpcy5vZmZzZXQgPSB0aGlzLmhlbHBlci5vZmZzZXQoKTtcblx0XHRpZiAodGhpcy5faXNOdW1iZXIoZGF0YS5sZWZ0KSkge1xuXHRcdFx0dGhpcy5wb3NpdGlvbi5sZWZ0ID0gZGF0YS5sZWZ0O1xuXHRcdH1cblx0XHRpZiAodGhpcy5faXNOdW1iZXIoZGF0YS50b3ApKSB7XG5cdFx0XHR0aGlzLnBvc2l0aW9uLnRvcCA9IGRhdGEudG9wO1xuXHRcdH1cblx0XHRpZiAodGhpcy5faXNOdW1iZXIoZGF0YS5oZWlnaHQpKSB7XG5cdFx0XHR0aGlzLnNpemUuaGVpZ2h0ID0gZGF0YS5oZWlnaHQ7XG5cdFx0fVxuXHRcdGlmICh0aGlzLl9pc051bWJlcihkYXRhLndpZHRoKSkge1xuXHRcdFx0dGhpcy5zaXplLndpZHRoID0gZGF0YS53aWR0aDtcblx0XHR9XG5cdH0sXG5cblx0X3VwZGF0ZVJhdGlvOiBmdW5jdGlvbiggZGF0YSApIHtcblxuXHRcdHZhciBjcG9zID0gdGhpcy5wb3NpdGlvbixcblx0XHRcdGNzaXplID0gdGhpcy5zaXplLFxuXHRcdFx0YSA9IHRoaXMuYXhpcztcblxuXHRcdGlmICh0aGlzLl9pc051bWJlcihkYXRhLmhlaWdodCkpIHtcblx0XHRcdGRhdGEud2lkdGggPSAoZGF0YS5oZWlnaHQgKiB0aGlzLmFzcGVjdFJhdGlvKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuX2lzTnVtYmVyKGRhdGEud2lkdGgpKSB7XG5cdFx0XHRkYXRhLmhlaWdodCA9IChkYXRhLndpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbyk7XG5cdFx0fVxuXG5cdFx0aWYgKGEgPT09IFwic3dcIikge1xuXHRcdFx0ZGF0YS5sZWZ0ID0gY3Bvcy5sZWZ0ICsgKGNzaXplLndpZHRoIC0gZGF0YS53aWR0aCk7XG5cdFx0XHRkYXRhLnRvcCA9IG51bGw7XG5cdFx0fVxuXHRcdGlmIChhID09PSBcIm53XCIpIHtcblx0XHRcdGRhdGEudG9wID0gY3Bvcy50b3AgKyAoY3NpemUuaGVpZ2h0IC0gZGF0YS5oZWlnaHQpO1xuXHRcdFx0ZGF0YS5sZWZ0ID0gY3Bvcy5sZWZ0ICsgKGNzaXplLndpZHRoIC0gZGF0YS53aWR0aCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRhdGE7XG5cdH0sXG5cblx0X3Jlc3BlY3RTaXplOiBmdW5jdGlvbiggZGF0YSApIHtcblxuXHRcdHZhciBvID0gdGhpcy5fdkJvdW5kYXJpZXMsXG5cdFx0XHRhID0gdGhpcy5heGlzLFxuXHRcdFx0aXNtYXh3ID0gdGhpcy5faXNOdW1iZXIoZGF0YS53aWR0aCkgJiYgby5tYXhXaWR0aCAmJiAoby5tYXhXaWR0aCA8IGRhdGEud2lkdGgpLFxuXHRcdFx0aXNtYXhoID0gdGhpcy5faXNOdW1iZXIoZGF0YS5oZWlnaHQpICYmIG8ubWF4SGVpZ2h0ICYmIChvLm1heEhlaWdodCA8IGRhdGEuaGVpZ2h0KSxcblx0XHRcdGlzbWludyA9IHRoaXMuX2lzTnVtYmVyKGRhdGEud2lkdGgpICYmIG8ubWluV2lkdGggJiYgKG8ubWluV2lkdGggPiBkYXRhLndpZHRoKSxcblx0XHRcdGlzbWluaCA9IHRoaXMuX2lzTnVtYmVyKGRhdGEuaGVpZ2h0KSAmJiBvLm1pbkhlaWdodCAmJiAoby5taW5IZWlnaHQgPiBkYXRhLmhlaWdodCksXG5cdFx0XHRkdyA9IHRoaXMub3JpZ2luYWxQb3NpdGlvbi5sZWZ0ICsgdGhpcy5vcmlnaW5hbFNpemUud2lkdGgsXG5cdFx0XHRkaCA9IHRoaXMucG9zaXRpb24udG9wICsgdGhpcy5zaXplLmhlaWdodCxcblx0XHRcdGN3ID0gL3N3fG53fHcvLnRlc3QoYSksIGNoID0gL253fG5lfG4vLnRlc3QoYSk7XG5cdFx0aWYgKGlzbWludykge1xuXHRcdFx0ZGF0YS53aWR0aCA9IG8ubWluV2lkdGg7XG5cdFx0fVxuXHRcdGlmIChpc21pbmgpIHtcblx0XHRcdGRhdGEuaGVpZ2h0ID0gby5taW5IZWlnaHQ7XG5cdFx0fVxuXHRcdGlmIChpc21heHcpIHtcblx0XHRcdGRhdGEud2lkdGggPSBvLm1heFdpZHRoO1xuXHRcdH1cblx0XHRpZiAoaXNtYXhoKSB7XG5cdFx0XHRkYXRhLmhlaWdodCA9IG8ubWF4SGVpZ2h0O1xuXHRcdH1cblxuXHRcdGlmIChpc21pbncgJiYgY3cpIHtcblx0XHRcdGRhdGEubGVmdCA9IGR3IC0gby5taW5XaWR0aDtcblx0XHR9XG5cdFx0aWYgKGlzbWF4dyAmJiBjdykge1xuXHRcdFx0ZGF0YS5sZWZ0ID0gZHcgLSBvLm1heFdpZHRoO1xuXHRcdH1cblx0XHRpZiAoaXNtaW5oICYmIGNoKSB7XG5cdFx0XHRkYXRhLnRvcCA9IGRoIC0gby5taW5IZWlnaHQ7XG5cdFx0fVxuXHRcdGlmIChpc21heGggJiYgY2gpIHtcblx0XHRcdGRhdGEudG9wID0gZGggLSBvLm1heEhlaWdodDtcblx0XHR9XG5cblx0XHQvLyBGaXhpbmcganVtcCBlcnJvciBvbiB0b3AvbGVmdCAtIGJ1ZyAjMjMzMFxuXHRcdGlmICghZGF0YS53aWR0aCAmJiAhZGF0YS5oZWlnaHQgJiYgIWRhdGEubGVmdCAmJiBkYXRhLnRvcCkge1xuXHRcdFx0ZGF0YS50b3AgPSBudWxsO1xuXHRcdH0gZWxzZSBpZiAoIWRhdGEud2lkdGggJiYgIWRhdGEuaGVpZ2h0ICYmICFkYXRhLnRvcCAmJiBkYXRhLmxlZnQpIHtcblx0XHRcdGRhdGEubGVmdCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRhdGE7XG5cdH0sXG5cblx0X2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9uczogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG5cdFx0dmFyIGkgPSAwLFxuXHRcdFx0d2lkdGhzID0gW10sXG5cdFx0XHRib3JkZXJzID0gW1xuXHRcdFx0XHRlbGVtZW50LmNzcyggXCJib3JkZXJUb3BXaWR0aFwiICksXG5cdFx0XHRcdGVsZW1lbnQuY3NzKCBcImJvcmRlclJpZ2h0V2lkdGhcIiApLFxuXHRcdFx0XHRlbGVtZW50LmNzcyggXCJib3JkZXJCb3R0b21XaWR0aFwiICksXG5cdFx0XHRcdGVsZW1lbnQuY3NzKCBcImJvcmRlckxlZnRXaWR0aFwiIClcblx0XHRcdF0sXG5cdFx0XHRwYWRkaW5ncyA9IFtcblx0XHRcdFx0ZWxlbWVudC5jc3MoIFwicGFkZGluZ1RvcFwiICksXG5cdFx0XHRcdGVsZW1lbnQuY3NzKCBcInBhZGRpbmdSaWdodFwiICksXG5cdFx0XHRcdGVsZW1lbnQuY3NzKCBcInBhZGRpbmdCb3R0b21cIiApLFxuXHRcdFx0XHRlbGVtZW50LmNzcyggXCJwYWRkaW5nTGVmdFwiIClcblx0XHRcdF07XG5cblx0XHRmb3IgKCA7IGkgPCA0OyBpKysgKSB7XG5cdFx0XHR3aWR0aHNbIGkgXSA9ICggcGFyc2VJbnQoIGJvcmRlcnNbIGkgXSwgMTAgKSB8fCAwICk7XG5cdFx0XHR3aWR0aHNbIGkgXSArPSAoIHBhcnNlSW50KCBwYWRkaW5nc1sgaSBdLCAxMCApIHx8IDAgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0aGVpZ2h0OiB3aWR0aHNbIDAgXSArIHdpZHRoc1sgMiBdLFxuXHRcdFx0d2lkdGg6IHdpZHRoc1sgMSBdICsgd2lkdGhzWyAzIF1cblx0XHR9O1xuXHR9LFxuXG5cdF9wcm9wb3J0aW9uYWxseVJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRpZiAoIXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIHByZWwsXG5cdFx0XHRpID0gMCxcblx0XHRcdGVsZW1lbnQgPSB0aGlzLmhlbHBlciB8fCB0aGlzLmVsZW1lbnQ7XG5cblx0XHRmb3IgKCA7IGkgPCB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cblx0XHRcdHByZWwgPSB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzW2ldO1xuXG5cdFx0XHQvLyBUT0RPOiBTZWVtcyBsaWtlIGEgYnVnIHRvIGNhY2hlIHRoaXMub3V0ZXJEaW1lbnNpb25zXG5cdFx0XHQvLyBjb25zaWRlcmluZyB0aGF0IHdlIGFyZSBpbiBhIGxvb3AuXG5cdFx0XHRpZiAoIXRoaXMub3V0ZXJEaW1lbnNpb25zKSB7XG5cdFx0XHRcdHRoaXMub3V0ZXJEaW1lbnNpb25zID0gdGhpcy5fZ2V0UGFkZGluZ1BsdXNCb3JkZXJEaW1lbnNpb25zKCBwcmVsICk7XG5cdFx0XHR9XG5cblx0XHRcdHByZWwuY3NzKHtcblx0XHRcdFx0aGVpZ2h0OiAoZWxlbWVudC5oZWlnaHQoKSAtIHRoaXMub3V0ZXJEaW1lbnNpb25zLmhlaWdodCkgfHwgMCxcblx0XHRcdFx0d2lkdGg6IChlbGVtZW50LndpZHRoKCkgLSB0aGlzLm91dGVyRGltZW5zaW9ucy53aWR0aCkgfHwgMFxuXHRcdFx0fSk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRfcmVuZGVyUHJveHk6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIGVsID0gdGhpcy5lbGVtZW50LCBvID0gdGhpcy5vcHRpb25zO1xuXHRcdHRoaXMuZWxlbWVudE9mZnNldCA9IGVsLm9mZnNldCgpO1xuXG5cdFx0aWYgKHRoaXMuX2hlbHBlcikge1xuXG5cdFx0XHR0aGlzLmhlbHBlciA9IHRoaXMuaGVscGVyIHx8ICQoXCI8ZGl2IHN0eWxlPSdvdmVyZmxvdzpoaWRkZW47Jz48L2Rpdj5cIik7XG5cblx0XHRcdHRoaXMuaGVscGVyLmFkZENsYXNzKHRoaXMuX2hlbHBlcikuY3NzKHtcblx0XHRcdFx0d2lkdGg6IHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCkgLSAxLFxuXHRcdFx0XHRoZWlnaHQ6IHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpIC0gMSxcblx0XHRcdFx0cG9zaXRpb246IFwiYWJzb2x1dGVcIixcblx0XHRcdFx0bGVmdDogdGhpcy5lbGVtZW50T2Zmc2V0LmxlZnQgKyBcInB4XCIsXG5cdFx0XHRcdHRvcDogdGhpcy5lbGVtZW50T2Zmc2V0LnRvcCArIFwicHhcIixcblx0XHRcdFx0ekluZGV4OiArK28uekluZGV4IC8vVE9ETzogRG9uJ3QgbW9kaWZ5IG9wdGlvblxuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMuaGVscGVyXG5cdFx0XHRcdC5hcHBlbmRUbyhcImJvZHlcIilcblx0XHRcdFx0LmRpc2FibGVTZWxlY3Rpb24oKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmhlbHBlciA9IHRoaXMuZWxlbWVudDtcblx0XHR9XG5cblx0fSxcblxuXHRfY2hhbmdlOiB7XG5cdFx0ZTogZnVuY3Rpb24oZXZlbnQsIGR4KSB7XG5cdFx0XHRyZXR1cm4geyB3aWR0aDogdGhpcy5vcmlnaW5hbFNpemUud2lkdGggKyBkeCB9O1xuXHRcdH0sXG5cdFx0dzogZnVuY3Rpb24oZXZlbnQsIGR4KSB7XG5cdFx0XHR2YXIgY3MgPSB0aGlzLm9yaWdpbmFsU2l6ZSwgc3AgPSB0aGlzLm9yaWdpbmFsUG9zaXRpb247XG5cdFx0XHRyZXR1cm4geyBsZWZ0OiBzcC5sZWZ0ICsgZHgsIHdpZHRoOiBjcy53aWR0aCAtIGR4IH07XG5cdFx0fSxcblx0XHRuOiBmdW5jdGlvbihldmVudCwgZHgsIGR5KSB7XG5cdFx0XHR2YXIgY3MgPSB0aGlzLm9yaWdpbmFsU2l6ZSwgc3AgPSB0aGlzLm9yaWdpbmFsUG9zaXRpb247XG5cdFx0XHRyZXR1cm4geyB0b3A6IHNwLnRvcCArIGR5LCBoZWlnaHQ6IGNzLmhlaWdodCAtIGR5IH07XG5cdFx0fSxcblx0XHRzOiBmdW5jdGlvbihldmVudCwgZHgsIGR5KSB7XG5cdFx0XHRyZXR1cm4geyBoZWlnaHQ6IHRoaXMub3JpZ2luYWxTaXplLmhlaWdodCArIGR5IH07XG5cdFx0fSxcblx0XHRzZTogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkge1xuXHRcdFx0cmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksXG5cdFx0XHRcdHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsIFsgZXZlbnQsIGR4LCBkeSBdKSk7XG5cdFx0fSxcblx0XHRzdzogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkge1xuXHRcdFx0cmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksXG5cdFx0XHRcdHRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsIFsgZXZlbnQsIGR4LCBkeSBdKSk7XG5cdFx0fSxcblx0XHRuZTogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkge1xuXHRcdFx0cmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksXG5cdFx0XHRcdHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsIFsgZXZlbnQsIGR4LCBkeSBdKSk7XG5cdFx0fSxcblx0XHRudzogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkge1xuXHRcdFx0cmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksXG5cdFx0XHRcdHRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsIFsgZXZlbnQsIGR4LCBkeSBdKSk7XG5cdFx0fVxuXHR9LFxuXG5cdF9wcm9wYWdhdGU6IGZ1bmN0aW9uKG4sIGV2ZW50KSB7XG5cdFx0JC51aS5wbHVnaW4uY2FsbCh0aGlzLCBuLCBbIGV2ZW50LCB0aGlzLnVpKCkgXSk7XG5cdFx0KG4gIT09IFwicmVzaXplXCIgJiYgdGhpcy5fdHJpZ2dlcihuLCBldmVudCwgdGhpcy51aSgpKSk7XG5cdH0sXG5cblx0cGx1Z2luczoge30sXG5cblx0dWk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRvcmlnaW5hbEVsZW1lbnQ6IHRoaXMub3JpZ2luYWxFbGVtZW50LFxuXHRcdFx0ZWxlbWVudDogdGhpcy5lbGVtZW50LFxuXHRcdFx0aGVscGVyOiB0aGlzLmhlbHBlcixcblx0XHRcdHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLFxuXHRcdFx0c2l6ZTogdGhpcy5zaXplLFxuXHRcdFx0b3JpZ2luYWxTaXplOiB0aGlzLm9yaWdpbmFsU2l6ZSxcblx0XHRcdG9yaWdpbmFsUG9zaXRpb246IHRoaXMub3JpZ2luYWxQb3NpdGlvblxuXHRcdH07XG5cdH1cblxufSk7XG5cbi8qXG4gKiBSZXNpemFibGUgRXh0ZW5zaW9uc1xuICovXG5cbiQudWkucGx1Z2luLmFkZChcInJlc2l6YWJsZVwiLCBcImFuaW1hdGVcIiwge1xuXG5cdHN0b3A6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHR2YXIgdGhhdCA9ICQodGhpcykucmVzaXphYmxlKCBcImluc3RhbmNlXCIgKSxcblx0XHRcdG8gPSB0aGF0Lm9wdGlvbnMsXG5cdFx0XHRwciA9IHRoYXQuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMsXG5cdFx0XHRpc3RhID0gcHIubGVuZ3RoICYmICgvdGV4dGFyZWEvaSkudGVzdChwclswXS5ub2RlTmFtZSksXG5cdFx0XHRzb2Zmc2V0aCA9IGlzdGEgJiYgdGhhdC5faGFzU2Nyb2xsKHByWzBdLCBcImxlZnRcIikgPyAwIDogdGhhdC5zaXplRGlmZi5oZWlnaHQsXG5cdFx0XHRzb2Zmc2V0dyA9IGlzdGEgPyAwIDogdGhhdC5zaXplRGlmZi53aWR0aCxcblx0XHRcdHN0eWxlID0geyB3aWR0aDogKHRoYXQuc2l6ZS53aWR0aCAtIHNvZmZzZXR3KSwgaGVpZ2h0OiAodGhhdC5zaXplLmhlaWdodCAtIHNvZmZzZXRoKSB9LFxuXHRcdFx0bGVmdCA9IChwYXJzZUludCh0aGF0LmVsZW1lbnQuY3NzKFwibGVmdFwiKSwgMTApICtcblx0XHRcdFx0KHRoYXQucG9zaXRpb24ubGVmdCAtIHRoYXQub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KSkgfHwgbnVsbCxcblx0XHRcdHRvcCA9IChwYXJzZUludCh0aGF0LmVsZW1lbnQuY3NzKFwidG9wXCIpLCAxMCkgK1xuXHRcdFx0XHQodGhhdC5wb3NpdGlvbi50b3AgLSB0aGF0Lm9yaWdpbmFsUG9zaXRpb24udG9wKSkgfHwgbnVsbDtcblxuXHRcdHRoYXQuZWxlbWVudC5hbmltYXRlKFxuXHRcdFx0JC5leHRlbmQoc3R5bGUsIHRvcCAmJiBsZWZ0ID8geyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9IDoge30pLCB7XG5cdFx0XHRcdGR1cmF0aW9uOiBvLmFuaW1hdGVEdXJhdGlvbixcblx0XHRcdFx0ZWFzaW5nOiBvLmFuaW1hdGVFYXNpbmcsXG5cdFx0XHRcdHN0ZXA6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0XHR3aWR0aDogcGFyc2VJbnQodGhhdC5lbGVtZW50LmNzcyhcIndpZHRoXCIpLCAxMCksXG5cdFx0XHRcdFx0XHRoZWlnaHQ6IHBhcnNlSW50KHRoYXQuZWxlbWVudC5jc3MoXCJoZWlnaHRcIiksIDEwKSxcblx0XHRcdFx0XHRcdHRvcDogcGFyc2VJbnQodGhhdC5lbGVtZW50LmNzcyhcInRvcFwiKSwgMTApLFxuXHRcdFx0XHRcdFx0bGVmdDogcGFyc2VJbnQodGhhdC5lbGVtZW50LmNzcyhcImxlZnRcIiksIDEwKVxuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRpZiAocHIgJiYgcHIubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkKHByWzBdKS5jc3MoeyB3aWR0aDogZGF0YS53aWR0aCwgaGVpZ2h0OiBkYXRhLmhlaWdodCB9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBwcm9wYWdhdGluZyByZXNpemUsIGFuZCB1cGRhdGluZyB2YWx1ZXMgZm9yIGVhY2ggYW5pbWF0aW9uIHN0ZXBcblx0XHRcdFx0XHR0aGF0Ll91cGRhdGVDYWNoZShkYXRhKTtcblx0XHRcdFx0XHR0aGF0Ll9wcm9wYWdhdGUoXCJyZXNpemVcIiwgZXZlbnQpO1xuXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cbn0pO1xuXG4kLnVpLnBsdWdpbi5hZGQoIFwicmVzaXphYmxlXCIsIFwiY29udGFpbm1lbnRcIiwge1xuXG5cdHN0YXJ0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZWxlbWVudCwgcCwgY28sIGNoLCBjdywgd2lkdGgsIGhlaWdodCxcblx0XHRcdHRoYXQgPSAkKCB0aGlzICkucmVzaXphYmxlKCBcImluc3RhbmNlXCIgKSxcblx0XHRcdG8gPSB0aGF0Lm9wdGlvbnMsXG5cdFx0XHRlbCA9IHRoYXQuZWxlbWVudCxcblx0XHRcdG9jID0gby5jb250YWlubWVudCxcblx0XHRcdGNlID0gKCBvYyBpbnN0YW5jZW9mICQgKSA/IG9jLmdldCggMCApIDogKCAvcGFyZW50Ly50ZXN0KCBvYyApICkgPyBlbC5wYXJlbnQoKS5nZXQoIDAgKSA6IG9jO1xuXG5cdFx0aWYgKCAhY2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhhdC5jb250YWluZXJFbGVtZW50ID0gJCggY2UgKTtcblxuXHRcdGlmICggL2RvY3VtZW50Ly50ZXN0KCBvYyApIHx8IG9jID09PSBkb2N1bWVudCApIHtcblx0XHRcdHRoYXQuY29udGFpbmVyT2Zmc2V0ID0ge1xuXHRcdFx0XHRsZWZ0OiAwLFxuXHRcdFx0XHR0b3A6IDBcblx0XHRcdH07XG5cdFx0XHR0aGF0LmNvbnRhaW5lclBvc2l0aW9uID0ge1xuXHRcdFx0XHRsZWZ0OiAwLFxuXHRcdFx0XHR0b3A6IDBcblx0XHRcdH07XG5cblx0XHRcdHRoYXQucGFyZW50RGF0YSA9IHtcblx0XHRcdFx0ZWxlbWVudDogJCggZG9jdW1lbnQgKSxcblx0XHRcdFx0bGVmdDogMCxcblx0XHRcdFx0dG9wOiAwLFxuXHRcdFx0XHR3aWR0aDogJCggZG9jdW1lbnQgKS53aWR0aCgpLFxuXHRcdFx0XHRoZWlnaHQ6ICQoIGRvY3VtZW50ICkuaGVpZ2h0KCkgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodFxuXHRcdFx0fTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWxlbWVudCA9ICQoIGNlICk7XG5cdFx0XHRwID0gW107XG5cdFx0XHQkKFsgXCJUb3BcIiwgXCJSaWdodFwiLCBcIkxlZnRcIiwgXCJCb3R0b21cIiBdKS5lYWNoKGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRcdFx0XHRwWyBpIF0gPSB0aGF0Ll9udW0oIGVsZW1lbnQuY3NzKCBcInBhZGRpbmdcIiArIG5hbWUgKSApO1xuXHRcdFx0fSk7XG5cblx0XHRcdHRoYXQuY29udGFpbmVyT2Zmc2V0ID0gZWxlbWVudC5vZmZzZXQoKTtcblx0XHRcdHRoYXQuY29udGFpbmVyUG9zaXRpb24gPSBlbGVtZW50LnBvc2l0aW9uKCk7XG5cdFx0XHR0aGF0LmNvbnRhaW5lclNpemUgPSB7XG5cdFx0XHRcdGhlaWdodDogKCBlbGVtZW50LmlubmVySGVpZ2h0KCkgLSBwWyAzIF0gKSxcblx0XHRcdFx0d2lkdGg6ICggZWxlbWVudC5pbm5lcldpZHRoKCkgLSBwWyAxIF0gKVxuXHRcdFx0fTtcblxuXHRcdFx0Y28gPSB0aGF0LmNvbnRhaW5lck9mZnNldDtcblx0XHRcdGNoID0gdGhhdC5jb250YWluZXJTaXplLmhlaWdodDtcblx0XHRcdGN3ID0gdGhhdC5jb250YWluZXJTaXplLndpZHRoO1xuXHRcdFx0d2lkdGggPSAoIHRoYXQuX2hhc1Njcm9sbCAoIGNlLCBcImxlZnRcIiApID8gY2Uuc2Nyb2xsV2lkdGggOiBjdyApO1xuXHRcdFx0aGVpZ2h0ID0gKCB0aGF0Ll9oYXNTY3JvbGwgKCBjZSApID8gY2Uuc2Nyb2xsSGVpZ2h0IDogY2ggKSA7XG5cblx0XHRcdHRoYXQucGFyZW50RGF0YSA9IHtcblx0XHRcdFx0ZWxlbWVudDogY2UsXG5cdFx0XHRcdGxlZnQ6IGNvLmxlZnQsXG5cdFx0XHRcdHRvcDogY28udG9wLFxuXHRcdFx0XHR3aWR0aDogd2lkdGgsXG5cdFx0XHRcdGhlaWdodDogaGVpZ2h0XG5cdFx0XHR9O1xuXHRcdH1cblx0fSxcblxuXHRyZXNpemU6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHR2YXIgd29zZXQsIGhvc2V0LCBpc1BhcmVudCwgaXNPZmZzZXRSZWxhdGl2ZSxcblx0XHRcdHRoYXQgPSAkKCB0aGlzICkucmVzaXphYmxlKCBcImluc3RhbmNlXCIgKSxcblx0XHRcdG8gPSB0aGF0Lm9wdGlvbnMsXG5cdFx0XHRjbyA9IHRoYXQuY29udGFpbmVyT2Zmc2V0LFxuXHRcdFx0Y3AgPSB0aGF0LnBvc2l0aW9uLFxuXHRcdFx0cFJhdGlvID0gdGhhdC5fYXNwZWN0UmF0aW8gfHwgZXZlbnQuc2hpZnRLZXksXG5cdFx0XHRjb3AgPSB7XG5cdFx0XHRcdHRvcDogMCxcblx0XHRcdFx0bGVmdDogMFxuXHRcdFx0fSxcblx0XHRcdGNlID0gdGhhdC5jb250YWluZXJFbGVtZW50LFxuXHRcdFx0Y29udGludWVSZXNpemUgPSB0cnVlO1xuXG5cdFx0aWYgKCBjZVsgMCBdICE9PSBkb2N1bWVudCAmJiAoIC9zdGF0aWMvICkudGVzdCggY2UuY3NzKCBcInBvc2l0aW9uXCIgKSApICkge1xuXHRcdFx0Y29wID0gY287XG5cdFx0fVxuXG5cdFx0aWYgKCBjcC5sZWZ0IDwgKCB0aGF0Ll9oZWxwZXIgPyBjby5sZWZ0IDogMCApICkge1xuXHRcdFx0dGhhdC5zaXplLndpZHRoID0gdGhhdC5zaXplLndpZHRoICtcblx0XHRcdFx0KCB0aGF0Ll9oZWxwZXIgP1xuXHRcdFx0XHRcdCggdGhhdC5wb3NpdGlvbi5sZWZ0IC0gY28ubGVmdCApIDpcblx0XHRcdFx0XHQoIHRoYXQucG9zaXRpb24ubGVmdCAtIGNvcC5sZWZ0ICkgKTtcblxuXHRcdFx0aWYgKCBwUmF0aW8gKSB7XG5cdFx0XHRcdHRoYXQuc2l6ZS5oZWlnaHQgPSB0aGF0LnNpemUud2lkdGggLyB0aGF0LmFzcGVjdFJhdGlvO1xuXHRcdFx0XHRjb250aW51ZVJlc2l6ZSA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dGhhdC5wb3NpdGlvbi5sZWZ0ID0gby5oZWxwZXIgPyBjby5sZWZ0IDogMDtcblx0XHR9XG5cblx0XHRpZiAoIGNwLnRvcCA8ICggdGhhdC5faGVscGVyID8gY28udG9wIDogMCApICkge1xuXHRcdFx0dGhhdC5zaXplLmhlaWdodCA9IHRoYXQuc2l6ZS5oZWlnaHQgK1xuXHRcdFx0XHQoIHRoYXQuX2hlbHBlciA/XG5cdFx0XHRcdFx0KCB0aGF0LnBvc2l0aW9uLnRvcCAtIGNvLnRvcCApIDpcblx0XHRcdFx0XHR0aGF0LnBvc2l0aW9uLnRvcCApO1xuXG5cdFx0XHRpZiAoIHBSYXRpbyApIHtcblx0XHRcdFx0dGhhdC5zaXplLndpZHRoID0gdGhhdC5zaXplLmhlaWdodCAqIHRoYXQuYXNwZWN0UmF0aW87XG5cdFx0XHRcdGNvbnRpbnVlUmVzaXplID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR0aGF0LnBvc2l0aW9uLnRvcCA9IHRoYXQuX2hlbHBlciA/IGNvLnRvcCA6IDA7XG5cdFx0fVxuXG5cdFx0aXNQYXJlbnQgPSB0aGF0LmNvbnRhaW5lckVsZW1lbnQuZ2V0KCAwICkgPT09IHRoYXQuZWxlbWVudC5wYXJlbnQoKS5nZXQoIDAgKTtcblx0XHRpc09mZnNldFJlbGF0aXZlID0gL3JlbGF0aXZlfGFic29sdXRlLy50ZXN0KCB0aGF0LmNvbnRhaW5lckVsZW1lbnQuY3NzKCBcInBvc2l0aW9uXCIgKSApO1xuXG5cdFx0aWYgKCBpc1BhcmVudCAmJiBpc09mZnNldFJlbGF0aXZlICkge1xuXHRcdFx0dGhhdC5vZmZzZXQubGVmdCA9IHRoYXQucGFyZW50RGF0YS5sZWZ0ICsgdGhhdC5wb3NpdGlvbi5sZWZ0O1xuXHRcdFx0dGhhdC5vZmZzZXQudG9wID0gdGhhdC5wYXJlbnREYXRhLnRvcCArIHRoYXQucG9zaXRpb24udG9wO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGF0Lm9mZnNldC5sZWZ0ID0gdGhhdC5lbGVtZW50Lm9mZnNldCgpLmxlZnQ7XG5cdFx0XHR0aGF0Lm9mZnNldC50b3AgPSB0aGF0LmVsZW1lbnQub2Zmc2V0KCkudG9wO1xuXHRcdH1cblxuXHRcdHdvc2V0ID0gTWF0aC5hYnMoIHRoYXQuc2l6ZURpZmYud2lkdGggK1xuXHRcdFx0KHRoYXQuX2hlbHBlciA/XG5cdFx0XHRcdHRoYXQub2Zmc2V0LmxlZnQgLSBjb3AubGVmdCA6XG5cdFx0XHRcdCh0aGF0Lm9mZnNldC5sZWZ0IC0gY28ubGVmdCkpICk7XG5cblx0XHRob3NldCA9IE1hdGguYWJzKCB0aGF0LnNpemVEaWZmLmhlaWdodCArXG5cdFx0XHQodGhhdC5faGVscGVyID9cblx0XHRcdFx0dGhhdC5vZmZzZXQudG9wIC0gY29wLnRvcCA6XG5cdFx0XHRcdCh0aGF0Lm9mZnNldC50b3AgLSBjby50b3ApKSApO1xuXG5cdFx0aWYgKCB3b3NldCArIHRoYXQuc2l6ZS53aWR0aCA+PSB0aGF0LnBhcmVudERhdGEud2lkdGggKSB7XG5cdFx0XHR0aGF0LnNpemUud2lkdGggPSB0aGF0LnBhcmVudERhdGEud2lkdGggLSB3b3NldDtcblx0XHRcdGlmICggcFJhdGlvICkge1xuXHRcdFx0XHR0aGF0LnNpemUuaGVpZ2h0ID0gdGhhdC5zaXplLndpZHRoIC8gdGhhdC5hc3BlY3RSYXRpbztcblx0XHRcdFx0Y29udGludWVSZXNpemUgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGhvc2V0ICsgdGhhdC5zaXplLmhlaWdodCA+PSB0aGF0LnBhcmVudERhdGEuaGVpZ2h0ICkge1xuXHRcdFx0dGhhdC5zaXplLmhlaWdodCA9IHRoYXQucGFyZW50RGF0YS5oZWlnaHQgLSBob3NldDtcblx0XHRcdGlmICggcFJhdGlvICkge1xuXHRcdFx0XHR0aGF0LnNpemUud2lkdGggPSB0aGF0LnNpemUuaGVpZ2h0ICogdGhhdC5hc3BlY3RSYXRpbztcblx0XHRcdFx0Y29udGludWVSZXNpemUgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoICFjb250aW51ZVJlc2l6ZSApIHtcblx0XHRcdHRoYXQucG9zaXRpb24ubGVmdCA9IHRoYXQucHJldlBvc2l0aW9uLmxlZnQ7XG5cdFx0XHR0aGF0LnBvc2l0aW9uLnRvcCA9IHRoYXQucHJldlBvc2l0aW9uLnRvcDtcblx0XHRcdHRoYXQuc2l6ZS53aWR0aCA9IHRoYXQucHJldlNpemUud2lkdGg7XG5cdFx0XHR0aGF0LnNpemUuaGVpZ2h0ID0gdGhhdC5wcmV2U2l6ZS5oZWlnaHQ7XG5cdFx0fVxuXHR9LFxuXG5cdHN0b3A6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0aGF0ID0gJCggdGhpcyApLnJlc2l6YWJsZSggXCJpbnN0YW5jZVwiICksXG5cdFx0XHRvID0gdGhhdC5vcHRpb25zLFxuXHRcdFx0Y28gPSB0aGF0LmNvbnRhaW5lck9mZnNldCxcblx0XHRcdGNvcCA9IHRoYXQuY29udGFpbmVyUG9zaXRpb24sXG5cdFx0XHRjZSA9IHRoYXQuY29udGFpbmVyRWxlbWVudCxcblx0XHRcdGhlbHBlciA9ICQoIHRoYXQuaGVscGVyICksXG5cdFx0XHRobyA9IGhlbHBlci5vZmZzZXQoKSxcblx0XHRcdHcgPSBoZWxwZXIub3V0ZXJXaWR0aCgpIC0gdGhhdC5zaXplRGlmZi53aWR0aCxcblx0XHRcdGggPSBoZWxwZXIub3V0ZXJIZWlnaHQoKSAtIHRoYXQuc2l6ZURpZmYuaGVpZ2h0O1xuXG5cdFx0aWYgKCB0aGF0Ll9oZWxwZXIgJiYgIW8uYW5pbWF0ZSAmJiAoIC9yZWxhdGl2ZS8gKS50ZXN0KCBjZS5jc3MoIFwicG9zaXRpb25cIiApICkgKSB7XG5cdFx0XHQkKCB0aGlzICkuY3NzKHtcblx0XHRcdFx0bGVmdDogaG8ubGVmdCAtIGNvcC5sZWZ0IC0gY28ubGVmdCxcblx0XHRcdFx0d2lkdGg6IHcsXG5cdFx0XHRcdGhlaWdodDogaFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGF0Ll9oZWxwZXIgJiYgIW8uYW5pbWF0ZSAmJiAoIC9zdGF0aWMvICkudGVzdCggY2UuY3NzKCBcInBvc2l0aW9uXCIgKSApICkge1xuXHRcdFx0JCggdGhpcyApLmNzcyh7XG5cdFx0XHRcdGxlZnQ6IGhvLmxlZnQgLSBjb3AubGVmdCAtIGNvLmxlZnQsXG5cdFx0XHRcdHdpZHRoOiB3LFxuXHRcdFx0XHRoZWlnaHQ6IGhcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufSk7XG5cbiQudWkucGx1Z2luLmFkZChcInJlc2l6YWJsZVwiLCBcImFsc29SZXNpemVcIiwge1xuXG5cdHN0YXJ0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdGhhdCA9ICQodGhpcykucmVzaXphYmxlKCBcImluc3RhbmNlXCIgKSxcblx0XHRcdG8gPSB0aGF0Lm9wdGlvbnMsXG5cdFx0XHRfc3RvcmUgPSBmdW5jdGlvbihleHApIHtcblx0XHRcdFx0JChleHApLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIGVsID0gJCh0aGlzKTtcblx0XHRcdFx0XHRlbC5kYXRhKFwidWktcmVzaXphYmxlLWFsc29yZXNpemVcIiwge1xuXHRcdFx0XHRcdFx0d2lkdGg6IHBhcnNlSW50KGVsLndpZHRoKCksIDEwKSwgaGVpZ2h0OiBwYXJzZUludChlbC5oZWlnaHQoKSwgMTApLFxuXHRcdFx0XHRcdFx0bGVmdDogcGFyc2VJbnQoZWwuY3NzKFwibGVmdFwiKSwgMTApLCB0b3A6IHBhcnNlSW50KGVsLmNzcyhcInRvcFwiKSwgMTApXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblxuXHRcdGlmICh0eXBlb2Yoby5hbHNvUmVzaXplKSA9PT0gXCJvYmplY3RcIiAmJiAhby5hbHNvUmVzaXplLnBhcmVudE5vZGUpIHtcblx0XHRcdGlmIChvLmFsc29SZXNpemUubGVuZ3RoKSB7XG5cdFx0XHRcdG8uYWxzb1Jlc2l6ZSA9IG8uYWxzb1Jlc2l6ZVswXTtcblx0XHRcdFx0X3N0b3JlKG8uYWxzb1Jlc2l6ZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkLmVhY2goby5hbHNvUmVzaXplLCBmdW5jdGlvbihleHApIHtcblx0XHRcdFx0XHRfc3RvcmUoZXhwKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdF9zdG9yZShvLmFsc29SZXNpemUpO1xuXHRcdH1cblx0fSxcblxuXHRyZXNpemU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuXHRcdHZhciB0aGF0ID0gJCh0aGlzKS5yZXNpemFibGUoIFwiaW5zdGFuY2VcIiApLFxuXHRcdFx0byA9IHRoYXQub3B0aW9ucyxcblx0XHRcdG9zID0gdGhhdC5vcmlnaW5hbFNpemUsXG5cdFx0XHRvcCA9IHRoYXQub3JpZ2luYWxQb3NpdGlvbixcblx0XHRcdGRlbHRhID0ge1xuXHRcdFx0XHRoZWlnaHQ6ICh0aGF0LnNpemUuaGVpZ2h0IC0gb3MuaGVpZ2h0KSB8fCAwLFxuXHRcdFx0XHR3aWR0aDogKHRoYXQuc2l6ZS53aWR0aCAtIG9zLndpZHRoKSB8fCAwLFxuXHRcdFx0XHR0b3A6ICh0aGF0LnBvc2l0aW9uLnRvcCAtIG9wLnRvcCkgfHwgMCxcblx0XHRcdFx0bGVmdDogKHRoYXQucG9zaXRpb24ubGVmdCAtIG9wLmxlZnQpIHx8IDBcblx0XHRcdH0sXG5cblx0XHRcdF9hbHNvUmVzaXplID0gZnVuY3Rpb24oZXhwLCBjKSB7XG5cdFx0XHRcdCQoZXhwKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBlbCA9ICQodGhpcyksIHN0YXJ0ID0gJCh0aGlzKS5kYXRhKFwidWktcmVzaXphYmxlLWFsc29yZXNpemVcIiksIHN0eWxlID0ge30sXG5cdFx0XHRcdFx0XHRjc3MgPSBjICYmIGMubGVuZ3RoID9cblx0XHRcdFx0XHRcdFx0YyA6XG5cdFx0XHRcdFx0XHRcdGVsLnBhcmVudHModWkub3JpZ2luYWxFbGVtZW50WzBdKS5sZW5ndGggP1xuXHRcdFx0XHRcdFx0XHRcdFsgXCJ3aWR0aFwiLCBcImhlaWdodFwiIF0gOlxuXHRcdFx0XHRcdFx0XHRcdFsgXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcInRvcFwiLCBcImxlZnRcIiBdO1xuXG5cdFx0XHRcdFx0JC5lYWNoKGNzcywgZnVuY3Rpb24oaSwgcHJvcCkge1xuXHRcdFx0XHRcdFx0dmFyIHN1bSA9IChzdGFydFtwcm9wXSB8fCAwKSArIChkZWx0YVtwcm9wXSB8fCAwKTtcblx0XHRcdFx0XHRcdGlmIChzdW0gJiYgc3VtID49IDApIHtcblx0XHRcdFx0XHRcdFx0c3R5bGVbcHJvcF0gPSBzdW0gfHwgbnVsbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdGVsLmNzcyhzdHlsZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblxuXHRcdGlmICh0eXBlb2Yoby5hbHNvUmVzaXplKSA9PT0gXCJvYmplY3RcIiAmJiAhby5hbHNvUmVzaXplLm5vZGVUeXBlKSB7XG5cdFx0XHQkLmVhY2goby5hbHNvUmVzaXplLCBmdW5jdGlvbihleHAsIGMpIHtcblx0XHRcdFx0X2Fsc29SZXNpemUoZXhwLCBjKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRfYWxzb1Jlc2l6ZShvLmFsc29SZXNpemUpO1xuXHRcdH1cblx0fSxcblxuXHRzdG9wOiBmdW5jdGlvbigpIHtcblx0XHQkKHRoaXMpLnJlbW92ZURhdGEoXCJyZXNpemFibGUtYWxzb3Jlc2l6ZVwiKTtcblx0fVxufSk7XG5cbiQudWkucGx1Z2luLmFkZChcInJlc2l6YWJsZVwiLCBcImdob3N0XCIsIHtcblxuXHRzdGFydDogZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgdGhhdCA9ICQodGhpcykucmVzaXphYmxlKCBcImluc3RhbmNlXCIgKSwgbyA9IHRoYXQub3B0aW9ucywgY3MgPSB0aGF0LnNpemU7XG5cblx0XHR0aGF0Lmdob3N0ID0gdGhhdC5vcmlnaW5hbEVsZW1lbnQuY2xvbmUoKTtcblx0XHR0aGF0Lmdob3N0XG5cdFx0XHQuY3NzKHtcblx0XHRcdFx0b3BhY2l0eTogMC4yNSxcblx0XHRcdFx0ZGlzcGxheTogXCJibG9ja1wiLFxuXHRcdFx0XHRwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuXHRcdFx0XHRoZWlnaHQ6IGNzLmhlaWdodCxcblx0XHRcdFx0d2lkdGg6IGNzLndpZHRoLFxuXHRcdFx0XHRtYXJnaW46IDAsXG5cdFx0XHRcdGxlZnQ6IDAsXG5cdFx0XHRcdHRvcDogMFxuXHRcdFx0fSlcblx0XHRcdC5hZGRDbGFzcyhcInVpLXJlc2l6YWJsZS1naG9zdFwiKVxuXHRcdFx0LmFkZENsYXNzKHR5cGVvZiBvLmdob3N0ID09PSBcInN0cmluZ1wiID8gby5naG9zdCA6IFwiXCIpO1xuXG5cdFx0dGhhdC5naG9zdC5hcHBlbmRUbyh0aGF0LmhlbHBlcik7XG5cblx0fSxcblxuXHRyZXNpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0aGF0ID0gJCh0aGlzKS5yZXNpemFibGUoIFwiaW5zdGFuY2VcIiApO1xuXHRcdGlmICh0aGF0Lmdob3N0KSB7XG5cdFx0XHR0aGF0Lmdob3N0LmNzcyh7XG5cdFx0XHRcdHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG5cdFx0XHRcdGhlaWdodDogdGhhdC5zaXplLmhlaWdodCxcblx0XHRcdFx0d2lkdGg6IHRoYXQuc2l6ZS53aWR0aFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cdHN0b3A6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0aGF0ID0gJCh0aGlzKS5yZXNpemFibGUoIFwiaW5zdGFuY2VcIiApO1xuXHRcdGlmICh0aGF0Lmdob3N0ICYmIHRoYXQuaGVscGVyKSB7XG5cdFx0XHR0aGF0LmhlbHBlci5nZXQoMCkucmVtb3ZlQ2hpbGQodGhhdC5naG9zdC5nZXQoMCkpO1xuXHRcdH1cblx0fVxuXG59KTtcblxuJC51aS5wbHVnaW4uYWRkKFwicmVzaXphYmxlXCIsIFwiZ3JpZFwiLCB7XG5cblx0cmVzaXplOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgb3V0ZXJEaW1lbnNpb25zLFxuXHRcdFx0dGhhdCA9ICQodGhpcykucmVzaXphYmxlKCBcImluc3RhbmNlXCIgKSxcblx0XHRcdG8gPSB0aGF0Lm9wdGlvbnMsXG5cdFx0XHRjcyA9IHRoYXQuc2l6ZSxcblx0XHRcdG9zID0gdGhhdC5vcmlnaW5hbFNpemUsXG5cdFx0XHRvcCA9IHRoYXQub3JpZ2luYWxQb3NpdGlvbixcblx0XHRcdGEgPSB0aGF0LmF4aXMsXG5cdFx0XHRncmlkID0gdHlwZW9mIG8uZ3JpZCA9PT0gXCJudW1iZXJcIiA/IFsgby5ncmlkLCBvLmdyaWQgXSA6IG8uZ3JpZCxcblx0XHRcdGdyaWRYID0gKGdyaWRbMF0gfHwgMSksXG5cdFx0XHRncmlkWSA9IChncmlkWzFdIHx8IDEpLFxuXHRcdFx0b3ggPSBNYXRoLnJvdW5kKChjcy53aWR0aCAtIG9zLndpZHRoKSAvIGdyaWRYKSAqIGdyaWRYLFxuXHRcdFx0b3kgPSBNYXRoLnJvdW5kKChjcy5oZWlnaHQgLSBvcy5oZWlnaHQpIC8gZ3JpZFkpICogZ3JpZFksXG5cdFx0XHRuZXdXaWR0aCA9IG9zLndpZHRoICsgb3gsXG5cdFx0XHRuZXdIZWlnaHQgPSBvcy5oZWlnaHQgKyBveSxcblx0XHRcdGlzTWF4V2lkdGggPSBvLm1heFdpZHRoICYmIChvLm1heFdpZHRoIDwgbmV3V2lkdGgpLFxuXHRcdFx0aXNNYXhIZWlnaHQgPSBvLm1heEhlaWdodCAmJiAoby5tYXhIZWlnaHQgPCBuZXdIZWlnaHQpLFxuXHRcdFx0aXNNaW5XaWR0aCA9IG8ubWluV2lkdGggJiYgKG8ubWluV2lkdGggPiBuZXdXaWR0aCksXG5cdFx0XHRpc01pbkhlaWdodCA9IG8ubWluSGVpZ2h0ICYmIChvLm1pbkhlaWdodCA+IG5ld0hlaWdodCk7XG5cblx0XHRvLmdyaWQgPSBncmlkO1xuXG5cdFx0aWYgKGlzTWluV2lkdGgpIHtcblx0XHRcdG5ld1dpZHRoICs9IGdyaWRYO1xuXHRcdH1cblx0XHRpZiAoaXNNaW5IZWlnaHQpIHtcblx0XHRcdG5ld0hlaWdodCArPSBncmlkWTtcblx0XHR9XG5cdFx0aWYgKGlzTWF4V2lkdGgpIHtcblx0XHRcdG5ld1dpZHRoIC09IGdyaWRYO1xuXHRcdH1cblx0XHRpZiAoaXNNYXhIZWlnaHQpIHtcblx0XHRcdG5ld0hlaWdodCAtPSBncmlkWTtcblx0XHR9XG5cblx0XHRpZiAoL14oc2V8c3xlKSQvLnRlc3QoYSkpIHtcblx0XHRcdHRoYXQuc2l6ZS53aWR0aCA9IG5ld1dpZHRoO1xuXHRcdFx0dGhhdC5zaXplLmhlaWdodCA9IG5ld0hlaWdodDtcblx0XHR9IGVsc2UgaWYgKC9eKG5lKSQvLnRlc3QoYSkpIHtcblx0XHRcdHRoYXQuc2l6ZS53aWR0aCA9IG5ld1dpZHRoO1xuXHRcdFx0dGhhdC5zaXplLmhlaWdodCA9IG5ld0hlaWdodDtcblx0XHRcdHRoYXQucG9zaXRpb24udG9wID0gb3AudG9wIC0gb3k7XG5cdFx0fSBlbHNlIGlmICgvXihzdykkLy50ZXN0KGEpKSB7XG5cdFx0XHR0aGF0LnNpemUud2lkdGggPSBuZXdXaWR0aDtcblx0XHRcdHRoYXQuc2l6ZS5oZWlnaHQgPSBuZXdIZWlnaHQ7XG5cdFx0XHR0aGF0LnBvc2l0aW9uLmxlZnQgPSBvcC5sZWZ0IC0gb3g7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggbmV3SGVpZ2h0IC0gZ3JpZFkgPD0gMCB8fCBuZXdXaWR0aCAtIGdyaWRYIDw9IDApIHtcblx0XHRcdFx0b3V0ZXJEaW1lbnNpb25zID0gdGhhdC5fZ2V0UGFkZGluZ1BsdXNCb3JkZXJEaW1lbnNpb25zKCB0aGlzICk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggbmV3SGVpZ2h0IC0gZ3JpZFkgPiAwICkge1xuXHRcdFx0XHR0aGF0LnNpemUuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuXHRcdFx0XHR0aGF0LnBvc2l0aW9uLnRvcCA9IG9wLnRvcCAtIG95O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmV3SGVpZ2h0ID0gZ3JpZFkgLSBvdXRlckRpbWVuc2lvbnMuaGVpZ2h0O1xuXHRcdFx0XHR0aGF0LnNpemUuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuXHRcdFx0XHR0aGF0LnBvc2l0aW9uLnRvcCA9IG9wLnRvcCArIG9zLmhlaWdodCAtIG5ld0hlaWdodDtcblx0XHRcdH1cblx0XHRcdGlmICggbmV3V2lkdGggLSBncmlkWCA+IDAgKSB7XG5cdFx0XHRcdHRoYXQuc2l6ZS53aWR0aCA9IG5ld1dpZHRoO1xuXHRcdFx0XHR0aGF0LnBvc2l0aW9uLmxlZnQgPSBvcC5sZWZ0IC0gb3g7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXdXaWR0aCA9IGdyaWRYIC0gb3V0ZXJEaW1lbnNpb25zLndpZHRoO1xuXHRcdFx0XHR0aGF0LnNpemUud2lkdGggPSBuZXdXaWR0aDtcblx0XHRcdFx0dGhhdC5wb3NpdGlvbi5sZWZ0ID0gb3AubGVmdCArIG9zLndpZHRoIC0gbmV3V2lkdGg7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cbn0pO1xuXG52YXIgcmVzaXphYmxlID0gJC51aS5yZXNpemFibGU7XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgRGlhbG9nIDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vZGlhbG9nL1xuICovXG5cblxudmFyIGRpYWxvZyA9ICQud2lkZ2V0KCBcInVpLmRpYWxvZ1wiLCB7XG5cdHZlcnNpb246IFwiMS4xMS4zXCIsXG5cdG9wdGlvbnM6IHtcblx0XHRhcHBlbmRUbzogXCJib2R5XCIsXG5cdFx0YXV0b09wZW46IHRydWUsXG5cdFx0YnV0dG9uczogW10sXG5cdFx0Y2xvc2VPbkVzY2FwZTogdHJ1ZSxcblx0XHRjbG9zZVRleHQ6IFwiQ2xvc2VcIixcblx0XHRkaWFsb2dDbGFzczogXCJcIixcblx0XHRkcmFnZ2FibGU6IHRydWUsXG5cdFx0aGlkZTogbnVsbCxcblx0XHRoZWlnaHQ6IFwiYXV0b1wiLFxuXHRcdG1heEhlaWdodDogbnVsbCxcblx0XHRtYXhXaWR0aDogbnVsbCxcblx0XHRtaW5IZWlnaHQ6IDE1MCxcblx0XHRtaW5XaWR0aDogMTUwLFxuXHRcdG1vZGFsOiBmYWxzZSxcblx0XHRwb3NpdGlvbjoge1xuXHRcdFx0bXk6IFwiY2VudGVyXCIsXG5cdFx0XHRhdDogXCJjZW50ZXJcIixcblx0XHRcdG9mOiB3aW5kb3csXG5cdFx0XHRjb2xsaXNpb246IFwiZml0XCIsXG5cdFx0XHQvLyBFbnN1cmUgdGhlIHRpdGxlYmFyIGlzIGFsd2F5cyB2aXNpYmxlXG5cdFx0XHR1c2luZzogZnVuY3Rpb24oIHBvcyApIHtcblx0XHRcdFx0dmFyIHRvcE9mZnNldCA9ICQoIHRoaXMgKS5jc3MoIHBvcyApLm9mZnNldCgpLnRvcDtcblx0XHRcdFx0aWYgKCB0b3BPZmZzZXQgPCAwICkge1xuXHRcdFx0XHRcdCQoIHRoaXMgKS5jc3MoIFwidG9wXCIsIHBvcy50b3AgLSB0b3BPZmZzZXQgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0cmVzaXphYmxlOiB0cnVlLFxuXHRcdHNob3c6IG51bGwsXG5cdFx0dGl0bGU6IG51bGwsXG5cdFx0d2lkdGg6IDMwMCxcblxuXHRcdC8vIGNhbGxiYWNrc1xuXHRcdGJlZm9yZUNsb3NlOiBudWxsLFxuXHRcdGNsb3NlOiBudWxsLFxuXHRcdGRyYWc6IG51bGwsXG5cdFx0ZHJhZ1N0YXJ0OiBudWxsLFxuXHRcdGRyYWdTdG9wOiBudWxsLFxuXHRcdGZvY3VzOiBudWxsLFxuXHRcdG9wZW46IG51bGwsXG5cdFx0cmVzaXplOiBudWxsLFxuXHRcdHJlc2l6ZVN0YXJ0OiBudWxsLFxuXHRcdHJlc2l6ZVN0b3A6IG51bGxcblx0fSxcblxuXHRzaXplUmVsYXRlZE9wdGlvbnM6IHtcblx0XHRidXR0b25zOiB0cnVlLFxuXHRcdGhlaWdodDogdHJ1ZSxcblx0XHRtYXhIZWlnaHQ6IHRydWUsXG5cdFx0bWF4V2lkdGg6IHRydWUsXG5cdFx0bWluSGVpZ2h0OiB0cnVlLFxuXHRcdG1pbldpZHRoOiB0cnVlLFxuXHRcdHdpZHRoOiB0cnVlXG5cdH0sXG5cblx0cmVzaXphYmxlUmVsYXRlZE9wdGlvbnM6IHtcblx0XHRtYXhIZWlnaHQ6IHRydWUsXG5cdFx0bWF4V2lkdGg6IHRydWUsXG5cdFx0bWluSGVpZ2h0OiB0cnVlLFxuXHRcdG1pbldpZHRoOiB0cnVlXG5cdH0sXG5cblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5vcmlnaW5hbENzcyA9IHtcblx0XHRcdGRpc3BsYXk6IHRoaXMuZWxlbWVudFsgMCBdLnN0eWxlLmRpc3BsYXksXG5cdFx0XHR3aWR0aDogdGhpcy5lbGVtZW50WyAwIF0uc3R5bGUud2lkdGgsXG5cdFx0XHRtaW5IZWlnaHQ6IHRoaXMuZWxlbWVudFsgMCBdLnN0eWxlLm1pbkhlaWdodCxcblx0XHRcdG1heEhlaWdodDogdGhpcy5lbGVtZW50WyAwIF0uc3R5bGUubWF4SGVpZ2h0LFxuXHRcdFx0aGVpZ2h0OiB0aGlzLmVsZW1lbnRbIDAgXS5zdHlsZS5oZWlnaHRcblx0XHR9O1xuXHRcdHRoaXMub3JpZ2luYWxQb3NpdGlvbiA9IHtcblx0XHRcdHBhcmVudDogdGhpcy5lbGVtZW50LnBhcmVudCgpLFxuXHRcdFx0aW5kZXg6IHRoaXMuZWxlbWVudC5wYXJlbnQoKS5jaGlsZHJlbigpLmluZGV4KCB0aGlzLmVsZW1lbnQgKVxuXHRcdH07XG5cdFx0dGhpcy5vcmlnaW5hbFRpdGxlID0gdGhpcy5lbGVtZW50LmF0dHIoIFwidGl0bGVcIiApO1xuXHRcdHRoaXMub3B0aW9ucy50aXRsZSA9IHRoaXMub3B0aW9ucy50aXRsZSB8fCB0aGlzLm9yaWdpbmFsVGl0bGU7XG5cblx0XHR0aGlzLl9jcmVhdGVXcmFwcGVyKCk7XG5cblx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdC5zaG93KClcblx0XHRcdC5yZW1vdmVBdHRyKCBcInRpdGxlXCIgKVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWRpYWxvZy1jb250ZW50IHVpLXdpZGdldC1jb250ZW50XCIgKVxuXHRcdFx0LmFwcGVuZFRvKCB0aGlzLnVpRGlhbG9nICk7XG5cblx0XHR0aGlzLl9jcmVhdGVUaXRsZWJhcigpO1xuXHRcdHRoaXMuX2NyZWF0ZUJ1dHRvblBhbmUoKTtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRyYWdnYWJsZSAmJiAkLmZuLmRyYWdnYWJsZSApIHtcblx0XHRcdHRoaXMuX21ha2VEcmFnZ2FibGUoKTtcblx0XHR9XG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucmVzaXphYmxlICYmICQuZm4ucmVzaXphYmxlICkge1xuXHRcdFx0dGhpcy5fbWFrZVJlc2l6YWJsZSgpO1xuXHRcdH1cblxuXHRcdHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xuXG5cdFx0dGhpcy5fdHJhY2tGb2N1cygpO1xuXHR9LFxuXG5cdF9pbml0OiBmdW5jdGlvbigpIHtcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hdXRvT3BlbiApIHtcblx0XHRcdHRoaXMub3BlbigpO1xuXHRcdH1cblx0fSxcblxuXHRfYXBwZW5kVG86IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtZW50ID0gdGhpcy5vcHRpb25zLmFwcGVuZFRvO1xuXHRcdGlmICggZWxlbWVudCAmJiAoZWxlbWVudC5qcXVlcnkgfHwgZWxlbWVudC5ub2RlVHlwZSkgKSB7XG5cdFx0XHRyZXR1cm4gJCggZWxlbWVudCApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5kb2N1bWVudC5maW5kKCBlbGVtZW50IHx8IFwiYm9keVwiICkuZXEoIDAgKTtcblx0fSxcblxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5leHQsXG5cdFx0XHRvcmlnaW5hbFBvc2l0aW9uID0gdGhpcy5vcmlnaW5hbFBvc2l0aW9uO1xuXG5cdFx0dGhpcy5fZGVzdHJveU92ZXJsYXkoKTtcblxuXHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0LnJlbW92ZVVuaXF1ZUlkKClcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudFwiIClcblx0XHRcdC5jc3MoIHRoaXMub3JpZ2luYWxDc3MgKVxuXHRcdFx0Ly8gV2l0aG91dCBkZXRhY2hpbmcgZmlyc3QsIHRoZSBmb2xsb3dpbmcgYmVjb21lcyByZWFsbHkgc2xvd1xuXHRcdFx0LmRldGFjaCgpO1xuXG5cdFx0dGhpcy51aURpYWxvZy5zdG9wKCB0cnVlLCB0cnVlICkucmVtb3ZlKCk7XG5cblx0XHRpZiAoIHRoaXMub3JpZ2luYWxUaXRsZSApIHtcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcInRpdGxlXCIsIHRoaXMub3JpZ2luYWxUaXRsZSApO1xuXHRcdH1cblxuXHRcdG5leHQgPSBvcmlnaW5hbFBvc2l0aW9uLnBhcmVudC5jaGlsZHJlbigpLmVxKCBvcmlnaW5hbFBvc2l0aW9uLmluZGV4ICk7XG5cdFx0Ly8gRG9uJ3QgdHJ5IHRvIHBsYWNlIHRoZSBkaWFsb2cgbmV4dCB0byBpdHNlbGYgKCM4NjEzKVxuXHRcdGlmICggbmV4dC5sZW5ndGggJiYgbmV4dFsgMCBdICE9PSB0aGlzLmVsZW1lbnRbIDAgXSApIHtcblx0XHRcdG5leHQuYmVmb3JlKCB0aGlzLmVsZW1lbnQgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0b3JpZ2luYWxQb3NpdGlvbi5wYXJlbnQuYXBwZW5kKCB0aGlzLmVsZW1lbnQgKTtcblx0XHR9XG5cdH0sXG5cblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy51aURpYWxvZztcblx0fSxcblxuXHRkaXNhYmxlOiAkLm5vb3AsXG5cdGVuYWJsZTogJC5ub29wLFxuXG5cdGNsb3NlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIGFjdGl2ZUVsZW1lbnQsXG5cdFx0XHR0aGF0ID0gdGhpcztcblxuXHRcdGlmICggIXRoaXMuX2lzT3BlbiB8fCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZUNsb3NlXCIsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xuXHRcdHRoaXMuX2ZvY3VzZWRFbGVtZW50ID0gbnVsbDtcblx0XHR0aGlzLl9kZXN0cm95T3ZlcmxheSgpO1xuXHRcdHRoaXMuX3VudHJhY2tJbnN0YW5jZSgpO1xuXG5cdFx0aWYgKCAhdGhpcy5vcGVuZXIuZmlsdGVyKCBcIjpmb2N1c2FibGVcIiApLmZvY3VzKCkubGVuZ3RoICkge1xuXG5cdFx0XHQvLyBzdXBwb3J0OiBJRTlcblx0XHRcdC8vIElFOSB0aHJvd3MgYW4gXCJVbnNwZWNpZmllZCBlcnJvclwiIGFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGZyb20gYW4gPGlmcmFtZT5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGFjdGl2ZUVsZW1lbnQgPSB0aGlzLmRvY3VtZW50WyAwIF0uYWN0aXZlRWxlbWVudDtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTksIElFMTBcblx0XHRcdFx0Ly8gSWYgdGhlIDxib2R5PiBpcyBibHVycmVkLCBJRSB3aWxsIHN3aXRjaCB3aW5kb3dzLCBzZWUgIzQ1MjBcblx0XHRcdFx0aWYgKCBhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJib2R5XCIgKSB7XG5cblx0XHRcdFx0XHQvLyBIaWRpbmcgYSBmb2N1c2VkIGVsZW1lbnQgZG9lc24ndCB0cmlnZ2VyIGJsdXIgaW4gV2ViS2l0XG5cdFx0XHRcdFx0Ly8gc28gaW4gY2FzZSB3ZSBoYXZlIG5vdGhpbmcgdG8gZm9jdXMgb24sIGV4cGxpY2l0bHkgYmx1ciB0aGUgYWN0aXZlIGVsZW1lbnRcblx0XHRcdFx0XHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDcxODJcblx0XHRcdFx0XHQkKCBhY3RpdmVFbGVtZW50ICkuYmx1cigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoICggZXJyb3IgKSB7fVxuXHRcdH1cblxuXHRcdHRoaXMuX2hpZGUoIHRoaXMudWlEaWFsb2csIHRoaXMub3B0aW9ucy5oaWRlLCBmdW5jdGlvbigpIHtcblx0XHRcdHRoYXQuX3RyaWdnZXIoIFwiY2xvc2VcIiwgZXZlbnQgKTtcblx0XHR9KTtcblx0fSxcblxuXHRpc09wZW46IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLl9pc09wZW47XG5cdH0sXG5cblx0bW92ZVRvVG9wOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9tb3ZlVG9Ub3AoKTtcblx0fSxcblxuXHRfbW92ZVRvVG9wOiBmdW5jdGlvbiggZXZlbnQsIHNpbGVudCApIHtcblx0XHR2YXIgbW92ZWQgPSBmYWxzZSxcblx0XHRcdHpJbmRpY2llcyA9IHRoaXMudWlEaWFsb2cuc2libGluZ3MoIFwiLnVpLWZyb250OnZpc2libGVcIiApLm1hcChmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICskKCB0aGlzICkuY3NzKCBcInotaW5kZXhcIiApO1xuXHRcdFx0fSkuZ2V0KCksXG5cdFx0XHR6SW5kZXhNYXggPSBNYXRoLm1heC5hcHBseSggbnVsbCwgekluZGljaWVzICk7XG5cblx0XHRpZiAoIHpJbmRleE1heCA+PSArdGhpcy51aURpYWxvZy5jc3MoIFwiei1pbmRleFwiICkgKSB7XG5cdFx0XHR0aGlzLnVpRGlhbG9nLmNzcyggXCJ6LWluZGV4XCIsIHpJbmRleE1heCArIDEgKTtcblx0XHRcdG1vdmVkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIG1vdmVkICYmICFzaWxlbnQgKSB7XG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImZvY3VzXCIsIGV2ZW50ICk7XG5cdFx0fVxuXHRcdHJldHVybiBtb3ZlZDtcblx0fSxcblxuXHRvcGVuOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gKSB7XG5cdFx0XHRpZiAoIHRoaXMuX21vdmVUb1RvcCgpICkge1xuXHRcdFx0XHR0aGlzLl9mb2N1c1RhYmJhYmxlKCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5faXNPcGVuID0gdHJ1ZTtcblx0XHR0aGlzLm9wZW5lciA9ICQoIHRoaXMuZG9jdW1lbnRbIDAgXS5hY3RpdmVFbGVtZW50ICk7XG5cblx0XHR0aGlzLl9zaXplKCk7XG5cdFx0dGhpcy5fcG9zaXRpb24oKTtcblx0XHR0aGlzLl9jcmVhdGVPdmVybGF5KCk7XG5cdFx0dGhpcy5fbW92ZVRvVG9wKCBudWxsLCB0cnVlICk7XG5cblx0XHQvLyBFbnN1cmUgdGhlIG92ZXJsYXkgaXMgbW92ZWQgdG8gdGhlIHRvcCB3aXRoIHRoZSBkaWFsb2csIGJ1dCBvbmx5IHdoZW5cblx0XHQvLyBvcGVuaW5nLiBUaGUgb3ZlcmxheSBzaG91bGRuJ3QgbW92ZSBhZnRlciB0aGUgZGlhbG9nIGlzIG9wZW4gc28gdGhhdFxuXHRcdC8vIG1vZGVsZXNzIGRpYWxvZ3Mgb3BlbmVkIGFmdGVyIHRoZSBtb2RhbCBkaWFsb2cgc3RhY2sgcHJvcGVybHkuXG5cdFx0aWYgKCB0aGlzLm92ZXJsYXkgKSB7XG5cdFx0XHR0aGlzLm92ZXJsYXkuY3NzKCBcInotaW5kZXhcIiwgdGhpcy51aURpYWxvZy5jc3MoIFwiei1pbmRleFwiICkgLSAxICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fc2hvdyggdGhpcy51aURpYWxvZywgdGhpcy5vcHRpb25zLnNob3csIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhhdC5fZm9jdXNUYWJiYWJsZSgpO1xuXHRcdFx0dGhhdC5fdHJpZ2dlciggXCJmb2N1c1wiICk7XG5cdFx0fSk7XG5cblx0XHQvLyBUcmFjayB0aGUgZGlhbG9nIGltbWVkaWF0ZWx5IHVwb24gb3BlbmVuaW5nIGluIGNhc2UgYSBmb2N1cyBldmVudFxuXHRcdC8vIHNvbWVob3cgb2NjdXJzIG91dHNpZGUgb2YgdGhlIGRpYWxvZyBiZWZvcmUgYW4gZWxlbWVudCBpbnNpZGUgdGhlXG5cdFx0Ly8gZGlhbG9nIGlzIGZvY3VzZWQgKCMxMDE1Milcblx0XHR0aGlzLl9tYWtlRm9jdXNUYXJnZXQoKTtcblxuXHRcdHRoaXMuX3RyaWdnZXIoIFwib3BlblwiICk7XG5cdH0sXG5cblx0X2ZvY3VzVGFiYmFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIFNldCBmb2N1cyB0byB0aGUgZmlyc3QgbWF0Y2g6XG5cdFx0Ly8gMS4gQW4gZWxlbWVudCB0aGF0IHdhcyBmb2N1c2VkIHByZXZpb3VzbHlcblx0XHQvLyAyLiBGaXJzdCBlbGVtZW50IGluc2lkZSB0aGUgZGlhbG9nIG1hdGNoaW5nIFthdXRvZm9jdXNdXG5cdFx0Ly8gMy4gVGFiYmFibGUgZWxlbWVudCBpbnNpZGUgdGhlIGNvbnRlbnQgZWxlbWVudFxuXHRcdC8vIDQuIFRhYmJhYmxlIGVsZW1lbnQgaW5zaWRlIHRoZSBidXR0b25wYW5lXG5cdFx0Ly8gNS4gVGhlIGNsb3NlIGJ1dHRvblxuXHRcdC8vIDYuIFRoZSBkaWFsb2cgaXRzZWxmXG5cdFx0dmFyIGhhc0ZvY3VzID0gdGhpcy5fZm9jdXNlZEVsZW1lbnQ7XG5cdFx0aWYgKCAhaGFzRm9jdXMgKSB7XG5cdFx0XHRoYXNGb2N1cyA9IHRoaXMuZWxlbWVudC5maW5kKCBcIlthdXRvZm9jdXNdXCIgKTtcblx0XHR9XG5cdFx0aWYgKCAhaGFzRm9jdXMubGVuZ3RoICkge1xuXHRcdFx0aGFzRm9jdXMgPSB0aGlzLmVsZW1lbnQuZmluZCggXCI6dGFiYmFibGVcIiApO1xuXHRcdH1cblx0XHRpZiAoICFoYXNGb2N1cy5sZW5ndGggKSB7XG5cdFx0XHRoYXNGb2N1cyA9IHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLmZpbmQoIFwiOnRhYmJhYmxlXCIgKTtcblx0XHR9XG5cdFx0aWYgKCAhaGFzRm9jdXMubGVuZ3RoICkge1xuXHRcdFx0aGFzRm9jdXMgPSB0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZS5maWx0ZXIoIFwiOnRhYmJhYmxlXCIgKTtcblx0XHR9XG5cdFx0aWYgKCAhaGFzRm9jdXMubGVuZ3RoICkge1xuXHRcdFx0aGFzRm9jdXMgPSB0aGlzLnVpRGlhbG9nO1xuXHRcdH1cblx0XHRoYXNGb2N1cy5lcSggMCApLmZvY3VzKCk7XG5cdH0sXG5cblx0X2tlZXBGb2N1czogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdGZ1bmN0aW9uIGNoZWNrRm9jdXMoKSB7XG5cdFx0XHR2YXIgYWN0aXZlRWxlbWVudCA9IHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCxcblx0XHRcdFx0aXNBY3RpdmUgPSB0aGlzLnVpRGlhbG9nWzBdID09PSBhY3RpdmVFbGVtZW50IHx8XG5cdFx0XHRcdFx0JC5jb250YWlucyggdGhpcy51aURpYWxvZ1swXSwgYWN0aXZlRWxlbWVudCApO1xuXHRcdFx0aWYgKCAhaXNBY3RpdmUgKSB7XG5cdFx0XHRcdHRoaXMuX2ZvY3VzVGFiYmFibGUoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRjaGVja0ZvY3VzLmNhbGwoIHRoaXMgKTtcblx0XHQvLyBzdXBwb3J0OiBJRVxuXHRcdC8vIElFIDw9IDggZG9lc24ndCBwcmV2ZW50IG1vdmluZyBmb2N1cyBldmVuIHdpdGggZXZlbnQucHJldmVudERlZmF1bHQoKVxuXHRcdC8vIHNvIHdlIGNoZWNrIGFnYWluIGxhdGVyXG5cdFx0dGhpcy5fZGVsYXkoIGNoZWNrRm9jdXMgKTtcblx0fSxcblxuXHRfY3JlYXRlV3JhcHBlcjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51aURpYWxvZyA9ICQoXCI8ZGl2PlwiKVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWRpYWxvZyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCB1aS1mcm9udCBcIiArXG5cdFx0XHRcdHRoaXMub3B0aW9ucy5kaWFsb2dDbGFzcyApXG5cdFx0XHQuaGlkZSgpXG5cdFx0XHQuYXR0cih7XG5cdFx0XHRcdC8vIFNldHRpbmcgdGFiSW5kZXggbWFrZXMgdGhlIGRpdiBmb2N1c2FibGVcblx0XHRcdFx0dGFiSW5kZXg6IC0xLFxuXHRcdFx0XHRyb2xlOiBcImRpYWxvZ1wiXG5cdFx0XHR9KVxuXHRcdFx0LmFwcGVuZFRvKCB0aGlzLl9hcHBlbmRUbygpICk7XG5cblx0XHR0aGlzLl9vbiggdGhpcy51aURpYWxvZywge1xuXHRcdFx0a2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5jbG9zZU9uRXNjYXBlICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSAmJiBldmVudC5rZXlDb2RlICYmXG5cdFx0XHRcdFx0XHRldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuRVNDQVBFICkge1xuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0dGhpcy5jbG9zZSggZXZlbnQgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBwcmV2ZW50IHRhYmJpbmcgb3V0IG9mIGRpYWxvZ3Ncblx0XHRcdFx0aWYgKCBldmVudC5rZXlDb2RlICE9PSAkLnVpLmtleUNvZGUuVEFCIHx8IGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgdGFiYmFibGVzID0gdGhpcy51aURpYWxvZy5maW5kKCBcIjp0YWJiYWJsZVwiICksXG5cdFx0XHRcdFx0Zmlyc3QgPSB0YWJiYWJsZXMuZmlsdGVyKCBcIjpmaXJzdFwiICksXG5cdFx0XHRcdFx0bGFzdCA9IHRhYmJhYmxlcy5maWx0ZXIoIFwiOmxhc3RcIiApO1xuXG5cdFx0XHRcdGlmICggKCBldmVudC50YXJnZXQgPT09IGxhc3RbMF0gfHwgZXZlbnQudGFyZ2V0ID09PSB0aGlzLnVpRGlhbG9nWzBdICkgJiYgIWV2ZW50LnNoaWZ0S2V5ICkge1xuXHRcdFx0XHRcdHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0Zmlyc3QuZm9jdXMoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCAoIGV2ZW50LnRhcmdldCA9PT0gZmlyc3RbMF0gfHwgZXZlbnQudGFyZ2V0ID09PSB0aGlzLnVpRGlhbG9nWzBdICkgJiYgZXZlbnQuc2hpZnRLZXkgKSB7XG5cdFx0XHRcdFx0dGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRsYXN0LmZvY3VzKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdG1vdXNlZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRpZiAoIHRoaXMuX21vdmVUb1RvcCggZXZlbnQgKSApIHtcblx0XHRcdFx0XHR0aGlzLl9mb2N1c1RhYmJhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IGFueSBleGlzdGluZyBhcmlhLWRlc2NyaWJlZGJ5IGF0dHJpYnV0ZSBtZWFuc1xuXHRcdC8vIHRoYXQgdGhlIGRpYWxvZyBjb250ZW50IGlzIG1hcmtlZCB1cCBwcm9wZXJseVxuXHRcdC8vIG90aGVyd2lzZSB3ZSBicnV0ZSBmb3JjZSB0aGUgY29udGVudCBhcyB0aGUgZGVzY3JpcHRpb25cblx0XHRpZiAoICF0aGlzLmVsZW1lbnQuZmluZCggXCJbYXJpYS1kZXNjcmliZWRieV1cIiApLmxlbmd0aCApIHtcblx0XHRcdHRoaXMudWlEaWFsb2cuYXR0cih7XG5cdFx0XHRcdFwiYXJpYS1kZXNjcmliZWRieVwiOiB0aGlzLmVsZW1lbnQudW5pcXVlSWQoKS5hdHRyKCBcImlkXCIgKVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cdF9jcmVhdGVUaXRsZWJhcjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVpRGlhbG9nVGl0bGU7XG5cblx0XHR0aGlzLnVpRGlhbG9nVGl0bGViYXIgPSAkKCBcIjxkaXY+XCIgKVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWRpYWxvZy10aXRsZWJhciB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwgdWktaGVscGVyLWNsZWFyZml4XCIgKVxuXHRcdFx0LnByZXBlbmRUbyggdGhpcy51aURpYWxvZyApO1xuXHRcdHRoaXMuX29uKCB0aGlzLnVpRGlhbG9nVGl0bGViYXIsIHtcblx0XHRcdG1vdXNlZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHQvLyBEb24ndCBwcmV2ZW50IGNsaWNrIG9uIGNsb3NlIGJ1dHRvbiAoIzg4MzgpXG5cdFx0XHRcdC8vIEZvY3VzaW5nIGEgZGlhbG9nIHRoYXQgaXMgcGFydGlhbGx5IHNjcm9sbGVkIG91dCBvZiB2aWV3XG5cdFx0XHRcdC8vIGNhdXNlcyB0aGUgYnJvd3NlciB0byBzY3JvbGwgaXQgaW50byB2aWV3LCBwcmV2ZW50aW5nIHRoZSBjbGljayBldmVudFxuXHRcdFx0XHRpZiAoICEkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBcIi51aS1kaWFsb2ctdGl0bGViYXItY2xvc2VcIiApICkge1xuXHRcdFx0XHRcdC8vIERpYWxvZyBpc24ndCBnZXR0aW5nIGZvY3VzIHdoZW4gZHJhZ2dpbmcgKCM4MDYzKVxuXHRcdFx0XHRcdHRoaXMudWlEaWFsb2cuZm9jdXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gc3VwcG9ydDogSUVcblx0XHQvLyBVc2UgdHlwZT1cImJ1dHRvblwiIHRvIHByZXZlbnQgZW50ZXIga2V5cHJlc3NlcyBpbiB0ZXh0Ym94ZXMgZnJvbSBjbG9zaW5nIHRoZVxuXHRcdC8vIGRpYWxvZyBpbiBJRSAoIzkzMTIpXG5cdFx0dGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2UgPSAkKCBcIjxidXR0b24gdHlwZT0nYnV0dG9uJz48L2J1dHRvbj5cIiApXG5cdFx0XHQuYnV0dG9uKHtcblx0XHRcdFx0bGFiZWw6IHRoaXMub3B0aW9ucy5jbG9zZVRleHQsXG5cdFx0XHRcdGljb25zOiB7XG5cdFx0XHRcdFx0cHJpbWFyeTogXCJ1aS1pY29uLWNsb3NldGhpY2tcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0ZXh0OiBmYWxzZVxuXHRcdFx0fSlcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1kaWFsb2ctdGl0bGViYXItY2xvc2VcIiApXG5cdFx0XHQuYXBwZW5kVG8oIHRoaXMudWlEaWFsb2dUaXRsZWJhciApO1xuXHRcdHRoaXMuX29uKCB0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZSwge1xuXHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0dGhpcy5jbG9zZSggZXZlbnQgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHVpRGlhbG9nVGl0bGUgPSAkKCBcIjxzcGFuPlwiIClcblx0XHRcdC51bmlxdWVJZCgpXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktZGlhbG9nLXRpdGxlXCIgKVxuXHRcdFx0LnByZXBlbmRUbyggdGhpcy51aURpYWxvZ1RpdGxlYmFyICk7XG5cdFx0dGhpcy5fdGl0bGUoIHVpRGlhbG9nVGl0bGUgKTtcblxuXHRcdHRoaXMudWlEaWFsb2cuYXR0cih7XG5cdFx0XHRcImFyaWEtbGFiZWxsZWRieVwiOiB1aURpYWxvZ1RpdGxlLmF0dHIoIFwiaWRcIiApXG5cdFx0fSk7XG5cdH0sXG5cblx0X3RpdGxlOiBmdW5jdGlvbiggdGl0bGUgKSB7XG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLnRpdGxlICkge1xuXHRcdFx0dGl0bGUuaHRtbCggXCImIzE2MDtcIiApO1xuXHRcdH1cblx0XHR0aXRsZS50ZXh0KCB0aGlzLm9wdGlvbnMudGl0bGUgKTtcblx0fSxcblxuXHRfY3JlYXRlQnV0dG9uUGFuZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51aURpYWxvZ0J1dHRvblBhbmUgPSAkKCBcIjxkaXY+XCIgKVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWRpYWxvZy1idXR0b25wYW5lIHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeFwiICk7XG5cblx0XHR0aGlzLnVpQnV0dG9uU2V0ID0gJCggXCI8ZGl2PlwiIClcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1kaWFsb2ctYnV0dG9uc2V0XCIgKVxuXHRcdFx0LmFwcGVuZFRvKCB0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZSApO1xuXG5cdFx0dGhpcy5fY3JlYXRlQnV0dG9ucygpO1xuXHR9LFxuXG5cdF9jcmVhdGVCdXR0b25zOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRidXR0b25zID0gdGhpcy5vcHRpb25zLmJ1dHRvbnM7XG5cblx0XHQvLyBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBidXR0b24gcGFuZSwgcmVtb3ZlIGl0XG5cdFx0dGhpcy51aURpYWxvZ0J1dHRvblBhbmUucmVtb3ZlKCk7XG5cdFx0dGhpcy51aUJ1dHRvblNldC5lbXB0eSgpO1xuXG5cdFx0aWYgKCAkLmlzRW1wdHlPYmplY3QoIGJ1dHRvbnMgKSB8fCAoJC5pc0FycmF5KCBidXR0b25zICkgJiYgIWJ1dHRvbnMubGVuZ3RoKSApIHtcblx0XHRcdHRoaXMudWlEaWFsb2cucmVtb3ZlQ2xhc3MoIFwidWktZGlhbG9nLWJ1dHRvbnNcIiApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdCQuZWFjaCggYnV0dG9ucywgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRcdFx0dmFyIGNsaWNrLCBidXR0b25PcHRpb25zO1xuXHRcdFx0cHJvcHMgPSAkLmlzRnVuY3Rpb24oIHByb3BzICkgP1xuXHRcdFx0XHR7IGNsaWNrOiBwcm9wcywgdGV4dDogbmFtZSB9IDpcblx0XHRcdFx0cHJvcHM7XG5cdFx0XHQvLyBEZWZhdWx0IHRvIGEgbm9uLXN1Ym1pdHRpbmcgYnV0dG9uXG5cdFx0XHRwcm9wcyA9ICQuZXh0ZW5kKCB7IHR5cGU6IFwiYnV0dG9uXCIgfSwgcHJvcHMgKTtcblx0XHRcdC8vIENoYW5nZSB0aGUgY29udGV4dCBmb3IgdGhlIGNsaWNrIGNhbGxiYWNrIHRvIGJlIHRoZSBtYWluIGVsZW1lbnRcblx0XHRcdGNsaWNrID0gcHJvcHMuY2xpY2s7XG5cdFx0XHRwcm9wcy5jbGljayA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjbGljay5hcHBseSggdGhhdC5lbGVtZW50WyAwIF0sIGFyZ3VtZW50cyApO1xuXHRcdFx0fTtcblx0XHRcdGJ1dHRvbk9wdGlvbnMgPSB7XG5cdFx0XHRcdGljb25zOiBwcm9wcy5pY29ucyxcblx0XHRcdFx0dGV4dDogcHJvcHMuc2hvd1RleHRcblx0XHRcdH07XG5cdFx0XHRkZWxldGUgcHJvcHMuaWNvbnM7XG5cdFx0XHRkZWxldGUgcHJvcHMuc2hvd1RleHQ7XG5cdFx0XHQkKCBcIjxidXR0b24+PC9idXR0b24+XCIsIHByb3BzIClcblx0XHRcdFx0LmJ1dHRvbiggYnV0dG9uT3B0aW9ucyApXG5cdFx0XHRcdC5hcHBlbmRUbyggdGhhdC51aUJ1dHRvblNldCApO1xuXHRcdH0pO1xuXHRcdHRoaXMudWlEaWFsb2cuYWRkQ2xhc3MoIFwidWktZGlhbG9nLWJ1dHRvbnNcIiApO1xuXHRcdHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLmFwcGVuZFRvKCB0aGlzLnVpRGlhbG9nICk7XG5cdH0sXG5cblx0X21ha2VEcmFnZ2FibGU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHRmdW5jdGlvbiBmaWx0ZXJlZFVpKCB1aSApIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHBvc2l0aW9uOiB1aS5wb3NpdGlvbixcblx0XHRcdFx0b2Zmc2V0OiB1aS5vZmZzZXRcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0dGhpcy51aURpYWxvZy5kcmFnZ2FibGUoe1xuXHRcdFx0Y2FuY2VsOiBcIi51aS1kaWFsb2ctY29udGVudCwgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZVwiLFxuXHRcdFx0aGFuZGxlOiBcIi51aS1kaWFsb2ctdGl0bGViYXJcIixcblx0XHRcdGNvbnRhaW5tZW50OiBcImRvY3VtZW50XCIsXG5cdFx0XHRzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0JCggdGhpcyApLmFkZENsYXNzKCBcInVpLWRpYWxvZy1kcmFnZ2luZ1wiICk7XG5cdFx0XHRcdHRoYXQuX2Jsb2NrRnJhbWVzKCk7XG5cdFx0XHRcdHRoYXQuX3RyaWdnZXIoIFwiZHJhZ1N0YXJ0XCIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7XG5cdFx0XHR9LFxuXHRcdFx0ZHJhZzogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0dGhhdC5fdHJpZ2dlciggXCJkcmFnXCIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7XG5cdFx0XHR9LFxuXHRcdFx0c3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0dmFyIGxlZnQgPSB1aS5vZmZzZXQubGVmdCAtIHRoYXQuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpLFxuXHRcdFx0XHRcdHRvcCA9IHVpLm9mZnNldC50b3AgLSB0aGF0LmRvY3VtZW50LnNjcm9sbFRvcCgpO1xuXG5cdFx0XHRcdG9wdGlvbnMucG9zaXRpb24gPSB7XG5cdFx0XHRcdFx0bXk6IFwibGVmdCB0b3BcIixcblx0XHRcdFx0XHRhdDogXCJsZWZ0XCIgKyAobGVmdCA+PSAwID8gXCIrXCIgOiBcIlwiKSArIGxlZnQgKyBcIiBcIiArXG5cdFx0XHRcdFx0XHRcInRvcFwiICsgKHRvcCA+PSAwID8gXCIrXCIgOiBcIlwiKSArIHRvcCxcblx0XHRcdFx0XHRvZjogdGhhdC53aW5kb3dcblx0XHRcdFx0fTtcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZUNsYXNzKCBcInVpLWRpYWxvZy1kcmFnZ2luZ1wiICk7XG5cdFx0XHRcdHRoYXQuX3VuYmxvY2tGcmFtZXMoKTtcblx0XHRcdFx0dGhhdC5fdHJpZ2dlciggXCJkcmFnU3RvcFwiLCBldmVudCwgZmlsdGVyZWRVaSggdWkgKSApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdF9tYWtlUmVzaXphYmxlOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0aGFuZGxlcyA9IG9wdGlvbnMucmVzaXphYmxlLFxuXHRcdFx0Ly8gLnVpLXJlc2l6YWJsZSBoYXMgcG9zaXRpb246IHJlbGF0aXZlIGRlZmluZWQgaW4gdGhlIHN0eWxlc2hlZXRcblx0XHRcdC8vIGJ1dCBkaWFsb2dzIGhhdmUgdG8gdXNlIGFic29sdXRlIG9yIGZpeGVkIHBvc2l0aW9uaW5nXG5cdFx0XHRwb3NpdGlvbiA9IHRoaXMudWlEaWFsb2cuY3NzKFwicG9zaXRpb25cIiksXG5cdFx0XHRyZXNpemVIYW5kbGVzID0gdHlwZW9mIGhhbmRsZXMgPT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRoYW5kbGVzXHQ6XG5cdFx0XHRcdFwibixlLHMsdyxzZSxzdyxuZSxud1wiO1xuXG5cdFx0ZnVuY3Rpb24gZmlsdGVyZWRVaSggdWkgKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRvcmlnaW5hbFBvc2l0aW9uOiB1aS5vcmlnaW5hbFBvc2l0aW9uLFxuXHRcdFx0XHRvcmlnaW5hbFNpemU6IHVpLm9yaWdpbmFsU2l6ZSxcblx0XHRcdFx0cG9zaXRpb246IHVpLnBvc2l0aW9uLFxuXHRcdFx0XHRzaXplOiB1aS5zaXplXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdHRoaXMudWlEaWFsb2cucmVzaXphYmxlKHtcblx0XHRcdGNhbmNlbDogXCIudWktZGlhbG9nLWNvbnRlbnRcIixcblx0XHRcdGNvbnRhaW5tZW50OiBcImRvY3VtZW50XCIsXG5cdFx0XHRhbHNvUmVzaXplOiB0aGlzLmVsZW1lbnQsXG5cdFx0XHRtYXhXaWR0aDogb3B0aW9ucy5tYXhXaWR0aCxcblx0XHRcdG1heEhlaWdodDogb3B0aW9ucy5tYXhIZWlnaHQsXG5cdFx0XHRtaW5XaWR0aDogb3B0aW9ucy5taW5XaWR0aCxcblx0XHRcdG1pbkhlaWdodDogdGhpcy5fbWluSGVpZ2h0KCksXG5cdFx0XHRoYW5kbGVzOiByZXNpemVIYW5kbGVzLFxuXHRcdFx0c3RhcnQ6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG5cdFx0XHRcdCQoIHRoaXMgKS5hZGRDbGFzcyggXCJ1aS1kaWFsb2ctcmVzaXppbmdcIiApO1xuXHRcdFx0XHR0aGF0Ll9ibG9ja0ZyYW1lcygpO1xuXHRcdFx0XHR0aGF0Ll90cmlnZ2VyKCBcInJlc2l6ZVN0YXJ0XCIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7XG5cdFx0XHR9LFxuXHRcdFx0cmVzaXplOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHR0aGF0Ll90cmlnZ2VyKCBcInJlc2l6ZVwiLCBldmVudCwgZmlsdGVyZWRVaSggdWkgKSApO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG5cdFx0XHRcdHZhciBvZmZzZXQgPSB0aGF0LnVpRGlhbG9nLm9mZnNldCgpLFxuXHRcdFx0XHRcdGxlZnQgPSBvZmZzZXQubGVmdCAtIHRoYXQuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpLFxuXHRcdFx0XHRcdHRvcCA9IG9mZnNldC50b3AgLSB0aGF0LmRvY3VtZW50LnNjcm9sbFRvcCgpO1xuXG5cdFx0XHRcdG9wdGlvbnMuaGVpZ2h0ID0gdGhhdC51aURpYWxvZy5oZWlnaHQoKTtcblx0XHRcdFx0b3B0aW9ucy53aWR0aCA9IHRoYXQudWlEaWFsb2cud2lkdGgoKTtcblx0XHRcdFx0b3B0aW9ucy5wb3NpdGlvbiA9IHtcblx0XHRcdFx0XHRteTogXCJsZWZ0IHRvcFwiLFxuXHRcdFx0XHRcdGF0OiBcImxlZnRcIiArIChsZWZ0ID49IDAgPyBcIitcIiA6IFwiXCIpICsgbGVmdCArIFwiIFwiICtcblx0XHRcdFx0XHRcdFwidG9wXCIgKyAodG9wID49IDAgPyBcIitcIiA6IFwiXCIpICsgdG9wLFxuXHRcdFx0XHRcdG9mOiB0aGF0LndpbmRvd1xuXHRcdFx0XHR9O1xuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQ2xhc3MoIFwidWktZGlhbG9nLXJlc2l6aW5nXCIgKTtcblx0XHRcdFx0dGhhdC5fdW5ibG9ja0ZyYW1lcygpO1xuXHRcdFx0XHR0aGF0Ll90cmlnZ2VyKCBcInJlc2l6ZVN0b3BcIiwgZXZlbnQsIGZpbHRlcmVkVWkoIHVpICkgKTtcblx0XHRcdH1cblx0XHR9KVxuXHRcdC5jc3MoIFwicG9zaXRpb25cIiwgcG9zaXRpb24gKTtcblx0fSxcblxuXHRfdHJhY2tGb2N1czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5fb24oIHRoaXMud2lkZ2V0KCksIHtcblx0XHRcdGZvY3VzaW46IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0dGhpcy5fbWFrZUZvY3VzVGFyZ2V0KCk7XG5cdFx0XHRcdHRoaXMuX2ZvY3VzZWRFbGVtZW50ID0gJCggZXZlbnQudGFyZ2V0ICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0X21ha2VGb2N1c1RhcmdldDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5fdW50cmFja0luc3RhbmNlKCk7XG5cdFx0dGhpcy5fdHJhY2tpbmdJbnN0YW5jZXMoKS51bnNoaWZ0KCB0aGlzICk7XG5cdH0sXG5cblx0X3VudHJhY2tJbnN0YW5jZTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGluc3RhbmNlcyA9IHRoaXMuX3RyYWNraW5nSW5zdGFuY2VzKCksXG5cdFx0XHRleGlzdHMgPSAkLmluQXJyYXkoIHRoaXMsIGluc3RhbmNlcyApO1xuXHRcdGlmICggZXhpc3RzICE9PSAtMSApIHtcblx0XHRcdGluc3RhbmNlcy5zcGxpY2UoIGV4aXN0cywgMSApO1xuXHRcdH1cblx0fSxcblxuXHRfdHJhY2tpbmdJbnN0YW5jZXM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbnN0YW5jZXMgPSB0aGlzLmRvY3VtZW50LmRhdGEoIFwidWktZGlhbG9nLWluc3RhbmNlc1wiICk7XG5cdFx0aWYgKCAhaW5zdGFuY2VzICkge1xuXHRcdFx0aW5zdGFuY2VzID0gW107XG5cdFx0XHR0aGlzLmRvY3VtZW50LmRhdGEoIFwidWktZGlhbG9nLWluc3RhbmNlc1wiLCBpbnN0YW5jZXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIGluc3RhbmNlcztcblx0fSxcblxuXHRfbWluSGVpZ2h0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuXHRcdHJldHVybiBvcHRpb25zLmhlaWdodCA9PT0gXCJhdXRvXCIgP1xuXHRcdFx0b3B0aW9ucy5taW5IZWlnaHQgOlxuXHRcdFx0TWF0aC5taW4oIG9wdGlvbnMubWluSGVpZ2h0LCBvcHRpb25zLmhlaWdodCApO1xuXHR9LFxuXG5cdF9wb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gTmVlZCB0byBzaG93IHRoZSBkaWFsb2cgdG8gZ2V0IHRoZSBhY3R1YWwgb2Zmc2V0IGluIHRoZSBwb3NpdGlvbiBwbHVnaW5cblx0XHR2YXIgaXNWaXNpYmxlID0gdGhpcy51aURpYWxvZy5pcyggXCI6dmlzaWJsZVwiICk7XG5cdFx0aWYgKCAhaXNWaXNpYmxlICkge1xuXHRcdFx0dGhpcy51aURpYWxvZy5zaG93KCk7XG5cdFx0fVxuXHRcdHRoaXMudWlEaWFsb2cucG9zaXRpb24oIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApO1xuXHRcdGlmICggIWlzVmlzaWJsZSApIHtcblx0XHRcdHRoaXMudWlEaWFsb2cuaGlkZSgpO1xuXHRcdH1cblx0fSxcblxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0cmVzaXplID0gZmFsc2UsXG5cdFx0XHRyZXNpemFibGVPcHRpb25zID0ge307XG5cblx0XHQkLmVhY2goIG9wdGlvbnMsIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdFx0dGhhdC5fc2V0T3B0aW9uKCBrZXksIHZhbHVlICk7XG5cblx0XHRcdGlmICgga2V5IGluIHRoYXQuc2l6ZVJlbGF0ZWRPcHRpb25zICkge1xuXHRcdFx0XHRyZXNpemUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBrZXkgaW4gdGhhdC5yZXNpemFibGVSZWxhdGVkT3B0aW9ucyApIHtcblx0XHRcdFx0cmVzaXphYmxlT3B0aW9uc1sga2V5IF0gPSB2YWx1ZTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmICggcmVzaXplICkge1xuXHRcdFx0dGhpcy5fc2l6ZSgpO1xuXHRcdFx0dGhpcy5fcG9zaXRpb24oKTtcblx0XHR9XG5cdFx0aWYgKCB0aGlzLnVpRGlhbG9nLmlzKCBcIjpkYXRhKHVpLXJlc2l6YWJsZSlcIiApICkge1xuXHRcdFx0dGhpcy51aURpYWxvZy5yZXNpemFibGUoIFwib3B0aW9uXCIsIHJlc2l6YWJsZU9wdGlvbnMgKTtcblx0XHR9XG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIGlzRHJhZ2dhYmxlLCBpc1Jlc2l6YWJsZSxcblx0XHRcdHVpRGlhbG9nID0gdGhpcy51aURpYWxvZztcblxuXHRcdGlmICgga2V5ID09PSBcImRpYWxvZ0NsYXNzXCIgKSB7XG5cdFx0XHR1aURpYWxvZ1xuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5kaWFsb2dDbGFzcyApXG5cdFx0XHRcdC5hZGRDbGFzcyggdmFsdWUgKTtcblx0XHR9XG5cblx0XHRpZiAoIGtleSA9PT0gXCJkaXNhYmxlZFwiICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7XG5cblx0XHRpZiAoIGtleSA9PT0gXCJhcHBlbmRUb1wiICkge1xuXHRcdFx0dGhpcy51aURpYWxvZy5hcHBlbmRUbyggdGhpcy5fYXBwZW5kVG8oKSApO1xuXHRcdH1cblxuXHRcdGlmICgga2V5ID09PSBcImJ1dHRvbnNcIiApIHtcblx0XHRcdHRoaXMuX2NyZWF0ZUJ1dHRvbnMoKTtcblx0XHR9XG5cblx0XHRpZiAoIGtleSA9PT0gXCJjbG9zZVRleHRcIiApIHtcblx0XHRcdHRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlLmJ1dHRvbih7XG5cdFx0XHRcdC8vIEVuc3VyZSB0aGF0IHdlIGFsd2F5cyBwYXNzIGEgc3RyaW5nXG5cdFx0XHRcdGxhYmVsOiBcIlwiICsgdmFsdWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICgga2V5ID09PSBcImRyYWdnYWJsZVwiICkge1xuXHRcdFx0aXNEcmFnZ2FibGUgPSB1aURpYWxvZy5pcyggXCI6ZGF0YSh1aS1kcmFnZ2FibGUpXCIgKTtcblx0XHRcdGlmICggaXNEcmFnZ2FibGUgJiYgIXZhbHVlICkge1xuXHRcdFx0XHR1aURpYWxvZy5kcmFnZ2FibGUoIFwiZGVzdHJveVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggIWlzRHJhZ2dhYmxlICYmIHZhbHVlICkge1xuXHRcdFx0XHR0aGlzLl9tYWtlRHJhZ2dhYmxlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgPT09IFwicG9zaXRpb25cIiApIHtcblx0XHRcdHRoaXMuX3Bvc2l0aW9uKCk7XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgPT09IFwicmVzaXphYmxlXCIgKSB7XG5cdFx0XHQvLyBjdXJyZW50bHkgcmVzaXphYmxlLCBiZWNvbWluZyBub24tcmVzaXphYmxlXG5cdFx0XHRpc1Jlc2l6YWJsZSA9IHVpRGlhbG9nLmlzKCBcIjpkYXRhKHVpLXJlc2l6YWJsZSlcIiApO1xuXHRcdFx0aWYgKCBpc1Jlc2l6YWJsZSAmJiAhdmFsdWUgKSB7XG5cdFx0XHRcdHVpRGlhbG9nLnJlc2l6YWJsZSggXCJkZXN0cm95XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gY3VycmVudGx5IHJlc2l6YWJsZSwgY2hhbmdpbmcgaGFuZGxlc1xuXHRcdFx0aWYgKCBpc1Jlc2l6YWJsZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdHVpRGlhbG9nLnJlc2l6YWJsZSggXCJvcHRpb25cIiwgXCJoYW5kbGVzXCIsIHZhbHVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGN1cnJlbnRseSBub24tcmVzaXphYmxlLCBiZWNvbWluZyByZXNpemFibGVcblx0XHRcdGlmICggIWlzUmVzaXphYmxlICYmIHZhbHVlICE9PSBmYWxzZSApIHtcblx0XHRcdFx0dGhpcy5fbWFrZVJlc2l6YWJsZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICgga2V5ID09PSBcInRpdGxlXCIgKSB7XG5cdFx0XHR0aGlzLl90aXRsZSggdGhpcy51aURpYWxvZ1RpdGxlYmFyLmZpbmQoIFwiLnVpLWRpYWxvZy10aXRsZVwiICkgKTtcblx0XHR9XG5cdH0sXG5cblx0X3NpemU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIElmIHRoZSB1c2VyIGhhcyByZXNpemVkIHRoZSBkaWFsb2csIHRoZSAudWktZGlhbG9nIGFuZCAudWktZGlhbG9nLWNvbnRlbnRcblx0XHQvLyBkaXZzIHdpbGwgYm90aCBoYXZlIHdpZHRoIGFuZCBoZWlnaHQgc2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IHRoZW1cblx0XHR2YXIgbm9uQ29udGVudEhlaWdodCwgbWluQ29udGVudEhlaWdodCwgbWF4Q29udGVudEhlaWdodCxcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHQvLyBSZXNldCBjb250ZW50IHNpemluZ1xuXHRcdHRoaXMuZWxlbWVudC5zaG93KCkuY3NzKHtcblx0XHRcdHdpZHRoOiBcImF1dG9cIixcblx0XHRcdG1pbkhlaWdodDogMCxcblx0XHRcdG1heEhlaWdodDogXCJub25lXCIsXG5cdFx0XHRoZWlnaHQ6IDBcblx0XHR9KTtcblxuXHRcdGlmICggb3B0aW9ucy5taW5XaWR0aCA+IG9wdGlvbnMud2lkdGggKSB7XG5cdFx0XHRvcHRpb25zLndpZHRoID0gb3B0aW9ucy5taW5XaWR0aDtcblx0XHR9XG5cblx0XHQvLyByZXNldCB3cmFwcGVyIHNpemluZ1xuXHRcdC8vIGRldGVybWluZSB0aGUgaGVpZ2h0IG9mIGFsbCB0aGUgbm9uLWNvbnRlbnQgZWxlbWVudHNcblx0XHRub25Db250ZW50SGVpZ2h0ID0gdGhpcy51aURpYWxvZy5jc3Moe1xuXHRcdFx0XHRoZWlnaHQ6IFwiYXV0b1wiLFxuXHRcdFx0XHR3aWR0aDogb3B0aW9ucy53aWR0aFxuXHRcdFx0fSlcblx0XHRcdC5vdXRlckhlaWdodCgpO1xuXHRcdG1pbkNvbnRlbnRIZWlnaHQgPSBNYXRoLm1heCggMCwgb3B0aW9ucy5taW5IZWlnaHQgLSBub25Db250ZW50SGVpZ2h0ICk7XG5cdFx0bWF4Q29udGVudEhlaWdodCA9IHR5cGVvZiBvcHRpb25zLm1heEhlaWdodCA9PT0gXCJudW1iZXJcIiA/XG5cdFx0XHRNYXRoLm1heCggMCwgb3B0aW9ucy5tYXhIZWlnaHQgLSBub25Db250ZW50SGVpZ2h0ICkgOlxuXHRcdFx0XCJub25lXCI7XG5cblx0XHRpZiAoIG9wdGlvbnMuaGVpZ2h0ID09PSBcImF1dG9cIiApIHtcblx0XHRcdHRoaXMuZWxlbWVudC5jc3Moe1xuXHRcdFx0XHRtaW5IZWlnaHQ6IG1pbkNvbnRlbnRIZWlnaHQsXG5cdFx0XHRcdG1heEhlaWdodDogbWF4Q29udGVudEhlaWdodCxcblx0XHRcdFx0aGVpZ2h0OiBcImF1dG9cIlxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZWxlbWVudC5oZWlnaHQoIE1hdGgubWF4KCAwLCBvcHRpb25zLmhlaWdodCAtIG5vbkNvbnRlbnRIZWlnaHQgKSApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy51aURpYWxvZy5pcyggXCI6ZGF0YSh1aS1yZXNpemFibGUpXCIgKSApIHtcblx0XHRcdHRoaXMudWlEaWFsb2cucmVzaXphYmxlKCBcIm9wdGlvblwiLCBcIm1pbkhlaWdodFwiLCB0aGlzLl9taW5IZWlnaHQoKSApO1xuXHRcdH1cblx0fSxcblxuXHRfYmxvY2tGcmFtZXM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuaWZyYW1lQmxvY2tzID0gdGhpcy5kb2N1bWVudC5maW5kKCBcImlmcmFtZVwiICkubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGlmcmFtZSA9ICQoIHRoaXMgKTtcblxuXHRcdFx0cmV0dXJuICQoIFwiPGRpdj5cIiApXG5cdFx0XHRcdC5jc3Moe1xuXHRcdFx0XHRcdHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG5cdFx0XHRcdFx0d2lkdGg6IGlmcmFtZS5vdXRlcldpZHRoKCksXG5cdFx0XHRcdFx0aGVpZ2h0OiBpZnJhbWUub3V0ZXJIZWlnaHQoKVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYXBwZW5kVG8oIGlmcmFtZS5wYXJlbnQoKSApXG5cdFx0XHRcdC5vZmZzZXQoIGlmcmFtZS5vZmZzZXQoKSApWzBdO1xuXHRcdH0pO1xuXHR9LFxuXG5cdF91bmJsb2NrRnJhbWVzOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoIHRoaXMuaWZyYW1lQmxvY2tzICkge1xuXHRcdFx0dGhpcy5pZnJhbWVCbG9ja3MucmVtb3ZlKCk7XG5cdFx0XHRkZWxldGUgdGhpcy5pZnJhbWVCbG9ja3M7XG5cdFx0fVxuXHR9LFxuXG5cdF9hbGxvd0ludGVyYWN0aW9uOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCAkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBcIi51aS1kaWFsb2dcIiApLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIFRPRE86IFJlbW92ZSBoYWNrIHdoZW4gZGF0ZXBpY2tlciBpbXBsZW1lbnRzXG5cdFx0Ly8gdGhlIC51aS1mcm9udCBsb2dpYyAoIzg5ODkpXG5cdFx0cmV0dXJuICEhJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggXCIudWktZGF0ZXBpY2tlclwiICkubGVuZ3RoO1xuXHR9LFxuXG5cdF9jcmVhdGVPdmVybGF5OiBmdW5jdGlvbigpIHtcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMubW9kYWwgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gV2UgdXNlIGEgZGVsYXkgaW4gY2FzZSB0aGUgb3ZlcmxheSBpcyBjcmVhdGVkIGZyb20gYW5cblx0XHQvLyBldmVudCB0aGF0IHdlJ3JlIGdvaW5nIHRvIGJlIGNhbmNlbGxpbmcgKCMyODA0KVxuXHRcdHZhciBpc09wZW5pbmcgPSB0cnVlO1xuXHRcdHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0aXNPcGVuaW5nID0gZmFsc2U7XG5cdFx0fSk7XG5cblx0XHRpZiAoICF0aGlzLmRvY3VtZW50LmRhdGEoIFwidWktZGlhbG9nLW92ZXJsYXlzXCIgKSApIHtcblxuXHRcdFx0Ly8gUHJldmVudCB1c2Ugb2YgYW5jaG9ycyBhbmQgaW5wdXRzXG5cdFx0XHQvLyBVc2luZyBfb24oKSBmb3IgYW4gZXZlbnQgaGFuZGxlciBzaGFyZWQgYWNyb3NzIG1hbnkgaW5zdGFuY2VzIGlzXG5cdFx0XHQvLyBzYWZlIGJlY2F1c2UgdGhlIGRpYWxvZ3Mgc3RhY2sgYW5kIG11c3QgYmUgY2xvc2VkIGluIHJldmVyc2Ugb3JkZXJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7XG5cdFx0XHRcdGZvY3VzaW46IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0XHRpZiAoIGlzT3BlbmluZyApIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoICF0aGlzLl9hbGxvd0ludGVyYWN0aW9uKCBldmVudCApICkge1xuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdHRoaXMuX3RyYWNraW5nSW5zdGFuY2VzKClbIDAgXS5fZm9jdXNUYWJiYWJsZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5vdmVybGF5ID0gJCggXCI8ZGl2PlwiIClcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS13aWRnZXQtb3ZlcmxheSB1aS1mcm9udFwiIClcblx0XHRcdC5hcHBlbmRUbyggdGhpcy5fYXBwZW5kVG8oKSApO1xuXHRcdHRoaXMuX29uKCB0aGlzLm92ZXJsYXksIHtcblx0XHRcdG1vdXNlZG93bjogXCJfa2VlcEZvY3VzXCJcblx0XHR9KTtcblx0XHR0aGlzLmRvY3VtZW50LmRhdGEoIFwidWktZGlhbG9nLW92ZXJsYXlzXCIsXG5cdFx0XHQodGhpcy5kb2N1bWVudC5kYXRhKCBcInVpLWRpYWxvZy1vdmVybGF5c1wiICkgfHwgMCkgKyAxICk7XG5cdH0sXG5cblx0X2Rlc3Ryb3lPdmVybGF5OiBmdW5jdGlvbigpIHtcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMubW9kYWwgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLm92ZXJsYXkgKSB7XG5cdFx0XHR2YXIgb3ZlcmxheXMgPSB0aGlzLmRvY3VtZW50LmRhdGEoIFwidWktZGlhbG9nLW92ZXJsYXlzXCIgKSAtIDE7XG5cblx0XHRcdGlmICggIW92ZXJsYXlzICkge1xuXHRcdFx0XHR0aGlzLmRvY3VtZW50XG5cdFx0XHRcdFx0LnVuYmluZCggXCJmb2N1c2luXCIgKVxuXHRcdFx0XHRcdC5yZW1vdmVEYXRhKCBcInVpLWRpYWxvZy1vdmVybGF5c1wiICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmRvY3VtZW50LmRhdGEoIFwidWktZGlhbG9nLW92ZXJsYXlzXCIsIG92ZXJsYXlzICk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMub3ZlcmxheS5yZW1vdmUoKTtcblx0XHRcdHRoaXMub3ZlcmxheSA9IG51bGw7XG5cdFx0fVxuXHR9XG59KTtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBEcm9wcGFibGUgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9kcm9wcGFibGUvXG4gKi9cblxuXG4kLndpZGdldCggXCJ1aS5kcm9wcGFibGVcIiwge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXHR3aWRnZXRFdmVudFByZWZpeDogXCJkcm9wXCIsXG5cdG9wdGlvbnM6IHtcblx0XHRhY2NlcHQ6IFwiKlwiLFxuXHRcdGFjdGl2ZUNsYXNzOiBmYWxzZSxcblx0XHRhZGRDbGFzc2VzOiB0cnVlLFxuXHRcdGdyZWVkeTogZmFsc2UsXG5cdFx0aG92ZXJDbGFzczogZmFsc2UsXG5cdFx0c2NvcGU6IFwiZGVmYXVsdFwiLFxuXHRcdHRvbGVyYW5jZTogXCJpbnRlcnNlY3RcIixcblxuXHRcdC8vIGNhbGxiYWNrc1xuXHRcdGFjdGl2YXRlOiBudWxsLFxuXHRcdGRlYWN0aXZhdGU6IG51bGwsXG5cdFx0ZHJvcDogbnVsbCxcblx0XHRvdXQ6IG51bGwsXG5cdFx0b3ZlcjogbnVsbFxuXHR9LFxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBwcm9wb3J0aW9ucyxcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRhY2NlcHQgPSBvLmFjY2VwdDtcblxuXHRcdHRoaXMuaXNvdmVyID0gZmFsc2U7XG5cdFx0dGhpcy5pc291dCA9IHRydWU7XG5cblx0XHR0aGlzLmFjY2VwdCA9ICQuaXNGdW5jdGlvbiggYWNjZXB0ICkgPyBhY2NlcHQgOiBmdW5jdGlvbiggZCApIHtcblx0XHRcdHJldHVybiBkLmlzKCBhY2NlcHQgKTtcblx0XHR9O1xuXG5cdFx0dGhpcy5wcm9wb3J0aW9ucyA9IGZ1bmN0aW9uKCAvKiB2YWx1ZVRvV3JpdGUgKi8gKSB7XG5cdFx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRcdC8vIFN0b3JlIHRoZSBkcm9wcGFibGUncyBwcm9wb3J0aW9uc1xuXHRcdFx0XHRwcm9wb3J0aW9ucyA9IGFyZ3VtZW50c1sgMCBdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gUmV0cmlldmUgb3IgZGVyaXZlIHRoZSBkcm9wcGFibGUncyBwcm9wb3J0aW9uc1xuXHRcdFx0XHRyZXR1cm4gcHJvcG9ydGlvbnMgP1xuXHRcdFx0XHRcdHByb3BvcnRpb25zIDpcblx0XHRcdFx0XHRwcm9wb3J0aW9ucyA9IHtcblx0XHRcdFx0XHRcdHdpZHRoOiB0aGlzLmVsZW1lbnRbIDAgXS5vZmZzZXRXaWR0aCxcblx0XHRcdFx0XHRcdGhlaWdodDogdGhpcy5lbGVtZW50WyAwIF0ub2Zmc2V0SGVpZ2h0XG5cdFx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dGhpcy5fYWRkVG9NYW5hZ2VyKCBvLnNjb3BlICk7XG5cblx0XHRvLmFkZENsYXNzZXMgJiYgdGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLWRyb3BwYWJsZVwiICk7XG5cblx0fSxcblxuXHRfYWRkVG9NYW5hZ2VyOiBmdW5jdGlvbiggc2NvcGUgKSB7XG5cdFx0Ly8gQWRkIHRoZSByZWZlcmVuY2UgYW5kIHBvc2l0aW9ucyB0byB0aGUgbWFuYWdlclxuXHRcdCQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbIHNjb3BlIF0gPSAkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzWyBzY29wZSBdIHx8IFtdO1xuXHRcdCQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbIHNjb3BlIF0ucHVzaCggdGhpcyApO1xuXHR9LFxuXG5cdF9zcGxpY2U6IGZ1bmN0aW9uKCBkcm9wICkge1xuXHRcdHZhciBpID0gMDtcblx0XHRmb3IgKCA7IGkgPCBkcm9wLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0aWYgKCBkcm9wWyBpIF0gPT09IHRoaXMgKSB7XG5cdFx0XHRcdGRyb3Auc3BsaWNlKCBpLCAxICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZHJvcCA9ICQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbIHRoaXMub3B0aW9ucy5zY29wZSBdO1xuXG5cdFx0dGhpcy5fc3BsaWNlKCBkcm9wICk7XG5cblx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktZHJvcHBhYmxlIHVpLWRyb3BwYWJsZS1kaXNhYmxlZFwiICk7XG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cblx0XHRpZiAoIGtleSA9PT0gXCJhY2NlcHRcIiApIHtcblx0XHRcdHRoaXMuYWNjZXB0ID0gJC5pc0Z1bmN0aW9uKCB2YWx1ZSApID8gdmFsdWUgOiBmdW5jdGlvbiggZCApIHtcblx0XHRcdFx0cmV0dXJuIGQuaXMoIHZhbHVlICk7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSBpZiAoIGtleSA9PT0gXCJzY29wZVwiICkge1xuXHRcdFx0dmFyIGRyb3AgPSAkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzWyB0aGlzLm9wdGlvbnMuc2NvcGUgXTtcblxuXHRcdFx0dGhpcy5fc3BsaWNlKCBkcm9wICk7XG5cdFx0XHR0aGlzLl9hZGRUb01hbmFnZXIoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcblx0fSxcblxuXHRfYWN0aXZhdGU6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHR2YXIgZHJhZ2dhYmxlID0gJC51aS5kZG1hbmFnZXIuY3VycmVudDtcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyApIHtcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzICk7XG5cdFx0fVxuXHRcdGlmICggZHJhZ2dhYmxlICl7XG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImFjdGl2YXRlXCIsIGV2ZW50LCB0aGlzLnVpKCBkcmFnZ2FibGUgKSApO1xuXHRcdH1cblx0fSxcblxuXHRfZGVhY3RpdmF0ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBkcmFnZ2FibGUgPSAkLnVpLmRkbWFuYWdlci5jdXJyZW50O1xuXHRcdGlmICggdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzICkge1xuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MgKTtcblx0XHR9XG5cdFx0aWYgKCBkcmFnZ2FibGUgKXtcblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwiZGVhY3RpdmF0ZVwiLCBldmVudCwgdGhpcy51aSggZHJhZ2dhYmxlICkgKTtcblx0XHR9XG5cdH0sXG5cblx0X292ZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdHZhciBkcmFnZ2FibGUgPSAkLnVpLmRkbWFuYWdlci5jdXJyZW50O1xuXG5cdFx0Ly8gQmFpbCBpZiBkcmFnZ2FibGUgYW5kIGRyb3BwYWJsZSBhcmUgc2FtZSBlbGVtZW50XG5cdFx0aWYgKCAhZHJhZ2dhYmxlIHx8ICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50IClbIDAgXSA9PT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmFjY2VwdC5jYWxsKCB0aGlzLmVsZW1lbnRbIDAgXSwgKCBkcmFnZ2FibGUuY3VycmVudEl0ZW0gfHwgZHJhZ2dhYmxlLmVsZW1lbnQgKSApICkge1xuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyApIHtcblx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyApO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fdHJpZ2dlciggXCJvdmVyXCIsIGV2ZW50LCB0aGlzLnVpKCBkcmFnZ2FibGUgKSApO1xuXHRcdH1cblxuXHR9LFxuXG5cdF9vdXQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdHZhciBkcmFnZ2FibGUgPSAkLnVpLmRkbWFuYWdlci5jdXJyZW50O1xuXG5cdFx0Ly8gQmFpbCBpZiBkcmFnZ2FibGUgYW5kIGRyb3BwYWJsZSBhcmUgc2FtZSBlbGVtZW50XG5cdFx0aWYgKCAhZHJhZ2dhYmxlIHx8ICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50IClbIDAgXSA9PT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmFjY2VwdC5jYWxsKCB0aGlzLmVsZW1lbnRbIDAgXSwgKCBkcmFnZ2FibGUuY3VycmVudEl0ZW0gfHwgZHJhZ2dhYmxlLmVsZW1lbnQgKSApICkge1xuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyApIHtcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyApO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fdHJpZ2dlciggXCJvdXRcIiwgZXZlbnQsIHRoaXMudWkoIGRyYWdnYWJsZSApICk7XG5cdFx0fVxuXG5cdH0sXG5cblx0X2Ryb3A6IGZ1bmN0aW9uKCBldmVudCwgY3VzdG9tICkge1xuXG5cdFx0dmFyIGRyYWdnYWJsZSA9IGN1c3RvbSB8fCAkLnVpLmRkbWFuYWdlci5jdXJyZW50LFxuXHRcdFx0Y2hpbGRyZW5JbnRlcnNlY3Rpb24gPSBmYWxzZTtcblxuXHRcdC8vIEJhaWwgaWYgZHJhZ2dhYmxlIGFuZCBkcm9wcGFibGUgYXJlIHNhbWUgZWxlbWVudFxuXHRcdGlmICggIWRyYWdnYWJsZSB8fCAoIGRyYWdnYWJsZS5jdXJyZW50SXRlbSB8fCBkcmFnZ2FibGUuZWxlbWVudCApWyAwIF0gPT09IHRoaXMuZWxlbWVudFsgMCBdICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIjpkYXRhKHVpLWRyb3BwYWJsZSlcIiApLm5vdCggXCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIgKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluc3QgPSAkKCB0aGlzICkuZHJvcHBhYmxlKCBcImluc3RhbmNlXCIgKTtcblx0XHRcdGlmIChcblx0XHRcdFx0aW5zdC5vcHRpb25zLmdyZWVkeSAmJlxuXHRcdFx0XHQhaW5zdC5vcHRpb25zLmRpc2FibGVkICYmXG5cdFx0XHRcdGluc3Qub3B0aW9ucy5zY29wZSA9PT0gZHJhZ2dhYmxlLm9wdGlvbnMuc2NvcGUgJiZcblx0XHRcdFx0aW5zdC5hY2NlcHQuY2FsbCggaW5zdC5lbGVtZW50WyAwIF0sICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50ICkgKSAmJlxuXHRcdFx0XHQkLnVpLmludGVyc2VjdCggZHJhZ2dhYmxlLCAkLmV4dGVuZCggaW5zdCwgeyBvZmZzZXQ6IGluc3QuZWxlbWVudC5vZmZzZXQoKSB9ICksIGluc3Qub3B0aW9ucy50b2xlcmFuY2UsIGV2ZW50IClcblx0XHRcdCkgeyBjaGlsZHJlbkludGVyc2VjdGlvbiA9IHRydWU7IHJldHVybiBmYWxzZTsgfVxuXHRcdH0pO1xuXHRcdGlmICggY2hpbGRyZW5JbnRlcnNlY3Rpb24gKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmFjY2VwdC5jYWxsKCB0aGlzLmVsZW1lbnRbIDAgXSwgKCBkcmFnZ2FibGUuY3VycmVudEl0ZW0gfHwgZHJhZ2dhYmxlLmVsZW1lbnQgKSApICkge1xuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MgKSB7XG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzICk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzICkge1xuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzICk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImRyb3BcIiwgZXZlbnQsIHRoaXMudWkoIGRyYWdnYWJsZSApICk7XG5cdFx0XHRyZXR1cm4gdGhpcy5lbGVtZW50O1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblxuXHR9LFxuXG5cdHVpOiBmdW5jdGlvbiggYyApIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0ZHJhZ2dhYmxlOiAoIGMuY3VycmVudEl0ZW0gfHwgYy5lbGVtZW50ICksXG5cdFx0XHRoZWxwZXI6IGMuaGVscGVyLFxuXHRcdFx0cG9zaXRpb246IGMucG9zaXRpb24sXG5cdFx0XHRvZmZzZXQ6IGMucG9zaXRpb25BYnNcblx0XHR9O1xuXHR9XG5cbn0pO1xuXG4kLnVpLmludGVyc2VjdCA9IChmdW5jdGlvbigpIHtcblx0ZnVuY3Rpb24gaXNPdmVyQXhpcyggeCwgcmVmZXJlbmNlLCBzaXplICkge1xuXHRcdHJldHVybiAoIHggPj0gcmVmZXJlbmNlICkgJiYgKCB4IDwgKCByZWZlcmVuY2UgKyBzaXplICkgKTtcblx0fVxuXG5cdHJldHVybiBmdW5jdGlvbiggZHJhZ2dhYmxlLCBkcm9wcGFibGUsIHRvbGVyYW5jZU1vZGUsIGV2ZW50ICkge1xuXG5cdFx0aWYgKCAhZHJvcHBhYmxlLm9mZnNldCApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHR2YXIgeDEgPSAoIGRyYWdnYWJsZS5wb3NpdGlvbkFicyB8fCBkcmFnZ2FibGUucG9zaXRpb24uYWJzb2x1dGUgKS5sZWZ0ICsgZHJhZ2dhYmxlLm1hcmdpbnMubGVmdCxcblx0XHRcdHkxID0gKCBkcmFnZ2FibGUucG9zaXRpb25BYnMgfHwgZHJhZ2dhYmxlLnBvc2l0aW9uLmFic29sdXRlICkudG9wICsgZHJhZ2dhYmxlLm1hcmdpbnMudG9wLFxuXHRcdFx0eDIgPSB4MSArIGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCxcblx0XHRcdHkyID0geTEgKyBkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LFxuXHRcdFx0bCA9IGRyb3BwYWJsZS5vZmZzZXQubGVmdCxcblx0XHRcdHQgPSBkcm9wcGFibGUub2Zmc2V0LnRvcCxcblx0XHRcdHIgPSBsICsgZHJvcHBhYmxlLnByb3BvcnRpb25zKCkud2lkdGgsXG5cdFx0XHRiID0gdCArIGRyb3BwYWJsZS5wcm9wb3J0aW9ucygpLmhlaWdodDtcblxuXHRcdHN3aXRjaCAoIHRvbGVyYW5jZU1vZGUgKSB7XG5cdFx0Y2FzZSBcImZpdFwiOlxuXHRcdFx0cmV0dXJuICggbCA8PSB4MSAmJiB4MiA8PSByICYmIHQgPD0geTEgJiYgeTIgPD0gYiApO1xuXHRcdGNhc2UgXCJpbnRlcnNlY3RcIjpcblx0XHRcdHJldHVybiAoIGwgPCB4MSArICggZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC8gMiApICYmIC8vIFJpZ2h0IEhhbGZcblx0XHRcdFx0eDIgLSAoIGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAvIDIgKSA8IHIgJiYgLy8gTGVmdCBIYWxmXG5cdFx0XHRcdHQgPCB5MSArICggZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAvIDIgKSAmJiAvLyBCb3R0b20gSGFsZlxuXHRcdFx0XHR5MiAtICggZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAvIDIgKSA8IGIgKTsgLy8gVG9wIEhhbGZcblx0XHRjYXNlIFwicG9pbnRlclwiOlxuXHRcdFx0cmV0dXJuIGlzT3ZlckF4aXMoIGV2ZW50LnBhZ2VZLCB0LCBkcm9wcGFibGUucHJvcG9ydGlvbnMoKS5oZWlnaHQgKSAmJiBpc092ZXJBeGlzKCBldmVudC5wYWdlWCwgbCwgZHJvcHBhYmxlLnByb3BvcnRpb25zKCkud2lkdGggKTtcblx0XHRjYXNlIFwidG91Y2hcIjpcblx0XHRcdHJldHVybiAoXG5cdFx0XHRcdCggeTEgPj0gdCAmJiB5MSA8PSBiICkgfHwgLy8gVG9wIGVkZ2UgdG91Y2hpbmdcblx0XHRcdFx0KCB5MiA+PSB0ICYmIHkyIDw9IGIgKSB8fCAvLyBCb3R0b20gZWRnZSB0b3VjaGluZ1xuXHRcdFx0XHQoIHkxIDwgdCAmJiB5MiA+IGIgKSAvLyBTdXJyb3VuZGVkIHZlcnRpY2FsbHlcblx0XHRcdCkgJiYgKFxuXHRcdFx0XHQoIHgxID49IGwgJiYgeDEgPD0gciApIHx8IC8vIExlZnQgZWRnZSB0b3VjaGluZ1xuXHRcdFx0XHQoIHgyID49IGwgJiYgeDIgPD0gciApIHx8IC8vIFJpZ2h0IGVkZ2UgdG91Y2hpbmdcblx0XHRcdFx0KCB4MSA8IGwgJiYgeDIgPiByICkgLy8gU3Vycm91bmRlZCBob3Jpem9udGFsbHlcblx0XHRcdCk7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH07XG59KSgpO1xuXG4vKlxuXHRUaGlzIG1hbmFnZXIgdHJhY2tzIG9mZnNldHMgb2YgZHJhZ2dhYmxlcyBhbmQgZHJvcHBhYmxlc1xuKi9cbiQudWkuZGRtYW5hZ2VyID0ge1xuXHRjdXJyZW50OiBudWxsLFxuXHRkcm9wcGFibGVzOiB7IFwiZGVmYXVsdFwiOiBbXSB9LFxuXHRwcmVwYXJlT2Zmc2V0czogZnVuY3Rpb24oIHQsIGV2ZW50ICkge1xuXG5cdFx0dmFyIGksIGosXG5cdFx0XHRtID0gJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgdC5vcHRpb25zLnNjb3BlIF0gfHwgW10sXG5cdFx0XHR0eXBlID0gZXZlbnQgPyBldmVudC50eXBlIDogbnVsbCwgLy8gd29ya2Fyb3VuZCBmb3IgIzIzMTdcblx0XHRcdGxpc3QgPSAoIHQuY3VycmVudEl0ZW0gfHwgdC5lbGVtZW50ICkuZmluZCggXCI6ZGF0YSh1aS1kcm9wcGFibGUpXCIgKS5hZGRCYWNrKCk7XG5cblx0XHRkcm9wcGFibGVzTG9vcDogZm9yICggaSA9IDA7IGkgPCBtLmxlbmd0aDsgaSsrICkge1xuXG5cdFx0XHQvLyBObyBkaXNhYmxlZCBhbmQgbm9uLWFjY2VwdGVkXG5cdFx0XHRpZiAoIG1bIGkgXS5vcHRpb25zLmRpc2FibGVkIHx8ICggdCAmJiAhbVsgaSBdLmFjY2VwdC5jYWxsKCBtWyBpIF0uZWxlbWVudFsgMCBdLCAoIHQuY3VycmVudEl0ZW0gfHwgdC5lbGVtZW50ICkgKSApICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBlbGVtZW50cyBpbiB0aGUgY3VycmVudCBkcmFnZ2VkIGl0ZW1cblx0XHRcdGZvciAoIGogPSAwOyBqIDwgbGlzdC5sZW5ndGg7IGorKyApIHtcblx0XHRcdFx0aWYgKCBsaXN0WyBqIF0gPT09IG1bIGkgXS5lbGVtZW50WyAwIF0gKSB7XG5cdFx0XHRcdFx0bVsgaSBdLnByb3BvcnRpb25zKCkuaGVpZ2h0ID0gMDtcblx0XHRcdFx0XHRjb250aW51ZSBkcm9wcGFibGVzTG9vcDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRtWyBpIF0udmlzaWJsZSA9IG1bIGkgXS5lbGVtZW50LmNzcyggXCJkaXNwbGF5XCIgKSAhPT0gXCJub25lXCI7XG5cdFx0XHRpZiAoICFtWyBpIF0udmlzaWJsZSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjdGl2YXRlIHRoZSBkcm9wcGFibGUgaWYgdXNlZCBkaXJlY3RseSBmcm9tIGRyYWdnYWJsZXNcblx0XHRcdGlmICggdHlwZSA9PT0gXCJtb3VzZWRvd25cIiApIHtcblx0XHRcdFx0bVsgaSBdLl9hY3RpdmF0ZS5jYWxsKCBtWyBpIF0sIGV2ZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdG1bIGkgXS5vZmZzZXQgPSBtWyBpIF0uZWxlbWVudC5vZmZzZXQoKTtcblx0XHRcdG1bIGkgXS5wcm9wb3J0aW9ucyh7IHdpZHRoOiBtWyBpIF0uZWxlbWVudFsgMCBdLm9mZnNldFdpZHRoLCBoZWlnaHQ6IG1bIGkgXS5lbGVtZW50WyAwIF0ub2Zmc2V0SGVpZ2h0IH0pO1xuXG5cdFx0fVxuXG5cdH0sXG5cdGRyb3A6IGZ1bmN0aW9uKCBkcmFnZ2FibGUsIGV2ZW50ICkge1xuXG5cdFx0dmFyIGRyb3BwZWQgPSBmYWxzZTtcblx0XHQvLyBDcmVhdGUgYSBjb3B5IG9mIHRoZSBkcm9wcGFibGVzIGluIGNhc2UgdGhlIGxpc3QgY2hhbmdlcyBkdXJpbmcgdGhlIGRyb3AgKCM5MTE2KVxuXHRcdCQuZWFjaCggKCAkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzWyBkcmFnZ2FibGUub3B0aW9ucy5zY29wZSBdIHx8IFtdICkuc2xpY2UoKSwgZnVuY3Rpb24oKSB7XG5cblx0XHRcdGlmICggIXRoaXMub3B0aW9ucyApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhdGhpcy5vcHRpb25zLmRpc2FibGVkICYmIHRoaXMudmlzaWJsZSAmJiAkLnVpLmludGVyc2VjdCggZHJhZ2dhYmxlLCB0aGlzLCB0aGlzLm9wdGlvbnMudG9sZXJhbmNlLCBldmVudCApICkge1xuXHRcdFx0XHRkcm9wcGVkID0gdGhpcy5fZHJvcC5jYWxsKCB0aGlzLCBldmVudCApIHx8IGRyb3BwZWQ7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggIXRoaXMub3B0aW9ucy5kaXNhYmxlZCAmJiB0aGlzLnZpc2libGUgJiYgdGhpcy5hY2NlcHQuY2FsbCggdGhpcy5lbGVtZW50WyAwIF0sICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50ICkgKSApIHtcblx0XHRcdFx0dGhpcy5pc291dCA9IHRydWU7XG5cdFx0XHRcdHRoaXMuaXNvdmVyID0gZmFsc2U7XG5cdFx0XHRcdHRoaXMuX2RlYWN0aXZhdGUuY2FsbCggdGhpcywgZXZlbnQgKTtcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcdHJldHVybiBkcm9wcGVkO1xuXG5cdH0sXG5cdGRyYWdTdGFydDogZnVuY3Rpb24oIGRyYWdnYWJsZSwgZXZlbnQgKSB7XG5cdFx0Ly8gTGlzdGVuIGZvciBzY3JvbGxpbmcgc28gdGhhdCBpZiB0aGUgZHJhZ2dpbmcgY2F1c2VzIHNjcm9sbGluZyB0aGUgcG9zaXRpb24gb2YgdGhlIGRyb3BwYWJsZXMgY2FuIGJlIHJlY2FsY3VsYXRlZCAoc2VlICM1MDAzKVxuXHRcdGRyYWdnYWJsZS5lbGVtZW50LnBhcmVudHNVbnRpbCggXCJib2R5XCIgKS5iaW5kKCBcInNjcm9sbC5kcm9wcGFibGVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICFkcmFnZ2FibGUub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zICkge1xuXHRcdFx0XHQkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyggZHJhZ2dhYmxlLCBldmVudCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXHRkcmFnOiBmdW5jdGlvbiggZHJhZ2dhYmxlLCBldmVudCApIHtcblxuXHRcdC8vIElmIHlvdSBoYXZlIGEgaGlnaGx5IGR5bmFtaWMgcGFnZSwgeW91IG1pZ2h0IHRyeSB0aGlzIG9wdGlvbi4gSXQgcmVuZGVycyBwb3NpdGlvbnMgZXZlcnkgdGltZSB5b3UgbW92ZSB0aGUgbW91c2UuXG5cdFx0aWYgKCBkcmFnZ2FibGUub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zICkge1xuXHRcdFx0JC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoIGRyYWdnYWJsZSwgZXZlbnQgKTtcblx0XHR9XG5cblx0XHQvLyBSdW4gdGhyb3VnaCBhbGwgZHJvcHBhYmxlcyBhbmQgY2hlY2sgdGhlaXIgcG9zaXRpb25zIGJhc2VkIG9uIHNwZWNpZmljIHRvbGVyYW5jZSBvcHRpb25zXG5cdFx0JC5lYWNoKCAkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzWyBkcmFnZ2FibGUub3B0aW9ucy5zY29wZSBdIHx8IFtdLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5ncmVlZHlDaGlsZCB8fCAhdGhpcy52aXNpYmxlICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHZhciBwYXJlbnRJbnN0YW5jZSwgc2NvcGUsIHBhcmVudCxcblx0XHRcdFx0aW50ZXJzZWN0cyA9ICQudWkuaW50ZXJzZWN0KCBkcmFnZ2FibGUsIHRoaXMsIHRoaXMub3B0aW9ucy50b2xlcmFuY2UsIGV2ZW50ICksXG5cdFx0XHRcdGMgPSAhaW50ZXJzZWN0cyAmJiB0aGlzLmlzb3ZlciA/IFwiaXNvdXRcIiA6ICggaW50ZXJzZWN0cyAmJiAhdGhpcy5pc292ZXIgPyBcImlzb3ZlclwiIDogbnVsbCApO1xuXHRcdFx0aWYgKCAhYyApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5ncmVlZHkgKSB7XG5cdFx0XHRcdC8vIGZpbmQgZHJvcHBhYmxlIHBhcmVudHMgd2l0aCBzYW1lIHNjb3BlXG5cdFx0XHRcdHNjb3BlID0gdGhpcy5vcHRpb25zLnNjb3BlO1xuXHRcdFx0XHRwYXJlbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50cyggXCI6ZGF0YSh1aS1kcm9wcGFibGUpXCIgKS5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuICQoIHRoaXMgKS5kcm9wcGFibGUoIFwiaW5zdGFuY2VcIiApLm9wdGlvbnMuc2NvcGUgPT09IHNjb3BlO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAoIHBhcmVudC5sZW5ndGggKSB7XG5cdFx0XHRcdFx0cGFyZW50SW5zdGFuY2UgPSAkKCBwYXJlbnRbIDAgXSApLmRyb3BwYWJsZSggXCJpbnN0YW5jZVwiICk7XG5cdFx0XHRcdFx0cGFyZW50SW5zdGFuY2UuZ3JlZWR5Q2hpbGQgPSAoIGMgPT09IFwiaXNvdmVyXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyB3ZSBqdXN0IG1vdmVkIGludG8gYSBncmVlZHkgY2hpbGRcblx0XHRcdGlmICggcGFyZW50SW5zdGFuY2UgJiYgYyA9PT0gXCJpc292ZXJcIiApIHtcblx0XHRcdFx0cGFyZW50SW5zdGFuY2UuaXNvdmVyID0gZmFsc2U7XG5cdFx0XHRcdHBhcmVudEluc3RhbmNlLmlzb3V0ID0gdHJ1ZTtcblx0XHRcdFx0cGFyZW50SW5zdGFuY2UuX291dC5jYWxsKCBwYXJlbnRJbnN0YW5jZSwgZXZlbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpc1sgYyBdID0gdHJ1ZTtcblx0XHRcdHRoaXNbYyA9PT0gXCJpc291dFwiID8gXCJpc292ZXJcIiA6IFwiaXNvdXRcIl0gPSBmYWxzZTtcblx0XHRcdHRoaXNbYyA9PT0gXCJpc292ZXJcIiA/IFwiX292ZXJcIiA6IFwiX291dFwiXS5jYWxsKCB0aGlzLCBldmVudCApO1xuXG5cdFx0XHQvLyB3ZSBqdXN0IG1vdmVkIG91dCBvZiBhIGdyZWVkeSBjaGlsZFxuXHRcdFx0aWYgKCBwYXJlbnRJbnN0YW5jZSAmJiBjID09PSBcImlzb3V0XCIgKSB7XG5cdFx0XHRcdHBhcmVudEluc3RhbmNlLmlzb3V0ID0gZmFsc2U7XG5cdFx0XHRcdHBhcmVudEluc3RhbmNlLmlzb3ZlciA9IHRydWU7XG5cdFx0XHRcdHBhcmVudEluc3RhbmNlLl9vdmVyLmNhbGwoIHBhcmVudEluc3RhbmNlLCBldmVudCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdH0sXG5cdGRyYWdTdG9wOiBmdW5jdGlvbiggZHJhZ2dhYmxlLCBldmVudCApIHtcblx0XHRkcmFnZ2FibGUuZWxlbWVudC5wYXJlbnRzVW50aWwoIFwiYm9keVwiICkudW5iaW5kKCBcInNjcm9sbC5kcm9wcGFibGVcIiApO1xuXHRcdC8vIENhbGwgcHJlcGFyZU9mZnNldHMgb25lIGZpbmFsIHRpbWUgc2luY2UgSUUgZG9lcyBub3QgZmlyZSByZXR1cm4gc2Nyb2xsIGV2ZW50cyB3aGVuIG92ZXJmbG93IHdhcyBjYXVzZWQgYnkgZHJhZyAoc2VlICM1MDAzKVxuXHRcdGlmICggIWRyYWdnYWJsZS5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnMgKSB7XG5cdFx0XHQkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyggZHJhZ2dhYmxlLCBldmVudCApO1xuXHRcdH1cblx0fVxufTtcblxudmFyIGRyb3BwYWJsZSA9ICQudWkuZHJvcHBhYmxlO1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIEVmZmVjdHMgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9jYXRlZ29yeS9lZmZlY3RzLWNvcmUvXG4gKi9cblxuXG52YXIgZGF0YVNwYWNlID0gXCJ1aS1lZmZlY3RzLVwiLFxuXG5cdC8vIENyZWF0ZSBhIGxvY2FsIGpRdWVyeSBiZWNhdXNlIGpRdWVyeSBDb2xvciByZWxpZXMgb24gaXQgYW5kIHRoZVxuXHQvLyBnbG9iYWwgbWF5IG5vdCBleGlzdCB3aXRoIEFNRCBhbmQgYSBjdXN0b20gYnVpbGQgKCMxMDE5OSlcblx0alF1ZXJ5ID0gJDtcblxuJC5lZmZlY3RzID0ge1xuXHRlZmZlY3Q6IHt9XG59O1xuXG4vKiFcbiAqIGpRdWVyeSBDb2xvciBBbmltYXRpb25zIHYyLjEuMlxuICogaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktY29sb3JcbiAqXG4gKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogV2VkIEphbiAxNiAwODo0NzowOSAyMDEzIC0wNjAwXG4gKi9cbihmdW5jdGlvbiggalF1ZXJ5LCB1bmRlZmluZWQgKSB7XG5cblx0dmFyIHN0ZXBIb29rcyA9IFwiYmFja2dyb3VuZENvbG9yIGJvcmRlckJvdHRvbUNvbG9yIGJvcmRlckxlZnRDb2xvciBib3JkZXJSaWdodENvbG9yIGJvcmRlclRvcENvbG9yIGNvbG9yIGNvbHVtblJ1bGVDb2xvciBvdXRsaW5lQ29sb3IgdGV4dERlY29yYXRpb25Db2xvciB0ZXh0RW1waGFzaXNDb2xvclwiLFxuXG5cdC8vIHBsdXNlcXVhbHMgdGVzdCBmb3IgKz0gMTAwIC09IDEwMFxuXHRycGx1c2VxdWFscyA9IC9eKFtcXC0rXSk9XFxzKihcXGQrXFwuP1xcZCopLyxcblx0Ly8gYSBzZXQgb2YgUkUncyB0aGF0IGNhbiBtYXRjaCBzdHJpbmdzIGFuZCBnZW5lcmF0ZSBjb2xvciB0dXBsZXMuXG5cdHN0cmluZ1BhcnNlcnMgPSBbIHtcblx0XHRcdHJlOiAvcmdiYT9cXChcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKig/OixcXHMqKFxcZD8oPzpcXC5cXGQrKT8pXFxzKik/XFwpLyxcblx0XHRcdHBhcnNlOiBmdW5jdGlvbiggZXhlY1Jlc3VsdCApIHtcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRleGVjUmVzdWx0WyAxIF0sXG5cdFx0XHRcdFx0ZXhlY1Jlc3VsdFsgMiBdLFxuXHRcdFx0XHRcdGV4ZWNSZXN1bHRbIDMgXSxcblx0XHRcdFx0XHRleGVjUmVzdWx0WyA0IF1cblx0XHRcdFx0XTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRyZTogL3JnYmE/XFwoXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyooPzosXFxzKihcXGQ/KD86XFwuXFxkKyk/KVxccyopP1xcKS8sXG5cdFx0XHRwYXJzZTogZnVuY3Rpb24oIGV4ZWNSZXN1bHQgKSB7XG5cdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0ZXhlY1Jlc3VsdFsgMSBdICogMi41NSxcblx0XHRcdFx0XHRleGVjUmVzdWx0WyAyIF0gKiAyLjU1LFxuXHRcdFx0XHRcdGV4ZWNSZXN1bHRbIDMgXSAqIDIuNTUsXG5cdFx0XHRcdFx0ZXhlY1Jlc3VsdFsgNCBdXG5cdFx0XHRcdF07XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0Ly8gdGhpcyByZWdleCBpZ25vcmVzIEEtRiBiZWNhdXNlIGl0J3MgY29tcGFyZWQgYWdhaW5zdCBhbiBhbHJlYWR5IGxvd2VyY2FzZWQgc3RyaW5nXG5cdFx0XHRyZTogLyMoW2EtZjAtOV17Mn0pKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkvLFxuXHRcdFx0cGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkge1xuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdHBhcnNlSW50KCBleGVjUmVzdWx0WyAxIF0sIDE2ICksXG5cdFx0XHRcdFx0cGFyc2VJbnQoIGV4ZWNSZXN1bHRbIDIgXSwgMTYgKSxcblx0XHRcdFx0XHRwYXJzZUludCggZXhlY1Jlc3VsdFsgMyBdLCAxNiApXG5cdFx0XHRcdF07XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0Ly8gdGhpcyByZWdleCBpZ25vcmVzIEEtRiBiZWNhdXNlIGl0J3MgY29tcGFyZWQgYWdhaW5zdCBhbiBhbHJlYWR5IGxvd2VyY2FzZWQgc3RyaW5nXG5cdFx0XHRyZTogLyMoW2EtZjAtOV0pKFthLWYwLTldKShbYS1mMC05XSkvLFxuXHRcdFx0cGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkge1xuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdHBhcnNlSW50KCBleGVjUmVzdWx0WyAxIF0gKyBleGVjUmVzdWx0WyAxIF0sIDE2ICksXG5cdFx0XHRcdFx0cGFyc2VJbnQoIGV4ZWNSZXN1bHRbIDIgXSArIGV4ZWNSZXN1bHRbIDIgXSwgMTYgKSxcblx0XHRcdFx0XHRwYXJzZUludCggZXhlY1Jlc3VsdFsgMyBdICsgZXhlY1Jlc3VsdFsgMyBdLCAxNiApXG5cdFx0XHRcdF07XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0cmU6IC9oc2xhP1xcKFxccyooXFxkKyg/OlxcLlxcZCspPylcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqKD86LFxccyooXFxkPyg/OlxcLlxcZCspPylcXHMqKT9cXCkvLFxuXHRcdFx0c3BhY2U6IFwiaHNsYVwiLFxuXHRcdFx0cGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkge1xuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdGV4ZWNSZXN1bHRbIDEgXSxcblx0XHRcdFx0XHRleGVjUmVzdWx0WyAyIF0gLyAxMDAsXG5cdFx0XHRcdFx0ZXhlY1Jlc3VsdFsgMyBdIC8gMTAwLFxuXHRcdFx0XHRcdGV4ZWNSZXN1bHRbIDQgXVxuXHRcdFx0XHRdO1xuXHRcdFx0fVxuXHRcdH0gXSxcblxuXHQvLyBqUXVlcnkuQ29sb3IoIClcblx0Y29sb3IgPSBqUXVlcnkuQ29sb3IgPSBmdW5jdGlvbiggY29sb3IsIGdyZWVuLCBibHVlLCBhbHBoYSApIHtcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5Db2xvci5mbi5wYXJzZSggY29sb3IsIGdyZWVuLCBibHVlLCBhbHBoYSApO1xuXHR9LFxuXHRzcGFjZXMgPSB7XG5cdFx0cmdiYToge1xuXHRcdFx0cHJvcHM6IHtcblx0XHRcdFx0cmVkOiB7XG5cdFx0XHRcdFx0aWR4OiAwLFxuXHRcdFx0XHRcdHR5cGU6IFwiYnl0ZVwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGdyZWVuOiB7XG5cdFx0XHRcdFx0aWR4OiAxLFxuXHRcdFx0XHRcdHR5cGU6IFwiYnl0ZVwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJsdWU6IHtcblx0XHRcdFx0XHRpZHg6IDIsXG5cdFx0XHRcdFx0dHlwZTogXCJieXRlXCJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRoc2xhOiB7XG5cdFx0XHRwcm9wczoge1xuXHRcdFx0XHRodWU6IHtcblx0XHRcdFx0XHRpZHg6IDAsXG5cdFx0XHRcdFx0dHlwZTogXCJkZWdyZWVzXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0c2F0dXJhdGlvbjoge1xuXHRcdFx0XHRcdGlkeDogMSxcblx0XHRcdFx0XHR0eXBlOiBcInBlcmNlbnRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRsaWdodG5lc3M6IHtcblx0XHRcdFx0XHRpZHg6IDIsXG5cdFx0XHRcdFx0dHlwZTogXCJwZXJjZW50XCJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0cHJvcFR5cGVzID0ge1xuXHRcdFwiYnl0ZVwiOiB7XG5cdFx0XHRmbG9vcjogdHJ1ZSxcblx0XHRcdG1heDogMjU1XG5cdFx0fSxcblx0XHRcInBlcmNlbnRcIjoge1xuXHRcdFx0bWF4OiAxXG5cdFx0fSxcblx0XHRcImRlZ3JlZXNcIjoge1xuXHRcdFx0bW9kOiAzNjAsXG5cdFx0XHRmbG9vcjogdHJ1ZVxuXHRcdH1cblx0fSxcblx0c3VwcG9ydCA9IGNvbG9yLnN1cHBvcnQgPSB7fSxcblxuXHQvLyBlbGVtZW50IGZvciBzdXBwb3J0IHRlc3RzXG5cdHN1cHBvcnRFbGVtID0galF1ZXJ5KCBcIjxwPlwiIClbIDAgXSxcblxuXHQvLyBjb2xvcnMgPSBqUXVlcnkuQ29sb3IubmFtZXNcblx0Y29sb3JzLFxuXG5cdC8vIGxvY2FsIGFsaWFzZXMgb2YgZnVuY3Rpb25zIGNhbGxlZCBvZnRlblxuXHRlYWNoID0galF1ZXJ5LmVhY2g7XG5cbi8vIGRldGVybWluZSByZ2JhIHN1cHBvcnQgaW1tZWRpYXRlbHlcbnN1cHBvcnRFbGVtLnN0eWxlLmNzc1RleHQgPSBcImJhY2tncm91bmQtY29sb3I6cmdiYSgxLDEsMSwuNSlcIjtcbnN1cHBvcnQucmdiYSA9IHN1cHBvcnRFbGVtLnN0eWxlLmJhY2tncm91bmRDb2xvci5pbmRleE9mKCBcInJnYmFcIiApID4gLTE7XG5cbi8vIGRlZmluZSBjYWNoZSBuYW1lIGFuZCBhbHBoYSBwcm9wZXJ0aWVzXG4vLyBmb3IgcmdiYSBhbmQgaHNsYSBzcGFjZXNcbmVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7XG5cdHNwYWNlLmNhY2hlID0gXCJfXCIgKyBzcGFjZU5hbWU7XG5cdHNwYWNlLnByb3BzLmFscGhhID0ge1xuXHRcdGlkeDogMyxcblx0XHR0eXBlOiBcInBlcmNlbnRcIixcblx0XHRkZWY6IDFcblx0fTtcbn0pO1xuXG5mdW5jdGlvbiBjbGFtcCggdmFsdWUsIHByb3AsIGFsbG93RW1wdHkgKSB7XG5cdHZhciB0eXBlID0gcHJvcFR5cGVzWyBwcm9wLnR5cGUgXSB8fCB7fTtcblxuXHRpZiAoIHZhbHVlID09IG51bGwgKSB7XG5cdFx0cmV0dXJuIChhbGxvd0VtcHR5IHx8ICFwcm9wLmRlZikgPyBudWxsIDogcHJvcC5kZWY7XG5cdH1cblxuXHQvLyB+fiBpcyBhbiBzaG9ydCB3YXkgb2YgZG9pbmcgZmxvb3IgZm9yIHBvc2l0aXZlIG51bWJlcnNcblx0dmFsdWUgPSB0eXBlLmZsb29yID8gfn52YWx1ZSA6IHBhcnNlRmxvYXQoIHZhbHVlICk7XG5cblx0Ly8gSUUgd2lsbCBwYXNzIGluIGVtcHR5IHN0cmluZ3MgYXMgdmFsdWUgZm9yIGFscGhhLFxuXHQvLyB3aGljaCB3aWxsIGhpdCB0aGlzIGNhc2Vcblx0aWYgKCBpc05hTiggdmFsdWUgKSApIHtcblx0XHRyZXR1cm4gcHJvcC5kZWY7XG5cdH1cblxuXHRpZiAoIHR5cGUubW9kICkge1xuXHRcdC8vIHdlIGFkZCBtb2QgYmVmb3JlIG1vZGRpbmcgdG8gbWFrZSBzdXJlIHRoYXQgbmVnYXRpdmVzIHZhbHVlc1xuXHRcdC8vIGdldCBjb252ZXJ0ZWQgcHJvcGVybHk6IC0xMCAtPiAzNTBcblx0XHRyZXR1cm4gKHZhbHVlICsgdHlwZS5tb2QpICUgdHlwZS5tb2Q7XG5cdH1cblxuXHQvLyBmb3Igbm93IGFsbCBwcm9wZXJ0eSB0eXBlcyB3aXRob3V0IG1vZCBoYXZlIG1pbiBhbmQgbWF4XG5cdHJldHVybiAwID4gdmFsdWUgPyAwIDogdHlwZS5tYXggPCB2YWx1ZSA/IHR5cGUubWF4IDogdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ1BhcnNlKCBzdHJpbmcgKSB7XG5cdHZhciBpbnN0ID0gY29sb3IoKSxcblx0XHRyZ2JhID0gaW5zdC5fcmdiYSA9IFtdO1xuXG5cdHN0cmluZyA9IHN0cmluZy50b0xvd2VyQ2FzZSgpO1xuXG5cdGVhY2goIHN0cmluZ1BhcnNlcnMsIGZ1bmN0aW9uKCBpLCBwYXJzZXIgKSB7XG5cdFx0dmFyIHBhcnNlZCxcblx0XHRcdG1hdGNoID0gcGFyc2VyLnJlLmV4ZWMoIHN0cmluZyApLFxuXHRcdFx0dmFsdWVzID0gbWF0Y2ggJiYgcGFyc2VyLnBhcnNlKCBtYXRjaCApLFxuXHRcdFx0c3BhY2VOYW1lID0gcGFyc2VyLnNwYWNlIHx8IFwicmdiYVwiO1xuXG5cdFx0aWYgKCB2YWx1ZXMgKSB7XG5cdFx0XHRwYXJzZWQgPSBpbnN0WyBzcGFjZU5hbWUgXSggdmFsdWVzICk7XG5cblx0XHRcdC8vIGlmIHRoaXMgd2FzIGFuIHJnYmEgcGFyc2UgdGhlIGFzc2lnbm1lbnQgbWlnaHQgaGFwcGVuIHR3aWNlXG5cdFx0XHQvLyBvaCB3ZWxsLi4uLlxuXHRcdFx0aW5zdFsgc3BhY2VzWyBzcGFjZU5hbWUgXS5jYWNoZSBdID0gcGFyc2VkWyBzcGFjZXNbIHNwYWNlTmFtZSBdLmNhY2hlIF07XG5cdFx0XHRyZ2JhID0gaW5zdC5fcmdiYSA9IHBhcnNlZC5fcmdiYTtcblxuXHRcdFx0Ly8gZXhpdCBlYWNoKCBzdHJpbmdQYXJzZXJzICkgaGVyZSBiZWNhdXNlIHdlIG1hdGNoZWRcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIEZvdW5kIGEgc3RyaW5nUGFyc2VyIHRoYXQgaGFuZGxlZCBpdFxuXHRpZiAoIHJnYmEubGVuZ3RoICkge1xuXG5cdFx0Ly8gaWYgdGhpcyBjYW1lIGZyb20gYSBwYXJzZWQgc3RyaW5nLCBmb3JjZSBcInRyYW5zcGFyZW50XCIgd2hlbiBhbHBoYSBpcyAwXG5cdFx0Ly8gY2hyb21lLCAoYW5kIG1heWJlIG90aGVycykgcmV0dXJuIFwidHJhbnNwYXJlbnRcIiBhcyByZ2JhKDAsMCwwLDApXG5cdFx0aWYgKCByZ2JhLmpvaW4oKSA9PT0gXCIwLDAsMCwwXCIgKSB7XG5cdFx0XHRqUXVlcnkuZXh0ZW5kKCByZ2JhLCBjb2xvcnMudHJhbnNwYXJlbnQgKTtcblx0XHR9XG5cdFx0cmV0dXJuIGluc3Q7XG5cdH1cblxuXHQvLyBuYW1lZCBjb2xvcnNcblx0cmV0dXJuIGNvbG9yc1sgc3RyaW5nIF07XG59XG5cbmNvbG9yLmZuID0galF1ZXJ5LmV4dGVuZCggY29sb3IucHJvdG90eXBlLCB7XG5cdHBhcnNlOiBmdW5jdGlvbiggcmVkLCBncmVlbiwgYmx1ZSwgYWxwaGEgKSB7XG5cdFx0aWYgKCByZWQgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHRoaXMuX3JnYmEgPSBbIG51bGwsIG51bGwsIG51bGwsIG51bGwgXTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHJlZC5qcXVlcnkgfHwgcmVkLm5vZGVUeXBlICkge1xuXHRcdFx0cmVkID0galF1ZXJ5KCByZWQgKS5jc3MoIGdyZWVuICk7XG5cdFx0XHRncmVlbiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHR2YXIgaW5zdCA9IHRoaXMsXG5cdFx0XHR0eXBlID0galF1ZXJ5LnR5cGUoIHJlZCApLFxuXHRcdFx0cmdiYSA9IHRoaXMuX3JnYmEgPSBbXTtcblxuXHRcdC8vIG1vcmUgdGhhbiAxIGFyZ3VtZW50IHNwZWNpZmllZCAtIGFzc3VtZSAoIHJlZCwgZ3JlZW4sIGJsdWUsIGFscGhhIClcblx0XHRpZiAoIGdyZWVuICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRyZWQgPSBbIHJlZCwgZ3JlZW4sIGJsdWUsIGFscGhhIF07XG5cdFx0XHR0eXBlID0gXCJhcnJheVwiO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLnBhcnNlKCBzdHJpbmdQYXJzZSggcmVkICkgfHwgY29sb3JzLl9kZWZhdWx0ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlID09PSBcImFycmF5XCIgKSB7XG5cdFx0XHRlYWNoKCBzcGFjZXMucmdiYS5wcm9wcywgZnVuY3Rpb24oIGtleSwgcHJvcCApIHtcblx0XHRcdFx0cmdiYVsgcHJvcC5pZHggXSA9IGNsYW1wKCByZWRbIHByb3AuaWR4IF0sIHByb3AgKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0aWYgKCByZWQgaW5zdGFuY2VvZiBjb2xvciApIHtcblx0XHRcdFx0ZWFjaCggc3BhY2VzLCBmdW5jdGlvbiggc3BhY2VOYW1lLCBzcGFjZSApIHtcblx0XHRcdFx0XHRpZiAoIHJlZFsgc3BhY2UuY2FjaGUgXSApIHtcblx0XHRcdFx0XHRcdGluc3RbIHNwYWNlLmNhY2hlIF0gPSByZWRbIHNwYWNlLmNhY2hlIF0uc2xpY2UoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWFjaCggc3BhY2VzLCBmdW5jdGlvbiggc3BhY2VOYW1lLCBzcGFjZSApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUgPSBzcGFjZS5jYWNoZTtcblx0XHRcdFx0XHRlYWNoKCBzcGFjZS5wcm9wcywgZnVuY3Rpb24oIGtleSwgcHJvcCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gaWYgdGhlIGNhY2hlIGRvZXNuJ3QgZXhpc3QsIGFuZCB3ZSBrbm93IGhvdyB0byBjb252ZXJ0XG5cdFx0XHRcdFx0XHRpZiAoICFpbnN0WyBjYWNoZSBdICYmIHNwYWNlLnRvICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSB2YWx1ZSB3YXMgbnVsbCwgd2UgZG9uJ3QgbmVlZCB0byBjb3B5IGl0XG5cdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSBrZXkgd2FzIGFscGhhLCB3ZSBkb24ndCBuZWVkIHRvIGNvcHkgaXQgZWl0aGVyXG5cdFx0XHRcdFx0XHRcdGlmICgga2V5ID09PSBcImFscGhhXCIgfHwgcmVkWyBrZXkgXSA9PSBudWxsICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpbnN0WyBjYWNoZSBdID0gc3BhY2UudG8oIGluc3QuX3JnYmEgKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gdGhpcyBpcyB0aGUgb25seSBjYXNlIHdoZXJlIHdlIGFsbG93IG51bGxzIGZvciBBTEwgcHJvcGVydGllcy5cblx0XHRcdFx0XHRcdC8vIGNhbGwgY2xhbXAgd2l0aCBhbHdheXNBbGxvd0VtcHR5XG5cdFx0XHRcdFx0XHRpbnN0WyBjYWNoZSBdWyBwcm9wLmlkeCBdID0gY2xhbXAoIHJlZFsga2V5IF0sIHByb3AsIHRydWUgKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIGV2ZXJ5dGhpbmcgZGVmaW5lZCBidXQgYWxwaGE/XG5cdFx0XHRcdFx0aWYgKCBpbnN0WyBjYWNoZSBdICYmIGpRdWVyeS5pbkFycmF5KCBudWxsLCBpbnN0WyBjYWNoZSBdLnNsaWNlKCAwLCAzICkgKSA8IDAgKSB7XG5cdFx0XHRcdFx0XHQvLyB1c2UgdGhlIGRlZmF1bHQgb2YgMVxuXHRcdFx0XHRcdFx0aW5zdFsgY2FjaGUgXVsgMyBdID0gMTtcblx0XHRcdFx0XHRcdGlmICggc3BhY2UuZnJvbSApIHtcblx0XHRcdFx0XHRcdFx0aW5zdC5fcmdiYSA9IHNwYWNlLmZyb20oIGluc3RbIGNhY2hlIF0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHR9LFxuXHRpczogZnVuY3Rpb24oIGNvbXBhcmUgKSB7XG5cdFx0dmFyIGlzID0gY29sb3IoIGNvbXBhcmUgKSxcblx0XHRcdHNhbWUgPSB0cnVlLFxuXHRcdFx0aW5zdCA9IHRoaXM7XG5cblx0XHRlYWNoKCBzcGFjZXMsIGZ1bmN0aW9uKCBfLCBzcGFjZSApIHtcblx0XHRcdHZhciBsb2NhbENhY2hlLFxuXHRcdFx0XHRpc0NhY2hlID0gaXNbIHNwYWNlLmNhY2hlIF07XG5cdFx0XHRpZiAoaXNDYWNoZSkge1xuXHRcdFx0XHRsb2NhbENhY2hlID0gaW5zdFsgc3BhY2UuY2FjaGUgXSB8fCBzcGFjZS50byAmJiBzcGFjZS50byggaW5zdC5fcmdiYSApIHx8IFtdO1xuXHRcdFx0XHRlYWNoKCBzcGFjZS5wcm9wcywgZnVuY3Rpb24oIF8sIHByb3AgKSB7XG5cdFx0XHRcdFx0aWYgKCBpc0NhY2hlWyBwcm9wLmlkeCBdICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRzYW1lID0gKCBpc0NhY2hlWyBwcm9wLmlkeCBdID09PSBsb2NhbENhY2hlWyBwcm9wLmlkeCBdICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gc2FtZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHNhbWU7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHNhbWU7XG5cdH0sXG5cdF9zcGFjZTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVzZWQgPSBbXSxcblx0XHRcdGluc3QgPSB0aGlzO1xuXHRcdGVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7XG5cdFx0XHRpZiAoIGluc3RbIHNwYWNlLmNhY2hlIF0gKSB7XG5cdFx0XHRcdHVzZWQucHVzaCggc3BhY2VOYW1lICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHVzZWQucG9wKCk7XG5cdH0sXG5cdHRyYW5zaXRpb246IGZ1bmN0aW9uKCBvdGhlciwgZGlzdGFuY2UgKSB7XG5cdFx0dmFyIGVuZCA9IGNvbG9yKCBvdGhlciApLFxuXHRcdFx0c3BhY2VOYW1lID0gZW5kLl9zcGFjZSgpLFxuXHRcdFx0c3BhY2UgPSBzcGFjZXNbIHNwYWNlTmFtZSBdLFxuXHRcdFx0c3RhcnRDb2xvciA9IHRoaXMuYWxwaGEoKSA9PT0gMCA/IGNvbG9yKCBcInRyYW5zcGFyZW50XCIgKSA6IHRoaXMsXG5cdFx0XHRzdGFydCA9IHN0YXJ0Q29sb3JbIHNwYWNlLmNhY2hlIF0gfHwgc3BhY2UudG8oIHN0YXJ0Q29sb3IuX3JnYmEgKSxcblx0XHRcdHJlc3VsdCA9IHN0YXJ0LnNsaWNlKCk7XG5cblx0XHRlbmQgPSBlbmRbIHNwYWNlLmNhY2hlIF07XG5cdFx0ZWFjaCggc3BhY2UucHJvcHMsIGZ1bmN0aW9uKCBrZXksIHByb3AgKSB7XG5cdFx0XHR2YXIgaW5kZXggPSBwcm9wLmlkeCxcblx0XHRcdFx0c3RhcnRWYWx1ZSA9IHN0YXJ0WyBpbmRleCBdLFxuXHRcdFx0XHRlbmRWYWx1ZSA9IGVuZFsgaW5kZXggXSxcblx0XHRcdFx0dHlwZSA9IHByb3BUeXBlc1sgcHJvcC50eXBlIF0gfHwge307XG5cblx0XHRcdC8vIGlmIG51bGwsIGRvbid0IG92ZXJyaWRlIHN0YXJ0IHZhbHVlXG5cdFx0XHRpZiAoIGVuZFZhbHVlID09PSBudWxsICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyBpZiBudWxsIC0gdXNlIGVuZFxuXHRcdFx0aWYgKCBzdGFydFZhbHVlID09PSBudWxsICkge1xuXHRcdFx0XHRyZXN1bHRbIGluZGV4IF0gPSBlbmRWYWx1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICggdHlwZS5tb2QgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbmRWYWx1ZSAtIHN0YXJ0VmFsdWUgPiB0eXBlLm1vZCAvIDIgKSB7XG5cdFx0XHRcdFx0XHRzdGFydFZhbHVlICs9IHR5cGUubW9kO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHN0YXJ0VmFsdWUgLSBlbmRWYWx1ZSA+IHR5cGUubW9kIC8gMiApIHtcblx0XHRcdFx0XHRcdHN0YXJ0VmFsdWUgLT0gdHlwZS5tb2Q7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJlc3VsdFsgaW5kZXggXSA9IGNsYW1wKCAoIGVuZFZhbHVlIC0gc3RhcnRWYWx1ZSApICogZGlzdGFuY2UgKyBzdGFydFZhbHVlLCBwcm9wICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHRoaXNbIHNwYWNlTmFtZSBdKCByZXN1bHQgKTtcblx0fSxcblx0YmxlbmQ6IGZ1bmN0aW9uKCBvcGFxdWUgKSB7XG5cdFx0Ly8gaWYgd2UgYXJlIGFscmVhZHkgb3BhcXVlIC0gcmV0dXJuIG91cnNlbGZcblx0XHRpZiAoIHRoaXMuX3JnYmFbIDMgXSA9PT0gMSApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdHZhciByZ2IgPSB0aGlzLl9yZ2JhLnNsaWNlKCksXG5cdFx0XHRhID0gcmdiLnBvcCgpLFxuXHRcdFx0YmxlbmQgPSBjb2xvciggb3BhcXVlICkuX3JnYmE7XG5cblx0XHRyZXR1cm4gY29sb3IoIGpRdWVyeS5tYXAoIHJnYiwgZnVuY3Rpb24oIHYsIGkgKSB7XG5cdFx0XHRyZXR1cm4gKCAxIC0gYSApICogYmxlbmRbIGkgXSArIGEgKiB2O1xuXHRcdH0pKTtcblx0fSxcblx0dG9SZ2JhU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJlZml4ID0gXCJyZ2JhKFwiLFxuXHRcdFx0cmdiYSA9IGpRdWVyeS5tYXAoIHRoaXMuX3JnYmEsIGZ1bmN0aW9uKCB2LCBpICkge1xuXHRcdFx0XHRyZXR1cm4gdiA9PSBudWxsID8gKCBpID4gMiA/IDEgOiAwICkgOiB2O1xuXHRcdFx0fSk7XG5cblx0XHRpZiAoIHJnYmFbIDMgXSA9PT0gMSApIHtcblx0XHRcdHJnYmEucG9wKCk7XG5cdFx0XHRwcmVmaXggPSBcInJnYihcIjtcblx0XHR9XG5cblx0XHRyZXR1cm4gcHJlZml4ICsgcmdiYS5qb2luKCkgKyBcIilcIjtcblx0fSxcblx0dG9Ic2xhU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJlZml4ID0gXCJoc2xhKFwiLFxuXHRcdFx0aHNsYSA9IGpRdWVyeS5tYXAoIHRoaXMuaHNsYSgpLCBmdW5jdGlvbiggdiwgaSApIHtcblx0XHRcdFx0aWYgKCB2ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0diA9IGkgPiAyID8gMSA6IDA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBjYXRjaCAxIGFuZCAyXG5cdFx0XHRcdGlmICggaSAmJiBpIDwgMyApIHtcblx0XHRcdFx0XHR2ID0gTWF0aC5yb3VuZCggdiAqIDEwMCApICsgXCIlXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHY7XG5cdFx0XHR9KTtcblxuXHRcdGlmICggaHNsYVsgMyBdID09PSAxICkge1xuXHRcdFx0aHNsYS5wb3AoKTtcblx0XHRcdHByZWZpeCA9IFwiaHNsKFwiO1xuXHRcdH1cblx0XHRyZXR1cm4gcHJlZml4ICsgaHNsYS5qb2luKCkgKyBcIilcIjtcblx0fSxcblx0dG9IZXhTdHJpbmc6IGZ1bmN0aW9uKCBpbmNsdWRlQWxwaGEgKSB7XG5cdFx0dmFyIHJnYmEgPSB0aGlzLl9yZ2JhLnNsaWNlKCksXG5cdFx0XHRhbHBoYSA9IHJnYmEucG9wKCk7XG5cblx0XHRpZiAoIGluY2x1ZGVBbHBoYSApIHtcblx0XHRcdHJnYmEucHVzaCggfn4oIGFscGhhICogMjU1ICkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gXCIjXCIgKyBqUXVlcnkubWFwKCByZ2JhLCBmdW5jdGlvbiggdiApIHtcblxuXHRcdFx0Ly8gZGVmYXVsdCB0byAwIHdoZW4gbnVsbHMgZXhpc3Rcblx0XHRcdHYgPSAoIHYgfHwgMCApLnRvU3RyaW5nKCAxNiApO1xuXHRcdFx0cmV0dXJuIHYubGVuZ3RoID09PSAxID8gXCIwXCIgKyB2IDogdjtcblx0XHR9KS5qb2luKFwiXCIpO1xuXHR9LFxuXHR0b1N0cmluZzogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3JnYmFbIDMgXSA9PT0gMCA/IFwidHJhbnNwYXJlbnRcIiA6IHRoaXMudG9SZ2JhU3RyaW5nKCk7XG5cdH1cbn0pO1xuY29sb3IuZm4ucGFyc2UucHJvdG90eXBlID0gY29sb3IuZm47XG5cbi8vIGhzbGEgY29udmVyc2lvbnMgYWRhcHRlZCBmcm9tOlxuLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9tYWFzaGFhY2svc291cmNlL2Jyb3dzZS9wYWNrYWdlcy9ncmFwaGljcy90cnVuay9zcmMvZ3JhcGhpY3MvY29sb3JzL0hVRTJSR0IuYXM/cj01MDIxXG5cbmZ1bmN0aW9uIGh1ZTJyZ2IoIHAsIHEsIGggKSB7XG5cdGggPSAoIGggKyAxICkgJSAxO1xuXHRpZiAoIGggKiA2IDwgMSApIHtcblx0XHRyZXR1cm4gcCArICggcSAtIHAgKSAqIGggKiA2O1xuXHR9XG5cdGlmICggaCAqIDIgPCAxKSB7XG5cdFx0cmV0dXJuIHE7XG5cdH1cblx0aWYgKCBoICogMyA8IDIgKSB7XG5cdFx0cmV0dXJuIHAgKyAoIHEgLSBwICkgKiAoICggMiAvIDMgKSAtIGggKSAqIDY7XG5cdH1cblx0cmV0dXJuIHA7XG59XG5cbnNwYWNlcy5oc2xhLnRvID0gZnVuY3Rpb24oIHJnYmEgKSB7XG5cdGlmICggcmdiYVsgMCBdID09IG51bGwgfHwgcmdiYVsgMSBdID09IG51bGwgfHwgcmdiYVsgMiBdID09IG51bGwgKSB7XG5cdFx0cmV0dXJuIFsgbnVsbCwgbnVsbCwgbnVsbCwgcmdiYVsgMyBdIF07XG5cdH1cblx0dmFyIHIgPSByZ2JhWyAwIF0gLyAyNTUsXG5cdFx0ZyA9IHJnYmFbIDEgXSAvIDI1NSxcblx0XHRiID0gcmdiYVsgMiBdIC8gMjU1LFxuXHRcdGEgPSByZ2JhWyAzIF0sXG5cdFx0bWF4ID0gTWF0aC5tYXgoIHIsIGcsIGIgKSxcblx0XHRtaW4gPSBNYXRoLm1pbiggciwgZywgYiApLFxuXHRcdGRpZmYgPSBtYXggLSBtaW4sXG5cdFx0YWRkID0gbWF4ICsgbWluLFxuXHRcdGwgPSBhZGQgKiAwLjUsXG5cdFx0aCwgcztcblxuXHRpZiAoIG1pbiA9PT0gbWF4ICkge1xuXHRcdGggPSAwO1xuXHR9IGVsc2UgaWYgKCByID09PSBtYXggKSB7XG5cdFx0aCA9ICggNjAgKiAoIGcgLSBiICkgLyBkaWZmICkgKyAzNjA7XG5cdH0gZWxzZSBpZiAoIGcgPT09IG1heCApIHtcblx0XHRoID0gKCA2MCAqICggYiAtIHIgKSAvIGRpZmYgKSArIDEyMDtcblx0fSBlbHNlIHtcblx0XHRoID0gKCA2MCAqICggciAtIGcgKSAvIGRpZmYgKSArIDI0MDtcblx0fVxuXG5cdC8vIGNocm9tYSAoZGlmZikgPT0gMCBtZWFucyBncmV5c2NhbGUgd2hpY2gsIGJ5IGRlZmluaXRpb24sIHNhdHVyYXRpb24gPSAwJVxuXHQvLyBvdGhlcndpc2UsIHNhdHVyYXRpb24gaXMgYmFzZWQgb24gdGhlIHJhdGlvIG9mIGNocm9tYSAoZGlmZikgdG8gbGlnaHRuZXNzIChhZGQpXG5cdGlmICggZGlmZiA9PT0gMCApIHtcblx0XHRzID0gMDtcblx0fSBlbHNlIGlmICggbCA8PSAwLjUgKSB7XG5cdFx0cyA9IGRpZmYgLyBhZGQ7XG5cdH0gZWxzZSB7XG5cdFx0cyA9IGRpZmYgLyAoIDIgLSBhZGQgKTtcblx0fVxuXHRyZXR1cm4gWyBNYXRoLnJvdW5kKGgpICUgMzYwLCBzLCBsLCBhID09IG51bGwgPyAxIDogYSBdO1xufTtcblxuc3BhY2VzLmhzbGEuZnJvbSA9IGZ1bmN0aW9uKCBoc2xhICkge1xuXHRpZiAoIGhzbGFbIDAgXSA9PSBudWxsIHx8IGhzbGFbIDEgXSA9PSBudWxsIHx8IGhzbGFbIDIgXSA9PSBudWxsICkge1xuXHRcdHJldHVybiBbIG51bGwsIG51bGwsIG51bGwsIGhzbGFbIDMgXSBdO1xuXHR9XG5cdHZhciBoID0gaHNsYVsgMCBdIC8gMzYwLFxuXHRcdHMgPSBoc2xhWyAxIF0sXG5cdFx0bCA9IGhzbGFbIDIgXSxcblx0XHRhID0gaHNsYVsgMyBdLFxuXHRcdHEgPSBsIDw9IDAuNSA/IGwgKiAoIDEgKyBzICkgOiBsICsgcyAtIGwgKiBzLFxuXHRcdHAgPSAyICogbCAtIHE7XG5cblx0cmV0dXJuIFtcblx0XHRNYXRoLnJvdW5kKCBodWUycmdiKCBwLCBxLCBoICsgKCAxIC8gMyApICkgKiAyNTUgKSxcblx0XHRNYXRoLnJvdW5kKCBodWUycmdiKCBwLCBxLCBoICkgKiAyNTUgKSxcblx0XHRNYXRoLnJvdW5kKCBodWUycmdiKCBwLCBxLCBoIC0gKCAxIC8gMyApICkgKiAyNTUgKSxcblx0XHRhXG5cdF07XG59O1xuXG5lYWNoKCBzcGFjZXMsIGZ1bmN0aW9uKCBzcGFjZU5hbWUsIHNwYWNlICkge1xuXHR2YXIgcHJvcHMgPSBzcGFjZS5wcm9wcyxcblx0XHRjYWNoZSA9IHNwYWNlLmNhY2hlLFxuXHRcdHRvID0gc3BhY2UudG8sXG5cdFx0ZnJvbSA9IHNwYWNlLmZyb207XG5cblx0Ly8gbWFrZXMgcmdiYSgpIGFuZCBoc2xhKClcblx0Y29sb3IuZm5bIHNwYWNlTmFtZSBdID0gZnVuY3Rpb24oIHZhbHVlICkge1xuXG5cdFx0Ly8gZ2VuZXJhdGUgYSBjYWNoZSBmb3IgdGhpcyBzcGFjZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG5cdFx0aWYgKCB0byAmJiAhdGhpc1sgY2FjaGUgXSApIHtcblx0XHRcdHRoaXNbIGNhY2hlIF0gPSB0byggdGhpcy5fcmdiYSApO1xuXHRcdH1cblx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm4gdGhpc1sgY2FjaGUgXS5zbGljZSgpO1xuXHRcdH1cblxuXHRcdHZhciByZXQsXG5cdFx0XHR0eXBlID0galF1ZXJ5LnR5cGUoIHZhbHVlICksXG5cdFx0XHRhcnIgPSAoIHR5cGUgPT09IFwiYXJyYXlcIiB8fCB0eXBlID09PSBcIm9iamVjdFwiICkgPyB2YWx1ZSA6IGFyZ3VtZW50cyxcblx0XHRcdGxvY2FsID0gdGhpc1sgY2FjaGUgXS5zbGljZSgpO1xuXG5cdFx0ZWFjaCggcHJvcHMsIGZ1bmN0aW9uKCBrZXksIHByb3AgKSB7XG5cdFx0XHR2YXIgdmFsID0gYXJyWyB0eXBlID09PSBcIm9iamVjdFwiID8ga2V5IDogcHJvcC5pZHggXTtcblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHZhbCA9IGxvY2FsWyBwcm9wLmlkeCBdO1xuXHRcdFx0fVxuXHRcdFx0bG9jYWxbIHByb3AuaWR4IF0gPSBjbGFtcCggdmFsLCBwcm9wICk7XG5cdFx0fSk7XG5cblx0XHRpZiAoIGZyb20gKSB7XG5cdFx0XHRyZXQgPSBjb2xvciggZnJvbSggbG9jYWwgKSApO1xuXHRcdFx0cmV0WyBjYWNoZSBdID0gbG9jYWw7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gY29sb3IoIGxvY2FsICk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIG1ha2VzIHJlZCgpIGdyZWVuKCkgYmx1ZSgpIGFscGhhKCkgaHVlKCkgc2F0dXJhdGlvbigpIGxpZ2h0bmVzcygpXG5cdGVhY2goIHByb3BzLCBmdW5jdGlvbigga2V5LCBwcm9wICkge1xuXHRcdC8vIGFscGhhIGlzIGluY2x1ZGVkIGluIG1vcmUgdGhhbiBvbmUgc3BhY2Vcblx0XHRpZiAoIGNvbG9yLmZuWyBrZXkgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29sb3IuZm5bIGtleSBdID0gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIHZ0eXBlID0galF1ZXJ5LnR5cGUoIHZhbHVlICksXG5cdFx0XHRcdGZuID0gKCBrZXkgPT09IFwiYWxwaGFcIiA/ICggdGhpcy5faHNsYSA/IFwiaHNsYVwiIDogXCJyZ2JhXCIgKSA6IHNwYWNlTmFtZSApLFxuXHRcdFx0XHRsb2NhbCA9IHRoaXNbIGZuIF0oKSxcblx0XHRcdFx0Y3VyID0gbG9jYWxbIHByb3AuaWR4IF0sXG5cdFx0XHRcdG1hdGNoO1xuXG5cdFx0XHRpZiAoIHZ0eXBlID09PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0XHRyZXR1cm4gY3VyO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHZ0eXBlID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHRcdHZhbHVlID0gdmFsdWUuY2FsbCggdGhpcywgY3VyICk7XG5cdFx0XHRcdHZ0eXBlID0galF1ZXJ5LnR5cGUoIHZhbHVlICk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIHZhbHVlID09IG51bGwgJiYgcHJvcC5lbXB0eSApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIHZ0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRtYXRjaCA9IHJwbHVzZXF1YWxzLmV4ZWMoIHZhbHVlICk7XG5cdFx0XHRcdGlmICggbWF0Y2ggKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjdXIgKyBwYXJzZUZsb2F0KCBtYXRjaFsgMiBdICkgKiAoIG1hdGNoWyAxIF0gPT09IFwiK1wiID8gMSA6IC0xICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGxvY2FsWyBwcm9wLmlkeCBdID0gdmFsdWU7XG5cdFx0XHRyZXR1cm4gdGhpc1sgZm4gXSggbG9jYWwgKTtcblx0XHR9O1xuXHR9KTtcbn0pO1xuXG4vLyBhZGQgY3NzSG9vayBhbmQgLmZ4LnN0ZXAgZnVuY3Rpb24gZm9yIGVhY2ggbmFtZWQgaG9vay5cbi8vIGFjY2VwdCBhIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2YgcHJvcGVydGllc1xuY29sb3IuaG9vayA9IGZ1bmN0aW9uKCBob29rICkge1xuXHR2YXIgaG9va3MgPSBob29rLnNwbGl0KCBcIiBcIiApO1xuXHRlYWNoKCBob29rcywgZnVuY3Rpb24oIGksIGhvb2sgKSB7XG5cdFx0alF1ZXJ5LmNzc0hvb2tzWyBob29rIF0gPSB7XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIHBhcnNlZCwgY3VyRWxlbSxcblx0XHRcdFx0XHRiYWNrZ3JvdW5kQ29sb3IgPSBcIlwiO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT09IFwidHJhbnNwYXJlbnRcIiAmJiAoIGpRdWVyeS50eXBlKCB2YWx1ZSApICE9PSBcInN0cmluZ1wiIHx8ICggcGFyc2VkID0gc3RyaW5nUGFyc2UoIHZhbHVlICkgKSApICkge1xuXHRcdFx0XHRcdHZhbHVlID0gY29sb3IoIHBhcnNlZCB8fCB2YWx1ZSApO1xuXHRcdFx0XHRcdGlmICggIXN1cHBvcnQucmdiYSAmJiB2YWx1ZS5fcmdiYVsgMyBdICE9PSAxICkge1xuXHRcdFx0XHRcdFx0Y3VyRWxlbSA9IGhvb2sgPT09IFwiYmFja2dyb3VuZENvbG9yXCIgPyBlbGVtLnBhcmVudE5vZGUgOiBlbGVtO1xuXHRcdFx0XHRcdFx0d2hpbGUgKFxuXHRcdFx0XHRcdFx0XHQoYmFja2dyb3VuZENvbG9yID09PSBcIlwiIHx8IGJhY2tncm91bmRDb2xvciA9PT0gXCJ0cmFuc3BhcmVudFwiKSAmJlxuXHRcdFx0XHRcdFx0XHRjdXJFbGVtICYmIGN1ckVsZW0uc3R5bGVcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdGJhY2tncm91bmRDb2xvciA9IGpRdWVyeS5jc3MoIGN1ckVsZW0sIFwiYmFja2dyb3VuZENvbG9yXCIgKTtcblx0XHRcdFx0XHRcdFx0XHRjdXJFbGVtID0gY3VyRWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IHZhbHVlLmJsZW5kKCBiYWNrZ3JvdW5kQ29sb3IgJiYgYmFja2dyb3VuZENvbG9yICE9PSBcInRyYW5zcGFyZW50XCIgP1xuXHRcdFx0XHRcdFx0XHRiYWNrZ3JvdW5kQ29sb3IgOlxuXHRcdFx0XHRcdFx0XHRcIl9kZWZhdWx0XCIgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnRvUmdiYVN0cmluZygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0ZWxlbS5zdHlsZVsgaG9vayBdID0gdmFsdWU7XG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRcdC8vIHdyYXBwZWQgdG8gcHJldmVudCBJRSBmcm9tIHRocm93aW5nIGVycm9ycyBvbiBcImludmFsaWRcIiB2YWx1ZXMgbGlrZSAnYXV0bycgb3IgJ2luaGVyaXQnXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdGpRdWVyeS5meC5zdGVwWyBob29rIF0gPSBmdW5jdGlvbiggZnggKSB7XG5cdFx0XHRpZiAoICFmeC5jb2xvckluaXQgKSB7XG5cdFx0XHRcdGZ4LnN0YXJ0ID0gY29sb3IoIGZ4LmVsZW0sIGhvb2sgKTtcblx0XHRcdFx0ZnguZW5kID0gY29sb3IoIGZ4LmVuZCApO1xuXHRcdFx0XHRmeC5jb2xvckluaXQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0alF1ZXJ5LmNzc0hvb2tzWyBob29rIF0uc2V0KCBmeC5lbGVtLCBmeC5zdGFydC50cmFuc2l0aW9uKCBmeC5lbmQsIGZ4LnBvcyApICk7XG5cdFx0fTtcblx0fSk7XG5cbn07XG5cbmNvbG9yLmhvb2soIHN0ZXBIb29rcyApO1xuXG5qUXVlcnkuY3NzSG9va3MuYm9yZGVyQ29sb3IgPSB7XG5cdGV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBleHBhbmRlZCA9IHt9O1xuXG5cdFx0ZWFjaCggWyBcIlRvcFwiLCBcIlJpZ2h0XCIsIFwiQm90dG9tXCIsIFwiTGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwYXJ0ICkge1xuXHRcdFx0ZXhwYW5kZWRbIFwiYm9yZGVyXCIgKyBwYXJ0ICsgXCJDb2xvclwiIF0gPSB2YWx1ZTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZXhwYW5kZWQ7XG5cdH1cbn07XG5cbi8vIEJhc2ljIGNvbG9yIG5hbWVzIG9ubHkuXG4vLyBVc2FnZSBvZiBhbnkgb2YgdGhlIG90aGVyIGNvbG9yIG5hbWVzIHJlcXVpcmVzIGFkZGluZyB5b3Vyc2VsZiBvciBpbmNsdWRpbmdcbi8vIGpxdWVyeS5jb2xvci5zdmctbmFtZXMuanMuXG5jb2xvcnMgPSBqUXVlcnkuQ29sb3IubmFtZXMgPSB7XG5cdC8vIDQuMS4gQmFzaWMgY29sb3Iga2V5d29yZHNcblx0YXF1YTogXCIjMDBmZmZmXCIsXG5cdGJsYWNrOiBcIiMwMDAwMDBcIixcblx0Ymx1ZTogXCIjMDAwMGZmXCIsXG5cdGZ1Y2hzaWE6IFwiI2ZmMDBmZlwiLFxuXHRncmF5OiBcIiM4MDgwODBcIixcblx0Z3JlZW46IFwiIzAwODAwMFwiLFxuXHRsaW1lOiBcIiMwMGZmMDBcIixcblx0bWFyb29uOiBcIiM4MDAwMDBcIixcblx0bmF2eTogXCIjMDAwMDgwXCIsXG5cdG9saXZlOiBcIiM4MDgwMDBcIixcblx0cHVycGxlOiBcIiM4MDAwODBcIixcblx0cmVkOiBcIiNmZjAwMDBcIixcblx0c2lsdmVyOiBcIiNjMGMwYzBcIixcblx0dGVhbDogXCIjMDA4MDgwXCIsXG5cdHdoaXRlOiBcIiNmZmZmZmZcIixcblx0eWVsbG93OiBcIiNmZmZmMDBcIixcblxuXHQvLyA0LjIuMy4gXCJ0cmFuc3BhcmVudFwiIGNvbG9yIGtleXdvcmRcblx0dHJhbnNwYXJlbnQ6IFsgbnVsbCwgbnVsbCwgbnVsbCwgMCBdLFxuXG5cdF9kZWZhdWx0OiBcIiNmZmZmZmZcIlxufTtcblxufSkoIGpRdWVyeSApO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBDTEFTUyBBTklNQVRJT05TICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4oZnVuY3Rpb24oKSB7XG5cbnZhciBjbGFzc0FuaW1hdGlvbkFjdGlvbnMgPSBbIFwiYWRkXCIsIFwicmVtb3ZlXCIsIFwidG9nZ2xlXCIgXSxcblx0c2hvcnRoYW5kU3R5bGVzID0ge1xuXHRcdGJvcmRlcjogMSxcblx0XHRib3JkZXJCb3R0b206IDEsXG5cdFx0Ym9yZGVyQ29sb3I6IDEsXG5cdFx0Ym9yZGVyTGVmdDogMSxcblx0XHRib3JkZXJSaWdodDogMSxcblx0XHRib3JkZXJUb3A6IDEsXG5cdFx0Ym9yZGVyV2lkdGg6IDEsXG5cdFx0bWFyZ2luOiAxLFxuXHRcdHBhZGRpbmc6IDFcblx0fTtcblxuJC5lYWNoKFsgXCJib3JkZXJMZWZ0U3R5bGVcIiwgXCJib3JkZXJSaWdodFN0eWxlXCIsIFwiYm9yZGVyQm90dG9tU3R5bGVcIiwgXCJib3JkZXJUb3BTdHlsZVwiIF0sIGZ1bmN0aW9uKCBfLCBwcm9wICkge1xuXHQkLmZ4LnN0ZXBbIHByb3AgXSA9IGZ1bmN0aW9uKCBmeCApIHtcblx0XHRpZiAoIGZ4LmVuZCAhPT0gXCJub25lXCIgJiYgIWZ4LnNldEF0dHIgfHwgZngucG9zID09PSAxICYmICFmeC5zZXRBdHRyICkge1xuXHRcdFx0alF1ZXJ5LnN0eWxlKCBmeC5lbGVtLCBwcm9wLCBmeC5lbmQgKTtcblx0XHRcdGZ4LnNldEF0dHIgPSB0cnVlO1xuXHRcdH1cblx0fTtcbn0pO1xuXG5mdW5jdGlvbiBnZXRFbGVtZW50U3R5bGVzKCBlbGVtICkge1xuXHR2YXIga2V5LCBsZW4sXG5cdFx0c3R5bGUgPSBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgP1xuXHRcdFx0ZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKSA6XG5cdFx0XHRlbGVtLmN1cnJlbnRTdHlsZSxcblx0XHRzdHlsZXMgPSB7fTtcblxuXHRpZiAoIHN0eWxlICYmIHN0eWxlLmxlbmd0aCAmJiBzdHlsZVsgMCBdICYmIHN0eWxlWyBzdHlsZVsgMCBdIF0gKSB7XG5cdFx0bGVuID0gc3R5bGUubGVuZ3RoO1xuXHRcdHdoaWxlICggbGVuLS0gKSB7XG5cdFx0XHRrZXkgPSBzdHlsZVsgbGVuIF07XG5cdFx0XHRpZiAoIHR5cGVvZiBzdHlsZVsga2V5IF0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdHN0eWxlc1sgJC5jYW1lbENhc2UoIGtleSApIF0gPSBzdHlsZVsga2V5IF07XG5cdFx0XHR9XG5cdFx0fVxuXHQvLyBzdXBwb3J0OiBPcGVyYSwgSUUgPDlcblx0fSBlbHNlIHtcblx0XHRmb3IgKCBrZXkgaW4gc3R5bGUgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBzdHlsZVsga2V5IF0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdHN0eWxlc1sga2V5IF0gPSBzdHlsZVsga2V5IF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gc3R5bGVEaWZmZXJlbmNlKCBvbGRTdHlsZSwgbmV3U3R5bGUgKSB7XG5cdHZhciBkaWZmID0ge30sXG5cdFx0bmFtZSwgdmFsdWU7XG5cblx0Zm9yICggbmFtZSBpbiBuZXdTdHlsZSApIHtcblx0XHR2YWx1ZSA9IG5ld1N0eWxlWyBuYW1lIF07XG5cdFx0aWYgKCBvbGRTdHlsZVsgbmFtZSBdICE9PSB2YWx1ZSApIHtcblx0XHRcdGlmICggIXNob3J0aGFuZFN0eWxlc1sgbmFtZSBdICkge1xuXHRcdFx0XHRpZiAoICQuZnguc3RlcFsgbmFtZSBdIHx8ICFpc05hTiggcGFyc2VGbG9hdCggdmFsdWUgKSApICkge1xuXHRcdFx0XHRcdGRpZmZbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGRpZmY7XG59XG5cbi8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XG5pZiAoICEkLmZuLmFkZEJhY2sgKSB7XG5cdCQuZm4uYWRkQmFjayA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKVxuXHRcdCk7XG5cdH07XG59XG5cbiQuZWZmZWN0cy5hbmltYXRlQ2xhc3MgPSBmdW5jdGlvbiggdmFsdWUsIGR1cmF0aW9uLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHR2YXIgbyA9ICQuc3BlZWQoIGR1cmF0aW9uLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cblx0cmV0dXJuIHRoaXMucXVldWUoIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBhbmltYXRlZCA9ICQoIHRoaXMgKSxcblx0XHRcdGJhc2VDbGFzcyA9IGFuaW1hdGVkLmF0dHIoIFwiY2xhc3NcIiApIHx8IFwiXCIsXG5cdFx0XHRhcHBseUNsYXNzQ2hhbmdlLFxuXHRcdFx0YWxsQW5pbWF0aW9ucyA9IG8uY2hpbGRyZW4gPyBhbmltYXRlZC5maW5kKCBcIipcIiApLmFkZEJhY2soKSA6IGFuaW1hdGVkO1xuXG5cdFx0Ly8gbWFwIHRoZSBhbmltYXRlZCBvYmplY3RzIHRvIHN0b3JlIHRoZSBvcmlnaW5hbCBzdHlsZXMuXG5cdFx0YWxsQW5pbWF0aW9ucyA9IGFsbEFuaW1hdGlvbnMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGVsID0gJCggdGhpcyApO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0ZWw6IGVsLFxuXHRcdFx0XHRzdGFydDogZ2V0RWxlbWVudFN0eWxlcyggdGhpcyApXG5cdFx0XHR9O1xuXHRcdH0pO1xuXG5cdFx0Ly8gYXBwbHkgY2xhc3MgY2hhbmdlXG5cdFx0YXBwbHlDbGFzc0NoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JC5lYWNoKCBjbGFzc0FuaW1hdGlvbkFjdGlvbnMsIGZ1bmN0aW9uKGksIGFjdGlvbikge1xuXHRcdFx0XHRpZiAoIHZhbHVlWyBhY3Rpb24gXSApIHtcblx0XHRcdFx0XHRhbmltYXRlZFsgYWN0aW9uICsgXCJDbGFzc1wiIF0oIHZhbHVlWyBhY3Rpb24gXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9O1xuXHRcdGFwcGx5Q2xhc3NDaGFuZ2UoKTtcblxuXHRcdC8vIG1hcCBhbGwgYW5pbWF0ZWQgb2JqZWN0cyBhZ2FpbiAtIGNhbGN1bGF0ZSBuZXcgc3R5bGVzIGFuZCBkaWZmXG5cdFx0YWxsQW5pbWF0aW9ucyA9IGFsbEFuaW1hdGlvbnMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5lbmQgPSBnZXRFbGVtZW50U3R5bGVzKCB0aGlzLmVsWyAwIF0gKTtcblx0XHRcdHRoaXMuZGlmZiA9IHN0eWxlRGlmZmVyZW5jZSggdGhpcy5zdGFydCwgdGhpcy5lbmQgKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0pO1xuXG5cdFx0Ly8gYXBwbHkgb3JpZ2luYWwgY2xhc3Ncblx0XHRhbmltYXRlZC5hdHRyKCBcImNsYXNzXCIsIGJhc2VDbGFzcyApO1xuXG5cdFx0Ly8gbWFwIGFsbCBhbmltYXRlZCBvYmplY3RzIGFnYWluIC0gdGhpcyB0aW1lIGNvbGxlY3RpbmcgYSBwcm9taXNlXG5cdFx0YWxsQW5pbWF0aW9ucyA9IGFsbEFuaW1hdGlvbnMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHN0eWxlSW5mbyA9IHRoaXMsXG5cdFx0XHRcdGRmZCA9ICQuRGVmZXJyZWQoKSxcblx0XHRcdFx0b3B0cyA9ICQuZXh0ZW5kKHt9LCBvLCB7XG5cdFx0XHRcdFx0cXVldWU6IGZhbHNlLFxuXHRcdFx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGRmZC5yZXNvbHZlKCBzdHlsZUluZm8gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLmVsLmFuaW1hdGUoIHRoaXMuZGlmZiwgb3B0cyApO1xuXHRcdFx0cmV0dXJuIGRmZC5wcm9taXNlKCk7XG5cdFx0fSk7XG5cblx0XHQvLyBvbmNlIGFsbCBhbmltYXRpb25zIGhhdmUgY29tcGxldGVkOlxuXHRcdCQud2hlbi5hcHBseSggJCwgYWxsQW5pbWF0aW9ucy5nZXQoKSApLmRvbmUoZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIHNldCB0aGUgZmluYWwgY2xhc3Ncblx0XHRcdGFwcGx5Q2xhc3NDaGFuZ2UoKTtcblxuXHRcdFx0Ly8gZm9yIGVhY2ggYW5pbWF0ZWQgZWxlbWVudCxcblx0XHRcdC8vIGNsZWFyIGFsbCBjc3MgcHJvcGVydGllcyB0aGF0IHdlcmUgYW5pbWF0ZWRcblx0XHRcdCQuZWFjaCggYXJndW1lbnRzLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGVsID0gdGhpcy5lbDtcblx0XHRcdFx0JC5lYWNoKCB0aGlzLmRpZmYsIGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRcdGVsLmNzcygga2V5LCBcIlwiICk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIHRoaXMgaXMgZ3Vhcm50ZWVkIHRvIGJlIHRoZXJlIGlmIHlvdSB1c2UgalF1ZXJ5LnNwZWVkKClcblx0XHRcdC8vIGl0IGFsc28gaGFuZGxlcyBkZXF1ZXVpbmcgdGhlIG5leHQgYW5pbS4uLlxuXHRcdFx0by5jb21wbGV0ZS5jYWxsKCBhbmltYXRlZFsgMCBdICk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuJC5mbi5leHRlbmQoe1xuXHRhZGRDbGFzczogKGZ1bmN0aW9uKCBvcmlnICkge1xuXHRcdHJldHVybiBmdW5jdGlvbiggY2xhc3NOYW1lcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0XHRyZXR1cm4gc3BlZWQgP1xuXHRcdFx0XHQkLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwoIHRoaXMsXG5cdFx0XHRcdFx0eyBhZGQ6IGNsYXNzTmFtZXMgfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSA6XG5cdFx0XHRcdG9yaWcuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH07XG5cdH0pKCAkLmZuLmFkZENsYXNzICksXG5cblx0cmVtb3ZlQ2xhc3M6IChmdW5jdGlvbiggb3JpZyApIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24oIGNsYXNzTmFtZXMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAxID9cblx0XHRcdFx0JC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKCB0aGlzLFxuXHRcdFx0XHRcdHsgcmVtb3ZlOiBjbGFzc05hbWVzIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkgOlxuXHRcdFx0XHRvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9O1xuXHR9KSggJC5mbi5yZW1vdmVDbGFzcyApLFxuXG5cdHRvZ2dsZUNsYXNzOiAoZnVuY3Rpb24oIG9yaWcgKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBjbGFzc05hbWVzLCBmb3JjZSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBmb3JjZSA9PT0gXCJib29sZWFuXCIgfHwgZm9yY2UgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0aWYgKCAhc3BlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gd2l0aG91dCBzcGVlZCBwYXJhbWV0ZXJcblx0XHRcdFx0XHRyZXR1cm4gb3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuICQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCggdGhpcyxcblx0XHRcdFx0XHRcdChmb3JjZSA/IHsgYWRkOiBjbGFzc05hbWVzIH0gOiB7IHJlbW92ZTogY2xhc3NOYW1lcyB9KSxcblx0XHRcdFx0XHRcdHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHdpdGhvdXQgZm9yY2UgcGFyYW1ldGVyXG5cdFx0XHRcdHJldHVybiAkLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwoIHRoaXMsXG5cdFx0XHRcdFx0eyB0b2dnbGU6IGNsYXNzTmFtZXMgfSwgZm9yY2UsIHNwZWVkLCBlYXNpbmcgKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9KSggJC5mbi50b2dnbGVDbGFzcyApLFxuXG5cdHN3aXRjaENsYXNzOiBmdW5jdGlvbiggcmVtb3ZlLCBhZGQsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrKSB7XG5cdFx0cmV0dXJuICQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCggdGhpcywge1xuXHRcdFx0YWRkOiBhZGQsXG5cdFx0XHRyZW1vdmU6IHJlbW92ZVxuXHRcdH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH1cbn0pO1xuXG59KSgpO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVGRkVDVFMgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbihmdW5jdGlvbigpIHtcblxuJC5leHRlbmQoICQuZWZmZWN0cywge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXG5cdC8vIFNhdmVzIGEgc2V0IG9mIHByb3BlcnRpZXMgaW4gYSBkYXRhIHN0b3JhZ2Vcblx0c2F2ZTogZnVuY3Rpb24oIGVsZW1lbnQsIHNldCApIHtcblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRpZiAoIHNldFsgaSBdICE9PSBudWxsICkge1xuXHRcdFx0XHRlbGVtZW50LmRhdGEoIGRhdGFTcGFjZSArIHNldFsgaSBdLCBlbGVtZW50WyAwIF0uc3R5bGVbIHNldFsgaSBdIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gUmVzdG9yZXMgYSBzZXQgb2YgcHJldmlvdXNseSBzYXZlZCBwcm9wZXJ0aWVzIGZyb20gYSBkYXRhIHN0b3JhZ2Vcblx0cmVzdG9yZTogZnVuY3Rpb24oIGVsZW1lbnQsIHNldCApIHtcblx0XHR2YXIgdmFsLCBpO1xuXHRcdGZvciAoIGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrICkge1xuXHRcdFx0aWYgKCBzZXRbIGkgXSAhPT0gbnVsbCApIHtcblx0XHRcdFx0dmFsID0gZWxlbWVudC5kYXRhKCBkYXRhU3BhY2UgKyBzZXRbIGkgXSApO1xuXHRcdFx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgMS42LjJcblx0XHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvOTkxN1xuXHRcdFx0XHQvLyBqUXVlcnkgMS42LjIgaW5jb3JyZWN0bHkgcmV0dXJucyB1bmRlZmluZWQgZm9yIGFueSBmYWxzeSB2YWx1ZS5cblx0XHRcdFx0Ly8gV2UgY2FuJ3QgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIFwiXCIgYW5kIDAgaGVyZSwgc28gd2UganVzdCBhc3N1bWVcblx0XHRcdFx0Ly8gZW1wdHkgc3RyaW5nIHNpbmNlIGl0J3MgbGlrZWx5IHRvIGJlIGEgbW9yZSBjb21tb24gdmFsdWUuLi5cblx0XHRcdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR2YWwgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsZW1lbnQuY3NzKCBzZXRbIGkgXSwgdmFsICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHNldE1vZGU6IGZ1bmN0aW9uKCBlbCwgbW9kZSApIHtcblx0XHRpZiAobW9kZSA9PT0gXCJ0b2dnbGVcIikge1xuXHRcdFx0bW9kZSA9IGVsLmlzKCBcIjpoaWRkZW5cIiApID8gXCJzaG93XCIgOiBcImhpZGVcIjtcblx0XHR9XG5cdFx0cmV0dXJuIG1vZGU7XG5cdH0sXG5cblx0Ly8gVHJhbnNsYXRlcyBhIFt0b3AsbGVmdF0gYXJyYXkgaW50byBhIGJhc2VsaW5lIHZhbHVlXG5cdC8vIHRoaXMgc2hvdWxkIGJlIGEgbGl0dGxlIG1vcmUgZmxleGlibGUgaW4gdGhlIGZ1dHVyZSB0byBoYW5kbGUgYSBzdHJpbmcgJiBoYXNoXG5cdGdldEJhc2VsaW5lOiBmdW5jdGlvbiggb3JpZ2luLCBvcmlnaW5hbCApIHtcblx0XHR2YXIgeSwgeDtcblx0XHRzd2l0Y2ggKCBvcmlnaW5bIDAgXSApIHtcblx0XHRcdGNhc2UgXCJ0b3BcIjogeSA9IDA7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcIm1pZGRsZVwiOiB5ID0gMC41OyBicmVhaztcblx0XHRcdGNhc2UgXCJib3R0b21cIjogeSA9IDE7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogeSA9IG9yaWdpblsgMCBdIC8gb3JpZ2luYWwuaGVpZ2h0O1xuXHRcdH1cblx0XHRzd2l0Y2ggKCBvcmlnaW5bIDEgXSApIHtcblx0XHRcdGNhc2UgXCJsZWZ0XCI6IHggPSAwOyBicmVhaztcblx0XHRcdGNhc2UgXCJjZW50ZXJcIjogeCA9IDAuNTsgYnJlYWs7XG5cdFx0XHRjYXNlIFwicmlnaHRcIjogeCA9IDE7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogeCA9IG9yaWdpblsgMSBdIC8gb3JpZ2luYWwud2lkdGg7XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHR4OiB4LFxuXHRcdFx0eTogeVxuXHRcdH07XG5cdH0sXG5cblx0Ly8gV3JhcHMgdGhlIGVsZW1lbnQgYXJvdW5kIGEgd3JhcHBlciB0aGF0IGNvcGllcyBwb3NpdGlvbiBwcm9wZXJ0aWVzXG5cdGNyZWF0ZVdyYXBwZXI6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuXG5cdFx0Ly8gaWYgdGhlIGVsZW1lbnQgaXMgYWxyZWFkeSB3cmFwcGVkLCByZXR1cm4gaXRcblx0XHRpZiAoIGVsZW1lbnQucGFyZW50KCkuaXMoIFwiLnVpLWVmZmVjdHMtd3JhcHBlclwiICkpIHtcblx0XHRcdHJldHVybiBlbGVtZW50LnBhcmVudCgpO1xuXHRcdH1cblxuXHRcdC8vIHdyYXAgdGhlIGVsZW1lbnRcblx0XHR2YXIgcHJvcHMgPSB7XG5cdFx0XHRcdHdpZHRoOiBlbGVtZW50Lm91dGVyV2lkdGgodHJ1ZSksXG5cdFx0XHRcdGhlaWdodDogZWxlbWVudC5vdXRlckhlaWdodCh0cnVlKSxcblx0XHRcdFx0XCJmbG9hdFwiOiBlbGVtZW50LmNzcyggXCJmbG9hdFwiIClcblx0XHRcdH0sXG5cdFx0XHR3cmFwcGVyID0gJCggXCI8ZGl2PjwvZGl2PlwiIClcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWVmZmVjdHMtd3JhcHBlclwiIClcblx0XHRcdFx0LmNzcyh7XG5cdFx0XHRcdFx0Zm9udFNpemU6IFwiMTAwJVwiLFxuXHRcdFx0XHRcdGJhY2tncm91bmQ6IFwidHJhbnNwYXJlbnRcIixcblx0XHRcdFx0XHRib3JkZXI6IFwibm9uZVwiLFxuXHRcdFx0XHRcdG1hcmdpbjogMCxcblx0XHRcdFx0XHRwYWRkaW5nOiAwXG5cdFx0XHRcdH0pLFxuXHRcdFx0Ly8gU3RvcmUgdGhlIHNpemUgaW4gY2FzZSB3aWR0aC9oZWlnaHQgYXJlIGRlZmluZWQgaW4gJSAtIEZpeGVzICM1MjQ1XG5cdFx0XHRzaXplID0ge1xuXHRcdFx0XHR3aWR0aDogZWxlbWVudC53aWR0aCgpLFxuXHRcdFx0XHRoZWlnaHQ6IGVsZW1lbnQuaGVpZ2h0KClcblx0XHRcdH0sXG5cdFx0XHRhY3RpdmUgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG5cdFx0Ly8gc3VwcG9ydDogRmlyZWZveFxuXHRcdC8vIEZpcmVmb3ggaW5jb3JyZWN0bHkgZXhwb3NlcyBhbm9ueW1vdXMgY29udGVudFxuXHRcdC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTU2MTY2NFxuXHRcdHRyeSB7XG5cdFx0XHRhY3RpdmUuaWQ7XG5cdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRhY3RpdmUgPSBkb2N1bWVudC5ib2R5O1xuXHRcdH1cblxuXHRcdGVsZW1lbnQud3JhcCggd3JhcHBlciApO1xuXG5cdFx0Ly8gRml4ZXMgIzc1OTUgLSBFbGVtZW50cyBsb3NlIGZvY3VzIHdoZW4gd3JhcHBlZC5cblx0XHRpZiAoIGVsZW1lbnRbIDAgXSA9PT0gYWN0aXZlIHx8ICQuY29udGFpbnMoIGVsZW1lbnRbIDAgXSwgYWN0aXZlICkgKSB7XG5cdFx0XHQkKCBhY3RpdmUgKS5mb2N1cygpO1xuXHRcdH1cblxuXHRcdHdyYXBwZXIgPSBlbGVtZW50LnBhcmVudCgpOyAvL0hvdGZpeCBmb3IgalF1ZXJ5IDEuNCBzaW5jZSBzb21lIGNoYW5nZSBpbiB3cmFwKCkgc2VlbXMgdG8gYWN0dWFsbHkgbG9zZSB0aGUgcmVmZXJlbmNlIHRvIHRoZSB3cmFwcGVkIGVsZW1lbnRcblxuXHRcdC8vIHRyYW5zZmVyIHBvc2l0aW9uaW5nIHByb3BlcnRpZXMgdG8gdGhlIHdyYXBwZXJcblx0XHRpZiAoIGVsZW1lbnQuY3NzKCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdHdyYXBwZXIuY3NzKHsgcG9zaXRpb246IFwicmVsYXRpdmVcIiB9KTtcblx0XHRcdGVsZW1lbnQuY3NzKHsgcG9zaXRpb246IFwicmVsYXRpdmVcIiB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JC5leHRlbmQoIHByb3BzLCB7XG5cdFx0XHRcdHBvc2l0aW9uOiBlbGVtZW50LmNzcyggXCJwb3NpdGlvblwiICksXG5cdFx0XHRcdHpJbmRleDogZWxlbWVudC5jc3MoIFwiei1pbmRleFwiIClcblx0XHRcdH0pO1xuXHRcdFx0JC5lYWNoKFsgXCJ0b3BcIiwgXCJsZWZ0XCIsIFwiYm90dG9tXCIsIFwicmlnaHRcIiBdLCBmdW5jdGlvbihpLCBwb3MpIHtcblx0XHRcdFx0cHJvcHNbIHBvcyBdID0gZWxlbWVudC5jc3MoIHBvcyApO1xuXHRcdFx0XHRpZiAoIGlzTmFOKCBwYXJzZUludCggcHJvcHNbIHBvcyBdLCAxMCApICkgKSB7XG5cdFx0XHRcdFx0cHJvcHNbIHBvcyBdID0gXCJhdXRvXCI7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0ZWxlbWVudC5jc3Moe1xuXHRcdFx0XHRwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuXHRcdFx0XHR0b3A6IDAsXG5cdFx0XHRcdGxlZnQ6IDAsXG5cdFx0XHRcdHJpZ2h0OiBcImF1dG9cIixcblx0XHRcdFx0Ym90dG9tOiBcImF1dG9cIlxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGVsZW1lbnQuY3NzKHNpemUpO1xuXG5cdFx0cmV0dXJuIHdyYXBwZXIuY3NzKCBwcm9wcyApLnNob3coKTtcblx0fSxcblxuXHRyZW1vdmVXcmFwcGVyOiBmdW5jdGlvbiggZWxlbWVudCApIHtcblx0XHR2YXIgYWN0aXZlID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblxuXHRcdGlmICggZWxlbWVudC5wYXJlbnQoKS5pcyggXCIudWktZWZmZWN0cy13cmFwcGVyXCIgKSApIHtcblx0XHRcdGVsZW1lbnQucGFyZW50KCkucmVwbGFjZVdpdGgoIGVsZW1lbnQgKTtcblxuXHRcdFx0Ly8gRml4ZXMgIzc1OTUgLSBFbGVtZW50cyBsb3NlIGZvY3VzIHdoZW4gd3JhcHBlZC5cblx0XHRcdGlmICggZWxlbWVudFsgMCBdID09PSBhY3RpdmUgfHwgJC5jb250YWlucyggZWxlbWVudFsgMCBdLCBhY3RpdmUgKSApIHtcblx0XHRcdFx0JCggYWN0aXZlICkuZm9jdXMoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZWxlbWVudDtcblx0fSxcblxuXHRzZXRUcmFuc2l0aW9uOiBmdW5jdGlvbiggZWxlbWVudCwgbGlzdCwgZmFjdG9yLCB2YWx1ZSApIHtcblx0XHR2YWx1ZSA9IHZhbHVlIHx8IHt9O1xuXHRcdCQuZWFjaCggbGlzdCwgZnVuY3Rpb24oIGksIHggKSB7XG5cdFx0XHR2YXIgdW5pdCA9IGVsZW1lbnQuY3NzVW5pdCggeCApO1xuXHRcdFx0aWYgKCB1bml0WyAwIF0gPiAwICkge1xuXHRcdFx0XHR2YWx1ZVsgeCBdID0gdW5pdFsgMCBdICogZmFjdG9yICsgdW5pdFsgMSBdO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxufSk7XG5cbi8vIHJldHVybiBhbiBlZmZlY3Qgb3B0aW9ucyBvYmplY3QgZm9yIHRoZSBnaXZlbiBwYXJhbWV0ZXJzOlxuZnVuY3Rpb24gX25vcm1hbGl6ZUFyZ3VtZW50cyggZWZmZWN0LCBvcHRpb25zLCBzcGVlZCwgY2FsbGJhY2sgKSB7XG5cblx0Ly8gYWxsb3cgcGFzc2luZyBhbGwgb3B0aW9ucyBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyXG5cdGlmICggJC5pc1BsYWluT2JqZWN0KCBlZmZlY3QgKSApIHtcblx0XHRvcHRpb25zID0gZWZmZWN0O1xuXHRcdGVmZmVjdCA9IGVmZmVjdC5lZmZlY3Q7XG5cdH1cblxuXHQvLyBjb252ZXJ0IHRvIGFuIG9iamVjdFxuXHRlZmZlY3QgPSB7IGVmZmVjdDogZWZmZWN0IH07XG5cblx0Ly8gY2F0Y2ggKGVmZmVjdCwgbnVsbCwgLi4uKVxuXHRpZiAoIG9wdGlvbnMgPT0gbnVsbCApIHtcblx0XHRvcHRpb25zID0ge307XG5cdH1cblxuXHQvLyBjYXRjaCAoZWZmZWN0LCBjYWxsYmFjaylcblx0aWYgKCAkLmlzRnVuY3Rpb24oIG9wdGlvbnMgKSApIHtcblx0XHRjYWxsYmFjayA9IG9wdGlvbnM7XG5cdFx0c3BlZWQgPSBudWxsO1xuXHRcdG9wdGlvbnMgPSB7fTtcblx0fVxuXG5cdC8vIGNhdGNoIChlZmZlY3QsIHNwZWVkLCA/KVxuXHRpZiAoIHR5cGVvZiBvcHRpb25zID09PSBcIm51bWJlclwiIHx8ICQuZnguc3BlZWRzWyBvcHRpb25zIF0gKSB7XG5cdFx0Y2FsbGJhY2sgPSBzcGVlZDtcblx0XHRzcGVlZCA9IG9wdGlvbnM7XG5cdFx0b3B0aW9ucyA9IHt9O1xuXHR9XG5cblx0Ly8gY2F0Y2ggKGVmZmVjdCwgb3B0aW9ucywgY2FsbGJhY2spXG5cdGlmICggJC5pc0Z1bmN0aW9uKCBzcGVlZCApICkge1xuXHRcdGNhbGxiYWNrID0gc3BlZWQ7XG5cdFx0c3BlZWQgPSBudWxsO1xuXHR9XG5cblx0Ly8gYWRkIG9wdGlvbnMgdG8gZWZmZWN0XG5cdGlmICggb3B0aW9ucyApIHtcblx0XHQkLmV4dGVuZCggZWZmZWN0LCBvcHRpb25zICk7XG5cdH1cblxuXHRzcGVlZCA9IHNwZWVkIHx8IG9wdGlvbnMuZHVyYXRpb247XG5cdGVmZmVjdC5kdXJhdGlvbiA9ICQuZngub2ZmID8gMCA6XG5cdFx0dHlwZW9mIHNwZWVkID09PSBcIm51bWJlclwiID8gc3BlZWQgOlxuXHRcdHNwZWVkIGluICQuZnguc3BlZWRzID8gJC5meC5zcGVlZHNbIHNwZWVkIF0gOlxuXHRcdCQuZnguc3BlZWRzLl9kZWZhdWx0O1xuXG5cdGVmZmVjdC5jb21wbGV0ZSA9IGNhbGxiYWNrIHx8IG9wdGlvbnMuY29tcGxldGU7XG5cblx0cmV0dXJuIGVmZmVjdDtcbn1cblxuZnVuY3Rpb24gc3RhbmRhcmRBbmltYXRpb25PcHRpb24oIG9wdGlvbiApIHtcblx0Ly8gVmFsaWQgc3RhbmRhcmQgc3BlZWRzIChub3RoaW5nLCBudW1iZXIsIG5hbWVkIHNwZWVkKVxuXHRpZiAoICFvcHRpb24gfHwgdHlwZW9mIG9wdGlvbiA9PT0gXCJudW1iZXJcIiB8fCAkLmZ4LnNwZWVkc1sgb3B0aW9uIF0gKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyBJbnZhbGlkIHN0cmluZ3MgLSB0cmVhdCBhcyBcIm5vcm1hbFwiIHNwZWVkXG5cdGlmICggdHlwZW9mIG9wdGlvbiA9PT0gXCJzdHJpbmdcIiAmJiAhJC5lZmZlY3RzLmVmZmVjdFsgb3B0aW9uIF0gKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyBDb21wbGV0ZSBjYWxsYmFja1xuXHRpZiAoICQuaXNGdW5jdGlvbiggb3B0aW9uICkgKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyBPcHRpb25zIGhhc2ggKGJ1dCBub3QgbmFtaW5nIGFuIGVmZmVjdClcblx0aWYgKCB0eXBlb2Ygb3B0aW9uID09PSBcIm9iamVjdFwiICYmICFvcHRpb24uZWZmZWN0ICkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gRGlkbid0IG1hdGNoIGFueSBzdGFuZGFyZCBBUElcblx0cmV0dXJuIGZhbHNlO1xufVxuXG4kLmZuLmV4dGVuZCh7XG5cdGVmZmVjdDogZnVuY3Rpb24oIC8qIGVmZmVjdCwgb3B0aW9ucywgc3BlZWQsIGNhbGxiYWNrICovICkge1xuXHRcdHZhciBhcmdzID0gX25vcm1hbGl6ZUFyZ3VtZW50cy5hcHBseSggdGhpcywgYXJndW1lbnRzICksXG5cdFx0XHRtb2RlID0gYXJncy5tb2RlLFxuXHRcdFx0cXVldWUgPSBhcmdzLnF1ZXVlLFxuXHRcdFx0ZWZmZWN0TWV0aG9kID0gJC5lZmZlY3RzLmVmZmVjdFsgYXJncy5lZmZlY3QgXTtcblxuXHRcdGlmICggJC5meC5vZmYgfHwgIWVmZmVjdE1ldGhvZCApIHtcblx0XHRcdC8vIGRlbGVnYXRlIHRvIHRoZSBvcmlnaW5hbCBtZXRob2QgKGUuZy4sIC5zaG93KCkpIGlmIHBvc3NpYmxlXG5cdFx0XHRpZiAoIG1vZGUgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzWyBtb2RlIF0oIGFyZ3MuZHVyYXRpb24sIGFyZ3MuY29tcGxldGUgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggYXJncy5jb21wbGV0ZSApIHtcblx0XHRcdFx0XHRcdGFyZ3MuY29tcGxldGUuY2FsbCggdGhpcyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcnVuKCBuZXh0ICkge1xuXHRcdFx0dmFyIGVsZW0gPSAkKCB0aGlzICksXG5cdFx0XHRcdGNvbXBsZXRlID0gYXJncy5jb21wbGV0ZSxcblx0XHRcdFx0bW9kZSA9IGFyZ3MubW9kZTtcblxuXHRcdFx0ZnVuY3Rpb24gZG9uZSgpIHtcblx0XHRcdFx0aWYgKCAkLmlzRnVuY3Rpb24oIGNvbXBsZXRlICkgKSB7XG5cdFx0XHRcdFx0Y29tcGxldGUuY2FsbCggZWxlbVswXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggJC5pc0Z1bmN0aW9uKCBuZXh0ICkgKSB7XG5cdFx0XHRcdFx0bmV4dCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGFscmVhZHkgaGFzIHRoZSBjb3JyZWN0IGZpbmFsIHN0YXRlLCBkZWxlZ2F0ZSB0b1xuXHRcdFx0Ly8gdGhlIGNvcmUgbWV0aG9kcyBzbyB0aGUgaW50ZXJuYWwgdHJhY2tpbmcgb2YgXCJvbGRkaXNwbGF5XCIgd29ya3MuXG5cdFx0XHRpZiAoIGVsZW0uaXMoIFwiOmhpZGRlblwiICkgPyBtb2RlID09PSBcImhpZGVcIiA6IG1vZGUgPT09IFwic2hvd1wiICkge1xuXHRcdFx0XHRlbGVtWyBtb2RlIF0oKTtcblx0XHRcdFx0ZG9uZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWZmZWN0TWV0aG9kLmNhbGwoIGVsZW1bMF0sIGFyZ3MsIGRvbmUgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcXVldWUgPT09IGZhbHNlID8gdGhpcy5lYWNoKCBydW4gKSA6IHRoaXMucXVldWUoIHF1ZXVlIHx8IFwiZnhcIiwgcnVuICk7XG5cdH0sXG5cblx0c2hvdzogKGZ1bmN0aW9uKCBvcmlnICkge1xuXHRcdHJldHVybiBmdW5jdGlvbiggb3B0aW9uICkge1xuXHRcdFx0aWYgKCBzdGFuZGFyZEFuaW1hdGlvbk9wdGlvbiggb3B0aW9uICkgKSB7XG5cdFx0XHRcdHJldHVybiBvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBhcmdzID0gX25vcm1hbGl6ZUFyZ3VtZW50cy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGFyZ3MubW9kZSA9IFwic2hvd1wiO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5lZmZlY3QuY2FsbCggdGhpcywgYXJncyApO1xuXHRcdFx0fVxuXHRcdH07XG5cdH0pKCAkLmZuLnNob3cgKSxcblxuXHRoaWRlOiAoZnVuY3Rpb24oIG9yaWcgKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBvcHRpb24gKSB7XG5cdFx0XHRpZiAoIHN0YW5kYXJkQW5pbWF0aW9uT3B0aW9uKCBvcHRpb24gKSApIHtcblx0XHRcdFx0cmV0dXJuIG9yaWcuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIGFyZ3MgPSBfbm9ybWFsaXplQXJndW1lbnRzLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0YXJncy5tb2RlID0gXCJoaWRlXCI7XG5cdFx0XHRcdHJldHVybiB0aGlzLmVmZmVjdC5jYWxsKCB0aGlzLCBhcmdzICk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fSkoICQuZm4uaGlkZSApLFxuXG5cdHRvZ2dsZTogKGZ1bmN0aW9uKCBvcmlnICkge1xuXHRcdHJldHVybiBmdW5jdGlvbiggb3B0aW9uICkge1xuXHRcdFx0aWYgKCBzdGFuZGFyZEFuaW1hdGlvbk9wdGlvbiggb3B0aW9uICkgfHwgdHlwZW9mIG9wdGlvbiA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRcdHJldHVybiBvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBhcmdzID0gX25vcm1hbGl6ZUFyZ3VtZW50cy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGFyZ3MubW9kZSA9IFwidG9nZ2xlXCI7XG5cdFx0XHRcdHJldHVybiB0aGlzLmVmZmVjdC5jYWxsKCB0aGlzLCBhcmdzICk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fSkoICQuZm4udG9nZ2xlICksXG5cblx0Ly8gaGVscGVyIGZ1bmN0aW9uc1xuXHRjc3NVbml0OiBmdW5jdGlvbihrZXkpIHtcblx0XHR2YXIgc3R5bGUgPSB0aGlzLmNzcygga2V5ICksXG5cdFx0XHR2YWwgPSBbXTtcblxuXHRcdCQuZWFjaCggWyBcImVtXCIsIFwicHhcIiwgXCIlXCIsIFwicHRcIiBdLCBmdW5jdGlvbiggaSwgdW5pdCApIHtcblx0XHRcdGlmICggc3R5bGUuaW5kZXhPZiggdW5pdCApID4gMCApIHtcblx0XHRcdFx0dmFsID0gWyBwYXJzZUZsb2F0KCBzdHlsZSApLCB1bml0IF07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxufSk7XG5cbn0pKCk7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRUFTSU5HICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4vLyBiYXNlZCBvbiBlYXNpbmcgZXF1YXRpb25zIGZyb20gUm9iZXJ0IFBlbm5lciAoaHR0cDovL3d3dy5yb2JlcnRwZW5uZXIuY29tL2Vhc2luZylcblxudmFyIGJhc2VFYXNpbmdzID0ge307XG5cbiQuZWFjaCggWyBcIlF1YWRcIiwgXCJDdWJpY1wiLCBcIlF1YXJ0XCIsIFwiUXVpbnRcIiwgXCJFeHBvXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdGJhc2VFYXNpbmdzWyBuYW1lIF0gPSBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gTWF0aC5wb3coIHAsIGkgKyAyICk7XG5cdH07XG59KTtcblxuJC5leHRlbmQoIGJhc2VFYXNpbmdzLCB7XG5cdFNpbmU6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiAxIC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJIC8gMiApO1xuXHR9LFxuXHRDaXJjOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMSAtIE1hdGguc3FydCggMSAtIHAgKiBwICk7XG5cdH0sXG5cdEVsYXN0aWM6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiBwID09PSAwIHx8IHAgPT09IDEgPyBwIDpcblx0XHRcdC1NYXRoLnBvdyggMiwgOCAqIChwIC0gMSkgKSAqIE1hdGguc2luKCAoIChwIC0gMSkgKiA4MCAtIDcuNSApICogTWF0aC5QSSAvIDE1ICk7XG5cdH0sXG5cdEJhY2s6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiBwICogcCAqICggMyAqIHAgLSAyICk7XG5cdH0sXG5cdEJvdW5jZTogZnVuY3Rpb24oIHAgKSB7XG5cdFx0dmFyIHBvdzIsXG5cdFx0XHRib3VuY2UgPSA0O1xuXG5cdFx0d2hpbGUgKCBwIDwgKCAoIHBvdzIgPSBNYXRoLnBvdyggMiwgLS1ib3VuY2UgKSApIC0gMSApIC8gMTEgKSB7fVxuXHRcdHJldHVybiAxIC8gTWF0aC5wb3coIDQsIDMgLSBib3VuY2UgKSAtIDcuNTYyNSAqIE1hdGgucG93KCAoIHBvdzIgKiAzIC0gMiApIC8gMjIgLSBwLCAyICk7XG5cdH1cbn0pO1xuXG4kLmVhY2goIGJhc2VFYXNpbmdzLCBmdW5jdGlvbiggbmFtZSwgZWFzZUluICkge1xuXHQkLmVhc2luZ1sgXCJlYXNlSW5cIiArIG5hbWUgXSA9IGVhc2VJbjtcblx0JC5lYXNpbmdbIFwiZWFzZU91dFwiICsgbmFtZSBdID0gZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIDEgLSBlYXNlSW4oIDEgLSBwICk7XG5cdH07XG5cdCQuZWFzaW5nWyBcImVhc2VJbk91dFwiICsgbmFtZSBdID0gZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHAgPCAwLjUgP1xuXHRcdFx0ZWFzZUluKCBwICogMiApIC8gMiA6XG5cdFx0XHQxIC0gZWFzZUluKCBwICogLTIgKyAyICkgLyAyO1xuXHR9O1xufSk7XG5cbn0pKCk7XG5cbnZhciBlZmZlY3QgPSAkLmVmZmVjdHM7XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgRWZmZWN0cyBCbGluZCAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2JsaW5kLWVmZmVjdC9cbiAqL1xuXG5cbnZhciBlZmZlY3RCbGluZCA9ICQuZWZmZWN0cy5lZmZlY3QuYmxpbmQgPSBmdW5jdGlvbiggbywgZG9uZSApIHtcblx0Ly8gQ3JlYXRlIGVsZW1lbnRcblx0dmFyIGVsID0gJCggdGhpcyApLFxuXHRcdHJ2ZXJ0aWNhbCA9IC91cHxkb3dufHZlcnRpY2FsLyxcblx0XHRycG9zaXRpdmVtb3Rpb24gPSAvdXB8bGVmdHx2ZXJ0aWNhbHxob3Jpem9udGFsLyxcblx0XHRwcm9wcyA9IFsgXCJwb3NpdGlvblwiLCBcInRvcFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIiwgXCJyaWdodFwiLCBcImhlaWdodFwiLCBcIndpZHRoXCIgXSxcblx0XHRtb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsLCBvLm1vZGUgfHwgXCJoaWRlXCIgKSxcblx0XHRkaXJlY3Rpb24gPSBvLmRpcmVjdGlvbiB8fCBcInVwXCIsXG5cdFx0dmVydGljYWwgPSBydmVydGljYWwudGVzdCggZGlyZWN0aW9uICksXG5cdFx0cmVmID0gdmVydGljYWwgPyBcImhlaWdodFwiIDogXCJ3aWR0aFwiLFxuXHRcdHJlZjIgPSB2ZXJ0aWNhbCA/IFwidG9wXCIgOiBcImxlZnRcIixcblx0XHRtb3Rpb24gPSBycG9zaXRpdmVtb3Rpb24udGVzdCggZGlyZWN0aW9uICksXG5cdFx0YW5pbWF0aW9uID0ge30sXG5cdFx0c2hvdyA9IG1vZGUgPT09IFwic2hvd1wiLFxuXHRcdHdyYXBwZXIsIGRpc3RhbmNlLCBtYXJnaW47XG5cblx0Ly8gaWYgYWxyZWFkeSB3cmFwcGVkLCB0aGUgd3JhcHBlcidzIHByb3BlcnRpZXMgYXJlIG15IHByb3BlcnR5LiAjNjI0NVxuXHRpZiAoIGVsLnBhcmVudCgpLmlzKCBcIi51aS1lZmZlY3RzLXdyYXBwZXJcIiApICkge1xuXHRcdCQuZWZmZWN0cy5zYXZlKCBlbC5wYXJlbnQoKSwgcHJvcHMgKTtcblx0fSBlbHNlIHtcblx0XHQkLmVmZmVjdHMuc2F2ZSggZWwsIHByb3BzICk7XG5cdH1cblx0ZWwuc2hvdygpO1xuXHR3cmFwcGVyID0gJC5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoIGVsICkuY3NzKHtcblx0XHRvdmVyZmxvdzogXCJoaWRkZW5cIlxuXHR9KTtcblxuXHRkaXN0YW5jZSA9IHdyYXBwZXJbIHJlZiBdKCk7XG5cdG1hcmdpbiA9IHBhcnNlRmxvYXQoIHdyYXBwZXIuY3NzKCByZWYyICkgKSB8fCAwO1xuXG5cdGFuaW1hdGlvblsgcmVmIF0gPSBzaG93ID8gZGlzdGFuY2UgOiAwO1xuXHRpZiAoICFtb3Rpb24gKSB7XG5cdFx0ZWxcblx0XHRcdC5jc3MoIHZlcnRpY2FsID8gXCJib3R0b21cIiA6IFwicmlnaHRcIiwgMCApXG5cdFx0XHQuY3NzKCB2ZXJ0aWNhbCA/IFwidG9wXCIgOiBcImxlZnRcIiwgXCJhdXRvXCIgKVxuXHRcdFx0LmNzcyh7IHBvc2l0aW9uOiBcImFic29sdXRlXCIgfSk7XG5cblx0XHRhbmltYXRpb25bIHJlZjIgXSA9IHNob3cgPyBtYXJnaW4gOiBkaXN0YW5jZSArIG1hcmdpbjtcblx0fVxuXG5cdC8vIHN0YXJ0IGF0IDAgaWYgd2UgYXJlIHNob3dpbmdcblx0aWYgKCBzaG93ICkge1xuXHRcdHdyYXBwZXIuY3NzKCByZWYsIDAgKTtcblx0XHRpZiAoICFtb3Rpb24gKSB7XG5cdFx0XHR3cmFwcGVyLmNzcyggcmVmMiwgbWFyZ2luICsgZGlzdGFuY2UgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBBbmltYXRlXG5cdHdyYXBwZXIuYW5pbWF0ZSggYW5pbWF0aW9uLCB7XG5cdFx0ZHVyYXRpb246IG8uZHVyYXRpb24sXG5cdFx0ZWFzaW5nOiBvLmVhc2luZyxcblx0XHRxdWV1ZTogZmFsc2UsXG5cdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBtb2RlID09PSBcImhpZGVcIiApIHtcblx0XHRcdFx0ZWwuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdFx0JC5lZmZlY3RzLnJlc3RvcmUoIGVsLCBwcm9wcyApO1xuXHRcdFx0JC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7XG5cdFx0XHRkb25lKCk7XG5cdFx0fVxuXHR9KTtcbn07XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgRWZmZWN0cyBCb3VuY2UgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9ib3VuY2UtZWZmZWN0L1xuICovXG5cblxudmFyIGVmZmVjdEJvdW5jZSA9ICQuZWZmZWN0cy5lZmZlY3QuYm91bmNlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7XG5cdHZhciBlbCA9ICQoIHRoaXMgKSxcblx0XHRwcm9wcyA9IFsgXCJwb3NpdGlvblwiLCBcInRvcFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIiwgXCJyaWdodFwiLCBcImhlaWdodFwiLCBcIndpZHRoXCIgXSxcblxuXHRcdC8vIGRlZmF1bHRzOlxuXHRcdG1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWwsIG8ubW9kZSB8fCBcImVmZmVjdFwiICksXG5cdFx0aGlkZSA9IG1vZGUgPT09IFwiaGlkZVwiLFxuXHRcdHNob3cgPSBtb2RlID09PSBcInNob3dcIixcblx0XHRkaXJlY3Rpb24gPSBvLmRpcmVjdGlvbiB8fCBcInVwXCIsXG5cdFx0ZGlzdGFuY2UgPSBvLmRpc3RhbmNlLFxuXHRcdHRpbWVzID0gby50aW1lcyB8fCA1LFxuXG5cdFx0Ly8gbnVtYmVyIG9mIGludGVybmFsIGFuaW1hdGlvbnNcblx0XHRhbmltcyA9IHRpbWVzICogMiArICggc2hvdyB8fCBoaWRlID8gMSA6IDAgKSxcblx0XHRzcGVlZCA9IG8uZHVyYXRpb24gLyBhbmltcyxcblx0XHRlYXNpbmcgPSBvLmVhc2luZyxcblxuXHRcdC8vIHV0aWxpdHk6XG5cdFx0cmVmID0gKCBkaXJlY3Rpb24gPT09IFwidXBcIiB8fCBkaXJlY3Rpb24gPT09IFwiZG93blwiICkgPyBcInRvcFwiIDogXCJsZWZ0XCIsXG5cdFx0bW90aW9uID0gKCBkaXJlY3Rpb24gPT09IFwidXBcIiB8fCBkaXJlY3Rpb24gPT09IFwibGVmdFwiICksXG5cdFx0aSxcblx0XHR1cEFuaW0sXG5cdFx0ZG93bkFuaW0sXG5cblx0XHQvLyB3ZSB3aWxsIG5lZWQgdG8gcmUtYXNzZW1ibGUgdGhlIHF1ZXVlIHRvIHN0YWNrIG91ciBhbmltYXRpb25zIGluIHBsYWNlXG5cdFx0cXVldWUgPSBlbC5xdWV1ZSgpLFxuXHRcdHF1ZXVlbGVuID0gcXVldWUubGVuZ3RoO1xuXG5cdC8vIEF2b2lkIHRvdWNoaW5nIG9wYWNpdHkgdG8gcHJldmVudCBjbGVhclR5cGUgYW5kIFBORyBpc3N1ZXMgaW4gSUVcblx0aWYgKCBzaG93IHx8IGhpZGUgKSB7XG5cdFx0cHJvcHMucHVzaCggXCJvcGFjaXR5XCIgKTtcblx0fVxuXG5cdCQuZWZmZWN0cy5zYXZlKCBlbCwgcHJvcHMgKTtcblx0ZWwuc2hvdygpO1xuXHQkLmVmZmVjdHMuY3JlYXRlV3JhcHBlciggZWwgKTsgLy8gQ3JlYXRlIFdyYXBwZXJcblxuXHQvLyBkZWZhdWx0IGRpc3RhbmNlIGZvciB0aGUgQklHR0VTVCBib3VuY2UgaXMgdGhlIG91dGVyIERpc3RhbmNlIC8gM1xuXHRpZiAoICFkaXN0YW5jZSApIHtcblx0XHRkaXN0YW5jZSA9IGVsWyByZWYgPT09IFwidG9wXCIgPyBcIm91dGVySGVpZ2h0XCIgOiBcIm91dGVyV2lkdGhcIiBdKCkgLyAzO1xuXHR9XG5cblx0aWYgKCBzaG93ICkge1xuXHRcdGRvd25BbmltID0geyBvcGFjaXR5OiAxIH07XG5cdFx0ZG93bkFuaW1bIHJlZiBdID0gMDtcblxuXHRcdC8vIGlmIHdlIGFyZSBzaG93aW5nLCBmb3JjZSBvcGFjaXR5IDAgYW5kIHNldCB0aGUgaW5pdGlhbCBwb3NpdGlvblxuXHRcdC8vIHRoZW4gZG8gdGhlIFwiZmlyc3RcIiBhbmltYXRpb25cblx0XHRlbC5jc3MoIFwib3BhY2l0eVwiLCAwIClcblx0XHRcdC5jc3MoIHJlZiwgbW90aW9uID8gLWRpc3RhbmNlICogMiA6IGRpc3RhbmNlICogMiApXG5cdFx0XHQuYW5pbWF0ZSggZG93bkFuaW0sIHNwZWVkLCBlYXNpbmcgKTtcblx0fVxuXG5cdC8vIHN0YXJ0IGF0IHRoZSBzbWFsbGVzdCBkaXN0YW5jZSBpZiB3ZSBhcmUgaGlkaW5nXG5cdGlmICggaGlkZSApIHtcblx0XHRkaXN0YW5jZSA9IGRpc3RhbmNlIC8gTWF0aC5wb3coIDIsIHRpbWVzIC0gMSApO1xuXHR9XG5cblx0ZG93bkFuaW0gPSB7fTtcblx0ZG93bkFuaW1bIHJlZiBdID0gMDtcblx0Ly8gQm91bmNlcyB1cC9kb3duL2xlZnQvcmlnaHQgdGhlbiBiYWNrIHRvIDAgLS0gdGltZXMgKiAyIGFuaW1hdGlvbnMgaGFwcGVuIGhlcmVcblx0Zm9yICggaSA9IDA7IGkgPCB0aW1lczsgaSsrICkge1xuXHRcdHVwQW5pbSA9IHt9O1xuXHRcdHVwQW5pbVsgcmVmIF0gPSAoIG1vdGlvbiA/IFwiLT1cIiA6IFwiKz1cIiApICsgZGlzdGFuY2U7XG5cblx0XHRlbC5hbmltYXRlKCB1cEFuaW0sIHNwZWVkLCBlYXNpbmcgKVxuXHRcdFx0LmFuaW1hdGUoIGRvd25BbmltLCBzcGVlZCwgZWFzaW5nICk7XG5cblx0XHRkaXN0YW5jZSA9IGhpZGUgPyBkaXN0YW5jZSAqIDIgOiBkaXN0YW5jZSAvIDI7XG5cdH1cblxuXHQvLyBMYXN0IEJvdW5jZSB3aGVuIEhpZGluZ1xuXHRpZiAoIGhpZGUgKSB7XG5cdFx0dXBBbmltID0geyBvcGFjaXR5OiAwIH07XG5cdFx0dXBBbmltWyByZWYgXSA9ICggbW90aW9uID8gXCItPVwiIDogXCIrPVwiICkgKyBkaXN0YW5jZTtcblxuXHRcdGVsLmFuaW1hdGUoIHVwQW5pbSwgc3BlZWQsIGVhc2luZyApO1xuXHR9XG5cblx0ZWwucXVldWUoZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBoaWRlICkge1xuXHRcdFx0ZWwuaGlkZSgpO1xuXHRcdH1cblx0XHQkLmVmZmVjdHMucmVzdG9yZSggZWwsIHByb3BzICk7XG5cdFx0JC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7XG5cdFx0ZG9uZSgpO1xuXHR9KTtcblxuXHQvLyBpbmplY3QgYWxsIHRoZSBhbmltYXRpb25zIHdlIGp1c3QgcXVldWVkIHRvIGJlIGZpcnN0IGluIGxpbmUgKGFmdGVyIFwiaW5wcm9ncmVzc1wiKVxuXHRpZiAoIHF1ZXVlbGVuID4gMSkge1xuXHRcdHF1ZXVlLnNwbGljZS5hcHBseSggcXVldWUsXG5cdFx0XHRbIDEsIDAgXS5jb25jYXQoIHF1ZXVlLnNwbGljZSggcXVldWVsZW4sIGFuaW1zICsgMSApICkgKTtcblx0fVxuXHRlbC5kZXF1ZXVlKCk7XG5cbn07XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgRWZmZWN0cyBDbGlwIDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2xpcC1lZmZlY3QvXG4gKi9cblxuXG52YXIgZWZmZWN0Q2xpcCA9ICQuZWZmZWN0cy5lZmZlY3QuY2xpcCA9IGZ1bmN0aW9uKCBvLCBkb25lICkge1xuXHQvLyBDcmVhdGUgZWxlbWVudFxuXHR2YXIgZWwgPSAkKCB0aGlzICksXG5cdFx0cHJvcHMgPSBbIFwicG9zaXRpb25cIiwgXCJ0b3BcIiwgXCJib3R0b21cIiwgXCJsZWZ0XCIsIFwicmlnaHRcIiwgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sXG5cdFx0bW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8IFwiaGlkZVwiICksXG5cdFx0c2hvdyA9IG1vZGUgPT09IFwic2hvd1wiLFxuXHRcdGRpcmVjdGlvbiA9IG8uZGlyZWN0aW9uIHx8IFwidmVydGljYWxcIixcblx0XHR2ZXJ0ID0gZGlyZWN0aW9uID09PSBcInZlcnRpY2FsXCIsXG5cdFx0c2l6ZSA9IHZlcnQgPyBcImhlaWdodFwiIDogXCJ3aWR0aFwiLFxuXHRcdHBvc2l0aW9uID0gdmVydCA/IFwidG9wXCIgOiBcImxlZnRcIixcblx0XHRhbmltYXRpb24gPSB7fSxcblx0XHR3cmFwcGVyLCBhbmltYXRlLCBkaXN0YW5jZTtcblxuXHQvLyBTYXZlICYgU2hvd1xuXHQkLmVmZmVjdHMuc2F2ZSggZWwsIHByb3BzICk7XG5cdGVsLnNob3coKTtcblxuXHQvLyBDcmVhdGUgV3JhcHBlclxuXHR3cmFwcGVyID0gJC5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoIGVsICkuY3NzKHtcblx0XHRvdmVyZmxvdzogXCJoaWRkZW5cIlxuXHR9KTtcblx0YW5pbWF0ZSA9ICggZWxbMF0udGFnTmFtZSA9PT0gXCJJTUdcIiApID8gd3JhcHBlciA6IGVsO1xuXHRkaXN0YW5jZSA9IGFuaW1hdGVbIHNpemUgXSgpO1xuXG5cdC8vIFNoaWZ0XG5cdGlmICggc2hvdyApIHtcblx0XHRhbmltYXRlLmNzcyggc2l6ZSwgMCApO1xuXHRcdGFuaW1hdGUuY3NzKCBwb3NpdGlvbiwgZGlzdGFuY2UgLyAyICk7XG5cdH1cblxuXHQvLyBDcmVhdGUgQW5pbWF0aW9uIE9iamVjdDpcblx0YW5pbWF0aW9uWyBzaXplIF0gPSBzaG93ID8gZGlzdGFuY2UgOiAwO1xuXHRhbmltYXRpb25bIHBvc2l0aW9uIF0gPSBzaG93ID8gMCA6IGRpc3RhbmNlIC8gMjtcblxuXHQvLyBBbmltYXRlXG5cdGFuaW1hdGUuYW5pbWF0ZSggYW5pbWF0aW9uLCB7XG5cdFx0cXVldWU6IGZhbHNlLFxuXHRcdGR1cmF0aW9uOiBvLmR1cmF0aW9uLFxuXHRcdGVhc2luZzogby5lYXNpbmcsXG5cdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhc2hvdyApIHtcblx0XHRcdFx0ZWwuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdFx0JC5lZmZlY3RzLnJlc3RvcmUoIGVsLCBwcm9wcyApO1xuXHRcdFx0JC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7XG5cdFx0XHRkb25lKCk7XG5cdFx0fVxuXHR9KTtcblxufTtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBFZmZlY3RzIERyb3AgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9kcm9wLWVmZmVjdC9cbiAqL1xuXG5cbnZhciBlZmZlY3REcm9wID0gJC5lZmZlY3RzLmVmZmVjdC5kcm9wID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7XG5cblx0dmFyIGVsID0gJCggdGhpcyApLFxuXHRcdHByb3BzID0gWyBcInBvc2l0aW9uXCIsIFwidG9wXCIsIFwiYm90dG9tXCIsIFwibGVmdFwiLCBcInJpZ2h0XCIsIFwib3BhY2l0eVwiLCBcImhlaWdodFwiLCBcIndpZHRoXCIgXSxcblx0XHRtb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsLCBvLm1vZGUgfHwgXCJoaWRlXCIgKSxcblx0XHRzaG93ID0gbW9kZSA9PT0gXCJzaG93XCIsXG5cdFx0ZGlyZWN0aW9uID0gby5kaXJlY3Rpb24gfHwgXCJsZWZ0XCIsXG5cdFx0cmVmID0gKCBkaXJlY3Rpb24gPT09IFwidXBcIiB8fCBkaXJlY3Rpb24gPT09IFwiZG93blwiICkgPyBcInRvcFwiIDogXCJsZWZ0XCIsXG5cdFx0bW90aW9uID0gKCBkaXJlY3Rpb24gPT09IFwidXBcIiB8fCBkaXJlY3Rpb24gPT09IFwibGVmdFwiICkgPyBcInBvc1wiIDogXCJuZWdcIixcblx0XHRhbmltYXRpb24gPSB7XG5cdFx0XHRvcGFjaXR5OiBzaG93ID8gMSA6IDBcblx0XHR9LFxuXHRcdGRpc3RhbmNlO1xuXG5cdC8vIEFkanVzdFxuXHQkLmVmZmVjdHMuc2F2ZSggZWwsIHByb3BzICk7XG5cdGVsLnNob3coKTtcblx0JC5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoIGVsICk7XG5cblx0ZGlzdGFuY2UgPSBvLmRpc3RhbmNlIHx8IGVsWyByZWYgPT09IFwidG9wXCIgPyBcIm91dGVySGVpZ2h0XCIgOiBcIm91dGVyV2lkdGhcIiBdKCB0cnVlICkgLyAyO1xuXG5cdGlmICggc2hvdyApIHtcblx0XHRlbFxuXHRcdFx0LmNzcyggXCJvcGFjaXR5XCIsIDAgKVxuXHRcdFx0LmNzcyggcmVmLCBtb3Rpb24gPT09IFwicG9zXCIgPyAtZGlzdGFuY2UgOiBkaXN0YW5jZSApO1xuXHR9XG5cblx0Ly8gQW5pbWF0aW9uXG5cdGFuaW1hdGlvblsgcmVmIF0gPSAoIHNob3cgP1xuXHRcdCggbW90aW9uID09PSBcInBvc1wiID8gXCIrPVwiIDogXCItPVwiICkgOlxuXHRcdCggbW90aW9uID09PSBcInBvc1wiID8gXCItPVwiIDogXCIrPVwiICkgKSArXG5cdFx0ZGlzdGFuY2U7XG5cblx0Ly8gQW5pbWF0ZVxuXHRlbC5hbmltYXRlKCBhbmltYXRpb24sIHtcblx0XHRxdWV1ZTogZmFsc2UsXG5cdFx0ZHVyYXRpb246IG8uZHVyYXRpb24sXG5cdFx0ZWFzaW5nOiBvLmVhc2luZyxcblx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIG1vZGUgPT09IFwiaGlkZVwiICkge1xuXHRcdFx0XHRlbC5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0XHQkLmVmZmVjdHMucmVzdG9yZSggZWwsIHByb3BzICk7XG5cdFx0XHQkLmVmZmVjdHMucmVtb3ZlV3JhcHBlciggZWwgKTtcblx0XHRcdGRvbmUoKTtcblx0XHR9XG5cdH0pO1xufTtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBFZmZlY3RzIEV4cGxvZGUgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9leHBsb2RlLWVmZmVjdC9cbiAqL1xuXG5cbnZhciBlZmZlY3RFeHBsb2RlID0gJC5lZmZlY3RzLmVmZmVjdC5leHBsb2RlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7XG5cblx0dmFyIHJvd3MgPSBvLnBpZWNlcyA/IE1hdGgucm91bmQoIE1hdGguc3FydCggby5waWVjZXMgKSApIDogMyxcblx0XHRjZWxscyA9IHJvd3MsXG5cdFx0ZWwgPSAkKCB0aGlzICksXG5cdFx0bW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8IFwiaGlkZVwiICksXG5cdFx0c2hvdyA9IG1vZGUgPT09IFwic2hvd1wiLFxuXG5cdFx0Ly8gc2hvdyBhbmQgdGhlbiB2aXNpYmlsaXR5OmhpZGRlbiB0aGUgZWxlbWVudCBiZWZvcmUgY2FsY3VsYXRpbmcgb2Zmc2V0XG5cdFx0b2Zmc2V0ID0gZWwuc2hvdygpLmNzcyggXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIgKS5vZmZzZXQoKSxcblxuXHRcdC8vIHdpZHRoIGFuZCBoZWlnaHQgb2YgYSBwaWVjZVxuXHRcdHdpZHRoID0gTWF0aC5jZWlsKCBlbC5vdXRlcldpZHRoKCkgLyBjZWxscyApLFxuXHRcdGhlaWdodCA9IE1hdGguY2VpbCggZWwub3V0ZXJIZWlnaHQoKSAvIHJvd3MgKSxcblx0XHRwaWVjZXMgPSBbXSxcblxuXHRcdC8vIGxvb3Bcblx0XHRpLCBqLCBsZWZ0LCB0b3AsIG14LCBteTtcblxuXHQvLyBjaGlsZHJlbiBhbmltYXRlIGNvbXBsZXRlOlxuXHRmdW5jdGlvbiBjaGlsZENvbXBsZXRlKCkge1xuXHRcdHBpZWNlcy5wdXNoKCB0aGlzICk7XG5cdFx0aWYgKCBwaWVjZXMubGVuZ3RoID09PSByb3dzICogY2VsbHMgKSB7XG5cdFx0XHRhbmltQ29tcGxldGUoKTtcblx0XHR9XG5cdH1cblxuXHQvLyBjbG9uZSB0aGUgZWxlbWVudCBmb3IgZWFjaCByb3cgYW5kIGNlbGwuXG5cdGZvciAoIGkgPSAwOyBpIDwgcm93cyA7IGkrKyApIHsgLy8gPT09PlxuXHRcdHRvcCA9IG9mZnNldC50b3AgKyBpICogaGVpZ2h0O1xuXHRcdG15ID0gaSAtICggcm93cyAtIDEgKSAvIDIgO1xuXG5cdFx0Zm9yICggaiA9IDA7IGogPCBjZWxscyA7IGorKyApIHsgLy8gfHx8XG5cdFx0XHRsZWZ0ID0gb2Zmc2V0LmxlZnQgKyBqICogd2lkdGg7XG5cdFx0XHRteCA9IGogLSAoIGNlbGxzIC0gMSApIC8gMiA7XG5cblx0XHRcdC8vIENyZWF0ZSBhIGNsb25lIG9mIHRoZSBub3cgaGlkZGVuIG1haW4gZWxlbWVudCB0aGF0IHdpbGwgYmUgYWJzb2x1dGUgcG9zaXRpb25lZFxuXHRcdFx0Ly8gd2l0aGluIGEgd3JhcHBlciBkaXYgb2ZmIHRoZSAtbGVmdCBhbmQgLXRvcCBlcXVhbCB0byBzaXplIG9mIG91ciBwaWVjZXNcblx0XHRcdGVsXG5cdFx0XHRcdC5jbG9uZSgpXG5cdFx0XHRcdC5hcHBlbmRUbyggXCJib2R5XCIgKVxuXHRcdFx0XHQud3JhcCggXCI8ZGl2PjwvZGl2PlwiIClcblx0XHRcdFx0LmNzcyh7XG5cdFx0XHRcdFx0cG9zaXRpb246IFwiYWJzb2x1dGVcIixcblx0XHRcdFx0XHR2aXNpYmlsaXR5OiBcInZpc2libGVcIixcblx0XHRcdFx0XHRsZWZ0OiAtaiAqIHdpZHRoLFxuXHRcdFx0XHRcdHRvcDogLWkgKiBoZWlnaHRcblx0XHRcdFx0fSlcblxuXHRcdFx0Ly8gc2VsZWN0IHRoZSB3cmFwcGVyIC0gbWFrZSBpdCBvdmVyZmxvdzogaGlkZGVuIGFuZCBhYnNvbHV0ZSBwb3NpdGlvbmVkIGJhc2VkIG9uXG5cdFx0XHQvLyB3aGVyZSB0aGUgb3JpZ2luYWwgd2FzIGxvY2F0ZWQgK2xlZnQgYW5kICt0b3AgZXF1YWwgdG8gdGhlIHNpemUgb2YgcGllY2VzXG5cdFx0XHRcdC5wYXJlbnQoKVxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZWZmZWN0cy1leHBsb2RlXCIgKVxuXHRcdFx0XHQuY3NzKHtcblx0XHRcdFx0XHRwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuXHRcdFx0XHRcdG92ZXJmbG93OiBcImhpZGRlblwiLFxuXHRcdFx0XHRcdHdpZHRoOiB3aWR0aCxcblx0XHRcdFx0XHRoZWlnaHQ6IGhlaWdodCxcblx0XHRcdFx0XHRsZWZ0OiBsZWZ0ICsgKCBzaG93ID8gbXggKiB3aWR0aCA6IDAgKSxcblx0XHRcdFx0XHR0b3A6IHRvcCArICggc2hvdyA/IG15ICogaGVpZ2h0IDogMCApLFxuXHRcdFx0XHRcdG9wYWNpdHk6IHNob3cgPyAwIDogMVxuXHRcdFx0XHR9KS5hbmltYXRlKHtcblx0XHRcdFx0XHRsZWZ0OiBsZWZ0ICsgKCBzaG93ID8gMCA6IG14ICogd2lkdGggKSxcblx0XHRcdFx0XHR0b3A6IHRvcCArICggc2hvdyA/IDAgOiBteSAqIGhlaWdodCApLFxuXHRcdFx0XHRcdG9wYWNpdHk6IHNob3cgPyAxIDogMFxuXHRcdFx0XHR9LCBvLmR1cmF0aW9uIHx8IDUwMCwgby5lYXNpbmcsIGNoaWxkQ29tcGxldGUgKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBhbmltQ29tcGxldGUoKSB7XG5cdFx0ZWwuY3NzKHtcblx0XHRcdHZpc2liaWxpdHk6IFwidmlzaWJsZVwiXG5cdFx0fSk7XG5cdFx0JCggcGllY2VzICkucmVtb3ZlKCk7XG5cdFx0aWYgKCAhc2hvdyApIHtcblx0XHRcdGVsLmhpZGUoKTtcblx0XHR9XG5cdFx0ZG9uZSgpO1xuXHR9XG59O1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIEVmZmVjdHMgRmFkZSAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2ZhZGUtZWZmZWN0L1xuICovXG5cblxudmFyIGVmZmVjdEZhZGUgPSAkLmVmZmVjdHMuZWZmZWN0LmZhZGUgPSBmdW5jdGlvbiggbywgZG9uZSApIHtcblx0dmFyIGVsID0gJCggdGhpcyApLFxuXHRcdG1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWwsIG8ubW9kZSB8fCBcInRvZ2dsZVwiICk7XG5cblx0ZWwuYW5pbWF0ZSh7XG5cdFx0b3BhY2l0eTogbW9kZVxuXHR9LCB7XG5cdFx0cXVldWU6IGZhbHNlLFxuXHRcdGR1cmF0aW9uOiBvLmR1cmF0aW9uLFxuXHRcdGVhc2luZzogby5lYXNpbmcsXG5cdFx0Y29tcGxldGU6IGRvbmVcblx0fSk7XG59O1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIEVmZmVjdHMgRm9sZCAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2ZvbGQtZWZmZWN0L1xuICovXG5cblxudmFyIGVmZmVjdEZvbGQgPSAkLmVmZmVjdHMuZWZmZWN0LmZvbGQgPSBmdW5jdGlvbiggbywgZG9uZSApIHtcblxuXHQvLyBDcmVhdGUgZWxlbWVudFxuXHR2YXIgZWwgPSAkKCB0aGlzICksXG5cdFx0cHJvcHMgPSBbIFwicG9zaXRpb25cIiwgXCJ0b3BcIiwgXCJib3R0b21cIiwgXCJsZWZ0XCIsIFwicmlnaHRcIiwgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sXG5cdFx0bW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8IFwiaGlkZVwiICksXG5cdFx0c2hvdyA9IG1vZGUgPT09IFwic2hvd1wiLFxuXHRcdGhpZGUgPSBtb2RlID09PSBcImhpZGVcIixcblx0XHRzaXplID0gby5zaXplIHx8IDE1LFxuXHRcdHBlcmNlbnQgPSAvKFswLTldKyklLy5leGVjKCBzaXplICksXG5cdFx0aG9yaXpGaXJzdCA9ICEhby5ob3JpekZpcnN0LFxuXHRcdHdpZHRoRmlyc3QgPSBzaG93ICE9PSBob3JpekZpcnN0LFxuXHRcdHJlZiA9IHdpZHRoRmlyc3QgPyBbIFwid2lkdGhcIiwgXCJoZWlnaHRcIiBdIDogWyBcImhlaWdodFwiLCBcIndpZHRoXCIgXSxcblx0XHRkdXJhdGlvbiA9IG8uZHVyYXRpb24gLyAyLFxuXHRcdHdyYXBwZXIsIGRpc3RhbmNlLFxuXHRcdGFuaW1hdGlvbjEgPSB7fSxcblx0XHRhbmltYXRpb24yID0ge307XG5cblx0JC5lZmZlY3RzLnNhdmUoIGVsLCBwcm9wcyApO1xuXHRlbC5zaG93KCk7XG5cblx0Ly8gQ3JlYXRlIFdyYXBwZXJcblx0d3JhcHBlciA9ICQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApLmNzcyh7XG5cdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCJcblx0fSk7XG5cdGRpc3RhbmNlID0gd2lkdGhGaXJzdCA/XG5cdFx0WyB3cmFwcGVyLndpZHRoKCksIHdyYXBwZXIuaGVpZ2h0KCkgXSA6XG5cdFx0WyB3cmFwcGVyLmhlaWdodCgpLCB3cmFwcGVyLndpZHRoKCkgXTtcblxuXHRpZiAoIHBlcmNlbnQgKSB7XG5cdFx0c2l6ZSA9IHBhcnNlSW50KCBwZXJjZW50WyAxIF0sIDEwICkgLyAxMDAgKiBkaXN0YW5jZVsgaGlkZSA/IDAgOiAxIF07XG5cdH1cblx0aWYgKCBzaG93ICkge1xuXHRcdHdyYXBwZXIuY3NzKCBob3JpekZpcnN0ID8ge1xuXHRcdFx0aGVpZ2h0OiAwLFxuXHRcdFx0d2lkdGg6IHNpemVcblx0XHR9IDoge1xuXHRcdFx0aGVpZ2h0OiBzaXplLFxuXHRcdFx0d2lkdGg6IDBcblx0XHR9KTtcblx0fVxuXG5cdC8vIEFuaW1hdGlvblxuXHRhbmltYXRpb24xWyByZWZbIDAgXSBdID0gc2hvdyA/IGRpc3RhbmNlWyAwIF0gOiBzaXplO1xuXHRhbmltYXRpb24yWyByZWZbIDEgXSBdID0gc2hvdyA/IGRpc3RhbmNlWyAxIF0gOiAwO1xuXG5cdC8vIEFuaW1hdGVcblx0d3JhcHBlclxuXHRcdC5hbmltYXRlKCBhbmltYXRpb24xLCBkdXJhdGlvbiwgby5lYXNpbmcgKVxuXHRcdC5hbmltYXRlKCBhbmltYXRpb24yLCBkdXJhdGlvbiwgby5lYXNpbmcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBoaWRlICkge1xuXHRcdFx0XHRlbC5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0XHQkLmVmZmVjdHMucmVzdG9yZSggZWwsIHByb3BzICk7XG5cdFx0XHQkLmVmZmVjdHMucmVtb3ZlV3JhcHBlciggZWwgKTtcblx0XHRcdGRvbmUoKTtcblx0XHR9KTtcblxufTtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBFZmZlY3RzIEhpZ2hsaWdodCAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2hpZ2hsaWdodC1lZmZlY3QvXG4gKi9cblxuXG52YXIgZWZmZWN0SGlnaGxpZ2h0ID0gJC5lZmZlY3RzLmVmZmVjdC5oaWdobGlnaHQgPSBmdW5jdGlvbiggbywgZG9uZSApIHtcblx0dmFyIGVsZW0gPSAkKCB0aGlzICksXG5cdFx0cHJvcHMgPSBbIFwiYmFja2dyb3VuZEltYWdlXCIsIFwiYmFja2dyb3VuZENvbG9yXCIsIFwib3BhY2l0eVwiIF0sXG5cdFx0bW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbGVtLCBvLm1vZGUgfHwgXCJzaG93XCIgKSxcblx0XHRhbmltYXRpb24gPSB7XG5cdFx0XHRiYWNrZ3JvdW5kQ29sb3I6IGVsZW0uY3NzKCBcImJhY2tncm91bmRDb2xvclwiIClcblx0XHR9O1xuXG5cdGlmIChtb2RlID09PSBcImhpZGVcIikge1xuXHRcdGFuaW1hdGlvbi5vcGFjaXR5ID0gMDtcblx0fVxuXG5cdCQuZWZmZWN0cy5zYXZlKCBlbGVtLCBwcm9wcyApO1xuXG5cdGVsZW1cblx0XHQuc2hvdygpXG5cdFx0LmNzcyh7XG5cdFx0XHRiYWNrZ3JvdW5kSW1hZ2U6IFwibm9uZVwiLFxuXHRcdFx0YmFja2dyb3VuZENvbG9yOiBvLmNvbG9yIHx8IFwiI2ZmZmY5OVwiXG5cdFx0fSlcblx0XHQuYW5pbWF0ZSggYW5pbWF0aW9uLCB7XG5cdFx0XHRxdWV1ZTogZmFsc2UsXG5cdFx0XHRkdXJhdGlvbjogby5kdXJhdGlvbixcblx0XHRcdGVhc2luZzogby5lYXNpbmcsXG5cdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbW9kZSA9PT0gXCJoaWRlXCIgKSB7XG5cdFx0XHRcdFx0ZWxlbS5oaWRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0JC5lZmZlY3RzLnJlc3RvcmUoIGVsZW0sIHByb3BzICk7XG5cdFx0XHRcdGRvbmUoKTtcblx0XHRcdH1cblx0XHR9KTtcbn07XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgRWZmZWN0cyBTaXplIDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc2l6ZS1lZmZlY3QvXG4gKi9cblxuXG52YXIgZWZmZWN0U2l6ZSA9ICQuZWZmZWN0cy5lZmZlY3Quc2l6ZSA9IGZ1bmN0aW9uKCBvLCBkb25lICkge1xuXG5cdC8vIENyZWF0ZSBlbGVtZW50XG5cdHZhciBvcmlnaW5hbCwgYmFzZWxpbmUsIGZhY3Rvcixcblx0XHRlbCA9ICQoIHRoaXMgKSxcblx0XHRwcm9wczAgPSBbIFwicG9zaXRpb25cIiwgXCJ0b3BcIiwgXCJib3R0b21cIiwgXCJsZWZ0XCIsIFwicmlnaHRcIiwgXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcIm92ZXJmbG93XCIsIFwib3BhY2l0eVwiIF0sXG5cblx0XHQvLyBBbHdheXMgcmVzdG9yZVxuXHRcdHByb3BzMSA9IFsgXCJwb3NpdGlvblwiLCBcInRvcFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIiwgXCJyaWdodFwiLCBcIm92ZXJmbG93XCIsIFwib3BhY2l0eVwiIF0sXG5cblx0XHQvLyBDb3B5IGZvciBjaGlsZHJlblxuXHRcdHByb3BzMiA9IFsgXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcIm92ZXJmbG93XCIgXSxcblx0XHRjUHJvcHMgPSBbIFwiZm9udFNpemVcIiBdLFxuXHRcdHZQcm9wcyA9IFsgXCJib3JkZXJUb3BXaWR0aFwiLCBcImJvcmRlckJvdHRvbVdpZHRoXCIsIFwicGFkZGluZ1RvcFwiLCBcInBhZGRpbmdCb3R0b21cIiBdLFxuXHRcdGhQcm9wcyA9IFsgXCJib3JkZXJMZWZ0V2lkdGhcIiwgXCJib3JkZXJSaWdodFdpZHRoXCIsIFwicGFkZGluZ0xlZnRcIiwgXCJwYWRkaW5nUmlnaHRcIiBdLFxuXG5cdFx0Ly8gU2V0IG9wdGlvbnNcblx0XHRtb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsLCBvLm1vZGUgfHwgXCJlZmZlY3RcIiApLFxuXHRcdHJlc3RvcmUgPSBvLnJlc3RvcmUgfHwgbW9kZSAhPT0gXCJlZmZlY3RcIixcblx0XHRzY2FsZSA9IG8uc2NhbGUgfHwgXCJib3RoXCIsXG5cdFx0b3JpZ2luID0gby5vcmlnaW4gfHwgWyBcIm1pZGRsZVwiLCBcImNlbnRlclwiIF0sXG5cdFx0cG9zaXRpb24gPSBlbC5jc3MoIFwicG9zaXRpb25cIiApLFxuXHRcdHByb3BzID0gcmVzdG9yZSA/IHByb3BzMCA6IHByb3BzMSxcblx0XHR6ZXJvID0ge1xuXHRcdFx0aGVpZ2h0OiAwLFxuXHRcdFx0d2lkdGg6IDAsXG5cdFx0XHRvdXRlckhlaWdodDogMCxcblx0XHRcdG91dGVyV2lkdGg6IDBcblx0XHR9O1xuXG5cdGlmICggbW9kZSA9PT0gXCJzaG93XCIgKSB7XG5cdFx0ZWwuc2hvdygpO1xuXHR9XG5cdG9yaWdpbmFsID0ge1xuXHRcdGhlaWdodDogZWwuaGVpZ2h0KCksXG5cdFx0d2lkdGg6IGVsLndpZHRoKCksXG5cdFx0b3V0ZXJIZWlnaHQ6IGVsLm91dGVySGVpZ2h0KCksXG5cdFx0b3V0ZXJXaWR0aDogZWwub3V0ZXJXaWR0aCgpXG5cdH07XG5cblx0aWYgKCBvLm1vZGUgPT09IFwidG9nZ2xlXCIgJiYgbW9kZSA9PT0gXCJzaG93XCIgKSB7XG5cdFx0ZWwuZnJvbSA9IG8udG8gfHwgemVybztcblx0XHRlbC50byA9IG8uZnJvbSB8fCBvcmlnaW5hbDtcblx0fSBlbHNlIHtcblx0XHRlbC5mcm9tID0gby5mcm9tIHx8ICggbW9kZSA9PT0gXCJzaG93XCIgPyB6ZXJvIDogb3JpZ2luYWwgKTtcblx0XHRlbC50byA9IG8udG8gfHwgKCBtb2RlID09PSBcImhpZGVcIiA/IHplcm8gOiBvcmlnaW5hbCApO1xuXHR9XG5cblx0Ly8gU2V0IHNjYWxpbmcgZmFjdG9yXG5cdGZhY3RvciA9IHtcblx0XHRmcm9tOiB7XG5cdFx0XHR5OiBlbC5mcm9tLmhlaWdodCAvIG9yaWdpbmFsLmhlaWdodCxcblx0XHRcdHg6IGVsLmZyb20ud2lkdGggLyBvcmlnaW5hbC53aWR0aFxuXHRcdH0sXG5cdFx0dG86IHtcblx0XHRcdHk6IGVsLnRvLmhlaWdodCAvIG9yaWdpbmFsLmhlaWdodCxcblx0XHRcdHg6IGVsLnRvLndpZHRoIC8gb3JpZ2luYWwud2lkdGhcblx0XHR9XG5cdH07XG5cblx0Ly8gU2NhbGUgdGhlIGNzcyBib3hcblx0aWYgKCBzY2FsZSA9PT0gXCJib3hcIiB8fCBzY2FsZSA9PT0gXCJib3RoXCIgKSB7XG5cblx0XHQvLyBWZXJ0aWNhbCBwcm9wcyBzY2FsaW5nXG5cdFx0aWYgKCBmYWN0b3IuZnJvbS55ICE9PSBmYWN0b3IudG8ueSApIHtcblx0XHRcdHByb3BzID0gcHJvcHMuY29uY2F0KCB2UHJvcHMgKTtcblx0XHRcdGVsLmZyb20gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIHZQcm9wcywgZmFjdG9yLmZyb20ueSwgZWwuZnJvbSApO1xuXHRcdFx0ZWwudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIHZQcm9wcywgZmFjdG9yLnRvLnksIGVsLnRvICk7XG5cdFx0fVxuXG5cdFx0Ly8gSG9yaXpvbnRhbCBwcm9wcyBzY2FsaW5nXG5cdFx0aWYgKCBmYWN0b3IuZnJvbS54ICE9PSBmYWN0b3IudG8ueCApIHtcblx0XHRcdHByb3BzID0gcHJvcHMuY29uY2F0KCBoUHJvcHMgKTtcblx0XHRcdGVsLmZyb20gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIGhQcm9wcywgZmFjdG9yLmZyb20ueCwgZWwuZnJvbSApO1xuXHRcdFx0ZWwudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIGhQcm9wcywgZmFjdG9yLnRvLngsIGVsLnRvICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gU2NhbGUgdGhlIGNvbnRlbnRcblx0aWYgKCBzY2FsZSA9PT0gXCJjb250ZW50XCIgfHwgc2NhbGUgPT09IFwiYm90aFwiICkge1xuXG5cdFx0Ly8gVmVydGljYWwgcHJvcHMgc2NhbGluZ1xuXHRcdGlmICggZmFjdG9yLmZyb20ueSAhPT0gZmFjdG9yLnRvLnkgKSB7XG5cdFx0XHRwcm9wcyA9IHByb3BzLmNvbmNhdCggY1Byb3BzICkuY29uY2F0KCBwcm9wczIgKTtcblx0XHRcdGVsLmZyb20gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIGNQcm9wcywgZmFjdG9yLmZyb20ueSwgZWwuZnJvbSApO1xuXHRcdFx0ZWwudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIGNQcm9wcywgZmFjdG9yLnRvLnksIGVsLnRvICk7XG5cdFx0fVxuXHR9XG5cblx0JC5lZmZlY3RzLnNhdmUoIGVsLCBwcm9wcyApO1xuXHRlbC5zaG93KCk7XG5cdCQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApO1xuXHRlbC5jc3MoIFwib3ZlcmZsb3dcIiwgXCJoaWRkZW5cIiApLmNzcyggZWwuZnJvbSApO1xuXG5cdC8vIEFkanVzdFxuXHRpZiAob3JpZ2luKSB7IC8vIENhbGN1bGF0ZSBiYXNlbGluZSBzaGlmdHNcblx0XHRiYXNlbGluZSA9ICQuZWZmZWN0cy5nZXRCYXNlbGluZSggb3JpZ2luLCBvcmlnaW5hbCApO1xuXHRcdGVsLmZyb20udG9wID0gKCBvcmlnaW5hbC5vdXRlckhlaWdodCAtIGVsLm91dGVySGVpZ2h0KCkgKSAqIGJhc2VsaW5lLnk7XG5cdFx0ZWwuZnJvbS5sZWZ0ID0gKCBvcmlnaW5hbC5vdXRlcldpZHRoIC0gZWwub3V0ZXJXaWR0aCgpICkgKiBiYXNlbGluZS54O1xuXHRcdGVsLnRvLnRvcCA9ICggb3JpZ2luYWwub3V0ZXJIZWlnaHQgLSBlbC50by5vdXRlckhlaWdodCApICogYmFzZWxpbmUueTtcblx0XHRlbC50by5sZWZ0ID0gKCBvcmlnaW5hbC5vdXRlcldpZHRoIC0gZWwudG8ub3V0ZXJXaWR0aCApICogYmFzZWxpbmUueDtcblx0fVxuXHRlbC5jc3MoIGVsLmZyb20gKTsgLy8gc2V0IHRvcCAmIGxlZnRcblxuXHQvLyBBbmltYXRlXG5cdGlmICggc2NhbGUgPT09IFwiY29udGVudFwiIHx8IHNjYWxlID09PSBcImJvdGhcIiApIHsgLy8gU2NhbGUgdGhlIGNoaWxkcmVuXG5cblx0XHQvLyBBZGQgbWFyZ2lucy9mb250LXNpemVcblx0XHR2UHJvcHMgPSB2UHJvcHMuY29uY2F0KFsgXCJtYXJnaW5Ub3BcIiwgXCJtYXJnaW5Cb3R0b21cIiBdKS5jb25jYXQoY1Byb3BzKTtcblx0XHRoUHJvcHMgPSBoUHJvcHMuY29uY2F0KFsgXCJtYXJnaW5MZWZ0XCIsIFwibWFyZ2luUmlnaHRcIiBdKTtcblx0XHRwcm9wczIgPSBwcm9wczAuY29uY2F0KHZQcm9wcykuY29uY2F0KGhQcm9wcyk7XG5cblx0XHRlbC5maW5kKCBcIipbd2lkdGhdXCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjaGlsZCA9ICQoIHRoaXMgKSxcblx0XHRcdFx0Y19vcmlnaW5hbCA9IHtcblx0XHRcdFx0XHRoZWlnaHQ6IGNoaWxkLmhlaWdodCgpLFxuXHRcdFx0XHRcdHdpZHRoOiBjaGlsZC53aWR0aCgpLFxuXHRcdFx0XHRcdG91dGVySGVpZ2h0OiBjaGlsZC5vdXRlckhlaWdodCgpLFxuXHRcdFx0XHRcdG91dGVyV2lkdGg6IGNoaWxkLm91dGVyV2lkdGgoKVxuXHRcdFx0XHR9O1xuXHRcdFx0aWYgKHJlc3RvcmUpIHtcblx0XHRcdFx0JC5lZmZlY3RzLnNhdmUoY2hpbGQsIHByb3BzMik7XG5cdFx0XHR9XG5cblx0XHRcdGNoaWxkLmZyb20gPSB7XG5cdFx0XHRcdGhlaWdodDogY19vcmlnaW5hbC5oZWlnaHQgKiBmYWN0b3IuZnJvbS55LFxuXHRcdFx0XHR3aWR0aDogY19vcmlnaW5hbC53aWR0aCAqIGZhY3Rvci5mcm9tLngsXG5cdFx0XHRcdG91dGVySGVpZ2h0OiBjX29yaWdpbmFsLm91dGVySGVpZ2h0ICogZmFjdG9yLmZyb20ueSxcblx0XHRcdFx0b3V0ZXJXaWR0aDogY19vcmlnaW5hbC5vdXRlcldpZHRoICogZmFjdG9yLmZyb20ueFxuXHRcdFx0fTtcblx0XHRcdGNoaWxkLnRvID0ge1xuXHRcdFx0XHRoZWlnaHQ6IGNfb3JpZ2luYWwuaGVpZ2h0ICogZmFjdG9yLnRvLnksXG5cdFx0XHRcdHdpZHRoOiBjX29yaWdpbmFsLndpZHRoICogZmFjdG9yLnRvLngsXG5cdFx0XHRcdG91dGVySGVpZ2h0OiBjX29yaWdpbmFsLmhlaWdodCAqIGZhY3Rvci50by55LFxuXHRcdFx0XHRvdXRlcldpZHRoOiBjX29yaWdpbmFsLndpZHRoICogZmFjdG9yLnRvLnhcblx0XHRcdH07XG5cblx0XHRcdC8vIFZlcnRpY2FsIHByb3BzIHNjYWxpbmdcblx0XHRcdGlmICggZmFjdG9yLmZyb20ueSAhPT0gZmFjdG9yLnRvLnkgKSB7XG5cdFx0XHRcdGNoaWxkLmZyb20gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggY2hpbGQsIHZQcm9wcywgZmFjdG9yLmZyb20ueSwgY2hpbGQuZnJvbSApO1xuXHRcdFx0XHRjaGlsZC50byA9ICQuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKCBjaGlsZCwgdlByb3BzLCBmYWN0b3IudG8ueSwgY2hpbGQudG8gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSG9yaXpvbnRhbCBwcm9wcyBzY2FsaW5nXG5cdFx0XHRpZiAoIGZhY3Rvci5mcm9tLnggIT09IGZhY3Rvci50by54ICkge1xuXHRcdFx0XHRjaGlsZC5mcm9tID0gJC5lZmZlY3RzLnNldFRyYW5zaXRpb24oIGNoaWxkLCBoUHJvcHMsIGZhY3Rvci5mcm9tLngsIGNoaWxkLmZyb20gKTtcblx0XHRcdFx0Y2hpbGQudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggY2hpbGQsIGhQcm9wcywgZmFjdG9yLnRvLngsIGNoaWxkLnRvICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFuaW1hdGUgY2hpbGRyZW5cblx0XHRcdGNoaWxkLmNzcyggY2hpbGQuZnJvbSApO1xuXHRcdFx0Y2hpbGQuYW5pbWF0ZSggY2hpbGQudG8sIG8uZHVyYXRpb24sIG8uZWFzaW5nLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBSZXN0b3JlIGNoaWxkcmVuXG5cdFx0XHRcdGlmICggcmVzdG9yZSApIHtcblx0XHRcdFx0XHQkLmVmZmVjdHMucmVzdG9yZSggY2hpbGQsIHByb3BzMiApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIEFuaW1hdGVcblx0ZWwuYW5pbWF0ZSggZWwudG8sIHtcblx0XHRxdWV1ZTogZmFsc2UsXG5cdFx0ZHVyYXRpb246IG8uZHVyYXRpb24sXG5cdFx0ZWFzaW5nOiBvLmVhc2luZyxcblx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGVsLnRvLm9wYWNpdHkgPT09IDAgKSB7XG5cdFx0XHRcdGVsLmNzcyggXCJvcGFjaXR5XCIsIGVsLmZyb20ub3BhY2l0eSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBtb2RlID09PSBcImhpZGVcIiApIHtcblx0XHRcdFx0ZWwuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdFx0JC5lZmZlY3RzLnJlc3RvcmUoIGVsLCBwcm9wcyApO1xuXHRcdFx0aWYgKCAhcmVzdG9yZSApIHtcblxuXHRcdFx0XHQvLyB3ZSBuZWVkIHRvIGNhbGN1bGF0ZSBvdXIgbmV3IHBvc2l0aW9uaW5nIGJhc2VkIG9uIHRoZSBzY2FsaW5nXG5cdFx0XHRcdGlmICggcG9zaXRpb24gPT09IFwic3RhdGljXCIgKSB7XG5cdFx0XHRcdFx0ZWwuY3NzKHtcblx0XHRcdFx0XHRcdHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG5cdFx0XHRcdFx0XHR0b3A6IGVsLnRvLnRvcCxcblx0XHRcdFx0XHRcdGxlZnQ6IGVsLnRvLmxlZnRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkLmVhY2goWyBcInRvcFwiLCBcImxlZnRcIiBdLCBmdW5jdGlvbiggaWR4LCBwb3MgKSB7XG5cdFx0XHRcdFx0XHRlbC5jc3MoIHBvcywgZnVuY3Rpb24oIF8sIHN0ciApIHtcblx0XHRcdFx0XHRcdFx0dmFyIHZhbCA9IHBhcnNlSW50KCBzdHIsIDEwICksXG5cdFx0XHRcdFx0XHRcdFx0dG9SZWYgPSBpZHggPyBlbC50by5sZWZ0IDogZWwudG8udG9wO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGlmIG9yaWdpbmFsIHdhcyBcImF1dG9cIiwgcmVjYWxjdWxhdGUgdGhlIG5ldyB2YWx1ZSBmcm9tIHdyYXBwZXJcblx0XHRcdFx0XHRcdFx0aWYgKCBzdHIgPT09IFwiYXV0b1wiICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0b1JlZiArIFwicHhcIjtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdHJldHVybiB2YWwgKyB0b1JlZiArIFwicHhcIjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdCQuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKCBlbCApO1xuXHRcdFx0ZG9uZSgpO1xuXHRcdH1cblx0fSk7XG5cbn07XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgRWZmZWN0cyBTY2FsZSAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3NjYWxlLWVmZmVjdC9cbiAqL1xuXG5cbnZhciBlZmZlY3RTY2FsZSA9ICQuZWZmZWN0cy5lZmZlY3Quc2NhbGUgPSBmdW5jdGlvbiggbywgZG9uZSApIHtcblxuXHQvLyBDcmVhdGUgZWxlbWVudFxuXHR2YXIgZWwgPSAkKCB0aGlzICksXG5cdFx0b3B0aW9ucyA9ICQuZXh0ZW5kKCB0cnVlLCB7fSwgbyApLFxuXHRcdG1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWwsIG8ubW9kZSB8fCBcImVmZmVjdFwiICksXG5cdFx0cGVyY2VudCA9IHBhcnNlSW50KCBvLnBlcmNlbnQsIDEwICkgfHxcblx0XHRcdCggcGFyc2VJbnQoIG8ucGVyY2VudCwgMTAgKSA9PT0gMCA/IDAgOiAoIG1vZGUgPT09IFwiaGlkZVwiID8gMCA6IDEwMCApICksXG5cdFx0ZGlyZWN0aW9uID0gby5kaXJlY3Rpb24gfHwgXCJib3RoXCIsXG5cdFx0b3JpZ2luID0gby5vcmlnaW4sXG5cdFx0b3JpZ2luYWwgPSB7XG5cdFx0XHRoZWlnaHQ6IGVsLmhlaWdodCgpLFxuXHRcdFx0d2lkdGg6IGVsLndpZHRoKCksXG5cdFx0XHRvdXRlckhlaWdodDogZWwub3V0ZXJIZWlnaHQoKSxcblx0XHRcdG91dGVyV2lkdGg6IGVsLm91dGVyV2lkdGgoKVxuXHRcdH0sXG5cdFx0ZmFjdG9yID0ge1xuXHRcdFx0eTogZGlyZWN0aW9uICE9PSBcImhvcml6b250YWxcIiA/IChwZXJjZW50IC8gMTAwKSA6IDEsXG5cdFx0XHR4OiBkaXJlY3Rpb24gIT09IFwidmVydGljYWxcIiA/IChwZXJjZW50IC8gMTAwKSA6IDFcblx0XHR9O1xuXG5cdC8vIFdlIGFyZSBnb2luZyB0byBwYXNzIHRoaXMgZWZmZWN0IHRvIHRoZSBzaXplIGVmZmVjdDpcblx0b3B0aW9ucy5lZmZlY3QgPSBcInNpemVcIjtcblx0b3B0aW9ucy5xdWV1ZSA9IGZhbHNlO1xuXHRvcHRpb25zLmNvbXBsZXRlID0gZG9uZTtcblxuXHQvLyBTZXQgZGVmYXVsdCBvcmlnaW4gYW5kIHJlc3RvcmUgZm9yIHNob3cvaGlkZVxuXHRpZiAoIG1vZGUgIT09IFwiZWZmZWN0XCIgKSB7XG5cdFx0b3B0aW9ucy5vcmlnaW4gPSBvcmlnaW4gfHwgWyBcIm1pZGRsZVwiLCBcImNlbnRlclwiIF07XG5cdFx0b3B0aW9ucy5yZXN0b3JlID0gdHJ1ZTtcblx0fVxuXG5cdG9wdGlvbnMuZnJvbSA9IG8uZnJvbSB8fCAoIG1vZGUgPT09IFwic2hvd1wiID8ge1xuXHRcdGhlaWdodDogMCxcblx0XHR3aWR0aDogMCxcblx0XHRvdXRlckhlaWdodDogMCxcblx0XHRvdXRlcldpZHRoOiAwXG5cdH0gOiBvcmlnaW5hbCApO1xuXHRvcHRpb25zLnRvID0ge1xuXHRcdGhlaWdodDogb3JpZ2luYWwuaGVpZ2h0ICogZmFjdG9yLnksXG5cdFx0d2lkdGg6IG9yaWdpbmFsLndpZHRoICogZmFjdG9yLngsXG5cdFx0b3V0ZXJIZWlnaHQ6IG9yaWdpbmFsLm91dGVySGVpZ2h0ICogZmFjdG9yLnksXG5cdFx0b3V0ZXJXaWR0aDogb3JpZ2luYWwub3V0ZXJXaWR0aCAqIGZhY3Rvci54XG5cdH07XG5cblx0Ly8gRmFkZSBvcHRpb24gdG8gc3VwcG9ydCBwdWZmXG5cdGlmICggb3B0aW9ucy5mYWRlICkge1xuXHRcdGlmICggbW9kZSA9PT0gXCJzaG93XCIgKSB7XG5cdFx0XHRvcHRpb25zLmZyb20ub3BhY2l0eSA9IDA7XG5cdFx0XHRvcHRpb25zLnRvLm9wYWNpdHkgPSAxO1xuXHRcdH1cblx0XHRpZiAoIG1vZGUgPT09IFwiaGlkZVwiICkge1xuXHRcdFx0b3B0aW9ucy5mcm9tLm9wYWNpdHkgPSAxO1xuXHRcdFx0b3B0aW9ucy50by5vcGFjaXR5ID0gMDtcblx0XHR9XG5cdH1cblxuXHQvLyBBbmltYXRlXG5cdGVsLmVmZmVjdCggb3B0aW9ucyApO1xuXG59O1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIEVmZmVjdHMgUHVmZiAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3B1ZmYtZWZmZWN0L1xuICovXG5cblxudmFyIGVmZmVjdFB1ZmYgPSAkLmVmZmVjdHMuZWZmZWN0LnB1ZmYgPSBmdW5jdGlvbiggbywgZG9uZSApIHtcblx0dmFyIGVsZW0gPSAkKCB0aGlzICksXG5cdFx0bW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbGVtLCBvLm1vZGUgfHwgXCJoaWRlXCIgKSxcblx0XHRoaWRlID0gbW9kZSA9PT0gXCJoaWRlXCIsXG5cdFx0cGVyY2VudCA9IHBhcnNlSW50KCBvLnBlcmNlbnQsIDEwICkgfHwgMTUwLFxuXHRcdGZhY3RvciA9IHBlcmNlbnQgLyAxMDAsXG5cdFx0b3JpZ2luYWwgPSB7XG5cdFx0XHRoZWlnaHQ6IGVsZW0uaGVpZ2h0KCksXG5cdFx0XHR3aWR0aDogZWxlbS53aWR0aCgpLFxuXHRcdFx0b3V0ZXJIZWlnaHQ6IGVsZW0ub3V0ZXJIZWlnaHQoKSxcblx0XHRcdG91dGVyV2lkdGg6IGVsZW0ub3V0ZXJXaWR0aCgpXG5cdFx0fTtcblxuXHQkLmV4dGVuZCggbywge1xuXHRcdGVmZmVjdDogXCJzY2FsZVwiLFxuXHRcdHF1ZXVlOiBmYWxzZSxcblx0XHRmYWRlOiB0cnVlLFxuXHRcdG1vZGU6IG1vZGUsXG5cdFx0Y29tcGxldGU6IGRvbmUsXG5cdFx0cGVyY2VudDogaGlkZSA/IHBlcmNlbnQgOiAxMDAsXG5cdFx0ZnJvbTogaGlkZSA/XG5cdFx0XHRvcmlnaW5hbCA6XG5cdFx0XHR7XG5cdFx0XHRcdGhlaWdodDogb3JpZ2luYWwuaGVpZ2h0ICogZmFjdG9yLFxuXHRcdFx0XHR3aWR0aDogb3JpZ2luYWwud2lkdGggKiBmYWN0b3IsXG5cdFx0XHRcdG91dGVySGVpZ2h0OiBvcmlnaW5hbC5vdXRlckhlaWdodCAqIGZhY3Rvcixcblx0XHRcdFx0b3V0ZXJXaWR0aDogb3JpZ2luYWwub3V0ZXJXaWR0aCAqIGZhY3RvclxuXHRcdFx0fVxuXHR9KTtcblxuXHRlbGVtLmVmZmVjdCggbyApO1xufTtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBFZmZlY3RzIFB1bHNhdGUgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9wdWxzYXRlLWVmZmVjdC9cbiAqL1xuXG5cbnZhciBlZmZlY3RQdWxzYXRlID0gJC5lZmZlY3RzLmVmZmVjdC5wdWxzYXRlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7XG5cdHZhciBlbGVtID0gJCggdGhpcyApLFxuXHRcdG1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWxlbSwgby5tb2RlIHx8IFwic2hvd1wiICksXG5cdFx0c2hvdyA9IG1vZGUgPT09IFwic2hvd1wiLFxuXHRcdGhpZGUgPSBtb2RlID09PSBcImhpZGVcIixcblx0XHRzaG93aGlkZSA9ICggc2hvdyB8fCBtb2RlID09PSBcImhpZGVcIiApLFxuXG5cdFx0Ly8gc2hvd2luZyBvciBoaWRpbmcgbGVhdmVzIG9mIHRoZSBcImxhc3RcIiBhbmltYXRpb25cblx0XHRhbmltcyA9ICggKCBvLnRpbWVzIHx8IDUgKSAqIDIgKSArICggc2hvd2hpZGUgPyAxIDogMCApLFxuXHRcdGR1cmF0aW9uID0gby5kdXJhdGlvbiAvIGFuaW1zLFxuXHRcdGFuaW1hdGVUbyA9IDAsXG5cdFx0cXVldWUgPSBlbGVtLnF1ZXVlKCksXG5cdFx0cXVldWVsZW4gPSBxdWV1ZS5sZW5ndGgsXG5cdFx0aTtcblxuXHRpZiAoIHNob3cgfHwgIWVsZW0uaXMoXCI6dmlzaWJsZVwiKSkge1xuXHRcdGVsZW0uY3NzKCBcIm9wYWNpdHlcIiwgMCApLnNob3coKTtcblx0XHRhbmltYXRlVG8gPSAxO1xuXHR9XG5cblx0Ly8gYW5pbXMgLSAxIG9wYWNpdHkgXCJ0b2dnbGVzXCJcblx0Zm9yICggaSA9IDE7IGkgPCBhbmltczsgaSsrICkge1xuXHRcdGVsZW0uYW5pbWF0ZSh7XG5cdFx0XHRvcGFjaXR5OiBhbmltYXRlVG9cblx0XHR9LCBkdXJhdGlvbiwgby5lYXNpbmcgKTtcblx0XHRhbmltYXRlVG8gPSAxIC0gYW5pbWF0ZVRvO1xuXHR9XG5cblx0ZWxlbS5hbmltYXRlKHtcblx0XHRvcGFjaXR5OiBhbmltYXRlVG9cblx0fSwgZHVyYXRpb24sIG8uZWFzaW5nKTtcblxuXHRlbGVtLnF1ZXVlKGZ1bmN0aW9uKCkge1xuXHRcdGlmICggaGlkZSApIHtcblx0XHRcdGVsZW0uaGlkZSgpO1xuXHRcdH1cblx0XHRkb25lKCk7XG5cdH0pO1xuXG5cdC8vIFdlIGp1c3QgcXVldWVkIHVwIFwiYW5pbXNcIiBhbmltYXRpb25zLCB3ZSBuZWVkIHRvIHB1dCB0aGVtIG5leHQgaW4gdGhlIHF1ZXVlXG5cdGlmICggcXVldWVsZW4gPiAxICkge1xuXHRcdHF1ZXVlLnNwbGljZS5hcHBseSggcXVldWUsXG5cdFx0XHRbIDEsIDAgXS5jb25jYXQoIHF1ZXVlLnNwbGljZSggcXVldWVsZW4sIGFuaW1zICsgMSApICkgKTtcblx0fVxuXHRlbGVtLmRlcXVldWUoKTtcbn07XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgRWZmZWN0cyBTaGFrZSAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3NoYWtlLWVmZmVjdC9cbiAqL1xuXG5cbnZhciBlZmZlY3RTaGFrZSA9ICQuZWZmZWN0cy5lZmZlY3Quc2hha2UgPSBmdW5jdGlvbiggbywgZG9uZSApIHtcblxuXHR2YXIgZWwgPSAkKCB0aGlzICksXG5cdFx0cHJvcHMgPSBbIFwicG9zaXRpb25cIiwgXCJ0b3BcIiwgXCJib3R0b21cIiwgXCJsZWZ0XCIsIFwicmlnaHRcIiwgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sXG5cdFx0bW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8IFwiZWZmZWN0XCIgKSxcblx0XHRkaXJlY3Rpb24gPSBvLmRpcmVjdGlvbiB8fCBcImxlZnRcIixcblx0XHRkaXN0YW5jZSA9IG8uZGlzdGFuY2UgfHwgMjAsXG5cdFx0dGltZXMgPSBvLnRpbWVzIHx8IDMsXG5cdFx0YW5pbXMgPSB0aW1lcyAqIDIgKyAxLFxuXHRcdHNwZWVkID0gTWF0aC5yb3VuZCggby5kdXJhdGlvbiAvIGFuaW1zICksXG5cdFx0cmVmID0gKGRpcmVjdGlvbiA9PT0gXCJ1cFwiIHx8IGRpcmVjdGlvbiA9PT0gXCJkb3duXCIpID8gXCJ0b3BcIiA6IFwibGVmdFwiLFxuXHRcdHBvc2l0aXZlTW90aW9uID0gKGRpcmVjdGlvbiA9PT0gXCJ1cFwiIHx8IGRpcmVjdGlvbiA9PT0gXCJsZWZ0XCIpLFxuXHRcdGFuaW1hdGlvbiA9IHt9LFxuXHRcdGFuaW1hdGlvbjEgPSB7fSxcblx0XHRhbmltYXRpb24yID0ge30sXG5cdFx0aSxcblxuXHRcdC8vIHdlIHdpbGwgbmVlZCB0byByZS1hc3NlbWJsZSB0aGUgcXVldWUgdG8gc3RhY2sgb3VyIGFuaW1hdGlvbnMgaW4gcGxhY2Vcblx0XHRxdWV1ZSA9IGVsLnF1ZXVlKCksXG5cdFx0cXVldWVsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cblx0JC5lZmZlY3RzLnNhdmUoIGVsLCBwcm9wcyApO1xuXHRlbC5zaG93KCk7XG5cdCQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApO1xuXG5cdC8vIEFuaW1hdGlvblxuXHRhbmltYXRpb25bIHJlZiBdID0gKCBwb3NpdGl2ZU1vdGlvbiA/IFwiLT1cIiA6IFwiKz1cIiApICsgZGlzdGFuY2U7XG5cdGFuaW1hdGlvbjFbIHJlZiBdID0gKCBwb3NpdGl2ZU1vdGlvbiA/IFwiKz1cIiA6IFwiLT1cIiApICsgZGlzdGFuY2UgKiAyO1xuXHRhbmltYXRpb24yWyByZWYgXSA9ICggcG9zaXRpdmVNb3Rpb24gPyBcIi09XCIgOiBcIis9XCIgKSArIGRpc3RhbmNlICogMjtcblxuXHQvLyBBbmltYXRlXG5cdGVsLmFuaW1hdGUoIGFuaW1hdGlvbiwgc3BlZWQsIG8uZWFzaW5nICk7XG5cblx0Ly8gU2hha2VzXG5cdGZvciAoIGkgPSAxOyBpIDwgdGltZXM7IGkrKyApIHtcblx0XHRlbC5hbmltYXRlKCBhbmltYXRpb24xLCBzcGVlZCwgby5lYXNpbmcgKS5hbmltYXRlKCBhbmltYXRpb24yLCBzcGVlZCwgby5lYXNpbmcgKTtcblx0fVxuXHRlbFxuXHRcdC5hbmltYXRlKCBhbmltYXRpb24xLCBzcGVlZCwgby5lYXNpbmcgKVxuXHRcdC5hbmltYXRlKCBhbmltYXRpb24sIHNwZWVkIC8gMiwgby5lYXNpbmcgKVxuXHRcdC5xdWV1ZShmdW5jdGlvbigpIHtcblx0XHRcdGlmICggbW9kZSA9PT0gXCJoaWRlXCIgKSB7XG5cdFx0XHRcdGVsLmhpZGUoKTtcblx0XHRcdH1cblx0XHRcdCQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTtcblx0XHRcdCQuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKCBlbCApO1xuXHRcdFx0ZG9uZSgpO1xuXHRcdH0pO1xuXG5cdC8vIGluamVjdCBhbGwgdGhlIGFuaW1hdGlvbnMgd2UganVzdCBxdWV1ZWQgdG8gYmUgZmlyc3QgaW4gbGluZSAoYWZ0ZXIgXCJpbnByb2dyZXNzXCIpXG5cdGlmICggcXVldWVsZW4gPiAxKSB7XG5cdFx0cXVldWUuc3BsaWNlLmFwcGx5KCBxdWV1ZSxcblx0XHRcdFsgMSwgMCBdLmNvbmNhdCggcXVldWUuc3BsaWNlKCBxdWV1ZWxlbiwgYW5pbXMgKyAxICkgKSApO1xuXHR9XG5cdGVsLmRlcXVldWUoKTtcblxufTtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBFZmZlY3RzIFNsaWRlIDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc2xpZGUtZWZmZWN0L1xuICovXG5cblxudmFyIGVmZmVjdFNsaWRlID0gJC5lZmZlY3RzLmVmZmVjdC5zbGlkZSA9IGZ1bmN0aW9uKCBvLCBkb25lICkge1xuXG5cdC8vIENyZWF0ZSBlbGVtZW50XG5cdHZhciBlbCA9ICQoIHRoaXMgKSxcblx0XHRwcm9wcyA9IFsgXCJwb3NpdGlvblwiLCBcInRvcFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIiwgXCJyaWdodFwiLCBcIndpZHRoXCIsIFwiaGVpZ2h0XCIgXSxcblx0XHRtb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsLCBvLm1vZGUgfHwgXCJzaG93XCIgKSxcblx0XHRzaG93ID0gbW9kZSA9PT0gXCJzaG93XCIsXG5cdFx0ZGlyZWN0aW9uID0gby5kaXJlY3Rpb24gfHwgXCJsZWZ0XCIsXG5cdFx0cmVmID0gKGRpcmVjdGlvbiA9PT0gXCJ1cFwiIHx8IGRpcmVjdGlvbiA9PT0gXCJkb3duXCIpID8gXCJ0b3BcIiA6IFwibGVmdFwiLFxuXHRcdHBvc2l0aXZlTW90aW9uID0gKGRpcmVjdGlvbiA9PT0gXCJ1cFwiIHx8IGRpcmVjdGlvbiA9PT0gXCJsZWZ0XCIpLFxuXHRcdGRpc3RhbmNlLFxuXHRcdGFuaW1hdGlvbiA9IHt9O1xuXG5cdC8vIEFkanVzdFxuXHQkLmVmZmVjdHMuc2F2ZSggZWwsIHByb3BzICk7XG5cdGVsLnNob3coKTtcblx0ZGlzdGFuY2UgPSBvLmRpc3RhbmNlIHx8IGVsWyByZWYgPT09IFwidG9wXCIgPyBcIm91dGVySGVpZ2h0XCIgOiBcIm91dGVyV2lkdGhcIiBdKCB0cnVlICk7XG5cblx0JC5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoIGVsICkuY3NzKHtcblx0XHRvdmVyZmxvdzogXCJoaWRkZW5cIlxuXHR9KTtcblxuXHRpZiAoIHNob3cgKSB7XG5cdFx0ZWwuY3NzKCByZWYsIHBvc2l0aXZlTW90aW9uID8gKGlzTmFOKGRpc3RhbmNlKSA/IFwiLVwiICsgZGlzdGFuY2UgOiAtZGlzdGFuY2UpIDogZGlzdGFuY2UgKTtcblx0fVxuXG5cdC8vIEFuaW1hdGlvblxuXHRhbmltYXRpb25bIHJlZiBdID0gKCBzaG93ID9cblx0XHQoIHBvc2l0aXZlTW90aW9uID8gXCIrPVwiIDogXCItPVwiKSA6XG5cdFx0KCBwb3NpdGl2ZU1vdGlvbiA/IFwiLT1cIiA6IFwiKz1cIikpICtcblx0XHRkaXN0YW5jZTtcblxuXHQvLyBBbmltYXRlXG5cdGVsLmFuaW1hdGUoIGFuaW1hdGlvbiwge1xuXHRcdHF1ZXVlOiBmYWxzZSxcblx0XHRkdXJhdGlvbjogby5kdXJhdGlvbixcblx0XHRlYXNpbmc6IG8uZWFzaW5nLFxuXHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggbW9kZSA9PT0gXCJoaWRlXCIgKSB7XG5cdFx0XHRcdGVsLmhpZGUoKTtcblx0XHRcdH1cblx0XHRcdCQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTtcblx0XHRcdCQuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKCBlbCApO1xuXHRcdFx0ZG9uZSgpO1xuXHRcdH1cblx0fSk7XG59O1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIEVmZmVjdHMgVHJhbnNmZXIgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS90cmFuc2Zlci1lZmZlY3QvXG4gKi9cblxuXG52YXIgZWZmZWN0VHJhbnNmZXIgPSAkLmVmZmVjdHMuZWZmZWN0LnRyYW5zZmVyID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7XG5cdHZhciBlbGVtID0gJCggdGhpcyApLFxuXHRcdHRhcmdldCA9ICQoIG8udG8gKSxcblx0XHR0YXJnZXRGaXhlZCA9IHRhcmdldC5jc3MoIFwicG9zaXRpb25cIiApID09PSBcImZpeGVkXCIsXG5cdFx0Ym9keSA9ICQoXCJib2R5XCIpLFxuXHRcdGZpeFRvcCA9IHRhcmdldEZpeGVkID8gYm9keS5zY3JvbGxUb3AoKSA6IDAsXG5cdFx0Zml4TGVmdCA9IHRhcmdldEZpeGVkID8gYm9keS5zY3JvbGxMZWZ0KCkgOiAwLFxuXHRcdGVuZFBvc2l0aW9uID0gdGFyZ2V0Lm9mZnNldCgpLFxuXHRcdGFuaW1hdGlvbiA9IHtcblx0XHRcdHRvcDogZW5kUG9zaXRpb24udG9wIC0gZml4VG9wLFxuXHRcdFx0bGVmdDogZW5kUG9zaXRpb24ubGVmdCAtIGZpeExlZnQsXG5cdFx0XHRoZWlnaHQ6IHRhcmdldC5pbm5lckhlaWdodCgpLFxuXHRcdFx0d2lkdGg6IHRhcmdldC5pbm5lcldpZHRoKClcblx0XHR9LFxuXHRcdHN0YXJ0UG9zaXRpb24gPSBlbGVtLm9mZnNldCgpLFxuXHRcdHRyYW5zZmVyID0gJCggXCI8ZGl2IGNsYXNzPSd1aS1lZmZlY3RzLXRyYW5zZmVyJz48L2Rpdj5cIiApXG5cdFx0XHQuYXBwZW5kVG8oIGRvY3VtZW50LmJvZHkgKVxuXHRcdFx0LmFkZENsYXNzKCBvLmNsYXNzTmFtZSApXG5cdFx0XHQuY3NzKHtcblx0XHRcdFx0dG9wOiBzdGFydFBvc2l0aW9uLnRvcCAtIGZpeFRvcCxcblx0XHRcdFx0bGVmdDogc3RhcnRQb3NpdGlvbi5sZWZ0IC0gZml4TGVmdCxcblx0XHRcdFx0aGVpZ2h0OiBlbGVtLmlubmVySGVpZ2h0KCksXG5cdFx0XHRcdHdpZHRoOiBlbGVtLmlubmVyV2lkdGgoKSxcblx0XHRcdFx0cG9zaXRpb246IHRhcmdldEZpeGVkID8gXCJmaXhlZFwiIDogXCJhYnNvbHV0ZVwiXG5cdFx0XHR9KVxuXHRcdFx0LmFuaW1hdGUoIGFuaW1hdGlvbiwgby5kdXJhdGlvbiwgby5lYXNpbmcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0cmFuc2Zlci5yZW1vdmUoKTtcblx0XHRcdFx0ZG9uZSgpO1xuXHRcdFx0fSk7XG59O1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIFByb2dyZXNzYmFyIDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vcHJvZ3Jlc3NiYXIvXG4gKi9cblxuXG52YXIgcHJvZ3Jlc3NiYXIgPSAkLndpZGdldCggXCJ1aS5wcm9ncmVzc2JhclwiLCB7XG5cdHZlcnNpb246IFwiMS4xMS4zXCIsXG5cdG9wdGlvbnM6IHtcblx0XHRtYXg6IDEwMCxcblx0XHR2YWx1ZTogMCxcblxuXHRcdGNoYW5nZTogbnVsbCxcblx0XHRjb21wbGV0ZTogbnVsbFxuXHR9LFxuXG5cdG1pbjogMCxcblxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcblx0XHQvLyBDb25zdHJhaW4gaW5pdGlhbCB2YWx1ZVxuXHRcdHRoaXMub2xkVmFsdWUgPSB0aGlzLm9wdGlvbnMudmFsdWUgPSB0aGlzLl9jb25zdHJhaW5lZFZhbHVlKCk7XG5cblx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wcm9ncmVzc2JhciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiIClcblx0XHRcdC5hdHRyKHtcblx0XHRcdFx0Ly8gT25seSBzZXQgc3RhdGljIHZhbHVlcywgYXJpYS12YWx1ZW5vdyBhbmQgYXJpYS12YWx1ZW1heCBhcmVcblx0XHRcdFx0Ly8gc2V0IGluc2lkZSBfcmVmcmVzaFZhbHVlKClcblx0XHRcdFx0cm9sZTogXCJwcm9ncmVzc2JhclwiLFxuXHRcdFx0XHRcImFyaWEtdmFsdWVtaW5cIjogdGhpcy5taW5cblx0XHRcdH0pO1xuXG5cdFx0dGhpcy52YWx1ZURpdiA9ICQoIFwiPGRpdiBjbGFzcz0ndWktcHJvZ3Jlc3NiYXItdmFsdWUgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItbGVmdCc+PC9kaXY+XCIgKVxuXHRcdFx0LmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcblxuXHRcdHRoaXMuX3JlZnJlc2hWYWx1ZSgpO1xuXHR9LFxuXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1wcm9ncmVzc2JhciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLXZhbHVlbWluXCIgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS12YWx1ZW1heFwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtdmFsdWVub3dcIiApO1xuXG5cdFx0dGhpcy52YWx1ZURpdi5yZW1vdmUoKTtcblx0fSxcblxuXHR2YWx1ZTogZnVuY3Rpb24oIG5ld1ZhbHVlICkge1xuXHRcdGlmICggbmV3VmFsdWUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiB0aGlzLm9wdGlvbnMudmFsdWU7XG5cdFx0fVxuXG5cdFx0dGhpcy5vcHRpb25zLnZhbHVlID0gdGhpcy5fY29uc3RyYWluZWRWYWx1ZSggbmV3VmFsdWUgKTtcblx0XHR0aGlzLl9yZWZyZXNoVmFsdWUoKTtcblx0fSxcblxuXHRfY29uc3RyYWluZWRWYWx1ZTogZnVuY3Rpb24oIG5ld1ZhbHVlICkge1xuXHRcdGlmICggbmV3VmFsdWUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdG5ld1ZhbHVlID0gdGhpcy5vcHRpb25zLnZhbHVlO1xuXHRcdH1cblxuXHRcdHRoaXMuaW5kZXRlcm1pbmF0ZSA9IG5ld1ZhbHVlID09PSBmYWxzZTtcblxuXHRcdC8vIHNhbml0aXplIHZhbHVlXG5cdFx0aWYgKCB0eXBlb2YgbmV3VmFsdWUgIT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRuZXdWYWx1ZSA9IDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuaW5kZXRlcm1pbmF0ZSA/IGZhbHNlIDpcblx0XHRcdE1hdGgubWluKCB0aGlzLm9wdGlvbnMubWF4LCBNYXRoLm1heCggdGhpcy5taW4sIG5ld1ZhbHVlICkgKTtcblx0fSxcblxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdFx0Ly8gRW5zdXJlIFwidmFsdWVcIiBvcHRpb24gaXMgc2V0IGFmdGVyIG90aGVyIHZhbHVlcyAobGlrZSBtYXgpXG5cdFx0dmFyIHZhbHVlID0gb3B0aW9ucy52YWx1ZTtcblx0XHRkZWxldGUgb3B0aW9ucy52YWx1ZTtcblxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XG5cblx0XHR0aGlzLm9wdGlvbnMudmFsdWUgPSB0aGlzLl9jb25zdHJhaW5lZFZhbHVlKCB2YWx1ZSApO1xuXHRcdHRoaXMuX3JlZnJlc2hWYWx1ZSgpO1xuXHR9LFxuXG5cdF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdGlmICgga2V5ID09PSBcIm1heFwiICkge1xuXHRcdFx0Ly8gRG9uJ3QgYWxsb3cgYSBtYXggbGVzcyB0aGFuIG1pblxuXHRcdFx0dmFsdWUgPSBNYXRoLm1heCggdGhpcy5taW4sIHZhbHVlICk7XG5cdFx0fVxuXHRcdGlmICgga2V5ID09PSBcImRpc2FibGVkXCIgKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsICEhdmFsdWUgKVxuXHRcdFx0XHQuYXR0ciggXCJhcmlhLWRpc2FibGVkXCIsIHZhbHVlICk7XG5cdFx0fVxuXHRcdHRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7XG5cdH0sXG5cblx0X3BlcmNlbnRhZ2U6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmluZGV0ZXJtaW5hdGUgPyAxMDAgOiAxMDAgKiAoIHRoaXMub3B0aW9ucy52YWx1ZSAtIHRoaXMubWluICkgLyAoIHRoaXMub3B0aW9ucy5tYXggLSB0aGlzLm1pbiApO1xuXHR9LFxuXG5cdF9yZWZyZXNoVmFsdWU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2YWx1ZSA9IHRoaXMub3B0aW9ucy52YWx1ZSxcblx0XHRcdHBlcmNlbnRhZ2UgPSB0aGlzLl9wZXJjZW50YWdlKCk7XG5cblx0XHR0aGlzLnZhbHVlRGl2XG5cdFx0XHQudG9nZ2xlKCB0aGlzLmluZGV0ZXJtaW5hdGUgfHwgdmFsdWUgPiB0aGlzLm1pbiApXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLXJpZ2h0XCIsIHZhbHVlID09PSB0aGlzLm9wdGlvbnMubWF4IClcblx0XHRcdC53aWR0aCggcGVyY2VudGFnZS50b0ZpeGVkKDApICsgXCIlXCIgKTtcblxuXHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1wcm9ncmVzc2Jhci1pbmRldGVybWluYXRlXCIsIHRoaXMuaW5kZXRlcm1pbmF0ZSApO1xuXG5cdFx0aWYgKCB0aGlzLmluZGV0ZXJtaW5hdGUgKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQXR0ciggXCJhcmlhLXZhbHVlbm93XCIgKTtcblx0XHRcdGlmICggIXRoaXMub3ZlcmxheURpdiApIHtcblx0XHRcdFx0dGhpcy5vdmVybGF5RGl2ID0gJCggXCI8ZGl2IGNsYXNzPSd1aS1wcm9ncmVzc2Jhci1vdmVybGF5Jz48L2Rpdj5cIiApLmFwcGVuZFRvKCB0aGlzLnZhbHVlRGl2ICk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKHtcblx0XHRcdFx0XCJhcmlhLXZhbHVlbWF4XCI6IHRoaXMub3B0aW9ucy5tYXgsXG5cdFx0XHRcdFwiYXJpYS12YWx1ZW5vd1wiOiB2YWx1ZVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIHRoaXMub3ZlcmxheURpdiApIHtcblx0XHRcdFx0dGhpcy5vdmVybGF5RGl2LnJlbW92ZSgpO1xuXHRcdFx0XHR0aGlzLm92ZXJsYXlEaXYgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggdGhpcy5vbGRWYWx1ZSAhPT0gdmFsdWUgKSB7XG5cdFx0XHR0aGlzLm9sZFZhbHVlID0gdmFsdWU7XG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImNoYW5nZVwiICk7XG5cdFx0fVxuXHRcdGlmICggdmFsdWUgPT09IHRoaXMub3B0aW9ucy5tYXggKSB7XG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImNvbXBsZXRlXCIgKTtcblx0XHR9XG5cdH1cbn0pO1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIFNlbGVjdGFibGUgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9zZWxlY3RhYmxlL1xuICovXG5cblxudmFyIHNlbGVjdGFibGUgPSAkLndpZGdldChcInVpLnNlbGVjdGFibGVcIiwgJC51aS5tb3VzZSwge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXHRvcHRpb25zOiB7XG5cdFx0YXBwZW5kVG86IFwiYm9keVwiLFxuXHRcdGF1dG9SZWZyZXNoOiB0cnVlLFxuXHRcdGRpc3RhbmNlOiAwLFxuXHRcdGZpbHRlcjogXCIqXCIsXG5cdFx0dG9sZXJhbmNlOiBcInRvdWNoXCIsXG5cblx0XHQvLyBjYWxsYmFja3Ncblx0XHRzZWxlY3RlZDogbnVsbCxcblx0XHRzZWxlY3Rpbmc6IG51bGwsXG5cdFx0c3RhcnQ6IG51bGwsXG5cdFx0c3RvcDogbnVsbCxcblx0XHR1bnNlbGVjdGVkOiBudWxsLFxuXHRcdHVuc2VsZWN0aW5nOiBudWxsXG5cdH0sXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzZWxlY3RlZXMsXG5cdFx0XHR0aGF0ID0gdGhpcztcblxuXHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLXNlbGVjdGFibGVcIik7XG5cblx0XHR0aGlzLmRyYWdnZWQgPSBmYWxzZTtcblxuXHRcdC8vIGNhY2hlIHNlbGVjdGVlIGNoaWxkcmVuIGJhc2VkIG9uIGZpbHRlclxuXHRcdHRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0c2VsZWN0ZWVzID0gJCh0aGF0Lm9wdGlvbnMuZmlsdGVyLCB0aGF0LmVsZW1lbnRbMF0pO1xuXHRcdFx0c2VsZWN0ZWVzLmFkZENsYXNzKFwidWktc2VsZWN0ZWVcIik7XG5cdFx0XHRzZWxlY3RlZXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyICR0aGlzID0gJCh0aGlzKSxcblx0XHRcdFx0XHRwb3MgPSAkdGhpcy5vZmZzZXQoKTtcblx0XHRcdFx0JC5kYXRhKHRoaXMsIFwic2VsZWN0YWJsZS1pdGVtXCIsIHtcblx0XHRcdFx0XHRlbGVtZW50OiB0aGlzLFxuXHRcdFx0XHRcdCRlbGVtZW50OiAkdGhpcyxcblx0XHRcdFx0XHRsZWZ0OiBwb3MubGVmdCxcblx0XHRcdFx0XHR0b3A6IHBvcy50b3AsXG5cdFx0XHRcdFx0cmlnaHQ6IHBvcy5sZWZ0ICsgJHRoaXMub3V0ZXJXaWR0aCgpLFxuXHRcdFx0XHRcdGJvdHRvbTogcG9zLnRvcCArICR0aGlzLm91dGVySGVpZ2h0KCksXG5cdFx0XHRcdFx0c3RhcnRzZWxlY3RlZDogZmFsc2UsXG5cdFx0XHRcdFx0c2VsZWN0ZWQ6ICR0aGlzLmhhc0NsYXNzKFwidWktc2VsZWN0ZWRcIiksXG5cdFx0XHRcdFx0c2VsZWN0aW5nOiAkdGhpcy5oYXNDbGFzcyhcInVpLXNlbGVjdGluZ1wiKSxcblx0XHRcdFx0XHR1bnNlbGVjdGluZzogJHRoaXMuaGFzQ2xhc3MoXCJ1aS11bnNlbGVjdGluZ1wiKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cblx0XHR0aGlzLnNlbGVjdGVlcyA9IHNlbGVjdGVlcy5hZGRDbGFzcyhcInVpLXNlbGVjdGVlXCIpO1xuXG5cdFx0dGhpcy5fbW91c2VJbml0KCk7XG5cblx0XHR0aGlzLmhlbHBlciA9ICQoXCI8ZGl2IGNsYXNzPSd1aS1zZWxlY3RhYmxlLWhlbHBlcic+PC9kaXY+XCIpO1xuXHR9LFxuXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnNlbGVjdGVlc1xuXHRcdFx0LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0ZWVcIilcblx0XHRcdC5yZW1vdmVEYXRhKFwic2VsZWN0YWJsZS1pdGVtXCIpO1xuXHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0YWJsZSB1aS1zZWxlY3RhYmxlLWRpc2FibGVkXCIpO1xuXHRcdHRoaXMuX21vdXNlRGVzdHJveSgpO1xuXHR9LFxuXG5cdF9tb3VzZVN0YXJ0OiBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHR0aGlzLm9wb3MgPSBbIGV2ZW50LnBhZ2VYLCBldmVudC5wYWdlWSBdO1xuXG5cdFx0aWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlZCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuc2VsZWN0ZWVzID0gJChvcHRpb25zLmZpbHRlciwgdGhpcy5lbGVtZW50WzBdKTtcblxuXHRcdHRoaXMuX3RyaWdnZXIoXCJzdGFydFwiLCBldmVudCk7XG5cblx0XHQkKG9wdGlvbnMuYXBwZW5kVG8pLmFwcGVuZCh0aGlzLmhlbHBlcik7XG5cdFx0Ly8gcG9zaXRpb24gaGVscGVyIChsYXNzbylcblx0XHR0aGlzLmhlbHBlci5jc3Moe1xuXHRcdFx0XCJsZWZ0XCI6IGV2ZW50LnBhZ2VYLFxuXHRcdFx0XCJ0b3BcIjogZXZlbnQucGFnZVksXG5cdFx0XHRcIndpZHRoXCI6IDAsXG5cdFx0XHRcImhlaWdodFwiOiAwXG5cdFx0fSk7XG5cblx0XHRpZiAob3B0aW9ucy5hdXRvUmVmcmVzaCkge1xuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zZWxlY3RlZXMuZmlsdGVyKFwiLnVpLXNlbGVjdGVkXCIpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZWN0ZWUgPSAkLmRhdGEodGhpcywgXCJzZWxlY3RhYmxlLWl0ZW1cIik7XG5cdFx0XHRzZWxlY3RlZS5zdGFydHNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdGlmICghZXZlbnQubWV0YUtleSAmJiAhZXZlbnQuY3RybEtleSkge1xuXHRcdFx0XHRzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXNlbGVjdGVkXCIpO1xuXHRcdFx0XHRzZWxlY3RlZS5zZWxlY3RlZCA9IGZhbHNlO1xuXHRcdFx0XHRzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcyhcInVpLXVuc2VsZWN0aW5nXCIpO1xuXHRcdFx0XHRzZWxlY3RlZS51bnNlbGVjdGluZyA9IHRydWU7XG5cdFx0XHRcdC8vIHNlbGVjdGFibGUgVU5TRUxFQ1RJTkcgY2FsbGJhY2tcblx0XHRcdFx0dGhhdC5fdHJpZ2dlcihcInVuc2VsZWN0aW5nXCIsIGV2ZW50LCB7XG5cdFx0XHRcdFx0dW5zZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnRcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKGV2ZW50LnRhcmdldCkucGFyZW50cygpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGRvU2VsZWN0LFxuXHRcdFx0XHRzZWxlY3RlZSA9ICQuZGF0YSh0aGlzLCBcInNlbGVjdGFibGUtaXRlbVwiKTtcblx0XHRcdGlmIChzZWxlY3RlZSkge1xuXHRcdFx0XHRkb1NlbGVjdCA9ICghZXZlbnQubWV0YUtleSAmJiAhZXZlbnQuY3RybEtleSkgfHwgIXNlbGVjdGVlLiRlbGVtZW50Lmhhc0NsYXNzKFwidWktc2VsZWN0ZWRcIik7XG5cdFx0XHRcdHNlbGVjdGVlLiRlbGVtZW50XG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKGRvU2VsZWN0ID8gXCJ1aS11bnNlbGVjdGluZ1wiIDogXCJ1aS1zZWxlY3RlZFwiKVxuXHRcdFx0XHRcdC5hZGRDbGFzcyhkb1NlbGVjdCA/IFwidWktc2VsZWN0aW5nXCIgOiBcInVpLXVuc2VsZWN0aW5nXCIpO1xuXHRcdFx0XHRzZWxlY3RlZS51bnNlbGVjdGluZyA9ICFkb1NlbGVjdDtcblx0XHRcdFx0c2VsZWN0ZWUuc2VsZWN0aW5nID0gZG9TZWxlY3Q7XG5cdFx0XHRcdHNlbGVjdGVlLnNlbGVjdGVkID0gZG9TZWxlY3Q7XG5cdFx0XHRcdC8vIHNlbGVjdGFibGUgKFVOKVNFTEVDVElORyBjYWxsYmFja1xuXHRcdFx0XHRpZiAoZG9TZWxlY3QpIHtcblx0XHRcdFx0XHR0aGF0Ll90cmlnZ2VyKFwic2VsZWN0aW5nXCIsIGV2ZW50LCB7XG5cdFx0XHRcdFx0XHRzZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGF0Ll90cmlnZ2VyKFwidW5zZWxlY3RpbmdcIiwgZXZlbnQsIHtcblx0XHRcdFx0XHRcdHVuc2VsZWN0aW5nOiBzZWxlY3RlZS5lbGVtZW50XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdH0sXG5cblx0X21vdXNlRHJhZzogZnVuY3Rpb24oZXZlbnQpIHtcblxuXHRcdHRoaXMuZHJhZ2dlZCA9IHRydWU7XG5cblx0XHRpZiAodGhpcy5vcHRpb25zLmRpc2FibGVkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIHRtcCxcblx0XHRcdHRoYXQgPSB0aGlzLFxuXHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0XHRcdHgxID0gdGhpcy5vcG9zWzBdLFxuXHRcdFx0eTEgPSB0aGlzLm9wb3NbMV0sXG5cdFx0XHR4MiA9IGV2ZW50LnBhZ2VYLFxuXHRcdFx0eTIgPSBldmVudC5wYWdlWTtcblxuXHRcdGlmICh4MSA+IHgyKSB7IHRtcCA9IHgyOyB4MiA9IHgxOyB4MSA9IHRtcDsgfVxuXHRcdGlmICh5MSA+IHkyKSB7IHRtcCA9IHkyOyB5MiA9IHkxOyB5MSA9IHRtcDsgfVxuXHRcdHRoaXMuaGVscGVyLmNzcyh7IGxlZnQ6IHgxLCB0b3A6IHkxLCB3aWR0aDogeDIgLSB4MSwgaGVpZ2h0OiB5MiAtIHkxIH0pO1xuXG5cdFx0dGhpcy5zZWxlY3RlZXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxlY3RlZSA9ICQuZGF0YSh0aGlzLCBcInNlbGVjdGFibGUtaXRlbVwiKSxcblx0XHRcdFx0aGl0ID0gZmFsc2U7XG5cblx0XHRcdC8vcHJldmVudCBoZWxwZXIgZnJvbSBiZWluZyBzZWxlY3RlZCBpZiBhcHBlbmRUbzogc2VsZWN0YWJsZVxuXHRcdFx0aWYgKCFzZWxlY3RlZSB8fCBzZWxlY3RlZS5lbGVtZW50ID09PSB0aGF0LmVsZW1lbnRbMF0pIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAob3B0aW9ucy50b2xlcmFuY2UgPT09IFwidG91Y2hcIikge1xuXHRcdFx0XHRoaXQgPSAoICEoc2VsZWN0ZWUubGVmdCA+IHgyIHx8IHNlbGVjdGVlLnJpZ2h0IDwgeDEgfHwgc2VsZWN0ZWUudG9wID4geTIgfHwgc2VsZWN0ZWUuYm90dG9tIDwgeTEpICk7XG5cdFx0XHR9IGVsc2UgaWYgKG9wdGlvbnMudG9sZXJhbmNlID09PSBcImZpdFwiKSB7XG5cdFx0XHRcdGhpdCA9IChzZWxlY3RlZS5sZWZ0ID4geDEgJiYgc2VsZWN0ZWUucmlnaHQgPCB4MiAmJiBzZWxlY3RlZS50b3AgPiB5MSAmJiBzZWxlY3RlZS5ib3R0b20gPCB5Mik7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChoaXQpIHtcblx0XHRcdFx0Ly8gU0VMRUNUXG5cdFx0XHRcdGlmIChzZWxlY3RlZS5zZWxlY3RlZCkge1xuXHRcdFx0XHRcdHNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0ZWRcIik7XG5cdFx0XHRcdFx0c2VsZWN0ZWUuc2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoc2VsZWN0ZWUudW5zZWxlY3RpbmcpIHtcblx0XHRcdFx0XHRzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXVuc2VsZWN0aW5nXCIpO1xuXHRcdFx0XHRcdHNlbGVjdGVlLnVuc2VsZWN0aW5nID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFzZWxlY3RlZS5zZWxlY3RpbmcpIHtcblx0XHRcdFx0XHRzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcyhcInVpLXNlbGVjdGluZ1wiKTtcblx0XHRcdFx0XHRzZWxlY3RlZS5zZWxlY3RpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdC8vIHNlbGVjdGFibGUgU0VMRUNUSU5HIGNhbGxiYWNrXG5cdFx0XHRcdFx0dGhhdC5fdHJpZ2dlcihcInNlbGVjdGluZ1wiLCBldmVudCwge1xuXHRcdFx0XHRcdFx0c2VsZWN0aW5nOiBzZWxlY3RlZS5lbGVtZW50XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFVOU0VMRUNUXG5cdFx0XHRcdGlmIChzZWxlY3RlZS5zZWxlY3RpbmcpIHtcblx0XHRcdFx0XHRpZiAoKGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSkgJiYgc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCkge1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWUuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1zZWxlY3RpbmdcIik7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZS5zZWxlY3RpbmcgPSBmYWxzZTtcblx0XHRcdFx0XHRcdHNlbGVjdGVlLiRlbGVtZW50LmFkZENsYXNzKFwidWktc2VsZWN0ZWRcIik7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZS5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0aW5nXCIpO1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWUuc2VsZWN0aW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRpZiAoc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCkge1xuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcyhcInVpLXVuc2VsZWN0aW5nXCIpO1xuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZS51bnNlbGVjdGluZyA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBzZWxlY3RhYmxlIFVOU0VMRUNUSU5HIGNhbGxiYWNrXG5cdFx0XHRcdFx0XHR0aGF0Ll90cmlnZ2VyKFwidW5zZWxlY3RpbmdcIiwgZXZlbnQsIHtcblx0XHRcdFx0XHRcdFx0dW5zZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoc2VsZWN0ZWUuc2VsZWN0ZWQpIHtcblx0XHRcdFx0XHRpZiAoIWV2ZW50Lm1ldGFLZXkgJiYgIWV2ZW50LmN0cmxLZXkgJiYgIXNlbGVjdGVlLnN0YXJ0c2VsZWN0ZWQpIHtcblx0XHRcdFx0XHRcdHNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0ZWRcIik7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZS5zZWxlY3RlZCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcyhcInVpLXVuc2VsZWN0aW5nXCIpO1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWUudW5zZWxlY3RpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdFx0Ly8gc2VsZWN0YWJsZSBVTlNFTEVDVElORyBjYWxsYmFja1xuXHRcdFx0XHRcdFx0dGhhdC5fdHJpZ2dlcihcInVuc2VsZWN0aW5nXCIsIGV2ZW50LCB7XG5cdFx0XHRcdFx0XHRcdHVuc2VsZWN0aW5nOiBzZWxlY3RlZS5lbGVtZW50XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXHRfbW91c2VTdG9wOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciB0aGF0ID0gdGhpcztcblxuXHRcdHRoaXMuZHJhZ2dlZCA9IGZhbHNlO1xuXG5cdFx0JChcIi51aS11bnNlbGVjdGluZ1wiLCB0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZWN0ZWUgPSAkLmRhdGEodGhpcywgXCJzZWxlY3RhYmxlLWl0ZW1cIik7XG5cdFx0XHRzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXVuc2VsZWN0aW5nXCIpO1xuXHRcdFx0c2VsZWN0ZWUudW5zZWxlY3RpbmcgPSBmYWxzZTtcblx0XHRcdHNlbGVjdGVlLnN0YXJ0c2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdHRoYXQuX3RyaWdnZXIoXCJ1bnNlbGVjdGVkXCIsIGV2ZW50LCB7XG5cdFx0XHRcdHVuc2VsZWN0ZWQ6IHNlbGVjdGVlLmVsZW1lbnRcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdCQoXCIudWktc2VsZWN0aW5nXCIsIHRoaXMuZWxlbWVudFswXSkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxlY3RlZSA9ICQuZGF0YSh0aGlzLCBcInNlbGVjdGFibGUtaXRlbVwiKTtcblx0XHRcdHNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0aW5nXCIpLmFkZENsYXNzKFwidWktc2VsZWN0ZWRcIik7XG5cdFx0XHRzZWxlY3RlZS5zZWxlY3RpbmcgPSBmYWxzZTtcblx0XHRcdHNlbGVjdGVlLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdHNlbGVjdGVlLnN0YXJ0c2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0dGhhdC5fdHJpZ2dlcihcInNlbGVjdGVkXCIsIGV2ZW50LCB7XG5cdFx0XHRcdHNlbGVjdGVkOiBzZWxlY3RlZS5lbGVtZW50XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHR0aGlzLl90cmlnZ2VyKFwic3RvcFwiLCBldmVudCk7XG5cblx0XHR0aGlzLmhlbHBlci5yZW1vdmUoKTtcblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG59KTtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBTZWxlY3RtZW51IDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc2VsZWN0bWVudVxuICovXG5cblxudmFyIHNlbGVjdG1lbnUgPSAkLndpZGdldCggXCJ1aS5zZWxlY3RtZW51XCIsIHtcblx0dmVyc2lvbjogXCIxLjExLjNcIixcblx0ZGVmYXVsdEVsZW1lbnQ6IFwiPHNlbGVjdD5cIixcblx0b3B0aW9uczoge1xuXHRcdGFwcGVuZFRvOiBudWxsLFxuXHRcdGRpc2FibGVkOiBudWxsLFxuXHRcdGljb25zOiB7XG5cdFx0XHRidXR0b246IFwidWktaWNvbi10cmlhbmdsZS0xLXNcIlxuXHRcdH0sXG5cdFx0cG9zaXRpb246IHtcblx0XHRcdG15OiBcImxlZnQgdG9wXCIsXG5cdFx0XHRhdDogXCJsZWZ0IGJvdHRvbVwiLFxuXHRcdFx0Y29sbGlzaW9uOiBcIm5vbmVcIlxuXHRcdH0sXG5cdFx0d2lkdGg6IG51bGwsXG5cblx0XHQvLyBjYWxsYmFja3Ncblx0XHRjaGFuZ2U6IG51bGwsXG5cdFx0Y2xvc2U6IG51bGwsXG5cdFx0Zm9jdXM6IG51bGwsXG5cdFx0b3BlbjogbnVsbCxcblx0XHRzZWxlY3Q6IG51bGxcblx0fSxcblxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgc2VsZWN0bWVudUlkID0gdGhpcy5lbGVtZW50LnVuaXF1ZUlkKCkuYXR0ciggXCJpZFwiICk7XG5cdFx0dGhpcy5pZHMgPSB7XG5cdFx0XHRlbGVtZW50OiBzZWxlY3RtZW51SWQsXG5cdFx0XHRidXR0b246IHNlbGVjdG1lbnVJZCArIFwiLWJ1dHRvblwiLFxuXHRcdFx0bWVudTogc2VsZWN0bWVudUlkICsgXCItbWVudVwiXG5cdFx0fTtcblxuXHRcdHRoaXMuX2RyYXdCdXR0b24oKTtcblx0XHR0aGlzLl9kcmF3TWVudSgpO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7XG5cdFx0XHR0aGlzLmRpc2FibGUoKTtcblx0XHR9XG5cdH0sXG5cblx0X2RyYXdCdXR0b246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0aGF0ID0gdGhpcztcblxuXHRcdC8vIEFzc29jaWF0ZSBleGlzdGluZyBsYWJlbCB3aXRoIHRoZSBuZXcgYnV0dG9uXG5cdFx0dGhpcy5sYWJlbCA9ICQoIFwibGFiZWxbZm9yPSdcIiArIHRoaXMuaWRzLmVsZW1lbnQgKyBcIiddXCIgKS5hdHRyKCBcImZvclwiLCB0aGlzLmlkcy5idXR0b24gKTtcblx0XHR0aGlzLl9vbiggdGhpcy5sYWJlbCwge1xuXHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0dGhpcy5idXR0b24uZm9jdXMoKTtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEhpZGUgb3JpZ2luYWwgc2VsZWN0IGVsZW1lbnRcblx0XHR0aGlzLmVsZW1lbnQuaGlkZSgpO1xuXG5cdFx0Ly8gQ3JlYXRlIGJ1dHRvblxuXHRcdHRoaXMuYnV0dG9uID0gJCggXCI8c3Bhbj5cIiwge1xuXHRcdFx0XCJjbGFzc1wiOiBcInVpLXNlbGVjdG1lbnUtYnV0dG9uIHVpLXdpZGdldCB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGxcIixcblx0XHRcdHRhYmluZGV4OiB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPyAtMSA6IDAsXG5cdFx0XHRpZDogdGhpcy5pZHMuYnV0dG9uLFxuXHRcdFx0cm9sZTogXCJjb21ib2JveFwiLFxuXHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwiZmFsc2VcIixcblx0XHRcdFwiYXJpYS1hdXRvY29tcGxldGVcIjogXCJsaXN0XCIsXG5cdFx0XHRcImFyaWEtb3duc1wiOiB0aGlzLmlkcy5tZW51LFxuXHRcdFx0XCJhcmlhLWhhc3BvcHVwXCI6IFwidHJ1ZVwiXG5cdFx0fSlcblx0XHRcdC5pbnNlcnRBZnRlciggdGhpcy5lbGVtZW50ICk7XG5cblx0XHQkKCBcIjxzcGFuPlwiLCB7XG5cdFx0XHRcImNsYXNzXCI6IFwidWktaWNvbiBcIiArIHRoaXMub3B0aW9ucy5pY29ucy5idXR0b25cblx0XHR9KVxuXHRcdFx0LnByZXBlbmRUbyggdGhpcy5idXR0b24gKTtcblxuXHRcdHRoaXMuYnV0dG9uVGV4dCA9ICQoIFwiPHNwYW4+XCIsIHtcblx0XHRcdFwiY2xhc3NcIjogXCJ1aS1zZWxlY3RtZW51LXRleHRcIlxuXHRcdH0pXG5cdFx0XHQuYXBwZW5kVG8oIHRoaXMuYnV0dG9uICk7XG5cblx0XHR0aGlzLl9zZXRUZXh0KCB0aGlzLmJ1dHRvblRleHQsIHRoaXMuZWxlbWVudC5maW5kKCBcIm9wdGlvbjpzZWxlY3RlZFwiICkudGV4dCgpICk7XG5cdFx0dGhpcy5fcmVzaXplQnV0dG9uKCk7XG5cblx0XHR0aGlzLl9vbiggdGhpcy5idXR0b24sIHRoaXMuX2J1dHRvbkV2ZW50cyApO1xuXHRcdHRoaXMuYnV0dG9uLm9uZSggXCJmb2N1c2luXCIsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBEZWxheSByZW5kZXJpbmcgdGhlIG1lbnUgaXRlbXMgdW50aWwgdGhlIGJ1dHRvbiByZWNlaXZlcyBmb2N1cy5cblx0XHRcdC8vIFRoZSBtZW51IG1heSBoYXZlIGFscmVhZHkgYmVlbiByZW5kZXJlZCB2aWEgYSBwcm9ncmFtbWF0aWMgb3Blbi5cblx0XHRcdGlmICggIXRoYXQubWVudUl0ZW1zICkge1xuXHRcdFx0XHR0aGF0Ll9yZWZyZXNoTWVudSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHRoaXMuX2hvdmVyYWJsZSggdGhpcy5idXR0b24gKTtcblx0XHR0aGlzLl9mb2N1c2FibGUoIHRoaXMuYnV0dG9uICk7XG5cdH0sXG5cblx0X2RyYXdNZW51OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cblx0XHQvLyBDcmVhdGUgbWVudVxuXHRcdHRoaXMubWVudSA9ICQoIFwiPHVsPlwiLCB7XG5cdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLFxuXHRcdFx0XCJhcmlhLWxhYmVsbGVkYnlcIjogdGhpcy5pZHMuYnV0dG9uLFxuXHRcdFx0aWQ6IHRoaXMuaWRzLm1lbnVcblx0XHR9KTtcblxuXHRcdC8vIFdyYXAgbWVudVxuXHRcdHRoaXMubWVudVdyYXAgPSAkKCBcIjxkaXY+XCIsIHtcblx0XHRcdFwiY2xhc3NcIjogXCJ1aS1zZWxlY3RtZW51LW1lbnUgdWktZnJvbnRcIlxuXHRcdH0pXG5cdFx0XHQuYXBwZW5kKCB0aGlzLm1lbnUgKVxuXHRcdFx0LmFwcGVuZFRvKCB0aGlzLl9hcHBlbmRUbygpICk7XG5cblx0XHQvLyBJbml0aWFsaXplIG1lbnUgd2lkZ2V0XG5cdFx0dGhpcy5tZW51SW5zdGFuY2UgPSB0aGlzLm1lbnVcblx0XHRcdC5tZW51KHtcblx0XHRcdFx0cm9sZTogXCJsaXN0Ym94XCIsXG5cdFx0XHRcdHNlbGVjdDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdFx0Ly8gc3VwcG9ydDogSUU4XG5cdFx0XHRcdFx0Ly8gSWYgdGhlIGl0ZW0gd2FzIHNlbGVjdGVkIHZpYSBhIGNsaWNrLCB0aGUgdGV4dCBzZWxlY3Rpb25cblx0XHRcdFx0XHQvLyB3aWxsIGJlIGRlc3Ryb3llZCBpbiBJRVxuXHRcdFx0XHRcdHRoYXQuX3NldFNlbGVjdGlvbigpO1xuXG5cdFx0XHRcdFx0dGhhdC5fc2VsZWN0KCB1aS5pdGVtLmRhdGEoIFwidWktc2VsZWN0bWVudS1pdGVtXCIgKSwgZXZlbnQgKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0Zm9jdXM6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG5cdFx0XHRcdFx0dmFyIGl0ZW0gPSB1aS5pdGVtLmRhdGEoIFwidWktc2VsZWN0bWVudS1pdGVtXCIgKTtcblxuXHRcdFx0XHRcdC8vIFByZXZlbnQgaW5pdGFsIGZvY3VzIGZyb20gZmlyaW5nIGFuZCBjaGVjayBpZiBpdHMgYSBuZXdseSBmb2N1c2VkIGl0ZW1cblx0XHRcdFx0XHRpZiAoIHRoYXQuZm9jdXNJbmRleCAhPSBudWxsICYmIGl0ZW0uaW5kZXggIT09IHRoYXQuZm9jdXNJbmRleCApIHtcblx0XHRcdFx0XHRcdHRoYXQuX3RyaWdnZXIoIFwiZm9jdXNcIiwgZXZlbnQsIHsgaXRlbTogaXRlbSB9ICk7XG5cdFx0XHRcdFx0XHRpZiAoICF0aGF0LmlzT3BlbiApIHtcblx0XHRcdFx0XHRcdFx0dGhhdC5fc2VsZWN0KCBpdGVtLCBldmVudCApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGF0LmZvY3VzSW5kZXggPSBpdGVtLmluZGV4O1xuXG5cdFx0XHRcdFx0dGhhdC5idXR0b24uYXR0ciggXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixcblx0XHRcdFx0XHRcdHRoYXQubWVudUl0ZW1zLmVxKCBpdGVtLmluZGV4ICkuYXR0ciggXCJpZFwiICkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5tZW51KCBcImluc3RhbmNlXCIgKTtcblxuXHRcdC8vIEFkanVzdCBtZW51IHN0eWxlcyB0byBkcm9wZG93blxuXHRcdHRoaXMubWVudVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWNvcm5lci1ib3R0b21cIiApXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiICk7XG5cblx0XHQvLyBEb24ndCBjbG9zZSB0aGUgbWVudSBvbiBtb3VzZWxlYXZlXG5cdFx0dGhpcy5tZW51SW5zdGFuY2UuX29mZiggdGhpcy5tZW51LCBcIm1vdXNlbGVhdmVcIiApO1xuXG5cdFx0Ly8gQ2FuY2VsIHRoZSBtZW51J3MgY29sbGFwc2VBbGwgb24gZG9jdW1lbnQgY2xpY2tcblx0XHR0aGlzLm1lbnVJbnN0YW5jZS5fY2xvc2VPbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdFx0Ly8gU2VsZWN0cyBvZnRlbiBjb250YWluIGVtcHR5IGl0ZW1zLCBidXQgbmV2ZXIgY29udGFpbiBkaXZpZGVyc1xuXHRcdHRoaXMubWVudUluc3RhbmNlLl9pc0RpdmlkZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXHR9LFxuXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuX3JlZnJlc2hNZW51KCk7XG5cdFx0dGhpcy5fc2V0VGV4dCggdGhpcy5idXR0b25UZXh0LCB0aGlzLl9nZXRTZWxlY3RlZEl0ZW0oKS50ZXh0KCkgKTtcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMud2lkdGggKSB7XG5cdFx0XHR0aGlzLl9yZXNpemVCdXR0b24oKTtcblx0XHR9XG5cdH0sXG5cblx0X3JlZnJlc2hNZW51OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLm1lbnUuZW1wdHkoKTtcblxuXHRcdHZhciBpdGVtLFxuXHRcdFx0b3B0aW9ucyA9IHRoaXMuZWxlbWVudC5maW5kKCBcIm9wdGlvblwiICk7XG5cblx0XHRpZiAoICFvcHRpb25zLmxlbmd0aCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLl9wYXJzZU9wdGlvbnMoIG9wdGlvbnMgKTtcblx0XHR0aGlzLl9yZW5kZXJNZW51KCB0aGlzLm1lbnUsIHRoaXMuaXRlbXMgKTtcblxuXHRcdHRoaXMubWVudUluc3RhbmNlLnJlZnJlc2goKTtcblx0XHR0aGlzLm1lbnVJdGVtcyA9IHRoaXMubWVudS5maW5kKCBcImxpXCIgKS5ub3QoIFwiLnVpLXNlbGVjdG1lbnUtb3B0Z3JvdXBcIiApO1xuXG5cdFx0aXRlbSA9IHRoaXMuX2dldFNlbGVjdGVkSXRlbSgpO1xuXG5cdFx0Ly8gVXBkYXRlIHRoZSBtZW51IHRvIGhhdmUgdGhlIGNvcnJlY3QgaXRlbSBmb2N1c2VkXG5cdFx0dGhpcy5tZW51SW5zdGFuY2UuZm9jdXMoIG51bGwsIGl0ZW0gKTtcblx0XHR0aGlzLl9zZXRBcmlhKCBpdGVtLmRhdGEoIFwidWktc2VsZWN0bWVudS1pdGVtXCIgKSApO1xuXG5cdFx0Ly8gU2V0IGRpc2FibGVkIHN0YXRlXG5cdFx0dGhpcy5fc2V0T3B0aW9uKCBcImRpc2FibGVkXCIsIHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKSApO1xuXHR9LFxuXG5cdG9wZW46IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHRoZSBtZW51IGlzIGJlaW5nIG9wZW5lZCwgcmVuZGVyIHRoZSBpdGVtc1xuXHRcdGlmICggIXRoaXMubWVudUl0ZW1zICkge1xuXHRcdFx0dGhpcy5fcmVmcmVzaE1lbnUoKTtcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBNZW51IGNsZWFycyBmb2N1cyBvbiBjbG9zZSwgcmVzZXQgZm9jdXMgdG8gc2VsZWN0ZWQgaXRlbVxuXHRcdFx0dGhpcy5tZW51LmZpbmQoIFwiLnVpLXN0YXRlLWZvY3VzXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XG5cdFx0XHR0aGlzLm1lbnVJbnN0YW5jZS5mb2N1cyggbnVsbCwgdGhpcy5fZ2V0U2VsZWN0ZWRJdGVtKCkgKTtcblx0XHR9XG5cblx0XHR0aGlzLmlzT3BlbiA9IHRydWU7XG5cdFx0dGhpcy5fdG9nZ2xlQXR0cigpO1xuXHRcdHRoaXMuX3Jlc2l6ZU1lbnUoKTtcblx0XHR0aGlzLl9wb3NpdGlvbigpO1xuXG5cdFx0dGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHRoaXMuX2RvY3VtZW50Q2xpY2sgKTtcblxuXHRcdHRoaXMuX3RyaWdnZXIoIFwib3BlblwiLCBldmVudCApO1xuXHR9LFxuXG5cdF9wb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5tZW51V3JhcC5wb3NpdGlvbiggJC5leHRlbmQoIHsgb2Y6IHRoaXMuYnV0dG9uIH0sIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApICk7XG5cdH0sXG5cblx0Y2xvc2U6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoICF0aGlzLmlzT3BlbiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmlzT3BlbiA9IGZhbHNlO1xuXHRcdHRoaXMuX3RvZ2dsZUF0dHIoKTtcblxuXHRcdHRoaXMucmFuZ2UgPSBudWxsO1xuXHRcdHRoaXMuX29mZiggdGhpcy5kb2N1bWVudCApO1xuXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJjbG9zZVwiLCBldmVudCApO1xuXHR9LFxuXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuYnV0dG9uO1xuXHR9LFxuXG5cdG1lbnVXaWRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1lbnU7XG5cdH0sXG5cblx0X3JlbmRlck1lbnU6IGZ1bmN0aW9uKCB1bCwgaXRlbXMgKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0Y3VycmVudE9wdGdyb3VwID0gXCJcIjtcblxuXHRcdCQuZWFjaCggaXRlbXMsIGZ1bmN0aW9uKCBpbmRleCwgaXRlbSApIHtcblx0XHRcdGlmICggaXRlbS5vcHRncm91cCAhPT0gY3VycmVudE9wdGdyb3VwICkge1xuXHRcdFx0XHQkKCBcIjxsaT5cIiwge1xuXHRcdFx0XHRcdFwiY2xhc3NcIjogXCJ1aS1zZWxlY3RtZW51LW9wdGdyb3VwIHVpLW1lbnUtZGl2aWRlclwiICtcblx0XHRcdFx0XHRcdCggaXRlbS5lbGVtZW50LnBhcmVudCggXCJvcHRncm91cFwiICkucHJvcCggXCJkaXNhYmxlZFwiICkgP1xuXHRcdFx0XHRcdFx0XHRcIiB1aS1zdGF0ZS1kaXNhYmxlZFwiIDpcblx0XHRcdFx0XHRcdFx0XCJcIiApLFxuXHRcdFx0XHRcdHRleHQ6IGl0ZW0ub3B0Z3JvdXBcblx0XHRcdFx0fSlcblx0XHRcdFx0XHQuYXBwZW5kVG8oIHVsICk7XG5cblx0XHRcdFx0Y3VycmVudE9wdGdyb3VwID0gaXRlbS5vcHRncm91cDtcblx0XHRcdH1cblxuXHRcdFx0dGhhdC5fcmVuZGVySXRlbURhdGEoIHVsLCBpdGVtICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0X3JlbmRlckl0ZW1EYXRhOiBmdW5jdGlvbiggdWwsIGl0ZW0gKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlbmRlckl0ZW0oIHVsLCBpdGVtICkuZGF0YSggXCJ1aS1zZWxlY3RtZW51LWl0ZW1cIiwgaXRlbSApO1xuXHR9LFxuXG5cdF9yZW5kZXJJdGVtOiBmdW5jdGlvbiggdWwsIGl0ZW0gKSB7XG5cdFx0dmFyIGxpID0gJCggXCI8bGk+XCIgKTtcblxuXHRcdGlmICggaXRlbS5kaXNhYmxlZCApIHtcblx0XHRcdGxpLmFkZENsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcblx0XHR9XG5cdFx0dGhpcy5fc2V0VGV4dCggbGksIGl0ZW0ubGFiZWwgKTtcblxuXHRcdHJldHVybiBsaS5hcHBlbmRUbyggdWwgKTtcblx0fSxcblxuXHRfc2V0VGV4dDogZnVuY3Rpb24oIGVsZW1lbnQsIHZhbHVlICkge1xuXHRcdGlmICggdmFsdWUgKSB7XG5cdFx0XHRlbGVtZW50LnRleHQoIHZhbHVlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsZW1lbnQuaHRtbCggXCImIzE2MDtcIiApO1xuXHRcdH1cblx0fSxcblxuXHRfbW92ZTogZnVuY3Rpb24oIGRpcmVjdGlvbiwgZXZlbnQgKSB7XG5cdFx0dmFyIGl0ZW0sIG5leHQsXG5cdFx0XHRmaWx0ZXIgPSBcIi51aS1tZW51LWl0ZW1cIjtcblxuXHRcdGlmICggdGhpcy5pc09wZW4gKSB7XG5cdFx0XHRpdGVtID0gdGhpcy5tZW51SXRlbXMuZXEoIHRoaXMuZm9jdXNJbmRleCApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpdGVtID0gdGhpcy5tZW51SXRlbXMuZXEoIHRoaXMuZWxlbWVudFsgMCBdLnNlbGVjdGVkSW5kZXggKTtcblx0XHRcdGZpbHRlciArPSBcIjpub3QoLnVpLXN0YXRlLWRpc2FibGVkKVwiO1xuXHRcdH1cblxuXHRcdGlmICggZGlyZWN0aW9uID09PSBcImZpcnN0XCIgfHwgZGlyZWN0aW9uID09PSBcImxhc3RcIiApIHtcblx0XHRcdG5leHQgPSBpdGVtWyBkaXJlY3Rpb24gPT09IFwiZmlyc3RcIiA/IFwicHJldkFsbFwiIDogXCJuZXh0QWxsXCIgXSggZmlsdGVyICkuZXEoIC0xICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5leHQgPSBpdGVtWyBkaXJlY3Rpb24gKyBcIkFsbFwiIF0oIGZpbHRlciApLmVxKCAwICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBuZXh0Lmxlbmd0aCApIHtcblx0XHRcdHRoaXMubWVudUluc3RhbmNlLmZvY3VzKCBldmVudCwgbmV4dCApO1xuXHRcdH1cblx0fSxcblxuXHRfZ2V0U2VsZWN0ZWRJdGVtOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tZW51SXRlbXMuZXEoIHRoaXMuZWxlbWVudFsgMCBdLnNlbGVjdGVkSW5kZXggKTtcblx0fSxcblxuXHRfdG9nZ2xlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dGhpc1sgdGhpcy5pc09wZW4gPyBcImNsb3NlXCIgOiBcIm9wZW5cIiBdKCBldmVudCApO1xuXHR9LFxuXG5cdF9zZXRTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzZWxlY3Rpb247XG5cblx0XHRpZiAoICF0aGlzLnJhbmdlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggd2luZG93LmdldFNlbGVjdGlvbiApIHtcblx0XHRcdHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcblx0XHRcdHNlbGVjdGlvbi5hZGRSYW5nZSggdGhpcy5yYW5nZSApO1xuXG5cdFx0Ly8gc3VwcG9ydDogSUU4XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucmFuZ2Uuc2VsZWN0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gc3VwcG9ydDogSUVcblx0XHQvLyBTZXR0aW5nIHRoZSB0ZXh0IHNlbGVjdGlvbiBraWxscyB0aGUgYnV0dG9uIGZvY3VzIGluIElFLCBidXRcblx0XHQvLyByZXN0b3JpbmcgdGhlIGZvY3VzIGRvZXNuJ3Qga2lsbCB0aGUgc2VsZWN0aW9uLlxuXHRcdHRoaXMuYnV0dG9uLmZvY3VzKCk7XG5cdH0sXG5cblx0X2RvY3VtZW50Q2xpY2s6IHtcblx0XHRtb3VzZWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdGlmICggIXRoaXMuaXNPcGVuICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggISQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIFwiLnVpLXNlbGVjdG1lbnUtbWVudSwgI1wiICsgdGhpcy5pZHMuYnV0dG9uICkubGVuZ3RoICkge1xuXHRcdFx0XHR0aGlzLmNsb3NlKCBldmVudCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRfYnV0dG9uRXZlbnRzOiB7XG5cblx0XHQvLyBQcmV2ZW50IHRleHQgc2VsZWN0aW9uIGZyb20gYmVpbmcgcmVzZXQgd2hlbiBpbnRlcmFjdGluZyB3aXRoIHRoZSBzZWxlY3RtZW51ICgjMTAxNDQpXG5cdFx0bW91c2Vkb3duOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxlY3Rpb247XG5cblx0XHRcdGlmICggd2luZG93LmdldFNlbGVjdGlvbiApIHtcblx0XHRcdFx0c2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuXHRcdFx0XHRpZiAoIHNlbGVjdGlvbi5yYW5nZUNvdW50ICkge1xuXHRcdFx0XHRcdHRoaXMucmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCggMCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdC8vIHN1cHBvcnQ6IElFOFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5yYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRjbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dGhpcy5fc2V0U2VsZWN0aW9uKCk7XG5cdFx0XHR0aGlzLl90b2dnbGUoIGV2ZW50ICk7XG5cdFx0fSxcblxuXHRcdGtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG5cdFx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5UQUI6XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkVTQ0FQRTpcblx0XHRcdFx0XHR0aGlzLmNsb3NlKCBldmVudCApO1xuXHRcdFx0XHRcdHByZXZlbnREZWZhdWx0ID0gZmFsc2U7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkVOVEVSOlxuXHRcdFx0XHRcdGlmICggdGhpcy5pc09wZW4gKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9zZWxlY3RGb2N1c2VkSXRlbSggZXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlVQOlxuXHRcdFx0XHRcdGlmICggZXZlbnQuYWx0S2V5ICkge1xuXHRcdFx0XHRcdFx0dGhpcy5fdG9nZ2xlKCBldmVudCApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9tb3ZlKCBcInByZXZcIiwgZXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkRPV046XG5cdFx0XHRcdFx0aWYgKCBldmVudC5hbHRLZXkgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl90b2dnbGUoIGV2ZW50ICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuX21vdmUoIFwibmV4dFwiLCBldmVudCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuU1BBQ0U6XG5cdFx0XHRcdFx0aWYgKCB0aGlzLmlzT3BlbiApIHtcblx0XHRcdFx0XHRcdHRoaXMuX3NlbGVjdEZvY3VzZWRJdGVtKCBldmVudCApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aGlzLl90b2dnbGUoIGV2ZW50ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5MRUZUOlxuXHRcdFx0XHRcdHRoaXMuX21vdmUoIFwicHJldlwiLCBldmVudCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5SSUdIVDpcblx0XHRcdFx0XHR0aGlzLl9tb3ZlKCBcIm5leHRcIiwgZXZlbnQgKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuSE9NRTpcblx0XHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuUEFHRV9VUDpcblx0XHRcdFx0XHR0aGlzLl9tb3ZlKCBcImZpcnN0XCIsIGV2ZW50ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkVORDpcblx0XHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuUEFHRV9ET1dOOlxuXHRcdFx0XHRcdHRoaXMuX21vdmUoIFwibGFzdFwiLCBldmVudCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHRoaXMubWVudS50cmlnZ2VyKCBldmVudCApO1xuXHRcdFx0XHRcdHByZXZlbnREZWZhdWx0ID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggcHJldmVudERlZmF1bHQgKSB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdF9zZWxlY3RGb2N1c2VkSXRlbTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBpdGVtID0gdGhpcy5tZW51SXRlbXMuZXEoIHRoaXMuZm9jdXNJbmRleCApO1xuXHRcdGlmICggIWl0ZW0uaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xuXHRcdFx0dGhpcy5fc2VsZWN0KCBpdGVtLmRhdGEoIFwidWktc2VsZWN0bWVudS1pdGVtXCIgKSwgZXZlbnQgKTtcblx0XHR9XG5cdH0sXG5cblx0X3NlbGVjdDogZnVuY3Rpb24oIGl0ZW0sIGV2ZW50ICkge1xuXHRcdHZhciBvbGRJbmRleCA9IHRoaXMuZWxlbWVudFsgMCBdLnNlbGVjdGVkSW5kZXg7XG5cblx0XHQvLyBDaGFuZ2UgbmF0aXZlIHNlbGVjdCBlbGVtZW50XG5cdFx0dGhpcy5lbGVtZW50WyAwIF0uc2VsZWN0ZWRJbmRleCA9IGl0ZW0uaW5kZXg7XG5cdFx0dGhpcy5fc2V0VGV4dCggdGhpcy5idXR0b25UZXh0LCBpdGVtLmxhYmVsICk7XG5cdFx0dGhpcy5fc2V0QXJpYSggaXRlbSApO1xuXHRcdHRoaXMuX3RyaWdnZXIoIFwic2VsZWN0XCIsIGV2ZW50LCB7IGl0ZW06IGl0ZW0gfSApO1xuXG5cdFx0aWYgKCBpdGVtLmluZGV4ICE9PSBvbGRJbmRleCApIHtcblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwiY2hhbmdlXCIsIGV2ZW50LCB7IGl0ZW06IGl0ZW0gfSApO1xuXHRcdH1cblxuXHRcdHRoaXMuY2xvc2UoIGV2ZW50ICk7XG5cdH0sXG5cblx0X3NldEFyaWE6IGZ1bmN0aW9uKCBpdGVtICkge1xuXHRcdHZhciBpZCA9IHRoaXMubWVudUl0ZW1zLmVxKCBpdGVtLmluZGV4ICkuYXR0ciggXCJpZFwiICk7XG5cblx0XHR0aGlzLmJ1dHRvbi5hdHRyKHtcblx0XHRcdFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGlkLFxuXHRcdFx0XCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIjogaWRcblx0XHR9KTtcblx0XHR0aGlzLm1lbnUuYXR0ciggXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIiwgaWQgKTtcblx0fSxcblxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHRpZiAoIGtleSA9PT0gXCJpY29uc1wiICkge1xuXHRcdFx0dGhpcy5idXR0b24uZmluZCggXCJzcGFuLnVpLWljb25cIiApXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5vcHRpb25zLmljb25zLmJ1dHRvbiApXG5cdFx0XHRcdC5hZGRDbGFzcyggdmFsdWUuYnV0dG9uICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcblxuXHRcdGlmICgga2V5ID09PSBcImFwcGVuZFRvXCIgKSB7XG5cdFx0XHR0aGlzLm1lbnVXcmFwLmFwcGVuZFRvKCB0aGlzLl9hcHBlbmRUbygpICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiApIHtcblx0XHRcdHRoaXMubWVudUluc3RhbmNlLm9wdGlvbiggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xuXHRcdFx0dGhpcy5idXR0b25cblx0XHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIHZhbHVlIClcblx0XHRcdFx0LmF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiLCB2YWx1ZSApO1xuXG5cdFx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xuXHRcdFx0aWYgKCB2YWx1ZSApIHtcblx0XHRcdFx0dGhpcy5idXR0b24uYXR0ciggXCJ0YWJpbmRleFwiLCAtMSApO1xuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmJ1dHRvbi5hdHRyKCBcInRhYmluZGV4XCIsIDAgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGtleSA9PT0gXCJ3aWR0aFwiICkge1xuXHRcdFx0dGhpcy5fcmVzaXplQnV0dG9uKCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9hcHBlbmRUbzogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsZW1lbnQgPSB0aGlzLm9wdGlvbnMuYXBwZW5kVG87XG5cblx0XHRpZiAoIGVsZW1lbnQgKSB7XG5cdFx0XHRlbGVtZW50ID0gZWxlbWVudC5qcXVlcnkgfHwgZWxlbWVudC5ub2RlVHlwZSA/XG5cdFx0XHRcdCQoIGVsZW1lbnQgKSA6XG5cdFx0XHRcdHRoaXMuZG9jdW1lbnQuZmluZCggZWxlbWVudCApLmVxKCAwICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhZWxlbWVudCB8fCAhZWxlbWVudFsgMCBdICkge1xuXHRcdFx0ZWxlbWVudCA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1mcm9udFwiICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhZWxlbWVudC5sZW5ndGggKSB7XG5cdFx0XHRlbGVtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdLmJvZHk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH0sXG5cblx0X3RvZ2dsZUF0dHI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuYnV0dG9uXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLXRvcFwiLCB0aGlzLmlzT3BlbiApXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCAhdGhpcy5pc09wZW4gKVxuXHRcdFx0LmF0dHIoIFwiYXJpYS1leHBhbmRlZFwiLCB0aGlzLmlzT3BlbiApO1xuXHRcdHRoaXMubWVudVdyYXAudG9nZ2xlQ2xhc3MoIFwidWktc2VsZWN0bWVudS1vcGVuXCIsIHRoaXMuaXNPcGVuICk7XG5cdFx0dGhpcy5tZW51LmF0dHIoIFwiYXJpYS1oaWRkZW5cIiwgIXRoaXMuaXNPcGVuICk7XG5cdH0sXG5cblx0X3Jlc2l6ZUJ1dHRvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHdpZHRoID0gdGhpcy5vcHRpb25zLndpZHRoO1xuXG5cdFx0aWYgKCAhd2lkdGggKSB7XG5cdFx0XHR3aWR0aCA9IHRoaXMuZWxlbWVudC5zaG93KCkub3V0ZXJXaWR0aCgpO1xuXHRcdFx0dGhpcy5lbGVtZW50LmhpZGUoKTtcblx0XHR9XG5cblx0XHR0aGlzLmJ1dHRvbi5vdXRlcldpZHRoKCB3aWR0aCApO1xuXHR9LFxuXG5cdF9yZXNpemVNZW51OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLm1lbnUub3V0ZXJXaWR0aCggTWF0aC5tYXgoXG5cdFx0XHR0aGlzLmJ1dHRvbi5vdXRlcldpZHRoKCksXG5cblx0XHRcdC8vIHN1cHBvcnQ6IElFMTBcblx0XHRcdC8vIElFMTAgd3JhcHMgbG9uZyB0ZXh0IChwb3NzaWJseSBhIHJvdW5kaW5nIGJ1Zylcblx0XHRcdC8vIHNvIHdlIGFkZCAxcHggdG8gYXZvaWQgdGhlIHdyYXBwaW5nXG5cdFx0XHR0aGlzLm1lbnUud2lkdGgoIFwiXCIgKS5vdXRlcldpZHRoKCkgKyAxXG5cdFx0KSApO1xuXHR9LFxuXG5cdF9nZXRDcmVhdGVPcHRpb25zOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4geyBkaXNhYmxlZDogdGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiApIH07XG5cdH0sXG5cblx0X3BhcnNlT3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdFx0dmFyIGRhdGEgPSBbXTtcblx0XHRvcHRpb25zLmVhY2goZnVuY3Rpb24oIGluZGV4LCBpdGVtICkge1xuXHRcdFx0dmFyIG9wdGlvbiA9ICQoIGl0ZW0gKSxcblx0XHRcdFx0b3B0Z3JvdXAgPSBvcHRpb24ucGFyZW50KCBcIm9wdGdyb3VwXCIgKTtcblx0XHRcdGRhdGEucHVzaCh7XG5cdFx0XHRcdGVsZW1lbnQ6IG9wdGlvbixcblx0XHRcdFx0aW5kZXg6IGluZGV4LFxuXHRcdFx0XHR2YWx1ZTogb3B0aW9uLnZhbCgpLFxuXHRcdFx0XHRsYWJlbDogb3B0aW9uLnRleHQoKSxcblx0XHRcdFx0b3B0Z3JvdXA6IG9wdGdyb3VwLmF0dHIoIFwibGFiZWxcIiApIHx8IFwiXCIsXG5cdFx0XHRcdGRpc2FibGVkOiBvcHRncm91cC5wcm9wKCBcImRpc2FibGVkXCIgKSB8fCBvcHRpb24ucHJvcCggXCJkaXNhYmxlZFwiIClcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdHRoaXMuaXRlbXMgPSBkYXRhO1xuXHR9LFxuXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLm1lbnVXcmFwLnJlbW92ZSgpO1xuXHRcdHRoaXMuYnV0dG9uLnJlbW92ZSgpO1xuXHRcdHRoaXMuZWxlbWVudC5zaG93KCk7XG5cdFx0dGhpcy5lbGVtZW50LnJlbW92ZVVuaXF1ZUlkKCk7XG5cdFx0dGhpcy5sYWJlbC5hdHRyKCBcImZvclwiLCB0aGlzLmlkcy5lbGVtZW50ICk7XG5cdH1cbn0pO1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIFNsaWRlciAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3NsaWRlci9cbiAqL1xuXG5cbnZhciBzbGlkZXIgPSAkLndpZGdldCggXCJ1aS5zbGlkZXJcIiwgJC51aS5tb3VzZSwge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXHR3aWRnZXRFdmVudFByZWZpeDogXCJzbGlkZVwiLFxuXG5cdG9wdGlvbnM6IHtcblx0XHRhbmltYXRlOiBmYWxzZSxcblx0XHRkaXN0YW5jZTogMCxcblx0XHRtYXg6IDEwMCxcblx0XHRtaW46IDAsXG5cdFx0b3JpZW50YXRpb246IFwiaG9yaXpvbnRhbFwiLFxuXHRcdHJhbmdlOiBmYWxzZSxcblx0XHRzdGVwOiAxLFxuXHRcdHZhbHVlOiAwLFxuXHRcdHZhbHVlczogbnVsbCxcblxuXHRcdC8vIGNhbGxiYWNrc1xuXHRcdGNoYW5nZTogbnVsbCxcblx0XHRzbGlkZTogbnVsbCxcblx0XHRzdGFydDogbnVsbCxcblx0XHRzdG9wOiBudWxsXG5cdH0sXG5cblx0Ly8gbnVtYmVyIG9mIHBhZ2VzIGluIGEgc2xpZGVyXG5cdC8vIChob3cgbWFueSB0aW1lcyBjYW4geW91IHBhZ2UgdXAvZG93biB0byBnbyB0aHJvdWdoIHRoZSB3aG9sZSByYW5nZSlcblx0bnVtUGFnZXM6IDUsXG5cblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5fa2V5U2xpZGluZyA9IGZhbHNlO1xuXHRcdHRoaXMuX21vdXNlU2xpZGluZyA9IGZhbHNlO1xuXHRcdHRoaXMuX2FuaW1hdGVPZmYgPSB0cnVlO1xuXHRcdHRoaXMuX2hhbmRsZUluZGV4ID0gbnVsbDtcblx0XHR0aGlzLl9kZXRlY3RPcmllbnRhdGlvbigpO1xuXHRcdHRoaXMuX21vdXNlSW5pdCgpO1xuXHRcdHRoaXMuX2NhbGN1bGF0ZU5ld01heCgpO1xuXG5cdFx0dGhpcy5lbGVtZW50XG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktc2xpZGVyXCIgK1xuXHRcdFx0XHRcIiB1aS1zbGlkZXItXCIgKyB0aGlzLm9yaWVudGF0aW9uICtcblx0XHRcdFx0XCIgdWktd2lkZ2V0XCIgK1xuXHRcdFx0XHRcIiB1aS13aWRnZXQtY29udGVudFwiICtcblx0XHRcdFx0XCIgdWktY29ybmVyLWFsbFwiKTtcblxuXHRcdHRoaXMuX3JlZnJlc2goKTtcblx0XHR0aGlzLl9zZXRPcHRpb24oIFwiZGlzYWJsZWRcIiwgdGhpcy5vcHRpb25zLmRpc2FibGVkICk7XG5cblx0XHR0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7XG5cdH0sXG5cblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuX2NyZWF0ZVJhbmdlKCk7XG5cdFx0dGhpcy5fY3JlYXRlSGFuZGxlcygpO1xuXHRcdHRoaXMuX3NldHVwRXZlbnRzKCk7XG5cdFx0dGhpcy5fcmVmcmVzaFZhbHVlKCk7XG5cdH0sXG5cblx0X2NyZWF0ZUhhbmRsZXM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpLCBoYW5kbGVDb3VudCxcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRleGlzdGluZ0hhbmRsZXMgPSB0aGlzLmVsZW1lbnQuZmluZCggXCIudWktc2xpZGVyLWhhbmRsZVwiICkuYWRkQ2xhc3MoIFwidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsXCIgKSxcblx0XHRcdGhhbmRsZSA9IFwiPHNwYW4gY2xhc3M9J3VpLXNsaWRlci1oYW5kbGUgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsJyB0YWJpbmRleD0nMCc+PC9zcGFuPlwiLFxuXHRcdFx0aGFuZGxlcyA9IFtdO1xuXG5cdFx0aGFuZGxlQ291bnQgPSAoIG9wdGlvbnMudmFsdWVzICYmIG9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHx8IDE7XG5cblx0XHRpZiAoIGV4aXN0aW5nSGFuZGxlcy5sZW5ndGggPiBoYW5kbGVDb3VudCApIHtcblx0XHRcdGV4aXN0aW5nSGFuZGxlcy5zbGljZSggaGFuZGxlQ291bnQgKS5yZW1vdmUoKTtcblx0XHRcdGV4aXN0aW5nSGFuZGxlcyA9IGV4aXN0aW5nSGFuZGxlcy5zbGljZSggMCwgaGFuZGxlQ291bnQgKTtcblx0XHR9XG5cblx0XHRmb3IgKCBpID0gZXhpc3RpbmdIYW5kbGVzLmxlbmd0aDsgaSA8IGhhbmRsZUNvdW50OyBpKysgKSB7XG5cdFx0XHRoYW5kbGVzLnB1c2goIGhhbmRsZSApO1xuXHRcdH1cblxuXHRcdHRoaXMuaGFuZGxlcyA9IGV4aXN0aW5nSGFuZGxlcy5hZGQoICQoIGhhbmRsZXMuam9pbiggXCJcIiApICkuYXBwZW5kVG8oIHRoaXMuZWxlbWVudCApICk7XG5cblx0XHR0aGlzLmhhbmRsZSA9IHRoaXMuaGFuZGxlcy5lcSggMCApO1xuXG5cdFx0dGhpcy5oYW5kbGVzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHQkKCB0aGlzICkuZGF0YSggXCJ1aS1zbGlkZXItaGFuZGxlLWluZGV4XCIsIGkgKTtcblx0XHR9KTtcblx0fSxcblxuXHRfY3JlYXRlUmFuZ2U6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0Y2xhc3NlcyA9IFwiXCI7XG5cblx0XHRpZiAoIG9wdGlvbnMucmFuZ2UgKSB7XG5cdFx0XHRpZiAoIG9wdGlvbnMucmFuZ2UgPT09IHRydWUgKSB7XG5cdFx0XHRcdGlmICggIW9wdGlvbnMudmFsdWVzICkge1xuXHRcdFx0XHRcdG9wdGlvbnMudmFsdWVzID0gWyB0aGlzLl92YWx1ZU1pbigpLCB0aGlzLl92YWx1ZU1pbigpIF07XG5cdFx0XHRcdH0gZWxzZSBpZiAoIG9wdGlvbnMudmFsdWVzLmxlbmd0aCAmJiBvcHRpb25zLnZhbHVlcy5sZW5ndGggIT09IDIgKSB7XG5cdFx0XHRcdFx0b3B0aW9ucy52YWx1ZXMgPSBbIG9wdGlvbnMudmFsdWVzWzBdLCBvcHRpb25zLnZhbHVlc1swXSBdO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCAkLmlzQXJyYXkoIG9wdGlvbnMudmFsdWVzICkgKSB7XG5cdFx0XHRcdFx0b3B0aW9ucy52YWx1ZXMgPSBvcHRpb25zLnZhbHVlcy5zbGljZSgwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICF0aGlzLnJhbmdlIHx8ICF0aGlzLnJhbmdlLmxlbmd0aCApIHtcblx0XHRcdFx0dGhpcy5yYW5nZSA9ICQoIFwiPGRpdj48L2Rpdj5cIiApXG5cdFx0XHRcdFx0LmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcblxuXHRcdFx0XHRjbGFzc2VzID0gXCJ1aS1zbGlkZXItcmFuZ2VcIiArXG5cdFx0XHRcdC8vIG5vdGU6IHRoaXMgaXNuJ3QgdGhlIG1vc3QgZml0dGluZ2x5IHNlbWFudGljIGZyYW1ld29yayBjbGFzcyBmb3IgdGhpcyBlbGVtZW50LFxuXHRcdFx0XHQvLyBidXQgd29ya2VkIGJlc3QgdmlzdWFsbHkgd2l0aCBhIHZhcmlldHkgb2YgdGhlbWVzXG5cdFx0XHRcdFwiIHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbFwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5yYW5nZS5yZW1vdmVDbGFzcyggXCJ1aS1zbGlkZXItcmFuZ2UtbWluIHVpLXNsaWRlci1yYW5nZS1tYXhcIiApXG5cdFx0XHRcdFx0Ly8gSGFuZGxlIHJhbmdlIHN3aXRjaGluZyBmcm9tIHRydWUgdG8gbWluL21heFxuXHRcdFx0XHRcdC5jc3Moe1xuXHRcdFx0XHRcdFx0XCJsZWZ0XCI6IFwiXCIsXG5cdFx0XHRcdFx0XHRcImJvdHRvbVwiOiBcIlwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMucmFuZ2UuYWRkQ2xhc3MoIGNsYXNzZXMgK1xuXHRcdFx0XHQoICggb3B0aW9ucy5yYW5nZSA9PT0gXCJtaW5cIiB8fCBvcHRpb25zLnJhbmdlID09PSBcIm1heFwiICkgPyBcIiB1aS1zbGlkZXItcmFuZ2UtXCIgKyBvcHRpb25zLnJhbmdlIDogXCJcIiApICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggdGhpcy5yYW5nZSApIHtcblx0XHRcdFx0dGhpcy5yYW5nZS5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHRcdHRoaXMucmFuZ2UgPSBudWxsO1xuXHRcdH1cblx0fSxcblxuXHRfc2V0dXBFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuX29mZiggdGhpcy5oYW5kbGVzICk7XG5cdFx0dGhpcy5fb24oIHRoaXMuaGFuZGxlcywgdGhpcy5faGFuZGxlRXZlbnRzICk7XG5cdFx0dGhpcy5faG92ZXJhYmxlKCB0aGlzLmhhbmRsZXMgKTtcblx0XHR0aGlzLl9mb2N1c2FibGUoIHRoaXMuaGFuZGxlcyApO1xuXHR9LFxuXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmhhbmRsZXMucmVtb3ZlKCk7XG5cdFx0aWYgKCB0aGlzLnJhbmdlICkge1xuXHRcdFx0dGhpcy5yYW5nZS5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zbGlkZXJcIiArXG5cdFx0XHRcdFwiIHVpLXNsaWRlci1ob3Jpem9udGFsXCIgK1xuXHRcdFx0XHRcIiB1aS1zbGlkZXItdmVydGljYWxcIiArXG5cdFx0XHRcdFwiIHVpLXdpZGdldFwiICtcblx0XHRcdFx0XCIgdWktd2lkZ2V0LWNvbnRlbnRcIiArXG5cdFx0XHRcdFwiIHVpLWNvcm5lci1hbGxcIiApO1xuXG5cdFx0dGhpcy5fbW91c2VEZXN0cm95KCk7XG5cdH0sXG5cblx0X21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBwb3NpdGlvbiwgbm9ybVZhbHVlLCBkaXN0YW5jZSwgY2xvc2VzdEhhbmRsZSwgaW5kZXgsIGFsbG93ZWQsIG9mZnNldCwgbW91c2VPdmVySGFuZGxlLFxuXHRcdFx0dGhhdCA9IHRoaXMsXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zO1xuXG5cdFx0aWYgKCBvLmRpc2FibGVkICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHRoaXMuZWxlbWVudFNpemUgPSB7XG5cdFx0XHR3aWR0aDogdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSxcblx0XHRcdGhlaWdodDogdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KClcblx0XHR9O1xuXHRcdHRoaXMuZWxlbWVudE9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTtcblxuXHRcdHBvc2l0aW9uID0geyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgfTtcblx0XHRub3JtVmFsdWUgPSB0aGlzLl9ub3JtVmFsdWVGcm9tTW91c2UoIHBvc2l0aW9uICk7XG5cdFx0ZGlzdGFuY2UgPSB0aGlzLl92YWx1ZU1heCgpIC0gdGhpcy5fdmFsdWVNaW4oKSArIDE7XG5cdFx0dGhpcy5oYW5kbGVzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHR2YXIgdGhpc0Rpc3RhbmNlID0gTWF0aC5hYnMoIG5vcm1WYWx1ZSAtIHRoYXQudmFsdWVzKGkpICk7XG5cdFx0XHRpZiAoKCBkaXN0YW5jZSA+IHRoaXNEaXN0YW5jZSApIHx8XG5cdFx0XHRcdCggZGlzdGFuY2UgPT09IHRoaXNEaXN0YW5jZSAmJlxuXHRcdFx0XHRcdChpID09PSB0aGF0Ll9sYXN0Q2hhbmdlZFZhbHVlIHx8IHRoYXQudmFsdWVzKGkpID09PSBvLm1pbiApKSkge1xuXHRcdFx0XHRkaXN0YW5jZSA9IHRoaXNEaXN0YW5jZTtcblx0XHRcdFx0Y2xvc2VzdEhhbmRsZSA9ICQoIHRoaXMgKTtcblx0XHRcdFx0aW5kZXggPSBpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0YWxsb3dlZCA9IHRoaXMuX3N0YXJ0KCBldmVudCwgaW5kZXggKTtcblx0XHRpZiAoIGFsbG93ZWQgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHR0aGlzLl9tb3VzZVNsaWRpbmcgPSB0cnVlO1xuXG5cdFx0dGhpcy5faGFuZGxlSW5kZXggPSBpbmRleDtcblxuXHRcdGNsb3Nlc3RIYW5kbGVcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApXG5cdFx0XHQuZm9jdXMoKTtcblxuXHRcdG9mZnNldCA9IGNsb3Nlc3RIYW5kbGUub2Zmc2V0KCk7XG5cdFx0bW91c2VPdmVySGFuZGxlID0gISQoIGV2ZW50LnRhcmdldCApLnBhcmVudHMoKS5hZGRCYWNrKCkuaXMoIFwiLnVpLXNsaWRlci1oYW5kbGVcIiApO1xuXHRcdHRoaXMuX2NsaWNrT2Zmc2V0ID0gbW91c2VPdmVySGFuZGxlID8geyBsZWZ0OiAwLCB0b3A6IDAgfSA6IHtcblx0XHRcdGxlZnQ6IGV2ZW50LnBhZ2VYIC0gb2Zmc2V0LmxlZnQgLSAoIGNsb3Nlc3RIYW5kbGUud2lkdGgoKSAvIDIgKSxcblx0XHRcdHRvcDogZXZlbnQucGFnZVkgLSBvZmZzZXQudG9wIC1cblx0XHRcdFx0KCBjbG9zZXN0SGFuZGxlLmhlaWdodCgpIC8gMiApIC1cblx0XHRcdFx0KCBwYXJzZUludCggY2xvc2VzdEhhbmRsZS5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwgMTAgKSB8fCAwICkgLVxuXHRcdFx0XHQoIHBhcnNlSW50KCBjbG9zZXN0SGFuZGxlLmNzcyhcImJvcmRlckJvdHRvbVdpZHRoXCIpLCAxMCApIHx8IDApICtcblx0XHRcdFx0KCBwYXJzZUludCggY2xvc2VzdEhhbmRsZS5jc3MoXCJtYXJnaW5Ub3BcIiksIDEwICkgfHwgMClcblx0XHR9O1xuXG5cdFx0aWYgKCAhdGhpcy5oYW5kbGVzLmhhc0NsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKSApIHtcblx0XHRcdHRoaXMuX3NsaWRlKCBldmVudCwgaW5kZXgsIG5vcm1WYWx1ZSApO1xuXHRcdH1cblx0XHR0aGlzLl9hbmltYXRlT2ZmID0gdHJ1ZTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHRfbW91c2VTdGFydDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblx0X21vdXNlRHJhZzogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBwb3NpdGlvbiA9IHsgeDogZXZlbnQucGFnZVgsIHk6IGV2ZW50LnBhZ2VZIH0sXG5cdFx0XHRub3JtVmFsdWUgPSB0aGlzLl9ub3JtVmFsdWVGcm9tTW91c2UoIHBvc2l0aW9uICk7XG5cblx0XHR0aGlzLl9zbGlkZSggZXZlbnQsIHRoaXMuX2hhbmRsZUluZGV4LCBub3JtVmFsdWUgKTtcblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXHRfbW91c2VTdG9wOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dGhpcy5oYW5kbGVzLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7XG5cdFx0dGhpcy5fbW91c2VTbGlkaW5nID0gZmFsc2U7XG5cblx0XHR0aGlzLl9zdG9wKCBldmVudCwgdGhpcy5faGFuZGxlSW5kZXggKTtcblx0XHR0aGlzLl9jaGFuZ2UoIGV2ZW50LCB0aGlzLl9oYW5kbGVJbmRleCApO1xuXG5cdFx0dGhpcy5faGFuZGxlSW5kZXggPSBudWxsO1xuXHRcdHRoaXMuX2NsaWNrT2Zmc2V0ID0gbnVsbDtcblx0XHR0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cblx0X2RldGVjdE9yaWVudGF0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLm9yaWVudGF0aW9uID0gKCB0aGlzLm9wdGlvbnMub3JpZW50YXRpb24gPT09IFwidmVydGljYWxcIiApID8gXCJ2ZXJ0aWNhbFwiIDogXCJob3Jpem9udGFsXCI7XG5cdH0sXG5cblx0X25vcm1WYWx1ZUZyb21Nb3VzZTogZnVuY3Rpb24oIHBvc2l0aW9uICkge1xuXHRcdHZhciBwaXhlbFRvdGFsLFxuXHRcdFx0cGl4ZWxNb3VzZSxcblx0XHRcdHBlcmNlbnRNb3VzZSxcblx0XHRcdHZhbHVlVG90YWwsXG5cdFx0XHR2YWx1ZU1vdXNlO1xuXG5cdFx0aWYgKCB0aGlzLm9yaWVudGF0aW9uID09PSBcImhvcml6b250YWxcIiApIHtcblx0XHRcdHBpeGVsVG90YWwgPSB0aGlzLmVsZW1lbnRTaXplLndpZHRoO1xuXHRcdFx0cGl4ZWxNb3VzZSA9IHBvc2l0aW9uLnggLSB0aGlzLmVsZW1lbnRPZmZzZXQubGVmdCAtICggdGhpcy5fY2xpY2tPZmZzZXQgPyB0aGlzLl9jbGlja09mZnNldC5sZWZ0IDogMCApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwaXhlbFRvdGFsID0gdGhpcy5lbGVtZW50U2l6ZS5oZWlnaHQ7XG5cdFx0XHRwaXhlbE1vdXNlID0gcG9zaXRpb24ueSAtIHRoaXMuZWxlbWVudE9mZnNldC50b3AgLSAoIHRoaXMuX2NsaWNrT2Zmc2V0ID8gdGhpcy5fY2xpY2tPZmZzZXQudG9wIDogMCApO1xuXHRcdH1cblxuXHRcdHBlcmNlbnRNb3VzZSA9ICggcGl4ZWxNb3VzZSAvIHBpeGVsVG90YWwgKTtcblx0XHRpZiAoIHBlcmNlbnRNb3VzZSA+IDEgKSB7XG5cdFx0XHRwZXJjZW50TW91c2UgPSAxO1xuXHRcdH1cblx0XHRpZiAoIHBlcmNlbnRNb3VzZSA8IDAgKSB7XG5cdFx0XHRwZXJjZW50TW91c2UgPSAwO1xuXHRcdH1cblx0XHRpZiAoIHRoaXMub3JpZW50YXRpb24gPT09IFwidmVydGljYWxcIiApIHtcblx0XHRcdHBlcmNlbnRNb3VzZSA9IDEgLSBwZXJjZW50TW91c2U7XG5cdFx0fVxuXG5cdFx0dmFsdWVUb3RhbCA9IHRoaXMuX3ZhbHVlTWF4KCkgLSB0aGlzLl92YWx1ZU1pbigpO1xuXHRcdHZhbHVlTW91c2UgPSB0aGlzLl92YWx1ZU1pbigpICsgcGVyY2VudE1vdXNlICogdmFsdWVUb3RhbDtcblxuXHRcdHJldHVybiB0aGlzLl90cmltQWxpZ25WYWx1ZSggdmFsdWVNb3VzZSApO1xuXHR9LFxuXG5cdF9zdGFydDogZnVuY3Rpb24oIGV2ZW50LCBpbmRleCApIHtcblx0XHR2YXIgdWlIYXNoID0ge1xuXHRcdFx0aGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sXG5cdFx0XHR2YWx1ZTogdGhpcy52YWx1ZSgpXG5cdFx0fTtcblx0XHRpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7XG5cdFx0XHR1aUhhc2gudmFsdWUgPSB0aGlzLnZhbHVlcyggaW5kZXggKTtcblx0XHRcdHVpSGFzaC52YWx1ZXMgPSB0aGlzLnZhbHVlcygpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fdHJpZ2dlciggXCJzdGFydFwiLCBldmVudCwgdWlIYXNoICk7XG5cdH0sXG5cblx0X3NsaWRlOiBmdW5jdGlvbiggZXZlbnQsIGluZGV4LCBuZXdWYWwgKSB7XG5cdFx0dmFyIG90aGVyVmFsLFxuXHRcdFx0bmV3VmFsdWVzLFxuXHRcdFx0YWxsb3dlZDtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHtcblx0XHRcdG90aGVyVmFsID0gdGhpcy52YWx1ZXMoIGluZGV4ID8gMCA6IDEgKTtcblxuXHRcdFx0aWYgKCAoIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoID09PSAyICYmIHRoaXMub3B0aW9ucy5yYW5nZSA9PT0gdHJ1ZSApICYmXG5cdFx0XHRcdFx0KCAoIGluZGV4ID09PSAwICYmIG5ld1ZhbCA+IG90aGVyVmFsKSB8fCAoIGluZGV4ID09PSAxICYmIG5ld1ZhbCA8IG90aGVyVmFsICkgKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0bmV3VmFsID0gb3RoZXJWYWw7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggbmV3VmFsICE9PSB0aGlzLnZhbHVlcyggaW5kZXggKSApIHtcblx0XHRcdFx0bmV3VmFsdWVzID0gdGhpcy52YWx1ZXMoKTtcblx0XHRcdFx0bmV3VmFsdWVzWyBpbmRleCBdID0gbmV3VmFsO1xuXHRcdFx0XHQvLyBBIHNsaWRlIGNhbiBiZSBjYW5jZWxlZCBieSByZXR1cm5pbmcgZmFsc2UgZnJvbSB0aGUgc2xpZGUgY2FsbGJhY2tcblx0XHRcdFx0YWxsb3dlZCA9IHRoaXMuX3RyaWdnZXIoIFwic2xpZGVcIiwgZXZlbnQsIHtcblx0XHRcdFx0XHRoYW5kbGU6IHRoaXMuaGFuZGxlc1sgaW5kZXggXSxcblx0XHRcdFx0XHR2YWx1ZTogbmV3VmFsLFxuXHRcdFx0XHRcdHZhbHVlczogbmV3VmFsdWVzXG5cdFx0XHRcdH0gKTtcblx0XHRcdFx0b3RoZXJWYWwgPSB0aGlzLnZhbHVlcyggaW5kZXggPyAwIDogMSApO1xuXHRcdFx0XHRpZiAoIGFsbG93ZWQgIT09IGZhbHNlICkge1xuXHRcdFx0XHRcdHRoaXMudmFsdWVzKCBpbmRleCwgbmV3VmFsICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCBuZXdWYWwgIT09IHRoaXMudmFsdWUoKSApIHtcblx0XHRcdFx0Ly8gQSBzbGlkZSBjYW4gYmUgY2FuY2VsZWQgYnkgcmV0dXJuaW5nIGZhbHNlIGZyb20gdGhlIHNsaWRlIGNhbGxiYWNrXG5cdFx0XHRcdGFsbG93ZWQgPSB0aGlzLl90cmlnZ2VyKCBcInNsaWRlXCIsIGV2ZW50LCB7XG5cdFx0XHRcdFx0aGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sXG5cdFx0XHRcdFx0dmFsdWU6IG5ld1ZhbFxuXHRcdFx0XHR9ICk7XG5cdFx0XHRcdGlmICggYWxsb3dlZCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0dGhpcy52YWx1ZSggbmV3VmFsICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0X3N0b3A6IGZ1bmN0aW9uKCBldmVudCwgaW5kZXggKSB7XG5cdFx0dmFyIHVpSGFzaCA9IHtcblx0XHRcdGhhbmRsZTogdGhpcy5oYW5kbGVzWyBpbmRleCBdLFxuXHRcdFx0dmFsdWU6IHRoaXMudmFsdWUoKVxuXHRcdH07XG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMudmFsdWVzICYmIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoICkge1xuXHRcdFx0dWlIYXNoLnZhbHVlID0gdGhpcy52YWx1ZXMoIGluZGV4ICk7XG5cdFx0XHR1aUhhc2gudmFsdWVzID0gdGhpcy52YWx1ZXMoKTtcblx0XHR9XG5cblx0XHR0aGlzLl90cmlnZ2VyKCBcInN0b3BcIiwgZXZlbnQsIHVpSGFzaCApO1xuXHR9LFxuXG5cdF9jaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCwgaW5kZXggKSB7XG5cdFx0aWYgKCAhdGhpcy5fa2V5U2xpZGluZyAmJiAhdGhpcy5fbW91c2VTbGlkaW5nICkge1xuXHRcdFx0dmFyIHVpSGFzaCA9IHtcblx0XHRcdFx0aGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sXG5cdFx0XHRcdHZhbHVlOiB0aGlzLnZhbHVlKClcblx0XHRcdH07XG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7XG5cdFx0XHRcdHVpSGFzaC52YWx1ZSA9IHRoaXMudmFsdWVzKCBpbmRleCApO1xuXHRcdFx0XHR1aUhhc2gudmFsdWVzID0gdGhpcy52YWx1ZXMoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly9zdG9yZSB0aGUgbGFzdCBjaGFuZ2VkIHZhbHVlIGluZGV4IGZvciByZWZlcmVuY2Ugd2hlbiBoYW5kbGVzIG92ZXJsYXBcblx0XHRcdHRoaXMuX2xhc3RDaGFuZ2VkVmFsdWUgPSBpbmRleDtcblxuXHRcdFx0dGhpcy5fdHJpZ2dlciggXCJjaGFuZ2VcIiwgZXZlbnQsIHVpSGFzaCApO1xuXHRcdH1cblx0fSxcblxuXHR2YWx1ZTogZnVuY3Rpb24oIG5ld1ZhbHVlICkge1xuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHRoaXMub3B0aW9ucy52YWx1ZSA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCBuZXdWYWx1ZSApO1xuXHRcdFx0dGhpcy5fcmVmcmVzaFZhbHVlKCk7XG5cdFx0XHR0aGlzLl9jaGFuZ2UoIG51bGwsIDAgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5fdmFsdWUoKTtcblx0fSxcblxuXHR2YWx1ZXM6IGZ1bmN0aW9uKCBpbmRleCwgbmV3VmFsdWUgKSB7XG5cdFx0dmFyIHZhbHMsXG5cdFx0XHRuZXdWYWx1ZXMsXG5cdFx0XHRpO1xuXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoID4gMSApIHtcblx0XHRcdHRoaXMub3B0aW9ucy52YWx1ZXNbIGluZGV4IF0gPSB0aGlzLl90cmltQWxpZ25WYWx1ZSggbmV3VmFsdWUgKTtcblx0XHRcdHRoaXMuX3JlZnJlc2hWYWx1ZSgpO1xuXHRcdFx0dGhpcy5fY2hhbmdlKCBudWxsLCBpbmRleCApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdGlmICggJC5pc0FycmF5KCBhcmd1bWVudHNbIDAgXSApICkge1xuXHRcdFx0XHR2YWxzID0gdGhpcy5vcHRpb25zLnZhbHVlcztcblx0XHRcdFx0bmV3VmFsdWVzID0gYXJndW1lbnRzWyAwIF07XG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgdmFscy5sZW5ndGg7IGkgKz0gMSApIHtcblx0XHRcdFx0XHR2YWxzWyBpIF0gPSB0aGlzLl90cmltQWxpZ25WYWx1ZSggbmV3VmFsdWVzWyBpIF0gKTtcblx0XHRcdFx0XHR0aGlzLl9jaGFuZ2UoIG51bGwsIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLl9yZWZyZXNoVmFsdWUoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICggdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fdmFsdWVzKCBpbmRleCApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLnZhbHVlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3ZhbHVlcygpO1xuXHRcdH1cblx0fSxcblxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHR2YXIgaSxcblx0XHRcdHZhbHNMZW5ndGggPSAwO1xuXG5cdFx0aWYgKCBrZXkgPT09IFwicmFuZ2VcIiAmJiB0aGlzLm9wdGlvbnMucmFuZ2UgPT09IHRydWUgKSB7XG5cdFx0XHRpZiAoIHZhbHVlID09PSBcIm1pblwiICkge1xuXHRcdFx0XHR0aGlzLm9wdGlvbnMudmFsdWUgPSB0aGlzLl92YWx1ZXMoIDAgKTtcblx0XHRcdFx0dGhpcy5vcHRpb25zLnZhbHVlcyA9IG51bGw7XG5cdFx0XHR9IGVsc2UgaWYgKCB2YWx1ZSA9PT0gXCJtYXhcIiApIHtcblx0XHRcdFx0dGhpcy5vcHRpb25zLnZhbHVlID0gdGhpcy5fdmFsdWVzKCB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCAtIDEgKTtcblx0XHRcdFx0dGhpcy5vcHRpb25zLnZhbHVlcyA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAkLmlzQXJyYXkoIHRoaXMub3B0aW9ucy52YWx1ZXMgKSApIHtcblx0XHRcdHZhbHNMZW5ndGggPSB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aDtcblx0XHR9XG5cblx0XHRpZiAoIGtleSA9PT0gXCJkaXNhYmxlZFwiICkge1xuXHRcdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsICEhdmFsdWUgKTtcblx0XHR9XG5cblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApO1xuXG5cdFx0c3dpdGNoICgga2V5ICkge1xuXHRcdFx0Y2FzZSBcIm9yaWVudGF0aW9uXCI6XG5cdFx0XHRcdHRoaXMuX2RldGVjdE9yaWVudGF0aW9uKCk7XG5cdFx0XHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zbGlkZXItaG9yaXpvbnRhbCB1aS1zbGlkZXItdmVydGljYWxcIiApXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXNsaWRlci1cIiArIHRoaXMub3JpZW50YXRpb24gKTtcblx0XHRcdFx0dGhpcy5fcmVmcmVzaFZhbHVlKCk7XG5cblx0XHRcdFx0Ly8gUmVzZXQgcG9zaXRpb25pbmcgZnJvbSBwcmV2aW91cyBvcmllbnRhdGlvblxuXHRcdFx0XHR0aGlzLmhhbmRsZXMuY3NzKCB2YWx1ZSA9PT0gXCJob3Jpem9udGFsXCIgPyBcImJvdHRvbVwiIDogXCJsZWZ0XCIsIFwiXCIgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwidmFsdWVcIjpcblx0XHRcdFx0dGhpcy5fYW5pbWF0ZU9mZiA9IHRydWU7XG5cdFx0XHRcdHRoaXMuX3JlZnJlc2hWYWx1ZSgpO1xuXHRcdFx0XHR0aGlzLl9jaGFuZ2UoIG51bGwsIDAgKTtcblx0XHRcdFx0dGhpcy5fYW5pbWF0ZU9mZiA9IGZhbHNlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJ2YWx1ZXNcIjpcblx0XHRcdFx0dGhpcy5fYW5pbWF0ZU9mZiA9IHRydWU7XG5cdFx0XHRcdHRoaXMuX3JlZnJlc2hWYWx1ZSgpO1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IHZhbHNMZW5ndGg7IGkgKz0gMSApIHtcblx0XHRcdFx0XHR0aGlzLl9jaGFuZ2UoIG51bGwsIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInN0ZXBcIjpcblx0XHRcdGNhc2UgXCJtaW5cIjpcblx0XHRcdGNhc2UgXCJtYXhcIjpcblx0XHRcdFx0dGhpcy5fYW5pbWF0ZU9mZiA9IHRydWU7XG5cdFx0XHRcdHRoaXMuX2NhbGN1bGF0ZU5ld01heCgpO1xuXHRcdFx0XHR0aGlzLl9yZWZyZXNoVmFsdWUoKTtcblx0XHRcdFx0dGhpcy5fYW5pbWF0ZU9mZiA9IGZhbHNlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJyYW5nZVwiOlxuXHRcdFx0XHR0aGlzLl9hbmltYXRlT2ZmID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5fcmVmcmVzaCgpO1xuXHRcdFx0XHR0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fSxcblxuXHQvL2ludGVybmFsIHZhbHVlIGdldHRlclxuXHQvLyBfdmFsdWUoKSByZXR1cm5zIHZhbHVlIHRyaW1tZWQgYnkgbWluIGFuZCBtYXgsIGFsaWduZWQgYnkgc3RlcFxuXHRfdmFsdWU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2YWwgPSB0aGlzLm9wdGlvbnMudmFsdWU7XG5cdFx0dmFsID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIHZhbCApO1xuXG5cdFx0cmV0dXJuIHZhbDtcblx0fSxcblxuXHQvL2ludGVybmFsIHZhbHVlcyBnZXR0ZXJcblx0Ly8gX3ZhbHVlcygpIHJldHVybnMgYXJyYXkgb2YgdmFsdWVzIHRyaW1tZWQgYnkgbWluIGFuZCBtYXgsIGFsaWduZWQgYnkgc3RlcFxuXHQvLyBfdmFsdWVzKCBpbmRleCApIHJldHVybnMgc2luZ2xlIHZhbHVlIHRyaW1tZWQgYnkgbWluIGFuZCBtYXgsIGFsaWduZWQgYnkgc3RlcFxuXHRfdmFsdWVzOiBmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0dmFyIHZhbCxcblx0XHRcdHZhbHMsXG5cdFx0XHRpO1xuXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0dmFsID0gdGhpcy5vcHRpb25zLnZhbHVlc1sgaW5kZXggXTtcblx0XHRcdHZhbCA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCB2YWwgKTtcblxuXHRcdFx0cmV0dXJuIHZhbDtcblx0XHR9IGVsc2UgaWYgKCB0aGlzLm9wdGlvbnMudmFsdWVzICYmIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoICkge1xuXHRcdFx0Ly8gLnNsaWNlKCkgY3JlYXRlcyBhIGNvcHkgb2YgdGhlIGFycmF5XG5cdFx0XHQvLyB0aGlzIGNvcHkgZ2V0cyB0cmltbWVkIGJ5IG1pbiBhbmQgbWF4IGFuZCB0aGVuIHJldHVybmVkXG5cdFx0XHR2YWxzID0gdGhpcy5vcHRpb25zLnZhbHVlcy5zbGljZSgpO1xuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCB2YWxzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRcdHZhbHNbIGkgXSA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCB2YWxzWyBpIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHZhbHM7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gcmV0dXJucyB0aGUgc3RlcC1hbGlnbmVkIHZhbHVlIHRoYXQgdmFsIGlzIGNsb3Nlc3QgdG8sIGJldHdlZW4gKGluY2x1c2l2ZSkgbWluIGFuZCBtYXhcblx0X3RyaW1BbGlnblZhbHVlOiBmdW5jdGlvbiggdmFsICkge1xuXHRcdGlmICggdmFsIDw9IHRoaXMuX3ZhbHVlTWluKCkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fdmFsdWVNaW4oKTtcblx0XHR9XG5cdFx0aWYgKCB2YWwgPj0gdGhpcy5fdmFsdWVNYXgoKSApIHtcblx0XHRcdHJldHVybiB0aGlzLl92YWx1ZU1heCgpO1xuXHRcdH1cblx0XHR2YXIgc3RlcCA9ICggdGhpcy5vcHRpb25zLnN0ZXAgPiAwICkgPyB0aGlzLm9wdGlvbnMuc3RlcCA6IDEsXG5cdFx0XHR2YWxNb2RTdGVwID0gKHZhbCAtIHRoaXMuX3ZhbHVlTWluKCkpICUgc3RlcCxcblx0XHRcdGFsaWduVmFsdWUgPSB2YWwgLSB2YWxNb2RTdGVwO1xuXG5cdFx0aWYgKCBNYXRoLmFicyh2YWxNb2RTdGVwKSAqIDIgPj0gc3RlcCApIHtcblx0XHRcdGFsaWduVmFsdWUgKz0gKCB2YWxNb2RTdGVwID4gMCApID8gc3RlcCA6ICggLXN0ZXAgKTtcblx0XHR9XG5cblx0XHQvLyBTaW5jZSBKYXZhU2NyaXB0IGhhcyBwcm9ibGVtcyB3aXRoIGxhcmdlIGZsb2F0cywgcm91bmRcblx0XHQvLyB0aGUgZmluYWwgdmFsdWUgdG8gNSBkaWdpdHMgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQgKHNlZSAjNDEyNClcblx0XHRyZXR1cm4gcGFyc2VGbG9hdCggYWxpZ25WYWx1ZS50b0ZpeGVkKDUpICk7XG5cdH0sXG5cblx0X2NhbGN1bGF0ZU5ld01heDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1heCA9IHRoaXMub3B0aW9ucy5tYXgsXG5cdFx0XHRtaW4gPSB0aGlzLl92YWx1ZU1pbigpLFxuXHRcdFx0c3RlcCA9IHRoaXMub3B0aW9ucy5zdGVwLFxuXHRcdFx0YWJvdmVNaW4gPSBNYXRoLmZsb29yKCAoIG1heCAtIG1pbiApIC8gc3RlcCApICogc3RlcDtcblx0XHRtYXggPSBhYm92ZU1pbiArIG1pbjtcblx0XHR0aGlzLm1heCA9IHBhcnNlRmxvYXQoIG1heC50b0ZpeGVkKCB0aGlzLl9wcmVjaXNpb24oKSApICk7XG5cdH0sXG5cblx0X3ByZWNpc2lvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHByZWNpc2lvbiA9IHRoaXMuX3ByZWNpc2lvbk9mKCB0aGlzLm9wdGlvbnMuc3RlcCApO1xuXHRcdGlmICggdGhpcy5vcHRpb25zLm1pbiAhPT0gbnVsbCApIHtcblx0XHRcdHByZWNpc2lvbiA9IE1hdGgubWF4KCBwcmVjaXNpb24sIHRoaXMuX3ByZWNpc2lvbk9mKCB0aGlzLm9wdGlvbnMubWluICkgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHByZWNpc2lvbjtcblx0fSxcblxuXHRfcHJlY2lzaW9uT2Y6IGZ1bmN0aW9uKCBudW0gKSB7XG5cdFx0dmFyIHN0ciA9IG51bS50b1N0cmluZygpLFxuXHRcdFx0ZGVjaW1hbCA9IHN0ci5pbmRleE9mKCBcIi5cIiApO1xuXHRcdHJldHVybiBkZWNpbWFsID09PSAtMSA/IDAgOiBzdHIubGVuZ3RoIC0gZGVjaW1hbCAtIDE7XG5cdH0sXG5cblx0X3ZhbHVlTWluOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLm1pbjtcblx0fSxcblxuXHRfdmFsdWVNYXg6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1heDtcblx0fSxcblxuXHRfcmVmcmVzaFZhbHVlOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgbGFzdFZhbFBlcmNlbnQsIHZhbFBlcmNlbnQsIHZhbHVlLCB2YWx1ZU1pbiwgdmFsdWVNYXgsXG5cdFx0XHRvUmFuZ2UgPSB0aGlzLm9wdGlvbnMucmFuZ2UsXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0dGhhdCA9IHRoaXMsXG5cdFx0XHRhbmltYXRlID0gKCAhdGhpcy5fYW5pbWF0ZU9mZiApID8gby5hbmltYXRlIDogZmFsc2UsXG5cdFx0XHRfc2V0ID0ge307XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLmhhbmRsZXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0dmFsUGVyY2VudCA9ICggdGhhdC52YWx1ZXMoaSkgLSB0aGF0Ll92YWx1ZU1pbigpICkgLyAoIHRoYXQuX3ZhbHVlTWF4KCkgLSB0aGF0Ll92YWx1ZU1pbigpICkgKiAxMDA7XG5cdFx0XHRcdF9zZXRbIHRoYXQub3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiID8gXCJsZWZ0XCIgOiBcImJvdHRvbVwiIF0gPSB2YWxQZXJjZW50ICsgXCIlXCI7XG5cdFx0XHRcdCQoIHRoaXMgKS5zdG9wKCAxLCAxIClbIGFuaW1hdGUgPyBcImFuaW1hdGVcIiA6IFwiY3NzXCIgXSggX3NldCwgby5hbmltYXRlICk7XG5cdFx0XHRcdGlmICggdGhhdC5vcHRpb25zLnJhbmdlID09PSB0cnVlICkge1xuXHRcdFx0XHRcdGlmICggdGhhdC5vcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGkgPT09IDAgKSB7XG5cdFx0XHRcdFx0XHRcdHRoYXQucmFuZ2Uuc3RvcCggMSwgMSApWyBhbmltYXRlID8gXCJhbmltYXRlXCIgOiBcImNzc1wiIF0oIHsgbGVmdDogdmFsUGVyY2VudCArIFwiJVwiIH0sIG8uYW5pbWF0ZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCBpID09PSAxICkge1xuXHRcdFx0XHRcdFx0XHR0aGF0LnJhbmdlWyBhbmltYXRlID8gXCJhbmltYXRlXCIgOiBcImNzc1wiIF0oIHsgd2lkdGg6ICggdmFsUGVyY2VudCAtIGxhc3RWYWxQZXJjZW50ICkgKyBcIiVcIiB9LCB7IHF1ZXVlOiBmYWxzZSwgZHVyYXRpb246IG8uYW5pbWF0ZSB9ICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGlmICggaSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0dGhhdC5yYW5nZS5zdG9wKCAxLCAxIClbIGFuaW1hdGUgPyBcImFuaW1hdGVcIiA6IFwiY3NzXCIgXSggeyBib3R0b206ICggdmFsUGVyY2VudCApICsgXCIlXCIgfSwgby5hbmltYXRlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIGkgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdHRoYXQucmFuZ2VbIGFuaW1hdGUgPyBcImFuaW1hdGVcIiA6IFwiY3NzXCIgXSggeyBoZWlnaHQ6ICggdmFsUGVyY2VudCAtIGxhc3RWYWxQZXJjZW50ICkgKyBcIiVcIiB9LCB7IHF1ZXVlOiBmYWxzZSwgZHVyYXRpb246IG8uYW5pbWF0ZSB9ICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGxhc3RWYWxQZXJjZW50ID0gdmFsUGVyY2VudDtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YWx1ZSA9IHRoaXMudmFsdWUoKTtcblx0XHRcdHZhbHVlTWluID0gdGhpcy5fdmFsdWVNaW4oKTtcblx0XHRcdHZhbHVlTWF4ID0gdGhpcy5fdmFsdWVNYXgoKTtcblx0XHRcdHZhbFBlcmNlbnQgPSAoIHZhbHVlTWF4ICE9PSB2YWx1ZU1pbiApID9cblx0XHRcdFx0XHQoIHZhbHVlIC0gdmFsdWVNaW4gKSAvICggdmFsdWVNYXggLSB2YWx1ZU1pbiApICogMTAwIDpcblx0XHRcdFx0XHQwO1xuXHRcdFx0X3NldFsgdGhpcy5vcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIgPyBcImxlZnRcIiA6IFwiYm90dG9tXCIgXSA9IHZhbFBlcmNlbnQgKyBcIiVcIjtcblx0XHRcdHRoaXMuaGFuZGxlLnN0b3AoIDEsIDEgKVsgYW5pbWF0ZSA/IFwiYW5pbWF0ZVwiIDogXCJjc3NcIiBdKCBfc2V0LCBvLmFuaW1hdGUgKTtcblxuXHRcdFx0aWYgKCBvUmFuZ2UgPT09IFwibWluXCIgJiYgdGhpcy5vcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIgKSB7XG5cdFx0XHRcdHRoaXMucmFuZ2Uuc3RvcCggMSwgMSApWyBhbmltYXRlID8gXCJhbmltYXRlXCIgOiBcImNzc1wiIF0oIHsgd2lkdGg6IHZhbFBlcmNlbnQgKyBcIiVcIiB9LCBvLmFuaW1hdGUgKTtcblx0XHRcdH1cblx0XHRcdGlmICggb1JhbmdlID09PSBcIm1heFwiICYmIHRoaXMub3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiICkge1xuXHRcdFx0XHR0aGlzLnJhbmdlWyBhbmltYXRlID8gXCJhbmltYXRlXCIgOiBcImNzc1wiIF0oIHsgd2lkdGg6ICggMTAwIC0gdmFsUGVyY2VudCApICsgXCIlXCIgfSwgeyBxdWV1ZTogZmFsc2UsIGR1cmF0aW9uOiBvLmFuaW1hdGUgfSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBvUmFuZ2UgPT09IFwibWluXCIgJiYgdGhpcy5vcmllbnRhdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiICkge1xuXHRcdFx0XHR0aGlzLnJhbmdlLnN0b3AoIDEsIDEgKVsgYW5pbWF0ZSA/IFwiYW5pbWF0ZVwiIDogXCJjc3NcIiBdKCB7IGhlaWdodDogdmFsUGVyY2VudCArIFwiJVwiIH0sIG8uYW5pbWF0ZSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBvUmFuZ2UgPT09IFwibWF4XCIgJiYgdGhpcy5vcmllbnRhdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiICkge1xuXHRcdFx0XHR0aGlzLnJhbmdlWyBhbmltYXRlID8gXCJhbmltYXRlXCIgOiBcImNzc1wiIF0oIHsgaGVpZ2h0OiAoIDEwMCAtIHZhbFBlcmNlbnQgKSArIFwiJVwiIH0sIHsgcXVldWU6IGZhbHNlLCBkdXJhdGlvbjogby5hbmltYXRlIH0gKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0X2hhbmRsZUV2ZW50czoge1xuXHRcdGtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciBhbGxvd2VkLCBjdXJWYWwsIG5ld1ZhbCwgc3RlcCxcblx0XHRcdFx0aW5kZXggPSAkKCBldmVudC50YXJnZXQgKS5kYXRhKCBcInVpLXNsaWRlci1oYW5kbGUtaW5kZXhcIiApO1xuXG5cdFx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5IT01FOlxuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5FTkQ6XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlBBR0VfVVA6XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlBBR0VfRE9XTjpcblx0XHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuVVA6XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlJJR0hUOlxuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5ET1dOOlxuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5MRUZUOlxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0aWYgKCAhdGhpcy5fa2V5U2xpZGluZyApIHtcblx0XHRcdFx0XHRcdHRoaXMuX2tleVNsaWRpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdFx0JCggZXZlbnQudGFyZ2V0ICkuYWRkQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKTtcblx0XHRcdFx0XHRcdGFsbG93ZWQgPSB0aGlzLl9zdGFydCggZXZlbnQsIGluZGV4ICk7XG5cdFx0XHRcdFx0XHRpZiAoIGFsbG93ZWQgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHRzdGVwID0gdGhpcy5vcHRpb25zLnN0ZXA7XG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7XG5cdFx0XHRcdGN1clZhbCA9IG5ld1ZhbCA9IHRoaXMudmFsdWVzKCBpbmRleCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VyVmFsID0gbmV3VmFsID0gdGhpcy52YWx1ZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5IT01FOlxuXHRcdFx0XHRcdG5ld1ZhbCA9IHRoaXMuX3ZhbHVlTWluKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkVORDpcblx0XHRcdFx0XHRuZXdWYWwgPSB0aGlzLl92YWx1ZU1heCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5QQUdFX1VQOlxuXHRcdFx0XHRcdG5ld1ZhbCA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKFxuXHRcdFx0XHRcdFx0Y3VyVmFsICsgKCAoIHRoaXMuX3ZhbHVlTWF4KCkgLSB0aGlzLl92YWx1ZU1pbigpICkgLyB0aGlzLm51bVBhZ2VzIClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5QQUdFX0RPV046XG5cdFx0XHRcdFx0bmV3VmFsID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoXG5cdFx0XHRcdFx0XHRjdXJWYWwgLSAoICh0aGlzLl92YWx1ZU1heCgpIC0gdGhpcy5fdmFsdWVNaW4oKSkgLyB0aGlzLm51bVBhZ2VzICkgKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuVVA6XG5cdFx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlJJR0hUOlxuXHRcdFx0XHRcdGlmICggY3VyVmFsID09PSB0aGlzLl92YWx1ZU1heCgpICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRuZXdWYWwgPSB0aGlzLl90cmltQWxpZ25WYWx1ZSggY3VyVmFsICsgc3RlcCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5ET1dOOlxuXHRcdFx0XHRjYXNlICQudWkua2V5Q29kZS5MRUZUOlxuXHRcdFx0XHRcdGlmICggY3VyVmFsID09PSB0aGlzLl92YWx1ZU1pbigpICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRuZXdWYWwgPSB0aGlzLl90cmltQWxpZ25WYWx1ZSggY3VyVmFsIC0gc3RlcCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9zbGlkZSggZXZlbnQsIGluZGV4LCBuZXdWYWwgKTtcblx0XHR9LFxuXHRcdGtleXVwOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHR2YXIgaW5kZXggPSAkKCBldmVudC50YXJnZXQgKS5kYXRhKCBcInVpLXNsaWRlci1oYW5kbGUtaW5kZXhcIiApO1xuXG5cdFx0XHRpZiAoIHRoaXMuX2tleVNsaWRpbmcgKSB7XG5cdFx0XHRcdHRoaXMuX2tleVNsaWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0dGhpcy5fc3RvcCggZXZlbnQsIGluZGV4ICk7XG5cdFx0XHRcdHRoaXMuX2NoYW5nZSggZXZlbnQsIGluZGV4ICk7XG5cdFx0XHRcdCQoIGV2ZW50LnRhcmdldCApLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59KTtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBTb3J0YWJsZSAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3NvcnRhYmxlL1xuICovXG5cblxudmFyIHNvcnRhYmxlID0gJC53aWRnZXQoXCJ1aS5zb3J0YWJsZVwiLCAkLnVpLm1vdXNlLCB7XG5cdHZlcnNpb246IFwiMS4xMS4zXCIsXG5cdHdpZGdldEV2ZW50UHJlZml4OiBcInNvcnRcIixcblx0cmVhZHk6IGZhbHNlLFxuXHRvcHRpb25zOiB7XG5cdFx0YXBwZW5kVG86IFwicGFyZW50XCIsXG5cdFx0YXhpczogZmFsc2UsXG5cdFx0Y29ubmVjdFdpdGg6IGZhbHNlLFxuXHRcdGNvbnRhaW5tZW50OiBmYWxzZSxcblx0XHRjdXJzb3I6IFwiYXV0b1wiLFxuXHRcdGN1cnNvckF0OiBmYWxzZSxcblx0XHRkcm9wT25FbXB0eTogdHJ1ZSxcblx0XHRmb3JjZVBsYWNlaG9sZGVyU2l6ZTogZmFsc2UsXG5cdFx0Zm9yY2VIZWxwZXJTaXplOiBmYWxzZSxcblx0XHRncmlkOiBmYWxzZSxcblx0XHRoYW5kbGU6IGZhbHNlLFxuXHRcdGhlbHBlcjogXCJvcmlnaW5hbFwiLFxuXHRcdGl0ZW1zOiBcIj4gKlwiLFxuXHRcdG9wYWNpdHk6IGZhbHNlLFxuXHRcdHBsYWNlaG9sZGVyOiBmYWxzZSxcblx0XHRyZXZlcnQ6IGZhbHNlLFxuXHRcdHNjcm9sbDogdHJ1ZSxcblx0XHRzY3JvbGxTZW5zaXRpdml0eTogMjAsXG5cdFx0c2Nyb2xsU3BlZWQ6IDIwLFxuXHRcdHNjb3BlOiBcImRlZmF1bHRcIixcblx0XHR0b2xlcmFuY2U6IFwiaW50ZXJzZWN0XCIsXG5cdFx0ekluZGV4OiAxMDAwLFxuXG5cdFx0Ly8gY2FsbGJhY2tzXG5cdFx0YWN0aXZhdGU6IG51bGwsXG5cdFx0YmVmb3JlU3RvcDogbnVsbCxcblx0XHRjaGFuZ2U6IG51bGwsXG5cdFx0ZGVhY3RpdmF0ZTogbnVsbCxcblx0XHRvdXQ6IG51bGwsXG5cdFx0b3ZlcjogbnVsbCxcblx0XHRyZWNlaXZlOiBudWxsLFxuXHRcdHJlbW92ZTogbnVsbCxcblx0XHRzb3J0OiBudWxsLFxuXHRcdHN0YXJ0OiBudWxsLFxuXHRcdHN0b3A6IG51bGwsXG5cdFx0dXBkYXRlOiBudWxsXG5cdH0sXG5cblx0X2lzT3ZlckF4aXM6IGZ1bmN0aW9uKCB4LCByZWZlcmVuY2UsIHNpemUgKSB7XG5cdFx0cmV0dXJuICggeCA+PSByZWZlcmVuY2UgKSAmJiAoIHggPCAoIHJlZmVyZW5jZSArIHNpemUgKSApO1xuXHR9LFxuXG5cdF9pc0Zsb2F0aW5nOiBmdW5jdGlvbiggaXRlbSApIHtcblx0XHRyZXR1cm4gKC9sZWZ0fHJpZ2h0LykudGVzdChpdGVtLmNzcyhcImZsb2F0XCIpKSB8fCAoL2lubGluZXx0YWJsZS1jZWxsLykudGVzdChpdGVtLmNzcyhcImRpc3BsYXlcIikpO1xuXHR9LFxuXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnM7XG5cdFx0dGhpcy5jb250YWluZXJDYWNoZSA9IHt9O1xuXHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLXNvcnRhYmxlXCIpO1xuXG5cdFx0Ly9HZXQgdGhlIGl0ZW1zXG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cblx0XHQvL0xldCdzIGRldGVybWluZSBpZiB0aGUgaXRlbXMgYXJlIGJlaW5nIGRpc3BsYXllZCBob3Jpem9udGFsbHlcblx0XHR0aGlzLmZsb2F0aW5nID0gdGhpcy5pdGVtcy5sZW5ndGggPyBvLmF4aXMgPT09IFwieFwiIHx8IHRoaXMuX2lzRmxvYXRpbmcodGhpcy5pdGVtc1swXS5pdGVtKSA6IGZhbHNlO1xuXG5cdFx0Ly9MZXQncyBkZXRlcm1pbmUgdGhlIHBhcmVudCdzIG9mZnNldFxuXHRcdHRoaXMub2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpO1xuXG5cdFx0Ly9Jbml0aWFsaXplIG1vdXNlIGV2ZW50cyBmb3IgaW50ZXJhY3Rpb25cblx0XHR0aGlzLl9tb3VzZUluaXQoKTtcblxuXHRcdHRoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpO1xuXG5cdFx0Ly9XZSdyZSByZWFkeSB0byBnb1xuXHRcdHRoaXMucmVhZHkgPSB0cnVlO1xuXG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcblxuXHRcdGlmICgga2V5ID09PSBcImhhbmRsZVwiICkge1xuXHRcdFx0dGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9zZXRIYW5kbGVDbGFzc05hbWU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS1zb3J0YWJsZS1oYW5kbGVcIiApLnJlbW92ZUNsYXNzKCBcInVpLXNvcnRhYmxlLWhhbmRsZVwiICk7XG5cdFx0JC5lYWNoKCB0aGlzLml0ZW1zLCBmdW5jdGlvbigpIHtcblx0XHRcdCggdGhpcy5pbnN0YW5jZS5vcHRpb25zLmhhbmRsZSA/XG5cdFx0XHRcdHRoaXMuaXRlbS5maW5kKCB0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGFuZGxlICkgOiB0aGlzLml0ZW0gKVxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktc29ydGFibGUtaGFuZGxlXCIgKTtcblx0XHR9KTtcblx0fSxcblxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbGVtZW50XG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc29ydGFibGUgdWktc29ydGFibGUtZGlzYWJsZWRcIiApXG5cdFx0XHQuZmluZCggXCIudWktc29ydGFibGUtaGFuZGxlXCIgKVxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc29ydGFibGUtaGFuZGxlXCIgKTtcblx0XHR0aGlzLl9tb3VzZURlc3Ryb3koKTtcblxuXHRcdGZvciAoIHZhciBpID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcblx0XHRcdHRoaXMuaXRlbXNbaV0uaXRlbS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0TmFtZSArIFwiLWl0ZW1cIik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0X21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oZXZlbnQsIG92ZXJyaWRlSGFuZGxlKSB7XG5cdFx0dmFyIGN1cnJlbnRJdGVtID0gbnVsbCxcblx0XHRcdHZhbGlkSGFuZGxlID0gZmFsc2UsXG5cdFx0XHR0aGF0ID0gdGhpcztcblxuXHRcdGlmICh0aGlzLnJldmVydGluZykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLm9wdGlvbnMudHlwZSA9PT0gXCJzdGF0aWNcIikge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vV2UgaGF2ZSB0byByZWZyZXNoIHRoZSBpdGVtcyBkYXRhIG9uY2UgZmlyc3Rcblx0XHR0aGlzLl9yZWZyZXNoSXRlbXMoZXZlbnQpO1xuXG5cdFx0Ly9GaW5kIG91dCBpZiB0aGUgY2xpY2tlZCBub2RlIChvciBvbmUgb2YgaXRzIHBhcmVudHMpIGlzIGEgYWN0dWFsIGl0ZW0gaW4gdGhpcy5pdGVtc1xuXHRcdCQoZXZlbnQudGFyZ2V0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmKCQuZGF0YSh0aGlzLCB0aGF0LndpZGdldE5hbWUgKyBcIi1pdGVtXCIpID09PSB0aGF0KSB7XG5cdFx0XHRcdGN1cnJlbnRJdGVtID0gJCh0aGlzKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmKCQuZGF0YShldmVudC50YXJnZXQsIHRoYXQud2lkZ2V0TmFtZSArIFwiLWl0ZW1cIikgPT09IHRoYXQpIHtcblx0XHRcdGN1cnJlbnRJdGVtID0gJChldmVudC50YXJnZXQpO1xuXHRcdH1cblxuXHRcdGlmKCFjdXJyZW50SXRlbSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZih0aGlzLm9wdGlvbnMuaGFuZGxlICYmICFvdmVycmlkZUhhbmRsZSkge1xuXHRcdFx0JCh0aGlzLm9wdGlvbnMuaGFuZGxlLCBjdXJyZW50SXRlbSkuZmluZChcIipcIikuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmKHRoaXMgPT09IGV2ZW50LnRhcmdldCkge1xuXHRcdFx0XHRcdHZhbGlkSGFuZGxlID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZighdmFsaWRIYW5kbGUpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuY3VycmVudEl0ZW0gPSBjdXJyZW50SXRlbTtcblx0XHR0aGlzLl9yZW1vdmVDdXJyZW50c0Zyb21JdGVtcygpO1xuXHRcdHJldHVybiB0cnVlO1xuXG5cdH0sXG5cblx0X21vdXNlU3RhcnQ6IGZ1bmN0aW9uKGV2ZW50LCBvdmVycmlkZUhhbmRsZSwgbm9BY3RpdmF0aW9uKSB7XG5cblx0XHR2YXIgaSwgYm9keSxcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnM7XG5cblx0XHR0aGlzLmN1cnJlbnRDb250YWluZXIgPSB0aGlzO1xuXG5cdFx0Ly9XZSBvbmx5IG5lZWQgdG8gY2FsbCByZWZyZXNoUG9zaXRpb25zLCBiZWNhdXNlIHRoZSByZWZyZXNoSXRlbXMgY2FsbCBoYXMgYmVlbiBtb3ZlZCB0byBtb3VzZUNhcHR1cmVcblx0XHR0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKTtcblxuXHRcdC8vQ3JlYXRlIGFuZCBhcHBlbmQgdGhlIHZpc2libGUgaGVscGVyXG5cdFx0dGhpcy5oZWxwZXIgPSB0aGlzLl9jcmVhdGVIZWxwZXIoZXZlbnQpO1xuXG5cdFx0Ly9DYWNoZSB0aGUgaGVscGVyIHNpemVcblx0XHR0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7XG5cblx0XHQvKlxuXHRcdCAqIC0gUG9zaXRpb24gZ2VuZXJhdGlvbiAtXG5cdFx0ICogVGhpcyBibG9jayBnZW5lcmF0ZXMgZXZlcnl0aGluZyBwb3NpdGlvbiByZWxhdGVkIC0gaXQncyB0aGUgY29yZSBvZiBkcmFnZ2FibGVzLlxuXHRcdCAqL1xuXG5cdFx0Ly9DYWNoZSB0aGUgbWFyZ2lucyBvZiB0aGUgb3JpZ2luYWwgZWxlbWVudFxuXHRcdHRoaXMuX2NhY2hlTWFyZ2lucygpO1xuXG5cdFx0Ly9HZXQgdGhlIG5leHQgc2Nyb2xsaW5nIHBhcmVudFxuXHRcdHRoaXMuc2Nyb2xsUGFyZW50ID0gdGhpcy5oZWxwZXIuc2Nyb2xsUGFyZW50KCk7XG5cblx0XHQvL1RoZSBlbGVtZW50J3MgYWJzb2x1dGUgcG9zaXRpb24gb24gdGhlIHBhZ2UgbWludXMgbWFyZ2luc1xuXHRcdHRoaXMub2Zmc2V0ID0gdGhpcy5jdXJyZW50SXRlbS5vZmZzZXQoKTtcblx0XHR0aGlzLm9mZnNldCA9IHtcblx0XHRcdHRvcDogdGhpcy5vZmZzZXQudG9wIC0gdGhpcy5tYXJnaW5zLnRvcCxcblx0XHRcdGxlZnQ6IHRoaXMub2Zmc2V0LmxlZnQgLSB0aGlzLm1hcmdpbnMubGVmdFxuXHRcdH07XG5cblx0XHQkLmV4dGVuZCh0aGlzLm9mZnNldCwge1xuXHRcdFx0Y2xpY2s6IHsgLy9XaGVyZSB0aGUgY2xpY2sgaGFwcGVuZWQsIHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50XG5cdFx0XHRcdGxlZnQ6IGV2ZW50LnBhZ2VYIC0gdGhpcy5vZmZzZXQubGVmdCxcblx0XHRcdFx0dG9wOiBldmVudC5wYWdlWSAtIHRoaXMub2Zmc2V0LnRvcFxuXHRcdFx0fSxcblx0XHRcdHBhcmVudDogdGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCksXG5cdFx0XHRyZWxhdGl2ZTogdGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKSAvL1RoaXMgaXMgYSByZWxhdGl2ZSB0byBhYnNvbHV0ZSBwb3NpdGlvbiBtaW51cyB0aGUgYWN0dWFsIHBvc2l0aW9uIGNhbGN1bGF0aW9uIC0gb25seSB1c2VkIGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIGhlbHBlclxuXHRcdH0pO1xuXG5cdFx0Ly8gT25seSBhZnRlciB3ZSBnb3QgdGhlIG9mZnNldCwgd2UgY2FuIGNoYW5nZSB0aGUgaGVscGVyJ3MgcG9zaXRpb24gdG8gYWJzb2x1dGVcblx0XHQvLyBUT0RPOiBTdGlsbCBuZWVkIHRvIGZpZ3VyZSBvdXQgYSB3YXkgdG8gbWFrZSByZWxhdGl2ZSBzb3J0aW5nIHBvc3NpYmxlXG5cdFx0dGhpcy5oZWxwZXIuY3NzKFwicG9zaXRpb25cIiwgXCJhYnNvbHV0ZVwiKTtcblx0XHR0aGlzLmNzc1Bvc2l0aW9uID0gdGhpcy5oZWxwZXIuY3NzKFwicG9zaXRpb25cIik7XG5cblx0XHQvL0dlbmVyYXRlIHRoZSBvcmlnaW5hbCBwb3NpdGlvblxuXHRcdHRoaXMub3JpZ2luYWxQb3NpdGlvbiA9IHRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQpO1xuXHRcdHRoaXMub3JpZ2luYWxQYWdlWCA9IGV2ZW50LnBhZ2VYO1xuXHRcdHRoaXMub3JpZ2luYWxQYWdlWSA9IGV2ZW50LnBhZ2VZO1xuXG5cdFx0Ly9BZGp1c3QgdGhlIG1vdXNlIG9mZnNldCByZWxhdGl2ZSB0byB0aGUgaGVscGVyIGlmIFwiY3Vyc29yQXRcIiBpcyBzdXBwbGllZFxuXHRcdChvLmN1cnNvckF0ICYmIHRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoby5jdXJzb3JBdCkpO1xuXG5cdFx0Ly9DYWNoZSB0aGUgZm9ybWVyIERPTSBwb3NpdGlvblxuXHRcdHRoaXMuZG9tUG9zaXRpb24gPSB7IHByZXY6IHRoaXMuY3VycmVudEl0ZW0ucHJldigpWzBdLCBwYXJlbnQ6IHRoaXMuY3VycmVudEl0ZW0ucGFyZW50KClbMF0gfTtcblxuXHRcdC8vSWYgdGhlIGhlbHBlciBpcyBub3QgdGhlIG9yaWdpbmFsLCBoaWRlIHRoZSBvcmlnaW5hbCBzbyBpdCdzIG5vdCBwbGF5aW5nIGFueSByb2xlIGR1cmluZyB0aGUgZHJhZywgd29uJ3QgY2F1c2UgYW55dGhpbmcgYmFkIHRoaXMgd2F5XG5cdFx0aWYodGhpcy5oZWxwZXJbMF0gIT09IHRoaXMuY3VycmVudEl0ZW1bMF0pIHtcblx0XHRcdHRoaXMuY3VycmVudEl0ZW0uaGlkZSgpO1xuXHRcdH1cblxuXHRcdC8vQ3JlYXRlIHRoZSBwbGFjZWhvbGRlclxuXHRcdHRoaXMuX2NyZWF0ZVBsYWNlaG9sZGVyKCk7XG5cblx0XHQvL1NldCBhIGNvbnRhaW5tZW50IGlmIGdpdmVuIGluIHRoZSBvcHRpb25zXG5cdFx0aWYoby5jb250YWlubWVudCkge1xuXHRcdFx0dGhpcy5fc2V0Q29udGFpbm1lbnQoKTtcblx0XHR9XG5cblx0XHRpZiggby5jdXJzb3IgJiYgby5jdXJzb3IgIT09IFwiYXV0b1wiICkgeyAvLyBjdXJzb3Igb3B0aW9uXG5cdFx0XHRib2R5ID0gdGhpcy5kb2N1bWVudC5maW5kKCBcImJvZHlcIiApO1xuXG5cdFx0XHQvLyBzdXBwb3J0OiBJRVxuXHRcdFx0dGhpcy5zdG9yZWRDdXJzb3IgPSBib2R5LmNzcyggXCJjdXJzb3JcIiApO1xuXHRcdFx0Ym9keS5jc3MoIFwiY3Vyc29yXCIsIG8uY3Vyc29yICk7XG5cblx0XHRcdHRoaXMuc3RvcmVkU3R5bGVzaGVldCA9ICQoIFwiPHN0eWxlPip7IGN1cnNvcjogXCIrby5jdXJzb3IrXCIgIWltcG9ydGFudDsgfTwvc3R5bGU+XCIgKS5hcHBlbmRUbyggYm9keSApO1xuXHRcdH1cblxuXHRcdGlmKG8ub3BhY2l0eSkgeyAvLyBvcGFjaXR5IG9wdGlvblxuXHRcdFx0aWYgKHRoaXMuaGVscGVyLmNzcyhcIm9wYWNpdHlcIikpIHtcblx0XHRcdFx0dGhpcy5fc3RvcmVkT3BhY2l0eSA9IHRoaXMuaGVscGVyLmNzcyhcIm9wYWNpdHlcIik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmhlbHBlci5jc3MoXCJvcGFjaXR5XCIsIG8ub3BhY2l0eSk7XG5cdFx0fVxuXG5cdFx0aWYoby56SW5kZXgpIHsgLy8gekluZGV4IG9wdGlvblxuXHRcdFx0aWYgKHRoaXMuaGVscGVyLmNzcyhcInpJbmRleFwiKSkge1xuXHRcdFx0XHR0aGlzLl9zdG9yZWRaSW5kZXggPSB0aGlzLmhlbHBlci5jc3MoXCJ6SW5kZXhcIik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmhlbHBlci5jc3MoXCJ6SW5kZXhcIiwgby56SW5kZXgpO1xuXHRcdH1cblxuXHRcdC8vUHJlcGFyZSBzY3JvbGxpbmdcblx0XHRpZih0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gdGhpcy5kb2N1bWVudFswXSAmJiB0aGlzLnNjcm9sbFBhcmVudFswXS50YWdOYW1lICE9PSBcIkhUTUxcIikge1xuXHRcdFx0dGhpcy5vdmVyZmxvd09mZnNldCA9IHRoaXMuc2Nyb2xsUGFyZW50Lm9mZnNldCgpO1xuXHRcdH1cblxuXHRcdC8vQ2FsbCBjYWxsYmFja3Ncblx0XHR0aGlzLl90cmlnZ2VyKFwic3RhcnRcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpKTtcblxuXHRcdC8vUmVjYWNoZSB0aGUgaGVscGVyIHNpemVcblx0XHRpZighdGhpcy5fcHJlc2VydmVIZWxwZXJQcm9wb3J0aW9ucykge1xuXHRcdFx0dGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpO1xuXHRcdH1cblxuXG5cdFx0Ly9Qb3N0IFwiYWN0aXZhdGVcIiBldmVudHMgdG8gcG9zc2libGUgY29udGFpbmVyc1xuXHRcdGlmKCAhbm9BY3RpdmF0aW9uICkge1xuXHRcdFx0Zm9yICggaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcblx0XHRcdFx0dGhpcy5jb250YWluZXJzWyBpIF0uX3RyaWdnZXIoIFwiYWN0aXZhdGVcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCggdGhpcyApICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9QcmVwYXJlIHBvc3NpYmxlIGRyb3BwYWJsZXNcblx0XHRpZigkLnVpLmRkbWFuYWdlcikge1xuXHRcdFx0JC51aS5kZG1hbmFnZXIuY3VycmVudCA9IHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCQudWkuZGRtYW5hZ2VyICYmICFvLmRyb3BCZWhhdmlvdXIpIHtcblx0XHRcdCQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsIGV2ZW50KTtcblx0XHR9XG5cblx0XHR0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcblxuXHRcdHRoaXMuaGVscGVyLmFkZENsYXNzKFwidWktc29ydGFibGUtaGVscGVyXCIpO1xuXHRcdHRoaXMuX21vdXNlRHJhZyhldmVudCk7IC8vRXhlY3V0ZSB0aGUgZHJhZyBvbmNlIC0gdGhpcyBjYXVzZXMgdGhlIGhlbHBlciBub3QgdG8gYmUgdmlzaWJsZSBiZWZvcmUgZ2V0dGluZyBpdHMgY29ycmVjdCBwb3NpdGlvblxuXHRcdHJldHVybiB0cnVlO1xuXG5cdH0sXG5cblx0X21vdXNlRHJhZzogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgaSwgaXRlbSwgaXRlbUVsZW1lbnQsIGludGVyc2VjdGlvbixcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRzY3JvbGxlZCA9IGZhbHNlO1xuXG5cdFx0Ly9Db21wdXRlIHRoZSBoZWxwZXJzIHBvc2l0aW9uXG5cdFx0dGhpcy5wb3NpdGlvbiA9IHRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQpO1xuXHRcdHRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbyhcImFic29sdXRlXCIpO1xuXG5cdFx0aWYgKCF0aGlzLmxhc3RQb3NpdGlvbkFicykge1xuXHRcdFx0dGhpcy5sYXN0UG9zaXRpb25BYnMgPSB0aGlzLnBvc2l0aW9uQWJzO1xuXHRcdH1cblxuXHRcdC8vRG8gc2Nyb2xsaW5nXG5cdFx0aWYodGhpcy5vcHRpb25zLnNjcm9sbCkge1xuXHRcdFx0aWYodGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IHRoaXMuZG9jdW1lbnRbMF0gJiYgdGhpcy5zY3JvbGxQYXJlbnRbMF0udGFnTmFtZSAhPT0gXCJIVE1MXCIpIHtcblxuXHRcdFx0XHRpZigodGhpcy5vdmVyZmxvd09mZnNldC50b3AgKyB0aGlzLnNjcm9sbFBhcmVudFswXS5vZmZzZXRIZWlnaHQpIC0gZXZlbnQucGFnZVkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KSB7XG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wID0gc2Nyb2xsZWQgPSB0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AgKyBvLnNjcm9sbFNwZWVkO1xuXHRcdFx0XHR9IGVsc2UgaWYoZXZlbnQucGFnZVkgLSB0aGlzLm92ZXJmbG93T2Zmc2V0LnRvcCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHtcblx0XHRcdFx0XHR0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AgPSBzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCAtIG8uc2Nyb2xsU3BlZWQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZigodGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0ICsgdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0V2lkdGgpIC0gZXZlbnQucGFnZVggPCBvLnNjcm9sbFNlbnNpdGl2aXR5KSB7XG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCA9IHNjcm9sbGVkID0gdGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCArIG8uc2Nyb2xsU3BlZWQ7XG5cdFx0XHRcdH0gZWxzZSBpZihldmVudC5wYWdlWCAtIHRoaXMub3ZlcmZsb3dPZmZzZXQubGVmdCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHtcblx0XHRcdFx0XHR0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0ID0gc2Nyb2xsZWQgPSB0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0IC0gby5zY3JvbGxTcGVlZDtcblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGlmKGV2ZW50LnBhZ2VZIC0gdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHtcblx0XHRcdFx0XHRzY3JvbGxlZCA9IHRoaXMuZG9jdW1lbnQuc2Nyb2xsVG9wKHRoaXMuZG9jdW1lbnQuc2Nyb2xsVG9wKCkgLSBvLnNjcm9sbFNwZWVkKTtcblx0XHRcdFx0fSBlbHNlIGlmKHRoaXMud2luZG93LmhlaWdodCgpIC0gKGV2ZW50LnBhZ2VZIC0gdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKSkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KSB7XG5cdFx0XHRcdFx0c2Nyb2xsZWQgPSB0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCh0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpICsgby5zY3JvbGxTcGVlZCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihldmVudC5wYWdlWCAtIHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpIDwgby5zY3JvbGxTZW5zaXRpdml0eSkge1xuXHRcdFx0XHRcdHNjcm9sbGVkID0gdGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpIC0gby5zY3JvbGxTcGVlZCk7XG5cdFx0XHRcdH0gZWxzZSBpZih0aGlzLndpbmRvdy53aWR0aCgpIC0gKGV2ZW50LnBhZ2VYIC0gdGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KCkpIDwgby5zY3JvbGxTZW5zaXRpdml0eSkge1xuXHRcdFx0XHRcdHNjcm9sbGVkID0gdGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpICsgby5zY3JvbGxTcGVlZCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRpZihzY3JvbGxlZCAhPT0gZmFsc2UgJiYgJC51aS5kZG1hbmFnZXIgJiYgIW8uZHJvcEJlaGF2aW91cikge1xuXHRcdFx0XHQkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLCBldmVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9SZWdlbmVyYXRlIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbiB1c2VkIGZvciBwb3NpdGlvbiBjaGVja3Ncblx0XHR0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5fY29udmVydFBvc2l0aW9uVG8oXCJhYnNvbHV0ZVwiKTtcblxuXHRcdC8vU2V0IHRoZSBoZWxwZXIgcG9zaXRpb25cblx0XHRpZighdGhpcy5vcHRpb25zLmF4aXMgfHwgdGhpcy5vcHRpb25zLmF4aXMgIT09IFwieVwiKSB7XG5cdFx0XHR0aGlzLmhlbHBlclswXS5zdHlsZS5sZWZ0ID0gdGhpcy5wb3NpdGlvbi5sZWZ0K1wicHhcIjtcblx0XHR9XG5cdFx0aWYoIXRoaXMub3B0aW9ucy5heGlzIHx8IHRoaXMub3B0aW9ucy5heGlzICE9PSBcInhcIikge1xuXHRcdFx0dGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wID0gdGhpcy5wb3NpdGlvbi50b3ArXCJweFwiO1xuXHRcdH1cblxuXHRcdC8vUmVhcnJhbmdlXG5cdFx0Zm9yIChpID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXG5cdFx0XHQvL0NhY2hlIHZhcmlhYmxlcyBhbmQgaW50ZXJzZWN0aW9uLCBjb250aW51ZSBpZiBubyBpbnRlcnNlY3Rpb25cblx0XHRcdGl0ZW0gPSB0aGlzLml0ZW1zW2ldO1xuXHRcdFx0aXRlbUVsZW1lbnQgPSBpdGVtLml0ZW1bMF07XG5cdFx0XHRpbnRlcnNlY3Rpb24gPSB0aGlzLl9pbnRlcnNlY3RzV2l0aFBvaW50ZXIoaXRlbSk7XG5cdFx0XHRpZiAoIWludGVyc2VjdGlvbikge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT25seSBwdXQgdGhlIHBsYWNlaG9sZGVyIGluc2lkZSB0aGUgY3VycmVudCBDb250YWluZXIsIHNraXAgYWxsXG5cdFx0XHQvLyBpdGVtcyBmcm9tIG90aGVyIGNvbnRhaW5lcnMuIFRoaXMgd29ya3MgYmVjYXVzZSB3aGVuIG1vdmluZ1xuXHRcdFx0Ly8gYW4gaXRlbSBmcm9tIG9uZSBjb250YWluZXIgdG8gYW5vdGhlciB0aGVcblx0XHRcdC8vIGN1cnJlbnRDb250YWluZXIgaXMgc3dpdGNoZWQgYmVmb3JlIHRoZSBwbGFjZWhvbGRlciBpcyBtb3ZlZC5cblx0XHRcdC8vXG5cdFx0XHQvLyBXaXRob3V0IHRoaXMsIG1vdmluZyBpdGVtcyBpbiBcInN1Yi1zb3J0YWJsZXNcIiBjYW4gY2F1c2Vcblx0XHRcdC8vIHRoZSBwbGFjZWhvbGRlciB0byBqaXR0ZXIgYmV0d2VlbiB0aGUgb3V0ZXIgYW5kIGlubmVyIGNvbnRhaW5lci5cblx0XHRcdGlmIChpdGVtLmluc3RhbmNlICE9PSB0aGlzLmN1cnJlbnRDb250YWluZXIpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGNhbm5vdCBpbnRlcnNlY3Qgd2l0aCBpdHNlbGZcblx0XHRcdC8vIG5vIHVzZWxlc3MgYWN0aW9ucyB0aGF0IGhhdmUgYmVlbiBkb25lIGJlZm9yZVxuXHRcdFx0Ly8gbm8gYWN0aW9uIGlmIHRoZSBpdGVtIG1vdmVkIGlzIHRoZSBwYXJlbnQgb2YgdGhlIGl0ZW0gY2hlY2tlZFxuXHRcdFx0aWYgKGl0ZW1FbGVtZW50ICE9PSB0aGlzLmN1cnJlbnRJdGVtWzBdICYmXG5cdFx0XHRcdHRoaXMucGxhY2Vob2xkZXJbaW50ZXJzZWN0aW9uID09PSAxID8gXCJuZXh0XCIgOiBcInByZXZcIl0oKVswXSAhPT0gaXRlbUVsZW1lbnQgJiZcblx0XHRcdFx0ISQuY29udGFpbnModGhpcy5wbGFjZWhvbGRlclswXSwgaXRlbUVsZW1lbnQpICYmXG5cdFx0XHRcdCh0aGlzLm9wdGlvbnMudHlwZSA9PT0gXCJzZW1pLWR5bmFtaWNcIiA/ICEkLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSwgaXRlbUVsZW1lbnQpIDogdHJ1ZSlcblx0XHRcdCkge1xuXG5cdFx0XHRcdHRoaXMuZGlyZWN0aW9uID0gaW50ZXJzZWN0aW9uID09PSAxID8gXCJkb3duXCIgOiBcInVwXCI7XG5cblx0XHRcdFx0aWYgKHRoaXMub3B0aW9ucy50b2xlcmFuY2UgPT09IFwicG9pbnRlclwiIHx8IHRoaXMuX2ludGVyc2VjdHNXaXRoU2lkZXMoaXRlbSkpIHtcblx0XHRcdFx0XHR0aGlzLl9yZWFycmFuZ2UoZXZlbnQsIGl0ZW0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5fdHJpZ2dlcihcImNoYW5nZVwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvL1Bvc3QgZXZlbnRzIHRvIGNvbnRhaW5lcnNcblx0XHR0aGlzLl9jb250YWN0Q29udGFpbmVycyhldmVudCk7XG5cblx0XHQvL0ludGVyY29ubmVjdCB3aXRoIGRyb3BwYWJsZXNcblx0XHRpZigkLnVpLmRkbWFuYWdlcikge1xuXHRcdFx0JC51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLCBldmVudCk7XG5cdFx0fVxuXG5cdFx0Ly9DYWxsIGNhbGxiYWNrc1xuXHRcdHRoaXMuX3RyaWdnZXIoXCJzb3J0XCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7XG5cblx0XHR0aGlzLmxhc3RQb3NpdGlvbkFicyA9IHRoaXMucG9zaXRpb25BYnM7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXG5cdH0sXG5cblx0X21vdXNlU3RvcDogZnVuY3Rpb24oZXZlbnQsIG5vUHJvcGFnYXRpb24pIHtcblxuXHRcdGlmKCFldmVudCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vSWYgd2UgYXJlIHVzaW5nIGRyb3BwYWJsZXMsIGluZm9ybSB0aGUgbWFuYWdlciBhYm91dCB0aGUgZHJvcFxuXHRcdGlmICgkLnVpLmRkbWFuYWdlciAmJiAhdGhpcy5vcHRpb25zLmRyb3BCZWhhdmlvdXIpIHtcblx0XHRcdCQudWkuZGRtYW5hZ2VyLmRyb3AodGhpcywgZXZlbnQpO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMub3B0aW9ucy5yZXZlcnQpIHtcblx0XHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdFx0Y3VyID0gdGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKSxcblx0XHRcdFx0YXhpcyA9IHRoaXMub3B0aW9ucy5heGlzLFxuXHRcdFx0XHRhbmltYXRpb24gPSB7fTtcblxuXHRcdFx0aWYgKCAhYXhpcyB8fCBheGlzID09PSBcInhcIiApIHtcblx0XHRcdFx0YW5pbWF0aW9uLmxlZnQgPSBjdXIubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0IC0gdGhpcy5tYXJnaW5zLmxlZnQgKyAodGhpcy5vZmZzZXRQYXJlbnRbMF0gPT09IHRoaXMuZG9jdW1lbnRbMF0uYm9keSA/IDAgOiB0aGlzLm9mZnNldFBhcmVudFswXS5zY3JvbGxMZWZ0KTtcblx0XHRcdH1cblx0XHRcdGlmICggIWF4aXMgfHwgYXhpcyA9PT0gXCJ5XCIgKSB7XG5cdFx0XHRcdGFuaW1hdGlvbi50b3AgPSBjdXIudG9wIC0gdGhpcy5vZmZzZXQucGFyZW50LnRvcCAtIHRoaXMubWFyZ2lucy50b3AgKyAodGhpcy5vZmZzZXRQYXJlbnRbMF0gPT09IHRoaXMuZG9jdW1lbnRbMF0uYm9keSA/IDAgOiB0aGlzLm9mZnNldFBhcmVudFswXS5zY3JvbGxUb3ApO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5yZXZlcnRpbmcgPSB0cnVlO1xuXHRcdFx0JCh0aGlzLmhlbHBlcikuYW5pbWF0ZSggYW5pbWF0aW9uLCBwYXJzZUludCh0aGlzLm9wdGlvbnMucmV2ZXJ0LCAxMCkgfHwgNTAwLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhhdC5fY2xlYXIoZXZlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2NsZWFyKGV2ZW50LCBub1Byb3BhZ2F0aW9uKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cblx0fSxcblxuXHRjYW5jZWw6IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYodGhpcy5kcmFnZ2luZykge1xuXG5cdFx0XHR0aGlzLl9tb3VzZVVwKHsgdGFyZ2V0OiBudWxsIH0pO1xuXG5cdFx0XHRpZih0aGlzLm9wdGlvbnMuaGVscGVyID09PSBcIm9yaWdpbmFsXCIpIHtcblx0XHRcdFx0dGhpcy5jdXJyZW50SXRlbS5jc3ModGhpcy5fc3RvcmVkQ1NTKS5yZW1vdmVDbGFzcyhcInVpLXNvcnRhYmxlLWhlbHBlclwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuY3VycmVudEl0ZW0uc2hvdygpO1xuXHRcdFx0fVxuXG5cdFx0XHQvL1Bvc3QgZGVhY3RpdmF0aW5nIGV2ZW50cyB0byBjb250YWluZXJzXG5cdFx0XHRmb3IgKHZhciBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcblx0XHRcdFx0dGhpcy5jb250YWluZXJzW2ldLl90cmlnZ2VyKFwiZGVhY3RpdmF0ZVwiLCBudWxsLCB0aGlzLl91aUhhc2godGhpcykpO1xuXHRcdFx0XHRpZih0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3Zlcikge1xuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyc1tpXS5fdHJpZ2dlcihcIm91dFwiLCBudWxsLCB0aGlzLl91aUhhc2godGhpcykpO1xuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMucGxhY2Vob2xkZXIpIHtcblx0XHRcdC8vJCh0aGlzLnBsYWNlaG9sZGVyWzBdKS5yZW1vdmUoKTsgd291bGQgaGF2ZSBiZWVuIHRoZSBqUXVlcnkgd2F5IC0gdW5mb3J0dW5hdGVseSwgaXQgdW5iaW5kcyBBTEwgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUhXG5cdFx0XHRpZih0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUpIHtcblx0XHRcdFx0dGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pO1xuXHRcdFx0fVxuXHRcdFx0aWYodGhpcy5vcHRpb25zLmhlbHBlciAhPT0gXCJvcmlnaW5hbFwiICYmIHRoaXMuaGVscGVyICYmIHRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGUpIHtcblx0XHRcdFx0dGhpcy5oZWxwZXIucmVtb3ZlKCk7XG5cdFx0XHR9XG5cblx0XHRcdCQuZXh0ZW5kKHRoaXMsIHtcblx0XHRcdFx0aGVscGVyOiBudWxsLFxuXHRcdFx0XHRkcmFnZ2luZzogZmFsc2UsXG5cdFx0XHRcdHJldmVydGluZzogZmFsc2UsXG5cdFx0XHRcdF9ub0ZpbmFsU29ydDogbnVsbFxuXHRcdFx0fSk7XG5cblx0XHRcdGlmKHRoaXMuZG9tUG9zaXRpb24ucHJldikge1xuXHRcdFx0XHQkKHRoaXMuZG9tUG9zaXRpb24ucHJldikuYWZ0ZXIodGhpcy5jdXJyZW50SXRlbSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKHRoaXMuZG9tUG9zaXRpb24ucGFyZW50KS5wcmVwZW5kKHRoaXMuY3VycmVudEl0ZW0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH0sXG5cblx0c2VyaWFsaXplOiBmdW5jdGlvbihvKSB7XG5cblx0XHR2YXIgaXRlbXMgPSB0aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KG8gJiYgby5jb25uZWN0ZWQpLFxuXHRcdFx0c3RyID0gW107XG5cdFx0byA9IG8gfHwge307XG5cblx0XHQkKGl0ZW1zKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHJlcyA9ICgkKG8uaXRlbSB8fCB0aGlzKS5hdHRyKG8uYXR0cmlidXRlIHx8IFwiaWRcIikgfHwgXCJcIikubWF0Y2goby5leHByZXNzaW9uIHx8ICgvKC4rKVtcXC09X10oLispLykpO1xuXHRcdFx0aWYgKHJlcykge1xuXHRcdFx0XHRzdHIucHVzaCgoby5rZXkgfHwgcmVzWzFdK1wiW11cIikrXCI9XCIrKG8ua2V5ICYmIG8uZXhwcmVzc2lvbiA/IHJlc1sxXSA6IHJlc1syXSkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0aWYoIXN0ci5sZW5ndGggJiYgby5rZXkpIHtcblx0XHRcdHN0ci5wdXNoKG8ua2V5ICsgXCI9XCIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBzdHIuam9pbihcIiZcIik7XG5cblx0fSxcblxuXHR0b0FycmF5OiBmdW5jdGlvbihvKSB7XG5cblx0XHR2YXIgaXRlbXMgPSB0aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KG8gJiYgby5jb25uZWN0ZWQpLFxuXHRcdFx0cmV0ID0gW107XG5cblx0XHRvID0gbyB8fCB7fTtcblxuXHRcdGl0ZW1zLmVhY2goZnVuY3Rpb24oKSB7IHJldC5wdXNoKCQoby5pdGVtIHx8IHRoaXMpLmF0dHIoby5hdHRyaWJ1dGUgfHwgXCJpZFwiKSB8fCBcIlwiKTsgfSk7XG5cdFx0cmV0dXJuIHJldDtcblxuXHR9LFxuXG5cdC8qIEJlIGNhcmVmdWwgd2l0aCB0aGUgZm9sbG93aW5nIGNvcmUgZnVuY3Rpb25zICovXG5cdF9pbnRlcnNlY3RzV2l0aDogZnVuY3Rpb24oaXRlbSkge1xuXG5cdFx0dmFyIHgxID0gdGhpcy5wb3NpdGlvbkFicy5sZWZ0LFxuXHRcdFx0eDIgPSB4MSArIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsXG5cdFx0XHR5MSA9IHRoaXMucG9zaXRpb25BYnMudG9wLFxuXHRcdFx0eTIgPSB5MSArIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LFxuXHRcdFx0bCA9IGl0ZW0ubGVmdCxcblx0XHRcdHIgPSBsICsgaXRlbS53aWR0aCxcblx0XHRcdHQgPSBpdGVtLnRvcCxcblx0XHRcdGIgPSB0ICsgaXRlbS5oZWlnaHQsXG5cdFx0XHRkeUNsaWNrID0gdGhpcy5vZmZzZXQuY2xpY2sudG9wLFxuXHRcdFx0ZHhDbGljayA9IHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQsXG5cdFx0XHRpc092ZXJFbGVtZW50SGVpZ2h0ID0gKCB0aGlzLm9wdGlvbnMuYXhpcyA9PT0gXCJ4XCIgKSB8fCAoICggeTEgKyBkeUNsaWNrICkgPiB0ICYmICggeTEgKyBkeUNsaWNrICkgPCBiICksXG5cdFx0XHRpc092ZXJFbGVtZW50V2lkdGggPSAoIHRoaXMub3B0aW9ucy5heGlzID09PSBcInlcIiApIHx8ICggKCB4MSArIGR4Q2xpY2sgKSA+IGwgJiYgKCB4MSArIGR4Q2xpY2sgKSA8IHIgKSxcblx0XHRcdGlzT3ZlckVsZW1lbnQgPSBpc092ZXJFbGVtZW50SGVpZ2h0ICYmIGlzT3ZlckVsZW1lbnRXaWR0aDtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLnRvbGVyYW5jZSA9PT0gXCJwb2ludGVyXCIgfHxcblx0XHRcdHRoaXMub3B0aW9ucy5mb3JjZVBvaW50ZXJGb3JDb250YWluZXJzIHx8XG5cdFx0XHQodGhpcy5vcHRpb25zLnRvbGVyYW5jZSAhPT0gXCJwb2ludGVyXCIgJiYgdGhpcy5oZWxwZXJQcm9wb3J0aW9uc1t0aGlzLmZsb2F0aW5nID8gXCJ3aWR0aFwiIDogXCJoZWlnaHRcIl0gPiBpdGVtW3RoaXMuZmxvYXRpbmcgPyBcIndpZHRoXCIgOiBcImhlaWdodFwiXSlcblx0XHQpIHtcblx0XHRcdHJldHVybiBpc092ZXJFbGVtZW50O1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHJldHVybiAobCA8IHgxICsgKHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLyAyKSAmJiAvLyBSaWdodCBIYWxmXG5cdFx0XHRcdHgyIC0gKHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLyAyKSA8IHIgJiYgLy8gTGVmdCBIYWxmXG5cdFx0XHRcdHQgPCB5MSArICh0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAvIDIpICYmIC8vIEJvdHRvbSBIYWxmXG5cdFx0XHRcdHkyIC0gKHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC8gMikgPCBiICk7IC8vIFRvcCBIYWxmXG5cblx0XHR9XG5cdH0sXG5cblx0X2ludGVyc2VjdHNXaXRoUG9pbnRlcjogZnVuY3Rpb24oaXRlbSkge1xuXG5cdFx0dmFyIGlzT3ZlckVsZW1lbnRIZWlnaHQgPSAodGhpcy5vcHRpb25zLmF4aXMgPT09IFwieFwiKSB8fCB0aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wLCBpdGVtLnRvcCwgaXRlbS5oZWlnaHQpLFxuXHRcdFx0aXNPdmVyRWxlbWVudFdpZHRoID0gKHRoaXMub3B0aW9ucy5heGlzID09PSBcInlcIikgfHwgdGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQgKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0LCBpdGVtLmxlZnQsIGl0ZW0ud2lkdGgpLFxuXHRcdFx0aXNPdmVyRWxlbWVudCA9IGlzT3ZlckVsZW1lbnRIZWlnaHQgJiYgaXNPdmVyRWxlbWVudFdpZHRoLFxuXHRcdFx0dmVydGljYWxEaXJlY3Rpb24gPSB0aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKSxcblx0XHRcdGhvcml6b250YWxEaXJlY3Rpb24gPSB0aGlzLl9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbigpO1xuXG5cdFx0aWYgKCFpc092ZXJFbGVtZW50KSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZmxvYXRpbmcgP1xuXHRcdFx0KCAoKGhvcml6b250YWxEaXJlY3Rpb24gJiYgaG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gXCJyaWdodFwiKSB8fCB2ZXJ0aWNhbERpcmVjdGlvbiA9PT0gXCJkb3duXCIpID8gMiA6IDEgKVxuXHRcdFx0OiAoIHZlcnRpY2FsRGlyZWN0aW9uICYmICh2ZXJ0aWNhbERpcmVjdGlvbiA9PT0gXCJkb3duXCIgPyAyIDogMSkgKTtcblxuXHR9LFxuXG5cdF9pbnRlcnNlY3RzV2l0aFNpZGVzOiBmdW5jdGlvbihpdGVtKSB7XG5cblx0XHR2YXIgaXNPdmVyQm90dG9tSGFsZiA9IHRoaXMuX2lzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy50b3AgKyB0aGlzLm9mZnNldC5jbGljay50b3AsIGl0ZW0udG9wICsgKGl0ZW0uaGVpZ2h0LzIpLCBpdGVtLmhlaWdodCksXG5cdFx0XHRpc092ZXJSaWdodEhhbGYgPSB0aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMubGVmdCArIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQsIGl0ZW0ubGVmdCArIChpdGVtLndpZHRoLzIpLCBpdGVtLndpZHRoKSxcblx0XHRcdHZlcnRpY2FsRGlyZWN0aW9uID0gdGhpcy5fZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uKCksXG5cdFx0XHRob3Jpem9udGFsRGlyZWN0aW9uID0gdGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKTtcblxuXHRcdGlmICh0aGlzLmZsb2F0aW5nICYmIGhvcml6b250YWxEaXJlY3Rpb24pIHtcblx0XHRcdHJldHVybiAoKGhvcml6b250YWxEaXJlY3Rpb24gPT09IFwicmlnaHRcIiAmJiBpc092ZXJSaWdodEhhbGYpIHx8IChob3Jpem9udGFsRGlyZWN0aW9uID09PSBcImxlZnRcIiAmJiAhaXNPdmVyUmlnaHRIYWxmKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB2ZXJ0aWNhbERpcmVjdGlvbiAmJiAoKHZlcnRpY2FsRGlyZWN0aW9uID09PSBcImRvd25cIiAmJiBpc092ZXJCb3R0b21IYWxmKSB8fCAodmVydGljYWxEaXJlY3Rpb24gPT09IFwidXBcIiAmJiAhaXNPdmVyQm90dG9tSGFsZikpO1xuXHRcdH1cblxuXHR9LFxuXG5cdF9nZXREcmFnVmVydGljYWxEaXJlY3Rpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBkZWx0YSA9IHRoaXMucG9zaXRpb25BYnMudG9wIC0gdGhpcy5sYXN0UG9zaXRpb25BYnMudG9wO1xuXHRcdHJldHVybiBkZWx0YSAhPT0gMCAmJiAoZGVsdGEgPiAwID8gXCJkb3duXCIgOiBcInVwXCIpO1xuXHR9LFxuXG5cdF9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGRlbHRhID0gdGhpcy5wb3NpdGlvbkFicy5sZWZ0IC0gdGhpcy5sYXN0UG9zaXRpb25BYnMubGVmdDtcblx0XHRyZXR1cm4gZGVsdGEgIT09IDAgJiYgKGRlbHRhID4gMCA/IFwicmlnaHRcIiA6IFwibGVmdFwiKTtcblx0fSxcblxuXHRyZWZyZXNoOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHRoaXMuX3JlZnJlc2hJdGVtcyhldmVudCk7XG5cdFx0dGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCk7XG5cdFx0dGhpcy5yZWZyZXNoUG9zaXRpb25zKCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0X2Nvbm5lY3RXaXRoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblx0XHRyZXR1cm4gb3B0aW9ucy5jb25uZWN0V2l0aC5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nID8gW29wdGlvbnMuY29ubmVjdFdpdGhdIDogb3B0aW9ucy5jb25uZWN0V2l0aDtcblx0fSxcblxuXHRfZ2V0SXRlbXNBc2pRdWVyeTogZnVuY3Rpb24oY29ubmVjdGVkKSB7XG5cblx0XHR2YXIgaSwgaiwgY3VyLCBpbnN0LFxuXHRcdFx0aXRlbXMgPSBbXSxcblx0XHRcdHF1ZXJpZXMgPSBbXSxcblx0XHRcdGNvbm5lY3RXaXRoID0gdGhpcy5fY29ubmVjdFdpdGgoKTtcblxuXHRcdGlmKGNvbm5lY3RXaXRoICYmIGNvbm5lY3RlZCkge1xuXHRcdFx0Zm9yIChpID0gY29ubmVjdFdpdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuXHRcdFx0XHRjdXIgPSAkKGNvbm5lY3RXaXRoW2ldLCB0aGlzLmRvY3VtZW50WzBdKTtcblx0XHRcdFx0Zm9yICggaiA9IGN1ci5sZW5ndGggLSAxOyBqID49IDA7IGotLSl7XG5cdFx0XHRcdFx0aW5zdCA9ICQuZGF0YShjdXJbal0sIHRoaXMud2lkZ2V0RnVsbE5hbWUpO1xuXHRcdFx0XHRcdGlmKGluc3QgJiYgaW5zdCAhPT0gdGhpcyAmJiAhaW5zdC5vcHRpb25zLmRpc2FibGVkKSB7XG5cdFx0XHRcdFx0XHRxdWVyaWVzLnB1c2goWyQuaXNGdW5jdGlvbihpbnN0Lm9wdGlvbnMuaXRlbXMpID8gaW5zdC5vcHRpb25zLml0ZW1zLmNhbGwoaW5zdC5lbGVtZW50KSA6ICQoaW5zdC5vcHRpb25zLml0ZW1zLCBpbnN0LmVsZW1lbnQpLm5vdChcIi51aS1zb3J0YWJsZS1oZWxwZXJcIikubm90KFwiLnVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyXCIpLCBpbnN0XSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cXVlcmllcy5wdXNoKFskLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKSA/IHRoaXMub3B0aW9ucy5pdGVtcy5jYWxsKHRoaXMuZWxlbWVudCwgbnVsbCwgeyBvcHRpb25zOiB0aGlzLm9wdGlvbnMsIGl0ZW06IHRoaXMuY3VycmVudEl0ZW0gfSkgOiAkKHRoaXMub3B0aW9ucy5pdGVtcywgdGhpcy5lbGVtZW50KS5ub3QoXCIudWktc29ydGFibGUtaGVscGVyXCIpLm5vdChcIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlclwiKSwgdGhpc10pO1xuXG5cdFx0ZnVuY3Rpb24gYWRkSXRlbXMoKSB7XG5cdFx0XHRpdGVtcy5wdXNoKCB0aGlzICk7XG5cdFx0fVxuXHRcdGZvciAoaSA9IHF1ZXJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuXHRcdFx0cXVlcmllc1tpXVswXS5lYWNoKCBhZGRJdGVtcyApO1xuXHRcdH1cblxuXHRcdHJldHVybiAkKGl0ZW1zKTtcblxuXHR9LFxuXG5cdF9yZW1vdmVDdXJyZW50c0Zyb21JdGVtczogZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgbGlzdCA9IHRoaXMuY3VycmVudEl0ZW0uZmluZChcIjpkYXRhKFwiICsgdGhpcy53aWRnZXROYW1lICsgXCItaXRlbSlcIik7XG5cblx0XHR0aGlzLml0ZW1zID0gJC5ncmVwKHRoaXMuaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHRmb3IgKHZhciBqPTA7IGogPCBsaXN0Lmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGlmKGxpc3Rbal0gPT09IGl0ZW0uaXRlbVswXSkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSk7XG5cblx0fSxcblxuXHRfcmVmcmVzaEl0ZW1zOiBmdW5jdGlvbihldmVudCkge1xuXG5cdFx0dGhpcy5pdGVtcyA9IFtdO1xuXHRcdHRoaXMuY29udGFpbmVycyA9IFt0aGlzXTtcblxuXHRcdHZhciBpLCBqLCBjdXIsIGluc3QsIHRhcmdldERhdGEsIF9xdWVyaWVzLCBpdGVtLCBxdWVyaWVzTGVuZ3RoLFxuXHRcdFx0aXRlbXMgPSB0aGlzLml0ZW1zLFxuXHRcdFx0cXVlcmllcyA9IFtbJC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5pdGVtcykgPyB0aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnRbMF0sIGV2ZW50LCB7IGl0ZW06IHRoaXMuY3VycmVudEl0ZW0gfSkgOiAkKHRoaXMub3B0aW9ucy5pdGVtcywgdGhpcy5lbGVtZW50KSwgdGhpc11dLFxuXHRcdFx0Y29ubmVjdFdpdGggPSB0aGlzLl9jb25uZWN0V2l0aCgpO1xuXG5cdFx0aWYoY29ubmVjdFdpdGggJiYgdGhpcy5yZWFkeSkgeyAvL1Nob3VsZG4ndCBiZSBydW4gdGhlIGZpcnN0IHRpbWUgdGhyb3VnaCBkdWUgdG8gbWFzc2l2ZSBzbG93LWRvd25cblx0XHRcdGZvciAoaSA9IGNvbm5lY3RXaXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcblx0XHRcdFx0Y3VyID0gJChjb25uZWN0V2l0aFtpXSwgdGhpcy5kb2N1bWVudFswXSk7XG5cdFx0XHRcdGZvciAoaiA9IGN1ci5sZW5ndGggLSAxOyBqID49IDA7IGotLSl7XG5cdFx0XHRcdFx0aW5zdCA9ICQuZGF0YShjdXJbal0sIHRoaXMud2lkZ2V0RnVsbE5hbWUpO1xuXHRcdFx0XHRcdGlmKGluc3QgJiYgaW5zdCAhPT0gdGhpcyAmJiAhaW5zdC5vcHRpb25zLmRpc2FibGVkKSB7XG5cdFx0XHRcdFx0XHRxdWVyaWVzLnB1c2goWyQuaXNGdW5jdGlvbihpbnN0Lm9wdGlvbnMuaXRlbXMpID8gaW5zdC5vcHRpb25zLml0ZW1zLmNhbGwoaW5zdC5lbGVtZW50WzBdLCBldmVudCwgeyBpdGVtOiB0aGlzLmN1cnJlbnRJdGVtIH0pIDogJChpbnN0Lm9wdGlvbnMuaXRlbXMsIGluc3QuZWxlbWVudCksIGluc3RdKTtcblx0XHRcdFx0XHRcdHRoaXMuY29udGFpbmVycy5wdXNoKGluc3QpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoaSA9IHF1ZXJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdHRhcmdldERhdGEgPSBxdWVyaWVzW2ldWzFdO1xuXHRcdFx0X3F1ZXJpZXMgPSBxdWVyaWVzW2ldWzBdO1xuXG5cdFx0XHRmb3IgKGo9MCwgcXVlcmllc0xlbmd0aCA9IF9xdWVyaWVzLmxlbmd0aDsgaiA8IHF1ZXJpZXNMZW5ndGg7IGorKykge1xuXHRcdFx0XHRpdGVtID0gJChfcXVlcmllc1tqXSk7XG5cblx0XHRcdFx0aXRlbS5kYXRhKHRoaXMud2lkZ2V0TmFtZSArIFwiLWl0ZW1cIiwgdGFyZ2V0RGF0YSk7IC8vIERhdGEgZm9yIHRhcmdldCBjaGVja2luZyAobW91c2UgbWFuYWdlcilcblxuXHRcdFx0XHRpdGVtcy5wdXNoKHtcblx0XHRcdFx0XHRpdGVtOiBpdGVtLFxuXHRcdFx0XHRcdGluc3RhbmNlOiB0YXJnZXREYXRhLFxuXHRcdFx0XHRcdHdpZHRoOiAwLCBoZWlnaHQ6IDAsXG5cdFx0XHRcdFx0bGVmdDogMCwgdG9wOiAwXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHR9LFxuXG5cdHJlZnJlc2hQb3NpdGlvbnM6IGZ1bmN0aW9uKGZhc3QpIHtcblxuXHRcdC8vVGhpcyBoYXMgdG8gYmUgcmVkb25lIGJlY2F1c2UgZHVlIHRvIHRoZSBpdGVtIGJlaW5nIG1vdmVkIG91dC9pbnRvIHRoZSBvZmZzZXRQYXJlbnQsIHRoZSBvZmZzZXRQYXJlbnQncyBwb3NpdGlvbiB3aWxsIGNoYW5nZVxuXHRcdGlmKHRoaXMub2Zmc2V0UGFyZW50ICYmIHRoaXMuaGVscGVyKSB7XG5cdFx0XHR0aGlzLm9mZnNldC5wYXJlbnQgPSB0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKTtcblx0XHR9XG5cblx0XHR2YXIgaSwgaXRlbSwgdCwgcDtcblxuXHRcdGZvciAoaSA9IHRoaXMuaXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuXHRcdFx0aXRlbSA9IHRoaXMuaXRlbXNbaV07XG5cblx0XHRcdC8vV2UgaWdub3JlIGNhbGN1bGF0aW5nIHBvc2l0aW9ucyBvZiBhbGwgY29ubmVjdGVkIGNvbnRhaW5lcnMgd2hlbiB3ZSdyZSBub3Qgb3ZlciB0aGVtXG5cdFx0XHRpZihpdGVtLmluc3RhbmNlICE9PSB0aGlzLmN1cnJlbnRDb250YWluZXIgJiYgdGhpcy5jdXJyZW50Q29udGFpbmVyICYmIGl0ZW0uaXRlbVswXSAhPT0gdGhpcy5jdXJyZW50SXRlbVswXSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0dCA9IHRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50ID8gJCh0aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudCwgaXRlbS5pdGVtKSA6IGl0ZW0uaXRlbTtcblxuXHRcdFx0aWYgKCFmYXN0KSB7XG5cdFx0XHRcdGl0ZW0ud2lkdGggPSB0Lm91dGVyV2lkdGgoKTtcblx0XHRcdFx0aXRlbS5oZWlnaHQgPSB0Lm91dGVySGVpZ2h0KCk7XG5cdFx0XHR9XG5cblx0XHRcdHAgPSB0Lm9mZnNldCgpO1xuXHRcdFx0aXRlbS5sZWZ0ID0gcC5sZWZ0O1xuXHRcdFx0aXRlbS50b3AgPSBwLnRvcDtcblx0XHR9XG5cblx0XHRpZih0aGlzLm9wdGlvbnMuY3VzdG9tICYmIHRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMpIHtcblx0XHRcdHRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMuY2FsbCh0aGlzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yIChpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcblx0XHRcdFx0cCA9IHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm9mZnNldCgpO1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUubGVmdCA9IHAubGVmdDtcblx0XHRcdFx0dGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLnRvcCA9IHAudG9wO1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUud2lkdGggPSB0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudC5vdXRlcldpZHRoKCk7XG5cdFx0XHRcdHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5oZWlnaHQgPSB0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudC5vdXRlckhlaWdodCgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdF9jcmVhdGVQbGFjZWhvbGRlcjogZnVuY3Rpb24odGhhdCkge1xuXHRcdHRoYXQgPSB0aGF0IHx8IHRoaXM7XG5cdFx0dmFyIGNsYXNzTmFtZSxcblx0XHRcdG8gPSB0aGF0Lm9wdGlvbnM7XG5cblx0XHRpZighby5wbGFjZWhvbGRlciB8fCBvLnBsYWNlaG9sZGVyLmNvbnN0cnVjdG9yID09PSBTdHJpbmcpIHtcblx0XHRcdGNsYXNzTmFtZSA9IG8ucGxhY2Vob2xkZXI7XG5cdFx0XHRvLnBsYWNlaG9sZGVyID0ge1xuXHRcdFx0XHRlbGVtZW50OiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdHZhciBub2RlTmFtZSA9IHRoYXQuY3VycmVudEl0ZW1bMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdGVsZW1lbnQgPSAkKCBcIjxcIiArIG5vZGVOYW1lICsgXCI+XCIsIHRoYXQuZG9jdW1lbnRbMF0gKVxuXHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoY2xhc3NOYW1lIHx8IHRoYXQuY3VycmVudEl0ZW1bMF0uY2xhc3NOYW1lK1wiIHVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyXCIpXG5cdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhcInVpLXNvcnRhYmxlLWhlbHBlclwiKTtcblxuXHRcdFx0XHRcdGlmICggbm9kZU5hbWUgPT09IFwidHJcIiApIHtcblx0XHRcdFx0XHRcdHRoYXQuY3VycmVudEl0ZW0uY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHQkKCBcIjx0ZD4mIzE2MDs8L3RkPlwiLCB0aGF0LmRvY3VtZW50WzBdIClcblx0XHRcdFx0XHRcdFx0XHQuYXR0ciggXCJjb2xzcGFuXCIsICQoIHRoaXMgKS5hdHRyKCBcImNvbHNwYW5cIiApIHx8IDEgKVxuXHRcdFx0XHRcdFx0XHRcdC5hcHBlbmRUbyggZWxlbWVudCApO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwiaW1nXCIgKSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmF0dHIoIFwic3JjXCIsIHRoYXQuY3VycmVudEl0ZW0uYXR0ciggXCJzcmNcIiApICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCAhY2xhc3NOYW1lICkge1xuXHRcdFx0XHRcdFx0ZWxlbWVudC5jc3MoIFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVwZGF0ZTogZnVuY3Rpb24oY29udGFpbmVyLCBwKSB7XG5cblx0XHRcdFx0XHQvLyAxLiBJZiBhIGNsYXNzTmFtZSBpcyBzZXQgYXMgJ3BsYWNlaG9sZGVyIG9wdGlvbiwgd2UgZG9uJ3QgZm9yY2Ugc2l6ZXMgLSB0aGUgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoYXRcblx0XHRcdFx0XHQvLyAyLiBUaGUgb3B0aW9uICdmb3JjZVBsYWNlaG9sZGVyU2l6ZSBjYW4gYmUgZW5hYmxlZCB0byBmb3JjZSBpdCBldmVuIGlmIGEgY2xhc3MgbmFtZSBpcyBzcGVjaWZpZWRcblx0XHRcdFx0XHRpZihjbGFzc05hbWUgJiYgIW8uZm9yY2VQbGFjZWhvbGRlclNpemUpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvL0lmIHRoZSBlbGVtZW50IGRvZXNuJ3QgaGF2ZSBhIGFjdHVhbCBoZWlnaHQgYnkgaXRzZWxmICh3aXRob3V0IHN0eWxlcyBjb21pbmcgZnJvbSBhIHN0eWxlc2hlZXQpLCBpdCByZWNlaXZlcyB0aGUgaW5saW5lIGhlaWdodCBmcm9tIHRoZSBkcmFnZ2VkIGl0ZW1cblx0XHRcdFx0XHRpZighcC5oZWlnaHQoKSkgeyBwLmhlaWdodCh0aGF0LmN1cnJlbnRJdGVtLmlubmVySGVpZ2h0KCkgLSBwYXJzZUludCh0aGF0LmN1cnJlbnRJdGVtLmNzcyhcInBhZGRpbmdUb3BcIil8fDAsIDEwKSAtIHBhcnNlSW50KHRoYXQuY3VycmVudEl0ZW0uY3NzKFwicGFkZGluZ0JvdHRvbVwiKXx8MCwgMTApKTsgfVxuXHRcdFx0XHRcdGlmKCFwLndpZHRoKCkpIHsgcC53aWR0aCh0aGF0LmN1cnJlbnRJdGVtLmlubmVyV2lkdGgoKSAtIHBhcnNlSW50KHRoYXQuY3VycmVudEl0ZW0uY3NzKFwicGFkZGluZ0xlZnRcIil8fDAsIDEwKSAtIHBhcnNlSW50KHRoYXQuY3VycmVudEl0ZW0uY3NzKFwicGFkZGluZ1JpZ2h0XCIpfHwwLCAxMCkpOyB9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly9DcmVhdGUgdGhlIHBsYWNlaG9sZGVyXG5cdFx0dGhhdC5wbGFjZWhvbGRlciA9ICQoby5wbGFjZWhvbGRlci5lbGVtZW50LmNhbGwodGhhdC5lbGVtZW50LCB0aGF0LmN1cnJlbnRJdGVtKSk7XG5cblx0XHQvL0FwcGVuZCBpdCBhZnRlciB0aGUgYWN0dWFsIGN1cnJlbnQgaXRlbVxuXHRcdHRoYXQuY3VycmVudEl0ZW0uYWZ0ZXIodGhhdC5wbGFjZWhvbGRlcik7XG5cblx0XHQvL1VwZGF0ZSB0aGUgc2l6ZSBvZiB0aGUgcGxhY2Vob2xkZXIgKFRPRE86IExvZ2ljIHRvIGZ1enp5LCBzZWUgbGluZSAzMTYvMzE3KVxuXHRcdG8ucGxhY2Vob2xkZXIudXBkYXRlKHRoYXQsIHRoYXQucGxhY2Vob2xkZXIpO1xuXG5cdH0sXG5cblx0X2NvbnRhY3RDb250YWluZXJzOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciBpLCBqLCBkaXN0LCBpdGVtV2l0aExlYXN0RGlzdGFuY2UsIHBvc1Byb3BlcnR5LCBzaXplUHJvcGVydHksIGN1ciwgbmVhckJvdHRvbSwgZmxvYXRpbmcsIGF4aXMsXG5cdFx0XHRpbm5lcm1vc3RDb250YWluZXIgPSBudWxsLFxuXHRcdFx0aW5uZXJtb3N0SW5kZXggPSBudWxsO1xuXG5cdFx0Ly8gZ2V0IGlubmVybW9zdCBjb250YWluZXIgdGhhdCBpbnRlcnNlY3RzIHdpdGggaXRlbVxuXHRcdGZvciAoaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXG5cdFx0XHQvLyBuZXZlciBjb25zaWRlciBhIGNvbnRhaW5lciB0aGF0J3MgbG9jYXRlZCB3aXRoaW4gdGhlIGl0ZW0gaXRzZWxmXG5cdFx0XHRpZigkLmNvbnRhaW5zKHRoaXMuY3VycmVudEl0ZW1bMF0sIHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50WzBdKSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYodGhpcy5faW50ZXJzZWN0c1dpdGgodGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlKSkge1xuXG5cdFx0XHRcdC8vIGlmIHdlJ3ZlIGFscmVhZHkgZm91bmQgYSBjb250YWluZXIgYW5kIGl0J3MgbW9yZSBcImlubmVyXCIgdGhhbiB0aGlzLCB0aGVuIGNvbnRpbnVlXG5cdFx0XHRcdGlmKGlubmVybW9zdENvbnRhaW5lciAmJiAkLmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50WzBdLCBpbm5lcm1vc3RDb250YWluZXIuZWxlbWVudFswXSkpIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlubmVybW9zdENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyc1tpXTtcblx0XHRcdFx0aW5uZXJtb3N0SW5kZXggPSBpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBjb250YWluZXIgZG9lc24ndCBpbnRlcnNlY3QuIHRyaWdnZXIgXCJvdXRcIiBldmVudCBpZiBuZWNlc3Nhcnlcblx0XHRcdFx0aWYodGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLm92ZXIpIHtcblx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbaV0uX3RyaWdnZXIoXCJvdXRcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCh0aGlzKSk7XG5cdFx0XHRcdFx0dGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvLyBpZiBubyBpbnRlcnNlY3RpbmcgY29udGFpbmVycyBmb3VuZCwgcmV0dXJuXG5cdFx0aWYoIWlubmVybW9zdENvbnRhaW5lcikge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIG1vdmUgdGhlIGl0ZW0gaW50byB0aGUgY29udGFpbmVyIGlmIGl0J3Mgbm90IHRoZXJlIGFscmVhZHlcblx0XHRpZih0aGlzLmNvbnRhaW5lcnMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRpZiAoIXRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uY29udGFpbmVyQ2FjaGUub3Zlcikge1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLl90cmlnZ2VyKFwib3ZlclwiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMpKTtcblx0XHRcdFx0dGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5jb250YWluZXJDYWNoZS5vdmVyID0gMTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvL1doZW4gZW50ZXJpbmcgYSBuZXcgY29udGFpbmVyLCB3ZSB3aWxsIGZpbmQgdGhlIGl0ZW0gd2l0aCB0aGUgbGVhc3QgZGlzdGFuY2UgYW5kIGFwcGVuZCBvdXIgaXRlbSBuZWFyIGl0XG5cdFx0XHRkaXN0ID0gMTAwMDA7XG5cdFx0XHRpdGVtV2l0aExlYXN0RGlzdGFuY2UgPSBudWxsO1xuXHRcdFx0ZmxvYXRpbmcgPSBpbm5lcm1vc3RDb250YWluZXIuZmxvYXRpbmcgfHwgdGhpcy5faXNGbG9hdGluZyh0aGlzLmN1cnJlbnRJdGVtKTtcblx0XHRcdHBvc1Byb3BlcnR5ID0gZmxvYXRpbmcgPyBcImxlZnRcIiA6IFwidG9wXCI7XG5cdFx0XHRzaXplUHJvcGVydHkgPSBmbG9hdGluZyA/IFwid2lkdGhcIiA6IFwiaGVpZ2h0XCI7XG5cdFx0XHRheGlzID0gZmxvYXRpbmcgPyBcImNsaWVudFhcIiA6IFwiY2xpZW50WVwiO1xuXG5cdFx0XHRmb3IgKGogPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdFx0XHRcdGlmKCEkLmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uZWxlbWVudFswXSwgdGhpcy5pdGVtc1tqXS5pdGVtWzBdKSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHRoaXMuaXRlbXNbal0uaXRlbVswXSA9PT0gdGhpcy5jdXJyZW50SXRlbVswXSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y3VyID0gdGhpcy5pdGVtc1tqXS5pdGVtLm9mZnNldCgpW3Bvc1Byb3BlcnR5XTtcblx0XHRcdFx0bmVhckJvdHRvbSA9IGZhbHNlO1xuXHRcdFx0XHRpZiAoIGV2ZW50WyBheGlzIF0gLSBjdXIgPiB0aGlzLml0ZW1zWyBqIF1bIHNpemVQcm9wZXJ0eSBdIC8gMiApIHtcblx0XHRcdFx0XHRuZWFyQm90dG9tID0gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggTWF0aC5hYnMoIGV2ZW50WyBheGlzIF0gLSBjdXIgKSA8IGRpc3QgKSB7XG5cdFx0XHRcdFx0ZGlzdCA9IE1hdGguYWJzKCBldmVudFsgYXhpcyBdIC0gY3VyICk7XG5cdFx0XHRcdFx0aXRlbVdpdGhMZWFzdERpc3RhbmNlID0gdGhpcy5pdGVtc1sgaiBdO1xuXHRcdFx0XHRcdHRoaXMuZGlyZWN0aW9uID0gbmVhckJvdHRvbSA/IFwidXBcIjogXCJkb3duXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9DaGVjayBpZiBkcm9wT25FbXB0eSBpcyBlbmFibGVkXG5cdFx0XHRpZighaXRlbVdpdGhMZWFzdERpc3RhbmNlICYmICF0aGlzLm9wdGlvbnMuZHJvcE9uRW1wdHkpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZih0aGlzLmN1cnJlbnRDb250YWluZXIgPT09IHRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0pIHtcblx0XHRcdFx0aWYgKCAhdGhpcy5jdXJyZW50Q29udGFpbmVyLmNvbnRhaW5lckNhY2hlLm92ZXIgKSB7XG5cdFx0XHRcdFx0dGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLl90cmlnZ2VyKCBcIm92ZXJcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpICk7XG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50Q29udGFpbmVyLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAxO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aXRlbVdpdGhMZWFzdERpc3RhbmNlID8gdGhpcy5fcmVhcnJhbmdlKGV2ZW50LCBpdGVtV2l0aExlYXN0RGlzdGFuY2UsIG51bGwsIHRydWUpIDogdGhpcy5fcmVhcnJhbmdlKGV2ZW50LCBudWxsLCB0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLmVsZW1lbnQsIHRydWUpO1xuXHRcdFx0dGhpcy5fdHJpZ2dlcihcImNoYW5nZVwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpO1xuXHRcdFx0dGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5fdHJpZ2dlcihcImNoYW5nZVwiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMpKTtcblx0XHRcdHRoaXMuY3VycmVudENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF07XG5cblx0XHRcdC8vVXBkYXRlIHRoZSBwbGFjZWhvbGRlclxuXHRcdFx0dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyLnVwZGF0ZSh0aGlzLmN1cnJlbnRDb250YWluZXIsIHRoaXMucGxhY2Vob2xkZXIpO1xuXG5cdFx0XHR0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLl90cmlnZ2VyKFwib3ZlclwiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMpKTtcblx0XHRcdHRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDE7XG5cdFx0fVxuXG5cblx0fSxcblxuXHRfY3JlYXRlSGVscGVyOiBmdW5jdGlvbihldmVudCkge1xuXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRoZWxwZXIgPSAkLmlzRnVuY3Rpb24oby5oZWxwZXIpID8gJChvLmhlbHBlci5hcHBseSh0aGlzLmVsZW1lbnRbMF0sIFtldmVudCwgdGhpcy5jdXJyZW50SXRlbV0pKSA6IChvLmhlbHBlciA9PT0gXCJjbG9uZVwiID8gdGhpcy5jdXJyZW50SXRlbS5jbG9uZSgpIDogdGhpcy5jdXJyZW50SXRlbSk7XG5cblx0XHQvL0FkZCB0aGUgaGVscGVyIHRvIHRoZSBET00gaWYgdGhhdCBkaWRuJ3QgaGFwcGVuIGFscmVhZHlcblx0XHRpZighaGVscGVyLnBhcmVudHMoXCJib2R5XCIpLmxlbmd0aCkge1xuXHRcdFx0JChvLmFwcGVuZFRvICE9PSBcInBhcmVudFwiID8gby5hcHBlbmRUbyA6IHRoaXMuY3VycmVudEl0ZW1bMF0ucGFyZW50Tm9kZSlbMF0uYXBwZW5kQ2hpbGQoaGVscGVyWzBdKTtcblx0XHR9XG5cblx0XHRpZihoZWxwZXJbMF0gPT09IHRoaXMuY3VycmVudEl0ZW1bMF0pIHtcblx0XHRcdHRoaXMuX3N0b3JlZENTUyA9IHsgd2lkdGg6IHRoaXMuY3VycmVudEl0ZW1bMF0uc3R5bGUud2lkdGgsIGhlaWdodDogdGhpcy5jdXJyZW50SXRlbVswXS5zdHlsZS5oZWlnaHQsIHBvc2l0aW9uOiB0aGlzLmN1cnJlbnRJdGVtLmNzcyhcInBvc2l0aW9uXCIpLCB0b3A6IHRoaXMuY3VycmVudEl0ZW0uY3NzKFwidG9wXCIpLCBsZWZ0OiB0aGlzLmN1cnJlbnRJdGVtLmNzcyhcImxlZnRcIikgfTtcblx0XHR9XG5cblx0XHRpZighaGVscGVyWzBdLnN0eWxlLndpZHRoIHx8IG8uZm9yY2VIZWxwZXJTaXplKSB7XG5cdFx0XHRoZWxwZXIud2lkdGgodGhpcy5jdXJyZW50SXRlbS53aWR0aCgpKTtcblx0XHR9XG5cdFx0aWYoIWhlbHBlclswXS5zdHlsZS5oZWlnaHQgfHwgby5mb3JjZUhlbHBlclNpemUpIHtcblx0XHRcdGhlbHBlci5oZWlnaHQodGhpcy5jdXJyZW50SXRlbS5oZWlnaHQoKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhlbHBlcjtcblxuXHR9LFxuXG5cdF9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOiBmdW5jdGlvbihvYmopIHtcblx0XHRpZiAodHlwZW9mIG9iaiA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0b2JqID0gb2JqLnNwbGl0KFwiIFwiKTtcblx0XHR9XG5cdFx0aWYgKCQuaXNBcnJheShvYmopKSB7XG5cdFx0XHRvYmogPSB7bGVmdDogK29ialswXSwgdG9wOiArb2JqWzFdIHx8IDB9O1xuXHRcdH1cblx0XHRpZiAoXCJsZWZ0XCIgaW4gb2JqKSB7XG5cdFx0XHR0aGlzLm9mZnNldC5jbGljay5sZWZ0ID0gb2JqLmxlZnQgKyB0aGlzLm1hcmdpbnMubGVmdDtcblx0XHR9XG5cdFx0aWYgKFwicmlnaHRcIiBpbiBvYmopIHtcblx0XHRcdHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPSB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0gb2JqLnJpZ2h0ICsgdGhpcy5tYXJnaW5zLmxlZnQ7XG5cdFx0fVxuXHRcdGlmIChcInRvcFwiIGluIG9iaikge1xuXHRcdFx0dGhpcy5vZmZzZXQuY2xpY2sudG9wID0gb2JqLnRvcCArIHRoaXMubWFyZ2lucy50b3A7XG5cdFx0fVxuXHRcdGlmIChcImJvdHRvbVwiIGluIG9iaikge1xuXHRcdFx0dGhpcy5vZmZzZXQuY2xpY2sudG9wID0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSBvYmouYm90dG9tICsgdGhpcy5tYXJnaW5zLnRvcDtcblx0XHR9XG5cdH0sXG5cblx0X2dldFBhcmVudE9mZnNldDogZnVuY3Rpb24oKSB7XG5cblxuXHRcdC8vR2V0IHRoZSBvZmZzZXRQYXJlbnQgYW5kIGNhY2hlIGl0cyBwb3NpdGlvblxuXHRcdHRoaXMub2Zmc2V0UGFyZW50ID0gdGhpcy5oZWxwZXIub2Zmc2V0UGFyZW50KCk7XG5cdFx0dmFyIHBvID0gdGhpcy5vZmZzZXRQYXJlbnQub2Zmc2V0KCk7XG5cblx0XHQvLyBUaGlzIGlzIGEgc3BlY2lhbCBjYXNlIHdoZXJlIHdlIG5lZWQgdG8gbW9kaWZ5IGEgb2Zmc2V0IGNhbGN1bGF0ZWQgb24gc3RhcnQsIHNpbmNlIHRoZSBmb2xsb3dpbmcgaGFwcGVuZWQ6XG5cdFx0Ly8gMS4gVGhlIHBvc2l0aW9uIG9mIHRoZSBoZWxwZXIgaXMgYWJzb2x1dGUsIHNvIGl0J3MgcG9zaXRpb24gaXMgY2FsY3VsYXRlZCBiYXNlZCBvbiB0aGUgbmV4dCBwb3NpdGlvbmVkIHBhcmVudFxuXHRcdC8vIDIuIFRoZSBhY3R1YWwgb2Zmc2V0IHBhcmVudCBpcyBhIGNoaWxkIG9mIHRoZSBzY3JvbGwgcGFyZW50LCBhbmQgdGhlIHNjcm9sbCBwYXJlbnQgaXNuJ3QgdGhlIGRvY3VtZW50LCB3aGljaCBtZWFucyB0aGF0XG5cdFx0Ly8gICAgdGhlIHNjcm9sbCBpcyBpbmNsdWRlZCBpbiB0aGUgaW5pdGlhbCBjYWxjdWxhdGlvbiBvZiB0aGUgb2Zmc2V0IG9mIHRoZSBwYXJlbnQsIGFuZCBuZXZlciByZWNhbGN1bGF0ZWQgdXBvbiBkcmFnXG5cdFx0aWYodGhpcy5jc3NQb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiICYmIHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9PSB0aGlzLmRvY3VtZW50WzBdICYmICQuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sIHRoaXMub2Zmc2V0UGFyZW50WzBdKSkge1xuXHRcdFx0cG8ubGVmdCArPSB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk7XG5cdFx0XHRwby50b3AgKz0gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk7XG5cdFx0fVxuXG5cdFx0Ly8gVGhpcyBuZWVkcyB0byBiZSBhY3R1YWxseSBkb25lIGZvciBhbGwgYnJvd3NlcnMsIHNpbmNlIHBhZ2VYL3BhZ2VZIGluY2x1ZGVzIHRoaXMgaW5mb3JtYXRpb25cblx0XHQvLyB3aXRoIGFuIHVnbHkgSUUgZml4XG5cdFx0aWYoIHRoaXMub2Zmc2V0UGFyZW50WzBdID09PSB0aGlzLmRvY3VtZW50WzBdLmJvZHkgfHwgKHRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUgJiYgdGhpcy5vZmZzZXRQYXJlbnRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImh0bWxcIiAmJiAkLnVpLmllKSkge1xuXHRcdFx0cG8gPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IHBvLnRvcCArIChwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwxMCkgfHwgMCksXG5cdFx0XHRsZWZ0OiBwby5sZWZ0ICsgKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcyhcImJvcmRlckxlZnRXaWR0aFwiKSwxMCkgfHwgMClcblx0XHR9O1xuXG5cdH0sXG5cblx0X2dldFJlbGF0aXZlT2Zmc2V0OiBmdW5jdGlvbigpIHtcblxuXHRcdGlmKHRoaXMuY3NzUG9zaXRpb24gPT09IFwicmVsYXRpdmVcIikge1xuXHRcdFx0dmFyIHAgPSB0aGlzLmN1cnJlbnRJdGVtLnBvc2l0aW9uKCk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0b3A6IHAudG9wIC0gKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcyhcInRvcFwiKSwxMCkgfHwgMCkgKyB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxcblx0XHRcdFx0bGVmdDogcC5sZWZ0IC0gKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcyhcImxlZnRcIiksMTApIHx8IDApICsgdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpXG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblx0XHR9XG5cblx0fSxcblxuXHRfY2FjaGVNYXJnaW5zOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLm1hcmdpbnMgPSB7XG5cdFx0XHRsZWZ0OiAocGFyc2VJbnQodGhpcy5jdXJyZW50SXRlbS5jc3MoXCJtYXJnaW5MZWZ0XCIpLDEwKSB8fCAwKSxcblx0XHRcdHRvcDogKHBhcnNlSW50KHRoaXMuY3VycmVudEl0ZW0uY3NzKFwibWFyZ2luVG9wXCIpLDEwKSB8fCAwKVxuXHRcdH07XG5cdH0sXG5cblx0X2NhY2hlSGVscGVyUHJvcG9ydGlvbnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuaGVscGVyUHJvcG9ydGlvbnMgPSB7XG5cdFx0XHR3aWR0aDogdGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLFxuXHRcdFx0aGVpZ2h0OiB0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpXG5cdFx0fTtcblx0fSxcblxuXHRfc2V0Q29udGFpbm1lbnQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIGNlLCBjbywgb3Zlcixcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnM7XG5cdFx0aWYoby5jb250YWlubWVudCA9PT0gXCJwYXJlbnRcIikge1xuXHRcdFx0by5jb250YWlubWVudCA9IHRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGU7XG5cdFx0fVxuXHRcdGlmKG8uY29udGFpbm1lbnQgPT09IFwiZG9jdW1lbnRcIiB8fCBvLmNvbnRhaW5tZW50ID09PSBcIndpbmRvd1wiKSB7XG5cdFx0XHR0aGlzLmNvbnRhaW5tZW50ID0gW1xuXHRcdFx0XHQwIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LFxuXHRcdFx0XHQwIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wIC0gdGhpcy5vZmZzZXQucGFyZW50LnRvcCxcblx0XHRcdFx0by5jb250YWlubWVudCA9PT0gXCJkb2N1bWVudFwiID8gdGhpcy5kb2N1bWVudC53aWR0aCgpIDogdGhpcy53aW5kb3cud2lkdGgoKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCxcblx0XHRcdFx0KG8uY29udGFpbm1lbnQgPT09IFwiZG9jdW1lbnRcIiA/IHRoaXMuZG9jdW1lbnQud2lkdGgoKSA6IHRoaXMud2luZG93LmhlaWdodCgpIHx8IHRoaXMuZG9jdW1lbnRbMF0uYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3Bcblx0XHRcdF07XG5cdFx0fVxuXG5cdFx0aWYoISgvXihkb2N1bWVudHx3aW5kb3d8cGFyZW50KSQvKS50ZXN0KG8uY29udGFpbm1lbnQpKSB7XG5cdFx0XHRjZSA9ICQoby5jb250YWlubWVudClbMF07XG5cdFx0XHRjbyA9ICQoby5jb250YWlubWVudCkub2Zmc2V0KCk7XG5cdFx0XHRvdmVyID0gKCQoY2UpLmNzcyhcIm92ZXJmbG93XCIpICE9PSBcImhpZGRlblwiKTtcblxuXHRcdFx0dGhpcy5jb250YWlubWVudCA9IFtcblx0XHRcdFx0Y28ubGVmdCArIChwYXJzZUludCgkKGNlKS5jc3MoXCJib3JkZXJMZWZ0V2lkdGhcIiksMTApIHx8IDApICsgKHBhcnNlSW50KCQoY2UpLmNzcyhcInBhZGRpbmdMZWZ0XCIpLDEwKSB8fCAwKSAtIHRoaXMubWFyZ2lucy5sZWZ0LFxuXHRcdFx0XHRjby50b3AgKyAocGFyc2VJbnQoJChjZSkuY3NzKFwiYm9yZGVyVG9wV2lkdGhcIiksMTApIHx8IDApICsgKHBhcnNlSW50KCQoY2UpLmNzcyhcInBhZGRpbmdUb3BcIiksMTApIHx8IDApIC0gdGhpcy5tYXJnaW5zLnRvcCxcblx0XHRcdFx0Y28ubGVmdCsob3ZlciA/IE1hdGgubWF4KGNlLnNjcm9sbFdpZHRoLGNlLm9mZnNldFdpZHRoKSA6IGNlLm9mZnNldFdpZHRoKSAtIChwYXJzZUludCgkKGNlKS5jc3MoXCJib3JkZXJMZWZ0V2lkdGhcIiksMTApIHx8IDApIC0gKHBhcnNlSW50KCQoY2UpLmNzcyhcInBhZGRpbmdSaWdodFwiKSwxMCkgfHwgMCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0gdGhpcy5tYXJnaW5zLmxlZnQsXG5cdFx0XHRcdGNvLnRvcCsob3ZlciA/IE1hdGgubWF4KGNlLnNjcm9sbEhlaWdodCxjZS5vZmZzZXRIZWlnaHQpIDogY2Uub2Zmc2V0SGVpZ2h0KSAtIChwYXJzZUludCgkKGNlKS5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwxMCkgfHwgMCkgLSAocGFyc2VJbnQoJChjZSkuY3NzKFwicGFkZGluZ0JvdHRvbVwiKSwxMCkgfHwgMCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3Bcblx0XHRcdF07XG5cdFx0fVxuXG5cdH0sXG5cblx0X2NvbnZlcnRQb3NpdGlvblRvOiBmdW5jdGlvbihkLCBwb3MpIHtcblxuXHRcdGlmKCFwb3MpIHtcblx0XHRcdHBvcyA9IHRoaXMucG9zaXRpb247XG5cdFx0fVxuXHRcdHZhciBtb2QgPSBkID09PSBcImFic29sdXRlXCIgPyAxIDogLTEsXG5cdFx0XHRzY3JvbGwgPSB0aGlzLmNzc1Bvc2l0aW9uID09PSBcImFic29sdXRlXCIgJiYgISh0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gdGhpcy5kb2N1bWVudFswXSAmJiAkLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLCB0aGlzLm9mZnNldFBhcmVudFswXSkpID8gdGhpcy5vZmZzZXRQYXJlbnQgOiB0aGlzLnNjcm9sbFBhcmVudCxcblx0XHRcdHNjcm9sbElzUm9vdE5vZGUgPSAoLyhodG1sfGJvZHkpL2kpLnRlc3Qoc2Nyb2xsWzBdLnRhZ05hbWUpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogKFxuXHRcdFx0XHRwb3MudG9wXHQrXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgYWJzb2x1dGUgbW91c2UgcG9zaXRpb25cblx0XHRcdFx0dGhpcy5vZmZzZXQucmVsYXRpdmUudG9wICogbW9kICtcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudFxuXHRcdFx0XHR0aGlzLm9mZnNldC5wYXJlbnQudG9wICogbW9kIC1cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcilcblx0XHRcdFx0KCAoIHRoaXMuY3NzUG9zaXRpb24gPT09IFwiZml4ZWRcIiA/IC10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSA6ICggc2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsVG9wKCkgKSApICogbW9kKVxuXHRcdFx0KSxcblx0XHRcdGxlZnQ6IChcblx0XHRcdFx0cG9zLmxlZnQgK1x0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIGFic29sdXRlIG1vdXNlIHBvc2l0aW9uXG5cdFx0XHRcdHRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQgKiBtb2QgK1x0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50XG5cdFx0XHRcdHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0ICogbW9kXHQtXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKVxuXHRcdFx0XHQoICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gXCJmaXhlZFwiID8gLXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKSA6IHNjcm9sbElzUm9vdE5vZGUgPyAwIDogc2Nyb2xsLnNjcm9sbExlZnQoKSApICogbW9kKVxuXHRcdFx0KVxuXHRcdH07XG5cblx0fSxcblxuXHRfZ2VuZXJhdGVQb3NpdGlvbjogZnVuY3Rpb24oZXZlbnQpIHtcblxuXHRcdHZhciB0b3AsIGxlZnQsXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0cGFnZVggPSBldmVudC5wYWdlWCxcblx0XHRcdHBhZ2VZID0gZXZlbnQucGFnZVksXG5cdFx0XHRzY3JvbGwgPSB0aGlzLmNzc1Bvc2l0aW9uID09PSBcImFic29sdXRlXCIgJiYgISh0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gdGhpcy5kb2N1bWVudFswXSAmJiAkLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLCB0aGlzLm9mZnNldFBhcmVudFswXSkpID8gdGhpcy5vZmZzZXRQYXJlbnQgOiB0aGlzLnNjcm9sbFBhcmVudCwgc2Nyb2xsSXNSb290Tm9kZSA9ICgvKGh0bWx8Ym9keSkvaSkudGVzdChzY3JvbGxbMF0udGFnTmFtZSk7XG5cblx0XHQvLyBUaGlzIGlzIGFub3RoZXIgdmVyeSB3ZWlyZCBzcGVjaWFsIGNhc2UgdGhhdCBvbmx5IGhhcHBlbnMgZm9yIHJlbGF0aXZlIGVsZW1lbnRzOlxuXHRcdC8vIDEuIElmIHRoZSBjc3MgcG9zaXRpb24gaXMgcmVsYXRpdmVcblx0XHQvLyAyLiBhbmQgdGhlIHNjcm9sbCBwYXJlbnQgaXMgdGhlIGRvY3VtZW50IG9yIHNpbWlsYXIgdG8gdGhlIG9mZnNldCBwYXJlbnRcblx0XHQvLyB3ZSBoYXZlIHRvIHJlZnJlc2ggdGhlIHJlbGF0aXZlIG9mZnNldCBkdXJpbmcgdGhlIHNjcm9sbCBzbyB0aGVyZSBhcmUgbm8ganVtcHNcblx0XHRpZih0aGlzLmNzc1Bvc2l0aW9uID09PSBcInJlbGF0aXZlXCIgJiYgISh0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gdGhpcy5kb2N1bWVudFswXSAmJiB0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gdGhpcy5vZmZzZXRQYXJlbnRbMF0pKSB7XG5cdFx0XHR0aGlzLm9mZnNldC5yZWxhdGl2ZSA9IHRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCk7XG5cdFx0fVxuXG5cdFx0Lypcblx0XHQgKiAtIFBvc2l0aW9uIGNvbnN0cmFpbmluZyAtXG5cdFx0ICogQ29uc3RyYWluIHRoZSBwb3NpdGlvbiB0byBhIG1peCBvZiBncmlkLCBjb250YWlubWVudC5cblx0XHQgKi9cblxuXHRcdGlmKHRoaXMub3JpZ2luYWxQb3NpdGlvbikgeyAvL0lmIHdlIGFyZSBub3QgZHJhZ2dpbmcgeWV0LCB3ZSB3b24ndCBjaGVjayBmb3Igb3B0aW9uc1xuXG5cdFx0XHRpZih0aGlzLmNvbnRhaW5tZW50KSB7XG5cdFx0XHRcdGlmKGV2ZW50LnBhZ2VYIC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8IHRoaXMuY29udGFpbm1lbnRbMF0pIHtcblx0XHRcdFx0XHRwYWdlWCA9IHRoaXMuY29udGFpbm1lbnRbMF0gKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGV2ZW50LnBhZ2VZIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wIDwgdGhpcy5jb250YWlubWVudFsxXSkge1xuXHRcdFx0XHRcdHBhZ2VZID0gdGhpcy5jb250YWlubWVudFsxXSArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPiB0aGlzLmNvbnRhaW5tZW50WzJdKSB7XG5cdFx0XHRcdFx0cGFnZVggPSB0aGlzLmNvbnRhaW5tZW50WzJdICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihldmVudC5wYWdlWSAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IHRoaXMuY29udGFpbm1lbnRbM10pIHtcblx0XHRcdFx0XHRwYWdlWSA9IHRoaXMuY29udGFpbm1lbnRbM10gKyB0aGlzLm9mZnNldC5jbGljay50b3A7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYoby5ncmlkKSB7XG5cdFx0XHRcdHRvcCA9IHRoaXMub3JpZ2luYWxQYWdlWSArIE1hdGgucm91bmQoKHBhZ2VZIC0gdGhpcy5vcmlnaW5hbFBhZ2VZKSAvIG8uZ3JpZFsxXSkgKiBvLmdyaWRbMV07XG5cdFx0XHRcdHBhZ2VZID0gdGhpcy5jb250YWlubWVudCA/ICggKHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+PSB0aGlzLmNvbnRhaW5tZW50WzFdICYmIHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA8PSB0aGlzLmNvbnRhaW5tZW50WzNdKSA/IHRvcCA6ICgodG9wIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wID49IHRoaXMuY29udGFpbm1lbnRbMV0pID8gdG9wIC0gby5ncmlkWzFdIDogdG9wICsgby5ncmlkWzFdKSkgOiB0b3A7XG5cblx0XHRcdFx0bGVmdCA9IHRoaXMub3JpZ2luYWxQYWdlWCArIE1hdGgucm91bmQoKHBhZ2VYIC0gdGhpcy5vcmlnaW5hbFBhZ2VYKSAvIG8uZ3JpZFswXSkgKiBvLmdyaWRbMF07XG5cdFx0XHRcdHBhZ2VYID0gdGhpcy5jb250YWlubWVudCA/ICggKGxlZnQgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID49IHRoaXMuY29udGFpbm1lbnRbMF0gJiYgbGVmdCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPD0gdGhpcy5jb250YWlubWVudFsyXSkgPyBsZWZ0IDogKChsZWZ0IC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA+PSB0aGlzLmNvbnRhaW5tZW50WzBdKSA/IGxlZnQgLSBvLmdyaWRbMF0gOiBsZWZ0ICsgby5ncmlkWzBdKSkgOiBsZWZ0O1xuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogKFxuXHRcdFx0XHRwYWdlWSAtXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgYWJzb2x1dGUgbW91c2UgcG9zaXRpb25cblx0XHRcdFx0dGhpcy5vZmZzZXQuY2xpY2sudG9wIC1cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENsaWNrIG9mZnNldCAocmVsYXRpdmUgdG8gdGhlIGVsZW1lbnQpXG5cdFx0XHRcdHRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcFx0LVx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIG5vZGVzOiBSZWxhdGl2ZSBvZmZzZXQgZnJvbSBlbGVtZW50IHRvIG9mZnNldCBwYXJlbnRcblx0XHRcdFx0dGhpcy5vZmZzZXQucGFyZW50LnRvcCArXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcilcblx0XHRcdFx0KCAoIHRoaXMuY3NzUG9zaXRpb24gPT09IFwiZml4ZWRcIiA/IC10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSA6ICggc2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsVG9wKCkgKSApKVxuXHRcdFx0KSxcblx0XHRcdGxlZnQ6IChcblx0XHRcdFx0cGFnZVggLVx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIGFic29sdXRlIG1vdXNlIHBvc2l0aW9uXG5cdFx0XHRcdHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgLVx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENsaWNrIG9mZnNldCAocmVsYXRpdmUgdG8gdGhlIGVsZW1lbnQpXG5cdFx0XHRcdHRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnRcdC1cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50XG5cdFx0XHRcdHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0ICtcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKVxuXHRcdFx0XHQoICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gXCJmaXhlZFwiID8gLXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKSA6IHNjcm9sbElzUm9vdE5vZGUgPyAwIDogc2Nyb2xsLnNjcm9sbExlZnQoKSApKVxuXHRcdFx0KVxuXHRcdH07XG5cblx0fSxcblxuXHRfcmVhcnJhbmdlOiBmdW5jdGlvbihldmVudCwgaSwgYSwgaGFyZFJlZnJlc2gpIHtcblxuXHRcdGEgPyBhWzBdLmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pIDogaS5pdGVtWzBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMucGxhY2Vob2xkZXJbMF0sICh0aGlzLmRpcmVjdGlvbiA9PT0gXCJkb3duXCIgPyBpLml0ZW1bMF0gOiBpLml0ZW1bMF0ubmV4dFNpYmxpbmcpKTtcblxuXHRcdC8vVmFyaW91cyB0aGluZ3MgZG9uZSBoZXJlIHRvIGltcHJvdmUgdGhlIHBlcmZvcm1hbmNlOlxuXHRcdC8vIDEuIHdlIGNyZWF0ZSBhIHNldFRpbWVvdXQsIHRoYXQgY2FsbHMgcmVmcmVzaFBvc2l0aW9uc1xuXHRcdC8vIDIuIG9uIHRoZSBpbnN0YW5jZSwgd2UgaGF2ZSBhIGNvdW50ZXIgdmFyaWFibGUsIHRoYXQgZ2V0J3MgaGlnaGVyIGFmdGVyIGV2ZXJ5IGFwcGVuZFxuXHRcdC8vIDMuIG9uIHRoZSBsb2NhbCBzY29wZSwgd2UgY29weSB0aGUgY291bnRlciB2YXJpYWJsZSwgYW5kIGNoZWNrIGluIHRoZSB0aW1lb3V0LCBpZiBpdCdzIHN0aWxsIHRoZSBzYW1lXG5cdFx0Ly8gNC4gdGhpcyBsZXRzIG9ubHkgdGhlIGxhc3QgYWRkaXRpb24gdG8gdGhlIHRpbWVvdXQgc3RhY2sgdGhyb3VnaFxuXHRcdHRoaXMuY291bnRlciA9IHRoaXMuY291bnRlciA/ICsrdGhpcy5jb3VudGVyIDogMTtcblx0XHR2YXIgY291bnRlciA9IHRoaXMuY291bnRlcjtcblxuXHRcdHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYoY291bnRlciA9PT0gdGhpcy5jb3VudGVyKSB7XG5cdFx0XHRcdHRoaXMucmVmcmVzaFBvc2l0aW9ucyghaGFyZFJlZnJlc2gpOyAvL1ByZWNvbXB1dGUgYWZ0ZXIgZWFjaCBET00gaW5zZXJ0aW9uLCBOT1Qgb24gbW91c2Vtb3ZlXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0fSxcblxuXHRfY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBub1Byb3BhZ2F0aW9uKSB7XG5cblx0XHR0aGlzLnJldmVydGluZyA9IGZhbHNlO1xuXHRcdC8vIFdlIGRlbGF5IGFsbCBldmVudHMgdGhhdCBoYXZlIHRvIGJlIHRyaWdnZXJlZCB0byBhZnRlciB0aGUgcG9pbnQgd2hlcmUgdGhlIHBsYWNlaG9sZGVyIGhhcyBiZWVuIHJlbW92ZWQgYW5kXG5cdFx0Ly8gZXZlcnl0aGluZyBlbHNlIG5vcm1hbGl6ZWQgYWdhaW5cblx0XHR2YXIgaSxcblx0XHRcdGRlbGF5ZWRUcmlnZ2VycyA9IFtdO1xuXG5cdFx0Ly8gV2UgZmlyc3QgaGF2ZSB0byB1cGRhdGUgdGhlIGRvbSBwb3NpdGlvbiBvZiB0aGUgYWN0dWFsIGN1cnJlbnRJdGVtXG5cdFx0Ly8gTm90ZTogZG9uJ3QgZG8gaXQgaWYgdGhlIGN1cnJlbnQgaXRlbSBpcyBhbHJlYWR5IHJlbW92ZWQgKGJ5IGEgdXNlciksIG9yIGl0IGdldHMgcmVhcHBlbmRlZCAoc2VlICM0MDg4KVxuXHRcdGlmKCF0aGlzLl9ub0ZpbmFsU29ydCAmJiB0aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpLmxlbmd0aCkge1xuXHRcdFx0dGhpcy5wbGFjZWhvbGRlci5iZWZvcmUodGhpcy5jdXJyZW50SXRlbSk7XG5cdFx0fVxuXHRcdHRoaXMuX25vRmluYWxTb3J0ID0gbnVsbDtcblxuXHRcdGlmKHRoaXMuaGVscGVyWzBdID09PSB0aGlzLmN1cnJlbnRJdGVtWzBdKSB7XG5cdFx0XHRmb3IoaSBpbiB0aGlzLl9zdG9yZWRDU1MpIHtcblx0XHRcdFx0aWYodGhpcy5fc3RvcmVkQ1NTW2ldID09PSBcImF1dG9cIiB8fCB0aGlzLl9zdG9yZWRDU1NbaV0gPT09IFwic3RhdGljXCIpIHtcblx0XHRcdFx0XHR0aGlzLl9zdG9yZWRDU1NbaV0gPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmN1cnJlbnRJdGVtLmNzcyh0aGlzLl9zdG9yZWRDU1MpLnJlbW92ZUNsYXNzKFwidWktc29ydGFibGUtaGVscGVyXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmN1cnJlbnRJdGVtLnNob3coKTtcblx0XHR9XG5cblx0XHRpZih0aGlzLmZyb21PdXRzaWRlICYmICFub1Byb3BhZ2F0aW9uKSB7XG5cdFx0XHRkZWxheWVkVHJpZ2dlcnMucHVzaChmdW5jdGlvbihldmVudCkgeyB0aGlzLl90cmlnZ2VyKFwicmVjZWl2ZVwiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMuZnJvbU91dHNpZGUpKTsgfSk7XG5cdFx0fVxuXHRcdGlmKCh0aGlzLmZyb21PdXRzaWRlIHx8IHRoaXMuZG9tUG9zaXRpb24ucHJldiAhPT0gdGhpcy5jdXJyZW50SXRlbS5wcmV2KCkubm90KFwiLnVpLXNvcnRhYmxlLWhlbHBlclwiKVswXSB8fCB0aGlzLmRvbVBvc2l0aW9uLnBhcmVudCAhPT0gdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVswXSkgJiYgIW5vUHJvcGFnYXRpb24pIHtcblx0XHRcdGRlbGF5ZWRUcmlnZ2Vycy5wdXNoKGZ1bmN0aW9uKGV2ZW50KSB7IHRoaXMuX3RyaWdnZXIoXCJ1cGRhdGVcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpKTsgfSk7IC8vVHJpZ2dlciB1cGRhdGUgY2FsbGJhY2sgaWYgdGhlIERPTSBwb3NpdGlvbiBoYXMgY2hhbmdlZFxuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIHRoZSBpdGVtcyBDb250YWluZXIgaGFzIENoYW5nZWQgYW5kIHRyaWdnZXIgYXBwcm9wcmlhdGVcblx0XHQvLyBldmVudHMuXG5cdFx0aWYgKHRoaXMgIT09IHRoaXMuY3VycmVudENvbnRhaW5lcikge1xuXHRcdFx0aWYoIW5vUHJvcGFnYXRpb24pIHtcblx0XHRcdFx0ZGVsYXllZFRyaWdnZXJzLnB1c2goZnVuY3Rpb24oZXZlbnQpIHsgdGhpcy5fdHJpZ2dlcihcInJlbW92ZVwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpOyB9KTtcblx0XHRcdFx0ZGVsYXllZFRyaWdnZXJzLnB1c2goKGZ1bmN0aW9uKGMpIHsgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7IGMuX3RyaWdnZXIoXCJyZWNlaXZlXCIsIGV2ZW50LCB0aGlzLl91aUhhc2godGhpcykpOyB9OyAgfSkuY2FsbCh0aGlzLCB0aGlzLmN1cnJlbnRDb250YWluZXIpKTtcblx0XHRcdFx0ZGVsYXllZFRyaWdnZXJzLnB1c2goKGZ1bmN0aW9uKGMpIHsgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7IGMuX3RyaWdnZXIoXCJ1cGRhdGVcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCh0aGlzKSk7ICB9OyB9KS5jYWxsKHRoaXMsIHRoaXMuY3VycmVudENvbnRhaW5lcikpO1xuXHRcdFx0fVxuXHRcdH1cblxuXG5cdFx0Ly9Qb3N0IGV2ZW50cyB0byBjb250YWluZXJzXG5cdFx0ZnVuY3Rpb24gZGVsYXlFdmVudCggdHlwZSwgaW5zdGFuY2UsIGNvbnRhaW5lciApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdGNvbnRhaW5lci5fdHJpZ2dlciggdHlwZSwgZXZlbnQsIGluc3RhbmNlLl91aUhhc2goIGluc3RhbmNlICkgKTtcblx0XHRcdH07XG5cdFx0fVxuXHRcdGZvciAoaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG5cdFx0XHRpZiAoIW5vUHJvcGFnYXRpb24pIHtcblx0XHRcdFx0ZGVsYXllZFRyaWdnZXJzLnB1c2goIGRlbGF5RXZlbnQoIFwiZGVhY3RpdmF0ZVwiLCB0aGlzLCB0aGlzLmNvbnRhaW5lcnNbIGkgXSApICk7XG5cdFx0XHR9XG5cdFx0XHRpZih0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3Zlcikge1xuXHRcdFx0XHRkZWxheWVkVHJpZ2dlcnMucHVzaCggZGVsYXlFdmVudCggXCJvdXRcIiwgdGhpcywgdGhpcy5jb250YWluZXJzWyBpIF0gKSApO1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDA7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9EbyB3aGF0IHdhcyBvcmlnaW5hbGx5IGluIHBsdWdpbnNcblx0XHRpZiAoIHRoaXMuc3RvcmVkQ3Vyc29yICkge1xuXHRcdFx0dGhpcy5kb2N1bWVudC5maW5kKCBcImJvZHlcIiApLmNzcyggXCJjdXJzb3JcIiwgdGhpcy5zdG9yZWRDdXJzb3IgKTtcblx0XHRcdHRoaXMuc3RvcmVkU3R5bGVzaGVldC5yZW1vdmUoKTtcblx0XHR9XG5cdFx0aWYodGhpcy5fc3RvcmVkT3BhY2l0eSkge1xuXHRcdFx0dGhpcy5oZWxwZXIuY3NzKFwib3BhY2l0eVwiLCB0aGlzLl9zdG9yZWRPcGFjaXR5KTtcblx0XHR9XG5cdFx0aWYodGhpcy5fc3RvcmVkWkluZGV4KSB7XG5cdFx0XHR0aGlzLmhlbHBlci5jc3MoXCJ6SW5kZXhcIiwgdGhpcy5fc3RvcmVkWkluZGV4ID09PSBcImF1dG9cIiA/IFwiXCIgOiB0aGlzLl9zdG9yZWRaSW5kZXgpO1xuXHRcdH1cblxuXHRcdHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcblxuXHRcdGlmKCFub1Byb3BhZ2F0aW9uKSB7XG5cdFx0XHR0aGlzLl90cmlnZ2VyKFwiYmVmb3JlU3RvcFwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpO1xuXHRcdH1cblxuXHRcdC8vJCh0aGlzLnBsYWNlaG9sZGVyWzBdKS5yZW1vdmUoKTsgd291bGQgaGF2ZSBiZWVuIHRoZSBqUXVlcnkgd2F5IC0gdW5mb3J0dW5hdGVseSwgaXQgdW5iaW5kcyBBTEwgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUhXG5cdFx0dGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pO1xuXG5cdFx0aWYgKCAhdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsICkge1xuXHRcdFx0aWYgKCB0aGlzLmhlbHBlclsgMCBdICE9PSB0aGlzLmN1cnJlbnRJdGVtWyAwIF0gKSB7XG5cdFx0XHRcdHRoaXMuaGVscGVyLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5oZWxwZXIgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmKCFub1Byb3BhZ2F0aW9uKSB7XG5cdFx0XHRmb3IgKGk9MDsgaSA8IGRlbGF5ZWRUcmlnZ2Vycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRkZWxheWVkVHJpZ2dlcnNbaV0uY2FsbCh0aGlzLCBldmVudCk7XG5cdFx0XHR9IC8vVHJpZ2dlciBhbGwgZGVsYXllZCBldmVudHNcblx0XHRcdHRoaXMuX3RyaWdnZXIoXCJzdG9wXCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5mcm9tT3V0c2lkZSA9IGZhbHNlO1xuXHRcdHJldHVybiAhdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsO1xuXG5cdH0sXG5cblx0X3RyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICgkLldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA9PT0gZmFsc2UpIHtcblx0XHRcdHRoaXMuY2FuY2VsKCk7XG5cdFx0fVxuXHR9LFxuXG5cdF91aUhhc2g6IGZ1bmN0aW9uKF9pbnN0KSB7XG5cdFx0dmFyIGluc3QgPSBfaW5zdCB8fCB0aGlzO1xuXHRcdHJldHVybiB7XG5cdFx0XHRoZWxwZXI6IGluc3QuaGVscGVyLFxuXHRcdFx0cGxhY2Vob2xkZXI6IGluc3QucGxhY2Vob2xkZXIgfHwgJChbXSksXG5cdFx0XHRwb3NpdGlvbjogaW5zdC5wb3NpdGlvbixcblx0XHRcdG9yaWdpbmFsUG9zaXRpb246IGluc3Qub3JpZ2luYWxQb3NpdGlvbixcblx0XHRcdG9mZnNldDogaW5zdC5wb3NpdGlvbkFicyxcblx0XHRcdGl0ZW06IGluc3QuY3VycmVudEl0ZW0sXG5cdFx0XHRzZW5kZXI6IF9pbnN0ID8gX2luc3QuZWxlbWVudCA6IG51bGxcblx0XHR9O1xuXHR9XG5cbn0pO1xuXG5cbi8qIVxuICogalF1ZXJ5IFVJIFNwaW5uZXIgMS4xMS4zXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9zcGlubmVyL1xuICovXG5cblxuZnVuY3Rpb24gc3Bpbm5lcl9tb2RpZmllciggZm4gKSB7XG5cdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJldmlvdXMgPSB0aGlzLmVsZW1lbnQudmFsKCk7XG5cdFx0Zm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdHRoaXMuX3JlZnJlc2goKTtcblx0XHRpZiAoIHByZXZpb3VzICE9PSB0aGlzLmVsZW1lbnQudmFsKCkgKSB7XG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImNoYW5nZVwiICk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgc3Bpbm5lciA9ICQud2lkZ2V0KCBcInVpLnNwaW5uZXJcIiwge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXHRkZWZhdWx0RWxlbWVudDogXCI8aW5wdXQ+XCIsXG5cdHdpZGdldEV2ZW50UHJlZml4OiBcInNwaW5cIixcblx0b3B0aW9uczoge1xuXHRcdGN1bHR1cmU6IG51bGwsXG5cdFx0aWNvbnM6IHtcblx0XHRcdGRvd246IFwidWktaWNvbi10cmlhbmdsZS0xLXNcIixcblx0XHRcdHVwOiBcInVpLWljb24tdHJpYW5nbGUtMS1uXCJcblx0XHR9LFxuXHRcdGluY3JlbWVudGFsOiB0cnVlLFxuXHRcdG1heDogbnVsbCxcblx0XHRtaW46IG51bGwsXG5cdFx0bnVtYmVyRm9ybWF0OiBudWxsLFxuXHRcdHBhZ2U6IDEwLFxuXHRcdHN0ZXA6IDEsXG5cblx0XHRjaGFuZ2U6IG51bGwsXG5cdFx0c3BpbjogbnVsbCxcblx0XHRzdGFydDogbnVsbCxcblx0XHRzdG9wOiBudWxsXG5cdH0sXG5cblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gaGFuZGxlIHN0cmluZyB2YWx1ZXMgdGhhdCBuZWVkIHRvIGJlIHBhcnNlZFxuXHRcdHRoaXMuX3NldE9wdGlvbiggXCJtYXhcIiwgdGhpcy5vcHRpb25zLm1heCApO1xuXHRcdHRoaXMuX3NldE9wdGlvbiggXCJtaW5cIiwgdGhpcy5vcHRpb25zLm1pbiApO1xuXHRcdHRoaXMuX3NldE9wdGlvbiggXCJzdGVwXCIsIHRoaXMub3B0aW9ucy5zdGVwICk7XG5cblx0XHQvLyBPbmx5IGZvcm1hdCBpZiB0aGVyZSBpcyBhIHZhbHVlLCBwcmV2ZW50cyB0aGUgZmllbGQgZnJvbSBiZWluZyBtYXJrZWRcblx0XHQvLyBhcyBpbnZhbGlkIGluIEZpcmVmb3gsIHNlZSAjOTU3My5cblx0XHRpZiAoIHRoaXMudmFsdWUoKSAhPT0gXCJcIiApIHtcblx0XHRcdC8vIEZvcm1hdCB0aGUgdmFsdWUsIGJ1dCBkb24ndCBjb25zdHJhaW4uXG5cdFx0XHR0aGlzLl92YWx1ZSggdGhpcy5lbGVtZW50LnZhbCgpLCB0cnVlICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fZHJhdygpO1xuXHRcdHRoaXMuX29uKCB0aGlzLl9ldmVudHMgKTtcblx0XHR0aGlzLl9yZWZyZXNoKCk7XG5cblx0XHQvLyB0dXJuaW5nIG9mZiBhdXRvY29tcGxldGUgcHJldmVudHMgdGhlIGJyb3dzZXIgZnJvbSByZW1lbWJlcmluZyB0aGVcblx0XHQvLyB2YWx1ZSB3aGVuIG5hdmlnYXRpbmcgdGhyb3VnaCBoaXN0b3J5LCBzbyB3ZSByZS1lbmFibGUgYXV0b2NvbXBsZXRlXG5cdFx0Ly8gaWYgdGhlIHBhZ2UgaXMgdW5sb2FkZWQgYmVmb3JlIHRoZSB3aWRnZXQgaXMgZGVzdHJveWVkLiAjNzc5MFxuXHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywge1xuXHRcdFx0YmVmb3JldW5sb2FkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoIFwiYXV0b2NvbXBsZXRlXCIgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRfZ2V0Q3JlYXRlT3B0aW9uczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB7fSxcblx0XHRcdGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG5cblx0XHQkLmVhY2goIFsgXCJtaW5cIiwgXCJtYXhcIiwgXCJzdGVwXCIgXSwgZnVuY3Rpb24oIGksIG9wdGlvbiApIHtcblx0XHRcdHZhciB2YWx1ZSA9IGVsZW1lbnQuYXR0ciggb3B0aW9uICk7XG5cdFx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUubGVuZ3RoICkge1xuXHRcdFx0XHRvcHRpb25zWyBvcHRpb24gXSA9IHZhbHVlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIG9wdGlvbnM7XG5cdH0sXG5cblx0X2V2ZW50czoge1xuXHRcdGtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdGlmICggdGhpcy5fc3RhcnQoIGV2ZW50ICkgJiYgdGhpcy5fa2V5ZG93biggZXZlbnQgKSApIHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGtleXVwOiBcIl9zdG9wXCIsXG5cdFx0Zm9jdXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5wcmV2aW91cyA9IHRoaXMuZWxlbWVudC52YWwoKTtcblx0XHR9LFxuXHRcdGJsdXI6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdGlmICggdGhpcy5jYW5jZWxCbHVyICkge1xuXHRcdFx0XHRkZWxldGUgdGhpcy5jYW5jZWxCbHVyO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX3N0b3AoKTtcblx0XHRcdHRoaXMuX3JlZnJlc2goKTtcblx0XHRcdGlmICggdGhpcy5wcmV2aW91cyAhPT0gdGhpcy5lbGVtZW50LnZhbCgpICkge1xuXHRcdFx0XHR0aGlzLl90cmlnZ2VyKCBcImNoYW5nZVwiLCBldmVudCApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0bW91c2V3aGVlbDogZnVuY3Rpb24oIGV2ZW50LCBkZWx0YSApIHtcblx0XHRcdGlmICggIWRlbHRhICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAoICF0aGlzLnNwaW5uaW5nICYmICF0aGlzLl9zdGFydCggZXZlbnQgKSApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9zcGluKCAoZGVsdGEgPiAwID8gMSA6IC0xKSAqIHRoaXMub3B0aW9ucy5zdGVwLCBldmVudCApO1xuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLm1vdXNld2hlZWxUaW1lciApO1xuXHRcdFx0dGhpcy5tb3VzZXdoZWVsVGltZXIgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzLnNwaW5uaW5nICkge1xuXHRcdFx0XHRcdHRoaXMuX3N0b3AoIGV2ZW50ICk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDEwMCApO1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHR9LFxuXHRcdFwibW91c2Vkb3duIC51aS1zcGlubmVyLWJ1dHRvblwiOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHR2YXIgcHJldmlvdXM7XG5cblx0XHRcdC8vIFdlIG5ldmVyIHdhbnQgdGhlIGJ1dHRvbnMgdG8gaGF2ZSBmb2N1czsgd2hlbmV2ZXIgdGhlIHVzZXIgaXNcblx0XHRcdC8vIGludGVyYWN0aW5nIHdpdGggdGhlIHNwaW5uZXIsIHRoZSBmb2N1cyBzaG91bGQgYmUgb24gdGhlIGlucHV0LlxuXHRcdFx0Ly8gSWYgdGhlIGlucHV0IGlzIGZvY3VzZWQgdGhlbiB0aGlzLnByZXZpb3VzIGlzIHByb3Blcmx5IHNldCBmcm9tXG5cdFx0XHQvLyB3aGVuIHRoZSBpbnB1dCBmaXJzdCByZWNlaXZlZCBmb2N1cy4gSWYgdGhlIGlucHV0IGlzIG5vdCBmb2N1c2VkXG5cdFx0XHQvLyB0aGVuIHdlIG5lZWQgdG8gc2V0IHRoaXMucHJldmlvdXMgYmFzZWQgb24gdGhlIHZhbHVlIGJlZm9yZSBzcGlubmluZy5cblx0XHRcdHByZXZpb3VzID0gdGhpcy5lbGVtZW50WzBdID09PSB0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQgP1xuXHRcdFx0XHR0aGlzLnByZXZpb3VzIDogdGhpcy5lbGVtZW50LnZhbCgpO1xuXHRcdFx0ZnVuY3Rpb24gY2hlY2tGb2N1cygpIHtcblx0XHRcdFx0dmFyIGlzQWN0aXZlID0gdGhpcy5lbGVtZW50WzBdID09PSB0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQ7XG5cdFx0XHRcdGlmICggIWlzQWN0aXZlICkge1xuXHRcdFx0XHRcdHRoaXMuZWxlbWVudC5mb2N1cygpO1xuXHRcdFx0XHRcdHRoaXMucHJldmlvdXMgPSBwcmV2aW91cztcblx0XHRcdFx0XHQvLyBzdXBwb3J0OiBJRVxuXHRcdFx0XHRcdC8vIElFIHNldHMgZm9jdXMgYXN5bmNocm9ub3VzbHksIHNvIHdlIG5lZWQgdG8gY2hlY2sgaWYgZm9jdXNcblx0XHRcdFx0XHQvLyBtb3ZlZCBvZmYgb2YgdGhlIGlucHV0IGJlY2F1c2UgdGhlIHVzZXIgY2xpY2tlZCBvbiB0aGUgYnV0dG9uLlxuXHRcdFx0XHRcdHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dGhpcy5wcmV2aW91cyA9IHByZXZpb3VzO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIGVuc3VyZSBmb2N1cyBpcyBvbiAob3Igc3RheXMgb24pIHRoZSB0ZXh0IGZpZWxkXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y2hlY2tGb2N1cy5jYWxsKCB0aGlzICk7XG5cblx0XHRcdC8vIHN1cHBvcnQ6IElFXG5cdFx0XHQvLyBJRSBkb2Vzbid0IHByZXZlbnQgbW92aW5nIGZvY3VzIGV2ZW4gd2l0aCBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHQvLyBzbyB3ZSBzZXQgYSBmbGFnIHRvIGtub3cgd2hlbiB3ZSBzaG91bGQgaWdub3JlIHRoZSBibHVyIGV2ZW50XG5cdFx0XHQvLyBhbmQgY2hlY2sgKGFnYWluKSBpZiBmb2N1cyBtb3ZlZCBvZmYgb2YgdGhlIGlucHV0LlxuXHRcdFx0dGhpcy5jYW5jZWxCbHVyID0gdHJ1ZTtcblx0XHRcdHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWxldGUgdGhpcy5jYW5jZWxCbHVyO1xuXHRcdFx0XHRjaGVja0ZvY3VzLmNhbGwoIHRoaXMgKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoIHRoaXMuX3N0YXJ0KCBldmVudCApID09PSBmYWxzZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9yZXBlYXQoIG51bGwsICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5oYXNDbGFzcyggXCJ1aS1zcGlubmVyLXVwXCIgKSA/IDEgOiAtMSwgZXZlbnQgKTtcblx0XHR9LFxuXHRcdFwibW91c2V1cCAudWktc3Bpbm5lci1idXR0b25cIjogXCJfc3RvcFwiLFxuXHRcdFwibW91c2VlbnRlciAudWktc3Bpbm5lci1idXR0b25cIjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0Ly8gYnV0dG9uIHdpbGwgYWRkIHVpLXN0YXRlLWFjdGl2ZSBpZiBtb3VzZSB3YXMgZG93biB3aGlsZSBtb3VzZWxlYXZlIGFuZCBrZXB0IGRvd25cblx0XHRcdGlmICggISQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggdGhpcy5fc3RhcnQoIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9yZXBlYXQoIG51bGwsICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5oYXNDbGFzcyggXCJ1aS1zcGlubmVyLXVwXCIgKSA/IDEgOiAtMSwgZXZlbnQgKTtcblx0XHR9LFxuXHRcdC8vIFRPRE86IGRvIHdlIHJlYWxseSB3YW50IHRvIGNvbnNpZGVyIHRoaXMgYSBzdG9wP1xuXHRcdC8vIHNob3VsZG4ndCB3ZSBqdXN0IHN0b3AgdGhlIHJlcGVhdGVyIGFuZCB3YWl0IHVudGlsIG1vdXNldXAgYmVmb3JlXG5cdFx0Ly8gd2UgdHJpZ2dlciB0aGUgc3RvcCBldmVudD9cblx0XHRcIm1vdXNlbGVhdmUgLnVpLXNwaW5uZXItYnV0dG9uXCI6IFwiX3N0b3BcIlxuXHR9LFxuXG5cdF9kcmF3OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdWlTcGlubmVyID0gdGhpcy51aVNwaW5uZXIgPSB0aGlzLmVsZW1lbnRcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zcGlubmVyLWlucHV0XCIgKVxuXHRcdFx0LmF0dHIoIFwiYXV0b2NvbXBsZXRlXCIsIFwib2ZmXCIgKVxuXHRcdFx0LndyYXAoIHRoaXMuX3VpU3Bpbm5lckh0bWwoKSApXG5cdFx0XHQucGFyZW50KClcblx0XHRcdFx0Ly8gYWRkIGJ1dHRvbnNcblx0XHRcdFx0LmFwcGVuZCggdGhpcy5fYnV0dG9uSHRtbCgpICk7XG5cblx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJyb2xlXCIsIFwic3BpbmJ1dHRvblwiICk7XG5cblx0XHQvLyBidXR0b24gYmluZGluZ3Ncblx0XHR0aGlzLmJ1dHRvbnMgPSB1aVNwaW5uZXIuZmluZCggXCIudWktc3Bpbm5lci1idXR0b25cIiApXG5cdFx0XHQuYXR0ciggXCJ0YWJJbmRleFwiLCAtMSApXG5cdFx0XHQuYnV0dG9uKClcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIgKTtcblxuXHRcdC8vIElFIDYgZG9lc24ndCB1bmRlcnN0YW5kIGhlaWdodDogNTAlIGZvciB0aGUgYnV0dG9uc1xuXHRcdC8vIHVubGVzcyB0aGUgd3JhcHBlciBoYXMgYW4gZXhwbGljaXQgaGVpZ2h0XG5cdFx0aWYgKCB0aGlzLmJ1dHRvbnMuaGVpZ2h0KCkgPiBNYXRoLmNlaWwoIHVpU3Bpbm5lci5oZWlnaHQoKSAqIDAuNSApICYmXG5cdFx0XHRcdHVpU3Bpbm5lci5oZWlnaHQoKSA+IDAgKSB7XG5cdFx0XHR1aVNwaW5uZXIuaGVpZ2h0KCB1aVNwaW5uZXIuaGVpZ2h0KCkgKTtcblx0XHR9XG5cblx0XHQvLyBkaXNhYmxlIHNwaW5uZXIgaWYgZWxlbWVudCB3YXMgYWxyZWFkeSBkaXNhYmxlZFxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkICkge1xuXHRcdFx0dGhpcy5kaXNhYmxlKCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9rZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRrZXlDb2RlID0gJC51aS5rZXlDb2RlO1xuXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcblx0XHRjYXNlIGtleUNvZGUuVVA6XG5cdFx0XHR0aGlzLl9yZXBlYXQoIG51bGwsIDEsIGV2ZW50ICk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRjYXNlIGtleUNvZGUuRE9XTjpcblx0XHRcdHRoaXMuX3JlcGVhdCggbnVsbCwgLTEsIGV2ZW50ICk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRjYXNlIGtleUNvZGUuUEFHRV9VUDpcblx0XHRcdHRoaXMuX3JlcGVhdCggbnVsbCwgb3B0aW9ucy5wYWdlLCBldmVudCApO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0Y2FzZSBrZXlDb2RlLlBBR0VfRE9XTjpcblx0XHRcdHRoaXMuX3JlcGVhdCggbnVsbCwgLW9wdGlvbnMucGFnZSwgZXZlbnQgKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXHRfdWlTcGlubmVySHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIFwiPHNwYW4gY2xhc3M9J3VpLXNwaW5uZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwnPjwvc3Bhbj5cIjtcblx0fSxcblxuXHRfYnV0dG9uSHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIFwiXCIgK1xuXHRcdFx0XCI8YSBjbGFzcz0ndWktc3Bpbm5lci1idXR0b24gdWktc3Bpbm5lci11cCB1aS1jb3JuZXItdHInPlwiICtcblx0XHRcdFx0XCI8c3BhbiBjbGFzcz0ndWktaWNvbiBcIiArIHRoaXMub3B0aW9ucy5pY29ucy51cCArIFwiJz4mIzk2NTA7PC9zcGFuPlwiICtcblx0XHRcdFwiPC9hPlwiICtcblx0XHRcdFwiPGEgY2xhc3M9J3VpLXNwaW5uZXItYnV0dG9uIHVpLXNwaW5uZXItZG93biB1aS1jb3JuZXItYnInPlwiICtcblx0XHRcdFx0XCI8c3BhbiBjbGFzcz0ndWktaWNvbiBcIiArIHRoaXMub3B0aW9ucy5pY29ucy5kb3duICsgXCInPiYjOTY2MDs8L3NwYW4+XCIgK1xuXHRcdFx0XCI8L2E+XCI7XG5cdH0sXG5cblx0X3N0YXJ0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCAhdGhpcy5zcGlubmluZyAmJiB0aGlzLl90cmlnZ2VyKCBcInN0YXJ0XCIsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGlmICggIXRoaXMuY291bnRlciApIHtcblx0XHRcdHRoaXMuY291bnRlciA9IDE7XG5cdFx0fVxuXHRcdHRoaXMuc3Bpbm5pbmcgPSB0cnVlO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdF9yZXBlYXQ6IGZ1bmN0aW9uKCBpLCBzdGVwcywgZXZlbnQgKSB7XG5cdFx0aSA9IGkgfHwgNTAwO1xuXG5cdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7XG5cdFx0dGhpcy50aW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fcmVwZWF0KCA0MCwgc3RlcHMsIGV2ZW50ICk7XG5cdFx0fSwgaSApO1xuXG5cdFx0dGhpcy5fc3Bpbiggc3RlcHMgKiB0aGlzLm9wdGlvbnMuc3RlcCwgZXZlbnQgKTtcblx0fSxcblxuXHRfc3BpbjogZnVuY3Rpb24oIHN0ZXAsIGV2ZW50ICkge1xuXHRcdHZhciB2YWx1ZSA9IHRoaXMudmFsdWUoKSB8fCAwO1xuXG5cdFx0aWYgKCAhdGhpcy5jb3VudGVyICkge1xuXHRcdFx0dGhpcy5jb3VudGVyID0gMTtcblx0XHR9XG5cblx0XHR2YWx1ZSA9IHRoaXMuX2FkanVzdFZhbHVlKCB2YWx1ZSArIHN0ZXAgKiB0aGlzLl9pbmNyZW1lbnQoIHRoaXMuY291bnRlciApICk7XG5cblx0XHRpZiAoICF0aGlzLnNwaW5uaW5nIHx8IHRoaXMuX3RyaWdnZXIoIFwic3BpblwiLCBldmVudCwgeyB2YWx1ZTogdmFsdWUgfSApICE9PSBmYWxzZSkge1xuXHRcdFx0dGhpcy5fdmFsdWUoIHZhbHVlICk7XG5cdFx0XHR0aGlzLmNvdW50ZXIrKztcblx0XHR9XG5cdH0sXG5cblx0X2luY3JlbWVudDogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGluY3JlbWVudGFsID0gdGhpcy5vcHRpb25zLmluY3JlbWVudGFsO1xuXG5cdFx0aWYgKCBpbmNyZW1lbnRhbCApIHtcblx0XHRcdHJldHVybiAkLmlzRnVuY3Rpb24oIGluY3JlbWVudGFsICkgP1xuXHRcdFx0XHRpbmNyZW1lbnRhbCggaSApIDpcblx0XHRcdFx0TWF0aC5mbG9vciggaSAqIGkgKiBpIC8gNTAwMDAgLSBpICogaSAvIDUwMCArIDE3ICogaSAvIDIwMCArIDEgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gMTtcblx0fSxcblxuXHRfcHJlY2lzaW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJlY2lzaW9uID0gdGhpcy5fcHJlY2lzaW9uT2YoIHRoaXMub3B0aW9ucy5zdGVwICk7XG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubWluICE9PSBudWxsICkge1xuXHRcdFx0cHJlY2lzaW9uID0gTWF0aC5tYXgoIHByZWNpc2lvbiwgdGhpcy5fcHJlY2lzaW9uT2YoIHRoaXMub3B0aW9ucy5taW4gKSApO1xuXHRcdH1cblx0XHRyZXR1cm4gcHJlY2lzaW9uO1xuXHR9LFxuXG5cdF9wcmVjaXNpb25PZjogZnVuY3Rpb24oIG51bSApIHtcblx0XHR2YXIgc3RyID0gbnVtLnRvU3RyaW5nKCksXG5cdFx0XHRkZWNpbWFsID0gc3RyLmluZGV4T2YoIFwiLlwiICk7XG5cdFx0cmV0dXJuIGRlY2ltYWwgPT09IC0xID8gMCA6IHN0ci5sZW5ndGggLSBkZWNpbWFsIC0gMTtcblx0fSxcblxuXHRfYWRqdXN0VmFsdWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgYmFzZSwgYWJvdmVNaW4sXG5cdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG5cdFx0Ly8gbWFrZSBzdXJlIHdlJ3JlIGF0IGEgdmFsaWQgc3RlcFxuXHRcdC8vIC0gZmluZCBvdXQgd2hlcmUgd2UgYXJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIChtaW4gb3IgMClcblx0XHRiYXNlID0gb3B0aW9ucy5taW4gIT09IG51bGwgPyBvcHRpb25zLm1pbiA6IDA7XG5cdFx0YWJvdmVNaW4gPSB2YWx1ZSAtIGJhc2U7XG5cdFx0Ly8gLSByb3VuZCB0byB0aGUgbmVhcmVzdCBzdGVwXG5cdFx0YWJvdmVNaW4gPSBNYXRoLnJvdW5kKGFib3ZlTWluIC8gb3B0aW9ucy5zdGVwKSAqIG9wdGlvbnMuc3RlcDtcblx0XHQvLyAtIHJvdW5kaW5nIGlzIGJhc2VkIG9uIDAsIHNvIGFkanVzdCBiYWNrIHRvIG91ciBiYXNlXG5cdFx0dmFsdWUgPSBiYXNlICsgYWJvdmVNaW47XG5cblx0XHQvLyBmaXggcHJlY2lzaW9uIGZyb20gYmFkIEpTIGZsb2F0aW5nIHBvaW50IG1hdGhcblx0XHR2YWx1ZSA9IHBhcnNlRmxvYXQoIHZhbHVlLnRvRml4ZWQoIHRoaXMuX3ByZWNpc2lvbigpICkgKTtcblxuXHRcdC8vIGNsYW1wIHRoZSB2YWx1ZVxuXHRcdGlmICggb3B0aW9ucy5tYXggIT09IG51bGwgJiYgdmFsdWUgPiBvcHRpb25zLm1heCkge1xuXHRcdFx0cmV0dXJuIG9wdGlvbnMubWF4O1xuXHRcdH1cblx0XHRpZiAoIG9wdGlvbnMubWluICE9PSBudWxsICYmIHZhbHVlIDwgb3B0aW9ucy5taW4gKSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucy5taW47XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9LFxuXG5cdF9zdG9wOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCAhdGhpcy5zcGlubmluZyApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjbGVhclRpbWVvdXQoIHRoaXMudGltZXIgKTtcblx0XHRjbGVhclRpbWVvdXQoIHRoaXMubW91c2V3aGVlbFRpbWVyICk7XG5cdFx0dGhpcy5jb3VudGVyID0gMDtcblx0XHR0aGlzLnNwaW5uaW5nID0gZmFsc2U7XG5cdFx0dGhpcy5fdHJpZ2dlciggXCJzdG9wXCIsIGV2ZW50ICk7XG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0aWYgKCBrZXkgPT09IFwiY3VsdHVyZVwiIHx8IGtleSA9PT0gXCJudW1iZXJGb3JtYXRcIiApIHtcblx0XHRcdHZhciBwcmV2VmFsdWUgPSB0aGlzLl9wYXJzZSggdGhpcy5lbGVtZW50LnZhbCgpICk7XG5cdFx0XHR0aGlzLm9wdGlvbnNbIGtleSBdID0gdmFsdWU7XG5cdFx0XHR0aGlzLmVsZW1lbnQudmFsKCB0aGlzLl9mb3JtYXQoIHByZXZWYWx1ZSApICk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgPT09IFwibWF4XCIgfHwga2V5ID09PSBcIm1pblwiIHx8IGtleSA9PT0gXCJzdGVwXCIgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0dmFsdWUgPSB0aGlzLl9wYXJzZSggdmFsdWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCBrZXkgPT09IFwiaWNvbnNcIiApIHtcblx0XHRcdHRoaXMuYnV0dG9ucy5maXJzdCgpLmZpbmQoIFwiLnVpLWljb25cIiApXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5vcHRpb25zLmljb25zLnVwIClcblx0XHRcdFx0LmFkZENsYXNzKCB2YWx1ZS51cCApO1xuXHRcdFx0dGhpcy5idXR0b25zLmxhc3QoKS5maW5kKCBcIi51aS1pY29uXCIgKVxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5pY29ucy5kb3duIClcblx0XHRcdFx0LmFkZENsYXNzKCB2YWx1ZS5kb3duICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcblxuXHRcdGlmICgga2V5ID09PSBcImRpc2FibGVkXCIgKSB7XG5cdFx0XHR0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsICEhdmFsdWUgKTtcblx0XHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIsICEhdmFsdWUgKTtcblx0XHRcdHRoaXMuYnV0dG9ucy5idXR0b24oIHZhbHVlID8gXCJkaXNhYmxlXCIgOiBcImVuYWJsZVwiICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9zZXRPcHRpb25zOiBzcGlubmVyX21vZGlmaWVyKGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XG5cdH0pLFxuXG5cdF9wYXJzZTogZnVuY3Rpb24oIHZhbCApIHtcblx0XHRpZiAoIHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgJiYgdmFsICE9PSBcIlwiICkge1xuXHRcdFx0dmFsID0gd2luZG93Lkdsb2JhbGl6ZSAmJiB0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0ID9cblx0XHRcdFx0R2xvYmFsaXplLnBhcnNlRmxvYXQoIHZhbCwgMTAsIHRoaXMub3B0aW9ucy5jdWx0dXJlICkgOiArdmFsO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsID09PSBcIlwiIHx8IGlzTmFOKCB2YWwgKSA/IG51bGwgOiB2YWw7XG5cdH0sXG5cblx0X2Zvcm1hdDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdGlmICggdmFsdWUgPT09IFwiXCIgKSB7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHdpbmRvdy5HbG9iYWxpemUgJiYgdGhpcy5vcHRpb25zLm51bWJlckZvcm1hdCA/XG5cdFx0XHRHbG9iYWxpemUuZm9ybWF0KCB2YWx1ZSwgdGhpcy5vcHRpb25zLm51bWJlckZvcm1hdCwgdGhpcy5vcHRpb25zLmN1bHR1cmUgKSA6XG5cdFx0XHR2YWx1ZTtcblx0fSxcblxuXHRfcmVmcmVzaDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbGVtZW50LmF0dHIoe1xuXHRcdFx0XCJhcmlhLXZhbHVlbWluXCI6IHRoaXMub3B0aW9ucy5taW4sXG5cdFx0XHRcImFyaWEtdmFsdWVtYXhcIjogdGhpcy5vcHRpb25zLm1heCxcblx0XHRcdC8vIFRPRE86IHdoYXQgc2hvdWxkIHdlIGRvIHdpdGggdmFsdWVzIHRoYXQgY2FuJ3QgYmUgcGFyc2VkP1xuXHRcdFx0XCJhcmlhLXZhbHVlbm93XCI6IHRoaXMuX3BhcnNlKCB0aGlzLmVsZW1lbnQudmFsKCkgKVxuXHRcdH0pO1xuXHR9LFxuXG5cdGlzVmFsaWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2YWx1ZSA9IHRoaXMudmFsdWUoKTtcblxuXHRcdC8vIG51bGwgaXMgaW52YWxpZFxuXHRcdGlmICggdmFsdWUgPT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gaWYgdmFsdWUgZ2V0cyBhZGp1c3RlZCwgaXQncyBpbnZhbGlkXG5cdFx0cmV0dXJuIHZhbHVlID09PSB0aGlzLl9hZGp1c3RWYWx1ZSggdmFsdWUgKTtcblx0fSxcblxuXHQvLyB1cGRhdGUgdGhlIHZhbHVlIHdpdGhvdXQgdHJpZ2dlcmluZyBjaGFuZ2Vcblx0X3ZhbHVlOiBmdW5jdGlvbiggdmFsdWUsIGFsbG93QW55ICkge1xuXHRcdHZhciBwYXJzZWQ7XG5cdFx0aWYgKCB2YWx1ZSAhPT0gXCJcIiApIHtcblx0XHRcdHBhcnNlZCA9IHRoaXMuX3BhcnNlKCB2YWx1ZSApO1xuXHRcdFx0aWYgKCBwYXJzZWQgIT09IG51bGwgKSB7XG5cdFx0XHRcdGlmICggIWFsbG93QW55ICkge1xuXHRcdFx0XHRcdHBhcnNlZCA9IHRoaXMuX2FkanVzdFZhbHVlKCBwYXJzZWQgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YWx1ZSA9IHRoaXMuX2Zvcm1hdCggcGFyc2VkICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuZWxlbWVudC52YWwoIHZhbHVlICk7XG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xuXHR9LFxuXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zcGlubmVyLWlucHV0XCIgKVxuXHRcdFx0LnByb3AoIFwiZGlzYWJsZWRcIiwgZmFsc2UgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwiYXV0b2NvbXBsZXRlXCIgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtdmFsdWVtaW5cIiApXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLXZhbHVlbWF4XCIgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS12YWx1ZW5vd1wiICk7XG5cdFx0dGhpcy51aVNwaW5uZXIucmVwbGFjZVdpdGgoIHRoaXMuZWxlbWVudCApO1xuXHR9LFxuXG5cdHN0ZXBVcDogc3Bpbm5lcl9tb2RpZmllcihmdW5jdGlvbiggc3RlcHMgKSB7XG5cdFx0dGhpcy5fc3RlcFVwKCBzdGVwcyApO1xuXHR9KSxcblx0X3N0ZXBVcDogZnVuY3Rpb24oIHN0ZXBzICkge1xuXHRcdGlmICggdGhpcy5fc3RhcnQoKSApIHtcblx0XHRcdHRoaXMuX3NwaW4oIChzdGVwcyB8fCAxKSAqIHRoaXMub3B0aW9ucy5zdGVwICk7XG5cdFx0XHR0aGlzLl9zdG9wKCk7XG5cdFx0fVxuXHR9LFxuXG5cdHN0ZXBEb3duOiBzcGlubmVyX21vZGlmaWVyKGZ1bmN0aW9uKCBzdGVwcyApIHtcblx0XHR0aGlzLl9zdGVwRG93biggc3RlcHMgKTtcblx0fSksXG5cdF9zdGVwRG93bjogZnVuY3Rpb24oIHN0ZXBzICkge1xuXHRcdGlmICggdGhpcy5fc3RhcnQoKSApIHtcblx0XHRcdHRoaXMuX3NwaW4oIChzdGVwcyB8fCAxKSAqIC10aGlzLm9wdGlvbnMuc3RlcCApO1xuXHRcdFx0dGhpcy5fc3RvcCgpO1xuXHRcdH1cblx0fSxcblxuXHRwYWdlVXA6IHNwaW5uZXJfbW9kaWZpZXIoZnVuY3Rpb24oIHBhZ2VzICkge1xuXHRcdHRoaXMuX3N0ZXBVcCggKHBhZ2VzIHx8IDEpICogdGhpcy5vcHRpb25zLnBhZ2UgKTtcblx0fSksXG5cblx0cGFnZURvd246IHNwaW5uZXJfbW9kaWZpZXIoZnVuY3Rpb24oIHBhZ2VzICkge1xuXHRcdHRoaXMuX3N0ZXBEb3duKCAocGFnZXMgfHwgMSkgKiB0aGlzLm9wdGlvbnMucGFnZSApO1xuXHR9KSxcblxuXHR2YWx1ZTogZnVuY3Rpb24oIG5ld1ZhbCApIHtcblx0XHRpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3BhcnNlKCB0aGlzLmVsZW1lbnQudmFsKCkgKTtcblx0XHR9XG5cdFx0c3Bpbm5lcl9tb2RpZmllciggdGhpcy5fdmFsdWUgKS5jYWxsKCB0aGlzLCBuZXdWYWwgKTtcblx0fSxcblxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnVpU3Bpbm5lcjtcblx0fVxufSk7XG5cblxuLyohXG4gKiBqUXVlcnkgVUkgVGFicyAxLjExLjNcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3RhYnMvXG4gKi9cblxuXG52YXIgdGFicyA9ICQud2lkZ2V0KCBcInVpLnRhYnNcIiwge1xuXHR2ZXJzaW9uOiBcIjEuMTEuM1wiLFxuXHRkZWxheTogMzAwLFxuXHRvcHRpb25zOiB7XG5cdFx0YWN0aXZlOiBudWxsLFxuXHRcdGNvbGxhcHNpYmxlOiBmYWxzZSxcblx0XHRldmVudDogXCJjbGlja1wiLFxuXHRcdGhlaWdodFN0eWxlOiBcImNvbnRlbnRcIixcblx0XHRoaWRlOiBudWxsLFxuXHRcdHNob3c6IG51bGwsXG5cblx0XHQvLyBjYWxsYmFja3Ncblx0XHRhY3RpdmF0ZTogbnVsbCxcblx0XHRiZWZvcmVBY3RpdmF0ZTogbnVsbCxcblx0XHRiZWZvcmVMb2FkOiBudWxsLFxuXHRcdGxvYWQ6IG51bGxcblx0fSxcblxuXHRfaXNMb2NhbDogKGZ1bmN0aW9uKCkge1xuXHRcdHZhciByaGFzaCA9IC8jLiokLztcblxuXHRcdHJldHVybiBmdW5jdGlvbiggYW5jaG9yICkge1xuXHRcdFx0dmFyIGFuY2hvclVybCwgbG9jYXRpb25Vcmw7XG5cblx0XHRcdC8vIHN1cHBvcnQ6IElFN1xuXHRcdFx0Ly8gSUU3IGRvZXNuJ3Qgbm9ybWFsaXplIHRoZSBocmVmIHByb3BlcnR5IHdoZW4gc2V0IHZpYSBzY3JpcHQgKCM5MzE3KVxuXHRcdFx0YW5jaG9yID0gYW5jaG9yLmNsb25lTm9kZSggZmFsc2UgKTtcblxuXHRcdFx0YW5jaG9yVXJsID0gYW5jaG9yLmhyZWYucmVwbGFjZSggcmhhc2gsIFwiXCIgKTtcblx0XHRcdGxvY2F0aW9uVXJsID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKCByaGFzaCwgXCJcIiApO1xuXG5cdFx0XHQvLyBkZWNvZGluZyBtYXkgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIFVSTCBpc24ndCBVVEYtOCAoIzk1MTgpXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhbmNob3JVcmwgPSBkZWNvZGVVUklDb21wb25lbnQoIGFuY2hvclVybCApO1xuXHRcdFx0fSBjYXRjaCAoIGVycm9yICkge31cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxvY2F0aW9uVXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KCBsb2NhdGlvblVybCApO1xuXHRcdFx0fSBjYXRjaCAoIGVycm9yICkge31cblxuXHRcdFx0cmV0dXJuIGFuY2hvci5oYXNoLmxlbmd0aCA+IDEgJiYgYW5jaG9yVXJsID09PSBsb2NhdGlvblVybDtcblx0XHR9O1xuXHR9KSgpLFxuXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHR0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcblxuXHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGxcIiApXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktdGFicy1jb2xsYXBzaWJsZVwiLCBvcHRpb25zLmNvbGxhcHNpYmxlICk7XG5cblx0XHR0aGlzLl9wcm9jZXNzVGFicygpO1xuXHRcdG9wdGlvbnMuYWN0aXZlID0gdGhpcy5faW5pdGlhbEFjdGl2ZSgpO1xuXG5cdFx0Ly8gVGFrZSBkaXNhYmxpbmcgdGFicyB2aWEgY2xhc3MgYXR0cmlidXRlIGZyb20gSFRNTFxuXHRcdC8vIGludG8gYWNjb3VudCBhbmQgdXBkYXRlIG9wdGlvbiBwcm9wZXJseS5cblx0XHRpZiAoICQuaXNBcnJheSggb3B0aW9ucy5kaXNhYmxlZCApICkge1xuXHRcdFx0b3B0aW9ucy5kaXNhYmxlZCA9ICQudW5pcXVlKCBvcHRpb25zLmRpc2FibGVkLmNvbmNhdChcblx0XHRcdFx0JC5tYXAoIHRoaXMudGFicy5maWx0ZXIoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSwgZnVuY3Rpb24oIGxpICkge1xuXHRcdFx0XHRcdHJldHVybiB0aGF0LnRhYnMuaW5kZXgoIGxpICk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpICkuc29ydCgpO1xuXHRcdH1cblxuXHRcdC8vIGNoZWNrIGZvciBsZW5ndGggYXZvaWRzIGVycm9yIHdoZW4gaW5pdGlhbGl6aW5nIGVtcHR5IGxpc3Rcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hY3RpdmUgIT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLmFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoIG9wdGlvbnMuYWN0aXZlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xuXHRcdH1cblxuXHRcdHRoaXMuX3JlZnJlc2goKTtcblxuXHRcdGlmICggdGhpcy5hY3RpdmUubGVuZ3RoICkge1xuXHRcdFx0dGhpcy5sb2FkKCBvcHRpb25zLmFjdGl2ZSApO1xuXHRcdH1cblx0fSxcblxuXHRfaW5pdGlhbEFjdGl2ZTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGFjdGl2ZSA9IHRoaXMub3B0aW9ucy5hY3RpdmUsXG5cdFx0XHRjb2xsYXBzaWJsZSA9IHRoaXMub3B0aW9ucy5jb2xsYXBzaWJsZSxcblx0XHRcdGxvY2F0aW9uSGFzaCA9IGxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKCAxICk7XG5cblx0XHRpZiAoIGFjdGl2ZSA9PT0gbnVsbCApIHtcblx0XHRcdC8vIGNoZWNrIHRoZSBmcmFnbWVudCBpZGVudGlmaWVyIGluIHRoZSBVUkxcblx0XHRcdGlmICggbG9jYXRpb25IYXNoICkge1xuXHRcdFx0XHR0aGlzLnRhYnMuZWFjaChmdW5jdGlvbiggaSwgdGFiICkge1xuXHRcdFx0XHRcdGlmICggJCggdGFiICkuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKSA9PT0gbG9jYXRpb25IYXNoICkge1xuXHRcdFx0XHRcdFx0YWN0aXZlID0gaTtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBjaGVjayBmb3IgYSB0YWIgbWFya2VkIGFjdGl2ZSB2aWEgYSBjbGFzc1xuXHRcdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgKSB7XG5cdFx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy50YWJzLmZpbHRlciggXCIudWktdGFicy1hY3RpdmVcIiApICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIG5vIGFjdGl2ZSB0YWIsIHNldCB0byBmYWxzZVxuXHRcdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgfHwgYWN0aXZlID09PSAtMSApIHtcblx0XHRcdFx0YWN0aXZlID0gdGhpcy50YWJzLmxlbmd0aCA/IDAgOiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBoYW5kbGUgbnVtYmVyczogbmVnYXRpdmUsIG91dCBvZiByYW5nZVxuXHRcdGlmICggYWN0aXZlICE9PSBmYWxzZSApIHtcblx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy50YWJzLmVxKCBhY3RpdmUgKSApO1xuXHRcdFx0aWYgKCBhY3RpdmUgPT09IC0xICkge1xuXHRcdFx0XHRhY3RpdmUgPSBjb2xsYXBzaWJsZSA/IGZhbHNlIDogMDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBkb24ndCBhbGxvdyBjb2xsYXBzaWJsZTogZmFsc2UgYW5kIGFjdGl2ZTogZmFsc2Vcblx0XHRpZiAoICFjb2xsYXBzaWJsZSAmJiBhY3RpdmUgPT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XG5cdFx0XHRhY3RpdmUgPSAwO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY3RpdmU7XG5cdH0sXG5cblx0X2dldENyZWF0ZUV2ZW50RGF0YTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHRhYjogdGhpcy5hY3RpdmUsXG5cdFx0XHRwYW5lbDogIXRoaXMuYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApXG5cdFx0fTtcblx0fSxcblxuXHRfdGFiS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBmb2N1c2VkVGFiID0gJCggdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50ICkuY2xvc2VzdCggXCJsaVwiICksXG5cdFx0XHRzZWxlY3RlZEluZGV4ID0gdGhpcy50YWJzLmluZGV4KCBmb2N1c2VkVGFiICksXG5cdFx0XHRnb2luZ0ZvcndhcmQgPSB0cnVlO1xuXG5cdFx0aWYgKCB0aGlzLl9oYW5kbGVQYWdlTmF2KCBldmVudCApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5SSUdIVDpcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkRPV046XG5cdFx0XHRcdHNlbGVjdGVkSW5kZXgrKztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5VUDpcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkxFRlQ6XG5cdFx0XHRcdGdvaW5nRm9yd2FyZCA9IGZhbHNlO1xuXHRcdFx0XHRzZWxlY3RlZEluZGV4LS07XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuRU5EOlxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gdGhpcy5hbmNob3JzLmxlbmd0aCAtIDE7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuSE9NRTpcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCA9IDA7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuU1BBQ0U6XG5cdFx0XHRcdC8vIEFjdGl2YXRlIG9ubHksIG5vIGNvbGxhcHNpbmdcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTtcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIHNlbGVjdGVkSW5kZXggKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuRU5URVI6XG5cdFx0XHRcdC8vIFRvZ2dsZSAoY2FuY2VsIGRlbGF5ZWQgYWN0aXZhdGlvbiwgYWxsb3cgY29sbGFwc2luZylcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTtcblx0XHRcdFx0Ly8gRGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBjb2xsYXBzZSBvciBhY3RpdmF0ZVxuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggc2VsZWN0ZWRJbmRleCA9PT0gdGhpcy5vcHRpb25zLmFjdGl2ZSA/IGZhbHNlIDogc2VsZWN0ZWRJbmRleCApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRm9jdXMgdGhlIGFwcHJvcHJpYXRlIHRhYiwgYmFzZWQgb24gd2hpY2gga2V5IHdhcyBwcmVzc2VkXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xuXHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLl9mb2N1c05leHRUYWIoIHNlbGVjdGVkSW5kZXgsIGdvaW5nRm9yd2FyZCApO1xuXG5cdFx0Ly8gTmF2aWdhdGluZyB3aXRoIGNvbnRyb2wvY29tbWFuZCBrZXkgd2lsbCBwcmV2ZW50IGF1dG9tYXRpYyBhY3RpdmF0aW9uXG5cdFx0aWYgKCAhZXZlbnQuY3RybEtleSAmJiAhZXZlbnQubWV0YUtleSApIHtcblxuXHRcdFx0Ly8gVXBkYXRlIGFyaWEtc2VsZWN0ZWQgaW1tZWRpYXRlbHkgc28gdGhhdCBBVCB0aGluayB0aGUgdGFiIGlzIGFscmVhZHkgc2VsZWN0ZWQuXG5cdFx0XHQvLyBPdGhlcndpc2UgQVQgbWF5IGNvbmZ1c2UgdGhlIHVzZXIgYnkgc3RhdGluZyB0aGF0IHRoZXkgbmVlZCB0byBhY3RpdmF0ZSB0aGUgdGFiLFxuXHRcdFx0Ly8gYnV0IHRoZSB0YWIgd2lsbCBhbHJlYWR5IGJlIGFjdGl2YXRlZCBieSB0aGUgdGltZSB0aGUgYW5ub3VuY2VtZW50IGZpbmlzaGVzLlxuXHRcdFx0Zm9jdXNlZFRhYi5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJmYWxzZVwiICk7XG5cdFx0XHR0aGlzLnRhYnMuZXEoIHNlbGVjdGVkSW5kZXggKS5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJ0cnVlXCIgKTtcblxuXHRcdFx0dGhpcy5hY3RpdmF0aW5nID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMub3B0aW9uKCBcImFjdGl2ZVwiLCBzZWxlY3RlZEluZGV4ICk7XG5cdFx0XHR9LCB0aGlzLmRlbGF5ICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9wYW5lbEtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoIHRoaXMuX2hhbmRsZVBhZ2VOYXYoIGV2ZW50ICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ3RybCt1cCBtb3ZlcyBmb2N1cyB0byB0aGUgY3VycmVudCB0YWJcblx0XHRpZiAoIGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlVQICkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMuYWN0aXZlLmZvY3VzKCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIEFsdCtwYWdlIHVwL2Rvd24gbW92ZXMgZm9jdXMgdG8gdGhlIHByZXZpb3VzL25leHQgdGFiIChhbmQgYWN0aXZhdGVzKVxuXHRfaGFuZGxlUGFnZU5hdjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdGlmICggZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5QQUdFX1VQICkge1xuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZvY3VzTmV4dFRhYiggdGhpcy5vcHRpb25zLmFjdGl2ZSAtIDEsIGZhbHNlICkgKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRpZiAoIGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuUEFHRV9ET1dOICkge1xuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZvY3VzTmV4dFRhYiggdGhpcy5vcHRpb25zLmFjdGl2ZSArIDEsIHRydWUgKSApO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9LFxuXG5cdF9maW5kTmV4dFRhYjogZnVuY3Rpb24oIGluZGV4LCBnb2luZ0ZvcndhcmQgKSB7XG5cdFx0dmFyIGxhc3RUYWJJbmRleCA9IHRoaXMudGFicy5sZW5ndGggLSAxO1xuXG5cdFx0ZnVuY3Rpb24gY29uc3RyYWluKCkge1xuXHRcdFx0aWYgKCBpbmRleCA+IGxhc3RUYWJJbmRleCApIHtcblx0XHRcdFx0aW5kZXggPSAwO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBpbmRleCA8IDAgKSB7XG5cdFx0XHRcdGluZGV4ID0gbGFzdFRhYkluZGV4O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGluZGV4O1xuXHRcdH1cblxuXHRcdHdoaWxlICggJC5pbkFycmF5KCBjb25zdHJhaW4oKSwgdGhpcy5vcHRpb25zLmRpc2FibGVkICkgIT09IC0xICkge1xuXHRcdFx0aW5kZXggPSBnb2luZ0ZvcndhcmQgPyBpbmRleCArIDEgOiBpbmRleCAtIDE7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGluZGV4O1xuXHR9LFxuXG5cdF9mb2N1c05leHRUYWI6IGZ1bmN0aW9uKCBpbmRleCwgZ29pbmdGb3J3YXJkICkge1xuXHRcdGluZGV4ID0gdGhpcy5fZmluZE5leHRUYWIoIGluZGV4LCBnb2luZ0ZvcndhcmQgKTtcblx0XHR0aGlzLnRhYnMuZXEoIGluZGV4ICkuZm9jdXMoKTtcblx0XHRyZXR1cm4gaW5kZXg7XG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0aWYgKCBrZXkgPT09IFwiYWN0aXZlXCIgKSB7XG5cdFx0XHQvLyBfYWN0aXZhdGUoKSB3aWxsIGhhbmRsZSBpbnZhbGlkIHZhbHVlcyBhbmQgdXBkYXRlIHRoaXMub3B0aW9uc1xuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHZhbHVlICk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiApIHtcblx0XHRcdC8vIGRvbid0IHVzZSB0aGUgd2lkZ2V0IGZhY3RvcnkncyBkaXNhYmxlZCBoYW5kbGluZ1xuXHRcdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggdmFsdWUgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSk7XG5cblx0XHRpZiAoIGtleSA9PT0gXCJjb2xsYXBzaWJsZVwiICkge1xuXHRcdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLXRhYnMtY29sbGFwc2libGVcIiwgdmFsdWUgKTtcblx0XHRcdC8vIFNldHRpbmcgY29sbGFwc2libGU6IGZhbHNlIHdoaWxlIGNvbGxhcHNlZDsgb3BlbiBmaXJzdCBwYW5lbFxuXHRcdFx0aWYgKCAhdmFsdWUgJiYgdGhpcy5vcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCAwICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgPT09IFwiZXZlbnRcIiApIHtcblx0XHRcdHRoaXMuX3NldHVwRXZlbnRzKCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICgga2V5ID09PSBcImhlaWdodFN0eWxlXCIgKSB7XG5cdFx0XHR0aGlzLl9zZXR1cEhlaWdodFN0eWxlKCB2YWx1ZSApO1xuXHRcdH1cblx0fSxcblxuXHRfc2FuaXRpemVTZWxlY3RvcjogZnVuY3Rpb24oIGhhc2ggKSB7XG5cdFx0cmV0dXJuIGhhc2ggPyBoYXNoLnJlcGxhY2UoIC9bIVwiJCUmJygpKissLlxcLzo7PD0+P0BcXFtcXF1cXF5ge3x9fl0vZywgXCJcXFxcJCZcIiApIDogXCJcIjtcblx0fSxcblxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0XHRcdGxpcyA9IHRoaXMudGFibGlzdC5jaGlsZHJlbiggXCI6aGFzKGFbaHJlZl0pXCIgKTtcblxuXHRcdC8vIGdldCBkaXNhYmxlZCB0YWJzIGZyb20gY2xhc3MgYXR0cmlidXRlIGZyb20gSFRNTFxuXHRcdC8vIHRoaXMgd2lsbCBnZXQgY29udmVydGVkIHRvIGEgYm9vbGVhbiBpZiBuZWVkZWQgaW4gX3JlZnJlc2goKVxuXHRcdG9wdGlvbnMuZGlzYWJsZWQgPSAkLm1hcCggbGlzLmZpbHRlciggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApLCBmdW5jdGlvbiggdGFiICkge1xuXHRcdFx0cmV0dXJuIGxpcy5pbmRleCggdGFiICk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLl9wcm9jZXNzVGFicygpO1xuXG5cdFx0Ly8gd2FzIGNvbGxhcHNlZCBvciBubyB0YWJzXG5cdFx0aWYgKCBvcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgfHwgIXRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XG5cdFx0XHRvcHRpb25zLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0dGhpcy5hY3RpdmUgPSAkKCk7XG5cdFx0Ly8gd2FzIGFjdGl2ZSwgYnV0IGFjdGl2ZSB0YWIgaXMgZ29uZVxuXHRcdH0gZWxzZSBpZiAoIHRoaXMuYWN0aXZlLmxlbmd0aCAmJiAhJC5jb250YWlucyggdGhpcy50YWJsaXN0WyAwIF0sIHRoaXMuYWN0aXZlWyAwIF0gKSApIHtcblx0XHRcdC8vIGFsbCByZW1haW5pbmcgdGFicyBhcmUgZGlzYWJsZWRcblx0XHRcdGlmICggdGhpcy50YWJzLmxlbmd0aCA9PT0gb3B0aW9ucy5kaXNhYmxlZC5sZW5ndGggKSB7XG5cdFx0XHRcdG9wdGlvbnMuYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xuXHRcdFx0Ly8gYWN0aXZhdGUgcHJldmlvdXMgdGFiXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZmluZE5leHRUYWIoIE1hdGgubWF4KCAwLCBvcHRpb25zLmFjdGl2ZSAtIDEgKSwgZmFsc2UgKSApO1xuXHRcdFx0fVxuXHRcdC8vIHdhcyBhY3RpdmUsIGFjdGl2ZSB0YWIgc3RpbGwgZXhpc3RzXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIG1ha2Ugc3VyZSBhY3RpdmUgaW5kZXggaXMgY29ycmVjdFxuXHRcdFx0b3B0aW9ucy5hY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMuYWN0aXZlICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xuXHR9LFxuXG5cdF9yZWZyZXNoOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKTtcblx0XHR0aGlzLl9zZXR1cEV2ZW50cyggdGhpcy5vcHRpb25zLmV2ZW50ICk7XG5cdFx0dGhpcy5fc2V0dXBIZWlnaHRTdHlsZSggdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlICk7XG5cblx0XHR0aGlzLnRhYnMubm90KCB0aGlzLmFjdGl2ZSApLmF0dHIoe1xuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwiZmFsc2VcIixcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXG5cdFx0XHR0YWJJbmRleDogLTFcblx0XHR9KTtcblx0XHR0aGlzLnBhbmVscy5ub3QoIHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApIClcblx0XHRcdC5oaWRlKClcblx0XHRcdC5hdHRyKHtcblx0XHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcInRydWVcIlxuXHRcdFx0fSk7XG5cblx0XHQvLyBNYWtlIHN1cmUgb25lIHRhYiBpcyBpbiB0aGUgdGFiIG9yZGVyXG5cdFx0aWYgKCAhdGhpcy5hY3RpdmUubGVuZ3RoICkge1xuXHRcdFx0dGhpcy50YWJzLmVxKCAwICkuYXR0ciggXCJ0YWJJbmRleFwiLCAwICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuYWN0aXZlXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApXG5cdFx0XHRcdC5hdHRyKHtcblx0XHRcdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJ0cnVlXCIsXG5cdFx0XHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxuXHRcdFx0XHRcdHRhYkluZGV4OiAwXG5cdFx0XHRcdH0pO1xuXHRcdFx0dGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlIClcblx0XHRcdFx0LnNob3coKVxuXHRcdFx0XHQuYXR0cih7XG5cdFx0XHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcImZhbHNlXCJcblx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cdF9wcm9jZXNzVGFiczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0cHJldlRhYnMgPSB0aGlzLnRhYnMsXG5cdFx0XHRwcmV2QW5jaG9ycyA9IHRoaXMuYW5jaG9ycyxcblx0XHRcdHByZXZQYW5lbHMgPSB0aGlzLnBhbmVscztcblxuXHRcdHRoaXMudGFibGlzdCA9IHRoaXMuX2dldExpc3QoKVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtbmF2IHVpLWhlbHBlci1yZXNldCB1aS1oZWxwZXItY2xlYXJmaXggdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsXCIgKVxuXHRcdFx0LmF0dHIoIFwicm9sZVwiLCBcInRhYmxpc3RcIiApXG5cblx0XHRcdC8vIFByZXZlbnQgdXNlcnMgZnJvbSBmb2N1c2luZyBkaXNhYmxlZCB0YWJzIHZpYSBjbGlja1xuXHRcdFx0LmRlbGVnYXRlKCBcIj4gbGlcIiwgXCJtb3VzZWRvd25cIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0aWYgKCAkKCB0aGlzICkuaXMoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXG5cdFx0XHQvLyBzdXBwb3J0OiBJRSA8OVxuXHRcdFx0Ly8gUHJldmVudGluZyB0aGUgZGVmYXVsdCBhY3Rpb24gaW4gbW91c2Vkb3duIGRvZXNuJ3QgcHJldmVudCBJRVxuXHRcdFx0Ly8gZnJvbSBmb2N1c2luZyB0aGUgZWxlbWVudCwgc28gaWYgdGhlIGFuY2hvciBnZXRzIGZvY3VzZWQsIGJsdXIuXG5cdFx0XHQvLyBXZSBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IGZvY3VzaW5nIHRoZSBwcmV2aW91c2x5IGZvY3VzZWRcblx0XHRcdC8vIGVsZW1lbnQgc2luY2UgY2xpY2tpbmcgb24gYSBub24tZm9jdXNhYmxlIGVsZW1lbnQgc2hvdWxkIGZvY3VzXG5cdFx0XHQvLyB0aGUgYm9keSBhbnl3YXkuXG5cdFx0XHQuZGVsZWdhdGUoIFwiLnVpLXRhYnMtYW5jaG9yXCIsIFwiZm9jdXNcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5jbG9zZXN0KCBcImxpXCIgKS5pcyggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdHRoaXMudGFicyA9IHRoaXMudGFibGlzdC5maW5kKCBcIj4gbGk6aGFzKGFbaHJlZl0pXCIgKVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcFwiIClcblx0XHRcdC5hdHRyKHtcblx0XHRcdFx0cm9sZTogXCJ0YWJcIixcblx0XHRcdFx0dGFiSW5kZXg6IC0xXG5cdFx0XHR9KTtcblxuXHRcdHRoaXMuYW5jaG9ycyA9IHRoaXMudGFicy5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAkKCBcImFcIiwgdGhpcyApWyAwIF07XG5cdFx0XHR9KVxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtYW5jaG9yXCIgKVxuXHRcdFx0LmF0dHIoe1xuXHRcdFx0XHRyb2xlOiBcInByZXNlbnRhdGlvblwiLFxuXHRcdFx0XHR0YWJJbmRleDogLTFcblx0XHRcdH0pO1xuXG5cdFx0dGhpcy5wYW5lbHMgPSAkKCk7XG5cblx0XHR0aGlzLmFuY2hvcnMuZWFjaChmdW5jdGlvbiggaSwgYW5jaG9yICkge1xuXHRcdFx0dmFyIHNlbGVjdG9yLCBwYW5lbCwgcGFuZWxJZCxcblx0XHRcdFx0YW5jaG9ySWQgPSAkKCBhbmNob3IgKS51bmlxdWVJZCgpLmF0dHIoIFwiaWRcIiApLFxuXHRcdFx0XHR0YWIgPSAkKCBhbmNob3IgKS5jbG9zZXN0KCBcImxpXCIgKSxcblx0XHRcdFx0b3JpZ2luYWxBcmlhQ29udHJvbHMgPSB0YWIuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKTtcblxuXHRcdFx0Ly8gaW5saW5lIHRhYlxuXHRcdFx0aWYgKCB0aGF0Ll9pc0xvY2FsKCBhbmNob3IgKSApIHtcblx0XHRcdFx0c2VsZWN0b3IgPSBhbmNob3IuaGFzaDtcblx0XHRcdFx0cGFuZWxJZCA9IHNlbGVjdG9yLnN1YnN0cmluZyggMSApO1xuXHRcdFx0XHRwYW5lbCA9IHRoYXQuZWxlbWVudC5maW5kKCB0aGF0Ll9zYW5pdGl6ZVNlbGVjdG9yKCBzZWxlY3RvciApICk7XG5cdFx0XHQvLyByZW1vdGUgdGFiXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBJZiB0aGUgdGFiIGRvZXNuJ3QgYWxyZWFkeSBoYXZlIGFyaWEtY29udHJvbHMsXG5cdFx0XHRcdC8vIGdlbmVyYXRlIGFuIGlkIGJ5IHVzaW5nIGEgdGhyb3ctYXdheSBlbGVtZW50XG5cdFx0XHRcdHBhbmVsSWQgPSB0YWIuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKSB8fCAkKCB7fSApLnVuaXF1ZUlkKClbIDAgXS5pZDtcblx0XHRcdFx0c2VsZWN0b3IgPSBcIiNcIiArIHBhbmVsSWQ7XG5cdFx0XHRcdHBhbmVsID0gdGhhdC5lbGVtZW50LmZpbmQoIHNlbGVjdG9yICk7XG5cdFx0XHRcdGlmICggIXBhbmVsLmxlbmd0aCApIHtcblx0XHRcdFx0XHRwYW5lbCA9IHRoYXQuX2NyZWF0ZVBhbmVsKCBwYW5lbElkICk7XG5cdFx0XHRcdFx0cGFuZWwuaW5zZXJ0QWZ0ZXIoIHRoYXQucGFuZWxzWyBpIC0gMSBdIHx8IHRoYXQudGFibGlzdCApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1saXZlXCIsIFwicG9saXRlXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBwYW5lbC5sZW5ndGgpIHtcblx0XHRcdFx0dGhhdC5wYW5lbHMgPSB0aGF0LnBhbmVscy5hZGQoIHBhbmVsICk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIG9yaWdpbmFsQXJpYUNvbnRyb2xzICkge1xuXHRcdFx0XHR0YWIuZGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiwgb3JpZ2luYWxBcmlhQ29udHJvbHMgKTtcblx0XHRcdH1cblx0XHRcdHRhYi5hdHRyKHtcblx0XHRcdFx0XCJhcmlhLWNvbnRyb2xzXCI6IHBhbmVsSWQsXG5cdFx0XHRcdFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGFuY2hvcklkXG5cdFx0XHR9KTtcblx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGFuY2hvcklkICk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLnBhbmVsc1xuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbVwiIClcblx0XHRcdC5hdHRyKCBcInJvbGVcIiwgXCJ0YWJwYW5lbFwiICk7XG5cblx0XHQvLyBBdm9pZCBtZW1vcnkgbGVha3MgKCMxMDA1Nilcblx0XHRpZiAoIHByZXZUYWJzICkge1xuXHRcdFx0dGhpcy5fb2ZmKCBwcmV2VGFicy5ub3QoIHRoaXMudGFicyApICk7XG5cdFx0XHR0aGlzLl9vZmYoIHByZXZBbmNob3JzLm5vdCggdGhpcy5hbmNob3JzICkgKTtcblx0XHRcdHRoaXMuX29mZiggcHJldlBhbmVscy5ub3QoIHRoaXMucGFuZWxzICkgKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gYWxsb3cgb3ZlcnJpZGluZyBob3cgdG8gZmluZCB0aGUgbGlzdCBmb3IgcmFyZSB1c2FnZSBzY2VuYXJpb3MgKCM3NzE1KVxuXHRfZ2V0TGlzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudGFibGlzdCB8fCB0aGlzLmVsZW1lbnQuZmluZCggXCJvbCx1bFwiICkuZXEoIDAgKTtcblx0fSxcblxuXHRfY3JlYXRlUGFuZWw6IGZ1bmN0aW9uKCBpZCApIHtcblx0XHRyZXR1cm4gJCggXCI8ZGl2PlwiIClcblx0XHRcdC5hdHRyKCBcImlkXCIsIGlkIClcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIiApXG5cdFx0XHQuZGF0YSggXCJ1aS10YWJzLWRlc3Ryb3lcIiwgdHJ1ZSApO1xuXHR9LFxuXG5cdF9zZXR1cERpc2FibGVkOiBmdW5jdGlvbiggZGlzYWJsZWQgKSB7XG5cdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XG5cdFx0XHRpZiAoICFkaXNhYmxlZC5sZW5ndGggKSB7XG5cdFx0XHRcdGRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCBkaXNhYmxlZC5sZW5ndGggPT09IHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XG5cdFx0XHRcdGRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBkaXNhYmxlIHRhYnNcblx0XHRmb3IgKCB2YXIgaSA9IDAsIGxpOyAoIGxpID0gdGhpcy50YWJzWyBpIF0gKTsgaSsrICkge1xuXHRcdFx0aWYgKCBkaXNhYmxlZCA9PT0gdHJ1ZSB8fCAkLmluQXJyYXkoIGksIGRpc2FibGVkICkgIT09IC0xICkge1xuXHRcdFx0XHQkKCBsaSApXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKVxuXHRcdFx0XHRcdC5hdHRyKCBcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoIGxpIClcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gZGlzYWJsZWQ7XG5cdH0sXG5cblx0X3NldHVwRXZlbnRzOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIGV2ZW50cyA9IHt9O1xuXHRcdGlmICggZXZlbnQgKSB7XG5cdFx0XHQkLmVhY2goIGV2ZW50LnNwbGl0KFwiIFwiKSwgZnVuY3Rpb24oIGluZGV4LCBldmVudE5hbWUgKSB7XG5cdFx0XHRcdGV2ZW50c1sgZXZlbnROYW1lIF0gPSBcIl9ldmVudEhhbmRsZXJcIjtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuX29mZiggdGhpcy5hbmNob3JzLmFkZCggdGhpcy50YWJzICkuYWRkKCB0aGlzLnBhbmVscyApICk7XG5cdFx0Ly8gQWx3YXlzIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uLCBldmVuIHdoZW4gZGlzYWJsZWRcblx0XHR0aGlzLl9vbiggdHJ1ZSwgdGhpcy5hbmNob3JzLCB7XG5cdFx0XHRjbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHRoaXMuX29uKCB0aGlzLmFuY2hvcnMsIGV2ZW50cyApO1xuXHRcdHRoaXMuX29uKCB0aGlzLnRhYnMsIHsga2V5ZG93bjogXCJfdGFiS2V5ZG93blwiIH0gKTtcblx0XHR0aGlzLl9vbiggdGhpcy5wYW5lbHMsIHsga2V5ZG93bjogXCJfcGFuZWxLZXlkb3duXCIgfSApO1xuXG5cdFx0dGhpcy5fZm9jdXNhYmxlKCB0aGlzLnRhYnMgKTtcblx0XHR0aGlzLl9ob3ZlcmFibGUoIHRoaXMudGFicyApO1xuXHR9LFxuXG5cdF9zZXR1cEhlaWdodFN0eWxlOiBmdW5jdGlvbiggaGVpZ2h0U3R5bGUgKSB7XG5cdFx0dmFyIG1heEhlaWdodCxcblx0XHRcdHBhcmVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnQoKTtcblxuXHRcdGlmICggaGVpZ2h0U3R5bGUgPT09IFwiZmlsbFwiICkge1xuXHRcdFx0bWF4SGVpZ2h0ID0gcGFyZW50LmhlaWdodCgpO1xuXHRcdFx0bWF4SGVpZ2h0IC09IHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpIC0gdGhpcy5lbGVtZW50LmhlaWdodCgpO1xuXG5cdFx0XHR0aGlzLmVsZW1lbnQuc2libGluZ3MoIFwiOnZpc2libGVcIiApLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdHBvc2l0aW9uID0gZWxlbS5jc3MoIFwicG9zaXRpb25cIiApO1xuXG5cdFx0XHRcdGlmICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRtYXhIZWlnaHQgLT0gZWxlbS5vdXRlckhlaWdodCggdHJ1ZSApO1xuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLm5vdCggdGhpcy5wYW5lbHMgKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRtYXhIZWlnaHQgLT0gJCggdGhpcyApLm91dGVySGVpZ2h0KCB0cnVlICk7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0JCggdGhpcyApLmhlaWdodCggTWF0aC5tYXgoIDAsIG1heEhlaWdodCAtXG5cdFx0XHRcdFx0JCggdGhpcyApLmlubmVySGVpZ2h0KCkgKyAkKCB0aGlzICkuaGVpZ2h0KCkgKSApO1xuXHRcdFx0fSlcblx0XHRcdC5jc3MoIFwib3ZlcmZsb3dcIiwgXCJhdXRvXCIgKTtcblx0XHR9IGVsc2UgaWYgKCBoZWlnaHRTdHlsZSA9PT0gXCJhdXRvXCIgKSB7XG5cdFx0XHRtYXhIZWlnaHQgPSAwO1xuXHRcdFx0dGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0bWF4SGVpZ2h0ID0gTWF0aC5tYXgoIG1heEhlaWdodCwgJCggdGhpcyApLmhlaWdodCggXCJcIiApLmhlaWdodCgpICk7XG5cdFx0XHR9KS5oZWlnaHQoIG1heEhlaWdodCApO1xuXHRcdH1cblx0fSxcblxuXHRfZXZlbnRIYW5kbGVyOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRhY3RpdmUgPSB0aGlzLmFjdGl2ZSxcblx0XHRcdGFuY2hvciA9ICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKSxcblx0XHRcdHRhYiA9IGFuY2hvci5jbG9zZXN0KCBcImxpXCIgKSxcblx0XHRcdGNsaWNrZWRJc0FjdGl2ZSA9IHRhYlsgMCBdID09PSBhY3RpdmVbIDAgXSxcblx0XHRcdGNvbGxhcHNpbmcgPSBjbGlja2VkSXNBY3RpdmUgJiYgb3B0aW9ucy5jb2xsYXBzaWJsZSxcblx0XHRcdHRvU2hvdyA9IGNvbGxhcHNpbmcgPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICksXG5cdFx0XHR0b0hpZGUgPSAhYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCBhY3RpdmUgKSxcblx0XHRcdGV2ZW50RGF0YSA9IHtcblx0XHRcdFx0b2xkVGFiOiBhY3RpdmUsXG5cdFx0XHRcdG9sZFBhbmVsOiB0b0hpZGUsXG5cdFx0XHRcdG5ld1RhYjogY29sbGFwc2luZyA/ICQoKSA6IHRhYixcblx0XHRcdFx0bmV3UGFuZWw6IHRvU2hvd1xuXHRcdFx0fTtcblxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRpZiAoIHRhYi5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgfHxcblx0XHRcdFx0Ly8gdGFiIGlzIGFscmVhZHkgbG9hZGluZ1xuXHRcdFx0XHR0YWIuaGFzQ2xhc3MoIFwidWktdGFicy1sb2FkaW5nXCIgKSB8fFxuXHRcdFx0XHQvLyBjYW4ndCBzd2l0Y2ggZHVybmluZyBhbiBhbmltYXRpb25cblx0XHRcdFx0dGhpcy5ydW5uaW5nIHx8XG5cdFx0XHRcdC8vIGNsaWNrIG9uIGFjdGl2ZSBoZWFkZXIsIGJ1dCBub3QgY29sbGFwc2libGVcblx0XHRcdFx0KCBjbGlja2VkSXNBY3RpdmUgJiYgIW9wdGlvbnMuY29sbGFwc2libGUgKSB8fFxuXHRcdFx0XHQvLyBhbGxvdyBjYW5jZWxpbmcgYWN0aXZhdGlvblxuXHRcdFx0XHQoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlQWN0aXZhdGVcIiwgZXZlbnQsIGV2ZW50RGF0YSApID09PSBmYWxzZSApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG9wdGlvbnMuYWN0aXZlID0gY29sbGFwc2luZyA/IGZhbHNlIDogdGhpcy50YWJzLmluZGV4KCB0YWIgKTtcblxuXHRcdHRoaXMuYWN0aXZlID0gY2xpY2tlZElzQWN0aXZlID8gJCgpIDogdGFiO1xuXHRcdGlmICggdGhpcy54aHIgKSB7XG5cdFx0XHR0aGlzLnhoci5hYm9ydCgpO1xuXHRcdH1cblxuXHRcdGlmICggIXRvSGlkZS5sZW5ndGggJiYgIXRvU2hvdy5sZW5ndGggKSB7XG5cdFx0XHQkLmVycm9yKCBcImpRdWVyeSBVSSBUYWJzOiBNaXNtYXRjaGluZyBmcmFnbWVudCBpZGVudGlmaWVyLlwiICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0b1Nob3cubGVuZ3RoICkge1xuXHRcdFx0dGhpcy5sb2FkKCB0aGlzLnRhYnMuaW5kZXgoIHRhYiApLCBldmVudCApO1xuXHRcdH1cblx0XHR0aGlzLl90b2dnbGUoIGV2ZW50LCBldmVudERhdGEgKTtcblx0fSxcblxuXHQvLyBoYW5kbGVzIHNob3cvaGlkZSBmb3Igc2VsZWN0aW5nIHRhYnNcblx0X3RvZ2dsZTogZnVuY3Rpb24oIGV2ZW50LCBldmVudERhdGEgKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0dG9TaG93ID0gZXZlbnREYXRhLm5ld1BhbmVsLFxuXHRcdFx0dG9IaWRlID0gZXZlbnREYXRhLm9sZFBhbmVsO1xuXG5cdFx0dGhpcy5ydW5uaW5nID0gdHJ1ZTtcblxuXHRcdGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuXHRcdFx0dGhhdC5ydW5uaW5nID0gZmFsc2U7XG5cdFx0XHR0aGF0Ll90cmlnZ2VyKCBcImFjdGl2YXRlXCIsIGV2ZW50LCBldmVudERhdGEgKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzaG93KCkge1xuXHRcdFx0ZXZlbnREYXRhLm5ld1RhYi5jbG9zZXN0KCBcImxpXCIgKS5hZGRDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXG5cdFx0XHRpZiAoIHRvU2hvdy5sZW5ndGggJiYgdGhhdC5vcHRpb25zLnNob3cgKSB7XG5cdFx0XHRcdHRoYXQuX3Nob3coIHRvU2hvdywgdGhhdC5vcHRpb25zLnNob3csIGNvbXBsZXRlICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0b1Nob3cuc2hvdygpO1xuXHRcdFx0XHRjb21wbGV0ZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIHN0YXJ0IG91dCBieSBoaWRpbmcsIHRoZW4gc2hvd2luZywgdGhlbiBjb21wbGV0aW5nXG5cdFx0aWYgKCB0b0hpZGUubGVuZ3RoICYmIHRoaXMub3B0aW9ucy5oaWRlICkge1xuXHRcdFx0dGhpcy5faGlkZSggdG9IaWRlLCB0aGlzLm9wdGlvbnMuaGlkZSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggXCJsaVwiICkucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKTtcblx0XHRcdFx0c2hvdygpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggXCJsaVwiICkucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKTtcblx0XHRcdHRvSGlkZS5oaWRlKCk7XG5cdFx0XHRzaG93KCk7XG5cdFx0fVxuXG5cdFx0dG9IaWRlLmF0dHIoIFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIgKTtcblx0XHRldmVudERhdGEub2xkVGFiLmF0dHIoe1xuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwiZmFsc2VcIixcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCJcblx0XHR9KTtcblx0XHQvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgdGFicywgcmVtb3ZlIHRoZSBvbGQgdGFiIGZyb20gdGhlIHRhYiBvcmRlci5cblx0XHQvLyBJZiB3ZSdyZSBvcGVuaW5nIGZyb20gY29sbGFwc2VkIHN0YXRlLCByZW1vdmUgdGhlIHByZXZpb3VzIHRhYiBmcm9tIHRoZSB0YWIgb3JkZXIuXG5cdFx0Ly8gSWYgd2UncmUgY29sbGFwc2luZywgdGhlbiBrZWVwIHRoZSBjb2xsYXBzaW5nIHRhYiBpbiB0aGUgdGFiIG9yZGVyLlxuXHRcdGlmICggdG9TaG93Lmxlbmd0aCAmJiB0b0hpZGUubGVuZ3RoICkge1xuXHRcdFx0ZXZlbnREYXRhLm9sZFRhYi5hdHRyKCBcInRhYkluZGV4XCIsIC0xICk7XG5cdFx0fSBlbHNlIGlmICggdG9TaG93Lmxlbmd0aCApIHtcblx0XHRcdHRoaXMudGFicy5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAkKCB0aGlzICkuYXR0ciggXCJ0YWJJbmRleFwiICkgPT09IDA7XG5cdFx0XHR9KVxuXHRcdFx0LmF0dHIoIFwidGFiSW5kZXhcIiwgLTEgKTtcblx0XHR9XG5cblx0XHR0b1Nob3cuYXR0ciggXCJhcmlhLWhpZGRlblwiLCBcImZhbHNlXCIgKTtcblx0XHRldmVudERhdGEubmV3VGFiLmF0dHIoe1xuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwidHJ1ZVwiLFxuXHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxuXHRcdFx0dGFiSW5kZXg6IDBcblx0XHR9KTtcblx0fSxcblxuXHRfYWN0aXZhdGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHR2YXIgYW5jaG9yLFxuXHRcdFx0YWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggaW5kZXggKTtcblxuXHRcdC8vIHRyeWluZyB0byBhY3RpdmF0ZSB0aGUgYWxyZWFkeSBhY3RpdmUgcGFuZWxcblx0XHRpZiAoIGFjdGl2ZVsgMCBdID09PSB0aGlzLmFjdGl2ZVsgMCBdICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIHRyeWluZyB0byBjb2xsYXBzZSwgc2ltdWxhdGUgYSBjbGljayBvbiB0aGUgY3VycmVudCBhY3RpdmUgaGVhZGVyXG5cdFx0aWYgKCAhYWN0aXZlLmxlbmd0aCApIHtcblx0XHRcdGFjdGl2ZSA9IHRoaXMuYWN0aXZlO1xuXHRcdH1cblxuXHRcdGFuY2hvciA9IGFjdGl2ZS5maW5kKCBcIi51aS10YWJzLWFuY2hvclwiIClbIDAgXTtcblx0XHR0aGlzLl9ldmVudEhhbmRsZXIoe1xuXHRcdFx0dGFyZ2V0OiBhbmNob3IsXG5cdFx0XHRjdXJyZW50VGFyZ2V0OiBhbmNob3IsXG5cdFx0XHRwcmV2ZW50RGVmYXVsdDogJC5ub29wXG5cdFx0fSk7XG5cdH0sXG5cblx0X2ZpbmRBY3RpdmU6IGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRyZXR1cm4gaW5kZXggPT09IGZhbHNlID8gJCgpIDogdGhpcy50YWJzLmVxKCBpbmRleCApO1xuXHR9LFxuXG5cdF9nZXRJbmRleDogZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdC8vIG1ldGEtZnVuY3Rpb24gdG8gZ2l2ZSB1c2VycyBvcHRpb24gdG8gcHJvdmlkZSBhIGhyZWYgc3RyaW5nIGluc3RlYWQgb2YgYSBudW1lcmljYWwgaW5kZXguXG5cdFx0aWYgKCB0eXBlb2YgaW5kZXggPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRpbmRleCA9IHRoaXMuYW5jaG9ycy5pbmRleCggdGhpcy5hbmNob3JzLmZpbHRlciggXCJbaHJlZiQ9J1wiICsgaW5kZXggKyBcIiddXCIgKSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBpbmRleDtcblx0fSxcblxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCB0aGlzLnhociApIHtcblx0XHRcdHRoaXMueGhyLmFib3J0KCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXRhYnMgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwgdWktdGFicy1jb2xsYXBzaWJsZVwiICk7XG5cblx0XHR0aGlzLnRhYmxpc3Rcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbFwiIClcblx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApO1xuXG5cdFx0dGhpcy5hbmNob3JzXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1hbmNob3JcIiApXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKVxuXHRcdFx0LnJlbW92ZUF0dHIoIFwidGFiSW5kZXhcIiApXG5cdFx0XHQucmVtb3ZlVW5pcXVlSWQoKTtcblxuXHRcdHRoaXMudGFibGlzdC51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKTtcblxuXHRcdHRoaXMudGFicy5hZGQoIHRoaXMucGFuZWxzICkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmICggJC5kYXRhKCB0aGlzLCBcInVpLXRhYnMtZGVzdHJveVwiICkgKSB7XG5cdFx0XHRcdCQoIHRoaXMgKS5yZW1vdmUoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoIHRoaXMgKVxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLXN0YXRlLWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCBcIiArXG5cdFx0XHRcdFx0XHRcInVpLWNvcm5lci10b3AgdWktY29ybmVyLWJvdHRvbSB1aS13aWRnZXQtY29udGVudCB1aS10YWJzLWFjdGl2ZSB1aS10YWJzLXBhbmVsXCIgKVxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcInRhYkluZGV4XCIgKVxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtbGl2ZVwiIClcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWJ1c3lcIiApXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiIClcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWxhYmVsbGVkYnlcIiApXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1oaWRkZW5cIiApXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1leHBhbmRlZFwiIClcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMudGFicy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGxpID0gJCggdGhpcyApLFxuXHRcdFx0XHRwcmV2ID0gbGkuZGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiApO1xuXHRcdFx0aWYgKCBwcmV2ICkge1xuXHRcdFx0XHRsaVxuXHRcdFx0XHRcdC5hdHRyKCBcImFyaWEtY29udHJvbHNcIiwgcHJldiApXG5cdFx0XHRcdFx0LnJlbW92ZURhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxpLnJlbW92ZUF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLnBhbmVscy5zaG93KCk7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSAhPT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHR0aGlzLnBhbmVscy5jc3MoIFwiaGVpZ2h0XCIsIFwiXCIgKTtcblx0XHR9XG5cdH0sXG5cblx0ZW5hYmxlOiBmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0dmFyIGRpc2FibGVkID0gdGhpcy5vcHRpb25zLmRpc2FibGVkO1xuXHRcdGlmICggZGlzYWJsZWQgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggaW5kZXggPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGRpc2FibGVkID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7XG5cdFx0XHRpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHtcblx0XHRcdFx0ZGlzYWJsZWQgPSAkLm1hcCggZGlzYWJsZWQsIGZ1bmN0aW9uKCBudW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG51bSAhPT0gaW5kZXggPyBudW0gOiBudWxsO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRpc2FibGVkID0gJC5tYXAoIHRoaXMudGFicywgZnVuY3Rpb24oIGxpLCBudW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG51bSAhPT0gaW5kZXggPyBudW0gOiBudWxsO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggZGlzYWJsZWQgKTtcblx0fSxcblxuXHRkaXNhYmxlOiBmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0dmFyIGRpc2FibGVkID0gdGhpcy5vcHRpb25zLmRpc2FibGVkO1xuXHRcdGlmICggZGlzYWJsZWQgPT09IHRydWUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0ZGlzYWJsZWQgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApO1xuXHRcdFx0aWYgKCAkLmluQXJyYXkoIGluZGV4LCBkaXNhYmxlZCApICE9PSAtMSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XG5cdFx0XHRcdGRpc2FibGVkID0gJC5tZXJnZSggWyBpbmRleCBdLCBkaXNhYmxlZCApLnNvcnQoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRpc2FibGVkID0gWyBpbmRleCBdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCBkaXNhYmxlZCApO1xuXHR9LFxuXG5cdGxvYWQ6IGZ1bmN0aW9uKCBpbmRleCwgZXZlbnQgKSB7XG5cdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHR0YWIgPSB0aGlzLnRhYnMuZXEoIGluZGV4ICksXG5cdFx0XHRhbmNob3IgPSB0YWIuZmluZCggXCIudWktdGFicy1hbmNob3JcIiApLFxuXHRcdFx0cGFuZWwgPSB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICksXG5cdFx0XHRldmVudERhdGEgPSB7XG5cdFx0XHRcdHRhYjogdGFiLFxuXHRcdFx0XHRwYW5lbDogcGFuZWxcblx0XHRcdH07XG5cblx0XHQvLyBub3QgcmVtb3RlXG5cdFx0aWYgKCB0aGlzLl9pc0xvY2FsKCBhbmNob3JbIDAgXSApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMueGhyID0gJC5hamF4KCB0aGlzLl9hamF4U2V0dGluZ3MoIGFuY2hvciwgZXZlbnQsIGV2ZW50RGF0YSApICk7XG5cblx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxuXHRcdC8vIGpRdWVyeSA8MS44IHJldHVybnMgZmFsc2UgaWYgdGhlIHJlcXVlc3QgaXMgY2FuY2VsZWQgaW4gYmVmb3JlU2VuZCxcblx0XHQvLyBidXQgYXMgb2YgMS44LCAkLmFqYXgoKSBhbHdheXMgcmV0dXJucyBhIGpxWEhSIG9iamVjdC5cblx0XHRpZiAoIHRoaXMueGhyICYmIHRoaXMueGhyLnN0YXR1c1RleHQgIT09IFwiY2FuY2VsZWRcIiApIHtcblx0XHRcdHRhYi5hZGRDbGFzcyggXCJ1aS10YWJzLWxvYWRpbmdcIiApO1xuXHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWJ1c3lcIiwgXCJ0cnVlXCIgKTtcblxuXHRcdFx0dGhpcy54aHJcblx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oIHJlc3BvbnNlICkge1xuXHRcdFx0XHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XG5cdFx0XHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTE3Nzhcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cGFuZWwuaHRtbCggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHRcdHRoYXQuX3RyaWdnZXIoIFwibG9hZFwiLCBldmVudCwgZXZlbnREYXRhICk7XG5cdFx0XHRcdFx0fSwgMSApO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY29tcGxldGUoZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG5cdFx0XHRcdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcblx0XHRcdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTc3OFxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHR0aGF0LnBhbmVscy5zdG9wKCBmYWxzZSwgdHJ1ZSApO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR0YWIucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1sb2FkaW5nXCIgKTtcblx0XHRcdFx0XHRcdHBhbmVsLnJlbW92ZUF0dHIoIFwiYXJpYS1idXN5XCIgKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBqcVhIUiA9PT0gdGhhdC54aHIgKSB7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSB0aGF0Lnhocjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCAxICk7XG5cdFx0XHRcdH0pO1xuXHRcdH1cblx0fSxcblxuXHRfYWpheFNldHRpbmdzOiBmdW5jdGlvbiggYW5jaG9yLCBldmVudCwgZXZlbnREYXRhICkge1xuXHRcdHZhciB0aGF0ID0gdGhpcztcblx0XHRyZXR1cm4ge1xuXHRcdFx0dXJsOiBhbmNob3IuYXR0ciggXCJocmVmXCIgKSxcblx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCBqcVhIUiwgc2V0dGluZ3MgKSB7XG5cdFx0XHRcdHJldHVybiB0aGF0Ll90cmlnZ2VyKCBcImJlZm9yZUxvYWRcIiwgZXZlbnQsXG5cdFx0XHRcdFx0JC5leHRlbmQoIHsganFYSFI6IGpxWEhSLCBhamF4U2V0dGluZ3M6IHNldHRpbmdzIH0sIGV2ZW50RGF0YSApICk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fSxcblxuXHRfZ2V0UGFuZWxGb3JUYWI6IGZ1bmN0aW9uKCB0YWIgKSB7XG5cdFx0dmFyIGlkID0gJCggdGFiICkuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKTtcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQoIHRoaXMuX3Nhbml0aXplU2VsZWN0b3IoIFwiI1wiICsgaWQgKSApO1xuXHR9XG59KTtcblxuXG4vKiFcbiAqIGpRdWVyeSBVSSBUb29sdGlwIDEuMTEuM1xuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vdG9vbHRpcC9cbiAqL1xuXG5cbnZhciB0b29sdGlwID0gJC53aWRnZXQoIFwidWkudG9vbHRpcFwiLCB7XG5cdHZlcnNpb246IFwiMS4xMS4zXCIsXG5cdG9wdGlvbnM6IHtcblx0XHRjb250ZW50OiBmdW5jdGlvbigpIHtcblx0XHRcdC8vIHN1cHBvcnQ6IElFPDksIE9wZXJhIGluIGpRdWVyeSA8MS43XG5cdFx0XHQvLyAudGV4dCgpIGNhbid0IGFjY2VwdCB1bmRlZmluZWQsIHNvIGNvZXJjZSB0byBhIHN0cmluZ1xuXHRcdFx0dmFyIHRpdGxlID0gJCggdGhpcyApLmF0dHIoIFwidGl0bGVcIiApIHx8IFwiXCI7XG5cdFx0XHQvLyBFc2NhcGUgdGl0bGUsIHNpbmNlIHdlJ3JlIGdvaW5nIGZyb20gYW4gYXR0cmlidXRlIHRvIHJhdyBIVE1MXG5cdFx0XHRyZXR1cm4gJCggXCI8YT5cIiApLnRleHQoIHRpdGxlICkuaHRtbCgpO1xuXHRcdH0sXG5cdFx0aGlkZTogdHJ1ZSxcblx0XHQvLyBEaXNhYmxlZCBlbGVtZW50cyBoYXZlIGluY29uc2lzdGVudCBiZWhhdmlvciBhY3Jvc3MgYnJvd3NlcnMgKCM4NjYxKVxuXHRcdGl0ZW1zOiBcIlt0aXRsZV06bm90KFtkaXNhYmxlZF0pXCIsXG5cdFx0cG9zaXRpb246IHtcblx0XHRcdG15OiBcImxlZnQgdG9wKzE1XCIsXG5cdFx0XHRhdDogXCJsZWZ0IGJvdHRvbVwiLFxuXHRcdFx0Y29sbGlzaW9uOiBcImZsaXBmaXQgZmxpcFwiXG5cdFx0fSxcblx0XHRzaG93OiB0cnVlLFxuXHRcdHRvb2x0aXBDbGFzczogbnVsbCxcblx0XHR0cmFjazogZmFsc2UsXG5cblx0XHQvLyBjYWxsYmFja3Ncblx0XHRjbG9zZTogbnVsbCxcblx0XHRvcGVuOiBudWxsXG5cdH0sXG5cblx0X2FkZERlc2NyaWJlZEJ5OiBmdW5jdGlvbiggZWxlbSwgaWQgKSB7XG5cdFx0dmFyIGRlc2NyaWJlZGJ5ID0gKGVsZW0uYXR0ciggXCJhcmlhLWRlc2NyaWJlZGJ5XCIgKSB8fCBcIlwiKS5zcGxpdCggL1xccysvICk7XG5cdFx0ZGVzY3JpYmVkYnkucHVzaCggaWQgKTtcblx0XHRlbGVtXG5cdFx0XHQuZGF0YSggXCJ1aS10b29sdGlwLWlkXCIsIGlkIClcblx0XHRcdC5hdHRyKCBcImFyaWEtZGVzY3JpYmVkYnlcIiwgJC50cmltKCBkZXNjcmliZWRieS5qb2luKCBcIiBcIiApICkgKTtcblx0fSxcblxuXHRfcmVtb3ZlRGVzY3JpYmVkQnk6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBpZCA9IGVsZW0uZGF0YSggXCJ1aS10b29sdGlwLWlkXCIgKSxcblx0XHRcdGRlc2NyaWJlZGJ5ID0gKGVsZW0uYXR0ciggXCJhcmlhLWRlc2NyaWJlZGJ5XCIgKSB8fCBcIlwiKS5zcGxpdCggL1xccysvICksXG5cdFx0XHRpbmRleCA9ICQuaW5BcnJheSggaWQsIGRlc2NyaWJlZGJ5ICk7XG5cblx0XHRpZiAoIGluZGV4ICE9PSAtMSApIHtcblx0XHRcdGRlc2NyaWJlZGJ5LnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHR9XG5cblx0XHRlbGVtLnJlbW92ZURhdGEoIFwidWktdG9vbHRpcC1pZFwiICk7XG5cdFx0ZGVzY3JpYmVkYnkgPSAkLnRyaW0oIGRlc2NyaWJlZGJ5LmpvaW4oIFwiIFwiICkgKTtcblx0XHRpZiAoIGRlc2NyaWJlZGJ5ICkge1xuXHRcdFx0ZWxlbS5hdHRyKCBcImFyaWEtZGVzY3JpYmVkYnlcIiwgZGVzY3JpYmVkYnkgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWxlbS5yZW1vdmVBdHRyKCBcImFyaWEtZGVzY3JpYmVkYnlcIiApO1xuXHRcdH1cblx0fSxcblxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9vbih7XG5cdFx0XHRtb3VzZW92ZXI6IFwib3BlblwiLFxuXHRcdFx0Zm9jdXNpbjogXCJvcGVuXCJcblx0XHR9KTtcblxuXHRcdC8vIElEcyBvZiBnZW5lcmF0ZWQgdG9vbHRpcHMsIG5lZWRlZCBmb3IgZGVzdHJveVxuXHRcdHRoaXMudG9vbHRpcHMgPSB7fTtcblxuXHRcdC8vIElEcyBvZiBwYXJlbnQgdG9vbHRpcHMgd2hlcmUgd2UgcmVtb3ZlZCB0aGUgdGl0bGUgYXR0cmlidXRlXG5cdFx0dGhpcy5wYXJlbnRzID0ge307XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHtcblx0XHRcdHRoaXMuX2Rpc2FibGUoKTtcblx0XHR9XG5cblx0XHQvLyBBcHBlbmQgdGhlIGFyaWEtbGl2ZSByZWdpb24gc28gdG9vbHRpcHMgYW5ub3VuY2UgY29ycmVjdGx5XG5cdFx0dGhpcy5saXZlUmVnaW9uID0gJCggXCI8ZGl2PlwiIClcblx0XHRcdC5hdHRyKHtcblx0XHRcdFx0cm9sZTogXCJsb2dcIixcblx0XHRcdFx0XCJhcmlhLWxpdmVcIjogXCJhc3NlcnRpdmVcIixcblx0XHRcdFx0XCJhcmlhLXJlbGV2YW50XCI6IFwiYWRkaXRpb25zXCJcblx0XHRcdH0pXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlXCIgKVxuXHRcdFx0LmFwcGVuZFRvKCB0aGlzLmRvY3VtZW50WyAwIF0uYm9keSApO1xuXHR9LFxuXG5cdF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHZhciB0aGF0ID0gdGhpcztcblxuXHRcdGlmICgga2V5ID09PSBcImRpc2FibGVkXCIgKSB7XG5cdFx0XHR0aGlzWyB2YWx1ZSA/IFwiX2Rpc2FibGVcIiA6IFwiX2VuYWJsZVwiIF0oKTtcblx0XHRcdHRoaXMub3B0aW9uc1sga2V5IF0gPSB2YWx1ZTtcblx0XHRcdC8vIGRpc2FibGUgZWxlbWVudCBzdHlsZSBjaGFuZ2VzXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcblxuXHRcdGlmICgga2V5ID09PSBcImNvbnRlbnRcIiApIHtcblx0XHRcdCQuZWFjaCggdGhpcy50b29sdGlwcywgZnVuY3Rpb24oIGlkLCB0b29sdGlwRGF0YSApIHtcblx0XHRcdFx0dGhhdC5fdXBkYXRlQ29udGVudCggdG9vbHRpcERhdGEuZWxlbWVudCApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cdF9kaXNhYmxlOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cblx0XHQvLyBjbG9zZSBvcGVuIHRvb2x0aXBzXG5cdFx0JC5lYWNoKCB0aGlzLnRvb2x0aXBzLCBmdW5jdGlvbiggaWQsIHRvb2x0aXBEYXRhICkge1xuXHRcdFx0dmFyIGV2ZW50ID0gJC5FdmVudCggXCJibHVyXCIgKTtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgPSB0b29sdGlwRGF0YS5lbGVtZW50WyAwIF07XG5cdFx0XHR0aGF0LmNsb3NlKCBldmVudCwgdHJ1ZSApO1xuXHRcdH0pO1xuXG5cdFx0Ly8gcmVtb3ZlIHRpdGxlIGF0dHJpYnV0ZXMgdG8gcHJldmVudCBuYXRpdmUgdG9vbHRpcHNcblx0XHR0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zICkuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZWxlbWVudCA9ICQoIHRoaXMgKTtcblx0XHRcdGlmICggZWxlbWVudC5pcyggXCJbdGl0bGVdXCIgKSApIHtcblx0XHRcdFx0ZWxlbWVudFxuXHRcdFx0XHRcdC5kYXRhKCBcInVpLXRvb2x0aXAtdGl0bGVcIiwgZWxlbWVudC5hdHRyKCBcInRpdGxlXCIgKSApXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwidGl0bGVcIiApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdF9lbmFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHJlc3RvcmUgdGl0bGUgYXR0cmlidXRlc1xuXHRcdHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLm9wdGlvbnMuaXRlbXMgKS5hZGRCYWNrKCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBlbGVtZW50ID0gJCggdGhpcyApO1xuXHRcdFx0aWYgKCBlbGVtZW50LmRhdGEoIFwidWktdG9vbHRpcC10aXRsZVwiICkgKSB7XG5cdFx0XHRcdGVsZW1lbnQuYXR0ciggXCJ0aXRsZVwiLCBlbGVtZW50LmRhdGEoIFwidWktdG9vbHRpcC10aXRsZVwiICkgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRvcGVuOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0dGFyZ2V0ID0gJCggZXZlbnQgPyBldmVudC50YXJnZXQgOiB0aGlzLmVsZW1lbnQgKVxuXHRcdFx0XHQvLyB3ZSBuZWVkIGNsb3Nlc3QgaGVyZSBkdWUgdG8gbW91c2VvdmVyIGJ1YmJsaW5nLFxuXHRcdFx0XHQvLyBidXQgYWx3YXlzIHBvaW50aW5nIGF0IHRoZSBzYW1lIGV2ZW50IHRhcmdldFxuXHRcdFx0XHQuY2xvc2VzdCggdGhpcy5vcHRpb25zLml0ZW1zICk7XG5cblx0XHQvLyBObyBlbGVtZW50IHRvIHNob3cgYSB0b29sdGlwIGZvciBvciB0aGUgdG9vbHRpcCBpcyBhbHJlYWR5IG9wZW5cblx0XHRpZiAoICF0YXJnZXQubGVuZ3RoIHx8IHRhcmdldC5kYXRhKCBcInVpLXRvb2x0aXAtaWRcIiApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggdGFyZ2V0LmF0dHIoIFwidGl0bGVcIiApICkge1xuXHRcdFx0dGFyZ2V0LmRhdGEoIFwidWktdG9vbHRpcC10aXRsZVwiLCB0YXJnZXQuYXR0ciggXCJ0aXRsZVwiICkgKTtcblx0XHR9XG5cblx0XHR0YXJnZXQuZGF0YSggXCJ1aS10b29sdGlwLW9wZW5cIiwgdHJ1ZSApO1xuXG5cdFx0Ly8ga2lsbCBwYXJlbnQgdG9vbHRpcHMsIGN1c3RvbSBvciBuYXRpdmUsIGZvciBob3ZlclxuXHRcdGlmICggZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gXCJtb3VzZW92ZXJcIiApIHtcblx0XHRcdHRhcmdldC5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHBhcmVudCA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHRibHVyRXZlbnQ7XG5cdFx0XHRcdGlmICggcGFyZW50LmRhdGEoIFwidWktdG9vbHRpcC1vcGVuXCIgKSApIHtcblx0XHRcdFx0XHRibHVyRXZlbnQgPSAkLkV2ZW50KCBcImJsdXJcIiApO1xuXHRcdFx0XHRcdGJsdXJFdmVudC50YXJnZXQgPSBibHVyRXZlbnQuY3VycmVudFRhcmdldCA9IHRoaXM7XG5cdFx0XHRcdFx0dGhhdC5jbG9zZSggYmx1ckV2ZW50LCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCBwYXJlbnQuYXR0ciggXCJ0aXRsZVwiICkgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnVuaXF1ZUlkKCk7XG5cdFx0XHRcdFx0dGhhdC5wYXJlbnRzWyB0aGlzLmlkIF0gPSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50OiB0aGlzLFxuXHRcdFx0XHRcdFx0dGl0bGU6IHBhcmVudC5hdHRyKCBcInRpdGxlXCIgKVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0cGFyZW50LmF0dHIoIFwidGl0bGVcIiwgXCJcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHR0aGlzLl91cGRhdGVDb250ZW50KCB0YXJnZXQsIGV2ZW50ICk7XG5cdH0sXG5cblx0X3VwZGF0ZUNvbnRlbnQ6IGZ1bmN0aW9uKCB0YXJnZXQsIGV2ZW50ICkge1xuXHRcdHZhciBjb250ZW50LFxuXHRcdFx0Y29udGVudE9wdGlvbiA9IHRoaXMub3B0aW9ucy5jb250ZW50LFxuXHRcdFx0dGhhdCA9IHRoaXMsXG5cdFx0XHRldmVudFR5cGUgPSBldmVudCA/IGV2ZW50LnR5cGUgOiBudWxsO1xuXG5cdFx0aWYgKCB0eXBlb2YgY29udGVudE9wdGlvbiA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLl9vcGVuKCBldmVudCwgdGFyZ2V0LCBjb250ZW50T3B0aW9uICk7XG5cdFx0fVxuXG5cdFx0Y29udGVudCA9IGNvbnRlbnRPcHRpb24uY2FsbCggdGFyZ2V0WzBdLCBmdW5jdGlvbiggcmVzcG9uc2UgKSB7XG5cdFx0XHQvLyBpZ25vcmUgYXN5bmMgcmVzcG9uc2UgaWYgdG9vbHRpcCB3YXMgY2xvc2VkIGFscmVhZHlcblx0XHRcdGlmICggIXRhcmdldC5kYXRhKCBcInVpLXRvb2x0aXAtb3BlblwiICkgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdC8vIElFIG1heSBpbnN0YW50bHkgc2VydmUgYSBjYWNoZWQgcmVzcG9uc2UgZm9yIGFqYXggcmVxdWVzdHNcblx0XHRcdC8vIGRlbGF5IHRoaXMgY2FsbCB0byBfb3BlbiBzbyB0aGUgb3RoZXIgY2FsbCB0byBfb3BlbiBydW5zIGZpcnN0XG5cdFx0XHR0aGF0Ll9kZWxheShmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8galF1ZXJ5IGNyZWF0ZXMgYSBzcGVjaWFsIGV2ZW50IGZvciBmb2N1c2luIHdoZW4gaXQgZG9lc24ndFxuXHRcdFx0XHQvLyBleGlzdCBuYXRpdmVseS4gVG8gaW1wcm92ZSBwZXJmb3JtYW5jZSwgdGhlIG5hdGl2ZSBldmVudFxuXHRcdFx0XHQvLyBvYmplY3QgaXMgcmV1c2VkIGFuZCB0aGUgdHlwZSBpcyBjaGFuZ2VkLiBUaGVyZWZvcmUsIHdlIGNhbid0XG5cdFx0XHRcdC8vIHJlbHkgb24gdGhlIHR5cGUgYmVpbmcgY29ycmVjdCBhZnRlciB0aGUgZXZlbnQgZmluaXNoZWRcblx0XHRcdFx0Ly8gYnViYmxpbmcsIHNvIHdlIHNldCBpdCBiYWNrIHRvIHRoZSBwcmV2aW91cyB2YWx1ZS4gKCM4NzQwKVxuXHRcdFx0XHRpZiAoIGV2ZW50ICkge1xuXHRcdFx0XHRcdGV2ZW50LnR5cGUgPSBldmVudFR5cGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5fb3BlbiggZXZlbnQsIHRhcmdldCwgcmVzcG9uc2UgKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdGlmICggY29udGVudCApIHtcblx0XHRcdHRoaXMuX29wZW4oIGV2ZW50LCB0YXJnZXQsIGNvbnRlbnQgKTtcblx0XHR9XG5cdH0sXG5cblx0X29wZW46IGZ1bmN0aW9uKCBldmVudCwgdGFyZ2V0LCBjb250ZW50ICkge1xuXHRcdHZhciB0b29sdGlwRGF0YSwgdG9vbHRpcCwgZXZlbnRzLCBkZWxheWVkU2hvdywgYTExeUNvbnRlbnQsXG5cdFx0XHRwb3NpdGlvbk9wdGlvbiA9ICQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zLnBvc2l0aW9uICk7XG5cblx0XHRpZiAoICFjb250ZW50ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIENvbnRlbnQgY2FuIGJlIHVwZGF0ZWQgbXVsdGlwbGUgdGltZXMuIElmIHRoZSB0b29sdGlwIGFscmVhZHlcblx0XHQvLyBleGlzdHMsIHRoZW4ganVzdCB1cGRhdGUgdGhlIGNvbnRlbnQgYW5kIGJhaWwuXG5cdFx0dG9vbHRpcERhdGEgPSB0aGlzLl9maW5kKCB0YXJnZXQgKTtcblx0XHRpZiAoIHRvb2x0aXBEYXRhICkge1xuXHRcdFx0dG9vbHRpcERhdGEudG9vbHRpcC5maW5kKCBcIi51aS10b29sdGlwLWNvbnRlbnRcIiApLmh0bWwoIGNvbnRlbnQgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBpZiB3ZSBoYXZlIGEgdGl0bGUsIGNsZWFyIGl0IHRvIHByZXZlbnQgdGhlIG5hdGl2ZSB0b29sdGlwXG5cdFx0Ly8gd2UgaGF2ZSB0byBjaGVjayBmaXJzdCB0byBhdm9pZCBkZWZpbmluZyBhIHRpdGxlIGlmIG5vbmUgZXhpc3RzXG5cdFx0Ly8gKHdlIGRvbid0IHdhbnQgdG8gY2F1c2UgYW4gZWxlbWVudCB0byBzdGFydCBtYXRjaGluZyBbdGl0bGVdKVxuXHRcdC8vXG5cdFx0Ly8gV2UgdXNlIHJlbW92ZUF0dHIgb25seSBmb3Iga2V5IGV2ZW50cywgdG8gYWxsb3cgSUUgdG8gZXhwb3J0IHRoZSBjb3JyZWN0XG5cdFx0Ly8gYWNjZXNzaWJsZSBhdHRyaWJ1dGVzLiBGb3IgbW91c2UgZXZlbnRzLCBzZXQgdG8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkXG5cdFx0Ly8gbmF0aXZlIHRvb2x0aXAgc2hvd2luZyB1cCAoaGFwcGVucyBvbmx5IHdoZW4gcmVtb3ZpbmcgaW5zaWRlIG1vdXNlb3ZlcikuXG5cdFx0aWYgKCB0YXJnZXQuaXMoIFwiW3RpdGxlXVwiICkgKSB7XG5cdFx0XHRpZiAoIGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09IFwibW91c2VvdmVyXCIgKSB7XG5cdFx0XHRcdHRhcmdldC5hdHRyKCBcInRpdGxlXCIsIFwiXCIgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRhcmdldC5yZW1vdmVBdHRyKCBcInRpdGxlXCIgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0b29sdGlwRGF0YSA9IHRoaXMuX3Rvb2x0aXAoIHRhcmdldCApO1xuXHRcdHRvb2x0aXAgPSB0b29sdGlwRGF0YS50b29sdGlwO1xuXHRcdHRoaXMuX2FkZERlc2NyaWJlZEJ5KCB0YXJnZXQsIHRvb2x0aXAuYXR0ciggXCJpZFwiICkgKTtcblx0XHR0b29sdGlwLmZpbmQoIFwiLnVpLXRvb2x0aXAtY29udGVudFwiICkuaHRtbCggY29udGVudCApO1xuXG5cdFx0Ly8gU3VwcG9ydDogVm9pY2VvdmVyIG9uIE9TIFgsIEpBV1Mgb24gSUUgPD0gOVxuXHRcdC8vIEpBV1MgYW5ub3VuY2VzIGRlbGV0aW9ucyBldmVuIHdoZW4gYXJpYS1yZWxldmFudD1cImFkZGl0aW9uc1wiXG5cdFx0Ly8gVm9pY2VvdmVyIHdpbGwgc29tZXRpbWVzIHJlLXJlYWQgdGhlIGVudGlyZSBsb2cgcmVnaW9uJ3MgY29udGVudHMgZnJvbSB0aGUgYmVnaW5uaW5nXG5cdFx0dGhpcy5saXZlUmVnaW9uLmNoaWxkcmVuKCkuaGlkZSgpO1xuXHRcdGlmICggY29udGVudC5jbG9uZSApIHtcblx0XHRcdGExMXlDb250ZW50ID0gY29udGVudC5jbG9uZSgpO1xuXHRcdFx0YTExeUNvbnRlbnQucmVtb3ZlQXR0ciggXCJpZFwiICkuZmluZCggXCJbaWRdXCIgKS5yZW1vdmVBdHRyKCBcImlkXCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YTExeUNvbnRlbnQgPSBjb250ZW50O1xuXHRcdH1cblx0XHQkKCBcIjxkaXY+XCIgKS5odG1sKCBhMTF5Q29udGVudCApLmFwcGVuZFRvKCB0aGlzLmxpdmVSZWdpb24gKTtcblxuXHRcdGZ1bmN0aW9uIHBvc2l0aW9uKCBldmVudCApIHtcblx0XHRcdHBvc2l0aW9uT3B0aW9uLm9mID0gZXZlbnQ7XG5cdFx0XHRpZiAoIHRvb2x0aXAuaXMoIFwiOmhpZGRlblwiICkgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRvb2x0aXAucG9zaXRpb24oIHBvc2l0aW9uT3B0aW9uICk7XG5cdFx0fVxuXHRcdGlmICggdGhpcy5vcHRpb25zLnRyYWNrICYmIGV2ZW50ICYmIC9ebW91c2UvLnRlc3QoIGV2ZW50LnR5cGUgKSApIHtcblx0XHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7XG5cdFx0XHRcdG1vdXNlbW92ZTogcG9zaXRpb25cblx0XHRcdH0pO1xuXHRcdFx0Ly8gdHJpZ2dlciBvbmNlIHRvIG92ZXJyaWRlIGVsZW1lbnQtcmVsYXRpdmUgcG9zaXRpb25pbmdcblx0XHRcdHBvc2l0aW9uKCBldmVudCApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0b29sdGlwLnBvc2l0aW9uKCAkLmV4dGVuZCh7XG5cdFx0XHRcdG9mOiB0YXJnZXRcblx0XHRcdH0sIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApICk7XG5cdFx0fVxuXG5cdFx0dG9vbHRpcC5oaWRlKCk7XG5cblx0XHR0aGlzLl9zaG93KCB0b29sdGlwLCB0aGlzLm9wdGlvbnMuc2hvdyApO1xuXHRcdC8vIEhhbmRsZSB0cmFja2luZyB0b29sdGlwcyB0aGF0IGFyZSBzaG93biB3aXRoIGEgZGVsYXkgKCM4NjQ0KS4gQXMgc29vblxuXHRcdC8vIGFzIHRoZSB0b29sdGlwIGlzIHZpc2libGUsIHBvc2l0aW9uIHRoZSB0b29sdGlwIHVzaW5nIHRoZSBtb3N0IHJlY2VudFxuXHRcdC8vIGV2ZW50LlxuXHRcdGlmICggdGhpcy5vcHRpb25zLnNob3cgJiYgdGhpcy5vcHRpb25zLnNob3cuZGVsYXkgKSB7XG5cdFx0XHRkZWxheWVkU2hvdyA9IHRoaXMuZGVsYXllZFNob3cgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0b29sdGlwLmlzKCBcIjp2aXNpYmxlXCIgKSApIHtcblx0XHRcdFx0XHRwb3NpdGlvbiggcG9zaXRpb25PcHRpb24ub2YgKTtcblx0XHRcdFx0XHRjbGVhckludGVydmFsKCBkZWxheWVkU2hvdyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAkLmZ4LmludGVydmFsICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJvcGVuXCIsIGV2ZW50LCB7IHRvb2x0aXA6IHRvb2x0aXAgfSApO1xuXG5cdFx0ZXZlbnRzID0ge1xuXHRcdFx0a2V5dXA6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0aWYgKCBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuRVNDQVBFICkge1xuXHRcdFx0XHRcdHZhciBmYWtlRXZlbnQgPSAkLkV2ZW50KGV2ZW50KTtcblx0XHRcdFx0XHRmYWtlRXZlbnQuY3VycmVudFRhcmdldCA9IHRhcmdldFswXTtcblx0XHRcdFx0XHR0aGlzLmNsb3NlKCBmYWtlRXZlbnQsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBPbmx5IGJpbmQgcmVtb3ZlIGhhbmRsZXIgZm9yIGRlbGVnYXRlZCB0YXJnZXRzLiBOb24tZGVsZWdhdGVkXG5cdFx0Ly8gdG9vbHRpcHMgd2lsbCBoYW5kbGUgdGhpcyBpbiBkZXN0cm95LlxuXHRcdGlmICggdGFyZ2V0WyAwIF0gIT09IHRoaXMuZWxlbWVudFsgMCBdICkge1xuXHRcdFx0ZXZlbnRzLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLl9yZW1vdmVUb29sdGlwKCB0b29sdGlwICk7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGlmICggIWV2ZW50IHx8IGV2ZW50LnR5cGUgPT09IFwibW91c2VvdmVyXCIgKSB7XG5cdFx0XHRldmVudHMubW91c2VsZWF2ZSA9IFwiY2xvc2VcIjtcblx0XHR9XG5cdFx0aWYgKCAhZXZlbnQgfHwgZXZlbnQudHlwZSA9PT0gXCJmb2N1c2luXCIgKSB7XG5cdFx0XHRldmVudHMuZm9jdXNvdXQgPSBcImNsb3NlXCI7XG5cdFx0fVxuXHRcdHRoaXMuX29uKCB0cnVlLCB0YXJnZXQsIGV2ZW50cyApO1xuXHR9LFxuXG5cdGNsb3NlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIHRvb2x0aXAsXG5cdFx0XHR0aGF0ID0gdGhpcyxcblx0XHRcdHRhcmdldCA9ICQoIGV2ZW50ID8gZXZlbnQuY3VycmVudFRhcmdldCA6IHRoaXMuZWxlbWVudCApLFxuXHRcdFx0dG9vbHRpcERhdGEgPSB0aGlzLl9maW5kKCB0YXJnZXQgKTtcblxuXHRcdC8vIFRoZSB0b29sdGlwIG1heSBhbHJlYWR5IGJlIGNsb3NlZFxuXHRcdGlmICggIXRvb2x0aXBEYXRhICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRvb2x0aXAgPSB0b29sdGlwRGF0YS50b29sdGlwO1xuXG5cdFx0Ly8gZGlzYWJsaW5nIGNsb3NlcyB0aGUgdG9vbHRpcCwgc28gd2UgbmVlZCB0byB0cmFjayB3aGVuIHdlJ3JlIGNsb3Npbmdcblx0XHQvLyB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wIGluIGNhc2UgdGhlIHRvb2x0aXAgYmVjb21lcyBkaXNhYmxlZCBvbiBjbG9zZVxuXHRcdGlmICggdG9vbHRpcERhdGEuY2xvc2luZyApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDbGVhciB0aGUgaW50ZXJ2YWwgZm9yIGRlbGF5ZWQgdHJhY2tpbmcgdG9vbHRpcHNcblx0XHRjbGVhckludGVydmFsKCB0aGlzLmRlbGF5ZWRTaG93ICk7XG5cblx0XHQvLyBvbmx5IHNldCB0aXRsZSBpZiB3ZSBoYWQgb25lIGJlZm9yZSAoc2VlIGNvbW1lbnQgaW4gX29wZW4oKSlcblx0XHQvLyBJZiB0aGUgdGl0bGUgYXR0cmlidXRlIGhhcyBjaGFuZ2VkIHNpbmNlIG9wZW4oKSwgZG9uJ3QgcmVzdG9yZVxuXHRcdGlmICggdGFyZ2V0LmRhdGEoIFwidWktdG9vbHRpcC10aXRsZVwiICkgJiYgIXRhcmdldC5hdHRyKCBcInRpdGxlXCIgKSApIHtcblx0XHRcdHRhcmdldC5hdHRyKCBcInRpdGxlXCIsIHRhcmdldC5kYXRhKCBcInVpLXRvb2x0aXAtdGl0bGVcIiApICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fcmVtb3ZlRGVzY3JpYmVkQnkoIHRhcmdldCApO1xuXG5cdFx0dG9vbHRpcERhdGEuaGlkaW5nID0gdHJ1ZTtcblx0XHR0b29sdGlwLnN0b3AoIHRydWUgKTtcblx0XHR0aGlzLl9oaWRlKCB0b29sdGlwLCB0aGlzLm9wdGlvbnMuaGlkZSwgZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGF0Ll9yZW1vdmVUb29sdGlwKCAkKCB0aGlzICkgKTtcblx0XHR9KTtcblxuXHRcdHRhcmdldC5yZW1vdmVEYXRhKCBcInVpLXRvb2x0aXAtb3BlblwiICk7XG5cdFx0dGhpcy5fb2ZmKCB0YXJnZXQsIFwibW91c2VsZWF2ZSBmb2N1c291dCBrZXl1cFwiICk7XG5cblx0XHQvLyBSZW1vdmUgJ3JlbW92ZScgYmluZGluZyBvbmx5IG9uIGRlbGVnYXRlZCB0YXJnZXRzXG5cdFx0aWYgKCB0YXJnZXRbIDAgXSAhPT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7XG5cdFx0XHR0aGlzLl9vZmYoIHRhcmdldCwgXCJyZW1vdmVcIiApO1xuXHRcdH1cblx0XHR0aGlzLl9vZmYoIHRoaXMuZG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIgKTtcblxuXHRcdGlmICggZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gXCJtb3VzZWxlYXZlXCIgKSB7XG5cdFx0XHQkLmVhY2goIHRoaXMucGFyZW50cywgZnVuY3Rpb24oIGlkLCBwYXJlbnQgKSB7XG5cdFx0XHRcdCQoIHBhcmVudC5lbGVtZW50ICkuYXR0ciggXCJ0aXRsZVwiLCBwYXJlbnQudGl0bGUgKTtcblx0XHRcdFx0ZGVsZXRlIHRoYXQucGFyZW50c1sgaWQgXTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRvb2x0aXBEYXRhLmNsb3NpbmcgPSB0cnVlO1xuXHRcdHRoaXMuX3RyaWdnZXIoIFwiY2xvc2VcIiwgZXZlbnQsIHsgdG9vbHRpcDogdG9vbHRpcCB9ICk7XG5cdFx0aWYgKCAhdG9vbHRpcERhdGEuaGlkaW5nICkge1xuXHRcdFx0dG9vbHRpcERhdGEuY2xvc2luZyA9IGZhbHNlO1xuXHRcdH1cblx0fSxcblxuXHRfdG9vbHRpcDogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG5cdFx0dmFyIHRvb2x0aXAgPSAkKCBcIjxkaXY+XCIgKVxuXHRcdFx0XHQuYXR0ciggXCJyb2xlXCIsIFwidG9vbHRpcFwiIClcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXRvb2x0aXAgdWktd2lkZ2V0IHVpLWNvcm5lci1hbGwgdWktd2lkZ2V0LWNvbnRlbnQgXCIgK1xuXHRcdFx0XHRcdCggdGhpcy5vcHRpb25zLnRvb2x0aXBDbGFzcyB8fCBcIlwiICkgKSxcblx0XHRcdGlkID0gdG9vbHRpcC51bmlxdWVJZCgpLmF0dHIoIFwiaWRcIiApO1xuXG5cdFx0JCggXCI8ZGl2PlwiIClcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10b29sdGlwLWNvbnRlbnRcIiApXG5cdFx0XHQuYXBwZW5kVG8oIHRvb2x0aXAgKTtcblxuXHRcdHRvb2x0aXAuYXBwZW5kVG8oIHRoaXMuZG9jdW1lbnRbMF0uYm9keSApO1xuXG5cdFx0cmV0dXJuIHRoaXMudG9vbHRpcHNbIGlkIF0gPSB7XG5cdFx0XHRlbGVtZW50OiBlbGVtZW50LFxuXHRcdFx0dG9vbHRpcDogdG9vbHRpcFxuXHRcdH07XG5cdH0sXG5cblx0X2ZpbmQ6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG5cdFx0dmFyIGlkID0gdGFyZ2V0LmRhdGEoIFwidWktdG9vbHRpcC1pZFwiICk7XG5cdFx0cmV0dXJuIGlkID8gdGhpcy50b29sdGlwc1sgaWQgXSA6IG51bGw7XG5cdH0sXG5cblx0X3JlbW92ZVRvb2x0aXA6IGZ1bmN0aW9uKCB0b29sdGlwICkge1xuXHRcdHRvb2x0aXAucmVtb3ZlKCk7XG5cdFx0ZGVsZXRlIHRoaXMudG9vbHRpcHNbIHRvb2x0aXAuYXR0ciggXCJpZFwiICkgXTtcblx0fSxcblxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzO1xuXG5cdFx0Ly8gY2xvc2Ugb3BlbiB0b29sdGlwc1xuXHRcdCQuZWFjaCggdGhpcy50b29sdGlwcywgZnVuY3Rpb24oIGlkLCB0b29sdGlwRGF0YSApIHtcblx0XHRcdC8vIERlbGVnYXRlIHRvIGNsb3NlIG1ldGhvZCB0byBoYW5kbGUgY29tbW9uIGNsZWFudXBcblx0XHRcdHZhciBldmVudCA9ICQuRXZlbnQoIFwiYmx1clwiICksXG5cdFx0XHRcdGVsZW1lbnQgPSB0b29sdGlwRGF0YS5lbGVtZW50O1xuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCA9IGVsZW1lbnRbIDAgXTtcblx0XHRcdHRoYXQuY2xvc2UoIGV2ZW50LCB0cnVlICk7XG5cblx0XHRcdC8vIFJlbW92ZSBpbW1lZGlhdGVseTsgZGVzdHJveWluZyBhbiBvcGVuIHRvb2x0aXAgZG9lc24ndCB1c2UgdGhlXG5cdFx0XHQvLyBoaWRlIGFuaW1hdGlvblxuXHRcdFx0JCggXCIjXCIgKyBpZCApLnJlbW92ZSgpO1xuXG5cdFx0XHQvLyBSZXN0b3JlIHRoZSB0aXRsZVxuXHRcdFx0aWYgKCBlbGVtZW50LmRhdGEoIFwidWktdG9vbHRpcC10aXRsZVwiICkgKSB7XG5cdFx0XHRcdC8vIElmIHRoZSB0aXRsZSBhdHRyaWJ1dGUgaGFzIGNoYW5nZWQgc2luY2Ugb3BlbigpLCBkb24ndCByZXN0b3JlXG5cdFx0XHRcdGlmICggIWVsZW1lbnQuYXR0ciggXCJ0aXRsZVwiICkgKSB7XG5cdFx0XHRcdFx0ZWxlbWVudC5hdHRyKCBcInRpdGxlXCIsIGVsZW1lbnQuZGF0YSggXCJ1aS10b29sdGlwLXRpdGxlXCIgKSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsZW1lbnQucmVtb3ZlRGF0YSggXCJ1aS10b29sdGlwLXRpdGxlXCIgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHR0aGlzLmxpdmVSZWdpb24ucmVtb3ZlKCk7XG5cdH1cbn0pO1xuXG5cblxufSkpOyIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbihmdW5jdGlvbigpIHtcbiAgdmFyICQsIFBpdm90RGF0YSwgYWRkU2VwYXJhdG9ycywgYWdncmVnYXRvclRlbXBsYXRlcywgYWdncmVnYXRvcnMsIGRheU5hbWVzRW4sIGRlcml2ZXJzLCBsb2NhbGVzLCBtdGhOYW1lc0VuLCBuYXR1cmFsU29ydCwgbnVtYmVyRm9ybWF0LCBwaXZvdFRhYmxlUmVuZGVyZXIsIHJlbmRlcmVycywgdXNGbXQsIHVzRm10SW50LCB1c0ZtdFBjdCwgemVyb1BhZCxcbiAgICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfSxcbiAgICBfX3NsaWNlID0gW10uc2xpY2UsXG4gICAgX19iaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICAkID0galF1ZXJ5O1xuXG5cbiAgLypcbiAgVXRpbGl0aWVzXG4gICAqL1xuXG4gIGFkZFNlcGFyYXRvcnMgPSBmdW5jdGlvbihuU3RyLCB0aG91c2FuZHNTZXAsIGRlY2ltYWxTZXApIHtcbiAgICB2YXIgcmd4LCB4LCB4MSwgeDI7XG4gICAgblN0ciArPSAnJztcbiAgICB4ID0gblN0ci5zcGxpdCgnLicpO1xuICAgIHgxID0geFswXTtcbiAgICB4MiA9IHgubGVuZ3RoID4gMSA/IGRlY2ltYWxTZXAgKyB4WzFdIDogJyc7XG4gICAgcmd4ID0gLyhcXGQrKShcXGR7M30pLztcbiAgICB3aGlsZSAocmd4LnRlc3QoeDEpKSB7XG4gICAgICB4MSA9IHgxLnJlcGxhY2Uocmd4LCAnJDEnICsgdGhvdXNhbmRzU2VwICsgJyQyJyk7XG4gICAgfVxuICAgIHJldHVybiB4MSArIHgyO1xuICB9O1xuXG4gIG51bWJlckZvcm1hdCA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICB2YXIgZGVmYXVsdHM7XG4gICAgZGVmYXVsdHMgPSB7XG4gICAgICBkaWdpdHNBZnRlckRlY2ltYWw6IDIsXG4gICAgICBzY2FsZXI6IDEsXG4gICAgICB0aG91c2FuZHNTZXA6IFwiLFwiLFxuICAgICAgZGVjaW1hbFNlcDogXCIuXCIsXG4gICAgICBwcmVmaXg6IFwiXCIsXG4gICAgICBzdWZmaXg6IFwiXCIsXG4gICAgICBzaG93WmVybzogZmFsc2VcbiAgICB9O1xuICAgIG9wdHMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0cyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICBpZiAoaXNOYU4oeCkgfHwgIWlzRmluaXRlKHgpKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfVxuICAgICAgaWYgKHggPT09IDAgJiYgIW9wdHMuc2hvd1plcm8pIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICB9XG4gICAgICByZXN1bHQgPSBhZGRTZXBhcmF0b3JzKChvcHRzLnNjYWxlciAqIHgpLnRvRml4ZWQob3B0cy5kaWdpdHNBZnRlckRlY2ltYWwpLCBvcHRzLnRob3VzYW5kc1NlcCwgb3B0cy5kZWNpbWFsU2VwKTtcbiAgICAgIHJldHVybiBcIlwiICsgb3B0cy5wcmVmaXggKyByZXN1bHQgKyBvcHRzLnN1ZmZpeDtcbiAgICB9O1xuICB9O1xuXG4gIHVzRm10ID0gbnVtYmVyRm9ybWF0KCk7XG5cbiAgdXNGbXRJbnQgPSBudW1iZXJGb3JtYXQoe1xuICAgIGRpZ2l0c0FmdGVyRGVjaW1hbDogMFxuICB9KTtcblxuICB1c0ZtdFBjdCA9IG51bWJlckZvcm1hdCh7XG4gICAgZGlnaXRzQWZ0ZXJEZWNpbWFsOiAxLFxuICAgIHNjYWxlcjogMTAwLFxuICAgIHN1ZmZpeDogXCIlXCJcbiAgfSk7XG5cbiAgYWdncmVnYXRvclRlbXBsYXRlcyA9IHtcbiAgICBjb3VudDogZnVuY3Rpb24oZm9ybWF0dGVyKSB7XG4gICAgICBpZiAoZm9ybWF0dGVyID09IG51bGwpIHtcbiAgICAgICAgZm9ybWF0dGVyID0gdXNGbXRJbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhLCByb3dLZXksIGNvbEtleSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICAgIHB1c2g6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb3VudCsrO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXJcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9LFxuICAgIGNvdW50VW5pcXVlOiBmdW5jdGlvbihmb3JtYXR0ZXIpIHtcbiAgICAgIGlmIChmb3JtYXR0ZXIgPT0gbnVsbCkge1xuICAgICAgICBmb3JtYXR0ZXIgPSB1c0ZtdEludDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbihfYXJnKSB7XG4gICAgICAgIHZhciBhdHRyO1xuICAgICAgICBhdHRyID0gX2FyZ1swXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEsIHJvd0tleSwgY29sS2V5KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuaXE6IFtdLFxuICAgICAgICAgICAgcHVzaDogZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICAgICAgICAgIHZhciBfcmVmO1xuICAgICAgICAgICAgICBpZiAoX3JlZiA9IHJlY29yZFthdHRyXSwgX19pbmRleE9mLmNhbGwodGhpcy51bmlxLCBfcmVmKSA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51bmlxLnB1c2gocmVjb3JkW2F0dHJdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudW5pcS5sZW5ndGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXG4gICAgICAgICAgICBudW1JbnB1dHM6IGF0dHIgIT0gbnVsbCA/IDAgOiAxXG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSxcbiAgICBsaXN0VW5pcXVlOiBmdW5jdGlvbihzZXApIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihfYXJnKSB7XG4gICAgICAgIHZhciBhdHRyO1xuICAgICAgICBhdHRyID0gX2FyZ1swXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEsIHJvd0tleSwgY29sS2V5KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuaXE6IFtdLFxuICAgICAgICAgICAgcHVzaDogZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICAgICAgICAgIHZhciBfcmVmO1xuICAgICAgICAgICAgICBpZiAoX3JlZiA9IHJlY29yZFthdHRyXSwgX19pbmRleE9mLmNhbGwodGhpcy51bmlxLCBfcmVmKSA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51bmlxLnB1c2gocmVjb3JkW2F0dHJdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudW5pcS5qb2luKHNlcCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0OiBmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG51bUlucHV0czogYXR0ciAhPSBudWxsID8gMCA6IDFcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9LFxuICAgIHN1bTogZnVuY3Rpb24oZm9ybWF0dGVyKSB7XG4gICAgICBpZiAoZm9ybWF0dGVyID09IG51bGwpIHtcbiAgICAgICAgZm9ybWF0dGVyID0gdXNGbXQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oX2FyZykge1xuICAgICAgICB2YXIgYXR0cjtcbiAgICAgICAgYXR0ciA9IF9hcmdbMF07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhLCByb3dLZXksIGNvbEtleSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdW06IDAsXG4gICAgICAgICAgICBwdXNoOiBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUZsb2F0KHJlY29yZFthdHRyXSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VtICs9IHBhcnNlRmxvYXQocmVjb3JkW2F0dHJdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VtO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxuICAgICAgICAgICAgbnVtSW5wdXRzOiBhdHRyICE9IG51bGwgPyAwIDogMVxuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0sXG4gICAgYXZlcmFnZTogZnVuY3Rpb24oZm9ybWF0dGVyKSB7XG4gICAgICBpZiAoZm9ybWF0dGVyID09IG51bGwpIHtcbiAgICAgICAgZm9ybWF0dGVyID0gdXNGbXQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oX2FyZykge1xuICAgICAgICB2YXIgYXR0cjtcbiAgICAgICAgYXR0ciA9IF9hcmdbMF07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhLCByb3dLZXksIGNvbEtleSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdW06IDAsXG4gICAgICAgICAgICBsZW46IDAsXG4gICAgICAgICAgICBwdXNoOiBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUZsb2F0KHJlY29yZFthdHRyXSkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdW0gKz0gcGFyc2VGbG9hdChyZWNvcmRbYXR0cl0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxlbisrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdW0gLyB0aGlzLmxlbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdHRlcixcbiAgICAgICAgICAgIG51bUlucHV0czogYXR0ciAhPSBudWxsID8gMCA6IDFcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9LFxuICAgIHN1bU92ZXJTdW06IGZ1bmN0aW9uKGZvcm1hdHRlcikge1xuICAgICAgaWYgKGZvcm1hdHRlciA9PSBudWxsKSB7XG4gICAgICAgIGZvcm1hdHRlciA9IHVzRm10O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKF9hcmcpIHtcbiAgICAgICAgdmFyIGRlbm9tLCBudW07XG4gICAgICAgIG51bSA9IF9hcmdbMF0sIGRlbm9tID0gX2FyZ1sxXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEsIHJvd0tleSwgY29sS2V5KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1bU51bTogMCxcbiAgICAgICAgICAgIHN1bURlbm9tOiAwLFxuICAgICAgICAgICAgcHVzaDogZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VGbG9hdChyZWNvcmRbbnVtXSkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdW1OdW0gKz0gcGFyc2VGbG9hdChyZWNvcmRbbnVtXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUZsb2F0KHJlY29yZFtkZW5vbV0pKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN1bURlbm9tICs9IHBhcnNlRmxvYXQocmVjb3JkW2Rlbm9tXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLnN1bU51bSAvIHRoaXMuc3VtRGVub207XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXG4gICAgICAgICAgICBudW1JbnB1dHM6IChudW0gIT0gbnVsbCkgJiYgKGRlbm9tICE9IG51bGwpID8gMCA6IDJcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9LFxuICAgIHN1bU92ZXJTdW1Cb3VuZDgwOiBmdW5jdGlvbih1cHBlciwgZm9ybWF0dGVyKSB7XG4gICAgICBpZiAodXBwZXIgPT0gbnVsbCkge1xuICAgICAgICB1cHBlciA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoZm9ybWF0dGVyID09IG51bGwpIHtcbiAgICAgICAgZm9ybWF0dGVyID0gdXNGbXQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oX2FyZykge1xuICAgICAgICB2YXIgZGVub20sIG51bTtcbiAgICAgICAgbnVtID0gX2FyZ1swXSwgZGVub20gPSBfYXJnWzFdO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSwgcm93S2V5LCBjb2xLZXkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VtTnVtOiAwLFxuICAgICAgICAgICAgc3VtRGVub206IDAsXG4gICAgICAgICAgICBwdXNoOiBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUZsb2F0KHJlY29yZFtudW1dKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1bU51bSArPSBwYXJzZUZsb2F0KHJlY29yZFtudW1dKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlRmxvYXQocmVjb3JkW2Rlbm9tXSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VtRGVub20gKz0gcGFyc2VGbG9hdChyZWNvcmRbZGVub21dKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIHNpZ247XG4gICAgICAgICAgICAgIHNpZ24gPSB1cHBlciA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgcmV0dXJuICgwLjgyMTE4NzIwNzU3NDkwOCAvIHRoaXMuc3VtRGVub20gKyB0aGlzLnN1bU51bSAvIHRoaXMuc3VtRGVub20gKyAxLjI4MTU1MTU2NTU0NDYwMDQgKiBzaWduICogTWF0aC5zcXJ0KDAuNDEwNTkzNjAzNzg3NDU0IC8gKHRoaXMuc3VtRGVub20gKiB0aGlzLnN1bURlbm9tKSArICh0aGlzLnN1bU51bSAqICgxIC0gdGhpcy5zdW1OdW0gLyB0aGlzLnN1bURlbm9tKSkgLyAodGhpcy5zdW1EZW5vbSAqIHRoaXMuc3VtRGVub20pKSkgLyAoMSArIDEuNjQyMzc0NDE1MTQ5ODE2IC8gdGhpcy5zdW1EZW5vbSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXG4gICAgICAgICAgICBudW1JbnB1dHM6IChudW0gIT0gbnVsbCkgJiYgKGRlbm9tICE9IG51bGwpID8gMCA6IDJcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9LFxuICAgIGZyYWN0aW9uT2Y6IGZ1bmN0aW9uKHdyYXBwZWQsIHR5cGUsIGZvcm1hdHRlcikge1xuICAgICAgaWYgKHR5cGUgPT0gbnVsbCkge1xuICAgICAgICB0eXBlID0gXCJ0b3RhbFwiO1xuICAgICAgfVxuICAgICAgaWYgKGZvcm1hdHRlciA9PSBudWxsKSB7XG4gICAgICAgIGZvcm1hdHRlciA9IHVzRm10UGN0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgeDtcbiAgICAgICAgeCA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhLCByb3dLZXksIGNvbEtleSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWxlY3Rvcjoge1xuICAgICAgICAgICAgICB0b3RhbDogW1tdLCBbXV0sXG4gICAgICAgICAgICAgIHJvdzogW3Jvd0tleSwgW11dLFxuICAgICAgICAgICAgICBjb2w6IFtbXSwgY29sS2V5XVxuICAgICAgICAgICAgfVt0eXBlXSxcbiAgICAgICAgICAgIGlubmVyOiB3cmFwcGVkLmFwcGx5KG51bGwsIHgpKGRhdGEsIHJvd0tleSwgY29sS2V5KSxcbiAgICAgICAgICAgIHB1c2g6IGZ1bmN0aW9uKHJlY29yZCkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbm5lci5wdXNoKHJlY29yZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmlubmVyLnZhbHVlKCkgLyBkYXRhLmdldEFnZ3JlZ2F0b3IuYXBwbHkoZGF0YSwgdGhpcy5zZWxlY3RvcikuaW5uZXIudmFsdWUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBudW1JbnB1dHM6IHdyYXBwZWQuYXBwbHkobnVsbCwgeCkoKS5udW1JbnB1dHNcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgYWdncmVnYXRvcnMgPSAoZnVuY3Rpb24odHBsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFwiQ291bnRcIjogdHBsLmNvdW50KHVzRm10SW50KSxcbiAgICAgIFwiQ291bnQgVW5pcXVlIFZhbHVlc1wiOiB0cGwuY291bnRVbmlxdWUodXNGbXRJbnQpLFxuICAgICAgXCJMaXN0IFVuaXF1ZSBWYWx1ZXNcIjogdHBsLmxpc3RVbmlxdWUoXCIsIFwiKSxcbiAgICAgIFwiU3VtXCI6IHRwbC5zdW0odXNGbXQpLFxuICAgICAgXCJJbnRlZ2VyIFN1bVwiOiB0cGwuc3VtKHVzRm10SW50KSxcbiAgICAgIFwiQXZlcmFnZVwiOiB0cGwuYXZlcmFnZSh1c0ZtdCksXG4gICAgICBcIlN1bSBvdmVyIFN1bVwiOiB0cGwuc3VtT3ZlclN1bSh1c0ZtdCksXG4gICAgICBcIjgwJSBVcHBlciBCb3VuZFwiOiB0cGwuc3VtT3ZlclN1bUJvdW5kODAodHJ1ZSwgdXNGbXQpLFxuICAgICAgXCI4MCUgTG93ZXIgQm91bmRcIjogdHBsLnN1bU92ZXJTdW1Cb3VuZDgwKGZhbHNlLCB1c0ZtdCksXG4gICAgICBcIlN1bSBhcyBGcmFjdGlvbiBvZiBUb3RhbFwiOiB0cGwuZnJhY3Rpb25PZih0cGwuc3VtKCksIFwidG90YWxcIiwgdXNGbXRQY3QpLFxuICAgICAgXCJTdW0gYXMgRnJhY3Rpb24gb2YgUm93c1wiOiB0cGwuZnJhY3Rpb25PZih0cGwuc3VtKCksIFwicm93XCIsIHVzRm10UGN0KSxcbiAgICAgIFwiU3VtIGFzIEZyYWN0aW9uIG9mIENvbHVtbnNcIjogdHBsLmZyYWN0aW9uT2YodHBsLnN1bSgpLCBcImNvbFwiLCB1c0ZtdFBjdCksXG4gICAgICBcIkNvdW50IGFzIEZyYWN0aW9uIG9mIFRvdGFsXCI6IHRwbC5mcmFjdGlvbk9mKHRwbC5jb3VudCgpLCBcInRvdGFsXCIsIHVzRm10UGN0KSxcbiAgICAgIFwiQ291bnQgYXMgRnJhY3Rpb24gb2YgUm93c1wiOiB0cGwuZnJhY3Rpb25PZih0cGwuY291bnQoKSwgXCJyb3dcIiwgdXNGbXRQY3QpLFxuICAgICAgXCJDb3VudCBhcyBGcmFjdGlvbiBvZiBDb2x1bW5zXCI6IHRwbC5mcmFjdGlvbk9mKHRwbC5jb3VudCgpLCBcImNvbFwiLCB1c0ZtdFBjdClcbiAgICB9O1xuICB9KShhZ2dyZWdhdG9yVGVtcGxhdGVzKTtcblxuICByZW5kZXJlcnMgPSB7XG4gICAgXCJUYWJsZVwiOiBmdW5jdGlvbihwdnREYXRhLCBvcHRzKSB7XG4gICAgICByZXR1cm4gcGl2b3RUYWJsZVJlbmRlcmVyKHB2dERhdGEsIG9wdHMpO1xuICAgIH0sXG4gICAgXCJUYWJsZSBCYXJjaGFydFwiOiBmdW5jdGlvbihwdnREYXRhLCBvcHRzKSB7XG4gICAgICByZXR1cm4gJChwaXZvdFRhYmxlUmVuZGVyZXIocHZ0RGF0YSwgb3B0cykpLmJhcmNoYXJ0KCk7XG4gICAgfSxcbiAgICBcIkhlYXRtYXBcIjogZnVuY3Rpb24ocHZ0RGF0YSwgb3B0cykge1xuICAgICAgcmV0dXJuICQocGl2b3RUYWJsZVJlbmRlcmVyKHB2dERhdGEsIG9wdHMpKS5oZWF0bWFwKCk7XG4gICAgfSxcbiAgICBcIlJvdyBIZWF0bWFwXCI6IGZ1bmN0aW9uKHB2dERhdGEsIG9wdHMpIHtcbiAgICAgIHJldHVybiAkKHBpdm90VGFibGVSZW5kZXJlcihwdnREYXRhLCBvcHRzKSkuaGVhdG1hcChcInJvd2hlYXRtYXBcIik7XG4gICAgfSxcbiAgICBcIkNvbCBIZWF0bWFwXCI6IGZ1bmN0aW9uKHB2dERhdGEsIG9wdHMpIHtcbiAgICAgIHJldHVybiAkKHBpdm90VGFibGVSZW5kZXJlcihwdnREYXRhLCBvcHRzKSkuaGVhdG1hcChcImNvbGhlYXRtYXBcIik7XG4gICAgfVxuICB9O1xuXG4gIGxvY2FsZXMgPSB7XG4gICAgZW46IHtcbiAgICAgIGFnZ3JlZ2F0b3JzOiBhZ2dyZWdhdG9ycyxcbiAgICAgIHJlbmRlcmVyczogcmVuZGVyZXJzLFxuICAgICAgbG9jYWxlU3RyaW5nczoge1xuICAgICAgICByZW5kZXJFcnJvcjogXCJBbiBlcnJvciBvY2N1cnJlZCByZW5kZXJpbmcgdGhlIFBpdm90VGFibGUgcmVzdWx0cy5cIixcbiAgICAgICAgY29tcHV0ZUVycm9yOiBcIkFuIGVycm9yIG9jY3VycmVkIGNvbXB1dGluZyB0aGUgUGl2b3RUYWJsZSByZXN1bHRzLlwiLFxuICAgICAgICB1aVJlbmRlckVycm9yOiBcIkFuIGVycm9yIG9jY3VycmVkIHJlbmRlcmluZyB0aGUgUGl2b3RUYWJsZSBVSS5cIixcbiAgICAgICAgc2VsZWN0QWxsOiBcIlNlbGVjdCBBbGxcIixcbiAgICAgICAgc2VsZWN0Tm9uZTogXCJTZWxlY3QgTm9uZVwiLFxuICAgICAgICB0b29NYW55OiBcIih0b28gbWFueSB0byBsaXN0KVwiLFxuICAgICAgICBmaWx0ZXJSZXN1bHRzOiBcIkZpbHRlciByZXN1bHRzXCIsXG4gICAgICAgIHRvdGFsczogXCJUb3RhbHNcIixcbiAgICAgICAgdnM6IFwidnNcIixcbiAgICAgICAgYnk6IFwiYnlcIlxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBtdGhOYW1lc0VuID0gW1wiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwXCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdO1xuXG4gIGRheU5hbWVzRW4gPSBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl07XG5cbiAgemVyb1BhZCA9IGZ1bmN0aW9uKG51bWJlcikge1xuICAgIHJldHVybiAoXCIwXCIgKyBudW1iZXIpLnN1YnN0cigtMiwgMik7XG4gIH07XG5cbiAgZGVyaXZlcnMgPSB7XG4gICAgYmluOiBmdW5jdGlvbihjb2wsIGJpbldpZHRoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICAgIHJldHVybiByZWNvcmRbY29sXSAtIHJlY29yZFtjb2xdICUgYmluV2lkdGg7XG4gICAgICB9O1xuICAgIH0sXG4gICAgZGF0ZUZvcm1hdDogZnVuY3Rpb24oY29sLCBmb3JtYXRTdHJpbmcsIG10aE5hbWVzLCBkYXlOYW1lcykge1xuICAgICAgaWYgKG10aE5hbWVzID09IG51bGwpIHtcbiAgICAgICAgbXRoTmFtZXMgPSBtdGhOYW1lc0VuO1xuICAgICAgfVxuICAgICAgaWYgKGRheU5hbWVzID09IG51bGwpIHtcbiAgICAgICAgZGF5TmFtZXMgPSBkYXlOYW1lc0VuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlY29yZCkge1xuICAgICAgICB2YXIgZGF0ZTtcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UocmVjb3JkW2NvbF0pKTtcbiAgICAgICAgaWYgKGlzTmFOKGRhdGUpKSB7XG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdFN0cmluZy5yZXBsYWNlKC8lKC4pL2csIGZ1bmN0aW9uKG0sIHApIHtcbiAgICAgICAgICBzd2l0Y2ggKHApIHtcbiAgICAgICAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgICAgICAgIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlLmdldE1vbnRoKCkgKyAxKTtcbiAgICAgICAgICAgIGNhc2UgXCJuXCI6XG4gICAgICAgICAgICAgIHJldHVybiBtdGhOYW1lc1tkYXRlLmdldE1vbnRoKCldO1xuICAgICAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgICAgICAgY2FzZSBcIndcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIGRheU5hbWVzW2RhdGUuZ2V0RGF5KCldO1xuICAgICAgICAgICAgY2FzZSBcInhcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RGF5KCk7XG4gICAgICAgICAgICBjYXNlIFwiSFwiOlxuICAgICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlLmdldEhvdXJzKCkpO1xuICAgICAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZS5nZXRNaW51dGVzKCkpO1xuICAgICAgICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgcmV0dXJuIFwiJVwiICsgcDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgbmF0dXJhbFNvcnQgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXMsIGJzKSB7XG4gICAgICB2YXIgYSwgYTEsIGIsIGIxLCByZCwgcngsIHJ6O1xuICAgICAgcnggPSAvKFxcZCspfChcXEQrKS9nO1xuICAgICAgcmQgPSAvXFxkLztcbiAgICAgIHJ6ID0gL14wLztcbiAgICAgIGlmICh0eXBlb2YgYXMgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIGJzID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIGlmIChpc05hTihhcykpIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOYU4oYnMpKSB7XG4gICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcyAtIGJzO1xuICAgICAgfVxuICAgICAgYSA9IFN0cmluZyhhcykudG9Mb3dlckNhc2UoKTtcbiAgICAgIGIgPSBTdHJpbmcoYnMpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlmICghKHJkLnRlc3QoYSkgJiYgcmQudGVzdChiKSkpIHtcbiAgICAgICAgcmV0dXJuIChhID4gYiA/IDEgOiAtMSk7XG4gICAgICB9XG4gICAgICBhID0gYS5tYXRjaChyeCk7XG4gICAgICBiID0gYi5tYXRjaChyeCk7XG4gICAgICB3aGlsZSAoYS5sZW5ndGggJiYgYi5sZW5ndGgpIHtcbiAgICAgICAgYTEgPSBhLnNoaWZ0KCk7XG4gICAgICAgIGIxID0gYi5zaGlmdCgpO1xuICAgICAgICBpZiAoYTEgIT09IGIxKSB7XG4gICAgICAgICAgaWYgKHJkLnRlc3QoYTEpICYmIHJkLnRlc3QoYjEpKSB7XG4gICAgICAgICAgICByZXR1cm4gYTEucmVwbGFjZShyeiwgXCIuMFwiKSAtIGIxLnJlcGxhY2UocnosIFwiLjBcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAoYTEgPiBiMSA/IDEgOiAtMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYS5sZW5ndGggLSBiLmxlbmd0aDtcbiAgICB9O1xuICB9KSh0aGlzKTtcblxuICAkLnBpdm90VXRpbGl0aWVzID0ge1xuICAgIGFnZ3JlZ2F0b3JUZW1wbGF0ZXM6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMsXG4gICAgYWdncmVnYXRvcnM6IGFnZ3JlZ2F0b3JzLFxuICAgIHJlbmRlcmVyczogcmVuZGVyZXJzLFxuICAgIGRlcml2ZXJzOiBkZXJpdmVycyxcbiAgICBsb2NhbGVzOiBsb2NhbGVzLFxuICAgIG5hdHVyYWxTb3J0OiBuYXR1cmFsU29ydCxcbiAgICBudW1iZXJGb3JtYXQ6IG51bWJlckZvcm1hdFxuICB9O1xuXG5cbiAgLypcbiAgRGF0YSBNb2RlbCBjbGFzc1xuICAgKi9cblxuICBQaXZvdERhdGEgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gUGl2b3REYXRhKGlucHV0LCBvcHRzKSB7XG4gICAgICB0aGlzLmdldEFnZ3JlZ2F0b3IgPSBfX2JpbmQodGhpcy5nZXRBZ2dyZWdhdG9yLCB0aGlzKTtcbiAgICAgIHRoaXMuZ2V0Um93S2V5cyA9IF9fYmluZCh0aGlzLmdldFJvd0tleXMsIHRoaXMpO1xuICAgICAgdGhpcy5nZXRDb2xLZXlzID0gX19iaW5kKHRoaXMuZ2V0Q29sS2V5cywgdGhpcyk7XG4gICAgICB0aGlzLnNvcnRLZXlzID0gX19iaW5kKHRoaXMuc29ydEtleXMsIHRoaXMpO1xuICAgICAgdGhpcy5hcnJTb3J0ID0gX19iaW5kKHRoaXMuYXJyU29ydCwgdGhpcyk7XG4gICAgICB0aGlzLm5hdFNvcnQgPSBfX2JpbmQodGhpcy5uYXRTb3J0LCB0aGlzKTtcbiAgICAgIHRoaXMuYWdncmVnYXRvciA9IG9wdHMuYWdncmVnYXRvcjtcbiAgICAgIHRoaXMuYWdncmVnYXRvck5hbWUgPSBvcHRzLmFnZ3JlZ2F0b3JOYW1lO1xuICAgICAgdGhpcy5jb2xBdHRycyA9IG9wdHMuY29scztcbiAgICAgIHRoaXMucm93QXR0cnMgPSBvcHRzLnJvd3M7XG4gICAgICB0aGlzLnZhbEF0dHJzID0gb3B0cy52YWxzO1xuICAgICAgdGhpcy50cmVlID0ge307XG4gICAgICB0aGlzLnJvd0tleXMgPSBbXTtcbiAgICAgIHRoaXMuY29sS2V5cyA9IFtdO1xuICAgICAgdGhpcy5yb3dUb3RhbHMgPSB7fTtcbiAgICAgIHRoaXMuY29sVG90YWxzID0ge307XG4gICAgICB0aGlzLmFsbFRvdGFsID0gdGhpcy5hZ2dyZWdhdG9yKHRoaXMsIFtdLCBbXSk7XG4gICAgICB0aGlzLnNvcnRlZCA9IGZhbHNlO1xuICAgICAgUGl2b3REYXRhLmZvckVhY2hSZWNvcmQoaW5wdXQsIG9wdHMuZGVyaXZlZEF0dHJpYnV0ZXMsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICAgICAgaWYgKG9wdHMuZmlsdGVyKHJlY29yZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9jZXNzUmVjb3JkKHJlY29yZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH1cblxuICAgIFBpdm90RGF0YS5mb3JFYWNoUmVjb3JkID0gZnVuY3Rpb24oaW5wdXQsIGRlcml2ZWRBdHRyaWJ1dGVzLCBmKSB7XG4gICAgICB2YXIgYWRkUmVjb3JkLCBjb21wYWN0UmVjb3JkLCBpLCBqLCBrLCByZWNvcmQsIHRibENvbHMsIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cywgX3Jlc3VsdHMxO1xuICAgICAgaWYgKCQuaXNFbXB0eU9iamVjdChkZXJpdmVkQXR0cmlidXRlcykpIHtcbiAgICAgICAgYWRkUmVjb3JkID0gZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZFJlY29yZCA9IGZ1bmN0aW9uKHJlY29yZCkge1xuICAgICAgICAgIHZhciBrLCB2LCBfcmVmO1xuICAgICAgICAgIGZvciAoayBpbiBkZXJpdmVkQXR0cmlidXRlcykge1xuICAgICAgICAgICAgdiA9IGRlcml2ZWRBdHRyaWJ1dGVzW2tdO1xuICAgICAgICAgICAgcmVjb3JkW2tdID0gKF9yZWYgPSB2KHJlY29yZCkpICE9IG51bGwgPyBfcmVmIDogcmVjb3JkW2tdO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZihyZWNvcmQpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKCQuaXNGdW5jdGlvbihpbnB1dCkpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0KGFkZFJlY29yZCk7XG4gICAgICB9IGVsc2UgaWYgKCQuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgaWYgKCQuaXNBcnJheShpbnB1dFswXSkpIHtcbiAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAoaSBpbiBpbnB1dCkge1xuICAgICAgICAgICAgaWYgKCFfX2hhc1Byb3AuY2FsbChpbnB1dCwgaSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29tcGFjdFJlY29yZCA9IGlucHV0W2ldO1xuICAgICAgICAgICAgaWYgKCEoaSA+IDApKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVjb3JkID0ge307XG4gICAgICAgICAgICBfcmVmID0gaW5wdXRbMF07XG4gICAgICAgICAgICBmb3IgKGogaW4gX3JlZikge1xuICAgICAgICAgICAgICBpZiAoIV9faGFzUHJvcC5jYWxsKF9yZWYsIGopKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgayA9IF9yZWZbal07XG4gICAgICAgICAgICAgIHJlY29yZFtrXSA9IGNvbXBhY3RSZWNvcmRbal07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKGFkZFJlY29yZChyZWNvcmQpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gaW5wdXQubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgIHJlY29yZCA9IGlucHV0W19pXTtcbiAgICAgICAgICAgIF9yZXN1bHRzMS5wdXNoKGFkZFJlY29yZChyZWNvcmQpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIGpRdWVyeSkge1xuICAgICAgICB0YmxDb2xzID0gW107XG4gICAgICAgICQoXCJ0aGVhZCA+IHRyID4gdGhcIiwgaW5wdXQpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgIHJldHVybiB0YmxDb2xzLnB1c2goJCh0aGlzKS50ZXh0KCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICQoXCJ0Ym9keSA+IHRyXCIsIGlucHV0KS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICByZWNvcmQgPSB7fTtcbiAgICAgICAgICAkKFwidGRcIiwgdGhpcykuZWFjaChmdW5jdGlvbihqKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjb3JkW3RibENvbHNbal1dID0gJCh0aGlzKS50ZXh0KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGFkZFJlY29yZChyZWNvcmQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInVua25vd24gaW5wdXQgZm9ybWF0XCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBQaXZvdERhdGEuY29udmVydFRvQXJyYXkgPSBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIHJlc3VsdCA9IFtdO1xuICAgICAgUGl2b3REYXRhLmZvckVhY2hSZWNvcmQoaW5wdXQsIHt9LCBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5wdXNoKHJlY29yZCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIFBpdm90RGF0YS5wcm90b3R5cGUubmF0U29ydCA9IGZ1bmN0aW9uKGFzLCBicykge1xuICAgICAgcmV0dXJuIG5hdHVyYWxTb3J0KGFzLCBicyk7XG4gICAgfTtcblxuICAgIFBpdm90RGF0YS5wcm90b3R5cGUuYXJyU29ydCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiB0aGlzLm5hdFNvcnQoYS5qb2luKCksIGIuam9pbigpKTtcbiAgICB9O1xuXG4gICAgUGl2b3REYXRhLnByb3RvdHlwZS5zb3J0S2V5cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLnNvcnRlZCkge1xuICAgICAgICB0aGlzLnJvd0tleXMuc29ydCh0aGlzLmFyclNvcnQpO1xuICAgICAgICB0aGlzLmNvbEtleXMuc29ydCh0aGlzLmFyclNvcnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuc29ydGVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgUGl2b3REYXRhLnByb3RvdHlwZS5nZXRDb2xLZXlzID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnNvcnRLZXlzKCk7XG4gICAgICByZXR1cm4gdGhpcy5jb2xLZXlzO1xuICAgIH07XG5cbiAgICBQaXZvdERhdGEucHJvdG90eXBlLmdldFJvd0tleXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuc29ydEtleXMoKTtcbiAgICAgIHJldHVybiB0aGlzLnJvd0tleXM7XG4gICAgfTtcblxuICAgIFBpdm90RGF0YS5wcm90b3R5cGUucHJvY2Vzc1JlY29yZCA9IGZ1bmN0aW9uKHJlY29yZCkge1xuICAgICAgdmFyIGNvbEtleSwgZmxhdENvbEtleSwgZmxhdFJvd0tleSwgcm93S2V5LCB4LCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMSwgX3JlZjIsIF9yZWYzO1xuICAgICAgY29sS2V5ID0gW107XG4gICAgICByb3dLZXkgPSBbXTtcbiAgICAgIF9yZWYgPSB0aGlzLmNvbEF0dHJzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHggPSBfcmVmW19pXTtcbiAgICAgICAgY29sS2V5LnB1c2goKF9yZWYxID0gcmVjb3JkW3hdKSAhPSBudWxsID8gX3JlZjEgOiBcIm51bGxcIik7XG4gICAgICB9XG4gICAgICBfcmVmMiA9IHRoaXMucm93QXR0cnM7XG4gICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmMi5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgeCA9IF9yZWYyW19qXTtcbiAgICAgICAgcm93S2V5LnB1c2goKF9yZWYzID0gcmVjb3JkW3hdKSAhPSBudWxsID8gX3JlZjMgOiBcIm51bGxcIik7XG4gICAgICB9XG4gICAgICBmbGF0Um93S2V5ID0gcm93S2V5LmpvaW4oU3RyaW5nLmZyb21DaGFyQ29kZSgwKSk7XG4gICAgICBmbGF0Q29sS2V5ID0gY29sS2V5LmpvaW4oU3RyaW5nLmZyb21DaGFyQ29kZSgwKSk7XG4gICAgICB0aGlzLmFsbFRvdGFsLnB1c2gocmVjb3JkKTtcbiAgICAgIGlmIChyb3dLZXkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGlmICghdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV0pIHtcbiAgICAgICAgICB0aGlzLnJvd0tleXMucHVzaChyb3dLZXkpO1xuICAgICAgICAgIHRoaXMucm93VG90YWxzW2ZsYXRSb3dLZXldID0gdGhpcy5hZ2dyZWdhdG9yKHRoaXMsIHJvd0tleSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm93VG90YWxzW2ZsYXRSb3dLZXldLnB1c2gocmVjb3JkKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb2xLZXkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGlmICghdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV0pIHtcbiAgICAgICAgICB0aGlzLmNvbEtleXMucHVzaChjb2xLZXkpO1xuICAgICAgICAgIHRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldID0gdGhpcy5hZ2dyZWdhdG9yKHRoaXMsIFtdLCBjb2xLZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldLnB1c2gocmVjb3JkKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb2xLZXkubGVuZ3RoICE9PSAwICYmIHJvd0tleS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyZWVbZmxhdFJvd0tleV0pIHtcbiAgICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XSkge1xuICAgICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XSA9IHRoaXMuYWdncmVnYXRvcih0aGlzLCByb3dLZXksIGNvbEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XS5wdXNoKHJlY29yZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFBpdm90RGF0YS5wcm90b3R5cGUuZ2V0QWdncmVnYXRvciA9IGZ1bmN0aW9uKHJvd0tleSwgY29sS2V5KSB7XG4gICAgICB2YXIgYWdnLCBmbGF0Q29sS2V5LCBmbGF0Um93S2V5O1xuICAgICAgZmxhdFJvd0tleSA9IHJvd0tleS5qb2luKFN0cmluZy5mcm9tQ2hhckNvZGUoMCkpO1xuICAgICAgZmxhdENvbEtleSA9IGNvbEtleS5qb2luKFN0cmluZy5mcm9tQ2hhckNvZGUoMCkpO1xuICAgICAgaWYgKHJvd0tleS5sZW5ndGggPT09IDAgJiYgY29sS2V5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBhZ2cgPSB0aGlzLmFsbFRvdGFsO1xuICAgICAgfSBlbHNlIGlmIChyb3dLZXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGFnZyA9IHRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldO1xuICAgICAgfSBlbHNlIGlmIChjb2xLZXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGFnZyA9IHRoaXMucm93VG90YWxzW2ZsYXRSb3dLZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWdnID0gdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFnZyAhPSBudWxsID8gYWdnIDoge1xuICAgICAgICB2YWx1ZTogKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSxcbiAgICAgICAgZm9ybWF0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBpdm90RGF0YTtcblxuICB9KSgpO1xuXG5cbiAgLypcbiAgRGVmYXVsdCBSZW5kZXJlciBmb3IgaGllcmFyY2hpY2FsIHRhYmxlIGxheW91dFxuICAgKi9cblxuICBwaXZvdFRhYmxlUmVuZGVyZXIgPSBmdW5jdGlvbihwaXZvdERhdGEsIG9wdHMpIHtcbiAgICB2YXIgYWdncmVnYXRvciwgYywgY29sQXR0cnMsIGNvbEtleSwgY29sS2V5cywgZGVmYXVsdHMsIGksIGosIHIsIHJlc3VsdCwgcm93QXR0cnMsIHJvd0tleSwgcm93S2V5cywgc3BhblNpemUsIHRkLCB0aCwgdG90YWxBZ2dyZWdhdG9yLCB0ciwgdHh0LCB2YWwsIHg7XG4gICAgZGVmYXVsdHMgPSB7XG4gICAgICBsb2NhbGVTdHJpbmdzOiB7XG4gICAgICAgIHRvdGFsczogXCJUb3RhbHNcIlxuICAgICAgfVxuICAgIH07XG4gICAgb3B0cyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRzKTtcbiAgICBjb2xBdHRycyA9IHBpdm90RGF0YS5jb2xBdHRycztcbiAgICByb3dBdHRycyA9IHBpdm90RGF0YS5yb3dBdHRycztcbiAgICByb3dLZXlzID0gcGl2b3REYXRhLmdldFJvd0tleXMoKTtcbiAgICBjb2xLZXlzID0gcGl2b3REYXRhLmdldENvbEtleXMoKTtcbiAgICByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XG4gICAgcmVzdWx0LmNsYXNzTmFtZSA9IFwicHZ0VGFibGVcIjtcbiAgICBzcGFuU2l6ZSA9IGZ1bmN0aW9uKGFyciwgaSwgaikge1xuICAgICAgdmFyIGxlbiwgbm9EcmF3LCBzdG9wLCB4LCBfaSwgX2o7XG4gICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICBub0RyYXcgPSB0cnVlO1xuICAgICAgICBmb3IgKHggPSBfaSA9IDA7IDAgPD0gaiA/IF9pIDw9IGogOiBfaSA+PSBqOyB4ID0gMCA8PSBqID8gKytfaSA6IC0tX2kpIHtcbiAgICAgICAgICBpZiAoYXJyW2kgLSAxXVt4XSAhPT0gYXJyW2ldW3hdKSB7XG4gICAgICAgICAgICBub0RyYXcgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vRHJhdykge1xuICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGVuID0gMDtcbiAgICAgIHdoaWxlIChpICsgbGVuIDwgYXJyLmxlbmd0aCkge1xuICAgICAgICBzdG9wID0gZmFsc2U7XG4gICAgICAgIGZvciAoeCA9IF9qID0gMDsgMCA8PSBqID8gX2ogPD0gaiA6IF9qID49IGo7IHggPSAwIDw9IGogPyArK19qIDogLS1faikge1xuICAgICAgICAgIGlmIChhcnJbaV1beF0gIT09IGFycltpICsgbGVuXVt4XSkge1xuICAgICAgICAgICAgc3RvcCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdG9wKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgbGVuKys7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGVuO1xuICAgIH07XG4gICAgZm9yIChqIGluIGNvbEF0dHJzKSB7XG4gICAgICBpZiAoIV9faGFzUHJvcC5jYWxsKGNvbEF0dHJzLCBqKSkgY29udGludWU7XG4gICAgICBjID0gY29sQXR0cnNbal07XG4gICAgICB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcbiAgICAgIGlmIChwYXJzZUludChqKSA9PT0gMCAmJiByb3dBdHRycy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XG4gICAgICAgIHRoLnNldEF0dHJpYnV0ZShcImNvbHNwYW5cIiwgcm93QXR0cnMubGVuZ3RoKTtcbiAgICAgICAgdGguc2V0QXR0cmlidXRlKFwicm93c3BhblwiLCBjb2xBdHRycy5sZW5ndGgpO1xuICAgICAgICB0ci5hcHBlbmRDaGlsZCh0aCk7XG4gICAgICB9XG4gICAgICB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcbiAgICAgIHRoLmNsYXNzTmFtZSA9IFwicHZ0QXhpc0xhYmVsXCI7XG4gICAgICB0aC50ZXh0Q29udGVudCA9IGM7XG4gICAgICB0ci5hcHBlbmRDaGlsZCh0aCk7XG4gICAgICBmb3IgKGkgaW4gY29sS2V5cykge1xuICAgICAgICBpZiAoIV9faGFzUHJvcC5jYWxsKGNvbEtleXMsIGkpKSBjb250aW51ZTtcbiAgICAgICAgY29sS2V5ID0gY29sS2V5c1tpXTtcbiAgICAgICAgeCA9IHNwYW5TaXplKGNvbEtleXMsIHBhcnNlSW50KGkpLCBwYXJzZUludChqKSk7XG4gICAgICAgIGlmICh4ICE9PSAtMSkge1xuICAgICAgICAgIHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgICAgICAgIHRoLmNsYXNzTmFtZSA9IFwicHZ0Q29sTGFiZWxcIjtcbiAgICAgICAgICB0aC50ZXh0Q29udGVudCA9IGNvbEtleVtqXTtcbiAgICAgICAgICB0aC5zZXRBdHRyaWJ1dGUoXCJjb2xzcGFuXCIsIHgpO1xuICAgICAgICAgIGlmIChwYXJzZUludChqKSA9PT0gY29sQXR0cnMubGVuZ3RoIC0gMSAmJiByb3dBdHRycy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIHRoLnNldEF0dHJpYnV0ZShcInJvd3NwYW5cIiwgMik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBhcnNlSW50KGopID09PSAwKSB7XG4gICAgICAgIHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgICAgICB0aC5jbGFzc05hbWUgPSBcInB2dFRvdGFsTGFiZWxcIjtcbiAgICAgICAgdGguaW5uZXJIVE1MID0gb3B0cy5sb2NhbGVTdHJpbmdzLnRvdGFscztcbiAgICAgICAgdGguc2V0QXR0cmlidXRlKFwicm93c3BhblwiLCBjb2xBdHRycy5sZW5ndGggKyAocm93QXR0cnMubGVuZ3RoID09PSAwID8gMCA6IDEpKTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGgpO1xuICAgICAgfVxuICAgICAgcmVzdWx0LmFwcGVuZENoaWxkKHRyKTtcbiAgICB9XG4gICAgaWYgKHJvd0F0dHJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XG4gICAgICBmb3IgKGkgaW4gcm93QXR0cnMpIHtcbiAgICAgICAgaWYgKCFfX2hhc1Byb3AuY2FsbChyb3dBdHRycywgaSkpIGNvbnRpbnVlO1xuICAgICAgICByID0gcm93QXR0cnNbaV07XG4gICAgICAgIHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgICAgICB0aC5jbGFzc05hbWUgPSBcInB2dEF4aXNMYWJlbFwiO1xuICAgICAgICB0aC50ZXh0Q29udGVudCA9IHI7XG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRoKTtcbiAgICAgIH1cbiAgICAgIHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgICAgaWYgKGNvbEF0dHJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aC5jbGFzc05hbWUgPSBcInB2dFRvdGFsTGFiZWxcIjtcbiAgICAgICAgdGguaW5uZXJIVE1MID0gb3B0cy5sb2NhbGVTdHJpbmdzLnRvdGFscztcbiAgICAgIH1cbiAgICAgIHRyLmFwcGVuZENoaWxkKHRoKTtcbiAgICAgIHJlc3VsdC5hcHBlbmRDaGlsZCh0cik7XG4gICAgfVxuICAgIGZvciAoaSBpbiByb3dLZXlzKSB7XG4gICAgICBpZiAoIV9faGFzUHJvcC5jYWxsKHJvd0tleXMsIGkpKSBjb250aW51ZTtcbiAgICAgIHJvd0tleSA9IHJvd0tleXNbaV07XG4gICAgICB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcbiAgICAgIGZvciAoaiBpbiByb3dLZXkpIHtcbiAgICAgICAgaWYgKCFfX2hhc1Byb3AuY2FsbChyb3dLZXksIGopKSBjb250aW51ZTtcbiAgICAgICAgdHh0ID0gcm93S2V5W2pdO1xuICAgICAgICB4ID0gc3BhblNpemUocm93S2V5cywgcGFyc2VJbnQoaSksIHBhcnNlSW50KGopKTtcbiAgICAgICAgaWYgKHggIT09IC0xKSB7XG4gICAgICAgICAgdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XG4gICAgICAgICAgdGguY2xhc3NOYW1lID0gXCJwdnRSb3dMYWJlbFwiO1xuICAgICAgICAgIHRoLnRleHRDb250ZW50ID0gdHh0O1xuICAgICAgICAgIHRoLnNldEF0dHJpYnV0ZShcInJvd3NwYW5cIiwgeCk7XG4gICAgICAgICAgaWYgKHBhcnNlSW50KGopID09PSByb3dBdHRycy5sZW5ndGggLSAxICYmIGNvbEF0dHJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgdGguc2V0QXR0cmlidXRlKFwiY29sc3BhblwiLCAyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGogaW4gY29sS2V5cykge1xuICAgICAgICBpZiAoIV9faGFzUHJvcC5jYWxsKGNvbEtleXMsIGopKSBjb250aW51ZTtcbiAgICAgICAgY29sS2V5ID0gY29sS2V5c1tqXTtcbiAgICAgICAgYWdncmVnYXRvciA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKHJvd0tleSwgY29sS2V5KTtcbiAgICAgICAgdmFsID0gYWdncmVnYXRvci52YWx1ZSgpO1xuICAgICAgICB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgdGQuY2xhc3NOYW1lID0gXCJwdnRWYWwgcm93XCIgKyBpICsgXCIgY29sXCIgKyBqO1xuICAgICAgICB0ZC5pbm5lckhUTUwgPSBhZ2dyZWdhdG9yLmZvcm1hdCh2YWwpO1xuICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXZhbHVlXCIsIHZhbCk7XG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgIH1cbiAgICAgIHRvdGFsQWdncmVnYXRvciA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKHJvd0tleSwgW10pO1xuICAgICAgdmFsID0gdG90YWxBZ2dyZWdhdG9yLnZhbHVlKCk7XG4gICAgICB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgIHRkLmNsYXNzTmFtZSA9IFwicHZ0VG90YWwgcm93VG90YWxcIjtcbiAgICAgIHRkLmlubmVySFRNTCA9IHRvdGFsQWdncmVnYXRvci5mb3JtYXQodmFsKTtcbiAgICAgIHRkLnNldEF0dHJpYnV0ZShcImRhdGEtdmFsdWVcIiwgdmFsKTtcbiAgICAgIHRkLnNldEF0dHJpYnV0ZShcImRhdGEtZm9yXCIsIFwicm93XCIgKyBpKTtcbiAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgIHJlc3VsdC5hcHBlbmRDaGlsZCh0cik7XG4gICAgfVxuICAgIHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgIHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgIHRoLmNsYXNzTmFtZSA9IFwicHZ0VG90YWxMYWJlbFwiO1xuICAgIHRoLmlubmVySFRNTCA9IG9wdHMubG9jYWxlU3RyaW5ncy50b3RhbHM7XG4gICAgdGguc2V0QXR0cmlidXRlKFwiY29sc3BhblwiLCByb3dBdHRycy5sZW5ndGggKyAoY29sQXR0cnMubGVuZ3RoID09PSAwID8gMCA6IDEpKTtcbiAgICB0ci5hcHBlbmRDaGlsZCh0aCk7XG4gICAgZm9yIChqIGluIGNvbEtleXMpIHtcbiAgICAgIGlmICghX19oYXNQcm9wLmNhbGwoY29sS2V5cywgaikpIGNvbnRpbnVlO1xuICAgICAgY29sS2V5ID0gY29sS2V5c1tqXTtcbiAgICAgIHRvdGFsQWdncmVnYXRvciA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKFtdLCBjb2xLZXkpO1xuICAgICAgdmFsID0gdG90YWxBZ2dyZWdhdG9yLnZhbHVlKCk7XG4gICAgICB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgIHRkLmNsYXNzTmFtZSA9IFwicHZ0VG90YWwgY29sVG90YWxcIjtcbiAgICAgIHRkLmlubmVySFRNTCA9IHRvdGFsQWdncmVnYXRvci5mb3JtYXQodmFsKTtcbiAgICAgIHRkLnNldEF0dHJpYnV0ZShcImRhdGEtdmFsdWVcIiwgdmFsKTtcbiAgICAgIHRkLnNldEF0dHJpYnV0ZShcImRhdGEtZm9yXCIsIFwiY29sXCIgKyBqKTtcbiAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICB9XG4gICAgdG90YWxBZ2dyZWdhdG9yID0gcGl2b3REYXRhLmdldEFnZ3JlZ2F0b3IoW10sIFtdKTtcbiAgICB2YWwgPSB0b3RhbEFnZ3JlZ2F0b3IudmFsdWUoKTtcbiAgICB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICB0ZC5jbGFzc05hbWUgPSBcInB2dEdyYW5kVG90YWxcIjtcbiAgICB0ZC5pbm5lckhUTUwgPSB0b3RhbEFnZ3JlZ2F0b3IuZm9ybWF0KHZhbCk7XG4gICAgdGQuc2V0QXR0cmlidXRlKFwiZGF0YS12YWx1ZVwiLCB2YWwpO1xuICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICByZXN1bHQuYXBwZW5kQ2hpbGQodHIpO1xuICAgIHJlc3VsdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW51bXJvd3NcIiwgcm93S2V5cy5sZW5ndGgpO1xuICAgIHJlc3VsdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW51bWNvbHNcIiwgY29sS2V5cy5sZW5ndGgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cblxuICAvKlxuICBQaXZvdCBUYWJsZSBjb3JlOiBjcmVhdGUgUGl2b3REYXRhIG9iamVjdCBhbmQgY2FsbCBSZW5kZXJlciBvbiBpdFxuICAgKi9cblxuICAkLmZuLnBpdm90ID0gZnVuY3Rpb24oaW5wdXQsIG9wdHMpIHtcbiAgICB2YXIgZGVmYXVsdHMsIGUsIHBpdm90RGF0YSwgcmVzdWx0LCB4O1xuICAgIGRlZmF1bHRzID0ge1xuICAgICAgY29sczogW10sXG4gICAgICByb3dzOiBbXSxcbiAgICAgIGZpbHRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSxcbiAgICAgIGFnZ3JlZ2F0b3I6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnQoKSgpLFxuICAgICAgYWdncmVnYXRvck5hbWU6IFwiQ291bnRcIixcbiAgICAgIGRlcml2ZWRBdHRyaWJ1dGVzOiB7fSxcbiAgICAgIHJlbmRlcmVyOiBwaXZvdFRhYmxlUmVuZGVyZXIsXG4gICAgICByZW5kZXJlck9wdGlvbnM6IG51bGwsXG4gICAgICBsb2NhbGVTdHJpbmdzOiBsb2NhbGVzLmVuLmxvY2FsZVN0cmluZ3NcbiAgICB9O1xuICAgIG9wdHMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0cyk7XG4gICAgcmVzdWx0ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgcGl2b3REYXRhID0gbmV3IFBpdm90RGF0YShpbnB1dCwgb3B0cyk7XG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBvcHRzLnJlbmRlcmVyKHBpdm90RGF0YSwgb3B0cy5yZW5kZXJlck9wdGlvbnMpO1xuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgIGUgPSBfZXJyb3I7XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSAkKFwiPHNwYW4+XCIpLmh0bWwob3B0cy5sb2NhbGVTdHJpbmdzLnJlbmRlckVycm9yKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIGUgPSBfZXJyb3I7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUuc3RhY2spO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gJChcIjxzcGFuPlwiKS5odG1sKG9wdHMubG9jYWxlU3RyaW5ncy5jb21wdXRlRXJyb3IpO1xuICAgIH1cbiAgICB4ID0gdGhpc1swXTtcbiAgICB3aGlsZSAoeC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHgucmVtb3ZlQ2hpbGQoeC5sYXN0Q2hpbGQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hcHBlbmQocmVzdWx0KTtcbiAgfTtcblxuXG4gIC8qXG4gIFBpdm90IFRhYmxlIFVJOiBjYWxscyBQaXZvdCBUYWJsZSBjb3JlIGFib3ZlIHdpdGggb3B0aW9ucyBzZXQgYnkgdXNlclxuICAgKi9cblxuICAkLmZuLnBpdm90VUkgPSBmdW5jdGlvbihpbnB1dCwgaW5wdXRPcHRzLCBvdmVyd3JpdGUsIGxvY2FsZSkge1xuICAgIHZhciBhLCBhZ2dyZWdhdG9yLCBhdHRyTGVuZ3RoLCBheGlzVmFsdWVzLCBjLCBjb2xMaXN0LCBkZWZhdWx0cywgZSwgZXhpc3RpbmdPcHRzLCBpLCBpbml0aWFsUmVuZGVyLCBrLCBvcHRzLCBwaXZvdFRhYmxlLCByZWZyZXNoLCByZWZyZXNoRGVsYXllZCwgcmVuZGVyZXIsIHJlbmRlcmVyQ29udHJvbCwgc2hvd25BdHRyaWJ1dGVzLCB0YmxDb2xzLCB0cjEsIHRyMiwgdWlUYWJsZSwgdW51c2VkQXR0cnNWZXJ0aWNhbEF1dG9PdmVycmlkZSwgeCwgX2ZuLCBfaSwgX2osIF9rLCBfbCwgX2xlbiwgX2xlbjEsIF9sZW4yLCBfbGVuMywgX3JlZiwgX3JlZjEsIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG4gICAgaWYgKG92ZXJ3cml0ZSA9PSBudWxsKSB7XG4gICAgICBvdmVyd3JpdGUgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGxvY2FsZSA9PSBudWxsKSB7XG4gICAgICBsb2NhbGUgPSBcImVuXCI7XG4gICAgfVxuICAgIGRlZmF1bHRzID0ge1xuICAgICAgZGVyaXZlZEF0dHJpYnV0ZXM6IHt9LFxuICAgICAgYWdncmVnYXRvcnM6IGxvY2FsZXNbbG9jYWxlXS5hZ2dyZWdhdG9ycyxcbiAgICAgIHJlbmRlcmVyczogbG9jYWxlc1tsb2NhbGVdLnJlbmRlcmVycyxcbiAgICAgIGhpZGRlbkF0dHJpYnV0ZXM6IFtdLFxuICAgICAgbWVudUxpbWl0OiAyMDAsXG4gICAgICBjb2xzOiBbXSxcbiAgICAgIHJvd3M6IFtdLFxuICAgICAgdmFsczogW10sXG4gICAgICBleGNsdXNpb25zOiB7fSxcbiAgICAgIHVudXNlZEF0dHJzVmVydGljYWw6IFwiYXV0b1wiLFxuICAgICAgYXV0b1NvcnRVbnVzZWRBdHRyczogZmFsc2UsXG4gICAgICByZW5kZXJlck9wdGlvbnM6IHtcbiAgICAgICAgbG9jYWxlU3RyaW5nczogbG9jYWxlc1tsb2NhbGVdLmxvY2FsZVN0cmluZ3NcbiAgICAgIH0sXG4gICAgICBvblJlZnJlc2g6IG51bGwsXG4gICAgICBmaWx0ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBsb2NhbGVTdHJpbmdzOiBsb2NhbGVzW2xvY2FsZV0ubG9jYWxlU3RyaW5nc1xuICAgIH07XG4gICAgZXhpc3RpbmdPcHRzID0gdGhpcy5kYXRhKFwicGl2b3RVSU9wdGlvbnNcIik7XG4gICAgaWYgKChleGlzdGluZ09wdHMgPT0gbnVsbCkgfHwgb3ZlcndyaXRlKSB7XG4gICAgICBvcHRzID0gJC5leHRlbmQoZGVmYXVsdHMsIGlucHV0T3B0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdHMgPSBleGlzdGluZ09wdHM7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBpbnB1dCA9IFBpdm90RGF0YS5jb252ZXJ0VG9BcnJheShpbnB1dCk7XG4gICAgICB0YmxDb2xzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZWYgPSBpbnB1dFswXTtcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChrIGluIF9yZWYpIHtcbiAgICAgICAgICBpZiAoIV9faGFzUHJvcC5jYWxsKF9yZWYsIGspKSBjb250aW51ZTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGspO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pKCk7XG4gICAgICBfcmVmID0gb3B0cy5kZXJpdmVkQXR0cmlidXRlcztcbiAgICAgIGZvciAoYyBpbiBfcmVmKSB7XG4gICAgICAgIGlmICghX19oYXNQcm9wLmNhbGwoX3JlZiwgYykpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoKF9faW5kZXhPZi5jYWxsKHRibENvbHMsIGMpIDwgMCkpIHtcbiAgICAgICAgICB0YmxDb2xzLnB1c2goYyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF4aXNWYWx1ZXMgPSB7fTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gdGJsQ29scy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICB4ID0gdGJsQ29sc1tfaV07XG4gICAgICAgIGF4aXNWYWx1ZXNbeF0gPSB7fTtcbiAgICAgIH1cbiAgICAgIFBpdm90RGF0YS5mb3JFYWNoUmVjb3JkKGlucHV0LCBvcHRzLmRlcml2ZWRBdHRyaWJ1dGVzLCBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgICAgdmFyIHYsIF9iYXNlLCBfcmVzdWx0cztcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChrIGluIHJlY29yZCkge1xuICAgICAgICAgIGlmICghX19oYXNQcm9wLmNhbGwocmVjb3JkLCBrKSkgY29udGludWU7XG4gICAgICAgICAgdiA9IHJlY29yZFtrXTtcbiAgICAgICAgICBpZiAoIShvcHRzLmZpbHRlcihyZWNvcmQpKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh2ID09IG51bGwpIHtcbiAgICAgICAgICAgIHYgPSBcIm51bGxcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKChfYmFzZSA9IGF4aXNWYWx1ZXNba10pW3ZdID09IG51bGwpIHtcbiAgICAgICAgICAgIF9iYXNlW3ZdID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChheGlzVmFsdWVzW2tdW3ZdKyspO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pO1xuICAgICAgdWlUYWJsZSA9ICQoXCI8dGFibGUgY2VsbHBhZGRpbmc9JzUnPlwiKTtcbiAgICAgIHJlbmRlcmVyQ29udHJvbCA9ICQoXCI8dGQ+XCIpO1xuICAgICAgcmVuZGVyZXIgPSAkKFwiPHNlbGVjdCBjbGFzcz0ncHZ0UmVuZGVyZXInPlwiKS5hcHBlbmRUbyhyZW5kZXJlckNvbnRyb2wpLmJpbmQoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByZWZyZXNoKCk7XG4gICAgICB9KTtcbiAgICAgIF9yZWYxID0gb3B0cy5yZW5kZXJlcnM7XG4gICAgICBmb3IgKHggaW4gX3JlZjEpIHtcbiAgICAgICAgaWYgKCFfX2hhc1Byb3AuY2FsbChfcmVmMSwgeCkpIGNvbnRpbnVlO1xuICAgICAgICAkKFwiPG9wdGlvbj5cIikudmFsKHgpLmh0bWwoeCkuYXBwZW5kVG8ocmVuZGVyZXIpO1xuICAgICAgfVxuICAgICAgY29sTGlzdCA9ICQoXCI8dGQgY2xhc3M9J3B2dEF4aXNDb250YWluZXIgcHZ0VW51c2VkJz5cIik7XG4gICAgICBzaG93bkF0dHJpYnV0ZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaiwgX2xlbjEsIF9yZXN1bHRzO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSB0YmxDb2xzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgIGMgPSB0YmxDb2xzW19qXTtcbiAgICAgICAgICBpZiAoX19pbmRleE9mLmNhbGwob3B0cy5oaWRkZW5BdHRyaWJ1dGVzLCBjKSA8IDApIHtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goYyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pKCk7XG4gICAgICB1bnVzZWRBdHRyc1ZlcnRpY2FsQXV0b092ZXJyaWRlID0gZmFsc2U7XG4gICAgICBpZiAob3B0cy51bnVzZWRBdHRyc1ZlcnRpY2FsID09PSBcImF1dG9cIikge1xuICAgICAgICBhdHRyTGVuZ3RoID0gMDtcbiAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gc2hvd25BdHRyaWJ1dGVzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgIGEgPSBzaG93bkF0dHJpYnV0ZXNbX2pdO1xuICAgICAgICAgIGF0dHJMZW5ndGggKz0gYS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgdW51c2VkQXR0cnNWZXJ0aWNhbEF1dG9PdmVycmlkZSA9IGF0dHJMZW5ndGggPiAxMjA7XG4gICAgICB9XG4gICAgICBpZiAob3B0cy51bnVzZWRBdHRyc1ZlcnRpY2FsID09PSB0cnVlIHx8IHVudXNlZEF0dHJzVmVydGljYWxBdXRvT3ZlcnJpZGUpIHtcbiAgICAgICAgY29sTGlzdC5hZGRDbGFzcygncHZ0VmVydExpc3QnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbExpc3QuYWRkQ2xhc3MoJ3B2dEhvcml6TGlzdCcpO1xuICAgICAgfVxuICAgICAgX2ZuID0gZnVuY3Rpb24oYykge1xuICAgICAgICB2YXIgYXR0ckVsZW0sIGJ0bnMsIGNoZWNrQ29udGFpbmVyLCBmaWx0ZXJJdGVtLCBmaWx0ZXJJdGVtRXhjbHVkZWQsIGhhc0V4Y2x1ZGVkSXRlbSwga2V5cywgc2hvd0ZpbHRlckxpc3QsIHRyaWFuZ2xlTGluaywgdXBkYXRlRmlsdGVyLCB2LCB2YWx1ZUxpc3QsIF9rLCBfbGVuMiwgX3JlZjI7XG4gICAgICAgIGtleXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9yZXN1bHRzO1xuICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChrIGluIGF4aXNWYWx1ZXNbY10pIHtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goayk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkoKTtcbiAgICAgICAgaGFzRXhjbHVkZWRJdGVtID0gZmFsc2U7XG4gICAgICAgIHZhbHVlTGlzdCA9ICQoXCI8ZGl2PlwiKS5hZGRDbGFzcygncHZ0RmlsdGVyQm94JykuaGlkZSgpO1xuICAgICAgICB2YWx1ZUxpc3QuYXBwZW5kKCQoXCI8aDQ+XCIpLnRleHQoXCJcIiArIGMgKyBcIiAoXCIgKyBrZXlzLmxlbmd0aCArIFwiKVwiKSk7XG4gICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IG9wdHMubWVudUxpbWl0KSB7XG4gICAgICAgICAgdmFsdWVMaXN0LmFwcGVuZCgkKFwiPHA+XCIpLmh0bWwob3B0cy5sb2NhbGVTdHJpbmdzLnRvb01hbnkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBidG5zID0gJChcIjxwPlwiKS5hcHBlbmRUbyh2YWx1ZUxpc3QpO1xuICAgICAgICAgIGJ0bnMuYXBwZW5kKCQoXCI8YnV0dG9uPlwiKS5odG1sKG9wdHMubG9jYWxlU3RyaW5ncy5zZWxlY3RBbGwpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZUxpc3QuZmluZChcImlucHV0OnZpc2libGVcIikucHJvcChcImNoZWNrZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIGJ0bnMuYXBwZW5kKCQoXCI8YnV0dG9uPlwiKS5odG1sKG9wdHMubG9jYWxlU3RyaW5ncy5zZWxlY3ROb25lKS5iaW5kKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVMaXN0LmZpbmQoXCJpbnB1dDp2aXNpYmxlXCIpLnByb3AoXCJjaGVja2VkXCIsIGZhbHNlKTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgYnRucy5hcHBlbmQoJChcIjxpbnB1dD5cIikuYWRkQ2xhc3MoXCJwdnRTZWFyY2hcIikuYXR0cihcInBsYWNlaG9sZGVyXCIsIG9wdHMubG9jYWxlU3RyaW5ncy5maWx0ZXJSZXN1bHRzKS5iaW5kKFwia2V5dXBcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyO1xuICAgICAgICAgICAgZmlsdGVyID0gJCh0aGlzKS52YWwoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuICQodGhpcykucGFyZW50cyhcIi5wdnRGaWx0ZXJCb3hcIikuZmluZCgnbGFiZWwgc3BhbicpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciB0ZXN0U3RyaW5nO1xuICAgICAgICAgICAgICB0ZXN0U3RyaW5nID0gJCh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcik7XG4gICAgICAgICAgICAgIGlmICh0ZXN0U3RyaW5nICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnBhcmVudCgpLnNob3coKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5wYXJlbnQoKS5oaWRlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgICBjaGVja0NvbnRhaW5lciA9ICQoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInB2dENoZWNrQ29udGFpbmVyXCIpLmFwcGVuZFRvKHZhbHVlTGlzdCk7XG4gICAgICAgICAgX3JlZjIgPSBrZXlzLnNvcnQobmF0dXJhbFNvcnQpO1xuICAgICAgICAgIGZvciAoX2sgPSAwLCBfbGVuMiA9IF9yZWYyLmxlbmd0aDsgX2sgPCBfbGVuMjsgX2srKykge1xuICAgICAgICAgICAgayA9IF9yZWYyW19rXTtcbiAgICAgICAgICAgIHYgPSBheGlzVmFsdWVzW2NdW2tdO1xuICAgICAgICAgICAgZmlsdGVySXRlbSA9ICQoXCI8bGFiZWw+XCIpO1xuICAgICAgICAgICAgZmlsdGVySXRlbUV4Y2x1ZGVkID0gb3B0cy5leGNsdXNpb25zW2NdID8gKF9faW5kZXhPZi5jYWxsKG9wdHMuZXhjbHVzaW9uc1tjXSwgaykgPj0gMCkgOiBmYWxzZTtcbiAgICAgICAgICAgIGhhc0V4Y2x1ZGVkSXRlbSB8fCAoaGFzRXhjbHVkZWRJdGVtID0gZmlsdGVySXRlbUV4Y2x1ZGVkKTtcbiAgICAgICAgICAgICQoXCI8aW5wdXQgdHlwZT0nY2hlY2tib3gnIGNsYXNzPSdwdnRGaWx0ZXInPlwiKS5hdHRyKFwiY2hlY2tlZFwiLCAhZmlsdGVySXRlbUV4Y2x1ZGVkKS5kYXRhKFwiZmlsdGVyXCIsIFtjLCBrXSkuYXBwZW5kVG8oZmlsdGVySXRlbSk7XG4gICAgICAgICAgICBmaWx0ZXJJdGVtLmFwcGVuZCgkKFwiPHNwYW4+XCIpLnRleHQoXCJcIiArIGsgKyBcIiAoXCIgKyB2ICsgXCIpXCIpKTtcbiAgICAgICAgICAgIGNoZWNrQ29udGFpbmVyLmFwcGVuZCgkKFwiPHA+XCIpLmFwcGVuZChmaWx0ZXJJdGVtKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUZpbHRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB1bnNlbGVjdGVkQ291bnQ7XG4gICAgICAgICAgdW5zZWxlY3RlZENvdW50ID0gJCh2YWx1ZUxpc3QpLmZpbmQoXCJbdHlwZT0nY2hlY2tib3gnXVwiKS5sZW5ndGggLSAkKHZhbHVlTGlzdCkuZmluZChcIlt0eXBlPSdjaGVja2JveCddOmNoZWNrZWRcIikubGVuZ3RoO1xuICAgICAgICAgIGlmICh1bnNlbGVjdGVkQ291bnQgPiAwKSB7XG4gICAgICAgICAgICBhdHRyRWxlbS5hZGRDbGFzcyhcInB2dEZpbHRlcmVkQXR0cmlidXRlXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhdHRyRWxlbS5yZW1vdmVDbGFzcyhcInB2dEZpbHRlcmVkQXR0cmlidXRlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoa2V5cy5sZW5ndGggPiBvcHRzLm1lbnVMaW1pdCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlTGlzdC50b2dnbGUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlTGlzdC50b2dnbGUoMCwgcmVmcmVzaCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAkKFwiPHA+XCIpLmFwcGVuZFRvKHZhbHVlTGlzdCkuYXBwZW5kKCQoXCI8YnV0dG9uPlwiKS50ZXh0KFwiT0tcIikuYmluZChcImNsaWNrXCIsIHVwZGF0ZUZpbHRlcikpO1xuICAgICAgICBzaG93RmlsdGVyTGlzdCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB2YWx1ZUxpc3QuY3NzKHtcbiAgICAgICAgICAgIGxlZnQ6IGUucGFnZVgsXG4gICAgICAgICAgICB0b3A6IGUucGFnZVlcbiAgICAgICAgICB9KS50b2dnbGUoKTtcbiAgICAgICAgICAkKCcucHZ0U2VhcmNoJykudmFsKCcnKTtcbiAgICAgICAgICByZXR1cm4gJCgnbGFiZWwnKS5zaG93KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRyaWFuZ2xlTGluayA9ICQoXCI8c3BhbiBjbGFzcz0ncHZ0VHJpYW5nbGUnPlwiKS5odG1sKFwiICYjeDI1QkU7XCIpLmJpbmQoXCJjbGlja1wiLCBzaG93RmlsdGVyTGlzdCk7XG4gICAgICAgIGF0dHJFbGVtID0gJChcIjxsaSBjbGFzcz0nYXhpc19cIiArIGkgKyBcIic+XCIpLmFwcGVuZCgkKFwiPHNwYW4gY2xhc3M9J3B2dEF0dHInPlwiKS50ZXh0KGMpLmRhdGEoXCJhdHRyTmFtZVwiLCBjKS5hcHBlbmQodHJpYW5nbGVMaW5rKSk7XG4gICAgICAgIGlmIChoYXNFeGNsdWRlZEl0ZW0pIHtcbiAgICAgICAgICBhdHRyRWxlbS5hZGRDbGFzcygncHZ0RmlsdGVyZWRBdHRyaWJ1dGUnKTtcbiAgICAgICAgfVxuICAgICAgICBjb2xMaXN0LmFwcGVuZChhdHRyRWxlbSkuYXBwZW5kKHZhbHVlTGlzdCk7XG4gICAgICAgIHJldHVybiBhdHRyRWxlbS5iaW5kKFwiZGJsY2xpY2tcIiwgc2hvd0ZpbHRlckxpc3QpO1xuICAgICAgfTtcbiAgICAgIGZvciAoaSBpbiBzaG93bkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgYyA9IHNob3duQXR0cmlidXRlc1tpXTtcbiAgICAgICAgX2ZuKGMpO1xuICAgICAgfVxuICAgICAgdHIxID0gJChcIjx0cj5cIikuYXBwZW5kVG8odWlUYWJsZSk7XG4gICAgICBhZ2dyZWdhdG9yID0gJChcIjxzZWxlY3QgY2xhc3M9J3B2dEFnZ3JlZ2F0b3InPlwiKS5iaW5kKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcmVmcmVzaCgpO1xuICAgICAgfSk7XG4gICAgICBfcmVmMiA9IG9wdHMuYWdncmVnYXRvcnM7XG4gICAgICBmb3IgKHggaW4gX3JlZjIpIHtcbiAgICAgICAgaWYgKCFfX2hhc1Byb3AuY2FsbChfcmVmMiwgeCkpIGNvbnRpbnVlO1xuICAgICAgICBhZ2dyZWdhdG9yLmFwcGVuZCgkKFwiPG9wdGlvbj5cIikudmFsKHgpLmh0bWwoeCkpO1xuICAgICAgfVxuICAgICAgJChcIjx0ZCBjbGFzcz0ncHZ0VmFscyc+XCIpLmFwcGVuZFRvKHRyMSkuYXBwZW5kKGFnZ3JlZ2F0b3IpLmFwcGVuZCgkKFwiPGJyPlwiKSk7XG4gICAgICAkKFwiPHRkIGNsYXNzPSdwdnRBeGlzQ29udGFpbmVyIHB2dEhvcml6TGlzdCBwdnRDb2xzJz5cIikuYXBwZW5kVG8odHIxKTtcbiAgICAgIHRyMiA9ICQoXCI8dHI+XCIpLmFwcGVuZFRvKHVpVGFibGUpO1xuICAgICAgdHIyLmFwcGVuZCgkKFwiPHRkIHZhbGlnbj0ndG9wJyBjbGFzcz0ncHZ0QXhpc0NvbnRhaW5lciBwdnRSb3dzJz5cIikpO1xuICAgICAgcGl2b3RUYWJsZSA9ICQoXCI8dGQgdmFsaWduPSd0b3AnIGNsYXNzPSdwdnRSZW5kZXJlckFyZWEnPlwiKS5hcHBlbmRUbyh0cjIpO1xuICAgICAgaWYgKG9wdHMudW51c2VkQXR0cnNWZXJ0aWNhbCA9PT0gdHJ1ZSB8fCB1bnVzZWRBdHRyc1ZlcnRpY2FsQXV0b092ZXJyaWRlKSB7XG4gICAgICAgIHVpVGFibGUuZmluZCgndHI6bnRoLWNoaWxkKDEpJykucHJlcGVuZChyZW5kZXJlckNvbnRyb2wpO1xuICAgICAgICB1aVRhYmxlLmZpbmQoJ3RyOm50aC1jaGlsZCgyKScpLnByZXBlbmQoY29sTGlzdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aVRhYmxlLnByZXBlbmQoJChcIjx0cj5cIikuYXBwZW5kKHJlbmRlcmVyQ29udHJvbCkuYXBwZW5kKGNvbExpc3QpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaHRtbCh1aVRhYmxlKTtcbiAgICAgIF9yZWYzID0gb3B0cy5jb2xzO1xuICAgICAgZm9yIChfayA9IDAsIF9sZW4yID0gX3JlZjMubGVuZ3RoOyBfayA8IF9sZW4yOyBfaysrKSB7XG4gICAgICAgIHggPSBfcmVmM1tfa107XG4gICAgICAgIHRoaXMuZmluZChcIi5wdnRDb2xzXCIpLmFwcGVuZCh0aGlzLmZpbmQoXCIuYXhpc19cIiArIChzaG93bkF0dHJpYnV0ZXMuaW5kZXhPZih4KSkpKTtcbiAgICAgIH1cbiAgICAgIF9yZWY0ID0gb3B0cy5yb3dzO1xuICAgICAgZm9yIChfbCA9IDAsIF9sZW4zID0gX3JlZjQubGVuZ3RoOyBfbCA8IF9sZW4zOyBfbCsrKSB7XG4gICAgICAgIHggPSBfcmVmNFtfbF07XG4gICAgICAgIHRoaXMuZmluZChcIi5wdnRSb3dzXCIpLmFwcGVuZCh0aGlzLmZpbmQoXCIuYXhpc19cIiArIChzaG93bkF0dHJpYnV0ZXMuaW5kZXhPZih4KSkpKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRzLmFnZ3JlZ2F0b3JOYW1lICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5maW5kKFwiLnB2dEFnZ3JlZ2F0b3JcIikudmFsKG9wdHMuYWdncmVnYXRvck5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdHMucmVuZGVyZXJOYW1lICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5maW5kKFwiLnB2dFJlbmRlcmVyXCIpLnZhbChvcHRzLnJlbmRlcmVyTmFtZSk7XG4gICAgICB9XG4gICAgICBpbml0aWFsUmVuZGVyID0gdHJ1ZTtcbiAgICAgIHJlZnJlc2hEZWxheWVkID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYXR0ciwgZXhjbHVzaW9ucywgbmF0U29ydCwgbmV3RHJvcGRvd24sIG51bUlucHV0c1RvUHJvY2VzcywgcGl2b3RVSU9wdGlvbnMsIHB2dFZhbHMsIHN1Ym9wdHMsIHVudXNlZEF0dHJzQ29udGFpbmVyLCB2YWxzLCBfbGVuNCwgX20sIF9uLCBfcmVmNTtcbiAgICAgICAgICBzdWJvcHRzID0ge1xuICAgICAgICAgICAgZGVyaXZlZEF0dHJpYnV0ZXM6IG9wdHMuZGVyaXZlZEF0dHJpYnV0ZXMsXG4gICAgICAgICAgICBsb2NhbGVTdHJpbmdzOiBvcHRzLmxvY2FsZVN0cmluZ3MsXG4gICAgICAgICAgICByZW5kZXJlck9wdGlvbnM6IG9wdHMucmVuZGVyZXJPcHRpb25zLFxuICAgICAgICAgICAgY29sczogW10sXG4gICAgICAgICAgICByb3dzOiBbXVxuICAgICAgICAgIH07XG4gICAgICAgICAgbnVtSW5wdXRzVG9Qcm9jZXNzID0gKF9yZWY1ID0gb3B0cy5hZ2dyZWdhdG9yc1thZ2dyZWdhdG9yLnZhbCgpXShbXSkoKS5udW1JbnB1dHMpICE9IG51bGwgPyBfcmVmNSA6IDA7XG4gICAgICAgICAgdmFscyA9IFtdO1xuICAgICAgICAgIF90aGlzLmZpbmQoXCIucHZ0Um93cyBsaSBzcGFuLnB2dEF0dHJcIikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJvcHRzLnJvd3MucHVzaCgkKHRoaXMpLmRhdGEoXCJhdHRyTmFtZVwiKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgX3RoaXMuZmluZChcIi5wdnRDb2xzIGxpIHNwYW4ucHZ0QXR0clwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1Ym9wdHMuY29scy5wdXNoKCQodGhpcykuZGF0YShcImF0dHJOYW1lXCIpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfdGhpcy5maW5kKFwiLnB2dFZhbHMgc2VsZWN0LnB2dEF0dHJEcm9wZG93blwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKG51bUlucHV0c1RvUHJvY2VzcyA9PT0gMCkge1xuICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG51bUlucHV0c1RvUHJvY2Vzcy0tO1xuICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWxzLnB1c2goJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAobnVtSW5wdXRzVG9Qcm9jZXNzICE9PSAwKSB7XG4gICAgICAgICAgICBwdnRWYWxzID0gX3RoaXMuZmluZChcIi5wdnRWYWxzXCIpO1xuICAgICAgICAgICAgZm9yICh4ID0gX20gPSAwOyAwIDw9IG51bUlucHV0c1RvUHJvY2VzcyA/IF9tIDwgbnVtSW5wdXRzVG9Qcm9jZXNzIDogX20gPiBudW1JbnB1dHNUb1Byb2Nlc3M7IHggPSAwIDw9IG51bUlucHV0c1RvUHJvY2VzcyA/ICsrX20gOiAtLV9tKSB7XG4gICAgICAgICAgICAgIG5ld0Ryb3Bkb3duID0gJChcIjxzZWxlY3QgY2xhc3M9J3B2dEF0dHJEcm9wZG93bic+XCIpLmFwcGVuZCgkKFwiPG9wdGlvbj5cIikpLmJpbmQoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGZvciAoX24gPSAwLCBfbGVuNCA9IHNob3duQXR0cmlidXRlcy5sZW5ndGg7IF9uIDwgX2xlbjQ7IF9uKyspIHtcbiAgICAgICAgICAgICAgICBhdHRyID0gc2hvd25BdHRyaWJ1dGVzW19uXTtcbiAgICAgICAgICAgICAgICBuZXdEcm9wZG93bi5hcHBlbmQoJChcIjxvcHRpb24+XCIpLnZhbChhdHRyKS50ZXh0KGF0dHIpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwdnRWYWxzLmFwcGVuZChuZXdEcm9wZG93bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpbml0aWFsUmVuZGVyKSB7XG4gICAgICAgICAgICB2YWxzID0gb3B0cy52YWxzO1xuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICBfdGhpcy5maW5kKFwiLnB2dFZhbHMgc2VsZWN0LnB2dEF0dHJEcm9wZG93blwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAkKHRoaXMpLnZhbCh2YWxzW2ldKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGkrKztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW5pdGlhbFJlbmRlciA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJvcHRzLmFnZ3JlZ2F0b3JOYW1lID0gYWdncmVnYXRvci52YWwoKTtcbiAgICAgICAgICBzdWJvcHRzLnZhbHMgPSB2YWxzO1xuICAgICAgICAgIHN1Ym9wdHMuYWdncmVnYXRvciA9IG9wdHMuYWdncmVnYXRvcnNbYWdncmVnYXRvci52YWwoKV0odmFscyk7XG4gICAgICAgICAgc3Vib3B0cy5yZW5kZXJlciA9IG9wdHMucmVuZGVyZXJzW3JlbmRlcmVyLnZhbCgpXTtcbiAgICAgICAgICBleGNsdXNpb25zID0ge307XG4gICAgICAgICAgX3RoaXMuZmluZCgnaW5wdXQucHZ0RmlsdGVyJykubm90KCc6Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyO1xuICAgICAgICAgICAgZmlsdGVyID0gJCh0aGlzKS5kYXRhKFwiZmlsdGVyXCIpO1xuICAgICAgICAgICAgaWYgKGV4Y2x1c2lvbnNbZmlsdGVyWzBdXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHJldHVybiBleGNsdXNpb25zW2ZpbHRlclswXV0ucHVzaChmaWx0ZXJbMV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGV4Y2x1c2lvbnNbZmlsdGVyWzBdXSA9IFtmaWx0ZXJbMV1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN1Ym9wdHMuZmlsdGVyID0gZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICAgICAgICB2YXIgZXhjbHVkZWRJdGVtcywgX3JlZjY7XG4gICAgICAgICAgICBpZiAoIW9wdHMuZmlsdGVyKHJlY29yZCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChrIGluIGV4Y2x1c2lvbnMpIHtcbiAgICAgICAgICAgICAgZXhjbHVkZWRJdGVtcyA9IGV4Y2x1c2lvbnNba107XG4gICAgICAgICAgICAgIGlmIChfcmVmNiA9IFwiXCIgKyByZWNvcmRba10sIF9faW5kZXhPZi5jYWxsKGV4Y2x1ZGVkSXRlbXMsIF9yZWY2KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHBpdm90VGFibGUucGl2b3QoaW5wdXQsIHN1Ym9wdHMpO1xuICAgICAgICAgIHBpdm90VUlPcHRpb25zID0gJC5leHRlbmQob3B0cywge1xuICAgICAgICAgICAgY29sczogc3Vib3B0cy5jb2xzLFxuICAgICAgICAgICAgcm93czogc3Vib3B0cy5yb3dzLFxuICAgICAgICAgICAgdmFsczogdmFscyxcbiAgICAgICAgICAgIGV4Y2x1c2lvbnM6IGV4Y2x1c2lvbnMsXG4gICAgICAgICAgICBhZ2dyZWdhdG9yTmFtZTogYWdncmVnYXRvci52YWwoKSxcbiAgICAgICAgICAgIHJlbmRlcmVyTmFtZTogcmVuZGVyZXIudmFsKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfdGhpcy5kYXRhKFwicGl2b3RVSU9wdGlvbnNcIiwgcGl2b3RVSU9wdGlvbnMpO1xuICAgICAgICAgIGlmIChvcHRzLmF1dG9Tb3J0VW51c2VkQXR0cnMpIHtcbiAgICAgICAgICAgIG5hdFNvcnQgPSAkLnBpdm90VXRpbGl0aWVzLm5hdHVyYWxTb3J0O1xuICAgICAgICAgICAgdW51c2VkQXR0cnNDb250YWluZXIgPSBfdGhpcy5maW5kKFwidGQucHZ0VW51c2VkLnB2dEF4aXNDb250YWluZXJcIik7XG4gICAgICAgICAgICAkKHVudXNlZEF0dHJzQ29udGFpbmVyKS5jaGlsZHJlbihcImxpXCIpLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgICByZXR1cm4gbmF0U29ydCgkKGEpLnRleHQoKSwgJChiKS50ZXh0KCkpO1xuICAgICAgICAgICAgfSkuYXBwZW5kVG8odW51c2VkQXR0cnNDb250YWluZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwaXZvdFRhYmxlLmNzcyhcIm9wYWNpdHlcIiwgMSk7XG4gICAgICAgICAgaWYgKG9wdHMub25SZWZyZXNoICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRzLm9uUmVmcmVzaChwaXZvdFVJT3B0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICByZWZyZXNoID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBwaXZvdFRhYmxlLmNzcyhcIm9wYWNpdHlcIiwgMC41KTtcbiAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChyZWZyZXNoRGVsYXllZCwgMTApO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICByZWZyZXNoKCk7XG4gICAgICB0aGlzLmZpbmQoXCIucHZ0QXhpc0NvbnRhaW5lclwiKS5zb3J0YWJsZSh7XG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oZSwgdWkpIHtcbiAgICAgICAgICBpZiAodWkuc2VuZGVyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiByZWZyZXNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb25uZWN0V2l0aDogdGhpcy5maW5kKFwiLnB2dEF4aXNDb250YWluZXJcIiksXG4gICAgICAgIGl0ZW1zOiAnbGknLFxuICAgICAgICBwbGFjZWhvbGRlcjogJ3B2dFBsYWNlaG9sZGVyJ1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlID0gX2Vycm9yO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlLnN0YWNrKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaHRtbChvcHRzLmxvY2FsZVN0cmluZ3MudWlSZW5kZXJFcnJvcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG5cbiAgLypcbiAgSGVhdG1hcCBwb3N0LXByb2Nlc3NpbmdcbiAgICovXG5cbiAgJC5mbi5oZWF0bWFwID0gZnVuY3Rpb24oc2NvcGUpIHtcbiAgICB2YXIgY29sb3JHZW4sIGhlYXRtYXBwZXIsIGksIGosIG51bUNvbHMsIG51bVJvd3MsIF9pLCBfajtcbiAgICBpZiAoc2NvcGUgPT0gbnVsbCkge1xuICAgICAgc2NvcGUgPSBcImhlYXRtYXBcIjtcbiAgICB9XG4gICAgbnVtUm93cyA9IHRoaXMuZGF0YShcIm51bXJvd3NcIik7XG4gICAgbnVtQ29scyA9IHRoaXMuZGF0YShcIm51bWNvbHNcIik7XG4gICAgY29sb3JHZW4gPSBmdW5jdGlvbihjb2xvciwgbWluLCBtYXgpIHtcbiAgICAgIHZhciBoZXhHZW47XG4gICAgICBoZXhHZW4gPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHN3aXRjaCAoY29sb3IpIHtcbiAgICAgICAgICBjYXNlIFwicmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oaGV4KSB7XG4gICAgICAgICAgICAgIHJldHVybiBcImZmXCIgKyBoZXggKyBoZXg7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIGNhc2UgXCJncmVlblwiOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGhleCkge1xuICAgICAgICAgICAgICByZXR1cm4gXCJcIiArIGhleCArIFwiZmZcIiArIGhleDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgY2FzZSBcImJsdWVcIjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihoZXgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFwiXCIgKyBoZXggKyBoZXggKyBcImZmXCI7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KSgpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgdmFyIGhleCwgaW50ZW5zaXR5O1xuICAgICAgICBpbnRlbnNpdHkgPSAyNTUgLSBNYXRoLnJvdW5kKDI1NSAqICh4IC0gbWluKSAvIChtYXggLSBtaW4pKTtcbiAgICAgICAgaGV4ID0gaW50ZW5zaXR5LnRvU3RyaW5nKDE2KS5zcGxpdChcIi5cIilbMF07XG4gICAgICAgIGlmIChoZXgubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgaGV4ID0gMCArIGhleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGV4R2VuKGhleCk7XG4gICAgICB9O1xuICAgIH07XG4gICAgaGVhdG1hcHBlciA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBjb2xvcikge1xuICAgICAgICB2YXIgY29sb3JGb3IsIGZvckVhY2hDZWxsLCB2YWx1ZXM7XG4gICAgICAgIGZvckVhY2hDZWxsID0gZnVuY3Rpb24oZikge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5maW5kKHNjb3BlKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHg7XG4gICAgICAgICAgICB4ID0gJCh0aGlzKS5kYXRhKFwidmFsdWVcIik7XG4gICAgICAgICAgICBpZiAoKHggIT0gbnVsbCkgJiYgaXNGaW5pdGUoeCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGYoeCwgJCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3JFYWNoQ2VsbChmdW5jdGlvbih4KSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlcy5wdXNoKHgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29sb3JGb3IgPSBjb2xvckdlbihjb2xvciwgTWF0aC5taW4uYXBwbHkoTWF0aCwgdmFsdWVzKSwgTWF0aC5tYXguYXBwbHkoTWF0aCwgdmFsdWVzKSk7XG4gICAgICAgIHJldHVybiBmb3JFYWNoQ2VsbChmdW5jdGlvbih4LCBlbGVtKSB7XG4gICAgICAgICAgcmV0dXJuIGVsZW0uY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBcIiNcIiArIGNvbG9yRm9yKHgpKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpO1xuICAgIHN3aXRjaCAoc2NvcGUpIHtcbiAgICAgIGNhc2UgXCJoZWF0bWFwXCI6XG4gICAgICAgIGhlYXRtYXBwZXIoXCIucHZ0VmFsXCIsIFwicmVkXCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJyb3doZWF0bWFwXCI6XG4gICAgICAgIGZvciAoaSA9IF9pID0gMDsgMCA8PSBudW1Sb3dzID8gX2kgPCBudW1Sb3dzIDogX2kgPiBudW1Sb3dzOyBpID0gMCA8PSBudW1Sb3dzID8gKytfaSA6IC0tX2kpIHtcbiAgICAgICAgICBoZWF0bWFwcGVyKFwiLnB2dFZhbC5yb3dcIiArIGksIFwicmVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNvbGhlYXRtYXBcIjpcbiAgICAgICAgZm9yIChqID0gX2ogPSAwOyAwIDw9IG51bUNvbHMgPyBfaiA8IG51bUNvbHMgOiBfaiA+IG51bUNvbHM7IGogPSAwIDw9IG51bUNvbHMgPyArK19qIDogLS1faikge1xuICAgICAgICAgIGhlYXRtYXBwZXIoXCIucHZ0VmFsLmNvbFwiICsgaiwgXCJyZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGVhdG1hcHBlcihcIi5wdnRUb3RhbC5yb3dUb3RhbFwiLCBcInJlZFwiKTtcbiAgICBoZWF0bWFwcGVyKFwiLnB2dFRvdGFsLmNvbFRvdGFsXCIsIFwicmVkXCIpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG5cbiAgLypcbiAgQmFyY2hhcnQgcG9zdC1wcm9jZXNzaW5nXG4gICAqL1xuXG4gICQuZm4uYmFyY2hhcnQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYmFyY2hhcnRlciwgaSwgbnVtQ29scywgbnVtUm93cywgX2k7XG4gICAgbnVtUm93cyA9IHRoaXMuZGF0YShcIm51bXJvd3NcIik7XG4gICAgbnVtQ29scyA9IHRoaXMuZGF0YShcIm51bWNvbHNcIik7XG4gICAgYmFyY2hhcnRlciA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlKSB7XG4gICAgICAgIHZhciBmb3JFYWNoQ2VsbCwgbWF4LCBzY2FsZXIsIHZhbHVlcztcbiAgICAgICAgZm9yRWFjaENlbGwgPSBmdW5jdGlvbihmKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmZpbmQoc2NvcGUpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgeDtcbiAgICAgICAgICAgIHggPSAkKHRoaXMpLmRhdGEoXCJ2YWx1ZVwiKTtcbiAgICAgICAgICAgIGlmICgoeCAhPSBudWxsKSAmJiBpc0Zpbml0ZSh4KSkge1xuICAgICAgICAgICAgICByZXR1cm4gZih4LCAkKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFsdWVzID0gW107XG4gICAgICAgIGZvckVhY2hDZWxsKGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWVzLnB1c2goeCk7XG4gICAgICAgIH0pO1xuICAgICAgICBtYXggPSBNYXRoLm1heC5hcHBseShNYXRoLCB2YWx1ZXMpO1xuICAgICAgICBzY2FsZXIgPSBmdW5jdGlvbih4KSB7XG4gICAgICAgICAgcmV0dXJuIDEwMCAqIHggLyAoMS40ICogbWF4KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZvckVhY2hDZWxsKGZ1bmN0aW9uKHgsIGVsZW0pIHtcbiAgICAgICAgICB2YXIgdGV4dCwgd3JhcHBlcjtcbiAgICAgICAgICB0ZXh0ID0gZWxlbS50ZXh0KCk7XG4gICAgICAgICAgd3JhcHBlciA9ICQoXCI8ZGl2PlwiKS5jc3Moe1xuICAgICAgICAgICAgXCJwb3NpdGlvblwiOiBcInJlbGF0aXZlXCIsXG4gICAgICAgICAgICBcImhlaWdodFwiOiBcIjU1cHhcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdyYXBwZXIuYXBwZW5kKCQoXCI8ZGl2PlwiKS5jc3Moe1xuICAgICAgICAgICAgXCJwb3NpdGlvblwiOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICBcImJvdHRvbVwiOiAwLFxuICAgICAgICAgICAgXCJsZWZ0XCI6IDAsXG4gICAgICAgICAgICBcInJpZ2h0XCI6IDAsXG4gICAgICAgICAgICBcImhlaWdodFwiOiBzY2FsZXIoeCkgKyBcIiVcIixcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZC1jb2xvclwiOiBcImdyYXlcIlxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICB3cmFwcGVyLmFwcGVuZCgkKFwiPGRpdj5cIikudGV4dCh0ZXh0KS5jc3Moe1xuICAgICAgICAgICAgXCJwb3NpdGlvblwiOiBcInJlbGF0aXZlXCIsXG4gICAgICAgICAgICBcInBhZGRpbmctbGVmdFwiOiBcIjVweFwiLFxuICAgICAgICAgICAgXCJwYWRkaW5nLXJpZ2h0XCI6IFwiNXB4XCJcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgcmV0dXJuIGVsZW0uY3NzKHtcbiAgICAgICAgICAgIFwicGFkZGluZ1wiOiAwLFxuICAgICAgICAgICAgXCJwYWRkaW5nLXRvcFwiOiBcIjVweFwiLFxuICAgICAgICAgICAgXCJ0ZXh0LWFsaWduXCI6IFwiY2VudGVyXCJcbiAgICAgICAgICB9KS5odG1sKHdyYXBwZXIpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkodGhpcyk7XG4gICAgZm9yIChpID0gX2kgPSAwOyAwIDw9IG51bVJvd3MgPyBfaSA8IG51bVJvd3MgOiBfaSA+IG51bVJvd3M7IGkgPSAwIDw9IG51bVJvd3MgPyArK19pIDogLS1faSkge1xuICAgICAgYmFyY2hhcnRlcihcIi5wdnRWYWwucm93XCIgKyBpKTtcbiAgICB9XG4gICAgYmFyY2hhcnRlcihcIi5wdnRUb3RhbC5jb2xUb3RhbFwiKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbihmdW5jdGlvbigpIHtcbiAgdmFyICQ7XG5cbiAgJCA9IGpRdWVyeTtcblxuICAkLnBpdm90VXRpbGl0aWVzLmQzX3JlbmRlcmVycyA9IHtcbiAgICBUcmVlbWFwOiBmdW5jdGlvbihwaXZvdERhdGEsIG9wdHMpIHtcbiAgICAgIHZhciBhZGRUb1RyZWUsIGNvbG9yLCBkZWZhdWx0cywgaGVpZ2h0LCBtYXJnaW4sIHJlc3VsdCwgcm93S2V5LCB0cmVlLCB0cmVlbWFwLCB2YWx1ZSwgd2lkdGgsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgZGVmYXVsdHMgPSB7XG4gICAgICAgIGxvY2FsZVN0cmluZ3M6IHt9XG4gICAgICB9O1xuICAgICAgb3B0cyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRzKTtcbiAgICAgIHJlc3VsdCA9ICQoXCI8ZGl2IHN0eWxlPSd3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyc+XCIpO1xuICAgICAgdHJlZSA9IHtcbiAgICAgICAgbmFtZTogXCJBbGxcIixcbiAgICAgICAgY2hpbGRyZW46IFtdXG4gICAgICB9O1xuICAgICAgYWRkVG9UcmVlID0gZnVuY3Rpb24odHJlZSwgcGF0aCwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGNoaWxkLCBuZXdDaGlsZCwgeCwgX2ksIF9sZW4sIF9yZWY7XG4gICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRyZWUudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyZWUuY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgICAgIHRyZWUuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB4ID0gcGF0aC5zaGlmdCgpO1xuICAgICAgICBfcmVmID0gdHJlZS5jaGlsZHJlbjtcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgY2hpbGQgPSBfcmVmW19pXTtcbiAgICAgICAgICBpZiAoIShjaGlsZC5uYW1lID09PSB4KSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFkZFRvVHJlZShjaGlsZCwgcGF0aCwgdmFsdWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuZXdDaGlsZCA9IHtcbiAgICAgICAgICBuYW1lOiB4XG4gICAgICAgIH07XG4gICAgICAgIGFkZFRvVHJlZShuZXdDaGlsZCwgcGF0aCwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdHJlZS5jaGlsZHJlbi5wdXNoKG5ld0NoaWxkKTtcbiAgICAgIH07XG4gICAgICBfcmVmID0gcGl2b3REYXRhLmdldFJvd0tleXMoKTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICByb3dLZXkgPSBfcmVmW19pXTtcbiAgICAgICAgdmFsdWUgPSBwaXZvdERhdGEuZ2V0QWdncmVnYXRvcihyb3dLZXksIFtdKS52YWx1ZSgpO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIGFkZFRvVHJlZSh0cmVlLCByb3dLZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29sb3IgPSBkMy5zY2FsZS5jYXRlZ29yeTEwKCk7XG4gICAgICB3aWR0aCA9ICQod2luZG93KS53aWR0aCgpIC8gMS40O1xuICAgICAgaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpIC8gMS40O1xuICAgICAgbWFyZ2luID0gMTA7XG4gICAgICB0cmVlbWFwID0gZDMubGF5b3V0LnRyZWVtYXAoKS5zaXplKFt3aWR0aCwgaGVpZ2h0XSkuc3RpY2t5KHRydWUpLnZhbHVlKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGQuc2l6ZTtcbiAgICAgIH0pO1xuICAgICAgZDMuc2VsZWN0KHJlc3VsdFswXSkuYXBwZW5kKFwiZGl2XCIpLnN0eWxlKFwicG9zaXRpb25cIiwgXCJyZWxhdGl2ZVwiKS5zdHlsZShcIndpZHRoXCIsICh3aWR0aCArIG1hcmdpbiAqIDIpICsgXCJweFwiKS5zdHlsZShcImhlaWdodFwiLCAoaGVpZ2h0ICsgbWFyZ2luICogMikgKyBcInB4XCIpLnN0eWxlKFwibGVmdFwiLCBtYXJnaW4gKyBcInB4XCIpLnN0eWxlKFwidG9wXCIsIG1hcmdpbiArIFwicHhcIikuZGF0dW0odHJlZSkuc2VsZWN0QWxsKFwiLm5vZGVcIikuZGF0YSh0cmVlbWFwLnBhZGRpbmcoWzE1LCAwLCAwLCAwXSkudmFsdWUoZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZC52YWx1ZTtcbiAgICAgIH0pLm5vZGVzKS5lbnRlcigpLmFwcGVuZChcImRpdlwiKS5hdHRyKFwiY2xhc3NcIiwgXCJub2RlXCIpLnN0eWxlKFwiYmFja2dyb3VuZFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIGlmIChkLmNoaWxkcmVuICE9IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gXCJsaWdodGdyZXlcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gY29sb3IoZC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSkudGV4dChmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBkLm5hbWU7XG4gICAgICB9KS5jYWxsKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnN0eWxlKFwibGVmdFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIGQueCArIFwicHhcIjtcbiAgICAgICAgfSkuc3R5bGUoXCJ0b3BcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHJldHVybiBkLnkgKyBcInB4XCI7XG4gICAgICAgIH0pLnN0eWxlKFwid2lkdGhcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBkLmR4IC0gMSkgKyBcInB4XCI7XG4gICAgICAgIH0pLnN0eWxlKFwiaGVpZ2h0XCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgZC5keSAtIDEpICsgXCJweFwiO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKXt2YXIgbj10aGlzLHQ9bi5fLHI9e30sZT1BcnJheS5wcm90b3R5cGUsdT1PYmplY3QucHJvdG90eXBlLGk9RnVuY3Rpb24ucHJvdG90eXBlLGE9ZS5wdXNoLG89ZS5zbGljZSxjPWUuY29uY2F0LGw9dS50b1N0cmluZyxmPXUuaGFzT3duUHJvcGVydHkscz1lLmZvckVhY2gscD1lLm1hcCxoPWUucmVkdWNlLHY9ZS5yZWR1Y2VSaWdodCxkPWUuZmlsdGVyLGc9ZS5ldmVyeSxtPWUuc29tZSx5PWUuaW5kZXhPZixiPWUubGFzdEluZGV4T2YseD1BcnJheS5pc0FycmF5LF89T2JqZWN0LmtleXMsaj1pLmJpbmQsdz1mdW5jdGlvbihuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIHc/bjp0aGlzIGluc3RhbmNlb2Ygdz8odGhpcy5fd3JhcHBlZD1uLHZvaWQgMCk6bmV3IHcobil9O1widW5kZWZpbmVkXCIhPXR5cGVvZiBleHBvcnRzPyhcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cyYmKGV4cG9ydHM9bW9kdWxlLmV4cG9ydHM9dyksZXhwb3J0cy5fPXcpOm4uXz13LHcuVkVSU0lPTj1cIjEuNC40XCI7dmFyIEE9dy5lYWNoPXcuZm9yRWFjaD1mdW5jdGlvbihuLHQsZSl7aWYobnVsbCE9bilpZihzJiZuLmZvckVhY2g9PT1zKW4uZm9yRWFjaCh0LGUpO2Vsc2UgaWYobi5sZW5ndGg9PT0rbi5sZW5ndGgpe2Zvcih2YXIgdT0wLGk9bi5sZW5ndGg7aT51O3UrKylpZih0LmNhbGwoZSxuW3VdLHUsbik9PT1yKXJldHVybn1lbHNlIGZvcih2YXIgYSBpbiBuKWlmKHcuaGFzKG4sYSkmJnQuY2FsbChlLG5bYV0sYSxuKT09PXIpcmV0dXJufTt3Lm1hcD13LmNvbGxlY3Q9ZnVuY3Rpb24obix0LHIpe3ZhciBlPVtdO3JldHVybiBudWxsPT1uP2U6cCYmbi5tYXA9PT1wP24ubWFwKHQscik6KEEobixmdW5jdGlvbihuLHUsaSl7ZVtlLmxlbmd0aF09dC5jYWxsKHIsbix1LGkpfSksZSl9O3ZhciBPPVwiUmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZVwiO3cucmVkdWNlPXcuZm9sZGw9dy5pbmplY3Q9ZnVuY3Rpb24obix0LHIsZSl7dmFyIHU9YXJndW1lbnRzLmxlbmd0aD4yO2lmKG51bGw9PW4mJihuPVtdKSxoJiZuLnJlZHVjZT09PWgpcmV0dXJuIGUmJih0PXcuYmluZCh0LGUpKSx1P24ucmVkdWNlKHQscik6bi5yZWR1Y2UodCk7aWYoQShuLGZ1bmN0aW9uKG4saSxhKXt1P3I9dC5jYWxsKGUscixuLGksYSk6KHI9bix1PSEwKX0pLCF1KXRocm93IG5ldyBUeXBlRXJyb3IoTyk7cmV0dXJuIHJ9LHcucmVkdWNlUmlnaHQ9dy5mb2xkcj1mdW5jdGlvbihuLHQscixlKXt2YXIgdT1hcmd1bWVudHMubGVuZ3RoPjI7aWYobnVsbD09biYmKG49W10pLHYmJm4ucmVkdWNlUmlnaHQ9PT12KXJldHVybiBlJiYodD13LmJpbmQodCxlKSksdT9uLnJlZHVjZVJpZ2h0KHQscik6bi5yZWR1Y2VSaWdodCh0KTt2YXIgaT1uLmxlbmd0aDtpZihpIT09K2kpe3ZhciBhPXcua2V5cyhuKTtpPWEubGVuZ3RofWlmKEEobixmdW5jdGlvbihvLGMsbCl7Yz1hP2FbLS1pXTotLWksdT9yPXQuY2FsbChlLHIsbltjXSxjLGwpOihyPW5bY10sdT0hMCl9KSwhdSl0aHJvdyBuZXcgVHlwZUVycm9yKE8pO3JldHVybiByfSx3LmZpbmQ9dy5kZXRlY3Q9ZnVuY3Rpb24obix0LHIpe3ZhciBlO3JldHVybiBFKG4sZnVuY3Rpb24obix1LGkpe3JldHVybiB0LmNhbGwocixuLHUsaSk/KGU9biwhMCk6dm9pZCAwfSksZX0sdy5maWx0ZXI9dy5zZWxlY3Q9ZnVuY3Rpb24obix0LHIpe3ZhciBlPVtdO3JldHVybiBudWxsPT1uP2U6ZCYmbi5maWx0ZXI9PT1kP24uZmlsdGVyKHQscik6KEEobixmdW5jdGlvbihuLHUsaSl7dC5jYWxsKHIsbix1LGkpJiYoZVtlLmxlbmd0aF09bil9KSxlKX0sdy5yZWplY3Q9ZnVuY3Rpb24obix0LHIpe3JldHVybiB3LmZpbHRlcihuLGZ1bmN0aW9uKG4sZSx1KXtyZXR1cm4hdC5jYWxsKHIsbixlLHUpfSxyKX0sdy5ldmVyeT13LmFsbD1mdW5jdGlvbihuLHQsZSl7dHx8KHQ9dy5pZGVudGl0eSk7dmFyIHU9ITA7cmV0dXJuIG51bGw9PW4/dTpnJiZuLmV2ZXJ5PT09Zz9uLmV2ZXJ5KHQsZSk6KEEobixmdW5jdGlvbihuLGksYSl7cmV0dXJuKHU9dSYmdC5jYWxsKGUsbixpLGEpKT92b2lkIDA6cn0pLCEhdSl9O3ZhciBFPXcuc29tZT13LmFueT1mdW5jdGlvbihuLHQsZSl7dHx8KHQ9dy5pZGVudGl0eSk7dmFyIHU9ITE7cmV0dXJuIG51bGw9PW4/dTptJiZuLnNvbWU9PT1tP24uc29tZSh0LGUpOihBKG4sZnVuY3Rpb24obixpLGEpe3JldHVybiB1fHwodT10LmNhbGwoZSxuLGksYSkpP3I6dm9pZCAwfSksISF1KX07dy5jb250YWlucz13LmluY2x1ZGU9ZnVuY3Rpb24obix0KXtyZXR1cm4gbnVsbD09bj8hMTp5JiZuLmluZGV4T2Y9PT15P24uaW5kZXhPZih0KSE9LTE6RShuLGZ1bmN0aW9uKG4pe3JldHVybiBuPT09dH0pfSx3Lmludm9rZT1mdW5jdGlvbihuLHQpe3ZhciByPW8uY2FsbChhcmd1bWVudHMsMiksZT13LmlzRnVuY3Rpb24odCk7cmV0dXJuIHcubWFwKG4sZnVuY3Rpb24obil7cmV0dXJuKGU/dDpuW3RdKS5hcHBseShuLHIpfSl9LHcucGx1Y2s9ZnVuY3Rpb24obix0KXtyZXR1cm4gdy5tYXAobixmdW5jdGlvbihuKXtyZXR1cm4gblt0XX0pfSx3LndoZXJlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdy5pc0VtcHR5KHQpP3I/bnVsbDpbXTp3W3I/XCJmaW5kXCI6XCJmaWx0ZXJcIl0obixmdW5jdGlvbihuKXtmb3IodmFyIHIgaW4gdClpZih0W3JdIT09bltyXSlyZXR1cm4hMTtyZXR1cm4hMH0pfSx3LmZpbmRXaGVyZT1mdW5jdGlvbihuLHQpe3JldHVybiB3LndoZXJlKG4sdCwhMCl9LHcubWF4PWZ1bmN0aW9uKG4sdCxyKXtpZighdCYmdy5pc0FycmF5KG4pJiZuWzBdPT09K25bMF0mJjY1NTM1Pm4ubGVuZ3RoKXJldHVybiBNYXRoLm1heC5hcHBseShNYXRoLG4pO2lmKCF0JiZ3LmlzRW1wdHkobikpcmV0dXJuLTEvMDt2YXIgZT17Y29tcHV0ZWQ6LTEvMCx2YWx1ZTotMS8wfTtyZXR1cm4gQShuLGZ1bmN0aW9uKG4sdSxpKXt2YXIgYT10P3QuY2FsbChyLG4sdSxpKTpuO2E+PWUuY29tcHV0ZWQmJihlPXt2YWx1ZTpuLGNvbXB1dGVkOmF9KX0pLGUudmFsdWV9LHcubWluPWZ1bmN0aW9uKG4sdCxyKXtpZighdCYmdy5pc0FycmF5KG4pJiZuWzBdPT09K25bMF0mJjY1NTM1Pm4ubGVuZ3RoKXJldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLG4pO2lmKCF0JiZ3LmlzRW1wdHkobikpcmV0dXJuIDEvMDt2YXIgZT17Y29tcHV0ZWQ6MS8wLHZhbHVlOjEvMH07cmV0dXJuIEEobixmdW5jdGlvbihuLHUsaSl7dmFyIGE9dD90LmNhbGwocixuLHUsaSk6bjtlLmNvbXB1dGVkPmEmJihlPXt2YWx1ZTpuLGNvbXB1dGVkOmF9KX0pLGUudmFsdWV9LHcuc2h1ZmZsZT1mdW5jdGlvbihuKXt2YXIgdCxyPTAsZT1bXTtyZXR1cm4gQShuLGZ1bmN0aW9uKG4pe3Q9dy5yYW5kb20ocisrKSxlW3ItMV09ZVt0XSxlW3RdPW59KSxlfTt2YXIgaz1mdW5jdGlvbihuKXtyZXR1cm4gdy5pc0Z1bmN0aW9uKG4pP246ZnVuY3Rpb24odCl7cmV0dXJuIHRbbl19fTt3LnNvcnRCeT1mdW5jdGlvbihuLHQscil7dmFyIGU9ayh0KTtyZXR1cm4gdy5wbHVjayh3Lm1hcChuLGZ1bmN0aW9uKG4sdCx1KXtyZXR1cm57dmFsdWU6bixpbmRleDp0LGNyaXRlcmlhOmUuY2FsbChyLG4sdCx1KX19KS5zb3J0KGZ1bmN0aW9uKG4sdCl7dmFyIHI9bi5jcml0ZXJpYSxlPXQuY3JpdGVyaWE7aWYociE9PWUpe2lmKHI+ZXx8cj09PXZvaWQgMClyZXR1cm4gMTtpZihlPnJ8fGU9PT12b2lkIDApcmV0dXJuLTF9cmV0dXJuIG4uaW5kZXg8dC5pbmRleD8tMToxfSksXCJ2YWx1ZVwiKX07dmFyIEY9ZnVuY3Rpb24obix0LHIsZSl7dmFyIHU9e30saT1rKHR8fHcuaWRlbnRpdHkpO3JldHVybiBBKG4sZnVuY3Rpb24odCxhKXt2YXIgbz1pLmNhbGwocix0LGEsbik7ZSh1LG8sdCl9KSx1fTt3Lmdyb3VwQnk9ZnVuY3Rpb24obix0LHIpe3JldHVybiBGKG4sdCxyLGZ1bmN0aW9uKG4sdCxyKXsody5oYXMobix0KT9uW3RdOm5bdF09W10pLnB1c2gocil9KX0sdy5jb3VudEJ5PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gRihuLHQscixmdW5jdGlvbihuLHQpe3cuaGFzKG4sdCl8fChuW3RdPTApLG5bdF0rK30pfSx3LnNvcnRlZEluZGV4PWZ1bmN0aW9uKG4sdCxyLGUpe3I9bnVsbD09cj93LmlkZW50aXR5Omsocik7Zm9yKHZhciB1PXIuY2FsbChlLHQpLGk9MCxhPW4ubGVuZ3RoO2E+aTspe3ZhciBvPWkrYT4+PjE7dT5yLmNhbGwoZSxuW29dKT9pPW8rMTphPW99cmV0dXJuIGl9LHcudG9BcnJheT1mdW5jdGlvbihuKXtyZXR1cm4gbj93LmlzQXJyYXkobik/by5jYWxsKG4pOm4ubGVuZ3RoPT09K24ubGVuZ3RoP3cubWFwKG4sdy5pZGVudGl0eSk6dy52YWx1ZXMobik6W119LHcuc2l6ZT1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj8wOm4ubGVuZ3RoPT09K24ubGVuZ3RoP24ubGVuZ3RoOncua2V5cyhuKS5sZW5ndGh9LHcuZmlyc3Q9dy5oZWFkPXcudGFrZT1mdW5jdGlvbihuLHQscil7cmV0dXJuIG51bGw9PW4/dm9pZCAwOm51bGw9PXR8fHI/blswXTpvLmNhbGwobiwwLHQpfSx3LmluaXRpYWw9ZnVuY3Rpb24obix0LHIpe3JldHVybiBvLmNhbGwobiwwLG4ubGVuZ3RoLShudWxsPT10fHxyPzE6dCkpfSx3Lmxhc3Q9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT1uP3ZvaWQgMDpudWxsPT10fHxyP25bbi5sZW5ndGgtMV06by5jYWxsKG4sTWF0aC5tYXgobi5sZW5ndGgtdCwwKSl9LHcucmVzdD13LnRhaWw9dy5kcm9wPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gby5jYWxsKG4sbnVsbD09dHx8cj8xOnQpfSx3LmNvbXBhY3Q9ZnVuY3Rpb24obil7cmV0dXJuIHcuZmlsdGVyKG4sdy5pZGVudGl0eSl9O3ZhciBSPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gQShuLGZ1bmN0aW9uKG4pe3cuaXNBcnJheShuKT90P2EuYXBwbHkocixuKTpSKG4sdCxyKTpyLnB1c2gobil9KSxyfTt3LmZsYXR0ZW49ZnVuY3Rpb24obix0KXtyZXR1cm4gUihuLHQsW10pfSx3LndpdGhvdXQ9ZnVuY3Rpb24obil7cmV0dXJuIHcuZGlmZmVyZW5jZShuLG8uY2FsbChhcmd1bWVudHMsMSkpfSx3LnVuaXE9dy51bmlxdWU9ZnVuY3Rpb24obix0LHIsZSl7dy5pc0Z1bmN0aW9uKHQpJiYoZT1yLHI9dCx0PSExKTt2YXIgdT1yP3cubWFwKG4scixlKTpuLGk9W10sYT1bXTtyZXR1cm4gQSh1LGZ1bmN0aW9uKHIsZSl7KHQ/ZSYmYVthLmxlbmd0aC0xXT09PXI6dy5jb250YWlucyhhLHIpKXx8KGEucHVzaChyKSxpLnB1c2gobltlXSkpfSksaX0sdy51bmlvbj1mdW5jdGlvbigpe3JldHVybiB3LnVuaXEoYy5hcHBseShlLGFyZ3VtZW50cykpfSx3LmludGVyc2VjdGlvbj1mdW5jdGlvbihuKXt2YXIgdD1vLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB3LmZpbHRlcih3LnVuaXEobiksZnVuY3Rpb24obil7cmV0dXJuIHcuZXZlcnkodCxmdW5jdGlvbih0KXtyZXR1cm4gdy5pbmRleE9mKHQsbik+PTB9KX0pfSx3LmRpZmZlcmVuY2U9ZnVuY3Rpb24obil7dmFyIHQ9Yy5hcHBseShlLG8uY2FsbChhcmd1bWVudHMsMSkpO3JldHVybiB3LmZpbHRlcihuLGZ1bmN0aW9uKG4pe3JldHVybiF3LmNvbnRhaW5zKHQsbil9KX0sdy56aXA9ZnVuY3Rpb24oKXtmb3IodmFyIG49by5jYWxsKGFyZ3VtZW50cyksdD13Lm1heCh3LnBsdWNrKG4sXCJsZW5ndGhcIikpLHI9QXJyYXkodCksZT0wO3Q+ZTtlKyspcltlXT13LnBsdWNrKG4sXCJcIitlKTtyZXR1cm4gcn0sdy5vYmplY3Q9ZnVuY3Rpb24obix0KXtpZihudWxsPT1uKXJldHVybnt9O2Zvcih2YXIgcj17fSxlPTAsdT1uLmxlbmd0aDt1PmU7ZSsrKXQ/cltuW2VdXT10W2VdOnJbbltlXVswXV09bltlXVsxXTtyZXR1cm4gcn0sdy5pbmRleE9mPWZ1bmN0aW9uKG4sdCxyKXtpZihudWxsPT1uKXJldHVybi0xO3ZhciBlPTAsdT1uLmxlbmd0aDtpZihyKXtpZihcIm51bWJlclwiIT10eXBlb2YgcilyZXR1cm4gZT13LnNvcnRlZEluZGV4KG4sdCksbltlXT09PXQ/ZTotMTtlPTA+cj9NYXRoLm1heCgwLHUrcik6cn1pZih5JiZuLmluZGV4T2Y9PT15KXJldHVybiBuLmluZGV4T2YodCxyKTtmb3IoO3U+ZTtlKyspaWYobltlXT09PXQpcmV0dXJuIGU7cmV0dXJuLTF9LHcubGFzdEluZGV4T2Y9ZnVuY3Rpb24obix0LHIpe2lmKG51bGw9PW4pcmV0dXJuLTE7dmFyIGU9bnVsbCE9cjtpZihiJiZuLmxhc3RJbmRleE9mPT09YilyZXR1cm4gZT9uLmxhc3RJbmRleE9mKHQscik6bi5sYXN0SW5kZXhPZih0KTtmb3IodmFyIHU9ZT9yOm4ubGVuZ3RoO3UtLTspaWYoblt1XT09PXQpcmV0dXJuIHU7cmV0dXJuLTF9LHcucmFuZ2U9ZnVuY3Rpb24obix0LHIpezE+PWFyZ3VtZW50cy5sZW5ndGgmJih0PW58fDAsbj0wKSxyPWFyZ3VtZW50c1syXXx8MTtmb3IodmFyIGU9TWF0aC5tYXgoTWF0aC5jZWlsKCh0LW4pL3IpLDApLHU9MCxpPUFycmF5KGUpO2U+dTspaVt1KytdPW4sbis9cjtyZXR1cm4gaX0sdy5iaW5kPWZ1bmN0aW9uKG4sdCl7aWYobi5iaW5kPT09aiYmailyZXR1cm4gai5hcHBseShuLG8uY2FsbChhcmd1bWVudHMsMSkpO3ZhciByPW8uY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkodCxyLmNvbmNhdChvLmNhbGwoYXJndW1lbnRzKSkpfX0sdy5wYXJ0aWFsPWZ1bmN0aW9uKG4pe3ZhciB0PW8uY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkodGhpcyx0LmNvbmNhdChvLmNhbGwoYXJndW1lbnRzKSkpfX0sdy5iaW5kQWxsPWZ1bmN0aW9uKG4pe3ZhciB0PW8uY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIDA9PT10Lmxlbmd0aCYmKHQ9dy5mdW5jdGlvbnMobikpLEEodCxmdW5jdGlvbih0KXtuW3RdPXcuYmluZChuW3RdLG4pfSksbn0sdy5tZW1vaXplPWZ1bmN0aW9uKG4sdCl7dmFyIHI9e307cmV0dXJuIHR8fCh0PXcuaWRlbnRpdHkpLGZ1bmN0aW9uKCl7dmFyIGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHcuaGFzKHIsZSk/cltlXTpyW2VdPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sdy5kZWxheT1mdW5jdGlvbihuLHQpe3ZhciByPW8uY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseShudWxsLHIpfSx0KX0sdy5kZWZlcj1mdW5jdGlvbihuKXtyZXR1cm4gdy5kZWxheS5hcHBseSh3LFtuLDFdLmNvbmNhdChvLmNhbGwoYXJndW1lbnRzLDEpKSl9LHcudGhyb3R0bGU9ZnVuY3Rpb24obix0KXt2YXIgcixlLHUsaSxhPTAsbz1mdW5jdGlvbigpe2E9bmV3IERhdGUsdT1udWxsLGk9bi5hcHBseShyLGUpfTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYz1uZXcgRGF0ZSxsPXQtKGMtYSk7cmV0dXJuIHI9dGhpcyxlPWFyZ3VtZW50cywwPj1sPyhjbGVhclRpbWVvdXQodSksdT1udWxsLGE9YyxpPW4uYXBwbHkocixlKSk6dXx8KHU9c2V0VGltZW91dChvLGwpKSxpfX0sdy5kZWJvdW5jZT1mdW5jdGlvbihuLHQscil7dmFyIGUsdTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaT10aGlzLGE9YXJndW1lbnRzLG89ZnVuY3Rpb24oKXtlPW51bGwscnx8KHU9bi5hcHBseShpLGEpKX0sYz1yJiYhZTtyZXR1cm4gY2xlYXJUaW1lb3V0KGUpLGU9c2V0VGltZW91dChvLHQpLGMmJih1PW4uYXBwbHkoaSxhKSksdX19LHcub25jZT1mdW5jdGlvbihuKXt2YXIgdCxyPSExO3JldHVybiBmdW5jdGlvbigpe3JldHVybiByP3Q6KHI9ITAsdD1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPW51bGwsdCl9fSx3LndyYXA9ZnVuY3Rpb24obix0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1bbl07cmV0dXJuIGEuYXBwbHkocixhcmd1bWVudHMpLHQuYXBwbHkodGhpcyxyKX19LHcuY29tcG9zZT1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cztyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl0PVtuW3JdLmFwcGx5KHRoaXMsdCldO3JldHVybiB0WzBdfX0sdy5hZnRlcj1mdW5jdGlvbihuLHQpe3JldHVybiAwPj1uP3QoKTpmdW5jdGlvbigpe3JldHVybiAxPi0tbj90LmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9fSx3LmtleXM9X3x8ZnVuY3Rpb24obil7aWYobiE9PU9iamVjdChuKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBvYmplY3RcIik7dmFyIHQ9W107Zm9yKHZhciByIGluIG4pdy5oYXMobixyKSYmKHRbdC5sZW5ndGhdPXIpO3JldHVybiB0fSx3LnZhbHVlcz1mdW5jdGlvbihuKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gbil3LmhhcyhuLHIpJiZ0LnB1c2gobltyXSk7cmV0dXJuIHR9LHcucGFpcnM9ZnVuY3Rpb24obil7dmFyIHQ9W107Zm9yKHZhciByIGluIG4pdy5oYXMobixyKSYmdC5wdXNoKFtyLG5bcl1dKTtyZXR1cm4gdH0sdy5pbnZlcnQ9ZnVuY3Rpb24obil7dmFyIHQ9e307Zm9yKHZhciByIGluIG4pdy5oYXMobixyKSYmKHRbbltyXV09cik7cmV0dXJuIHR9LHcuZnVuY3Rpb25zPXcubWV0aG9kcz1mdW5jdGlvbihuKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gbil3LmlzRnVuY3Rpb24obltyXSkmJnQucHVzaChyKTtyZXR1cm4gdC5zb3J0KCl9LHcuZXh0ZW5kPWZ1bmN0aW9uKG4pe3JldHVybiBBKG8uY2FsbChhcmd1bWVudHMsMSksZnVuY3Rpb24odCl7aWYodClmb3IodmFyIHIgaW4gdCluW3JdPXRbcl19KSxufSx3LnBpY2s9ZnVuY3Rpb24obil7dmFyIHQ9e30scj1jLmFwcGx5KGUsby5jYWxsKGFyZ3VtZW50cywxKSk7cmV0dXJuIEEocixmdW5jdGlvbihyKXtyIGluIG4mJih0W3JdPW5bcl0pfSksdH0sdy5vbWl0PWZ1bmN0aW9uKG4pe3ZhciB0PXt9LHI9Yy5hcHBseShlLG8uY2FsbChhcmd1bWVudHMsMSkpO2Zvcih2YXIgdSBpbiBuKXcuY29udGFpbnMocix1KXx8KHRbdV09blt1XSk7cmV0dXJuIHR9LHcuZGVmYXVsdHM9ZnVuY3Rpb24obil7cmV0dXJuIEEoby5jYWxsKGFyZ3VtZW50cywxKSxmdW5jdGlvbih0KXtpZih0KWZvcih2YXIgciBpbiB0KW51bGw9PW5bcl0mJihuW3JdPXRbcl0pfSksbn0sdy5jbG9uZT1mdW5jdGlvbihuKXtyZXR1cm4gdy5pc09iamVjdChuKT93LmlzQXJyYXkobik/bi5zbGljZSgpOncuZXh0ZW5kKHt9LG4pOm59LHcudGFwPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQobiksbn07dmFyIEk9ZnVuY3Rpb24obix0LHIsZSl7aWYobj09PXQpcmV0dXJuIDAhPT1ufHwxL249PTEvdDtpZihudWxsPT1ufHxudWxsPT10KXJldHVybiBuPT09dDtuIGluc3RhbmNlb2YgdyYmKG49bi5fd3JhcHBlZCksdCBpbnN0YW5jZW9mIHcmJih0PXQuX3dyYXBwZWQpO3ZhciB1PWwuY2FsbChuKTtpZih1IT1sLmNhbGwodCkpcmV0dXJuITE7c3dpdGNoKHUpe2Nhc2VcIltvYmplY3QgU3RyaW5nXVwiOnJldHVybiBuPT10K1wiXCI7Y2FzZVwiW29iamVjdCBOdW1iZXJdXCI6cmV0dXJuIG4hPStuP3QhPSt0OjA9PW4/MS9uPT0xL3Q6bj09K3Q7Y2FzZVwiW29iamVjdCBEYXRlXVwiOmNhc2VcIltvYmplY3QgQm9vbGVhbl1cIjpyZXR1cm4rbj09K3Q7Y2FzZVwiW29iamVjdCBSZWdFeHBdXCI6cmV0dXJuIG4uc291cmNlPT10LnNvdXJjZSYmbi5nbG9iYWw9PXQuZ2xvYmFsJiZuLm11bHRpbGluZT09dC5tdWx0aWxpbmUmJm4uaWdub3JlQ2FzZT09dC5pZ25vcmVDYXNlfWlmKFwib2JqZWN0XCIhPXR5cGVvZiBufHxcIm9iamVjdFwiIT10eXBlb2YgdClyZXR1cm4hMTtmb3IodmFyIGk9ci5sZW5ndGg7aS0tOylpZihyW2ldPT1uKXJldHVybiBlW2ldPT10O3IucHVzaChuKSxlLnB1c2godCk7dmFyIGE9MCxvPSEwO2lmKFwiW29iamVjdCBBcnJheV1cIj09dSl7aWYoYT1uLmxlbmd0aCxvPWE9PXQubGVuZ3RoKWZvcig7YS0tJiYobz1JKG5bYV0sdFthXSxyLGUpKTspO31lbHNle3ZhciBjPW4uY29uc3RydWN0b3IsZj10LmNvbnN0cnVjdG9yO2lmKGMhPT1mJiYhKHcuaXNGdW5jdGlvbihjKSYmYyBpbnN0YW5jZW9mIGMmJncuaXNGdW5jdGlvbihmKSYmZiBpbnN0YW5jZW9mIGYpKXJldHVybiExO2Zvcih2YXIgcyBpbiBuKWlmKHcuaGFzKG4scykmJihhKyssIShvPXcuaGFzKHQscykmJkkobltzXSx0W3NdLHIsZSkpKSlicmVhaztpZihvKXtmb3IocyBpbiB0KWlmKHcuaGFzKHQscykmJiFhLS0pYnJlYWs7bz0hYX19cmV0dXJuIHIucG9wKCksZS5wb3AoKSxvfTt3LmlzRXF1YWw9ZnVuY3Rpb24obix0KXtyZXR1cm4gSShuLHQsW10sW10pfSx3LmlzRW1wdHk9ZnVuY3Rpb24obil7aWYobnVsbD09bilyZXR1cm4hMDtpZih3LmlzQXJyYXkobil8fHcuaXNTdHJpbmcobikpcmV0dXJuIDA9PT1uLmxlbmd0aDtmb3IodmFyIHQgaW4gbilpZih3LmhhcyhuLHQpKXJldHVybiExO3JldHVybiEwfSx3LmlzRWxlbWVudD1mdW5jdGlvbihuKXtyZXR1cm4hKCFufHwxIT09bi5ub2RlVHlwZSl9LHcuaXNBcnJheT14fHxmdW5jdGlvbihuKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PWwuY2FsbChuKX0sdy5pc09iamVjdD1mdW5jdGlvbihuKXtyZXR1cm4gbj09PU9iamVjdChuKX0sQShbXCJBcmd1bWVudHNcIixcIkZ1bmN0aW9uXCIsXCJTdHJpbmdcIixcIk51bWJlclwiLFwiRGF0ZVwiLFwiUmVnRXhwXCJdLGZ1bmN0aW9uKG4pe3dbXCJpc1wiK25dPWZ1bmN0aW9uKHQpe3JldHVybiBsLmNhbGwodCk9PVwiW29iamVjdCBcIituK1wiXVwifX0pLHcuaXNBcmd1bWVudHMoYXJndW1lbnRzKXx8KHcuaXNBcmd1bWVudHM9ZnVuY3Rpb24obil7cmV0dXJuISghbnx8IXcuaGFzKG4sXCJjYWxsZWVcIikpfSksXCJmdW5jdGlvblwiIT10eXBlb2YvLi8mJih3LmlzRnVuY3Rpb249ZnVuY3Rpb24obil7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2Ygbn0pLHcuaXNGaW5pdGU9ZnVuY3Rpb24obil7cmV0dXJuIGlzRmluaXRlKG4pJiYhaXNOYU4ocGFyc2VGbG9hdChuKSl9LHcuaXNOYU49ZnVuY3Rpb24obil7cmV0dXJuIHcuaXNOdW1iZXIobikmJm4hPStufSx3LmlzQm9vbGVhbj1mdW5jdGlvbihuKXtyZXR1cm4gbj09PSEwfHxuPT09ITF8fFwiW29iamVjdCBCb29sZWFuXVwiPT1sLmNhbGwobil9LHcuaXNOdWxsPWZ1bmN0aW9uKG4pe3JldHVybiBudWxsPT09bn0sdy5pc1VuZGVmaW5lZD1mdW5jdGlvbihuKXtyZXR1cm4gbj09PXZvaWQgMH0sdy5oYXM9ZnVuY3Rpb24obix0KXtyZXR1cm4gZi5jYWxsKG4sdCl9LHcubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBuLl89dCx0aGlzfSx3LmlkZW50aXR5PWZ1bmN0aW9uKG4pe3JldHVybiBufSx3LnRpbWVzPWZ1bmN0aW9uKG4sdCxyKXtmb3IodmFyIGU9QXJyYXkobiksdT0wO24+dTt1KyspZVt1XT10LmNhbGwocix1KTtyZXR1cm4gZX0sdy5yYW5kb209ZnVuY3Rpb24obix0KXtyZXR1cm4gbnVsbD09dCYmKHQ9bixuPTApLG4rTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKih0LW4rMSkpfTt2YXIgTT17ZXNjYXBlOntcIiZcIjpcIiZhbXA7XCIsXCI8XCI6XCImbHQ7XCIsXCI+XCI6XCImZ3Q7XCIsJ1wiJzpcIiZxdW90O1wiLFwiJ1wiOlwiJiN4Mjc7XCIsXCIvXCI6XCImI3gyRjtcIn19O00udW5lc2NhcGU9dy5pbnZlcnQoTS5lc2NhcGUpO3ZhciBTPXtlc2NhcGU6UmVnRXhwKFwiW1wiK3cua2V5cyhNLmVzY2FwZSkuam9pbihcIlwiKStcIl1cIixcImdcIiksdW5lc2NhcGU6UmVnRXhwKFwiKFwiK3cua2V5cyhNLnVuZXNjYXBlKS5qb2luKFwifFwiKStcIilcIixcImdcIil9O3cuZWFjaChbXCJlc2NhcGVcIixcInVuZXNjYXBlXCJdLGZ1bmN0aW9uKG4pe3dbbl09ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/XCJcIjooXCJcIit0KS5yZXBsYWNlKFNbbl0sZnVuY3Rpb24odCl7cmV0dXJuIE1bbl1bdF19KX19KSx3LnJlc3VsdD1mdW5jdGlvbihuLHQpe2lmKG51bGw9PW4pcmV0dXJuIG51bGw7dmFyIHI9blt0XTtyZXR1cm4gdy5pc0Z1bmN0aW9uKHIpP3IuY2FsbChuKTpyfSx3Lm1peGluPWZ1bmN0aW9uKG4pe0Eody5mdW5jdGlvbnMobiksZnVuY3Rpb24odCl7dmFyIHI9d1t0XT1uW3RdO3cucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIG49W3RoaXMuX3dyYXBwZWRdO3JldHVybiBhLmFwcGx5KG4sYXJndW1lbnRzKSxELmNhbGwodGhpcyxyLmFwcGx5KHcsbikpfX0pfTt2YXIgTj0wO3cudW5pcXVlSWQ9ZnVuY3Rpb24obil7dmFyIHQ9KytOK1wiXCI7cmV0dXJuIG4/bit0OnR9LHcudGVtcGxhdGVTZXR0aW5ncz17ZXZhbHVhdGU6LzwlKFtcXHNcXFNdKz8pJT4vZyxpbnRlcnBvbGF0ZTovPCU9KFtcXHNcXFNdKz8pJT4vZyxlc2NhcGU6LzwlLShbXFxzXFxTXSs/KSU+L2d9O3ZhciBUPS8oLileLyxxPXtcIidcIjpcIidcIixcIlxcXFxcIjpcIlxcXFxcIixcIlxcclwiOlwiclwiLFwiXFxuXCI6XCJuXCIsXCJcdFwiOlwidFwiLFwiXFx1MjAyOFwiOlwidTIwMjhcIixcIlxcdTIwMjlcIjpcInUyMDI5XCJ9LEI9L1xcXFx8J3xcXHJ8XFxufFxcdHxcXHUyMDI4fFxcdTIwMjkvZzt3LnRlbXBsYXRlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZTtyPXcuZGVmYXVsdHMoe30scix3LnRlbXBsYXRlU2V0dGluZ3MpO3ZhciB1PVJlZ0V4cChbKHIuZXNjYXBlfHxUKS5zb3VyY2UsKHIuaW50ZXJwb2xhdGV8fFQpLnNvdXJjZSwoci5ldmFsdWF0ZXx8VCkuc291cmNlXS5qb2luKFwifFwiKStcInwkXCIsXCJnXCIpLGk9MCxhPVwiX19wKz0nXCI7bi5yZXBsYWNlKHUsZnVuY3Rpb24odCxyLGUsdSxvKXtyZXR1cm4gYSs9bi5zbGljZShpLG8pLnJlcGxhY2UoQixmdW5jdGlvbihuKXtyZXR1cm5cIlxcXFxcIitxW25dfSksciYmKGErPVwiJytcXG4oKF9fdD0oXCIrcitcIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xcbidcIiksZSYmKGErPVwiJytcXG4oKF9fdD0oXCIrZStcIikpPT1udWxsPycnOl9fdCkrXFxuJ1wiKSx1JiYoYSs9XCInO1xcblwiK3UrXCJcXG5fX3ArPSdcIiksaT1vK3QubGVuZ3RoLHR9KSxhKz1cIic7XFxuXCIsci52YXJpYWJsZXx8KGE9XCJ3aXRoKG9ianx8e30pe1xcblwiK2ErXCJ9XFxuXCIpLGE9XCJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4sXCIrXCJwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xcblwiK2ErXCJyZXR1cm4gX19wO1xcblwiO3RyeXtlPUZ1bmN0aW9uKHIudmFyaWFibGV8fFwib2JqXCIsXCJfXCIsYSl9Y2F0Y2gobyl7dGhyb3cgby5zb3VyY2U9YSxvfWlmKHQpcmV0dXJuIGUodCx3KTt2YXIgYz1mdW5jdGlvbihuKXtyZXR1cm4gZS5jYWxsKHRoaXMsbix3KX07cmV0dXJuIGMuc291cmNlPVwiZnVuY3Rpb24oXCIrKHIudmFyaWFibGV8fFwib2JqXCIpK1wiKXtcXG5cIithK1wifVwiLGN9LHcuY2hhaW49ZnVuY3Rpb24obil7cmV0dXJuIHcobikuY2hhaW4oKX07dmFyIEQ9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX2NoYWluP3cobikuY2hhaW4oKTpufTt3Lm1peGluKHcpLEEoW1wicG9wXCIsXCJwdXNoXCIsXCJyZXZlcnNlXCIsXCJzaGlmdFwiLFwic29ydFwiLFwic3BsaWNlXCIsXCJ1bnNoaWZ0XCJdLGZ1bmN0aW9uKG4pe3ZhciB0PWVbbl07dy5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXt2YXIgcj10aGlzLl93cmFwcGVkO3JldHVybiB0LmFwcGx5KHIsYXJndW1lbnRzKSxcInNoaWZ0XCIhPW4mJlwic3BsaWNlXCIhPW58fDAhPT1yLmxlbmd0aHx8ZGVsZXRlIHJbMF0sRC5jYWxsKHRoaXMscil9fSksQShbXCJjb25jYXRcIixcImpvaW5cIixcInNsaWNlXCJdLGZ1bmN0aW9uKG4pe3ZhciB0PWVbbl07dy5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXtyZXR1cm4gRC5jYWxsKHRoaXMsdC5hcHBseSh0aGlzLl93cmFwcGVkLGFyZ3VtZW50cykpfX0pLHcuZXh0ZW5kKHcucHJvdG90eXBlLHtjaGFpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGFpbj0hMCx0aGlzfSx2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93cmFwcGVkfX0pfSkuY2FsbCh0aGlzKTsiLCIvLyBCYWNrYm9uZS5qcyAwLjkuMlxuXG4vLyAoYykgMjAxMC0yMDEyIEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBJbmMuXG4vLyBCYWNrYm9uZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjpcbi8vIGh0dHA6Ly9iYWNrYm9uZWpzLm9yZ1xuKGZ1bmN0aW9uKCl7dmFyIGw9dGhpcyx5PWwuQmFja2JvbmUsej1BcnJheS5wcm90b3R5cGUuc2xpY2UsQT1BcnJheS5wcm90b3R5cGUuc3BsaWNlLGc7Zz1cInVuZGVmaW5lZFwiIT09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0czpsLkJhY2tib25lPXt9O2cuVkVSU0lPTj1cIjAuOS4yXCI7dmFyIGY9bC5fOyFmJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIHJlcXVpcmUmJihmPXJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpKTt2YXIgaT1sLmpRdWVyeXx8bC5aZXB0b3x8bC5lbmRlcjtnLnNldERvbUxpYnJhcnk9ZnVuY3Rpb24oYSl7aT1hfTtnLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtsLkJhY2tib25lPXk7cmV0dXJuIHRoaXN9O2cuZW11bGF0ZUhUVFA9ITE7Zy5lbXVsYXRlSlNPTj0hMTt2YXIgcD0vXFxzKy8saz1nLkV2ZW50cz17b246ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGo7aWYoIWIpcmV0dXJuIHRoaXM7YT1hLnNwbGl0KHApO2ZvcihkPXRoaXMuX2NhbGxiYWNrc3x8KHRoaXMuX2NhbGxiYWNrcz1cbnt9KTtlPWEuc2hpZnQoKTspZj0oaj1kW2VdKT9qLnRhaWw6e30sZi5uZXh0PWc9e30sZi5jb250ZXh0PWMsZi5jYWxsYmFjaz1iLGRbZV09e3RhaWw6ZyxuZXh0Omo/ai5uZXh0OmZ9O3JldHVybiB0aGlzfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsaCxnLGoscTtpZihlPXRoaXMuX2NhbGxiYWNrcyl7aWYoIWEmJiFiJiYhYylyZXR1cm4gZGVsZXRlIHRoaXMuX2NhbGxiYWNrcyx0aGlzO2ZvcihhPWE/YS5zcGxpdChwKTpmLmtleXMoZSk7ZD1hLnNoaWZ0KCk7KWlmKGg9ZVtkXSxkZWxldGUgZVtkXSxoJiYoYnx8YykpZm9yKGc9aC50YWlsOyhoPWgubmV4dCkhPT1nOylpZihqPWguY2FsbGJhY2sscT1oLmNvbnRleHQsYiYmaiE9PWJ8fGMmJnEhPT1jKXRoaXMub24oZCxqLHEpO3JldHVybiB0aGlzfX0sdHJpZ2dlcjpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGc7aWYoIShkPXRoaXMuX2NhbGxiYWNrcykpcmV0dXJuIHRoaXM7Zj1kLmFsbDthPWEuc3BsaXQocCk7Zm9yKGc9XG56LmNhbGwoYXJndW1lbnRzLDEpO2I9YS5zaGlmdCgpOyl7aWYoYz1kW2JdKWZvcihlPWMudGFpbDsoYz1jLm5leHQpIT09ZTspYy5jYWxsYmFjay5hcHBseShjLmNvbnRleHR8fHRoaXMsZyk7aWYoYz1mKXtlPWMudGFpbDtmb3IoYj1bYl0uY29uY2F0KGcpOyhjPWMubmV4dCkhPT1lOyljLmNhbGxiYWNrLmFwcGx5KGMuY29udGV4dHx8dGhpcyxiKX19cmV0dXJuIHRoaXN9fTtrLmJpbmQ9ay5vbjtrLnVuYmluZD1rLm9mZjt2YXIgbz1nLk1vZGVsPWZ1bmN0aW9uKGEsYil7dmFyIGM7YXx8KGE9e30pO2ImJmIucGFyc2UmJihhPXRoaXMucGFyc2UoYSkpO2lmKGM9bih0aGlzLFwiZGVmYXVsdHNcIikpYT1mLmV4dGVuZCh7fSxjLGEpO2ImJmIuY29sbGVjdGlvbiYmKHRoaXMuY29sbGVjdGlvbj1iLmNvbGxlY3Rpb24pO3RoaXMuYXR0cmlidXRlcz17fTt0aGlzLl9lc2NhcGVkQXR0cmlidXRlcz17fTt0aGlzLmNpZD1mLnVuaXF1ZUlkKFwiY1wiKTt0aGlzLmNoYW5nZWQ9e307dGhpcy5fc2lsZW50PVxue307dGhpcy5fcGVuZGluZz17fTt0aGlzLnNldChhLHtzaWxlbnQ6ITB9KTt0aGlzLmNoYW5nZWQ9e307dGhpcy5fc2lsZW50PXt9O3RoaXMuX3BlbmRpbmc9e307dGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzPWYuY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTt0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtmLmV4dGVuZChvLnByb3RvdHlwZSxrLHtjaGFuZ2VkOm51bGwsX3NpbGVudDpudWxsLF9wZW5kaW5nOm51bGwsaWRBdHRyaWJ1dGU6XCJpZFwiLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHRvSlNPTjpmdW5jdGlvbigpe3JldHVybiBmLmNsb25lKHRoaXMuYXR0cmlidXRlcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdfSxlc2NhcGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYj10aGlzLl9lc2NhcGVkQXR0cmlidXRlc1thXSlyZXR1cm4gYjtiPXRoaXMuZ2V0KGEpO3JldHVybiB0aGlzLl9lc2NhcGVkQXR0cmlidXRlc1thXT1mLmVzY2FwZShudWxsPT1cbmI/XCJcIjpcIlwiK2IpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPXRoaXMuZ2V0KGEpfSxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7Zi5pc09iamVjdChhKXx8bnVsbD09YT8oZD1hLGM9Yik6KGQ9e30sZFthXT1iKTtjfHwoYz17fSk7aWYoIWQpcmV0dXJuIHRoaXM7ZCBpbnN0YW5jZW9mIG8mJihkPWQuYXR0cmlidXRlcyk7aWYoYy51bnNldClmb3IoZSBpbiBkKWRbZV09dm9pZCAwO2lmKCF0aGlzLl92YWxpZGF0ZShkLGMpKXJldHVybiExO3RoaXMuaWRBdHRyaWJ1dGUgaW4gZCYmKHRoaXMuaWQ9ZFt0aGlzLmlkQXR0cmlidXRlXSk7dmFyIGI9Yy5jaGFuZ2VzPXt9LGg9dGhpcy5hdHRyaWJ1dGVzLGc9dGhpcy5fZXNjYXBlZEF0dHJpYnV0ZXMsaj10aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXN8fHt9O2ZvcihlIGluIGQpe2E9ZFtlXTtpZighZi5pc0VxdWFsKGhbZV0sYSl8fGMudW5zZXQmJmYuaGFzKGgsZSkpZGVsZXRlIGdbZV0sKGMuc2lsZW50P3RoaXMuX3NpbGVudDpcbmIpW2VdPSEwO2MudW5zZXQ/ZGVsZXRlIGhbZV06aFtlXT1hOyFmLmlzRXF1YWwoaltlXSxhKXx8Zi5oYXMoaCxlKSE9Zi5oYXMoaixlKT8odGhpcy5jaGFuZ2VkW2VdPWEsYy5zaWxlbnR8fCh0aGlzLl9wZW5kaW5nW2VdPSEwKSk6KGRlbGV0ZSB0aGlzLmNoYW5nZWRbZV0sZGVsZXRlIHRoaXMuX3BlbmRpbmdbZV0pfWMuc2lsZW50fHx0aGlzLmNoYW5nZShjKTtyZXR1cm4gdGhpc30sdW5zZXQ6ZnVuY3Rpb24oYSxiKXsoYnx8KGI9e30pKS51bnNldD0hMDtyZXR1cm4gdGhpcy5zZXQoYSxudWxsLGIpfSxjbGVhcjpmdW5jdGlvbihhKXsoYXx8KGE9e30pKS51bnNldD0hMDtyZXR1cm4gdGhpcy5zZXQoZi5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpLGEpfSxmZXRjaDpmdW5jdGlvbihhKXt2YXIgYT1hP2YuY2xvbmUoYSk6e30sYj10aGlzLGM9YS5zdWNjZXNzO2Euc3VjY2Vzcz1mdW5jdGlvbihkLGUsZil7aWYoIWIuc2V0KGIucGFyc2UoZCxmKSxhKSlyZXR1cm4hMTtjJiZjKGIsZCl9O1xuYS5lcnJvcj1nLndyYXBFcnJvcihhLmVycm9yLGIsYSk7cmV0dXJuKHRoaXMuc3luY3x8Zy5zeW5jKS5jYWxsKHRoaXMsXCJyZWFkXCIsdGhpcyxhKX0sc2F2ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtmLmlzT2JqZWN0KGEpfHxudWxsPT1hPyhkPWEsYz1iKTooZD17fSxkW2FdPWIpO2M9Yz9mLmNsb25lKGMpOnt9O2lmKGMud2FpdCl7aWYoIXRoaXMuX3ZhbGlkYXRlKGQsYykpcmV0dXJuITE7ZT1mLmNsb25lKHRoaXMuYXR0cmlidXRlcyl9YT1mLmV4dGVuZCh7fSxjLHtzaWxlbnQ6ITB9KTtpZihkJiYhdGhpcy5zZXQoZCxjLndhaXQ/YTpjKSlyZXR1cm4hMTt2YXIgaD10aGlzLGk9Yy5zdWNjZXNzO2Muc3VjY2Vzcz1mdW5jdGlvbihhLGIsZSl7Yj1oLnBhcnNlKGEsZSk7aWYoYy53YWl0KXtkZWxldGUgYy53YWl0O2I9Zi5leHRlbmQoZHx8e30sYil9aWYoIWguc2V0KGIsYykpcmV0dXJuIGZhbHNlO2k/aShoLGEpOmgudHJpZ2dlcihcInN5bmNcIixoLGEsYyl9O2MuZXJyb3I9Zy53cmFwRXJyb3IoYy5lcnJvcixcbmgsYyk7Yj10aGlzLmlzTmV3KCk/XCJjcmVhdGVcIjpcInVwZGF0ZVwiO2I9KHRoaXMuc3luY3x8Zy5zeW5jKS5jYWxsKHRoaXMsYix0aGlzLGMpO2Mud2FpdCYmdGhpcy5zZXQoZSxhKTtyZXR1cm4gYn0sZGVzdHJveTpmdW5jdGlvbihhKXt2YXIgYT1hP2YuY2xvbmUoYSk6e30sYj10aGlzLGM9YS5zdWNjZXNzLGQ9ZnVuY3Rpb24oKXtiLnRyaWdnZXIoXCJkZXN0cm95XCIsYixiLmNvbGxlY3Rpb24sYSl9O2lmKHRoaXMuaXNOZXcoKSlyZXR1cm4gZCgpLCExO2Euc3VjY2Vzcz1mdW5jdGlvbihlKXthLndhaXQmJmQoKTtjP2MoYixlKTpiLnRyaWdnZXIoXCJzeW5jXCIsYixlLGEpfTthLmVycm9yPWcud3JhcEVycm9yKGEuZXJyb3IsYixhKTt2YXIgZT0odGhpcy5zeW5jfHxnLnN5bmMpLmNhbGwodGhpcyxcImRlbGV0ZVwiLHRoaXMsYSk7YS53YWl0fHxkKCk7cmV0dXJuIGV9LHVybDpmdW5jdGlvbigpe3ZhciBhPW4odGhpcyxcInVybFJvb3RcIil8fG4odGhpcy5jb2xsZWN0aW9uLFwidXJsXCIpfHx0KCk7XG5yZXR1cm4gdGhpcy5pc05ldygpP2E6YSsoXCIvXCI9PWEuY2hhckF0KGEubGVuZ3RoLTEpP1wiXCI6XCIvXCIpK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLmlkKX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXR0cmlidXRlcyl9LGlzTmV3OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PXRoaXMuaWR9LGNoYW5nZTpmdW5jdGlvbihhKXthfHwoYT17fSk7dmFyIGI9dGhpcy5fY2hhbmdpbmc7dGhpcy5fY2hhbmdpbmc9ITA7Zm9yKHZhciBjIGluIHRoaXMuX3NpbGVudCl0aGlzLl9wZW5kaW5nW2NdPSEwO3ZhciBkPWYuZXh0ZW5kKHt9LGEuY2hhbmdlcyx0aGlzLl9zaWxlbnQpO3RoaXMuX3NpbGVudD17fTtmb3IoYyBpbiBkKXRoaXMudHJpZ2dlcihcImNoYW5nZTpcIitjLHRoaXMsdGhpcy5nZXQoYyksYSk7aWYoYilyZXR1cm4gdGhpcztmb3IoOyFmLmlzRW1wdHkodGhpcy5fcGVuZGluZyk7KXt0aGlzLl9wZW5kaW5nPVxue307dGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIsdGhpcyxhKTtmb3IoYyBpbiB0aGlzLmNoYW5nZWQpIXRoaXMuX3BlbmRpbmdbY10mJiF0aGlzLl9zaWxlbnRbY10mJmRlbGV0ZSB0aGlzLmNoYW5nZWRbY107dGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzPWYuY2xvbmUodGhpcy5hdHRyaWJ1dGVzKX10aGlzLl9jaGFuZ2luZz0hMTtyZXR1cm4gdGhpc30saGFzQ2hhbmdlZDpmdW5jdGlvbihhKXtyZXR1cm4hYXJndW1lbnRzLmxlbmd0aD8hZi5pc0VtcHR5KHRoaXMuY2hhbmdlZCk6Zi5oYXModGhpcy5jaGFuZ2VkLGEpfSxjaGFuZ2VkQXR0cmlidXRlczpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gdGhpcy5oYXNDaGFuZ2VkKCk/Zi5jbG9uZSh0aGlzLmNoYW5nZWQpOiExO3ZhciBiLGM9ITEsZD10aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMsZTtmb3IoZSBpbiBhKWlmKCFmLmlzRXF1YWwoZFtlXSxiPWFbZV0pKShjfHwoYz17fSkpW2VdPWI7cmV0dXJuIGN9LHByZXZpb3VzOmZ1bmN0aW9uKGEpe3JldHVybiFhcmd1bWVudHMubGVuZ3RofHxcbiF0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM/bnVsbDp0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbYV19LHByZXZpb3VzQXR0cmlidXRlczpmdW5jdGlvbigpe3JldHVybiBmLmNsb25lKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyl9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy52YWxpZGF0ZSh0aGlzLmF0dHJpYnV0ZXMpfSxfdmFsaWRhdGU6ZnVuY3Rpb24oYSxiKXtpZihiLnNpbGVudHx8IXRoaXMudmFsaWRhdGUpcmV0dXJuITA7dmFyIGE9Zi5leHRlbmQoe30sdGhpcy5hdHRyaWJ1dGVzLGEpLGM9dGhpcy52YWxpZGF0ZShhLGIpO2lmKCFjKXJldHVybiEwO2ImJmIuZXJyb3I/Yi5lcnJvcih0aGlzLGMsYik6dGhpcy50cmlnZ2VyKFwiZXJyb3JcIix0aGlzLGMsYik7cmV0dXJuITF9fSk7dmFyIHI9Zy5Db2xsZWN0aW9uPWZ1bmN0aW9uKGEsYil7Ynx8KGI9e30pO2IubW9kZWwmJih0aGlzLm1vZGVsPWIubW9kZWwpO2IuY29tcGFyYXRvciYmKHRoaXMuY29tcGFyYXRvcj1iLmNvbXBhcmF0b3IpO1xudGhpcy5fcmVzZXQoKTt0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJnRoaXMucmVzZXQoYSx7c2lsZW50OiEwLHBhcnNlOmIucGFyc2V9KX07Zi5leHRlbmQoci5wcm90b3R5cGUsayx7bW9kZWw6byxpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSx0b0pTT046ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGIpe3JldHVybiBiLnRvSlNPTihhKX0pfSxhZGQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZyxpLGo9e30saz17fSxsPVtdO2J8fChiPXt9KTthPWYuaXNBcnJheShhKT9hLnNsaWNlKCk6W2FdO2M9MDtmb3IoZD1hLmxlbmd0aDtjPGQ7YysrKXtpZighKGU9YVtjXT10aGlzLl9wcmVwYXJlTW9kZWwoYVtjXSxiKSkpdGhyb3cgRXJyb3IoXCJDYW4ndCBhZGQgYW4gaW52YWxpZCBtb2RlbCB0byBhIGNvbGxlY3Rpb25cIik7Zz1lLmNpZDtpPWUuaWQ7altnXXx8dGhpcy5fYnlDaWRbZ118fG51bGwhPWkmJihrW2ldfHx0aGlzLl9ieUlkW2ldKT9cbmwucHVzaChjKTpqW2ddPWtbaV09ZX1mb3IoYz1sLmxlbmd0aDtjLS07KWEuc3BsaWNlKGxbY10sMSk7Yz0wO2ZvcihkPWEubGVuZ3RoO2M8ZDtjKyspKGU9YVtjXSkub24oXCJhbGxcIix0aGlzLl9vbk1vZGVsRXZlbnQsdGhpcyksdGhpcy5fYnlDaWRbZS5jaWRdPWUsbnVsbCE9ZS5pZCYmKHRoaXMuX2J5SWRbZS5pZF09ZSk7dGhpcy5sZW5ndGgrPWQ7QS5hcHBseSh0aGlzLm1vZGVscyxbbnVsbCE9Yi5hdD9iLmF0OnRoaXMubW9kZWxzLmxlbmd0aCwwXS5jb25jYXQoYSkpO3RoaXMuY29tcGFyYXRvciYmdGhpcy5zb3J0KHtzaWxlbnQ6ITB9KTtpZihiLnNpbGVudClyZXR1cm4gdGhpcztjPTA7Zm9yKGQ9dGhpcy5tb2RlbHMubGVuZ3RoO2M8ZDtjKyspaWYoalsoZT10aGlzLm1vZGVsc1tjXSkuY2lkXSliLmluZGV4PWMsZS50cmlnZ2VyKFwiYWRkXCIsZSx0aGlzLGIpO3JldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZztifHwoYj17fSk7YT1mLmlzQXJyYXkoYSk/XG5hLnNsaWNlKCk6W2FdO2M9MDtmb3IoZD1hLmxlbmd0aDtjPGQ7YysrKWlmKGc9dGhpcy5nZXRCeUNpZChhW2NdKXx8dGhpcy5nZXQoYVtjXSkpZGVsZXRlIHRoaXMuX2J5SWRbZy5pZF0sZGVsZXRlIHRoaXMuX2J5Q2lkW2cuY2lkXSxlPXRoaXMuaW5kZXhPZihnKSx0aGlzLm1vZGVscy5zcGxpY2UoZSwxKSx0aGlzLmxlbmd0aC0tLGIuc2lsZW50fHwoYi5pbmRleD1lLGcudHJpZ2dlcihcInJlbW92ZVwiLGcsdGhpcyxiKSksdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKGcpO3JldHVybiB0aGlzfSxwdXNoOmZ1bmN0aW9uKGEsYil7YT10aGlzLl9wcmVwYXJlTW9kZWwoYSxiKTt0aGlzLmFkZChhLGIpO3JldHVybiBhfSxwb3A6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdCh0aGlzLmxlbmd0aC0xKTt0aGlzLnJlbW92ZShiLGEpO3JldHVybiBifSx1bnNoaWZ0OmZ1bmN0aW9uKGEsYil7YT10aGlzLl9wcmVwYXJlTW9kZWwoYSxiKTt0aGlzLmFkZChhLGYuZXh0ZW5kKHthdDowfSxiKSk7cmV0dXJuIGF9LFxuc2hpZnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdCgwKTt0aGlzLnJlbW92ZShiLGEpO3JldHVybiBifSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/dm9pZCAwOnRoaXMuX2J5SWRbbnVsbCE9YS5pZD9hLmlkOmFdfSxnZXRCeUNpZDpmdW5jdGlvbihhKXtyZXR1cm4gYSYmdGhpcy5fYnlDaWRbYS5jaWR8fGFdfSxhdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tb2RlbHNbYV19LHdoZXJlOmZ1bmN0aW9uKGEpe3JldHVybiBmLmlzRW1wdHkoYSk/W106dGhpcy5maWx0ZXIoZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGEpaWYoYVtjXSE9PWIuZ2V0KGMpKXJldHVybiExO3JldHVybiEwfSl9LHNvcnQ6ZnVuY3Rpb24oYSl7YXx8KGE9e30pO2lmKCF0aGlzLmNvbXBhcmF0b3IpdGhyb3cgRXJyb3IoXCJDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvclwiKTt2YXIgYj1mLmJpbmQodGhpcy5jb21wYXJhdG9yLHRoaXMpOzE9PXRoaXMuY29tcGFyYXRvci5sZW5ndGg/XG50aGlzLm1vZGVscz10aGlzLnNvcnRCeShiKTp0aGlzLm1vZGVscy5zb3J0KGIpO2Euc2lsZW50fHx0aGlzLnRyaWdnZXIoXCJyZXNldFwiLHRoaXMsYSk7cmV0dXJuIHRoaXN9LHBsdWNrOmZ1bmN0aW9uKGEpe3JldHVybiBmLm1hcCh0aGlzLm1vZGVscyxmdW5jdGlvbihiKXtyZXR1cm4gYi5nZXQoYSl9KX0scmVzZXQ6ZnVuY3Rpb24oYSxiKXthfHwoYT1bXSk7Ynx8KGI9e30pO2Zvcih2YXIgYz0wLGQ9dGhpcy5tb2RlbHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHRoaXMubW9kZWxzW2NdKTt0aGlzLl9yZXNldCgpO3RoaXMuYWRkKGEsZi5leHRlbmQoe3NpbGVudDohMH0sYikpO2Iuc2lsZW50fHx0aGlzLnRyaWdnZXIoXCJyZXNldFwiLHRoaXMsYik7cmV0dXJuIHRoaXN9LGZldGNoOmZ1bmN0aW9uKGEpe2E9YT9mLmNsb25lKGEpOnt9O3ZvaWQgMD09PWEucGFyc2UmJihhLnBhcnNlPSEwKTt2YXIgYj10aGlzLGM9YS5zdWNjZXNzO2Euc3VjY2Vzcz1mdW5jdGlvbihkLFxuZSxmKXtiW2EuYWRkP1wiYWRkXCI6XCJyZXNldFwiXShiLnBhcnNlKGQsZiksYSk7YyYmYyhiLGQpfTthLmVycm9yPWcud3JhcEVycm9yKGEuZXJyb3IsYixhKTtyZXR1cm4odGhpcy5zeW5jfHxnLnN5bmMpLmNhbGwodGhpcyxcInJlYWRcIix0aGlzLGEpfSxjcmVhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGI9Yj9mLmNsb25lKGIpOnt9LGE9dGhpcy5fcHJlcGFyZU1vZGVsKGEsYik7aWYoIWEpcmV0dXJuITE7Yi53YWl0fHxjLmFkZChhLGIpO3ZhciBkPWIuc3VjY2VzcztiLnN1Y2Nlc3M9ZnVuY3Rpb24oZSxmKXtiLndhaXQmJmMuYWRkKGUsYik7ZD9kKGUsZik6ZS50cmlnZ2VyKFwic3luY1wiLGEsZixiKX07YS5zYXZlKG51bGwsYik7cmV0dXJuIGF9LHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxjaGFpbjpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMubW9kZWxzKS5jaGFpbigpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wO3RoaXMubW9kZWxzPVtdO3RoaXMuX2J5SWQ9XG57fTt0aGlzLl9ieUNpZD17fX0sX3ByZXBhcmVNb2RlbDpmdW5jdGlvbihhLGIpe2J8fChiPXt9KTthIGluc3RhbmNlb2Ygbz9hLmNvbGxlY3Rpb258fChhLmNvbGxlY3Rpb249dGhpcyk6KGIuY29sbGVjdGlvbj10aGlzLGE9bmV3IHRoaXMubW9kZWwoYSxiKSxhLl92YWxpZGF0ZShhLmF0dHJpYnV0ZXMsYil8fChhPSExKSk7cmV0dXJuIGF9LF9yZW1vdmVSZWZlcmVuY2U6ZnVuY3Rpb24oYSl7dGhpcz09YS5jb2xsZWN0aW9uJiZkZWxldGUgYS5jb2xsZWN0aW9uO2Eub2ZmKFwiYWxsXCIsdGhpcy5fb25Nb2RlbEV2ZW50LHRoaXMpfSxfb25Nb2RlbEV2ZW50OmZ1bmN0aW9uKGEsYixjLGQpeyhcImFkZFwiPT1hfHxcInJlbW92ZVwiPT1hKSYmYyE9dGhpc3x8KFwiZGVzdHJveVwiPT1hJiZ0aGlzLnJlbW92ZShiLGQpLGImJmE9PT1cImNoYW5nZTpcIitiLmlkQXR0cmlidXRlJiYoZGVsZXRlIHRoaXMuX2J5SWRbYi5wcmV2aW91cyhiLmlkQXR0cmlidXRlKV0sdGhpcy5fYnlJZFtiLmlkXT1iKSx0aGlzLnRyaWdnZXIuYXBwbHkodGhpcyxcbmFyZ3VtZW50cykpfX0pO2YuZWFjaChcImZvckVhY2gsZWFjaCxtYXAscmVkdWNlLHJlZHVjZVJpZ2h0LGZpbmQsZGV0ZWN0LGZpbHRlcixzZWxlY3QscmVqZWN0LGV2ZXJ5LGFsbCxzb21lLGFueSxpbmNsdWRlLGNvbnRhaW5zLGludm9rZSxtYXgsbWluLHNvcnRCeSxzb3J0ZWRJbmRleCx0b0FycmF5LHNpemUsZmlyc3QsaW5pdGlhbCxyZXN0LGxhc3Qsd2l0aG91dCxpbmRleE9mLHNodWZmbGUsbGFzdEluZGV4T2YsaXNFbXB0eSxncm91cEJ5XCIuc3BsaXQoXCIsXCIpLGZ1bmN0aW9uKGEpe3IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIGZbYV0uYXBwbHkoZixbdGhpcy5tb2RlbHNdLmNvbmNhdChmLnRvQXJyYXkoYXJndW1lbnRzKSkpfX0pO3ZhciB1PWcuUm91dGVyPWZ1bmN0aW9uKGEpe2F8fChhPXt9KTthLnJvdXRlcyYmKHRoaXMucm91dGVzPWEucm91dGVzKTt0aGlzLl9iaW5kUm91dGVzKCk7dGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQj0vOlxcdysvZyxcbkM9L1xcKlxcdysvZyxEPS9bLVtcXF17fSgpKz8uLFxcXFxeJHwjXFxzXS9nO2YuZXh0ZW5kKHUucHJvdG90eXBlLGsse2luaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHJvdXRlOmZ1bmN0aW9uKGEsYixjKXtnLmhpc3Rvcnl8fChnLmhpc3Rvcnk9bmV3IG0pO2YuaXNSZWdFeHAoYSl8fChhPXRoaXMuX3JvdXRlVG9SZWdFeHAoYSkpO2N8fChjPXRoaXNbYl0pO2cuaGlzdG9yeS5yb3V0ZShhLGYuYmluZChmdW5jdGlvbihkKXtkPXRoaXMuX2V4dHJhY3RQYXJhbWV0ZXJzKGEsZCk7YyYmYy5hcHBseSh0aGlzLGQpO3RoaXMudHJpZ2dlci5hcHBseSh0aGlzLFtcInJvdXRlOlwiK2JdLmNvbmNhdChkKSk7Zy5oaXN0b3J5LnRyaWdnZXIoXCJyb3V0ZVwiLHRoaXMsYixkKX0sdGhpcykpO3JldHVybiB0aGlzfSxuYXZpZ2F0ZTpmdW5jdGlvbihhLGIpe2cuaGlzdG9yeS5uYXZpZ2F0ZShhLGIpfSxfYmluZFJvdXRlczpmdW5jdGlvbigpe2lmKHRoaXMucm91dGVzKXt2YXIgYT1bXSxiO2ZvcihiIGluIHRoaXMucm91dGVzKWEudW5zaGlmdChbYixcbnRoaXMucm91dGVzW2JdXSk7Yj0wO2Zvcih2YXIgYz1hLmxlbmd0aDtiPGM7YisrKXRoaXMucm91dGUoYVtiXVswXSxhW2JdWzFdLHRoaXNbYVtiXVsxXV0pfX0sX3JvdXRlVG9SZWdFeHA6ZnVuY3Rpb24oYSl7YT1hLnJlcGxhY2UoRCxcIlxcXFwkJlwiKS5yZXBsYWNlKEIsXCIoW14vXSspXCIpLnJlcGxhY2UoQyxcIiguKj8pXCIpO3JldHVybiBSZWdFeHAoXCJeXCIrYStcIiRcIil9LF9leHRyYWN0UGFyYW1ldGVyczpmdW5jdGlvbihhLGIpe3JldHVybiBhLmV4ZWMoYikuc2xpY2UoMSl9fSk7dmFyIG09Zy5IaXN0b3J5PWZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVycz1bXTtmLmJpbmRBbGwodGhpcyxcImNoZWNrVXJsXCIpfSxzPS9eWyNcXC9dLyxFPS9tc2llIFtcXHcuXSsvO20uc3RhcnRlZD0hMTtmLmV4dGVuZChtLnByb3RvdHlwZSxrLHtpbnRlcnZhbDo1MCxnZXRIYXNoOmZ1bmN0aW9uKGEpe3JldHVybihhPShhP2EubG9jYXRpb246d2luZG93LmxvY2F0aW9uKS5ocmVmLm1hdGNoKC8jKC4qKSQvKSk/YVsxXTpcblwiXCJ9LGdldEZyYWdtZW50OmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YSlpZih0aGlzLl9oYXNQdXNoU3RhdGV8fGIpe3ZhciBhPXdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxjPXdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7YyYmKGErPWMpfWVsc2UgYT10aGlzLmdldEhhc2goKTthLmluZGV4T2YodGhpcy5vcHRpb25zLnJvb3QpfHwoYT1hLnN1YnN0cih0aGlzLm9wdGlvbnMucm9vdC5sZW5ndGgpKTtyZXR1cm4gYS5yZXBsYWNlKHMsXCJcIil9LHN0YXJ0OmZ1bmN0aW9uKGEpe2lmKG0uc3RhcnRlZCl0aHJvdyBFcnJvcihcIkJhY2tib25lLmhpc3RvcnkgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkXCIpO20uc3RhcnRlZD0hMDt0aGlzLm9wdGlvbnM9Zi5leHRlbmQoe30se3Jvb3Q6XCIvXCJ9LHRoaXMub3B0aW9ucyxhKTt0aGlzLl93YW50c0hhc2hDaGFuZ2U9ITEhPT10aGlzLm9wdGlvbnMuaGFzaENoYW5nZTt0aGlzLl93YW50c1B1c2hTdGF0ZT0hIXRoaXMub3B0aW9ucy5wdXNoU3RhdGU7dGhpcy5faGFzUHVzaFN0YXRlPVxuISghdGhpcy5vcHRpb25zLnB1c2hTdGF0ZXx8IXdpbmRvdy5oaXN0b3J5fHwhd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKTt2YXIgYT10aGlzLmdldEZyYWdtZW50KCksYj1kb2N1bWVudC5kb2N1bWVudE1vZGU7aWYoYj1FLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKSYmKCFifHw3Pj1iKSl0aGlzLmlmcmFtZT1pKCc8aWZyYW1lIHNyYz1cImphdmFzY3JpcHQ6MFwiIHRhYmluZGV4PVwiLTFcIiAvPicpLmhpZGUoKS5hcHBlbmRUbyhcImJvZHlcIilbMF0uY29udGVudFdpbmRvdyx0aGlzLm5hdmlnYXRlKGEpO3RoaXMuX2hhc1B1c2hTdGF0ZT9pKHdpbmRvdykuYmluZChcInBvcHN0YXRlXCIsdGhpcy5jaGVja1VybCk6dGhpcy5fd2FudHNIYXNoQ2hhbmdlJiZcIm9uaGFzaGNoYW5nZVwiaW4gd2luZG93JiYhYj9pKHdpbmRvdykuYmluZChcImhhc2hjaGFuZ2VcIix0aGlzLmNoZWNrVXJsKTp0aGlzLl93YW50c0hhc2hDaGFuZ2UmJih0aGlzLl9jaGVja1VybEludGVydmFsPXNldEludGVydmFsKHRoaXMuY2hlY2tVcmwsXG50aGlzLmludGVydmFsKSk7dGhpcy5mcmFnbWVudD1hO2E9d2luZG93LmxvY2F0aW9uO2I9YS5wYXRobmFtZT09dGhpcy5vcHRpb25zLnJvb3Q7aWYodGhpcy5fd2FudHNIYXNoQ2hhbmdlJiZ0aGlzLl93YW50c1B1c2hTdGF0ZSYmIXRoaXMuX2hhc1B1c2hTdGF0ZSYmIWIpcmV0dXJuIHRoaXMuZnJhZ21lbnQ9dGhpcy5nZXRGcmFnbWVudChudWxsLCEwKSx3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh0aGlzLm9wdGlvbnMucm9vdCtcIiNcIit0aGlzLmZyYWdtZW50KSwhMDt0aGlzLl93YW50c1B1c2hTdGF0ZSYmdGhpcy5faGFzUHVzaFN0YXRlJiZiJiZhLmhhc2gmJih0aGlzLmZyYWdtZW50PXRoaXMuZ2V0SGFzaCgpLnJlcGxhY2UocyxcIlwiKSx3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sZG9jdW1lbnQudGl0bGUsYS5wcm90b2NvbCtcIi8vXCIrYS5ob3N0K3RoaXMub3B0aW9ucy5yb290K3RoaXMuZnJhZ21lbnQpKTtpZighdGhpcy5vcHRpb25zLnNpbGVudClyZXR1cm4gdGhpcy5sb2FkVXJsKCl9LFxuc3RvcDpmdW5jdGlvbigpe2kod2luZG93KS51bmJpbmQoXCJwb3BzdGF0ZVwiLHRoaXMuY2hlY2tVcmwpLnVuYmluZChcImhhc2hjaGFuZ2VcIix0aGlzLmNoZWNrVXJsKTtjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpO20uc3RhcnRlZD0hMX0scm91dGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZXJzLnVuc2hpZnQoe3JvdXRlOmEsY2FsbGJhY2s6Yn0pfSxjaGVja1VybDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RnJhZ21lbnQoKTthPT10aGlzLmZyYWdtZW50JiZ0aGlzLmlmcmFtZSYmKGE9dGhpcy5nZXRGcmFnbWVudCh0aGlzLmdldEhhc2godGhpcy5pZnJhbWUpKSk7aWYoYT09dGhpcy5mcmFnbWVudClyZXR1cm4hMTt0aGlzLmlmcmFtZSYmdGhpcy5uYXZpZ2F0ZShhKTt0aGlzLmxvYWRVcmwoKXx8dGhpcy5sb2FkVXJsKHRoaXMuZ2V0SGFzaCgpKX0sbG9hZFVybDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZyYWdtZW50PXRoaXMuZ2V0RnJhZ21lbnQoYSk7cmV0dXJuIGYuYW55KHRoaXMuaGFuZGxlcnMsXG5mdW5jdGlvbihhKXtpZihhLnJvdXRlLnRlc3QoYikpcmV0dXJuIGEuY2FsbGJhY2soYiksITB9KX0sbmF2aWdhdGU6ZnVuY3Rpb24oYSxiKXtpZighbS5zdGFydGVkKXJldHVybiExO2lmKCFifHwhMD09PWIpYj17dHJpZ2dlcjpifTt2YXIgYz0oYXx8XCJcIikucmVwbGFjZShzLFwiXCIpO3RoaXMuZnJhZ21lbnQhPWMmJih0aGlzLl9oYXNQdXNoU3RhdGU/KDAhPWMuaW5kZXhPZih0aGlzLm9wdGlvbnMucm9vdCkmJihjPXRoaXMub3B0aW9ucy5yb290K2MpLHRoaXMuZnJhZ21lbnQ9Yyx3aW5kb3cuaGlzdG9yeVtiLnJlcGxhY2U/XCJyZXBsYWNlU3RhdGVcIjpcInB1c2hTdGF0ZVwiXSh7fSxkb2N1bWVudC50aXRsZSxjKSk6dGhpcy5fd2FudHNIYXNoQ2hhbmdlPyh0aGlzLmZyYWdtZW50PWMsdGhpcy5fdXBkYXRlSGFzaCh3aW5kb3cubG9jYXRpb24sYyxiLnJlcGxhY2UpLHRoaXMuaWZyYW1lJiZjIT10aGlzLmdldEZyYWdtZW50KHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZSkpJiYoYi5yZXBsYWNlfHxcbnRoaXMuaWZyYW1lLmRvY3VtZW50Lm9wZW4oKS5jbG9zZSgpLHRoaXMuX3VwZGF0ZUhhc2godGhpcy5pZnJhbWUubG9jYXRpb24sYyxiLnJlcGxhY2UpKSk6d2luZG93LmxvY2F0aW9uLmFzc2lnbih0aGlzLm9wdGlvbnMucm9vdCthKSxiLnRyaWdnZXImJnRoaXMubG9hZFVybChhKSl9LF91cGRhdGVIYXNoOmZ1bmN0aW9uKGEsYixjKXtjP2EucmVwbGFjZShhLnRvU3RyaW5nKCkucmVwbGFjZSgvKGphdmFzY3JpcHQ6fCMpLiokLyxcIlwiKStcIiNcIitiKTphLmhhc2g9Yn19KTt2YXIgdj1nLlZpZXc9ZnVuY3Rpb24oYSl7dGhpcy5jaWQ9Zi51bmlxdWVJZChcInZpZXdcIik7dGhpcy5fY29uZmlndXJlKGF8fHt9KTt0aGlzLl9lbnN1cmVFbGVtZW50KCk7dGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmRlbGVnYXRlRXZlbnRzKCl9LEY9L14oXFxTKylcXHMqKC4qKSQvLHc9XCJtb2RlbCxjb2xsZWN0aW9uLGVsLGlkLGF0dHJpYnV0ZXMsY2xhc3NOYW1lLHRhZ05hbWVcIi5zcGxpdChcIixcIik7XG5mLmV4dGVuZCh2LnByb3RvdHlwZSxrLHt0YWdOYW1lOlwiZGl2XCIsJDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy4kZWwuZmluZChhKX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe30scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuJGVsLnJlbW92ZSgpO3JldHVybiB0aGlzfSxtYWtlOmZ1bmN0aW9uKGEsYixjKXthPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk7YiYmaShhKS5hdHRyKGIpO2MmJmkoYSkuaHRtbChjKTtyZXR1cm4gYX0sc2V0RWxlbWVudDpmdW5jdGlvbihhLGIpe3RoaXMuJGVsJiZ0aGlzLnVuZGVsZWdhdGVFdmVudHMoKTt0aGlzLiRlbD1hIGluc3RhbmNlb2YgaT9hOmkoYSk7dGhpcy5lbD10aGlzLiRlbFswXTshMSE9PWImJnRoaXMuZGVsZWdhdGVFdmVudHMoKTtyZXR1cm4gdGhpc30sZGVsZWdhdGVFdmVudHM6ZnVuY3Rpb24oYSl7aWYoYXx8KGE9bih0aGlzLFwiZXZlbnRzXCIpKSl7dGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG5mb3IodmFyIGIgaW4gYSl7dmFyIGM9YVtiXTtmLmlzRnVuY3Rpb24oYyl8fChjPXRoaXNbYVtiXV0pO2lmKCFjKXRocm93IEVycm9yKCdNZXRob2QgXCInK2FbYl0rJ1wiIGRvZXMgbm90IGV4aXN0Jyk7dmFyIGQ9Yi5tYXRjaChGKSxlPWRbMV0sZD1kWzJdLGM9Zi5iaW5kKGMsdGhpcyksZT1lKyhcIi5kZWxlZ2F0ZUV2ZW50c1wiK3RoaXMuY2lkKTtcIlwiPT09ZD90aGlzLiRlbC5iaW5kKGUsYyk6dGhpcy4kZWwuZGVsZWdhdGUoZCxlLGMpfX19LHVuZGVsZWdhdGVFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLiRlbC51bmJpbmQoXCIuZGVsZWdhdGVFdmVudHNcIit0aGlzLmNpZCl9LF9jb25maWd1cmU6ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zJiYoYT1mLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMsYSkpO2Zvcih2YXIgYj0wLGM9dy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9d1tiXTthW2RdJiYodGhpc1tkXT1hW2RdKX10aGlzLm9wdGlvbnM9YX0sX2Vuc3VyZUVsZW1lbnQ6ZnVuY3Rpb24oKXtpZih0aGlzLmVsKXRoaXMuc2V0RWxlbWVudCh0aGlzLmVsLFxuITEpO2Vsc2V7dmFyIGE9bih0aGlzLFwiYXR0cmlidXRlc1wiKXx8e307dGhpcy5pZCYmKGEuaWQ9dGhpcy5pZCk7dGhpcy5jbGFzc05hbWUmJihhW1wiY2xhc3NcIl09dGhpcy5jbGFzc05hbWUpO3RoaXMuc2V0RWxlbWVudCh0aGlzLm1ha2UodGhpcy50YWdOYW1lLGEpLCExKX19fSk7by5leHRlbmQ9ci5leHRlbmQ9dS5leHRlbmQ9di5leHRlbmQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1HKHRoaXMsYSxiKTtjLmV4dGVuZD10aGlzLmV4dGVuZDtyZXR1cm4gY307dmFyIEg9e2NyZWF0ZTpcIlBPU1RcIix1cGRhdGU6XCJQVVRcIixcImRlbGV0ZVwiOlwiREVMRVRFXCIscmVhZDpcIkdFVFwifTtnLnN5bmM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPUhbYV07Y3x8KGM9e30pO3ZhciBlPXt0eXBlOmQsZGF0YVR5cGU6XCJqc29uXCJ9O2MudXJsfHwoZS51cmw9bihiLFwidXJsXCIpfHx0KCkpO2lmKCFjLmRhdGEmJmImJihcImNyZWF0ZVwiPT1hfHxcInVwZGF0ZVwiPT1hKSllLmNvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vanNvblwiLFxuZS5kYXRhPUpTT04uc3RyaW5naWZ5KGIudG9KU09OKCkpO2cuZW11bGF0ZUpTT04mJihlLmNvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsZS5kYXRhPWUuZGF0YT97bW9kZWw6ZS5kYXRhfTp7fSk7aWYoZy5lbXVsYXRlSFRUUCYmKFwiUFVUXCI9PT1kfHxcIkRFTEVURVwiPT09ZCkpZy5lbXVsYXRlSlNPTiYmKGUuZGF0YS5fbWV0aG9kPWQpLGUudHlwZT1cIlBPU1RcIixlLmJlZm9yZVNlbmQ9ZnVuY3Rpb24oYSl7YS5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1IVFRQLU1ldGhvZC1PdmVycmlkZVwiLGQpfTtcIkdFVFwiIT09ZS50eXBlJiYhZy5lbXVsYXRlSlNPTiYmKGUucHJvY2Vzc0RhdGE9ITEpO3JldHVybiBpLmFqYXgoZi5leHRlbmQoZSxjKSl9O2cud3JhcEVycm9yPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlKXtlPWQ9PT1iP2U6ZDthP2EoYixlLGMpOmIudHJpZ2dlcihcImVycm9yXCIsYixlLGMpfX07dmFyIHg9ZnVuY3Rpb24oKXt9LEc9ZnVuY3Rpb24oYSxcbmIsYyl7dmFyIGQ7ZD1iJiZiLmhhc093blByb3BlcnR5KFwiY29uc3RydWN0b3JcIik/Yi5jb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2EuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtmLmV4dGVuZChkLGEpO3gucHJvdG90eXBlPWEucHJvdG90eXBlO2QucHJvdG90eXBlPW5ldyB4O2ImJmYuZXh0ZW5kKGQucHJvdG90eXBlLGIpO2MmJmYuZXh0ZW5kKGQsYyk7ZC5wcm90b3R5cGUuY29uc3RydWN0b3I9ZDtkLl9fc3VwZXJfXz1hLnByb3RvdHlwZTtyZXR1cm4gZH0sbj1mdW5jdGlvbihhLGIpe3JldHVybiFhfHwhYVtiXT9udWxsOmYuaXNGdW5jdGlvbihhW2JdKT9hW2JdKCk6YVtiXX0sdD1mdW5jdGlvbigpe3Rocm93IEVycm9yKCdBIFwidXJsXCIgcHJvcGVydHkgb3IgZnVuY3Rpb24gbXVzdCBiZSBzcGVjaWZpZWQnKTt9fSkuY2FsbCh0aGlzKTtcbiIsIi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90XG4vLyB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZlxuLy8gdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVFxuLy8gV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlXG4vLyBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlclxuLy8gdGhlIExpY2Vuc2UuXG5cbi8qKlxuICogQG5hbWVzcGFjZVxuICogJC5jb3VjaCBpcyB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggYSBDb3VjaERCIHNlcnZlciwgdGhlIHNlcnZlciBtZXRob2RzIGNhblxuICogYmUgY2FsbGVkIGRpcmVjdGx5IHdpdGhvdXQgY3JlYXRpbmcgYW4gaW5zdGFuY2UuIFR5cGljYWxseSBhbGwgbWV0aG9kcyBhcmVcbiAqIHBhc3NlZCBhbiA8Y29kZT5vcHRpb25zPC9jb2RlPiBvYmplY3Qgd2hpY2ggZGVmaW5lcyBhIHN1Y2Nlc3MgY2FsbGJhY2sgd2hpY2hcbiAqIGlzIGNhbGxlZCB3aXRoIHRoZSBkYXRhIHJldHVybmVkIGZyb20gdGhlIGh0dHAgcmVxdWVzdCB0byBDb3VjaERCLCB5b3UgY2FuXG4gKiBmaW5kIHRoZSBvdGhlciBzZXR0aW5ncyB0aGF0IGNhbiBiZSB1c2VkIGluIHRoZSA8Y29kZT5vcHRpb25zPC9jb2RlPiBvYmplY3RcbiAqIGZyb20gPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5cbiAqIGpRdWVyeS5hamF4IHNldHRpbmdzPC9hPlxuICogPHByZT48Y29kZT4kLmNvdWNoLmFjdGl2ZVRhc2tzKHtcbiAqICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAqICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAqICAgfVxuICogfSk7PC9jb2RlPjwvcHJlPlxuICogT3V0cHV0cyAoZm9yIGV4YW1wbGUpOlxuICogPHByZT48Y29kZT5bXG4gKiAge1xuICogICBcInBpZFwiIDogXCI8MC4xMTU5OS4wPlwiLFxuICogICBcInN0YXR1c1wiIDogXCJDb3BpZWQgMCBvZiAxODM2OSBjaGFuZ2VzICgwJSlcIixcbiAqICAgXCJ0YXNrXCIgOiBcInJlY2lwZXNcIixcbiAqICAgXCJ0eXBlXCIgOiBcIkRhdGFiYXNlIENvbXBhY3Rpb25cIlxuICogIH1cbiAqXTwvY29kZT48L3ByZT5cbiAqL1xuKGZ1bmN0aW9uKCQpIHtcblxuICAkLmNvdWNoID0gJC5jb3VjaCB8fCB7fTtcbiAgLyoqIEBsZW5kcyAkLmNvdWNoICovXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmdW5jdGlvbiBlbmNvZGVEb2NJZChkb2NJRCkge1xuICAgIHZhciBwYXJ0cyA9IGRvY0lELnNwbGl0KFwiL1wiKTtcbiAgICBpZiAocGFydHNbMF0gPT0gXCJfZGVzaWduXCIpIHtcbiAgICAgIHBhcnRzLnNoaWZ0KCk7XG4gICAgICByZXR1cm4gXCJfZGVzaWduL1wiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcnRzLmpvaW4oJy8nKSk7XG4gICAgfVxuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoZG9jSUQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIHZhciB1dWlkQ2FjaGUgPSBbXTtcblxuICAkLmV4dGVuZCgkLmNvdWNoLCB7XG4gICAgdXJsUHJlZml4OiAnJyxcblxuICAgIC8qKlxuICAgICAqIFlvdSBjYW4gb2J0YWluIGEgbGlzdCBvZiBhY3RpdmUgdGFza3MgYnkgdXNpbmcgdGhlIC9fYWN0aXZlX3Rhc2tzIFVSTC5cbiAgICAgKiBUaGUgcmVzdWx0IGlzIGEgSlNPTiBhcnJheSBvZiB0aGUgY3VycmVudGx5IHJ1bm5pbmcgdGFza3MsIHdpdGggZWFjaCB0YXNrXG4gICAgICogYmVpbmcgZGVzY3JpYmVkIHdpdGggYSBzaW5nbGUgb2JqZWN0LlxuICAgICAqIEBzZWUgPGEgaHJlZj1cImh0dHA6Ly90ZWNoem9uZS5jb3VjaGJhc2UuY29tL3NpdGVzL2RlZmF1bHQvZmlsZXMvdXBsb2Fkcy9cbiAgICAgKiBhbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLW1pc2MuaHRtbCNjb3VjaGJhc2UtYXBpLW1pc2NfYWN0aXZlLXRhc2tcbiAgICAgKiBzX2dldFwiPmRvY3MgZm9yIC9fYWN0aXZlX3Rhc2tzPC9hPlxuICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20valF1ZXJ5LmFqYXhcbiAgICAgKiAvI2pRdWVyeS1hamF4LXNldHRpbmdzXCI+alF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICovXG4gICAgYWN0aXZlVGFza3M6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGFqYXgoXG4gICAgICAgIHt1cmw6IHRoaXMudXJsUHJlZml4ICsgXCIvX2FjdGl2ZV90YXNrc1wifSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgXCJBY3RpdmUgdGFzayBzdGF0dXMgY291bGQgbm90IGJlIHJldHJpZXZlZFwiXG4gICAgICApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhbGwgdGhlIGRhdGFiYXNlcyBpbiB0aGUgQ291Y2hEQiBpbnN0YW5jZVxuICAgICAqIEBzZWUgPGEgaHJlZj1cImh0dHA6Ly90ZWNoem9uZS5jb3VjaGJhc2UuY29tL3NpdGVzL2RlZmF1bHQvZmlsZXMvdXBsb2Fkcy9cbiAgICAgKiBhbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLW1pc2MuaHRtbCNjb3VjaGJhc2UtYXBpLW1pc2NfYWN0aXZlLXRhc2tcbiAgICAgKiBzX2dldFwiPmRvY3MgZm9yIC9fYWxsX2RiczwvYT5cbiAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gb3B0aW9ucyA8YSBocmVmPVwiaHR0cDovL2FwaS5qcXVlcnkuY29tL2pRdWVyeS5hamF4XG4gICAgICogLyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAqL1xuICAgIGFsbERiczogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgYWpheChcbiAgICAgICAge3VybDogdGhpcy51cmxQcmVmaXggKyBcIi9fYWxsX2Ric1wifSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgXCJBbiBlcnJvciBvY2N1cnJlZCByZXRyaWV2aW5nIHRoZSBsaXN0IG9mIGFsbCBkYXRhYmFzZXNcIlxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVmlldyBhbmQgZWRpdCB0aGUgQ291Y2hEQiBjb25maWd1cmF0aW9uLCBjYWxsZWQgd2l0aCBqdXN0IHRoZSBvcHRpb25zXG4gICAgICogcGFyYW1ldGVyIHRoZSBlbnRpcmUgY29uZmlnIGlzIHJldHVybmVkLCB5b3UgY2FuIGJlIG1vcmUgc3BlY2lmaWMgYnlcbiAgICAgKiBwYXNzaW5nIHRoZSBzZWN0aW9uIGFuZCBvcHRpb24gcGFyYW1ldGVycywgaWYgeW91IHNwZWNpZnkgYSB2YWx1ZSB0aGF0XG4gICAgICogdmFsdWUgd2lsbCBiZSBzdG9yZWQgaW4gdGhlIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy91cGxvYWRzL1xuICAgICAqIGFsbC9kb2N1bWVudGF0aW9uL2NvdWNoYmFzZS1hcGktY29uZmlnLmh0bWwjY291Y2hiYXNlLWFwaS1jb25maWdfY29uZmlnXG4gICAgICogLXNlY3Rpb24ta2V5X3B1dFwiPmRvY3MgZm9yIC9fY29uZmlnPC9hPlxuICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zXG4gICAgICogPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5cbiAgICAgKiBqUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3NlY3Rpb25dIHRoZSBzZWN0aW9uIG9mIHRoZSBjb25maWdcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbl0gdGhlIHBhcnRpY3VsYXIgY29uZmlnIG9wdGlvblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVdIHZhbHVlIHRvIGJlIHNldFxuICAgICAqL1xuICAgIGNvbmZpZzogZnVuY3Rpb24ob3B0aW9ucywgc2VjdGlvbiwgb3B0aW9uLCB2YWx1ZSkge1xuICAgICAgdmFyIHJlcSA9IHt1cmw6IHRoaXMudXJsUHJlZml4ICsgXCIvX2NvbmZpZy9cIn07XG4gICAgICBpZiAoc2VjdGlvbikge1xuICAgICAgICByZXEudXJsICs9IGVuY29kZVVSSUNvbXBvbmVudChzZWN0aW9uKSArIFwiL1wiO1xuICAgICAgICBpZiAob3B0aW9uKSB7XG4gICAgICAgICAgcmVxLnVybCArPSBlbmNvZGVVUklDb21wb25lbnQob3B0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJlcS50eXBlID0gXCJERUxFVEVcIjsgICAgICAgIFxuICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlcS50eXBlID0gXCJQVVRcIjtcbiAgICAgICAgcmVxLmRhdGEgPSB0b0pTT04odmFsdWUpO1xuICAgICAgICByZXEuY29udGVudFR5cGUgPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcbiAgICAgICAgcmVxLnByb2Nlc3NEYXRhID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgYWpheChyZXEsIG9wdGlvbnMsXG4gICAgICAgIFwiQW4gZXJyb3Igb2NjdXJyZWQgcmV0cmlldmluZy91cGRhdGluZyB0aGUgc2VydmVyIGNvbmZpZ3VyYXRpb25cIlxuICAgICAgKTtcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNlc3Npb24gaW5mb3JtYXRpb24gZm9yIHRoZSBjdXJyZW50bHkgbG9nZ2VkIGluIHVzZXIuXG4gICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnNcbiAgICAgKiA8YSBocmVmPVwiaHR0cDovL2FwaS5qcXVlcnkuY29tL2pRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPlxuICAgICAqIGpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAqL1xuICAgIHNlc3Npb246IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgdHlwZTogXCJHRVRcIiwgdXJsOiB0aGlzLnVybFByZWZpeCArIFwiL19zZXNzaW9uXCIsXG4gICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKHhocikge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZXEpIHtcbiAgICAgICAgICB2YXIgcmVzcCA9ICQucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VjY2Vzcykgb3B0aW9ucy5zdWNjZXNzKHJlc3ApO1xuICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5lcnJvcikge1xuICAgICAgICAgICAgb3B0aW9ucy5lcnJvcihyZXEuc3RhdHVzLCByZXNwLmVycm9yLCByZXNwLnJlYXNvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiQW4gZXJyb3Igb2NjdXJyZWQgZ2V0dGluZyBzZXNzaW9uIGluZm86IFwiICsgcmVzcC5yZWFzb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdXNlckRiIDogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICQuY291Y2guc2Vzc2lvbih7XG4gICAgICAgIHN1Y2Nlc3MgOiBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgdmFyIHVzZXJEYiA9ICQuY291Y2guZGIocmVzcC5pbmZvLmF1dGhlbnRpY2F0aW9uX2RiKTtcbiAgICAgICAgICBjYWxsYmFjayh1c2VyRGIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IHVzZXIgb24gdGhlIENvdWNoREIgc2VydmVyLCA8Y29kZT51c2VyX2RvYzwvY29kZT4gaXMgYW5cbiAgICAgKiBvYmplY3Qgd2l0aCBhIDxjb2RlPm5hbWU8L2NvZGU+IGZpZWxkIGFuZCBvdGhlciBpbmZvcm1hdGlvbiB5b3Ugd2FudFxuICAgICAqIHRvIHN0b3JlIHJlbGF0aW5nIHRvIHRoYXQgdXNlciwgZm9yIGV4YW1wbGVcbiAgICAgKiA8Y29kZT57XCJuYW1lXCI6IFwiZGFsZWhhcnZleVwifTwvY29kZT5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdXNlcl9kb2MgVXNlcnMgZGV0YWlsc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXNzd29yZCBVc2VycyBwYXNzd29yZFxuICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zXG4gICAgICogPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5cbiAgICAgICogalF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICovXG4gICAgc2lnbnVwOiBmdW5jdGlvbih1c2VyX2RvYywgcGFzc3dvcmQsIG9wdGlvbnMpIHsgICAgICBcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgLy8gcHJlcGFyZSB1c2VyIGRvYyBiYXNlZCBvbiBuYW1lIGFuZCBwYXNzd29yZFxuICAgICAgdXNlcl9kb2MgPSB0aGlzLnByZXBhcmVVc2VyRG9jKHVzZXJfZG9jLCBwYXNzd29yZCk7XG4gICAgICAkLmNvdWNoLnVzZXJEYihmdW5jdGlvbihkYikge1xuICAgICAgICBkYi5zYXZlRG9jKHVzZXJfZG9jLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQb3B1bGF0ZXMgYSB1c2VyIGRvYyB3aXRoIGEgbmV3IHBhc3N3b3JkLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyX2RvYyBVc2VyIGRldGFpbHNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmV3X3Bhc3N3b3JkIE5ldyBQYXNzd29yZFxuICAgICAqL1xuICAgIHByZXBhcmVVc2VyRG9jOiBmdW5jdGlvbih1c2VyX2RvYywgbmV3X3Bhc3N3b3JkKSB7XG4gICAgICBpZiAodHlwZW9mIGhleF9zaGExID09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgYWxlcnQoXCJjcmVhdGluZyBhIHVzZXIgZG9jIHJlcXVpcmVzIHNoYTEuanMgdG8gYmUgbG9hZGVkIGluIHRoZSBwYWdlXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgdXNlcl9wcmVmaXggPSBcIm9yZy5jb3VjaGRiLnVzZXI6XCI7XG4gICAgICB1c2VyX2RvYy5faWQgPSB1c2VyX2RvYy5faWQgfHwgdXNlcl9wcmVmaXggKyB1c2VyX2RvYy5uYW1lO1xuICAgICAgaWYgKG5ld19wYXNzd29yZCkge1xuICAgICAgICAvLyBoYW5kbGUgdGhlIHBhc3N3b3JkIGNyeXB0b1xuICAgICAgICB1c2VyX2RvYy5zYWx0ID0gJC5jb3VjaC5uZXdVVUlEKCk7XG4gICAgICAgIHVzZXJfZG9jLnBhc3N3b3JkX3NoYSA9IGhleF9zaGExKG5ld19wYXNzd29yZCArIHVzZXJfZG9jLnNhbHQpO1xuICAgICAgfVxuICAgICAgdXNlcl9kb2MudHlwZSA9IFwidXNlclwiO1xuICAgICAgaWYgKCF1c2VyX2RvYy5yb2xlcykge1xuICAgICAgICB1c2VyX2RvYy5yb2xlcyA9IFtdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVzZXJfZG9jO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBdXRoZW50aWNhdGUgYWdhaW5zdCBDb3VjaERCLCB0aGUgPGNvZGU+b3B0aW9uczwvY29kZT4gcGFyYW1ldGVyIGlzXG4gICAgICAqZXhwZWN0ZWQgdG8gaGF2ZSA8Y29kZT5uYW1lPC9jb2RlPiBhbmQgPGNvZGU+cGFzc3dvcmQ8L2NvZGU+IGZpZWxkcy5cbiAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gb3B0aW9uc1xuICAgICAqIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20valF1ZXJ5LmFqYXgvI2pRdWVyeS1hamF4LXNldHRpbmdzXCI+XG4gICAgICogalF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICovXG4gICAgbG9naW46IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgdHlwZTogXCJQT1NUXCIsIHVybDogdGhpcy51cmxQcmVmaXggKyBcIi9fc2Vzc2lvblwiLCBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgIGRhdGE6IHtuYW1lOiBvcHRpb25zLm5hbWUsIHBhc3N3b3JkOiBvcHRpb25zLnBhc3N3b3JkfSxcbiAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlcSkge1xuICAgICAgICAgIHZhciByZXNwID0gJC5wYXJzZUpTT04ocmVxLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zdWNjZXNzKSBvcHRpb25zLnN1Y2Nlc3MocmVzcCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmVycm9yKSB7XG4gICAgICAgICAgICBvcHRpb25zLmVycm9yKHJlcS5zdGF0dXMsIHJlc3AuZXJyb3IsIHJlc3AucmVhc29uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQoXCJBbiBlcnJvciBvY2N1cnJlZCBsb2dnaW5nIGluOiBcIiArIHJlc3AucmVhc29uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmNvbXBsZXRlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgb3B0aW9ucy5jb21wbGV0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIHlvdXIgY3VycmVudCBDb3VjaERCIHVzZXIgc2Vzc2lvblxuICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zXG4gICAgICogPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5cbiAgICAgKiBqUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgKi9cbiAgICBsb2dvdXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgdHlwZTogXCJERUxFVEVcIiwgdXJsOiB0aGlzLnVybFByZWZpeCArIFwiL19zZXNzaW9uXCIsIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgdXNlcm5hbWUgOiBcIl9cIiwgcGFzc3dvcmQgOiBcIl9cIixcbiAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlcSkge1xuICAgICAgICAgIHZhciByZXNwID0gJC5wYXJzZUpTT04ocmVxLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zdWNjZXNzKSBvcHRpb25zLnN1Y2Nlc3MocmVzcCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmVycm9yKSB7XG4gICAgICAgICAgICBvcHRpb25zLmVycm9yKHJlcS5zdGF0dXMsIHJlc3AuZXJyb3IsIHJlc3AucmVhc29uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQoXCJBbiBlcnJvciBvY2N1cnJlZCBsb2dnaW5nIG91dDogXCIgKyByZXNwLnJlYXNvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqICQuY291Y2guZGIgaXMgdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIGEgc3BlY2lmaWMgQ291Y2hEQiBkYXRhYmFzZVxuICAgICAqIDxwcmU+PGNvZGU+dmFyICRkYiA9ICQuY291Y2guZGIoXCJteWRhdGFiYXNlXCIpO1xuICAgICAqJGRiLmFsbEFwcHMoe1xuICAgICAqICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAqICAgIC4uLiBwcm9jZXNzIGRhdGEgLi4uXG4gICAgICogIH1cbiAgICAgKn0pO1xuICAgICAqIDwvY29kZT48L3ByZT5cbiAgICAgKi9cbiAgICBkYjogZnVuY3Rpb24obmFtZSwgZGJfb3B0cykge1xuICAgICAgZGJfb3B0cyA9IGRiX29wdHMgfHwge307XG4gICAgICB2YXIgcmF3RG9jcyA9IHt9O1xuICAgICAgZnVuY3Rpb24gbWF5YmVBcHBseVZlcnNpb24oZG9jKSB7XG4gICAgICAgIGlmIChkb2MuX2lkICYmIGRvYy5fcmV2ICYmIHJhd0RvY3NbZG9jLl9pZF0gJiZcbiAgICAgICAgICAgIHJhd0RvY3NbZG9jLl9pZF0ucmV2ID09IGRvYy5fcmV2KSB7XG4gICAgICAgICAgLy8gdG9kbzogY2FuIHdlIHVzZSBjb21tb25qcyByZXF1aXJlIGhlcmU/XG4gICAgICAgICAgaWYgKHR5cGVvZiBCYXNlNjQgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgYWxlcnQoXCJwbGVhc2UgaW5jbHVkZSAvX3V0aWxzL3NjcmlwdC9iYXNlNjQuanMgaW4gdGhlIHBhZ2UgZm9yIFwiICtcbiAgICAgICAgICAgICAgICAgIFwiYmFzZTY0IHN1cHBvcnRcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvYy5fYXR0YWNobWVudHMgPSBkb2MuX2F0dGFjaG1lbnRzIHx8IHt9O1xuICAgICAgICAgICAgZG9jLl9hdHRhY2htZW50c1tcInJldi1cIitkb2MuX3Jldi5zcGxpdChcIi1cIilbMF1dID0ge1xuICAgICAgICAgICAgICBjb250ZW50X3R5cGUgOlwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICBkYXRhIDogQmFzZTY0LmVuY29kZShyYXdEb2NzW2RvYy5faWRdLnJhdylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZXR1cm4gLyoqIEBsZW5kcyAkLmNvdWNoLmRiICove1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICB1cmk6IHRoaXMudXJsUHJlZml4ICsgXCIvXCIgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyBcIi9cIixcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVxdWVzdCBjb21wYWN0aW9uIG9mIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuXG4gICAgICAgICAqIEBzZWUgPGEgaHJlZj1cImh0dHA6Ly90ZWNoem9uZS5jb3VjaGJhc2UuY29tL3NpdGVzL2RlZmF1bHQvZmlsZXMvXG4gICAgICAgICAqIHVwbG9hZHMvYWxsL2RvY3VtZW50YXRpb24vY291Y2hiYXNlLWFwaS1kYi5odG1sI2NvdWNoYmFzZS1hcGktZGJfXG4gICAgICAgICAqIGRiLWNvbXBhY3RfcG9zdFwiPmRvY3MgZm9yIC9kYi9fY29tcGFjdDwvYT5cbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnNcbiAgICAgICAgICogPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5cbiAgICAgICAgICogalF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICAgICAqL1xuICAgICAgICBjb21wYWN0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgJC5leHRlbmQob3B0aW9ucywge3N1Y2Nlc3NTdGF0dXM6IDIwMn0pO1xuICAgICAgICAgIGFqYXgoe1xuICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIiwgdXJsOiB0aGlzLnVyaSArIFwiX2NvbXBhY3RcIixcbiAgICAgICAgICAgICAgZGF0YTogXCJcIiwgcHJvY2Vzc0RhdGE6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIFwiVGhlIGRhdGFiYXNlIGNvdWxkIG5vdCBiZSBjb21wYWN0ZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFucyB1cCB0aGUgY2FjaGVkIHZpZXcgb3V0cHV0IG9uIGRpc2sgZm9yIGEgZ2l2ZW4gdmlldy5cbiAgICAgICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy9cbiAgICAgICAgICogdXBsb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLWRiLmh0bWwjY291Y2hiYXNlLWFwaS1kYlxuICAgICAgICAgKiBfZGItdmlldy1jbGVhbnVwX3Bvc3RcIj5kb2NzIGZvciAvZGIvX2NvbXBhY3Q8L2E+XG4gICAgICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20vXG4gICAgICAgICAqIGpRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAgICAgKi9cbiAgICAgICAgdmlld0NsZWFudXA6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgICAkLmV4dGVuZChvcHRpb25zLCB7c3VjY2Vzc1N0YXR1czogMjAyfSk7XG4gICAgICAgICAgYWpheCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLCB1cmw6IHRoaXMudXJpICsgXCJfdmlld19jbGVhbnVwXCIsXG4gICAgICAgICAgICAgIGRhdGE6IFwiXCIsIHByb2Nlc3NEYXRhOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBcIlRoZSB2aWV3cyBjb3VsZCBub3QgYmUgY2xlYW5lZCB1cFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcGFjdHMgdGhlIHZpZXcgaW5kZXhlcyBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCBkZXNpZ25cbiAgICAgICAgICogZG9jdW1lbnQuIFlvdSBjYW4gdXNlIHRoaXMgaW4gcGxhY2Ugb2YgdGhlIGZ1bGwgZGF0YWJhc2UgY29tcGFjdGlvblxuICAgICAgICAgKiBpZiB5b3Uga25vdyBhIHNwZWNpZmljIHNldCBvZiB2aWV3IGluZGV4ZXMgaGF2ZSBiZWVuIGFmZmVjdGVkIGJ5IGFcbiAgICAgICAgICogcmVjZW50IGRhdGFiYXNlIGNoYW5nZS5cbiAgICAgICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy91cGxcbiAgICAgICAgICogb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLWRiLmh0bWwjY291Y2hiYXNlLWFwaS1kYl9kYi1cbiAgICAgICAgICogY29tcGFjdC1kZXNpZ24tZG9jX3Bvc3RcIj5kb2NzIGZvciAvZGIvX2NvbXBhY3QvZGVzaWduLWRvYzwvYT5cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGdyb3VwbmFtZSBOYW1lIG9mIGRlc2lnbi1kb2MgdG8gY29tcGFjdFxuICAgICAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gb3B0aW9ucyA8YSBocmVmPVwiaHR0cDovL2FwaS5qcXVlcnkuY29tL1xuICAgICAgICAgKiBqUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5qUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgICAgICovXG4gICAgICAgIGNvbXBhY3RWaWV3OiBmdW5jdGlvbihncm91cG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAkLmV4dGVuZChvcHRpb25zLCB7c3VjY2Vzc1N0YXR1czogMjAyfSk7XG4gICAgICAgICAgYWpheCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLCB1cmw6IHRoaXMudXJpICsgXCJfY29tcGFjdC9cIiArIGdyb3VwbmFtZSxcbiAgICAgICAgICAgICAgZGF0YTogXCJcIiwgcHJvY2Vzc0RhdGE6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIFwiVGhlIHZpZXcgY291bGQgbm90IGJlIGNvbXBhY3RlZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIGEgbmV3IGRhdGFiYXNlXG4gICAgICAgICAqIEBzZWUgPGEgaHJlZj1cImh0dHA6Ly90ZWNoem9uZS5jb3VjaGJhc2UuY29tL3NpdGVzL2RlZmF1bHQvZmlsZXMvXG4gICAgICAgICAqIHVwbG9hZHMvYWxsL2RvY3VtZW50YXRpb24vY291Y2hiYXNlLWFwaS1kYi5odG1sI2NvdWNoYmFzZS1hcGktZGJfXG4gICAgICAgICAqIGRiX3B1dFwiPmRvY3MgZm9yIFBVVCAvZGIvPC9hPlxuICAgICAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gb3B0aW9ucyA8YSBocmVmPVwiaHR0cDovL2FwaS5qcXVlcnkuY29tL1xuICAgICAgICAgKiBqUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5qUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgICQuZXh0ZW5kKG9wdGlvbnMsIHtzdWNjZXNzU3RhdHVzOiAyMDF9KTtcbiAgICAgICAgICBhamF4KHtcbiAgICAgICAgICAgICAgdHlwZTogXCJQVVRcIiwgdXJsOiB0aGlzLnVyaSwgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICBkYXRhOiBcIlwiLCBwcm9jZXNzRGF0YTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgXCJUaGUgZGF0YWJhc2UgY291bGQgbm90IGJlIGNyZWF0ZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZSwgYW5kIGFsbCB0aGUgZG9jdW1lbnRzIGFuZFxuICAgICAgICAgKiBhdHRhY2htZW50cyBjb250YWluZWQgd2l0aGluIGl0LlxuICAgICAgICAgKiBAc2VlIDxhIGhyZWY9XCJodHRwOi8vdGVjaHpvbmUuY291Y2hiYXNlLmNvbS9zaXRlcy9kZWZhdWx0L2ZpbGVzL1xuICAgICAgICAgKiB1cGxvYWRzL2FsbC9kb2N1bWVudGF0aW9uL2NvdWNoYmFzZS1hcGktZGIuaHRtbCNjb3VjaGJhc2UtYXBpLWRiX1xuICAgICAgICAgKiBkYl9kZWxldGVcIj5kb2NzIGZvciBERUxFVEUgL2RiLzwvYT5cbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnMgPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9cbiAgICAgICAgICogalF1ZXJ5LmFqYXgvI2pRdWVyeS1hamF4LXNldHRpbmdzXCI+alF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICAgICAqL1xuICAgICAgICBkcm9wOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgYWpheChcbiAgICAgICAgICAgIHt0eXBlOiBcIkRFTEVURVwiLCB1cmw6IHRoaXMudXJpfSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBcIlRoZSBkYXRhYmFzZSBjb3VsZCBub3QgYmUgZGVsZXRlZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLlxuICAgICAgICAgKiBAc2VlIDxhIGhyZWY9XCJodHRwOi8vdGVjaHpvbmUuY291Y2hiYXNlLmNvbS9zaXRlcy9kZWZhdWx0L2ZpbGVzL1xuICAgICAgICAgKiB1cGxvYWRzL2FsbC9kb2N1bWVudGF0aW9uL2NvdWNoYmFzZS1hcGktZGIuaHRtbCNjb3VjaGJhc2UtYXBpLWRiXG4gICAgICAgICAqIF9kYl9nZXRcIj5kb2NzIGZvciBHRVQgL2RiLzwvYT5cbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnMgPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9cbiAgICAgICAgICogalF1ZXJ5LmFqYXgvI2pRdWVyeS1hamF4LXNldHRpbmdzXCI+alF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICAgICAqL1xuICAgICAgICBpbmZvOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgYWpheChcbiAgICAgICAgICAgIHt1cmw6IHRoaXMudXJpfSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBcIkRhdGFiYXNlIGluZm9ybWF0aW9uIGNvdWxkIG5vdCBiZSByZXRyaWV2ZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuYW1lc3BhY2VcbiAgICAgICAgICogJC5jb3VjaC5kYi5jaGFuZ2VzIHByb3ZpZGVzIGFuIEFQSSBmb3Igc3Vic2NyaWJpbmcgdG8gdGhlIGNoYW5nZXNcbiAgICAgICAgICogZmVlZFxuICAgICAgICAgKiA8cHJlPjxjb2RlPnZhciAkY2hhbmdlcyA9ICQuY291Y2guZGIoXCJteWRhdGFiYXNlXCIpLmNoYW5nZXMoKTtcbiAgICAgICAgICokY2hhbmdlcy5vbkNoYW5nZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAqICAgIC4uLiBwcm9jZXNzIGRhdGEgLi4uXG4gICAgICAgICAqIH1cbiAgICAgICAgICogJGNoYW5nZXMuc3RvcCgpO1xuICAgICAgICAgKiA8L2NvZGU+PC9wcmU+XG4gICAgICAgICAqL1xuICAgICAgICBjaGFuZ2VzOiBmdW5jdGlvbihzaW5jZSwgb3B0aW9ucykge1xuXG4gICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgLy8gc2V0IHVwIHRoZSBwcm9taXNlIG9iamVjdCB3aXRoaW4gYSBjbG9zdXJlIGZvciB0aGlzIGhhbmRsZXJcbiAgICAgICAgICB2YXIgdGltZW91dCA9IDEwMCwgZGIgPSB0aGlzLCBhY3RpdmUgPSB0cnVlLFxuICAgICAgICAgICAgbGlzdGVuZXJzID0gW10sXG4gICAgICAgICAgICBwcm9taXNlID0gLyoqIEBsZW5kcyAkLmNvdWNoLmRiLmNoYW5nZXMgKi8ge1xuICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICogQWRkIGEgbGlzdGVuZXIgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9cbiAgICAgICAgICAgICAgICogZmlsZXMvdXBsb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLWRiLmh0bWwjY291Y2hcbiAgICAgICAgICAgICAgICogYmFzZS1hcGktZGJfZGItY2hhbmdlc19nZXRcIj5kb2NzIGZvciAvZGIvX2NoYW5nZXM8L2E+XG4gICAgICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1biBDYWxsYmFjayBmdW5jdGlvbiB0byBydW4gd2hlblxuICAgICAgICAgICAgICAgKiBub3RpZmllZCBvZiBjaGFuZ2VzLlxuICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uQ2hhbmdlIDogZnVuY3Rpb24oZnVuKSB7XG4gICAgICAgICAgICAgIGxpc3RlbmVycy5wdXNoKGZ1bik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICogU3RvcCBzdWJzY3JpYmluZyB0byB0aGUgY2hhbmdlcyBmZWVkXG4gICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RvcCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIC8vIGNhbGwgZWFjaCBsaXN0ZW5lciB3aGVuIHRoZXJlIGlzIGEgY2hhbmdlXG4gICAgICAgICAgZnVuY3Rpb24gdHJpZ2dlckxpc3RlbmVycyhyZXNwKSB7XG4gICAgICAgICAgICAkLmVhY2gobGlzdGVuZXJzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhpcyhyZXNwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG4gICAgICAgICAgLy8gd2hlbiB0aGVyZSBpcyBhIGNoYW5nZSwgY2FsbCBhbnkgbGlzdGVuZXJzLCB0aGVuIGNoZWNrIGZvclxuICAgICAgICAgIC8vIGFub3RoZXIgY2hhbmdlXG4gICAgICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgdGltZW91dCA9IDEwMDtcbiAgICAgICAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgICAgICAgc2luY2UgPSByZXNwLmxhc3Rfc2VxO1xuICAgICAgICAgICAgICB0cmlnZ2VyTGlzdGVuZXJzKHJlc3ApO1xuICAgICAgICAgICAgICBnZXRDaGFuZ2VzU2luY2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfTtcbiAgICAgICAgICBvcHRpb25zLmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZ2V0Q2hhbmdlc1NpbmNlLCB0aW1lb3V0KTtcbiAgICAgICAgICAgICAgdGltZW91dCA9IHRpbWVvdXQgKiAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgLy8gYWN0dWFsbHkgbWFrZSB0aGUgY2hhbmdlcyByZXF1ZXN0XG4gICAgICAgICAgZnVuY3Rpb24gZ2V0Q2hhbmdlc1NpbmNlKCkge1xuICAgICAgICAgICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7aGVhcnRiZWF0IDogMTAgKiAxMDAwfSwgb3B0aW9ucywge1xuICAgICAgICAgICAgICBmZWVkIDogXCJsb25ncG9sbFwiLFxuICAgICAgICAgICAgICBzaW5jZSA6IHNpbmNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFqYXgoXG4gICAgICAgICAgICAgIHt1cmw6IGRiLnVyaSArIFwiX2NoYW5nZXNcIitlbmNvZGVPcHRpb25zKG9wdHMpfSxcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgXCJFcnJvciBjb25uZWN0aW5nIHRvIFwiK2RiLnVyaStcIi9fY2hhbmdlcy5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc3RhcnQgdGhlIGZpcnN0IHJlcXVlc3RcbiAgICAgICAgICBpZiAoc2luY2UpIHtcbiAgICAgICAgICAgIGdldENoYW5nZXNTaW5jZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYi5pbmZvKHtcbiAgICAgICAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uKGluZm8pIHtcbiAgICAgICAgICAgICAgICBzaW5jZSA9IGluZm8udXBkYXRlX3NlcTtcbiAgICAgICAgICAgICAgICBnZXRDaGFuZ2VzU2luY2UoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGZXRjaCBhbGwgdGhlIGRvY3MgaW4gdGhpcyBkYiwgeW91IGNhbiBzcGVjaWZ5IGFuIGFycmF5IG9mIGtleXMgdG9cbiAgICAgICAgICogZmV0Y2ggYnkgcGFzc2luZyB0aGUgPGNvZGU+a2V5czwvY29kZT4gZmllbGQgaW4gdGhlXG4gICAgICAgICAqIDxjb2RlPm9wdGlvbnM8L2NvZGU+XG4gICAgICAgICAqIHBhcmFtZXRlci5cbiAgICAgICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy9cbiAgICAgICAgICogdXBsb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLWRiLmh0bWwjY291Y2hiYXNlLWFwaS1kYl9cbiAgICAgICAgICogZGItYWxsLWRvY3NfZ2V0XCI+ZG9jcyBmb3IgL2RiL2FsbF9kb2NzLzwvYT5cbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnMgPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9cbiAgICAgICAgICogalF1ZXJ5LmFqYXgvI2pRdWVyeS1hamF4LXNldHRpbmdzXCI+alF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICAgICAqL1xuICAgICAgICBhbGxEb2NzOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgdmFyIHR5cGUgPSBcIkdFVFwiO1xuICAgICAgICAgIHZhciBkYXRhID0gbnVsbDtcbiAgICAgICAgICBpZiAob3B0aW9uc1tcImtleXNcIl0pIHtcbiAgICAgICAgICAgIHR5cGUgPSBcIlBPU1RcIjtcbiAgICAgICAgICAgIHZhciBrZXlzID0gb3B0aW9uc1tcImtleXNcIl07XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9uc1tcImtleXNcIl07XG4gICAgICAgICAgICBkYXRhID0gdG9KU09OKHsgXCJrZXlzXCI6IGtleXMgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFqYXgoe1xuICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICB1cmw6IHRoaXMudXJpICsgXCJfYWxsX2RvY3NcIiArIGVuY29kZU9wdGlvbnMob3B0aW9ucylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgXCJBbiBlcnJvciBvY2N1cnJlZCByZXRyaWV2aW5nIGEgbGlzdCBvZiBhbGwgZG9jdW1lbnRzXCJcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGZXRjaCBhbGwgdGhlIGRlc2lnbiBkb2NzIGluIHRoaXMgZGJcbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnMgPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9cbiAgICAgICAgICogalF1ZXJ5LmFqYXgvI2pRdWVyeS1hamF4LXNldHRpbmdzXCI+alF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICAgICAqL1xuICAgICAgICBhbGxEZXNpZ25Eb2NzOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgdGhpcy5hbGxEb2NzKCQuZXh0ZW5kKFxuICAgICAgICAgICAge3N0YXJ0a2V5OlwiX2Rlc2lnblwiLCBlbmRrZXk6XCJfZGVzaWduMFwifSwgb3B0aW9ucykpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGZXRjaCBhbGwgdGhlIGRlc2lnbiBkb2NzIHdpdGggYW4gaW5kZXguaHRtbCwgPGNvZGU+b3B0aW9uczwvY29kZT5cbiAgICAgICAgICogcGFyYW1ldGVyIGV4cGVjdHMgYW4gPGNvZGU+ZWFjaEFwcDwvY29kZT4gZmllbGQgd2hpY2ggaXMgYSBjYWxsYmFja1xuICAgICAgICAgKiBjYWxsZWQgb24gZWFjaCBhcHAgZm91bmQuXG4gICAgICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20vXG4gICAgICAgICAqIGpRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAgICAgKi9cbiAgICAgICAgYWxsQXBwczogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICBpZiAob3B0aW9ucy5lYWNoQXBwKSB7XG4gICAgICAgICAgICB0aGlzLmFsbERlc2lnbkRvY3Moe1xuICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKHJlc3Aucm93cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLm9wZW5Eb2ModGhpcy5pZCwge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkZG9jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4LCBhcHBQYXRoLCBhcHBOYW1lID0gZGRvYy5faWQuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgICBhcHBOYW1lLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgYXBwTmFtZSA9IGFwcE5hbWUuam9pbignLycpO1xuICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZGRvYy5jb3VjaGFwcCAmJiBkZG9jLmNvdWNoYXBwLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwUGF0aCA9IFsnJywgbmFtZSwgZGRvYy5faWQsIGluZGV4XS5qb2luKCcvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZG9jLl9hdHRhY2htZW50cyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGRvYy5fYXR0YWNobWVudHNbXCJpbmRleC5odG1sXCJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBQYXRoID0gWycnLCBuYW1lLCBkZG9jLl9pZCwgXCJpbmRleC5odG1sXCJdLmpvaW4oJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcFBhdGgpIG9wdGlvbnMuZWFjaEFwcChhcHBOYW1lLCBhcHBQYXRoLCBkZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbGVydChcIlBsZWFzZSBwcm92aWRlIGFuIGVhY2hBcHAgZnVuY3Rpb24gZm9yIGFsbEFwcHMoKVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIHNwZWNpZmllZCBkb2MgZnJvbSB0aGUgc3BlY2lmaWVkIGRiLlxuICAgICAgICAgKiBAc2VlIDxhIGhyZWY9XCJodHRwOi8vdGVjaHpvbmUuY291Y2hiYXNlLmNvbS9zaXRlcy9kZWZhdWx0L2ZpbGVzL1xuICAgICAgICAgKiB1cGxvYWRzL2FsbC9kb2N1bWVudGF0aW9uL2NvdWNoYmFzZS1hcGktZGJkb2MuaHRtbCNjb3VjaGJhc2UtYXBpLVxuICAgICAgICAgKiBkYmRvY19kYi1kb2NfZ2V0XCI+ZG9jcyBmb3IgR0VUIC9kYi9kb2M8L2E+XG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkb2NJZCBpZCBvZiBkb2N1bWVudCB0byBmZXRjaFxuICAgICAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gb3B0aW9ucyA8YSBocmVmPVwiaHR0cDovL2FwaS5qcXVlcnkuY29tL1xuICAgICAgICAgKiBqUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5qUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IGFqYXhPcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20vXG4gICAgICAgICAqIGpRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAgICAgKi9cbiAgICAgICAgb3BlbkRvYzogZnVuY3Rpb24oZG9jSWQsIG9wdGlvbnMsIGFqYXhPcHRpb25zKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgaWYgKGRiX29wdHMuYXR0YWNoUHJldlJldiB8fCBvcHRpb25zLmF0dGFjaFByZXZSZXYpIHtcbiAgICAgICAgICAgICQuZXh0ZW5kKG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgYmVmb3JlU3VjY2VzcyA6IGZ1bmN0aW9uKHJlcSwgZG9jKSB7XG4gICAgICAgICAgICAgICAgcmF3RG9jc1tkb2MuX2lkXSA9IHtcbiAgICAgICAgICAgICAgICAgIHJldiA6IGRvYy5fcmV2LFxuICAgICAgICAgICAgICAgICAgcmF3IDogcmVxLnJlc3BvbnNlVGV4dFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkLmV4dGVuZChvcHRpb25zLCB7XG4gICAgICAgICAgICAgIGJlZm9yZVN1Y2Nlc3MgOiBmdW5jdGlvbihyZXEsIGRvYykge1xuICAgICAgICAgICAgICAgIGlmIChkb2NbXCJqcXVlcnkuY291Y2guYXR0YWNoUHJldlJldlwiXSkge1xuICAgICAgICAgICAgICAgICAgcmF3RG9jc1tkb2MuX2lkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmV2IDogZG9jLl9yZXYsXG4gICAgICAgICAgICAgICAgICAgIHJhdyA6IHJlcS5yZXNwb25zZVRleHRcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWpheCh7dXJsOiB0aGlzLnVyaSArIGVuY29kZURvY0lkKGRvY0lkKSArIGVuY29kZU9wdGlvbnMob3B0aW9ucyl9LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIFwiVGhlIGRvY3VtZW50IGNvdWxkIG5vdCBiZSByZXRyaWV2ZWRcIixcbiAgICAgICAgICAgIGFqYXhPcHRpb25zXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIGEgbmV3IGRvY3VtZW50IGluIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UsIHVzaW5nIHRoZSBzdXBwbGllZFxuICAgICAgICAgKiBKU09OIGRvY3VtZW50IHN0cnVjdHVyZS4gSWYgdGhlIEpTT04gc3RydWN0dXJlIGluY2x1ZGVzIHRoZSBfaWRcbiAgICAgICAgICogZmllbGQsIHRoZW4gdGhlIGRvY3VtZW50IHdpbGwgYmUgY3JlYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnRcbiAgICAgICAgICogSUQuIElmIHRoZSBfaWQgZmllbGQgaXMgbm90IHNwZWNpZmllZCwgYSBuZXcgdW5pcXVlIElEIHdpbGwgYmVcbiAgICAgICAgICogZ2VuZXJhdGVkLlxuICAgICAgICAgKiBAc2VlIDxhIGhyZWY9XCJodHRwOi8vdGVjaHpvbmUuY291Y2hiYXNlLmNvbS9zaXRlcy9kZWZhdWx0L2ZpbGVzL1xuICAgICAgICAgKiB1cGxvYWRzL2FsbC9kb2N1bWVudGF0aW9uL2NvdWNoYmFzZS1hcGktZGJkb2MuaHRtbCNjb3VjaGJhc2UtYXBpLVxuICAgICAgICAgKiBkYmRvY19kYl9wb3N0XCI+ZG9jcyBmb3IgR0VUIC9kYi9kb2M8L2E+XG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkb2MgZG9jdW1lbnQgdG8gc2F2ZVxuICAgICAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gb3B0aW9ucyA8YSBocmVmPVwiaHR0cDovL2FwaS5qcXVlcnkuY29tL1xuICAgICAgICAgKiBqUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5qUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgICAgICovXG4gICAgICAgIHNhdmVEb2M6IGZ1bmN0aW9uKGRvYywgb3B0aW9ucykge1xuICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgIHZhciBkYiA9IHRoaXM7XG4gICAgICAgICAgdmFyIGJlZm9yZVNlbmQgPSBmdWxsQ29tbWl0KG9wdGlvbnMpO1xuICAgICAgICAgIGlmIChkb2MuX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSBcIlBPU1RcIjtcbiAgICAgICAgICAgIHZhciB1cmkgPSB0aGlzLnVyaTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IFwiUFVUXCI7XG4gICAgICAgICAgICB2YXIgdXJpID0gdGhpcy51cmkgKyBlbmNvZGVEb2NJZChkb2MuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHZlcnNpb25lZCA9IG1heWJlQXBwbHlWZXJzaW9uKGRvYyk7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6IG1ldGhvZCwgdXJsOiB1cmkgKyBlbmNvZGVPcHRpb25zKG9wdGlvbnMpLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLCBkYXRhOiB0b0pTT04oZG9jKSxcbiAgICAgICAgICAgIGJlZm9yZVNlbmQgOiBiZWZvcmVTZW5kLFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlcSkge1xuICAgICAgICAgICAgICB2YXIgcmVzcCA9ICQucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDAgfHwgcmVxLnN0YXR1cyA9PSAyMDEgfHwgcmVxLnN0YXR1cyA9PSAyMDIpIHtcbiAgICAgICAgICAgICAgICBkb2MuX2lkID0gcmVzcC5pZDtcbiAgICAgICAgICAgICAgICBkb2MuX3JldiA9IHJlc3AucmV2O1xuICAgICAgICAgICAgICAgIGlmICh2ZXJzaW9uZWQpIHtcbiAgICAgICAgICAgICAgICAgIGRiLm9wZW5Eb2MoZG9jLl9pZCwge1xuICAgICAgICAgICAgICAgICAgICBhdHRhY2hQcmV2UmV2IDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkb2MuX2F0dGFjaG1lbnRzID0gZC5fYXR0YWNobWVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VjY2Vzcykgb3B0aW9ucy5zdWNjZXNzKHJlc3ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VjY2Vzcykgb3B0aW9ucy5zdWNjZXNzKHJlc3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5lcnJvcihyZXEuc3RhdHVzLCByZXNwLmVycm9yLCByZXNwLnJlYXNvbik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJUaGUgZG9jdW1lbnQgY291bGQgbm90IGJlIHNhdmVkOiBcIiArIHJlc3AucmVhc29uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTYXZlIGEgbGlzdCBvZiBkb2N1bWVudHNcbiAgICAgICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy9cbiAgICAgICAgICogdXBsb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLWRiLmh0bWwjY291Y2hiYXNlLWFwaS1kYl9cbiAgICAgICAgICogZGItYnVsay1kb2NzX3Bvc3RcIj5kb2NzIGZvciAvZGIvX2J1bGtfZG9jczwvYT5cbiAgICAgICAgICogQHBhcmFtIHtPYmplY3RbXX0gZG9jcyBMaXN0IG9mIGRvY3VtZW50cyB0byBzYXZlXG4gICAgICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20vXG4gICAgICAgICAqIGpRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAgICAgKi9cbiAgICAgICAgYnVsa1NhdmU6IGZ1bmN0aW9uKGRvY3MsIG9wdGlvbnMpIHtcbiAgICAgICAgICB2YXIgYmVmb3JlU2VuZCA9IGZ1bGxDb21taXQob3B0aW9ucyk7XG4gICAgICAgICAgJC5leHRlbmQob3B0aW9ucywge3N1Y2Nlc3NTdGF0dXM6IDIwMSwgYmVmb3JlU2VuZCA6IGJlZm9yZVNlbmR9KTtcbiAgICAgICAgICBhamF4KHtcbiAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgIHVybDogdGhpcy51cmkgKyBcIl9idWxrX2RvY3NcIiArIGVuY29kZU9wdGlvbnMob3B0aW9ucyksXG4gICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIiwgZGF0YTogdG9KU09OKGRvY3MpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIFwiVGhlIGRvY3VtZW50cyBjb3VsZCBub3QgYmUgc2F2ZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkb2N1bWVudCBmcm9tIHRoZSBkYXRhYmFzZS4gWW91IG11c3Qgc3VwcGx5XG4gICAgICAgICAqIHRoZSBjdXJyZW50IChsYXRlc3QpIHJldmlzaW9uIGFuZCA8Y29kZT5pZDwvY29kZT4gb2YgdGhlIGRvY3VtZW50XG4gICAgICAgICAqIHRvIGRlbGV0ZSBlZyA8Y29kZT5yZW1vdmVEb2Moe19pZDpcIm15ZG9jXCIsIF9yZXY6IFwiMS0yMzQ1XCJ9KTwvY29kZT5cbiAgICAgICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy9cbiAgICAgICAgICogdXBsb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLWRiZG9jLmh0bWwjY291Y2hiYXNlLWFwaVxuICAgICAgICAgKiAtZGJkb2NfZGItZG9jX2RlbGV0ZVwiPmRvY3MgZm9yIERFTEVURSAvZGIvZG9jPC9hPlxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZG9jIERvY3VtZW50IHRvIGRlbGV0ZVxuICAgICAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gb3B0aW9ucyA8YSBocmVmPVwiaHR0cDovL2FwaS5qcXVlcnkuY29tL1xuICAgICAgICAgKiBqUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5qUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgICAgICovXG4gICAgICAgIHJlbW92ZURvYzogZnVuY3Rpb24oZG9jLCBvcHRpb25zKSB7XG4gICAgICAgICAgYWpheCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICAgIHVybDogdGhpcy51cmkgK1xuICAgICAgICAgICAgICAgICAgIGVuY29kZURvY0lkKGRvYy5faWQpICtcbiAgICAgICAgICAgICAgICAgICBlbmNvZGVPcHRpb25zKHtyZXY6IGRvYy5fcmV2fSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgXCJUaGUgZG9jdW1lbnQgY291bGQgbm90IGJlIGRlbGV0ZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZSBhIHNldCBvZiBkb2N1bWVudHNcbiAgICAgICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy9cbiAgICAgICAgICogdXBsb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLWRiLmh0bWwjY291Y2hiYXNlLWFwaS1kYl9cbiAgICAgICAgICogZGItYnVsay1kb2NzX3Bvc3RcIj5kb2NzIGZvciAvZGIvX2J1bGtfZG9jczwvYT5cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmdbXX0gZG9jcyBMaXN0IG9mIGRvY3VtZW50IGlkJ3MgdG8gcmVtb3ZlXG4gICAgICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20vXG4gICAgICAgICAqIGpRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAgICAgKi9cbiAgICAgICAgYnVsa1JlbW92ZTogZnVuY3Rpb24oZG9jcywgb3B0aW9ucyl7XG4gICAgICAgICAgZG9jcy5kb2NzID0gJC5lYWNoKFxuICAgICAgICAgICAgZG9jcy5kb2NzLCBmdW5jdGlvbihpLCBkb2Mpe1xuICAgICAgICAgICAgICBkb2MuX2RlbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgJC5leHRlbmQob3B0aW9ucywge3N1Y2Nlc3NTdGF0dXM6IDIwMX0pO1xuICAgICAgICAgIGFqYXgoe1xuICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgdXJsOiB0aGlzLnVyaSArIFwiX2J1bGtfZG9jc1wiICsgZW5jb2RlT3B0aW9ucyhvcHRpb25zKSxcbiAgICAgICAgICAgICAgZGF0YTogdG9KU09OKGRvY3MpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIFwiVGhlIGRvY3VtZW50cyBjb3VsZCBub3QgYmUgZGVsZXRlZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIENPUFkgY29tbWFuZCAod2hpY2ggaXMgbm9uLXN0YW5kYXJkIEhUVFApIGNvcGllcyBhbiBleGlzdGluZ1xuICAgICAgICAgKiBkb2N1bWVudCB0byBhIG5ldyBvciBleGlzdGluZyBkb2N1bWVudC5cbiAgICAgICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy9cbiAgICAgICAgICogdXBsb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLWRiZG9jLmh0bWwjY291Y2hiYXNlLWFwaS1cbiAgICAgICAgICogZGJkb2NfZGItZG9jX2NvcHlcIj5kb2NzIGZvciBDT1BZIC9kYi9kb2M8L2E+XG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nW119IGRvY0lkIGRvY3VtZW50IGlkIHRvIGNvcHlcbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnMgPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9cbiAgICAgICAgICogalF1ZXJ5LmFqYXgvI2pRdWVyeS1hamF4LXNldHRpbmdzXCI+alF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20vXG4gICAgICAgICAqIGpRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAgICAgKi9cbiAgICAgICAgY29weURvYzogZnVuY3Rpb24oZG9jSWQsIG9wdGlvbnMsIGFqYXhPcHRpb25zKSB7XG4gICAgICAgICAgYWpheE9wdGlvbnMgPSAkLmV4dGVuZChhamF4T3B0aW9ucywge1xuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlcSkge1xuICAgICAgICAgICAgICB2YXIgcmVzcCA9ICQucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDEpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdWNjZXNzKSBvcHRpb25zLnN1Y2Nlc3MocmVzcCk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5lcnJvcikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZXJyb3IocmVxLnN0YXR1cywgcmVzcC5lcnJvciwgcmVzcC5yZWFzb24pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiVGhlIGRvY3VtZW50IGNvdWxkIG5vdCBiZSBjb3BpZWQ6IFwiICsgcmVzcC5yZWFzb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYWpheCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiQ09QWVwiLFxuICAgICAgICAgICAgICB1cmw6IHRoaXMudXJpICsgZW5jb2RlRG9jSWQoZG9jSWQpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIFwiVGhlIGRvY3VtZW50IGNvdWxkIG5vdCBiZSBjb3BpZWRcIixcbiAgICAgICAgICAgIGFqYXhPcHRpb25zXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyAoYW5kIGV4ZWN1dGVzKSBhIHRlbXBvcmFyeSB2aWV3IGJhc2VkIG9uIHRoZSB2aWV3IGZ1bmN0aW9uXG4gICAgICAgICAqIHN1cHBsaWVkIGluIHRoZSBKU09OIHJlcXVlc3QuXG4gICAgICAgICAqIEBzZWUgPGEgaHJlZj1cImh0dHA6Ly90ZWNoem9uZS5jb3VjaGJhc2UuY29tL3NpdGVzL2RlZmF1bHQvZmlsZXMvXG4gICAgICAgICAqIHVwbG9hZHMvYWxsL2RvY3VtZW50YXRpb24vY291Y2hiYXNlLWFwaS1kYi5odG1sI2NvdWNoYmFzZS1hcGktZGJcbiAgICAgICAgICogX2RiLXRlbXAtdmlld19wb3N0XCI+ZG9jcyBmb3IgL2RiL190ZW1wX3ZpZXc8L2E+XG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG1hcEZ1biBNYXAgZnVuY3Rpb25cbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVkdWNlRnVuIFJlZHVjZSBmdW5jdGlvblxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsYW5ndWFnZSBMYW5ndWFnZSB0aGUgbWFwIC8gcmVkdWNlIGZ1bnMgYXJlXG4gICAgICAgICAqIGltcGxlbWVudGVkIGluXG4gICAgICAgICAqIEBwYXJhbSB7YWpheFNldHRpbmdzfSBvcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20vXG4gICAgICAgICAqIGpRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAgICAgKi9cbiAgICAgICAgcXVlcnk6IGZ1bmN0aW9uKG1hcEZ1biwgcmVkdWNlRnVuLCBsYW5ndWFnZSwgb3B0aW9ucykge1xuICAgICAgICAgIGxhbmd1YWdlID0gbGFuZ3VhZ2UgfHwgXCJqYXZhc2NyaXB0XCI7XG4gICAgICAgICAgaWYgKHR5cGVvZihtYXBGdW4pICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBtYXBGdW4gPSBtYXBGdW4udG9Tb3VyY2UgPyBtYXBGdW4udG9Tb3VyY2UoKVxuICAgICAgICAgICAgICA6IFwiKFwiICsgbWFwRnVuLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGJvZHkgPSB7bGFuZ3VhZ2U6IGxhbmd1YWdlLCBtYXA6IG1hcEZ1bn07XG4gICAgICAgICAgaWYgKHJlZHVjZUZ1biAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mKHJlZHVjZUZ1bikgIT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgIHJlZHVjZUZ1biA9IHJlZHVjZUZ1bi50b1NvdXJjZSA/IHJlZHVjZUZ1bi50b1NvdXJjZSgpXG4gICAgICAgICAgICAgICAgOiBcIihcIiArIHJlZHVjZUZ1bi50b1N0cmluZygpICsgXCIpXCI7XG4gICAgICAgICAgICBib2R5LnJlZHVjZSA9IHJlZHVjZUZ1bjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWpheCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICB1cmw6IHRoaXMudXJpICsgXCJfdGVtcF92aWV3XCIgKyBlbmNvZGVPcHRpb25zKG9wdGlvbnMpLFxuICAgICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsIGRhdGE6IHRvSlNPTihib2R5KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBcIkFuIGVycm9yIG9jY3VycmVkIHF1ZXJ5aW5nIHRoZSBkYXRhYmFzZVwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRmV0Y2ggYSBfbGlzdCB2aWV3IG91dHB1dCwgeW91IGNhbiBzcGVjaWZ5IGEgbGlzdCBvZlxuICAgICAgICAgKiA8Y29kZT5rZXlzPC9jb2RlPiBpbiB0aGUgb3B0aW9ucyBvYmplY3QgdG8gcmVjaWV2ZSBvbmx5IHRob3NlIGtleXMuXG4gICAgICAgICAqIEBzZWUgPGEgaHJlZj1cImh0dHA6Ly90ZWNoem9uZS5jb3VjaGJhc2UuY29tL3NpdGVzL2RlZmF1bHQvZmlsZXMvXG4gICAgICAgICAqIHVwbG9hZHMvYWxsL2RvY3VtZW50YXRpb24vY291Y2hiYXNlLWFwaS1kZXNpZ24uaHRtbCNjb3VjaGJhc2UtYXBpXG4gICAgICAgICAqIC1kZXNpZ25fZGItZGVzaWduLWRlc2lnbmRvYy1saXN0LWxpc3RuYW1lLXZpZXduYW1lX2dldFwiPlxuICAgICAgICAgKiBkb2NzIGZvciAvZGIvX2Rlc2lnbi9kZXNpZ24tZG9jL19saXN0L2wxL3YxPC9hPlxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbGlzdCBMaXN0bmFtZSBpbiB0aGUgZm9ybSBvZiBkZG9jL2xpc3RuYW1lXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2aWV3IFZpZXcgdG8gcnVuIGxpc3QgYWdhaW5zdFxuICAgICAgICAgKiBAcGFyYW0ge29wdGlvbnN9IENvdWNoREIgPGEgaHJlZj1cImh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvY291Y2hkYi9cbiAgICAgICAgICogSFRUUF92aWV3X0FQSVwiPlZpZXcgT3B0aW9uczwvYT5cbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnMgPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9cbiAgICAgICAgICogalF1ZXJ5LmFqYXgvI2pRdWVyeS1hamF4LXNldHRpbmdzXCI+alF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0OiBmdW5jdGlvbihsaXN0LCB2aWV3LCBvcHRpb25zLCBhamF4T3B0aW9ucykge1xuICAgICAgICAgIHZhciBsaXN0ID0gbGlzdC5zcGxpdCgnLycpO1xuICAgICAgICAgIHZhciBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICB2YXIgdHlwZSA9ICdHRVQnO1xuICAgICAgICAgIHZhciBkYXRhID0gbnVsbDtcbiAgICAgICAgICBpZiAob3B0aW9uc1sna2V5cyddKSB7XG4gICAgICAgICAgICB0eXBlID0gJ1BPU1QnO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBvcHRpb25zWydrZXlzJ107XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9uc1sna2V5cyddO1xuICAgICAgICAgICAgZGF0YSA9IHRvSlNPTih7J2tleXMnOiBrZXlzIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhamF4KHtcbiAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgdXJsOiB0aGlzLnVyaSArICdfZGVzaWduLycgKyBsaXN0WzBdICtcbiAgICAgICAgICAgICAgICAgICAnL19saXN0LycgKyBsaXN0WzFdICsgJy8nICsgdmlldyArIGVuY29kZU9wdGlvbnMob3B0aW9ucylcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYWpheE9wdGlvbnMsICdBbiBlcnJvciBvY2N1cmVkIGFjY2Vzc2luZyB0aGUgbGlzdCdcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFeGVjdXRlcyB0aGUgc3BlY2lmaWVkIHZpZXctbmFtZSBmcm9tIHRoZSBzcGVjaWZpZWQgZGVzaWduLWRvY1xuICAgICAgICAgKiBkZXNpZ24gZG9jdW1lbnQsIHlvdSBjYW4gc3BlY2lmeSBhIGxpc3Qgb2YgPGNvZGU+a2V5czwvY29kZT5cbiAgICAgICAgICogaW4gdGhlIG9wdGlvbnMgb2JqZWN0IHRvIHJlY2lldmUgb25seSB0aG9zZSBrZXlzLlxuICAgICAgICAgKiBAc2VlIDxhIGhyZWY9XCJodHRwOi8vdGVjaHpvbmUuY291Y2hiYXNlLmNvbS9zaXRlcy9kZWZhdWx0L2ZpbGVzL1xuICAgICAgICAgKiB1cGxvYWRzL2FsbC9kb2N1bWVudGF0aW9uL2NvdWNoYmFzZS1hcGktZGVzaWduLmh0bWwjY291Y2hiYXNlLWFwaS1cbiAgICAgICAgICogZGVzaWduX2RiLWRlc2lnbi1kZXNpZ25kb2Mtdmlldy12aWV3bmFtZV9nZXRcIj5kb2NzIGZvciAvZGIvXG4gICAgICAgICAqIF9kZXNpZ24vZGVzaWduLWRvYy9fbGlzdC9sMS92MTwvYT5cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVmlldyB0byBydW4gbGlzdCBhZ2FpbnN0IChzdHJpbmcgc2hvdWxkIGhhdmUgXG4gICAgICAgICAqIHRoZSBkZXNpZ24tZG9jIG5hbWUgZm9sbG93ZWQgYnkgYSBzbGFzaCBhbmQgdGhlIHZpZXcgbmFtZSlcbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnMgPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9cbiAgICAgICAgICogalF1ZXJ5LmFqYXgvI2pRdWVyeS1hamF4LXNldHRpbmdzXCI+alF1ZXJ5IGFqYXggc2V0dGluZ3M8L2E+XG4gICAgICAgICAqL1xuICAgICAgICB2aWV3OiBmdW5jdGlvbihuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSBuYW1lLnNwbGl0KCcvJyk7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgIHZhciB0eXBlID0gXCJHRVRcIjtcbiAgICAgICAgICB2YXIgZGF0YT0gbnVsbDtcbiAgICAgICAgICBpZiAob3B0aW9uc1tcImtleXNcIl0pIHtcbiAgICAgICAgICAgIHR5cGUgPSBcIlBPU1RcIjtcbiAgICAgICAgICAgIHZhciBrZXlzID0gb3B0aW9uc1tcImtleXNcIl07XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9uc1tcImtleXNcIl07XG4gICAgICAgICAgICBkYXRhID0gdG9KU09OKHsgXCJrZXlzXCI6IGtleXMgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFqYXgoe1xuICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICB1cmw6IHRoaXMudXJpICsgXCJfZGVzaWduL1wiICsgbmFtZVswXSArXG4gICAgICAgICAgICAgICAgICAgXCIvX3ZpZXcvXCIgKyBuYW1lWzFdICsgZW5jb2RlT3B0aW9ucyhvcHRpb25zKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMsIFwiQW4gZXJyb3Igb2NjdXJyZWQgYWNjZXNzaW5nIHRoZSB2aWV3XCJcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGZXRjaCBhbiBhcmJpdHJhcnkgQ291Y2hEQiBkYXRhYmFzZSBwcm9wZXJ0eVxuICAgICAgICAgKiBAc2VlIDxhIGhyZWY9XCJodHRwOi8vdGVjaHpvbmUuY291Y2hiYXNlLmNvbS9zaXRlcy9kZWZhdWx0L2ZpbGVzL1xuICAgICAgICAgKiB1cGxvYWRzL2FsbC9kb2N1bWVudGF0aW9uL2NvdWNoYmFzZS1hcGkuaHRtbFwiPmRvY3MgZm9yIC9kYi9fcHJvcDwvYT5cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BOYW1lIFByb3BlcnkgbmFtZSB0byBmZXRjaFxuICAgICAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gb3B0aW9ucyA8YSBocmVmPVwiaHR0cDovL2FwaS5qcXVlcnkuY29tL1xuICAgICAgICAgKiBqUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5qUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IGFqYXhPcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20vXG4gICAgICAgICAqIGpRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0RGJQcm9wZXJ0eTogZnVuY3Rpb24ocHJvcE5hbWUsIG9wdGlvbnMsIGFqYXhPcHRpb25zKSB7XG4gICAgICAgICAgYWpheCh7dXJsOiB0aGlzLnVyaSArIHByb3BOYW1lICsgZW5jb2RlT3B0aW9ucyhvcHRpb25zKX0sXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgXCJUaGUgcHJvcGVydHkgY291bGQgbm90IGJlIHJldHJpZXZlZFwiLFxuICAgICAgICAgICAgYWpheE9wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgYW4gYXJiaXRyYXJ5IENvdWNoREIgZGF0YWJhc2UgcHJvcGVydHlcbiAgICAgICAgICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3RlY2h6b25lLmNvdWNoYmFzZS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy9cbiAgICAgICAgICogdXBsb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLmh0bWxcIj5kb2NzIGZvciAvZGIvX3Byb3A8L2E+XG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wTmFtZSBQcm9wZXJ5IG5hbWUgdG8gZmV0Y2hcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BWYWx1ZSBQcm9wZXJ5IHZhbHVlIHRvIHNldFxuICAgICAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gb3B0aW9ucyA8YSBocmVmPVwiaHR0cDovL2FwaS5qcXVlcnkuY29tL1xuICAgICAgICAgKiBqUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5qUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IGFqYXhPcHRpb25zIDxhIGhyZWY9XCJodHRwOi8vYXBpLmpxdWVyeS5jb20vXG4gICAgICAgICAqIGpRdWVyeS5hamF4LyNqUXVlcnktYWpheC1zZXR0aW5nc1wiPmpRdWVyeSBhamF4IHNldHRpbmdzPC9hPlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0RGJQcm9wZXJ0eTogZnVuY3Rpb24ocHJvcE5hbWUsIHByb3BWYWx1ZSwgb3B0aW9ucywgYWpheE9wdGlvbnMpIHtcbiAgICAgICAgICBhamF4KHtcbiAgICAgICAgICAgIHR5cGU6IFwiUFVUXCIsIFxuICAgICAgICAgICAgdXJsOiB0aGlzLnVyaSArIHByb3BOYW1lICsgZW5jb2RlT3B0aW9ucyhvcHRpb25zKSxcbiAgICAgICAgICAgIGRhdGEgOiBKU09OLnN0cmluZ2lmeShwcm9wVmFsdWUpXG4gICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBcIlRoZSBwcm9wZXJ0eSBjb3VsZCBub3QgYmUgdXBkYXRlZFwiLFxuICAgICAgICAgICAgYWpheE9wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG5cbiAgICBlbmNvZGVEb2NJZDogZW5jb2RlRG9jSWQsIFxuXG4gICAgLyoqXG4gICAgICogQWNjZXNzaW5nIHRoZSByb290IG9mIGEgQ291Y2hEQiBpbnN0YW5jZSByZXR1cm5zIG1ldGEgaW5mb3JtYXRpb24gYWJvdXRcbiAgICAgKiB0aGUgaW5zdGFuY2UuIFRoZSByZXNwb25zZSBpcyBhIEpTT04gc3RydWN0dXJlIGNvbnRhaW5pbmcgaW5mb3JtYXRpb25cbiAgICAgKiBhYm91dCB0aGUgc2VydmVyLCBpbmNsdWRpbmcgYSB3ZWxjb21lIG1lc3NhZ2UgYW5kIHRoZSB2ZXJzaW9uIG9mIHRoZVxuICAgICAqIHNlcnZlci5cbiAgICAgKiBAc2VlIDxhIGhyZWY9XCJodHRwOi8vdGVjaHpvbmUuY291Y2hiYXNlLmNvbS9zaXRlcy9kZWZhdWx0L2ZpbGVzL3VwbG9hZHMvXG4gICAgICogYWxsL2RvY3VtZW50YXRpb24vY291Y2hiYXNlLWFwaS1taXNjLmh0bWwjY291Y2hiYXNlLWFwaS1taXNjX3Jvb3RfZ2V0XCI+XG4gICAgICogZG9jcyBmb3IgR0VUIC88L2E+XG4gICAgICogQHBhcmFtIHthamF4U2V0dGluZ3N9IG9wdGlvbnMgPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9cbiAgICAgKiBqUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5qUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgKi9cbiAgICBpbmZvOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBhamF4KFxuICAgICAgICB7dXJsOiB0aGlzLnVybFByZWZpeCArIFwiL1wifSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgXCJTZXJ2ZXIgaW5mb3JtYXRpb24gY291bGQgbm90IGJlIHJldHJpZXZlZFwiXG4gICAgICApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0LCBjb25maWd1cmUsIG9yIHN0b3AsIGEgcmVwbGljYXRpb24gb3BlcmF0aW9uLlxuICAgICAqIEBzZWUgPGEgaHJlZj1cImh0dHA6Ly90ZWNoem9uZS5jb3VjaGJhc2UuY29tL3NpdGVzL2RlZmF1bHQvZmlsZXMvXG4gICAgICogdXBsb2Fkcy9hbGwvZG9jdW1lbnRhdGlvbi9jb3VjaGJhc2UtYXBpLW1pc2MuaHRtbCNjb3VjaGJhc2UtYXBpLVxuICAgICAqIG1pc2NfcmVwbGljYXRlX3Bvc3RcIj5kb2NzIGZvciBQT1NUIC9fcmVwbGljYXRlPC9hPlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzb3VyY2UgUGF0aCBvciB1cmwgdG8gc291cmNlIGRhdGFiYXNlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRhcmdldCBQYXRoIG9yIHVybCB0byB0YXJnZXQgZGF0YWJhc2VcbiAgICAgKiBAcGFyYW0ge2FqYXhTZXR0aW5nc30gYWpheE9wdGlvbnMgPGEgaHJlZj1cImh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9cbiAgICAgKiBqUXVlcnkuYWpheC8jalF1ZXJ5LWFqYXgtc2V0dGluZ3NcIj5qUXVlcnkgYWpheCBzZXR0aW5nczwvYT5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVwT3B0cyBBZGRpdGlvbmFsIHJlcGxpY2F0aW9uIG9wdGlvbnNcbiAgICAgKi9cbiAgICByZXBsaWNhdGU6IGZ1bmN0aW9uKHNvdXJjZSwgdGFyZ2V0LCBhamF4T3B0aW9ucywgcmVwT3B0cykge1xuICAgICAgcmVwT3B0cyA9ICQuZXh0ZW5kKHtzb3VyY2U6IHNvdXJjZSwgdGFyZ2V0OiB0YXJnZXR9LCByZXBPcHRzKTtcbiAgICAgIGlmIChyZXBPcHRzLmNvbnRpbnVvdXMgJiYgIXJlcE9wdHMuY2FuY2VsKSB7XG4gICAgICAgIGFqYXhPcHRpb25zLnN1Y2Nlc3NTdGF0dXMgPSAyMDI7XG4gICAgICB9XG4gICAgICBhamF4KHtcbiAgICAgICAgICB0eXBlOiBcIlBPU1RcIiwgdXJsOiB0aGlzLnVybFByZWZpeCArIFwiL19yZXBsaWNhdGVcIixcbiAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShyZXBPcHRzKSxcbiAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYWpheE9wdGlvbnMsXG4gICAgICAgIFwiUmVwbGljYXRpb24gZmFpbGVkXCJcbiAgICAgICk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEZldGNoIGEgbmV3IFVVSURcbiAgICAgKiBAc2VlIDxhIGhyZWY9XCJodHRwOi8vdGVjaHpvbmUuY291Y2hiYXNlLmNvbS9zaXRlcy9kZWZhdWx0L2ZpbGVzL1xuICAgICAqIHVwbG9hZHMvYWxsL2RvY3VtZW50YXRpb24vY291Y2hiYXNlLWFwaS1taXNjLmh0bWwjY291Y2hiYXNlLWFwaS1cbiAgICAgKiBtaXNjX3V1aWRzX2dldFwiPmRvY3MgZm9yIC9fdXVpZHM8L2E+XG4gICAgICogQHBhcmFtIHtJbnR9IGNhY2hlTnVtIE51bWJlciBvZiB1dWlkcyB0byBrZWVwIGNhY2hlZCBmb3IgZnV0dXJlIHVzZVxuICAgICAqL1xuICAgIG5ld1VVSUQ6IGZ1bmN0aW9uKGNhY2hlTnVtKSB7XG4gICAgICBpZiAoY2FjaGVOdW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjYWNoZU51bSA9IDE7XG4gICAgICB9XG4gICAgICBpZiAoIXV1aWRDYWNoZS5sZW5ndGgpIHtcbiAgICAgICAgYWpheCh7dXJsOiB0aGlzLnVybFByZWZpeCArIFwiL191dWlkc1wiLCBkYXRhOiB7Y291bnQ6IGNhY2hlTnVtfSwgYXN5bmM6XG4gICAgICAgICAgICAgIGZhbHNlfSwge1xuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICB1dWlkQ2FjaGUgPSByZXNwLnV1aWRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJGYWlsZWQgdG8gcmV0cmlldmUgVVVJRCBiYXRjaC5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHV1aWRDYWNoZS5zaGlmdCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmdW5jdGlvbiBhamF4KG9iaiwgb3B0aW9ucywgZXJyb3JNZXNzYWdlLCBhamF4T3B0aW9ucykge1xuXG4gICAgdmFyIGRlZmF1bHRBamF4T3B0cyA9IHtcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIGhlYWRlcnM6e1wiQWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvblwifVxuICAgIH07XG5cbiAgICBvcHRpb25zID0gJC5leHRlbmQoe3N1Y2Nlc3NTdGF0dXM6IDIwMH0sIG9wdGlvbnMpO1xuICAgIGFqYXhPcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdEFqYXhPcHRzLCBhamF4T3B0aW9ucyk7XG4gICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlIHx8IFwiVW5rbm93biBlcnJvclwiO1xuICAgICQuYWpheCgkLmV4dGVuZCgkLmV4dGVuZCh7XG4gICAgICB0eXBlOiBcIkdFVFwiLCBkYXRhVHlwZTogXCJqc29uXCIsIGNhY2hlIDogISQuYnJvd3Nlci5tc2llLFxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oeGhyKXtcbiAgICAgICAgaWYoYWpheE9wdGlvbnMgJiYgYWpheE9wdGlvbnMuaGVhZGVycyl7XG4gICAgICAgICAgZm9yICh2YXIgaGVhZGVyIGluIGFqYXhPcHRpb25zLmhlYWRlcnMpe1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyLCBhamF4T3B0aW9ucy5oZWFkZXJzW2hlYWRlcl0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZXEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgcmVzcCA9ICQucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5lcnJvcikge1xuICAgICAgICAgICAgb3B0aW9ucy5lcnJvcihyZXEuc3RhdHVzLCByZXEsIGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbGVydChlcnJvck1lc3NhZ2UgKyBcIjogXCIgKyBlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmFqYXhTdGFydCkge1xuICAgICAgICAgIG9wdGlvbnMuYWpheFN0YXJ0KHJlc3ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEuc3RhdHVzID09IG9wdGlvbnMuc3VjY2Vzc1N0YXR1cykge1xuICAgICAgICAgIGlmIChvcHRpb25zLmJlZm9yZVN1Y2Nlc3MpIG9wdGlvbnMuYmVmb3JlU3VjY2VzcyhyZXEsIHJlc3ApO1xuICAgICAgICAgIGlmIChvcHRpb25zLnN1Y2Nlc3MpIG9wdGlvbnMuc3VjY2VzcyhyZXNwKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmVycm9yKSB7XG4gICAgICAgICAgb3B0aW9ucy5lcnJvcihyZXEuc3RhdHVzLCByZXNwICYmIHJlc3AuZXJyb3IgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSwgcmVzcCAmJiByZXNwLnJlYXNvbiB8fCBcIm5vIHJlc3BvbnNlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsZXJ0KGVycm9yTWVzc2FnZSArIFwiOiBcIiArIHJlc3AucmVhc29uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIG9iaiksIGFqYXhPcHRpb25zKSk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIGZ1bGxDb21taXQob3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZW5zdXJlX2Z1bGxfY29tbWl0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB2YXIgY29tbWl0ID0gb3B0aW9ucy5lbnN1cmVfZnVsbF9jb21taXQ7XG4gICAgICBkZWxldGUgb3B0aW9ucy5lbnN1cmVfZnVsbF9jb21taXQ7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIlgtQ291Y2gtRnVsbC1Db21taXRcIiwgY29tbWl0LnRvU3RyaW5nKCkpO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvLyBDb252ZXJ0IGEgb3B0aW9ucyBvYmplY3QgdG8gYW4gdXJsIHF1ZXJ5IHN0cmluZy5cbiAgLy8gZXg6IHtrZXk6J3ZhbHVlJyxrZXkyOid2YWx1ZTInfSBiZWNvbWVzICc/a2V5PVwidmFsdWVcIiZrZXkyPVwidmFsdWUyXCInXG4gIGZ1bmN0aW9uIGVuY29kZU9wdGlvbnMob3B0aW9ucykge1xuICAgIHZhciBidWYgPSBbXTtcbiAgICBpZiAodHlwZW9mKG9wdGlvbnMpID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMgIT09IG51bGwpIHtcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gb3B0aW9ucykge1xuICAgICAgICBpZiAoJC5pbkFycmF5KG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgW1wiZXJyb3JcIiwgXCJzdWNjZXNzXCIsIFwiYmVmb3JlU3VjY2Vzc1wiLCBcImFqYXhTdGFydFwiXSkgPj0gMClcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgdmFyIHZhbHVlID0gb3B0aW9uc1tuYW1lXTtcbiAgICAgICAgaWYgKCQuaW5BcnJheShuYW1lLCBbXCJrZXlcIiwgXCJzdGFydGtleVwiLCBcImVuZGtleVwiXSkgPj0gMCkge1xuICAgICAgICAgIHZhbHVlID0gdG9KU09OKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBidWYucHVzaChlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYnVmLmxlbmd0aCA/IFwiP1wiICsgYnVmLmpvaW4oXCImXCIpIDogXCJcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gdG9KU09OKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IG51bGwgPyBKU09OLnN0cmluZ2lmeShvYmopIDogbnVsbDtcbiAgfVxuXG59KShqUXVlcnkpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjkuMFxuXG4vKlxuKGMpIDIwMTEgSmFuIE1vbnNjaGtlXG52MS4xXG5iYWNrYm9uZS1jb3VjaGRiLmpzIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqL1xudmFyIGNvbixcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2JpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9O1xuXG5CYWNrYm9uZS5jb3VjaF9jb25uZWN0b3IgPSBjb24gPSB7XG4gIGNvbmZpZzoge1xuICAgIGRiX25hbWU6IFwiYmFja2JvbmVfY29ubmVjdFwiLFxuICAgIGRkb2NfbmFtZTogXCJiYWNrYm9uZV9leGFtcGxlXCIsXG4gICAgdmlld19uYW1lOiBcImJ5Q29sbGVjdGlvblwiLFxuICAgIGxpc3RfbmFtZTogbnVsbCxcbiAgICBnbG9iYWxfY2hhbmdlczogZmFsc2UsXG4gICAgYmFzZV91cmw6IG51bGxcbiAgfSxcbiAgaGVscGVyczoge1xuICAgIGV4dHJhY3RfY29sbGVjdGlvbl9uYW1lOiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgdmFyIF9uYW1lLCBfc3BsaXR0ZWQ7XG4gICAgICBpZiAobW9kZWwgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBtb2RlbCBoYXMgYmVlbiBwYXNzZWRcIik7XG4gICAgICB9XG4gICAgICBpZiAoISgoKG1vZGVsLmNvbGxlY3Rpb24gIT0gbnVsbCkgJiYgKG1vZGVsLmNvbGxlY3Rpb24udXJsICE9IG51bGwpKSB8fCAobW9kZWwudXJsICE9IG51bGwpKSkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cbiAgICAgIGlmIChtb2RlbC51cmwgIT0gbnVsbCkge1xuICAgICAgICBfbmFtZSA9IF8uaXNGdW5jdGlvbihtb2RlbC51cmwpID8gbW9kZWwudXJsKCkgOiBtb2RlbC51cmw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfbmFtZSA9IF8uaXNGdW5jdGlvbihtb2RlbC5jb2xsZWN0aW9uLnVybCkgPyBtb2RlbC5jb2xsZWN0aW9uLnVybCgpIDogbW9kZWwuY29sbGVjdGlvbi51cmw7XG4gICAgICB9XG4gICAgICBpZiAoX25hbWVbMF0gPT09IFwiL1wiKSB7XG4gICAgICAgIF9uYW1lID0gX25hbWUuc2xpY2UoMSwgX25hbWUubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIF9zcGxpdHRlZCA9IF9uYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgIF9uYW1lID0gX3NwbGl0dGVkLmxlbmd0aCA+IDAgPyBfc3BsaXR0ZWRbMF0gOiBfbmFtZTtcbiAgICAgIF9uYW1lID0gX25hbWUucmVwbGFjZShcIi9cIiwgXCJcIik7XG4gICAgICByZXR1cm4gX25hbWU7XG4gICAgfSxcbiAgICBtYWtlX2RiOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkYjtcbiAgICAgIGRiID0gJC5jb3VjaC5kYihjb24uY29uZmlnLmRiX25hbWUpO1xuICAgICAgaWYgKGNvbi5jb25maWcuYmFzZV91cmwgIT0gbnVsbCkge1xuICAgICAgICBkYi51cmkgPSBjb24uY29uZmlnLmJhc2VfdXJsICsgXCIvXCIgKyBjb24uY29uZmlnLmRiX25hbWUgKyBcIi9cIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYjtcbiAgICB9XG4gIH0sXG4gIHJlYWQ6IGZ1bmN0aW9uKG1vZGVsLCBvcHRzKSB7XG4gICAgaWYgKG1vZGVsLm1vZGVscykge1xuICAgICAgcmV0dXJuIGNvbi5yZWFkX2NvbGxlY3Rpb24obW9kZWwsIG9wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29uLnJlYWRfbW9kZWwobW9kZWwsIG9wdHMpO1xuICAgIH1cbiAgfSxcbiAgcmVhZF9jb2xsZWN0aW9uOiBmdW5jdGlvbihjb2xsLCBvcHRzKSB7XG4gICAgdmFyIGtleXMsIG9wdGlvbiwgdmlld19vcHRpb25zLCBfZGRvYywgX2ksIF9sZW4sIF9saXN0LCBfb3B0cywgX3ZpZXc7XG4gICAgX3ZpZXcgPSB0aGlzLmNvbmZpZy52aWV3X25hbWU7XG4gICAgX2Rkb2MgPSB0aGlzLmNvbmZpZy5kZG9jX25hbWU7XG4gICAgX2xpc3QgPSB0aGlzLmNvbmZpZy5saXN0X25hbWU7XG4gICAga2V5cyA9IFt0aGlzLmhlbHBlcnMuZXh0cmFjdF9jb2xsZWN0aW9uX25hbWUoY29sbCldO1xuICAgIGlmIChjb2xsLmRiICE9IG51bGwpIHtcbiAgICAgIGlmIChjb2xsLmRiLmNoYW5nZXMgfHwgdGhpcy5jb25maWcuZ2xvYmFsX2NoYW5nZXMpIHtcbiAgICAgICAgY29sbC5saXN0ZW5fdG9fY2hhbmdlcygpO1xuICAgICAgfVxuICAgICAgaWYgKGNvbGwuZGIudmlldyAhPSBudWxsKSB7XG4gICAgICAgIF92aWV3ID0gY29sbC5kYi52aWV3O1xuICAgICAgfVxuICAgICAgaWYgKGNvbGwuZGIuZGRvYyAhPSBudWxsKSB7XG4gICAgICAgIF9kZG9jID0gY29sbC5kYi5kZG9jO1xuICAgICAgfVxuICAgICAgaWYgKGNvbGwuZGIua2V5cyAhPSBudWxsKSB7XG4gICAgICAgIGtleXMgPSBjb2xsLmRiLmtleXM7XG4gICAgICB9XG4gICAgICBpZiAoY29sbC5kYi5saXN0ICE9IG51bGwpIHtcbiAgICAgICAgX2xpc3QgPSBjb2xsLmRiLmxpc3Q7XG4gICAgICB9XG4gICAgfVxuICAgIF9vcHRzID0ge1xuICAgICAga2V5czoga2V5cyxcbiAgICAgIHN1Y2Nlc3M6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciBkb2MsIF9pLCBfbGVuLCBfcmVmLCBfdGVtcDtcbiAgICAgICAgICBfdGVtcCA9IFtdO1xuICAgICAgICAgIF9yZWYgPSBkYXRhLnJvd3M7XG4gICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICBkb2MgPSBfcmVmW19pXTtcbiAgICAgICAgICAgIGlmIChkb2MudmFsdWUpIHtcbiAgICAgICAgICAgICAgX3RlbXAucHVzaChkb2MudmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgX3RlbXAucHVzaChkb2MuZG9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgb3B0cy5zdWNjZXNzKF90ZW1wKTtcbiAgICAgICAgICByZXR1cm4gb3B0cy5jb21wbGV0ZSgpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyksXG4gICAgICBlcnJvcjogZnVuY3Rpb24oc3RhdHVzLCBlcnJvciwgcmVhc29uKSB7XG4gICAgICAgIHZhciByZXM7XG4gICAgICAgIHJlcyA9IHtcbiAgICAgICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgcmVhc29uOiByZWFzb25cbiAgICAgICAgfTtcbiAgICAgICAgb3B0cy5lcnJvcihyZXMpO1xuICAgICAgICByZXR1cm4gb3B0cy5jb21wbGV0ZShyZXMpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmlld19vcHRpb25zID0gW1wia2V5XCIsIFwia2V5c1wiLCBcInN0YXJ0a2V5XCIsIFwic3RhcnRrZXlfZG9jaWRcIiwgXCJlbmRrZXlcIiwgXCJlbmRrZXlfZG9jaWRcIiwgXCJsaW1pdFwiLCBcInN0YWxlXCIsIFwiZGVzY2VuZGluZ1wiLCBcInNraXBcIiwgXCJncm91cFwiLCBcImdyb3VwX2xldmVsXCIsIFwicmVkdWNlXCIsIFwiaW5jbHVkZV9kb2NzXCIsIFwiaW5jbHVzaXZlX2VuZFwiLCBcInVwZGF0ZV9zZXFcIl07XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSB2aWV3X29wdGlvbnMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIG9wdGlvbiA9IHZpZXdfb3B0aW9uc1tfaV07XG4gICAgICBpZiAob3B0c1tvcHRpb25dICE9IG51bGwpIHtcbiAgICAgICAgX29wdHNbb3B0aW9uXSA9IG9wdHNbb3B0aW9uXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKChjb2xsLmRiICE9IG51bGwpICYmIChjb2xsLmRiLnZpZXcgIT0gbnVsbCkgJiYgKGNvbGwuZGIua2V5cyA9PSBudWxsKSkge1xuICAgICAgZGVsZXRlIF9vcHRzLmtleXM7XG4gICAgfVxuICAgIGlmIChfbGlzdCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGVscGVycy5tYWtlX2RiKCkubGlzdChfZGRvYyArIFwiL1wiICsgX2xpc3QsIFwiXCIgKyBfdmlldywgX29wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5oZWxwZXJzLm1ha2VfZGIoKS52aWV3KF9kZG9jICsgXCIvXCIgKyBfdmlldywgX29wdHMpO1xuICAgIH1cbiAgfSxcbiAgcmVhZF9tb2RlbDogZnVuY3Rpb24obW9kZWwsIG9wdHMpIHtcbiAgICBpZiAoIW1vZGVsLmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgbW9kZWwgaGFzIG5vIGlkIHByb3BlcnR5LCBzbyBpdCBjYW4ndCBnZXQgZmV0Y2hlZCBmcm9tIHRoZSBkYXRhYmFzZVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaGVscGVycy5tYWtlX2RiKCkub3BlbkRvYyhtb2RlbC5pZCwge1xuICAgICAgc3VjY2VzczogZnVuY3Rpb24oZG9jKSB7XG4gICAgICAgIG9wdHMuc3VjY2Vzcyhkb2MpO1xuICAgICAgICByZXR1cm4gb3B0cy5jb21wbGV0ZSgpO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihzdGF0dXMsIGVycm9yLCByZWFzb24pIHtcbiAgICAgICAgdmFyIHJlcztcbiAgICAgICAgcmVzID0ge1xuICAgICAgICAgIHN0YXR1czogc3RhdHVzLFxuICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICByZWFzb246IHJlYXNvblxuICAgICAgICB9O1xuICAgICAgICBvcHRzLmVycm9yKHJlcyk7XG4gICAgICAgIHJldHVybiBvcHRzLmNvbXBsZXRlKHJlcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIGNyZWF0ZTogZnVuY3Rpb24obW9kZWwsIG9wdHMpIHtcbiAgICB2YXIgY29sbCwgdmFscztcbiAgICB2YWxzID0gbW9kZWwudG9KU09OKCk7XG4gICAgY29sbCA9IHRoaXMuaGVscGVycy5leHRyYWN0X2NvbGxlY3Rpb25fbmFtZShtb2RlbCk7XG4gICAgaWYgKGNvbGwubGVuZ3RoID4gMCkge1xuICAgICAgdmFscy5jb2xsZWN0aW9uID0gY29sbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaGVscGVycy5tYWtlX2RiKCkuc2F2ZURvYyh2YWxzLCB7XG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkb2MpIHtcbiAgICAgICAgb3B0cy5zdWNjZXNzKHtcbiAgICAgICAgICBfaWQ6IGRvYy5pZCxcbiAgICAgICAgICBfcmV2OiBkb2MucmV2XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3B0cy5jb21wbGV0ZSgpO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihzdGF0dXMsIGVycm9yLCByZWFzb24pIHtcbiAgICAgICAgdmFyIHJlcztcbiAgICAgICAgcmVzID0ge1xuICAgICAgICAgIHN0YXR1czogc3RhdHVzLFxuICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICByZWFzb246IHJlYXNvblxuICAgICAgICB9O1xuICAgICAgICBvcHRzLmVycm9yKHJlcyk7XG4gICAgICAgIHJldHVybiBvcHRzLmNvbXBsZXRlKHJlcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24obW9kZWwsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGUobW9kZWwsIG9wdHMpO1xuICB9LFxuICBkZWw6IGZ1bmN0aW9uKG1vZGVsLCBvcHRzKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVscGVycy5tYWtlX2RiKCkucmVtb3ZlRG9jKG1vZGVsLnRvSlNPTigpLCB7XG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG9wdHMuc3VjY2VzcygpO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihuciwgcmVxLCBlKSB7XG4gICAgICAgIHZhciByZXM7XG4gICAgICAgIGlmIChlID09PSBcImRlbGV0ZWRcIikge1xuICAgICAgICAgIG9wdHMuc3VjY2VzcygpO1xuICAgICAgICAgIHJldHVybiBvcHRzLmNvbXBsZXRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzID0ge1xuICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICByZWFzb246IHJlYXNvblxuICAgICAgICAgIH07XG4gICAgICAgICAgb3B0cy5lcnJvcihyZXMpO1xuICAgICAgICAgIHJldHVybiBvcHRzLmNvbXBsZXRlKHJlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuQmFja2JvbmUuc3luYyA9IGZ1bmN0aW9uKG1ldGhvZCwgbW9kZWwsIG9wdHMpIHtcbiAgaWYgKG9wdHMuc3VjY2VzcyA9PSBudWxsKSB7XG4gICAgb3B0cy5zdWNjZXNzID0gZnVuY3Rpb24oKSB7fTtcbiAgfVxuICBpZiAob3B0cy5lcnJvciA9PSBudWxsKSB7XG4gICAgb3B0cy5lcnJvciA9IGZ1bmN0aW9uKCkge307XG4gIH1cbiAgaWYgKG9wdHMuY29tcGxldGUgPT0gbnVsbCkge1xuICAgIG9wdHMuY29tcGxldGUgPSBmdW5jdGlvbigpIHt9O1xuICB9XG4gIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgY2FzZSBcInJlYWRcIjpcbiAgICAgIHJldHVybiBjb24ucmVhZChtb2RlbCwgb3B0cyk7XG4gICAgY2FzZSBcImNyZWF0ZVwiOlxuICAgICAgcmV0dXJuIGNvbi5jcmVhdGUobW9kZWwsIG9wdHMpO1xuICAgIGNhc2UgXCJ1cGRhdGVcIjpcbiAgICAgIHJldHVybiBjb24udXBkYXRlKG1vZGVsLCBvcHRzKTtcbiAgICBjYXNlIFwiZGVsZXRlXCI6XG4gICAgICByZXR1cm4gY29uLmRlbChtb2RlbCwgb3B0cyk7XG4gIH1cbn07XG5cbkJhY2tib25lLk1vZGVsID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoTW9kZWwsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gTW9kZWwoKSB7XG4gICAgcmV0dXJuIE1vZGVsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgTW9kZWwucHJvdG90eXBlLmlkQXR0cmlidXRlID0gXCJfaWRcIjtcblxuICBNb2RlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3X21vZGVsO1xuICAgIG5ld19tb2RlbCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpO1xuICAgIGlmIChuZXdfbW9kZWwuYXR0cmlidXRlcy5faWQpIHtcbiAgICAgIGRlbGV0ZSBuZXdfbW9kZWwuYXR0cmlidXRlcy5faWQ7XG4gICAgfVxuICAgIGlmIChuZXdfbW9kZWwuYXR0cmlidXRlcy5fcmV2KSB7XG4gICAgICBkZWxldGUgbmV3X21vZGVsLmF0dHJpYnV0ZXMuX3JldjtcbiAgICB9XG4gICAgcmV0dXJuIG5ld19tb2RlbDtcbiAgfTtcblxuICByZXR1cm4gTW9kZWw7XG5cbn0pKEJhY2tib25lLk1vZGVsKTtcblxuQmFja2JvbmUuQ29sbGVjdGlvbiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKENvbGxlY3Rpb24sIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gQ29sbGVjdGlvbigpIHtcbiAgICB0aGlzLl9kYl9vbl9jaGFuZ2UgPSBfX2JpbmQodGhpcy5fZGJfb25fY2hhbmdlLCB0aGlzKTtcbiAgICB0aGlzLl9kYl9wcmVwYXJlZF9mb3JfY2hhbmdlcyA9IF9fYmluZCh0aGlzLl9kYl9wcmVwYXJlZF9mb3JfY2hhbmdlcywgdGhpcyk7XG4gICAgcmV0dXJuIENvbGxlY3Rpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5tb2RlbCA9IEJhY2tib25lLk1vZGVsO1xuXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2RiX2NoYW5nZXNfZW5hYmxlZCAmJiAoKHRoaXMuZGIgJiYgdGhpcy5kYi5jaGFuZ2VzKSB8fCBjb24uY29uZmlnLmdsb2JhbF9jaGFuZ2VzKSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdGVuX3RvX2NoYW5nZXMoKTtcbiAgICB9XG4gIH07XG5cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUubGlzdGVuX3RvX2NoYW5nZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2RiX2NoYW5nZXNfZW5hYmxlZCkge1xuICAgICAgdGhpcy5fZGJfY2hhbmdlc19lbmFibGVkID0gdHJ1ZTtcbiAgICAgIGlmICghdGhpcy5fZGJfaW5zdCkge1xuICAgICAgICB0aGlzLl9kYl9pbnN0ID0gY29uLmhlbHBlcnMubWFrZV9kYigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2RiX2luc3QuaW5mbyh7XG4gICAgICAgIFwic3VjY2Vzc1wiOiB0aGlzLl9kYl9wcmVwYXJlZF9mb3JfY2hhbmdlc1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLnN0b3BfY2hhbmdlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RiX2NoYW5nZXNfZW5hYmxlZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLl9kYl9jaGFuZ2VzX2hhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fZGJfY2hhbmdlc19oYW5kbGVyLnN0b3AoKTtcbiAgICAgIHJldHVybiB0aGlzLl9kYl9jaGFuZ2VzX2hhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5fZGJfcHJlcGFyZWRfZm9yX2NoYW5nZXMgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdmFyIG9wdHM7XG4gICAgdGhpcy5fZGJfdXBkYXRlX3NlcSA9IGRhdGEudXBkYXRlX3NlcSB8fCAwO1xuICAgIG9wdHMgPSB7XG4gICAgICBpbmNsdWRlX2RvY3M6IHRydWUsXG4gICAgICBjb2xsZWN0aW9uOiBjb24uaGVscGVycy5leHRyYWN0X2NvbGxlY3Rpb25fbmFtZSh0aGlzKSxcbiAgICAgIGZpbHRlcjogY29uLmNvbmZpZy5kZG9jX25hbWUgKyBcIi9ieV9jb2xsZWN0aW9uXCJcbiAgICB9O1xuICAgIF8uZXh0ZW5kKG9wdHMsIHRoaXMuZGIpO1xuICAgIHJldHVybiBfLmRlZmVyKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBfdGhpcy5fZGJfY2hhbmdlc19oYW5kbGVyID0gX3RoaXMuX2RiX2luc3QuY2hhbmdlcyhfdGhpcy5fZGJfdXBkYXRlX3NlcSwgb3B0cyk7XG4gICAgICAgIHJldHVybiBfdGhpcy5fZGJfY2hhbmdlc19oYW5kbGVyLm9uQ2hhbmdlKF90aGlzLl9kYl9vbl9jaGFuZ2UpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX2RiX29uX2NoYW5nZSA9IGZ1bmN0aW9uKGNoYW5nZXMpIHtcbiAgICB2YXIgb2JqLCBfZG9jLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgX3JlZiA9IGNoYW5nZXMucmVzdWx0cztcbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgX2RvYyA9IF9yZWZbX2ldO1xuICAgICAgb2JqID0gdGhpcy5nZXQoX2RvYy5pZCk7XG4gICAgICBpZiAob2JqICE9IG51bGwpIHtcbiAgICAgICAgaWYgKF9kb2MuZGVsZXRlZCkge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2godGhpcy5yZW1vdmUob2JqKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG9iai5nZXQoXCJfcmV2XCIpICE9PSBfZG9jLmRvYy5fcmV2KSB7XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKG9iai5zZXQoX2RvYy5kb2MpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCh2b2lkIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFfZG9jLmRlbGV0ZWQpIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuYWRkKF9kb2MuZG9jKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCh2b2lkIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICByZXR1cm4gQ29sbGVjdGlvbjtcblxufSkoQmFja2JvbmUuQ29sbGVjdGlvbik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhY2tib25lLWNvdWNoZGIuanMubWFwXG4iLCIkKGRvY3VtZW50KS5iaW5kKFwibW9iaWxlaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgJC5tb2JpbGUuYWpheEVuYWJsZWQgPSBmYWxzZTtcbiAgICAkLm1vYmlsZS5saW5rQmluZGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICQubW9iaWxlLnB1c2hTdGF0ZUVuYWJsZWQgPSBmYWxzZTtcblxuICAgIC8vIFJlbW92ZSBwYWdlIGZyb20gRE9NIHdoZW4gaXQncyBiZWluZyByZXBsYWNlZFxuICAgICQoJ2RpdltkYXRhLXJvbGU9XCJwYWdlXCJdJykubGl2ZSgncGFnZWhpZGUnLCBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7XG4gICAgICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkucmVtb3ZlKCk7XG4gICAgfSk7XG59KTsiLCIvKiEgalF1ZXJ5IE1vYmlsZSB2MS4xLjAgZGIzNDJiMWYzMTVjMjgyNjkyNzkxYWE4NzA0NTU5MDFmZGI0NmE1NSBqcXVlcnltb2JpbGUuY29tIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovXG4oZnVuY3Rpb24oRCxzLGspe3R5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxmdW5jdGlvbihhKXtrKGEsRCxzKTtyZXR1cm4gYS5tb2JpbGV9KTprKEQualF1ZXJ5LEQscyl9KSh0aGlzLGRvY3VtZW50LGZ1bmN0aW9uKEQscyxrKXsoZnVuY3Rpb24oYSxjLGIsZSl7ZnVuY3Rpb24gZihhKXtmb3IoO2EmJnR5cGVvZiBhLm9yaWdpbmFsRXZlbnQhPT1cInVuZGVmaW5lZFwiOylhPWEub3JpZ2luYWxFdmVudDtyZXR1cm4gYX1mdW5jdGlvbiBkKGIpe2Zvcih2YXIgZD17fSxmLGc7Yjspe2Y9YS5kYXRhKGIsdCk7Zm9yKGcgaW4gZilpZihmW2ddKWRbZ109ZC5oYXNWaXJ0dWFsQmluZGluZz10cnVlO2I9Yi5wYXJlbnROb2RlfXJldHVybiBkfWZ1bmN0aW9uIGcoKXt5JiYoY2xlYXJUaW1lb3V0KHkpLHk9MCk7eT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Rj15PTA7Qy5sZW5ndGg9MDt6PWZhbHNlO0c9dHJ1ZX0sYS52bW91c2UucmVzZXRUaW1lckR1cmF0aW9uKX1cbmZ1bmN0aW9uIGgoYixkLGcpe3ZhciBjLGg7aWYoIShoPWcmJmdbYl0pKXtpZihnPSFnKWE6e2ZvcihnPWQudGFyZ2V0O2c7KXtpZigoaD1hLmRhdGEoZyx0KSkmJighYnx8aFtiXSkpYnJlYWsgYTtnPWcucGFyZW50Tm9kZX1nPW51bGx9aD1nfWlmKGgpe2M9ZDt2YXIgZz1jLnR5cGUseixqO2M9YS5FdmVudChjKTtjLnR5cGU9YjtoPWMub3JpZ2luYWxFdmVudDt6PWEuZXZlbnQucHJvcHM7Zy5zZWFyY2goL14obW91c2V8Y2xpY2spLyk+LTEmJih6PXcpO2lmKGgpZm9yKGo9ei5sZW5ndGg7ajspYj16Wy0tal0sY1tiXT1oW2JdO2lmKGcuc2VhcmNoKC9tb3VzZShkb3dufHVwKXxjbGljay8pPi0xJiYhYy53aGljaCljLndoaWNoPTE7aWYoZy5zZWFyY2goL150b3VjaC8pIT09LTEmJihiPWYoaCksZz1iLnRvdWNoZXMsYj1iLmNoYW5nZWRUb3VjaGVzLGc9ZyYmZy5sZW5ndGg/Z1swXTpiJiZiLmxlbmd0aD9iWzBdOmUpKWZvcihoPTAsbGVuPXUubGVuZ3RoO2g8bGVuO2grKyliPXVbaF0sXG5jW2JdPWdbYl07YShkLnRhcmdldCkudHJpZ2dlcihjKX1yZXR1cm4gY31mdW5jdGlvbiBqKGIpe3ZhciBkPWEuZGF0YShiLnRhcmdldCx4KTtpZigheiYmKCFGfHxGIT09ZCkpaWYoZD1oKFwidlwiK2IudHlwZSxiKSlkLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZiLnByZXZlbnREZWZhdWx0KCksZC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZiLnN0b3BQcm9wYWdhdGlvbigpLGQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSYmYi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX1mdW5jdGlvbiBvKGIpe3ZhciBnPWYoYikudG91Y2hlcyxjO2lmKGcmJmcubGVuZ3RoPT09MSYmKGM9Yi50YXJnZXQsZz1kKGMpLGcuaGFzVmlydHVhbEJpbmRpbmcpKUY9TCsrLGEuZGF0YShjLHgsRikseSYmKGNsZWFyVGltZW91dCh5KSx5PTApLEE9Rz1mYWxzZSxjPWYoYikudG91Y2hlc1swXSxzPWMucGFnZVgsRT1jLnBhZ2VZLGgoXCJ2bW91c2VvdmVyXCIsYixnKSxoKFwidm1vdXNlZG93blwiLGIsZyl9XG5mdW5jdGlvbiBtKGEpe0d8fChBfHxoKFwidm1vdXNlY2FuY2VsXCIsYSxkKGEudGFyZ2V0KSksQT10cnVlLGcoKSl9ZnVuY3Rpb24gcChiKXtpZighRyl7dmFyIGM9ZihiKS50b3VjaGVzWzBdLGU9QSx6PWEudm1vdXNlLm1vdmVEaXN0YW5jZVRocmVzaG9sZDtBPUF8fE1hdGguYWJzKGMucGFnZVgtcyk+enx8TWF0aC5hYnMoYy5wYWdlWS1FKT56O2ZsYWdzPWQoYi50YXJnZXQpO0EmJiFlJiZoKFwidm1vdXNlY2FuY2VsXCIsYixmbGFncyk7aChcInZtb3VzZW1vdmVcIixiLGZsYWdzKTtnKCl9fWZ1bmN0aW9uIGwoYSl7aWYoIUcpe0c9dHJ1ZTt2YXIgYj1kKGEudGFyZ2V0KSxjO2goXCJ2bW91c2V1cFwiLGEsYik7aWYoIUEmJihjPWgoXCJ2Y2xpY2tcIixhLGIpKSYmYy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSljPWYoYSkuY2hhbmdlZFRvdWNoZXNbMF0sQy5wdXNoKHt0b3VjaElEOkYseDpjLmNsaWVudFgseTpjLmNsaWVudFl9KSx6PXRydWU7aChcInZtb3VzZW91dFwiLGEsYik7QT1mYWxzZTtnKCl9fWZ1bmN0aW9uIHIoYil7dmFyIGI9XG5hLmRhdGEoYix0KSxkO2lmKGIpZm9yKGQgaW4gYilpZihiW2RdKXJldHVybiB0cnVlO3JldHVybiBmYWxzZX1mdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIGsoYil7dmFyIGQ9Yi5zdWJzdHIoMSk7cmV0dXJue3NldHVwOmZ1bmN0aW9uKCl7cih0aGlzKXx8YS5kYXRhKHRoaXMsdCx7fSk7YS5kYXRhKHRoaXMsdClbYl09dHJ1ZTt2W2JdPSh2W2JdfHwwKSsxO3ZbYl09PT0xJiZILmJpbmQoZCxqKTthKHRoaXMpLmJpbmQoZCxuKTtpZihLKXYudG91Y2hzdGFydD0odi50b3VjaHN0YXJ0fHwwKSsxLHYudG91Y2hzdGFydD09PTEmJkguYmluZChcInRvdWNoc3RhcnRcIixvKS5iaW5kKFwidG91Y2hlbmRcIixsKS5iaW5kKFwidG91Y2htb3ZlXCIscCkuYmluZChcInNjcm9sbFwiLG0pfSx0ZWFyZG93bjpmdW5jdGlvbigpey0tdltiXTt2W2JdfHxILnVuYmluZChkLGopO0smJigtLXYudG91Y2hzdGFydCx2LnRvdWNoc3RhcnR8fEgudW5iaW5kKFwidG91Y2hzdGFydFwiLG8pLnVuYmluZChcInRvdWNobW92ZVwiLHApLnVuYmluZChcInRvdWNoZW5kXCIsXG5sKS51bmJpbmQoXCJzY3JvbGxcIixtKSk7dmFyIGY9YSh0aGlzKSxnPWEuZGF0YSh0aGlzLHQpO2cmJihnW2JdPWZhbHNlKTtmLnVuYmluZChkLG4pO3IodGhpcyl8fGYucmVtb3ZlRGF0YSh0KX19fXZhciB0PVwidmlydHVhbE1vdXNlQmluZGluZ3NcIix4PVwidmlydHVhbFRvdWNoSURcIixjPVwidm1vdXNlb3ZlciB2bW91c2Vkb3duIHZtb3VzZW1vdmUgdm1vdXNldXAgdmNsaWNrIHZtb3VzZW91dCB2bW91c2VjYW5jZWxcIi5zcGxpdChcIiBcIiksdT1cImNsaWVudFggY2xpZW50WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlbllcIi5zcGxpdChcIiBcIiksdz1hLmV2ZW50LnByb3BzLmNvbmNhdChhLmV2ZW50Lm1vdXNlSG9va3M/YS5ldmVudC5tb3VzZUhvb2tzLnByb3BzOltdKSx2PXt9LHk9MCxzPTAsRT0wLEE9ZmFsc2UsQz1bXSx6PWZhbHNlLEc9ZmFsc2UsSz1cImFkZEV2ZW50TGlzdGVuZXJcImluIGIsSD1hKGIpLEw9MSxGPTA7YS52bW91c2U9e21vdmVEaXN0YW5jZVRocmVzaG9sZDoxMCxjbGlja0Rpc3RhbmNlVGhyZXNob2xkOjEwLFxucmVzZXRUaW1lckR1cmF0aW9uOjE1MDB9O2Zvcih2YXIgST0wO0k8Yy5sZW5ndGg7SSsrKWEuZXZlbnQuc3BlY2lhbFtjW0ldXT1rKGNbSV0pO0smJmIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oYil7dmFyIGQ9Qy5sZW5ndGgsZj1iLnRhcmdldCxnLGMsZSxoLHo7aWYoZCl7Zz1iLmNsaWVudFg7Yz1iLmNsaWVudFk7dGhyZXNob2xkPWEudm1vdXNlLmNsaWNrRGlzdGFuY2VUaHJlc2hvbGQ7Zm9yKGU9ZjtlOyl7Zm9yKGg9MDtoPGQ7aCsrKWlmKHo9Q1toXSxlPT09ZiYmTWF0aC5hYnMoei54LWcpPHRocmVzaG9sZCYmTWF0aC5hYnMoei55LWMpPHRocmVzaG9sZHx8YS5kYXRhKGUseCk9PT16LnRvdWNoSUQpe2IucHJldmVudERlZmF1bHQoKTtiLnN0b3BQcm9wYWdhdGlvbigpO3JldHVybn1lPWUucGFyZW50Tm9kZX19fSx0cnVlKX0pKGpRdWVyeSxzLGspOyhmdW5jdGlvbihhLGMsYil7ZnVuY3Rpb24gZShhKXthPWF8fGxvY2F0aW9uLmhyZWY7cmV0dXJuXCIjXCIrYS5yZXBsYWNlKC9eW14jXSojPyguKikkLyxcblwiJDFcIil9dmFyIGY9XCJoYXNoY2hhbmdlXCIsZD1rLGcsaD1hLmV2ZW50LnNwZWNpYWwsaj1kLmRvY3VtZW50TW9kZSxvPVwib25cIitmIGluIGMmJihqPT09Ynx8aj43KTthLmZuW2ZdPWZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMuYmluZChmLGEpOnRoaXMudHJpZ2dlcihmKX07YS5mbltmXS5kZWxheT01MDtoW2ZdPWEuZXh0ZW5kKGhbZl0se3NldHVwOmZ1bmN0aW9uKCl7aWYobylyZXR1cm4gZmFsc2U7YShnLnN0YXJ0KX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZihvKXJldHVybiBmYWxzZTthKGcuc3RvcCl9fSk7Zz1mdW5jdGlvbigpe2Z1bmN0aW9uIGcoKXt2YXIgYj1lKCksZD10KHIpO2lmKGIhPT1yKWsocj1iLGQpLGEoYykudHJpZ2dlcihmKTtlbHNlIGlmKGQhPT1yKWxvY2F0aW9uLmhyZWY9bG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLFwiXCIpK2Q7aj1zZXRUaW1lb3V0KGcsYS5mbltmXS5kZWxheSl9dmFyIGg9e30saixyPWUoKSxuPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxrPVxubix0PW47aC5zdGFydD1mdW5jdGlvbigpe2p8fGcoKX07aC5zdG9wPWZ1bmN0aW9uKCl7aiYmY2xlYXJUaW1lb3V0KGopO2o9Yn07YS5icm93c2VyLm1zaWUmJiFvJiZmdW5jdGlvbigpe3ZhciBiLGM7aC5zdGFydD1mdW5jdGlvbigpe2lmKCFiKWM9KGM9YS5mbltmXS5zcmMpJiZjK2UoKSxiPWEoJzxpZnJhbWUgdGFiaW5kZXg9XCItMVwiIHRpdGxlPVwiZW1wdHlcIi8+JykuaGlkZSgpLm9uZShcImxvYWRcIixmdW5jdGlvbigpe2N8fGsoZSgpKTtnKCl9KS5hdHRyKFwic3JjXCIsY3x8XCJqYXZhc2NyaXB0OjBcIikuaW5zZXJ0QWZ0ZXIoXCJib2R5XCIpWzBdLmNvbnRlbnRXaW5kb3csZC5vbnByb3BlcnR5Y2hhbmdlPWZ1bmN0aW9uKCl7dHJ5e2lmKGV2ZW50LnByb3BlcnR5TmFtZT09PVwidGl0bGVcIiliLmRvY3VtZW50LnRpdGxlPWQudGl0bGV9Y2F0Y2goYSl7fX19O2guc3RvcD1uO3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZShiLmxvY2F0aW9uLmhyZWYpfTtrPWZ1bmN0aW9uKGcsYyl7dmFyIGU9Yi5kb2N1bWVudCxcbmg9YS5mbltmXS5kb21haW47aWYoZyE9PWMpZS50aXRsZT1kLnRpdGxlLGUub3BlbigpLGgmJmUud3JpdGUoJzxzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPVwiJytoKydcIjxcXC9zY3JpcHQ+JyksZS5jbG9zZSgpLGIubG9jYXRpb24uaGFzaD1nfX0oKTtyZXR1cm4gaH0oKX0pKGpRdWVyeSx0aGlzKTsoZnVuY3Rpb24oYSxjKXtpZihhLmNsZWFuRGF0YSl7dmFyIGI9YS5jbGVhbkRhdGE7YS5jbGVhbkRhdGE9ZnVuY3Rpb24oZil7Zm9yKHZhciBkPTAsZzsoZz1mW2RdKSE9bnVsbDtkKyspYShnKS50cmlnZ2VySGFuZGxlcihcInJlbW92ZVwiKTtiKGYpfX1lbHNle3ZhciBlPWEuZm4ucmVtb3ZlO2EuZm4ucmVtb3ZlPWZ1bmN0aW9uKGIsZCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2R8fCghYnx8YS5maWx0ZXIoYixbdGhpc10pLmxlbmd0aCkmJmEoXCIqXCIsdGhpcykuYWRkKFt0aGlzXSkuZWFjaChmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlckhhbmRsZXIoXCJyZW1vdmVcIil9KTtyZXR1cm4gZS5jYWxsKGEodGhpcyksXG5iLGQpfSl9fWEud2lkZ2V0PWZ1bmN0aW9uKGIsZCxnKXt2YXIgYz1iLnNwbGl0KFwiLlwiKVswXSxlLGI9Yi5zcGxpdChcIi5cIilbMV07ZT1jK1wiLVwiK2I7aWYoIWcpZz1kLGQ9YS5XaWRnZXQ7YS5leHByW1wiOlwiXVtlXT1mdW5jdGlvbihkKXtyZXR1cm4hIWEuZGF0YShkLGIpfTthW2NdPWFbY118fHt9O2FbY11bYl09ZnVuY3Rpb24oYSxiKXthcmd1bWVudHMubGVuZ3RoJiZ0aGlzLl9jcmVhdGVXaWRnZXQoYSxiKX07ZD1uZXcgZDtkLm9wdGlvbnM9YS5leHRlbmQodHJ1ZSx7fSxkLm9wdGlvbnMpO2FbY11bYl0ucHJvdG90eXBlPWEuZXh0ZW5kKHRydWUsZCx7bmFtZXNwYWNlOmMsd2lkZ2V0TmFtZTpiLHdpZGdldEV2ZW50UHJlZml4OmFbY11bYl0ucHJvdG90eXBlLndpZGdldEV2ZW50UHJlZml4fHxiLHdpZGdldEJhc2VDbGFzczplfSxnKTthLndpZGdldC5icmlkZ2UoYixhW2NdW2JdKX07YS53aWRnZXQuYnJpZGdlPWZ1bmN0aW9uKGIsZCl7YS5mbltiXT1mdW5jdGlvbihnKXt2YXIgZT1cbnR5cGVvZiBnPT09XCJzdHJpbmdcIixqPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxvPXRoaXMsZz0hZSYmai5sZW5ndGg/YS5leHRlbmQuYXBwbHkobnVsbCxbdHJ1ZSxnXS5jb25jYXQoaikpOmc7aWYoZSYmZy5jaGFyQXQoMCk9PT1cIl9cIilyZXR1cm4gbztlP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEuZGF0YSh0aGlzLGIpO2lmKCFkKXRocm93XCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiK2IrXCIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IGF0dGVtcHRlZCB0byBjYWxsIG1ldGhvZCAnXCIrZytcIidcIjtpZighYS5pc0Z1bmN0aW9uKGRbZ10pKXRocm93XCJubyBzdWNoIG1ldGhvZCAnXCIrZytcIicgZm9yIFwiK2IrXCIgd2lkZ2V0IGluc3RhbmNlXCI7dmFyIGU9ZFtnXS5hcHBseShkLGopO2lmKGUhPT1kJiZlIT09YylyZXR1cm4gbz1lLGZhbHNlfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YS5kYXRhKHRoaXMsYik7Yz9jLm9wdGlvbihnfHx7fSkuX2luaXQoKTpcbmEuZGF0YSh0aGlzLGIsbmV3IGQoZyx0aGlzKSl9KTtyZXR1cm4gb319O2EuV2lkZ2V0PWZ1bmN0aW9uKGEsYil7YXJndW1lbnRzLmxlbmd0aCYmdGhpcy5fY3JlYXRlV2lkZ2V0KGEsYil9O2EuV2lkZ2V0LnByb3RvdHlwZT17d2lkZ2V0TmFtZTpcIndpZGdldFwiLHdpZGdldEV2ZW50UHJlZml4OlwiXCIsb3B0aW9uczp7ZGlzYWJsZWQ6ZmFsc2V9LF9jcmVhdGVXaWRnZXQ6ZnVuY3Rpb24oYixkKXthLmRhdGEoZCx0aGlzLndpZGdldE5hbWUsdGhpcyk7dGhpcy5lbGVtZW50PWEoZCk7dGhpcy5vcHRpb25zPWEuZXh0ZW5kKHRydWUse30sdGhpcy5vcHRpb25zLHRoaXMuX2dldENyZWF0ZU9wdGlvbnMoKSxiKTt2YXIgZz10aGlzO3RoaXMuZWxlbWVudC5iaW5kKFwicmVtb3ZlLlwiK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbigpe2cuZGVzdHJveSgpfSk7dGhpcy5fY3JlYXRlKCk7dGhpcy5fdHJpZ2dlcihcImNyZWF0ZVwiKTt0aGlzLl9pbml0KCl9LF9nZXRDcmVhdGVPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGI9XG57fTthLm1ldGFkYXRhJiYoYj1hLm1ldGFkYXRhLmdldChlbGVtZW50KVt0aGlzLndpZGdldE5hbWVdKTtyZXR1cm4gYn0sX2NyZWF0ZTpmdW5jdGlvbigpe30sX2luaXQ6ZnVuY3Rpb24oKXt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQudW5iaW5kKFwiLlwiK3RoaXMud2lkZ2V0TmFtZSkucmVtb3ZlRGF0YSh0aGlzLndpZGdldE5hbWUpO3RoaXMud2lkZ2V0KCkudW5iaW5kKFwiLlwiK3RoaXMud2lkZ2V0TmFtZSkucmVtb3ZlQXR0cihcImFyaWEtZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3ModGhpcy53aWRnZXRCYXNlQ2xhc3MrXCItZGlzYWJsZWQgdWktc3RhdGUtZGlzYWJsZWRcIil9LHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnR9LG9wdGlvbjpmdW5jdGlvbihiLGQpe3ZhciBnPWI7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApcmV0dXJuIGEuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyk7aWYodHlwZW9mIGI9PT1cInN0cmluZ1wiKXtpZihkPT09YylyZXR1cm4gdGhpcy5vcHRpb25zW2JdO1xuZz17fTtnW2JdPWR9dGhpcy5fc2V0T3B0aW9ucyhnKTtyZXR1cm4gdGhpc30sX3NldE9wdGlvbnM6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpczthLmVhY2goYixmdW5jdGlvbihhLGIpe2QuX3NldE9wdGlvbihhLGIpfSk7cmV0dXJuIHRoaXN9LF9zZXRPcHRpb246ZnVuY3Rpb24oYSxiKXt0aGlzLm9wdGlvbnNbYV09YjthPT09XCJkaXNhYmxlZFwiJiZ0aGlzLndpZGdldCgpW2I/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0odGhpcy53aWRnZXRCYXNlQ2xhc3MrXCItZGlzYWJsZWQgdWktc3RhdGUtZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIixiKTtyZXR1cm4gdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldE9wdGlvbihcImRpc2FibGVkXCIsZmFsc2UpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldE9wdGlvbihcImRpc2FibGVkXCIsdHJ1ZSl9LF90cmlnZ2VyOmZ1bmN0aW9uKGIsZCxnKXt2YXIgYz10aGlzLm9wdGlvbnNbYl0sZD1hLkV2ZW50KGQpO1xuZC50eXBlPShiPT09dGhpcy53aWRnZXRFdmVudFByZWZpeD9iOnRoaXMud2lkZ2V0RXZlbnRQcmVmaXgrYikudG9Mb3dlckNhc2UoKTtnPWd8fHt9O2lmKGQub3JpZ2luYWxFdmVudClmb3IodmFyIGI9YS5ldmVudC5wcm9wcy5sZW5ndGgsZTtiOyllPWEuZXZlbnQucHJvcHNbLS1iXSxkW2VdPWQub3JpZ2luYWxFdmVudFtlXTt0aGlzLmVsZW1lbnQudHJpZ2dlcihkLGcpO3JldHVybiEoYS5pc0Z1bmN0aW9uKGMpJiZjLmNhbGwodGhpcy5lbGVtZW50WzBdLGQsZyk9PT1mYWxzZXx8ZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl9fX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGEsYyl7YS53aWRnZXQoXCJtb2JpbGUud2lkZ2V0XCIse19jcmVhdGVXaWRnZXQ6ZnVuY3Rpb24oKXthLldpZGdldC5wcm90b3R5cGUuX2NyZWF0ZVdpZGdldC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5fdHJpZ2dlcihcImluaXRcIil9LF9nZXRDcmVhdGVPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5lbGVtZW50LFxuZT17fTthLmVhY2godGhpcy5vcHRpb25zLGZ1bmN0aW9uKGEpe3ZhciBkPWIuanFtRGF0YShhLnJlcGxhY2UoL1tBLVpdL2csZnVuY3Rpb24oYSl7cmV0dXJuXCItXCIrYS50b0xvd2VyQ2FzZSgpfSkpO2QhPT1jJiYoZVthXT1kKX0pO3JldHVybiBlfSxlbmhhbmNlV2l0aGluOmZ1bmN0aW9uKGIsYyl7dGhpcy5lbmhhbmNlKGEodGhpcy5vcHRpb25zLmluaXRTZWxlY3RvcixhKGIpKSxjKX0sZW5oYW5jZTpmdW5jdGlvbihiLGMpe3ZhciBmLGQ9YShiKSxkPWEubW9iaWxlLmVuaGFuY2VhYmxlKGQpO2MmJmQubGVuZ3RoJiYoZj0oZj1hLm1vYmlsZS5jbG9zZXN0UGFnZURhdGEoZCkpJiZmLmtlZXBOYXRpdmVTZWxlY3RvcigpfHxcIlwiLGQ9ZC5ub3QoZikpO2RbdGhpcy53aWRnZXROYW1lXSgpfSxyYWlzZTpmdW5jdGlvbihhKXt0aHJvd1wiV2lkZ2V0IFtcIit0aGlzLndpZGdldE5hbWUrXCJdOiBcIithO319KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGEsYyl7dmFyIGI9e307YS5tb2JpbGU9YS5leHRlbmQoe30sXG57dmVyc2lvbjpcIjEuMS4wXCIsbnM6XCJcIixzdWJQYWdlVXJsS2V5OlwidWktcGFnZVwiLGFjdGl2ZVBhZ2VDbGFzczpcInVpLXBhZ2UtYWN0aXZlXCIsYWN0aXZlQnRuQ2xhc3M6XCJ1aS1idG4tYWN0aXZlXCIsZm9jdXNDbGFzczpcInVpLWZvY3VzXCIsYWpheEVuYWJsZWQ6dHJ1ZSxoYXNoTGlzdGVuaW5nRW5hYmxlZDp0cnVlLGxpbmtCaW5kaW5nRW5hYmxlZDp0cnVlLGRlZmF1bHRQYWdlVHJhbnNpdGlvbjpcImZhZGVcIixtYXhUcmFuc2l0aW9uV2lkdGg6ZmFsc2UsbWluU2Nyb2xsQmFjazoyNTAsdG91Y2hPdmVyZmxvd0VuYWJsZWQ6ZmFsc2UsZGVmYXVsdERpYWxvZ1RyYW5zaXRpb246XCJwb3BcIixsb2FkaW5nTWVzc2FnZTpcImxvYWRpbmdcIixwYWdlTG9hZEVycm9yTWVzc2FnZTpcIkVycm9yIExvYWRpbmcgUGFnZVwiLGxvYWRpbmdNZXNzYWdlVGV4dFZpc2libGU6ZmFsc2UsbG9hZGluZ01lc3NhZ2VUaGVtZTpcImFcIixwYWdlTG9hZEVycm9yTWVzc2FnZVRoZW1lOlwiZVwiLGF1dG9Jbml0aWFsaXplUGFnZTp0cnVlLFxucHVzaFN0YXRlRW5hYmxlZDp0cnVlLGlnbm9yZUNvbnRlbnRFbmFibGVkOmZhbHNlLG9yaWVudGF0aW9uQ2hhbmdlRW5hYmxlZDp0cnVlLGJ1dHRvbk1hcmt1cDp7aG92ZXJEZWxheToyMDB9LGtleUNvZGU6e0FMVDoxOCxCQUNLU1BBQ0U6OCxDQVBTX0xPQ0s6MjAsQ09NTUE6MTg4LENPTU1BTkQ6OTEsQ09NTUFORF9MRUZUOjkxLENPTU1BTkRfUklHSFQ6OTMsQ09OVFJPTDoxNyxERUxFVEU6NDYsRE9XTjo0MCxFTkQ6MzUsRU5URVI6MTMsRVNDQVBFOjI3LEhPTUU6MzYsSU5TRVJUOjQ1LExFRlQ6MzcsTUVOVTo5MyxOVU1QQURfQUREOjEwNyxOVU1QQURfREVDSU1BTDoxMTAsTlVNUEFEX0RJVklERToxMTEsTlVNUEFEX0VOVEVSOjEwOCxOVU1QQURfTVVMVElQTFk6MTA2LE5VTVBBRF9TVUJUUkFDVDoxMDksUEFHRV9ET1dOOjM0LFBBR0VfVVA6MzMsUEVSSU9EOjE5MCxSSUdIVDozOSxTSElGVDoxNixTUEFDRTozMixUQUI6OSxVUDozOCxXSU5ET1dTOjkxfSxzaWxlbnRTY3JvbGw6ZnVuY3Rpb24oYil7aWYoYS50eXBlKGIpIT09XG5cIm51bWJlclwiKWI9YS5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGw7YS5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQ9ZmFsc2U7c2V0VGltZW91dChmdW5jdGlvbigpe2Muc2Nyb2xsVG8oMCxiKTthKGspLnRyaWdnZXIoXCJzaWxlbnRzY3JvbGxcIix7eDowLHk6Yn0pfSwyMCk7c2V0VGltZW91dChmdW5jdGlvbigpe2EuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkPXRydWV9LDE1MCl9LG5zTm9ybWFsaXplRGljdDpiLG5zTm9ybWFsaXplOmZ1bmN0aW9uKGQpe3JldHVybiFkP3ZvaWQgMDpiW2RdfHwoYltkXT1hLmNhbWVsQ2FzZShhLm1vYmlsZS5ucytkKSl9LGdldEluaGVyaXRlZFRoZW1lOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWFbMF0sZT1cIlwiLGY9L3VpLShiYXJ8Ym9keXxvdmVybGF5KS0oW2Etel0pXFxiLyxtLHA7Yzspe209Yy5jbGFzc05hbWV8fFwiXCI7aWYoKHA9Zi5leGVjKG0pKSYmKGU9cFsyXSkpYnJlYWs7Yz1jLnBhcmVudE5vZGV9cmV0dXJuIGV8fFxuYnx8XCJhXCJ9LGNsb3Nlc3RQYWdlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYS5jbG9zZXN0KCc6anFtRGF0YShyb2xlPVwicGFnZVwiKSwgOmpxbURhdGEocm9sZT1cImRpYWxvZ1wiKScpLmRhdGEoXCJwYWdlXCIpfSxlbmhhbmNlYWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYXZlUGFyZW50cyhhLFwiZW5oYW5jZVwiKX0saGlqYWNrYWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYXZlUGFyZW50cyhhLFwiYWpheFwiKX0saGF2ZVBhcmVudHM6ZnVuY3Rpb24oYixjKXtpZighYS5tb2JpbGUuaWdub3JlQ29udGVudEVuYWJsZWQpcmV0dXJuIGI7Zm9yKHZhciBlPWIubGVuZ3RoLGY9YSgpLG8sbSxwLGw9MDtsPGU7bCsrKXttPWIuZXEobCk7cD1mYWxzZTtmb3Iobz1iW2xdO287KXtpZigoby5nZXRBdHRyaWJ1dGU/by5nZXRBdHRyaWJ1dGUoXCJkYXRhLVwiK2EubW9iaWxlLm5zK2MpOlwiXCIpPT09XCJmYWxzZVwiKXtwPXRydWU7YnJlYWt9bz1vLnBhcmVudE5vZGV9cHx8KGY9Zi5hZGQobSkpfXJldHVybiBmfX0sXG5hLm1vYmlsZSk7YS5mbi5qcW1EYXRhPWZ1bmN0aW9uKGIsYyl7dmFyIGY7dHlwZW9mIGIhPVwidW5kZWZpbmVkXCImJihiJiYoYj1hLm1vYmlsZS5uc05vcm1hbGl6ZShiKSksZj10aGlzLmRhdGEuYXBwbHkodGhpcyxhcmd1bWVudHMubGVuZ3RoPDI/W2JdOltiLGNdKSk7cmV0dXJuIGZ9O2EuanFtRGF0YT1mdW5jdGlvbihiLGMsZil7dmFyIGU7dHlwZW9mIGMhPVwidW5kZWZpbmVkXCImJihlPWEuZGF0YShiLGM/YS5tb2JpbGUubnNOb3JtYWxpemUoYyk6YyxmKSk7cmV0dXJuIGV9O2EuZm4uanFtUmVtb3ZlRGF0YT1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5yZW1vdmVEYXRhKGEubW9iaWxlLm5zTm9ybWFsaXplKGIpKX07YS5qcW1SZW1vdmVEYXRhPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucmVtb3ZlRGF0YShiLGEubW9iaWxlLm5zTm9ybWFsaXplKGMpKX07YS5mbi5yZW1vdmVXaXRoRGVwZW5kZW50cz1mdW5jdGlvbigpe2EucmVtb3ZlV2l0aERlcGVuZGVudHModGhpcyl9O2EucmVtb3ZlV2l0aERlcGVuZGVudHM9XG5mdW5jdGlvbihiKXtiPWEoYik7KGIuanFtRGF0YShcImRlcGVuZGVudHNcIil8fGEoKSkucmVtb3ZlKCk7Yi5yZW1vdmUoKX07YS5mbi5hZGREZXBlbmRlbnRzPWZ1bmN0aW9uKGIpe2EuYWRkRGVwZW5kZW50cyhhKHRoaXMpLGIpfTthLmFkZERlcGVuZGVudHM9ZnVuY3Rpb24oYixjKXt2YXIgZj1hKGIpLmpxbURhdGEoXCJkZXBlbmRlbnRzXCIpfHxhKCk7YShiKS5qcW1EYXRhKFwiZGVwZW5kZW50c1wiLGEubWVyZ2UoZixjKSl9O2EuZm4uZ2V0RW5jb2RlZFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gYShcIjxkaXYvPlwiKS50ZXh0KGEodGhpcykudGV4dCgpKS5odG1sKCl9O2EuZm4uanFtRW5oYW5jZWFibGU9ZnVuY3Rpb24oKXtyZXR1cm4gYS5tb2JpbGUuZW5oYW5jZWFibGUodGhpcyl9O2EuZm4uanFtSGlqYWNrYWJsZT1mdW5jdGlvbigpe3JldHVybiBhLm1vYmlsZS5oaWphY2thYmxlKHRoaXMpfTt2YXIgZT1hLmZpbmQsZj0vOmpxbURhdGFcXCgoW14pXSopXFwpL2c7YS5maW5kPWZ1bmN0aW9uKGIsXG5jLGgsail7Yj1iLnJlcGxhY2UoZixcIltkYXRhLVwiKyhhLm1vYmlsZS5uc3x8XCJcIikrXCIkMV1cIik7cmV0dXJuIGUuY2FsbCh0aGlzLGIsYyxoLGopfTthLmV4dGVuZChhLmZpbmQsZSk7YS5maW5kLm1hdGNoZXM9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5maW5kKGIsbnVsbCxudWxsLGMpfTthLmZpbmQubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuZmluZChjLG51bGwsbnVsbCxbYl0pLmxlbmd0aD4wfX0pKGpRdWVyeSx0aGlzKTsoZnVuY3Rpb24oYSl7YShzKTt2YXIgYz1hKFwiaHRtbFwiKTthLm1vYmlsZS5tZWRpYT1mdW5jdGlvbigpe3ZhciBiPXt9LGU9YShcIjxkaXYgaWQ9J2pxdWVyeS1tZWRpYXRlc3QnPlwiKSxmPWEoXCI8Ym9keT5cIikuYXBwZW5kKGUpO3JldHVybiBmdW5jdGlvbihhKXtpZighKGEgaW4gYikpe3ZhciBnPWsuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLGg9XCJAbWVkaWEgXCIrYStcIiB7ICNqcXVlcnktbWVkaWF0ZXN0IHsgcG9zaXRpb246YWJzb2x1dGU7IH0gfVwiO1xuZy50eXBlPVwidGV4dC9jc3NcIjtnLnN0eWxlU2hlZXQ/Zy5zdHlsZVNoZWV0LmNzc1RleHQ9aDpnLmFwcGVuZENoaWxkKGsuY3JlYXRlVGV4dE5vZGUoaCkpO2MucHJlcGVuZChmKS5wcmVwZW5kKGcpO2JbYV09ZS5jc3MoXCJwb3NpdGlvblwiKT09PVwiYWJzb2x1dGVcIjtmLmFkZChnKS5yZW1vdmUoKX1yZXR1cm4gYlthXX19KCl9KShqUXVlcnkpOyhmdW5jdGlvbihhLGMpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9YS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSthLnN1YnN0cigxKSxhPShhK1wiIFwiK2cuam9pbihiK1wiIFwiKStiKS5zcGxpdChcIiBcIiksZjtmb3IoZiBpbiBhKWlmKGRbYVtmXV0hPT1jKXJldHVybiB0cnVlfWZ1bmN0aW9uIGUoYSxiLGMpe3ZhciBkPWsuY3JlYXRlRWxlbWVudChcImRpdlwiKSxjPWM/W2NdOmcsZjtmb3IoaT0wO2k8Yy5sZW5ndGg7aSsrKXt2YXIgZT1jW2ldLGg9XCItXCIrZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKStlLnN1YnN0cigxKStcIi1cIithK1wiOiBcIitiK1wiO1wiLGU9ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStcbmUuc3Vic3RyKDEpKyhhLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc3Vic3RyKDEpKTtkLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsaCk7ZC5zdHlsZVtlXSYmKGY9dHJ1ZSl9cmV0dXJuISFmfXZhciBmPWEoXCI8Ym9keT5cIikucHJlcGVuZFRvKFwiaHRtbFwiKSxkPWZbMF0uc3R5bGUsZz1bXCJXZWJraXRcIixcIk1velwiLFwiT1wiXSxoPVwicGFsbUdldFJlc291cmNlXCJpbiBzLGo9cy5vcGVyYW1pbmkmJnt9LnRvU3RyaW5nLmNhbGwocy5vcGVyYW1pbmkpPT09XCJbb2JqZWN0IE9wZXJhTWluaV1cIixvPXMuYmxhY2tiZXJyeTthLmV4dGVuZChhLm1vYmlsZSx7YnJvd3Nlcjp7fX0pO2EubW9iaWxlLmJyb3dzZXIuaWU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MyxiPWsuY3JlYXRlRWxlbWVudChcImRpdlwiKSxjPWIuYWxsfHxbXTtiLmlubmVySFRNTD1cIjxcXCEtLVtpZiBndCBJRSBcIisgKythK1wiXT48YnI+PCFbZW5kaWZdLS1cXD5cIixjWzBdOyk7cmV0dXJuIGE+ND9hOiFhfSgpO2EuZXh0ZW5kKGEuc3VwcG9ydCxcbntvcmllbnRhdGlvbjpcIm9yaWVudGF0aW9uXCJpbiBzJiZcIm9ub3JpZW50YXRpb25jaGFuZ2VcImluIHMsdG91Y2g6XCJvbnRvdWNoZW5kXCJpbiBrLGNzc1RyYW5zaXRpb25zOlwiV2ViS2l0VHJhbnNpdGlvbkV2ZW50XCJpbiBzfHxlKFwidHJhbnNpdGlvblwiLFwiaGVpZ2h0IDEwMG1zIGxpbmVhclwiKSxwdXNoU3RhdGU6XCJwdXNoU3RhdGVcImluIGhpc3RvcnkmJlwicmVwbGFjZVN0YXRlXCJpbiBoaXN0b3J5LG1lZGlhcXVlcnk6YS5tb2JpbGUubWVkaWEoXCJvbmx5IGFsbFwiKSxjc3NQc2V1ZG9FbGVtZW50OiEhYihcImNvbnRlbnRcIiksdG91Y2hPdmVyZmxvdzohIWIoXCJvdmVyZmxvd1Njcm9sbGluZ1wiKSxjc3NUcmFuc2Zvcm0zZDplKFwicGVyc3BlY3RpdmVcIixcIjEwcHhcIixcIm1velwiKXx8YS5tb2JpbGUubWVkaWEoXCIoLVwiK2cuam9pbihcIi10cmFuc2Zvcm0tM2QpLCgtXCIpK1wiLXRyYW5zZm9ybS0zZCksKHRyYW5zZm9ybS0zZClcIiksYm94U2hhZG93OiEhYihcImJveFNoYWRvd1wiKSYmIW8sc2Nyb2xsVG9wOihcInBhZ2VYT2Zmc2V0XCJpblxuc3x8XCJzY3JvbGxUb3BcImluIGsuZG9jdW1lbnRFbGVtZW50fHxcInNjcm9sbFRvcFwiaW4gZlswXSkmJiFoJiYhaixkeW5hbWljQmFzZVRhZzpmdW5jdGlvbigpe3ZhciBiPWxvY2F0aW9uLnByb3RvY29sK1wiLy9cIitsb2NhdGlvbi5ob3N0K2xvY2F0aW9uLnBhdGhuYW1lK1widWktZGlyL1wiLGM9YShcImhlYWQgYmFzZVwiKSxkPW51bGwsZT1cIlwiLGc7Yy5sZW5ndGg/ZT1jLmF0dHIoXCJocmVmXCIpOmM9ZD1hKFwiPGJhc2U+XCIse2hyZWY6Yn0pLmFwcGVuZFRvKFwiaGVhZFwiKTtnPWEoXCI8YSBocmVmPSd0ZXN0dXJsJyAvPlwiKS5wcmVwZW5kVG8oZilbMF0uaHJlZjtjWzBdLmhyZWY9ZXx8bG9jYXRpb24ucGF0aG5hbWU7ZCYmZC5yZW1vdmUoKTtyZXR1cm4gZy5pbmRleE9mKGIpPT09MH0oKX0pO2YucmVtb3ZlKCk7aD1mdW5jdGlvbigpe3ZhciBhPXMubmF2aWdhdG9yLnVzZXJBZ2VudDtyZXR1cm4gYS5pbmRleE9mKFwiTm9raWFcIik+LTEmJihhLmluZGV4T2YoXCJTeW1iaWFuLzNcIik+LTF8fGEuaW5kZXhPZihcIlNlcmllczYwLzVcIik+XG4tMSkmJmEuaW5kZXhPZihcIkFwcGxlV2ViS2l0XCIpPi0xJiZhLm1hdGNoKC8oQnJvd3Nlck5HfE5va2lhQnJvd3NlcilcXC83XFwuWzAtM10vKX0oKTthLm1vYmlsZS5ncmFkZUE9ZnVuY3Rpb24oKXtyZXR1cm4gYS5zdXBwb3J0Lm1lZGlhcXVlcnl8fGEubW9iaWxlLmJyb3dzZXIuaWUmJmEubW9iaWxlLmJyb3dzZXIuaWU+PTd9O2EubW9iaWxlLmFqYXhCbGFja2xpc3Q9cy5ibGFja2JlcnJ5JiYhcy5XZWJLaXRQb2ludHx8anx8aDtoJiZhKGZ1bmN0aW9uKCl7YShcImhlYWQgbGlua1tyZWw9J3N0eWxlc2hlZXQnXVwiKS5hdHRyKFwicmVsXCIsXCJhbHRlcm5hdGUgc3R5bGVzaGVldFwiKS5hdHRyKFwicmVsXCIsXCJzdHlsZXNoZWV0XCIpfSk7YS5zdXBwb3J0LmJveFNoYWRvd3x8YShcImh0bWxcIikuYWRkQ2xhc3MoXCJ1aS1tb2JpbGUtbm9zdXBwb3J0LWJveHNoYWRvd1wiKX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGEsYyxiKXtmdW5jdGlvbiBlKGIsYyxkKXt2YXIgZj1kLnR5cGU7ZC50eXBlPWM7YS5ldmVudC5oYW5kbGUuY2FsbChiLFxuZCk7ZC50eXBlPWZ9YS5lYWNoKFwidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgb3JpZW50YXRpb25jaGFuZ2UgdGhyb3R0bGVkcmVzaXplIHRhcCB0YXBob2xkIHN3aXBlIHN3aXBlbGVmdCBzd2lwZXJpZ2h0IHNjcm9sbHN0YXJ0IHNjcm9sbHN0b3BcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYixjKXthLmZuW2NdPWZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMuYmluZChjLGEpOnRoaXMudHJpZ2dlcihjKX07YS5hdHRyRm5bY109dHJ1ZX0pO3ZhciBmPWEuc3VwcG9ydC50b3VjaCxkPWY/XCJ0b3VjaHN0YXJ0XCI6XCJtb3VzZWRvd25cIixnPWY/XCJ0b3VjaGVuZFwiOlwibW91c2V1cFwiLGg9Zj9cInRvdWNobW92ZVwiOlwibW91c2Vtb3ZlXCI7YS5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0PXtlbmFibGVkOnRydWUsc2V0dXA6ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEsZil7ZD1mO2UoYyxkP1wic2Nyb2xsc3RhcnRcIjpcInNjcm9sbHN0b3BcIixhKX12YXIgYz10aGlzLGQsZjthKGMpLmJpbmQoXCJ0b3VjaG1vdmUgc2Nyb2xsXCIsXG5mdW5jdGlvbihjKXthLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCYmKGR8fGIoYyx0cnVlKSxjbGVhclRpbWVvdXQoZiksZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YihjLGZhbHNlKX0sNTApKX0pfX07YS5ldmVudC5zcGVjaWFsLnRhcD17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9YShiKTtjLmJpbmQoXCJ2bW91c2Vkb3duXCIsZnVuY3Rpb24oZCl7ZnVuY3Rpb24gZigpe2NsZWFyVGltZW91dChxKX1mdW5jdGlvbiBnKCl7ZigpO2MudW5iaW5kKFwidmNsaWNrXCIsaCkudW5iaW5kKFwidm1vdXNldXBcIixmKTthKGspLnVuYmluZChcInZtb3VzZWNhbmNlbFwiLGcpfWZ1bmN0aW9uIGgoYSl7ZygpO249PWEudGFyZ2V0JiZlKGIsXCJ0YXBcIixhKX1pZihkLndoaWNoJiZkLndoaWNoIT09MSlyZXR1cm4gZmFsc2U7dmFyIG49ZC50YXJnZXQscTtjLmJpbmQoXCJ2bW91c2V1cFwiLGYpLmJpbmQoXCJ2Y2xpY2tcIixoKTthKGspLmJpbmQoXCJ2bW91c2VjYW5jZWxcIixnKTtxPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKGIsXG5cInRhcGhvbGRcIixhLkV2ZW50KFwidGFwaG9sZFwiLHt0YXJnZXQ6bn0pKX0sNzUwKX0pfX07YS5ldmVudC5zcGVjaWFsLnN3aXBlPXtzY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkOjEwLGR1cmF0aW9uVGhyZXNob2xkOjFFMyxob3Jpem9udGFsRGlzdGFuY2VUaHJlc2hvbGQ6MzAsdmVydGljYWxEaXN0YW5jZVRocmVzaG9sZDo3NSxzZXR1cDpmdW5jdGlvbigpe3ZhciBjPWEodGhpcyk7Yy5iaW5kKGQsZnVuY3Rpb24oZCl7ZnVuY3Rpb24gZihiKXtpZihsKXt2YXIgYz1iLm9yaWdpbmFsRXZlbnQudG91Y2hlcz9iLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTpiO2s9e3RpbWU6KG5ldyBEYXRlKS5nZXRUaW1lKCksY29vcmRzOltjLnBhZ2VYLGMucGFnZVldfTtNYXRoLmFicyhsLmNvb3Jkc1swXS1rLmNvb3Jkc1swXSk+YS5ldmVudC5zcGVjaWFsLnN3aXBlLnNjcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQmJmIucHJldmVudERlZmF1bHQoKX19dmFyIGU9ZC5vcmlnaW5hbEV2ZW50LnRvdWNoZXM/XG5kLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTpkLGw9e3RpbWU6KG5ldyBEYXRlKS5nZXRUaW1lKCksY29vcmRzOltlLnBhZ2VYLGUucGFnZVldLG9yaWdpbjphKGQudGFyZ2V0KX0saztjLmJpbmQoaCxmKS5vbmUoZyxmdW5jdGlvbigpe2MudW5iaW5kKGgsZik7bCYmayYmay50aW1lLWwudGltZTxhLmV2ZW50LnNwZWNpYWwuc3dpcGUuZHVyYXRpb25UaHJlc2hvbGQmJk1hdGguYWJzKGwuY29vcmRzWzBdLWsuY29vcmRzWzBdKT5hLmV2ZW50LnNwZWNpYWwuc3dpcGUuaG9yaXpvbnRhbERpc3RhbmNlVGhyZXNob2xkJiZNYXRoLmFicyhsLmNvb3Jkc1sxXS1rLmNvb3Jkc1sxXSk8YS5ldmVudC5zcGVjaWFsLnN3aXBlLnZlcnRpY2FsRGlzdGFuY2VUaHJlc2hvbGQmJmwub3JpZ2luLnRyaWdnZXIoXCJzd2lwZVwiKS50cmlnZ2VyKGwuY29vcmRzWzBdPmsuY29vcmRzWzBdP1wic3dpcGVsZWZ0XCI6XCJzd2lwZXJpZ2h0XCIpO2w9az1ifSl9KX19OyhmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXt2YXIgYT1cbmYoKTthIT09ZSYmKGU9YSxkLnRyaWdnZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiKSl9dmFyIGQ9YShiKSxmLGUsZyxoLHQ9ezA6dHJ1ZSwxODA6dHJ1ZX07aWYoYS5zdXBwb3J0Lm9yaWVudGF0aW9uJiYoZz1iLmlubmVyV2lkdGh8fGEoYikud2lkdGgoKSxoPWIuaW5uZXJIZWlnaHR8fGEoYikuaGVpZ2h0KCksZz1nPmgmJmctaD41MCxoPXRbYi5vcmllbnRhdGlvbl0sZyYmaHx8IWcmJiFoKSl0PXtcIi05MFwiOnRydWUsOTA6dHJ1ZX07YS5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlPXtzZXR1cDpmdW5jdGlvbigpe2lmKGEuc3VwcG9ydC5vcmllbnRhdGlvbiYmYS5tb2JpbGUub3JpZW50YXRpb25DaGFuZ2VFbmFibGVkKXJldHVybiBmYWxzZTtlPWYoKTtkLmJpbmQoXCJ0aHJvdHRsZWRyZXNpemVcIixjKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZihhLnN1cHBvcnQub3JpZW50YXRpb24mJmEubW9iaWxlLm9yaWVudGF0aW9uQ2hhbmdlRW5hYmxlZClyZXR1cm4gZmFsc2U7ZC51bmJpbmQoXCJ0aHJvdHRsZWRyZXNpemVcIixcbmMpfSxhZGQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5oYW5kbGVyO2EuaGFuZGxlcj1mdW5jdGlvbihhKXthLm9yaWVudGF0aW9uPWYoKTtyZXR1cm4gYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX07YS5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLm9yaWVudGF0aW9uPWY9ZnVuY3Rpb24oKXt2YXIgYz10cnVlLGM9ay5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuKGM9YS5zdXBwb3J0Lm9yaWVudGF0aW9uP3RbYi5vcmllbnRhdGlvbl06YyYmYy5jbGllbnRXaWR0aC9jLmNsaWVudEhlaWdodDwxLjEpP1wicG9ydHJhaXRcIjpcImxhbmRzY2FwZVwifX0pKGpRdWVyeSxjKTsoZnVuY3Rpb24oKXthLmV2ZW50LnNwZWNpYWwudGhyb3R0bGVkcmVzaXplPXtzZXR1cDpmdW5jdGlvbigpe2EodGhpcykuYmluZChcInJlc2l6ZVwiLGIpfSx0ZWFyZG93bjpmdW5jdGlvbigpe2EodGhpcykudW5iaW5kKFwicmVzaXplXCIsYil9fTt2YXIgYj1mdW5jdGlvbigpe2Y9KG5ldyBEYXRlKS5nZXRUaW1lKCk7Zz1mLVxuYztnPj0yNTA/KGM9ZixhKHRoaXMpLnRyaWdnZXIoXCJ0aHJvdHRsZWRyZXNpemVcIikpOihkJiZjbGVhclRpbWVvdXQoZCksZD1zZXRUaW1lb3V0KGIsMjUwLWcpKX0sYz0wLGQsZixnfSkoKTthLmVhY2goe3Njcm9sbHN0b3A6XCJzY3JvbGxzdGFydFwiLHRhcGhvbGQ6XCJ0YXBcIixzd2lwZWxlZnQ6XCJzd2lwZVwiLHN3aXBlcmlnaHQ6XCJzd2lwZVwifSxmdW5jdGlvbihiLGMpe2EuZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXthKHRoaXMpLmJpbmQoYyxhLm5vb3ApfX19KX0pKGpRdWVyeSx0aGlzKTsoZnVuY3Rpb24oYSl7YS53aWRnZXQoXCJtb2JpbGUucGFnZVwiLGEubW9iaWxlLndpZGdldCx7b3B0aW9uczp7dGhlbWU6XCJjXCIsZG9tQ2FjaGU6ZmFsc2Usa2VlcE5hdGl2ZURlZmF1bHQ6XCI6anFtRGF0YShyb2xlPSdub25lJyksIDpqcW1EYXRhKHJvbGU9J25vanMnKVwifSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLl90cmlnZ2VyKFwiYmVmb3JlY3JlYXRlXCIpPT09XG5mYWxzZSlyZXR1cm4gZmFsc2U7YS5lbGVtZW50LmF0dHIoXCJ0YWJpbmRleFwiLFwiMFwiKS5hZGRDbGFzcyhcInVpLXBhZ2UgdWktYm9keS1cIithLm9wdGlvbnMudGhlbWUpLmJpbmQoXCJwYWdlYmVmb3JlaGlkZVwiLGZ1bmN0aW9uKCl7YS5yZW1vdmVDb250YWluZXJCYWNrZ3JvdW5kKCl9KS5iaW5kKFwicGFnZWJlZm9yZXNob3dcIixmdW5jdGlvbigpe2Euc2V0Q29udGFpbmVyQmFja2dyb3VuZCgpfSl9LHJlbW92ZUNvbnRhaW5lckJhY2tncm91bmQ6ZnVuY3Rpb24oKXthLm1vYmlsZS5wYWdlQ29udGFpbmVyLnJlbW92ZUNsYXNzKFwidWktb3ZlcmxheS1cIithLm1vYmlsZS5nZXRJbmhlcml0ZWRUaGVtZSh0aGlzLmVsZW1lbnQucGFyZW50KCkpKX0sc2V0Q29udGFpbmVyQmFja2dyb3VuZDpmdW5jdGlvbihjKXt0aGlzLm9wdGlvbnMudGhlbWUmJmEubW9iaWxlLnBhZ2VDb250YWluZXIuYWRkQ2xhc3MoXCJ1aS1vdmVybGF5LVwiKyhjfHx0aGlzLm9wdGlvbnMudGhlbWUpKX0sa2VlcE5hdGl2ZVNlbGVjdG9yOmZ1bmN0aW9uKCl7dmFyIGM9XG50aGlzLm9wdGlvbnM7cmV0dXJuIGMua2VlcE5hdGl2ZSYmYS50cmltKGMua2VlcE5hdGl2ZSkmJmMua2VlcE5hdGl2ZSE9PWMua2VlcE5hdGl2ZURlZmF1bHQ/W2Mua2VlcE5hdGl2ZSxjLmtlZXBOYXRpdmVEZWZhdWx0XS5qb2luKFwiLCBcIik6Yy5rZWVwTmF0aXZlRGVmYXVsdH19KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGEsYyxiKXt2YXIgZT1mdW5jdGlvbihkKXtkPT09YiYmKGQ9dHJ1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIsZixlLG8pe3ZhciBrPW5ldyBhLkRlZmVycmVkLHA9Zj9cIiByZXZlcnNlXCI6XCJcIixsPWEubW9iaWxlLnVybEhpc3RvcnkuZ2V0QWN0aXZlKCkubGFzdFNjcm9sbHx8YS5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGwscj1hLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKSxuPWEubW9iaWxlLm1heFRyYW5zaXRpb25XaWR0aCE9PWZhbHNlJiZhKGMpLndpZHRoKCk+YS5tb2JpbGUubWF4VHJhbnNpdGlvbldpZHRoLHE9IWEuc3VwcG9ydC5jc3NUcmFuc2l0aW9uc3x8bnx8IWJ8fFxuYj09PVwibm9uZVwiLHQ9ZnVuY3Rpb24oKXthLm1vYmlsZS5wYWdlQ29udGFpbmVyLnRvZ2dsZUNsYXNzKFwidWktbW9iaWxlLXZpZXdwb3J0LXRyYW5zaXRpb25pbmcgdmlld3BvcnQtXCIrYil9LHg9ZnVuY3Rpb24oKXthLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZD1mYWxzZTtjLnNjcm9sbFRvKDAsbCk7c2V0VGltZW91dChmdW5jdGlvbigpe2EuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkPXRydWV9LDE1MCl9LHU9ZnVuY3Rpb24oKXtvLnJlbW92ZUNsYXNzKGEubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcytcIiBvdXQgaW4gcmV2ZXJzZSBcIitiKS5oZWlnaHQoXCJcIil9LG49ZnVuY3Rpb24oKXtvJiZkJiZ1KCk7ZS5hZGRDbGFzcyhhLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MpO2EubW9iaWxlLmZvY3VzUGFnZShlKTtlLmhlaWdodChyK2wpO3goKTtxfHxlLmFuaW1hdGlvbkNvbXBsZXRlKHcpO2UuYWRkQ2xhc3MoYitcIiBpblwiK3ApO3EmJncoKX0sdz1mdW5jdGlvbigpe2R8fFxubyYmdSgpO2UucmVtb3ZlQ2xhc3MoXCJvdXQgaW4gcmV2ZXJzZSBcIitiKS5oZWlnaHQoXCJcIik7dCgpO2EoYykuc2Nyb2xsVG9wKCkhPT1sJiZ4KCk7ay5yZXNvbHZlKGIsZixlLG8sdHJ1ZSl9O3QoKTtvJiYhcT8oZD9vLmFuaW1hdGlvbkNvbXBsZXRlKG4pOm4oKSxvLmhlaWdodChyK2EoYykuc2Nyb2xsVG9wKCkpLmFkZENsYXNzKGIrXCIgb3V0XCIrcCkpOm4oKTtyZXR1cm4gay5wcm9taXNlKCl9fSxmPWUoKSxlPWUoZmFsc2UpO2EubW9iaWxlLmRlZmF1bHRUcmFuc2l0aW9uSGFuZGxlcj1mO2EubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycz17XCJkZWZhdWx0XCI6YS5tb2JpbGUuZGVmYXVsdFRyYW5zaXRpb25IYW5kbGVyLHNlcXVlbnRpYWw6ZixzaW11bHRhbmVvdXM6ZX07YS5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcz17fX0pKGpRdWVyeSx0aGlzKTsoZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBiKGIpe3ImJighci5jbG9zZXN0KFwiLnVpLXBhZ2UtYWN0aXZlXCIpLmxlbmd0aHx8YikmJlxuci5yZW1vdmVDbGFzcyhhLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyk7cj1udWxsfWZ1bmN0aW9uIGUoKXt0PWZhbHNlO3EubGVuZ3RoPjAmJmEubW9iaWxlLmNoYW5nZVBhZ2UuYXBwbHkobnVsbCxxLnBvcCgpKX1mdW5jdGlvbiBmKGIsYyxkLGYpe2MmJmMuZGF0YShcInBhZ2VcIikuX3RyaWdnZXIoXCJiZWZvcmVoaWRlXCIsbnVsbCx7bmV4dFBhZ2U6Yn0pO2IuZGF0YShcInBhZ2VcIikuX3RyaWdnZXIoXCJiZWZvcmVzaG93XCIsbnVsbCx7cHJldlBhZ2U6Y3x8YShcIlwiKX0pO2EubW9iaWxlLmhpZGVQYWdlTG9hZGluZ01zZygpO2QmJiFhLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QmJmEubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3NbZF0mJihkPWEubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3NbZF0pO2Q9KGEubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyc1tkfHxcImRlZmF1bHRcIl18fGEubW9iaWxlLmRlZmF1bHRUcmFuc2l0aW9uSGFuZGxlcikoZCxmLGIsYyk7ZC5kb25lKGZ1bmN0aW9uKCl7YyYmXG5jLmRhdGEoXCJwYWdlXCIpLl90cmlnZ2VyKFwiaGlkZVwiLG51bGwse25leHRQYWdlOmJ9KTtiLmRhdGEoXCJwYWdlXCIpLl90cmlnZ2VyKFwic2hvd1wiLG51bGwse3ByZXZQYWdlOmN8fGEoXCJcIil9KX0pO3JldHVybiBkfWZ1bmN0aW9uIGQoKXtyZXR1cm4gcy5pbm5lckhlaWdodHx8YShzKS5oZWlnaHQoKX1mdW5jdGlvbiBnKCl7dmFyIGI9YShcIi5cIithLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MpLGM9cGFyc2VGbG9hdChiLmNzcyhcInBhZGRpbmctdG9wXCIpKSxmPXBhcnNlRmxvYXQoYi5jc3MoXCJwYWRkaW5nLWJvdHRvbVwiKSk7Yi5jc3MoXCJtaW4taGVpZ2h0XCIsZCgpLWMtZil9ZnVuY3Rpb24gaChiLGMpe2MmJmIuYXR0cihcImRhdGEtXCIrYS5tb2JpbGUubnMrXCJyb2xlXCIsYyk7Yi5wYWdlKCl9ZnVuY3Rpb24gaihhKXtmb3IoO2E7KXtpZih0eXBlb2YgYS5ub2RlTmFtZT09PVwic3RyaW5nXCImJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09XCJhXCIpYnJlYWs7YT1hLnBhcmVudE5vZGV9cmV0dXJuIGF9ZnVuY3Rpb24gbyhiKXt2YXIgYj1cbmEoYikuY2xvc2VzdChcIi51aS1wYWdlXCIpLmpxbURhdGEoXCJ1cmxcIiksYz12LmhyZWZOb0hhc2g7aWYoIWJ8fCFsLmlzUGF0aChiKSliPWM7cmV0dXJuIGwubWFrZVVybEFic29sdXRlKGIsYyl9dmFyIG09YShzKTthKFwiaHRtbFwiKTt2YXIgcD1hKFwiaGVhZFwiKSxsPXt1cmxQYXJzZVJFOi9eKCgoKFteOlxcLyNcXD9dKzopPyg/OihcXC9cXC8pKCg/OigoW146QFxcLyNcXD9dKykoPzpcXDooW146QFxcLyNcXD9dKykpPylAKT8oKFteOlxcLyNcXD9cXF1cXFtdK3xcXFtbXlxcL1xcXUAjP10rXFxdKSg/OlxcOihbMC05XSspKT8pKT8pPyk/KChcXC8/KD86W15cXC9cXD8jXStcXC8rKSopKFteXFw/I10qKSkpPyhcXD9bXiNdKyk/KSgjLiopPy8scGFyc2VVcmw6ZnVuY3Rpb24oYil7aWYoYS50eXBlKGIpPT09XCJvYmplY3RcIilyZXR1cm4gYjtiPWwudXJsUGFyc2VSRS5leGVjKGJ8fFwiXCIpfHxbXTtyZXR1cm57aHJlZjpiWzBdfHxcIlwiLGhyZWZOb0hhc2g6YlsxXXx8XCJcIixocmVmTm9TZWFyY2g6YlsyXXx8XCJcIixkb21haW46YlszXXx8XCJcIixcbnByb3RvY29sOmJbNF18fFwiXCIsZG91YmxlU2xhc2g6Yls1XXx8XCJcIixhdXRob3JpdHk6Yls2XXx8XCJcIix1c2VybmFtZTpiWzhdfHxcIlwiLHBhc3N3b3JkOmJbOV18fFwiXCIsaG9zdDpiWzEwXXx8XCJcIixob3N0bmFtZTpiWzExXXx8XCJcIixwb3J0OmJbMTJdfHxcIlwiLHBhdGhuYW1lOmJbMTNdfHxcIlwiLGRpcmVjdG9yeTpiWzE0XXx8XCJcIixmaWxlbmFtZTpiWzE1XXx8XCJcIixzZWFyY2g6YlsxNl18fFwiXCIsaGFzaDpiWzE3XXx8XCJcIn19LG1ha2VQYXRoQWJzb2x1dGU6ZnVuY3Rpb24oYSxiKXtpZihhJiZhLmNoYXJBdCgwKT09PVwiL1wiKXJldHVybiBhO2Zvcih2YXIgYT1hfHxcIlwiLGM9KGI9Yj9iLnJlcGxhY2UoL15cXC98KFxcL1teXFwvXSp8W15cXC9dKykkL2csXCJcIik6XCJcIik/Yi5zcGxpdChcIi9cIik6W10sZD1hLnNwbGl0KFwiL1wiKSxmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBlPWRbZl07c3dpdGNoKGUpe2Nhc2UgXCIuXCI6YnJlYWs7Y2FzZSBcIi4uXCI6Yy5sZW5ndGgmJmMucG9wKCk7YnJlYWs7ZGVmYXVsdDpjLnB1c2goZSl9fXJldHVyblwiL1wiK1xuYy5qb2luKFwiL1wiKX0saXNTYW1lRG9tYWluOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGwucGFyc2VVcmwoYSkuZG9tYWluPT09bC5wYXJzZVVybChiKS5kb21haW59LGlzUmVsYXRpdmVVcmw6ZnVuY3Rpb24oYSl7cmV0dXJuIGwucGFyc2VVcmwoYSkucHJvdG9jb2w9PT1cIlwifSxpc0Fic29sdXRlVXJsOmZ1bmN0aW9uKGEpe3JldHVybiBsLnBhcnNlVXJsKGEpLnByb3RvY29sIT09XCJcIn0sbWFrZVVybEFic29sdXRlOmZ1bmN0aW9uKGEsYil7aWYoIWwuaXNSZWxhdGl2ZVVybChhKSlyZXR1cm4gYTt2YXIgYz1sLnBhcnNlVXJsKGEpLGQ9bC5wYXJzZVVybChiKSxmPWMucHJvdG9jb2x8fGQucHJvdG9jb2wsZT1jLnByb3RvY29sP2MuZG91YmxlU2xhc2g6Yy5kb3VibGVTbGFzaHx8ZC5kb3VibGVTbGFzaCxnPWMuYXV0aG9yaXR5fHxkLmF1dGhvcml0eSxoPWMucGF0aG5hbWUhPT1cIlwiLGo9bC5tYWtlUGF0aEFic29sdXRlKGMucGF0aG5hbWV8fGQuZmlsZW5hbWUsZC5wYXRobmFtZSk7cmV0dXJuIGYrXG5lK2craisoYy5zZWFyY2h8fCFoJiZkLnNlYXJjaHx8XCJcIikrYy5oYXNofSxhZGRTZWFyY2hQYXJhbXM6ZnVuY3Rpb24oYixjKXt2YXIgZD1sLnBhcnNlVXJsKGIpLGY9dHlwZW9mIGM9PT1cIm9iamVjdFwiP2EucGFyYW0oYyk6YyxlPWQuc2VhcmNofHxcIj9cIjtyZXR1cm4gZC5ocmVmTm9TZWFyY2grZSsoZS5jaGFyQXQoZS5sZW5ndGgtMSkhPT1cIj9cIj9cIiZcIjpcIlwiKStmKyhkLmhhc2h8fFwiXCIpfSxjb252ZXJ0VXJsVG9EYXRhVXJsOmZ1bmN0aW9uKGEpe3ZhciBiPWwucGFyc2VVcmwoYSk7aWYobC5pc0VtYmVkZGVkUGFnZShiKSlyZXR1cm4gYi5oYXNoLnNwbGl0KHgpWzBdLnJlcGxhY2UoL14jLyxcIlwiKTtlbHNlIGlmKGwuaXNTYW1lRG9tYWluKGIsdikpcmV0dXJuIGIuaHJlZk5vSGFzaC5yZXBsYWNlKHYuZG9tYWluLFwiXCIpO3JldHVybiBhfSxnZXQ6ZnVuY3Rpb24oYSl7aWYoYT09PWMpYT1sb2NhdGlvbi5oYXNoO3JldHVybiBsLnN0cmlwSGFzaChhKS5yZXBsYWNlKC9bXlxcL10qXFwuW15cXC8qXSskLyxcblwiXCIpfSxnZXRGaWxlUGF0aDpmdW5jdGlvbihiKXt2YXIgYz1cIiZcIithLm1vYmlsZS5zdWJQYWdlVXJsS2V5O3JldHVybiBiJiZiLnNwbGl0KGMpWzBdLnNwbGl0KHgpWzBdfSxzZXQ6ZnVuY3Rpb24oYSl7bG9jYXRpb24uaGFzaD1hfSxpc1BhdGg6ZnVuY3Rpb24oYSl7cmV0dXJuL1xcLy8udGVzdChhKX0sY2xlYW46ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh2LmRvbWFpbixcIlwiKX0sc3RyaXBIYXNoOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL14jLyxcIlwiKX0sY2xlYW5IYXNoOmZ1bmN0aW9uKGEpe3JldHVybiBsLnN0cmlwSGFzaChhLnJlcGxhY2UoL1xcPy4qJC8sXCJcIikucmVwbGFjZSh4LFwiXCIpKX0saXNFeHRlcm5hbDpmdW5jdGlvbihhKXthPWwucGFyc2VVcmwoYSk7cmV0dXJuIGEucHJvdG9jb2wmJmEuZG9tYWluIT09dy5kb21haW4/dHJ1ZTpmYWxzZX0saGFzUHJvdG9jb2w6ZnVuY3Rpb24oYSl7cmV0dXJuL14oOj9cXHcrOikvLnRlc3QoYSl9LGlzRmlyc3RQYWdlVXJsOmZ1bmN0aW9uKGIpe3ZhciBiPVxubC5wYXJzZVVybChsLm1ha2VVcmxBYnNvbHV0ZShiLHYpKSxkPWEubW9iaWxlLmZpcnN0UGFnZSxkPWQmJmRbMF0/ZFswXS5pZDpjO3JldHVybihiLmhyZWZOb0hhc2g9PT13LmhyZWZOb0hhc2h8fHkmJmIuaHJlZk5vSGFzaD09PXYuaHJlZk5vSGFzaCkmJighYi5oYXNofHxiLmhhc2g9PT1cIiNcInx8ZCYmYi5oYXNoLnJlcGxhY2UoL14jLyxcIlwiKT09PWQpfSxpc0VtYmVkZGVkUGFnZTpmdW5jdGlvbihhKXthPWwucGFyc2VVcmwoYSk7cmV0dXJuIGEucHJvdG9jb2whPT1cIlwiP2EuaGFzaCYmKGEuaHJlZk5vSGFzaD09PXcuaHJlZk5vSGFzaHx8eSYmYS5ocmVmTm9IYXNoPT09di5ocmVmTm9IYXNoKTovXiMvLnRlc3QoYS5ocmVmKX19LHI9bnVsbCxuPXtzdGFjazpbXSxhY3RpdmVJbmRleDowLGdldEFjdGl2ZTpmdW5jdGlvbigpe3JldHVybiBuLnN0YWNrW24uYWN0aXZlSW5kZXhdfSxnZXRQcmV2OmZ1bmN0aW9uKCl7cmV0dXJuIG4uc3RhY2tbbi5hY3RpdmVJbmRleC0xXX0sZ2V0TmV4dDpmdW5jdGlvbigpe3JldHVybiBuLnN0YWNrW24uYWN0aXZlSW5kZXgrXG4xXX0sYWRkTmV3OmZ1bmN0aW9uKGEsYixjLGQsZil7bi5nZXROZXh0KCkmJm4uY2xlYXJGb3J3YXJkKCk7bi5zdGFjay5wdXNoKHt1cmw6YSx0cmFuc2l0aW9uOmIsdGl0bGU6YyxwYWdlVXJsOmQscm9sZTpmfSk7bi5hY3RpdmVJbmRleD1uLnN0YWNrLmxlbmd0aC0xfSxjbGVhckZvcndhcmQ6ZnVuY3Rpb24oKXtuLnN0YWNrPW4uc3RhY2suc2xpY2UoMCxuLmFjdGl2ZUluZGV4KzEpfSxkaXJlY3RIYXNoQ2hhbmdlOmZ1bmN0aW9uKGIpe3ZhciBkLGYsZTt0aGlzLmdldEFjdGl2ZSgpO2EuZWFjaChuLnN0YWNrLGZ1bmN0aW9uKGEsYyl7Yi5jdXJyZW50VXJsPT09Yy51cmwmJihkPWE8bi5hY3RpdmVJbmRleCxmPSFkLGU9YSl9KTt0aGlzLmFjdGl2ZUluZGV4PWUhPT1jP2U6dGhpcy5hY3RpdmVJbmRleDtkPyhiLmVpdGhlcnx8Yi5pc0JhY2spKHRydWUpOmYmJihiLmVpdGhlcnx8Yi5pc0ZvcndhcmQpKGZhbHNlKX0saWdub3JlTmV4dEhhc2hDaGFuZ2U6ZmFsc2V9LHE9W10sdD1mYWxzZSxcbng9XCImdWktc3RhdGU9ZGlhbG9nXCIsdT1wLmNoaWxkcmVuKFwiYmFzZVwiKSx3PWwucGFyc2VVcmwobG9jYXRpb24uaHJlZiksdj11Lmxlbmd0aD9sLnBhcnNlVXJsKGwubWFrZVVybEFic29sdXRlKHUuYXR0cihcImhyZWZcIiksdy5ocmVmKSk6dyx5PXcuaHJlZk5vSGFzaCE9PXYuaHJlZk5vSGFzaCxCPWEuc3VwcG9ydC5keW5hbWljQmFzZVRhZz97ZWxlbWVudDp1Lmxlbmd0aD91OmEoXCI8YmFzZT5cIix7aHJlZjp2LmhyZWZOb0hhc2h9KS5wcmVwZW5kVG8ocCksc2V0OmZ1bmN0aW9uKGEpe0IuZWxlbWVudC5hdHRyKFwiaHJlZlwiLGwubWFrZVVybEFic29sdXRlKGEsdikpfSxyZXNldDpmdW5jdGlvbigpe0IuZWxlbWVudC5hdHRyKFwiaHJlZlwiLHYuaHJlZk5vSGFzaCl9fTpjO2EubW9iaWxlLmZvY3VzUGFnZT1mdW5jdGlvbihhKXt2YXIgYj1hLmZpbmQoXCJbYXV0b2ZvY3VzXVwiKSxjPWEuZmluZChcIi51aS10aXRsZTplcSgwKVwiKTtiLmxlbmd0aD9iLmZvY3VzKCk6Yy5sZW5ndGg/Yy5mb2N1cygpOlxuYS5mb2N1cygpfTt2YXIgRT10cnVlLEEsQztBPWZ1bmN0aW9uKCl7aWYoRSl7dmFyIGI9YS5tb2JpbGUudXJsSGlzdG9yeS5nZXRBY3RpdmUoKTtpZihiKXt2YXIgYz1tLnNjcm9sbFRvcCgpO2IubGFzdFNjcm9sbD1jPGEubW9iaWxlLm1pblNjcm9sbEJhY2s/YS5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGw6Y319fTtDPWZ1bmN0aW9uKCl7c2V0VGltZW91dChBLDEwMCl9O20uYmluZChhLnN1cHBvcnQucHVzaFN0YXRlP1wicG9wc3RhdGVcIjpcImhhc2hjaGFuZ2VcIixmdW5jdGlvbigpe0U9ZmFsc2V9KTttLm9uZShhLnN1cHBvcnQucHVzaFN0YXRlP1wicG9wc3RhdGVcIjpcImhhc2hjaGFuZ2VcIixmdW5jdGlvbigpe0U9dHJ1ZX0pO20ub25lKFwicGFnZWNvbnRhaW5lcmNyZWF0ZVwiLGZ1bmN0aW9uKCl7YS5tb2JpbGUucGFnZUNvbnRhaW5lci5iaW5kKFwicGFnZWNoYW5nZVwiLGZ1bmN0aW9uKCl7RT10cnVlO20udW5iaW5kKFwic2Nyb2xsc3RvcFwiLEMpO20uYmluZChcInNjcm9sbHN0b3BcIixDKX0pfSk7XG5tLmJpbmQoXCJzY3JvbGxzdG9wXCIsQyk7YS5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0PWQ7YS5mbi5hbmltYXRpb25Db21wbGV0ZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5zdXBwb3J0LmNzc1RyYW5zaXRpb25zP2EodGhpcykub25lKFwid2Via2l0QW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZFwiLGIpOihzZXRUaW1lb3V0KGIsMCksYSh0aGlzKSl9O2EubW9iaWxlLnBhdGg9bDthLm1vYmlsZS5iYXNlPUI7YS5tb2JpbGUudXJsSGlzdG9yeT1uO2EubW9iaWxlLmRpYWxvZ0hhc2hLZXk9eDthLm1vYmlsZS5hbGxvd0Nyb3NzRG9tYWluUGFnZXM9ZmFsc2U7YS5tb2JpbGUuZ2V0RG9jdW1lbnRVcmw9ZnVuY3Rpb24oYil7cmV0dXJuIGI/YS5leHRlbmQoe30sdyk6dy5ocmVmfTthLm1vYmlsZS5nZXREb2N1bWVudEJhc2U9ZnVuY3Rpb24oYil7cmV0dXJuIGI/YS5leHRlbmQoe30sdik6di5ocmVmfTthLm1vYmlsZS5fYmluZFBhZ2VSZW1vdmU9ZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpOyFiLmRhdGEoXCJwYWdlXCIpLm9wdGlvbnMuZG9tQ2FjaGUmJlxuYi5pcyhcIjpqcW1EYXRhKGV4dGVybmFsLXBhZ2U9J3RydWUnKVwiKSYmYi5iaW5kKFwicGFnZWhpZGUucmVtb3ZlXCIsZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLGM9bmV3IGEuRXZlbnQoXCJwYWdlcmVtb3ZlXCIpO2IudHJpZ2dlcihjKTtjLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxiLnJlbW92ZVdpdGhEZXBlbmRlbnRzKCl9KX07YS5tb2JpbGUubG9hZFBhZ2U9ZnVuY3Rpb24oYixkKXt2YXIgZj1hLkRlZmVycmVkKCksZT1hLmV4dGVuZCh7fSxhLm1vYmlsZS5sb2FkUGFnZS5kZWZhdWx0cyxkKSxnPW51bGwsaj1udWxsLGs9bC5tYWtlVXJsQWJzb2x1dGUoYixhLm1vYmlsZS5hY3RpdmVQYWdlJiZvKGEubW9iaWxlLmFjdGl2ZVBhZ2UpfHx2LmhyZWZOb0hhc2gpO2lmKGUuZGF0YSYmZS50eXBlPT09XCJnZXRcIilrPWwuYWRkU2VhcmNoUGFyYW1zKGssZS5kYXRhKSxlLmRhdGE9YztpZihlLmRhdGEmJmUudHlwZT09PVwicG9zdFwiKWUucmVsb2FkUGFnZT10cnVlO3ZhciB1PWwuZ2V0RmlsZVBhdGgoayksXG5uPWwuY29udmVydFVybFRvRGF0YVVybChrKTtlLnBhZ2VDb250YWluZXI9ZS5wYWdlQ29udGFpbmVyfHxhLm1vYmlsZS5wYWdlQ29udGFpbmVyO2c9ZS5wYWdlQ29udGFpbmVyLmNoaWxkcmVuKFwiOmpxbURhdGEodXJsPSdcIituK1wiJylcIik7Zy5sZW5ndGg9PT0wJiZuJiYhbC5pc1BhdGgobikmJihnPWUucGFnZUNvbnRhaW5lci5jaGlsZHJlbihcIiNcIituKS5hdHRyKFwiZGF0YS1cIithLm1vYmlsZS5ucytcInVybFwiLG4pKTtpZihnLmxlbmd0aD09PTApaWYoYS5tb2JpbGUuZmlyc3RQYWdlJiZsLmlzRmlyc3RQYWdlVXJsKHUpKWEubW9iaWxlLmZpcnN0UGFnZS5wYXJlbnQoKS5sZW5ndGgmJihnPWEoYS5tb2JpbGUuZmlyc3RQYWdlKSk7ZWxzZSBpZihsLmlzRW1iZWRkZWRQYWdlKHUpKXJldHVybiBmLnJlamVjdChrLGQpLGYucHJvbWlzZSgpO0ImJkIucmVzZXQoKTtpZihnLmxlbmd0aCl7aWYoIWUucmVsb2FkUGFnZSlyZXR1cm4gaChnLGUucm9sZSksZi5yZXNvbHZlKGssZCxnKSxmLnByb21pc2UoKTtcbmo9Z312YXIgbT1lLnBhZ2VDb250YWluZXIseD1uZXcgYS5FdmVudChcInBhZ2ViZWZvcmVsb2FkXCIpLHA9e3VybDpiLGFic1VybDprLGRhdGFVcmw6bixkZWZlcnJlZDpmLG9wdGlvbnM6ZX07bS50cmlnZ2VyKHgscCk7aWYoeC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm4gZi5wcm9taXNlKCk7aWYoZS5zaG93TG9hZE1zZyl2YXIgcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5tb2JpbGUuc2hvd1BhZ2VMb2FkaW5nTXNnKCl9LGUubG9hZE1zZ0RlbGF5KTshYS5tb2JpbGUuYWxsb3dDcm9zc0RvbWFpblBhZ2VzJiYhbC5pc1NhbWVEb21haW4odyxrKT9mLnJlamVjdChrLGQpOmEuYWpheCh7dXJsOnUsdHlwZTplLnR5cGUsZGF0YTplLmRhdGEsZGF0YVR5cGU6XCJodG1sXCIsc3VjY2VzczpmdW5jdGlvbihjLG8sbSl7dmFyIHg9YShcIjxkaXY+PC9kaXY+XCIpLHY9Yy5tYXRjaCgvPHRpdGxlW14+XSo+KFtePF0qKS8pJiZSZWdFeHAuJDEsdz1SZWdFeHAoXCJcXFxcYmRhdGEtXCIrYS5tb2JpbGUubnMrXG5cInVybD1bXFxcIiddPyhbXlxcXCInPl0qKVtcXFwiJ10/XCIpO1JlZ0V4cChcIig8W14+XStcXFxcYmRhdGEtXCIrYS5tb2JpbGUubnMrXCJyb2xlPVtcXFwiJ10/cGFnZVtcXFwiJ10/W14+XSo+KVwiKS50ZXN0KGMpJiZSZWdFeHAuJDEmJncudGVzdChSZWdFeHAuJDEpJiZSZWdFeHAuJDEmJihiPXU9bC5nZXRGaWxlUGF0aChSZWdFeHAuJDEpKTtCJiZCLnNldCh1KTt4LmdldCgwKS5pbm5lckhUTUw9YztnPXguZmluZChcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKSwgOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIikuZmlyc3QoKTtnLmxlbmd0aHx8KGc9YShcIjxkaXYgZGF0YS1cIithLm1vYmlsZS5ucytcInJvbGU9J3BhZ2UnPlwiK2Muc3BsaXQoLzxcXC8/Ym9keVtePl0qPi9nbWkpWzFdK1wiPC9kaXY+XCIpKTt2JiYhZy5qcW1EYXRhKFwidGl0bGVcIikmJih+di5pbmRleE9mKFwiJlwiKSYmKHY9YShcIjxkaXY+XCIrditcIjwvZGl2PlwiKS50ZXh0KCkpLGcuanFtRGF0YShcInRpdGxlXCIsdikpO2lmKCFhLnN1cHBvcnQuZHluYW1pY0Jhc2VUYWcpe3ZhciBxPVxubC5nZXQodSk7Zy5maW5kKFwiW3NyY10sIGxpbmtbaHJlZl0sIGFbcmVsPSdleHRlcm5hbCddLCA6anFtRGF0YShhamF4PSdmYWxzZScpLCBhW3RhcmdldF1cIikuZWFjaChmdW5jdGlvbigpe3ZhciBiPWEodGhpcykuaXMoXCJbaHJlZl1cIik/XCJocmVmXCI6YSh0aGlzKS5pcyhcIltzcmNdXCIpP1wic3JjXCI6XCJhY3Rpb25cIixjPWEodGhpcykuYXR0cihiKSxjPWMucmVwbGFjZShsb2NhdGlvbi5wcm90b2NvbCtcIi8vXCIrbG9jYXRpb24uaG9zdCtsb2NhdGlvbi5wYXRobmFtZSxcIlwiKTsvXihcXHcrOnwjfFxcLykvLnRlc3QoYyl8fGEodGhpcykuYXR0cihiLHErYyl9KX1nLmF0dHIoXCJkYXRhLVwiK2EubW9iaWxlLm5zK1widXJsXCIsbC5jb252ZXJ0VXJsVG9EYXRhVXJsKHUpKS5hdHRyKFwiZGF0YS1cIithLm1vYmlsZS5ucytcImV4dGVybmFsLXBhZ2VcIix0cnVlKS5hcHBlbmRUbyhlLnBhZ2VDb250YWluZXIpO2cub25lKFwicGFnZWNyZWF0ZVwiLGEubW9iaWxlLl9iaW5kUGFnZVJlbW92ZSk7aChnLGUucm9sZSk7ay5pbmRleE9mKFwiJlwiK1xuYS5tb2JpbGUuc3ViUGFnZVVybEtleSk+LTEmJihnPWUucGFnZUNvbnRhaW5lci5jaGlsZHJlbihcIjpqcW1EYXRhKHVybD0nXCIrbitcIicpXCIpKTtlLnNob3dMb2FkTXNnJiYoY2xlYXJUaW1lb3V0KHIpLGEubW9iaWxlLmhpZGVQYWdlTG9hZGluZ01zZygpKTtwLnhocj1tO3AudGV4dFN0YXR1cz1vO3AucGFnZT1nO2UucGFnZUNvbnRhaW5lci50cmlnZ2VyKFwicGFnZWxvYWRcIixwKTtmLnJlc29sdmUoayxkLGcsail9LGVycm9yOmZ1bmN0aW9uKGIsYyxnKXtCJiZCLnNldChsLmdldCgpKTtwLnhocj1iO3AudGV4dFN0YXR1cz1jO3AuZXJyb3JUaHJvd249ZztiPW5ldyBhLkV2ZW50KFwicGFnZWxvYWRmYWlsZWRcIik7ZS5wYWdlQ29udGFpbmVyLnRyaWdnZXIoYixwKTtiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoZS5zaG93TG9hZE1zZyYmKGNsZWFyVGltZW91dChyKSxhLm1vYmlsZS5oaWRlUGFnZUxvYWRpbmdNc2coKSxhLm1vYmlsZS5zaG93UGFnZUxvYWRpbmdNc2coYS5tb2JpbGUucGFnZUxvYWRFcnJvck1lc3NhZ2VUaGVtZSxcbmEubW9iaWxlLnBhZ2VMb2FkRXJyb3JNZXNzYWdlLHRydWUpLHNldFRpbWVvdXQoYS5tb2JpbGUuaGlkZVBhZ2VMb2FkaW5nTXNnLDE1MDApKSxmLnJlamVjdChrLGQpKX19KTtyZXR1cm4gZi5wcm9taXNlKCl9O2EubW9iaWxlLmxvYWRQYWdlLmRlZmF1bHRzPXt0eXBlOlwiZ2V0XCIsZGF0YTpjLHJlbG9hZFBhZ2U6ZmFsc2Uscm9sZTpjLHNob3dMb2FkTXNnOmZhbHNlLHBhZ2VDb250YWluZXI6Yyxsb2FkTXNnRGVsYXk6NTB9O2EubW9iaWxlLmNoYW5nZVBhZ2U9ZnVuY3Rpb24oZCxnKXtpZih0KXEudW5zaGlmdChhcmd1bWVudHMpO2Vsc2V7dmFyIGo9YS5leHRlbmQoe30sYS5tb2JpbGUuY2hhbmdlUGFnZS5kZWZhdWx0cyxnKTtqLnBhZ2VDb250YWluZXI9ai5wYWdlQ29udGFpbmVyfHxhLm1vYmlsZS5wYWdlQ29udGFpbmVyO2ouZnJvbVBhZ2U9ai5mcm9tUGFnZXx8YS5tb2JpbGUuYWN0aXZlUGFnZTt2YXIgdT1qLnBhZ2VDb250YWluZXIsbz1uZXcgYS5FdmVudChcInBhZ2ViZWZvcmVjaGFuZ2VcIiksXG5tPXt0b1BhZ2U6ZCxvcHRpb25zOmp9O3UudHJpZ2dlcihvLG0pO2lmKCFvLmlzRGVmYXVsdFByZXZlbnRlZCgpKWlmKGQ9bS50b1BhZ2UsdD10cnVlLHR5cGVvZiBkPT1cInN0cmluZ1wiKWEubW9iaWxlLmxvYWRQYWdlKGQsaikuZG9uZShmdW5jdGlvbihiLGMsZCxlKXt0PWZhbHNlO2MuZHVwbGljYXRlQ2FjaGVkUGFnZT1lO2EubW9iaWxlLmNoYW5nZVBhZ2UoZCxjKX0pLmZhaWwoZnVuY3Rpb24oKXt0PWZhbHNlO2IodHJ1ZSk7ZSgpO2oucGFnZUNvbnRhaW5lci50cmlnZ2VyKFwicGFnZWNoYW5nZWZhaWxlZFwiLG0pfSk7ZWxzZXtpZihkWzBdPT09YS5tb2JpbGUuZmlyc3RQYWdlWzBdJiYhai5kYXRhVXJsKWouZGF0YVVybD13LmhyZWZOb0hhc2g7dmFyIG89ai5mcm9tUGFnZSxwPWouZGF0YVVybCYmbC5jb252ZXJ0VXJsVG9EYXRhVXJsKGouZGF0YVVybCl8fGQuanFtRGF0YShcInVybFwiKSx2PXA7bC5nZXRGaWxlUGF0aChwKTt2YXIgcj1uLmdldEFjdGl2ZSgpLHM9bi5hY3RpdmVJbmRleD09PVxuMCx5PTAsQj1rLnRpdGxlLEE9ai5yb2xlPT09XCJkaWFsb2dcInx8ZC5qcW1EYXRhKFwicm9sZVwiKT09PVwiZGlhbG9nXCI7aWYobyYmb1swXT09PWRbMF0mJiFqLmFsbG93U2FtZVBhZ2VUcmFuc2l0aW9uKXQ9ZmFsc2UsdS50cmlnZ2VyKFwicGFnZWNoYW5nZVwiLG0pO2Vsc2V7aChkLGoucm9sZSk7ai5mcm9tSGFzaENoYW5nZSYmbi5kaXJlY3RIYXNoQ2hhbmdlKHtjdXJyZW50VXJsOnAsaXNCYWNrOmZ1bmN0aW9uKCl7eT0tMX0saXNGb3J3YXJkOmZ1bmN0aW9uKCl7eT0xfX0pO3RyeXtrLmFjdGl2ZUVsZW1lbnQmJmsuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT1cImJvZHlcIj9hKGsuYWN0aXZlRWxlbWVudCkuYmx1cigpOmEoXCJpbnB1dDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMsIHNlbGVjdDpmb2N1c1wiKS5ibHVyKCl9Y2F0Y2goRSl7fUEmJnImJihwPShyLnVybHx8XCJcIikreCk7aWYoai5jaGFuZ2VIYXNoIT09ZmFsc2UmJnApbi5pZ25vcmVOZXh0SGFzaENoYW5nZT10cnVlLFxubC5zZXQocCk7dmFyIEM9IXI/QjpkLmpxbURhdGEoXCJ0aXRsZVwiKXx8ZC5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIpLmZpbmQoXCIudWktdGl0bGVcIikuZ2V0RW5jb2RlZFRleHQoKTtDJiZCPT1rLnRpdGxlJiYoQj1DKTtkLmpxbURhdGEoXCJ0aXRsZVwiKXx8ZC5qcW1EYXRhKFwidGl0bGVcIixCKTtqLnRyYW5zaXRpb249ai50cmFuc2l0aW9ufHwoeSYmIXM/ci50cmFuc2l0aW9uOmMpfHwoQT9hLm1vYmlsZS5kZWZhdWx0RGlhbG9nVHJhbnNpdGlvbjphLm1vYmlsZS5kZWZhdWx0UGFnZVRyYW5zaXRpb24pO3l8fG4uYWRkTmV3KHAsai50cmFuc2l0aW9uLEIsdixqLnJvbGUpO2sudGl0bGU9bi5nZXRBY3RpdmUoKS50aXRsZTthLm1vYmlsZS5hY3RpdmVQYWdlPWQ7ai5yZXZlcnNlPWoucmV2ZXJzZXx8eTwwO2YoZCxvLGoudHJhbnNpdGlvbixqLnJldmVyc2UpLmRvbmUoZnVuY3Rpb24oYyxmLGcsaCxsKXtiKCk7ai5kdXBsaWNhdGVDYWNoZWRQYWdlJiZqLmR1cGxpY2F0ZUNhY2hlZFBhZ2UucmVtb3ZlKCk7XG5sfHxhLm1vYmlsZS5mb2N1c1BhZ2UoZCk7ZSgpO3UudHJpZ2dlcihcInBhZ2VjaGFuZ2VcIixtKX0pfX19fTthLm1vYmlsZS5jaGFuZ2VQYWdlLmRlZmF1bHRzPXt0cmFuc2l0aW9uOmMscmV2ZXJzZTpmYWxzZSxjaGFuZ2VIYXNoOnRydWUsZnJvbUhhc2hDaGFuZ2U6ZmFsc2Uscm9sZTpjLGR1cGxpY2F0ZUNhY2hlZFBhZ2U6YyxwYWdlQ29udGFpbmVyOmMsc2hvd0xvYWRNc2c6dHJ1ZSxkYXRhVXJsOmMsZnJvbVBhZ2U6YyxhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbjpmYWxzZX07YS5tb2JpbGUuX3JlZ2lzdGVySW50ZXJuYWxFdmVudHM9ZnVuY3Rpb24oKXthKGspLmRlbGVnYXRlKFwiZm9ybVwiLFwic3VibWl0XCIsZnVuY3Rpb24oYil7dmFyIGM9YSh0aGlzKTtpZihhLm1vYmlsZS5hamF4RW5hYmxlZCYmIWMuaXMoXCI6anFtRGF0YShhamF4PSdmYWxzZScpXCIpJiZjLmpxbUhpamFja2FibGUoKS5sZW5ndGgpe3ZhciBkPWMuYXR0cihcIm1ldGhvZFwiKSxlPWMuYXR0cihcInRhcmdldFwiKSxmPWMuYXR0cihcImFjdGlvblwiKTtcbmlmKCFmJiYoZj1vKGMpLGY9PT12LmhyZWZOb0hhc2gpKWY9dy5ocmVmTm9TZWFyY2g7Zj1sLm1ha2VVcmxBYnNvbHV0ZShmLG8oYykpOyFsLmlzRXh0ZXJuYWwoZikmJiFlJiYoYS5tb2JpbGUuY2hhbmdlUGFnZShmLHt0eXBlOmQmJmQubGVuZ3RoJiZkLnRvTG93ZXJDYXNlKCl8fFwiZ2V0XCIsZGF0YTpjLnNlcmlhbGl6ZSgpLHRyYW5zaXRpb246Yy5qcW1EYXRhKFwidHJhbnNpdGlvblwiKSxkaXJlY3Rpb246Yy5qcW1EYXRhKFwiZGlyZWN0aW9uXCIpLHJlbG9hZFBhZ2U6dHJ1ZX0pLGIucHJldmVudERlZmF1bHQoKSl9fSk7YShrKS5iaW5kKFwidmNsaWNrXCIsZnVuY3Rpb24oYyl7aWYoIShjLndoaWNoPjEpJiZhLm1vYmlsZS5saW5rQmluZGluZ0VuYWJsZWQmJihjPWooYy50YXJnZXQpLGEoYykuanFtSGlqYWNrYWJsZSgpLmxlbmd0aCYmYyYmbC5wYXJzZVVybChjLmdldEF0dHJpYnV0ZShcImhyZWZcIil8fFwiI1wiKS5oYXNoIT09XCIjXCIpKWIodHJ1ZSkscj1hKGMpLmNsb3Nlc3QoXCIudWktYnRuXCIpLm5vdChcIi51aS1kaXNhYmxlZFwiKSxcbnIuYWRkQ2xhc3MoYS5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MpLGEoXCIuXCIrYS5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzK1wiIC51aS1idG5cIikubm90KGMpLmJsdXIoKSxhKGMpLmpxbURhdGEoXCJocmVmXCIsYShjKS5hdHRyKFwiaHJlZlwiKSkuYXR0cihcImhyZWZcIixcIiNcIil9KTthKGspLmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKGQpe2lmKGEubW9iaWxlLmxpbmtCaW5kaW5nRW5hYmxlZCl7dmFyIGY9aihkLnRhcmdldCksZT1hKGYpLGc7aWYoZiYmIShkLndoaWNoPjEpJiZlLmpxbUhpamFja2FibGUoKS5sZW5ndGgpe2c9ZnVuY3Rpb24oKXtzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtiKHRydWUpfSwyMDApfTtlLmpxbURhdGEoXCJocmVmXCIpJiZlLmF0dHIoXCJocmVmXCIsZS5qcW1EYXRhKFwiaHJlZlwiKSk7aWYoZS5pcyhcIjpqcW1EYXRhKHJlbD0nYmFjaycpXCIpKXJldHVybiBzLmhpc3RvcnkuYmFjaygpLGZhbHNlO3ZhciBoPW8oZSksZj1sLm1ha2VVcmxBYnNvbHV0ZShlLmF0dHIoXCJocmVmXCIpfHxcIiNcIixcbmgpO2lmKCFhLm1vYmlsZS5hamF4RW5hYmxlZCYmIWwuaXNFbWJlZGRlZFBhZ2UoZikpZygpO2Vsc2V7aWYoZi5zZWFyY2goXCIjXCIpIT0tMSlpZihmPWYucmVwbGFjZSgvW14jXSojLyxcIlwiKSlmPWwuaXNQYXRoKGYpP2wubWFrZVVybEFic29sdXRlKGYsaCk6bC5tYWtlVXJsQWJzb2x1dGUoXCIjXCIrZix3LmhyZWZOb0hhc2gpO2Vsc2V7ZC5wcmV2ZW50RGVmYXVsdCgpO3JldHVybn12YXIgaD1lLmlzKFwiW3JlbD0nZXh0ZXJuYWwnXVwiKXx8ZS5pcyhcIjpqcW1EYXRhKGFqYXg9J2ZhbHNlJylcIil8fGUuaXMoXCJbdGFyZ2V0XVwiKSxrPWEubW9iaWxlLmFsbG93Q3Jvc3NEb21haW5QYWdlcyYmdy5wcm90b2NvbD09PVwiZmlsZTpcIiYmZi5zZWFyY2goL15odHRwcz86LykhPS0xO2h8fGwuaXNFeHRlcm5hbChmKSYmIWs/ZygpOihnPWUuanFtRGF0YShcInRyYW5zaXRpb25cIiksaD0oaD1lLmpxbURhdGEoXCJkaXJlY3Rpb25cIikpJiZoPT09XCJyZXZlcnNlXCJ8fGUuanFtRGF0YShcImJhY2tcIiksZT1lLmF0dHIoXCJkYXRhLVwiK1xuYS5tb2JpbGUubnMrXCJyZWxcIil8fGMsYS5tb2JpbGUuY2hhbmdlUGFnZShmLHt0cmFuc2l0aW9uOmcscmV2ZXJzZTpoLHJvbGU6ZX0pLGQucHJldmVudERlZmF1bHQoKSl9fX19KTthKGspLmRlbGVnYXRlKFwiLnVpLXBhZ2VcIixcInBhZ2VzaG93LnByZWZldGNoXCIsZnVuY3Rpb24oKXt2YXIgYj1bXTthKHRoaXMpLmZpbmQoXCJhOmpxbURhdGEocHJlZmV0Y2gpXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yy5hdHRyKFwiaHJlZlwiKTtkJiZhLmluQXJyYXkoZCxiKT09PS0xJiYoYi5wdXNoKGQpLGEubW9iaWxlLmxvYWRQYWdlKGQse3JvbGU6Yy5hdHRyKFwiZGF0YS1cIithLm1vYmlsZS5ucytcInJlbFwiKX0pKX0pfSk7YS5tb2JpbGUuX2hhbmRsZUhhc2hDaGFuZ2U9ZnVuY3Rpb24oYil7dmFyIGQ9bC5zdHJpcEhhc2goYiksZj17dHJhbnNpdGlvbjphLm1vYmlsZS51cmxIaXN0b3J5LnN0YWNrLmxlbmd0aD09PTA/XCJub25lXCI6YyxjaGFuZ2VIYXNoOmZhbHNlLGZyb21IYXNoQ2hhbmdlOnRydWV9O1xuaWYoIWEubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkfHxuLmlnbm9yZU5leHRIYXNoQ2hhbmdlKW4uaWdub3JlTmV4dEhhc2hDaGFuZ2U9ZmFsc2U7ZWxzZXtpZihuLnN0YWNrLmxlbmd0aD4xJiZkLmluZGV4T2YoeCk+LTEpaWYoYS5tb2JpbGUuYWN0aXZlUGFnZS5pcyhcIi51aS1kaWFsb2dcIikpbi5kaXJlY3RIYXNoQ2hhbmdlKHtjdXJyZW50VXJsOmQsZWl0aGVyOmZ1bmN0aW9uKGIpe3ZhciBjPWEubW9iaWxlLnVybEhpc3RvcnkuZ2V0QWN0aXZlKCk7ZD1jLnBhZ2VVcmw7YS5leHRlbmQoZix7cm9sZTpjLnJvbGUsdHJhbnNpdGlvbjpjLnRyYW5zaXRpb24scmV2ZXJzZTpifSl9fSk7ZWxzZXtuLmRpcmVjdEhhc2hDaGFuZ2Uoe2N1cnJlbnRVcmw6ZCxpc0JhY2s6ZnVuY3Rpb24oKXtzLmhpc3RvcnkuYmFjaygpfSxpc0ZvcndhcmQ6ZnVuY3Rpb24oKXtzLmhpc3RvcnkuZm9yd2FyZCgpfX0pO3JldHVybn1kPyhkPXR5cGVvZiBkPT09XCJzdHJpbmdcIiYmIWwuaXNQYXRoKGQpP2wubWFrZVVybEFic29sdXRlKFwiI1wiK1xuZCx2KTpkLGEubW9iaWxlLmNoYW5nZVBhZ2UoZCxmKSk6YS5tb2JpbGUuY2hhbmdlUGFnZShhLm1vYmlsZS5maXJzdFBhZ2UsZil9fTttLmJpbmQoXCJoYXNoY2hhbmdlXCIsZnVuY3Rpb24oKXthLm1vYmlsZS5faGFuZGxlSGFzaENoYW5nZShsb2NhdGlvbi5oYXNoKX0pO2EoaykuYmluZChcInBhZ2VzaG93XCIsZyk7YShzKS5iaW5kKFwidGhyb3R0bGVkcmVzaXplXCIsZyl9fSkoalF1ZXJ5KTsoZnVuY3Rpb24oYSxjKXt2YXIgYj17fSxlPWEoYyksZj1hLm1vYmlsZS5wYXRoLnBhcnNlVXJsKGxvY2F0aW9uLmhyZWYpO2EuZXh0ZW5kKGIse2luaXRpYWxGaWxlUGF0aDpmLnBhdGhuYW1lK2Yuc2VhcmNoLGluaXRpYWxIcmVmOmYuaHJlZk5vSGFzaCxzdGF0ZTpmdW5jdGlvbigpe3JldHVybntoYXNoOmxvY2F0aW9uLmhhc2h8fFwiI1wiK2IuaW5pdGlhbEZpbGVQYXRoLHRpdGxlOmsudGl0bGUsaW5pdGlhbEhyZWY6Yi5pbml0aWFsSHJlZn19LHJlc2V0VUlLZXlzOmZ1bmN0aW9uKGIpe3ZhciBjPVwiJlwiK1xuYS5tb2JpbGUuc3ViUGFnZVVybEtleSxmPWIuaW5kZXhPZihhLm1vYmlsZS5kaWFsb2dIYXNoS2V5KTtmPi0xP2I9Yi5zbGljZSgwLGYpK1wiI1wiK2Iuc2xpY2UoZik6Yi5pbmRleE9mKGMpPi0xJiYoYj1iLnNwbGl0KGMpLmpvaW4oXCIjXCIrYykpO3JldHVybiBifSxoYXNoVmFsdWVBZnRlclJlc2V0OmZ1bmN0aW9uKGMpe2M9Yi5yZXNldFVJS2V5cyhjKTtyZXR1cm4gYS5tb2JpbGUucGF0aC5wYXJzZVVybChjKS5oYXNofSxuZXh0SGFzaENoYW5nZVByZXZlbnRlZDpmdW5jdGlvbihjKXthLm1vYmlsZS51cmxIaXN0b3J5Lmlnbm9yZU5leHRIYXNoQ2hhbmdlPWM7Yi5vbkhhc2hDaGFuZ2VEaXNhYmxlZD1jfSxvbkhhc2hDaGFuZ2U6ZnVuY3Rpb24oKXtpZighYi5vbkhhc2hDaGFuZ2VEaXNhYmxlZCl7dmFyIGMsZjtjPWxvY2F0aW9uLmhhc2g7dmFyIGU9YS5tb2JpbGUucGF0aC5pc1BhdGgoYyksaj1lP2xvY2F0aW9uLmhyZWY6YS5tb2JpbGUuZ2V0RG9jdW1lbnRVcmwoKTtjPWU/Yy5yZXBsYWNlKFwiI1wiLFxuXCJcIik6YztmPWIuc3RhdGUoKTtjPWEubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKGMsaik7ZSYmKGM9Yi5yZXNldFVJS2V5cyhjKSk7aGlzdG9yeS5yZXBsYWNlU3RhdGUoZixrLnRpdGxlLGMpfX0sb25Qb3BTdGF0ZTpmdW5jdGlvbihjKXt2YXIgYz1jLm9yaWdpbmFsRXZlbnQuc3RhdGUsZixoO2lmKGMpe2Y9Yi5oYXNoVmFsdWVBZnRlclJlc2V0KGEubW9iaWxlLnVybEhpc3RvcnkuZ2V0QWN0aXZlKCkudXJsKTtoPWIuaGFzaFZhbHVlQWZ0ZXJSZXNldChjLmhhc2gucmVwbGFjZShcIiNcIixcIlwiKSk7aWYoZj1mIT09aCllLm9uZShcImhhc2hjaGFuZ2UucHVzaHN0YXRlXCIsZnVuY3Rpb24oKXtiLm5leHRIYXNoQ2hhbmdlUHJldmVudGVkKGZhbHNlKX0pO2IubmV4dEhhc2hDaGFuZ2VQcmV2ZW50ZWQoZmFsc2UpO2EubW9iaWxlLl9oYW5kbGVIYXNoQ2hhbmdlKGMuaGFzaCk7ZiYmYi5uZXh0SGFzaENoYW5nZVByZXZlbnRlZCh0cnVlKX19LGluaXQ6ZnVuY3Rpb24oKXtlLmJpbmQoXCJoYXNoY2hhbmdlXCIsXG5iLm9uSGFzaENoYW5nZSk7ZS5iaW5kKFwicG9wc3RhdGVcIixiLm9uUG9wU3RhdGUpO2xvY2F0aW9uLmhhc2g9PT1cIlwiJiZoaXN0b3J5LnJlcGxhY2VTdGF0ZShiLnN0YXRlKCksay50aXRsZSxsb2NhdGlvbi5ocmVmKX19KTthKGZ1bmN0aW9uKCl7YS5tb2JpbGUucHVzaFN0YXRlRW5hYmxlZCYmYS5zdXBwb3J0LnB1c2hTdGF0ZSYmYi5pbml0KCl9KX0pKGpRdWVyeSx0aGlzKTtqUXVlcnkubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MucG9wPVwiZmFkZVwiOyhmdW5jdGlvbihhKXthLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnMuc2xpZGU9YS5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNpbXVsdGFuZW91czthLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRlPVwiZmFkZVwifSkoalF1ZXJ5LHRoaXMpO2pRdWVyeS5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5zbGlkZWRvd249XCJmYWRlXCI7alF1ZXJ5Lm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRldXA9XCJmYWRlXCI7XG5qUXVlcnkubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MuZmxpcD1cImZhZGVcIjtqUXVlcnkubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MuZmxvdz1cImZhZGVcIjtqUXVlcnkubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MudHVybj1cImZhZGVcIjsoZnVuY3Rpb24oYSl7YS5tb2JpbGUucGFnZS5wcm90b3R5cGUub3B0aW9ucy5kZWdyYWRlSW5wdXRzPXtjb2xvcjpmYWxzZSxkYXRlOmZhbHNlLGRhdGV0aW1lOmZhbHNlLFwiZGF0ZXRpbWUtbG9jYWxcIjpmYWxzZSxlbWFpbDpmYWxzZSxtb250aDpmYWxzZSxudW1iZXI6ZmFsc2UscmFuZ2U6XCJudW1iZXJcIixzZWFyY2g6XCJ0ZXh0XCIsdGVsOmZhbHNlLHRpbWU6ZmFsc2UsdXJsOmZhbHNlLHdlZWs6ZmFsc2V9O2EoaykuYmluZChcInBhZ2VjcmVhdGUgY3JlYXRlXCIsZnVuY3Rpb24oYyl7dmFyIGI9YS5tb2JpbGUuY2xvc2VzdFBhZ2VEYXRhKGEoYy50YXJnZXQpKSxlO2lmKGIpZT1iLm9wdGlvbnMsYShjLnRhcmdldCkuZmluZChcImlucHV0XCIpLm5vdChiLmtlZXBOYXRpdmVTZWxlY3RvcigpKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9XG5hKHRoaXMpLGM9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLGc9ZS5kZWdyYWRlSW5wdXRzW2NdfHxcInRleHRcIjtpZihlLmRlZ3JhZGVJbnB1dHNbY10pe3ZhciBoPWEoXCI8ZGl2PlwiKS5odG1sKGIuY2xvbmUoKSkuaHRtbCgpLGo9aC5pbmRleE9mKFwiIHR5cGU9XCIpPi0xO2IucmVwbGFjZVdpdGgoaC5yZXBsYWNlKGo/L1xccyt0eXBlPVtcIiddP1xcdytbJ1wiXT8vOi9cXC8/Pi8sJyB0eXBlPVwiJytnKydcIiBkYXRhLScrYS5tb2JpbGUubnMrJ3R5cGU9XCInK2MrJ1wiJysoaj9cIlwiOlwiPlwiKSkpfX0pfSl9KShqUXVlcnkpOyhmdW5jdGlvbihhLGMpe2Eud2lkZ2V0KFwibW9iaWxlLmRpYWxvZ1wiLGEubW9iaWxlLndpZGdldCx7b3B0aW9uczp7Y2xvc2VCdG5UZXh0OlwiQ2xvc2VcIixvdmVybGF5VGhlbWU6XCJhXCIsaW5pdFNlbGVjdG9yOlwiOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIn0sX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz10aGlzLmVsZW1lbnQsZj1hKFwiPGEgaHJlZj0nIycgZGF0YS1cIithLm1vYmlsZS5ucytcblwiaWNvbj0nZGVsZXRlJyBkYXRhLVwiK2EubW9iaWxlLm5zK1wiaWNvbnBvcz0nbm90ZXh0Jz5cIit0aGlzLm9wdGlvbnMuY2xvc2VCdG5UZXh0K1wiPC9hPlwiKSxkPWEoXCI8ZGl2Lz5cIix7cm9sZTpcImRpYWxvZ1wiLFwiY2xhc3NcIjpcInVpLWRpYWxvZy1jb250YWluIHVpLWNvcm5lci1hbGwgdWktb3ZlcmxheS1zaGFkb3dcIn0pO2MuYWRkQ2xhc3MoXCJ1aS1kaWFsb2cgdWktb3ZlcmxheS1cIit0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lKTtjLndyYXBJbm5lcihkKS5jaGlsZHJlbigpLmZpbmQoXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiKS5wcmVwZW5kKGYpLmVuZCgpLmNoaWxkcmVuKFwiOmZpcnN0LWNoaWxkXCIpLmFkZENsYXNzKFwidWktY29ybmVyLXRvcFwiKS5lbmQoKS5jaGlsZHJlbihcIjpsYXN0LWNoaWxkXCIpLmFkZENsYXNzKFwidWktY29ybmVyLWJvdHRvbVwiKTtmLmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKCl7Yi5jbG9zZSgpfSk7Yy5iaW5kKFwidmNsaWNrIHN1Ym1pdFwiLGZ1bmN0aW9uKGIpe3ZhciBiPVxuYShiLnRhcmdldCkuY2xvc2VzdChiLnR5cGU9PT1cInZjbGlja1wiP1wiYVwiOlwiZm9ybVwiKSxjO2IubGVuZ3RoJiYhYi5qcW1EYXRhKFwidHJhbnNpdGlvblwiKSYmKGM9YS5tb2JpbGUudXJsSGlzdG9yeS5nZXRBY3RpdmUoKXx8e30sYi5hdHRyKFwiZGF0YS1cIithLm1vYmlsZS5ucytcInRyYW5zaXRpb25cIixjLnRyYW5zaXRpb258fGEubW9iaWxlLmRlZmF1bHREaWFsb2dUcmFuc2l0aW9uKS5hdHRyKFwiZGF0YS1cIithLm1vYmlsZS5ucytcImRpcmVjdGlvblwiLFwicmV2ZXJzZVwiKSl9KS5iaW5kKFwicGFnZWhpZGVcIixmdW5jdGlvbigpe2EodGhpcykuZmluZChcIi5cIithLm1vYmlsZS5hY3RpdmVCdG5DbGFzcykucmVtb3ZlQ2xhc3MoYS5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MpfSkuYmluZChcInBhZ2ViZWZvcmVzaG93XCIsZnVuY3Rpb24oKXtiLm9wdGlvbnMub3ZlcmxheVRoZW1lJiZiLmVsZW1lbnQucGFnZShcInJlbW92ZUNvbnRhaW5lckJhY2tncm91bmRcIikucGFnZShcInNldENvbnRhaW5lckJhY2tncm91bmRcIixcbmIub3B0aW9ucy5vdmVybGF5VGhlbWUpfSl9LGNsb3NlOmZ1bmN0aW9uKCl7Yy5oaXN0b3J5LmJhY2soKX19KTthKGspLmRlbGVnYXRlKGEubW9iaWxlLmRpYWxvZy5wcm90b3R5cGUub3B0aW9ucy5pbml0U2VsZWN0b3IsXCJwYWdlY3JlYXRlXCIsZnVuY3Rpb24oKXthLm1vYmlsZS5kaWFsb2cucHJvdG90eXBlLmVuaGFuY2UodGhpcyl9KX0pKGpRdWVyeSx0aGlzKTsoZnVuY3Rpb24oYSl7YS5mbi5maWVsZGNvbnRhaW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hZGRDbGFzcyhcInVpLWZpZWxkLWNvbnRhaW4gdWktYm9keSB1aS1iclwiKX07YShrKS5iaW5kKFwicGFnZWNyZWF0ZSBjcmVhdGVcIixmdW5jdGlvbihjKXthKFwiOmpxbURhdGEocm9sZT0nZmllbGRjb250YWluJylcIixjLnRhcmdldCkuanFtRW5oYW5jZWFibGUoKS5maWVsZGNvbnRhaW4oKX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oYSl7YS5mbi5ncmlkPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1cbmEodGhpcyksZT1hLmV4dGVuZCh7Z3JpZDpudWxsfSxjKSxmPWIuY2hpbGRyZW4oKSxkPXtzb2xvOjEsYToyLGI6MyxjOjQsZDo1fSxlPWUuZ3JpZDtpZighZSlpZihmLmxlbmd0aDw9NSlmb3IodmFyIGcgaW4gZClkW2ddPT09Zi5sZW5ndGgmJihlPWcpO2Vsc2UgZT1cImFcIjtkPWRbZV07Yi5hZGRDbGFzcyhcInVpLWdyaWQtXCIrZSk7Zi5maWx0ZXIoXCI6bnRoLWNoaWxkKFwiK2QrXCJuKzEpXCIpLmFkZENsYXNzKFwidWktYmxvY2stYVwiKTtkPjEmJmYuZmlsdGVyKFwiOm50aC1jaGlsZChcIitkK1wibisyKVwiKS5hZGRDbGFzcyhcInVpLWJsb2NrLWJcIik7ZD4yJiZmLmZpbHRlcihcIjpudGgtY2hpbGQoM24rMylcIikuYWRkQ2xhc3MoXCJ1aS1ibG9jay1jXCIpO2Q+MyYmZi5maWx0ZXIoXCI6bnRoLWNoaWxkKDRuKzQpXCIpLmFkZENsYXNzKFwidWktYmxvY2stZFwiKTtkPjQmJmYuZmlsdGVyKFwiOm50aC1jaGlsZCg1bis1KVwiKS5hZGRDbGFzcyhcInVpLWJsb2NrLWVcIil9KX19KShqUXVlcnkpOyhmdW5jdGlvbihhKXthKGspLmJpbmQoXCJwYWdlY3JlYXRlIGNyZWF0ZVwiLFxuZnVuY3Rpb24oYyl7YShcIjpqcW1EYXRhKHJvbGU9J25vanMnKVwiLGMudGFyZ2V0KS5hZGRDbGFzcyhcInVpLW5vanNcIil9KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGEsYyl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI7YTspe2lmKChiPXR5cGVvZiBhLmNsYXNzTmFtZT09PVwic3RyaW5nXCImJmEuY2xhc3NOYW1lK1wiIFwiKSYmYi5pbmRleE9mKFwidWktYnRuIFwiKT4tMSYmYi5pbmRleE9mKFwidWktZGlzYWJsZWQgXCIpPDApYnJlYWs7YT1hLnBhcmVudE5vZGV9cmV0dXJuIGF9YS5mbi5idXR0b25NYXJrdXA9ZnVuY3Rpb24oYil7Zm9yKHZhciBiPWImJmEudHlwZShiKT09XCJvYmplY3RcIj9iOnt9LGQ9MDtkPHRoaXMubGVuZ3RoO2QrKyl7dmFyIGc9dGhpcy5lcShkKSxoPWdbMF0saj1hLmV4dGVuZCh7fSxhLmZuLmJ1dHRvbk1hcmt1cC5kZWZhdWx0cyx7aWNvbjpiLmljb24hPT1jP2IuaWNvbjpnLmpxbURhdGEoXCJpY29uXCIpLGljb25wb3M6Yi5pY29ucG9zIT09Yz9iLmljb25wb3M6Zy5qcW1EYXRhKFwiaWNvbnBvc1wiKSxcbnRoZW1lOmIudGhlbWUhPT1jP2IudGhlbWU6Zy5qcW1EYXRhKFwidGhlbWVcIil8fGEubW9iaWxlLmdldEluaGVyaXRlZFRoZW1lKGcsXCJjXCIpLGlubGluZTpiLmlubGluZSE9PWM/Yi5pbmxpbmU6Zy5qcW1EYXRhKFwiaW5saW5lXCIpLHNoYWRvdzpiLnNoYWRvdyE9PWM/Yi5zaGFkb3c6Zy5qcW1EYXRhKFwic2hhZG93XCIpLGNvcm5lcnM6Yi5jb3JuZXJzIT09Yz9iLmNvcm5lcnM6Zy5qcW1EYXRhKFwiY29ybmVyc1wiKSxpY29uc2hhZG93OmIuaWNvbnNoYWRvdyE9PWM/Yi5pY29uc2hhZG93OmcuanFtRGF0YShcImljb25zaGFkb3dcIiksbWluaTpiLm1pbmkhPT1jP2IubWluaTpnLmpxbURhdGEoXCJtaW5pXCIpfSxiKSxvPVwidWktYnRuLWlubmVyXCIsbSxwLGwscixuLHE7YS5lYWNoKGosZnVuY3Rpb24oYixjKXtoLnNldEF0dHJpYnV0ZShcImRhdGEtXCIrYS5tb2JpbGUubnMrYixjKTtnLmpxbURhdGEoYixjKX0pOyhxPWEuZGF0YShoLnRhZ05hbWU9PT1cIklOUFVUXCJ8fGgudGFnTmFtZT09PVwiQlVUVE9OXCI/XG5oLnBhcmVudE5vZGU6aCxcImJ1dHRvbkVsZW1lbnRzXCIpKT8oaD1xLm91dGVyLGc9YShoKSxsPXEuaW5uZXIscj1xLnRleHQsYShxLmljb24pLnJlbW92ZSgpLHEuaWNvbj1udWxsKToobD1rLmNyZWF0ZUVsZW1lbnQoai53cmFwcGVyRWxzKSxyPWsuY3JlYXRlRWxlbWVudChqLndyYXBwZXJFbHMpKTtuPWouaWNvbj9rLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpOm51bGw7ZSYmIXEmJmUoKTtpZighai50aGVtZSlqLnRoZW1lPWEubW9iaWxlLmdldEluaGVyaXRlZFRoZW1lKGcsXCJjXCIpO209XCJ1aS1idG4gdWktYnRuLXVwLVwiK2oudGhlbWU7bSs9ai5pbmxpbmU/XCIgdWktYnRuLWlubGluZVwiOlwiXCI7bSs9ai5zaGFkb3c/XCIgdWktc2hhZG93XCI6XCJcIjttKz1qLmNvcm5lcnM/XCIgdWktYnRuLWNvcm5lci1hbGxcIjpcIlwiO2oubWluaSE9PWMmJihtKz1qLm1pbmk/XCIgdWktbWluaVwiOlwiIHVpLWZ1bGxzaXplXCIpO2ouaW5saW5lIT09YyYmKG0rPWouaW5saW5lPT09ZmFsc2U/XCIgdWktYnRuLWJsb2NrXCI6XCIgdWktYnRuLWlubGluZVwiKTtcbmlmKGouaWNvbilqLmljb249XCJ1aS1pY29uLVwiK2ouaWNvbixqLmljb25wb3M9ai5pY29ucG9zfHxcImxlZnRcIixwPVwidWktaWNvbiBcIitqLmljb24sai5pY29uc2hhZG93JiYocCs9XCIgdWktaWNvbi1zaGFkb3dcIik7ai5pY29ucG9zJiYobSs9XCIgdWktYnRuLWljb24tXCIrai5pY29ucG9zLGouaWNvbnBvcz09XCJub3RleHRcIiYmIWcuYXR0cihcInRpdGxlXCIpJiZnLmF0dHIoXCJ0aXRsZVwiLGcuZ2V0RW5jb2RlZFRleHQoKSkpO28rPWouY29ybmVycz9cIiB1aS1idG4tY29ybmVyLWFsbFwiOlwiXCI7ai5pY29ucG9zJiZqLmljb25wb3M9PT1cIm5vdGV4dFwiJiYhZy5hdHRyKFwidGl0bGVcIikmJmcuYXR0cihcInRpdGxlXCIsZy5nZXRFbmNvZGVkVGV4dCgpKTtxJiZnLnJlbW92ZUNsYXNzKHEuYmNsc3x8XCJcIik7Zy5yZW1vdmVDbGFzcyhcInVpLWxpbmtcIikuYWRkQ2xhc3MobSk7bC5jbGFzc05hbWU9bztyLmNsYXNzTmFtZT1cInVpLWJ0bi10ZXh0XCI7cXx8bC5hcHBlbmRDaGlsZChyKTtpZihuJiYobi5jbGFzc05hbWU9XG5wLCFxfHwhcS5pY29uKSluLmFwcGVuZENoaWxkKGsuY3JlYXRlVGV4dE5vZGUoXCJcXHUwMGEwXCIpKSxsLmFwcGVuZENoaWxkKG4pO2Zvcig7aC5maXJzdENoaWxkJiYhcTspci5hcHBlbmRDaGlsZChoLmZpcnN0Q2hpbGQpO3F8fGguYXBwZW5kQ2hpbGQobCk7cT17YmNsczptLG91dGVyOmgsaW5uZXI6bCx0ZXh0OnIsaWNvbjpufTthLmRhdGEoaCxcImJ1dHRvbkVsZW1lbnRzXCIscSk7YS5kYXRhKGwsXCJidXR0b25FbGVtZW50c1wiLHEpO2EuZGF0YShyLFwiYnV0dG9uRWxlbWVudHNcIixxKTtuJiZhLmRhdGEobixcImJ1dHRvbkVsZW1lbnRzXCIscSl9cmV0dXJuIHRoaXN9O2EuZm4uYnV0dG9uTWFya3VwLmRlZmF1bHRzPXtjb3JuZXJzOnRydWUsc2hhZG93OnRydWUsaWNvbnNoYWRvdzp0cnVlLHdyYXBwZXJFbHM6XCJzcGFuXCJ9O3ZhciBlPWZ1bmN0aW9uKCl7dmFyIGM9YS5tb2JpbGUuYnV0dG9uTWFya3VwLmhvdmVyRGVsYXksZCxnO2EoaykuYmluZCh7XCJ2bW91c2Vkb3duIHZtb3VzZWNhbmNlbCB2bW91c2V1cCB2bW91c2VvdmVyIHZtb3VzZW91dCBmb2N1cyBibHVyIHNjcm9sbHN0YXJ0XCI6ZnVuY3Rpb24oZSl7dmFyIGosXG5rPWEoYihlLnRhcmdldCkpLGU9ZS50eXBlO2lmKGsubGVuZ3RoKWlmKGo9ay5hdHRyKFwiZGF0YS1cIithLm1vYmlsZS5ucytcInRoZW1lXCIpLGU9PT1cInZtb3VzZWRvd25cIilhLnN1cHBvcnQudG91Y2g/ZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ay5yZW1vdmVDbGFzcyhcInVpLWJ0bi11cC1cIitqKS5hZGRDbGFzcyhcInVpLWJ0bi1kb3duLVwiK2opfSxjKTprLnJlbW92ZUNsYXNzKFwidWktYnRuLXVwLVwiK2opLmFkZENsYXNzKFwidWktYnRuLWRvd24tXCIraik7ZWxzZSBpZihlPT09XCJ2bW91c2VjYW5jZWxcInx8ZT09PVwidm1vdXNldXBcIilrLnJlbW92ZUNsYXNzKFwidWktYnRuLWRvd24tXCIraikuYWRkQ2xhc3MoXCJ1aS1idG4tdXAtXCIraik7ZWxzZSBpZihlPT09XCJ2bW91c2VvdmVyXCJ8fGU9PT1cImZvY3VzXCIpYS5zdXBwb3J0LnRvdWNoP2c9c2V0VGltZW91dChmdW5jdGlvbigpe2sucmVtb3ZlQ2xhc3MoXCJ1aS1idG4tdXAtXCIraikuYWRkQ2xhc3MoXCJ1aS1idG4taG92ZXItXCIrail9LGMpOmsucmVtb3ZlQ2xhc3MoXCJ1aS1idG4tdXAtXCIrXG5qKS5hZGRDbGFzcyhcInVpLWJ0bi1ob3Zlci1cIitqKTtlbHNlIGlmKGU9PT1cInZtb3VzZW91dFwifHxlPT09XCJibHVyXCJ8fGU9PT1cInNjcm9sbHN0YXJ0XCIpay5yZW1vdmVDbGFzcyhcInVpLWJ0bi1ob3Zlci1cIitqK1wiIHVpLWJ0bi1kb3duLVwiK2opLmFkZENsYXNzKFwidWktYnRuLXVwLVwiK2opLGQmJmNsZWFyVGltZW91dChkKSxnJiZjbGVhclRpbWVvdXQoZyl9LFwiZm9jdXNpbiBmb2N1c1wiOmZ1bmN0aW9uKGMpe2EoYihjLnRhcmdldCkpLmFkZENsYXNzKGEubW9iaWxlLmZvY3VzQ2xhc3MpfSxcImZvY3Vzb3V0IGJsdXJcIjpmdW5jdGlvbihjKXthKGIoYy50YXJnZXQpKS5yZW1vdmVDbGFzcyhhLm1vYmlsZS5mb2N1c0NsYXNzKX19KTtlPW51bGx9O2EoaykuYmluZChcInBhZ2VjcmVhdGUgY3JlYXRlXCIsZnVuY3Rpb24oYil7YShcIjpqcW1EYXRhKHJvbGU9J2J1dHRvbicpLCAudWktYmFyID4gYSwgLnVpLWhlYWRlciA+IGEsIC51aS1mb290ZXIgPiBhLCAudWktYmFyID4gOmpxbURhdGEocm9sZT0nY29udHJvbGdyb3VwJykgPiBhXCIsXG5iLnRhcmdldCkubm90KFwiLnVpLWJ0biwgOmpxbURhdGEocm9sZT0nbm9uZScpLCA6anFtRGF0YShyb2xlPSdub2pzJylcIikuYnV0dG9uTWFya3VwKCl9KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGEpe2EubW9iaWxlLnBhZ2UucHJvdG90eXBlLm9wdGlvbnMuYmFja0J0blRleHQ9XCJCYWNrXCI7YS5tb2JpbGUucGFnZS5wcm90b3R5cGUub3B0aW9ucy5hZGRCYWNrQnRuPWZhbHNlO2EubW9iaWxlLnBhZ2UucHJvdG90eXBlLm9wdGlvbnMuYmFja0J0blRoZW1lPW51bGw7YS5tb2JpbGUucGFnZS5wcm90b3R5cGUub3B0aW9ucy5oZWFkZXJUaGVtZT1cImFcIjthLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5vcHRpb25zLmZvb3RlclRoZW1lPVwiYVwiO2EubW9iaWxlLnBhZ2UucHJvdG90eXBlLm9wdGlvbnMuY29udGVudFRoZW1lPW51bGw7YShrKS5kZWxlZ2F0ZShcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKSwgOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIixcInBhZ2VjcmVhdGVcIixmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksXG5iPWMuZGF0YShcInBhZ2VcIikub3B0aW9ucyxlPWMuanFtRGF0YShcInJvbGVcIiksZj1iLnRoZW1lO2EoXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKSwgOmpxbURhdGEocm9sZT0nZm9vdGVyJyksIDpqcW1EYXRhKHJvbGU9J2NvbnRlbnQnKVwiLHRoaXMpLmpxbUVuaGFuY2VhYmxlKCkuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZz1kLmpxbURhdGEoXCJyb2xlXCIpLGg9ZC5qcW1EYXRhKFwidGhlbWVcIiksaj1ofHxiLmNvbnRlbnRUaGVtZXx8ZT09PVwiZGlhbG9nXCImJmYsaztkLmFkZENsYXNzKFwidWktXCIrZyk7aWYoZz09PVwiaGVhZGVyXCJ8fGc9PT1cImZvb3RlclwiKXt2YXIgbT1ofHwoZz09PVwiaGVhZGVyXCI/Yi5oZWFkZXJUaGVtZTpiLmZvb3RlclRoZW1lKXx8ZjtkLmFkZENsYXNzKFwidWktYmFyLVwiK20pLmF0dHIoXCJyb2xlXCIsZz09PVwiaGVhZGVyXCI/XCJiYW5uZXJcIjpcImNvbnRlbnRpbmZvXCIpO2c9PT1cImhlYWRlclwiJiYoaD1kLmNoaWxkcmVuKFwiYVwiKSxrPWguaGFzQ2xhc3MoXCJ1aS1idG4tbGVmdFwiKSxcbmo9aC5oYXNDbGFzcyhcInVpLWJ0bi1yaWdodFwiKSxrPWt8fGguZXEoMCkubm90KFwiLnVpLWJ0bi1yaWdodFwiKS5hZGRDbGFzcyhcInVpLWJ0bi1sZWZ0XCIpLmxlbmd0aCxqfHxoLmVxKDEpLmFkZENsYXNzKFwidWktYnRuLXJpZ2h0XCIpKTtiLmFkZEJhY2tCdG4mJmc9PT1cImhlYWRlclwiJiZhKFwiLnVpLXBhZ2VcIikubGVuZ3RoPjEmJmMuanFtRGF0YShcInVybFwiKSE9PWEubW9iaWxlLnBhdGguc3RyaXBIYXNoKGxvY2F0aW9uLmhhc2gpJiYhayYmYShcIjxhIGhyZWY9JyMnIGNsYXNzPSd1aS1idG4tbGVmdCcgZGF0YS1cIithLm1vYmlsZS5ucytcInJlbD0nYmFjaycgZGF0YS1cIithLm1vYmlsZS5ucytcImljb249J2Fycm93LWwnPlwiK2IuYmFja0J0blRleHQrXCI8L2E+XCIpLmF0dHIoXCJkYXRhLVwiK2EubW9iaWxlLm5zK1widGhlbWVcIixiLmJhY2tCdG5UaGVtZXx8bSkucHJlcGVuZFRvKGQpO2QuY2hpbGRyZW4oXCJoMSwgaDIsIGgzLCBoNCwgaDUsIGg2XCIpLmFkZENsYXNzKFwidWktdGl0bGVcIikuYXR0cih7cm9sZTpcImhlYWRpbmdcIixcblwiYXJpYS1sZXZlbFwiOlwiMVwifSl9ZWxzZSBnPT09XCJjb250ZW50XCImJihqJiZkLmFkZENsYXNzKFwidWktYm9keS1cIitqKSxkLmF0dHIoXCJyb2xlXCIsXCJtYWluXCIpKX0pfSl9KShqUXVlcnkpOyhmdW5jdGlvbihhKXthLndpZGdldChcIm1vYmlsZS5jb2xsYXBzaWJsZVwiLGEubW9iaWxlLndpZGdldCx7b3B0aW9uczp7ZXhwYW5kQ3VlVGV4dDpcIiBjbGljayB0byBleHBhbmQgY29udGVudHNcIixjb2xsYXBzZUN1ZVRleHQ6XCIgY2xpY2sgdG8gY29sbGFwc2UgY29udGVudHNcIixjb2xsYXBzZWQ6dHJ1ZSxoZWFkaW5nOlwiaDEsaDIsaDMsaDQsaDUsaDYsbGVnZW5kXCIsdGhlbWU6bnVsbCxjb250ZW50VGhlbWU6bnVsbCxpY29uVGhlbWU6XCJkXCIsbWluaTpmYWxzZSxpbml0U2VsZWN0b3I6XCI6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZScpXCJ9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmVsZW1lbnQsYj10aGlzLm9wdGlvbnMsZT1jLmFkZENsYXNzKFwidWktY29sbGFwc2libGVcIiksZj1jLmNoaWxkcmVuKGIuaGVhZGluZykuZmlyc3QoKSxcbmQ9ZS53cmFwSW5uZXIoXCI8ZGl2IGNsYXNzPSd1aS1jb2xsYXBzaWJsZS1jb250ZW50Jz48L2Rpdj5cIikuZmluZChcIi51aS1jb2xsYXBzaWJsZS1jb250ZW50XCIpLGc9Yy5jbG9zZXN0KFwiOmpxbURhdGEocm9sZT0nY29sbGFwc2libGUtc2V0JylcIikuYWRkQ2xhc3MoXCJ1aS1jb2xsYXBzaWJsZS1zZXRcIik7Zi5pcyhcImxlZ2VuZFwiKSYmKGY9YShcIjxkaXYgcm9sZT0naGVhZGluZyc+XCIrZi5odG1sKCkrXCI8L2Rpdj5cIikuaW5zZXJ0QmVmb3JlKGYpLGYubmV4dCgpLnJlbW92ZSgpKTtpZihnLmxlbmd0aCl7aWYoIWIudGhlbWUpYi50aGVtZT1nLmpxbURhdGEoXCJ0aGVtZVwiKXx8YS5tb2JpbGUuZ2V0SW5oZXJpdGVkVGhlbWUoZyxcImNcIik7aWYoIWIuY29udGVudFRoZW1lKWIuY29udGVudFRoZW1lPWcuanFtRGF0YShcImNvbnRlbnQtdGhlbWVcIik7aWYoIWIuaWNvblBvcyliLmljb25Qb3M9Zy5qcW1EYXRhKFwiaWNvbnBvc1wiKTtpZighYi5taW5pKWIubWluaT1nLmpxbURhdGEoXCJtaW5pXCIpfWQuYWRkQ2xhc3MoYi5jb250ZW50VGhlbWU/XG5cInVpLWJvZHktXCIrYi5jb250ZW50VGhlbWU6XCJcIik7Zi5pbnNlcnRCZWZvcmUoZCkuYWRkQ2xhc3MoXCJ1aS1jb2xsYXBzaWJsZS1oZWFkaW5nXCIpLmFwcGVuZChcIjxzcGFuIGNsYXNzPSd1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLXN0YXR1cyc+PC9zcGFuPlwiKS53cmFwSW5uZXIoXCI8YSBocmVmPScjJyBjbGFzcz0ndWktY29sbGFwc2libGUtaGVhZGluZy10b2dnbGUnPjwvYT5cIikuZmluZChcImFcIikuZmlyc3QoKS5idXR0b25NYXJrdXAoe3NoYWRvdzpmYWxzZSxjb3JuZXJzOmZhbHNlLGljb25wb3M6Yy5qcW1EYXRhKFwiaWNvbnBvc1wiKXx8Yi5pY29uUG9zfHxcImxlZnRcIixpY29uOlwicGx1c1wiLG1pbmk6Yi5taW5pLHRoZW1lOmIudGhlbWV9KS5hZGQoXCIudWktYnRuLWlubmVyXCIsYykuYWRkQ2xhc3MoXCJ1aS1jb3JuZXItdG9wIHVpLWNvcm5lci1ib3R0b21cIik7ZS5iaW5kKFwiZXhwYW5kIGNvbGxhcHNlXCIsZnVuY3Rpb24oYyl7aWYoIWMuaXNEZWZhdWx0UHJldmVudGVkKCkpe2MucHJldmVudERlZmF1bHQoKTtcbnZhciBqPWEodGhpcyksYz1jLnR5cGU9PT1cImNvbGxhcHNlXCIsaz1iLmNvbnRlbnRUaGVtZTtmLnRvZ2dsZUNsYXNzKFwidWktY29sbGFwc2libGUtaGVhZGluZy1jb2xsYXBzZWRcIixjKS5maW5kKFwiLnVpLWNvbGxhcHNpYmxlLWhlYWRpbmctc3RhdHVzXCIpLnRleHQoYz9iLmV4cGFuZEN1ZVRleHQ6Yi5jb2xsYXBzZUN1ZVRleHQpLmVuZCgpLmZpbmQoXCIudWktaWNvblwiKS50b2dnbGVDbGFzcyhcInVpLWljb24tbWludXNcIiwhYykudG9nZ2xlQ2xhc3MoXCJ1aS1pY29uLXBsdXNcIixjKTtqLnRvZ2dsZUNsYXNzKFwidWktY29sbGFwc2libGUtY29sbGFwc2VkXCIsYyk7ZC50b2dnbGVDbGFzcyhcInVpLWNvbGxhcHNpYmxlLWNvbnRlbnQtY29sbGFwc2VkXCIsYykuYXR0cihcImFyaWEtaGlkZGVuXCIsYyk7aWYoayYmKCFnLmxlbmd0aHx8ZS5qcW1EYXRhKFwiY29sbGFwc2libGUtbGFzdFwiKSkpZi5maW5kKFwiYVwiKS5maXJzdCgpLmFkZChmLmZpbmQoXCIudWktYnRuLWlubmVyXCIpKS50b2dnbGVDbGFzcyhcInVpLWNvcm5lci1ib3R0b21cIixcbmMpLGQudG9nZ2xlQ2xhc3MoXCJ1aS1jb3JuZXItYm90dG9tXCIsIWMpO2QudHJpZ2dlcihcInVwZGF0ZWxheW91dFwiKX19KS50cmlnZ2VyKGIuY29sbGFwc2VkP1wiY29sbGFwc2VcIjpcImV4cGFuZFwiKTtmLmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKGEpe3ZhciBiPWYuaXMoXCIudWktY29sbGFwc2libGUtaGVhZGluZy1jb2xsYXBzZWRcIik/XCJleHBhbmRcIjpcImNvbGxhcHNlXCI7ZS50cmlnZ2VyKGIpO2EucHJldmVudERlZmF1bHQoKX0pfX0pO2EoaykuYmluZChcInBhZ2VjcmVhdGUgY3JlYXRlXCIsZnVuY3Rpb24oYyl7YS5tb2JpbGUuY29sbGFwc2libGUucHJvdG90eXBlLmVuaGFuY2VXaXRoaW4oYy50YXJnZXQpfSl9KShqUXVlcnkpOyhmdW5jdGlvbihhLGMpe2Eud2lkZ2V0KFwibW9iaWxlLmNvbGxhcHNpYmxlc2V0XCIsYS5tb2JpbGUud2lkZ2V0LHtvcHRpb25zOntpbml0U2VsZWN0b3I6XCI6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZS1zZXQnKVwifSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktY29sbGFwc2libGUtc2V0XCIpLFxuZT10aGlzLm9wdGlvbnM7aWYoIWUudGhlbWUpZS50aGVtZT1hLm1vYmlsZS5nZXRJbmhlcml0ZWRUaGVtZShiLFwiY1wiKTtpZighZS5jb250ZW50VGhlbWUpZS5jb250ZW50VGhlbWU9Yi5qcW1EYXRhKFwiY29udGVudC10aGVtZVwiKTtpZighZS5jb3JuZXJzKWUuY29ybmVycz1iLmpxbURhdGEoXCJjb3JuZXJzXCIpPT09Yz90cnVlOmZhbHNlO2IuanFtRGF0YShcImNvbGxhcHNpYmxlYm91bmRcIil8fGIuanFtRGF0YShcImNvbGxhcHNpYmxlYm91bmRcIix0cnVlKS5iaW5kKFwiZXhwYW5kIGNvbGxhcHNlXCIsZnVuY3Rpb24oYil7dmFyIGM9Yi50eXBlPT09XCJjb2xsYXBzZVwiLGI9YShiLnRhcmdldCkuY2xvc2VzdChcIi51aS1jb2xsYXBzaWJsZVwiKSxlPWIuZGF0YShcImNvbGxhcHNpYmxlXCIpO2Uub3B0aW9ucy5jb250ZW50VGhlbWUmJmIuanFtRGF0YShcImNvbGxhcHNpYmxlLWxhc3RcIikmJihiLmZpbmQoZS5vcHRpb25zLmhlYWRpbmcpLmZpcnN0KCkuZmluZChcImFcIikuZmlyc3QoKS5hZGQoXCIudWktYnRuLWlubmVyXCIpLnRvZ2dsZUNsYXNzKFwidWktY29ybmVyLWJvdHRvbVwiLFxuYyksYi5maW5kKFwiLnVpLWNvbGxhcHNpYmxlLWNvbnRlbnRcIikudG9nZ2xlQ2xhc3MoXCJ1aS1jb3JuZXItYm90dG9tXCIsIWMpKX0pLmJpbmQoXCJleHBhbmRcIixmdW5jdGlvbihiKXthKGIudGFyZ2V0KS5jbG9zZXN0KFwiLnVpLWNvbGxhcHNpYmxlXCIpLnNpYmxpbmdzKFwiLnVpLWNvbGxhcHNpYmxlXCIpLnRyaWdnZXIoXCJjb2xsYXBzZVwiKX0pfSxfaW5pdDpmdW5jdGlvbigpe3RoaXMucmVmcmVzaCgpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5vcHRpb25zLGM9dGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiOmpxbURhdGEocm9sZT0nY29sbGFwc2libGUnKVwiKTthLm1vYmlsZS5jb2xsYXBzaWJsZS5wcm90b3R5cGUuZW5oYW5jZShjLm5vdChcIi51aS1jb2xsYXBzaWJsZVwiKSk7Yy5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS5maW5kKGEubW9iaWxlLmNvbGxhcHNpYmxlLnByb3RvdHlwZS5vcHRpb25zLmhlYWRpbmcpLmZpbmQoXCJhXCIpLmZpcnN0KCkuYWRkKFwiLnVpLWJ0bi1pbm5lclwiKS5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci10b3AgdWktY29ybmVyLWJvdHRvbVwiKX0pO1xuYy5maXJzdCgpLmZpbmQoXCJhXCIpLmZpcnN0KCkuYWRkQ2xhc3MoYi5jb3JuZXJzP1widWktY29ybmVyLXRvcFwiOlwiXCIpLmZpbmQoXCIudWktYnRuLWlubmVyXCIpLmFkZENsYXNzKFwidWktY29ybmVyLXRvcFwiKTtjLmxhc3QoKS5qcW1EYXRhKFwiY29sbGFwc2libGUtbGFzdFwiLHRydWUpLmZpbmQoXCJhXCIpLmZpcnN0KCkuYWRkQ2xhc3MoYi5jb3JuZXJzP1widWktY29ybmVyLWJvdHRvbVwiOlwiXCIpLmZpbmQoXCIudWktYnRuLWlubmVyXCIpLmFkZENsYXNzKFwidWktY29ybmVyLWJvdHRvbVwiKX19KTthKGspLmJpbmQoXCJwYWdlY3JlYXRlIGNyZWF0ZVwiLGZ1bmN0aW9uKGIpe2EubW9iaWxlLmNvbGxhcHNpYmxlc2V0LnByb3RvdHlwZS5lbmhhbmNlV2l0aGluKGIudGFyZ2V0KX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oYSxjKXthLndpZGdldChcIm1vYmlsZS5uYXZiYXJcIixhLm1vYmlsZS53aWRnZXQse29wdGlvbnM6e2ljb25wb3M6XCJ0b3BcIixncmlkOm51bGwsaW5pdFNlbGVjdG9yOlwiOmpxbURhdGEocm9sZT0nbmF2YmFyJylcIn0sXG5fY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5lbGVtZW50LGU9Yi5maW5kKFwiYVwiKSxmPWUuZmlsdGVyKFwiOmpxbURhdGEoaWNvbilcIikubGVuZ3RoP3RoaXMub3B0aW9ucy5pY29ucG9zOmM7Yi5hZGRDbGFzcyhcInVpLW5hdmJhclwiKS5hdHRyKFwicm9sZVwiLFwibmF2aWdhdGlvblwiKS5maW5kKFwidWxcIikuanFtRW5oYW5jZWFibGUoKS5ncmlkKHtncmlkOnRoaXMub3B0aW9ucy5ncmlkfSk7Znx8Yi5hZGRDbGFzcyhcInVpLW5hdmJhci1ub2ljb25zXCIpO2UuYnV0dG9uTWFya3VwKHtjb3JuZXJzOmZhbHNlLHNoYWRvdzpmYWxzZSxpbmxpbmU6dHJ1ZSxpY29ucG9zOmZ9KTtiLmRlbGVnYXRlKFwiYVwiLFwidmNsaWNrXCIsZnVuY3Rpb24oYil7YShiLnRhcmdldCkuaGFzQ2xhc3MoXCJ1aS1kaXNhYmxlZFwiKXx8KGUucmVtb3ZlQ2xhc3MoYS5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MpLGEodGhpcykuYWRkQ2xhc3MoYS5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MpKX0pO2IuY2xvc2VzdChcIi51aS1wYWdlXCIpLmJpbmQoXCJwYWdlYmVmb3Jlc2hvd1wiLFxuZnVuY3Rpb24oKXtlLmZpbHRlcihcIi51aS1zdGF0ZS1wZXJzaXN0XCIpLmFkZENsYXNzKGEubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzKX0pfX0pO2EoaykuYmluZChcInBhZ2VjcmVhdGUgY3JlYXRlXCIsZnVuY3Rpb24oYil7YS5tb2JpbGUubmF2YmFyLnByb3RvdHlwZS5lbmhhbmNlV2l0aGluKGIudGFyZ2V0KX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oYSl7dmFyIGM9e307YS53aWRnZXQoXCJtb2JpbGUubGlzdHZpZXdcIixhLm1vYmlsZS53aWRnZXQse29wdGlvbnM6e3RoZW1lOm51bGwsY291bnRUaGVtZTpcImNcIixoZWFkZXJUaGVtZTpcImJcIixkaXZpZGVyVGhlbWU6XCJiXCIsc3BsaXRJY29uOlwiYXJyb3ctclwiLHNwbGl0VGhlbWU6XCJiXCIsbWluaTpmYWxzZSxpbnNldDpmYWxzZSxpbml0U2VsZWN0b3I6XCI6anFtRGF0YShyb2xlPSdsaXN0dmlldycpXCJ9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYT1cIlwiO2ErPXRoaXMub3B0aW9ucy5pbnNldD9cIiB1aS1saXN0dmlldy1pbnNldCB1aS1jb3JuZXItYWxsIHVpLXNoYWRvdyBcIjpcblwiXCI7YSs9dGhpcy5lbGVtZW50LmpxbURhdGEoXCJtaW5pXCIpfHx0aGlzLm9wdGlvbnMubWluaT09PXRydWU/XCIgdWktbWluaVwiOlwiXCI7dGhpcy5lbGVtZW50LmFkZENsYXNzKGZ1bmN0aW9uKGMsZil7cmV0dXJuIGYrXCIgdWktbGlzdHZpZXcgXCIrYX0pO3RoaXMucmVmcmVzaCh0cnVlKX0sX3JlbW92ZUNvcm5lcnM6ZnVuY3Rpb24oYSxjKXthPWEuYWRkKGEuZmluZChcIi51aS1idG4taW5uZXIsIC51aS1saS1saW5rLWFsdCwgLnVpLWxpLXRodW1iXCIpKTtjPT09XCJ0b3BcIj9hLnJlbW92ZUNsYXNzKFwidWktY29ybmVyLXRvcCB1aS1jb3JuZXItdHIgdWktY29ybmVyLXRsXCIpOmM9PT1cImJvdHRvbVwiP2EucmVtb3ZlQ2xhc3MoXCJ1aS1jb3JuZXItYm90dG9tIHVpLWNvcm5lci1iciB1aS1jb3JuZXItYmxcIik6YS5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci10b3AgdWktY29ybmVyLXRyIHVpLWNvcm5lci10bCB1aS1jb3JuZXItYm90dG9tIHVpLWNvcm5lci1iciB1aS1jb3JuZXItYmxcIil9LF9yZWZyZXNoQ29ybmVyczpmdW5jdGlvbihhKXt2YXIgYyxcbmY7dGhpcy5vcHRpb25zLmluc2V0JiYoYz10aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCJsaVwiKSxmPWE/Yy5ub3QoXCIudWktc2NyZWVuLWhpZGRlblwiKTpjLmZpbHRlcihcIjp2aXNpYmxlXCIpLHRoaXMuX3JlbW92ZUNvcm5lcnMoYyksYz1mLmZpcnN0KCkuYWRkQ2xhc3MoXCJ1aS1jb3JuZXItdG9wXCIpLGMuYWRkKGMuZmluZChcIi51aS1idG4taW5uZXJcIikubm90KFwiLnVpLWxpLWxpbmstYWx0IHNwYW46Zmlyc3QtY2hpbGRcIikpLmFkZENsYXNzKFwidWktY29ybmVyLXRvcFwiKS5lbmQoKS5maW5kKFwiLnVpLWxpLWxpbmstYWx0LCAudWktbGktbGluay1hbHQgc3BhbjpmaXJzdC1jaGlsZFwiKS5hZGRDbGFzcyhcInVpLWNvcm5lci10clwiKS5lbmQoKS5maW5kKFwiLnVpLWxpLXRodW1iXCIpLm5vdChcIi51aS1saS1pY29uXCIpLmFkZENsYXNzKFwidWktY29ybmVyLXRsXCIpLGY9Zi5sYXN0KCkuYWRkQ2xhc3MoXCJ1aS1jb3JuZXItYm90dG9tXCIpLGYuYWRkKGYuZmluZChcIi51aS1idG4taW5uZXJcIikpLmZpbmQoXCIudWktbGktbGluay1hbHRcIikuYWRkQ2xhc3MoXCJ1aS1jb3JuZXItYnJcIikuZW5kKCkuZmluZChcIi51aS1saS10aHVtYlwiKS5ub3QoXCIudWktbGktaWNvblwiKS5hZGRDbGFzcyhcInVpLWNvcm5lci1ibFwiKSk7XG5hfHx0aGlzLmVsZW1lbnQudHJpZ2dlcihcInVwZGF0ZWxheW91dFwiKX0sX2ZpbmRGaXJzdEVsZW1lbnRCeVRhZ05hbWU6ZnVuY3Rpb24oYSxjLGYsZCl7dmFyIGc9e307Zm9yKGdbZl09Z1tkXT10cnVlO2E7KXtpZihnW2Eubm9kZU5hbWVdKXJldHVybiBhO2E9YVtjXX1yZXR1cm4gbnVsbH0sX2dldENoaWxkcmVuQnlUYWdOYW1lOmZ1bmN0aW9uKGIsYyxmKXt2YXIgZD1bXSxnPXt9O2dbY109Z1tmXT10cnVlO2ZvcihiPWIuZmlyc3RDaGlsZDtiOylnW2Iubm9kZU5hbWVdJiZkLnB1c2goYiksYj1iLm5leHRTaWJsaW5nO3JldHVybiBhKGQpfSxfYWRkVGh1bWJDbGFzc2VzOmZ1bmN0aW9uKGIpe3ZhciBjLGYsZD1iLmxlbmd0aDtmb3IoYz0wO2M8ZDtjKyspZj1hKHRoaXMuX2ZpbmRGaXJzdEVsZW1lbnRCeVRhZ05hbWUoYltjXS5maXJzdENoaWxkLFwibmV4dFNpYmxpbmdcIixcImltZ1wiLFwiSU1HXCIpKSxmLmxlbmd0aCYmKGYuYWRkQ2xhc3MoXCJ1aS1saS10aHVtYlwiKSxhKHRoaXMuX2ZpbmRGaXJzdEVsZW1lbnRCeVRhZ05hbWUoZlswXS5wYXJlbnROb2RlLFxuXCJwYXJlbnROb2RlXCIsXCJsaVwiLFwiTElcIikpLmFkZENsYXNzKGYuaXMoXCIudWktbGktaWNvblwiKT9cInVpLWxpLWhhcy1pY29uXCI6XCJ1aS1saS1oYXMtdGh1bWJcIikpfSxyZWZyZXNoOmZ1bmN0aW9uKGIpe3RoaXMucGFyZW50UGFnZT10aGlzLmVsZW1lbnQuY2xvc2VzdChcIi51aS1wYWdlXCIpO3RoaXMuX2NyZWF0ZVN1YlBhZ2VzKCk7dmFyIGM9dGhpcy5vcHRpb25zLGY9dGhpcy5lbGVtZW50LGQ9Zi5qcW1EYXRhKFwiZGl2aWRlcnRoZW1lXCIpfHxjLmRpdmlkZXJUaGVtZSxnPWYuanFtRGF0YShcInNwbGl0dGhlbWVcIiksaD1mLmpxbURhdGEoXCJzcGxpdGljb25cIiksaj10aGlzLl9nZXRDaGlsZHJlbkJ5VGFnTmFtZShmWzBdLFwibGlcIixcIkxJXCIpLG89YS5zdXBwb3J0LmNzc1BzZXVkb0VsZW1lbnR8fCFhLm5vZGVOYW1lKGZbMF0sXCJvbFwiKT8wOjEsbT17fSxwLGwscixuLHEsdCx4O28mJmYuZmluZChcIi51aS1saS1kZWNcIikucmVtb3ZlKCk7aWYoIWMudGhlbWUpYy50aGVtZT1hLm1vYmlsZS5nZXRJbmhlcml0ZWRUaGVtZSh0aGlzLmVsZW1lbnQsXG5cImNcIik7Zm9yKHZhciB1PTAsdz1qLmxlbmd0aDt1PHc7dSsrKXtwPWouZXEodSk7bD1cInVpLWxpXCI7aWYoYnx8IXAuaGFzQ2xhc3MoXCJ1aS1saVwiKSlyPXAuanFtRGF0YShcInRoZW1lXCIpfHxjLnRoZW1lLG49dGhpcy5fZ2V0Q2hpbGRyZW5CeVRhZ05hbWUocFswXSxcImFcIixcIkFcIiksbi5sZW5ndGg/KHQ9cC5qcW1EYXRhKFwiaWNvblwiKSxwLmJ1dHRvbk1hcmt1cCh7d3JhcHBlckVsczpcImRpdlwiLHNoYWRvdzpmYWxzZSxjb3JuZXJzOmZhbHNlLGljb25wb3M6XCJyaWdodFwiLGljb246bi5sZW5ndGg+MXx8dD09PWZhbHNlP2ZhbHNlOnR8fFwiYXJyb3ctclwiLHRoZW1lOnJ9KSx0IT1mYWxzZSYmbi5sZW5ndGg9PTEmJnAuYWRkQ2xhc3MoXCJ1aS1saS1oYXMtYXJyb3dcIiksbi5maXJzdCgpLnJlbW92ZUNsYXNzKFwidWktbGlua1wiKS5hZGRDbGFzcyhcInVpLWxpbmstaW5oZXJpdFwiKSxuLmxlbmd0aD4xJiYobCs9XCIgdWktbGktaGFzLWFsdFwiLG49bi5sYXN0KCkscT1nfHxuLmpxbURhdGEoXCJ0aGVtZVwiKXx8XG5jLnNwbGl0VGhlbWUseD1uLmpxbURhdGEoXCJpY29uXCIpLG4uYXBwZW5kVG8ocCkuYXR0cihcInRpdGxlXCIsbi5nZXRFbmNvZGVkVGV4dCgpKS5hZGRDbGFzcyhcInVpLWxpLWxpbmstYWx0XCIpLmVtcHR5KCkuYnV0dG9uTWFya3VwKHtzaGFkb3c6ZmFsc2UsY29ybmVyczpmYWxzZSx0aGVtZTpyLGljb246ZmFsc2UsaWNvbnBvczpmYWxzZX0pLmZpbmQoXCIudWktYnRuLWlubmVyXCIpLmFwcGVuZChhKGsuY3JlYXRlRWxlbWVudChcInNwYW5cIikpLmJ1dHRvbk1hcmt1cCh7c2hhZG93OnRydWUsY29ybmVyczp0cnVlLHRoZW1lOnEsaWNvbnBvczpcIm5vdGV4dFwiLGljb246eHx8dHx8aHx8Yy5zcGxpdEljb259KSkpKTpwLmpxbURhdGEoXCJyb2xlXCIpPT09XCJsaXN0LWRpdmlkZXJcIj8obCs9XCIgdWktbGktZGl2aWRlciB1aS1iYXItXCIrZCxwLmF0dHIoXCJyb2xlXCIsXCJoZWFkaW5nXCIpLG8mJihvPTEpKTpsKz1cIiB1aS1saS1zdGF0aWMgdWktYm9keS1cIityO28mJmwuaW5kZXhPZihcInVpLWxpLWRpdmlkZXJcIik8XG4wJiYocj1wLmlzKFwiLnVpLWxpLXN0YXRpYzpmaXJzdFwiKT9wOnAuZmluZChcIi51aS1saW5rLWluaGVyaXRcIiksci5hZGRDbGFzcyhcInVpLWxpLWpzbnVtYmVyaW5nXCIpLnByZXBlbmQoXCI8c3BhbiBjbGFzcz0ndWktbGktZGVjJz5cIitvKysgK1wiLiA8L3NwYW4+XCIpKTttW2xdfHwobVtsXT1bXSk7bVtsXS5wdXNoKHBbMF0pfWZvcihsIGluIG0pYShtW2xdKS5hZGRDbGFzcyhsKS5jaGlsZHJlbihcIi51aS1idG4taW5uZXJcIikuYWRkQ2xhc3MobCk7Zi5maW5kKFwiaDEsIGgyLCBoMywgaDQsIGg1LCBoNlwiKS5hZGRDbGFzcyhcInVpLWxpLWhlYWRpbmdcIikuZW5kKCkuZmluZChcInAsIGRsXCIpLmFkZENsYXNzKFwidWktbGktZGVzY1wiKS5lbmQoKS5maW5kKFwiLnVpLWxpLWFzaWRlXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpO2IucHJlcGVuZFRvKGIucGFyZW50KCkpfSkuZW5kKCkuZmluZChcIi51aS1saS1jb3VudFwiKS5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS5jbG9zZXN0KFwibGlcIikuYWRkQ2xhc3MoXCJ1aS1saS1oYXMtY291bnRcIil9KS5hZGRDbGFzcyhcInVpLWJ0bi11cC1cIitcbihmLmpxbURhdGEoXCJjb3VudHRoZW1lXCIpfHx0aGlzLm9wdGlvbnMuY291bnRUaGVtZSkrXCIgdWktYnRuLWNvcm5lci1hbGxcIik7dGhpcy5fYWRkVGh1bWJDbGFzc2VzKGopO3RoaXMuX2FkZFRodW1iQ2xhc3NlcyhmLmZpbmQoXCIudWktbGluay1pbmhlcml0XCIpKTt0aGlzLl9yZWZyZXNoQ29ybmVycyhiKX0sX2lkU3RyaW5nRXNjYXBlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLFwiLVwiKX0sX2NyZWF0ZVN1YlBhZ2VzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5lbGVtZW50LGU9Yi5jbG9zZXN0KFwiLnVpLXBhZ2VcIiksZj1lLmpxbURhdGEoXCJ1cmxcIiksZD1mfHxlWzBdW2EuZXhwYW5kb10sZz1iLmF0dHIoXCJpZFwiKSxoPXRoaXMub3B0aW9ucyxqPVwiZGF0YS1cIithLm1vYmlsZS5ucyxrPXRoaXMsbT1lLmZpbmQoXCI6anFtRGF0YShyb2xlPSdmb290ZXInKVwiKS5qcW1EYXRhKFwiaWRcIikscDt0eXBlb2YgY1tkXT09PVwidW5kZWZpbmVkXCImJihjW2RdPS0xKTtnPWd8fFxuKytjW2RdO2EoYi5maW5kKFwibGk+dWwsIGxpPm9sXCIpLnRvQXJyYXkoKS5yZXZlcnNlKCkpLmVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9YSh0aGlzKSxlPWQuYXR0cihcImlkXCIpfHxnK1wiLVwiK2MsYz1kLnBhcmVudCgpLGs9YShkLnByZXZBbGwoKS50b0FycmF5KCkucmV2ZXJzZSgpKSxrPWsubGVuZ3RoP2s6YShcIjxzcGFuPlwiK2EudHJpbShjLmNvbnRlbnRzKClbMF0ubm9kZVZhbHVlKStcIjwvc3Bhbj5cIiksbz1rLmZpcnN0KCkuZ2V0RW5jb2RlZFRleHQoKSxlPShmfHxcIlwiKStcIiZcIithLm1vYmlsZS5zdWJQYWdlVXJsS2V5K1wiPVwiK2UseD1kLmpxbURhdGEoXCJ0aGVtZVwiKXx8aC50aGVtZSx1PWQuanFtRGF0YShcImNvdW50dGhlbWVcIil8fGIuanFtRGF0YShcImNvdW50dGhlbWVcIil8fGguY291bnRUaGVtZTtwPXRydWU7ZC5kZXRhY2goKS53cmFwKFwiPGRpdiBcIitqK1wicm9sZT0ncGFnZScgXCIraitcInVybD0nXCIrZStcIicgXCIraitcInRoZW1lPSdcIit4K1wiJyBcIitqK1wiY291bnQtdGhlbWU9J1wiK3UrXCInPjxkaXYgXCIrXG5qK1wicm9sZT0nY29udGVudCc+PC9kaXY+PC9kaXY+XCIpLnBhcmVudCgpLmJlZm9yZShcIjxkaXYgXCIraitcInJvbGU9J2hlYWRlcicgXCIraitcInRoZW1lPSdcIitoLmhlYWRlclRoZW1lK1wiJz48ZGl2IGNsYXNzPSd1aS10aXRsZSc+XCIrbytcIjwvZGl2PjwvZGl2PlwiKS5hZnRlcihtP2EoXCI8ZGl2IFwiK2orXCJyb2xlPSdmb290ZXInIFwiK2orXCJpZD0nXCIrbStcIic+XCIpOlwiXCIpLnBhcmVudCgpLmFwcGVuZFRvKGEubW9iaWxlLnBhZ2VDb250YWluZXIpLnBhZ2UoKTtkPWMuZmluZChcImE6Zmlyc3RcIik7ZC5sZW5ndGh8fChkPWEoXCI8YS8+XCIpLmh0bWwoa3x8bykucHJlcGVuZFRvKGMuZW1wdHkoKSkpO2QuYXR0cihcImhyZWZcIixcIiNcIitlKX0pLmxpc3R2aWV3KCk7cCYmZS5pcyhcIjpqcW1EYXRhKGV4dGVybmFsLXBhZ2U9J3RydWUnKVwiKSYmZS5kYXRhKFwicGFnZVwiKS5vcHRpb25zLmRvbUNhY2hlPT09ZmFsc2UmJmUudW5iaW5kKFwicGFnZWhpZGUucmVtb3ZlXCIpLmJpbmQoXCJwYWdlaGlkZS5yZW1vdmVcIixmdW5jdGlvbihiLFxuYyl7dmFyIGQ9Yy5uZXh0UGFnZTtjLm5leHRQYWdlJiYoZD1kLmpxbURhdGEoXCJ1cmxcIiksZC5pbmRleE9mKGYrXCImXCIrYS5tb2JpbGUuc3ViUGFnZVVybEtleSkhPT0wJiYoay5jaGlsZFBhZ2VzKCkucmVtb3ZlKCksZS5yZW1vdmUoKSkpfSl9LGNoaWxkUGFnZXM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLnBhcmVudFBhZ2UuanFtRGF0YShcInVybFwiKTtyZXR1cm4gYShcIjpqcW1EYXRhKHVybF49J1wiK2IrXCImXCIrYS5tb2JpbGUuc3ViUGFnZVVybEtleStcIicpXCIpfX0pO2EoaykuYmluZChcInBhZ2VjcmVhdGUgY3JlYXRlXCIsZnVuY3Rpb24oYil7YS5tb2JpbGUubGlzdHZpZXcucHJvdG90eXBlLmVuaGFuY2VXaXRoaW4oYi50YXJnZXQpfSl9KShqUXVlcnkpOyhmdW5jdGlvbihhLGMpe2Eud2lkZ2V0KFwibW9iaWxlLmNoZWNrYm94cmFkaW9cIixhLm1vYmlsZS53aWRnZXQse29wdGlvbnM6e3RoZW1lOm51bGwsaW5pdFNlbGVjdG9yOlwiaW5wdXRbdHlwZT0nY2hlY2tib3gnXSxpbnB1dFt0eXBlPSdyYWRpbyddXCJ9LFxuX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsZT10aGlzLmVsZW1lbnQsZj1hKGUpLmNsb3Nlc3QoXCJsYWJlbFwiKSxkPWYubGVuZ3RoP2Y6YShlKS5jbG9zZXN0KFwiZm9ybSxmaWVsZHNldCw6anFtRGF0YShyb2xlPSdwYWdlJyksOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIikuZmluZChcImxhYmVsXCIpLmZpbHRlcihcIltmb3I9J1wiK2VbMF0uaWQrXCInXVwiKSxnPWVbMF0udHlwZSxmPWUuanFtRGF0YShcIm1pbmlcIil8fGUuY2xvc2VzdChcImZvcm0sZmllbGRzZXRcIikuanFtRGF0YShcIm1pbmlcIiksaD1nK1wiLW9uXCIsaj1nK1wiLW9mZlwiLG89ZS5wYXJlbnRzKFwiOmpxbURhdGEodHlwZT0naG9yaXpvbnRhbCcpXCIpLmxlbmd0aD9jOmosbT1lLmpxbURhdGEoXCJpY29ucG9zXCIpfHxlLmNsb3Nlc3QoXCJmb3JtLGZpZWxkc2V0XCIpLmpxbURhdGEoXCJpY29ucG9zXCIpO2lmKCEoZyE9PVwiY2hlY2tib3hcIiYmZyE9PVwicmFkaW9cIikpe2EuZXh0ZW5kKHRoaXMse2xhYmVsOmQsaW5wdXR0eXBlOmcsY2hlY2tlZENsYXNzOlwidWktXCIrXG5oKyhvP1wiXCI6XCIgXCIrYS5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MpLHVuY2hlY2tlZENsYXNzOlwidWktXCIraixjaGVja2VkaWNvbjpcInVpLWljb24tXCIraCx1bmNoZWNrZWRpY29uOlwidWktaWNvbi1cIitqfSk7aWYoIXRoaXMub3B0aW9ucy50aGVtZSl0aGlzLm9wdGlvbnMudGhlbWU9YS5tb2JpbGUuZ2V0SW5oZXJpdGVkVGhlbWUodGhpcy5lbGVtZW50LFwiY1wiKTtkLmJ1dHRvbk1hcmt1cCh7dGhlbWU6dGhpcy5vcHRpb25zLnRoZW1lLGljb246byxzaGFkb3c6ZmFsc2UsbWluaTpmLGljb25wb3M6bX0pO2Y9ay5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2YuY2xhc3NOYW1lPVwidWktXCIrZztlLmFkZChkKS53cmFwQWxsKGYpO2QuYmluZCh7dm1vdXNlb3ZlcjpmdW5jdGlvbihiKXthKHRoaXMpLnBhcmVudCgpLmlzKFwiLnVpLWRpc2FibGVkXCIpJiZiLnN0b3BQcm9wYWdhdGlvbigpfSx2Y2xpY2s6ZnVuY3Rpb24oYSl7aWYoZS5pcyhcIjpkaXNhYmxlZFwiKSlhLnByZXZlbnREZWZhdWx0KCk7ZWxzZSByZXR1cm4gYi5fY2FjaGVWYWxzKCksXG5lLnByb3AoXCJjaGVja2VkXCIsZz09PVwicmFkaW9cIiYmdHJ1ZXx8IWUucHJvcChcImNoZWNrZWRcIikpLGUudHJpZ2dlckhhbmRsZXIoXCJjbGlja1wiKSxiLl9nZXRJbnB1dFNldCgpLm5vdChlKS5wcm9wKFwiY2hlY2tlZFwiLGZhbHNlKSxiLl91cGRhdGVBbGwoKSxmYWxzZX19KTtlLmJpbmQoe3Ztb3VzZWRvd246ZnVuY3Rpb24oKXtiLl9jYWNoZVZhbHMoKX0sdmNsaWNrOmZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKTtjLmlzKFwiOmNoZWNrZWRcIik/KGMucHJvcChcImNoZWNrZWRcIix0cnVlKSxiLl9nZXRJbnB1dFNldCgpLm5vdChjKS5wcm9wKFwiY2hlY2tlZFwiLGZhbHNlKSk6Yy5wcm9wKFwiY2hlY2tlZFwiLGZhbHNlKTtiLl91cGRhdGVBbGwoKX0sZm9jdXM6ZnVuY3Rpb24oKXtkLmFkZENsYXNzKGEubW9iaWxlLmZvY3VzQ2xhc3MpfSxibHVyOmZ1bmN0aW9uKCl7ZC5yZW1vdmVDbGFzcyhhLm1vYmlsZS5mb2N1c0NsYXNzKX19KTt0aGlzLnJlZnJlc2goKX19LF9jYWNoZVZhbHM6ZnVuY3Rpb24oKXt0aGlzLl9nZXRJbnB1dFNldCgpLmVhY2goZnVuY3Rpb24oKXthKHRoaXMpLmpxbURhdGEoXCJjYWNoZVZhbFwiLFxudGhpcy5jaGVja2VkKX0pfSxfZ2V0SW5wdXRTZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dHR5cGU9PT1cImNoZWNrYm94XCI/dGhpcy5lbGVtZW50OnRoaXMuZWxlbWVudC5jbG9zZXN0KFwiZm9ybSxmaWVsZHNldCw6anFtRGF0YShyb2xlPSdwYWdlJylcIikuZmluZChcImlucHV0W25hbWU9J1wiK3RoaXMuZWxlbWVudFswXS5uYW1lK1wiJ11bdHlwZT0nXCIrdGhpcy5pbnB1dHR5cGUrXCInXVwiKX0sX3VwZGF0ZUFsbDpmdW5jdGlvbigpe3ZhciBiPXRoaXM7dGhpcy5fZ2V0SW5wdXRTZXQoKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKTsodGhpcy5jaGVja2VkfHxiLmlucHV0dHlwZT09PVwiY2hlY2tib3hcIikmJmMudHJpZ2dlcihcImNoYW5nZVwiKX0pLmNoZWNrYm94cmFkaW8oXCJyZWZyZXNoXCIpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50WzBdLGM9dGhpcy5sYWJlbCxmPWMuZmluZChcIi51aS1pY29uXCIpO2EuY2hlY2tlZD8oYy5hZGRDbGFzcyh0aGlzLmNoZWNrZWRDbGFzcykucmVtb3ZlQ2xhc3ModGhpcy51bmNoZWNrZWRDbGFzcyksXG5mLmFkZENsYXNzKHRoaXMuY2hlY2tlZGljb24pLnJlbW92ZUNsYXNzKHRoaXMudW5jaGVja2VkaWNvbikpOihjLnJlbW92ZUNsYXNzKHRoaXMuY2hlY2tlZENsYXNzKS5hZGRDbGFzcyh0aGlzLnVuY2hlY2tlZENsYXNzKSxmLnJlbW92ZUNsYXNzKHRoaXMuY2hlY2tlZGljb24pLmFkZENsYXNzKHRoaXMudW5jaGVja2VkaWNvbikpO2EuZGlzYWJsZWQ/dGhpcy5kaXNhYmxlKCk6dGhpcy5lbmFibGUoKX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5wcm9wKFwiZGlzYWJsZWRcIix0cnVlKS5wYXJlbnQoKS5hZGRDbGFzcyhcInVpLWRpc2FibGVkXCIpfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucHJvcChcImRpc2FibGVkXCIsZmFsc2UpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwidWktZGlzYWJsZWRcIil9fSk7YShrKS5iaW5kKFwicGFnZWNyZWF0ZSBjcmVhdGVcIixmdW5jdGlvbihiKXthLm1vYmlsZS5jaGVja2JveHJhZGlvLnByb3RvdHlwZS5lbmhhbmNlV2l0aGluKGIudGFyZ2V0LFxudHJ1ZSl9KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGEsYyl7YS53aWRnZXQoXCJtb2JpbGUuYnV0dG9uXCIsYS5tb2JpbGUud2lkZ2V0LHtvcHRpb25zOnt0aGVtZTpudWxsLGljb246bnVsbCxpY29ucG9zOm51bGwsaW5saW5lOmZhbHNlLGNvcm5lcnM6dHJ1ZSxzaGFkb3c6dHJ1ZSxpY29uc2hhZG93OnRydWUsaW5pdFNlbGVjdG9yOlwiYnV0dG9uLCBbdHlwZT0nYnV0dG9uJ10sIFt0eXBlPSdzdWJtaXQnXSwgW3R5cGU9J3Jlc2V0J10sIFt0eXBlPSdpbWFnZSddXCIsbWluaTpmYWxzZX0sX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZWxlbWVudCxlLGY9dGhpcy5vcHRpb25zLGQ7ZD1cIlwiO3ZhciBnO2lmKGJbMF0udGFnTmFtZT09PVwiQVwiKSFiLmhhc0NsYXNzKFwidWktYnRuXCIpJiZiLmJ1dHRvbk1hcmt1cCgpO2Vsc2V7aWYoIXRoaXMub3B0aW9ucy50aGVtZSl0aGlzLm9wdGlvbnMudGhlbWU9YS5tb2JpbGUuZ2V0SW5oZXJpdGVkVGhlbWUodGhpcy5lbGVtZW50LFwiY1wiKTt+YlswXS5jbGFzc05hbWUuaW5kZXhPZihcInVpLWJ0bi1sZWZ0XCIpJiZcbihkPVwidWktYnRuLWxlZnRcIik7fmJbMF0uY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1idG4tcmlnaHRcIikmJihkPVwidWktYnRuLXJpZ2h0XCIpO2U9dGhpcy5idXR0b249YShcIjxkaXY+PC9kaXY+XCIpLnRleHQoYi50ZXh0KCl8fGIudmFsKCkpLmluc2VydEJlZm9yZShiKS5idXR0b25NYXJrdXAoe3RoZW1lOmYudGhlbWUsaWNvbjpmLmljb24saWNvbnBvczpmLmljb25wb3MsaW5saW5lOmYuaW5saW5lLGNvcm5lcnM6Zi5jb3JuZXJzLHNoYWRvdzpmLnNoYWRvdyxpY29uc2hhZG93OmYuaWNvbnNoYWRvdyxtaW5pOmYubWluaX0pLmFkZENsYXNzKGQpLmFwcGVuZChiLmFkZENsYXNzKFwidWktYnRuLWhpZGRlblwiKSk7Zj1iLmF0dHIoXCJ0eXBlXCIpO2Q9Yi5hdHRyKFwibmFtZVwiKTtmIT09XCJidXR0b25cIiYmZiE9PVwicmVzZXRcIiYmZCYmYi5iaW5kKFwidmNsaWNrXCIsZnVuY3Rpb24oKXtnPT09YyYmKGc9YShcIjxpbnB1dD5cIix7dHlwZTpcImhpZGRlblwiLG5hbWU6Yi5hdHRyKFwibmFtZVwiKSx2YWx1ZTpiLmF0dHIoXCJ2YWx1ZVwiKX0pLmluc2VydEJlZm9yZShiKSxcbmEoaykub25lKFwic3VibWl0XCIsZnVuY3Rpb24oKXtnLnJlbW92ZSgpO2c9Y30pKX0pO2IuYmluZCh7Zm9jdXM6ZnVuY3Rpb24oKXtlLmFkZENsYXNzKGEubW9iaWxlLmZvY3VzQ2xhc3MpfSxibHVyOmZ1bmN0aW9uKCl7ZS5yZW1vdmVDbGFzcyhhLm1vYmlsZS5mb2N1c0NsYXNzKX19KTt0aGlzLnJlZnJlc2goKX19LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIixmYWxzZSk7dGhpcy5idXR0b24ucmVtb3ZlQ2xhc3MoXCJ1aS1kaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLGZhbHNlKTtyZXR1cm4gdGhpcy5fc2V0T3B0aW9uKFwiZGlzYWJsZWRcIixmYWxzZSl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuYXR0cihcImRpc2FibGVkXCIsdHJ1ZSk7dGhpcy5idXR0b24uYWRkQ2xhc3MoXCJ1aS1kaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLHRydWUpO3JldHVybiB0aGlzLl9zZXRPcHRpb24oXCJkaXNhYmxlZFwiLHRydWUpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGI9XG50aGlzLmVsZW1lbnQ7Yi5wcm9wKFwiZGlzYWJsZWRcIik/dGhpcy5kaXNhYmxlKCk6dGhpcy5lbmFibGUoKTthKHRoaXMuYnV0dG9uLmRhdGEoXCJidXR0b25FbGVtZW50c1wiKS50ZXh0KS50ZXh0KGIudGV4dCgpfHxiLnZhbCgpKX19KTthKGspLmJpbmQoXCJwYWdlY3JlYXRlIGNyZWF0ZVwiLGZ1bmN0aW9uKGIpe2EubW9iaWxlLmJ1dHRvbi5wcm90b3R5cGUuZW5oYW5jZVdpdGhpbihiLnRhcmdldCx0cnVlKX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oYSl7YS5mbi5jb250cm9sZ3JvdXA9ZnVuY3Rpb24oYyl7ZnVuY3Rpb24gYihhLGIpe2EucmVtb3ZlQ2xhc3MoXCJ1aS1idG4tY29ybmVyLWFsbCB1aS1zaGFkb3dcIikuZXEoMCkuYWRkQ2xhc3MoYlswXSkuZW5kKCkubGFzdCgpLmFkZENsYXNzKGJbMV0pLmFkZENsYXNzKFwidWktY29udHJvbGdyb3VwLWxhc3RcIil9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPWEodGhpcyksZj1hLmV4dGVuZCh7ZGlyZWN0aW9uOmUuanFtRGF0YShcInR5cGVcIil8fFxuXCJ2ZXJ0aWNhbFwiLHNoYWRvdzpmYWxzZSxleGNsdWRlSW52aXNpYmxlOnRydWUsbWluaTplLmpxbURhdGEoXCJtaW5pXCIpfSxjKSxkPWUuY2hpbGRyZW4oXCJsZWdlbmRcIiksZz1mLmRpcmVjdGlvbj09XCJob3Jpem9udGFsXCI/W1widWktY29ybmVyLWxlZnRcIixcInVpLWNvcm5lci1yaWdodFwiXTpbXCJ1aS1jb3JuZXItdG9wXCIsXCJ1aS1jb3JuZXItYm90dG9tXCJdO2UuZmluZChcImlucHV0XCIpLmZpcnN0KCkuYXR0cihcInR5cGVcIik7ZC5sZW5ndGgmJihlLndyYXBJbm5lcihcIjxkaXYgY2xhc3M9J3VpLWNvbnRyb2xncm91cC1jb250cm9scyc+PC9kaXY+XCIpLGEoXCI8ZGl2IHJvbGU9J2hlYWRpbmcnIGNsYXNzPSd1aS1jb250cm9sZ3JvdXAtbGFiZWwnPlwiK2QuaHRtbCgpK1wiPC9kaXY+XCIpLmluc2VydEJlZm9yZShlLmNoaWxkcmVuKDApKSxkLnJlbW92ZSgpKTtlLmFkZENsYXNzKFwidWktY29ybmVyLWFsbCB1aS1jb250cm9sZ3JvdXAgdWktY29udHJvbGdyb3VwLVwiK2YuZGlyZWN0aW9uKTtiKGUuZmluZChcIi51aS1idG5cIitcbihmLmV4Y2x1ZGVJbnZpc2libGU/XCI6dmlzaWJsZVwiOlwiXCIpKS5ub3QoXCIudWktc2xpZGVyLWhhbmRsZVwiKSxnKTtiKGUuZmluZChcIi51aS1idG4taW5uZXJcIiksZyk7Zi5zaGFkb3cmJmUuYWRkQ2xhc3MoXCJ1aS1zaGFkb3dcIik7Zi5taW5pJiZlLmFkZENsYXNzKFwidWktbWluaVwiKX0pfX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGEpe2EoaykuYmluZChcInBhZ2VjcmVhdGUgY3JlYXRlXCIsZnVuY3Rpb24oYyl7YShjLnRhcmdldCkuZmluZChcImFcIikuanFtRW5oYW5jZWFibGUoKS5ub3QoXCIudWktYnRuLCAudWktbGluay1pbmhlcml0LCA6anFtRGF0YShyb2xlPSdub25lJyksIDpqcW1EYXRhKHJvbGU9J25vanMnKVwiKS5hZGRDbGFzcyhcInVpLWxpbmtcIil9KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGEpe3ZhciBjPWEoXCJtZXRhW25hbWU9dmlld3BvcnRdXCIpLGI9Yy5hdHRyKFwiY29udGVudFwiKSxlPWIrXCIsbWF4aW11bS1zY2FsZT0xLCB1c2VyLXNjYWxhYmxlPW5vXCIsZj1iK1wiLG1heGltdW0tc2NhbGU9MTAsIHVzZXItc2NhbGFibGU9eWVzXCIsXG5kPS8odXNlci1zY2FsYWJsZVtcXHNdKj1bXFxzXSpubyl8KG1heGltdW0tc2NhbGVbXFxzXSo9W1xcc10qMSlbJCxcXHNdLy50ZXN0KGIpO2EubW9iaWxlLnpvb209YS5leHRlbmQoe30se2VuYWJsZWQ6IWQsbG9ja2VkOmZhbHNlLGRpc2FibGU6ZnVuY3Rpb24oYil7aWYoIWQmJiFhLm1vYmlsZS56b29tLmxvY2tlZCljLmF0dHIoXCJjb250ZW50XCIsZSksYS5tb2JpbGUuem9vbS5lbmFibGVkPWZhbHNlLGEubW9iaWxlLnpvb20ubG9ja2VkPWJ8fGZhbHNlfSxlbmFibGU6ZnVuY3Rpb24oYil7aWYoIWQmJighYS5tb2JpbGUuem9vbS5sb2NrZWR8fGI9PT10cnVlKSljLmF0dHIoXCJjb250ZW50XCIsZiksYS5tb2JpbGUuem9vbS5lbmFibGVkPXRydWUsYS5tb2JpbGUuem9vbS5sb2NrZWQ9ZmFsc2V9LHJlc3RvcmU6ZnVuY3Rpb24oKXtpZighZCljLmF0dHIoXCJjb250ZW50XCIsYiksYS5tb2JpbGUuem9vbS5lbmFibGVkPXRydWV9fSl9KShqUXVlcnkpOyhmdW5jdGlvbihhKXthLndpZGdldChcIm1vYmlsZS50ZXh0aW5wdXRcIixcbmEubW9iaWxlLndpZGdldCx7b3B0aW9uczp7dGhlbWU6bnVsbCxwcmV2ZW50Rm9jdXNab29tOi9pUGhvbmV8aVBhZHxpUG9kLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSkmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkFwcGxlV2ViS2l0XCIpPi0xLGluaXRTZWxlY3RvcjpcImlucHV0W3R5cGU9J3RleHQnXSwgaW5wdXRbdHlwZT0nc2VhcmNoJ10sIDpqcW1EYXRhKHR5cGU9J3NlYXJjaCcpLCBpbnB1dFt0eXBlPSdudW1iZXInXSwgOmpxbURhdGEodHlwZT0nbnVtYmVyJyksIGlucHV0W3R5cGU9J3Bhc3N3b3JkJ10sIGlucHV0W3R5cGU9J2VtYWlsJ10sIGlucHV0W3R5cGU9J3VybCddLCBpbnB1dFt0eXBlPSd0ZWwnXSwgdGV4dGFyZWEsIGlucHV0W3R5cGU9J3RpbWUnXSwgaW5wdXRbdHlwZT0nZGF0ZSddLCBpbnB1dFt0eXBlPSdtb250aCddLCBpbnB1dFt0eXBlPSd3ZWVrJ10sIGlucHV0W3R5cGU9J2RhdGV0aW1lJ10sIGlucHV0W3R5cGU9J2RhdGV0aW1lLWxvY2FsJ10sIGlucHV0W3R5cGU9J2NvbG9yJ10sIGlucHV0Om5vdChbdHlwZV0pXCIsXG5jbGVhclNlYXJjaEJ1dHRvblRleHQ6XCJjbGVhciB0ZXh0XCJ9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmVsZW1lbnQsYj10aGlzLm9wdGlvbnMsZT1iLnRoZW1lfHxhLm1vYmlsZS5nZXRJbmhlcml0ZWRUaGVtZSh0aGlzLmVsZW1lbnQsXCJjXCIpLGY9XCIgdWktYm9keS1cIitlLGQ9Yy5qcW1EYXRhKFwibWluaVwiKT09dHJ1ZSxnPWQ/XCIgdWktbWluaVwiOlwiXCIsaCxqO2EoXCJsYWJlbFtmb3I9J1wiK2MuYXR0cihcImlkXCIpK1wiJ11cIikuYWRkQ2xhc3MoXCJ1aS1pbnB1dC10ZXh0XCIpO2g9Yy5hZGRDbGFzcyhcInVpLWlucHV0LXRleHQgdWktYm9keS1cIitlKTt0eXBlb2YgY1swXS5hdXRvY29ycmVjdCE9PVwidW5kZWZpbmVkXCImJiFhLnN1cHBvcnQudG91Y2hPdmVyZmxvdyYmKGNbMF0uc2V0QXR0cmlidXRlKFwiYXV0b2NvcnJlY3RcIixcIm9mZlwiKSxjWzBdLnNldEF0dHJpYnV0ZShcImF1dG9jb21wbGV0ZVwiLFwib2ZmXCIpKTtjLmlzKFwiW3R5cGU9J3NlYXJjaCddLDpqcW1EYXRhKHR5cGU9J3NlYXJjaCcpXCIpP1xuKGg9Yy53cmFwKFwiPGRpdiBjbGFzcz0ndWktaW5wdXQtc2VhcmNoIHVpLXNoYWRvdy1pbnNldCB1aS1idG4tY29ybmVyLWFsbCB1aS1idG4tc2hhZG93IHVpLWljb24tc2VhcmNoZmllbGRcIitmK2crXCInPjwvZGl2PlwiKS5wYXJlbnQoKSxqPWEoXCI8YSBocmVmPScjJyBjbGFzcz0ndWktaW5wdXQtY2xlYXInIHRpdGxlPSdcIitiLmNsZWFyU2VhcmNoQnV0dG9uVGV4dCtcIic+XCIrYi5jbGVhclNlYXJjaEJ1dHRvblRleHQrXCI8L2E+XCIpLmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2MudmFsKFwiXCIpLmZvY3VzKCkudHJpZ2dlcihcImNoYW5nZVwiKTtqLmFkZENsYXNzKFwidWktaW5wdXQtY2xlYXItaGlkZGVuXCIpO2EucHJldmVudERlZmF1bHQoKX0pLmFwcGVuZFRvKGgpLmJ1dHRvbk1hcmt1cCh7aWNvbjpcImRlbGV0ZVwiLGljb25wb3M6XCJub3RleHRcIixjb3JuZXJzOnRydWUsc2hhZG93OnRydWUsbWluaTpkfSksZT1mdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtqLnRvZ2dsZUNsYXNzKFwidWktaW5wdXQtY2xlYXItaGlkZGVuXCIsXG4hYy52YWwoKSl9LDApfSxlKCksYy5iaW5kKFwicGFzdGUgY3V0IGtleXVwIGZvY3VzIGNoYW5nZSBibHVyXCIsZSkpOmMuYWRkQ2xhc3MoXCJ1aS1jb3JuZXItYWxsIHVpLXNoYWRvdy1pbnNldFwiK2YrZyk7Yy5mb2N1cyhmdW5jdGlvbigpe2guYWRkQ2xhc3MoYS5tb2JpbGUuZm9jdXNDbGFzcyl9KS5ibHVyKGZ1bmN0aW9uKCl7aC5yZW1vdmVDbGFzcyhhLm1vYmlsZS5mb2N1c0NsYXNzKX0pLmJpbmQoXCJmb2N1c1wiLGZ1bmN0aW9uKCl7Yi5wcmV2ZW50Rm9jdXNab29tJiZhLm1vYmlsZS56b29tLmRpc2FibGUodHJ1ZSl9KS5iaW5kKFwiYmx1clwiLGZ1bmN0aW9uKCl7Yi5wcmV2ZW50Rm9jdXNab29tJiZhLm1vYmlsZS56b29tLmVuYWJsZSh0cnVlKX0pO2lmKGMuaXMoXCJ0ZXh0YXJlYVwiKSl7dmFyIG89ZnVuY3Rpb24oKXt2YXIgYT1jWzBdLnNjcm9sbEhlaWdodDtjWzBdLmNsaWVudEhlaWdodDxhJiZjLmhlaWdodChhKzE1KX0sbTtjLmtleXVwKGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KG0pO1xubT1zZXRUaW1lb3V0KG8sMTAwKX0pO2Eoaykub25lKFwicGFnZWNoYW5nZVwiLG8pO2EudHJpbShjLnZhbCgpKSYmYShzKS5sb2FkKG8pfX0sZGlzYWJsZTpmdW5jdGlvbigpeyh0aGlzLmVsZW1lbnQuYXR0cihcImRpc2FibGVkXCIsdHJ1ZSkuaXMoXCJbdHlwZT0nc2VhcmNoJ10sOmpxbURhdGEodHlwZT0nc2VhcmNoJylcIik/dGhpcy5lbGVtZW50LnBhcmVudCgpOnRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoXCJ1aS1kaXNhYmxlZFwiKX0sZW5hYmxlOmZ1bmN0aW9uKCl7KHRoaXMuZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIixmYWxzZSkuaXMoXCJbdHlwZT0nc2VhcmNoJ10sOmpxbURhdGEodHlwZT0nc2VhcmNoJylcIik/dGhpcy5lbGVtZW50LnBhcmVudCgpOnRoaXMuZWxlbWVudCkucmVtb3ZlQ2xhc3MoXCJ1aS1kaXNhYmxlZFwiKX19KTthKGspLmJpbmQoXCJwYWdlY3JlYXRlIGNyZWF0ZVwiLGZ1bmN0aW9uKGMpe2EubW9iaWxlLnRleHRpbnB1dC5wcm90b3R5cGUuZW5oYW5jZVdpdGhpbihjLnRhcmdldCxcbnRydWUpfSl9KShqUXVlcnkpOyhmdW5jdGlvbihhKXthLm1vYmlsZS5saXN0dmlldy5wcm90b3R5cGUub3B0aW9ucy5maWx0ZXI9ZmFsc2U7YS5tb2JpbGUubGlzdHZpZXcucHJvdG90eXBlLm9wdGlvbnMuZmlsdGVyUGxhY2Vob2xkZXI9XCJGaWx0ZXIgaXRlbXMuLi5cIjthLm1vYmlsZS5saXN0dmlldy5wcm90b3R5cGUub3B0aW9ucy5maWx0ZXJUaGVtZT1cImNcIjthLm1vYmlsZS5saXN0dmlldy5wcm90b3R5cGUub3B0aW9ucy5maWx0ZXJDYWxsYmFjaz1mdW5jdGlvbihhLGIpe3JldHVybiBhLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihiKT09PS0xfTthKGspLmRlbGVnYXRlKFwiOmpxbURhdGEocm9sZT0nbGlzdHZpZXcnKVwiLFwibGlzdHZpZXdjcmVhdGVcIixmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksYj1jLmRhdGEoXCJsaXN0dmlld1wiKTtpZihiLm9wdGlvbnMuZmlsdGVyKXt2YXIgZT1hKFwiPGZvcm0+XCIse1wiY2xhc3NcIjpcInVpLWxpc3R2aWV3LWZpbHRlciB1aS1iYXItXCIrYi5vcHRpb25zLmZpbHRlclRoZW1lLFxucm9sZTpcInNlYXJjaFwifSk7YShcIjxpbnB1dD5cIix7cGxhY2Vob2xkZXI6Yi5vcHRpb25zLmZpbHRlclBsYWNlaG9sZGVyfSkuYXR0cihcImRhdGEtXCIrYS5tb2JpbGUubnMrXCJ0eXBlXCIsXCJzZWFyY2hcIikuanFtRGF0YShcImxhc3R2YWxcIixcIlwiKS5iaW5kKFwia2V5dXAgY2hhbmdlXCIsZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMpLGQ9dGhpcy52YWx1ZS50b0xvd2VyQ2FzZSgpLGc9bnVsbCxnPWUuanFtRGF0YShcImxhc3R2YWxcIikrXCJcIixoPWZhbHNlLGo9XCJcIjtlLmpxbURhdGEoXCJsYXN0dmFsXCIsZCk7Zz1kLmxlbmd0aDxnLmxlbmd0aHx8ZC5pbmRleE9mKGcpIT09MD9jLmNoaWxkcmVuKCk6Yy5jaGlsZHJlbihcIjpub3QoLnVpLXNjcmVlbi1oaWRkZW4pXCIpO2lmKGQpe2Zvcih2YXIgaz1nLmxlbmd0aC0xO2s+PTA7ay0tKWU9YShnW2tdKSxqPWUuanFtRGF0YShcImZpbHRlcnRleHRcIil8fGUudGV4dCgpLGUuaXMoXCJsaTpqcW1EYXRhKHJvbGU9bGlzdC1kaXZpZGVyKVwiKT8oZS50b2dnbGVDbGFzcyhcInVpLWZpbHRlci1oaWRlcXVldWVcIixcbiFoKSxoPWZhbHNlKTpiLm9wdGlvbnMuZmlsdGVyQ2FsbGJhY2soaixkKT9lLnRvZ2dsZUNsYXNzKFwidWktZmlsdGVyLWhpZGVxdWV1ZVwiLHRydWUpOmg9dHJ1ZTtnLmZpbHRlcihcIjpub3QoLnVpLWZpbHRlci1oaWRlcXVldWUpXCIpLnRvZ2dsZUNsYXNzKFwidWktc2NyZWVuLWhpZGRlblwiLGZhbHNlKTtnLmZpbHRlcihcIi51aS1maWx0ZXItaGlkZXF1ZXVlXCIpLnRvZ2dsZUNsYXNzKFwidWktc2NyZWVuLWhpZGRlblwiLHRydWUpLnRvZ2dsZUNsYXNzKFwidWktZmlsdGVyLWhpZGVxdWV1ZVwiLGZhbHNlKX1lbHNlIGcudG9nZ2xlQ2xhc3MoXCJ1aS1zY3JlZW4taGlkZGVuXCIsZmFsc2UpO2IuX3JlZnJlc2hDb3JuZXJzKCl9KS5hcHBlbmRUbyhlKS50ZXh0aW5wdXQoKTtiLm9wdGlvbnMuaW5zZXQmJmUuYWRkQ2xhc3MoXCJ1aS1saXN0dmlldy1maWx0ZXItaW5zZXRcIik7ZS5iaW5kKFwic3VibWl0XCIsZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9KS5pbnNlcnRCZWZvcmUoYyl9fSl9KShqUXVlcnkpOyhmdW5jdGlvbihhLFxuYyl7YS53aWRnZXQoXCJtb2JpbGUuc2xpZGVyXCIsYS5tb2JpbGUud2lkZ2V0LHtvcHRpb25zOnt0aGVtZTpudWxsLHRyYWNrVGhlbWU6bnVsbCxkaXNhYmxlZDpmYWxzZSxpbml0U2VsZWN0b3I6XCJpbnB1dFt0eXBlPSdyYW5nZSddLCA6anFtRGF0YSh0eXBlPSdyYW5nZScpLCA6anFtRGF0YShyb2xlPSdzbGlkZXInKVwiLG1pbmk6ZmFsc2V9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGU9dGhpcy5lbGVtZW50LGY9YS5tb2JpbGUuZ2V0SW5oZXJpdGVkVGhlbWUoZSxcImNcIiksZD10aGlzLm9wdGlvbnMudGhlbWV8fGYsZj10aGlzLm9wdGlvbnMudHJhY2tUaGVtZXx8ZixnPWVbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxoPWc9PVwic2VsZWN0XCI/XCJ1aS1zbGlkZXItc3dpdGNoXCI6XCJcIixqPWUuYXR0cihcImlkXCIpLG89aitcIi1sYWJlbFwiLGo9YShcIltmb3I9J1wiK2orXCInXVwiKS5hdHRyKFwiaWRcIixvKSxtPWZ1bmN0aW9uKCl7cmV0dXJuIGc9PVwiaW5wdXRcIj9wYXJzZUZsb2F0KGUudmFsKCkpOlxuZVswXS5zZWxlY3RlZEluZGV4fSxwPWc9PVwiaW5wdXRcIj9wYXJzZUZsb2F0KGUuYXR0cihcIm1pblwiKSk6MCxsPWc9PVwiaW5wdXRcIj9wYXJzZUZsb2F0KGUuYXR0cihcIm1heFwiKSk6ZS5maW5kKFwib3B0aW9uXCIpLmxlbmd0aC0xLHI9cy5wYXJzZUZsb2F0KGUuYXR0cihcInN0ZXBcIil8fDEpLG49dGhpcy5vcHRpb25zLmlubGluZXx8ZS5qcW1EYXRhKFwiaW5saW5lXCIpPT10cnVlP1wiIHVpLXNsaWRlci1pbmxpbmVcIjpcIlwiLHE9dGhpcy5vcHRpb25zLm1pbml8fGUuanFtRGF0YShcIm1pbmlcIik/XCIgdWktc2xpZGVyLW1pbmlcIjpcIlwiLHQ9ay5jcmVhdGVFbGVtZW50KFwiYVwiKSx4PWEodCksdT1rLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdz1hKHUpLHY9ZS5qcW1EYXRhKFwiaGlnaGxpZ2h0XCIpJiZnIT1cInNlbGVjdFwiP2Z1bmN0aW9uKCl7dmFyIGI9ay5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2IuY2xhc3NOYW1lPVwidWktc2xpZGVyLWJnIHVpLWJ0bi1hY3RpdmUgdWktYnRuLWNvcm5lci1hbGxcIjtyZXR1cm4gYShiKS5wcmVwZW5kVG8odyl9KCk6XG5mYWxzZTt0LnNldEF0dHJpYnV0ZShcImhyZWZcIixcIiNcIik7dS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJhcHBsaWNhdGlvblwiKTt1LmNsYXNzTmFtZT1bXCJ1aS1zbGlkZXIgXCIsaCxcIiB1aS1idG4tZG93bi1cIixmLFwiIHVpLWJ0bi1jb3JuZXItYWxsXCIsbixxXS5qb2luKFwiXCIpO3QuY2xhc3NOYW1lPVwidWktc2xpZGVyLWhhbmRsZVwiO3UuYXBwZW5kQ2hpbGQodCk7eC5idXR0b25NYXJrdXAoe2Nvcm5lcnM6dHJ1ZSx0aGVtZTpkLHNoYWRvdzp0cnVlfSkuYXR0cih7cm9sZTpcInNsaWRlclwiLFwiYXJpYS12YWx1ZW1pblwiOnAsXCJhcmlhLXZhbHVlbWF4XCI6bCxcImFyaWEtdmFsdWVub3dcIjptKCksXCJhcmlhLXZhbHVldGV4dFwiOm0oKSx0aXRsZTptKCksXCJhcmlhLWxhYmVsbGVkYnlcIjpvfSk7YS5leHRlbmQodGhpcyx7c2xpZGVyOncsaGFuZGxlOngsdmFsdWViZzp2LGRyYWdnaW5nOmZhbHNlLGJlZm9yZVN0YXJ0Om51bGwsdXNlck1vZGlmaWVkOmZhbHNlLG1vdXNlTW92ZWQ6ZmFsc2V9KTtpZihnPT1cInNlbGVjdFwiKXtkPVxuay5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2QuY2xhc3NOYW1lPVwidWktc2xpZGVyLWlubmVyb2Zmc2V0XCI7aD0wO2ZvcihvPXUuY2hpbGROb2Rlcy5sZW5ndGg7aDxvO2grKylkLmFwcGVuZENoaWxkKHUuY2hpbGROb2Rlc1toXSk7dS5hcHBlbmRDaGlsZChkKTt4LmFkZENsYXNzKFwidWktc2xpZGVyLWhhbmRsZS1zbmFwcGluZ1wiKTt1PWUuZmluZChcIm9wdGlvblwiKTtkPTA7Zm9yKGg9dS5sZW5ndGg7ZDxoO2QrKylvPSFkP1wiYlwiOlwiYVwiLG49IWQ/XCIgdWktYnRuLWRvd24tXCIrZjpcIiBcIithLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyxrLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikscT1rLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHEuY2xhc3NOYW1lPVtcInVpLXNsaWRlci1sYWJlbCB1aS1zbGlkZXItbGFiZWwtXCIsbyxuLFwiIHVpLWJ0bi1jb3JuZXItYWxsXCJdLmpvaW4oXCJcIikscS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJpbWdcIikscS5hcHBlbmRDaGlsZChrLmNyZWF0ZVRleHROb2RlKHVbZF0uaW5uZXJIVE1MKSksXG5hKHEpLnByZXBlbmRUbyh3KTtiLl9sYWJlbHM9YShcIi51aS1zbGlkZXItbGFiZWxcIix3KX1qLmFkZENsYXNzKFwidWktc2xpZGVyXCIpO2UuYWRkQ2xhc3MoZz09PVwiaW5wdXRcIj9cInVpLXNsaWRlci1pbnB1dFwiOlwidWktc2xpZGVyLXN3aXRjaFwiKS5jaGFuZ2UoZnVuY3Rpb24oKXtiLm1vdXNlTW92ZWR8fGIucmVmcmVzaChtKCksdHJ1ZSl9KS5rZXl1cChmdW5jdGlvbigpe2IucmVmcmVzaChtKCksdHJ1ZSx0cnVlKX0pLmJsdXIoZnVuY3Rpb24oKXtiLnJlZnJlc2gobSgpLHRydWUpfSk7YShrKS5iaW5kKFwidm1vdXNlbW92ZVwiLGZ1bmN0aW9uKGEpe2lmKGIuZHJhZ2dpbmcpcmV0dXJuIGIubW91c2VNb3ZlZD10cnVlLGc9PT1cInNlbGVjdFwiJiZ4LnJlbW92ZUNsYXNzKFwidWktc2xpZGVyLWhhbmRsZS1zbmFwcGluZ1wiKSxiLnJlZnJlc2goYSksYi51c2VyTW9kaWZpZWQ9Yi5iZWZvcmVTdGFydCE9PWVbMF0uc2VsZWN0ZWRJbmRleCxmYWxzZX0pO3cuYmluZChcInZtb3VzZWRvd25cIixmdW5jdGlvbihhKXtiLmRyYWdnaW5nPVxudHJ1ZTtiLnVzZXJNb2RpZmllZD1mYWxzZTtiLm1vdXNlTW92ZWQ9ZmFsc2U7aWYoZz09PVwic2VsZWN0XCIpYi5iZWZvcmVTdGFydD1lWzBdLnNlbGVjdGVkSW5kZXg7Yi5yZWZyZXNoKGEpO3JldHVybiBmYWxzZX0pLmJpbmQoXCJ2Y2xpY2tcIixmYWxzZSk7dy5hZGQoaykuYmluZChcInZtb3VzZXVwXCIsZnVuY3Rpb24oKXtpZihiLmRyYWdnaW5nKXJldHVybiBiLmRyYWdnaW5nPWZhbHNlLGc9PT1cInNlbGVjdFwiJiYoeC5hZGRDbGFzcyhcInVpLXNsaWRlci1oYW5kbGUtc25hcHBpbmdcIiksYi5tb3VzZU1vdmVkP2IudXNlck1vZGlmaWVkP2IucmVmcmVzaChiLmJlZm9yZVN0YXJ0PT0wPzE6MCk6Yi5yZWZyZXNoKGIuYmVmb3JlU3RhcnQpOmIucmVmcmVzaChiLmJlZm9yZVN0YXJ0PT0wPzE6MCkpLGIubW91c2VNb3ZlZD1mYWxzZX0pO3cuaW5zZXJ0QWZ0ZXIoZSk7Zz09XCJzZWxlY3RcIiYmdGhpcy5oYW5kbGUuYmluZCh7Zm9jdXM6ZnVuY3Rpb24oKXt3LmFkZENsYXNzKGEubW9iaWxlLmZvY3VzQ2xhc3MpfSxcbmJsdXI6ZnVuY3Rpb24oKXt3LnJlbW92ZUNsYXNzKGEubW9iaWxlLmZvY3VzQ2xhc3MpfX0pO3RoaXMuaGFuZGxlLmJpbmQoe3Ztb3VzZWRvd246ZnVuY3Rpb24oKXthKHRoaXMpLmZvY3VzKCl9LHZjbGljazpmYWxzZSxrZXlkb3duOmZ1bmN0aW9uKGMpe3ZhciBkPW0oKTtpZighYi5vcHRpb25zLmRpc2FibGVkKXtzd2l0Y2goYy5rZXlDb2RlKXtjYXNlIGEubW9iaWxlLmtleUNvZGUuSE9NRTpjYXNlIGEubW9iaWxlLmtleUNvZGUuRU5EOmNhc2UgYS5tb2JpbGUua2V5Q29kZS5QQUdFX1VQOmNhc2UgYS5tb2JpbGUua2V5Q29kZS5QQUdFX0RPV046Y2FzZSBhLm1vYmlsZS5rZXlDb2RlLlVQOmNhc2UgYS5tb2JpbGUua2V5Q29kZS5SSUdIVDpjYXNlIGEubW9iaWxlLmtleUNvZGUuRE9XTjpjYXNlIGEubW9iaWxlLmtleUNvZGUuTEVGVDppZihjLnByZXZlbnREZWZhdWx0KCksIWIuX2tleVNsaWRpbmcpYi5fa2V5U2xpZGluZz10cnVlLGEodGhpcykuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIil9c3dpdGNoKGMua2V5Q29kZSl7Y2FzZSBhLm1vYmlsZS5rZXlDb2RlLkhPTUU6Yi5yZWZyZXNoKHApO1xuYnJlYWs7Y2FzZSBhLm1vYmlsZS5rZXlDb2RlLkVORDpiLnJlZnJlc2gobCk7YnJlYWs7Y2FzZSBhLm1vYmlsZS5rZXlDb2RlLlBBR0VfVVA6Y2FzZSBhLm1vYmlsZS5rZXlDb2RlLlVQOmNhc2UgYS5tb2JpbGUua2V5Q29kZS5SSUdIVDpiLnJlZnJlc2goZCtyKTticmVhaztjYXNlIGEubW9iaWxlLmtleUNvZGUuUEFHRV9ET1dOOmNhc2UgYS5tb2JpbGUua2V5Q29kZS5ET1dOOmNhc2UgYS5tb2JpbGUua2V5Q29kZS5MRUZUOmIucmVmcmVzaChkLXIpfX19LGtleXVwOmZ1bmN0aW9uKCl7aWYoYi5fa2V5U2xpZGluZyliLl9rZXlTbGlkaW5nPWZhbHNlLGEodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIil9fSk7dGhpcy5yZWZyZXNoKGMsYyx0cnVlKX0scmVmcmVzaDpmdW5jdGlvbihiLGMsZil7KHRoaXMub3B0aW9ucy5kaXNhYmxlZHx8dGhpcy5lbGVtZW50LmF0dHIoXCJkaXNhYmxlZFwiKSkmJnRoaXMuZGlzYWJsZSgpO3ZhciBkPXRoaXMuZWxlbWVudCxnPWRbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxcbmg9Zz09PVwiaW5wdXRcIj9wYXJzZUZsb2F0KGQuYXR0cihcIm1pblwiKSk6MCxqPWc9PT1cImlucHV0XCI/cGFyc2VGbG9hdChkLmF0dHIoXCJtYXhcIikpOmQuZmluZChcIm9wdGlvblwiKS5sZW5ndGgtMSxrPWc9PT1cImlucHV0XCImJnBhcnNlRmxvYXQoZC5hdHRyKFwic3RlcFwiKSk+MD9wYXJzZUZsb2F0KGQuYXR0cihcInN0ZXBcIikpOjE7aWYodHlwZW9mIGI9PT1cIm9iamVjdFwiKXtpZighdGhpcy5kcmFnZ2luZ3x8Yi5wYWdlWDx0aGlzLnNsaWRlci5vZmZzZXQoKS5sZWZ0LTh8fGIucGFnZVg+dGhpcy5zbGlkZXIub2Zmc2V0KCkubGVmdCt0aGlzLnNsaWRlci53aWR0aCgpKzgpcmV0dXJuO2I9TWF0aC5yb3VuZCgoYi5wYWdlWC10aGlzLnNsaWRlci5vZmZzZXQoKS5sZWZ0KS90aGlzLnNsaWRlci53aWR0aCgpKjEwMCl9ZWxzZSBiPT1udWxsJiYoYj1nPT09XCJpbnB1dFwiP3BhcnNlRmxvYXQoZC52YWwoKXx8MCk6ZFswXS5zZWxlY3RlZEluZGV4KSxiPShwYXJzZUZsb2F0KGIpLWgpLyhqLWgpKjEwMDtpZighaXNOYU4oYikpe2I8XG4wJiYoYj0wKTtiPjEwMCYmKGI9MTAwKTt2YXIgbT1iLzEwMCooai1oKStoLHA9KG0taCklazttLT1wO01hdGguYWJzKHApKjI+PWsmJihtKz1wPjA/azotayk7bT1wYXJzZUZsb2F0KG0udG9GaXhlZCg1KSk7bTxoJiYobT1oKTttPmomJihtPWopO3RoaXMuaGFuZGxlLmNzcyhcImxlZnRcIixiK1wiJVwiKTt0aGlzLmhhbmRsZS5hdHRyKHtcImFyaWEtdmFsdWVub3dcIjpnPT09XCJpbnB1dFwiP206ZC5maW5kKFwib3B0aW9uXCIpLmVxKG0pLmF0dHIoXCJ2YWx1ZVwiKSxcImFyaWEtdmFsdWV0ZXh0XCI6Zz09PVwiaW5wdXRcIj9tOmQuZmluZChcIm9wdGlvblwiKS5lcShtKS5nZXRFbmNvZGVkVGV4dCgpLHRpdGxlOmc9PT1cImlucHV0XCI/bTpkLmZpbmQoXCJvcHRpb25cIikuZXEobSkuZ2V0RW5jb2RlZFRleHQoKX0pO3RoaXMudmFsdWViZyYmdGhpcy52YWx1ZWJnLmNzcyhcIndpZHRoXCIsYitcIiVcIik7aWYodGhpcy5fbGFiZWxzKXt2YXIgaD10aGlzLmhhbmRsZS53aWR0aCgpL3RoaXMuc2xpZGVyLndpZHRoKCkqMTAwLFxubD1iJiZoKygxMDAtaCkqYi8xMDAscj1iPT09MTAwPzA6TWF0aC5taW4oaCsxMDAtbCwxMDApO3RoaXMuX2xhYmVscy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKS5pcyhcIi51aS1zbGlkZXItbGFiZWwtYVwiKTthKHRoaXMpLndpZHRoKChiP2w6cikrXCIlXCIpfSl9aWYoIWYpZj1mYWxzZSxnPT09XCJpbnB1dFwiPyhmPWQudmFsKCkhPT1tLGQudmFsKG0pKTooZj1kWzBdLnNlbGVjdGVkSW5kZXghPT1tLGRbMF0uc2VsZWN0ZWRJbmRleD1tKSwhYyYmZiYmZC50cmlnZ2VyKFwiY2hhbmdlXCIpfX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmF0dHIoXCJkaXNhYmxlZFwiLGZhbHNlKTt0aGlzLnNsaWRlci5yZW1vdmVDbGFzcyhcInVpLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsZmFsc2UpO3JldHVybiB0aGlzLl9zZXRPcHRpb24oXCJkaXNhYmxlZFwiLGZhbHNlKX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIix0cnVlKTt0aGlzLnNsaWRlci5hZGRDbGFzcyhcInVpLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXG50cnVlKTtyZXR1cm4gdGhpcy5fc2V0T3B0aW9uKFwiZGlzYWJsZWRcIix0cnVlKX19KTthKGspLmJpbmQoXCJwYWdlY3JlYXRlIGNyZWF0ZVwiLGZ1bmN0aW9uKGIpe2EubW9iaWxlLnNsaWRlci5wcm90b3R5cGUuZW5oYW5jZVdpdGhpbihiLnRhcmdldCx0cnVlKX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oYSl7YS53aWRnZXQoXCJtb2JpbGUuc2VsZWN0bWVudVwiLGEubW9iaWxlLndpZGdldCx7b3B0aW9uczp7dGhlbWU6bnVsbCxkaXNhYmxlZDpmYWxzZSxpY29uOlwiYXJyb3ctZFwiLGljb25wb3M6XCJyaWdodFwiLGlubGluZTpmYWxzZSxjb3JuZXJzOnRydWUsc2hhZG93OnRydWUsaWNvbnNoYWRvdzp0cnVlLG92ZXJsYXlUaGVtZTpcImFcIixoaWRlUGxhY2Vob2xkZXJNZW51SXRlbXM6dHJ1ZSxjbG9zZVRleHQ6XCJDbG9zZVwiLG5hdGl2ZU1lbnU6dHJ1ZSxwcmV2ZW50Rm9jdXNab29tOi9pUGhvbmV8aVBhZHxpUG9kLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSkmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkFwcGxlV2ViS2l0XCIpPlxuLTEsaW5pdFNlbGVjdG9yOlwic2VsZWN0Om5vdCg6anFtRGF0YShyb2xlPSdzbGlkZXInKSlcIixtaW5pOmZhbHNlfSxfYnV0dG9uOmZ1bmN0aW9uKCl7cmV0dXJuIGEoXCI8ZGl2Lz5cIil9LF9zZXREaXNhYmxlZDpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQuYXR0cihcImRpc2FibGVkXCIsYSk7dGhpcy5idXR0b24uYXR0cihcImFyaWEtZGlzYWJsZWRcIixhKTtyZXR1cm4gdGhpcy5fc2V0T3B0aW9uKFwiZGlzYWJsZWRcIixhKX0sX2ZvY3VzQnV0dG9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5idXR0b24uZm9jdXMoKX0sNDApfSxfc2VsZWN0T3B0aW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdC5maW5kKFwib3B0aW9uXCIpfSxfcHJlRXh0ZW5zaW9uOmZ1bmN0aW9uKCl7dmFyIGM9XCJcIjt+dGhpcy5lbGVtZW50WzBdLmNsYXNzTmFtZS5pbmRleE9mKFwidWktYnRuLWxlZnRcIikmJihjPVwiIHVpLWJ0bi1sZWZ0XCIpO350aGlzLmVsZW1lbnRbMF0uY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1idG4tcmlnaHRcIikmJlxuKGM9XCIgdWktYnRuLXJpZ2h0XCIpO3RoaXMuc2VsZWN0PXRoaXMuZWxlbWVudC53cmFwKFwiPGRpdiBjbGFzcz0ndWktc2VsZWN0XCIrYytcIic+XCIpO3RoaXMuc2VsZWN0SUQ9dGhpcy5zZWxlY3QuYXR0cihcImlkXCIpO3RoaXMubGFiZWw9YShcImxhYmVsW2Zvcj0nXCIrdGhpcy5zZWxlY3RJRCtcIiddXCIpLmFkZENsYXNzKFwidWktc2VsZWN0XCIpO3RoaXMuaXNNdWx0aXBsZT10aGlzLnNlbGVjdFswXS5tdWx0aXBsZTtpZighdGhpcy5vcHRpb25zLnRoZW1lKXRoaXMub3B0aW9ucy50aGVtZT1hLm1vYmlsZS5nZXRJbmhlcml0ZWRUaGVtZSh0aGlzLnNlbGVjdCxcImNcIil9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLl9wcmVFeHRlbnNpb24oKTt0aGlzLl90cmlnZ2VyKFwiYmVmb3JlQ3JlYXRlXCIpO3RoaXMuYnV0dG9uPXRoaXMuX2J1dHRvbigpO3ZhciBjPXRoaXMsYj10aGlzLm9wdGlvbnMsZT10aGlzLmJ1dHRvbi50ZXh0KGEodGhpcy5zZWxlY3RbMF0ub3B0aW9ucy5pdGVtKHRoaXMuc2VsZWN0WzBdLnNlbGVjdGVkSW5kZXg9PVxuLTE/MDp0aGlzLnNlbGVjdFswXS5zZWxlY3RlZEluZGV4KSkudGV4dCgpKS5pbnNlcnRCZWZvcmUodGhpcy5zZWxlY3QpLmJ1dHRvbk1hcmt1cCh7dGhlbWU6Yi50aGVtZSxpY29uOmIuaWNvbixpY29ucG9zOmIuaWNvbnBvcyxpbmxpbmU6Yi5pbmxpbmUsY29ybmVyczpiLmNvcm5lcnMsc2hhZG93OmIuc2hhZG93LGljb25zaGFkb3c6Yi5pY29uc2hhZG93LG1pbmk6Yi5taW5pfSk7Yi5uYXRpdmVNZW51JiZzLm9wZXJhJiZzLm9wZXJhLnZlcnNpb24mJnRoaXMuc2VsZWN0LmFkZENsYXNzKFwidWktc2VsZWN0LW5hdGl2ZW9ubHlcIik7aWYodGhpcy5pc011bHRpcGxlKXRoaXMuYnV0dG9uQ291bnQ9YShcIjxzcGFuPlwiKS5hZGRDbGFzcyhcInVpLWxpLWNvdW50IHVpLWJ0bi11cC1jIHVpLWJ0bi1jb3JuZXItYWxsXCIpLmhpZGUoKS5hcHBlbmRUbyhlLmFkZENsYXNzKFwidWktbGktaGFzLWNvdW50XCIpKTsoYi5kaXNhYmxlZHx8dGhpcy5lbGVtZW50LmF0dHIoXCJkaXNhYmxlZFwiKSkmJnRoaXMuZGlzYWJsZSgpO1xudGhpcy5zZWxlY3QuY2hhbmdlKGZ1bmN0aW9uKCl7Yy5yZWZyZXNoKCl9KTt0aGlzLmJ1aWxkKCl9LGJ1aWxkOmZ1bmN0aW9uKCl7dmFyIGM9dGhpczt0aGlzLnNlbGVjdC5hcHBlbmRUbyhjLmJ1dHRvbikuYmluZChcInZtb3VzZWRvd25cIixmdW5jdGlvbigpe2MuYnV0dG9uLmFkZENsYXNzKGEubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzKX0pLmJpbmQoXCJmb2N1c1wiLGZ1bmN0aW9uKCl7Yy5idXR0b24uYWRkQ2xhc3MoYS5tb2JpbGUuZm9jdXNDbGFzcyl9KS5iaW5kKFwiYmx1clwiLGZ1bmN0aW9uKCl7Yy5idXR0b24ucmVtb3ZlQ2xhc3MoYS5tb2JpbGUuZm9jdXNDbGFzcyl9KS5iaW5kKFwiZm9jdXMgdm1vdXNlb3ZlclwiLGZ1bmN0aW9uKCl7Yy5idXR0b24udHJpZ2dlcihcInZtb3VzZW92ZXJcIil9KS5iaW5kKFwidm1vdXNlbW92ZVwiLGZ1bmN0aW9uKCl7Yy5idXR0b24ucmVtb3ZlQ2xhc3MoYS5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MpfSkuYmluZChcImNoYW5nZSBibHVyIHZtb3VzZW91dFwiLGZ1bmN0aW9uKCl7Yy5idXR0b24udHJpZ2dlcihcInZtb3VzZW91dFwiKS5yZW1vdmVDbGFzcyhhLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyl9KS5iaW5kKFwiY2hhbmdlIGJsdXJcIixcbmZ1bmN0aW9uKCl7Yy5idXR0b24ucmVtb3ZlQ2xhc3MoXCJ1aS1idG4tZG93bi1cIitjLm9wdGlvbnMudGhlbWUpfSk7Yy5idXR0b24uYmluZChcInZtb3VzZWRvd25cIixmdW5jdGlvbigpe2Mub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tJiZhLm1vYmlsZS56b29tLmRpc2FibGUodHJ1ZSl9KS5iaW5kKFwibW91c2V1cFwiLGZ1bmN0aW9uKCl7Yy5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20mJmEubW9iaWxlLnpvb20uZW5hYmxlKHRydWUpfSl9LHNlbGVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5maWx0ZXIoXCI6c2VsZWN0ZWRcIil9LHNlbGVjdGVkSW5kaWNlczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIHRoaXMuc2VsZWN0ZWQoKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gYS5fc2VsZWN0T3B0aW9ucygpLmluZGV4KHRoaXMpfSkuZ2V0KCl9LHNldEJ1dHRvblRleHQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9dGhpcy5zZWxlY3RlZCgpO3RoaXMuYnV0dG9uLmZpbmQoXCIudWktYnRuLXRleHRcIikudGV4dChmdW5jdGlvbigpe3JldHVybiFjLmlzTXVsdGlwbGU/XG5iLnRleHQoKTpiLmxlbmd0aD9iLm1hcChmdW5jdGlvbigpe3JldHVybiBhKHRoaXMpLnRleHQoKX0pLmdldCgpLmpvaW4oXCIsIFwiKTpjLnBsYWNlaG9sZGVyfSl9LHNldEJ1dHRvbkNvdW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zZWxlY3RlZCgpO3RoaXMuaXNNdWx0aXBsZSYmdGhpcy5idXR0b25Db3VudFthLmxlbmd0aD4xP1wic2hvd1wiOlwiaGlkZVwiXSgpLnRleHQoYS5sZW5ndGgpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5zZXRCdXR0b25UZXh0KCk7dGhpcy5zZXRCdXR0b25Db3VudCgpfSxvcGVuOmEubm9vcCxjbG9zZTphLm5vb3AsZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuX3NldERpc2FibGVkKHRydWUpO3RoaXMuYnV0dG9uLmFkZENsYXNzKFwidWktZGlzYWJsZWRcIil9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuX3NldERpc2FibGVkKGZhbHNlKTt0aGlzLmJ1dHRvbi5yZW1vdmVDbGFzcyhcInVpLWRpc2FibGVkXCIpfX0pO2EoaykuYmluZChcInBhZ2VjcmVhdGUgY3JlYXRlXCIsXG5mdW5jdGlvbihjKXthLm1vYmlsZS5zZWxlY3RtZW51LnByb3RvdHlwZS5lbmhhbmNlV2l0aGluKGMudGFyZ2V0LHRydWUpfSl9KShqUXVlcnkpOyhmdW5jdGlvbihhKXt2YXIgYz1mdW5jdGlvbihiKXt2YXIgYz1iLnNlbGVjdElELGY9Yi5sYWJlbCxkPWIuc2VsZWN0LmNsb3Nlc3QoXCIudWktcGFnZVwiKSxnPWEoXCI8ZGl2PlwiLHtcImNsYXNzXCI6XCJ1aS1zZWxlY3RtZW51LXNjcmVlbiB1aS1zY3JlZW4taGlkZGVuXCJ9KS5hcHBlbmRUbyhkKSxoPWIuX3NlbGVjdE9wdGlvbnMoKSxqPWIuaXNNdWx0aXBsZT1iLnNlbGVjdFswXS5tdWx0aXBsZSxvPWMrXCItYnV0dG9uXCIsbT1jK1wiLW1lbnVcIixwPWEoXCI8ZGl2IGRhdGEtXCIrYS5tb2JpbGUubnMrXCJyb2xlPSdkaWFsb2cnIGRhdGEtXCIrYS5tb2JpbGUubnMrXCJ0aGVtZT0nXCIrYi5vcHRpb25zLnRoZW1lK1wiJyBkYXRhLVwiK2EubW9iaWxlLm5zK1wib3ZlcmxheS10aGVtZT0nXCIrYi5vcHRpb25zLm92ZXJsYXlUaGVtZStcIic+PGRpdiBkYXRhLVwiK2EubW9iaWxlLm5zK1xuXCJyb2xlPSdoZWFkZXInPjxkaXYgY2xhc3M9J3VpLXRpdGxlJz5cIitmLmdldEVuY29kZWRUZXh0KCkrXCI8L2Rpdj48L2Rpdj48ZGl2IGRhdGEtXCIrYS5tb2JpbGUubnMrXCJyb2xlPSdjb250ZW50Jz48L2Rpdj48L2Rpdj5cIiksbD1hKFwiPGRpdj5cIix7XCJjbGFzc1wiOlwidWktc2VsZWN0bWVudSB1aS1zZWxlY3RtZW51LWhpZGRlbiB1aS1vdmVybGF5LXNoYWRvdyB1aS1jb3JuZXItYWxsIHVpLWJvZHktXCIrYi5vcHRpb25zLm92ZXJsYXlUaGVtZStcIiBcIithLm1vYmlsZS5kZWZhdWx0RGlhbG9nVHJhbnNpdGlvbn0pLmluc2VydEFmdGVyKGcpLHI9YShcIjx1bD5cIix7XCJjbGFzc1wiOlwidWktc2VsZWN0bWVudS1saXN0XCIsaWQ6bSxyb2xlOlwibGlzdGJveFwiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6b30pLmF0dHIoXCJkYXRhLVwiK2EubW9iaWxlLm5zK1widGhlbWVcIixiLm9wdGlvbnMudGhlbWUpLmFwcGVuZFRvKGwpLG49YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWhlYWRlciB1aS1iYXItXCIrYi5vcHRpb25zLnRoZW1lfSkucHJlcGVuZFRvKGwpLFxucT1hKFwiPGgxPlwiLHtcImNsYXNzXCI6XCJ1aS10aXRsZVwifSkuYXBwZW5kVG8obiksdDtiLmlzTXVsdGlwbGUmJih0PWEoXCI8YT5cIix7dGV4dDpiLm9wdGlvbnMuY2xvc2VUZXh0LGhyZWY6XCIjXCIsXCJjbGFzc1wiOlwidWktYnRuLWxlZnRcIn0pLmF0dHIoXCJkYXRhLVwiK2EubW9iaWxlLm5zK1wiaWNvbnBvc1wiLFwibm90ZXh0XCIpLmF0dHIoXCJkYXRhLVwiK2EubW9iaWxlLm5zK1wiaWNvblwiLFwiZGVsZXRlXCIpLmFwcGVuZFRvKG4pLmJ1dHRvbk1hcmt1cCgpKTthLmV4dGVuZChiLHtzZWxlY3Q6Yi5zZWxlY3Qsc2VsZWN0SUQ6YyxidXR0b25JZDpvLG1lbnVJZDptLHRoaXNQYWdlOmQsbWVudVBhZ2U6cCxsYWJlbDpmLHNjcmVlbjpnLHNlbGVjdE9wdGlvbnM6aCxpc011bHRpcGxlOmosdGhlbWU6Yi5vcHRpb25zLnRoZW1lLGxpc3Rib3g6bCxsaXN0OnIsaGVhZGVyOm4saGVhZGVyVGl0bGU6cSxoZWFkZXJDbG9zZTp0LG1lbnVQYWdlQ29udGVudDp2b2lkIDAsbWVudVBhZ2VDbG9zZTp2b2lkIDAscGxhY2Vob2xkZXI6XCJcIixcbmJ1aWxkOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcztjLnJlZnJlc2goKTtjLnNlbGVjdC5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpLmZvY3VzKGZ1bmN0aW9uKCl7YSh0aGlzKS5ibHVyKCk7Yy5idXR0b24uZm9jdXMoKX0pO2MuYnV0dG9uLmJpbmQoXCJ2Y2xpY2sga2V5ZG93blwiLGZ1bmN0aW9uKGIpe2lmKGIudHlwZT09XCJ2Y2xpY2tcInx8Yi5rZXlDb2RlJiYoYi5rZXlDb2RlPT09YS5tb2JpbGUua2V5Q29kZS5FTlRFUnx8Yi5rZXlDb2RlPT09YS5tb2JpbGUua2V5Q29kZS5TUEFDRSkpYy5vcGVuKCksYi5wcmV2ZW50RGVmYXVsdCgpfSk7Yy5saXN0LmF0dHIoXCJyb2xlXCIsXCJsaXN0Ym94XCIpLmJpbmQoXCJmb2N1c2luXCIsZnVuY3Rpb24oYil7YShiLnRhcmdldCkuYXR0cihcInRhYmluZGV4XCIsXCIwXCIpLnRyaWdnZXIoXCJ2bW91c2VvdmVyXCIpfSkuYmluZChcImZvY3Vzb3V0XCIsZnVuY3Rpb24oYil7YShiLnRhcmdldCkuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKS50cmlnZ2VyKFwidm1vdXNlb3V0XCIpfSkuZGVsZWdhdGUoXCJsaTpub3QoLnVpLWRpc2FibGVkLCAudWktbGktZGl2aWRlcilcIixcblwiY2xpY2tcIixmdW5jdGlvbihiKXt2YXIgZD1jLnNlbGVjdFswXS5zZWxlY3RlZEluZGV4LGU9Yy5saXN0LmZpbmQoXCJsaTpub3QoLnVpLWxpLWRpdmlkZXIpXCIpLmluZGV4KHRoaXMpLGY9Yy5fc2VsZWN0T3B0aW9ucygpLmVxKGUpWzBdO2Yuc2VsZWN0ZWQ9Yy5pc011bHRpcGxlPyFmLnNlbGVjdGVkOnRydWU7Yy5pc011bHRpcGxlJiZhKHRoaXMpLmZpbmQoXCIudWktaWNvblwiKS50b2dnbGVDbGFzcyhcInVpLWljb24tY2hlY2tib3gtb25cIixmLnNlbGVjdGVkKS50b2dnbGVDbGFzcyhcInVpLWljb24tY2hlY2tib3gtb2ZmXCIsIWYuc2VsZWN0ZWQpOyhjLmlzTXVsdGlwbGV8fGQhPT1lKSYmYy5zZWxlY3QudHJpZ2dlcihcImNoYW5nZVwiKTtjLmlzTXVsdGlwbGV8fGMuY2xvc2UoKTtiLnByZXZlbnREZWZhdWx0KCl9KS5rZXlkb3duKGZ1bmN0aW9uKGMpe3ZhciBkPWEoYy50YXJnZXQpLGU9ZC5jbG9zZXN0KFwibGlcIik7c3dpdGNoKGMua2V5Q29kZSl7Y2FzZSAzODpyZXR1cm4gYz1lLnByZXYoKS5ub3QoXCIudWktc2VsZWN0bWVudS1wbGFjZWhvbGRlclwiKSxcbmMuaXMoXCIudWktbGktZGl2aWRlclwiKSYmKGM9Yy5wcmV2KCkpLGMubGVuZ3RoJiYoZC5ibHVyKCkuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKSxjLmFkZENsYXNzKFwidWktYnRuLWRvd24tXCIrYi5vcHRpb25zLnRoZW1lKS5maW5kKFwiYVwiKS5maXJzdCgpLmZvY3VzKCkpLGZhbHNlO2Nhc2UgNDA6cmV0dXJuIGM9ZS5uZXh0KCksYy5pcyhcIi51aS1saS1kaXZpZGVyXCIpJiYoYz1jLm5leHQoKSksYy5sZW5ndGgmJihkLmJsdXIoKS5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpLGMuYWRkQ2xhc3MoXCJ1aS1idG4tZG93bi1cIitiLm9wdGlvbnMudGhlbWUpLmZpbmQoXCJhXCIpLmZpcnN0KCkuZm9jdXMoKSksZmFsc2U7Y2FzZSAxMzpjYXNlIDMyOnJldHVybiBkLnRyaWdnZXIoXCJjbGlja1wiKSxmYWxzZX19KTtjLm1lbnVQYWdlLmJpbmQoXCJwYWdlaGlkZVwiLGZ1bmN0aW9uKCl7Yy5saXN0LmFwcGVuZFRvKGMubGlzdGJveCk7Yy5fZm9jdXNCdXR0b24oKTthLm1vYmlsZS5fYmluZFBhZ2VSZW1vdmUuY2FsbChjLnRoaXNQYWdlKX0pO1xuYy5zY3JlZW4uYmluZChcInZjbGlja1wiLGZ1bmN0aW9uKCl7Yy5jbG9zZSgpfSk7Yy5pc011bHRpcGxlJiZjLmhlYWRlckNsb3NlLmNsaWNrKGZ1bmN0aW9uKCl7aWYoYy5tZW51VHlwZT09XCJvdmVybGF5XCIpcmV0dXJuIGMuY2xvc2UoKSxmYWxzZX0pO2MudGhpc1BhZ2UuYWRkRGVwZW5kZW50cyh0aGlzLm1lbnVQYWdlKX0sX2lzUmVidWlsZFJlcXVpcmVkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5saXN0LmZpbmQoXCJsaVwiKTtyZXR1cm4gdGhpcy5fc2VsZWN0T3B0aW9ucygpLnRleHQoKSE9PWEudGV4dCgpfSxyZWZyZXNoOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7dGhpcy5fc2VsZWN0T3B0aW9ucygpO3RoaXMuc2VsZWN0ZWQoKTt2YXIgZD10aGlzLnNlbGVjdGVkSW5kaWNlcygpOyhifHx0aGlzLl9pc1JlYnVpbGRSZXF1aXJlZCgpKSYmYy5fYnVpbGRMaXN0KCk7Yy5zZXRCdXR0b25UZXh0KCk7Yy5zZXRCdXR0b25Db3VudCgpO2MubGlzdC5maW5kKFwibGk6bm90KC51aS1saS1kaXZpZGVyKVwiKS5yZW1vdmVDbGFzcyhhLm1vYmlsZS5hY3RpdmVCdG5DbGFzcykuYXR0cihcImFyaWEtc2VsZWN0ZWRcIixcbmZhbHNlKS5lYWNoKGZ1bmN0aW9uKGIpe2EuaW5BcnJheShiLGQpPi0xJiYoYj1hKHRoaXMpLGIuYXR0cihcImFyaWEtc2VsZWN0ZWRcIix0cnVlKSxjLmlzTXVsdGlwbGU/Yi5maW5kKFwiLnVpLWljb25cIikucmVtb3ZlQ2xhc3MoXCJ1aS1pY29uLWNoZWNrYm94LW9mZlwiKS5hZGRDbGFzcyhcInVpLWljb24tY2hlY2tib3gtb25cIik6Yi5pcyhcIi51aS1zZWxlY3RtZW51LXBsYWNlaG9sZGVyXCIpP2IubmV4dCgpLmFkZENsYXNzKGEubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzKTpiLmFkZENsYXNzKGEubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzKSl9KX0sY2xvc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLmlzT3Blbil0aGlzLm1lbnVUeXBlPT1cInBhZ2VcIj9zLmhpc3RvcnkuYmFjaygpOih0aGlzLnNjcmVlbi5hZGRDbGFzcyhcInVpLXNjcmVlbi1oaWRkZW5cIiksdGhpcy5saXN0Ym94LmFkZENsYXNzKFwidWktc2VsZWN0bWVudS1oaWRkZW5cIikucmVtb3ZlQXR0cihcInN0eWxlXCIpLnJlbW92ZUNsYXNzKFwiaW5cIiksXG50aGlzLmxpc3QuYXBwZW5kVG8odGhpcy5saXN0Ym94KSx0aGlzLl9mb2N1c0J1dHRvbigpKSx0aGlzLmlzT3Blbj1mYWxzZX0sb3BlbjpmdW5jdGlvbigpe2Z1bmN0aW9uIGIoKXtjLmxpc3QuZmluZChcIi5cIithLm1vYmlsZS5hY3RpdmVCdG5DbGFzcytcIiBhXCIpLmZvY3VzKCl9aWYoIXRoaXMub3B0aW9ucy5kaXNhYmxlZCl7dmFyIGM9dGhpcyxkPWEocyksZT1jLmxpc3QucGFyZW50KCksZj1lLm91dGVySGVpZ2h0KCksZT1lLm91dGVyV2lkdGgoKTthKFwiLnVpLXBhZ2UtYWN0aXZlXCIpO3ZhciBnPWQuc2Nyb2xsVG9wKCksaj1jLmJ1dHRvbi5vZmZzZXQoKS50b3AsaD1kLmhlaWdodCgpLGQ9ZC53aWR0aCgpO2MuYnV0dG9uLmFkZENsYXNzKGEubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5idXR0b24ucmVtb3ZlQ2xhc3MoYS5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MpfSwzMDApO2lmKGY+aC04MHx8IWEuc3VwcG9ydC5zY3JvbGxUb3Ape2MubWVudVBhZ2UuYXBwZW5kVG8oYS5tb2JpbGUucGFnZUNvbnRhaW5lcikucGFnZSgpO1xuYy5tZW51UGFnZUNvbnRlbnQ9cC5maW5kKFwiLnVpLWNvbnRlbnRcIik7Yy5tZW51UGFnZUNsb3NlPXAuZmluZChcIi51aS1oZWFkZXIgYVwiKTtjLnRoaXNQYWdlLnVuYmluZChcInBhZ2VoaWRlLnJlbW92ZVwiKTtpZihnPT0wJiZqPmgpYy50aGlzUGFnZS5vbmUoXCJwYWdlaGlkZVwiLGZ1bmN0aW9uKCl7YSh0aGlzKS5qcW1EYXRhKFwibGFzdFNjcm9sbFwiLGopfSk7Yy5tZW51UGFnZS5vbmUoXCJwYWdlc2hvd1wiLGZ1bmN0aW9uKCl7YigpO2MuaXNPcGVuPXRydWV9KTtjLm1lbnVUeXBlPVwicGFnZVwiO2MubWVudVBhZ2VDb250ZW50LmFwcGVuZChjLmxpc3QpO2MubWVudVBhZ2UuZmluZChcImRpdiAudWktdGl0bGVcIikudGV4dChjLmxhYmVsLnRleHQoKSk7YS5tb2JpbGUuY2hhbmdlUGFnZShjLm1lbnVQYWdlLHt0cmFuc2l0aW9uOmEubW9iaWxlLmRlZmF1bHREaWFsb2dUcmFuc2l0aW9ufSl9ZWxzZXtjLm1lbnVUeXBlPVwib3ZlcmxheVwiO2Muc2NyZWVuLmhlaWdodChhKGspLmhlaWdodCgpKS5yZW1vdmVDbGFzcyhcInVpLXNjcmVlbi1oaWRkZW5cIik7XG52YXIgbD1qLWcsbT1nK2gtaixuPWYvMixvPXBhcnNlRmxvYXQoYy5saXN0LnBhcmVudCgpLmNzcyhcIm1heC13aWR0aFwiKSksZj1sPmYvMiYmbT5mLzI/aitjLmJ1dHRvbi5vdXRlckhlaWdodCgpLzItbjpsPm0/ZytoLWYtMzA6ZyszMDtlPG8/Zz0oZC1lKS8yOihnPWMuYnV0dG9uLm9mZnNldCgpLmxlZnQrYy5idXR0b24ub3V0ZXJXaWR0aCgpLzItZS8yLGc8MzA/Zz0zMDpnK2U+ZCYmKGc9ZC1lLTMwKSk7Yy5saXN0Ym94LmFwcGVuZChjLmxpc3QpLnJlbW92ZUNsYXNzKFwidWktc2VsZWN0bWVudS1oaWRkZW5cIikuY3NzKHt0b3A6ZixsZWZ0Omd9KS5hZGRDbGFzcyhcImluXCIpO2IoKTtjLmlzT3Blbj10cnVlfX19LF9idWlsZExpc3Q6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm9wdGlvbnMsYz10aGlzLnBsYWNlaG9sZGVyLGQ9dHJ1ZSxlPXRoaXMuaXNNdWx0aXBsZT9cImNoZWNrYm94LW9mZlwiOlwiZmFsc2VcIjt0aGlzLmxpc3QuZW1wdHkoKS5maWx0ZXIoXCIudWktbGlzdHZpZXdcIikubGlzdHZpZXcoXCJkZXN0cm95XCIpO1xudmFyIGY9dGhpcy5zZWxlY3QuZmluZChcIm9wdGlvblwiKSxnPWYubGVuZ3RoLGo9dGhpcy5zZWxlY3RbMF0saD1cImRhdGEtXCIrYS5tb2JpbGUubnMsbD1oK1wib3B0aW9uLWluZGV4XCIsbT1oK1wiaWNvblwiO2grPVwicm9sZVwiO2Zvcih2YXIgbj1rLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxvLHA9MDtwPGc7cCsrKXt2YXIgcj1mW3BdLHE9YShyKSxzPXIucGFyZW50Tm9kZSx0PXEudGV4dCgpLEQ9ay5jcmVhdGVFbGVtZW50KFwiYVwiKSxKPVtdO0Quc2V0QXR0cmlidXRlKFwiaHJlZlwiLFwiI1wiKTtELmFwcGVuZENoaWxkKGsuY3JlYXRlVGV4dE5vZGUodCkpO3MhPT1qJiZzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1cIm9wdGdyb3VwXCImJihzPXMuZ2V0QXR0cmlidXRlKFwibGFiZWxcIikscyE9byYmKG89ay5jcmVhdGVFbGVtZW50KFwibGlcIiksby5zZXRBdHRyaWJ1dGUoaCxcImxpc3QtZGl2aWRlclwiKSxvLnNldEF0dHJpYnV0ZShcInJvbGVcIixcIm9wdGlvblwiKSxvLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXG5cIi0xXCIpLG8uYXBwZW5kQ2hpbGQoay5jcmVhdGVUZXh0Tm9kZShzKSksbi5hcHBlbmRDaGlsZChvKSxvPXMpKTtpZihkJiYoIXIuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil8fHQubGVuZ3RoPT0wfHxxLmpxbURhdGEoXCJwbGFjZWhvbGRlclwiKSkpaWYoZD1mYWxzZSxiLmhpZGVQbGFjZWhvbGRlck1lbnVJdGVtcyYmSi5wdXNoKFwidWktc2VsZWN0bWVudS1wbGFjZWhvbGRlclwiKSwhYyljPXRoaXMucGxhY2Vob2xkZXI9dDtxPWsuY3JlYXRlRWxlbWVudChcImxpXCIpO3IuZGlzYWJsZWQmJihKLnB1c2goXCJ1aS1kaXNhYmxlZFwiKSxxLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIix0cnVlKSk7cS5zZXRBdHRyaWJ1dGUobCxwKTtxLnNldEF0dHJpYnV0ZShtLGUpO3EuY2xhc3NOYW1lPUouam9pbihcIiBcIik7cS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJvcHRpb25cIik7RC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIik7cS5hcHBlbmRDaGlsZChEKTtuLmFwcGVuZENoaWxkKHEpfXRoaXMubGlzdFswXS5hcHBlbmRDaGlsZChuKTtcbiF0aGlzLmlzTXVsdGlwbGUmJiFjLmxlbmd0aD90aGlzLmhlYWRlci5oaWRlKCk6dGhpcy5oZWFkZXJUaXRsZS50ZXh0KHRoaXMucGxhY2Vob2xkZXIpO3RoaXMubGlzdC5saXN0dmlldygpfSxfYnV0dG9uOmZ1bmN0aW9uKCl7cmV0dXJuIGEoXCI8YT5cIix7aHJlZjpcIiNcIixyb2xlOlwiYnV0dG9uXCIsaWQ6dGhpcy5idXR0b25JZCxcImFyaWEtaGFzcG9wdXBcIjpcInRydWVcIixcImFyaWEtb3duc1wiOnRoaXMubWVudUlkfSl9fSl9O2EoaykuYmluZChcInNlbGVjdG1lbnViZWZvcmVjcmVhdGVcIixmdW5jdGlvbihiKXtiPWEoYi50YXJnZXQpLmRhdGEoXCJzZWxlY3RtZW51XCIpO2Iub3B0aW9ucy5uYXRpdmVNZW51fHxjKGIpfSl9KShqUXVlcnkpOyhmdW5jdGlvbihhKXthLndpZGdldChcIm1vYmlsZS5maXhlZHRvb2xiYXJcIixhLm1vYmlsZS53aWRnZXQse29wdGlvbnM6e3Zpc2libGVPblBhZ2VTaG93OnRydWUsZGlzYWJsZVBhZ2Vab29tOnRydWUsdHJhbnNpdGlvbjpcInNsaWRlXCIsZnVsbHNjcmVlbjpmYWxzZSxcbnRhcFRvZ2dsZTp0cnVlLHRhcFRvZ2dsZUJsYWNrbGlzdDpcImEsIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCAudWktaGVhZGVyLWZpeGVkLCAudWktZm9vdGVyLWZpeGVkXCIsaGlkZUR1cmluZ0ZvY3VzOlwiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3RcIix1cGRhdGVQYWdlUGFkZGluZzp0cnVlLHRyYWNrUGVyc2lzdGVudFRvb2xiYXJzOnRydWUsc3VwcG9ydEJsYWNrbGlzdDpmdW5jdGlvbigpe3ZhciBhPXMsYj1uYXZpZ2F0b3IudXNlckFnZW50LGU9bmF2aWdhdG9yLnBsYXRmb3JtLGY9Yi5tYXRjaCgvQXBwbGVXZWJLaXRcXC8oWzAtOV0rKS8pLGY9ISFmJiZmWzFdLGQ9Yi5tYXRjaCgvRmVubmVjXFwvKFswLTldKykvKSxkPSEhZCYmZFsxXSxnPWIubWF0Y2goL09wZXJhIE1vYmlcXC8oWzAtOV0rKS8pLGg9ISFnJiZnWzFdO3JldHVybihlLmluZGV4T2YoXCJpUGhvbmVcIik+LTF8fGUuaW5kZXhPZihcImlQYWRcIik+LTF8fGUuaW5kZXhPZihcImlQb2RcIik+LTEpJiZmJiZmPDUzNHx8YS5vcGVyYW1pbmkmJlxue30udG9TdHJpbmcuY2FsbChhLm9wZXJhbWluaSk9PT1cIltvYmplY3QgT3BlcmFNaW5pXVwifHxnJiZoPDc0NTh8fGIuaW5kZXhPZihcIkFuZHJvaWRcIik+LTEmJmYmJmY8NTMzfHxkJiZkPDZ8fFwicGFsbUdldFJlc291cmNlXCJpbiBzJiZmJiZmPDUzNHx8Yi5pbmRleE9mKFwiTWVlR29cIik+LTEmJmIuaW5kZXhPZihcIk5va2lhQnJvd3Nlci84LjUuMFwiKT4tMT90cnVlOmZhbHNlfSxpbml0U2VsZWN0b3I6XCI6anFtRGF0YShwb3NpdGlvbj0nZml4ZWQnKVwifSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLGI9dGhpcy5lbGVtZW50LGU9Yi5pcyhcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIpP1wiaGVhZGVyXCI6XCJmb290ZXJcIixmPWIuY2xvc2VzdChcIi51aS1wYWdlXCIpO2Euc3VwcG9ydEJsYWNrbGlzdCgpP3RoaXMuZGVzdHJveSgpOihiLmFkZENsYXNzKFwidWktXCIrZStcIi1maXhlZFwiKSxhLmZ1bGxzY3JlZW4/KGIuYWRkQ2xhc3MoXCJ1aS1cIitlK1wiLWZ1bGxzY3JlZW5cIiksZi5hZGRDbGFzcyhcInVpLXBhZ2UtXCIrXG5lK1wiLWZ1bGxzY3JlZW5cIikpOmYuYWRkQ2xhc3MoXCJ1aS1wYWdlLVwiK2UrXCItZml4ZWRcIiksdGhpcy5fYWRkVHJhbnNpdGlvbkNsYXNzKCksdGhpcy5fYmluZFBhZ2VFdmVudHMoKSx0aGlzLl9iaW5kVG9nZ2xlSGFuZGxlcnMoKSl9LF9hZGRUcmFuc2l0aW9uQ2xhc3M6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMudHJhbnNpdGlvbjthJiZhIT09XCJub25lXCImJihhPT09XCJzbGlkZVwiJiYoYT10aGlzLmVsZW1lbnQuaXMoXCIudWktaGVhZGVyXCIpP1wic2xpZGVkb3duXCI6XCJzbGlkZXVwXCIpLHRoaXMuZWxlbWVudC5hZGRDbGFzcyhhKSl9LF9iaW5kUGFnZUV2ZW50czpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj1jLm9wdGlvbnM7Yy5lbGVtZW50LmNsb3Nlc3QoXCIudWktcGFnZVwiKS5iaW5kKFwicGFnZWJlZm9yZXNob3dcIixmdW5jdGlvbigpe2IuZGlzYWJsZVBhZ2Vab29tJiZhLm1vYmlsZS56b29tLmRpc2FibGUodHJ1ZSk7Yi52aXNpYmxlT25QYWdlU2hvd3x8Yy5oaWRlKHRydWUpfSkuYmluZChcIndlYmtpdEFuaW1hdGlvblN0YXJ0IGFuaW1hdGlvbnN0YXJ0IHVwZGF0ZWxheW91dFwiLFxuZnVuY3Rpb24oKXtiLnVwZGF0ZVBhZ2VQYWRkaW5nJiZjLnVwZGF0ZVBhZ2VQYWRkaW5nKCl9KS5iaW5kKFwicGFnZXNob3dcIixmdW5jdGlvbigpe2MudXBkYXRlUGFnZVBhZGRpbmcoKTtiLnVwZGF0ZVBhZ2VQYWRkaW5nJiZhKHMpLmJpbmQoXCJ0aHJvdHRsZWRyZXNpemUuXCIrYy53aWRnZXROYW1lLGZ1bmN0aW9uKCl7Yy51cGRhdGVQYWdlUGFkZGluZygpfSl9KS5iaW5kKFwicGFnZWJlZm9yZWhpZGVcIixmdW5jdGlvbihlLGYpe2IuZGlzYWJsZVBhZ2Vab29tJiZhLm1vYmlsZS56b29tLmVuYWJsZSh0cnVlKTtiLnVwZGF0ZVBhZ2VQYWRkaW5nJiZhKHMpLnVuYmluZChcInRocm90dGxlZHJlc2l6ZS5cIitjLndpZGdldE5hbWUpO2lmKGIudHJhY2tQZXJzaXN0ZW50VG9vbGJhcnMpe3ZhciBkPWEoXCIudWktZm9vdGVyLWZpeGVkOmpxbURhdGEoaWQpXCIsdGhpcyksZz1hKFwiLnVpLWhlYWRlci1maXhlZDpqcW1EYXRhKGlkKVwiLHRoaXMpLGg9ZC5sZW5ndGgmJmYubmV4dFBhZ2UmJmEoXCIudWktZm9vdGVyLWZpeGVkOmpxbURhdGEoaWQ9J1wiK1xuZC5qcW1EYXRhKFwiaWRcIikrXCInKVwiLGYubmV4dFBhZ2UpLGo9Zy5sZW5ndGgmJmYubmV4dFBhZ2UmJmEoXCIudWktaGVhZGVyLWZpeGVkOmpxbURhdGEoaWQ9J1wiK2cuanFtRGF0YShcImlkXCIpK1wiJylcIixmLm5leHRQYWdlKSxoPWh8fGEoKTtpZihoLmxlbmd0aHx8ai5sZW5ndGgpaC5hZGQoaikuYXBwZW5kVG8oYS5tb2JpbGUucGFnZUNvbnRhaW5lciksZi5uZXh0UGFnZS5vbmUoXCJwYWdlc2hvd1wiLGZ1bmN0aW9uKCl7aC5hZGQoaikuYXBwZW5kVG8odGhpcyl9KX19KX0sX3Zpc2libGU6dHJ1ZSx1cGRhdGVQYWdlUGFkZGluZzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudCxiPWEuaXMoXCIudWktaGVhZGVyXCIpO3RoaXMub3B0aW9ucy5mdWxsc2NyZWVufHxhLmNsb3Nlc3QoXCIudWktcGFnZVwiKS5jc3MoXCJwYWRkaW5nLVwiKyhiP1widG9wXCI6XCJib3R0b21cIiksYS5vdXRlckhlaWdodCgpKX0sX3VzZVRyYW5zaXRpb246ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcy5lbGVtZW50LGU9YShzKS5zY3JvbGxUb3AoKSxcbmY9Yi5oZWlnaHQoKSxkPWIuY2xvc2VzdChcIi51aS1wYWdlXCIpLmhlaWdodCgpLGc9YS5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCksYj1iLmlzKFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIik/XCJoZWFkZXJcIjpcImZvb3RlclwiO3JldHVybiFjJiYodGhpcy5vcHRpb25zLnRyYW5zaXRpb24mJnRoaXMub3B0aW9ucy50cmFuc2l0aW9uIT09XCJub25lXCImJihiPT09XCJoZWFkZXJcIiYmIXRoaXMub3B0aW9ucy5mdWxsc2NyZWVuJiZlPmZ8fGI9PT1cImZvb3RlclwiJiYhdGhpcy5vcHRpb25zLmZ1bGxzY3JlZW4mJmUrZzxkLWYpfHx0aGlzLm9wdGlvbnMuZnVsbHNjcmVlbil9LHNob3c6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50O3RoaXMuX3VzZVRyYW5zaXRpb24oYSk/Yi5yZW1vdmVDbGFzcyhcIm91dCB1aS1maXhlZC1oaWRkZW5cIikuYWRkQ2xhc3MoXCJpblwiKTpiLnJlbW92ZUNsYXNzKFwidWktZml4ZWQtaGlkZGVuXCIpO3RoaXMuX3Zpc2libGU9dHJ1ZX0saGlkZTpmdW5jdGlvbihhKXt2YXIgYj1cbnRoaXMuZWxlbWVudCxlPVwib3V0XCIrKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uPT09XCJzbGlkZVwiP1wiIHJldmVyc2VcIjpcIlwiKTt0aGlzLl91c2VUcmFuc2l0aW9uKGEpP2IuYWRkQ2xhc3MoZSkucmVtb3ZlQ2xhc3MoXCJpblwiKS5hbmltYXRpb25Db21wbGV0ZShmdW5jdGlvbigpe2IuYWRkQ2xhc3MoXCJ1aS1maXhlZC1oaWRkZW5cIikucmVtb3ZlQ2xhc3MoZSl9KTpiLmFkZENsYXNzKFwidWktZml4ZWQtaGlkZGVuXCIpLnJlbW92ZUNsYXNzKGUpO3RoaXMuX3Zpc2libGU9ZmFsc2V9LHRvZ2dsZTpmdW5jdGlvbigpe3RoaXNbdGhpcy5fdmlzaWJsZT9cImhpZGVcIjpcInNob3dcIl0oKX0sX2JpbmRUb2dnbGVIYW5kbGVyczpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj1jLm9wdGlvbnM7Yy5lbGVtZW50LmNsb3Nlc3QoXCIudWktcGFnZVwiKS5iaW5kKFwidmNsaWNrXCIsZnVuY3Rpb24oZSl7Yi50YXBUb2dnbGUmJiFhKGUudGFyZ2V0KS5jbG9zZXN0KGIudGFwVG9nZ2xlQmxhY2tsaXN0KS5sZW5ndGgmJmMudG9nZ2xlKCl9KS5iaW5kKFwiZm9jdXNpbiBmb2N1c291dFwiLFxuZnVuY3Rpb24oZSl7aWYoc2NyZWVuLndpZHRoPDUwMCYmYShlLnRhcmdldCkuaXMoYi5oaWRlRHVyaW5nRm9jdXMpJiYhYShlLnRhcmdldCkuY2xvc2VzdChcIi51aS1oZWFkZXItZml4ZWQsIC51aS1mb290ZXItZml4ZWRcIikubGVuZ3RoKWNbZS50eXBlPT09XCJmb2N1c2luXCImJmMuX3Zpc2libGU/XCJoaWRlXCI6XCJzaG93XCJdKCl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLWhlYWRlci1maXhlZCB1aS1mb290ZXItZml4ZWQgdWktaGVhZGVyLWZ1bGxzY3JlZW4gdWktZm9vdGVyLWZ1bGxzY3JlZW4gaW4gb3V0IGZhZGUgc2xpZGVkb3duIHNsaWRldXAgdWktZml4ZWQtaGlkZGVuXCIpO3RoaXMuZWxlbWVudC5jbG9zZXN0KFwiLnVpLXBhZ2VcIikucmVtb3ZlQ2xhc3MoXCJ1aS1wYWdlLWhlYWRlci1maXhlZCB1aS1wYWdlLWZvb3Rlci1maXhlZCB1aS1wYWdlLWhlYWRlci1mdWxsc2NyZWVuIHVpLXBhZ2UtZm9vdGVyLWZ1bGxzY3JlZW5cIil9fSk7YShrKS5iaW5kKFwicGFnZWNyZWF0ZSBjcmVhdGVcIixcbmZ1bmN0aW9uKGMpe2EoYy50YXJnZXQpLmpxbURhdGEoXCJmdWxsc2NyZWVuXCIpJiZhKGEubW9iaWxlLmZpeGVkdG9vbGJhci5wcm90b3R5cGUub3B0aW9ucy5pbml0U2VsZWN0b3IsYy50YXJnZXQpLm5vdChcIjpqcW1EYXRhKGZ1bGxzY3JlZW4pXCIpLmpxbURhdGEoXCJmdWxsc2NyZWVuXCIsdHJ1ZSk7YS5tb2JpbGUuZml4ZWR0b29sYmFyLnByb3RvdHlwZS5lbmhhbmNlV2l0aGluKGMudGFyZ2V0KX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oYSxjKXtpZigvaVBob25lfGlQYWR8aVBvZC8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJBcHBsZVdlYktpdFwiKT4tMSl7dmFyIGI9YS5tb2JpbGUuem9vbSxlLGYsZCxnLGg7YShjKS5iaW5kKFwib3JpZW50YXRpb25jaGFuZ2UuaW9zb3JpZW50YXRpb25maXhcIixiLmVuYWJsZSkuYmluZChcImRldmljZW1vdGlvbi5pb3NvcmllbnRhdGlvbmZpeFwiLGZ1bmN0aW9uKGEpe2U9YS5vcmlnaW5hbEV2ZW50O1xuaD1lLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHk7Zj1NYXRoLmFicyhoLngpO2Q9TWF0aC5hYnMoaC55KTtnPU1hdGguYWJzKGgueik7IWMub3JpZW50YXRpb24mJihmPjd8fChnPjYmJmQ8OHx8Zzw4JiZkPjYpJiZmPjUpP2IuZW5hYmxlZCYmYi5kaXNhYmxlKCk6Yi5lbmFibGVkfHxiLmVuYWJsZSgpfSl9fSkoalF1ZXJ5LHRoaXMpOyhmdW5jdGlvbihhLGMpe2Z1bmN0aW9uIGIoKXt2YXIgYj1hKFwiLlwiK2EubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzKS5maXJzdCgpO2guY3NzKHt0b3A6YS5zdXBwb3J0LnNjcm9sbFRvcCYmZy5zY3JvbGxUb3AoKStnLmhlaWdodCgpLzJ8fGIubGVuZ3RoJiZiLm9mZnNldCgpLnRvcHx8MTAwfSl9ZnVuY3Rpb24gZSgpe3ZhciBjPWgub2Zmc2V0KCksZD1nLnNjcm9sbFRvcCgpLGY9YS5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCk7aWYoYy50b3A8ZHx8Yy50b3AtZD5mKWguYWRkQ2xhc3MoXCJ1aS1sb2FkZXItZmFrZWZpeFwiKSxiKCksZy51bmJpbmQoXCJzY3JvbGxcIixcbmUpLmJpbmQoXCJzY3JvbGxcIixiKX1mdW5jdGlvbiBmKCl7ZC5yZW1vdmVDbGFzcyhcInVpLW1vYmlsZS1yZW5kZXJpbmdcIil9dmFyIGQ9YShcImh0bWxcIik7YShcImhlYWRcIik7dmFyIGc9YShjKTthKGMuZG9jdW1lbnQpLnRyaWdnZXIoXCJtb2JpbGVpbml0XCIpO2lmKGEubW9iaWxlLmdyYWRlQSgpKXtpZihhLm1vYmlsZS5hamF4QmxhY2tsaXN0KWEubW9iaWxlLmFqYXhFbmFibGVkPWZhbHNlO2QuYWRkQ2xhc3MoXCJ1aS1tb2JpbGUgdWktbW9iaWxlLXJlbmRlcmluZ1wiKTtzZXRUaW1lb3V0KGYsNUUzKTt2YXIgaD1hKFwiPGRpdiBjbGFzcz0ndWktbG9hZGVyJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWxvYWRpbmcnPjwvc3Bhbj48aDE+PC9oMT48L2Rpdj5cIik7YS5leHRlbmQoYS5tb2JpbGUse3Nob3dQYWdlTG9hZGluZ01zZzpmdW5jdGlvbihiLGMsZil7ZC5hZGRDbGFzcyhcInVpLWxvYWRpbmdcIik7aWYoYS5tb2JpbGUubG9hZGluZ01lc3NhZ2Upe3ZhciBrPWZ8fGEubW9iaWxlLmxvYWRpbmdNZXNzYWdlVGV4dFZpc2libGU7XG5iPWJ8fGEubW9iaWxlLmxvYWRpbmdNZXNzYWdlVGhlbWU7aC5hdHRyKFwiY2xhc3NcIixcInVpLWxvYWRlciB1aS1jb3JuZXItYWxsIHVpLWJvZHktXCIrKGJ8fFwiYVwiKStcIiB1aS1sb2FkZXItXCIrKGs/XCJ2ZXJib3NlXCI6XCJkZWZhdWx0XCIpKyhmP1wiIHVpLWxvYWRlci10ZXh0b25seVwiOlwiXCIpKS5maW5kKFwiaDFcIikudGV4dChjfHxhLm1vYmlsZS5sb2FkaW5nTWVzc2FnZSkuZW5kKCkuYXBwZW5kVG8oYS5tb2JpbGUucGFnZUNvbnRhaW5lcik7ZSgpO2cuYmluZChcInNjcm9sbFwiLGUpfX0saGlkZVBhZ2VMb2FkaW5nTXNnOmZ1bmN0aW9uKCl7ZC5yZW1vdmVDbGFzcyhcInVpLWxvYWRpbmdcIik7YS5tb2JpbGUubG9hZGluZ01lc3NhZ2UmJmgucmVtb3ZlQ2xhc3MoXCJ1aS1sb2FkZXItZmFrZWZpeFwiKTthKGMpLnVuYmluZChcInNjcm9sbFwiLGIpO2EoYykudW5iaW5kKFwic2Nyb2xsXCIsZSl9LGluaXRpYWxpemVQYWdlOmZ1bmN0aW9uKCl7dmFyIGI9YShcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKSwgOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIik7XG5iLmxlbmd0aHx8KGI9YShcImJvZHlcIikud3JhcElubmVyKFwiPGRpdiBkYXRhLVwiK2EubW9iaWxlLm5zK1wicm9sZT0ncGFnZSc+PC9kaXY+XCIpLmNoaWxkcmVuKDApKTtiLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpO2IuanFtRGF0YShcInVybFwiKXx8Yi5hdHRyKFwiZGF0YS1cIithLm1vYmlsZS5ucytcInVybFwiLGIuYXR0cihcImlkXCIpfHxsb2NhdGlvbi5wYXRobmFtZStsb2NhdGlvbi5zZWFyY2gpfSk7YS5tb2JpbGUuZmlyc3RQYWdlPWIuZmlyc3QoKTthLm1vYmlsZS5wYWdlQ29udGFpbmVyPWIuZmlyc3QoKS5wYXJlbnQoKS5hZGRDbGFzcyhcInVpLW1vYmlsZS12aWV3cG9ydFwiKTtnLnRyaWdnZXIoXCJwYWdlY29udGFpbmVyY3JlYXRlXCIpO2EubW9iaWxlLnNob3dQYWdlTG9hZGluZ01zZygpO2YoKTshYS5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWR8fCFhLm1vYmlsZS5wYXRoLnN0cmlwSGFzaChsb2NhdGlvbi5oYXNoKT9hLm1vYmlsZS5jaGFuZ2VQYWdlKGEubW9iaWxlLmZpcnN0UGFnZSxcbnt0cmFuc2l0aW9uOlwibm9uZVwiLHJldmVyc2U6dHJ1ZSxjaGFuZ2VIYXNoOmZhbHNlLGZyb21IYXNoQ2hhbmdlOnRydWV9KTpnLnRyaWdnZXIoXCJoYXNoY2hhbmdlXCIsW3RydWVdKX19KTthLm1vYmlsZS5fcmVnaXN0ZXJJbnRlcm5hbEV2ZW50cygpO2EoZnVuY3Rpb24oKXtjLnNjcm9sbFRvKDAsMSk7YS5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGw9IWEuc3VwcG9ydC5zY3JvbGxUb3B8fGEoYykuc2Nyb2xsVG9wKCk9PT0xPzA6MTthLmZuLmNvbnRyb2xncm91cCYmYShrKS5iaW5kKFwicGFnZWNyZWF0ZSBjcmVhdGVcIixmdW5jdGlvbihiKXthKFwiOmpxbURhdGEocm9sZT0nY29udHJvbGdyb3VwJylcIixiLnRhcmdldCkuanFtRW5oYW5jZWFibGUoKS5jb250cm9sZ3JvdXAoe2V4Y2x1ZGVJbnZpc2libGU6ZmFsc2V9KX0pO2EubW9iaWxlLmF1dG9Jbml0aWFsaXplUGFnZSYmYS5tb2JpbGUuaW5pdGlhbGl6ZVBhZ2UoKTtnLmxvYWQoYS5tb2JpbGUuc2lsZW50U2Nyb2xsKX0pfX0pKGpRdWVyeSxcbnRoaXMpfSk7XG4iLCIvKlxuICogalF1ZXJ5IE1vYmlsZSBGcmFtZXdvcmsgOiBwbHVnaW4gdG8gcHJvdmlkZSBhIGRhdGUgYW5kIHRpbWUgcGlja2VyLlxuICogQ29weXJpZ2h0IChjKSBKVFNhZ2VcbiAqIENDIDMuMCBBdHRyaWJ1dGlvbi4gIE1heSBiZSByZWxpY2Vuc2VkIHdpdGhvdXQgcGVybWlzc2lvbi9ub3RpZmNhdGlvbi5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qdHNhZ2UvanF1ZXJ5LW1vYmlsZS1kYXRlYm94XG4gKi9cblxuKGZ1bmN0aW9uKGEsYil7RGF0ZS5wcm90b3R5cGUuZ2V0SVNPPWZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZyh0aGlzLmdldEZ1bGxZZWFyKCkpK1wiLVwiKygodGhpcy5nZXRNb250aCgpPDkpP1wiMFwiOlwiXCIpK1N0cmluZyh0aGlzLmdldE1vbnRoKCkrMSkrXCItXCIrKCh0aGlzLmdldERhdGUoKTwxMCk/XCIwXCI6XCJcIikrU3RyaW5nKHRoaXMuZ2V0RGF0ZSgpKX07RGF0ZS5wcm90b3R5cGUuZ2V0Q29tcD1mdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmdldElTTygpLnJlcGxhY2UoLy0vZyxcIlwiKSwxMCl9O0RhdGUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb3B5bW9kKCl9O0RhdGUucHJvdG90eXBlLmNvcHltb2Q9ZnVuY3Rpb24oYyxkKXtpZih0eXBlb2YgYz09PVwidW5kZWZpbmVkXCIpe2M9WzAsMCwwLDAsMCwwXX1pZih0eXBlb2YgZD09PVwidW5kZWZpbmVkXCIpe2Q9WzAsMCwwLDAsMCwwXX13aGlsZShjLmxlbmd0aDw2KXtjLnB1c2goMCl9d2hpbGUoZC5sZW5ndGg8Nil7ZC5wdXNoKDApfXJldHVybiBuZXcgRGF0ZSgoKGRbMF0+MCk/ZFswXTp0aGlzLmdldEZ1bGxZZWFyKCkrY1swXSksKChkWzFdPjApP2RbMV06dGhpcy5nZXRNb250aCgpK2NbMV0pLCgoZFsyXT4wKT9kWzJdOnRoaXMuZ2V0RGF0ZSgpK2NbMl0pLCgoZFszXT4wKT9kWzNdOnRoaXMuZ2V0SG91cnMoKStjWzNdKSwoKGRbNF0+MCk/ZFs0XTp0aGlzLmdldE1pbnV0ZXMoKStjWzRdKSwoKGRbNV0+MCk/ZFs1XTp0aGlzLmdldFNlY29uZHMoKStjWzVdKSwwKX07RGF0ZS5wcm90b3R5cGUuZ2V0RXBvY2g9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5nZXRUaW1lKCktdGhpcy5nZXRNaWxsaXNlY29uZHMoKSkvMTAwMH07RGF0ZS5wcm90b3R5cGUuYWRqdXN0PWZ1bmN0aW9uKGQsYyl7c3dpdGNoKGQpe2Nhc2VcInlcIjp0aGlzLnNldEZ1bGxZZWFyKHRoaXMuZ2V0RnVsbFllYXIoKStjKTticmVhaztjYXNlXCJtXCI6dGhpcy5zZXRNb250aCh0aGlzLmdldE1vbnRoKCkrYyk7YnJlYWs7Y2FzZVwiZFwiOnRoaXMuc2V0RGF0ZSh0aGlzLmdldERhdGUoKStjKTticmVhaztjYXNlXCJoXCI6dGhpcy5zZXRIb3Vycyh0aGlzLmdldEhvdXJzKCkrYyk7YnJlYWs7Y2FzZVwiaVwiOnRoaXMuc2V0TWludXRlcyh0aGlzLmdldE1pbnV0ZXMoKStjKTticmVhaztjYXNlXCJzXCI6dGhpcy5zZXRTZWNvbmRzKHRoaXMuZ2V0U2Vjb25kcygpK2MpO2JyZWFrfXJldHVybiB0aGlzLmdldFRpbWUoKX07YS53aWRnZXQoXCJtb2JpbGUuZGF0ZWJveFwiLGEubW9iaWxlLndpZGdldCx7b3B0aW9uczp7dmVyc2lvbjpcIjEuMC4xLTIwMTIwMjI3MDBcIix0aGVtZTpmYWxzZSxkZWZhdWx0VGhlbWU6XCJjXCIscGlja1BhZ2VUaGVtZTpcImJcIixwaWNrUGFnZUlucHV0VGhlbWU6XCJlXCIscGlja1BhZ2VCdXR0b25UaGVtZTpcImFcIixwaWNrUGFnZUhpZ2hCdXR0b25UaGVtZTpcImVcIixwaWNrUGFnZU9IaWdoQnV0dG9uVGhlbWU6XCJlXCIscGlja1BhZ2VPQUhpZ2hCdXR0b25UaGVtZTpcImVcIixwaWNrUGFnZU9ESGlnaEJ1dHRvblRoZW1lOlwiZVwiLHBpY2tQYWdlVG9kYXlCdXR0b25UaGVtZTpcImVcIixwaWNrUGFnZVNsaWRlQnV0dG9uVGhlbWU6XCJkXCIscGlja1BhZ2VGbGlwQnV0dG9uVGhlbWU6XCJiXCIsZm9yY2VJbmhlcml0VGhlbWU6ZmFsc2UsY2VudGVyV2luZG93OmZhbHNlLGNhbEhpZ2hUb2RheTp0cnVlLGNhbEhpZ2hQaWNrZWQ6dHJ1ZSx0cmFuc2l0aW9uOlwicG9wXCIsbm9BbmltYXRpb246ZmFsc2UsZGlzYWJsZU1hbnVhbElucHV0OmZhbHNlLGRpc2FibGVkOmZhbHNlLHdoZWVsRXhpc3RzOmZhbHNlLHN3aXBlRW5hYmxlZDp0cnVlLHppbmRleDpcIjUwMFwiLGRlYnVnOmZhbHNlLGNsaWNrRXZlbnQ6XCJ2Y2xpY2tcIixudW1iZXJJbnB1dEVuaGFuY2U6dHJ1ZSxpbnRlcm5hbElucHV0VHlwZTpcInRleHRcIixyZXNpemVMaXN0ZW5lcjp0cnVlLHRpdGxlRGlhbG9nTGFiZWw6ZmFsc2UsbWVyaWRpZW1MZXR0ZXJzOltcIkFNXCIsXCJQTVwiXSx0aW1lT3V0cHV0T3ZlcnJpZGU6ZmFsc2UsdGltZUZvcm1hdHM6e1wiMTJcIjpcIiVsOiVNICVwXCIsXCIyNFwiOlwiJWs6JU1cIn0sZHVyYXRpb25Gb3JtYXQ6XCJERCBkZGQsIGhoOmlpOnNzXCIsdGltZU91dHB1dDpmYWxzZSxyb2xsb3Zlck1vZGU6e206dHJ1ZSxkOnRydWUsaDp0cnVlLGk6dHJ1ZSxzOnRydWV9LG1vZGU6XCJkYXRlYm94XCIsY2FsU2hvd0RheXM6dHJ1ZSxjYWxTaG93T25seU1vbnRoOmZhbHNlLHVzZURpYWxvZ0ZvcmNlVHJ1ZTpmYWxzZSx1c2VEaWFsb2dGb3JjZUZhbHNlOnRydWUsZnVsbFNjcmVlbjpmYWxzZSxmdWxsU2NyZWVuQWx3YXlzOmZhbHNlLHVzZURpYWxvZzpmYWxzZSx1c2VNb2RhbDpmYWxzZSx1c2VJbmxpbmU6ZmFsc2UsdXNlSW5saW5lQmxpbmQ6ZmFsc2UsdXNlQ2xlYXJCdXR0b246ZmFsc2UsY29sbGFwc2VCdXR0b25zOmZhbHNlLG5vQnV0dG9uRm9jdXNNb2RlOmZhbHNlLGZvY3VzTW9kZTpmYWxzZSxub0J1dHRvbjpmYWxzZSxub1NldEJ1dHRvbjpmYWxzZSxvcGVuQ2FsbGJhY2s6ZmFsc2Usb3BlbkNhbGxiYWNrQXJnczpbXSxjbG9zZUNhbGxiYWNrOmZhbHNlLGNsb3NlQ2FsbGJhY2tBcmdzOltdLG9wZW46ZmFsc2UsbmVzdGVkQm94OmZhbHNlLGxhc3REdXJhdGlvbjpmYWxzZSxmaWVsZHNPcmRlcjpmYWxzZSxmaWVsZHNPcmRlck92ZXJyaWRlOmZhbHNlLGR1cmF0aW9uT3JkZXI6W1wiZFwiLFwiaFwiLFwiaVwiLFwic1wiXSxkZWZhdWx0RGF0ZUZvcm1hdDpcIiVZLSVtLSVkXCIsZGF0ZUZvcm1hdDpmYWxzZSx0aW1lRm9ybWF0T3ZlcnJpZGU6ZmFsc2UsaGVhZGVyRm9ybWF0OmZhbHNlLGRhdGVPdXRwdXQ6ZmFsc2UsbWludXRlU3RlcDoxLGNhbFRvZGF5QnV0dG9uOmZhbHNlLGNhbFdlZWtNb2RlOmZhbHNlLGNhbFdlZWtNb2RlRmlyc3REYXk6MSxjYWxXZWVrTW9kZUhpZ2hsaWdodDp0cnVlLGNhbFN0YXJ0RGF5OmZhbHNlLGRlZmF1bHRQaWNrZXJWYWx1ZTpmYWxzZSxkZWZhdWx0RGF0ZTpmYWxzZSxtaW5ZZWFyOmZhbHNlLG1heFllYXI6ZmFsc2UsYWZ0ZXJUb2RheTpmYWxzZSxiZWZvcmVUb2RheTpmYWxzZSxtYXhEYXlzOmZhbHNlLG1pbkRheXM6ZmFsc2UsaGlnaERheXM6ZmFsc2UsaGlnaERhdGVzOmZhbHNlLGhpZ2hEYXRlc0FsdDpmYWxzZSxibGFja0RheXM6ZmFsc2UsYmxhY2tEYXRlczpmYWxzZSxlbmFibGVEYXRlczpmYWxzZSxmaXhEYXRlQXJyYXlzOmZhbHNlLGR1cmF0aW9uU3RlcHBlcnM6e2Q6MSxoOjEsaToxLHM6MX0sdXNlTGFuZzpcImVuXCIsbGFuZzp7ZW46e3NldERhdGVCdXR0b25MYWJlbDpcIlNldCBEYXRlXCIsc2V0VGltZUJ1dHRvbkxhYmVsOlwiU2V0IFRpbWVcIixzZXREdXJhdGlvbkJ1dHRvbkxhYmVsOlwiU2V0IER1cmF0aW9uXCIsY2FsVG9kYXlCdXR0b25MYWJlbDpcIkp1bXAgdG8gVG9kYXlcIix0aXRsZURhdGVEaWFsb2dMYWJlbDpcIlNldCBEYXRlXCIsdGl0bGVUaW1lRGlhbG9nTGFiZWw6XCJTZXQgVGltZVwiLGRheXNPZldlZWs6W1wiU3VuZGF5XCIsXCJNb25kYXlcIixcIlR1ZXNkYXlcIixcIldlZG5lc2RheVwiLFwiVGh1cnNkYXlcIixcIkZyaWRheVwiLFwiU2F0dXJkYXlcIl0sZGF5c09mV2Vla1Nob3J0OltcIlN1XCIsXCJNb1wiLFwiVHVcIixcIldlXCIsXCJUaFwiLFwiRnJcIixcIlNhXCJdLG1vbnRoc09mWWVhcjpbXCJKYW51YXJ5XCIsXCJGZWJydWFyeVwiLFwiTWFyY2hcIixcIkFwcmlsXCIsXCJNYXlcIixcIkp1bmVcIixcIkp1bHlcIixcIkF1Z3VzdFwiLFwiU2VwdGVtYmVyXCIsXCJPY3RvYmVyXCIsXCJOb3ZlbWJlclwiLFwiRGVjZW1iZXJcIl0sbW9udGhzT2ZZZWFyU2hvcnQ6W1wiSmFuXCIsXCJGZWJcIixcIk1hclwiLFwiQXByXCIsXCJNYXlcIixcIkp1blwiLFwiSnVsXCIsXCJBdWdcIixcIlNlcFwiLFwiT2N0XCIsXCJOb3ZcIixcIkRlY1wiXSxkdXJhdGlvbkxhYmVsOltcIkRheXNcIixcIkhvdXJzXCIsXCJNaW51dGVzXCIsXCJTZWNvbmRzXCJdLGR1cmF0aW9uRGF5czpbXCJEYXlcIixcIkRheXNcIl0sdGltZUZvcm1hdDoyNCxoZWFkZXJGb3JtYXQ6XCIlQSwgJUIgJS1kLCAlWVwiLHRvb2x0aXA6XCJPcGVuIERhdGUgUGlja2VyXCIsbmV4dE1vbnRoOlwiTmV4dCBNb250aFwiLHByZXZNb250aDpcIlByZXZpb3VzIE1vbnRoXCIsZGF0ZUZpZWxkT3JkZXI6W1wibVwiLFwiZFwiLFwieVwiXSx0aW1lRmllbGRPcmRlcjpbXCJoXCIsXCJpXCIsXCJhXCJdLHNsaWRlRmllbGRPcmRlcjpbXCJ5XCIsXCJtXCIsXCJkXCJdLGRhdGVGb3JtYXQ6XCIlWS0lbS0lZFwiLHVzZUFyYWJpY0luZGljOmZhbHNlLGlzUlRMOmZhbHNlLGNhbFN0YXJ0RGF5OjAsY2xlYXJCdXR0b246XCJDbGVhclwifX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXthKHRoaXMucGlja1BhZ2UpLnJlbW92ZSgpO2EuV2lkZ2V0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyl9LF9kYXRlYm94SGFuZGxlcjpmdW5jdGlvbihjLGUpe3ZhciBkPWEodGhpcykuZGF0YShcImRhdGVib3hcIik7aWYoIWMuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7c3dpdGNoKGUubWV0aG9kKXtjYXNlXCJjbG9zZVwiOmQuY2xvc2UoZS5mcm9tQ2xvc2VCdXR0b24pO2JyZWFrO2Nhc2VcIm9wZW5cIjpkLm9wZW4oKTticmVhaztjYXNlXCJzZXRcIjphKHRoaXMpLnZhbChlLnZhbHVlKTthKHRoaXMpLnRyaWdnZXIoXCJjaGFuZ2VcIik7YnJlYWs7Y2FzZVwiZG9zZXRcIjppZihhLmluQXJyYXkoZC5vcHRpb25zLm1vZGUsW1widGltZWJveFwiLFwiZHVyYXRpb25ib3hcIixcInRpbWVmbGlwYm94XCJdKT4tMSl7YSh0aGlzKS50cmlnZ2VyKFwiZGF0ZWJveFwiLHttZXRob2Q6XCJzZXRcIix2YWx1ZTpkLl9mb3JtYXRUaW1lKGQudGhlRGF0ZSksZGF0ZTpkLnRoZURhdGV9KX1lbHNle2EodGhpcykudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwic2V0XCIsdmFsdWU6ZC5fZm9ybWF0RGF0ZShkLnRoZURhdGUpLGRhdGU6ZC50aGVEYXRlfSl9YnJlYWs7Y2FzZVwiZG9vZmZzZXRcIjpkLl9vZmZzZXQoZS50eXBlLGUuYW1vdW50LHRydWUpO2JyZWFrO2Nhc2VcImRvcmVmcmVzaFwiOmQuX3VwZGF0ZSgpO2JyZWFrO2Nhc2VcImRvcmVzZXRcIjpkLmhhcmRyZXNldCgpO2JyZWFrO2Nhc2VcImRvY2xlYXJcIjphKHRoaXMpLnZhbChcIlwiKTticmVha319fSxfZ2V0Q29vcmRzOmZ1bmN0aW9uKGcpe3ZhciBxPWcsaj1nLmZvY3VzZWRFbC5vZmZzZXQoKSxuPWcuZm9jdXNlZEVsLm91dGVySGVpZ2h0KCksaT1nLmZvY3VzZWRFbC5vdXRlcldpZHRoKCksZT1hLm1vYmlsZS5hY3RpdmVQYWdlLndpZHRoKCksaD1hKHdpbmRvdykuc2Nyb2xsVG9wKCkscD1hKHdpbmRvdykuaGVpZ2h0KCksbz1nLnBpY2tlckNvbnRlbnQuaW5uZXJXaWR0aCgpLGw9Zy5waWNrZXJDb250ZW50Lm91dGVySGVpZ2h0KCksZD1mYWxzZSxmPTAsaz0wLGM9MCxyPWEoZG9jdW1lbnQpLmhlaWdodCgpLG09e2hpZ2g6YSh3aW5kb3cpLmhlaWdodCgpLHdpZHRoOmEubW9iaWxlLmFjdGl2ZVBhZ2Uud2lkdGgoKSxmdWxsVG9wOmEod2luZG93KS5zY3JvbGxUb3AoKSxmdWxsTGVmdDphKHdpbmRvdykuc2Nyb2xsTGVmdCgpfTtpZihnLm9wdGlvbnMuY2VudGVyV2luZG93KXttLndpblRvcD1oKygocC8yKS0obC8yKSk7bS53aW5MZWZ0PSgoZS8yKS0oby8yKSl9ZWxzZXtkPWEoXCIudWktaGVhZGVyXCIsYS5tb2JpbGUuYWN0aXZlUGFnZSk7aWYoZC5sZW5ndGg+MCl7aWYoZC5pcyhcIi51aS1oZWFkZXItZml4ZWRcIikpe2s9KGQub3V0ZXJIZWlnaHQoKSsyKX1lbHNle2YrPShkLm91dGVySGVpZ2h0KCkrMil9fWQ9YShcIi51aS1mb290ZXJcIixhLm1vYmlsZS5hY3RpdmVQYWdlKTtpZihkLmxlbmd0aD4wKXtpZihkLmlzKFwiLnVpLWZvb3Rlci1maXhlZFwiKSl7Yz0oZC5vdXRlckhlaWdodCgpKzIpfWVsc2V7ci09KGQub3V0ZXJIZWlnaHQoKSsyKX19bS53aW5MZWZ0PShqLmxlZnQrKGkvMikpLShvLzIpO2lmKGU8NDUwKXttLndpbkxlZnQ9KChlLzIpLShvLzIpKX1tLndpblRvcD0oai50b3ArKG4vMikpLShsLzIpO2lmKChtLndpblRvcCtsKT5yKXttLndpblRvcCs9KHItKG0ud2luVG9wK2wpKX1pZihjPjAmJigobS53aW5Ub3ArbC1oKT4ocC1jKSkpe20ud2luVG9wPSgocC1jK2gtbCkpfWlmKG0ud2luVG9wPGYpe20ud2luVG9wPWZ9aWYoaz4wJiYobS53aW5Ub3A8KGgraykpKXttLndpblRvcD1oK2t9ZWxzZXtpZihoPmYmJmg+bS53aW5Ub3Ape20ud2luVG9wPWgrMn19fXJldHVybiBtfSxfZml4QXJyYXk6ZnVuY3Rpb24oZCl7dmFyIGM9MCxlPXRoaXMsZz1uZXcgUmVnRXhwKFwiXihbMC05XSspLShbMC05XSspLShbMC05XSspJFwiKSxmPW51bGw7aWYoYS5pc0FycmF5KGQpKXtmb3IoYz0wO2M8ZC5sZW5ndGg7YysrKXtmPVswXTtmPWcuZXhlYyhkW2NdKTtpZihmLmxlbmd0aD09PTQpe2RbY109ZlsxXStcIi1cIitlLl96UGFkKHBhcnNlSW50KGZbMl0sMTApKStcIi1cIitlLl96UGFkKHBhcnNlSW50KGZbM10sMTApKX19fXJldHVybiBkfSxfZGlnaXRSZXBsYWNlOmZ1bmN0aW9uKGssaCl7dmFyIGo9NDgsYz01NyxkPTE1ODQsZT1udWxsLGY9bnVsbCxnPVwiXCI7aWYoaD09PS0xKXtqKz1kO2MrPWQ7ZD0tMTU4NH1mb3IoZT0wO2U8ay5sZW5ndGg7ZSsrKXtmPWsuY2hhckNvZGVBdChlKTtpZihmPj1qJiZmPD1jKXtnPWcrU3RyaW5nLmZyb21DaGFyQ29kZShmK2QpfWVsc2V7Zz1nK1N0cmluZy5mcm9tQ2hhckNvZGUoZil9fXJldHVybiBnfSxfbWFrZURpc3BsYXlJbmRpYzpmdW5jdGlvbigpe3ZhciBjPXRoaXMsZD10aGlzLm9wdGlvbnM7Yy5waWNrZXJDb250ZW50LmZpbmQoXCIqXCIpLmVhY2goZnVuY3Rpb24oKXtpZihhKHRoaXMpLmNoaWxkcmVuKCkubGVuZ3RoPDEpe2EodGhpcykudGV4dChjLl9kaWdpdFJlcGxhY2UoYSh0aGlzKS50ZXh0KCkpKX1lbHNle2lmKGEodGhpcykuaGFzQ2xhc3MoXCJ1aS1kYXRlYm94LXNsaWRlZGF5XCIpKXthKHRoaXMpLmh0bWwoYy5fZGlnaXRSZXBsYWNlKGEodGhpcykuaHRtbCgpKSl9fX0pO2MucGlja2VyQ29udGVudC5maW5kKFwiaW5wdXRcIikuZWFjaChmdW5jdGlvbigpe2EodGhpcykudmFsKGMuX2RpZ2l0UmVwbGFjZShhKHRoaXMpLnZhbCgpKSl9KX0sX3pQYWQ6ZnVuY3Rpb24oYyl7cmV0dXJuKChjPDEwKT9cIjBcIjpcIlwiKStTdHJpbmcoYyl9LF9tYWtlT3JkOmZ1bmN0aW9uKGQpe3ZhciBjPWQlMTA7aWYoZD45JiZkPDIxKXtyZXR1cm5cInRoXCJ9aWYoYz4zKXtyZXR1cm5cInRoXCJ9cmV0dXJuW1widGhcIixcInN0XCIsXCJuZFwiLFwicmRcIl1bY119LF9pc0ludDpmdW5jdGlvbihjKXtyZXR1cm4oYy50b1N0cmluZygpLnNlYXJjaCgvXlswLTldKyQvKT09PTApfSxfZ2V0Rmlyc3REYXk6ZnVuY3Rpb24oYyl7cmV0dXJuIGMuY29weW1vZChbMF0sWzAsMCwxXSkuZ2V0RGF5KCl9LF9nZXRSZWNEYXlzOmZ1bmN0aW9uKGcsaixkKXtpZihqPT09bnVsbCl7aj10aGlzLnRoZURhdGUuZ2V0TW9udGgoKSsxfWlmKGc9PT1udWxsKXtnPXRoaXMudGhlRGF0ZS5nZXRGdWxsWWVhcigpfXZhciBjPXRoaXMsZj1uZXcgRGF0ZShnLGotMSwxLDAsMCwwLDApLGg9W10sZTtpZihmLmdldERheSgpPmQpe2Yuc2V0RGF0ZSg4LShmLmdldERheSgpLWQpKX1lbHNle2lmKGYuZ2V0RGF5KCk8ZCl7Zi5zZXREYXRlKDErKGQtZi5nZXREYXkoKSkpfX1oWzBdPWYuZ2V0SVNPKCk7Zm9yKGU9MTtlPDY7ZSsrKXtmLnNldERhdGUoZi5nZXREYXRlKCkrNyk7aWYoKGYuZ2V0TW9udGgoKSsxKT09PWope2hbZV09Zi5nZXRJU08oKX19cmV0dXJuIGh9LF9nZXRMYXN0RGF0ZTpmdW5jdGlvbihjKXtyZXR1cm4gMzItYy5jb3B5bW9kKFswXSxbMCwwLDMyLDEzXSkuZ2V0RGF0ZSgpfSxfZ2V0TGFzdERhdGVCZWZvcmU6ZnVuY3Rpb24oYyl7cmV0dXJuIDMyLWMuY29weW1vZChbMCwtMV0sWzAsMCwzMiwxM10pLmdldERhdGUoKX0sX2Zvcm1hdHRlcjpmdW5jdGlvbihlLGQpe3ZhciBjPXRoaXMsZj10aGlzLm9wdGlvbnM7aWYoIWUubWF0Y2goLyUvKSl7ZT1lLnJlcGxhY2UoXCJISFwiLHRoaXMuX3pQYWQoZC5nZXRIb3VycygpKSk7ZT1lLnJlcGxhY2UoXCJHR1wiLGQuZ2V0SG91cnMoKSk7ZT1lLnJlcGxhY2UoXCJoaFwiLHRoaXMuX3pQYWQoKChkLmdldEhvdXJzKCk9PT0wfHxkLmdldEhvdXJzKCk9PT0xMik/MTI6KChkLmdldEhvdXJzKCk8MTIpP2QuZ2V0SG91cnMoKTpkLmdldEhvdXJzKCktMTIpKSkpO2U9ZS5yZXBsYWNlKFwiZ2dcIiwoKGQuZ2V0SG91cnMoKT09PTB8fGQuZ2V0SG91cnMoKT09PTEyKT8xMjooKGQuZ2V0SG91cnMoKTwxMik/ZC5nZXRIb3VycygpOihkLmdldEhvdXJzKCktMTIpKSkpO2U9ZS5yZXBsYWNlKFwiaWlcIix0aGlzLl96UGFkKGQuZ2V0TWludXRlcygpKSk7ZT1lLnJlcGxhY2UoXCJzc1wiLHRoaXMuX3pQYWQoZC5nZXRTZWNvbmRzKCkpKTtlPWUucmVwbGFjZShcIkFBXCIsKChkLmdldEhvdXJzKCk8MTIpP3RoaXMub3B0aW9ucy5tZXJpZGllbUxldHRlcnNbMF0udG9VcHBlckNhc2UoKTp0aGlzLm9wdGlvbnMubWVyaWRpZW1MZXR0ZXJzWzFdLnRvVXBwZXJDYXNlKCkpKTtlPWUucmVwbGFjZShcImFhXCIsKChkLmdldEhvdXJzKCk8MTIpP3RoaXMub3B0aW9ucy5tZXJpZGllbUxldHRlcnNbMF0udG9Mb3dlckNhc2UoKTp0aGlzLm9wdGlvbnMubWVyaWRpZW1MZXR0ZXJzWzFdLnRvTG93ZXJDYXNlKCkpKTtlPWUucmVwbGFjZShcIlNTXCIsdGhpcy5fbWFrZU9yZChkLmdldERhdGUoKSkpO2U9ZS5yZXBsYWNlKFwiWVlZWVwiLGQuZ2V0RnVsbFllYXIoKSk7ZT1lLnJlcGxhY2UoXCJtbW1tXCIsdGhpcy5vcHRpb25zLmxhbmdbdGhpcy5vcHRpb25zLnVzZUxhbmddLm1vbnRoc09mWWVhclNob3J0W2QuZ2V0TW9udGgoKV0pO2U9ZS5yZXBsYWNlKFwibW1tXCIsdGhpcy5vcHRpb25zLmxhbmdbdGhpcy5vcHRpb25zLnVzZUxhbmddLm1vbnRoc09mWWVhcltkLmdldE1vbnRoKCldKTtlPWUucmVwbGFjZShcIk1NXCIsdGhpcy5felBhZChkLmdldE1vbnRoKCkrMSkpO2U9ZS5yZXBsYWNlKFwibW1cIixkLmdldE1vbnRoKCkrMSk7ZT1lLnJlcGxhY2UoXCJkZGRkXCIsdGhpcy5vcHRpb25zLmxhbmdbdGhpcy5vcHRpb25zLnVzZUxhbmddLmRheXNPZldlZWtTaG9ydFtkLmdldERheSgpXSk7ZT1lLnJlcGxhY2UoXCJkZGRcIix0aGlzLm9wdGlvbnMubGFuZ1t0aGlzLm9wdGlvbnMudXNlTGFuZ10uZGF5c09mV2Vla1tkLmdldERheSgpXSk7ZT1lLnJlcGxhY2UoXCJERFwiLHRoaXMuX3pQYWQoZC5nZXREYXRlKCkpKTtlPWUucmVwbGFjZShcImRkXCIsZC5nZXREYXRlKCkpO2U9ZS5yZXBsYWNlKFwiVVVcIixkLmdldEVwb2NoKCkpfWVsc2V7ZT1lLnJlcGxhY2UoLyUoMHwtKSooW2Etel0pL2dpLGZ1bmN0aW9uKGcsaSxrLGosaCl7c3dpdGNoKGspe2Nhc2VcIiVcIjpyZXR1cm5cIiVcIjtjYXNlXCJhXCI6cmV0dXJuIGYubGFuZ1tmLnVzZUxhbmddLmRheXNPZldlZWtTaG9ydFtkLmdldERheSgpXTtjYXNlXCJBXCI6cmV0dXJuIGYubGFuZ1tmLnVzZUxhbmddLmRheXNPZldlZWtbZC5nZXREYXkoKV07Y2FzZVwiYlwiOnJldHVybiBmLmxhbmdbZi51c2VMYW5nXS5tb250aHNPZlllYXJTaG9ydFtkLmdldE1vbnRoKCldO2Nhc2VcIkJcIjpyZXR1cm4gZi5sYW5nW2YudXNlTGFuZ10ubW9udGhzT2ZZZWFyW2QuZ2V0TW9udGgoKV07Y2FzZVwiQ1wiOnJldHVybiBkLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKS5zdWJzdHIoMCwyKTtjYXNlXCJkXCI6cmV0dXJuKChpPT09XCItXCIpP2QuZ2V0RGF0ZSgpOmMuX3pQYWQoZC5nZXREYXRlKCkpKTtjYXNlXCJIXCI6Y2FzZVwia1wiOnJldHVybigoaT09PVwiLVwiKT9kLmdldEhvdXJzKCk6Yy5felBhZChkLmdldEhvdXJzKCkpKTtjYXNlXCJJXCI6Y2FzZVwibFwiOnJldHVybigoaT09PVwiLVwiKT8oKGQuZ2V0SG91cnMoKT09PTB8fGQuZ2V0SG91cnMoKT09PTEyKT8xMjooKGQuZ2V0SG91cnMoKTwxMik/ZC5nZXRIb3VycygpOihkLmdldEhvdXJzKCktMTIpKSk6Yy5felBhZCgoKGQuZ2V0SG91cnMoKT09PTB8fGQuZ2V0SG91cnMoKT09PTEyKT8xMjooKGQuZ2V0SG91cnMoKTwxMik/ZC5nZXRIb3VycygpOmQuZ2V0SG91cnMoKS0xMikpKSk7Y2FzZVwibVwiOnJldHVybigoaT09PVwiLVwiKT9kLmdldE1vbnRoKCkrMTpjLl96UGFkKGQuZ2V0TW9udGgoKSsxKSk7Y2FzZVwiTVwiOnJldHVybigoaT09PVwiLVwiKT9kLmdldE1pbnV0ZXMoKTpjLl96UGFkKGQuZ2V0TWludXRlcygpKSk7Y2FzZVwicFwiOnJldHVybigoZC5nZXRIb3VycygpPDEyKT9mLm1lcmlkaWVtTGV0dGVyc1swXS50b1VwcGVyQ2FzZSgpOmYubWVyaWRpZW1MZXR0ZXJzWzFdLnRvVXBwZXJDYXNlKCkpO2Nhc2VcIlBcIjpyZXR1cm4oKGQuZ2V0SG91cnMoKTwxMik/Zi5tZXJpZGllbUxldHRlcnNbMF0udG9Mb3dlckNhc2UoKTpmLm1lcmlkaWVtTGV0dGVyc1sxXS50b0xvd2VyQ2FzZSgpKTtjYXNlXCJzXCI6cmV0dXJuIGQuZ2V0RXBvY2g7Y2FzZVwiU1wiOnJldHVybigoaT09PVwiLVwiKT9kLmdldFNlY29uZHMoKTpjLl96UGFkKGQuZ2V0U2Vjb25kcygpKSk7Y2FzZVwid1wiOnJldHVybiBkLmdldERheSgpO2Nhc2VcInlcIjpyZXR1cm4gZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkuc3Vic3RyKDIsMik7Y2FzZVwiWVwiOnJldHVybiBkLmdldEZ1bGxZZWFyKCk7Y2FzZVwib1wiOnJldHVybiBjLl9tYWtlT3JkKGQuZ2V0RGF0ZSgpKTtkZWZhdWx0OnJldHVybiBnfX0pfWlmKHRoaXMub3B0aW9ucy5sYW5nW3RoaXMub3B0aW9ucy51c2VMYW5nXS51c2VBcmFiaWNJbmRpYz09PXRydWUpe2U9dGhpcy5fZGlnaXRSZXBsYWNlKGUpfXJldHVybiBlfSxfZm9ybWF0SGVhZGVyOmZ1bmN0aW9uKGMpe2lmKHRoaXMub3B0aW9ucy5oZWFkZXJGb3JtYXQhPT1mYWxzZSl7cmV0dXJuIHRoaXMuX2Zvcm1hdHRlcih0aGlzLm9wdGlvbnMuaGVhZGVyRm9ybWF0LGMpfWVsc2V7cmV0dXJuIHRoaXMuX2Zvcm1hdHRlcih0aGlzLm9wdGlvbnMubGFuZ1t0aGlzLm9wdGlvbnMudXNlTGFuZ10uaGVhZGVyRm9ybWF0LGMpfX0sX2Zvcm1hdERhdGU6ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuX2Zvcm1hdHRlcih0aGlzLm9wdGlvbnMuZGF0ZU91dHB1dCxjKX0sX2Zvcm1hdFRpbWU6ZnVuY3Rpb24oZCl7dmFyIG09dGhpcyxrPVtmYWxzZSxmYWxzZSxmYWxzZV0sYyxoLGYsZSxsPXRoaXMub3B0aW9ucy5kdXJhdGlvbkZvcm1hdCxnPVswLDAsMCwwXTtpZih0aGlzLm9wdGlvbnMubW9kZT09PVwiZHVyYXRpb25ib3hcIil7Yz10aGlzLm9wdGlvbnMuZHVyYXRpb25Gb3JtYXQ7Yz1jLnJlcGxhY2UoL2RkZC9nLFwiLis/XCIpO2M9Yy5yZXBsYWNlKC9ERHxzc3xoaHxpaS9nLFwiKFswLTlEaGlzXSspXCIpO2M9bmV3IFJlZ0V4cChcIl5cIitjK1wiJFwiKTtoPWMuZXhlYyh0aGlzLm9wdGlvbnMuZHVyYXRpb25Gb3JtYXQpO2Y9bS50aGVEYXRlLmdldEVwb2NoKCktbS5pbml0RGF0ZS5nZXRFcG9jaCgpO2U9ZjtnWzBdPXBhcnNlSW50KGYvKDYwKjYwKjI0KSwxMCk7Zj1mLShnWzBdKjYwKjYwKjI0KTtnWzFdPXBhcnNlSW50KGYvKDYwKjYwKSwxMCk7Zj1mLShnWzFdKjYwKjYwKTtnWzJdPXBhcnNlSW50KGYvKDYwKSwxMCk7Zj1mLShnWzJdKjYwKTtnWzNdPWY7aWYoIWhbMF0ubWF0Y2goL0RELykpe2tbMF09dHJ1ZTtnWzFdPWdbMV0rKGdbMF0qMjQpfWlmKCFoWzBdLm1hdGNoKC9oaC8pKXtrWzFdPXRydWU7Z1syXT1nWzJdKyhnWzFdKjYwKX1pZighaFswXS5tYXRjaCgvaWkvKSl7a1syXT10cnVlO2dbM109Z1szXSsoZ1syXSo2MCl9bD1sLnJlcGxhY2UoXCJERFwiLGdbMF0pO2w9bC5yZXBsYWNlKFwiZGRkXCIsKChnWzBdPjEpP3RoaXMub3B0aW9ucy5sYW5nW3RoaXMub3B0aW9ucy51c2VMYW5nXS5kdXJhdGlvbkRheXNbMV06dGhpcy5vcHRpb25zLmxhbmdbdGhpcy5vcHRpb25zLnVzZUxhbmddLmR1cmF0aW9uRGF5c1swXSkpO2w9bC5yZXBsYWNlKFwiaGhcIixtLl96UGFkKGdbMV0pKTtsPWwucmVwbGFjZShcImlpXCIsbS5felBhZChnWzJdKSk7bD1sLnJlcGxhY2UoXCJzc1wiLG0uX3pQYWQoZ1szXSkpO2lmKHRoaXMub3B0aW9ucy5sYW5nW3RoaXMub3B0aW9ucy51c2VMYW5nXS51c2VBcmFiaWNJbmRpYz09PXRydWUpe3JldHVybiB0aGlzLl9kaWdpdFJlcGxhY2UobCl9ZWxzZXtyZXR1cm4gbH19ZWxzZXtyZXR1cm4gdGhpcy5fZm9ybWF0dGVyKG0ub3B0aW9ucy50aW1lT3V0cHV0LGQpfX0sX21ha2VEYXRlOmZ1bmN0aW9uKGspe2s9YS50cmltKGspO3ZhciBkPXRoaXMub3B0aW9ucyxuPXRoaXMsZT1udWxsLG09bnVsbCxsPW51bGwsYz1udWxsLGY9bmV3IERhdGUoKSxqPVtmYWxzZSxmYWxzZSxmYWxzZV0sZz1bZi5nZXRGdWxsWWVhcigpLGYuZ2V0TW9udGgoKSxmLmdldERhdGUoKSxmLmdldEhvdXJzKCksZi5nZXRNaW51dGVzKCksZi5nZXRTZWNvbmRzKCksMF0saDtpZihkLmxhbmdbdGhpcy5vcHRpb25zLnVzZUxhbmddLnVzZUFyYWJpY0luZGljPT09dHJ1ZSl7az10aGlzLl9kaWdpdFJlcGxhY2UoaywtMSl9aWYoZC5tb2RlPT09XCJkdXJhdGlvbmJveFwiKXtlPWQuZHVyYXRpb25Gb3JtYXQ7ZT1lLnJlcGxhY2UoL2RkZC9nLFwiLis/XCIpO2U9ZS5yZXBsYWNlKC9ERHxzc3xoaHxpaS9nLFwiKFswLTlEaGlzXSspXCIpO2U9bmV3IFJlZ0V4cChcIl5cIitlK1wiJFwiKTttPWUuZXhlYyhrKTtsPWUuZXhlYyhkLmR1cmF0aW9uRm9ybWF0KTtpZihtPT09bnVsbHx8bS5sZW5ndGghPT1sLmxlbmd0aCl7aWYodHlwZW9mIGQuZGVmYXVsdFBpY2tlclZhbHVlPT09XCJudW1iZXJcIiYmZC5kZWZhdWx0UGlja2VyVmFsdWU+MCl7cmV0dXJuIG5ldyBEYXRlKChuLmluaXREYXRlLmdldEVwb2NoKCkrcGFyc2VJbnQoZC5kZWZhdWx0UGlja2VyVmFsdWUsMTApKSoxMDAwKX1lbHNle3JldHVybiBuZXcgRGF0ZShuLmluaXREYXRlLmdldFRpbWUoKSl9fWVsc2V7Yz1uLmluaXREYXRlLmdldEVwb2NoKCk7Zm9yKGg9MDtoPG0ubGVuZ3RoO2grKyl7aWYobFtoXS5tYXRjaCgvXkREJC9pKSl7Yz1jKyhwYXJzZUludChtW2hdLDEwKSo2MCo2MCoyNCl9aWYobFtoXS5tYXRjaCgvXmhoJC9pKSl7Yz1jKyhwYXJzZUludChtW2hdLDEwKSo2MCo2MCl9aWYobFtoXS5tYXRjaCgvXmlpJC9pKSl7Yz1jKyhwYXJzZUludChtW2hdLDEwKSo2MCl9aWYobFtoXS5tYXRjaCgvXnNzJC9pKSl7Yz1jKyhwYXJzZUludChtW2hdLDEwKSl9fXJldHVybiBuZXcgRGF0ZSgoYyoxMDAwKSl9fWVsc2V7aWYoZC5tb2RlPT09XCJ0aW1lYm94XCJ8fGQubW9kZT09PVwidGltZWZsaXBib3hcIil7ZT1kLnRpbWVPdXRwdXR9ZWxzZXtlPWQuZGF0ZU91dHB1dH1pZihlLm1hdGNoKC8lLykpe2U9ZS5yZXBsYWNlKC8lKDB8LSkqKFthLXpdKS9naSxmdW5jdGlvbihpLHAscixxLG8pe3N3aXRjaChyKXtjYXNlXCJwXCI6Y2FzZVwiUFwiOmNhc2VcImJcIjpjYXNlXCJCXCI6cmV0dXJuXCIoXCIraStcInwuKz8pXCI7Y2FzZVwiSFwiOmNhc2VcImtcIjpjYXNlXCJJXCI6Y2FzZVwibFwiOmNhc2VcIm1cIjpjYXNlXCJNXCI6Y2FzZVwiU1wiOmNhc2VcImRcIjpyZXR1cm5cIihcIitpK1wifFwiKygocD09PVwiLVwiKT9cIlswLTldezEsMn1cIjpcIlswLTldezJ9XCIpK1wiKVwiO2Nhc2VcInNcIjpyZXR1cm5cIihcIitpK1wifFswLTldKylcIjtjYXNlXCJ5XCI6cmV0dXJuXCIoXCIraStcInxbMC05XXsyfSlcIjtjYXNlXCJZXCI6cmV0dXJuXCIoXCIraStcInxbMC05XXsxLDR9KVwiO2RlZmF1bHQ6cmV0dXJuXCIuKz9cIn19KTtlPW5ldyBSZWdFeHAoXCJeXCIrZStcIiRcIik7bT1lLmV4ZWMoayk7aWYoZC5tb2RlPT09XCJ0aW1lYm94XCJ8fGQubW9kZT09PVwidGltZWZsaXBib3hcIil7bD1lLmV4ZWMoZC50aW1lT3V0cHV0KX1lbHNle2w9ZS5leGVjKGQuZGF0ZU91dHB1dCl9aWYobT09PW51bGx8fG0ubGVuZ3RoIT09bC5sZW5ndGgpe2lmKGQuZGVmYXVsdFBpY2tlclZhbHVlIT09ZmFsc2Upe2lmKGEuaXNBcnJheShkLmRlZmF1bHRQaWNrZXJWYWx1ZSkmJmQuZGVmYXVsdFBpY2tlclZhbHVlLmxlbmd0aD09PTMpe2lmKGQubW9kZT09PVwidGltZWJveFwifHxkLm1vZGU9PT1cInRpbWVmbGlwYm94XCIpe3JldHVybiBuZXcgRGF0ZShnWzBdLGdbMV0sZ1syXSxkLmRlZmF1bHRQaWNrZXJWYWx1ZVswXSxkLmRlZmF1bHRQaWNrZXJWYWx1ZVsxXSxkLmRlZmF1bHRQaWNrZXJWYWx1ZVsyXSwwKX1lbHNle3JldHVybiBuZXcgRGF0ZShkLmRlZmF1bHRQaWNrZXJWYWx1ZVswXSxkLmRlZmF1bHRQaWNrZXJWYWx1ZVsxXSxkLmRlZmF1bHRQaWNrZXJWYWx1ZVsyXSwwLDAsMCwwKX19ZWxzZXtpZih0eXBlb2YgZC5kZWZhdWx0UGlja2VyVmFsdWU9PT1cIm51bWJlclwiKXtyZXR1cm4gbmV3IERhdGUoZC5kZWZhdWx0UGlja2VyVmFsdWUqMTAwMCl9ZWxzZXtpZihkLm1vZGU9PT1cInRpbWVib3hcInx8ZC5tb2RlPT09XCJ0aW1lZmxpcGJveFwiKXtjPWQuZGVmYXVsdFBpY2tlclZhbHVlLnNwbGl0KFwiOlwiKTtpZihjLmxlbmd0aD09PTMpe2Y9bmV3IERhdGUoZ1swXSxnWzFdLGdbMl0scGFyc2VJbnQoY1swXSwxMCkscGFyc2VJbnQoY1sxXSwxMCkscGFyc2VJbnQoY1syXSwxMCksMCk7aWYoaXNOYU4oZi5nZXREYXRlKCkpKXtmPW5ldyBEYXRlKCl9fX1lbHNle2M9ZC5kZWZhdWx0UGlja2VyVmFsdWUuc3BsaXQoXCItXCIpO2lmKGMubGVuZ3RoPT09Myl7Zj1uZXcgRGF0ZShwYXJzZUludChjWzBdLDEwKSxwYXJzZUludChjWzFdLDEwKS0xLHBhcnNlSW50KGNbMl0sMTApLDAsMCwwLDApO2lmKGlzTmFOKGYuZ2V0RGF0ZSgpKSl7Zj1uZXcgRGF0ZSgpfX19fX19fWVsc2V7Zm9yKGg9MDtoPG0ubGVuZ3RoO2grKyl7aWYobFtoXT09PVwiJXNcIil7Z1s2XT1wYXJzZUludChtW2hdLDEwKX1pZihsW2hdLm1hdGNoKC9eJS4qUyQvKSl7Z1s1XT1wYXJzZUludChtW2hdLDEwKX1pZihsW2hdLm1hdGNoKC9eJS4qTSQvKSl7Z1s0XT1wYXJzZUludChtW2hdLDEwKX1pZihsW2hdLm1hdGNoKC9eJS4qKEh8a3xJfGwpJC8pKXtnWzNdPXBhcnNlSW50KG1baF0sMTApfWlmKGxbaF0ubWF0Y2goL14lLipkJC8pKXtnWzJdPXBhcnNlSW50KG1baF0sMTApfWlmKGxbaF0ubWF0Y2goL14lLiptJC8pKXtnWzFdPXBhcnNlSW50KG1baF0sMTApLTF9aWYobFtoXS5tYXRjaCgvXiUuKlkkLykpe2dbMF09cGFyc2VJbnQobVtoXSwxMCl9aWYobFtoXS5tYXRjaCgvXiUuKnkkLykpe2lmKGQuYWZ0ZXJUb2RheT09PXRydWUpe2dbMF09cGFyc2VJbnQoXCIyMFwiK21baF0sMTApfWVsc2V7aWYocGFyc2VJbnQobVtoXSwxMCk8Mzgpe2dbMF09cGFyc2VJbnQoXCIyMFwiK21baF0sMTApfWVsc2V7Z1swXT1wYXJzZUludChcIjE5XCIrbVtoXSwxMCl9fX1pZihsW2hdLm1hdGNoKC9eJSgwfC0pKihwfFApJC8pKXtpZihtW2hdLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApPT09XCJhXCImJmdbM109PT0xMil7Z1szXT0wfWVsc2V7aWYobVtoXS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKT09PVwicFwiJiZnWzNdIT09MTIpe2dbM109Z1szXSsxMn19fWlmKGxbaF09PT1cIiVCXCIpe2M9YS5pbkFycmF5KG1baF0sZC5sYW5nW2QudXNlTGFuZ10ubW9udGhzT2ZZZWFyKTtpZihjPi0xKXtnWzFdPWN9fWlmKGxbaF09PT1cIiViXCIpe2M9YS5pbkFycmF5KG1baF0sZC5sYW5nW2QudXNlTGFuZ10ubW9udGhzT2ZZZWFyU2hvcnQpO2lmKGM+LTEpe2dbMV09Y319fX1pZihsWzBdLm1hdGNoKC8lcy8pKXtmPW5ldyBEYXRlKGdbNl0qMTAwMCl9ZWxzZXtpZihsWzBdLm1hdGNoKC8lKC4pKihJfGx8SHxrfHN8TSkvKSl7Zj1uZXcgRGF0ZShnWzBdLGdbMV0sZ1syXSxnWzNdLGdbNF0sZ1s1XSwwKTtpZihnWzBdPDEwMCl7Zi5zZXRGdWxsWWVhcihnWzBdKX19ZWxzZXtmPW5ldyBEYXRlKGdbMF0sZ1sxXSxnWzJdLDAsMCwwLDApO2lmKGdbMF08MTAwKXtmLnNldEZ1bGxZZWFyKGdbMF0pfX19cmV0dXJuIGZ9ZWxzZXtlPWUucmVwbGFjZSgvZGRkZHxtbW1tL2csXCIoLis/KVwiKTtlPWUucmVwbGFjZSgvZGRkfFNTL2csXCIuKz9cIik7ZT1lLnJlcGxhY2UoL21tbS9nLFwiKC4rPylcIik7ZT1lLnJlcGxhY2UoLyAqQUEvaWcsXCIgKiguKj8pXCIpO2U9ZS5yZXBsYWNlKC95eXl5fGRkfG1tfGdnfGhofGlpL2lnLFwiKFswLTl5WWREbU1nR2hIaV0rKVwiKTtlPWUucmVwbGFjZSgvc3N8VVUvZyxcIihbMC05c1VdKylcIik7ZT1uZXcgUmVnRXhwKFwiXlwiK2UrXCIkXCIpO209ZS5leGVjKGspO2lmKGQubW9kZT09PVwidGltZWJveFwifHxkLm1vZGU9PT1cInRpbWVmbGlwYm94XCIpe2w9ZS5leGVjKGQudGltZU91dHB1dCl9ZWxzZXtsPWUuZXhlYyhkLmRhdGVPdXRwdXQpfWlmKG09PT1udWxsfHxtLmxlbmd0aCE9PWwubGVuZ3RoKXtpZihkLmRlZmF1bHRQaWNrZXJWYWx1ZSE9PWZhbHNlKXtpZihhLmlzQXJyYXkoZC5kZWZhdWx0UGlja2VyVmFsdWUpJiZkLmRlZmF1bHRQaWNrZXJWYWx1ZS5sZW5ndGg9PT0zKXtpZihkLm1vZGU9PT1cInRpbWVib3hcInx8ZC5tb2RlPT09XCJ0aW1lZmxpcGJveFwiKXtyZXR1cm4gbmV3IERhdGUoZ1swXSxnWzFdLGdbMl0sZC5kZWZhdWx0UGlja2VyVmFsdWVbMF0sZC5kZWZhdWx0UGlja2VyVmFsdWVbMV0sZC5kZWZhdWx0UGlja2VyVmFsdWVbMl0sMCl9ZWxzZXtyZXR1cm4gbmV3IERhdGUoZC5kZWZhdWx0UGlja2VyVmFsdWVbMF0sZC5kZWZhdWx0UGlja2VyVmFsdWVbMV0sZC5kZWZhdWx0UGlja2VyVmFsdWVbMl0sMCwwLDAsMCl9fWVsc2V7aWYodHlwZW9mIGQuZGVmYXVsdFBpY2tlclZhbHVlPT09XCJudW1iZXJcIil7cmV0dXJuIG5ldyBEYXRlKGQuZGVmYXVsdFBpY2tlclZhbHVlKjEwMDApfWVsc2V7aWYoZC5tb2RlPT09XCJ0aW1lYm94XCJ8fGQubW9kZT09PVwidGltZWZsaXBib3hcIil7Yz1kLmRlZmF1bHRQaWNrZXJWYWx1ZS5zcGxpdChcIjpcIik7aWYoYy5sZW5ndGg9PT0zKXtmPW5ldyBEYXRlKGdbMF0sZ1sxXSxnWzJdLHBhcnNlSW50KGNbMF0sMTApLHBhcnNlSW50KGNbMV0sMTApLHBhcnNlSW50KGNbMl0sMTApLDApO2lmKGlzTmFOKGYuZ2V0RGF0ZSgpKSl7Zj1uZXcgRGF0ZSgpfX19ZWxzZXtjPWQuZGVmYXVsdFBpY2tlclZhbHVlLnNwbGl0KFwiLVwiKTtpZihjLmxlbmd0aD09PTMpe2Y9bmV3IERhdGUocGFyc2VJbnQoY1swXSwxMCkscGFyc2VJbnQoY1sxXSwxMCktMSxwYXJzZUludChjWzJdLDEwKSwwLDAsMCwwKTtpZihpc05hTihmLmdldERhdGUoKSkpe2Y9bmV3IERhdGUoKX19fX19fX1lbHNle2ZvcihoPTA7aDxtLmxlbmd0aDtoKyspe2lmKGxbaF0ubWF0Y2goL15VVSQvKSl7Z1s2XT1wYXJzZUludChtW2hdLDEwKX1pZihsW2hdLm1hdGNoKC9eZ2ckL2kpKXtnWzNdPXBhcnNlSW50KG1baF0sMTApfWlmKGxbaF0ubWF0Y2goL15oaCQvaSkpe2dbM109cGFyc2VJbnQobVtoXSwxMCl9aWYobFtoXS5tYXRjaCgvXmlpJC9pKSl7Z1s0XT1wYXJzZUludChtW2hdLDEwKX1pZihsW2hdLm1hdGNoKC9ec3MkLykpe2dbNV09cGFyc2VJbnQobVtoXSwxMCl9aWYobFtoXS5tYXRjaCgvXmRkJC9pKSl7Z1syXT1wYXJzZUludChtW2hdLDEwKX1pZihsW2hdLm1hdGNoKC9ebW0kL2kpKXtnWzFdPXBhcnNlSW50KG1baF0sMTApLTF9aWYobFtoXS5tYXRjaCgvXnl5eXkkL2kpKXtnWzBdPXBhcnNlSW50KG1baF0sMTApfWlmKGxbaF0ubWF0Y2goL15BQSQvaSkpe2lmKG1baF0udG9Mb3dlckNhc2UoKS5jaGFyQXQoMCk9PT1cImFcIiYmZ1szXT09PTEyKXtnWzNdPTB9ZWxzZXtpZihtW2hdLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApPT09XCJwXCImJmdbM10hPT0xMil7Z1szXT1nWzNdKzEyfX19aWYobFtoXS5tYXRjaCgvXm1tbSQvaSkpe2M9YS5pbkFycmF5KG1baF0sZC5sYW5nW2QudXNlTGFuZ10ubW9udGhzT2ZZZWFyKTtpZihjPi0xKXtnWzFdPWN9fWlmKGxbaF0ubWF0Y2goL15tbW1tJC9pKSl7Yz1hLmluQXJyYXkobVtoXSxkLmxhbmdbZC51c2VMYW5nXS5tb250aHNPZlllYXJTaG9ydCk7aWYoYz4tMSl7Z1sxXT1jfX19fWlmKGxbMF0ubWF0Y2goL1VVLykpe3JldHVybiBuZXcgRGF0ZShnWzZdKjEwMDApfWVsc2V7aWYobFswXS5tYXRjaCgvR3xnfGl8c3xIfGh8QS8pKXtyZXR1cm4gbmV3IERhdGUoZ1swXSxnWzFdLGdbMl0sZ1szXSxnWzRdLGdbNV0sMCl9ZWxzZXtyZXR1cm4gbmV3IERhdGUoZ1swXSxnWzFdLGdbMl0sMCwwLDAsMCl9fX19fSxfaG9vdmVyOmZ1bmN0aW9uKGMpe2EoYykudG9nZ2xlQ2xhc3MoXCJ1aS1idG4tdXAtXCIrYShjKS5qcW1EYXRhKFwidGhlbWVcIikrXCIgdWktYnRuLWRvd24tXCIrYShjKS5qcW1EYXRhKFwidGhlbWVcIikpfSxfb2Zmc2V0OmZ1bmN0aW9uKGcsZSxoKXt2YXIgYz10aGlzLGY9dGhpcy5vcHRpb25zLGQ9ZmFsc2U7aWYodHlwZW9mKGgpPT09XCJ1bmRlZmluZWRcIil7aD10cnVlfWMuaW5wdXQudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwib2Zmc2V0XCIsdHlwZTpnLGFtb3VudDplfSk7c3dpdGNoKGcpe2Nhc2VcInlcIjpkPXRydWU7YnJlYWs7Y2FzZVwibVwiOmlmKGYucm9sbG92ZXJNb2RlLm18fChjLnRoZURhdGUuZ2V0TW9udGgoKStlPDEyJiZjLnRoZURhdGUuZ2V0TW9udGgoKStlPi0xKSl7ZD10cnVlfWJyZWFrO2Nhc2VcImRcIjppZihmLnJvbGxvdmVyTW9kZS5kfHwoYy50aGVEYXRlLmdldERhdGUoKStlPjAmJmMudGhlRGF0ZS5nZXREYXRlKCkrZTwoYy5fZ2V0TGFzdERhdGUoYy50aGVEYXRlKSsxKSkpe2Q9dHJ1ZX1icmVhaztjYXNlXCJoXCI6aWYoZi5yb2xsb3Zlck1vZGUuaHx8KGMudGhlRGF0ZS5nZXRIb3VycygpK2U+LTEmJmMudGhlRGF0ZS5nZXRIb3VycygpK2U8MjQpKXtkPXRydWV9YnJlYWs7Y2FzZVwiaVwiOmlmKGYucm9sbG92ZXJNb2RlLml8fChjLnRoZURhdGUuZ2V0TWludXRlcygpK2U+LTEmJmMudGhlRGF0ZS5nZXRNaW51dGVzKCkrZTw2MCkpe2Q9dHJ1ZX1icmVhaztjYXNlXCJzXCI6aWYoZi5yb2xsb3Zlck1vZGUuc3x8KGMudGhlRGF0ZS5nZXRTZWNvbmRzKCkrZT4tMSYmYy50aGVEYXRlLmdldFNlY29uZHMoKStlPDYwKSl7ZD10cnVlfWJyZWFrO2Nhc2VcImFcIjppZihjLnBpY2tlck1lcmkudmFsKCk9PT1mLm1lcmlkaWVtTGV0dGVyc1swXSl7Yy5fb2Zmc2V0KFwiaFwiLDEyLGZhbHNlKX1lbHNle2MuX29mZnNldChcImhcIiwtMTIsZmFsc2UpfWJyZWFrfWlmKGQ9PT10cnVlKXtjLnRoZURhdGUuYWRqdXN0KGcsZSl9aWYoaD09PXRydWUpe2MuX3VwZGF0ZSgpfX0sX3VwZGF0ZWR1cmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxkPWMuaW5pdERhdGUuZ2V0RXBvY2goKTtpZighYy5faXNJbnQoYy5waWNrZXJEYXkudmFsKCkpKXtjLnBpY2tlckRheS52YWwoMCl9aWYoIWMuX2lzSW50KGMucGlja2VySG91ci52YWwoKSkpe2MucGlja2VySG91ci52YWwoMCl9aWYoIWMuX2lzSW50KGMucGlja2VyTWlucy52YWwoKSkpe2MucGlja2VyTWlucy52YWwoMCl9aWYoIWMuX2lzSW50KGMucGlja2VyU2Vjcy52YWwoKSkpe2MucGlja2VyU2Vjcy52YWwoMCl9ZD1kKyhwYXJzZUludChjLnBpY2tlckRheS52YWwoKSwxMCkqNjAqNjAqMjQpO2Q9ZCsocGFyc2VJbnQoYy5waWNrZXJIb3VyLnZhbCgpLDEwKSo2MCo2MCk7ZD1kKyhwYXJzZUludChjLnBpY2tlck1pbnMudmFsKCksMTApKjYwKTtkPWQrKHBhcnNlSW50KGMucGlja2VyU2Vjcy52YWwoKSwxMCkpO2MudGhlRGF0ZS5zZXRUaW1lKGQqMTAwMCk7Yy5fdXBkYXRlKCl9LF9jaGVja0NvbnN0cmFpbnRzOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxjPW51bGwsZT10aGlzLm9wdGlvbnM7ZC5kYXRlT0s9dHJ1ZTtpZihlLmFmdGVyVG9kYXkhPT1mYWxzZSl7Yz1uZXcgRGF0ZSgpO2lmKGQudGhlRGF0ZTxjKXtkLnRoZURhdGU9Y319aWYoZS5iZWZvcmVUb2RheSE9PWZhbHNlKXtjPW5ldyBEYXRlKCk7aWYoZC50aGVEYXRlPmMpe2QudGhlRGF0ZT1jfX1pZihlLm1heERheXMhPT1mYWxzZSl7Yz1uZXcgRGF0ZSgpO2MuYWRqdXN0KFwiZFwiLGUubWF4RGF5cyk7aWYoZC50aGVEYXRlPmMpe2QudGhlRGF0ZT1jfX1pZihlLm1pbkRheXMhPT1mYWxzZSl7Yz1uZXcgRGF0ZSgpO2MuYWRqdXN0KFwiZFwiLC0xKmUubWluRGF5cyk7aWYoZC50aGVEYXRlPGMpe2QudGhlRGF0ZT1jfX1pZihlLm1heFllYXIhPT1mYWxzZSl7Yz1uZXcgRGF0ZShlLm1heFllYXIsMCwxKTtjLmFkanVzdChcImRcIiwtMSk7aWYoZC50aGVEYXRlPmMpe2QudGhlRGF0ZT1jfX1pZihlLm1pblllYXIhPT1mYWxzZSl7Yz1uZXcgRGF0ZShlLm1pblllYXIsMCwxKTtpZihkLnRoZURhdGU8Yyl7ZC50aGVEYXRlPWN9fWlmKGUuYmxhY2tEYXRlcyE9PWZhbHNlKXtpZihhLmluQXJyYXkoZC50aGVEYXRlLmdldElTTygpLGUuYmxhY2tEYXRlcyk+LTEpe2QuZGF0ZU9LPWZhbHNlfX1pZihlLmJsYWNrRGF5cyE9PWZhbHNlKXtpZihhLmluQXJyYXkoZC50aGVEYXRlLmdldERheSgpLGUuYmxhY2tEYXlzKT4tMSl7ZC5kYXRlT0s9ZmFsc2V9fWlmKGEuaW5BcnJheShlLm1vZGUsW1widGltZWJveFwiLFwiZHVyYXRpb25ib3hcIixcInRpbWVmbGlwYm94XCJdKT4tMSl7ZC5kYXRlT0s9dHJ1ZX19LF9vcmllbnRDaGFuZ2U6ZnVuY3Rpb24oZil7dmFyIGM9Zi5kYXRhLndpZGdldCxnPWYuZGF0YS53aWRnZXQub3B0aW9ucyxkPWYuZGF0YS53aWRnZXQuX2dldENvb3JkcyhmLmRhdGEud2lkZ2V0KTtmLnN0b3BQcm9wYWdhdGlvbigpO2lmKCFjLnBpY2tlckNvbnRlbnQuaXMoXCI6dmlzaWJsZVwiKXx8Zy51c2VEaWFsb2c9PT10cnVlKXtyZXR1cm4gZmFsc2V9ZWxzZXtpZihnLmZ1bGxTY3JlZW49PXRydWUmJihkLndpZHRoPDQwMHx8Zy5mdWxsU2NyZWVuRm9yY2U9PT10cnVlKSl7Yy5waWNrZXJDb250ZW50LmNzcyh7dG9wOmQuZnVsbFRvcCxsZWZ0OmQuZnVsbExlZnQsaGVpZ2h0OmQuaGlnaCx3aWR0aDpkLndpZHRoLG1heFdpZHRoOmQud2lkdGh9KX1lbHNle2MucGlja2VyQ29udGVudC5jc3Moe3RvcDpkLndpblRvcCxsZWZ0OmQud2luTGVmdH0pfX19LF91cGRhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC5vcHRpb25zLHA9bnVsbCxnLGgsaixyLG4sbSxrLGYscyxjLHEsZD17ZDo2MCo2MCoyNCxoOjYwKjYwLGk6NjAsczoxfSxsPXt9O3QuaW5wdXQudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwicmVmcmVzaFwifSk7aWYoZS5tb2RlPT09XCJkdXJhdGlvbmJveFwiKXtnPXQudGhlRGF0ZS5nZXRFcG9jaCgpLXQuaW5pdERhdGUuZ2V0RXBvY2goKTtpZihnPDApe2c9MDt0LnRoZURhdGUuc2V0VGltZSh0LmluaXREYXRlLmdldFRpbWUoKSl9ZS5sYXN0RHVyYXRpb249ZzttPXBhcnNlSW50KGcvZC5kLDEwKTtnPWctKG0qZC5kKTt0LnBpY2tlckRheS52YWwobSk7bT1wYXJzZUludChnL2QuaCwxMCk7Zz1nLShtKmQuaCk7dC5waWNrZXJIb3VyLnZhbChtKTttPXBhcnNlSW50KGcvZC5pLDEwKTtnPWctKG0qZC5pKTt0LnBpY2tlck1pbnMudmFsKG0pO3QucGlja2VyU2Vjcy52YWwocGFyc2VJbnQoZywxMCkpfWlmKGUubW9kZT09PVwidGltZWJveFwiKXtpZihlLm1pbnV0ZVN0ZXAhPT0xKXtnPXQudGhlRGF0ZS5nZXRNaW51dGVzKCklZS5taW51dGVTdGVwO2lmKGchPT0wKXt0LnRoZURhdGUuYWRqdXN0KFwibVwiLC0xKmcpfX10LnBpY2tlck1pbnMudmFsKHQuX3pQYWQodC50aGVEYXRlLmdldE1pbnV0ZXMoKSkpO2lmKGUubGFuZ1tlLnVzZUxhbmddLnRpbWVGb3JtYXQ9PT0xMnx8ZS50aW1lRm9ybWF0T3ZlcnJpZGU9PT0xMil7aWYodC50aGVEYXRlLmdldEhvdXJzKCk+MTEpe3QucGlja2VyTWVyaS52YWwoZS5tZXJpZGllbUxldHRlcnNbMV0pO2lmKHQudGhlRGF0ZS5nZXRIb3VycygpPT09MTIpe3QucGlja2VySG91ci52YWwoMTIpfWVsc2V7dC5waWNrZXJIb3VyLnZhbCh0LnRoZURhdGUuZ2V0SG91cnMoKS0xMil9fWVsc2V7dC5waWNrZXJNZXJpLnZhbChlLm1lcmlkaWVtTGV0dGVyc1swXSk7aWYodC50aGVEYXRlLmdldEhvdXJzKCk9PT0wKXt0LnBpY2tlckhvdXIudmFsKDEyKX1lbHNle3QucGlja2VySG91ci52YWwodC50aGVEYXRlLmdldEhvdXJzKCkpfX19ZWxzZXt0LnBpY2tlckhvdXIudmFsKHQudGhlRGF0ZS5nZXRIb3VycygpKX19aWYoZS5tb2RlPT09XCJmbGlwYm94XCJ8fGUubW9kZT09PVwidGltZWZsaXBib3hcIil7dC5fY2hlY2tDb25zdHJhaW50cygpO2Y9dC5fbWFrZURhdGUodC5pbnB1dC52YWwoKSk7dC5jb250cm9sc0hlYWRlci5lbXB0eSgpLmh0bWwodC5fZm9ybWF0SGVhZGVyKHQudGhlRGF0ZSkpO2ZvcihtPTA7bTxlLmZpZWxkc09yZGVyLmxlbmd0aDttKyspe2M9dHJ1ZTtzd2l0Y2goZS5maWVsZHNPcmRlclttXSl7Y2FzZVwieVwiOm49dC5waWNrZXJZYXIuZmluZChcInVsXCIpO24uZW1wdHkoKTtmb3IoZz0tMTU7ZzwxNjtnKyspe2s9KChmLmdldEZ1bGxZZWFyKCk9PT0odC50aGVEYXRlLmdldEZ1bGxZZWFyKCkrZykpP2UucGlja1BhZ2VIaWdoQnV0dG9uVGhlbWU6ZS5waWNrUGFnZUZsaXBCdXR0b25UaGVtZSk7aWYoZz09PTApe2s9ZS5waWNrUGFnZUJ1dHRvblRoZW1lfWEoXCI8bGk+XCIse1wiY2xhc3NcIjpcInVpLWJvZHktXCIrayxzdHlsZTooKGM9PT10cnVlKT9cIm1hcmdpbi10b3A6IC00NTNweFwiOlwiXCIpfSkuaHRtbChcIjxzcGFuPlwiKyh0LnRoZURhdGUuZ2V0RnVsbFllYXIoKStnKStcIjwvc3Bhbj5cIikuYXBwZW5kVG8obik7Yz1mYWxzZX1icmVhaztjYXNlXCJtXCI6bj10LnBpY2tlck1vbi5maW5kKFwidWxcIik7bi5lbXB0eSgpO2ZvcihnPS0xMjtnPDEzO2crKyl7cD1uZXcgRGF0ZSh0LnRoZURhdGUuZ2V0RnVsbFllYXIoKSx0LnRoZURhdGUuZ2V0TW9udGgoKSwxKTtwLmFkanVzdChcIm1cIixnKTtrPShmLmdldE1vbnRoKCk9PT1wLmdldE1vbnRoKCkmJmYuZ2V0WWVhcigpPT09cC5nZXRZZWFyKCkpP2UucGlja1BhZ2VIaWdoQnV0dG9uVGhlbWU6ZS5waWNrUGFnZUZsaXBCdXR0b25UaGVtZTtpZihnPT09MCl7az1lLnBpY2tQYWdlQnV0dG9uVGhlbWV9YShcIjxsaT5cIix7XCJjbGFzc1wiOlwidWktYm9keS1cIitrLHN0eWxlOigoYz09PXRydWUpP1wibWFyZ2luLXRvcDogLTM1N3B4XCI6XCJcIil9KS5odG1sKFwiPHNwYW4+XCIrZS5sYW5nW2UudXNlTGFuZ10ubW9udGhzT2ZZZWFyU2hvcnRbcC5nZXRNb250aCgpXStcIjwvc3Bhbj5cIikuYXBwZW5kVG8obik7Yz1mYWxzZX1icmVhaztjYXNlXCJkXCI6bj10LnBpY2tlckRheS5maW5kKFwidWxcIik7bi5lbXB0eSgpO2ZvcihnPS0xNTtnPDE2O2crKyl7cD10LnRoZURhdGUuY29weSgpO3AuYWRqdXN0KFwiZFwiLGcpO3E9XCJcIjtpZigoZS5ibGFja0RhdGVzIT09ZmFsc2UmJmEuaW5BcnJheShwLmdldElTTygpLGUuYmxhY2tEYXRlcyk+LTEpfHwoZS5ibGFja0RheXMhPT1mYWxzZSYmYS5pbkFycmF5KHAuZ2V0RGF5KCksZS5ibGFja0RheXMpPi0xKSl7cT1cIiB1aS1kYXRlYm94LWdyaWRkYXRlLWRpc2FibGVcIn1rPShmLmdldERhdGUoKT09PXAuZ2V0RGF0ZSgpJiZmLmdldE1vbnRoKCk9PT1wLmdldE1vbnRoKCkmJmYuZ2V0WWVhcigpPT09cC5nZXRZZWFyKCkpP2UucGlja1BhZ2VIaWdoQnV0dG9uVGhlbWU6ZS5waWNrUGFnZUZsaXBCdXR0b25UaGVtZTtpZihnPT09MCl7az1lLnBpY2tQYWdlQnV0dG9uVGhlbWV9YShcIjxsaT5cIix7XCJjbGFzc1wiOlwidWktYm9keS1cIitrK3Esc3R5bGU6KChjPT09dHJ1ZSk/XCJtYXJnaW4tdG9wOiAtNDUzcHhcIjpcIlwiKX0pLmh0bWwoXCI8c3Bhbj5cIitwLmdldERhdGUoKStcIjwvc3Bhbj5cIikuYXBwZW5kVG8obik7Yz1mYWxzZX1icmVhaztjYXNlXCJoXCI6bj10LnBpY2tlckhvdXIuZmluZChcInVsXCIpO24uZW1wdHkoKTtmb3IoZz0tMTI7ZzwxMztnKyspe3A9dC50aGVEYXRlLmNvcHkoKTtwLmFkanVzdChcImhcIixnKTtrPShnPT09MCk/ZS5waWNrUGFnZUJ1dHRvblRoZW1lOmUucGlja1BhZ2VGbGlwQnV0dG9uVGhlbWU7YShcIjxsaT5cIix7XCJjbGFzc1wiOlwidWktYm9keS1cIitrLHN0eWxlOigoYz09PXRydWUpP1wibWFyZ2luLXRvcDogLTM1N3B4XCI6XCJcIil9KS5odG1sKFwiPHNwYW4+XCIrKChlLmxhbmdbZS51c2VMYW5nXS50aW1lRm9ybWF0PT09MTJ8fGUudGltZUZvcm1hdE92ZXJyaWRlPT09MTIpPygocC5nZXRIb3VycygpPT09MCk/XCIxMlwiOigocC5nZXRIb3VycygpPDEyKT9wLmdldEhvdXJzKCk6KChwLmdldEhvdXJzKCk9PT0xMik/XCIxMlwiOihwLmdldEhvdXJzKCktMTIpKSkpOnAuZ2V0SG91cnMoKSkrXCI8L3NwYW4+XCIpLmFwcGVuZFRvKG4pO2M9ZmFsc2V9YnJlYWs7Y2FzZVwiaVwiOm49dC5waWNrZXJNaW5zLmZpbmQoXCJ1bFwiKTtuLmVtcHR5KCk7Zm9yKGc9LTMwO2c8MzE7ZysrKXtpZihlLm1pbnV0ZVN0ZXA+MSl7dC50aGVEYXRlLnNldE1pbnV0ZXModC50aGVEYXRlLmdldE1pbnV0ZXMoKS0odC50aGVEYXRlLmdldE1pbnV0ZXMoKSVlLm1pbnV0ZVN0ZXApKX1wPXQudGhlRGF0ZS5jb3B5KCk7cC5hZGp1c3QoXCJpXCIsKGcqZS5taW51dGVTdGVwKSk7az0oZz09PTApP2UucGlja1BhZ2VCdXR0b25UaGVtZTplLnBpY2tQYWdlRmxpcEJ1dHRvblRoZW1lO2EoXCI8bGk+XCIse1wiY2xhc3NcIjpcInVpLWJvZHktXCIrayxzdHlsZTooKGM9PT10cnVlKT9cIm1hcmdpbi10b3A6IC05MzNweFwiOlwiXCIpfSkuaHRtbChcIjxzcGFuPlwiK3QuX3pQYWQocC5nZXRNaW51dGVzKCkpK1wiPC9zcGFuPlwiKS5hcHBlbmRUbyhuKTtjPWZhbHNlfWJyZWFrO2Nhc2VcImFcIjpuPXQucGlja2VyTWVyaS5maW5kKFwidWxcIik7bi5lbXB0eSgpO2lmKHQudGhlRGF0ZS5nZXRIb3VycygpPjExKXtjPVwiLTY1XCI7az1bZS5waWNrUGFnZUZsaXBCdXR0b25UaGVtZSxlLnBpY2tQYWdlQnV0dG9uVGhlbWVdfWVsc2V7Yz1cIi0zM1wiO2s9W2UucGlja1BhZ2VCdXR0b25UaGVtZSxlLnBpY2tQYWdlRmxpcEJ1dHRvblRoZW1lXX1hKFwiPGxpPlwiKS5hcHBlbmRUbyhuKS5jbG9uZSgpLmFwcGVuZFRvKG4pO2EoXCI8bGk+XCIse1wiY2xhc3NcIjpcInVpLWJvZHktXCIra1swXSxzdHlsZTpcIm1hcmdpbi10b3A6IFwiK2MrXCJweFwifSkuaHRtbChcIjxzcGFuPlwiK2UubWVyaWRpZW1MZXR0ZXJzWzBdK1wiPC9zcGFuPlwiKS5hcHBlbmRUbyhuKTthKFwiPGxpPlwiLHtcImNsYXNzXCI6XCJ1aS1ib2R5LVwiK2tbMV19KS5odG1sKFwiPHNwYW4+XCIrZS5tZXJpZGllbUxldHRlcnNbMV0rXCI8L3NwYW4+XCIpLmFwcGVuZFRvKG4pO2EoXCI8bGk+XCIpLmFwcGVuZFRvKG4pLmNsb25lKCkuYXBwZW5kVG8obik7YnJlYWt9fX1pZihlLm1vZGU9PT1cInNsaWRlYm94XCIpe3QuX2NoZWNrQ29uc3RyYWludHMoKTtmPXQuX21ha2VEYXRlKHQuaW5wdXQudmFsKCkpO3QuY29udHJvbHNIZWFkZXIuZW1wdHkoKS5odG1sKHQuX2Zvcm1hdEhlYWRlcih0LnRoZURhdGUpKTt0LmNvbnRyb2xzSW5wdXQuZW1wdHkoKTt0LmNvbnRyb2xzSW5wdXQuZGVsZWdhdGUoXCIudWktZGF0ZWJveC1zbGlkZXJvdy1pbnQ+ZGl2XCIsZS5jbGlja0V2ZW50LGZ1bmN0aW9uKGkpe2kucHJldmVudERlZmF1bHQoKTt0Ll9vZmZzZXQoYSh0aGlzKS5wYXJlbnQoKS5qcW1EYXRhKFwicm93dHlwZVwiKSxwYXJzZUludChhKHRoaXMpLmpxbURhdGEoXCJvZmZzZXRcIiksMTApKX0pO3QuY29udHJvbHNJbnB1dC5kZWxlZ2F0ZShcIi51aS1kYXRlYm94LXNsaWRlcm93LWludD5kaXZcIixcInZtb3VzZW92ZXIgdm1vdXNlb3V0XCIsZnVuY3Rpb24oKXt0Ll9ob292ZXIodGhpcyl9KTtpZihlLndoZWVsRXhpc3RzKXt0LmNvbnRyb2xzSW5wdXQuZGVsZWdhdGUoXCIudWktZGF0ZWJveC1zbGlkZXJvdy1pbnRcIixcIm1vdXNld2hlZWxcIixmdW5jdGlvbihpLG8pe2kucHJldmVudERlZmF1bHQoKTt0Ll9vZmZzZXQoYSh0aGlzKS5qcW1EYXRhKFwicm93dHlwZVwiKSwoKG8+MCk/MTotMSkpfSl9aWYoZS5zd2lwZUVuYWJsZWQpe3QuY29udHJvbHNJbnB1dC5kZWxlZ2F0ZShcIi51aS1kYXRlYm94LXNsaWRlcm93LWludFwiLHQuU1RBUlRfRFJBRyxmdW5jdGlvbihpKXtpZighdC5kcmFnTW92ZSl7dC5kcmFnTW92ZT10cnVlO3QuZHJhZ1RhcmdldD1hKHRoaXMpO3QuZHJhZ1Bvcz1wYXJzZUludCh0LmRyYWdUYXJnZXQuY3NzKFwibWFyZ2luTGVmdFwiKS5yZXBsYWNlKC9weC9pLFwiXCIpLDEwKTt0LmRyYWdTdGFydD10LnRvdWNoP2kub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDppLnBhZ2VYO3QuZHJhZ0VuZD1mYWxzZTtpLnN0b3BQcm9wYWdhdGlvbigpO2kucHJldmVudERlZmF1bHQoKX19KX1mb3IobT0wO208ZS5maWVsZHNPcmRlci5sZW5ndGg7bSsrKXtzPWEoXCI8ZGl2PlwiKS5qcW1EYXRhKFwicm93dHlwZVwiLGUuZmllbGRzT3JkZXJbbV0pO249YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtc2xpZGVyb3ctaW50XCJ9KS5qcW1EYXRhKFwicm93dHlwZVwiLGUuZmllbGRzT3JkZXJbbV0pLmFwcGVuZFRvKHMpO2lmKGUubGFuZ1tlLnVzZUxhbmddLmlzUlRMPT09dHJ1ZSl7bi5jc3MoXCJkaXJlY3Rpb25cIixcInJ0bFwiKX1zd2l0Y2goZS5maWVsZHNPcmRlclttXSl7Y2FzZVwieVwiOnMuYWRkQ2xhc3MoXCJ1aS1kYXRlYm94LXNsaWRlcm93LXltXCIpO24uY3NzKFwibWFyZ2luTGVmdFwiLFwiLTMzM3B4XCIpO2ZvcihnPS01O2c8NjtnKyspe2s9KChmLmdldEZ1bGxZZWFyKCk9PT0odC50aGVEYXRlLmdldEZ1bGxZZWFyKCkrZykpP2UucGlja1BhZ2VIaWdoQnV0dG9uVGhlbWU6ZS5waWNrUGFnZVNsaWRlQnV0dG9uVGhlbWUpO2lmKGc9PT0wKXtrPWUucGlja1BhZ2VCdXR0b25UaGVtZX1hKFwiPGRpdj5cIix7XCJjbGFzc1wiOlwidWktZGF0ZWJveC1zbGlkZXllYXIgdWktY29ybmVyLWFsbCB1aS1idG4tdXAtXCIra30pLmh0bWwodC50aGVEYXRlLmdldEZ1bGxZZWFyKCkrZykuanFtRGF0YShcIm9mZnNldFwiLGcpLmpxbURhdGEoXCJ0aGVtZVwiLGspLmFwcGVuZFRvKG4pfWJyZWFrO2Nhc2VcIm1cIjpzLmFkZENsYXNzKFwidWktZGF0ZWJveC1zbGlkZXJvdy15bVwiKTtuLmNzcyhcIm1hcmdpbkxlZnRcIixcIi0yMDRweFwiKTtmb3IoZz0tNjtnPDc7ZysrKXtwPW5ldyBEYXRlKHQudGhlRGF0ZS5nZXRGdWxsWWVhcigpLHQudGhlRGF0ZS5nZXRNb250aCgpLDEpO3AuYWRqdXN0KFwibVwiLGcpO2s9KGYuZ2V0TW9udGgoKT09PXAuZ2V0TW9udGgoKSYmZi5nZXRZZWFyKCk9PT1wLmdldFllYXIoKSk/ZS5waWNrUGFnZUhpZ2hCdXR0b25UaGVtZTplLnBpY2tQYWdlU2xpZGVCdXR0b25UaGVtZTtpZihnPT09MCl7az1lLnBpY2tQYWdlQnV0dG9uVGhlbWV9YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtc2xpZGVtb250aCB1aS1jb3JuZXItYWxsIHVpLWJ0bi11cC1cIitrfSkuanFtRGF0YShcIm9mZnNldFwiLGcpLmpxbURhdGEoXCJ0aGVtZVwiLGspLmh0bWwoZS5sYW5nW2UudXNlTGFuZ10ubW9udGhzT2ZZZWFyU2hvcnRbcC5nZXRNb250aCgpXSkuYXBwZW5kVG8obil9YnJlYWs7Y2FzZVwiZFwiOnMuYWRkQ2xhc3MoXCJ1aS1kYXRlYm94LXNsaWRlcm93LWRcIik7bi5jc3MoXCJtYXJnaW5MZWZ0XCIsXCItMzg2cHhcIik7Zm9yKGc9LTE1O2c8MTY7ZysrKXtwPXQudGhlRGF0ZS5jb3B5KCk7cC5hZGp1c3QoXCJkXCIsZyk7cT1cIlwiO2lmKChlLmJsYWNrRGF0ZXMhPT1mYWxzZSYmYS5pbkFycmF5KHAuZ2V0SVNPKCksZS5ibGFja0RhdGVzKT4tMSl8fChlLmJsYWNrRGF5cyE9PWZhbHNlJiZhLmluQXJyYXkocC5nZXREYXkoKSxlLmJsYWNrRGF5cyk+LTEpKXtxPVwiIHVpLWRhdGVib3gtZ3JpZGRhdGUtZGlzYWJsZVwifWs9KGYuZ2V0RGF0ZSgpPT09cC5nZXREYXRlKCkmJmYuZ2V0TW9udGgoKT09PXAuZ2V0TW9udGgoKSYmZi5nZXRZZWFyKCk9PT1wLmdldFllYXIoKSk/ZS5waWNrUGFnZUhpZ2hCdXR0b25UaGVtZTplLnBpY2tQYWdlU2xpZGVCdXR0b25UaGVtZTtpZihnPT09MCl7az1lLnBpY2tQYWdlQnV0dG9uVGhlbWV9YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtc2xpZGVkYXkgdWktY29ybmVyLWFsbCB1aS1idG4tdXAtXCIraytxfSkuanFtRGF0YShcIm9mZnNldFwiLGcpLmpxbURhdGEoXCJ0aGVtZVwiLGspLmh0bWwocC5nZXREYXRlKCkrJzxiciAvPjxzcGFuIGNsYXNzPVwidWktZGF0ZWJveC1zbGlkZXdkYXlcIj4nK2UubGFuZ1tlLnVzZUxhbmddLmRheXNPZldlZWtTaG9ydFtwLmdldERheSgpXStcIjwvc3Bhbj5cIikuYXBwZW5kVG8obil9YnJlYWs7Y2FzZVwiaFwiOnMuYWRkQ2xhc3MoXCJ1aS1kYXRlYm94LXNsaWRlcm93LWhpXCIpO24uY3NzKFwibWFyZ2luTGVmdFwiLFwiLTI4NHB4XCIpO2ZvcihnPS0xMjtnPDEzO2crKyl7cD10LnRoZURhdGUuY29weSgpO3AuYWRqdXN0KFwiaFwiLGcpO2s9KGc9PT0wKT9lLnBpY2tQYWdlQnV0dG9uVGhlbWU6ZS5waWNrUGFnZVNsaWRlQnV0dG9uVGhlbWU7YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtc2xpZGVob3VyIHVpLWNvcm5lci1hbGwgdWktYnRuLXVwLVwiK2t9KS5qcW1EYXRhKFwib2Zmc2V0XCIsZykuanFtRGF0YShcInRoZW1lXCIsaykuaHRtbCgoKGUubGFuZ1tlLnVzZUxhbmddLnRpbWVGb3JtYXQ9PT0xMnx8ZS50aW1lRm9ybWF0T3ZlcnJpZGU9PT0xMik/KChwLmdldEhvdXJzKCk9PT0wKT8nMTI8c3BhbiBjbGFzcz1cInVpLWRhdGVib3gtc2xpZGV3ZGF5XCI+QU08L3NwYW4+JzooKHAuZ2V0SG91cnMoKTwxMik/cC5nZXRIb3VycygpKyc8c3BhbiBjbGFzcz1cInVpLWRhdGVib3gtc2xpZGV3ZGF5XCI+QU08L3NwYW4+JzooKHAuZ2V0SG91cnMoKT09PTEyKT8nMTI8c3BhbiBjbGFzcz1cInVpLWRhdGVib3gtc2xpZGV3ZGF5XCI+UE08L3NwYW4+JzoocC5nZXRIb3VycygpLTEyKSsnPHNwYW4gY2xhc3M9XCJ1aS1kYXRlYm94LXNsaWRld2RheVwiPlBNPC9zcGFuPicpKSk6cC5nZXRIb3VycygpKSkuYXBwZW5kVG8obil9YnJlYWs7Y2FzZVwiaVwiOnMuYWRkQ2xhc3MoXCJ1aS1kYXRlYm94LXNsaWRlcm93LWhpXCIpO24uY3NzKFwibWFyZ2luTGVmdFwiLFwiLTg5NnB4XCIpO2ZvcihnPS0zMDtnPDMxO2crKyl7cD10LnRoZURhdGUuY29weSgpO3AuYWRqdXN0KFwiaVwiLGcpO2s9KGc9PT0wKT9lLnBpY2tQYWdlQnV0dG9uVGhlbWU6ZS5waWNrUGFnZVNsaWRlQnV0dG9uVGhlbWU7YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtc2xpZGVtaW5zIHVpLWNvcm5lci1hbGwgdWktYnRuLXVwLVwiK2t9KS5qcW1EYXRhKFwib2Zmc2V0XCIsZykuanFtRGF0YShcInRoZW1lXCIsaykuaHRtbCh0Ll96UGFkKHAuZ2V0TWludXRlcygpKSkuYXBwZW5kVG8obil9YnJlYWt9cy5hcHBlbmRUbyh0LmNvbnRyb2xzSW5wdXQpfX1pZihlLm1vZGU9PT1cImRhdGVib3hcIil7dC5fY2hlY2tDb25zdHJhaW50cygpO3QuY29udHJvbHNIZWFkZXIuZW1wdHkoKS5odG1sKHQuX2Zvcm1hdEhlYWRlcih0LnRoZURhdGUpKTt0LnBpY2tlck1vbi52YWwodC50aGVEYXRlLmdldE1vbnRoKCkrMSk7dC5waWNrZXJEYXkudmFsKHQudGhlRGF0ZS5nZXREYXRlKCkpO3QucGlja2VyWWFyLnZhbCh0LnRoZURhdGUuZ2V0RnVsbFllYXIoKSk7aWYodC5kYXRlT0shPT10cnVlKXt0LmNvbnRyb2xzSW5wdXQuZmluZChcImlucHV0XCIpLmFkZENsYXNzKFwidWktZGF0ZWJveC1ncmlkZGF0ZS1kaXNhYmxlXCIpfWVsc2V7dC5jb250cm9sc0lucHV0LmZpbmQoXCIudWktZGF0ZWJveC1ncmlkZGF0ZS1kaXNhYmxlXCIpLnJlbW92ZUNsYXNzKFwidWktZGF0ZWJveC1ncmlkZGF0ZS1kaXNhYmxlXCIpfX1pZihlLm1vZGU9PT1cImNhbGJveFwiKXt0LmNvbnRyb2xzSW5wdXQuZW1wdHkoKS5odG1sKGUubGFuZ1tlLnVzZUxhbmddLm1vbnRoc09mWWVhclt0LnRoZURhdGUuZ2V0TW9udGgoKV0rXCIgXCIrdC50aGVEYXRlLmdldEZ1bGxZZWFyKCkpO3QuY29udHJvbHNQbHVzLmVtcHR5KCk7bD17dG9kYXk6LTEsaGlnaGxpZ2h0RGF5Oi0xLHByZXNldERheTotMSxuZXh0dG9kYXk6MSx0aGlzRGF0ZTpuZXcgRGF0ZSgpLG1heERhdGU6bmV3IERhdGUoKSxtaW5EYXRlOm5ldyBEYXRlKCksc3RhcnREYXk6ZmFsc2UsY3VycmVudE1vbnRoOmZhbHNlLHdlZWtNb2RlOjAsd2Vla0RheXM6bnVsbCx0aGlzVGhlbWU6ZS5waWNrUGFnZUJ1dHRvblRoZW1lfTtsLnN0YXJ0PXQuX2dldEZpcnN0RGF5KHQudGhlRGF0ZSk7bC5lbmQ9dC5fZ2V0TGFzdERhdGUodC50aGVEYXRlKTtsLmxhc3RlbmQ9dC5fZ2V0TGFzdERhdGVCZWZvcmUodC50aGVEYXRlKTtsLnByZXNldERhdGU9dC5fbWFrZURhdGUodC5pbnB1dC52YWwoKSk7aWYoZS5jYWxTdGFydERheSE9PWZhbHNlfHx0eXBlb2YgZS5sYW5nW2UudXNlTGFuZ10uY2FsU3RhcnREYXk9PT1cIm51bWJlclwiKXtpZihlLmNhbFN0YXJ0RGF5IT09ZmFsc2Upe2wuc3RhcnQ9bC5zdGFydC1lLmNhbFN0YXJ0RGF5O2wuc3RhcnREYXk9ZS5jYWxTdGFydERheX1lbHNle2wuc3RhcnQ9bC5zdGFydC1lLmxhbmdbZS51c2VMYW5nXS5jYWxTdGFydERheTtsLnN0YXJ0RGF5PWUubGFuZ1tlLnVzZUxhbmddLmNhbFN0YXJ0RGF5fWlmKGwuc3RhcnQ8MCl7bC5zdGFydD1sLnN0YXJ0Kzd9fWwucHJldnRvZGF5PWwubGFzdGVuZC0obC5zdGFydC0xKTtsLmNoZWNrRGF0ZXM9KGUuZW5hYmxlRGF0ZXM9PT1mYWxzZSYmKGUuYWZ0ZXJUb2RheSE9PWZhbHNlfHxlLmJlZm9yZVRvZGF5IT09ZmFsc2V8fGUubm90VG9kYXkhPT1mYWxzZXx8ZS5tYXhEYXlzIT09ZmFsc2V8fGUubWluRGF5cyE9PWZhbHNlfHxlLmJsYWNrRGF0ZXMhPT1mYWxzZXx8ZS5ibGFja0RheXMhPT1mYWxzZSkpO2lmKGwudGhpc0RhdGUuZ2V0TW9udGgoKT09PXQudGhlRGF0ZS5nZXRNb250aCgpJiZsLnRoaXNEYXRlLmdldEZ1bGxZZWFyKCk9PT10LnRoZURhdGUuZ2V0RnVsbFllYXIoKSl7bC5jdXJyZW50TW9udGg9dHJ1ZTtsLmhpZ2hsaWdodERheT1sLnRoaXNEYXRlLmdldERhdGUoKX1pZihsLnByZXNldERhdGUuZ2V0Q29tcCgpPT09dC50aGVEYXRlLmdldENvbXAoKSl7bC5wcmVzZXREYXk9bC5wcmVzZXREYXRlLmdldERhdGUoKX10LmNhbE5vUHJldj1mYWxzZTt0LmNhbE5vTmV4dD1mYWxzZTtpZihlLmFmdGVyVG9kYXk9PT10cnVlJiYobC5jdXJyZW50TW9udGg9PT10cnVlfHwobC50aGlzRGF0ZS5nZXRNb250aCgpPj10LnRoZURhdGUuZ2V0TW9udGgoKSYmdC50aGVEYXRlLmdldEZ1bGxZZWFyKCk9PT1sLnRoaXNEYXRlLmdldEZ1bGxZZWFyKCkpKSl7dC5jYWxOb1ByZXY9dHJ1ZX1pZihlLmJlZm9yZVRvZGF5PT09dHJ1ZSYmKGwuY3VycmVudE1vbnRoPT09dHJ1ZXx8KGwudGhpc0RhdGUuZ2V0TW9udGgoKTw9dC50aGVEYXRlLmdldE1vbnRoKCkmJnQudGhlRGF0ZS5nZXRGdWxsWWVhcigpPT09bC50aGlzRGF0ZS5nZXRGdWxsWWVhcigpKSkpe3QuY2FsTm9OZXh0PXRydWV9aWYoZS5taW5EYXlzIT09ZmFsc2Upe2wubWluRGF0ZS5hZGp1c3QoXCJkXCIsLTEqZS5taW5EYXlzKTtpZih0LnRoZURhdGUuZ2V0RnVsbFllYXIoKT09PWwubWluRGF0ZS5nZXRGdWxsWWVhcigpJiZ0LnRoZURhdGUuZ2V0TW9udGgoKTw9bC5taW5EYXRlLmdldE1vbnRoKCkpe3QuY2FsTm9QcmV2PXRydWV9fWlmKGUubWF4RGF5cyE9PWZhbHNlKXtsLm1heERhdGUuYWRqdXN0KFwiZFwiLGUubWF4RGF5cyk7aWYodC50aGVEYXRlLmdldEZ1bGxZZWFyKCk9PT1sLm1heERhdGUuZ2V0RnVsbFllYXIoKSYmdC50aGVEYXRlLmdldE1vbnRoKCk+PWwubWF4RGF0ZS5nZXRNb250aCgpKXt0LmNhbE5vTmV4dD10cnVlfX1pZihlLmNhbFNob3dEYXlzKXtpZihlLmxhbmdbZS51c2VMYW5nXS5kYXlzT2ZXZWVrU2hvcnQubGVuZ3RoPDgpe2UuZGF5c09mV2Vla1Nob3J0PWUubGFuZ1tlLnVzZUxhbmddLmRheXNPZldlZWtTaG9ydC5jb25jYXQoZS5sYW5nW2UudXNlTGFuZ10uZGF5c09mV2Vla1Nob3J0KX1sLndlZWtEYXlzPWEoXCI8ZGl2PlwiLHtcImNsYXNzXCI6XCJ1aS1kYXRlYm94LWdyaWRyb3dcIn0pLmFwcGVuZFRvKHQuY29udHJvbHNQbHVzKTtpZihlLmxhbmdbZS51c2VMYW5nXS5pc1JUTD09PXRydWUpe2wud2Vla0RheXMuY3NzKFwiZGlyZWN0aW9uXCIsXCJydGxcIil9Zm9yKGc9MDtnPD02O2crKyl7YShcIjxkaXY+XCIrZS5sYW5nW2UudXNlTGFuZ10uZGF5c09mV2Vla1Nob3J0WyhnK2wuc3RhcnREYXkpJTddK1wiPC9kaXY+XCIpLmFkZENsYXNzKFwidWktZGF0ZWJveC1ncmlkZGF0ZSB1aS1kYXRlYm94LWdyaWRkYXRlLWVtcHR5IHVpLWRhdGVib3gtZ3JpZGRhdGUtbGFiZWxcIikuYXBwZW5kVG8obC53ZWVrRGF5cyl9fWlmKGUuZml4RGF0ZUFycmF5cz09PXRydWUpe2UuYmxhY2tEYXRlcz10Ll9maXhBcnJheShlLmJsYWNrRGF0ZXMpO2UuaGlnaERhdGVzPXQuX2ZpeEFycmF5KGUuaGlnaERhdGVzKTtlLmhpZ2hEYXRlc0FsdD10Ll9maXhBcnJheShlLmhpZ2hEYXRlc0FsdCk7ZS5lbmFibGVEYXRlcz10Ll9maXhBcnJheShlLmVuYWJsZURhdGVzKX1mb3IoaD0wO2g8PTU7aCsrKXtpZihoPT09MHx8KGg+MCYmKGwudG9kYXk+MCYmbC50b2RheTw9bC5lbmQpKSl7bj1hKFwiPGRpdj5cIix7XCJjbGFzc1wiOlwidWktZGF0ZWJveC1ncmlkcm93XCJ9KTtpZihlLmxhbmdbZS51c2VMYW5nXS5pc1JUTD09PXRydWUpe24uY3NzKFwiZGlyZWN0aW9uXCIsXCJydGxcIil9Zm9yKGo9MDtqPD02O2orKyl7aWYoaj09PTApe2wud2Vla01vZGU9KGwudG9kYXk8MSk/KGwucHJldnRvZGF5LWwubGFzdGVuZCtlLmNhbFdlZWtNb2RlRmlyc3REYXkpOihsLnRvZGF5K2UuY2FsV2Vla01vZGVGaXJzdERheSl9aWYoaj09PWwuc3RhcnQmJmg9PT0wKXtsLnRvZGF5PTF9aWYobC50b2RheT5sLmVuZCl7bC50b2RheT0tMX1pZihsLnRvZGF5PDEpe2lmKGUuY2FsU2hvd09ubHlNb250aCl7YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtZ3JpZGRhdGUgdWktZGF0ZWJveC1ncmlkZGF0ZS1lbXB0eVwifSkuYXBwZW5kVG8obil9ZWxzZXtpZihlLmVuYWJsZURhdGVzIT09ZmFsc2Upe2lmKChhLmluQXJyYXkodC50aGVEYXRlLmNvcHltb2QoWzAsLTFdLFswLDAsbC5wcmV2dG9kYXldKS5nZXRJU08oKSxlLmVuYWJsZURhdGVzKT4tMSl8fChhLmluQXJyYXkodC50aGVEYXRlLmNvcHltb2QoWzAsMV0sWzAsMCxsLm5leHR0b2RheV0pLmdldElTTygpLGUuZW5hYmxlRGF0ZXMpPi0xKSl7cj1mYWxzZX1lbHNle3I9dHJ1ZX19ZWxzZXtpZigoZS5hZnRlclRvZGF5IT09ZmFsc2UmJmg9PT0wJiZsLnRoaXNEYXRlLmdldE1vbnRoKCk+PXQudGhlRGF0ZS5nZXRNb250aCgpLTEmJnQudGhlRGF0ZS5nZXRGdWxsWWVhcigpPT09bC50aGlzRGF0ZS5nZXRGdWxsWWVhcigpJiZsLnRoaXNEYXRlLmdldERhdGUoKT5sLnByZXZ0b2RheSl8fChlLmJlZm9yZVRvZGF5IT09ZmFsc2UmJmghPT0wJiZsLnRoaXNEYXRlLmdldE1vbnRoKCk8PXQudGhlRGF0ZS5nZXRNb250aCgpKzEmJnQudGhlRGF0ZS5nZXRGdWxsWWVhcigpPT09bC50aGlzRGF0ZS5nZXRGdWxsWWVhcigpJiZsLnRoaXNEYXRlLmdldERhdGUoKTxsLm5leHR0b2RheSl8fChlLmJsYWNrRGF5cyE9PWZhbHNlJiZhLmluQXJyYXkoaixlLmJsYWNrRGF5cyk+LTEpfHwoZS5ibGFja0RhdGVzIT09ZmFsc2UmJmEuaW5BcnJheSh0LnRoZURhdGUuY29weW1vZChbMCwtMV0sWzAsMCxsLnByZXZ0b2RheV0pLmdldElTTygpLGUuYmxhY2tEYXRlcyk+LTEpfHwoZS5ibGFja0RhdGVzIT09ZmFsc2UmJmEuaW5BcnJheSh0LnRoZURhdGUuY29weW1vZChbMCwxXSxbMCwwLGwubmV4dHRvZGF5XSkuZ2V0SVNPKCksZS5ibGFja0RhdGVzKT4tMSkpe3I9dHJ1ZX1lbHNle3I9ZmFsc2V9fWlmKGg9PT0wKXthKFwiPGRpdj5cIitTdHJpbmcobC5wcmV2dG9kYXkpK1wiPC9kaXY+XCIpLmFkZENsYXNzKFwidWktZGF0ZWJveC1ncmlkZGF0ZSB1aS1kYXRlYm94LWdyaWRkYXRlLWVtcHR5XCIpLmFwcGVuZFRvKG4pLmpxbURhdGEoXCJkYXRlXCIsKChlLmNhbFdlZWtNb2RlKT8obC53ZWVrTW9kZStsLmxhc3RlbmQpOmwucHJldnRvZGF5KSkuanFtRGF0YShcImVuYWJsZWRcIiwoIXImJiF0LmNhbE5vUHJldikpLmpxbURhdGEoXCJtb250aFwiLC0xKTtsLnByZXZ0b2RheSsrfWVsc2V7YShcIjxkaXY+XCIrU3RyaW5nKGwubmV4dHRvZGF5KStcIjwvZGl2PlwiKS5hZGRDbGFzcyhcInVpLWRhdGVib3gtZ3JpZGRhdGUgdWktZGF0ZWJveC1ncmlkZGF0ZS1lbXB0eVwiKS5hcHBlbmRUbyhuKS5qcW1EYXRhKFwiZGF0ZVwiLCgoZS5jYWxXZWVrTW9kZSk/bC53ZWVrTW9kZTpsLm5leHR0b2RheSkpLmpxbURhdGEoXCJlbmFibGVkXCIsKCFyJiYhdC5jYWxOb05leHQpKS5qcW1EYXRhKFwibW9udGhcIiwxKTtsLm5leHR0b2RheSsrfX19ZWxzZXtyPWZhbHNlO2lmKGUuZW5hYmxlRGF0ZXMpe2lmKGEuaW5BcnJheSh0LnRoZURhdGUuY29weW1vZChbMF0sWzAsMCxsLnRvZGF5XSkuZ2V0SVNPKCksZS5lbmFibGVEYXRlcyk8MCl7cj10cnVlfX1pZihsLmNoZWNrRGF0ZXMpe2lmKGUuYWZ0ZXJUb2RheSYmbC50aGlzRGF0ZS5nZXRDb21wKCk+KHQudGhlRGF0ZS5nZXRDb21wKCkrbC50b2RheS10LnRoZURhdGUuZ2V0RGF0ZSgpKSl7cj10cnVlfWlmKCFyJiZlLmJlZm9yZVRvZGF5JiZsLnRoaXNEYXRlLmdldENvbXAoKTwodC50aGVEYXRlLmdldENvbXAoKStsLnRvZGF5LXQudGhlRGF0ZS5nZXREYXRlKCkpKXtyPXRydWV9aWYoIXImJmUubm90VG9kYXkmJmwudG9kYXk9PT1sLmhpZ2hsaWdodERheSl7cj10cnVlfWlmKCFyJiZlLm1heERheXMhPT1mYWxzZSYmbC5tYXhEYXRlLmdldENvbXAoKTwodC50aGVEYXRlLmdldENvbXAoKStsLnRvZGF5LXQudGhlRGF0ZS5nZXREYXRlKCkpKXtyPXRydWV9aWYoIXImJmUubWluRGF5cyE9PWZhbHNlJiZsLm1pbkRhdGUuZ2V0Q29tcCgpPih0LnRoZURhdGUuZ2V0Q29tcCgpK2wudG9kYXktdC50aGVEYXRlLmdldERhdGUoKSkpe3I9dHJ1ZX1pZighciYmKGUuYmxhY2tEYXlzIT09ZmFsc2V8fGUuYmxhY2tEYXRlcyE9PWZhbHNlKSl7aWYoKGEuaW5BcnJheShqLGUuYmxhY2tEYXlzKT4tMSl8fChhLmluQXJyYXkodC50aGVEYXRlLmNvcHltb2QoWzBdLFswLDAsbC50b2RheV0pLmdldElTTygpLGUuYmxhY2tEYXRlcyk+LTEpKXtyPXRydWV9fX1pZihlLmNhbEhpZ2hQaWNrZWQmJmwudG9kYXk9PT1sLnByZXNldERheSl7bC50aGlzVGhlbWU9ZS5waWNrUGFnZUhpZ2hCdXR0b25UaGVtZX1lbHNle2lmKGUuY2FsSGlnaFRvZGF5JiZsLnRvZGF5PT09bC5oaWdobGlnaHREYXkpe2wudGhpc1RoZW1lPWUucGlja1BhZ2VUb2RheUJ1dHRvblRoZW1lfWVsc2V7aWYoYS5pc0FycmF5KGUuaGlnaERhdGVzQWx0KSYmKGEuaW5BcnJheSh0LnRoZURhdGUuY29weW1vZChbMF0sWzAsMCxsLnRvZGF5XSkuZ2V0SVNPKCksZS5oaWdoRGF0ZXNBbHQpPi0xKSl7bC50aGlzVGhlbWU9ZS5waWNrUGFnZU9BSGlnaEJ1dHRvblRoZW1lfWVsc2V7aWYoYS5pc0FycmF5KGUuaGlnaERhdGVzKSYmKGEuaW5BcnJheSh0LnRoZURhdGUuY29weW1vZChbMF0sWzAsMCxsLnRvZGF5XSkuZ2V0SVNPKCksZS5oaWdoRGF0ZXMpPi0xKSl7bC50aGlzVGhlbWU9ZS5waWNrUGFnZU9IaWdoQnV0dG9uVGhlbWV9ZWxzZXtpZihhLmlzQXJyYXkoZS5oaWdoRGF5cykmJmEuaW5BcnJheShqLGUuaGlnaERheXMpPi0xKXtsLnRoaXNUaGVtZT1lLnBpY2tQYWdlT0RIaWdoQnV0dG9uVGhlbWV9ZWxzZXtsLnRoaXNUaGVtZT1lLnBpY2tQYWdlQnV0dG9uVGhlbWV9fX19fWEoXCI8ZGl2PlwiK1N0cmluZyhsLnRvZGF5KStcIjwvZGl2PlwiKS5hZGRDbGFzcyhcInVpLWRhdGVib3gtZ3JpZGRhdGUgdWktY29ybmVyLWFsbCB1aS1idG4tdXAtXCIrbC50aGlzVGhlbWUrKChyKT9cIiB1aS1kYXRlYm94LWdyaWRkYXRlLWRpc2FibGVcIjpcIlwiKSkuanFtRGF0YShcImRhdGVcIiwoKGUuY2FsV2Vla01vZGUpP2wud2Vla01vZGU6bC50b2RheSkpLmpxbURhdGEoXCJ0aGVtZVwiLGwudGhpc1RoZW1lKS5qcW1EYXRhKFwiZW5hYmxlZFwiLCFyKS5qcW1EYXRhKFwibW9udGhcIiwwKS5hcHBlbmRUbyhuKTtsLnRvZGF5Kyt9fX1uLmFwcGVuZFRvKHQuY29udHJvbHNQbHVzKX10LmNvbnRyb2xzUGx1cy5kZWxlZ2F0ZShcImRpdi51aS1kYXRlYm94LWdyaWRkYXRlXCIsZS5jbGlja0V2ZW50K1wiIHZtb3VzZW92ZXIgdm1vdXNlb3V0XCIsZnVuY3Rpb24oaSl7aWYoaS50eXBlPT09ZS5jbGlja0V2ZW50KXtpLnByZXZlbnREZWZhdWx0KCk7aWYoYSh0aGlzKS5qcW1EYXRhKFwiZW5hYmxlZFwiKSl7aWYoYSh0aGlzKS5qcW1EYXRhKFwibW9udGhcIik8MCl7dC50aGVEYXRlLmFkanVzdChcIm1cIiwtMSk7dC50aGVEYXRlLnNldERhdGUoYSh0aGlzKS5qcW1EYXRhKFwiZGF0ZVwiKSl9ZWxzZXtpZihhKHRoaXMpLmpxbURhdGEoXCJtb250aFwiKT4wKXt0LnRoZURhdGUuc2V0RGF0ZShhKHRoaXMpLmpxbURhdGEoXCJkYXRlXCIpKTtpZighZS5jYWxXZWVrTW9kZSl7dC50aGVEYXRlLmFkanVzdChcIm1cIiwxKX19ZWxzZXt0LnRoZURhdGUuc2V0RGF0ZShhKHRoaXMpLmpxbURhdGEoXCJkYXRlXCIpKX19dC5pbnB1dC50cmlnZ2VyKFwiZGF0ZWJveFwiLHttZXRob2Q6XCJzZXRcIix2YWx1ZTp0Ll9mb3JtYXREYXRlKHQudGhlRGF0ZSksZGF0ZTp0LnRoZURhdGV9KTt0LmlucHV0LnRyaWdnZXIoXCJkYXRlYm94XCIse21ldGhvZDpcImNsb3NlXCJ9KX19ZWxzZXtpZihhKHRoaXMpLmpxbURhdGEoXCJlbmFibGVkXCIpJiZ0eXBlb2YgYSh0aGlzKS5qcW1EYXRhKFwidGhlbWVcIikhPT1cInVuZGVmaW5lZFwiKXtpZihlLmNhbFdlZWtNb2RlIT09ZmFsc2UmJmUuY2FsV2Vla01vZGVIaWdobGlnaHQ9PT10cnVlKXthKHRoaXMpLnBhcmVudCgpLmZpbmQoXCJkaXZcIikuZWFjaChmdW5jdGlvbigpe3QuX2hvb3Zlcih0aGlzKX0pfWVsc2V7dC5faG9vdmVyKHRoaXMpfX19fSl9aWYoZS5sYW5nW3RoaXMub3B0aW9ucy51c2VMYW5nXS51c2VBcmFiaWNJbmRpYz09PXRydWUpe3QuX21ha2VEaXNwbGF5SW5kaWMoKX19LF9nZXRMb25nT3B0aW9uczpmdW5jdGlvbihlKXt2YXIgZCxmPXt9LGcsYztpZihhLm1vYmlsZS5ucz09XCJcIil7Zz1cImRhdGVib3hcIn1lbHNle2c9YS5tb2JpbGUubnMuc3Vic3RyKDAsYS5tb2JpbGUubnMubGVuZ3RoLTEpK1wiRGF0ZWJveFwifWZvcihkIGluIGUuZGF0YSgpKXtpZihkLnN1YnN0cigwLGcubGVuZ3RoKT09PWcmJmQubGVuZ3RoPmcubGVuZ3RoKXtjPWQuc3Vic3RyKGcubGVuZ3RoKTtjPWMuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrYy5zbGljZSgxKTtmW2NdPWUuZGF0YShkKX19cmV0dXJuIGZ9LF9jcmVhdGU6ZnVuY3Rpb24oKXthKGRvY3VtZW50KS50cmlnZ2VyKFwiZGF0ZWJveGNyZWF0ZVwiKTt2YXIgYz10aGlzLGQ9YS5leHRlbmQodGhpcy5vcHRpb25zLHRoaXMuZWxlbWVudC5qcW1EYXRhKFwib3B0aW9uc1wiKSksZD0oKHR5cGVvZiB0aGlzLmVsZW1lbnQuanFtRGF0YShcIm9wdGlvbnNcIik9PT1cInVuZGVmaW5lZFwiKT9hLmV4dGVuZChkLHRoaXMuX2dldExvbmdPcHRpb25zKHRoaXMuZWxlbWVudCkpOmQpO2lucHV0PXRoaXMuZWxlbWVudCx0aGlzVGhlbWU9KGQudGhlbWU9PT1mYWxzZSYmdHlwZW9mKGEoYykuanFtRGF0YShcInRoZW1lXCIpKT09PVwidW5kZWZpbmVkXCIpPygodHlwZW9mKGlucHV0LnBhcmVudHNVbnRpbChcIjpqcW1EYXRhKHRoZW1lKVwiKS5wYXJlbnQoKS5qcW1EYXRhKFwidGhlbWVcIikpPT09XCJ1bmRlZmluZWRcIik/ZC5kZWZhdWx0VGhlbWU6aW5wdXQucGFyZW50c1VudGlsKFwiOmpxbURhdGEodGhlbWUpXCIpLnBhcmVudCgpLmpxbURhdGEoXCJ0aGVtZVwiKSk6ZC50aGVtZSxmb2N1c2VkRWw9aW5wdXQud3JhcCgnPGRpdiBjbGFzcz1cInVpLWlucHV0LWRhdGVib3ggdWktc2hhZG93LWluc2V0IHVpLWNvcm5lci1hbGwgdWktYm9keS0nK3RoaXNUaGVtZSsnXCI+PC9kaXY+JykucGFyZW50KCksdGhlRGF0ZT1uZXcgRGF0ZSgpLGluaXREYXRlPW5ldyBEYXRlKHRoZURhdGUuZ2V0VGltZSgpKSxvcGVuYnV0dG9uPWEoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJ1aS1pbnB1dC1jbGVhclwiIHRpdGxlPVwiJysoKHR5cGVvZiBkLmxhbmdbZC51c2VMYW5nXS50b29sdGlwIT09XCJ1bmRlZmluZWRcIik/ZC5sYW5nW2QudXNlTGFuZ10udG9vbHRpcDpkLmxhbmcuZW4udG9vbHRpcCkrJ1wiPicrKCh0eXBlb2YgZC5sYW5nW2QudXNlTGFuZ10udG9vbHRpcCE9PVwidW5kZWZpbmVkXCIpP2QubGFuZ1tkLnVzZUxhbmddLnRvb2x0aXA6ZC5sYW5nLmVuLnRvb2x0aXApK1wiPC9hPlwiKS5iaW5kKGQuY2xpY2tFdmVudCxmdW5jdGlvbihmKXtmLnByZXZlbnREZWZhdWx0KCk7aWYoIWQuZGlzYWJsZWQpe2MuaW5wdXQudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwib3BlblwifSk7Yy5mb2N1c2VkRWwuYWRkQ2xhc3MoXCJ1aS1mb2N1c1wiKX1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShmLnRhcmdldCkuY2xvc2VzdChcImFcIikucmVtb3ZlQ2xhc3MoYS5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MpfSwzMDApfSkuYXBwZW5kVG8oZm9jdXNlZEVsKS5idXR0b25NYXJrdXAoe2ljb246XCJncmlkXCIsaWNvbnBvczpcIm5vdGV4dFwiLGNvcm5lcnM6dHJ1ZSxzaGFkb3c6dHJ1ZX0pLmNzcyh7XCJ2ZXJ0aWNhbC1hbGlnblwiOlwibWlkZGxlXCIsZGlzcGxheTpcImlubGluZS1ibG9ja1wifSksdGhpc1BhZ2U9aW5wdXQuY2xvc2VzdChcIi51aS1wYWdlXCIpLG5zPSh0eXBlb2YgYS5tb2JpbGUubnMhPT1cInVuZGVmaW5lZFwiKT9hLm1vYmlsZS5uczpcIlwiLHBpY2tQYWdlPWEoXCI8ZGl2IGRhdGEtXCIrbnMrXCJyb2xlPSdkaWFsb2cnIGNsYXNzPSd1aS1kaWFsb2ctZGF0ZWJveCcgZGF0YS1cIitucytcInRoZW1lPSdcIisoKGQuZm9yY2VJbmhlcml0VGhlbWU9PT1mYWxzZSk/ZC5waWNrUGFnZVRoZW1lOnRoaXNUaGVtZSkrXCInID48ZGl2IGRhdGEtXCIrbnMrXCJyb2xlPSdoZWFkZXInIGRhdGEtXCIrbnMrXCJiYWNrYnRuPSdmYWxzZScgZGF0YS1cIitucytcInRoZW1lPSdhJz48ZGl2IGNsYXNzPSd1aS10aXRsZSc+UGxhY2VIb2xkZXI8L2Rpdj48L2Rpdj48ZGl2IGRhdGEtXCIrbnMrXCJyb2xlPSdjb250ZW50Jz48L2Rpdj48L2Rpdj5cIikuYXBwZW5kVG8oYS5tb2JpbGUucGFnZUNvbnRhaW5lcikucGFnZSgpLmNzcyhcIm1pbkhlaWdodFwiLFwiMHB4XCIpLmNzcyhcInpJbmRleFwiLGQuemluZGV4KS5hZGRDbGFzcyhkLnRyYW5zaXRpb24pLHBpY2tQYWdlVGl0bGU9cGlja1BhZ2UuZmluZChcIi51aS10aXRsZVwiKSxwaWNrUGFnZUNvbnRlbnQ9cGlja1BhZ2UuZmluZChcIi51aS1jb250ZW50XCIpLHRvdWNoPSh0eXBlb2Ygd2luZG93Lm9udG91Y2hzdGFydCE9PVwidW5kZWZpbmVkXCIpLFNUQVJUX0VWRU5UPXRvdWNoP1widG91Y2hzdGFydFwiOlwibW91c2Vkb3duXCIsTU9WRV9FVkVOVD10b3VjaD9cInRvdWNobW92ZVwiOlwibW91c2Vtb3ZlXCIsRU5EX0VWRU5UPXRvdWNoP1widG91Y2hlbmRcIjpcIm1vdXNldXBcIixkcmFnTW92ZT1mYWxzZSxkcmFnU3RhcnQ9ZmFsc2UsZHJhZ0VuZD1mYWxzZSxkcmFnUG9zPWZhbHNlLGRyYWdUYXJnZXQ9ZmFsc2UsZHJhZ1RoaXNEZWx0YT0wO2QudGhlbWU9dGhpc1RoZW1lO2EuZXh0ZW5kKGMse2lucHV0OmlucHV0LGZvY3VzZWRFbDpmb2N1c2VkRWx9KTtpZihkLmZvcmNlSW5oZXJpdFRoZW1lKXtkLnBpY2tQYWdlVGhlbWU9dGhpc1RoZW1lO2QucGlja1BhZ2VJbnB1dFRoZW1lPXRoaXNUaGVtZTtkLnBpY2tQYWdlQnV0dG9uVGhlbWU9dGhpc1RoZW1lfWlmKGQuZGVmYXVsdFBpY2tlclZhbHVlPT09ZmFsc2UmJmQuZGVmYXVsdERhdGUhPT1mYWxzZSl7ZC5kZWZhdWx0UGlja2VyVmFsdWU9ZC5kZWZhdWx0RGF0ZX1pZihkLm51bWJlcklucHV0RW5oYW5jZT09PXRydWUpe2lmKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSl8fG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKXx8bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBvZC9pKSl7ZC5pbnRlcm5hbElucHV0VHlwZT1cIm51bWJlclwifX1hKFwibGFiZWxbZm9yPSdcIitpbnB1dC5hdHRyKFwiaWRcIikrXCInXVwiKS5hZGRDbGFzcyhcInVpLWlucHV0LXRleHRcIikuY3NzKFwidmVydGljYWxBbGlnblwiLFwibWlkZGxlXCIpO2lmKGQubW9kZT09PVwidGltZWZsaXBib3hcIil7ZC5sYW5nW2QudXNlTGFuZ10uaGVhZGVyRm9ybWF0PVwiIFwifWlmKGQubm9CdXR0b25Gb2N1c01vZGV8fGQudXNlSW5saW5lfHxkLm5vQnV0dG9uKXtvcGVuYnV0dG9uLmhpZGUoKX1jLmZvY3VzZWRFbC5iaW5kKGQuY2xpY2tFdmVudCxmdW5jdGlvbigpe2lmKCFkLmRpc2FibGVkJiYoZC5ub0J1dHRvbkZvY3VzTW9kZXx8ZC5mb2N1c01vZGUpKXtjLmlucHV0LnRyaWdnZXIoXCJkYXRlYm94XCIse21ldGhvZDpcIm9wZW5cIn0pO2MuZm9jdXNlZEVsLmFkZENsYXNzKFwidWktZm9jdXNcIik7Yy5pbnB1dC5yZW1vdmVDbGFzcyhcInVpLWZvY3VzXCIpfX0pO2MuaW5wdXQucmVtb3ZlQ2xhc3MoXCJ1aS1jb3JuZXItYWxsIHVpLXNoYWRvdy1pbnNldFwiKS5mb2N1cyhmdW5jdGlvbigpe2lmKCFkLmRpc2FibGVkKXtjLmZvY3VzZWRFbC5hZGRDbGFzcyhcInVpLWZvY3VzXCIpfWMuaW5wdXQucmVtb3ZlQ2xhc3MoXCJ1aS1mb2N1c1wiKX0pLmJsdXIoZnVuY3Rpb24oKXtjLmZvY3VzZWRFbC5yZW1vdmVDbGFzcyhcInVpLWZvY3VzXCIpO2MuaW5wdXQucmVtb3ZlQ2xhc3MoXCJ1aS1mb2N1c1wiKX0pLmNoYW5nZShmdW5jdGlvbigpe2MudGhlRGF0ZT1jLl9tYWtlRGF0ZShjLmlucHV0LnZhbCgpKTtjLl91cGRhdGUoKX0pO2MuaW5wdXQuYmluZChcImRhdGVib3hcIixjLl9kYXRlYm94SGFuZGxlcik7cGlja1BhZ2UuZmluZChcIi51aS1oZWFkZXIgYVwiKS51bmJpbmQoXCJjbGljayB2Y2xpY2tcIikuYmluZChkLmNsaWNrRXZlbnQsZnVuY3Rpb24oZil7Zi5wcmV2ZW50RGVmYXVsdCgpO2Yuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7Yy5pbnB1dC50cmlnZ2VyKFwiZGF0ZWJveFwiLHttZXRob2Q6XCJjbG9zZVwiLGZyb21DbG9zZUJ1dHRvbjpmYWxzZX0pfSk7YS5leHRlbmQoYyx7cGlja1BhZ2U6cGlja1BhZ2UsdGhpc1BhZ2U6dGhpc1BhZ2UscGlja1BhZ2VDb250ZW50OnBpY2tQYWdlQ29udGVudCxwaWNrUGFnZVRpdGxlOnBpY2tQYWdlVGl0bGUsdGhlRGF0ZTp0aGVEYXRlLGluaXREYXRlOmluaXREYXRlLHRvdWNoOnRvdWNoLFNUQVJUX0RSQUc6U1RBUlRfRVZFTlQsTU9WRV9EUkFHOk1PVkVfRVZFTlQsRU5EX0RSQUc6RU5EX0VWRU5ULGRyYWdNb3ZlOmRyYWdNb3ZlLGRyYWdTdGFydDpkcmFnU3RhcnQsZHJhZ0VuZDpkcmFnRW5kLGRyYWdQb3M6ZHJhZ1Bvc30pO2lmKHR5cGVvZiBhLmV2ZW50LnNwZWNpYWwubW91c2V3aGVlbCE9PVwidW5kZWZpbmVkXCIpe2Qud2hlZWxFeGlzdHM9dHJ1ZX1jLl9idWlsZFBhZ2UoKTtpZihkLnN3aXBlRW5hYmxlZCl7YShkb2N1bWVudCkuYmluZChjLk1PVkVfRFJBRyxmdW5jdGlvbihmKXtpZihjLmRyYWdNb3ZlKXtpZihkLm1vZGU9PT1cInNsaWRlYm94XCIpe2MuZHJhZ0VuZD1jLnRvdWNoP2Yub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDpmLnBhZ2VYO2MuZHJhZ1RhcmdldC5jc3MoXCJtYXJnaW5MZWZ0XCIsKGMuZHJhZ1BvcytjLmRyYWdFbmQtYy5kcmFnU3RhcnQpK1wicHhcIik7Zi5wcmV2ZW50RGVmYXVsdCgpO2Yuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuIGZhbHNlfWVsc2V7aWYoZC5tb2RlPT09XCJmbGlwYm94XCJ8fGQubW9kZT09PVwidGltZWZsaXBib3hcIil7Yy5kcmFnRW5kPWMudG91Y2g/Zi5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZOmYucGFnZVk7Yy5kcmFnVGFyZ2V0LmNzcyhcIm1hcmdpblRvcFwiLChjLmRyYWdQb3MrYy5kcmFnRW5kLWMuZHJhZ1N0YXJ0KStcInB4XCIpO2YucHJldmVudERlZmF1bHQoKTtmLnN0b3BQcm9wYWdhdGlvbigpO3JldHVybiBmYWxzZX1lbHNle2lmKGQubW9kZT09PVwiZHVyYXRpb25ib3hcInx8ZC5tb2RlPT09XCJ0aW1lYm94XCJ8fGQubW9kZT09PVwiZGF0ZWJveFwiKXtjLmRyYWdFbmQ9Yy50b3VjaD9mLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk6Zi5wYWdlWTtpZigoYy5kcmFnRW5kLWMuZHJhZ1N0YXJ0KSUyPT09MCl7ZHJhZ1RoaXNEZWx0YT0oYy5kcmFnRW5kLWMuZHJhZ1N0YXJ0KS8tMjtpZihkcmFnVGhpc0RlbHRhPGMuZHJhZ1Bvcyl7Yy5fb2Zmc2V0KGMuZHJhZ1RhcmdldCwtMSooYy5kcmFnVGFyZ2V0PT09XCJpXCI/ZC5taW51dGVTdGVwOjEpKX1lbHNle2lmKGRyYWdUaGlzRGVsdGE+Yy5kcmFnUG9zKXtjLl9vZmZzZXQoYy5kcmFnVGFyZ2V0LChjLmRyYWdUYXJnZXQ9PT1cImlcIj9kLm1pbnV0ZVN0ZXA6MSkpfX1jLmRyYWdQb3M9ZHJhZ1RoaXNEZWx0YX1mLnByZXZlbnREZWZhdWx0KCk7Zi5zdG9wUHJvcGFnYXRpb24oKTtyZXR1cm4gZmFsc2V9fX19fSk7YShkb2N1bWVudCkuYmluZChjLkVORF9EUkFHLGZ1bmN0aW9uKGgpe2lmKGMuZHJhZ01vdmUpe2MuZHJhZ01vdmU9ZmFsc2U7aWYoZC5tb2RlPT09XCJzbGlkZWJveFwiKXtpZihjLmRyYWdFbmQhPT1mYWxzZSYmTWF0aC5hYnMoYy5kcmFnU3RhcnQtYy5kcmFnRW5kKT4yNSl7aC5wcmV2ZW50RGVmYXVsdCgpO2guc3RvcFByb3BhZ2F0aW9uKCk7c3dpdGNoKGMuZHJhZ1RhcmdldC5wYXJlbnQoKS5qcW1EYXRhKFwicm93dHlwZVwiKSl7Y2FzZVwieVwiOmMuX29mZnNldChcInlcIixwYXJzZUludCgoYy5kcmFnU3RhcnQtYy5kcmFnRW5kKS84NCwxMCkpO2JyZWFrO2Nhc2VcIm1cIjpjLl9vZmZzZXQoXCJtXCIscGFyc2VJbnQoKGMuZHJhZ1N0YXJ0LWMuZHJhZ0VuZCkvNTEsMTApKTticmVhaztjYXNlXCJkXCI6Yy5fb2Zmc2V0KFwiZFwiLHBhcnNlSW50KChjLmRyYWdTdGFydC1jLmRyYWdFbmQpLzMyLDEwKSk7YnJlYWs7Y2FzZVwiaFwiOmMuX29mZnNldChcImhcIixwYXJzZUludCgoYy5kcmFnU3RhcnQtYy5kcmFnRW5kKS8zMiwxMCkpO2JyZWFrO2Nhc2VcImlcIjpjLl9vZmZzZXQoXCJpXCIscGFyc2VJbnQoKGMuZHJhZ1N0YXJ0LWMuZHJhZ0VuZCkvMzIsMTApKTticmVha319fWVsc2V7aWYoZC5tb2RlPT09XCJmbGlwYm94XCJ8fGQubW9kZT09PVwidGltZWZsaXBib3hcIil7aWYoYy5kcmFnRW5kIT09ZmFsc2Upe2gucHJldmVudERlZmF1bHQoKTtoLnN0b3BQcm9wYWdhdGlvbigpO3ZhciBnPWMuZHJhZ1RhcmdldC5wYXJlbnQoKS5wYXJlbnQoKS5qcW1EYXRhKFwiZmllbGRcIiksZj1wYXJzZUludCgoYy5kcmFnU3RhcnQtYy5kcmFnRW5kKS8zMCwxMCk7Yy5fb2Zmc2V0KGcsZiooKGc9PT1cImlcIik/ZC5taW51dGVTdGVwOjEpKX19fWMuZHJhZ1N0YXJ0PWZhbHNlO2MuZHJhZ0VuZD1mYWxzZX19KX1pZihjLmlucHV0LmlzKFwiOmRpc2FibGVkXCIpKXtjLmRpc2FibGUoKX1pZihkLmRpc2FibGVNYW51YWxJbnB1dD09PXRydWUpe2MuaW5wdXQuYXR0cihcInJlYWRvbmx5XCIsdHJ1ZSl9YShkb2N1bWVudCkudHJpZ2dlcihcImRhdGVib3hhZnRlcmNyZWF0ZVwiKX0sX21ha2VFbGVtZW50OmZ1bmN0aW9uKGYsZyl7dmFyIGM9dGhpcyxkPWZhbHNlLGU9ZmFsc2U7ZT1mLmNsb25lKCk7aWYodHlwZW9mIGcuYXR0ciE9PVwidW5kZWZpbmVkXCIpe2ZvcihkIGluIGcuYXR0cil7aWYoZy5hdHRyLmhhc093blByb3BlcnR5KGQpKXtlLmpxbURhdGEoZCxnLmF0dHJbZF0pfX19cmV0dXJuIGV9LF9ldmVudEVudGVyVmFsdWU6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcyxlPWMub3B0aW9ucyxmPWZhbHNlO2lmKGQudmFsKCkhPT1cIlwiJiZjLl9pc0ludChkLnZhbCgpKSl7c3dpdGNoKGQuanFtRGF0YShcImZpZWxkXCIpKXtjYXNlXCJtXCI6Yy50aGVEYXRlLnNldE1vbnRoKHBhcnNlSW50KGQudmFsKCksMTApLTEpO2JyZWFrO2Nhc2VcImRcIjpjLnRoZURhdGUuc2V0RGF0ZShwYXJzZUludChkLnZhbCgpLDEwKSk7YnJlYWs7Y2FzZVwieVwiOmMudGhlRGF0ZS5zZXRGdWxsWWVhcihwYXJzZUludChkLnZhbCgpLDEwKSk7YnJlYWs7Y2FzZVwiaVwiOmMudGhlRGF0ZS5zZXRNaW51dGVzKHBhcnNlSW50KGQudmFsKCksMTApKTticmVhaztjYXNlXCJoXCI6Zj1wYXJzZUludChkLnZhbCgpLDEwKTtpZihmPT09MTIpe2lmKChlLmxhbmdbZS51c2VMYW5nXS50aW1lRm9ybWF0PT09MTJ8fGUudGltZUZvcm1hdE92ZXJyaWRlPT09MTIpJiZjLnBpY2tlck1lcmkudmFsKCk9PT1lLm1lcmlkaWVtTGV0dGVyc1swXSl7Zj0wfX1jLnRoZURhdGUuc2V0SG91cnMoZik7YnJlYWt9Yy5fdXBkYXRlKCl9fSxfYnVpbGRJbnRlcm5hbHM6ZnVuY3Rpb24oKXt2YXIgcD10aGlzLHI9cC5vcHRpb25zLG0sayx2LGUsdz1hKFwiPGRpdj48YSBocmVmPScjJz48L2E+PC9kaXY+XCIpLGY9YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtY29udGFpbmVyIHVpLW92ZXJsYXktc2hhZG93IHVpLWNvcm5lci1hbGwgdWktZGF0ZWJveC1oaWRkZW4gcG9wIHVpLWJvZHktXCIrci5waWNrUGFnZVRoZW1lfSkuY3NzKFwiekluZGV4XCIsci56aW5kZXgpLHo9YShcIjxpbnB1dCB0eXBlPSdcIityLmludGVybmFsSW5wdXRUeXBlK1wiJyAvPlwiKS5hZGRDbGFzcyhcInVpLWlucHV0LXRleHQgdWktY29ybmVyLWFsbCB1aS1zaGFkb3ctaW5zZXQgdWktZGF0ZWJveC1pbnB1dCB1aS1ib2R5LVwiK3IucGlja1BhZ2VJbnB1dFRoZW1lKSx0PWEoXCI8aW5wdXQgdHlwZT0ndGV4dCcgLz5cIikuYWRkQ2xhc3MoXCJ1aS1pbnB1dC10ZXh0IHVpLWNvcm5lci1hbGwgdWktc2hhZG93LWluc2V0IHVpLWRhdGVib3gtaW5wdXQgdWktYm9keS1cIityLnBpY2tQYWdlSW5wdXRUaGVtZSksaj1hKFwiPGRpdj5cIix7XCJjbGFzc1wiOlwidWktZGF0ZWJveC1jb250cm9sc1wifSksaT1hKFwiPGRpdiBjbGFzcz0ndWktb3ZlcmxheS1zaGFkb3cnPjx1bD48L3VsPjwvZGl2PlwiKSxoLEIsbixzLHUsZCxnLGwsQSxDLHEsYztwLmNhbE5vTmV4dD1mYWxzZTtwLmNhbE5vUHJldj1mYWxzZTtwLnNldEJ1dHRvbj1mYWxzZTtwLmNsZWFyQnV0dG9uPWZhbHNlO3AuZGF0ZU9LPXRydWU7aWYoci5maWVsZHNPcmRlck92ZXJyaWRlPT09ZmFsc2Upe3N3aXRjaChyLm1vZGUpe2Nhc2VcInRpbWVib3hcIjpjYXNlXCJ0aW1lZmxpcGJveFwiOnIuZmllbGRzT3JkZXI9ci5sYW5nW3IudXNlTGFuZ10udGltZUZpZWxkT3JkZXI7YnJlYWs7Y2FzZVwic2xpZGVib3hcIjpyLmZpZWxkc09yZGVyPXIubGFuZ1tyLnVzZUxhbmddLnNsaWRlRmllbGRPcmRlcjticmVhaztkZWZhdWx0OnIuZmllbGRzT3JkZXI9ci5sYW5nW3IudXNlTGFuZ10uZGF0ZUZpZWxkT3JkZXJ9fWVsc2V7ci5maWVsZHNPcmRlcj1yLmZpZWxkc09yZGVyT3ZlcnJpZGV9aWYoci50aW1lT3V0cHV0T3ZlcnJpZGUhPT1mYWxzZSl7ci50aW1lT3V0cHV0PXIudGltZU91dHB1dE92ZXJyaWRlfWVsc2V7aWYoci50aW1lRm9ybWF0T3ZlcnJpZGU9PT1mYWxzZSl7ci50aW1lT3V0cHV0PXIudGltZUZvcm1hdHNbci5sYW5nW3IudXNlTGFuZ10udGltZUZvcm1hdF19ZWxzZXtyLnRpbWVPdXRwdXQ9ci50aW1lRm9ybWF0c1tyLnRpbWVGb3JtYXRPdmVycmlkZV19fWlmKHIuZGF0ZUZvcm1hdCE9PWZhbHNlKXtyLmRhdGVPdXRwdXQ9ci5kYXRlRm9ybWF0fWVsc2V7aWYodHlwZW9mIHIubGFuZ1tyLnVzZUxhbmddLmRhdGVGb3JtYXQhPT1cInVuZGVmaW5lZFwiKXtyLmRhdGVPdXRwdXQ9ci5sYW5nW3IudXNlTGFuZ10uZGF0ZUZvcm1hdH1lbHNle3IuZGF0ZU91dHB1dD1yLmRlZmF1bHREYXRlRm9ybWF0fX1wLnBpY2tlckNvbnRlbnQuZW1wdHkoKTtpZihyLm1vZGU9PT1cImRhdGVib3hcInx8ci5tb2RlPT09XCJ0aW1lYm94XCIpe3U9YShcIjxkaXYgY2xhc3M9J3VpLWRhdGVib3gtaGVhZGVyJz48aDQ+VW5pdGlhbGl6ZWQ8L2g0PjwvZGl2PlwiKS5hcHBlbmRUbyhwLnBpY2tlckNvbnRlbnQpLmZpbmQoXCJoNFwiKTtoPWouY2xvbmUoKS5hcHBlbmRUbyhwLnBpY2tlckNvbnRlbnQpO0I9ai5jbG9uZSgpLmFwcGVuZFRvKHAucGlja2VyQ29udGVudCk7bj1qLmNsb25lKCkuYXBwZW5kVG8ocC5waWNrZXJDb250ZW50KTtzPWouY2xvbmUoKS5hcHBlbmRUbyhwLnBpY2tlckNvbnRlbnQpO2lmKHIubW9kZT09PVwidGltZWJveFwiKXt1LnBhcmVudCgpLmVtcHR5KCl9QT1wLl9tYWtlRWxlbWVudCh6LHthdHRyOntmaWVsZDpcIm1cIixhbW91bnQ6MX19KTtDPXAuX21ha2VFbGVtZW50KHose2F0dHI6e2ZpZWxkOlwiZFwiLGFtb3VudDoxfX0pO3E9cC5fbWFrZUVsZW1lbnQoeix7YXR0cjp7ZmllbGQ6XCJ5XCIsYW1vdW50OjF9fSk7ZD1wLl9tYWtlRWxlbWVudCh6LHthdHRyOntmaWVsZDpcImhcIixhbW91bnQ6MX19KTtnPXAuX21ha2VFbGVtZW50KHose2F0dHI6e2ZpZWxkOlwiaVwiLGFtb3VudDoxfX0pO2w9cC5fbWFrZUVsZW1lbnQodCx7YXR0cjp7ZmllbGQ6XCJhXCIsYW1vdW50OnIubWludXRlU3RlcH19KTtCLmRlbGVnYXRlKFwiaW5wdXRcIixcImtleXVwXCIsZnVuY3Rpb24oKXtwLl9ldmVudEVudGVyVmFsdWUoYSh0aGlzKSl9KTtpZihyLndoZWVsRXhpc3RzKXtCLmRlbGVnYXRlKFwiaW5wdXRcIixcIm1vdXNld2hlZWxcIixmdW5jdGlvbihvLHgpe28ucHJldmVudERlZmF1bHQoKTtwLl9vZmZzZXQoYSh0aGlzKS5qcW1EYXRhKFwiZmllbGRcIiksKCh4PDApPy0xOjEpKmEodGhpcykuanFtRGF0YShcImFtb3VudFwiKSl9KX1mb3IobT0wO208PXIuZmllbGRzT3JkZXIubGVuZ3RoO20rKyl7aWYoci5maWVsZHNPcmRlclttXT09PVwieVwiKXtxLmFwcGVuZFRvKEIpfWlmKHIuZmllbGRzT3JkZXJbbV09PT1cIm1cIil7QS5hcHBlbmRUbyhCKX1pZihyLmZpZWxkc09yZGVyW21dPT09XCJkXCIpe0MuYXBwZW5kVG8oQil9aWYoci5maWVsZHNPcmRlclttXT09PVwiaFwiKXtkLmFwcGVuZFRvKEIpfWlmKHIuZmllbGRzT3JkZXJbbV09PT1cImlcIil7Zy5hcHBlbmRUbyhCKX1pZihyLmZpZWxkc09yZGVyW21dPT09XCJhXCImJihyLmxhbmdbci51c2VMYW5nXS50aW1lRm9ybWF0PT09MTJ8fHIudGltZUZvcm1hdE92ZXJyaWRlPT09MTIpKXtsLmFwcGVuZFRvKEIpfX1pZihyLnN3aXBlRW5hYmxlZCl7Qi5kZWxlZ2F0ZShcImlucHV0XCIscC5TVEFSVF9EUkFHLGZ1bmN0aW9uKG8pe2lmKCFwLmRyYWdNb3ZlKXtwLmRyYWdNb3ZlPXRydWU7cC5kcmFnVGFyZ2V0PWEodGhpcykuanFtRGF0YShcImZpZWxkXCIpO3AuZHJhZ1Bvcz0wO3AuZHJhZ1N0YXJ0PXAudG91Y2g/by5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZOm8ucGFnZVk7cC5kcmFnRW5kPWZhbHNlO28uc3RvcFByb3BhZ2F0aW9uKCl9fSl9aWYoci5ub1NldEJ1dHRvbj09PWZhbHNlKXtwLnNldEJ1dHRvbj1hKFwiPGEgaHJlZj0nIyc+UGxhY2VIb2xkZXI8L2E+XCIpLmFwcGVuZFRvKHMpLmJ1dHRvbk1hcmt1cCh7dGhlbWU6ci5waWNrUGFnZVRoZW1lLGljb246XCJjaGVja1wiLGljb25wb3M6XCJsZWZ0XCIsY29ybmVyczp0cnVlLHNoYWRvdzp0cnVlfSkuYmluZChyLmNsaWNrRXZlbnQsZnVuY3Rpb24obyl7by5wcmV2ZW50RGVmYXVsdCgpO2lmKHAuZGF0ZU9LPT09dHJ1ZSl7aWYoci5tb2RlPT09XCJ0aW1lYm94XCIpe3AuaW5wdXQudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwic2V0XCIsdmFsdWU6cC5fZm9ybWF0VGltZShwLnRoZURhdGUpLGRhdGU6cC50aGVEYXRlfSl9ZWxzZXtwLmlucHV0LnRyaWdnZXIoXCJkYXRlYm94XCIse21ldGhvZDpcInNldFwiLHZhbHVlOnAuX2Zvcm1hdERhdGUocC50aGVEYXRlKSxkYXRlOnAudGhlRGF0ZX0pfXAuaW5wdXQudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwiY2xvc2VcIn0pfX0pfWZvcihtPTA7bTxwLm9wdGlvbnMuZmllbGRzT3JkZXIubGVuZ3RoO20rKyl7aWYoci5maWVsZHNPcmRlclttXSE9PVwiYVwifHxyLmxhbmdbci51c2VMYW5nXS50aW1lRm9ybWF0PT09MTJ8fHIudGltZUZvcm1hdE92ZXJyaWRlPT09MTIpe2ZvcihrPTA7azwyO2srKyl7dy5jbG9uZSgpLmFwcGVuZFRvKCgoaz09PTApP2g6bikpLmJ1dHRvbk1hcmt1cCh7dGhlbWU6ci5waWNrUGFnZUJ1dHRvblRoZW1lLGljb246KChrPT09MCk/XCJwbHVzXCI6XCJtaW51c1wiKSxpY29ucG9zOlwiYm90dG9tXCIsY29ybmVyczp0cnVlLHNoYWRvdzp0cnVlfSkuanFtRGF0YShcImZpZWxkXCIsci5maWVsZHNPcmRlclttXSkuanFtRGF0YShcImFtb3VudFwiLCgoci5maWVsZHNPcmRlclttXT09PVwiaVwiKT9yLm1pbnV0ZVN0ZXA6MSkpfX19aC5kZWxlZ2F0ZShcImRpdlwiLHIuY2xpY2tFdmVudCxmdW5jdGlvbihvKXtvLnByZXZlbnREZWZhdWx0KCk7cC5fb2Zmc2V0KGEodGhpcykuanFtRGF0YShcImZpZWxkXCIpLGEodGhpcykuanFtRGF0YShcImFtb3VudFwiKSl9KTtuLmRlbGVnYXRlKFwiZGl2XCIsci5jbGlja0V2ZW50LGZ1bmN0aW9uKG8pe28ucHJldmVudERlZmF1bHQoKTtwLl9vZmZzZXQoYSh0aGlzKS5qcW1EYXRhKFwiZmllbGRcIiksYSh0aGlzKS5qcW1EYXRhKFwiYW1vdW50XCIpKi0xKX0pO2EuZXh0ZW5kKHAse2NvbnRyb2xzSGVhZGVyOnUscGlja2VyRGF5OkMscGlja2VyTW9uOkEscGlja2VyWWFyOnEscGlja2VySG91cjpkLHBpY2tlck1pbnM6ZyxwaWNrZXJNZXJpOmwsY29udHJvbHNJbnB1dDpCfSk7cC5waWNrZXJDb250ZW50LmFwcGVuZFRvKHAudGhpc1BhZ2UpfWlmKHIubW9kZT09PVwiZHVyYXRpb25ib3hcIil7aD1qLmNsb25lKCkucmVtb3ZlQ2xhc3MoXCJ1aS1kYXRlYm94LWNvbnRyb2xzXCIpLmFkZENsYXNzKFwidWktZGF0ZWJveC1zY29udHJvbHNcIikuYXBwZW5kVG8ocC5waWNrZXJDb250ZW50KTtCPWguY2xvbmUoKS5hcHBlbmRUbyhwLnBpY2tlckNvbnRlbnQpO249aC5jbG9uZSgpLmFwcGVuZFRvKHAucGlja2VyQ29udGVudCk7cz1qLmNsb25lKCkuYXBwZW5kVG8ocC5waWNrZXJDb250ZW50KTtDPXoucmVtb3ZlQ2xhc3MoXCJ1aS1kYXRlYm94LWlucHV0XCIpO2Q9Qy5jbG9uZSgpO2c9Qy5jbG9uZSgpO2M9Qy5jbG9uZSgpO0IuZGVsZWdhdGUoXCJpbnB1dFwiLFwia2V5dXBcIixmdW5jdGlvbigpe2lmKGEodGhpcykudmFsKCkhPT1cIlwiKXtwLl91cGRhdGVkdXJhdGlvbigpfX0pO2lmKHIud2hlZWxFeGlzdHMpe0IuZGVsZWdhdGUoXCJpbnB1dFwiLFwibW91c2V3aGVlbFwiLGZ1bmN0aW9uKG8seCl7by5wcmV2ZW50RGVmYXVsdCgpO3AuX29mZnNldChhKHRoaXMpLnBhcmVudCgpLmpxbURhdGEoXCJmaWVsZFwiKSwoKHg8MCk/LTE6MSkpfSl9Zm9yKG09MDttPHIuZHVyYXRpb25PcmRlci5sZW5ndGg7bSsrKXtzd2l0Y2goci5kdXJhdGlvbk9yZGVyW21dKXtjYXNlXCJkXCI6YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtc2lucHV0XCJ9KS5qcW1EYXRhKFwiZmllbGRcIixcImRcIikuYXBwZW5kKEMpLmFwcGVuZFRvKEIpLnByZXBlbmQoXCI8bGFiZWw+XCIrci5sYW5nW3IudXNlTGFuZ10uZHVyYXRpb25MYWJlbFswXStcIjwvbGFiZWw+XCIpO2JyZWFrO2Nhc2VcImhcIjphKFwiPGRpdj5cIix7XCJjbGFzc1wiOlwidWktZGF0ZWJveC1zaW5wdXRcIn0pLmpxbURhdGEoXCJmaWVsZFwiLFwiaFwiKS5hcHBlbmQoZCkuYXBwZW5kVG8oQikucHJlcGVuZChcIjxsYWJlbD5cIityLmxhbmdbci51c2VMYW5nXS5kdXJhdGlvbkxhYmVsWzFdK1wiPC9sYWJlbD5cIik7YnJlYWs7Y2FzZVwiaVwiOmEoXCI8ZGl2PlwiLHtcImNsYXNzXCI6XCJ1aS1kYXRlYm94LXNpbnB1dFwifSkuanFtRGF0YShcImZpZWxkXCIsXCJpXCIpLmFwcGVuZChnKS5hcHBlbmRUbyhCKS5wcmVwZW5kKFwiPGxhYmVsPlwiK3IubGFuZ1tyLnVzZUxhbmddLmR1cmF0aW9uTGFiZWxbMl0rXCI8L2xhYmVsPlwiKTticmVhaztjYXNlXCJzXCI6YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtc2lucHV0XCJ9KS5qcW1EYXRhKFwiZmllbGRcIixcInNcIikuYXBwZW5kKGMpLmFwcGVuZFRvKEIpLnByZXBlbmQoXCI8bGFiZWw+XCIrci5sYW5nW3IudXNlTGFuZ10uZHVyYXRpb25MYWJlbFszXStcIjwvbGFiZWw+XCIpO2JyZWFrfX1pZihyLnN3aXBlRW5hYmxlZCl7Qi5kZWxlZ2F0ZShcImlucHV0XCIscC5TVEFSVF9EUkFHLGZ1bmN0aW9uKG8pe2lmKCFwLmRyYWdNb3ZlKXtwLmRyYWdNb3ZlPXRydWU7cC5kcmFnVGFyZ2V0PWEodGhpcykucGFyZW50KCkuanFtRGF0YShcImZpZWxkXCIpO3AuZHJhZ1Bvcz0wO3AuZHJhZ1N0YXJ0PXAudG91Y2g/by5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZOm8ucGFnZVk7cC5kcmFnRW5kPWZhbHNlO28uc3RvcFByb3BhZ2F0aW9uKCl9fSl9aWYoci5ub1NldEJ1dHRvbj09PWZhbHNlKXtwLnNldEJ1dHRvbj1hKFwiPGEgaHJlZj0nIyc+UGxhY2VIb2xkZXI8L2E+XCIpLmFwcGVuZFRvKHMpLmJ1dHRvbk1hcmt1cCh7dGhlbWU6ci5waWNrUGFnZVRoZW1lLGljb246XCJjaGVja1wiLGljb25wb3M6XCJsZWZ0XCIsY29ybmVyczp0cnVlLHNoYWRvdzp0cnVlfSkuYmluZChyLmNsaWNrRXZlbnQsZnVuY3Rpb24obyl7by5wcmV2ZW50RGVmYXVsdCgpO3AuaW5wdXQudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwic2V0XCIsdmFsdWU6cC5fZm9ybWF0VGltZShwLnRoZURhdGUpLGRhdGU6cC50aGVEYXRlfSk7cC5pbnB1dC50cmlnZ2VyKFwiZGF0ZWJveFwiLHttZXRob2Q6XCJjbG9zZVwifSl9KX1mb3IobT0wO208ci5kdXJhdGlvbk9yZGVyLmxlbmd0aDttKyspe2ZvcihrPTA7azwyO2srKyl7dy5jbG9uZSgpLmFwcGVuZFRvKCgoaz09PTApP2g6bikpLmJ1dHRvbk1hcmt1cCh7dGhlbWU6ci5waWNrUGFnZUJ1dHRvblRoZW1lLGljb246KChrPT09MCk/XCJwbHVzXCI6XCJtaW51c1wiKSxpY29ucG9zOlwiYm90dG9tXCIsY29ybmVyczp0cnVlLHNoYWRvdzp0cnVlfSkuanFtRGF0YShcImZpZWxkXCIsci5kdXJhdGlvbk9yZGVyW21dKX19aC5kZWxlZ2F0ZShcImRpdlwiLHIuY2xpY2tFdmVudCxmdW5jdGlvbihvKXtvLnByZXZlbnREZWZhdWx0KCk7cC5fb2Zmc2V0KGEodGhpcykuanFtRGF0YShcImZpZWxkXCIpLHIuZHVyYXRpb25TdGVwcGVyc1thKHRoaXMpLmpxbURhdGEoXCJmaWVsZFwiKV0pfSk7bi5kZWxlZ2F0ZShcImRpdlwiLHIuY2xpY2tFdmVudCxmdW5jdGlvbihvKXtvLnByZXZlbnREZWZhdWx0KCk7cC5fb2Zmc2V0KGEodGhpcykuanFtRGF0YShcImZpZWxkXCIpLHIuZHVyYXRpb25TdGVwcGVyc1thKHRoaXMpLmpxbURhdGEoXCJmaWVsZFwiKV0qLTEpfSk7YS5leHRlbmQocCx7cGlja2VySG91cjpkLHBpY2tlck1pbnM6ZyxwaWNrZXJEYXk6QyxwaWNrZXJTZWNzOmN9KTtwLnBpY2tlckNvbnRlbnQuYXBwZW5kVG8ocC50aGlzUGFnZSl9aWYoci5tb2RlPT09XCJzbGlkZWJveFwiKXt1PWEoXCI8ZGl2IGNsYXNzPSd1aS1kYXRlYm94LWhlYWRlcic+PGg0PlVuaXRpYWxpemVkPC9oND48L2Rpdj5cIikuYXBwZW5kVG8ocC5waWNrZXJDb250ZW50KS5maW5kKFwiaDRcIik7Qj1hKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ1aS1kYXRlYm94LXNsaWRlXCIpLmFwcGVuZFRvKHAucGlja2VyQ29udGVudCk7cz1hKFwiPGRpdj5cIix7XCJjbGFzc1wiOlwidWktZGF0ZWJveC1jb250cm9sc1wifSkuYXBwZW5kVG8ocC5waWNrZXJDb250ZW50KTtpZihyLm5vU2V0QnV0dG9uPT09ZmFsc2Upe3Auc2V0QnV0dG9uPWEoXCI8YSBocmVmPScjJz5QbGFjZUhvbGRlcjwvYT5cIikuYXBwZW5kVG8ocykuYnV0dG9uTWFya3VwKHt0aGVtZTpyLnBpY2tQYWdlVGhlbWUsaWNvbjpcImNoZWNrXCIsaWNvbnBvczpcImxlZnRcIixjb3JuZXJzOnRydWUsc2hhZG93OnRydWV9KS5iaW5kKHIuY2xpY2tFdmVudCxmdW5jdGlvbihvKXtvLnByZXZlbnREZWZhdWx0KCk7aWYocC5kYXRlT0s9PT10cnVlKXtwLmlucHV0LnRyaWdnZXIoXCJkYXRlYm94XCIse21ldGhvZDpcInNldFwiLHZhbHVlOnAuX2Zvcm1hdERhdGUocC50aGVEYXRlKSxkYXRlOnAudGhlRGF0ZX0pO3AuaW5wdXQudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwiY2xvc2VcIn0pfX0pfWEuZXh0ZW5kKHAse2NvbnRyb2xzSGVhZGVyOnUsY29udHJvbHNJbnB1dDpCfSk7cC5waWNrZXJDb250ZW50LmFwcGVuZFRvKHAudGhpc1BhZ2UpfWlmKHIubW9kZT09PVwiZmxpcGJveFwifHxyLm1vZGU9PT1cInRpbWVmbGlwYm94XCIpe3U9YShcIjxkaXYgY2xhc3M9J3VpLWRhdGVib3gtaGVhZGVyJz48aDQ+VW5pdGlhbGl6ZWQ8L2g0PjwvZGl2PlwiKS5hcHBlbmRUbyhwLnBpY2tlckNvbnRlbnQpLmZpbmQoXCJoNFwiKTtCPWEoXCI8ZGl2PlwiLHtcImNsYXNzXCI6XCJ1aS1kYXRlYm94LWZsaXBjb250ZW50XCJ9KS5hcHBlbmRUbyhwLnBpY2tlckNvbnRlbnQpO2g9YShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLWRhdGVib3gtZmxpcGNlbnRlciB1aS1vdmVybGF5LXNoYWRvd1wifSkuY3NzKFwicG9pbnRlckV2ZW50c1wiLFwibm9uZVwiKS5hcHBlbmRUbyhwLnBpY2tlckNvbnRlbnQpO3M9ai5jbG9uZSgpLmFwcGVuZFRvKHAucGlja2VyQ29udGVudCk7Qz1wLl9tYWtlRWxlbWVudChpLHthdHRyOntmaWVsZDpcImRcIixhbW91bnQ6MX19KTtBPXAuX21ha2VFbGVtZW50KGkse2F0dHI6e2ZpZWxkOlwibVwiLGFtb3VudDoxfX0pO3E9cC5fbWFrZUVsZW1lbnQoaSx7YXR0cjp7ZmllbGQ6XCJ5XCIsYW1vdW50OjF9fSk7ZD1wLl9tYWtlRWxlbWVudChpLHthdHRyOntmaWVsZDpcImhcIixhbW91bnQ6MX19KTtnPXAuX21ha2VFbGVtZW50KGkse2F0dHI6e2ZpZWxkOlwiaVwiLGFtb3VudDpyLm1pbnV0ZVN0ZXB9fSk7bD1wLl9tYWtlRWxlbWVudChpLHthdHRyOntmaWVsZDpcImFcIixhbW91bnQ6MX19KTtpZihyLndoZWVsRXhpc3RzKXtCLmRlbGVnYXRlKFwiZGl2XCIsXCJtb3VzZXdoZWVsXCIsZnVuY3Rpb24obyx4KXtvLnByZXZlbnREZWZhdWx0KCk7cC5fb2Zmc2V0KGEodGhpcykuanFtRGF0YShcImZpZWxkXCIpLCgoeDwwKT8tMToxKSphKHRoaXMpLmpxbURhdGEoXCJhbW91bnRcIikpfSl9Zm9yKG09MDttPD1yLmZpZWxkc09yZGVyLmxlbmd0aDttKyspe2lmKHIuZmllbGRzT3JkZXJbbV09PT1cInlcIil7cS5hcHBlbmRUbyhCKX1pZihyLmZpZWxkc09yZGVyW21dPT09XCJtXCIpe0EuYXBwZW5kVG8oQil9aWYoci5maWVsZHNPcmRlclttXT09PVwiZFwiKXtDLmFwcGVuZFRvKEIpfWlmKHIuZmllbGRzT3JkZXJbbV09PT1cImhcIil7ZC5hcHBlbmRUbyhCKX1pZihyLmZpZWxkc09yZGVyW21dPT09XCJpXCIpe2cuYXBwZW5kVG8oQil9aWYoci5maWVsZHNPcmRlclttXT09PVwiYVwiJiYoci5sYW5nW3IudXNlTGFuZ10udGltZUZvcm1hdD09PTEyfHxyLnRpbWVGb3JtYXRPdmVycmlkZT09PTEyKSl7bC5hcHBlbmRUbyhCKX19aWYoci5zd2lwZUVuYWJsZWQpe0IuZGVsZWdhdGUoXCJ1bFwiLHAuU1RBUlRfRFJBRyxmdW5jdGlvbih4LG8pe2lmKCFwLmRyYWdNb3ZlKXtpZih0eXBlb2YgbyE9PVwidW5kZWZpbmVkXCIpe3g9b31wLmRyYWdNb3ZlPXRydWU7cC5kcmFnVGFyZ2V0PWEodGhpcykuZmluZChcImxpXCIpLmZpcnN0KCk7cC5kcmFnUG9zPXBhcnNlSW50KHAuZHJhZ1RhcmdldC5jc3MoXCJtYXJnaW5Ub3BcIikucmVwbGFjZSgvcHgvaSxcIlwiKSwxMCk7cC5kcmFnU3RhcnQ9cC50b3VjaD94Lm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk6eC5wYWdlWTtwLmRyYWdFbmQ9ZmFsc2U7eC5zdG9wUHJvcGFnYXRpb24oKTt4LnByZXZlbnREZWZhdWx0KCl9fSk7aC5iaW5kKHAuU1RBUlRfRFJBRyxmdW5jdGlvbihvKXtpZighcC5kcmFnTW92ZSl7cC5kcmFnVGFyZ2V0PXAudG91Y2g/by5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLWEoby5jdXJyZW50VGFyZ2V0KS5vZmZzZXQoKS5sZWZ0Om8ucGFnZVgtYShvLmN1cnJlbnRUYXJnZXQpLm9mZnNldCgpLmxlZnQ7aWYoci5maWVsZHNPcmRlci5sZW5ndGg9PT0zKXthKHAuY29udHJvbHNJbnB1dC5maW5kKFwidWxcIikuZ2V0KHBhcnNlSW50KHAuZHJhZ1RhcmdldC84NywxMCkpKS50cmlnZ2VyKHAuU1RBUlRfRFJBRyxvKX1lbHNle2lmKHIuZmllbGRzT3JkZXIubGVuZ3RoPT09Mil7YShwLmNvbnRyb2xzSW5wdXQuZmluZChcInVsXCIpLmdldChwYXJzZUludChwLmRyYWdUYXJnZXQvMTMwLDEwKSkpLnRyaWdnZXIocC5TVEFSVF9EUkFHLG8pfX19fSl9aWYoci5ub1NldEJ1dHRvbj09PWZhbHNlKXtwLnNldEJ1dHRvbj1hKFwiPGEgaHJlZj0nIyc+UGxhY2VIb2xkZXI8L2E+XCIpLmFwcGVuZFRvKHMpLmJ1dHRvbk1hcmt1cCh7dGhlbWU6ci5waWNrUGFnZVRoZW1lLGljb246XCJjaGVja1wiLGljb25wb3M6XCJsZWZ0XCIsY29ybmVyczp0cnVlLHNoYWRvdzp0cnVlfSkuYmluZChyLmNsaWNrRXZlbnQsZnVuY3Rpb24obyl7by5wcmV2ZW50RGVmYXVsdCgpO2lmKHAuZGF0ZU9LPT09dHJ1ZSl7aWYoci5tb2RlPT09XCJ0aW1lZmxpcGJveFwiKXtwLmlucHV0LnRyaWdnZXIoXCJkYXRlYm94XCIse21ldGhvZDpcInNldFwiLHZhbHVlOnAuX2Zvcm1hdFRpbWUocC50aGVEYXRlKSxkYXRlOnAudGhlRGF0ZX0pfWVsc2V7cC5pbnB1dC50cmlnZ2VyKFwiZGF0ZWJveFwiLHttZXRob2Q6XCJzZXRcIix2YWx1ZTpwLl9mb3JtYXREYXRlKHAudGhlRGF0ZSksZGF0ZTpwLnRoZURhdGV9KX1wLmlucHV0LnRyaWdnZXIoXCJkYXRlYm94XCIse21ldGhvZDpcImNsb3NlXCJ9KX19KX1hLmV4dGVuZChwLHtjb250cm9sc0hlYWRlcjp1LGNvbnRyb2xzSW5wdXQ6QixwaWNrZXJEYXk6QyxwaWNrZXJNb246QSxwaWNrZXJZYXI6cSxwaWNrZXJIb3VyOmQscGlja2VyTWluczpnLHBpY2tlck1lcmk6bH0pO3AucGlja2VyQ29udGVudC5hcHBlbmRUbyhwLnRoaXNQYWdlKX1pZihyLm1vZGU9PT1cImNhbGJveFwiKXt1PWEoXCI8ZGl2PlwiLHtcImNsYXNzXCI6XCJ1aS1kYXRlYm94LWdyaWRoZWFkZXJcIn0pLmFwcGVuZFRvKHAucGlja2VyQ29udGVudCk7aD1hKFwiPGRpdj5cIix7XCJjbGFzc1wiOlwidWktZGF0ZWJveC1ncmlkXCJ9KS5hcHBlbmRUbyhwLnBpY2tlckNvbnRlbnQpO3M9ai5jbG9uZSgpLmFwcGVuZFRvKHAucGlja2VyQ29udGVudCk7Qj1hKFwiPGRpdiBjbGFzcz0ndWktZGF0ZWJveC1ncmlkbGFiZWwnPjxoND5VbmluaXRpYWxpemVkPC9oND48L2Rpdj5cIikuYXBwZW5kVG8odSkuZmluZChcImg0XCIpO2lmKHIuc3dpcGVFbmFibGVkKXtwLnBpY2tlckNvbnRlbnQuYmluZChcInN3aXBlbGVmdFwiLGZ1bmN0aW9uKCl7aWYoIXAuY2FsTm9OZXh0KXtwLl9vZmZzZXQoXCJtXCIsMSl9fSkuYmluZChcInN3aXBlcmlnaHRcIixmdW5jdGlvbigpe2lmKCFwLmNhbE5vUHJldil7cC5fb2Zmc2V0KFwibVwiLC0xKX19KX1pZihyLndoZWVsRXhpc3RzKXtwLnBpY2tlckNvbnRlbnQuYmluZChcIm1vdXNld2hlZWxcIixmdW5jdGlvbihvLHgpe28ucHJldmVudERlZmF1bHQoKTtpZih4PjAmJiFwLmNhbE5vTmV4dCl7aWYocC50aGVEYXRlLmdldERhdGUoKT4yOCl7cC50aGVEYXRlLnNldERhdGUoMSl9cC5fb2Zmc2V0KFwibVwiLDEpfWlmKHg8MCYmIXAuY2FsTm9QcmV2KXtpZihwLnRoZURhdGUuZ2V0RGF0ZSgpPjI4KXtwLnRoZURhdGUuc2V0RGF0ZSgxKX1wLl9vZmZzZXQoXCJtXCIsLTEpfX0pfWEoXCI8ZGl2IGNsYXNzPSd1aS1kYXRlYm94LWdyaWRwbHVzXCIrKChyLmxhbmdbci51c2VMYW5nXS5pc1JUTD09PXRydWUpP1wiLXJ0bFwiOlwiXCIpK1wiJz48YSBocmVmPScjJz5cIisoKHR5cGVvZiByLmxhbmdbci51c2VMYW5nXS5uZXh0TW9udGghPT1cInVuZGVmaW5lZFwiKT9yLmxhbmdbci51c2VMYW5nXS5uZXh0TW9udGg6ci5sYW5nLmVuLm5leHRNb250aCkrXCI8L2E+PC9kaXY+XCIpLnByZXBlbmRUbyh1KS5idXR0b25NYXJrdXAoe3RoZW1lOnIucGlja1BhZ2VCdXR0b25UaGVtZSxpY29uOlwicGx1c1wiLGlubGluZTp0cnVlLGljb25wb3M6XCJub3RleHRcIixjb3JuZXJzOnRydWUsc2hhZG93OnRydWV9KS5iaW5kKHIuY2xpY2tFdmVudCxmdW5jdGlvbihvKXtvLnByZXZlbnREZWZhdWx0KCk7aWYoIXAuY2FsTm9OZXh0KXtpZihwLnRoZURhdGUuZ2V0RGF0ZSgpPjI4KXtwLnRoZURhdGUuc2V0RGF0ZSgxKX1wLl9vZmZzZXQoXCJtXCIsMSl9fSk7YShcIjxkaXYgY2xhc3M9J3VpLWRhdGVib3gtZ3JpZG1pbnVzXCIrKChyLmxhbmdbci51c2VMYW5nXS5pc1JUTD09PXRydWUpP1wiLXJ0bFwiOlwiXCIpK1wiJz48YSBocmVmPScjJz5cIisoKHR5cGVvZiByLmxhbmdbci51c2VMYW5nXS5wcmV2TW9udGghPT1cInVuZGVmaW5lZFwiKT9yLmxhbmdbci51c2VMYW5nXS5wcmV2TW9udGg6ci5sYW5nLmVuLnByZXZNb250aCkrXCI8L2E+PC9kaXY+XCIpLnByZXBlbmRUbyh1KS5idXR0b25NYXJrdXAoe3RoZW1lOnIucGlja1BhZ2VCdXR0b25UaGVtZSxpY29uOlwibWludXNcIixpbmxpbmU6dHJ1ZSxpY29ucG9zOlwibm90ZXh0XCIsY29ybmVyczp0cnVlLHNoYWRvdzp0cnVlfSkuYmluZChyLmNsaWNrRXZlbnQsZnVuY3Rpb24obyl7by5wcmV2ZW50RGVmYXVsdCgpO2lmKCFwLmNhbE5vUHJldil7aWYocC50aGVEYXRlLmdldERhdGUoKT4yOCl7cC50aGVEYXRlLnNldERhdGUoMSl9cC5fb2Zmc2V0KFwibVwiLC0xKX19KTtpZihyLmNhbFRvZGF5QnV0dG9uPT09dHJ1ZSl7cC5zZXRCdXR0b249YShcIjxhIGhyZWY9JyMnPlBsYWNlSG9sZGVyPC9hPlwiKS5hcHBlbmRUbyhzKS5idXR0b25NYXJrdXAoe3RoZW1lOnIucGlja1BhZ2VUaGVtZSxpY29uOlwiY2hlY2tcIixpY29ucG9zOlwibGVmdFwiLGNvcm5lcnM6dHJ1ZSxzaGFkb3c6dHJ1ZX0pLmJpbmQoci5jbGlja0V2ZW50LGZ1bmN0aW9uKG8pe28ucHJldmVudERlZmF1bHQoKTtwLnRoZURhdGU9bmV3IERhdGUoKTtwLnRoZURhdGU9bmV3IERhdGUocC50aGVEYXRlLmdldEZ1bGxZZWFyKCkscC50aGVEYXRlLmdldE1vbnRoKCkscC50aGVEYXRlLmdldERhdGUoKSwwLDAsMCwwKTtwLmlucHV0LnRyaWdnZXIoXCJkYXRlYm94XCIse21ldGhvZDpcImRvc2V0XCJ9KX0pfWEuZXh0ZW5kKHAse2NvbnRyb2xzSW5wdXQ6Qixjb250cm9sc1BsdXM6aH0pO3AucGlja2VyQ29udGVudC5hcHBlbmRUbyhwLnRoaXNQYWdlKX1pZihyLnVzZUNsZWFyQnV0dG9uPT09dHJ1ZSl7cC5jbGVhckJ1dHRvbj1hKFwiPGEgaHJlZj0nIyc+UGxhY2VIb2xkZXI8L2E+XCIpLmFwcGVuZFRvKHMpLmJ1dHRvbk1hcmt1cCh7dGhlbWU6ci5waWNrUGFnZVRoZW1lLGljb246XCJkZWxldGVcIixpY29ucG9zOlwibGVmdFwiLGNvcm5lcnM6dHJ1ZSxzaGFkb3c6dHJ1ZX0pLmJpbmQoci5jbGlja0V2ZW50LGZ1bmN0aW9uKG8pe28ucHJldmVudERlZmF1bHQoKTtwLmlucHV0LnZhbChcIlwiKTtwLmlucHV0LnRyaWdnZXIoXCJkYXRlYm94XCIse21ldGhvZDpcImNsZWFyXCJ9KTtwLmlucHV0LnRyaWdnZXIoXCJkYXRlYm94XCIse21ldGhvZDpcImNsb3NlXCJ9KX0pfWlmKHIuY29sbGFwc2VCdXR0b25zJiYocC5jbGVhckJ1dHRvbiE9PWZhbHNlJiZwLnNldEJ1dHRvbiE9PWZhbHNlKSl7cy5hZGRDbGFzcyhcInVpLWRhdGVib3gtY29sbGFwc2VcIil9fSxfYnV0dG9uc1RpdGxlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxkPXRoaXMub3B0aW9ucztpZihkLnRpdGxlRGlhbG9nTGFiZWw9PT1mYWxzZSl7aWYodHlwZW9mIHRoaXMuZWxlbWVudC5hdHRyKFwidGl0bGVcIikhPT1cInVuZGVmaW5lZFwiKXtjLnBpY2tQYWdlVGl0bGUuaHRtbCh0aGlzLmVsZW1lbnQuYXR0cihcInRpdGxlXCIpKX1lbHNle2lmKHRoaXMuZm9jdXNlZEVsLnBhcmVudCgpLmZpbmQoXCJsYWJlbFwiKS50ZXh0KCkhPT1cIlwiKXtjLnBpY2tQYWdlVGl0bGUuaHRtbCh0aGlzLmZvY3VzZWRFbC5wYXJlbnQoKS5maW5kKFwibGFiZWxcIikudGV4dCgpKX1lbHNle3N3aXRjaChkLm1vZGUpe2Nhc2VcInRpbWVib3hcIjpjYXNlXCJ0aW1lZmxpcGJveFwiOmMucGlja1BhZ2VUaXRsZS5odG1sKGQubGFuZ1tkLnVzZUxhbmddLnRpdGxlVGltZURpYWxvZ0xhYmVsKTticmVhaztkZWZhdWx0OmMucGlja1BhZ2VUaXRsZS5odG1sKGQubGFuZ1tkLnVzZUxhbmddLnRpdGxlRGF0ZURpYWxvZ0xhYmVsKTticmVha319fX1lbHNle2MucGlja1BhZ2VUaXRsZS5odG1sKGQudGl0bGVEaWFsb2dMYWJlbCl9aWYoYy5jbGVhckJ1dHRvbiE9PWZhbHNlKXtjLmNsZWFyQnV0dG9uLmZpbmQoXCIudWktYnRuLXRleHRcIikuaHRtbChkLmxhbmdbZC51c2VMYW5nXS5jbGVhckJ1dHRvbil9aWYoYy5zZXRCdXR0b24hPT1mYWxzZSl7c3dpdGNoKGQubW9kZSl7Y2FzZVwidGltZWJveFwiOmNhc2VcInRpbWVmbGlwYm94XCI6Yy5zZXRCdXR0b24uZmluZChcIi51aS1idG4tdGV4dFwiKS5odG1sKGQubGFuZ1tkLnVzZUxhbmddLnNldFRpbWVCdXR0b25MYWJlbCk7YnJlYWs7Y2FzZVwiZHVyYXRpb25ib3hcIjpjLnNldEJ1dHRvbi5maW5kKFwiLnVpLWJ0bi10ZXh0XCIpLmh0bWwoZC5sYW5nW2QudXNlTGFuZ10uc2V0RHVyYXRpb25CdXR0b25MYWJlbCk7YnJlYWs7Y2FzZVwiY2FsYm94XCI6Yy5zZXRCdXR0b24uZmluZChcIi51aS1idG4tdGV4dFwiKS5odG1sKGQubGFuZ1tkLnVzZUxhbmddLmNhbFRvZGF5QnV0dG9uTGFiZWwpO2JyZWFrO2RlZmF1bHQ6Yy5zZXRCdXR0b24uZmluZChcIi51aS1idG4tdGV4dFwiKS5odG1sKGQubGFuZ1tkLnVzZUxhbmddLnNldERhdGVCdXR0b25MYWJlbCk7YnJlYWt9fX0sX2J1aWxkUGFnZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZT1kLm9wdGlvbnMsZj1hKFwiPGRpdj5cIix7XCJjbGFzc1wiOlwidWktZGF0ZWJveC1jb250YWluZXIgdWktb3ZlcmxheS1zaGFkb3cgdWktY29ybmVyLWFsbCB1aS1kYXRlYm94LWhpZGRlbiBcIitlLnRyYW5zaXRpb24rXCIgdWktYm9keS1cIitlLnBpY2tQYWdlVGhlbWV9KS5jc3MoXCJ6SW5kZXhcIixlLnppbmRleCksYz1hKFwiPGRpdj5cIix7XCJjbGFzc1wiOlwidWktZGF0ZWJveC1zY3JlZW4gdWktZGF0ZWJveC1oaWRkZW5cIisoKGUudXNlTW9kYWwpP1wiIHVpLWRhdGVib3gtc2NyZWVuLW1vZGFsXCI6XCJcIil9KS5jc3Moe1wiei1pbmRleFwiOmUuemluZGV4LTF9KS5hcHBlbmRUbyhkLnRoaXNQYWdlKS5iaW5kKGUuY2xpY2tFdmVudCxmdW5jdGlvbihnKXtnLnByZXZlbnREZWZhdWx0KCk7ZC5pbnB1dC50cmlnZ2VyKFwiZGF0ZWJveFwiLHttZXRob2Q6XCJjbG9zZVwifSl9KTtpZihlLm5vQW5pbWF0aW9uKXtmLnJlbW92ZUNsYXNzKGUudHJhbnNpdGlvbil9YS5leHRlbmQoZCx7cGlja2VyQ29udGVudDpmLHNjcmVlbjpjfSk7ZC5fYnVpbGRJbnRlcm5hbHMoKTtpZihlLnVzZUlubGluZXx8ZS51c2VJbmxpbmVCbGluZCl7ZC5pbnB1dC5wYXJlbnQoKS5wYXJlbnQoKS5hcHBlbmQoZC5waWNrZXJDb250ZW50KTtpZihlLnVzZUlubGluZUhpZGVJbnB1dCl7ZC5pbnB1dC5wYXJlbnQoKS5oaWRlKCl9ZC5pbnB1dC50cmlnZ2VyKFwiY2hhbmdlXCIpO2QucGlja2VyQ29udGVudC5yZW1vdmVDbGFzcyhcInVpLWRhdGVib3gtaGlkZGVuXCIpfWVsc2V7aWYoZS5jZW50ZXJXaW5kb3cmJmUudXNlSW5saW5lSGlkZUlucHV0KXtkLmlucHV0LnBhcmVudCgpLmhpZGUoKX19aWYoZS51c2VJbmxpbmUpe2QucGlja2VyQ29udGVudC5hZGRDbGFzcyhcInVpLWRhdGVib3gtaW5saW5lXCIpO2Qub3BlbigpfWlmKGUudXNlSW5saW5lQmxpbmQpe2QucGlja2VyQ29udGVudC5hZGRDbGFzcyhcInVpLWRhdGVib3gtaW5saW5lYmxpbmRcIik7ZC5waWNrZXJDb250ZW50LmhpZGUoKX19LGhhcmRyZXNldDpmdW5jdGlvbigpe3RoaXMuX2J1aWxkSW50ZXJuYWxzKCk7dGhpcy5yZWZyZXNoKCk7dGhpcy5fYnV0dG9uc1RpdGxlKCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMudXNlSW5saW5lPT09dHJ1ZSl7dGhpcy5pbnB1dC50cmlnZ2VyKFwiY2hhbmdlXCIpfXRoaXMuX3VwZGF0ZSgpfSxvcGVuOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxmPXRoaXMub3B0aW9ucyxkPWZhbHNlLGU9Zi5ub0FuaW1hdGlvbj9cIm5vbmVcIjpmLnRyYW5zaXRpb24saCxnO2lmKGYub3BlbkNhbGxiYWNrIT09ZmFsc2Upe2lmKCFhLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLm9wZW5DYWxsYmFjaykpe2lmKHR5cGVvZiB3aW5kb3dbZi5vcGVuQ2FsbGJhY2tdIT09XCJ1bmRlZmluZWRcIil7Zi5vcGVuQ2FsbGJhY2s9d2luZG93W2Yub3BlbkNhbGxiYWNrXX1lbHNle2Yub3BlbkNhbGxiYWNrPW5ldyBGdW5jdGlvbihmLm9wZW5DYWxsYmFjayl9fWg9Zi5vcGVuQ2FsbGJhY2suYXBwbHkoYyxhLm1lcmdlKFtjLnRoZURhdGVdLGYub3BlbkNhbGxiYWNrQXJncykpO2lmKGg9PWZhbHNlKXtyZXR1cm4gZmFsc2V9fWMuX2J1dHRvbnNUaXRsZSgpO2lmKHRoaXMub3B0aW9ucy51c2VJbmxpbmVCbGluZCl7dGhpcy5waWNrZXJDb250ZW50LnNsaWRlRG93bigpO3JldHVybiBmYWxzZX1pZih0aGlzLm9wdGlvbnMudXNlSW5saW5lKXtyZXR1cm4gdHJ1ZX1pZih0aGlzLnBpY2tQYWdlLmlzKFwiOnZpc2libGVcIikpe3JldHVybiBmYWxzZX10aGlzLnRoZURhdGU9dGhpcy5fbWFrZURhdGUodGhpcy5pbnB1dC52YWwoKSk7dGhpcy5fdXBkYXRlKCk7dGhpcy5pbnB1dC5ibHVyKCk7aWYoKGEoZG9jdW1lbnQpLndpZHRoKCk+NDAwJiYhZi51c2VEaWFsb2dGb3JjZVRydWUpfHxmLnVzZURpYWxvZ0ZvcmNlRmFsc2V8fGYuZnVsbFNjcmVlbil7ZD10aGlzLl9nZXRDb29yZHModGhpcyk7Zi51c2VEaWFsb2c9ZmFsc2U7aWYoZi5uZXN0ZWRCb3g9PT10cnVlJiZmLmZ1bGxTY3JlZW49PT1mYWxzZSl7Zz1hKFwiLnVpLXBhZ2UtYWN0aXZlXCIpLmZpcnN0KCk7YShnKS5hcHBlbmQoYy5waWNrZXJDb250ZW50KTthKGcpLmFwcGVuZChjLnNjcmVlbil9aWYoZi5mdWxsU2NyZWVuQWx3YXlzPT09ZmFsc2V8fGQud2lkdGg+Mzk5KXtpZihmLnVzZU1vZGFsPT09dHJ1ZSl7Yy5zY3JlZW4uZmFkZUluKFwic2xvd1wiKX1lbHNle3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLnNjcmVlbi5yZW1vdmVDbGFzcyhcInVpLWRhdGVib3gtaGlkZGVuXCIpfSw1MDApfX1pZihmLmZ1bGxTY3JlZW5BbHdheXM9PT10cnVlfHwoZi5mdWxsU2NyZWVuPT09dHJ1ZSYmZC53aWR0aDw0MDApKXtjLnBpY2tlckNvbnRlbnQuYWRkQ2xhc3MoXCJpblwiKS5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixcInRleHQtYWxpZ25cIjpcImNlbnRlclwiLHRvcDpkLmZ1bGxUb3AtNSxsZWZ0OmQuZnVsbExlZnQtNSxoZWlnaHQ6ZC5oaWdoLHdpZHRoOmQud2lkdGh9KS5yZW1vdmVDbGFzcyhcInVpLWRhdGVib3gtaGlkZGVuXCIpfWVsc2V7Yy5waWNrZXJDb250ZW50LmFkZENsYXNzKFwidWktb3ZlcmxheS1zaGFkb3cgaW5cIikuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOmQud2luVG9wLGxlZnQ6ZC53aW5MZWZ0fSkucmVtb3ZlQ2xhc3MoXCJ1aS1kYXRlYm94LWhpZGRlblwiKTthKGRvY3VtZW50KS5iaW5kKFwib3JpZW50YXRpb25jaGFuZ2UuZGF0ZWJveFwiLHt3aWRnZXQ6Y30sZnVuY3Rpb24oaSl7Yy5fb3JpZW50Q2hhbmdlKGkpfSk7aWYoZi5yZXNpemVMaXN0ZW5lcj09PXRydWUpe2Eod2luZG93KS5iaW5kKFwicmVzaXplLmRhdGVib3hcIix7d2lkZ2V0OmN9LGZ1bmN0aW9uKGkpe2MuX29yaWVudENoYW5nZShpKX0pfX19ZWxzZXtjLnRoaXNQYWdlLnVuYmluZChcInBhZ2VoaWRlLnJlbW92ZVwiKTtmLnVzZURpYWxvZz10cnVlO2MucGlja1BhZ2VDb250ZW50LmFwcGVuZChjLnBpY2tlckNvbnRlbnQpO2MucGlja2VyQ29udGVudC5jc3Moe3RvcDpcImF1dG9cIixsZWZ0OlwiYXV0b1wiLG1hcmdpbkxlZnQ6XCJhdXRvXCIsbWFyZ2luUmlnaHQ6XCJhdXRvXCJ9KS5yZW1vdmVDbGFzcyhcInVpLW92ZXJsYXktc2hhZG93IHVpLWRhdGVib3gtaGlkZGVuXCIpO2EubW9iaWxlLmNoYW5nZVBhZ2UoYy5waWNrUGFnZSx7dHJhbnNpdGlvbjplfSl9fSxjbG9zZTpmdW5jdGlvbihjKXt2YXIgZD10aGlzLGU9dGhpcy5vcHRpb25zLGY7aWYoZS51c2VJbmxpbmVCbGluZCl7ZC5waWNrZXJDb250ZW50LnNsaWRlVXAoKTtyZXR1cm4gZmFsc2V9aWYoZS51c2VJbmxpbmUpe3JldHVybiB0cnVlfWlmKGUudXNlRGlhbG9nKXtpZighYyl7YShkLnBpY2tQYWdlKS5kaWFsb2coXCJjbG9zZVwiKX1pZighZC50aGlzUGFnZS5qcW1EYXRhKFwicGFnZVwiKS5vcHRpb25zLmRvbUNhY2hlKXtkLnRoaXNQYWdlLmJpbmQoXCJwYWdlaGlkZS5yZW1vdmVcIixmdW5jdGlvbigpe2EoZCkucmVtb3ZlKCl9KX1kLnBpY2tlckNvbnRlbnQuYWRkQ2xhc3MoXCJ1aS1kYXRlYm94LWhpZGRlblwiKS5yZW1vdmVBdHRyKFwic3R5bGVcIikuY3NzKFwiekluZGV4XCIsZC5vcHRpb25zLnppbmRleCk7ZC50aGlzUGFnZS5hcHBlbmQoZC5waWNrZXJDb250ZW50KX1lbHNle2lmKGUudXNlTW9kYWwpe2Quc2NyZWVuLmZhZGVPdXQoXCJzbG93XCIpfWVsc2V7ZC5zY3JlZW4uYWRkQ2xhc3MoXCJ1aS1kYXRlYm94LWhpZGRlblwiKX1kLnBpY2tlckNvbnRlbnQuYWRkQ2xhc3MoXCJ1aS1kYXRlYm94LWhpZGRlblwiKS5yZW1vdmVBdHRyKFwic3R5bGVcIikuY3NzKFwiekluZGV4XCIsZC5vcHRpb25zLnppbmRleCkucmVtb3ZlQ2xhc3MoXCJpblwiKX1kLmZvY3VzZWRFbC5yZW1vdmVDbGFzcyhcInVpLWZvY3VzXCIpO2EoZG9jdW1lbnQpLnVuYmluZChcIm9yaWVudGF0aW9uY2hhbmdlLmRhdGVib3hcIik7aWYoZS5yZXNpemVMaXN0ZW5lcj09PXRydWUpe2Eod2luZG93KS51bmJpbmQoXCJyZXNpemUuZGF0ZWJveFwiKX1pZihlLmNsb3NlQ2FsbGJhY2shPT1mYWxzZSl7aWYoIWEuaXNGdW5jdGlvbihlLmNsb3NlQ2FsbGJhY2spKXtpZih0eXBlb2Ygd2luZG93W2UuY2xvc2VDYWxsYmFja10hPT1cInVuZGVmaW5lZFwiKXtlLmNsb3NlQ2FsbGJhY2s9d2luZG93W2UuY2xvc2VDYWxsYmFja119ZWxzZXtlLmNsb3NlQ2FsbGJhY2s9bmV3IEZ1bmN0aW9uKGUuY2xvc2VDYWxsYmFjayl9fWUuY2xvc2VDYWxsYmFjay5hcHBseShkLGEubWVyZ2UoW2QudGhlRGF0ZV0sZS5jbG9zZUNhbGxiYWNrQXJncykpfX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIix0cnVlKTt0aGlzLmVsZW1lbnQucGFyZW50KCkuYWRkQ2xhc3MoXCJ1aS1kaXNhYmxlZFwiKTt0aGlzLm9wdGlvbnMuZGlzYWJsZWQ9dHJ1ZTt0aGlzLmVsZW1lbnQuYmx1cigpO3RoaXMuaW5wdXQudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwiZGlzYWJsZVwifSl9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIixmYWxzZSk7dGhpcy5lbGVtZW50LnBhcmVudCgpLnJlbW92ZUNsYXNzKFwidWktZGlzYWJsZWRcIik7dGhpcy5vcHRpb25zLmRpc2FibGVkPWZhbHNlO3RoaXMuaW5wdXQudHJpZ2dlcihcImRhdGVib3hcIix7bWV0aG9kOlwiZW5hYmxlXCJ9KX0sX3NldE9wdGlvbjpmdW5jdGlvbihkLGUpe3ZhciBjPVtcIm1pblllYXJcIixcIm1heFllYXJcIixcImFmdGVyVG9kYXlcIixcImJlZm9yZVRvZGF5XCIsXCJtYXhEYXlzXCIsXCJtaW5EYXlzXCIsXCJoaWdoRGF5c1wiLFwiaGlnaERhdGVzXCIsXCJibGFja0RheXNcIixcImJsYWNrRGF0ZXNcIixcImVuYWJsZURhdGVzXCJdO2EuV2lkZ2V0LnByb3RvdHlwZS5fc2V0T3B0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihhLmluQXJyYXkoZCxjKT4tMSl7dGhpcy5yZWZyZXNoKCl9ZWxzZXt0aGlzLmhhcmRyZXNldCgpfX19KTthKGRvY3VtZW50KS5iaW5kKFwicGFnZWJlZm9yZWNyZWF0ZVwiLGZ1bmN0aW9uKGMpe2EoXCI6anFtRGF0YShyb2xlPSdkYXRlYm94JylcIixjLnRhcmdldCkuZWFjaChmdW5jdGlvbigpe2EodGhpcykucHJvcChcInR5cGVcIixcInRleHRcIil9KX0pO2EoZG9jdW1lbnQpLmJpbmQoXCJwYWdlY3JlYXRlIGNyZWF0ZVwiLGZ1bmN0aW9uKGMpe2EoZG9jdW1lbnQpLnRyaWdnZXIoXCJkYXRlYm94YmVmb3JlY3JlYXRlXCIpO2EoXCI6anFtRGF0YShyb2xlPSdkYXRlYm94JylcIixjLnRhcmdldCkuZWFjaChmdW5jdGlvbigpe2lmKHR5cGVvZihhKHRoaXMpLmRhdGEoXCJkYXRlYm94XCIpKT09PVwidW5kZWZpbmVkXCIpe2EodGhpcykuZGF0ZWJveCgpfX0pfSl9KShqUXVlcnkpOyIsIi8qXG5cdE5hbWU6IGF1dG9Db21wbGV0ZVxuXHRBdXRob3I6IFJheW1vbmQgQ2FtZGVuICYgQW5keSBNYXR0aGV3c1xuXHRDb250cmlidXRvcnM6IEppbSBQZWFzZSAoQGptcGVhc2UpXG5cdFdlYnNpdGU6IGh0dHA6Ly9yYXltb25kY2FtZGVuLmNvbS9cblx0XHRcdCBodHRwOi8vYW5keU1hdHRoZXdzLm5ldFxuXHRQYWNrZWQgV2l0aDogaHR0cDovL2pzdXRpbGl0eS5wam9uZWlsLm5ldC9cblx0VmVyc2lvbjogMS4zXG4gKi9cbihmdW5jdGlvbigkKXtcInVzZSBzdHJpY3RcIjt2YXIgZGVmYXVsdHM9e3RhcmdldDokKCksc291cmNlOm51bGwsY2FsbGJhY2s6bnVsbCxsaW5rOm51bGwsbWluTGVuZ3RoOjAsdHJhbnNpdGlvbjonZmFkZSd9LGJ1aWxkSXRlbXM9ZnVuY3Rpb24oJHRoaXMsZGF0YSxzZXR0aW5ncyl7dmFyIHN0cj1bXTskLmVhY2goZGF0YSxmdW5jdGlvbihpbmRleCx2YWx1ZSl7aWYoJC5pc1BsYWluT2JqZWN0KHZhbHVlKSl7c3RyLnB1c2goJzxsaT48YSBocmVmPVwiJytzZXR0aW5ncy5saW5rK2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZS52YWx1ZSkrJ1wiIGRhdGEtdHJhbnNpdGlvbj1cIicrc2V0dGluZ3MudHJhbnNpdGlvbisnXCI+Jyt2YWx1ZS5sYWJlbCsnPC9hPjwvbGk+Jyl9ZWxzZXtzdHIucHVzaCgnPGxpPjxhIGhyZWY9XCInK3NldHRpbmdzLmxpbmsrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSsnXCIgZGF0YS10cmFuc2l0aW9uPVwiJytzZXR0aW5ncy50cmFuc2l0aW9uKydcIj4nK3ZhbHVlKyc8L2E+PC9saT4nKX19KTskKHNldHRpbmdzLnRhcmdldCkuaHRtbChzdHIuam9pbignJykpLmxpc3R2aWV3KFwicmVmcmVzaFwiKTtpZihzZXR0aW5ncy5jYWxsYmFjayE9bnVsbCYmJC5pc0Z1bmN0aW9uKHNldHRpbmdzLmNhbGxiYWNrKSl7YXR0YWNoQ2FsbGJhY2soc2V0dGluZ3MpfWlmKHN0ci5sZW5ndGg+MCl7JHRoaXMudHJpZ2dlcihcInRhcmdldFVwZGF0ZWQuYXV0b2NvbXBsZXRlXCIpfWVsc2V7JHRoaXMudHJpZ2dlcihcInRhcmdldENsZWFyZWQuYXV0b2NvbXBsZXRlXCIpfX0sYXR0YWNoQ2FsbGJhY2s9ZnVuY3Rpb24oc2V0dGluZ3MpeyQoJ2xpIGEnLCQoc2V0dGluZ3MudGFyZ2V0KSkuYmluZCgnY2xpY2suYXV0b2NvbXBsZXRlJyxmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKTtzZXR0aW5ncy5jYWxsYmFjayhlKX0pfSxjbGVhclRhcmdldD1mdW5jdGlvbigkdGhpcywkdGFyZ2V0KXskdGFyZ2V0Lmh0bWwoJycpLmxpc3R2aWV3KCdyZWZyZXNoJyk7JHRoaXMudHJpZ2dlcihcInRhcmdldENsZWFyZWQuYXV0b2NvbXBsZXRlXCIpfSxoYW5kbGVJbnB1dD1mdW5jdGlvbihlKXt2YXIgJHRoaXM9JCh0aGlzKSx0ZXh0LGRhdGEsc2V0dGluZ3M9JHRoaXMuanFtRGF0YShcImF1dG9jb21wbGV0ZVwiKTtpZihzZXR0aW5ncyl7dGV4dD0kdGhpcy52YWwoKTtpZih0ZXh0Lmxlbmd0aDxzZXR0aW5ncy5taW5MZW5ndGgpe2NsZWFyVGFyZ2V0KCR0aGlzLCQoc2V0dGluZ3MudGFyZ2V0KSl9ZWxzZXtpZigkLmlzQXJyYXkoc2V0dGluZ3Muc291cmNlKSl7ZGF0YT1zZXR0aW5ncy5zb3VyY2Uuc29ydCgpLmZpbHRlcihmdW5jdGlvbihlbGVtZW50KXt2YXIgZWxlbWVudF90ZXh0LHJlPW5ldyBSZWdFeHAoJ14nK3RleHQsJ2knKTtpZigkLmlzUGxhaW5PYmplY3QoZWxlbWVudCkpe2VsZW1lbnRfdGV4dD1lbGVtZW50LmxhYmVsfWVsc2V7ZWxlbWVudF90ZXh0PWVsZW1lbnR9cmV0dXJuIHJlLnRlc3QoZWxlbWVudF90ZXh0KX0pO2J1aWxkSXRlbXMoJHRoaXMsZGF0YSxzZXR0aW5ncyl9ZWxzZXskLmdldChzZXR0aW5ncy5zb3VyY2Use3Rlcm06dGV4dH0sZnVuY3Rpb24oZGF0YSl7YnVpbGRJdGVtcygkdGhpcyxkYXRhLHNldHRpbmdzKX0sXCJqc29uXCIpfX19fSxtZXRob2RzPXtpbml0OmZ1bmN0aW9uKG9wdGlvbnMpe3RoaXMuanFtRGF0YShcImF1dG9jb21wbGV0ZVwiLCQuZXh0ZW5kKHt9LGRlZmF1bHRzLG9wdGlvbnMpKTtyZXR1cm4gdGhpcy51bmJpbmQoXCJpbnB1dC5hdXRvY29tcGxldGVcIikuYmluZChcImlucHV0LmF1dG9jb21wbGV0ZVwiLGhhbmRsZUlucHV0KX0sdXBkYXRlOmZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBzZXR0aW5ncz10aGlzLmpxbURhdGEoXCJhdXRvY29tcGxldGVcIik7aWYoc2V0dGluZ3Mpe3RoaXMuanFtRGF0YShcImF1dG9jb21wbGV0ZVwiLCQuZXh0ZW5kKHNldHRpbmdzLG9wdGlvbnMpKX1yZXR1cm4gdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgc2V0dGluZ3M9dGhpcy5qcW1EYXRhKFwiYXV0b2NvbXBsZXRlXCIpO2lmKHNldHRpbmdzKXtjbGVhclRhcmdldCh0aGlzLCQoc2V0dGluZ3MudGFyZ2V0KSl9cmV0dXJuIHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgc2V0dGluZ3M9dGhpcy5qcW1EYXRhKFwiYXV0b2NvbXBsZXRlXCIpO2lmKHNldHRpbmdzKXtjbGVhclRhcmdldCh0aGlzLCQoc2V0dGluZ3MudGFyZ2V0KSk7dGhpcy5qcW1SZW1vdmVEYXRhKFwiYXV0b2NvbXBsZXRlXCIpO3RoaXMudW5iaW5kKFwiLmF1dG9jb21wbGV0ZVwiKX1yZXR1cm4gdGhpc319OyQuZm4uYXV0b2NvbXBsZXRlPWZ1bmN0aW9uKG1ldGhvZCl7aWYobWV0aG9kc1ttZXRob2RdKXtyZXR1cm4gbWV0aG9kc1ttZXRob2RdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX1lbHNlIGlmKHR5cGVvZiBtZXRob2Q9PT0nb2JqZWN0J3x8IW1ldGhvZCl7cmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0pKGpRdWVyeSk7IiwiLy8gbGliL2hhbmRsZWJhcnMvcGFyc2VyLmpzXG4vKiBKaXNvbiBnZW5lcmF0ZWQgcGFyc2VyICovXG52YXIgaGFuZGxlYmFycyA9IChmdW5jdGlvbigpe1xudmFyIHBhcnNlciA9IHt0cmFjZTogZnVuY3Rpb24gdHJhY2UoKSB7IH0sXG55eToge30sXG5zeW1ib2xzXzoge1wiZXJyb3JcIjoyLFwicm9vdFwiOjMsXCJwcm9ncmFtXCI6NCxcIkVPRlwiOjUsXCJzdGF0ZW1lbnRzXCI6NixcInNpbXBsZUludmVyc2VcIjo3LFwic3RhdGVtZW50XCI6OCxcIm9wZW5JbnZlcnNlXCI6OSxcImNsb3NlQmxvY2tcIjoxMCxcIm9wZW5CbG9ja1wiOjExLFwibXVzdGFjaGVcIjoxMixcInBhcnRpYWxcIjoxMyxcIkNPTlRFTlRcIjoxNCxcIkNPTU1FTlRcIjoxNSxcIk9QRU5fQkxPQ0tcIjoxNixcImluTXVzdGFjaGVcIjoxNyxcIkNMT1NFXCI6MTgsXCJPUEVOX0lOVkVSU0VcIjoxOSxcIk9QRU5fRU5EQkxPQ0tcIjoyMCxcInBhdGhcIjoyMSxcIk9QRU5cIjoyMixcIk9QRU5fVU5FU0NBUEVEXCI6MjMsXCJPUEVOX1BBUlRJQUxcIjoyNCxcInBhcmFtc1wiOjI1LFwiaGFzaFwiOjI2LFwicGFyYW1cIjoyNyxcIlNUUklOR1wiOjI4LFwiSU5URUdFUlwiOjI5LFwiQk9PTEVBTlwiOjMwLFwiaGFzaFNlZ21lbnRzXCI6MzEsXCJoYXNoU2VnbWVudFwiOjMyLFwiSURcIjozMyxcIkVRVUFMU1wiOjM0LFwicGF0aFNlZ21lbnRzXCI6MzUsXCJTRVBcIjozNixcIiRhY2NlcHRcIjowLFwiJGVuZFwiOjF9LFxudGVybWluYWxzXzogezI6XCJlcnJvclwiLDU6XCJFT0ZcIiwxNDpcIkNPTlRFTlRcIiwxNTpcIkNPTU1FTlRcIiwxNjpcIk9QRU5fQkxPQ0tcIiwxODpcIkNMT1NFXCIsMTk6XCJPUEVOX0lOVkVSU0VcIiwyMDpcIk9QRU5fRU5EQkxPQ0tcIiwyMjpcIk9QRU5cIiwyMzpcIk9QRU5fVU5FU0NBUEVEXCIsMjQ6XCJPUEVOX1BBUlRJQUxcIiwyODpcIlNUUklOR1wiLDI5OlwiSU5URUdFUlwiLDMwOlwiQk9PTEVBTlwiLDMzOlwiSURcIiwzNDpcIkVRVUFMU1wiLDM2OlwiU0VQXCJ9LFxucHJvZHVjdGlvbnNfOiBbMCxbMywyXSxbNCwzXSxbNCwxXSxbNCwwXSxbNiwxXSxbNiwyXSxbOCwzXSxbOCwzXSxbOCwxXSxbOCwxXSxbOCwxXSxbOCwxXSxbMTEsM10sWzksM10sWzEwLDNdLFsxMiwzXSxbMTIsM10sWzEzLDNdLFsxMyw0XSxbNywyXSxbMTcsM10sWzE3LDJdLFsxNywyXSxbMTcsMV0sWzI1LDJdLFsyNSwxXSxbMjcsMV0sWzI3LDFdLFsyNywxXSxbMjcsMV0sWzI2LDFdLFszMSwyXSxbMzEsMV0sWzMyLDNdLFszMiwzXSxbMzIsM10sWzMyLDNdLFsyMSwxXSxbMzUsM10sWzM1LDFdXSxcbnBlcmZvcm1BY3Rpb246IGZ1bmN0aW9uIGFub255bW91cyh5eXRleHQseXlsZW5nLHl5bGluZW5vLHl5LHl5c3RhdGUsJCQsXyQpIHtcblxudmFyICQwID0gJCQubGVuZ3RoIC0gMTtcbnN3aXRjaCAoeXlzdGF0ZSkge1xuY2FzZSAxOiByZXR1cm4gJCRbJDAtMV0gXG5icmVhaztcbmNhc2UgMjogdGhpcy4kID0gbmV3IHl5LlByb2dyYW1Ob2RlKCQkWyQwLTJdLCAkJFskMF0pIFxuYnJlYWs7XG5jYXNlIDM6IHRoaXMuJCA9IG5ldyB5eS5Qcm9ncmFtTm9kZSgkJFskMF0pIFxuYnJlYWs7XG5jYXNlIDQ6IHRoaXMuJCA9IG5ldyB5eS5Qcm9ncmFtTm9kZShbXSkgXG5icmVhaztcbmNhc2UgNTogdGhpcy4kID0gWyQkWyQwXV0gXG5icmVhaztcbmNhc2UgNjogJCRbJDAtMV0ucHVzaCgkJFskMF0pOyB0aGlzLiQgPSAkJFskMC0xXSBcbmJyZWFrO1xuY2FzZSA3OiB0aGlzLiQgPSBuZXcgeXkuSW52ZXJzZU5vZGUoJCRbJDAtMl0sICQkWyQwLTFdLCAkJFskMF0pIFxuYnJlYWs7XG5jYXNlIDg6IHRoaXMuJCA9IG5ldyB5eS5CbG9ja05vZGUoJCRbJDAtMl0sICQkWyQwLTFdLCAkJFskMF0pIFxuYnJlYWs7XG5jYXNlIDk6IHRoaXMuJCA9ICQkWyQwXSBcbmJyZWFrO1xuY2FzZSAxMDogdGhpcy4kID0gJCRbJDBdIFxuYnJlYWs7XG5jYXNlIDExOiB0aGlzLiQgPSBuZXcgeXkuQ29udGVudE5vZGUoJCRbJDBdKSBcbmJyZWFrO1xuY2FzZSAxMjogdGhpcy4kID0gbmV3IHl5LkNvbW1lbnROb2RlKCQkWyQwXSkgXG5icmVhaztcbmNhc2UgMTM6IHRoaXMuJCA9IG5ldyB5eS5NdXN0YWNoZU5vZGUoJCRbJDAtMV1bMF0sICQkWyQwLTFdWzFdKSBcbmJyZWFrO1xuY2FzZSAxNDogdGhpcy4kID0gbmV3IHl5Lk11c3RhY2hlTm9kZSgkJFskMC0xXVswXSwgJCRbJDAtMV1bMV0pIFxuYnJlYWs7XG5jYXNlIDE1OiB0aGlzLiQgPSAkJFskMC0xXSBcbmJyZWFrO1xuY2FzZSAxNjogdGhpcy4kID0gbmV3IHl5Lk11c3RhY2hlTm9kZSgkJFskMC0xXVswXSwgJCRbJDAtMV1bMV0pIFxuYnJlYWs7XG5jYXNlIDE3OiB0aGlzLiQgPSBuZXcgeXkuTXVzdGFjaGVOb2RlKCQkWyQwLTFdWzBdLCAkJFskMC0xXVsxXSwgdHJ1ZSkgXG5icmVhaztcbmNhc2UgMTg6IHRoaXMuJCA9IG5ldyB5eS5QYXJ0aWFsTm9kZSgkJFskMC0xXSkgXG5icmVhaztcbmNhc2UgMTk6IHRoaXMuJCA9IG5ldyB5eS5QYXJ0aWFsTm9kZSgkJFskMC0yXSwgJCRbJDAtMV0pIFxuYnJlYWs7XG5jYXNlIDIwOiBcbmJyZWFrO1xuY2FzZSAyMTogdGhpcy4kID0gW1skJFskMC0yXV0uY29uY2F0KCQkWyQwLTFdKSwgJCRbJDBdXSBcbmJyZWFrO1xuY2FzZSAyMjogdGhpcy4kID0gW1skJFskMC0xXV0uY29uY2F0KCQkWyQwXSksIG51bGxdIFxuYnJlYWs7XG5jYXNlIDIzOiB0aGlzLiQgPSBbWyQkWyQwLTFdXSwgJCRbJDBdXSBcbmJyZWFrO1xuY2FzZSAyNDogdGhpcy4kID0gW1skJFskMF1dLCBudWxsXSBcbmJyZWFrO1xuY2FzZSAyNTogJCRbJDAtMV0ucHVzaCgkJFskMF0pOyB0aGlzLiQgPSAkJFskMC0xXTsgXG5icmVhaztcbmNhc2UgMjY6IHRoaXMuJCA9IFskJFskMF1dIFxuYnJlYWs7XG5jYXNlIDI3OiB0aGlzLiQgPSAkJFskMF0gXG5icmVhaztcbmNhc2UgMjg6IHRoaXMuJCA9IG5ldyB5eS5TdHJpbmdOb2RlKCQkWyQwXSkgXG5icmVhaztcbmNhc2UgMjk6IHRoaXMuJCA9IG5ldyB5eS5JbnRlZ2VyTm9kZSgkJFskMF0pIFxuYnJlYWs7XG5jYXNlIDMwOiB0aGlzLiQgPSBuZXcgeXkuQm9vbGVhbk5vZGUoJCRbJDBdKSBcbmJyZWFrO1xuY2FzZSAzMTogdGhpcy4kID0gbmV3IHl5Lkhhc2hOb2RlKCQkWyQwXSkgXG5icmVhaztcbmNhc2UgMzI6ICQkWyQwLTFdLnB1c2goJCRbJDBdKTsgdGhpcy4kID0gJCRbJDAtMV0gXG5icmVhaztcbmNhc2UgMzM6IHRoaXMuJCA9IFskJFskMF1dIFxuYnJlYWs7XG5jYXNlIDM0OiB0aGlzLiQgPSBbJCRbJDAtMl0sICQkWyQwXV0gXG5icmVhaztcbmNhc2UgMzU6IHRoaXMuJCA9IFskJFskMC0yXSwgbmV3IHl5LlN0cmluZ05vZGUoJCRbJDBdKV0gXG5icmVhaztcbmNhc2UgMzY6IHRoaXMuJCA9IFskJFskMC0yXSwgbmV3IHl5LkludGVnZXJOb2RlKCQkWyQwXSldIFxuYnJlYWs7XG5jYXNlIDM3OiB0aGlzLiQgPSBbJCRbJDAtMl0sIG5ldyB5eS5Cb29sZWFuTm9kZSgkJFskMF0pXSBcbmJyZWFrO1xuY2FzZSAzODogdGhpcy4kID0gbmV3IHl5LklkTm9kZSgkJFskMF0pIFxuYnJlYWs7XG5jYXNlIDM5OiAkJFskMC0yXS5wdXNoKCQkWyQwXSk7IHRoaXMuJCA9ICQkWyQwLTJdOyBcbmJyZWFrO1xuY2FzZSA0MDogdGhpcy4kID0gWyQkWyQwXV0gXG5icmVhaztcbn1cbn0sXG50YWJsZTogW3szOjEsNDoyLDU6WzIsNF0sNjozLDg6NCw5OjUsMTE6NiwxMjo3LDEzOjgsMTQ6WzEsOV0sMTU6WzEsMTBdLDE2OlsxLDEyXSwxOTpbMSwxMV0sMjI6WzEsMTNdLDIzOlsxLDE0XSwyNDpbMSwxNV19LHsxOlszXX0sezU6WzEsMTZdfSx7NTpbMiwzXSw3OjE3LDg6MTgsOTo1LDExOjYsMTI6NywxMzo4LDE0OlsxLDldLDE1OlsxLDEwXSwxNjpbMSwxMl0sMTk6WzEsMTldLDIwOlsyLDNdLDIyOlsxLDEzXSwyMzpbMSwxNF0sMjQ6WzEsMTVdfSx7NTpbMiw1XSwxNDpbMiw1XSwxNTpbMiw1XSwxNjpbMiw1XSwxOTpbMiw1XSwyMDpbMiw1XSwyMjpbMiw1XSwyMzpbMiw1XSwyNDpbMiw1XX0sezQ6MjAsNjozLDg6NCw5OjUsMTE6NiwxMjo3LDEzOjgsMTQ6WzEsOV0sMTU6WzEsMTBdLDE2OlsxLDEyXSwxOTpbMSwxMV0sMjA6WzIsNF0sMjI6WzEsMTNdLDIzOlsxLDE0XSwyNDpbMSwxNV19LHs0OjIxLDY6Myw4OjQsOTo1LDExOjYsMTI6NywxMzo4LDE0OlsxLDldLDE1OlsxLDEwXSwxNjpbMSwxMl0sMTk6WzEsMTFdLDIwOlsyLDRdLDIyOlsxLDEzXSwyMzpbMSwxNF0sMjQ6WzEsMTVdfSx7NTpbMiw5XSwxNDpbMiw5XSwxNTpbMiw5XSwxNjpbMiw5XSwxOTpbMiw5XSwyMDpbMiw5XSwyMjpbMiw5XSwyMzpbMiw5XSwyNDpbMiw5XX0sezU6WzIsMTBdLDE0OlsyLDEwXSwxNTpbMiwxMF0sMTY6WzIsMTBdLDE5OlsyLDEwXSwyMDpbMiwxMF0sMjI6WzIsMTBdLDIzOlsyLDEwXSwyNDpbMiwxMF19LHs1OlsyLDExXSwxNDpbMiwxMV0sMTU6WzIsMTFdLDE2OlsyLDExXSwxOTpbMiwxMV0sMjA6WzIsMTFdLDIyOlsyLDExXSwyMzpbMiwxMV0sMjQ6WzIsMTFdfSx7NTpbMiwxMl0sMTQ6WzIsMTJdLDE1OlsyLDEyXSwxNjpbMiwxMl0sMTk6WzIsMTJdLDIwOlsyLDEyXSwyMjpbMiwxMl0sMjM6WzIsMTJdLDI0OlsyLDEyXX0sezE3OjIyLDIxOjIzLDMzOlsxLDI1XSwzNToyNH0sezE3OjI2LDIxOjIzLDMzOlsxLDI1XSwzNToyNH0sezE3OjI3LDIxOjIzLDMzOlsxLDI1XSwzNToyNH0sezE3OjI4LDIxOjIzLDMzOlsxLDI1XSwzNToyNH0sezIxOjI5LDMzOlsxLDI1XSwzNToyNH0sezE6WzIsMV19LHs2OjMwLDg6NCw5OjUsMTE6NiwxMjo3LDEzOjgsMTQ6WzEsOV0sMTU6WzEsMTBdLDE2OlsxLDEyXSwxOTpbMSwxMV0sMjI6WzEsMTNdLDIzOlsxLDE0XSwyNDpbMSwxNV19LHs1OlsyLDZdLDE0OlsyLDZdLDE1OlsyLDZdLDE2OlsyLDZdLDE5OlsyLDZdLDIwOlsyLDZdLDIyOlsyLDZdLDIzOlsyLDZdLDI0OlsyLDZdfSx7MTc6MjIsMTg6WzEsMzFdLDIxOjIzLDMzOlsxLDI1XSwzNToyNH0sezEwOjMyLDIwOlsxLDMzXX0sezEwOjM0LDIwOlsxLDMzXX0sezE4OlsxLDM1XX0sezE4OlsyLDI0XSwyMTo0MCwyNTozNiwyNjozNywyNzozOCwyODpbMSw0MV0sMjk6WzEsNDJdLDMwOlsxLDQzXSwzMTozOSwzMjo0NCwzMzpbMSw0NV0sMzU6MjR9LHsxODpbMiwzOF0sMjg6WzIsMzhdLDI5OlsyLDM4XSwzMDpbMiwzOF0sMzM6WzIsMzhdLDM2OlsxLDQ2XX0sezE4OlsyLDQwXSwyODpbMiw0MF0sMjk6WzIsNDBdLDMwOlsyLDQwXSwzMzpbMiw0MF0sMzY6WzIsNDBdfSx7MTg6WzEsNDddfSx7MTg6WzEsNDhdfSx7MTg6WzEsNDldfSx7MTg6WzEsNTBdLDIxOjUxLDMzOlsxLDI1XSwzNToyNH0sezU6WzIsMl0sODoxOCw5OjUsMTE6NiwxMjo3LDEzOjgsMTQ6WzEsOV0sMTU6WzEsMTBdLDE2OlsxLDEyXSwxOTpbMSwxMV0sMjA6WzIsMl0sMjI6WzEsMTNdLDIzOlsxLDE0XSwyNDpbMSwxNV19LHsxNDpbMiwyMF0sMTU6WzIsMjBdLDE2OlsyLDIwXSwxOTpbMiwyMF0sMjI6WzIsMjBdLDIzOlsyLDIwXSwyNDpbMiwyMF19LHs1OlsyLDddLDE0OlsyLDddLDE1OlsyLDddLDE2OlsyLDddLDE5OlsyLDddLDIwOlsyLDddLDIyOlsyLDddLDIzOlsyLDddLDI0OlsyLDddfSx7MjE6NTIsMzM6WzEsMjVdLDM1OjI0fSx7NTpbMiw4XSwxNDpbMiw4XSwxNTpbMiw4XSwxNjpbMiw4XSwxOTpbMiw4XSwyMDpbMiw4XSwyMjpbMiw4XSwyMzpbMiw4XSwyNDpbMiw4XX0sezE0OlsyLDE0XSwxNTpbMiwxNF0sMTY6WzIsMTRdLDE5OlsyLDE0XSwyMDpbMiwxNF0sMjI6WzIsMTRdLDIzOlsyLDE0XSwyNDpbMiwxNF19LHsxODpbMiwyMl0sMjE6NDAsMjY6NTMsMjc6NTQsMjg6WzEsNDFdLDI5OlsxLDQyXSwzMDpbMSw0M10sMzE6MzksMzI6NDQsMzM6WzEsNDVdLDM1OjI0fSx7MTg6WzIsMjNdfSx7MTg6WzIsMjZdLDI4OlsyLDI2XSwyOTpbMiwyNl0sMzA6WzIsMjZdLDMzOlsyLDI2XX0sezE4OlsyLDMxXSwzMjo1NSwzMzpbMSw1Nl19LHsxODpbMiwyN10sMjg6WzIsMjddLDI5OlsyLDI3XSwzMDpbMiwyN10sMzM6WzIsMjddfSx7MTg6WzIsMjhdLDI4OlsyLDI4XSwyOTpbMiwyOF0sMzA6WzIsMjhdLDMzOlsyLDI4XX0sezE4OlsyLDI5XSwyODpbMiwyOV0sMjk6WzIsMjldLDMwOlsyLDI5XSwzMzpbMiwyOV19LHsxODpbMiwzMF0sMjg6WzIsMzBdLDI5OlsyLDMwXSwzMDpbMiwzMF0sMzM6WzIsMzBdfSx7MTg6WzIsMzNdLDMzOlsyLDMzXX0sezE4OlsyLDQwXSwyODpbMiw0MF0sMjk6WzIsNDBdLDMwOlsyLDQwXSwzMzpbMiw0MF0sMzQ6WzEsNTddLDM2OlsyLDQwXX0sezMzOlsxLDU4XX0sezE0OlsyLDEzXSwxNTpbMiwxM10sMTY6WzIsMTNdLDE5OlsyLDEzXSwyMDpbMiwxM10sMjI6WzIsMTNdLDIzOlsyLDEzXSwyNDpbMiwxM119LHs1OlsyLDE2XSwxNDpbMiwxNl0sMTU6WzIsMTZdLDE2OlsyLDE2XSwxOTpbMiwxNl0sMjA6WzIsMTZdLDIyOlsyLDE2XSwyMzpbMiwxNl0sMjQ6WzIsMTZdfSx7NTpbMiwxN10sMTQ6WzIsMTddLDE1OlsyLDE3XSwxNjpbMiwxN10sMTk6WzIsMTddLDIwOlsyLDE3XSwyMjpbMiwxN10sMjM6WzIsMTddLDI0OlsyLDE3XX0sezU6WzIsMThdLDE0OlsyLDE4XSwxNTpbMiwxOF0sMTY6WzIsMThdLDE5OlsyLDE4XSwyMDpbMiwxOF0sMjI6WzIsMThdLDIzOlsyLDE4XSwyNDpbMiwxOF19LHsxODpbMSw1OV19LHsxODpbMSw2MF19LHsxODpbMiwyMV19LHsxODpbMiwyNV0sMjg6WzIsMjVdLDI5OlsyLDI1XSwzMDpbMiwyNV0sMzM6WzIsMjVdfSx7MTg6WzIsMzJdLDMzOlsyLDMyXX0sezM0OlsxLDU3XX0sezIxOjYxLDI4OlsxLDYyXSwyOTpbMSw2M10sMzA6WzEsNjRdLDMzOlsxLDI1XSwzNToyNH0sezE4OlsyLDM5XSwyODpbMiwzOV0sMjk6WzIsMzldLDMwOlsyLDM5XSwzMzpbMiwzOV0sMzY6WzIsMzldfSx7NTpbMiwxOV0sMTQ6WzIsMTldLDE1OlsyLDE5XSwxNjpbMiwxOV0sMTk6WzIsMTldLDIwOlsyLDE5XSwyMjpbMiwxOV0sMjM6WzIsMTldLDI0OlsyLDE5XX0sezU6WzIsMTVdLDE0OlsyLDE1XSwxNTpbMiwxNV0sMTY6WzIsMTVdLDE5OlsyLDE1XSwyMDpbMiwxNV0sMjI6WzIsMTVdLDIzOlsyLDE1XSwyNDpbMiwxNV19LHsxODpbMiwzNF0sMzM6WzIsMzRdfSx7MTg6WzIsMzVdLDMzOlsyLDM1XX0sezE4OlsyLDM2XSwzMzpbMiwzNl19LHsxODpbMiwzN10sMzM6WzIsMzddfV0sXG5kZWZhdWx0QWN0aW9uczogezE2OlsyLDFdLDM3OlsyLDIzXSw1MzpbMiwyMV19LFxucGFyc2VFcnJvcjogZnVuY3Rpb24gcGFyc2VFcnJvcihzdHIsIGhhc2gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3Ioc3RyKTtcbn0sXG5wYXJzZTogZnVuY3Rpb24gcGFyc2UoaW5wdXQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIHN0YWNrID0gWzBdLFxuICAgICAgICB2c3RhY2sgPSBbbnVsbF0sIC8vIHNlbWFudGljIHZhbHVlIHN0YWNrXG4gICAgICAgIGxzdGFjayA9IFtdLCAvLyBsb2NhdGlvbiBzdGFja1xuICAgICAgICB0YWJsZSA9IHRoaXMudGFibGUsXG4gICAgICAgIHl5dGV4dCA9ICcnLFxuICAgICAgICB5eWxpbmVubyA9IDAsXG4gICAgICAgIHl5bGVuZyA9IDAsXG4gICAgICAgIHJlY292ZXJpbmcgPSAwLFxuICAgICAgICBURVJST1IgPSAyLFxuICAgICAgICBFT0YgPSAxO1xuXG4gICAgLy90aGlzLnJlZHVjdGlvbkNvdW50ID0gdGhpcy5zaGlmdENvdW50ID0gMDtcblxuICAgIHRoaXMubGV4ZXIuc2V0SW5wdXQoaW5wdXQpO1xuICAgIHRoaXMubGV4ZXIueXkgPSB0aGlzLnl5O1xuICAgIHRoaXMueXkubGV4ZXIgPSB0aGlzLmxleGVyO1xuICAgIGlmICh0eXBlb2YgdGhpcy5sZXhlci55eWxsb2MgPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgIHRoaXMubGV4ZXIueXlsbG9jID0ge307XG4gICAgdmFyIHl5bG9jID0gdGhpcy5sZXhlci55eWxsb2M7XG4gICAgbHN0YWNrLnB1c2goeXlsb2MpO1xuXG4gICAgaWYgKHR5cGVvZiB0aGlzLnl5LnBhcnNlRXJyb3IgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHRoaXMucGFyc2VFcnJvciA9IHRoaXMueXkucGFyc2VFcnJvcjtcblxuICAgIGZ1bmN0aW9uIHBvcFN0YWNrIChuKSB7XG4gICAgICAgIHN0YWNrLmxlbmd0aCA9IHN0YWNrLmxlbmd0aCAtIDIqbjtcbiAgICAgICAgdnN0YWNrLmxlbmd0aCA9IHZzdGFjay5sZW5ndGggLSBuO1xuICAgICAgICBsc3RhY2subGVuZ3RoID0gbHN0YWNrLmxlbmd0aCAtIG47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGV4KCkge1xuICAgICAgICB2YXIgdG9rZW47XG4gICAgICAgIHRva2VuID0gc2VsZi5sZXhlci5sZXgoKSB8fCAxOyAvLyAkZW5kID0gMVxuICAgICAgICAvLyBpZiB0b2tlbiBpc24ndCBpdHMgbnVtZXJpYyB2YWx1ZSwgY29udmVydFxuICAgICAgICBpZiAodHlwZW9mIHRva2VuICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdG9rZW4gPSBzZWxmLnN5bWJvbHNfW3Rva2VuXSB8fCB0b2tlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgfTtcblxuICAgIHZhciBzeW1ib2wsIHByZUVycm9yU3ltYm9sLCBzdGF0ZSwgYWN0aW9uLCBhLCByLCB5eXZhbD17fSxwLGxlbixuZXdTdGF0ZSwgZXhwZWN0ZWQ7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgLy8gcmV0cmVpdmUgc3RhdGUgbnVtYmVyIGZyb20gdG9wIG9mIHN0YWNrXG4gICAgICAgIHN0YXRlID0gc3RhY2tbc3RhY2subGVuZ3RoLTFdO1xuXG4gICAgICAgIC8vIHVzZSBkZWZhdWx0IGFjdGlvbnMgaWYgYXZhaWxhYmxlXG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRBY3Rpb25zW3N0YXRlXSkge1xuICAgICAgICAgICAgYWN0aW9uID0gdGhpcy5kZWZhdWx0QWN0aW9uc1tzdGF0ZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoc3ltYm9sID09IG51bGwpXG4gICAgICAgICAgICAgICAgc3ltYm9sID0gbGV4KCk7XG4gICAgICAgICAgICAvLyByZWFkIGFjdGlvbiBmb3IgY3VycmVudCBzdGF0ZSBhbmQgZmlyc3QgaW5wdXRcbiAgICAgICAgICAgIGFjdGlvbiA9IHRhYmxlW3N0YXRlXSAmJiB0YWJsZVtzdGF0ZV1bc3ltYm9sXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhhbmRsZSBwYXJzZSBlcnJvclxuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ3VuZGVmaW5lZCcgfHwgIWFjdGlvbi5sZW5ndGggfHwgIWFjdGlvblswXSkge1xuXG4gICAgICAgICAgICBpZiAoIXJlY292ZXJpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXBvcnQgZXJyb3JcbiAgICAgICAgICAgICAgICBleHBlY3RlZCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAocCBpbiB0YWJsZVtzdGF0ZV0pIGlmICh0aGlzLnRlcm1pbmFsc19bcF0gJiYgcCA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQucHVzaChcIidcIit0aGlzLnRlcm1pbmFsc19bcF0rXCInXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZXJyU3RyID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGV4ZXIuc2hvd1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGVyclN0ciA9ICdQYXJzZSBlcnJvciBvbiBsaW5lICcrKHl5bGluZW5vKzEpK1wiOlxcblwiK3RoaXMubGV4ZXIuc2hvd1Bvc2l0aW9uKCkrJ1xcbkV4cGVjdGluZyAnK2V4cGVjdGVkLmpvaW4oJywgJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyU3RyID0gJ1BhcnNlIGVycm9yIG9uIGxpbmUgJysoeXlsaW5lbm8rMSkrXCI6IFVuZXhwZWN0ZWQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzeW1ib2wgPT0gMSAvKkVPRiovID8gXCJlbmQgb2YgaW5wdXRcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFwiJ1wiKyh0aGlzLnRlcm1pbmFsc19bc3ltYm9sXSB8fCBzeW1ib2wpK1wiJ1wiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VFcnJvcihlcnJTdHIsXG4gICAgICAgICAgICAgICAgICAgIHt0ZXh0OiB0aGlzLmxleGVyLm1hdGNoLCB0b2tlbjogdGhpcy50ZXJtaW5hbHNfW3N5bWJvbF0gfHwgc3ltYm9sLCBsaW5lOiB0aGlzLmxleGVyLnl5bGluZW5vLCBsb2M6IHl5bG9jLCBleHBlY3RlZDogZXhwZWN0ZWR9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8ganVzdCByZWNvdmVyZWQgZnJvbSBhbm90aGVyIGVycm9yXG4gICAgICAgICAgICBpZiAocmVjb3ZlcmluZyA9PSAzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN5bWJvbCA9PSBFT0YpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVyclN0ciB8fCAnUGFyc2luZyBoYWx0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZGlzY2FyZCBjdXJyZW50IGxvb2thaGVhZCBhbmQgZ3JhYiBhbm90aGVyXG4gICAgICAgICAgICAgICAgeXlsZW5nID0gdGhpcy5sZXhlci55eWxlbmc7XG4gICAgICAgICAgICAgICAgeXl0ZXh0ID0gdGhpcy5sZXhlci55eXRleHQ7XG4gICAgICAgICAgICAgICAgeXlsaW5lbm8gPSB0aGlzLmxleGVyLnl5bGluZW5vO1xuICAgICAgICAgICAgICAgIHl5bG9jID0gdGhpcy5sZXhlci55eWxsb2M7XG4gICAgICAgICAgICAgICAgc3ltYm9sID0gbGV4KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHRyeSB0byByZWNvdmVyIGZyb20gZXJyb3JcbiAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgZm9yIGVycm9yIHJlY292ZXJ5IHJ1bGUgaW4gdGhpcyBzdGF0ZVxuICAgICAgICAgICAgICAgIGlmICgoVEVSUk9SLnRvU3RyaW5nKCkpIGluIHRhYmxlW3N0YXRlXSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVyclN0ciB8fCAnUGFyc2luZyBoYWx0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvcFN0YWNrKDEpO1xuICAgICAgICAgICAgICAgIHN0YXRlID0gc3RhY2tbc3RhY2subGVuZ3RoLTFdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcmVFcnJvclN5bWJvbCA9IHN5bWJvbDsgLy8gc2F2ZSB0aGUgbG9va2FoZWFkIHRva2VuXG4gICAgICAgICAgICBzeW1ib2wgPSBURVJST1I7ICAgICAgICAgLy8gaW5zZXJ0IGdlbmVyaWMgZXJyb3Igc3ltYm9sIGFzIG5ldyBsb29rYWhlYWRcbiAgICAgICAgICAgIHN0YXRlID0gc3RhY2tbc3RhY2subGVuZ3RoLTFdO1xuICAgICAgICAgICAgYWN0aW9uID0gdGFibGVbc3RhdGVdICYmIHRhYmxlW3N0YXRlXVtURVJST1JdO1xuICAgICAgICAgICAgcmVjb3ZlcmluZyA9IDM7IC8vIGFsbG93IDMgcmVhbCBzeW1ib2xzIHRvIGJlIHNoaWZ0ZWQgYmVmb3JlIHJlcG9ydGluZyBhIG5ldyBlcnJvclxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhpcyBzaG91bGRuJ3QgaGFwcGVuLCB1bmxlc3MgcmVzb2x2ZSBkZWZhdWx0cyBhcmUgb2ZmXG4gICAgICAgIGlmIChhY3Rpb25bMF0gaW5zdGFuY2VvZiBBcnJheSAmJiBhY3Rpb24ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXJzZSBFcnJvcjogbXVsdGlwbGUgYWN0aW9ucyBwb3NzaWJsZSBhdCBzdGF0ZTogJytzdGF0ZSsnLCB0b2tlbjogJytzeW1ib2wpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChhY3Rpb25bMF0pIHtcblxuICAgICAgICAgICAgY2FzZSAxOiAvLyBzaGlmdFxuICAgICAgICAgICAgICAgIC8vdGhpcy5zaGlmdENvdW50Kys7XG5cbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHN5bWJvbCk7XG4gICAgICAgICAgICAgICAgdnN0YWNrLnB1c2godGhpcy5sZXhlci55eXRleHQpO1xuICAgICAgICAgICAgICAgIGxzdGFjay5wdXNoKHRoaXMubGV4ZXIueXlsbG9jKTtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGFjdGlvblsxXSk7IC8vIHB1c2ggc3RhdGVcbiAgICAgICAgICAgICAgICBzeW1ib2wgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICghcHJlRXJyb3JTeW1ib2wpIHsgLy8gbm9ybWFsIGV4ZWN1dGlvbi9ubyBlcnJvclxuICAgICAgICAgICAgICAgICAgICB5eWxlbmcgPSB0aGlzLmxleGVyLnl5bGVuZztcbiAgICAgICAgICAgICAgICAgICAgeXl0ZXh0ID0gdGhpcy5sZXhlci55eXRleHQ7XG4gICAgICAgICAgICAgICAgICAgIHl5bGluZW5vID0gdGhpcy5sZXhlci55eWxpbmVubztcbiAgICAgICAgICAgICAgICAgICAgeXlsb2MgPSB0aGlzLmxleGVyLnl5bGxvYztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY292ZXJpbmcgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcmluZy0tO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGVycm9yIGp1c3Qgb2NjdXJyZWQsIHJlc3VtZSBvbGQgbG9va2FoZWFkIGYvIGJlZm9yZSBlcnJvclxuICAgICAgICAgICAgICAgICAgICBzeW1ib2wgPSBwcmVFcnJvclN5bWJvbDtcbiAgICAgICAgICAgICAgICAgICAgcHJlRXJyb3JTeW1ib2wgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAyOiAvLyByZWR1Y2VcbiAgICAgICAgICAgICAgICAvL3RoaXMucmVkdWN0aW9uQ291bnQrKztcblxuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMucHJvZHVjdGlvbnNfW2FjdGlvblsxXV1bMV07XG5cbiAgICAgICAgICAgICAgICAvLyBwZXJmb3JtIHNlbWFudGljIGFjdGlvblxuICAgICAgICAgICAgICAgIHl5dmFsLiQgPSB2c3RhY2tbdnN0YWNrLmxlbmd0aC1sZW5dOyAvLyBkZWZhdWx0IHRvICQkID0gJDFcbiAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IGxvY2F0aW9uLCB1c2VzIGZpcnN0IHRva2VuIGZvciBmaXJzdHMsIGxhc3QgZm9yIGxhc3RzXG4gICAgICAgICAgICAgICAgeXl2YWwuXyQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0X2xpbmU6IGxzdGFja1tsc3RhY2subGVuZ3RoLShsZW58fDEpXS5maXJzdF9saW5lLFxuICAgICAgICAgICAgICAgICAgICBsYXN0X2xpbmU6IGxzdGFja1tsc3RhY2subGVuZ3RoLTFdLmxhc3RfbGluZSxcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RfY29sdW1uOiBsc3RhY2tbbHN0YWNrLmxlbmd0aC0obGVufHwxKV0uZmlyc3RfY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICBsYXN0X2NvbHVtbjogbHN0YWNrW2xzdGFjay5sZW5ndGgtMV0ubGFzdF9jb2x1bW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHIgPSB0aGlzLnBlcmZvcm1BY3Rpb24uY2FsbCh5eXZhbCwgeXl0ZXh0LCB5eWxlbmcsIHl5bGluZW5vLCB0aGlzLnl5LCBhY3Rpb25bMV0sIHZzdGFjaywgbHN0YWNrKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gcG9wIG9mZiBzdGFja1xuICAgICAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZSgwLC0xKmxlbioyKTtcbiAgICAgICAgICAgICAgICAgICAgdnN0YWNrID0gdnN0YWNrLnNsaWNlKDAsIC0xKmxlbik7XG4gICAgICAgICAgICAgICAgICAgIGxzdGFjayA9IGxzdGFjay5zbGljZSgwLCAtMSpsZW4pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2godGhpcy5wcm9kdWN0aW9uc19bYWN0aW9uWzFdXVswXSk7ICAgIC8vIHB1c2ggbm9udGVybWluYWwgKHJlZHVjZSlcbiAgICAgICAgICAgICAgICB2c3RhY2sucHVzaCh5eXZhbC4kKTtcbiAgICAgICAgICAgICAgICBsc3RhY2sucHVzaCh5eXZhbC5fJCk7XG4gICAgICAgICAgICAgICAgLy8gZ290byBuZXcgc3RhdGUgPSB0YWJsZVtTVEFURV1bTk9OVEVSTUlOQUxdXG4gICAgICAgICAgICAgICAgbmV3U3RhdGUgPSB0YWJsZVtzdGFja1tzdGFjay5sZW5ndGgtMl1dW3N0YWNrW3N0YWNrLmxlbmd0aC0xXV07XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChuZXdTdGF0ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzogLy8gYWNjZXB0XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufX07LyogSmlzb24gZ2VuZXJhdGVkIGxleGVyICovXG52YXIgbGV4ZXIgPSAoZnVuY3Rpb24oKXt2YXIgbGV4ZXIgPSAoe0VPRjoxLFxucGFyc2VFcnJvcjpmdW5jdGlvbiBwYXJzZUVycm9yKHN0ciwgaGFzaCkge1xuICAgICAgICBpZiAodGhpcy55eS5wYXJzZUVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnl5LnBhcnNlRXJyb3Ioc3RyLCBoYXNoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzdHIpO1xuICAgICAgICB9XG4gICAgfSxcbnNldElucHV0OmZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLl9tb3JlID0gdGhpcy5fbGVzcyA9IHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnl5bGluZW5vID0gdGhpcy55eWxlbmcgPSAwO1xuICAgICAgICB0aGlzLnl5dGV4dCA9IHRoaXMubWF0Y2hlZCA9IHRoaXMubWF0Y2ggPSAnJztcbiAgICAgICAgdGhpcy5jb25kaXRpb25TdGFjayA9IFsnSU5JVElBTCddO1xuICAgICAgICB0aGlzLnl5bGxvYyA9IHtmaXJzdF9saW5lOjEsZmlyc3RfY29sdW1uOjAsbGFzdF9saW5lOjEsbGFzdF9jb2x1bW46MH07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5pbnB1dDpmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjaCA9IHRoaXMuX2lucHV0WzBdO1xuICAgICAgICB0aGlzLnl5dGV4dCs9Y2g7XG4gICAgICAgIHRoaXMueXlsZW5nKys7XG4gICAgICAgIHRoaXMubWF0Y2grPWNoO1xuICAgICAgICB0aGlzLm1hdGNoZWQrPWNoO1xuICAgICAgICB2YXIgbGluZXMgPSBjaC5tYXRjaCgvXFxuLyk7XG4gICAgICAgIGlmIChsaW5lcykgdGhpcy55eWxpbmVubysrO1xuICAgICAgICB0aGlzLl9pbnB1dCA9IHRoaXMuX2lucHV0LnNsaWNlKDEpO1xuICAgICAgICByZXR1cm4gY2g7XG4gICAgfSxcbnVucHV0OmZ1bmN0aW9uIChjaCkge1xuICAgICAgICB0aGlzLl9pbnB1dCA9IGNoICsgdGhpcy5faW5wdXQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5tb3JlOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fbW9yZSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5wYXN0SW5wdXQ6ZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGFzdCA9IHRoaXMubWF0Y2hlZC5zdWJzdHIoMCwgdGhpcy5tYXRjaGVkLmxlbmd0aCAtIHRoaXMubWF0Y2gubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIChwYXN0Lmxlbmd0aCA+IDIwID8gJy4uLic6JycpICsgcGFzdC5zdWJzdHIoLTIwKS5yZXBsYWNlKC9cXG4vZywgXCJcIik7XG4gICAgfSxcbnVwY29taW5nSW5wdXQ6ZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV4dCA9IHRoaXMubWF0Y2g7XG4gICAgICAgIGlmIChuZXh0Lmxlbmd0aCA8IDIwKSB7XG4gICAgICAgICAgICBuZXh0ICs9IHRoaXMuX2lucHV0LnN1YnN0cigwLCAyMC1uZXh0Lmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXh0LnN1YnN0cigwLDIwKSsobmV4dC5sZW5ndGggPiAyMCA/ICcuLi4nOicnKSkucmVwbGFjZSgvXFxuL2csIFwiXCIpO1xuICAgIH0sXG5zaG93UG9zaXRpb246ZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJlID0gdGhpcy5wYXN0SW5wdXQoKTtcbiAgICAgICAgdmFyIGMgPSBuZXcgQXJyYXkocHJlLmxlbmd0aCArIDEpLmpvaW4oXCItXCIpO1xuICAgICAgICByZXR1cm4gcHJlICsgdGhpcy51cGNvbWluZ0lucHV0KCkgKyBcIlxcblwiICsgYytcIl5cIjtcbiAgICB9LFxubmV4dDpmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkVPRjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2lucHV0KSB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICAgIHZhciB0b2tlbixcbiAgICAgICAgICAgIG1hdGNoLFxuICAgICAgICAgICAgY29sLFxuICAgICAgICAgICAgbGluZXM7XG4gICAgICAgIGlmICghdGhpcy5fbW9yZSkge1xuICAgICAgICAgICAgdGhpcy55eXRleHQgPSAnJztcbiAgICAgICAgICAgIHRoaXMubWF0Y2ggPSAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLl9jdXJyZW50UnVsZXMoKTtcbiAgICAgICAgZm9yICh2YXIgaT0wO2kgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbWF0Y2ggPSB0aGlzLl9pbnB1dC5tYXRjaCh0aGlzLnJ1bGVzW3J1bGVzW2ldXSk7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBsaW5lcyA9IG1hdGNoWzBdLm1hdGNoKC9cXG4uKi9nKTtcbiAgICAgICAgICAgICAgICBpZiAobGluZXMpIHRoaXMueXlsaW5lbm8gKz0gbGluZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHRoaXMueXlsbG9jID0ge2ZpcnN0X2xpbmU6IHRoaXMueXlsbG9jLmxhc3RfbGluZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X2xpbmU6IHRoaXMueXlsaW5lbm8rMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9jb2x1bW46IHRoaXMueXlsbG9jLmxhc3RfY29sdW1uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RfY29sdW1uOiBsaW5lcyA/IGxpbmVzW2xpbmVzLmxlbmd0aC0xXS5sZW5ndGgtMSA6IHRoaXMueXlsbG9jLmxhc3RfY29sdW1uICsgbWF0Y2hbMF0ubGVuZ3RofVxuICAgICAgICAgICAgICAgIHRoaXMueXl0ZXh0ICs9IG1hdGNoWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2ggKz0gbWF0Y2hbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRjaGVzID0gbWF0Y2g7XG4gICAgICAgICAgICAgICAgdGhpcy55eWxlbmcgPSB0aGlzLnl5dGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW9yZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuX2lucHV0ID0gdGhpcy5faW5wdXQuc2xpY2UobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoZWQgKz0gbWF0Y2hbMF07XG4gICAgICAgICAgICAgICAgdG9rZW4gPSB0aGlzLnBlcmZvcm1BY3Rpb24uY2FsbCh0aGlzLCB0aGlzLnl5LCB0aGlzLCBydWxlc1tpXSx0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoLTFdKTtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHJldHVybiB0b2tlbjtcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faW5wdXQgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkVPRjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGFyc2VFcnJvcignTGV4aWNhbCBlcnJvciBvbiBsaW5lICcrKHRoaXMueXlsaW5lbm8rMSkrJy4gVW5yZWNvZ25pemVkIHRleHQuXFxuJyt0aGlzLnNob3dQb3NpdGlvbigpLCBcbiAgICAgICAgICAgICAgICAgICAge3RleHQ6IFwiXCIsIHRva2VuOiBudWxsLCBsaW5lOiB0aGlzLnl5bGluZW5vfSk7XG4gICAgICAgIH1cbiAgICB9LFxubGV4OmZ1bmN0aW9uIGxleCgpIHtcbiAgICAgICAgdmFyIHIgPSB0aGlzLm5leHQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiByICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZXgoKTtcbiAgICAgICAgfVxuICAgIH0sXG5iZWdpbjpmdW5jdGlvbiBiZWdpbihjb25kaXRpb24pIHtcbiAgICAgICAgdGhpcy5jb25kaXRpb25TdGFjay5wdXNoKGNvbmRpdGlvbik7XG4gICAgfSxcbnBvcFN0YXRlOmZ1bmN0aW9uIHBvcFN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25TdGFjay5wb3AoKTtcbiAgICB9LFxuX2N1cnJlbnRSdWxlczpmdW5jdGlvbiBfY3VycmVudFJ1bGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25zW3RoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGgtMV1dLnJ1bGVzO1xuICAgIH19KTtcbmxleGVyLnBlcmZvcm1BY3Rpb24gPSBmdW5jdGlvbiBhbm9ueW1vdXMoeXkseXlfLCRhdm9pZGluZ19uYW1lX2NvbGxpc2lvbnMsWVlfU1RBUlQpIHtcblxudmFyIFlZU1RBVEU9WVlfU1RBUlRcbnN3aXRjaCgkYXZvaWRpbmdfbmFtZV9jb2xsaXNpb25zKSB7XG5jYXNlIDA6IHRoaXMuYmVnaW4oXCJtdVwiKTsgaWYgKHl5Xy55eXRleHQpIHJldHVybiAxNDsgXG5icmVhaztcbmNhc2UgMTogcmV0dXJuIDE0OyBcbmJyZWFrO1xuY2FzZSAyOiByZXR1cm4gMjQ7IFxuYnJlYWs7XG5jYXNlIDM6IHJldHVybiAxNjsgXG5icmVhaztcbmNhc2UgNDogcmV0dXJuIDIwOyBcbmJyZWFrO1xuY2FzZSA1OiByZXR1cm4gMTk7IFxuYnJlYWs7XG5jYXNlIDY6IHJldHVybiAxOTsgXG5icmVhaztcbmNhc2UgNzogcmV0dXJuIDIzOyBcbmJyZWFrO1xuY2FzZSA4OiByZXR1cm4gMjM7IFxuYnJlYWs7XG5jYXNlIDk6IHl5Xy55eXRleHQgPSB5eV8ueXl0ZXh0LnN1YnN0cigzLHl5Xy55eWxlbmctNSk7IHRoaXMuYmVnaW4oXCJJTklUSUFMXCIpOyByZXR1cm4gMTU7IFxuYnJlYWs7XG5jYXNlIDEwOiByZXR1cm4gMjI7IFxuYnJlYWs7XG5jYXNlIDExOiByZXR1cm4gMzQ7IFxuYnJlYWs7XG5jYXNlIDEyOiByZXR1cm4gMzM7IFxuYnJlYWs7XG5jYXNlIDEzOiByZXR1cm4gMzM7IFxuYnJlYWs7XG5jYXNlIDE0OiByZXR1cm4gMzY7IFxuYnJlYWs7XG5jYXNlIDE1OiAvKmlnbm9yZSB3aGl0ZXNwYWNlKi8gXG5icmVhaztcbmNhc2UgMTY6IHRoaXMuYmVnaW4oXCJJTklUSUFMXCIpOyByZXR1cm4gMTg7IFxuYnJlYWs7XG5jYXNlIDE3OiB0aGlzLmJlZ2luKFwiSU5JVElBTFwiKTsgcmV0dXJuIDE4OyBcbmJyZWFrO1xuY2FzZSAxODogeXlfLnl5dGV4dCA9IHl5Xy55eXRleHQuc3Vic3RyKDEseXlfLnl5bGVuZy0yKS5yZXBsYWNlKC9cXFxcXCIvZywnXCInKTsgcmV0dXJuIDI4OyBcbmJyZWFrO1xuY2FzZSAxOTogcmV0dXJuIDMwOyBcbmJyZWFrO1xuY2FzZSAyMDogcmV0dXJuIDMwOyBcbmJyZWFrO1xuY2FzZSAyMTogcmV0dXJuIDI5OyBcbmJyZWFrO1xuY2FzZSAyMjogcmV0dXJuIDMzOyBcbmJyZWFrO1xuY2FzZSAyMzogcmV0dXJuICdJTlZBTElEJzsgXG5icmVhaztcbmNhc2UgMjQ6IHJldHVybiA1OyBcbmJyZWFrO1xufVxufTtcbmxleGVyLnJ1bGVzID0gWy9eW15cXHgwMF0qPyg/PShcXHtcXHspKS8sL15bXlxceDAwXSsvLC9eXFx7XFx7Pi8sL15cXHtcXHsjLywvXlxce1xce1xcLy8sL15cXHtcXHtcXF4vLC9eXFx7XFx7XFxzKmVsc2VcXGIvLC9eXFx7XFx7XFx7LywvXlxce1xceyYvLC9eXFx7XFx7IVtcXHNcXFNdKj9cXH1cXH0vLC9eXFx7XFx7LywvXj0vLC9eXFwuKD89W30gXSkvLC9eXFwuXFwuLywvXlsvLl0vLC9eXFxzKy8sL15cXH1cXH1cXH0vLC9eXFx9XFx9LywvXlwiKFxcXFxbXCJdfFteXCJdKSpcIi8sL150cnVlKD89W31cXHNdKS8sL15mYWxzZSg/PVt9XFxzXSkvLC9eWzAtOV0rKD89W31cXHNdKS8sL15bYS16QS1aMC05XyQtXSsoPz1bPX1cXHMvLl0pLywvXi4vLC9eJC9dO1xubGV4ZXIuY29uZGl0aW9ucyA9IHtcIm11XCI6e1wicnVsZXNcIjpbMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0XSxcImluY2x1c2l2ZVwiOmZhbHNlfSxcIklOSVRJQUxcIjp7XCJydWxlc1wiOlswLDEsMjRdLFwiaW5jbHVzaXZlXCI6dHJ1ZX19O3JldHVybiBsZXhlcjt9KSgpXG5wYXJzZXIubGV4ZXIgPSBsZXhlcjtcbnJldHVybiBwYXJzZXI7XG59KSgpO1xuaWYgKHR5cGVvZiByZXF1aXJlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbmV4cG9ydHMucGFyc2VyID0gaGFuZGxlYmFycztcbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBoYW5kbGViYXJzLnBhcnNlLmFwcGx5KGhhbmRsZWJhcnMsIGFyZ3VtZW50cyk7IH1cbmV4cG9ydHMubWFpbiA9IGZ1bmN0aW9uIGNvbW1vbmpzTWFpbihhcmdzKSB7XG4gICAgaWYgKCFhcmdzWzFdKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzYWdlOiAnK2FyZ3NbMF0rJyBGSUxFJyk7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgc291cmNlID0gcmVxdWlyZSgnZnMnKS5yZWFkRmlsZVN5bmMocmVxdWlyZSgncGF0aCcpLmpvaW4ocHJvY2Vzcy5jd2QoKSwgYXJnc1sxXSksIFwidXRmOFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY3dkID0gcmVxdWlyZShcImZpbGVcIikucGF0aChyZXF1aXJlKFwiZmlsZVwiKS5jd2QoKSk7XG4gICAgICAgIHZhciBzb3VyY2UgPSBjd2Quam9pbihhcmdzWzFdKS5yZWFkKHtjaGFyc2V0OiBcInV0Zi04XCJ9KTtcbiAgICB9XG4gICAgcmV0dXJuIGV4cG9ydHMucGFyc2VyLnBhcnNlKHNvdXJjZSk7XG59XG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgcmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcbiAgZXhwb3J0cy5tYWluKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MuYXJndi5zbGljZSgxKSA6IHJlcXVpcmUoXCJzeXN0ZW1cIikuYXJncyk7XG59XG59O1xuO1xuLy8gbGliL2hhbmRsZWJhcnMvYmFzZS5qc1xudmFyIEhhbmRsZWJhcnMgPSB7fTtcblxuSGFuZGxlYmFycy5WRVJTSU9OID0gXCIxLjAuYmV0YS4yXCI7XG5cbkhhbmRsZWJhcnMuUGFyc2VyID0gaGFuZGxlYmFycztcblxuSGFuZGxlYmFycy5wYXJzZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICBIYW5kbGViYXJzLlBhcnNlci55eSA9IEhhbmRsZWJhcnMuQVNUO1xuICByZXR1cm4gSGFuZGxlYmFycy5QYXJzZXIucGFyc2Uoc3RyaW5nKTtcbn07XG5cbkhhbmRsZWJhcnMucHJpbnQgPSBmdW5jdGlvbihhc3QpIHtcbiAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLlByaW50VmlzaXRvcigpLmFjY2VwdChhc3QpO1xufTtcblxuSGFuZGxlYmFycy5oZWxwZXJzICA9IHt9O1xuSGFuZGxlYmFycy5wYXJ0aWFscyA9IHt9O1xuXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyID0gZnVuY3Rpb24obmFtZSwgZm4sIGludmVyc2UpIHtcbiAgaWYoaW52ZXJzZSkgeyBmbi5ub3QgPSBpbnZlcnNlOyB9XG4gIHRoaXMuaGVscGVyc1tuYW1lXSA9IGZuO1xufTtcblxuSGFuZGxlYmFycy5yZWdpc3RlclBhcnRpYWwgPSBmdW5jdGlvbihuYW1lLCBzdHIpIHtcbiAgdGhpcy5wYXJ0aWFsc1tuYW1lXSA9IHN0cjtcbn07XG5cbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbihhcmcpIHtcbiAgaWYoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZpbmQgcHJvcGVydHkgJ1wiICsgYXJnICsgXCInXCIpO1xuICB9XG59KTtcblxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignYmxvY2tIZWxwZXJNaXNzaW5nJywgZnVuY3Rpb24oY29udGV4dCwgZm4sIGludmVyc2UpIHtcbiAgaW52ZXJzZSA9IGludmVyc2UgfHwgZnVuY3Rpb24oKSB7fTtcblxuICB2YXIgcmV0ID0gXCJcIjtcbiAgdmFyIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY29udGV4dCk7XG5cbiAgaWYodHlwZSA9PT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiKSB7XG4gICAgY29udGV4dCA9IGNvbnRleHQoKTtcbiAgfVxuXG4gIGlmKGNvbnRleHQgPT09IHRydWUpIHtcbiAgICByZXR1cm4gZm4odGhpcyk7XG4gIH0gZWxzZSBpZihjb250ZXh0ID09PSBmYWxzZSB8fCBjb250ZXh0ID09IG51bGwpIHtcbiAgICByZXR1cm4gaW52ZXJzZSh0aGlzKTtcbiAgfSBlbHNlIGlmKHR5cGUgPT09IFwiW29iamVjdCBBcnJheV1cIikge1xuICAgIGlmKGNvbnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgZm9yKHZhciBpPTAsIGo9Y29udGV4dC5sZW5ndGg7IGk8ajsgaSsrKSB7XG4gICAgICAgIHJldCA9IHJldCArIGZuKGNvbnRleHRbaV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXQgPSBpbnZlcnNlKHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmbihjb250ZXh0KTtcbiAgfVxufSwgZnVuY3Rpb24oY29udGV4dCwgZm4pIHtcbiAgcmV0dXJuIGZuKGNvbnRleHQpO1xufSk7XG5cbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2VhY2gnLCBmdW5jdGlvbihjb250ZXh0LCBmbiwgaW52ZXJzZSkge1xuICB2YXIgcmV0ID0gXCJcIjtcblxuICBpZihjb250ZXh0ICYmIGNvbnRleHQubGVuZ3RoID4gMCkge1xuICAgIGZvcih2YXIgaT0wLCBqPWNvbnRleHQubGVuZ3RoOyBpPGo7IGkrKykge1xuICAgICAgcmV0ID0gcmV0ICsgZm4oY29udGV4dFtpXSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldCA9IGludmVyc2UodGhpcyk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn0pO1xuXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZicsIGZ1bmN0aW9uKGNvbnRleHQsIGZuLCBpbnZlcnNlKSB7XG4gIGlmKCFjb250ZXh0IHx8IGNvbnRleHQgPT0gW10pIHtcbiAgICByZXR1cm4gaW52ZXJzZSh0aGlzKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZm4odGhpcyk7XG4gIH1cbn0pO1xuXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd1bmxlc3MnLCBmdW5jdGlvbihjb250ZXh0LCBmbiwgaW52ZXJzZSkge1xuICByZXR1cm4gSGFuZGxlYmFycy5oZWxwZXJzWydpZiddLmNhbGwodGhpcywgY29udGV4dCwgaW52ZXJzZSwgZm4pO1xufSk7XG5cbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3dpdGgnLCBmdW5jdGlvbihjb250ZXh0LCBmbikge1xuICByZXR1cm4gZm4oY29udGV4dCk7XG59KTtcblxuSGFuZGxlYmFycy5sb2dnZXIgPSB7XG4gIERFQlVHOiAwLCBJTkZPOiAxLCBXQVJOOiAyLCBFUlJPUjogMywgbGV2ZWw6IDMsXG5cbiAgLy8gb3ZlcnJpZGUgaW4gdGhlIGhvc3QgZW52aXJvbm1lbnRcbiAgbG9nOiBmdW5jdGlvbihsZXZlbCwgc3RyKSB7fVxufTtcblxuSGFuZGxlYmFycy5sb2cgPSBmdW5jdGlvbihsZXZlbCwgc3RyKSB7IEhhbmRsZWJhcnMubG9nZ2VyLmxvZyhsZXZlbCwgc3RyKTsgfTtcbjtcbi8vIGxpYi9oYW5kbGViYXJzL2FzdC5qc1xuKGZ1bmN0aW9uKCkge1xuXG4gIEhhbmRsZWJhcnMuQVNUID0ge307XG5cbiAgSGFuZGxlYmFycy5BU1QuUHJvZ3JhbU5vZGUgPSBmdW5jdGlvbihzdGF0ZW1lbnRzLCBpbnZlcnNlKSB7XG4gICAgdGhpcy50eXBlID0gXCJwcm9ncmFtXCI7XG4gICAgdGhpcy5zdGF0ZW1lbnRzID0gc3RhdGVtZW50cztcbiAgICBpZihpbnZlcnNlKSB7IHRoaXMuaW52ZXJzZSA9IG5ldyBIYW5kbGViYXJzLkFTVC5Qcm9ncmFtTm9kZShpbnZlcnNlKTsgfVxuICB9O1xuXG4gIEhhbmRsZWJhcnMuQVNULk11c3RhY2hlTm9kZSA9IGZ1bmN0aW9uKHBhcmFtcywgaGFzaCwgdW5lc2NhcGVkKSB7XG4gICAgdGhpcy50eXBlID0gXCJtdXN0YWNoZVwiO1xuICAgIHRoaXMuaWQgPSBwYXJhbXNbMF07XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXMuc2xpY2UoMSk7XG4gICAgdGhpcy5oYXNoID0gaGFzaDtcbiAgICB0aGlzLmVzY2FwZWQgPSAhdW5lc2NhcGVkO1xuICB9O1xuXG4gIEhhbmRsZWJhcnMuQVNULlBhcnRpYWxOb2RlID0gZnVuY3Rpb24oaWQsIGNvbnRleHQpIHtcbiAgICB0aGlzLnR5cGUgICAgPSBcInBhcnRpYWxcIjtcblxuICAgIC8vIFRPRE86IGRpc2FsbG93IGNvbXBsZXggSURzXG5cbiAgICB0aGlzLmlkICAgICAgPSBpZDtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB9O1xuXG4gIHZhciB2ZXJpZnlNYXRjaCA9IGZ1bmN0aW9uKG9wZW4sIGNsb3NlKSB7XG4gICAgaWYob3Blbi5vcmlnaW5hbCAhPT0gY2xvc2Uub3JpZ2luYWwpIHtcbiAgICAgIHRocm93IG5ldyBIYW5kbGViYXJzLkV4Y2VwdGlvbihvcGVuLm9yaWdpbmFsICsgXCIgZG9lc24ndCBtYXRjaCBcIiArIGNsb3NlLm9yaWdpbmFsKTtcbiAgICB9XG4gIH07XG5cbiAgSGFuZGxlYmFycy5BU1QuQmxvY2tOb2RlID0gZnVuY3Rpb24obXVzdGFjaGUsIHByb2dyYW0sIGNsb3NlKSB7XG4gICAgdmVyaWZ5TWF0Y2gobXVzdGFjaGUuaWQsIGNsb3NlKTtcbiAgICB0aGlzLnR5cGUgPSBcImJsb2NrXCI7XG4gICAgdGhpcy5tdXN0YWNoZSA9IG11c3RhY2hlO1xuICAgIHRoaXMucHJvZ3JhbSAgPSBwcm9ncmFtO1xuICB9O1xuXG4gIEhhbmRsZWJhcnMuQVNULkludmVyc2VOb2RlID0gZnVuY3Rpb24obXVzdGFjaGUsIHByb2dyYW0sIGNsb3NlKSB7XG4gICAgdmVyaWZ5TWF0Y2gobXVzdGFjaGUuaWQsIGNsb3NlKTtcbiAgICB0aGlzLnR5cGUgPSBcImludmVyc2VcIjtcbiAgICB0aGlzLm11c3RhY2hlID0gbXVzdGFjaGU7XG4gICAgdGhpcy5wcm9ncmFtICA9IHByb2dyYW07XG4gIH07XG5cbiAgSGFuZGxlYmFycy5BU1QuQ29udGVudE5vZGUgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICB0aGlzLnR5cGUgPSBcImNvbnRlbnRcIjtcbiAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcbiAgfTtcblxuICBIYW5kbGViYXJzLkFTVC5IYXNoTm9kZSA9IGZ1bmN0aW9uKHBhaXJzKSB7XG4gICAgdGhpcy50eXBlID0gXCJoYXNoXCI7XG4gICAgdGhpcy5wYWlycyA9IHBhaXJzO1xuICB9O1xuXG4gIEhhbmRsZWJhcnMuQVNULklkTm9kZSA9IGZ1bmN0aW9uKHBhcnRzKSB7XG4gICAgdGhpcy50eXBlID0gXCJJRFwiO1xuICAgIHRoaXMub3JpZ2luYWwgPSBwYXJ0cy5qb2luKFwiLlwiKTtcblxuICAgIHZhciBkaWcgPSBbXSwgZGVwdGggPSAwO1xuXG4gICAgZm9yKHZhciBpPTAsbD1wYXJ0cy5sZW5ndGg7IGk8bDsgaSsrKSB7XG4gICAgICB2YXIgcGFydCA9IHBhcnRzW2ldO1xuXG4gICAgICBpZihwYXJ0ID09PSBcIi4uXCIpIHsgZGVwdGgrKzsgfVxuICAgICAgZWxzZSBpZihwYXJ0ID09PSBcIi5cIiB8fCBwYXJ0ID09PSBcInRoaXNcIikgeyBjb250aW51ZTsgfVxuICAgICAgZWxzZSB7IGRpZy5wdXNoKHBhcnQpOyB9XG4gICAgfVxuXG4gICAgdGhpcy5wYXJ0cyAgICA9IGRpZztcbiAgICB0aGlzLnN0cmluZyAgID0gZGlnLmpvaW4oJy4nKTtcbiAgICB0aGlzLmRlcHRoICAgID0gZGVwdGg7XG4gICAgdGhpcy5pc1NpbXBsZSA9IChkaWcubGVuZ3RoID09PSAxKSAmJiAoZGVwdGggPT09IDApO1xuICB9O1xuXG4gIEhhbmRsZWJhcnMuQVNULlN0cmluZ05vZGUgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICB0aGlzLnR5cGUgPSBcIlNUUklOR1wiO1xuICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xuICB9O1xuXG4gIEhhbmRsZWJhcnMuQVNULkludGVnZXJOb2RlID0gZnVuY3Rpb24oaW50ZWdlcikge1xuICAgIHRoaXMudHlwZSA9IFwiSU5URUdFUlwiO1xuICAgIHRoaXMuaW50ZWdlciA9IGludGVnZXI7XG4gIH07XG5cbiAgSGFuZGxlYmFycy5BU1QuQm9vbGVhbk5vZGUgPSBmdW5jdGlvbihib29sZWFuKSB7XG4gICAgdGhpcy50eXBlID0gXCJCT09MRUFOXCI7XG4gICAgdGhpcy5ib29sZWFuID0gYm9vbGVhbjtcbiAgfTtcblxuICBIYW5kbGViYXJzLkFTVC5Db21tZW50Tm9kZSA9IGZ1bmN0aW9uKGNvbW1lbnQpIHtcbiAgICB0aGlzLnR5cGUgPSBcImNvbW1lbnRcIjtcbiAgICB0aGlzLmNvbW1lbnQgPSBjb21tZW50O1xuICB9O1xuXG59KSgpOztcbi8vIGxpYi9oYW5kbGViYXJzL3Zpc2l0b3IuanNcblxuSGFuZGxlYmFycy5WaXNpdG9yID0gZnVuY3Rpb24oKSB7fTtcblxuSGFuZGxlYmFycy5WaXNpdG9yLnByb3RvdHlwZSA9IHtcbiAgYWNjZXB0OiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gdGhpc1tvYmplY3QudHlwZV0ob2JqZWN0KTtcbiAgfVxufTs7XG4vLyBsaWIvaGFuZGxlYmFycy91dGlscy5qc1xuSGFuZGxlYmFycy5FeGNlcHRpb24gPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG59O1xuXG4vLyBCdWlsZCBvdXQgb3VyIGJhc2ljIFNhZmVTdHJpbmcgdHlwZVxuSGFuZGxlYmFycy5TYWZlU3RyaW5nID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xufTtcbkhhbmRsZWJhcnMuU2FmZVN0cmluZy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuc3RyaW5nLnRvU3RyaW5nKCk7XG59O1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBlc2NhcGUgPSB7XG4gICAgXCI8XCI6IFwiJmx0O1wiLFxuICAgIFwiPlwiOiBcIiZndDtcIixcbiAgICAnXCInOiBcIiZxdW90O1wiLFxuICAgIFwiJ1wiOiBcIiYjeDI3O1wiLFxuICAgIFwiYFwiOiBcIiYjeDYwO1wiXG4gIH07XG5cbiAgdmFyIGJhZENoYXJzID0gLyYoPyFcXHcrOyl8Wzw+XCInYF0vZztcbiAgdmFyIHBvc3NpYmxlID0gL1smPD5cIidgXS87XG5cbiAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihjaHIpIHtcbiAgICByZXR1cm4gZXNjYXBlW2Nocl0gfHwgXCImYW1wO1wiXG4gIH07XG5cbiAgSGFuZGxlYmFycy5VdGlscyA9IHtcbiAgICBlc2NhcGVFeHByZXNzaW9uOiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgIC8vIGRvbid0IGVzY2FwZSBTYWZlU3RyaW5ncywgc2luY2UgdGhleSdyZSBhbHJlYWR5IHNhZmVcbiAgICAgIGlmIChzdHJpbmcgaW5zdGFuY2VvZiBIYW5kbGViYXJzLlNhZmVTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIGlmIChzdHJpbmcgPT0gbnVsbCB8fCBzdHJpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfVxuXG4gICAgICBpZighcG9zc2libGUudGVzdChzdHJpbmcpKSB7IHJldHVybiBzdHJpbmc7IH1cbiAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZShiYWRDaGFycywgZXNjYXBlQ2hhcik7XG4gICAgfSxcblxuICAgIGlzRW1wdHk6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09IFwiW29iamVjdCBBcnJheV1cIiAmJiB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9O1xufSkoKTs7XG4vLyBsaWIvaGFuZGxlYmFycy9jb21waWxlci5qc1xuSGFuZGxlYmFycy5Db21waWxlciA9IGZ1bmN0aW9uKCkge307XG5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlciA9IGZ1bmN0aW9uKCkge307XG5cbihmdW5jdGlvbihDb21waWxlciwgSmF2YVNjcmlwdENvbXBpbGVyKSB7XG4gIENvbXBpbGVyLk9QQ09ERV9NQVAgPSB7XG4gICAgYXBwZW5kQ29udGVudDogMSxcbiAgICBnZXRDb250ZXh0OiAyLFxuICAgIGxvb2t1cFdpdGhIZWxwZXJzOiAzLFxuICAgIGxvb2t1cDogNCxcbiAgICBhcHBlbmQ6IDUsXG4gICAgaW52b2tlTXVzdGFjaGU6IDYsXG4gICAgYXBwZW5kRXNjYXBlZDogNyxcbiAgICBwdXNoU3RyaW5nOiA4LFxuICAgIHRydXRoeU9yRmFsbGJhY2s6IDksXG4gICAgZnVuY3Rpb25PckZhbGxiYWNrOiAxMCxcbiAgICBpbnZva2VQcm9ncmFtOiAxMSxcbiAgICBpbnZva2VQYXJ0aWFsOiAxMixcbiAgICBwdXNoOiAxMyxcbiAgICBpbnZva2VJbnZlcnNlOiAxNCxcbiAgICBhc3NpZ25Ub0hhc2g6IDE1LFxuICAgIHB1c2hTdHJpbmdQYXJhbTogMTZcbiAgfTtcblxuICBDb21waWxlci5NVUxUSV9QQVJBTV9PUENPREVTID0ge1xuICAgIGFwcGVuZENvbnRlbnQ6IDEsXG4gICAgZ2V0Q29udGV4dDogMSxcbiAgICBsb29rdXBXaXRoSGVscGVyczogMSxcbiAgICBsb29rdXA6IDEsXG4gICAgaW52b2tlTXVzdGFjaGU6IDIsXG4gICAgcHVzaFN0cmluZzogMSxcbiAgICB0cnV0aHlPckZhbGxiYWNrOiAxLFxuICAgIGZ1bmN0aW9uT3JGYWxsYmFjazogMSxcbiAgICBpbnZva2VQcm9ncmFtOiAyLFxuICAgIGludm9rZVBhcnRpYWw6IDEsXG4gICAgcHVzaDogMSxcbiAgICBpbnZva2VJbnZlcnNlOiAxLFxuICAgIGFzc2lnblRvSGFzaDogMSxcbiAgICBwdXNoU3RyaW5nUGFyYW06IDFcbiAgfTtcblxuICBDb21waWxlci5ESVNBU1NFTUJMRV9NQVAgPSB7fTtcblxuICBmb3IodmFyIHByb3AgaW4gQ29tcGlsZXIuT1BDT0RFX01BUCkge1xuICAgIHZhciB2YWx1ZSA9IENvbXBpbGVyLk9QQ09ERV9NQVBbcHJvcF07XG4gICAgQ29tcGlsZXIuRElTQVNTRU1CTEVfTUFQW3ZhbHVlXSA9IHByb3A7XG4gIH1cblxuICBDb21waWxlci5tdWx0aVBhcmFtU2l6ZSA9IGZ1bmN0aW9uKGNvZGUpIHtcbiAgICByZXR1cm4gQ29tcGlsZXIuTVVMVElfUEFSQU1fT1BDT0RFU1tDb21waWxlci5ESVNBU1NFTUJMRV9NQVBbY29kZV1dO1xuICB9O1xuXG4gIENvbXBpbGVyLnByb3RvdHlwZSA9IHtcbiAgICBjb21waWxlcjogQ29tcGlsZXIsXG5cbiAgICBkaXNhc3NlbWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb3Bjb2RlcyA9IHRoaXMub3Bjb2Rlcywgb3Bjb2RlLCBuZXh0Q29kZTtcbiAgICAgIHZhciBvdXQgPSBbXSwgc3RyLCBuYW1lLCB2YWx1ZTtcblxuICAgICAgZm9yKHZhciBpPTAsIGw9b3Bjb2Rlcy5sZW5ndGg7IGk8bDsgaSsrKSB7XG4gICAgICAgIG9wY29kZSA9IG9wY29kZXNbaV07XG5cbiAgICAgICAgaWYob3Bjb2RlID09PSAnREVDTEFSRScpIHtcbiAgICAgICAgICBuYW1lID0gb3Bjb2Rlc1srK2ldO1xuICAgICAgICAgIHZhbHVlID0gb3Bjb2Rlc1srK2ldO1xuICAgICAgICAgIG91dC5wdXNoKFwiREVDTEFSRSBcIiArIG5hbWUgKyBcIiA9IFwiICsgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9IENvbXBpbGVyLkRJU0FTU0VNQkxFX01BUFtvcGNvZGVdO1xuXG4gICAgICAgICAgdmFyIGV4dHJhUGFyYW1zID0gQ29tcGlsZXIubXVsdGlQYXJhbVNpemUob3Bjb2RlKTtcbiAgICAgICAgICB2YXIgY29kZXMgPSBbXTtcblxuICAgICAgICAgIGZvcih2YXIgaj0wOyBqPGV4dHJhUGFyYW1zOyBqKyspIHtcbiAgICAgICAgICAgIG5leHRDb2RlID0gb3Bjb2Rlc1srK2ldO1xuXG4gICAgICAgICAgICBpZih0eXBlb2YgbmV4dENvZGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgbmV4dENvZGUgPSBcIlxcXCJcIiArIG5leHRDb2RlLnJlcGxhY2UoXCJcXG5cIiwgXCJcXFxcblwiKSArIFwiXFxcIlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb2Rlcy5wdXNoKG5leHRDb2RlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdHIgPSBzdHIgKyBcIiBcIiArIGNvZGVzLmpvaW4oXCIgXCIpO1xuXG4gICAgICAgICAgb3V0LnB1c2goc3RyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3V0LmpvaW4oXCJcXG5cIik7XG4gICAgfSxcblxuICAgIGd1aWQ6IDAsXG5cbiAgICBjb21waWxlOiBmdW5jdGlvbihwcm9ncmFtLCBvcHRpb25zKSB7XG4gICAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgICB0aGlzLmRlcHRocyA9IHtsaXN0OiBbXX07XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgcmV0dXJuIHRoaXMucHJvZ3JhbShwcm9ncmFtKTtcbiAgICB9LFxuXG4gICAgYWNjZXB0OiBmdW5jdGlvbihub2RlKSB7XG4gICAgICByZXR1cm4gdGhpc1tub2RlLnR5cGVdKG5vZGUpO1xuICAgIH0sXG5cbiAgICBwcm9ncmFtOiBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICB2YXIgc3RhdGVtZW50cyA9IHByb2dyYW0uc3RhdGVtZW50cywgc3RhdGVtZW50O1xuICAgICAgdGhpcy5vcGNvZGVzID0gW107XG5cbiAgICAgIGZvcih2YXIgaT0wLCBsPXN0YXRlbWVudHMubGVuZ3RoOyBpPGw7IGkrKykge1xuICAgICAgICBzdGF0ZW1lbnQgPSBzdGF0ZW1lbnRzW2ldO1xuICAgICAgICB0aGlzW3N0YXRlbWVudC50eXBlXShzdGF0ZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRlcHRocy5saXN0ID0gdGhpcy5kZXB0aHMubGlzdC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgLSBiO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBjb21waWxlUHJvZ3JhbTogZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyB0aGlzLmNvbXBpbGVyKCkuY29tcGlsZShwcm9ncmFtLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgdmFyIGd1aWQgPSB0aGlzLmd1aWQrKztcblxuICAgICAgdGhpcy51c2VQYXJ0aWFsID0gdGhpcy51c2VQYXJ0aWFsIHx8IHJlc3VsdC51c2VQYXJ0aWFsO1xuXG4gICAgICB0aGlzLmNoaWxkcmVuW2d1aWRdID0gcmVzdWx0O1xuXG4gICAgICBmb3IodmFyIGk9MCwgbD1yZXN1bHQuZGVwdGhzLmxpc3QubGVuZ3RoOyBpPGw7IGkrKykge1xuICAgICAgICBkZXB0aCA9IHJlc3VsdC5kZXB0aHMubGlzdFtpXTtcblxuICAgICAgICBpZihkZXB0aCA8IDIpIHsgY29udGludWU7IH1cbiAgICAgICAgZWxzZSB7IHRoaXMuYWRkRGVwdGgoZGVwdGggLSAxKTsgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ3VpZDtcbiAgICB9LFxuXG4gICAgYmxvY2s6IGZ1bmN0aW9uKGJsb2NrKSB7XG4gICAgICB2YXIgbXVzdGFjaGUgPSBibG9jay5tdXN0YWNoZTtcbiAgICAgIHZhciBkZXB0aCwgY2hpbGQsIGludmVyc2UsIGludmVyc2VHdWlkO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5zZXR1cFN0YWNrRm9yTXVzdGFjaGUobXVzdGFjaGUpO1xuXG4gICAgICB2YXIgcHJvZ3JhbUd1aWQgPSB0aGlzLmNvbXBpbGVQcm9ncmFtKGJsb2NrLnByb2dyYW0pO1xuXG4gICAgICBpZihibG9jay5wcm9ncmFtLmludmVyc2UpIHtcbiAgICAgICAgaW52ZXJzZUd1aWQgPSB0aGlzLmNvbXBpbGVQcm9ncmFtKGJsb2NrLnByb2dyYW0uaW52ZXJzZSk7XG4gICAgICAgIHRoaXMuZGVjbGFyZSgnaW52ZXJzZScsIGludmVyc2VHdWlkKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5vcGNvZGUoJ2ludm9rZVByb2dyYW0nLCBwcm9ncmFtR3VpZCwgcGFyYW1zLmxlbmd0aCk7XG4gICAgICB0aGlzLmRlY2xhcmUoJ2ludmVyc2UnLCBudWxsKTtcbiAgICAgIHRoaXMub3Bjb2RlKCdhcHBlbmQnKTtcbiAgICB9LFxuXG4gICAgaW52ZXJzZTogZnVuY3Rpb24oYmxvY2spIHtcbiAgICAgIHRoaXMuSUQoYmxvY2subXVzdGFjaGUuaWQpO1xuICAgICAgdmFyIHByb2dyYW1HdWlkID0gdGhpcy5jb21waWxlUHJvZ3JhbShibG9jay5wcm9ncmFtKTtcblxuICAgICAgdGhpcy5vcGNvZGUoJ2ludm9rZUludmVyc2UnLCBwcm9ncmFtR3VpZCk7XG4gICAgICB0aGlzLm9wY29kZSgnYXBwZW5kJyk7XG4gICAgfSxcblxuICAgIGhhc2g6IGZ1bmN0aW9uKGhhc2gpIHtcbiAgICAgIHZhciBwYWlycyA9IGhhc2gucGFpcnMsIHBhaXIsIHZhbDtcblxuICAgICAgdGhpcy5vcGNvZGUoJ3B1c2gnLCAne30nKTtcblxuICAgICAgZm9yKHZhciBpPTAsIGw9cGFpcnMubGVuZ3RoOyBpPGw7IGkrKykge1xuICAgICAgICBwYWlyID0gcGFpcnNbaV07XG4gICAgICAgIHZhbCAgPSBwYWlyWzFdO1xuXG4gICAgICAgIHRoaXMuYWNjZXB0KHZhbCk7XG4gICAgICAgIHRoaXMub3Bjb2RlKCdhc3NpZ25Ub0hhc2gnLCBwYWlyWzBdKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcGFydGlhbDogZnVuY3Rpb24ocGFydGlhbCkge1xuICAgICAgdmFyIGlkID0gcGFydGlhbC5pZDtcbiAgICAgIHRoaXMudXNlUGFydGlhbCA9IHRydWU7XG5cbiAgICAgIGlmKHBhcnRpYWwuY29udGV4dCkge1xuICAgICAgICB0aGlzLklEKHBhcnRpYWwuY29udGV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9wY29kZSgncHVzaCcsICdjb250ZXh0Jyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub3Bjb2RlKCdpbnZva2VQYXJ0aWFsJywgaWQub3JpZ2luYWwpO1xuICAgICAgdGhpcy5vcGNvZGUoJ2FwcGVuZCcpO1xuICAgIH0sXG5cbiAgICBjb250ZW50OiBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICB0aGlzLm9wY29kZSgnYXBwZW5kQ29udGVudCcsIGNvbnRlbnQuc3RyaW5nKTtcbiAgICB9LFxuXG4gICAgbXVzdGFjaGU6IGZ1bmN0aW9uKG11c3RhY2hlKSB7XG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5zZXR1cFN0YWNrRm9yTXVzdGFjaGUobXVzdGFjaGUpO1xuXG4gICAgICB0aGlzLm9wY29kZSgnaW52b2tlTXVzdGFjaGUnLCBwYXJhbXMubGVuZ3RoLCBtdXN0YWNoZS5pZC5vcmlnaW5hbCk7XG5cbiAgICAgIGlmKG11c3RhY2hlLmVzY2FwZWQpIHtcbiAgICAgICAgdGhpcy5vcGNvZGUoJ2FwcGVuZEVzY2FwZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub3Bjb2RlKCdhcHBlbmQnKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgSUQ6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB0aGlzLmFkZERlcHRoKGlkLmRlcHRoKTtcblxuICAgICAgdGhpcy5vcGNvZGUoJ2dldENvbnRleHQnLCBpZC5kZXB0aCk7XG5cbiAgICAgIHRoaXMub3Bjb2RlKCdsb29rdXBXaXRoSGVscGVycycsIGlkLnBhcnRzWzBdIHx8IG51bGwpO1xuXG4gICAgICBmb3IodmFyIGk9MSwgbD1pZC5wYXJ0cy5sZW5ndGg7IGk8bDsgaSsrKSB7XG4gICAgICAgIHRoaXMub3Bjb2RlKCdsb29rdXAnLCBpZC5wYXJ0c1tpXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIFNUUklORzogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICB0aGlzLm9wY29kZSgncHVzaFN0cmluZycsIHN0cmluZy5zdHJpbmcpO1xuICAgIH0sXG5cbiAgICBJTlRFR0VSOiBmdW5jdGlvbihpbnRlZ2VyKSB7XG4gICAgICB0aGlzLm9wY29kZSgncHVzaCcsIGludGVnZXIuaW50ZWdlcik7XG4gICAgfSxcblxuICAgIEJPT0xFQU46IGZ1bmN0aW9uKGJvb2xlYW4pIHtcbiAgICAgIHRoaXMub3Bjb2RlKCdwdXNoJywgYm9vbGVhbi5ib29sZWFuKTtcbiAgICB9LFxuXG4gICAgY29tbWVudDogZnVuY3Rpb24oKSB7fSxcblxuICAgIC8vIEhFTFBFUlNcbiAgICBwdXNoUGFyYW1zOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgIHZhciBpID0gcGFyYW1zLmxlbmd0aCwgcGFyYW07XG5cbiAgICAgIHdoaWxlKGktLSkge1xuICAgICAgICBwYXJhbSA9IHBhcmFtc1tpXTtcblxuICAgICAgICBpZih0aGlzLm9wdGlvbnMuc3RyaW5nUGFyYW1zKSB7XG4gICAgICAgICAgaWYocGFyYW0uZGVwdGgpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRGVwdGgocGFyYW0uZGVwdGgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMub3Bjb2RlKCdnZXRDb250ZXh0JywgcGFyYW0uZGVwdGggfHwgMCk7XG4gICAgICAgICAgdGhpcy5vcGNvZGUoJ3B1c2hTdHJpbmdQYXJhbScsIHBhcmFtLnN0cmluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpc1twYXJhbS50eXBlXShwYXJhbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgb3Bjb2RlOiBmdW5jdGlvbihuYW1lLCB2YWwxLCB2YWwyKSB7XG4gICAgICB0aGlzLm9wY29kZXMucHVzaChDb21waWxlci5PUENPREVfTUFQW25hbWVdKTtcbiAgICAgIGlmKHZhbDEgIT09IHVuZGVmaW5lZCkgeyB0aGlzLm9wY29kZXMucHVzaCh2YWwxKTsgfVxuICAgICAgaWYodmFsMiAhPT0gdW5kZWZpbmVkKSB7IHRoaXMub3Bjb2Rlcy5wdXNoKHZhbDIpOyB9XG4gICAgfSxcblxuICAgIGRlY2xhcmU6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB0aGlzLm9wY29kZXMucHVzaCgnREVDTEFSRScpO1xuICAgICAgdGhpcy5vcGNvZGVzLnB1c2gobmFtZSk7XG4gICAgICB0aGlzLm9wY29kZXMucHVzaCh2YWx1ZSk7XG4gICAgfSxcblxuICAgIGFkZERlcHRoOiBmdW5jdGlvbihkZXB0aCkge1xuICAgICAgaWYoZGVwdGggPT09IDApIHsgcmV0dXJuOyB9XG5cbiAgICAgIGlmKCF0aGlzLmRlcHRoc1tkZXB0aF0pIHtcbiAgICAgICAgdGhpcy5kZXB0aHNbZGVwdGhdID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kZXB0aHMubGlzdC5wdXNoKGRlcHRoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0dXBTdGFja0Zvck11c3RhY2hlOiBmdW5jdGlvbihtdXN0YWNoZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IG11c3RhY2hlLnBhcmFtcztcblxuICAgICAgdGhpcy5wdXNoUGFyYW1zKHBhcmFtcyk7XG5cbiAgICAgIGlmKG11c3RhY2hlLmhhc2gpIHtcbiAgICAgICAgdGhpcy5oYXNoKG11c3RhY2hlLmhhc2gpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vcGNvZGUoJ3B1c2gnLCAne30nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5JRChtdXN0YWNoZS5pZCk7XG5cbiAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuICB9O1xuXG4gIEphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUgPSB7XG4gICAgLy8gUFVCTElDIEFQSTogWW91IGNhbiBvdmVycmlkZSB0aGVzZSBtZXRob2RzIGluIGEgc3ViY2xhc3MgdG8gcHJvdmlkZVxuICAgIC8vIGFsdGVybmF0aXZlIGNvbXBpbGVkIGZvcm1zIGZvciBuYW1lIGxvb2t1cCBhbmQgYnVmZmVyaW5nIHNlbWFudGljc1xuICAgIG5hbWVMb29rdXA6IGZ1bmN0aW9uKHBhcmVudCwgbmFtZSwgdHlwZSkge1xuICAgICAgaWYoSmF2YVNjcmlwdENvbXBpbGVyLlJFU0VSVkVEX1dPUkRTW25hbWVdIHx8IG5hbWUuaW5kZXhPZignLScpICE9PSAtMSB8fCAhaXNOYU4obmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudCArIFwiWydcIiArIG5hbWUgKyBcIiddXCI7XG4gICAgICB9IGVsc2UgaWYgKC9eWzAtOV0rJC8udGVzdChuYW1lKSkge1xuICAgICAgICByZXR1cm4gcGFyZW50ICsgXCJbXCIgKyBuYW1lICsgXCJdXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFyZW50ICsgXCIuXCIgKyBuYW1lO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhcHBlbmRUb0J1ZmZlcjogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICByZXR1cm4gXCJidWZmZXIgPSBidWZmZXIgKyBcIiArIHN0cmluZyArIFwiO1wiO1xuICAgIH0sXG5cbiAgICBpbml0aWFsaXplQnVmZmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnF1b3RlZFN0cmluZyhcIlwiKTtcbiAgICB9LFxuICAgIC8vIEVORCBQVUJMSUMgQVBJXG5cbiAgICBjb21waWxlOiBmdW5jdGlvbihlbnZpcm9ubWVudCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5lbnZpcm9ubWVudCA9IGVudmlyb25tZW50O1xuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgdGhpcy5wcmVhbWJsZSgpO1xuXG4gICAgICB0aGlzLnN0YWNrU2xvdCA9IDA7XG4gICAgICB0aGlzLnN0YWNrVmFycyA9IFtdO1xuICAgICAgdGhpcy5yZWdpc3RlcnMgPSB7bGlzdDogW119O1xuXG4gICAgICB0aGlzLmNvbXBpbGVDaGlsZHJlbihlbnZpcm9ubWVudCwgb3B0aW9ucyk7XG5cbiAgICAgIEhhbmRsZWJhcnMubG9nKEhhbmRsZWJhcnMubG9nZ2VyLkRFQlVHLCBlbnZpcm9ubWVudC5kaXNhc3NlbWJsZSgpICsgXCJcXG5cXG5cIik7XG5cbiAgICAgIHZhciBvcGNvZGVzID0gZW52aXJvbm1lbnQub3Bjb2Rlcywgb3Bjb2RlLCBuYW1lLCBkZWNsYXJlTmFtZSwgZGVjbGFyZVZhbDtcblxuICAgICAgdGhpcy5pID0gMDtcblxuICAgICAgZm9yKGw9b3Bjb2Rlcy5sZW5ndGg7IHRoaXMuaTxsOyB0aGlzLmkrKykge1xuICAgICAgICBvcGNvZGUgPSB0aGlzLm5leHRPcGNvZGUoMCk7XG5cbiAgICAgICAgaWYob3Bjb2RlWzBdID09PSAnREVDTEFSRScpIHtcbiAgICAgICAgICB0aGlzLmkgPSB0aGlzLmkgKyAyO1xuICAgICAgICAgIHRoaXNbb3Bjb2RlWzFdXSA9IG9wY29kZVsyXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmkgPSB0aGlzLmkgKyBvcGNvZGVbMV0ubGVuZ3RoO1xuICAgICAgICAgIHRoaXNbb3Bjb2RlWzBdXS5hcHBseSh0aGlzLCBvcGNvZGVbMV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUZ1bmN0aW9uKCk7XG4gICAgfSxcblxuICAgIG5leHRPcGNvZGU6IGZ1bmN0aW9uKG4pIHtcbiAgICAgIHZhciBvcGNvZGVzID0gdGhpcy5lbnZpcm9ubWVudC5vcGNvZGVzLCBvcGNvZGUgPSBvcGNvZGVzW3RoaXMuaSArIG5dLCBuYW1lLCB2YWw7XG4gICAgICB2YXIgZXh0cmFQYXJhbXMsIGNvZGVzO1xuXG4gICAgICBpZihvcGNvZGUgPT09ICdERUNMQVJFJykge1xuICAgICAgICBuYW1lID0gb3Bjb2Rlc1t0aGlzLmkgKyAxXTtcbiAgICAgICAgdmFsICA9IG9wY29kZXNbdGhpcy5pICsgMl07XG4gICAgICAgIHJldHVybiBbJ0RFQ0xBUkUnLCBuYW1lLCB2YWxdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmFtZSA9IENvbXBpbGVyLkRJU0FTU0VNQkxFX01BUFtvcGNvZGVdO1xuXG4gICAgICAgIGV4dHJhUGFyYW1zID0gQ29tcGlsZXIubXVsdGlQYXJhbVNpemUob3Bjb2RlKTtcbiAgICAgICAgY29kZXMgPSBbXTtcblxuICAgICAgICBmb3IodmFyIGo9MDsgajxleHRyYVBhcmFtczsgaisrKSB7XG4gICAgICAgICAgY29kZXMucHVzaChvcGNvZGVzW3RoaXMuaSArIGogKyAxICsgbl0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtuYW1lLCBjb2Rlc107XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVhdDogZnVuY3Rpb24ob3Bjb2RlKSB7XG4gICAgICB0aGlzLmkgPSB0aGlzLmkgKyBvcGNvZGUubGVuZ3RoO1xuICAgIH0sXG5cbiAgICBwcmVhbWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb3V0ID0gW107XG4gICAgICBvdXQucHVzaChcInZhciBidWZmZXIgPSBcIiArIHRoaXMuaW5pdGlhbGl6ZUJ1ZmZlcigpICsgXCIsIGN1cnJlbnRDb250ZXh0ID0gY29udGV4dFwiKTtcblxuICAgICAgdmFyIGNvcGllcyA9IFwiaGVscGVycyA9IGhlbHBlcnMgfHwgSGFuZGxlYmFycy5oZWxwZXJzO1wiO1xuICAgICAgaWYodGhpcy5lbnZpcm9ubWVudC51c2VQYXJ0aWFsKSB7IGNvcGllcyA9IGNvcGllcyArIFwiIHBhcnRpYWxzID0gcGFydGlhbHMgfHwgSGFuZGxlYmFycy5wYXJ0aWFscztcIjsgfVxuICAgICAgb3V0LnB1c2goY29waWVzKTtcblxuICAgICAgLy8gdHJhY2sgdGhlIGxhc3QgY29udGV4dCBwdXNoZWQgaW50byBwbGFjZSB0byBhbGxvdyBza2lwcGluZyB0aGVcbiAgICAgIC8vIGdldENvbnRleHQgb3Bjb2RlIHdoZW4gaXQgd291bGQgYmUgYSBub29wXG4gICAgICB0aGlzLmxhc3RDb250ZXh0ID0gMDtcbiAgICAgIHRoaXMuc291cmNlID0gb3V0O1xuICAgIH0sXG5cbiAgICBjcmVhdGVGdW5jdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0ge1xuICAgICAgICBlc2NhcGVFeHByZXNzaW9uOiBIYW5kbGViYXJzLlV0aWxzLmVzY2FwZUV4cHJlc3Npb24sXG4gICAgICAgIGludm9rZVBhcnRpYWw6IEhhbmRsZWJhcnMuVk0uaW52b2tlUGFydGlhbCxcbiAgICAgICAgcHJvZ3JhbXM6IFtdLFxuICAgICAgICBwcm9ncmFtOiBmdW5jdGlvbihpLCBoZWxwZXJzLCBwYXJ0aWFscywgZGF0YSkge1xuICAgICAgICAgIHZhciBwcm9ncmFtV3JhcHBlciA9IHRoaXMucHJvZ3JhbXNbaV07XG4gICAgICAgICAgaWYoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIEhhbmRsZWJhcnMuVk0ucHJvZ3JhbSh0aGlzLmNoaWxkcmVuW2ldLCBoZWxwZXJzLCBwYXJ0aWFscywgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmKHByb2dyYW1XcmFwcGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvZ3JhbVdyYXBwZXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2dyYW1XcmFwcGVyID0gdGhpcy5wcm9ncmFtc1tpXSA9IEhhbmRsZWJhcnMuVk0ucHJvZ3JhbSh0aGlzLmNoaWxkcmVuW2ldLCBoZWxwZXJzLCBwYXJ0aWFscyk7XG4gICAgICAgICAgICByZXR1cm4gcHJvZ3JhbVdyYXBwZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwcm9ncmFtV2l0aERlcHRoOiBIYW5kbGViYXJzLlZNLnByb2dyYW1XaXRoRGVwdGgsXG4gICAgICAgIG5vb3A6IEhhbmRsZWJhcnMuVk0ubm9vcFxuICAgICAgfTtcbiAgICAgIHZhciBsb2NhbHMgPSB0aGlzLnN0YWNrVmFycy5jb25jYXQodGhpcy5yZWdpc3RlcnMubGlzdCk7XG5cbiAgICAgIGlmKGxvY2Fscy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuc291cmNlWzBdID0gdGhpcy5zb3VyY2VbMF0gKyBcIiwgXCIgKyBsb2NhbHMuam9pbihcIiwgXCIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNvdXJjZVswXSA9IHRoaXMuc291cmNlWzBdICsgXCI7XCI7XG5cbiAgICAgIHRoaXMuc291cmNlLnB1c2goXCJyZXR1cm4gYnVmZmVyO1wiKTtcblxuICAgICAgdmFyIHBhcmFtcyA9IFtcIkhhbmRsZWJhcnNcIiwgXCJjb250ZXh0XCIsIFwiaGVscGVyc1wiLCBcInBhcnRpYWxzXCJdO1xuXG4gICAgICBpZih0aGlzLm9wdGlvbnMuZGF0YSkgeyBwYXJhbXMucHVzaChcImRhdGFcIik7IH1cblxuICAgICAgZm9yKHZhciBpPTAsIGw9dGhpcy5lbnZpcm9ubWVudC5kZXB0aHMubGlzdC5sZW5ndGg7IGk8bDsgaSsrKSB7XG4gICAgICAgIHBhcmFtcy5wdXNoKFwiZGVwdGhcIiArIHRoaXMuZW52aXJvbm1lbnQuZGVwdGhzLmxpc3RbaV0pO1xuICAgICAgfVxuXG4gICAgICBpZihwYXJhbXMubGVuZ3RoID09PSA0ICYmICF0aGlzLmVudmlyb25tZW50LnVzZVBhcnRpYWwpIHsgcGFyYW1zLnBvcCgpOyB9XG5cbiAgICAgIHBhcmFtcy5wdXNoKHRoaXMuc291cmNlLmpvaW4oXCJcXG5cIikpO1xuXG4gICAgICB2YXIgZm4gPSBGdW5jdGlvbi5hcHBseSh0aGlzLCBwYXJhbXMpO1xuICAgICAgZm4uZGlzcGxheU5hbWUgPSBcIkhhbmRsZWJhcnMuanNcIjtcblxuICAgICAgSGFuZGxlYmFycy5sb2coSGFuZGxlYmFycy5sb2dnZXIuREVCVUcsIGZuLnRvU3RyaW5nKCkgKyBcIlxcblxcblwiKTtcblxuICAgICAgY29udGFpbmVyLnJlbmRlciA9IGZuO1xuXG4gICAgICBjb250YWluZXIuY2hpbGRyZW4gPSB0aGlzLmVudmlyb25tZW50LmNoaWxkcmVuO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucywgJGRlcHRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgdmFyIGFyZ3MgPSBbSGFuZGxlYmFycywgY29udGV4dCwgb3B0aW9ucy5oZWxwZXJzLCBvcHRpb25zLnBhcnRpYWxzLCBvcHRpb25zLmRhdGFdO1xuICAgICAgICAgIHZhciBkZXB0aCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgICAgICAgYXJncyA9IGFyZ3MuY29uY2F0KGRlcHRoKTtcbiAgICAgICAgICByZXR1cm4gY29udGFpbmVyLnJlbmRlci5hcHBseShjb250YWluZXIsIGFyZ3MpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG5cbiAgICBhcHBlbmRDb250ZW50OiBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICB0aGlzLnNvdXJjZS5wdXNoKHRoaXMuYXBwZW5kVG9CdWZmZXIodGhpcy5xdW90ZWRTdHJpbmcoY29udGVudCkpKTtcbiAgICB9LFxuXG4gICAgYXBwZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsb2NhbCA9IHRoaXMucG9wU3RhY2soKTtcbiAgICAgIHRoaXMuc291cmNlLnB1c2goXCJpZihcIiArIGxvY2FsICsgXCIgfHwgXCIgKyBsb2NhbCArIFwiID09PSAwKSB7IFwiICsgdGhpcy5hcHBlbmRUb0J1ZmZlcihsb2NhbCkgKyBcIiB9XCIpO1xuICAgIH0sXG5cbiAgICBhcHBlbmRFc2NhcGVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvcGNvZGUgPSB0aGlzLm5leHRPcGNvZGUoMSksIGV4dHJhID0gXCJcIjtcblxuICAgICAgaWYob3Bjb2RlWzBdID09PSAnYXBwZW5kQ29udGVudCcpIHtcbiAgICAgICAgZXh0cmEgPSBcIiArIFwiICsgdGhpcy5xdW90ZWRTdHJpbmcob3Bjb2RlWzFdWzBdKTtcbiAgICAgICAgdGhpcy5lYXQob3Bjb2RlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zb3VyY2UucHVzaCh0aGlzLmFwcGVuZFRvQnVmZmVyKFwidGhpcy5lc2NhcGVFeHByZXNzaW9uKFwiICsgdGhpcy5wb3BTdGFjaygpICsgXCIpXCIgKyBleHRyYSkpO1xuICAgIH0sXG5cbiAgICBnZXRDb250ZXh0OiBmdW5jdGlvbihkZXB0aCkge1xuICAgICAgaWYodGhpcy5sYXN0Q29udGV4dCAhPT0gZGVwdGgpIHtcbiAgICAgICAgdGhpcy5sYXN0Q29udGV4dCA9IGRlcHRoO1xuXG4gICAgICAgIGlmKGRlcHRoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5zb3VyY2UucHVzaChcImN1cnJlbnRDb250ZXh0ID0gY29udGV4dDtcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zb3VyY2UucHVzaChcImN1cnJlbnRDb250ZXh0ID0gZGVwdGhcIiArIGRlcHRoICsgXCI7XCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGxvb2t1cFdpdGhIZWxwZXJzOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZihuYW1lKSB7XG4gICAgICAgIHZhciB0b3BTdGFjayA9IHRoaXMubmV4dFN0YWNrKCk7XG5cbiAgICAgICAgdmFyIHRvUHVzaCA9ICBcImlmKCdcIiArIG5hbWUgKyBcIicgaW4gaGVscGVycykgeyBcIiArIHRvcFN0YWNrICtcbiAgICAgICAgICAgICAgICAgICAgICBcIiA9IFwiICsgdGhpcy5uYW1lTG9va3VwKCdoZWxwZXJzJywgbmFtZSwgJ2hlbHBlcicpICtcbiAgICAgICAgICAgICAgICAgICAgICBcIjsgfSBlbHNlIHsgXCIgKyB0b3BTdGFjayArIFwiID0gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZUxvb2t1cCgnY3VycmVudENvbnRleHQnLCBuYW1lLCAnY29udGV4dCcpICtcbiAgICAgICAgICAgICAgICAgICAgICBcIjsgfVwiO1xuXG4gICAgICAgIHRoaXMuc291cmNlLnB1c2godG9QdXNoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHVzaFN0YWNrKFwiY3VycmVudENvbnRleHRcIik7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGxvb2t1cDogZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIHRvcFN0YWNrID0gdGhpcy50b3BTdGFjaygpO1xuICAgICAgdGhpcy5zb3VyY2UucHVzaCh0b3BTdGFjayArIFwiID0gXCIgKyB0aGlzLm5hbWVMb29rdXAodG9wU3RhY2ssIG5hbWUsICdjb250ZXh0JykgKyBcIjtcIik7XG4gICAgfSxcblxuICAgIHB1c2hTdHJpbmdQYXJhbTogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICB0aGlzLnB1c2hTdGFjayhcImN1cnJlbnRDb250ZXh0XCIpO1xuICAgICAgdGhpcy5wdXNoU3RyaW5nKHN0cmluZyk7XG4gICAgfSxcblxuICAgIHB1c2hTdHJpbmc6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgdGhpcy5wdXNoU3RhY2sodGhpcy5xdW90ZWRTdHJpbmcoc3RyaW5nKSk7XG4gICAgfSxcblxuICAgIHB1c2g6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHRoaXMucHVzaFN0YWNrKG5hbWUpO1xuICAgIH0sXG5cbiAgICBpbnZva2VNdXN0YWNoZTogZnVuY3Rpb24ocGFyYW1TaXplLCBvcmlnaW5hbCkge1xuICAgICAgdGhpcy5wb3B1bGF0ZVBhcmFtcyhwYXJhbVNpemUsIHRoaXMucXVvdGVkU3RyaW5nKG9yaWdpbmFsKSwgXCJ7fVwiLCBudWxsLCBmdW5jdGlvbihuZXh0U3RhY2ssIGhlbHBlck1pc3NpbmdTdHJpbmcsIGlkKSB7XG4gICAgICAgIHRoaXMuc291cmNlLnB1c2goXCJlbHNlIGlmKFwiICsgaWQgKyBcIj09PSB1bmRlZmluZWQpIHsgXCIgKyBuZXh0U3RhY2sgKyBcIiA9IGhlbHBlcnMuaGVscGVyTWlzc2luZy5jYWxsKFwiICsgaGVscGVyTWlzc2luZ1N0cmluZyArIFwiKTsgfVwiKTtcbiAgICAgICAgdGhpcy5zb3VyY2UucHVzaChcImVsc2UgeyBcIiArIG5leHRTdGFjayArIFwiID0gXCIgKyBpZCArIFwiOyB9XCIpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGludm9rZVByb2dyYW06IGZ1bmN0aW9uKGd1aWQsIHBhcmFtU2l6ZSkge1xuICAgICAgdmFyIGludmVyc2UgPSB0aGlzLnByb2dyYW1FeHByZXNzaW9uKHRoaXMuaW52ZXJzZSk7XG4gICAgICB2YXIgbWFpblByb2dyYW0gPSB0aGlzLnByb2dyYW1FeHByZXNzaW9uKGd1aWQpO1xuXG4gICAgICB0aGlzLnBvcHVsYXRlUGFyYW1zKHBhcmFtU2l6ZSwgbnVsbCwgbWFpblByb2dyYW0sIGludmVyc2UsIGZ1bmN0aW9uKG5leHRTdGFjaywgaGVscGVyTWlzc2luZ1N0cmluZywgaWQpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UucHVzaChcImVsc2UgeyBcIiArIG5leHRTdGFjayArIFwiID0gaGVscGVycy5ibG9ja0hlbHBlck1pc3NpbmcuY2FsbChcIiArIGhlbHBlck1pc3NpbmdTdHJpbmcgKyBcIik7IH1cIik7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcG9wdWxhdGVQYXJhbXM6IGZ1bmN0aW9uKHBhcmFtU2l6ZSwgaGVscGVySWQsIHByb2dyYW0sIGludmVyc2UsIGZuKSB7XG4gICAgICB2YXIgaWQgPSB0aGlzLnBvcFN0YWNrKCksIG5leHRTdGFjaztcbiAgICAgIHZhciBwYXJhbXMgPSBbXSwgcGFyYW0sIHN0cmluZ1BhcmFtO1xuXG4gICAgICB2YXIgaGFzaCA9IHRoaXMucG9wU3RhY2soKTtcblxuICAgICAgdGhpcy5yZWdpc3RlcigndG1wMScsIHByb2dyYW0pO1xuICAgICAgdGhpcy5zb3VyY2UucHVzaCgndG1wMS5oYXNoID0gJyArIGhhc2ggKyAnOycpO1xuXG4gICAgICBpZih0aGlzLm9wdGlvbnMuc3RyaW5nUGFyYW1zKSB7XG4gICAgICAgIHRoaXMuc291cmNlLnB1c2goJ3RtcDEuY29udGV4dHMgPSBbXTsnKTtcbiAgICAgIH1cblxuICAgICAgZm9yKHZhciBpPTA7IGk8cGFyYW1TaXplOyBpKyspIHtcbiAgICAgICAgcGFyYW0gPSB0aGlzLnBvcFN0YWNrKCk7XG4gICAgICAgIHBhcmFtcy5wdXNoKHBhcmFtKTtcblxuICAgICAgICBpZih0aGlzLm9wdGlvbnMuc3RyaW5nUGFyYW1zKSB7XG4gICAgICAgICAgdGhpcy5zb3VyY2UucHVzaCgndG1wMS5jb250ZXh0cy5wdXNoKCcgKyB0aGlzLnBvcFN0YWNrKCkgKyAnKTsnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZihpbnZlcnNlKSB7XG4gICAgICAgIHRoaXMuc291cmNlLnB1c2goJ3RtcDEuZm4gPSB0bXAxOycpO1xuICAgICAgICB0aGlzLnNvdXJjZS5wdXNoKCd0bXAxLmludmVyc2UgPSAnICsgaW52ZXJzZSArICc7Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmKHRoaXMub3B0aW9ucy5kYXRhKSB7XG4gICAgICAgIHRoaXMuc291cmNlLnB1c2goJ3RtcDEuZGF0YSA9IGRhdGE7Jyk7XG4gICAgICB9XG5cbiAgICAgIHBhcmFtcy5wdXNoKCd0bXAxJyk7XG5cbiAgICAgIC8vIFRPRE86IFRoaXMgaXMgbGVnYWN5IGJlaGF2aW9yLiBEZXByZWNhdGUgYW5kIHJlbW92ZS5cbiAgICAgIGlmKGludmVyc2UpIHtcbiAgICAgICAgcGFyYW1zLnB1c2goaW52ZXJzZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucG9wdWxhdGVDYWxsKHBhcmFtcywgaWQsIGhlbHBlcklkIHx8IGlkLCBmbik7XG4gICAgfSxcblxuICAgIHBvcHVsYXRlQ2FsbDogZnVuY3Rpb24ocGFyYW1zLCBpZCwgaGVscGVySWQsIGZuKSB7XG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSBbXCJjb250ZXh0XCJdLmNvbmNhdChwYXJhbXMpLmpvaW4oXCIsIFwiKTtcbiAgICAgIHZhciBoZWxwZXJNaXNzaW5nU3RyaW5nID0gW1wiY29udGV4dFwiXS5jb25jYXQoaGVscGVySWQpLmNvbmNhdChwYXJhbXMpLmpvaW4oXCIsIFwiKTtcblxuICAgICAgbmV4dFN0YWNrID0gdGhpcy5uZXh0U3RhY2soKTtcblxuICAgICAgdGhpcy5zb3VyY2UucHVzaChcImlmKHR5cGVvZiBcIiArIGlkICsgXCIgPT09ICdmdW5jdGlvbicpIHsgXCIgKyBuZXh0U3RhY2sgKyBcIiA9IFwiICsgaWQgKyBcIi5jYWxsKFwiICsgcGFyYW1TdHJpbmcgKyBcIik7IH1cIik7XG4gICAgICBmbi5jYWxsKHRoaXMsIG5leHRTdGFjaywgaGVscGVyTWlzc2luZ1N0cmluZywgaWQpO1xuICAgIH0sXG5cbiAgICBpbnZva2VJbnZlcnNlOiBmdW5jdGlvbihndWlkKSB7XG4gICAgICB2YXIgcHJvZ3JhbSA9IHRoaXMucHJvZ3JhbUV4cHJlc3Npb24oZ3VpZCk7XG5cbiAgICAgIHZhciBibG9ja01pc3NpbmdQYXJhbXMgPSBbXCJjb250ZXh0XCIsIHRoaXMudG9wU3RhY2soKSwgXCJ0aGlzLm5vb3BcIiwgcHJvZ3JhbV07XG4gICAgICB0aGlzLnB1c2hTdGFjayhcImhlbHBlcnMuYmxvY2tIZWxwZXJNaXNzaW5nLmNhbGwoXCIgKyBibG9ja01pc3NpbmdQYXJhbXMuam9pbihcIiwgXCIpICsgXCIpXCIpO1xuICAgIH0sXG5cbiAgICBpbnZva2VQYXJ0aWFsOiBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICB0aGlzLnB1c2hTdGFjayhcInRoaXMuaW52b2tlUGFydGlhbChcIiArIHRoaXMubmFtZUxvb2t1cCgncGFydGlhbHMnLCBjb250ZXh0LCAncGFydGlhbCcpICsgXCIsICdcIiArIGNvbnRleHQgKyBcIicsIFwiICsgdGhpcy5wb3BTdGFjaygpICsgXCIsIGhlbHBlcnMsIHBhcnRpYWxzKTtcIik7XG4gICAgfSxcblxuICAgIGFzc2lnblRvSGFzaDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICB2YXIgdmFsdWUgPSB0aGlzLnBvcFN0YWNrKCk7XG4gICAgICB2YXIgaGFzaCA9IHRoaXMudG9wU3RhY2soKTtcblxuICAgICAgdGhpcy5zb3VyY2UucHVzaChoYXNoICsgXCJbJ1wiICsga2V5ICsgXCInXSA9IFwiICsgdmFsdWUgKyBcIjtcIik7XG4gICAgfSxcblxuICAgIC8vIEhFTFBFUlNcblxuICAgIGNvbXBpbGVyOiBKYXZhU2NyaXB0Q29tcGlsZXIsXG5cbiAgICBjb21waWxlQ2hpbGRyZW46IGZ1bmN0aW9uKGVudmlyb25tZW50LCBvcHRpb25zKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBlbnZpcm9ubWVudC5jaGlsZHJlbiwgY2hpbGQsIGNvbXBpbGVyO1xuICAgICAgdmFyIGNvbXBpbGVkID0gW107XG5cbiAgICAgIGZvcih2YXIgaT0wLCBsPWNoaWxkcmVuLmxlbmd0aDsgaTxsOyBpKyspIHtcbiAgICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgY29tcGlsZXIgPSBuZXcgdGhpcy5jb21waWxlcigpO1xuXG4gICAgICAgIGNvbXBpbGVkW2ldID0gY29tcGlsZXIuY29tcGlsZShjaGlsZCwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIGVudmlyb25tZW50LnJhd0NoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICBlbnZpcm9ubWVudC5jaGlsZHJlbiA9IGNvbXBpbGVkO1xuICAgIH0sXG5cbiAgICBwcm9ncmFtRXhwcmVzc2lvbjogZnVuY3Rpb24oZ3VpZCkge1xuICAgICAgaWYoZ3VpZCA9PSBudWxsKSB7IHJldHVybiBcInRoaXMubm9vcFwiOyB9XG5cbiAgICAgIHZhciBwcm9ncmFtUGFyYW1zID0gW2d1aWQsIFwiaGVscGVyc1wiLCBcInBhcnRpYWxzXCJdO1xuXG4gICAgICB2YXIgZGVwdGhzID0gdGhpcy5lbnZpcm9ubWVudC5yYXdDaGlsZHJlbltndWlkXS5kZXB0aHMubGlzdDtcblxuICAgICAgaWYodGhpcy5vcHRpb25zLmRhdGEpIHsgcHJvZ3JhbVBhcmFtcy5wdXNoKFwiZGF0YVwiKTsgfVxuXG4gICAgICBmb3IodmFyIGk9MCwgbCA9IGRlcHRocy5sZW5ndGg7IGk8bDsgaSsrKSB7XG4gICAgICAgIGRlcHRoID0gZGVwdGhzW2ldO1xuXG4gICAgICAgIGlmKGRlcHRoID09PSAxKSB7IHByb2dyYW1QYXJhbXMucHVzaChcImNvbnRleHRcIik7IH1cbiAgICAgICAgZWxzZSB7IHByb2dyYW1QYXJhbXMucHVzaChcImRlcHRoXCIgKyAoZGVwdGggLSAxKSk7IH1cbiAgICAgIH1cblxuICAgICAgaWYoIXRoaXMuZW52aXJvbm1lbnQudXNlUGFydGlhbCkge1xuICAgICAgICBpZihwcm9ncmFtUGFyYW1zWzNdKSB7XG4gICAgICAgICAgcHJvZ3JhbVBhcmFtc1syXSA9IFwibnVsbFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2dyYW1QYXJhbXMucG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYoZGVwdGhzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gXCJ0aGlzLnByb2dyYW0oXCIgKyBwcm9ncmFtUGFyYW1zLmpvaW4oXCIsIFwiKSArIFwiKVwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvZ3JhbVBhcmFtc1swXSA9IFwidGhpcy5jaGlsZHJlbltcIiArIGd1aWQgKyBcIl1cIjtcbiAgICAgICAgcmV0dXJuIFwidGhpcy5wcm9ncmFtV2l0aERlcHRoKFwiICsgcHJvZ3JhbVBhcmFtcy5qb2luKFwiLCBcIikgKyBcIilcIjtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKG5hbWUsIHZhbCkge1xuICAgICAgdGhpcy51c2VSZWdpc3RlcihuYW1lKTtcbiAgICAgIHRoaXMuc291cmNlLnB1c2gobmFtZSArIFwiID0gXCIgKyB2YWwgKyBcIjtcIik7XG4gICAgfSxcblxuICAgIHVzZVJlZ2lzdGVyOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZighdGhpcy5yZWdpc3RlcnNbbmFtZV0pIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlcnNbbmFtZV0gPSB0cnVlO1xuICAgICAgICB0aGlzLnJlZ2lzdGVycy5saXN0LnB1c2gobmFtZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHB1c2hTdGFjazogZnVuY3Rpb24oaXRlbSkge1xuICAgICAgdGhpcy5zb3VyY2UucHVzaCh0aGlzLm5leHRTdGFjaygpICsgXCIgPSBcIiArIGl0ZW0gKyBcIjtcIik7XG4gICAgICByZXR1cm4gXCJzdGFja1wiICsgdGhpcy5zdGFja1Nsb3Q7XG4gICAgfSxcblxuICAgIG5leHRTdGFjazogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnN0YWNrU2xvdCsrO1xuICAgICAgaWYodGhpcy5zdGFja1Nsb3QgPiB0aGlzLnN0YWNrVmFycy5sZW5ndGgpIHsgdGhpcy5zdGFja1ZhcnMucHVzaChcInN0YWNrXCIgKyB0aGlzLnN0YWNrU2xvdCk7IH1cbiAgICAgIHJldHVybiBcInN0YWNrXCIgKyB0aGlzLnN0YWNrU2xvdDtcbiAgICB9LFxuXG4gICAgcG9wU3RhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwic3RhY2tcIiArIHRoaXMuc3RhY2tTbG90LS07XG4gICAgfSxcblxuICAgIHRvcFN0YWNrOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcInN0YWNrXCIgKyB0aGlzLnN0YWNrU2xvdDtcbiAgICB9LFxuXG4gICAgcXVvdGVkU3RyaW5nOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiAnXCInICsgc3RyXG4gICAgICAgIC5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXCcpXG4gICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJylcbiAgICAgICAgLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKVxuICAgICAgICAucmVwbGFjZSgvXFxyL2csICdcXFxccicpICsgJ1wiJztcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJlc2VydmVkV29yZHMgPSAoXCJicmVhayBjYXNlIGNhdGNoIGNvbnRpbnVlIGRlZmF1bHQgZGVsZXRlIGRvIGVsc2UgZmluYWxseSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgIFwiZm9yIGZ1bmN0aW9uIGlmIGluIGluc3RhbmNlb2YgbmV3IHJldHVybiBzd2l0Y2ggdGhpcyB0aHJvdyBcIiArIFxuICAgICAgICAgICAgICAgICAgICAgICBcInRyeSB0eXBlb2YgdmFyIHZvaWQgd2hpbGUgd2l0aCBudWxsIHRydWUgZmFsc2VcIikuc3BsaXQoXCIgXCIpO1xuXG4gIGNvbXBpbGVyV29yZHMgPSBKYXZhU2NyaXB0Q29tcGlsZXIuUkVTRVJWRURfV09SRFMgPSB7fTtcblxuICBmb3IodmFyIGk9MCwgbD1yZXNlcnZlZFdvcmRzLmxlbmd0aDsgaTxsOyBpKyspIHtcbiAgICBjb21waWxlcldvcmRzW3Jlc2VydmVkV29yZHNbaV1dID0gdHJ1ZTtcbiAgfVxuXG59KShIYW5kbGViYXJzLkNvbXBpbGVyLCBIYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlcik7XG5cbkhhbmRsZWJhcnMuVk0gPSB7XG4gIHByb2dyYW1XaXRoRGVwdGg6IGZ1bmN0aW9uKGZuLCBoZWxwZXJzLCBwYXJ0aWFscywgZGF0YSwgJGRlcHRoKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDQpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICBoZWxwZXJzOiBvcHRpb25zLmhlbHBlcnMgfHwgaGVscGVycyxcbiAgICAgICAgcGFydGlhbHM6IG9wdGlvbnMucGFydGlhbHMgfHwgcGFydGlhbHMsXG4gICAgICAgIGRhdGE6IG9wdGlvbnMuZGF0YSB8fCBkYXRhXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgW2NvbnRleHQsIG9wdGlvbnNdLmNvbmNhdChhcmdzKSk7XG4gICAgfTtcbiAgfSxcbiAgcHJvZ3JhbTogZnVuY3Rpb24oZm4sIGhlbHBlcnMsIHBhcnRpYWxzLCBkYXRhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICByZXR1cm4gZm4oY29udGV4dCwge1xuICAgICAgICBoZWxwZXJzOiBvcHRpb25zLmhlbHBlcnMgfHwgaGVscGVycyxcbiAgICAgICAgcGFydGlhbHM6IG9wdGlvbnMucGFydGlhbHMgfHwgcGFydGlhbHMsXG4gICAgICAgIGRhdGE6IG9wdGlvbnMuZGF0YSB8fCBkYXRhXG4gICAgICB9KTtcbiAgICB9O1xuICB9LFxuICBub29wOiBmdW5jdGlvbigpIHsgcmV0dXJuIFwiXCI7IH0sXG4gIGNvbXBpbGU6IGZ1bmN0aW9uKHN0cmluZywgb3B0aW9ucykge1xuICAgIHZhciBhc3QgPSBIYW5kbGViYXJzLnBhcnNlKHN0cmluZyk7XG4gICAgdmFyIGVudmlyb25tZW50ID0gbmV3IEhhbmRsZWJhcnMuQ29tcGlsZXIoKS5jb21waWxlKGFzdCwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlcigpLmNvbXBpbGUoZW52aXJvbm1lbnQsIG9wdGlvbnMpO1xuICB9LFxuICBpbnZva2VQYXJ0aWFsOiBmdW5jdGlvbihwYXJ0aWFsLCBuYW1lLCBjb250ZXh0LCBoZWxwZXJzLCBwYXJ0aWFscykge1xuICAgIGlmKHBhcnRpYWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEhhbmRsZWJhcnMuRXhjZXB0aW9uKFwiVGhlIHBhcnRpYWwgXCIgKyBuYW1lICsgXCIgY291bGQgbm90IGJlIGZvdW5kXCIpO1xuICAgIH0gZWxzZSBpZihwYXJ0aWFsIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgIHJldHVybiBwYXJ0aWFsKGNvbnRleHQsIHtoZWxwZXJzOiBoZWxwZXJzLCBwYXJ0aWFsczogcGFydGlhbHN9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydGlhbHNbbmFtZV0gPSBIYW5kbGViYXJzLlZNLmNvbXBpbGUocGFydGlhbCk7XG4gICAgICByZXR1cm4gcGFydGlhbHNbbmFtZV0oY29udGV4dCwge2hlbHBlcnM6IGhlbHBlcnMsIHBhcnRpYWxzOiBwYXJ0aWFsc30pO1xuICAgIH1cbiAgfVxufTtcblxuSGFuZGxlYmFycy5jb21waWxlID0gSGFuZGxlYmFycy5WTS5jb21waWxlOztcbiIsIi8qKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAgTWF4aW0gVmFzaWxpZXZcclxuICpcclxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuICpcclxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cclxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcbiAqXHJcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cclxuICogVEhFIFNPRlRXQVJFLlxyXG4gKlxyXG4gKiBAYXV0aG9yIE1heGltIFZhc2lsaWV2XHJcbiAqIERhdGU6IDA5LjA5LjIwMTBcclxuICogVGltZTogMTk6MDI6MzNcclxuICovXHJcblxyXG5cclxudmFyIGZvcm0yanMgPSAoZnVuY3Rpb24oKVxyXG57XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgZm9ybSB2YWx1ZXMgcmVwcmVzZW50ZWQgYXMgSmF2YXNjcmlwdCBvYmplY3RcclxuXHQgKiBcIm5hbWVcIiBhdHRyaWJ1dGUgZGVmaW5lcyBzdHJ1Y3R1cmUgb2YgcmVzdWx0aW5nIG9iamVjdFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHJvb3ROb2RlIHtFbGVtZW50fFN0cmluZ30gcm9vdCBmb3JtIGVsZW1lbnQgKG9yIGl0J3MgaWQpIG9yIGFycmF5IG9mIHJvb3QgZWxlbWVudHNcclxuXHQgKiBAcGFyYW0gZGVsaW1pdGVyIHtTdHJpbmd9IHN0cnVjdHVyZSBwYXJ0cyBkZWxpbWl0ZXIgZGVmYXVsdHMgdG8gJy4nXHJcblx0ICogQHBhcmFtIHNraXBFbXB0eSB7Qm9vbGVhbn0gc2hvdWxkIHNraXAgZW1wdHkgdGV4dCB2YWx1ZXMsIGRlZmF1bHRzIHRvIHRydWVcclxuXHQgKiBAcGFyYW0gZW1wdHlUb051bGwge0Jvb2xlYW59IHNob3VsZCBlbXB0eSB2YWx1ZXMgYmUgY29udmVydGVkIHRvIG51bGw/XHJcblx0ICogQHBhcmFtIG5vZGVDYWxsYmFjayB7RnVuY3Rpb259IGN1c3RvbSBmdW5jdGlvbiB0byBnZXQgbm9kZSB2YWx1ZVxyXG5cdCAqIEBwYXJhbSB1c2VJZElmRW1wdHlOYW1lIHtCb29sZWFufSBpZiB0cnVlIHZhbHVlIG9mIGlkIGF0dHJpYnV0ZSBvZiBmaWVsZCB3aWxsIGJlIHVzZWQgaWYgbmFtZSBvZiBmaWVsZCBpcyBlbXB0eVxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGZvcm0yanMocm9vdE5vZGUsIGRlbGltaXRlciwgc2tpcEVtcHR5LCBlbXB0eVRvTnVsbCwgbm9kZUNhbGxiYWNrLCB1c2VJZElmRW1wdHlOYW1lKVxyXG5cdHtcclxuXHRcdGlmICh0eXBlb2Ygc2tpcEVtcHR5ID09ICd1bmRlZmluZWQnIHx8IHNraXBFbXB0eSA9PSBudWxsKSBza2lwRW1wdHkgPSB0cnVlO1xyXG5cdFx0aWYgKHR5cGVvZiBlbXB0eVRvTnVsbCA9PSAndW5kZWZpbmVkJyB8fCBlbXB0eVRvTnVsbCA9PSBudWxsKSBlbXB0eVRvTnVsbCA9IHRydWU7XHJcblx0XHRpZiAodHlwZW9mIGRlbGltaXRlciA9PSAndW5kZWZpbmVkJyB8fCBkZWxpbWl0ZXIgPT0gbnVsbCkgZGVsaW1pdGVyID0gJy4nO1xyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPCA2KSB1c2VJZElmRW1wdHlOYW1lID0gZmFsc2U7XHJcblxyXG5cdFx0cm9vdE5vZGUgPSB0eXBlb2Ygcm9vdE5vZGUgPT0gJ3N0cmluZycgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyb290Tm9kZSkgOiByb290Tm9kZTtcclxuXHJcblx0XHR2YXIgZm9ybVZhbHVlcyA9IFtdLFxyXG5cdFx0XHRjdXJyTm9kZSxcclxuXHRcdFx0aSA9IDA7XHJcblxyXG5cdFx0LyogSWYgcm9vdE5vZGUgaXMgYXJyYXkgLSBjb21iaW5lIHZhbHVlcyAqL1xyXG5cdFx0aWYgKHJvb3ROb2RlLmNvbnN0cnVjdG9yID09IEFycmF5IHx8ICh0eXBlb2YgTm9kZUxpc3QgIT0gJ3VuZGVmaW5lZCcgJiYgcm9vdE5vZGUuY29uc3RydWN0b3IgPT0gTm9kZUxpc3QpKVxyXG5cdFx0e1xyXG5cdFx0XHR3aGlsZShjdXJyTm9kZSA9IHJvb3ROb2RlW2krK10pXHJcblx0XHRcdHtcclxuXHRcdFx0XHRmb3JtVmFsdWVzID0gZm9ybVZhbHVlcy5jb25jYXQoZ2V0Rm9ybVZhbHVlcyhjdXJyTm9kZSwgbm9kZUNhbGxiYWNrLCB1c2VJZElmRW1wdHlOYW1lKSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2VcclxuXHRcdHtcclxuXHRcdFx0Zm9ybVZhbHVlcyA9IGdldEZvcm1WYWx1ZXMocm9vdE5vZGUsIG5vZGVDYWxsYmFjaywgdXNlSWRJZkVtcHR5TmFtZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHByb2Nlc3NOYW1lVmFsdWVzKGZvcm1WYWx1ZXMsIHNraXBFbXB0eSwgZW1wdHlUb051bGwsIGRlbGltaXRlcik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQcm9jZXNzZXMgY29sbGVjdGlvbiBvZiB7IG5hbWU6ICduYW1lJywgdmFsdWU6ICd2YWx1ZScgfSBvYmplY3RzLlxyXG5cdCAqIEBwYXJhbSBuYW1lVmFsdWVzXHJcblx0ICogQHBhcmFtIHNraXBFbXB0eSBpZiB0cnVlIHNraXBzIGVsZW1lbnRzIHdpdGggdmFsdWUgPT0gJycgb3IgdmFsdWUgPT0gbnVsbFxyXG5cdCAqIEBwYXJhbSBkZWxpbWl0ZXJcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBwcm9jZXNzTmFtZVZhbHVlcyhuYW1lVmFsdWVzLCBza2lwRW1wdHksIGVtcHR5VG9OdWxsLCBkZWxpbWl0ZXIpXHJcblx0e1xyXG5cdFx0dmFyIHJlc3VsdCA9IHt9LFxyXG5cdFx0XHRhcnJheXMgPSB7fSxcclxuXHRcdFx0aSwgaiwgaywgbCxcclxuXHRcdFx0dmFsdWUsXHJcblx0XHRcdG5hbWVQYXJ0cyxcclxuXHRcdFx0Y3VyclJlc3VsdCxcclxuXHRcdFx0YXJyTmFtZUZ1bGwsXHJcblx0XHRcdGFyck5hbWUsXHJcblx0XHRcdGFycklkeCxcclxuXHRcdFx0bmFtZVBhcnQsXHJcblx0XHRcdG5hbWUsXHJcblx0XHRcdF9uYW1lUGFydHM7XHJcblxyXG5cdFx0Zm9yIChpID0gMDsgaSA8IG5hbWVWYWx1ZXMubGVuZ3RoOyBpKyspXHJcblx0XHR7XHJcblx0XHRcdHZhbHVlID0gbmFtZVZhbHVlc1tpXS52YWx1ZTtcclxuXHJcblx0XHRcdGlmIChlbXB0eVRvTnVsbCAmJiAodmFsdWUgPT09ICcnKSkgeyB2YWx1ZSA9IG51bGw7IH1cclxuXHRcdFx0aWYgKHNraXBFbXB0eSAmJiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSBudWxsKSkgY29udGludWU7XHJcblxyXG5cdFx0XHRuYW1lID0gbmFtZVZhbHVlc1tpXS5uYW1lO1xyXG5cdFx0XHRpZiAodHlwZW9mIG5hbWUgPT09ICd1bmRlZmluZWQnKSBjb250aW51ZTtcclxuXHJcblx0XHRcdF9uYW1lUGFydHMgPSBuYW1lLnNwbGl0KGRlbGltaXRlcik7XHJcblx0XHRcdG5hbWVQYXJ0cyA9IFtdO1xyXG5cdFx0XHRjdXJyUmVzdWx0ID0gcmVzdWx0O1xyXG5cdFx0XHRhcnJOYW1lRnVsbCA9ICcnO1xyXG5cclxuXHRcdFx0Zm9yKGogPSAwOyBqIDwgX25hbWVQYXJ0cy5sZW5ndGg7IGorKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdG5hbWVQYXJ0ID0gX25hbWVQYXJ0c1tqXS5zcGxpdCgnXVsnKTtcclxuXHRcdFx0XHRpZiAobmFtZVBhcnQubGVuZ3RoID4gMSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRmb3IoayA9IDA7IGsgPCBuYW1lUGFydC5sZW5ndGg7IGsrKylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYgKGsgPT0gMClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdG5hbWVQYXJ0W2tdID0gbmFtZVBhcnRba10gKyAnXSc7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoayA9PSBuYW1lUGFydC5sZW5ndGggLSAxKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0bmFtZVBhcnRba10gPSAnWycgKyBuYW1lUGFydFtrXTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRuYW1lUGFydFtrXSA9ICdbJyArIG5hbWVQYXJ0W2tdICsgJ10nO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRhcnJJZHggPSBuYW1lUGFydFtrXS5tYXRjaCgvKFthLXpfXSspP1xcWyhbYS16X11bYS16MC05X10rPylcXF0vaSk7XHJcblx0XHRcdFx0XHRcdGlmIChhcnJJZHgpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRmb3IobCA9IDE7IGwgPCBhcnJJZHgubGVuZ3RoOyBsKyspXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGFycklkeFtsXSkgbmFtZVBhcnRzLnB1c2goYXJySWR4W2xdKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRcdFx0XHRuYW1lUGFydHMucHVzaChuYW1lUGFydFtrXSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0bmFtZVBhcnRzID0gbmFtZVBhcnRzLmNvbmNhdChuYW1lUGFydCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZvciAoaiA9IDA7IGogPCBuYW1lUGFydHMubGVuZ3RoOyBqKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRuYW1lUGFydCA9IG5hbWVQYXJ0c1tqXTtcclxuXHJcblx0XHRcdFx0aWYgKG5hbWVQYXJ0LmluZGV4T2YoJ1tdJykgPiAtMSAmJiBqID09IG5hbWVQYXJ0cy5sZW5ndGggLSAxKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGFyck5hbWUgPSBuYW1lUGFydC5zdWJzdHIoMCwgbmFtZVBhcnQuaW5kZXhPZignWycpKTtcclxuXHRcdFx0XHRcdGFyck5hbWVGdWxsICs9IGFyck5hbWU7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCFjdXJyUmVzdWx0W2Fyck5hbWVdKSBjdXJyUmVzdWx0W2Fyck5hbWVdID0gW107XHJcblx0XHRcdFx0XHRjdXJyUmVzdWx0W2Fyck5hbWVdLnB1c2godmFsdWUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmIChuYW1lUGFydC5pbmRleE9mKCdbJykgPiAtMSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRhcnJOYW1lID0gbmFtZVBhcnQuc3Vic3RyKDAsIG5hbWVQYXJ0LmluZGV4T2YoJ1snKSk7XHJcblx0XHRcdFx0XHRhcnJJZHggPSBuYW1lUGFydC5yZXBsYWNlKC8oXihbYS16X10rKT9cXFspfChcXF0kKS9naSwgJycpO1xyXG5cclxuXHRcdFx0XHRcdC8qIFVuaXF1ZSBhcnJheSBuYW1lICovXHJcblx0XHRcdFx0XHRhcnJOYW1lRnVsbCArPSAnXycgKyBhcnJOYW1lICsgJ18nICsgYXJySWR4O1xyXG5cclxuXHRcdFx0XHRcdC8qXHJcblx0XHRcdFx0XHQgKiBCZWNhdXNlIGFycklkeCBpbiBmaWVsZCBuYW1lIGNhbiBiZSBub3QgemVyby1iYXNlZCBhbmQgc3RlcCBjYW4gYmVcclxuXHRcdFx0XHRcdCAqIG90aGVyIHRoYW4gMSwgd2UgY2FuJ3QgdXNlIHRoZW0gaW4gdGFyZ2V0IGFycmF5IGRpcmVjdGx5LlxyXG5cdFx0XHRcdFx0ICogSW5zdGVhZCB3ZSdyZSBtYWtpbmcgYSBoYXNoIHdoZXJlIGtleSBpcyBhcnJJZHggYW5kIHZhbHVlIGlzIGEgcmVmZXJlbmNlIHRvXHJcblx0XHRcdFx0XHQgKiBhZGRlZCBhcnJheSBlbGVtZW50XHJcblx0XHRcdFx0XHQgKi9cclxuXHJcblx0XHRcdFx0XHRpZiAoIWFycmF5c1thcnJOYW1lRnVsbF0pIGFycmF5c1thcnJOYW1lRnVsbF0gPSB7fTtcclxuXHRcdFx0XHRcdGlmIChhcnJOYW1lICE9ICcnICYmICFjdXJyUmVzdWx0W2Fyck5hbWVdKSBjdXJyUmVzdWx0W2Fyck5hbWVdID0gW107XHJcblxyXG5cdFx0XHRcdFx0aWYgKGogPT0gbmFtZVBhcnRzLmxlbmd0aCAtIDEpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGlmIChhcnJOYW1lID09ICcnKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Y3VyclJlc3VsdC5wdXNoKHZhbHVlKTtcclxuXHRcdFx0XHRcdFx0XHRhcnJheXNbYXJyTmFtZUZ1bGxdW2FycklkeF0gPSBjdXJyUmVzdWx0W2N1cnJSZXN1bHQubGVuZ3RoIC0gMV07XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Y3VyclJlc3VsdFthcnJOYW1lXS5wdXNoKHZhbHVlKTtcclxuXHRcdFx0XHRcdFx0XHRhcnJheXNbYXJyTmFtZUZ1bGxdW2FycklkeF0gPSBjdXJyUmVzdWx0W2Fyck5hbWVdW2N1cnJSZXN1bHRbYXJyTmFtZV0ubGVuZ3RoIC0gMV07XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYgKCFhcnJheXNbYXJyTmFtZUZ1bGxdW2FycklkeF0pXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoKC9eW2Etel9dK1xcWz8vaSkudGVzdChuYW1lUGFydHNbaisxXSkpIGN1cnJSZXN1bHRbYXJyTmFtZV0ucHVzaCh7fSk7XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSBjdXJyUmVzdWx0W2Fyck5hbWVdLnB1c2goW10pO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRhcnJheXNbYXJyTmFtZUZ1bGxdW2FycklkeF0gPSBjdXJyUmVzdWx0W2Fyck5hbWVdW2N1cnJSZXN1bHRbYXJyTmFtZV0ubGVuZ3RoIC0gMV07XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRjdXJyUmVzdWx0ID0gYXJyYXlzW2Fyck5hbWVGdWxsXVthcnJJZHhdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0YXJyTmFtZUZ1bGwgKz0gbmFtZVBhcnQ7XHJcblxyXG5cdFx0XHRcdFx0aWYgKGogPCBuYW1lUGFydHMubGVuZ3RoIC0gMSkgLyogTm90IHRoZSBsYXN0IHBhcnQgb2YgbmFtZSAtIG1lYW5zIG9iamVjdCAqL1xyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRpZiAoIWN1cnJSZXN1bHRbbmFtZVBhcnRdKSBjdXJyUmVzdWx0W25hbWVQYXJ0XSA9IHt9O1xyXG5cdFx0XHRcdFx0XHRjdXJyUmVzdWx0ID0gY3VyclJlc3VsdFtuYW1lUGFydF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGN1cnJSZXN1bHRbbmFtZVBhcnRdID0gdmFsdWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Rm9ybVZhbHVlcyhyb290Tm9kZSwgbm9kZUNhbGxiYWNrLCB1c2VJZElmRW1wdHlOYW1lKVxyXG4gICAge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBleHRyYWN0Tm9kZVZhbHVlcyhyb290Tm9kZSwgbm9kZUNhbGxiYWNrLCB1c2VJZElmRW1wdHlOYW1lKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDAgPyByZXN1bHQgOiBnZXRTdWJGb3JtVmFsdWVzKHJvb3ROb2RlLCBub2RlQ2FsbGJhY2ssIHVzZUlkSWZFbXB0eU5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFN1YkZvcm1WYWx1ZXMocm9vdE5vZGUsIG5vZGVDYWxsYmFjaywgdXNlSWRJZkVtcHR5TmFtZSlcclxuXHR7XHJcblx0XHR2YXIgcmVzdWx0ID0gW10sXHJcblx0XHRcdGN1cnJlbnROb2RlID0gcm9vdE5vZGUuZmlyc3RDaGlsZDtcclxuXHRcdFxyXG5cdFx0d2hpbGUgKGN1cnJlbnROb2RlKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXN1bHQgPSByZXN1bHQuY29uY2F0KGV4dHJhY3ROb2RlVmFsdWVzKGN1cnJlbnROb2RlLCBub2RlQ2FsbGJhY2ssIHVzZUlkSWZFbXB0eU5hbWUpKTtcclxuXHRcdFx0Y3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5uZXh0U2libGluZztcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHJcbiAgICBmdW5jdGlvbiBleHRyYWN0Tm9kZVZhbHVlcyhub2RlLCBub2RlQ2FsbGJhY2ssIHVzZUlkSWZFbXB0eU5hbWUpIHtcclxuICAgICAgICB2YXIgY2FsbGJhY2tSZXN1bHQsIGZpZWxkVmFsdWUsIHJlc3VsdCwgZmllbGROYW1lID0gZ2V0RmllbGROYW1lKG5vZGUsIHVzZUlkSWZFbXB0eU5hbWUpO1xyXG5cclxuICAgICAgICBjYWxsYmFja1Jlc3VsdCA9IG5vZGVDYWxsYmFjayAmJiBub2RlQ2FsbGJhY2sobm9kZSk7XHJcblxyXG4gICAgICAgIGlmIChjYWxsYmFja1Jlc3VsdCAmJiBjYWxsYmFja1Jlc3VsdC5uYW1lKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFtjYWxsYmFja1Jlc3VsdF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpZWxkTmFtZSAhPSAnJyAmJiBub2RlLm5vZGVOYW1lLm1hdGNoKC9JTlBVVHxURVhUQVJFQS9pKSkge1xyXG4gICAgICAgICAgICBmaWVsZFZhbHVlID0gZ2V0RmllbGRWYWx1ZShub2RlKTsgICBcclxuXHQgICAgICAgIGlmIChmaWVsZFZhbHVlID09IG51bGwgJiYgbm9kZS50eXBlID09ICdyYWRpbycpXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gWyB7IG5hbWU6IGZpZWxkTmFtZSwgdmFsdWU6IGZpZWxkVmFsdWV9IF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpZWxkTmFtZSAhPSAnJyAmJiBub2RlLm5vZGVOYW1lLm1hdGNoKC9TRUxFQ1QvaSkpIHtcclxuXHQgICAgICAgIGZpZWxkVmFsdWUgPSBnZXRGaWVsZFZhbHVlKG5vZGUpO1xyXG5cdCAgICAgICAgcmVzdWx0ID0gWyB7IG5hbWU6IGZpZWxkTmFtZS5yZXBsYWNlKC9cXFtcXF0kLywgJycpLCB2YWx1ZTogZmllbGRWYWx1ZSB9IF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBnZXRTdWJGb3JtVmFsdWVzKG5vZGUsIG5vZGVDYWxsYmFjaywgdXNlSWRJZkVtcHR5TmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuXHRmdW5jdGlvbiBnZXRGaWVsZE5hbWUobm9kZSwgdXNlSWRJZkVtcHR5TmFtZSlcclxuXHR7XHJcblx0XHRpZiAobm9kZS5uYW1lICYmIG5vZGUubmFtZSAhPSAnJykgcmV0dXJuIG5vZGUubmFtZTtcclxuXHRcdGVsc2UgaWYgKHVzZUlkSWZFbXB0eU5hbWUgJiYgbm9kZS5pZCAmJiBub2RlLmlkICE9ICcnKSByZXR1cm4gbm9kZS5pZDtcclxuXHRcdGVsc2UgcmV0dXJuICcnO1xyXG5cdH1cclxuXHJcblxyXG5cdGZ1bmN0aW9uIGdldEZpZWxkVmFsdWUoZmllbGROb2RlKVxyXG5cdHtcclxuXHRcdGlmIChmaWVsZE5vZGUuZGlzYWJsZWQpIHJldHVybiBudWxsO1xyXG5cdFx0XHJcblx0XHRzd2l0Y2ggKGZpZWxkTm9kZS5ub2RlTmFtZSkge1xyXG5cdFx0XHRjYXNlICdJTlBVVCc6XHJcblx0XHRcdGNhc2UgJ1RFWFRBUkVBJzpcclxuXHRcdFx0XHRzd2l0Y2ggKGZpZWxkTm9kZS50eXBlLnRvTG93ZXJDYXNlKCkpIHtcclxuXHRcdFx0XHRcdGNhc2UgJ3JhZGlvJzpcclxuXHRcdFx0XHRcdGNhc2UgJ2NoZWNrYm94JzpcclxuXHRcdFx0XHRcdFx0aWYgKGZpZWxkTm9kZS5jaGVja2VkKSByZXR1cm4gZmllbGROb2RlLnZhbHVlO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHRjYXNlICdidXR0b24nOlxyXG5cdFx0XHRcdFx0Y2FzZSAncmVzZXQnOlxyXG5cdFx0XHRcdFx0Y2FzZSAnc3VibWl0JzpcclxuXHRcdFx0XHRcdGNhc2UgJ2ltYWdlJzpcclxuXHRcdFx0XHRcdFx0cmV0dXJuICcnO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmllbGROb2RlLnZhbHVlO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRjYXNlICdTRUxFQ1QnOlxyXG5cdFx0XHRcdHJldHVybiBnZXRTZWxlY3RlZE9wdGlvblZhbHVlKGZpZWxkTm9kZSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZ2V0U2VsZWN0ZWRPcHRpb25WYWx1ZShzZWxlY3ROb2RlKVxyXG5cdHtcclxuXHRcdHZhciBtdWx0aXBsZSA9IHNlbGVjdE5vZGUubXVsdGlwbGUsXHJcblx0XHRcdHJlc3VsdCA9IFtdLFxyXG5cdFx0XHRvcHRpb25zLFxyXG5cdFx0XHRpLCBsO1xyXG5cclxuXHRcdGlmICghbXVsdGlwbGUpIHJldHVybiBzZWxlY3ROb2RlLnZhbHVlO1xyXG5cclxuXHRcdGZvciAob3B0aW9ucyA9IHNlbGVjdE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ29wdGlvbicpLCBpID0gMCwgbCA9IG9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKVxyXG5cdFx0e1xyXG5cdFx0XHRpZiAob3B0aW9uc1tpXS5zZWxlY3RlZCkgcmVzdWx0LnB1c2gob3B0aW9uc1tpXS52YWx1ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9XHJcblxyXG5cdHJldHVybiBmb3JtMmpzO1xyXG5cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMCBNYXhpbSBWYXNpbGlldlxyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxyXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gKiBUSEUgU09GVFdBUkUuXHJcbiAqXHJcbiAqIEBhdXRob3IgTWF4aW0gVmFzaWxpZXZcclxuICogRGF0ZTogMTkuMDkuMTFcclxuICogVGltZTogMjM6NDBcclxuICovXHJcblxyXG52YXIganMyZm9ybSA9IChmdW5jdGlvbigpXHJcbntcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHJcblx0dmFyIF9zdWJBcnJheVJlZ2V4cCA9IC9eXFxbXFxkKz9cXF0vLFxyXG5cdFx0XHRfc3ViT2JqZWN0UmVnZXhwID0gL15bYS16QS1aX11bYS16QS1aXzAtOV0rLyxcclxuXHRcdFx0X2FycmF5SXRlbVJlZ2V4cCA9IC9cXFtbMC05XSs/XFxdJC8sXHJcblx0XHRcdF9sYXN0SW5kZXhlZEFycmF5UmVnZXhwID0gLyguKikoXFxbKShbMC05XSopKFxcXSkkLyxcclxuXHRcdFx0X2FycmF5T2ZBcnJheXNSZWdleHAgPSAvXFxbKFswLTldKylcXF1cXFsoWzAtOV0rKVxcXS9nLFxyXG5cdFx0XHRfaW5wdXRPclRleHRhcmVhUmVnZXhwID0gL0lOUFVUfFRFWFRBUkVBL2k7XHJcblxyXG5cdC8qKlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHJvb3ROb2RlXHJcblx0ICogQHBhcmFtIGRhdGFcclxuXHQgKiBAcGFyYW0gZGVsaW1pdGVyXHJcblx0ICogQHBhcmFtIG5vZGVDYWxsYmFja1xyXG5cdCAqIEBwYXJhbSB1c2VJZElmRW1wdHlOYW1lXHJcblx0ICogQHBhcmFtIHNob3VsZENsZWFuIHNob3VsZCB3ZSBlbXB0eSBvdXQgZmllbGRzIGZpcnN0P1xyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGpzMmZvcm0ocm9vdE5vZGUsIGRhdGEsIGRlbGltaXRlciwgbm9kZUNhbGxiYWNrLCB1c2VJZElmRW1wdHlOYW1lLCBzaG91bGRDbGVhbilcclxuXHR7XHJcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIGRlbGltaXRlciA9ICcuJztcclxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoIDwgNCkgbm9kZUNhbGxiYWNrID0gbnVsbDtcclxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoIDwgNSkgdXNlSWRJZkVtcHR5TmFtZSA9IGZhbHNlO1xyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPCA2KSBzaG91bGRDbGVhbiA9IHRydWU7XHJcblxyXG5cdFx0dmFyIGZpZWxkVmFsdWVzLFxyXG5cdFx0XHRcdGZvcm1GaWVsZHNCeU5hbWU7XHJcblxyXG5cdFx0ZmllbGRWYWx1ZXMgPSBvYmplY3QyYXJyYXkoZGF0YSk7XHJcblx0XHRmb3JtRmllbGRzQnlOYW1lID0gZ2V0RmllbGRzKHJvb3ROb2RlLCB1c2VJZElmRW1wdHlOYW1lLCBkZWxpbWl0ZXIsIHt9LCBzaG91bGRDbGVhbik7XHJcblxyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZFZhbHVlcy5sZW5ndGg7IGkrKylcclxuXHRcdHtcclxuXHRcdFx0dmFyIGZpZWxkTmFtZSA9IGZpZWxkVmFsdWVzW2ldLm5hbWUsXHJcblx0XHRcdFx0XHRmaWVsZFZhbHVlID0gZmllbGRWYWx1ZXNbaV0udmFsdWU7XHJcblxyXG5cdFx0XHRpZiAodHlwZW9mIGZvcm1GaWVsZHNCeU5hbWVbZmllbGROYW1lXSAhPSAndW5kZWZpbmVkJylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHNldFZhbHVlKGZvcm1GaWVsZHNCeU5hbWVbZmllbGROYW1lXSwgZmllbGRWYWx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIGZvcm1GaWVsZHNCeU5hbWVbZmllbGROYW1lLnJlcGxhY2UoX2FycmF5SXRlbVJlZ2V4cCwgJ1tdJyldICE9ICd1bmRlZmluZWQnKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c2V0VmFsdWUoZm9ybUZpZWxkc0J5TmFtZVtmaWVsZE5hbWUucmVwbGFjZShfYXJyYXlJdGVtUmVnZXhwLCAnW10nKV0sIGZpZWxkVmFsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZXRWYWx1ZShmaWVsZCwgdmFsdWUpXHJcblx0e1xyXG5cdFx0dmFyIGNoaWxkcmVuLCBpLCBsO1xyXG5cclxuXHRcdGlmIChmaWVsZCBpbnN0YW5jZW9mIEFycmF5KVxyXG5cdFx0e1xyXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgZmllbGQubGVuZ3RoOyBpKyspXHJcblx0XHRcdHtcclxuICAgICAgICBpZiAoZmllbGRbaV0udHlwZSA9PSBcInJhZGlvXCIpe1xyXG4gICAgICAgICAgZmllbGRbaV0uY2hlY2tlZCA9IGZhbHNlXHJcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9IFwidW5kZWZpbmVkXCIgJiYgdmFsdWUgIT09IG51bGwgICYmIGZpZWxkW2ldLnZhbHVlID09IHZhbHVlIHx8IGZpZWxkW2ldLnZhbHVlID09IHZhbHVlLnRvU3RyaW5nKCkgKVxyXG4gICAgICAgICAgICBmaWVsZFtpXS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgIGlmICh2YWx1ZSA9PSAnb24nIHx8IHZhbHVlID09ICd0cnVlJyB8fCB2YWx1ZSA9PSAnMScpXHJcbiAgICAgICAgICAgIGZpZWxkW2ldLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBmaWVsZFtpXS5jaGVja2VkID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKF9pbnB1dE9yVGV4dGFyZWFSZWdleHAudGVzdChmaWVsZC5ub2RlTmFtZSkpXHJcblx0XHR7XHJcblx0XHRcdGlmICh2YWx1ZSlcclxuXHRcdFx0XHRmaWVsZC52YWx1ZSA9IHZhbHVlO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoL1NFTEVDVC9pLnRlc3QoZmllbGQubm9kZU5hbWUpKVxyXG5cdFx0e1xyXG5cdFx0XHRjaGlsZHJlbiA9IGZpZWxkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdvcHRpb24nKTtcclxuXHRcdFx0Zm9yIChpID0gMCxsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYgKGNoaWxkcmVuW2ldLnZhbHVlID09IHZhbHVlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGNoaWxkcmVuW2ldLnNlbGVjdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGlmIChmaWVsZC5tdWx0aXBsZSkgYnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKCFmaWVsZC5tdWx0aXBsZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjaGlsZHJlbltpXS5zZWxlY3RlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZ2V0RmllbGRzKHJvb3ROb2RlLCB1c2VJZElmRW1wdHlOYW1lLCBkZWxpbWl0ZXIsIGFycmF5SW5kZXhlcywgc2hvdWxkQ2xlYW4pXHJcblx0e1xyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPCA0KSBhcnJheUluZGV4ZXMgPSB7fTtcclxuXHJcblx0XHR2YXIgcmVzdWx0ID0ge30sXHJcblx0XHRcdGN1cnJOb2RlID0gcm9vdE5vZGUuZmlyc3RDaGlsZCxcclxuXHRcdFx0bmFtZSwgbmFtZU5vcm1hbGl6ZWQsXHJcblx0XHRcdHN1YkZpZWxkTmFtZSxcclxuXHRcdFx0aSwgaiwgbCxcclxuXHRcdFx0b3B0aW9ucztcclxuXHJcblx0XHR3aGlsZSAoY3Vyck5vZGUpXHJcblx0XHR7XHJcblx0XHRcdG5hbWUgPSAnJztcclxuXHJcblx0XHRcdGlmIChjdXJyTm9kZS5uYW1lICYmIGN1cnJOb2RlLm5hbWUgIT0gJycpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRuYW1lID0gY3Vyck5vZGUubmFtZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICh1c2VJZElmRW1wdHlOYW1lICYmIGN1cnJOb2RlLmlkICYmIGN1cnJOb2RlLmlkICE9ICcnKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bmFtZSA9IGN1cnJOb2RlLmlkO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAobmFtZSA9PSAnJylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBzdWJGaWVsZHMgPSBnZXRGaWVsZHMoY3Vyck5vZGUsIHVzZUlkSWZFbXB0eU5hbWUsIGRlbGltaXRlciwgYXJyYXlJbmRleGVzLCBzaG91bGRDbGVhbik7XHJcblx0XHRcdFx0Zm9yIChzdWJGaWVsZE5hbWUgaW4gc3ViRmllbGRzKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmICh0eXBlb2YgcmVzdWx0W3N1YkZpZWxkTmFtZV0gPT0gJ3VuZGVmaW5lZCcpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHJlc3VsdFtzdWJGaWVsZE5hbWVdID0gc3ViRmllbGRzW3N1YkZpZWxkTmFtZV07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBzdWJGaWVsZHNbc3ViRmllbGROYW1lXS5sZW5ndGg7IGkrKylcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHJlc3VsdFtzdWJGaWVsZE5hbWVdLnB1c2goc3ViRmllbGRzW3N1YkZpZWxkTmFtZV1baV0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmICgvU0VMRUNUL2kudGVzdChjdXJyTm9kZS5ub2RlTmFtZSkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Zm9yKGogPSAwLCBvcHRpb25zID0gY3Vyck5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ29wdGlvbicpLCBsID0gb3B0aW9ucy5sZW5ndGg7IGogPCBsOyBqKyspXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGlmIChzaG91bGRDbGVhbilcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdG9wdGlvbnNbal0uc2VsZWN0ZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0bmFtZU5vcm1hbGl6ZWQgPSBub3JtYWxpemVOYW1lKG5hbWUsIGRlbGltaXRlciwgYXJyYXlJbmRleGVzKTtcclxuXHRcdFx0XHRcdFx0cmVzdWx0W25hbWVOb3JtYWxpemVkXSA9IGN1cnJOb2RlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmICgvSU5QVVQvaS50ZXN0KGN1cnJOb2RlLm5vZGVOYW1lKSAmJiAvQ0hFQ0tCT1h8UkFESU8vaS50ZXN0KGN1cnJOb2RlLnR5cGUpKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKHNob3VsZENsZWFuKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRjdXJyTm9kZS5jaGVja2VkID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0bmFtZU5vcm1hbGl6ZWQgPSBub3JtYWxpemVOYW1lKG5hbWUsIGRlbGltaXRlciwgYXJyYXlJbmRleGVzKTtcclxuXHRcdFx0XHRcdG5hbWVOb3JtYWxpemVkID0gbmFtZU5vcm1hbGl6ZWQucmVwbGFjZShfYXJyYXlJdGVtUmVnZXhwLCAnW10nKTtcclxuXHRcdFx0XHRcdGlmICghcmVzdWx0W25hbWVOb3JtYWxpemVkXSkgcmVzdWx0W25hbWVOb3JtYWxpemVkXSA9IFtdO1xyXG5cdFx0XHRcdFx0cmVzdWx0W25hbWVOb3JtYWxpemVkXS5wdXNoKGN1cnJOb2RlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmIChzaG91bGRDbGVhbilcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Y3Vyck5vZGUudmFsdWUgPSAnJztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRuYW1lTm9ybWFsaXplZCA9IG5vcm1hbGl6ZU5hbWUobmFtZSwgZGVsaW1pdGVyLCBhcnJheUluZGV4ZXMpO1xyXG5cdFx0XHRcdFx0cmVzdWx0W25hbWVOb3JtYWxpemVkXSA9IGN1cnJOb2RlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y3Vyck5vZGUgPSBjdXJyTm9kZS5uZXh0U2libGluZztcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTm9ybWFsaXplcyBuYW1lcyBvZiBhcnJheXMsIHB1dHMgY29ycmVjdCBpbmRleGVzIChjb25zZWN1dGl2ZSBhbmQgb3JkZXJlZCBieSBlbGVtZW50IGFwcGVhcmFuY2UgaW4gSFRNTClcclxuXHQgKiBAcGFyYW0gbmFtZVxyXG5cdCAqIEBwYXJhbSBkZWxpbWl0ZXJcclxuXHQgKiBAcGFyYW0gYXJyYXlJbmRleGVzXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lLCBkZWxpbWl0ZXIsIGFycmF5SW5kZXhlcylcclxuXHR7XHJcblx0XHR2YXIgbmFtZUNodW5rc05vcm1hbGl6ZWQgPSBbXSxcclxuXHRcdFx0XHRuYW1lQ2h1bmtzID0gbmFtZS5zcGxpdChkZWxpbWl0ZXIpLFxyXG5cdFx0XHRcdGN1cnJDaHVuayxcclxuXHRcdFx0XHRuYW1lTWF0Y2hlcyxcclxuXHRcdFx0XHRuYW1lTm9ybWFsaXplZCxcclxuXHRcdFx0XHRjdXJySW5kZXgsXHJcblx0XHRcdFx0bmV3SW5kZXgsXHJcblx0XHRcdFx0aTtcclxuXHJcblx0XHRuYW1lID0gbmFtZS5yZXBsYWNlKF9hcnJheU9mQXJyYXlzUmVnZXhwLCAnWyQxXS5bJDJdJyk7XHJcblx0XHRmb3IgKGkgPSAwOyBpIDwgbmFtZUNodW5rcy5sZW5ndGg7IGkrKylcclxuXHRcdHtcclxuXHRcdFx0Y3VyckNodW5rID0gbmFtZUNodW5rc1tpXTtcclxuXHRcdFx0bmFtZUNodW5rc05vcm1hbGl6ZWQucHVzaChjdXJyQ2h1bmspO1xyXG5cdFx0XHRuYW1lTWF0Y2hlcyA9IGN1cnJDaHVuay5tYXRjaChfbGFzdEluZGV4ZWRBcnJheVJlZ2V4cCk7XHJcblx0XHRcdGlmIChuYW1lTWF0Y2hlcyAhPSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bmFtZU5vcm1hbGl6ZWQgPSBuYW1lQ2h1bmtzTm9ybWFsaXplZC5qb2luKGRlbGltaXRlcik7XHJcblx0XHRcdFx0Y3VyckluZGV4ID0gbmFtZU5vcm1hbGl6ZWQucmVwbGFjZShfbGFzdEluZGV4ZWRBcnJheVJlZ2V4cCwgJyQzJyk7XHJcblx0XHRcdFx0bmFtZU5vcm1hbGl6ZWQgPSBuYW1lTm9ybWFsaXplZC5yZXBsYWNlKF9sYXN0SW5kZXhlZEFycmF5UmVnZXhwLCAnJDEnKTtcclxuXHJcblx0XHRcdFx0aWYgKHR5cGVvZiAoYXJyYXlJbmRleGVzW25hbWVOb3JtYWxpemVkXSkgPT0gJ3VuZGVmaW5lZCcpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0YXJyYXlJbmRleGVzW25hbWVOb3JtYWxpemVkXSA9IHtcclxuXHRcdFx0XHRcdFx0bGFzdEluZGV4OiAtMSxcclxuXHRcdFx0XHRcdFx0aW5kZXhlczoge31cclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoY3VyckluZGV4ID09ICcnIHx8IHR5cGVvZiBhcnJheUluZGV4ZXNbbmFtZU5vcm1hbGl6ZWRdLmluZGV4ZXNbY3VyckluZGV4XSA9PSAndW5kZWZpbmVkJylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRhcnJheUluZGV4ZXNbbmFtZU5vcm1hbGl6ZWRdLmxhc3RJbmRleCsrO1xyXG5cdFx0XHRcdFx0YXJyYXlJbmRleGVzW25hbWVOb3JtYWxpemVkXS5pbmRleGVzW2N1cnJJbmRleF0gPSBhcnJheUluZGV4ZXNbbmFtZU5vcm1hbGl6ZWRdLmxhc3RJbmRleDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdG5ld0luZGV4ID0gYXJyYXlJbmRleGVzW25hbWVOb3JtYWxpemVkXS5pbmRleGVzW2N1cnJJbmRleF07XHJcblx0XHRcdFx0bmFtZUNodW5rc05vcm1hbGl6ZWRbbmFtZUNodW5rc05vcm1hbGl6ZWQubGVuZ3RoIC0gMV0gPSBjdXJyQ2h1bmsucmVwbGFjZShfbGFzdEluZGV4ZWRBcnJheVJlZ2V4cCwgJyQxJDInICsgbmV3SW5kZXggKyAnJDQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdG5hbWVOb3JtYWxpemVkID0gbmFtZUNodW5rc05vcm1hbGl6ZWQuam9pbihkZWxpbWl0ZXIpO1xyXG5cdFx0bmFtZU5vcm1hbGl6ZWQgPSBuYW1lTm9ybWFsaXplZC5yZXBsYWNlKCddLlsnLCAnXVsnKTtcclxuXHRcdHJldHVybiBuYW1lTm9ybWFsaXplZDtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG9iamVjdDJhcnJheShvYmosIGx2bClcclxuXHR7XHJcblx0XHR2YXIgcmVzdWx0ID0gW10sIGksIG5hbWU7XHJcblxyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkgbHZsID0gMDtcclxuXHJcbiAgICAgICAgaWYgKG9iaiA9PSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gW3sgbmFtZTogXCJcIiwgdmFsdWU6IG51bGwgfV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmogPT0gJ3N0cmluZycgfHwgdHlwZW9mIG9iaiA9PSAnbnVtYmVyJyB8fCB0eXBlb2Ygb2JqID09ICdkYXRlJyB8fCB0eXBlb2Ygb2JqID09ICdib29sZWFuJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogXCJcIiwgdmFsdWUgOiBvYmogfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBcIltcIiArIGkgKyBcIl1cIjtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoZ2V0U3ViVmFsdWVzKG9ialtpXSwgbmFtZSwgbHZsICsgMSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaSBpbiBvYmopXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChnZXRTdWJWYWx1ZXMob2JqW2ldLCBuYW1lLCBsdmwgKyAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcblx0ZnVuY3Rpb24gZ2V0U3ViVmFsdWVzKHN1Yk9iaiwgbmFtZSwgbHZsKVxyXG5cdHtcclxuXHRcdHZhciBpdGVtTmFtZTtcclxuXHRcdHZhciByZXN1bHQgPSBbXSwgdGVtcFJlc3VsdCA9IG9iamVjdDJhcnJheShzdWJPYmosIGx2bCArIDEpLCBpLCB0ZW1wSXRlbTtcclxuXHJcblx0XHRmb3IgKGkgPSAwOyBpIDwgdGVtcFJlc3VsdC5sZW5ndGg7IGkrKylcclxuXHRcdHtcclxuXHRcdFx0aXRlbU5hbWUgPSBuYW1lO1xyXG5cdFx0XHRpZiAoX3N1YkFycmF5UmVnZXhwLnRlc3QodGVtcFJlc3VsdFtpXS5uYW1lKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGl0ZW1OYW1lICs9IHRlbXBSZXN1bHRbaV0ubmFtZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChfc3ViT2JqZWN0UmVnZXhwLnRlc3QodGVtcFJlc3VsdFtpXS5uYW1lKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGl0ZW1OYW1lICs9ICcuJyArIHRlbXBSZXN1bHRbaV0ubmFtZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGVtcEl0ZW0gPSB7IG5hbWU6IGl0ZW1OYW1lLCB2YWx1ZTogdGVtcFJlc3VsdFtpXS52YWx1ZSB9O1xyXG5cdFx0XHRyZXN1bHQucHVzaCh0ZW1wSXRlbSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9XHJcblxyXG5cdHJldHVybiBqczJmb3JtO1xyXG5cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMCBNYXhpbSBWYXNpbGlldlxyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxyXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gKiBUSEUgU09GVFdBUkUuXHJcbiAqXHJcbiAqIEBhdXRob3IgTWF4aW0gVmFzaWxpZXZcclxuICogRGF0ZTogMjkuMDYuMTFcclxuICogVGltZTogMjA6MDlcclxuICovXHJcblxyXG4oZnVuY3Rpb24oJCl7XHJcblxyXG5cdC8qKlxyXG5cdCAqIGpRdWVyeSB3cmFwcGVyIGZvciBmb3JtMm9iamVjdCgpXHJcblx0ICogRXh0cmFjdHMgZGF0YSBmcm9tIGNoaWxkIGlucHV0cyBpbnRvIGphdmFzY3JpcHQgb2JqZWN0XHJcblx0ICovXHJcblx0JC5mbi50b09iamVjdCA9IGZ1bmN0aW9uKG9wdGlvbnMpXHJcblx0e1xyXG5cdFx0dmFyIHJlc3VsdCA9IFtdLFxyXG5cdFx0XHRzZXR0aW5ncyA9IHtcclxuXHRcdFx0XHRtb2RlOiAnZmlyc3QnLCAvLyB3aGF0IHRvIGNvbnZlcnQ6ICdhbGwnIG9yICdmaXJzdCcgbWF0Y2hlZCBub2RlXHJcblx0XHRcdFx0ZGVsaW1pdGVyOiBcIi5cIixcclxuXHRcdFx0XHRza2lwRW1wdHk6IHRydWUsXHJcblx0XHRcdFx0bm9kZUNhbGxiYWNrOiBudWxsLFxyXG5cdFx0XHRcdHVzZUlkSWZFbXB0eU5hbWU6IGZhbHNlXHJcblx0XHRcdH07XHJcblxyXG5cdFx0aWYgKG9wdGlvbnMpXHJcblx0XHR7XHJcblx0XHRcdCQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcclxuXHRcdH1cclxuXHJcblx0XHRzd2l0Y2goc2V0dGluZ3MubW9kZSlcclxuXHRcdHtcclxuXHRcdFx0Y2FzZSAnZmlyc3QnOlxyXG5cdFx0XHRcdHJldHVybiBmb3JtMmpzKHRoaXMuZ2V0KDApLCBzZXR0aW5ncy5kZWxpbWl0ZXIsIHNldHRpbmdzLnNraXBFbXB0eSwgc2V0dGluZ3Mubm9kZUNhbGxiYWNrLCBzZXR0aW5ncy51c2VJZElmRW1wdHlOYW1lKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnYWxsJzpcclxuXHRcdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGZvcm0yanModGhpcywgc2V0dGluZ3MuZGVsaW1pdGVyLCBzZXR0aW5ncy5za2lwRW1wdHksIHNldHRpbmdzLm5vZGVDYWxsYmFjaywgc2V0dGluZ3MudXNlSWRJZkVtcHR5TmFtZSkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ2NvbWJpbmUnOlxyXG5cdFx0XHRcdHJldHVybiBmb3JtMmpzKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMpLCBzZXR0aW5ncy5kZWxpbWl0ZXIsIHNldHRpbmdzLnNraXBFbXB0eSwgc2V0dGluZ3Mubm9kZUNhbGxiYWNrLCBzZXR0aW5ncy51c2VJZElmRW1wdHlOYW1lKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG59KShqUXVlcnkpOyIsIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTAgUnlhbiBTY2h1ZnQgKHJ5YW4uc2NodWZ0QGdtYWlsLmNvbSlcblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuVEhFIFNPRlRXQVJFLlxuKi9cblxuLypcbiAgVGhpcyBjb2RlIGlzIGJhc2VkIGluIHBhcnQgb24gdGhlIHdvcmsgZG9uZSBpbiBSdWJ5IHRvIHN1cHBvcnRcbiAgaW5mZWN0aW9uIGFzIHBhcnQgb2YgUnVieSBvbiBSYWlscyBpbiB0aGUgQWN0aXZlU3VwcG9ydCdzIEluZmxlY3RvclxuICBhbmQgSW5mbGVjdGlvbnMgY2xhc3Nlcy4gIEl0IHdhcyBpbml0YWxseSBwb3J0ZWQgdG8gSmF2YXNjcmlwdCBieVxuICBSeWFuIFNjaHVmdCAocnlhbi5zY2h1ZnRAZ21haWwuY29tKSBpbiAyMDA3LlxuXG4gIFRoZSBjb2RlIGlzIGF2YWlsYWJsZSBhdCBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvaW5mbGVjdGlvbi1qcy9cblxuICBUaGUgYmFzaWMgdXNhZ2UgaXM6XG4gICAgMS4gSW5jbHVkZSB0aGlzIHNjcmlwdCBvbiB5b3VyIHdlYiBwYWdlLlxuICAgIDIuIENhbGwgZnVuY3Rpb25zIG9uIGFueSBTdHJpbmcgb2JqZWN0IGluIEphdmFzY3JpcHRcblxuICBDdXJyZW50bHkgaW1wbGVtZW50ZWQgZnVuY3Rpb25zOlxuXG4gICAgU3RyaW5nLnBsdXJhbGl6ZShwbHVyYWwpID09IFN0cmluZ1xuICAgICAgcmVuZGVycyBhIHNpbmd1bGFyIEVuZ2xpc2ggbGFuZ3VhZ2Ugbm91biBpbnRvIGl0cyBwbHVyYWwgZm9ybVxuICAgICAgbm9ybWFsIHJlc3VsdHMgY2FuIGJlIG92ZXJyaWRkZW4gYnkgcGFzc2luZyBpbiBhbiBhbHRlcm5hdGl2ZVxuXG4gICAgU3RyaW5nLnNpbmd1bGFyaXplKHNpbmd1bGFyKSA9PSBTdHJpbmdcbiAgICAgIHJlbmRlcnMgYSBwbHVyYWwgRW5nbGlzaCBsYW5ndWFnZSBub3VuIGludG8gaXRzIHNpbmd1bGFyIGZvcm1cbiAgICAgIG5vcm1hbCByZXN1bHRzIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHBhc3NpbmcgaW4gYW4gYWx0ZXJhdGl2ZVxuXG4gICAgU3RyaW5nLmNhbWVsaXplKGxvd0ZpcnN0TGV0dGVyKSA9PSBTdHJpbmdcbiAgICAgIHJlbmRlcnMgYSBsb3dlciBjYXNlIHVuZGVyc2NvcmVkIHdvcmQgaW50byBjYW1lbCBjYXNlXG4gICAgICB0aGUgZmlyc3QgbGV0dGVyIG9mIHRoZSByZXN1bHQgd2lsbCBiZSB1cHBlciBjYXNlIHVubGVzcyB5b3UgcGFzcyB0cnVlXG4gICAgICBhbHNvIHRyYW5zbGF0ZXMgXCIvXCIgaW50byBcIjo6XCIgKHVuZGVyc2NvcmUgZG9lcyB0aGUgb3Bwb3NpdGUpXG5cbiAgICBTdHJpbmcudW5kZXJzY29yZSgpID09IFN0cmluZ1xuICAgICAgcmVuZGVycyBhIGNhbWVsIGNhc2VkIHdvcmQgaW50byB3b3JkcyBzZXBlcmF0ZWQgYnkgdW5kZXJzY29yZXNcbiAgICAgIGFsc28gdHJhbnNsYXRlcyBcIjo6XCIgYmFjayBpbnRvIFwiL1wiIChjYW1lbGl6ZSBkb2VzIHRoZSBvcHBvc2l0ZSlcblxuICAgIFN0cmluZy5odW1hbml6ZShsb3dGaXJzdExldHRlcikgPT0gU3RyaW5nXG4gICAgICByZW5kZXJzIGEgbG93ZXIgY2FzZSBhbmQgdW5kZXJzY29yZWQgd29yZCBpbnRvIGh1bWFuIHJlYWRhYmxlIGZvcm1cbiAgICAgIGRlZmF1bHRzIHRvIG1ha2luZyB0aGUgZmlyc3QgbGV0dGVyIGNhcGl0YWxpemVkIHVubGVzcyB5b3UgcGFzcyB0cnVlXG5cbiAgICBTdHJpbmcuY2FwaXRhbGl6ZSgpID09IFN0cmluZ1xuICAgICAgcmVuZGVycyBhbGwgY2hhcmFjdGVycyB0byBsb3dlciBjYXNlIGFuZCB0aGVuIG1ha2VzIHRoZSBmaXJzdCB1cHBlclxuXG4gICAgU3RyaW5nLmRhc2hlcml6ZSgpID09IFN0cmluZ1xuICAgICAgcmVuZGVycyBhbGwgdW5kZXJiYXJzIGFuZCBzcGFjZXMgYXMgZGFzaGVzXG5cbiAgICBTdHJpbmcudGl0bGVpemUoKSA9PSBTdHJpbmdcbiAgICAgIHJlbmRlcnMgd29yZHMgaW50byB0aXRsZSBjYXNpbmcgKGFzIGZvciBib29rIHRpdGxlcylcblxuICAgIFN0cmluZy5kZW1vZHVsaXplKCkgPT0gU3RyaW5nXG4gICAgICByZW5kZXJzIGNsYXNzIG5hbWVzIHRoYXQgYXJlIHByZXBlbmRlZCBieSBtb2R1bGVzIGludG8ganVzdCB0aGUgY2xhc3NcblxuICAgIFN0cmluZy50YWJsZWl6ZSgpID09IFN0cmluZ1xuICAgICAgcmVuZGVycyBjYW1lbCBjYXNlZCBzaW5ndWxhciB3b3JkcyBpbnRvIHRoZWlyIHVuZGVyc2NvcmVkIHBsdXJhbCBmb3JtXG5cbiAgICBTdHJpbmcuY2xhc3NpZnkoKSA9PSBTdHJpbmdcbiAgICAgIHJlbmRlcnMgYW4gdW5kZXJzY29yZWQgcGx1cmFsIHdvcmQgaW50byBpdHMgY2FtZWwgY2FzZWQgc2luZ3VsYXIgZm9ybVxuXG4gICAgU3RyaW5nLmZvcmVpZ25fa2V5KGRyb3BJZFViYXIpID09IFN0cmluZ1xuICAgICAgcmVuZGVycyBhIGNsYXNzIG5hbWUgKGNhbWVsIGNhc2VkIHNpbmd1bGFyIG5vdW4pIGludG8gYSBmb3JlaWduIGtleVxuICAgICAgZGVmYXVsdHMgdG8gc2VwZXJhdGluZyB0aGUgY2xhc3MgZnJvbSB0aGUgaWQgd2l0aCBhbiB1bmRlcmJhciB1bmxlc3NcbiAgICAgIHlvdSBwYXNzIHRydWVcblxuICAgIFN0cmluZy5vcmRpbmFsaXplKCkgPT0gU3RyaW5nXG4gICAgICByZW5kZXJzIGFsbCBudW1iZXJzIGZvdW5kIGluIHRoZSBzdHJpbmcgaW50byB0aGVpciBzZXF1ZW5jZSBsaWtlIFwiMjJuZFwiXG4qL1xuXG4vKlxuICBUaGlzIHNldHMgdXAgYSBjb250YWluZXIgZm9yIHNvbWUgY29uc3RhbnRzIGluIGl0cyBvd24gbmFtZXNwYWNlXG4gIFdlIHVzZSB0aGUgd2luZG93IChpZiBhdmFpbGFibGUpIHRvIGVuYWJsZSBkeW5hbWljIGxvYWRpbmcgb2YgdGhpcyBzY3JpcHRcbiAgV2luZG93IHdvbid0IG5lY2Vzc2FyaWx5IGV4aXN0IGZvciBub24tYnJvd3NlcnMuXG4qL1xuaWYgKHdpbmRvdyAmJiAhd2luZG93LkluZmxlY3Rpb25KUylcbntcbiAgICB3aW5kb3cuSW5mbGVjdGlvbkpTID0gbnVsbDtcbn1cblxuLypcbiAgVGhpcyBzZXRzIHVwIHNvbWUgY29uc3RhbnRzIGZvciBsYXRlciB1c2VcbiAgVGhpcyBzaG91bGQgdXNlIHRoZSB3aW5kb3cgbmFtZXNwYWNlIHZhcmlhYmxlIGlmIGF2YWlsYWJsZVxuKi9cbkluZmxlY3Rpb25KUyA9XG57XG4gICAgLypcbiAgICAgIFRoaXMgaXMgYSBsaXN0IG9mIG5vdW5zIHRoYXQgdXNlIHRoZSBzYW1lIGZvcm0gZm9yIGJvdGggc2luZ3VsYXIgYW5kIHBsdXJhbC5cbiAgICAgIFRoaXMgbGlzdCBzaG91bGQgcmVtYWluIGVudGlyZWx5IGluIGxvd2VyIGNhc2UgdG8gY29ycmVjdGx5IG1hdGNoIFN0cmluZ3MuXG4gICAgKi9cbiAgICB1bmNvdW50YWJsZV93b3JkczogW1xuICAgICAgICAnZXF1aXBtZW50JywgJ2luZm9ybWF0aW9uJywgJ3JpY2UnLCAnbW9uZXknLCAnc3BlY2llcycsICdzZXJpZXMnLFxuICAgICAgICAnZmlzaCcsICdzaGVlcCcsICdtb29zZScsICdkZWVyJywgJ25ld3MnXG4gICAgXSxcblxuICAgIC8qXG4gICAgICBUaGVzZSBydWxlcyB0cmFuc2xhdGUgZnJvbSB0aGUgc2luZ3VsYXIgZm9ybSBvZiBhIG5vdW4gdG8gaXRzIHBsdXJhbCBmb3JtLlxuICAgICovXG4gICAgcGx1cmFsX3J1bGVzOiBbXG4gICAgICAgIFtuZXcgUmVnRXhwKCcobSlhbiQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICckMWVuJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcocGUpcnNvbiQnLCAnZ2knKSwgICAgICAgICAgICAgICckMW9wbGUnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhjaGlsZCkkJywgJ2dpJyksICAgICAgICAgICAgICAgJyQxcmVuJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCdeKG94KSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICckMWVuJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcoYXh8dGVzdClpcyQnLCAnZ2knKSwgICAgICAgICAgICckMWVzJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcob2N0b3B8dmlyKXVzJCcsICdnaScpLCAgICAgICAgICckMWknXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhhbGlhc3xzdGF0dXMpJCcsICdnaScpLCAgICAgICAgJyQxZXMnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhidSlzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgJyQxc2VzJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcoYnVmZmFsfHRvbWF0fHBvdGF0KW8kJywgJ2dpJyksICckMW9lcyddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKFt0aV0pdW0kJywgJ2dpJyksICAgICAgICAgICAgICAnJDFhJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCdzaXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICdzZXMnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyg/OihbXmZdKWZlfChbbHJdKWYpJCcsICdnaScpLCAgJyQxJDJ2ZXMnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhoaXZlKSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgJyQxcyddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKFteYWVpb3V5XXxxdSl5JCcsICdnaScpLCAgICAgICAnJDFpZXMnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyh4fGNofHNzfHNoKSQnLCAnZ2knKSwgICAgICAgICAgJyQxZXMnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhtYXRyfHZlcnR8aW5kKWl4fGV4JCcsICdnaScpLCAgJyQxaWNlcyddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKFttfGxdKW91c2UkJywgJ2dpJyksICAgICAgICAgICAnJDFpY2UnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhxdWl6KSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgJyQxemVzJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCdzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICdzJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCckJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICdzJ11cbiAgICBdLFxuXG4gICAgLypcbiAgICAgIFRoZXNlIHJ1bGVzIHRyYW5zbGF0ZSBmcm9tIHRoZSBwbHVyYWwgZm9ybSBvZiBhIG5vdW4gdG8gaXRzIHNpbmd1bGFyIGZvcm0uXG4gICAgKi9cbiAgICBzaW5ndWxhcl9ydWxlczogW1xuICAgICAgICBbbmV3IFJlZ0V4cCgnKG0pZW4kJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMWFuJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcocGUpb3BsZSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxcnNvbiddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKGNoaWxkKXJlbiQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKFt0aV0pYSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMXVtJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcoKGEpbmFseXwoYilhfChkKWlhZ25vfChwKWFyZW50aGV8KHApcm9nbm98KHMpeW5vcHwodCloZSlzZXMkJywnZ2knKSwgJyQxJDJzaXMnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhoaXZlKXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyh0aXZlKXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhjdXJ2ZSlzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhbbHJdKXZlcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFmJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcoW15mb10pdmVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxZmUnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhbXmFlaW91eV18cXUpaWVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDF5J10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcocyllcmllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxZXJpZXMnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhtKW92aWVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFvdmllJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcoeHxjaHxzc3xzaCllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcoW218bF0paWNlJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxb3VzZSddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKGJ1cyllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKG8pZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKHNob2UpcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKGNyaXN8YXh8dGVzdCllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMWlzJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcob2N0b3B8dmlyKWkkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxdXMnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyhhbGlhc3xzdGF0dXMpZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJ14ob3gpZW4nLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgW25ldyBSZWdFeHAoJyh2ZXJ0fGluZClpY2VzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFleCddLFxuICAgICAgICBbbmV3IFJlZ0V4cCgnKG1hdHIpaWNlcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMWl4J10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCcocXVpeil6ZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgIFtuZXcgUmVnRXhwKCdzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyddXG4gICAgXSxcblxuICAgIC8qXG4gICAgICBUaGlzIGlzIGEgbGlzdCBvZiB3b3JkcyB0aGF0IHNob3VsZCBub3QgYmUgY2FwaXRhbGl6ZWQgZm9yIHRpdGxlIGNhc2VcbiAgICAqL1xuICAgIG5vbl90aXRsZWNhc2VkX3dvcmRzOiBbXG4gICAgICAgICdhbmQnLCAnb3InLCAnbm9yJywgJ2EnLCAnYW4nLCAndGhlJywgJ3NvJywgJ2J1dCcsICd0bycsICdvZicsICdhdCcsXG4gICAgICAgICdieScsICdmcm9tJywgJ2ludG8nLCAnb24nLCAnb250bycsICdvZmYnLCAnb3V0JywgJ2luJywgJ292ZXInLFxuICAgICAgICAnd2l0aCcsICdmb3InXG4gICAgXSxcblxuICAgIC8qXG4gICAgICBUaGVzZSBhcmUgcmVndWxhciBleHByZXNzaW9ucyB1c2VkIGZvciBjb252ZXJ0aW5nIGJldHdlZW4gU3RyaW5nIGZvcm1hdHNcbiAgICAqL1xuICAgIGlkX3N1ZmZpeDogbmV3IFJlZ0V4cCgnKF9pZHN8X2lkKSQnLCAnZycpLFxuICAgIHVuZGVyYmFyOiBuZXcgUmVnRXhwKCdfJywgJ2cnKSxcbiAgICBzcGFjZV9vcl91bmRlcmJhcjogbmV3IFJlZ0V4cCgnW1xcIF9dJywgJ2cnKSxcbiAgICB1cHBlcmNhc2U6IG5ldyBSZWdFeHAoJyhbQS1aXSknLCAnZycpLFxuICAgIHVuZGVyYmFyX3ByZWZpeDogbmV3IFJlZ0V4cCgnXl8nKSxcbiAgICBcbiAgICAvKlxuICAgICAgVGhpcyBpcyBhIGhlbHBlciBtZXRob2QgdGhhdCBhcHBsaWVzIHJ1bGVzIGJhc2VkIHJlcGxhY2VtZW50IHRvIGEgU3RyaW5nXG4gICAgICBTaWduYXR1cmU6XG4gICAgICAgIEluZmxlY3Rpb25KUy5hcHBseV9ydWxlcyhzdHIsIHJ1bGVzLCBza2lwLCBvdmVycmlkZSkgPT0gU3RyaW5nXG4gICAgICBBcmd1bWVudHM6XG4gICAgICAgIHN0ciAtIFN0cmluZyAtIFN0cmluZyB0byBtb2RpZnkgYW5kIHJldHVybiBiYXNlZCBvbiB0aGUgcGFzc2VkIHJ1bGVzXG4gICAgICAgIHJ1bGVzIC0gQXJyYXk6IFtSZWdFeHAsIFN0cmluZ10gLSBSZWdleHAgdG8gbWF0Y2ggcGFpcmVkIHdpdGggU3RyaW5nIHRvIHVzZSBmb3IgcmVwbGFjZW1lbnRcbiAgICAgICAgc2tpcCAtIEFycmF5OiBbU3RyaW5nXSAtIFN0cmluZ3MgdG8gc2tpcCBpZiB0aGV5IG1hdGNoXG4gICAgICAgIG92ZXJyaWRlIC0gU3RyaW5nIChvcHRpb25hbCkgLSBTdHJpbmcgdG8gcmV0dXJuIGFzIHRob3VnaCB0aGlzIG1ldGhvZCBzdWNjZWVkZWQgKHVzZWQgdG8gY29uZm9ybSB0byBBUElzKVxuICAgICAgUmV0dXJuczpcbiAgICAgICAgU3RyaW5nIC0gcGFzc2VkIFN0cmluZyBtb2RpZmllZCBieSBwYXNzZWQgcnVsZXNcbiAgICAgIEV4YW1wbGVzOlxuICAgICAgICBJbmZsZWN0aW9uSlMuYXBwbHlfcnVsZXMoXCJjb3dzXCIsIEluZmxlY3Rpb25Kcy5zaW5ndWxhcl9ydWxlcykgPT09ICdjb3cnXG4gICAgKi9cbiAgICBhcHBseV9ydWxlczogZnVuY3Rpb24oc3RyLCBydWxlcywgc2tpcCwgb3ZlcnJpZGUpXG4gICAge1xuICAgICAgICBpZiAob3ZlcnJpZGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN0ciA9IG92ZXJyaWRlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGlnbm9yZSA9IChza2lwLmluZGV4T2Yoc3RyLnRvTG93ZXJDYXNlKCkpID4gLTEpO1xuICAgICAgICAgICAgaWYgKCFpZ25vcmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBydWxlcy5sZW5ndGg7IHgrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHIubWF0Y2gocnVsZXNbeF1bMF0pKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShydWxlc1t4XVswXSwgcnVsZXNbeF1bMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG59O1xuXG4vKlxuICBUaGlzIGxldHMgdXMgZGV0ZWN0IGlmIGFuIEFycmF5IGNvbnRhaW5zIGEgZ2l2ZW4gZWxlbWVudFxuICBTaWduYXR1cmU6XG4gICAgQXJyYXkuaW5kZXhPZihpdGVtLCBmcm9tSW5kZXgsIGNvbXBhcmVGdW5jKSA9PSBJbnRlZ2VyXG4gIEFyZ3VtZW50czpcbiAgICBpdGVtIC0gT2JqZWN0IC0gb2JqZWN0IHRvIGxvY2F0ZSBpbiB0aGUgQXJyYXlcbiAgICBmcm9tSW5kZXggLSBJbnRlZ2VyIChvcHRpb25hbCkgLSBzdGFydHMgY2hlY2tpbmcgZnJvbSB0aGlzIHBvc2l0aW9uIGluIHRoZSBBcnJheVxuICAgIGNvbXBhcmVGdW5jIC0gRnVuY3Rpb24gKG9wdGlvbmFsKSAtIGZ1bmN0aW9uIHVzZWQgdG8gY29tcGFyZSBBcnJheSBpdGVtIHZzIHBhc3NlZCBpdGVtXG4gIFJldHVybnM6XG4gICAgSW50ZWdlciAtIGluZGV4IHBvc2l0aW9uIGluIHRoZSBBcnJheSBvZiB0aGUgcGFzc2VkIGl0ZW1cbiAgRXhhbXBsZXM6XG4gICAgWydoaScsJ3RoZXJlJ10uaW5kZXhPZihcImd1eXNcIikgPT09IC0xXG4gICAgWydoaScsJ3RoZXJlJ10uaW5kZXhPZihcImhpXCIpID09PSAwXG4qL1xuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZilcbntcbiAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uKGl0ZW0sIGZyb21JbmRleCwgY29tcGFyZUZ1bmMpXG4gICAge1xuICAgICAgICBpZiAoIWZyb21JbmRleClcbiAgICAgICAge1xuICAgICAgICAgICAgZnJvbUluZGV4ID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIGZvciAodmFyIGkgPSBmcm9tSW5kZXg7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodGhpc1tpXSA9PT0gaXRlbSB8fCBjb21wYXJlRnVuYyAmJiBjb21wYXJlRnVuYyh0aGlzW2ldLCBpdGVtKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH07XG59XG5cbi8qXG4gIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBsaXN0IGZvciBhbGwgU3RyaW5ncyBvciBqdXN0IG9uZSBkZXBlbmRpbmcgb24gaWYgeW91XG4gIHNldCB0aGUgbmV3IHZhbHVlcyBvbiBwcm90b3R5cGUgb3Igb24gYSBnaXZlbiBTdHJpbmcgaW5zdGFuY2UuXG4qL1xuaWYgKCFTdHJpbmcucHJvdG90eXBlLl91bmNvdW50YWJsZV93b3JkcylcbntcbiAgICBTdHJpbmcucHJvdG90eXBlLl91bmNvdW50YWJsZV93b3JkcyA9IEluZmxlY3Rpb25KUy51bmNvdW50YWJsZV93b3Jkcztcbn1cblxuLypcbiAgWW91IGNhbiBvdmVycmlkZSB0aGlzIGxpc3QgZm9yIGFsbCBTdHJpbmdzIG9yIGp1c3Qgb25lIGRlcGVuZGluZyBvbiBpZiB5b3VcbiAgc2V0IHRoZSBuZXcgdmFsdWVzIG9uIHByb3RvdHlwZSBvciBvbiBhIGdpdmVuIFN0cmluZyBpbnN0YW5jZS5cbiovXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuX3BsdXJhbF9ydWxlcylcbntcbiAgICBTdHJpbmcucHJvdG90eXBlLl9wbHVyYWxfcnVsZXMgPSBJbmZsZWN0aW9uSlMucGx1cmFsX3J1bGVzO1xufVxuXG4vKlxuICBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgbGlzdCBmb3IgYWxsIFN0cmluZ3Mgb3IganVzdCBvbmUgZGVwZW5kaW5nIG9uIGlmIHlvdVxuICBzZXQgdGhlIG5ldyB2YWx1ZXMgb24gcHJvdG90eXBlIG9yIG9uIGEgZ2l2ZW4gU3RyaW5nIGluc3RhbmNlLlxuKi9cbmlmICghU3RyaW5nLnByb3RvdHlwZS5fc2luZ3VsYXJfcnVsZXMpXG57XG4gICAgU3RyaW5nLnByb3RvdHlwZS5fc2luZ3VsYXJfcnVsZXMgPSBJbmZsZWN0aW9uSlMuc2luZ3VsYXJfcnVsZXM7XG59XG5cbi8qXG4gIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBsaXN0IGZvciBhbGwgU3RyaW5ncyBvciBqdXN0IG9uZSBkZXBlbmRpbmcgb24gaWYgeW91XG4gIHNldCB0aGUgbmV3IHZhbHVlcyBvbiBwcm90b3R5cGUgb3Igb24gYSBnaXZlbiBTdHJpbmcgaW5zdGFuY2UuXG4qL1xuaWYgKCFTdHJpbmcucHJvdG90eXBlLl9ub25fdGl0bGVjYXNlZF93b3JkcylcbntcbiAgICBTdHJpbmcucHJvdG90eXBlLl9ub25fdGl0bGVjYXNlZF93b3JkcyA9IEluZmxlY3Rpb25KUy5ub25fdGl0bGVjYXNlZF93b3Jkcztcbn1cblxuLypcbiAgVGhpcyBmdW5jdGlvbiBhZGRzIHBsdXJpbGl6YXRpb24gc3VwcG9ydCB0byBldmVyeSBTdHJpbmcgb2JqZWN0XG4gICAgU2lnbmF0dXJlOlxuICAgICAgU3RyaW5nLnBsdXJhbGl6ZShwbHVyYWwpID09IFN0cmluZ1xuICAgIEFyZ3VtZW50czpcbiAgICAgIHBsdXJhbCAtIFN0cmluZyAob3B0aW9uYWwpIC0gb3ZlcnJpZGVzIG5vcm1hbCBvdXRwdXQgd2l0aCBzYWlkIFN0cmluZ1xuICAgIFJldHVybnM6XG4gICAgICBTdHJpbmcgLSBzaW5ndWxhciBFbmdsaXNoIGxhbmd1YWdlIG5vdW5zIGFyZSByZXR1cm5lZCBpbiBwbHVyYWwgZm9ybVxuICAgIEV4YW1wbGVzOlxuICAgICAgXCJwZXJzb25cIi5wbHVyYWxpemUoKSA9PSBcInBlb3BsZVwiXG4gICAgICBcIm9jdG9wdXNcIi5wbHVyYWxpemUoKSA9PSBcIm9jdG9waVwiXG4gICAgICBcIkhhdFwiLnBsdXJhbGl6ZSgpID09IFwiSGF0c1wiXG4gICAgICBcInBlcnNvblwiLnBsdXJhbGl6ZShcImd1eXNcIikgPT0gXCJndXlzXCJcbiovXG5pZiAoIVN0cmluZy5wcm90b3R5cGUucGx1cmFsaXplKVxue1xuICAgIFN0cmluZy5wcm90b3R5cGUucGx1cmFsaXplID0gZnVuY3Rpb24ocGx1cmFsKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIEluZmxlY3Rpb25KUy5hcHBseV9ydWxlcyhcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICB0aGlzLl9wbHVyYWxfcnVsZXMsXG4gICAgICAgICAgICB0aGlzLl91bmNvdW50YWJsZV93b3JkcyxcbiAgICAgICAgICAgIHBsdXJhbFxuICAgICAgICApO1xuICAgIH07XG59XG5cbi8qXG4gIFRoaXMgZnVuY3Rpb24gYWRkcyBzaW5ndWxhcml6YXRpb24gc3VwcG9ydCB0byBldmVyeSBTdHJpbmcgb2JqZWN0XG4gICAgU2lnbmF0dXJlOlxuICAgICAgU3RyaW5nLnNpbmd1bGFyaXplKHNpbmd1bGFyKSA9PSBTdHJpbmdcbiAgICBBcmd1bWVudHM6XG4gICAgICBzaW5ndWxhciAtIFN0cmluZyAob3B0aW9uYWwpIC0gb3ZlcnJpZGVzIG5vcm1hbCBvdXRwdXQgd2l0aCBzYWlkIFN0cmluZ1xuICAgIFJldHVybnM6XG4gICAgICBTdHJpbmcgLSBwbHVyYWwgRW5nbGlzaCBsYW5ndWFnZSBub3VucyBhcmUgcmV0dXJuZWQgaW4gc2luZ3VsYXIgZm9ybVxuICAgIEV4YW1wbGVzOlxuICAgICAgXCJwZW9wbGVcIi5zaW5ndWxhcml6ZSgpID09IFwicGVyc29uXCJcbiAgICAgIFwib2N0b3BpXCIuc2luZ3VsYXJpemUoKSA9PSBcIm9jdG9wdXNcIlxuICAgICAgXCJIYXRzXCIuc2luZ3VsYXJpemUoKSA9PSBcIkhhdFwiXG4gICAgICBcImd1eXNcIi5zaW5ndWxhcml6ZShcInBlcnNvblwiKSA9PSBcInBlcnNvblwiXG4qL1xuaWYgKCFTdHJpbmcucHJvdG90eXBlLnNpbmd1bGFyaXplKVxue1xuICAgIFN0cmluZy5wcm90b3R5cGUuc2luZ3VsYXJpemUgPSBmdW5jdGlvbihzaW5ndWxhcilcbiAgICB7XG4gICAgICAgIHJldHVybiBJbmZsZWN0aW9uSlMuYXBwbHlfcnVsZXMoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgdGhpcy5fc2luZ3VsYXJfcnVsZXMsXG4gICAgICAgICAgICB0aGlzLl91bmNvdW50YWJsZV93b3JkcyxcbiAgICAgICAgICAgIHNpbmd1bGFyXG4gICAgICAgICk7XG4gICAgfTtcbn1cblxuLypcbiAgVGhpcyBmdW5jdGlvbiBhZGRzIGNhbWVsaXphdGlvbiBzdXBwb3J0IHRvIGV2ZXJ5IFN0cmluZyBvYmplY3RcbiAgICBTaWduYXR1cmU6XG4gICAgICBTdHJpbmcuY2FtZWxpemUobG93Rmlyc3RMZXR0ZXIpID09IFN0cmluZ1xuICAgIEFyZ3VtZW50czpcbiAgICAgIGxvd0ZpcnN0TGV0dGVyIC0gYm9vbGVhbiAob3B0aW9uYWwpIC0gZGVmYXVsdCBpcyB0byBjYXBpdGFsaXplIHRoZSBmaXJzdFxuICAgICAgICBsZXR0ZXIgb2YgdGhlIHJlc3VsdHMuLi4gcGFzc2luZyB0cnVlIHdpbGwgbG93ZXJjYXNlIGl0XG4gICAgUmV0dXJuczpcbiAgICAgIFN0cmluZyAtIGxvd2VyIGNhc2UgdW5kZXJzY29yZWQgd29yZHMgd2lsbCBiZSByZXR1cm5lZCBpbiBjYW1lbCBjYXNlXG4gICAgICAgIGFkZGl0aW9uYWxseSAnLycgaXMgdHJhbnNsYXRlZCB0byAnOjonXG4gICAgRXhhbXBsZXM6XG4gICAgICBcIm1lc3NhZ2VfcHJvcGVydGllc1wiLmNhbWVsaXplKCkgPT0gXCJNZXNzYWdlUHJvcGVydGllc1wiXG4gICAgICBcIm1lc3NhZ2VfcHJvcGVydGllc1wiLmNhbWVsaXplKHRydWUpID09IFwibWVzc2FnZVByb3BlcnRpZXNcIlxuKi9cbmlmICghU3RyaW5nLnByb3RvdHlwZS5jYW1lbGl6ZSlcbntcbiAgICAgU3RyaW5nLnByb3RvdHlwZS5jYW1lbGl6ZSA9IGZ1bmN0aW9uKGxvd0ZpcnN0TGV0dGVyKVxuICAgICB7XG4gICAgICAgIHZhciBzdHIgPSB0aGlzLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciBzdHJfcGF0aCA9IHN0ci5zcGxpdCgnLycpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cl9wYXRoLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgc3RyX2FyciA9IHN0cl9wYXRoW2ldLnNwbGl0KCdfJyk7XG4gICAgICAgICAgICB2YXIgaW5pdFggPSAoKGxvd0ZpcnN0TGV0dGVyICYmIGkgKyAxID09PSBzdHJfcGF0aC5sZW5ndGgpID8gKDEpIDogKDApKTtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSBpbml0WDsgeCA8IHN0cl9hcnIubGVuZ3RoOyB4KyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3RyX2Fyclt4XSA9IHN0cl9hcnJbeF0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJfYXJyW3hdLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cl9wYXRoW2ldID0gc3RyX2Fyci5qb2luKCcnKTtcbiAgICAgICAgfVxuICAgICAgICBzdHIgPSBzdHJfcGF0aC5qb2luKCc6OicpO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH07XG59XG5cbi8qXG4gIFRoaXMgZnVuY3Rpb24gYWRkcyB1bmRlcnNjb3JlIHN1cHBvcnQgdG8gZXZlcnkgU3RyaW5nIG9iamVjdFxuICAgIFNpZ25hdHVyZTpcbiAgICAgIFN0cmluZy51bmRlcnNjb3JlKCkgPT0gU3RyaW5nXG4gICAgQXJndW1lbnRzOlxuICAgICAgTi9BXG4gICAgUmV0dXJuczpcbiAgICAgIFN0cmluZyAtIGNhbWVsIGNhc2VkIHdvcmRzIGFyZSByZXR1cm5lZCBhcyBsb3dlciBjYXNlZCBhbmQgdW5kZXJzY29yZWRcbiAgICAgICAgYWRkaXRpb25hbGx5ICc6OicgaXMgdHJhbnNsYXRlZCB0byAnLydcbiAgICBFeGFtcGxlczpcbiAgICAgIFwiTWVzc2FnZVByb3BlcnRpZXNcIi5jYW1lbGl6ZSgpID09IFwibWVzc2FnZV9wcm9wZXJ0aWVzXCJcbiAgICAgIFwibWVzc2FnZVByb3BlcnRpZXNcIi51bmRlcnNjb3JlKCkgPT0gXCJtZXNzYWdlX3Byb3BlcnRpZXNcIlxuKi9cbmlmICghU3RyaW5nLnByb3RvdHlwZS51bmRlcnNjb3JlKVxue1xuICAgICBTdHJpbmcucHJvdG90eXBlLnVuZGVyc2NvcmUgPSBmdW5jdGlvbigpXG4gICAgIHtcbiAgICAgICAgdmFyIHN0ciA9IHRoaXM7XG4gICAgICAgIHZhciBzdHJfcGF0aCA9IHN0ci5zcGxpdCgnOjonKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJfcGF0aC5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgc3RyX3BhdGhbaV0gPSBzdHJfcGF0aFtpXS5yZXBsYWNlKEluZmxlY3Rpb25KUy51cHBlcmNhc2UsICdfJDEnKTtcbiAgICAgICAgICAgIHN0cl9wYXRoW2ldID0gc3RyX3BhdGhbaV0ucmVwbGFjZShJbmZsZWN0aW9uSlMudW5kZXJiYXJfcHJlZml4LCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3RyID0gc3RyX3BhdGguam9pbignLycpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfTtcbn1cblxuLypcbiAgVGhpcyBmdW5jdGlvbiBhZGRzIGh1bWFuaXplIHN1cHBvcnQgdG8gZXZlcnkgU3RyaW5nIG9iamVjdFxuICAgIFNpZ25hdHVyZTpcbiAgICAgIFN0cmluZy5odW1hbml6ZShsb3dGaXJzdExldHRlcikgPT0gU3RyaW5nXG4gICAgQXJndW1lbnRzOlxuICAgICAgbG93Rmlyc3RMZXR0ZXIgLSBib29sZWFuIChvcHRpb25hbCkgLSBkZWZhdWx0IGlzIHRvIGNhcGl0YWxpemUgdGhlIGZpcnN0XG4gICAgICAgIGxldHRlciBvZiB0aGUgcmVzdWx0cy4uLiBwYXNzaW5nIHRydWUgd2lsbCBsb3dlcmNhc2UgaXRcbiAgICBSZXR1cm5zOlxuICAgICAgU3RyaW5nIC0gbG93ZXIgY2FzZSB1bmRlcnNjb3JlZCB3b3JkcyB3aWxsIGJlIHJldHVybmVkIGluIGh1bWFuaXplZCBmb3JtXG4gICAgRXhhbXBsZXM6XG4gICAgICBcIm1lc3NhZ2VfcHJvcGVydGllc1wiLmh1bWFuaXplKCkgPT0gXCJNZXNzYWdlIHByb3BlcnRpZXNcIlxuICAgICAgXCJtZXNzYWdlX3Byb3BlcnRpZXNcIi5odW1hbml6ZSh0cnVlKSA9PSBcIm1lc3NhZ2UgcHJvcGVydGllc1wiXG4qL1xuaWYgKCFTdHJpbmcucHJvdG90eXBlLmh1bWFuaXplKVxue1xuICAgIFN0cmluZy5wcm90b3R5cGUuaHVtYW5pemUgPSBmdW5jdGlvbihsb3dGaXJzdExldHRlcilcbiAgICB7XG4gICAgICAgIHZhciBzdHIgPSB0aGlzLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKEluZmxlY3Rpb25KUy5pZF9zdWZmaXgsICcnKTtcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoSW5mbGVjdGlvbkpTLnVuZGVyYmFyLCAnICcpO1xuICAgICAgICBpZiAoIWxvd0ZpcnN0TGV0dGVyKVxuICAgICAgICB7XG4gICAgICAgICAgICBzdHIgPSBzdHIuY2FwaXRhbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfTtcbn1cblxuLypcbiAgVGhpcyBmdW5jdGlvbiBhZGRzIGNhcGl0YWxpemF0aW9uIHN1cHBvcnQgdG8gZXZlcnkgU3RyaW5nIG9iamVjdFxuICAgIFNpZ25hdHVyZTpcbiAgICAgIFN0cmluZy5jYXBpdGFsaXplKCkgPT0gU3RyaW5nXG4gICAgQXJndW1lbnRzOlxuICAgICAgTi9BXG4gICAgUmV0dXJuczpcbiAgICAgIFN0cmluZyAtIGFsbCBjaGFyYWN0ZXJzIHdpbGwgYmUgbG93ZXIgY2FzZSBhbmQgdGhlIGZpcnN0IHdpbGwgYmUgdXBwZXJcbiAgICBFeGFtcGxlczpcbiAgICAgIFwibWVzc2FnZV9wcm9wZXJ0aWVzXCIuY2FwaXRhbGl6ZSgpID09IFwiTWVzc2FnZV9wcm9wZXJ0aWVzXCJcbiAgICAgIFwibWVzc2FnZSBwcm9wZXJ0aWVzXCIuY2FwaXRhbGl6ZSgpID09IFwiTWVzc2FnZSBwcm9wZXJ0aWVzXCJcbiovXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuY2FwaXRhbGl6ZSlcbntcbiAgICBTdHJpbmcucHJvdG90eXBlLmNhcGl0YWxpemUgPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB2YXIgc3RyID0gdGhpcy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyaW5nKDEpO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH07XG59XG5cbi8qXG4gIFRoaXMgZnVuY3Rpb24gYWRkcyBkYXNoZXJpemF0aW9uIHN1cHBvcnQgdG8gZXZlcnkgU3RyaW5nIG9iamVjdFxuICAgIFNpZ25hdHVyZTpcbiAgICAgIFN0cmluZy5kYXNoZXJpemUoKSA9PSBTdHJpbmdcbiAgICBBcmd1bWVudHM6XG4gICAgICBOL0FcbiAgICBSZXR1cm5zOlxuICAgICAgU3RyaW5nIC0gcmVwbGFjZXMgYWxsIHNwYWNlcyBvciB1bmRlcmJhcnMgd2l0aCBkYXNoZXNcbiAgICBFeGFtcGxlczpcbiAgICAgIFwibWVzc2FnZV9wcm9wZXJ0aWVzXCIuY2FwaXRhbGl6ZSgpID09IFwibWVzc2FnZS1wcm9wZXJ0aWVzXCJcbiAgICAgIFwiTWVzc2FnZSBQcm9wZXJ0aWVzXCIuY2FwaXRhbGl6ZSgpID09IFwiTWVzc2FnZS1Qcm9wZXJ0aWVzXCJcbiovXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuZGFzaGVyaXplKVxue1xuICAgIFN0cmluZy5wcm90b3R5cGUuZGFzaGVyaXplID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdmFyIHN0ciA9IHRoaXM7XG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKEluZmxlY3Rpb25KUy5zcGFjZV9vcl91bmRlcmJhciwgJy0nKTtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9O1xufVxuXG4vKlxuICBUaGlzIGZ1bmN0aW9uIGFkZHMgdGl0bGVpemUgc3VwcG9ydCB0byBldmVyeSBTdHJpbmcgb2JqZWN0XG4gICAgU2lnbmF0dXJlOlxuICAgICAgU3RyaW5nLnRpdGxlaXplKCkgPT0gU3RyaW5nXG4gICAgQXJndW1lbnRzOlxuICAgICAgTi9BXG4gICAgUmV0dXJuczpcbiAgICAgIFN0cmluZyAtIGNhcGl0YWxpemVzIHdvcmRzIGFzIHlvdSB3b3VsZCBmb3IgYSBib29rIHRpdGxlXG4gICAgRXhhbXBsZXM6XG4gICAgICBcIm1lc3NhZ2VfcHJvcGVydGllc1wiLnRpdGxlaXplKCkgPT0gXCJNZXNzYWdlIFByb3BlcnRpZXNcIlxuICAgICAgXCJtZXNzYWdlIHByb3BlcnRpZXMgdG8ga2VlcFwiLnRpdGxlaXplKCkgPT0gXCJNZXNzYWdlIFByb3BlcnRpZXMgdG8gS2VlcFwiXG4qL1xuaWYgKCFTdHJpbmcucHJvdG90eXBlLnRpdGxlaXplKVxue1xuICAgIFN0cmluZy5wcm90b3R5cGUudGl0bGVpemUgPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB2YXIgc3RyID0gdGhpcy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShJbmZsZWN0aW9uSlMudW5kZXJiYXIsICcgJyk7XG4gICAgICAgIHZhciBzdHJfYXJyID0gc3RyLnNwbGl0KCcgJyk7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgc3RyX2Fyci5sZW5ndGg7IHgrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGQgPSBzdHJfYXJyW3hdLnNwbGl0KCctJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX25vbl90aXRsZWNhc2VkX3dvcmRzLmluZGV4T2YoZFtpXS50b0xvd2VyQ2FzZSgpKSA8IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkW2ldID0gZFtpXS5jYXBpdGFsaXplKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyX2Fyclt4XSA9IGQuam9pbignLScpO1xuICAgICAgICB9XG4gICAgICAgIHN0ciA9IHN0cl9hcnIuam9pbignICcpO1xuICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyaW5nKDEpO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH07XG59XG5cbi8qXG4gIFRoaXMgZnVuY3Rpb24gYWRkcyBkZW1vZHVsaXplIHN1cHBvcnQgdG8gZXZlcnkgU3RyaW5nIG9iamVjdFxuICAgIFNpZ25hdHVyZTpcbiAgICAgIFN0cmluZy5kZW1vZHVsaXplKCkgPT0gU3RyaW5nXG4gICAgQXJndW1lbnRzOlxuICAgICAgTi9BXG4gICAgUmV0dXJuczpcbiAgICAgIFN0cmluZyAtIHJlbW92ZXMgbW9kdWxlIG5hbWVzIGxlYXZpbmcgb25seSBjbGFzcyBuYW1lcyAoUnVieSBzdHlsZSlcbiAgICBFeGFtcGxlczpcbiAgICAgIFwiTWVzc2FnZTo6QnVzOjpQcm9wZXJ0aWVzXCIuZGVtb2R1bGl6ZSgpID09IFwiUHJvcGVydGllc1wiXG4qL1xuaWYgKCFTdHJpbmcucHJvdG90eXBlLmRlbW9kdWxpemUpXG57XG4gICAgU3RyaW5nLnByb3RvdHlwZS5kZW1vZHVsaXplID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdmFyIHN0ciA9IHRoaXM7XG4gICAgICAgIHZhciBzdHJfYXJyID0gc3RyLnNwbGl0KCc6OicpO1xuICAgICAgICBzdHIgPSBzdHJfYXJyW3N0cl9hcnIubGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfTtcbn1cblxuLypcbiAgVGhpcyBmdW5jdGlvbiBhZGRzIHRhYmxlaXplIHN1cHBvcnQgdG8gZXZlcnkgU3RyaW5nIG9iamVjdFxuICAgIFNpZ25hdHVyZTpcbiAgICAgIFN0cmluZy50YWJsZWl6ZSgpID09IFN0cmluZ1xuICAgIEFyZ3VtZW50czpcbiAgICAgIE4vQVxuICAgIFJldHVybnM6XG4gICAgICBTdHJpbmcgLSByZW5kZXJzIGNhbWVsIGNhc2VkIHdvcmRzIGludG8gdGhlaXIgdW5kZXJzY29yZWQgcGx1cmFsIGZvcm1cbiAgICBFeGFtcGxlczpcbiAgICAgIFwiTWVzc2FnZUJ1c1Byb3BlcnR5XCIudGFibGVpemUoKSA9PSBcIm1lc3NhZ2VfYnVzX3Byb3BlcnRpZXNcIlxuKi9cbmlmICghU3RyaW5nLnByb3RvdHlwZS50YWJsZWl6ZSlcbntcbiAgICBTdHJpbmcucHJvdG90eXBlLnRhYmxlaXplID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdmFyIHN0ciA9IHRoaXM7XG4gICAgICAgIHN0ciA9IHN0ci51bmRlcnNjb3JlKCkucGx1cmFsaXplKCk7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfTtcbn1cblxuLypcbiAgVGhpcyBmdW5jdGlvbiBhZGRzIGNsYXNzaWZpY2F0aW9uIHN1cHBvcnQgdG8gZXZlcnkgU3RyaW5nIG9iamVjdFxuICAgIFNpZ25hdHVyZTpcbiAgICAgIFN0cmluZy5jbGFzc2lmeSgpID09IFN0cmluZ1xuICAgIEFyZ3VtZW50czpcbiAgICAgIE4vQVxuICAgIFJldHVybnM6XG4gICAgICBTdHJpbmcgLSB1bmRlcnNjb3JlZCBwbHVyYWwgbm91bnMgYmVjb21lIHRoZSBjYW1lbCBjYXNlZCBzaW5ndWxhciBmb3JtXG4gICAgRXhhbXBsZXM6XG4gICAgICBcIm1lc3NhZ2VfYnVzX3Byb3BlcnRpZXNcIi5jbGFzc2lmeSgpID09IFwiTWVzc2FnZUJ1c1Byb3BlcnR5XCJcbiovXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuY2xhc3NpZnkpXG57XG4gICAgU3RyaW5nLnByb3RvdHlwZS5jbGFzc2lmeSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHZhciBzdHIgPSB0aGlzO1xuICAgICAgICBzdHIgPSBzdHIuY2FtZWxpemUoKS5zaW5ndWxhcml6ZSgpO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH07XG59XG5cbi8qXG4gIFRoaXMgZnVuY3Rpb24gYWRkcyBmb3JlaWduIGtleSBzdXBwb3J0IHRvIGV2ZXJ5IFN0cmluZyBvYmplY3RcbiAgICBTaWduYXR1cmU6XG4gICAgICBTdHJpbmcuZm9yZWlnbl9rZXkoZHJvcElkVWJhcikgPT0gU3RyaW5nXG4gICAgQXJndW1lbnRzOlxuICAgICAgZHJvcElkVWJhciAtIGJvb2xlYW4gKG9wdGlvbmFsKSAtIGRlZmF1bHQgaXMgdG8gc2VwZXJhdGUgaWQgd2l0aCBhblxuICAgICAgICB1bmRlcmJhciBhdCB0aGUgZW5kIG9mIHRoZSBjbGFzcyBuYW1lLCB5b3UgY2FuIHBhc3MgdHJ1ZSB0byBza2lwIGl0XG4gICAgUmV0dXJuczpcbiAgICAgIFN0cmluZyAtIGNhbWVsIGNhc2VkIHNpbmd1bGFyIGNsYXNzIG5hbWVzIGJlY29tZSB1bmRlcnNjb3JlZCB3aXRoIGlkXG4gICAgRXhhbXBsZXM6XG4gICAgICBcIk1lc3NhZ2VCdXNQcm9wZXJ0eVwiLmZvcmVpZ25fa2V5KCkgPT0gXCJtZXNzYWdlX2J1c19wcm9wZXJ0eV9pZFwiXG4gICAgICBcIk1lc3NhZ2VCdXNQcm9wZXJ0eVwiLmZvcmVpZ25fa2V5KHRydWUpID09IFwibWVzc2FnZV9idXNfcHJvcGVydHlpZFwiXG4qL1xuaWYgKCFTdHJpbmcucHJvdG90eXBlLmZvcmVpZ25fa2V5KVxue1xuICAgIFN0cmluZy5wcm90b3R5cGUuZm9yZWlnbl9rZXkgPSBmdW5jdGlvbihkcm9wSWRVYmFyKVxuICAgIHtcbiAgICAgICAgdmFyIHN0ciA9IHRoaXM7XG4gICAgICAgIHN0ciA9IHN0ci5kZW1vZHVsaXplKCkudW5kZXJzY29yZSgpICsgKChkcm9wSWRVYmFyKSA/ICgnJykgOiAoJ18nKSkgKyAnaWQnO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH07XG59XG5cbi8qXG4gIFRoaXMgZnVuY3Rpb24gYWRkcyBvcmRpbmFsaXplIHN1cHBvcnQgdG8gZXZlcnkgU3RyaW5nIG9iamVjdFxuICAgIFNpZ25hdHVyZTpcbiAgICAgIFN0cmluZy5vcmRpbmFsaXplKCkgPT0gU3RyaW5nXG4gICAgQXJndW1lbnRzOlxuICAgICAgTi9BXG4gICAgUmV0dXJuczpcbiAgICAgIFN0cmluZyAtIHJlbmRlcnMgYWxsIGZvdW5kIG51bWJlcnMgdGhlaXIgc2VxdWVuY2UgbGlrZSBcIjIybmRcIlxuICAgIEV4YW1wbGVzOlxuICAgICAgXCJ0aGUgMSBwaXRjaFwiLm9yZGluYWxpemUoKSA9PSBcInRoZSAxc3QgcGl0Y2hcIlxuKi9cbmlmICghU3RyaW5nLnByb3RvdHlwZS5vcmRpbmFsaXplKVxue1xuICAgIFN0cmluZy5wcm90b3R5cGUub3JkaW5hbGl6ZSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHZhciBzdHIgPSB0aGlzO1xuICAgICAgICB2YXIgc3RyX2FyciA9IHN0ci5zcGxpdCgnICcpO1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN0cl9hcnIubGVuZ3RoOyB4KyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBpID0gcGFyc2VJbnQoc3RyX2Fyclt4XSk7XG4gICAgICAgICAgICBpZiAoaSA9PT0gTmFOKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBsdGQgPSBzdHJfYXJyW3hdLnN1YnN0cmluZyhzdHJfYXJyW3hdLmxlbmd0aCAtIDIpO1xuICAgICAgICAgICAgICAgIHZhciBsZCA9IHN0cl9hcnJbeF0uc3Vic3RyaW5nKHN0cl9hcnJbeF0ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgdmFyIHN1ZiA9IFwidGhcIjtcbiAgICAgICAgICAgICAgICBpZiAobHRkICE9IFwiMTFcIiAmJiBsdGQgIT0gXCIxMlwiICYmIGx0ZCAhPSBcIjEzXCIpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGQgPT09IFwiMVwiKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWYgPSBcInN0XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGQgPT09IFwiMlwiKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWYgPSBcIm5kXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGQgPT09IFwiM1wiKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWYgPSBcInJkXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RyX2Fyclt4XSArPSBzdWY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RyID0gc3RyX2Fyci5qb2luKCcgJyk7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfTtcbn1cbiIsIihmdW5jdGlvbiAoJCkge1xuXHRcdFxuXHRcdHZhciBkYXlzSW5XZWVrID0gW1wiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLCBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIl07XG5cdFx0dmFyIHNob3J0TW9udGhzSW5ZZWFyID0gW1wiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwXCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdO1xuXHRcdHZhciBsb25nTW9udGhzSW5ZZWFyID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl07XG5cdFx0dmFyIHNob3J0TW9udGhzVG9OdW1iZXIgPSBbXTtcblx0XHRzaG9ydE1vbnRoc1RvTnVtYmVyW1wiSmFuXCJdID0gXCIwMVwiO1xuXHRcdHNob3J0TW9udGhzVG9OdW1iZXJbXCJGZWJcIl0gPSBcIjAyXCI7XG5cdFx0c2hvcnRNb250aHNUb051bWJlcltcIk1hclwiXSA9IFwiMDNcIjtcblx0XHRzaG9ydE1vbnRoc1RvTnVtYmVyW1wiQXByXCJdID0gXCIwNFwiO1xuXHRcdHNob3J0TW9udGhzVG9OdW1iZXJbXCJNYXlcIl0gPSBcIjA1XCI7XG5cdFx0c2hvcnRNb250aHNUb051bWJlcltcIkp1blwiXSA9IFwiMDZcIjtcblx0XHRzaG9ydE1vbnRoc1RvTnVtYmVyW1wiSnVsXCJdID0gXCIwN1wiO1xuXHRcdHNob3J0TW9udGhzVG9OdW1iZXJbXCJBdWdcIl0gPSBcIjA4XCI7XG5cdFx0c2hvcnRNb250aHNUb051bWJlcltcIlNlcFwiXSA9IFwiMDlcIjtcblx0XHRzaG9ydE1vbnRoc1RvTnVtYmVyW1wiT2N0XCJdID0gXCIxMFwiO1xuXHRcdHNob3J0TW9udGhzVG9OdW1iZXJbXCJOb3ZcIl0gPSBcIjExXCI7XG5cdFx0c2hvcnRNb250aHNUb051bWJlcltcIkRlY1wiXSA9IFwiMTJcIjtcblx0XG4gICAgJC5mb3JtYXQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBzdHJEYXkodmFsdWUpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gZGF5c0luV2Vla1twYXJzZUludCh2YWx1ZSwgMTApXSB8fCB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN0ck1vbnRoKHZhbHVlKSB7XG5cdFx0XHRcdFx0XHR2YXIgbW9udGhBcnJheUluZGV4ID0gcGFyc2VJbnQodmFsdWUsIDEwKSAtIDE7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIHNob3J0TW9udGhzSW5ZZWFyW21vbnRoQXJyYXlJbmRleF0gfHwgdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdHJMb25nTW9udGgodmFsdWUpIHtcblx0XHRcdFx0XHR2YXIgbW9udGhBcnJheUluZGV4ID0gcGFyc2VJbnQodmFsdWUsIDEwKSAtIDE7XG5cdFx0XHRcdFx0cmV0dXJuIGxvbmdNb250aHNJblllYXJbbW9udGhBcnJheUluZGV4XSB8fCB2YWx1ZTtcdFx0XHRcdFx0XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGFyc2VNb250aCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0XHRcdHJldHVybiBzaG9ydE1vbnRoc1RvTnVtYmVyW3ZhbHVlXSB8fCB2YWx1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcGFyc2VUaW1lID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIG1pbGxpcyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKHJldFZhbHVlLmluZGV4T2YoXCIuXCIpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVsaW1pdGVkID0gcmV0VmFsdWUuc3BsaXQoJy4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0VmFsdWUgPSBkZWxpbWl0ZWRbMF07XG4gICAgICAgICAgICAgICAgICAgIG1pbGxpcyA9IGRlbGltaXRlZFsxXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzMyA9IHJldFZhbHVlLnNwbGl0KFwiOlwiKTtcblxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXMzLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICBob3VyID0gdmFsdWVzM1swXTtcbiAgICAgICAgICAgICAgICAgICAgbWludXRlID0gdmFsdWVzM1sxXTtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kID0gdmFsdWVzM1syXTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogcmV0VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiBob3VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiBtaW51dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmQ6IHNlY29uZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbGxpczogbWlsbGlzXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWlsbGlzOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0ZTogZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAvKiBcblx0XHRcdFx0XHR2YWx1ZSA9IG5ldyBqYXZhLnV0aWwuRGF0ZSgpXG4gICAgICAgICAgICAgICAgIFx0MjAwOS0xMi0xOCAxMDo1NDo1MC41NDYgXG5cdFx0XHRcdCovXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeWVhciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb250aCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXlPZk1vbnRoID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRheU9mV2VlayA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5nZXRGdWxsWWVhciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyID0gdmFsdWUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoID0gdmFsdWUuZ2V0TW9udGgoKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoID0gdmFsdWUuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF5T2ZXZWVrID0gdmFsdWUuZ2V0RGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lID0gcGFyc2VUaW1lKHZhbHVlLnRvVGltZVN0cmluZygpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICh2YWx1ZS5zZWFyY2goL1xcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn06XFxkezJ9XFwuP1xcZHswLDN9Wy0rXT9cXGR7Mn06XFxkezJ9LykgIT0gLTEpIHsgLyogMjAwOS0wNC0xOVQxNjoxMTowNSswMjowMCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHZhbHVlLnNwbGl0KC9bVFxcKy1dLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyID0gdmFsdWVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGggPSB2YWx1ZXNbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoID0gdmFsdWVzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZSA9IHBhcnNlVGltZSh2YWx1ZXNbM10uc3BsaXQoXCIuXCIpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheU9mTW9udGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF5T2ZXZWVrID0gZGF0ZS5nZXREYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSB2YWx1ZS5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBXZWQgSmFuIDEzIDEwOjQzOjQxIENFVCAyMDEwICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhciA9IHZhbHVlc1s1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aCA9IHBhcnNlTW9udGgodmFsdWVzWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoID0gdmFsdWVzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSBwYXJzZVRpbWUodmFsdWVzWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlPZk1vbnRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlPZldlZWsgPSBkYXRlLmdldERheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIDIwMDktMTItMTggMTA6NTQ6NTAuNTQ2ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlczIgPSB2YWx1ZXNbMF0uc3BsaXQoXCItXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXIgPSB2YWx1ZXMyWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoID0gdmFsdWVzMlsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoID0gdmFsdWVzMlsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lID0gcGFyc2VUaW1lKHZhbHVlc1sxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5T2ZNb250aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5T2ZXZWVrID0gZGF0ZS5nZXREYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUdWUgTWFyIDAxIDIwMTEgMTI6MDE6NDIgR01ULTA4MDAgKFBTVCkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmFkZGVkIGJ5IExhcnJ5LCBmb3IgRnJpIEFwciAwOCAyMDExIDAwOjAwOjAwIEdNVCswODAwIChDaGluYSBTdGFuZGFyZCBUaW1lKSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBhZGRlZCBieSBMYXJyeSwgZm9yIEZyaSBBcHIgMDggMjAxMSAwMDowMDowMCBHTVQrMDIwMCAoVy4gRXVyb3BlIERheWxpZ2h0IFRpbWUpICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhciA9IHZhbHVlc1szXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aCA9IHBhcnNlTW9udGgodmFsdWVzWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlPZk1vbnRoID0gdmFsdWVzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSBwYXJzZVRpbWUodmFsdWVzWzRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlPZk1vbnRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlPZldlZWsgPSBkYXRlLmdldERheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXRWYWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIC8qXG5cdFx0XHRcdFx0XHRJc3N1ZSAxIC0gdmFyaWFibGUgc2NvcGUgaXNzdWUgaW4gZm9ybWF0LmRhdGUgXG4gICAgICAgICAgICAgICAgICAgIFx0VGhhbmtzIGpha2Vtb25PXG5cdFx0XHRcdFx0Ki9cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3JtYXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UGF0dGVybiA9IGZvcm1hdC5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGN1cnJlbnRQYXR0ZXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGRkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0VmFsdWUgKz0gc3RyRGF5KGRheU9mV2Vlayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0LmNoYXJBdChpICsgMSkgPT0gXCJkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTdHJpbmcoZGF5T2ZNb250aCkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheU9mTW9udGggPSAnMCcgKyBkYXlPZk1vbnRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRWYWx1ZSArPSBkYXlPZk1vbnRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRWYWx1ZSArPSBzdHJMb25nTW9udGgobW9udGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk1NTVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtYXQuY2hhckF0KGkgKyAxKSA9PT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldFZhbHVlICs9IHN0ck1vbnRoKG1vbnRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtYXQuY2hhckF0KGkgKyAxKSA9PSBcIk1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN0cmluZyhtb250aCkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoID0gJzAnICsgbW9udGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldFZhbHVlICs9IG1vbnRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInl5eXlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRWYWx1ZSArPSB5ZWFyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkhIXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0VmFsdWUgKz0gdGltZS5ob3VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhoXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdGltZS5ob3VyIGlzIFwiMDBcIiBhcyBzdHJpbmcgPT0gaXMgdXNlZCBpbnN0ZWFkIG9mID09PSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldFZhbHVlICs9ICh0aW1lLmhvdXIgPT0gMCA/IDEyIDogdGltZS5ob3VyIDwgMTMgPyB0aW1lLmhvdXIgOiB0aW1lLmhvdXIgLSAxMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibW1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRWYWx1ZSArPSB0aW1lLm1pbnV0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzc1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVuc3VyZSBvbmx5IHNlY29uZHMgYXJlIGFkZGVkIHRvIHRoZSByZXR1cm4gc3RyaW5nICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0VmFsdWUgKz0gdGltZS5zZWNvbmQuc3Vic3RyaW5nKDAsIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNTU1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldFZhbHVlICs9IHRpbWUubWlsbGlzLnN1YnN0cmluZygwLCAzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0VmFsdWUgKz0gdGltZS5ob3VyID49IDEyID8gXCJQTVwiIDogXCJBTVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRWYWx1ZSArPSBjdXJyZW50UGF0dGVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIvXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0VmFsdWUgKz0gY3VycmVudFBhdHRlcm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiOlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldFZhbHVlICs9IGN1cnJlbnRQYXR0ZXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5sZW5ndGggPT09IDIgJiYgcGF0dGVybi5pbmRleE9mKFwieVwiKSAhPT0gMCAmJiBwYXR0ZXJuICE9IFwiU1NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRWYWx1ZSArPSBwYXR0ZXJuLnN1YnN0cmluZygwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IHBhdHRlcm4uc3Vic3RyaW5nKDEsIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKHBhdHRlcm4ubGVuZ3RoID09PSAzICYmIHBhdHRlcm4uaW5kZXhPZihcInl5eVwiKSA9PT0gLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0VmFsdWU7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KCkpO1xufShqUXVlcnkpKTtcblxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJChcIi5zaG9ydERhdGVGb3JtYXRcIikuZWFjaChmdW5jdGlvbiAoaWR4LCBlbGVtKSB7XG4gICAgICAgIGlmICgkKGVsZW0pLmlzKFwiOmlucHV0XCIpKSB7XG4gICAgICAgICAgICAkKGVsZW0pLnZhbCgkLmZvcm1hdC5kYXRlKCQoZWxlbSkudmFsKCksIFwiZGQvTU0veXl5eVwiKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGVsZW0pLnRleHQoJC5mb3JtYXQuZGF0ZSgkKGVsZW0pLnRleHQoKSwgXCJkZC9NTS95eXl5XCIpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoXCIubG9uZ0RhdGVGb3JtYXRcIikuZWFjaChmdW5jdGlvbiAoaWR4LCBlbGVtKSB7XG4gICAgICAgIGlmICgkKGVsZW0pLmlzKFwiOmlucHV0XCIpKSB7XG4gICAgICAgICAgICAkKGVsZW0pLnZhbCgkLmZvcm1hdC5kYXRlKCQoZWxlbSkudmFsKCksIFwiZGQvTU0veXl5eSBoaDptbTpzc1wiKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGVsZW0pLnRleHQoJC5mb3JtYXQuZGF0ZSgkKGVsZW0pLnRleHQoKSwgXCJkZC9NTS95eXl5IGhoOm1tOnNzXCIpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG4iLCJqUXVlcnkuZm4udGFibGUyQ1NWID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7XG4gICAgICAgIHNlcGFyYXRvcjogJywnLFxuICAgICAgICBoZWFkZXI6IFtdLFxuICAgICAgICBkZWxpdmVyeTogJ3BvcHVwJyAvLyBwb3B1cCwgdmFsdWVcbiAgICB9LFxuICAgIG9wdGlvbnMpO1xuXG4gICAgdmFyIGNzdkRhdGEgPSBbXTtcbiAgICB2YXIgaGVhZGVyQXJyID0gW107XG4gICAgdmFyIGVsID0gdGhpcztcblxuICAgIC8vaGVhZGVyXG4gICAgdmFyIG51bUNvbHMgPSBvcHRpb25zLmhlYWRlci5sZW5ndGg7XG4gICAgdmFyIHRtcFJvdyA9IFtdOyAvLyBjb25zdHJ1Y3QgaGVhZGVyIGF2YWxpYmxlIGFycmF5XG5cbiAgICBpZiAobnVtQ29scyA+IDApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1Db2xzOyBpKyspIHtcbiAgICAgICAgICAgIHRtcFJvd1t0bXBSb3cubGVuZ3RoXSA9IGZvcm1hdERhdGEob3B0aW9ucy5oZWFkZXJbaV0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChlbCkuZmlsdGVyKCc6dmlzaWJsZScpLmZpbmQoJ3RoJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmNzcygnZGlzcGxheScpICE9ICdub25lJykgdG1wUm93W3RtcFJvdy5sZW5ndGhdID0gZm9ybWF0RGF0YSgkKHRoaXMpLmh0bWwoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJvdzJDU1YodG1wUm93KTtcblxuICAgIC8vIGFjdHVhbCBkYXRhXG4gICAgJChlbCkuZmluZCgndHInKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdG1wUm93ID0gW107XG4gICAgICAgICQodGhpcykuZmlsdGVyKCc6dmlzaWJsZScpLmZpbmQoJ3RkJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmNzcygnZGlzcGxheScpICE9ICdub25lJykgdG1wUm93W3RtcFJvdy5sZW5ndGhdID0gZm9ybWF0RGF0YSgkKHRoaXMpLmh0bWwoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByb3cyQ1NWKHRtcFJvdyk7XG4gICAgfSk7XG4gICAgaWYgKG9wdGlvbnMuZGVsaXZlcnkgPT0gJ3BvcHVwJykge1xuICAgICAgICB2YXIgbXlkYXRhID0gY3N2RGF0YS5qb2luKCdcXG4nKTtcbiAgICAgICAgcmV0dXJuIHBvcHVwKG15ZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG15ZGF0YSA9IGNzdkRhdGEuam9pbignXFxuJyk7XG4gICAgICAgIHJldHVybiBteWRhdGE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcm93MkNTVih0bXBSb3cpIHtcbiAgICAgICAgdmFyIHRtcCA9IHRtcFJvdy5qb2luKCcnKSAvLyB0byByZW1vdmUgYW55IGJsYW5rIHJvd3NcbiAgICAgICAgLy8gYWxlcnQodG1wKTtcbiAgICAgICAgaWYgKHRtcFJvdy5sZW5ndGggPiAwICYmIHRtcCAhPSAnJykge1xuICAgICAgICAgICAgdmFyIG15c3RyID0gdG1wUm93LmpvaW4ob3B0aW9ucy5zZXBhcmF0b3IpO1xuICAgICAgICAgICAgY3N2RGF0YVtjc3ZEYXRhLmxlbmd0aF0gPSBteXN0cjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmb3JtYXREYXRhKGlucHV0KSB7XG4gICAgICAgIC8vIHJlcGxhY2UgXCIgd2l0aCDigJxcbiAgICAgICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoL1tcIl0vZyk7XG4gICAgICAgIHZhciBvdXRwdXQgPSBpbnB1dC5yZXBsYWNlKHJlZ2V4cCwgXCLigJxcIik7XG4gICAgICAgIC8vSFRNTFxuICAgICAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgvXFw8W15cXDxdK1xcPi9nKTtcbiAgICAgICAgdmFyIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKHJlZ2V4cCwgXCJcIik7XG4gICAgICAgIGlmIChvdXRwdXQgPT0gXCJcIikgcmV0dXJuICcnO1xuICAgICAgICByZXR1cm4gJ1wiJyArIG91dHB1dCArICdcIic7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvcHVwKGRhdGEpIHtcbiAgICAgICAgdmFyIGdlbmVyYXRvciA9IHdpbmRvdy5vcGVuKCcnLCAnY3N2JywgJ2hlaWdodD00MDAsd2lkdGg9NjAwJyk7XG4gICAgICAgIGdlbmVyYXRvci5kb2N1bWVudC53cml0ZSgnPGh0bWw+PGhlYWQ+PHRpdGxlPkNTVjwvdGl0bGU+Jyk7XG4gICAgICAgIGdlbmVyYXRvci5kb2N1bWVudC53cml0ZSgnPC9oZWFkPjxib2R5ID4nKTtcbiAgICAgICAgZ2VuZXJhdG9yLmRvY3VtZW50LndyaXRlKCc8dGV4dEFyZWEgY29scz03MCByb3dzPTE1IHdyYXA9XCJvZmZcIiA+Jyk7XG4gICAgICAgIGdlbmVyYXRvci5kb2N1bWVudC53cml0ZShkYXRhKTtcbiAgICAgICAgZ2VuZXJhdG9yLmRvY3VtZW50LndyaXRlKCc8L3RleHRBcmVhPicpO1xuICAgICAgICBnZW5lcmF0b3IuZG9jdW1lbnQud3JpdGUoJzwvYm9keT48L2h0bWw+Jyk7XG4gICAgICAgIGdlbmVyYXRvci5kb2N1bWVudC5jbG9zZSgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59OyIsIlxuKGZ1bmN0aW9uKCQpeyQuZXh0ZW5kKHt0YWJsZXNvcnRlcjpuZXdcbmZ1bmN0aW9uKCl7dmFyIHBhcnNlcnM9W10sd2lkZ2V0cz1bXTt0aGlzLmRlZmF1bHRzPXtjc3NIZWFkZXI6XCJoZWFkZXJcIixjc3NBc2M6XCJoZWFkZXJTb3J0VXBcIixjc3NEZXNjOlwiaGVhZGVyU29ydERvd25cIixjc3NDaGlsZFJvdzpcImV4cGFuZC1jaGlsZFwiLHNvcnRJbml0aWFsT3JkZXI6XCJhc2NcIixzb3J0TXVsdGlTb3J0S2V5Olwic2hpZnRLZXlcIixzb3J0Rm9yY2U6bnVsbCxzb3J0QXBwZW5kOm51bGwsc29ydExvY2FsZUNvbXBhcmU6dHJ1ZSx0ZXh0RXh0cmFjdGlvbjpcInNpbXBsZVwiLHBhcnNlcnM6e30sd2lkZ2V0czpbXSx3aWRnZXRaZWJyYTp7Y3NzOltcImV2ZW5cIixcIm9kZFwiXX0saGVhZGVyczp7fSx3aWR0aEZpeGVkOmZhbHNlLGNhbmNlbFNlbGVjdGlvbjp0cnVlLHNvcnRMaXN0OltdLGhlYWRlckxpc3Q6W10sZGF0ZUZvcm1hdDpcInVzXCIsZGVjaW1hbDonL1xcLnxcXCwvZycsb25SZW5kZXJIZWFkZXI6bnVsbCxzZWxlY3RvckhlYWRlcnM6J3RoZWFkIHRoJyxkZWJ1ZzpmYWxzZX07ZnVuY3Rpb24gYmVuY2htYXJrKHMsZCl7bG9nKHMrXCIsXCIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLWQuZ2V0VGltZSgpKStcIm1zXCIpO310aGlzLmJlbmNobWFyaz1iZW5jaG1hcms7ZnVuY3Rpb24gbG9nKHMpe2lmKHR5cGVvZiBjb25zb2xlIT1cInVuZGVmaW5lZFwiJiZ0eXBlb2YgY29uc29sZS5kZWJ1ZyE9XCJ1bmRlZmluZWRcIil7Y29uc29sZS5sb2cocyk7fWVsc2V7YWxlcnQocyk7fX1mdW5jdGlvbiBidWlsZFBhcnNlckNhY2hlKHRhYmxlLCRoZWFkZXJzKXtpZih0YWJsZS5jb25maWcuZGVidWcpe3ZhciBwYXJzZXJzRGVidWc9XCJcIjt9aWYodGFibGUudEJvZGllcy5sZW5ndGg9PTApcmV0dXJuO3ZhciByb3dzPXRhYmxlLnRCb2RpZXNbMF0ucm93cztpZihyb3dzWzBdKXt2YXIgbGlzdD1bXSxjZWxscz1yb3dzWzBdLmNlbGxzLGw9Y2VsbHMubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe3ZhciBwPWZhbHNlO2lmKCQubWV0YWRhdGEmJigkKCRoZWFkZXJzW2ldKS5tZXRhZGF0YSgpJiYkKCRoZWFkZXJzW2ldKS5tZXRhZGF0YSgpLnNvcnRlcikpe3A9Z2V0UGFyc2VyQnlJZCgkKCRoZWFkZXJzW2ldKS5tZXRhZGF0YSgpLnNvcnRlcik7fWVsc2UgaWYoKHRhYmxlLmNvbmZpZy5oZWFkZXJzW2ldJiZ0YWJsZS5jb25maWcuaGVhZGVyc1tpXS5zb3J0ZXIpKXtwPWdldFBhcnNlckJ5SWQodGFibGUuY29uZmlnLmhlYWRlcnNbaV0uc29ydGVyKTt9aWYoIXApe3A9ZGV0ZWN0UGFyc2VyRm9yQ29sdW1uKHRhYmxlLHJvd3MsLTEsaSk7fWlmKHRhYmxlLmNvbmZpZy5kZWJ1Zyl7cGFyc2Vyc0RlYnVnKz1cImNvbHVtbjpcIitpK1wiIHBhcnNlcjpcIitwLmlkK1wiXFxuXCI7fWxpc3QucHVzaChwKTt9fWlmKHRhYmxlLmNvbmZpZy5kZWJ1Zyl7bG9nKHBhcnNlcnNEZWJ1Zyk7fXJldHVybiBsaXN0O307ZnVuY3Rpb24gZGV0ZWN0UGFyc2VyRm9yQ29sdW1uKHRhYmxlLHJvd3Mscm93SW5kZXgsY2VsbEluZGV4KXt2YXIgbD1wYXJzZXJzLmxlbmd0aCxub2RlPWZhbHNlLG5vZGVWYWx1ZT1mYWxzZSxrZWVwTG9va2luZz10cnVlO3doaWxlKG5vZGVWYWx1ZT09JycmJmtlZXBMb29raW5nKXtyb3dJbmRleCsrO2lmKHJvd3Nbcm93SW5kZXhdKXtub2RlPWdldE5vZGVGcm9tUm93QW5kQ2VsbEluZGV4KHJvd3Mscm93SW5kZXgsY2VsbEluZGV4KTtub2RlVmFsdWU9dHJpbUFuZEdldE5vZGVUZXh0KHRhYmxlLmNvbmZpZyxub2RlKTtpZih0YWJsZS5jb25maWcuZGVidWcpe2xvZygnQ2hlY2tpbmcgaWYgdmFsdWUgd2FzIGVtcHR5IG9uIHJvdzonK3Jvd0luZGV4KTt9fWVsc2V7a2VlcExvb2tpbmc9ZmFsc2U7fX1mb3IodmFyIGk9MTtpPGw7aSsrKXtpZihwYXJzZXJzW2ldLmlzKG5vZGVWYWx1ZSx0YWJsZSxub2RlKSl7cmV0dXJuIHBhcnNlcnNbaV07fX1yZXR1cm4gcGFyc2Vyc1swXTt9ZnVuY3Rpb24gZ2V0Tm9kZUZyb21Sb3dBbmRDZWxsSW5kZXgocm93cyxyb3dJbmRleCxjZWxsSW5kZXgpe3JldHVybiByb3dzW3Jvd0luZGV4XS5jZWxsc1tjZWxsSW5kZXhdO31mdW5jdGlvbiB0cmltQW5kR2V0Tm9kZVRleHQoY29uZmlnLG5vZGUpe3JldHVybiAkLnRyaW0oZ2V0RWxlbWVudFRleHQoY29uZmlnLG5vZGUpKTt9ZnVuY3Rpb24gZ2V0UGFyc2VyQnlJZChuYW1lKXt2YXIgbD1wYXJzZXJzLmxlbmd0aDtmb3IodmFyIGk9MDtpPGw7aSsrKXtpZihwYXJzZXJzW2ldLmlkLnRvTG93ZXJDYXNlKCk9PW5hbWUudG9Mb3dlckNhc2UoKSl7cmV0dXJuIHBhcnNlcnNbaV07fX1yZXR1cm4gZmFsc2U7fWZ1bmN0aW9uIGJ1aWxkQ2FjaGUodGFibGUpe2lmKHRhYmxlLmNvbmZpZy5kZWJ1Zyl7dmFyIGNhY2hlVGltZT1uZXcgRGF0ZSgpO312YXIgdG90YWxSb3dzPSh0YWJsZS50Qm9kaWVzWzBdJiZ0YWJsZS50Qm9kaWVzWzBdLnJvd3MubGVuZ3RoKXx8MCx0b3RhbENlbGxzPSh0YWJsZS50Qm9kaWVzWzBdLnJvd3NbMF0mJnRhYmxlLnRCb2RpZXNbMF0ucm93c1swXS5jZWxscy5sZW5ndGgpfHwwLHBhcnNlcnM9dGFibGUuY29uZmlnLnBhcnNlcnMsY2FjaGU9e3JvdzpbXSxub3JtYWxpemVkOltdfTtmb3IodmFyIGk9MDtpPHRvdGFsUm93czsrK2kpe3ZhciBjPSQodGFibGUudEJvZGllc1swXS5yb3dzW2ldKSxjb2xzPVtdO2lmKGMuaGFzQ2xhc3ModGFibGUuY29uZmlnLmNzc0NoaWxkUm93KSl7Y2FjaGUucm93W2NhY2hlLnJvdy5sZW5ndGgtMV09Y2FjaGUucm93W2NhY2hlLnJvdy5sZW5ndGgtMV0uYWRkKGMpO2NvbnRpbnVlO31jYWNoZS5yb3cucHVzaChjKTtmb3IodmFyIGo9MDtqPHRvdGFsQ2VsbHM7KytqKXtjb2xzLnB1c2gocGFyc2Vyc1tqXS5mb3JtYXQoZ2V0RWxlbWVudFRleHQodGFibGUuY29uZmlnLGNbMF0uY2VsbHNbal0pLHRhYmxlLGNbMF0uY2VsbHNbal0pKTt9Y29scy5wdXNoKGNhY2hlLm5vcm1hbGl6ZWQubGVuZ3RoKTtjYWNoZS5ub3JtYWxpemVkLnB1c2goY29scyk7Y29scz1udWxsO307aWYodGFibGUuY29uZmlnLmRlYnVnKXtiZW5jaG1hcmsoXCJCdWlsZGluZyBjYWNoZSBmb3IgXCIrdG90YWxSb3dzK1wiIHJvd3M6XCIsY2FjaGVUaW1lKTt9cmV0dXJuIGNhY2hlO307ZnVuY3Rpb24gZ2V0RWxlbWVudFRleHQoY29uZmlnLG5vZGUpe3ZhciB0ZXh0PVwiXCI7aWYoIW5vZGUpcmV0dXJuXCJcIjtpZighY29uZmlnLnN1cHBvcnRzVGV4dENvbnRlbnQpY29uZmlnLnN1cHBvcnRzVGV4dENvbnRlbnQ9bm9kZS50ZXh0Q29udGVudHx8ZmFsc2U7aWYoY29uZmlnLnRleHRFeHRyYWN0aW9uPT1cInNpbXBsZVwiKXtpZihjb25maWcuc3VwcG9ydHNUZXh0Q29udGVudCl7dGV4dD1ub2RlLnRleHRDb250ZW50O31lbHNle2lmKG5vZGUuY2hpbGROb2Rlc1swXSYmbm9kZS5jaGlsZE5vZGVzWzBdLmhhc0NoaWxkTm9kZXMoKSl7dGV4dD1ub2RlLmNoaWxkTm9kZXNbMF0uaW5uZXJIVE1MO31lbHNle3RleHQ9bm9kZS5pbm5lckhUTUw7fX19ZWxzZXtpZih0eXBlb2YoY29uZmlnLnRleHRFeHRyYWN0aW9uKT09XCJmdW5jdGlvblwiKXt0ZXh0PWNvbmZpZy50ZXh0RXh0cmFjdGlvbihub2RlKTt9ZWxzZXt0ZXh0PSQobm9kZSkudGV4dCgpO319cmV0dXJuIHRleHQ7fWZ1bmN0aW9uIGFwcGVuZFRvVGFibGUodGFibGUsY2FjaGUpe2lmKHRhYmxlLmNvbmZpZy5kZWJ1Zyl7dmFyIGFwcGVuZFRpbWU9bmV3IERhdGUoKX12YXIgYz1jYWNoZSxyPWMucm93LG49Yy5ub3JtYWxpemVkLHRvdGFsUm93cz1uLmxlbmd0aCxjaGVja0NlbGw9KG5bMF0ubGVuZ3RoLTEpLHRhYmxlQm9keT0kKHRhYmxlLnRCb2RpZXNbMF0pLHJvd3M9W107Zm9yKHZhciBpPTA7aTx0b3RhbFJvd3M7aSsrKXt2YXIgcG9zPW5baV1bY2hlY2tDZWxsXTtyb3dzLnB1c2gocltwb3NdKTtpZighdGFibGUuY29uZmlnLmFwcGVuZGVyKXt2YXIgbD1yW3Bvc10ubGVuZ3RoO2Zvcih2YXIgaj0wO2o8bDtqKyspe3RhYmxlQm9keVswXS5hcHBlbmRDaGlsZChyW3Bvc11bal0pO319fWlmKHRhYmxlLmNvbmZpZy5hcHBlbmRlcil7dGFibGUuY29uZmlnLmFwcGVuZGVyKHRhYmxlLHJvd3MpO31yb3dzPW51bGw7aWYodGFibGUuY29uZmlnLmRlYnVnKXtiZW5jaG1hcmsoXCJSZWJ1aWx0IHRhYmxlOlwiLGFwcGVuZFRpbWUpO31hcHBseVdpZGdldCh0YWJsZSk7c2V0VGltZW91dChmdW5jdGlvbigpeyQodGFibGUpLnRyaWdnZXIoXCJzb3J0RW5kXCIpO30sMCk7fTtmdW5jdGlvbiBidWlsZEhlYWRlcnModGFibGUpe2lmKHRhYmxlLmNvbmZpZy5kZWJ1Zyl7dmFyIHRpbWU9bmV3IERhdGUoKTt9dmFyIG1ldGE9KCQubWV0YWRhdGEpP3RydWU6ZmFsc2U7dmFyIGhlYWRlcl9pbmRleD1jb21wdXRlVGFibGVIZWFkZXJDZWxsSW5kZXhlcyh0YWJsZSk7JHRhYmxlSGVhZGVycz0kKHRhYmxlLmNvbmZpZy5zZWxlY3RvckhlYWRlcnMsdGFibGUpLmVhY2goZnVuY3Rpb24oaW5kZXgpe3RoaXMuY29sdW1uPWhlYWRlcl9pbmRleFt0aGlzLnBhcmVudE5vZGUucm93SW5kZXgrXCItXCIrdGhpcy5jZWxsSW5kZXhdO3RoaXMub3JkZXI9Zm9ybWF0U29ydGluZ09yZGVyKHRhYmxlLmNvbmZpZy5zb3J0SW5pdGlhbE9yZGVyKTt0aGlzLmNvdW50PXRoaXMub3JkZXI7aWYoY2hlY2tIZWFkZXJNZXRhZGF0YSh0aGlzKXx8Y2hlY2tIZWFkZXJPcHRpb25zKHRhYmxlLGluZGV4KSl0aGlzLnNvcnREaXNhYmxlZD10cnVlO2lmKGNoZWNrSGVhZGVyT3B0aW9uc1NvcnRpbmdMb2NrZWQodGFibGUsaW5kZXgpKXRoaXMub3JkZXI9dGhpcy5sb2NrZWRPcmRlcj1jaGVja0hlYWRlck9wdGlvbnNTb3J0aW5nTG9ja2VkKHRhYmxlLGluZGV4KTtpZighdGhpcy5zb3J0RGlzYWJsZWQpe3ZhciAkdGg9JCh0aGlzKS5hZGRDbGFzcyh0YWJsZS5jb25maWcuY3NzSGVhZGVyKTtpZih0YWJsZS5jb25maWcub25SZW5kZXJIZWFkZXIpdGFibGUuY29uZmlnLm9uUmVuZGVySGVhZGVyLmFwcGx5KCR0aCk7fXRhYmxlLmNvbmZpZy5oZWFkZXJMaXN0W2luZGV4XT10aGlzO30pO2lmKHRhYmxlLmNvbmZpZy5kZWJ1Zyl7YmVuY2htYXJrKFwiQnVpbHQgaGVhZGVyczpcIix0aW1lKTtsb2coJHRhYmxlSGVhZGVycyk7fXJldHVybiAkdGFibGVIZWFkZXJzO307ZnVuY3Rpb24gY29tcHV0ZVRhYmxlSGVhZGVyQ2VsbEluZGV4ZXModCl7dmFyIG1hdHJpeD1bXTt2YXIgbG9va3VwPXt9O3ZhciB0aGVhZD10LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdUSEVBRCcpWzBdO3ZhciB0cnM9dGhlYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1RSJyk7Zm9yKHZhciBpPTA7aTx0cnMubGVuZ3RoO2krKyl7dmFyIGNlbGxzPXRyc1tpXS5jZWxscztmb3IodmFyIGo9MDtqPGNlbGxzLmxlbmd0aDtqKyspe3ZhciBjPWNlbGxzW2pdO3ZhciByb3dJbmRleD1jLnBhcmVudE5vZGUucm93SW5kZXg7dmFyIGNlbGxJZD1yb3dJbmRleCtcIi1cIitjLmNlbGxJbmRleDt2YXIgcm93U3Bhbj1jLnJvd1NwYW58fDE7dmFyIGNvbFNwYW49Yy5jb2xTcGFufHwxXG52YXIgZmlyc3RBdmFpbENvbDtpZih0eXBlb2YobWF0cml4W3Jvd0luZGV4XSk9PVwidW5kZWZpbmVkXCIpe21hdHJpeFtyb3dJbmRleF09W107fWZvcih2YXIgaz0wO2s8bWF0cml4W3Jvd0luZGV4XS5sZW5ndGgrMTtrKyspe2lmKHR5cGVvZihtYXRyaXhbcm93SW5kZXhdW2tdKT09XCJ1bmRlZmluZWRcIil7Zmlyc3RBdmFpbENvbD1rO2JyZWFrO319bG9va3VwW2NlbGxJZF09Zmlyc3RBdmFpbENvbDtmb3IodmFyIGs9cm93SW5kZXg7azxyb3dJbmRleCtyb3dTcGFuO2srKyl7aWYodHlwZW9mKG1hdHJpeFtrXSk9PVwidW5kZWZpbmVkXCIpe21hdHJpeFtrXT1bXTt9dmFyIG1hdHJpeHJvdz1tYXRyaXhba107Zm9yKHZhciBsPWZpcnN0QXZhaWxDb2w7bDxmaXJzdEF2YWlsQ29sK2NvbFNwYW47bCsrKXttYXRyaXhyb3dbbF09XCJ4XCI7fX19fXJldHVybiBsb29rdXA7fWZ1bmN0aW9uIGNoZWNrQ2VsbENvbFNwYW4odGFibGUscm93cyxyb3cpe3ZhciBhcnI9W10scj10YWJsZS50SGVhZC5yb3dzLGM9cltyb3ddLmNlbGxzO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXt2YXIgY2VsbD1jW2ldO2lmKGNlbGwuY29sU3Bhbj4xKXthcnI9YXJyLmNvbmNhdChjaGVja0NlbGxDb2xTcGFuKHRhYmxlLGhlYWRlckFycixyb3crKykpO31lbHNle2lmKHRhYmxlLnRIZWFkLmxlbmd0aD09MXx8KGNlbGwucm93U3Bhbj4xfHwhcltyb3crMV0pKXthcnIucHVzaChjZWxsKTt9fX1yZXR1cm4gYXJyO307ZnVuY3Rpb24gY2hlY2tIZWFkZXJNZXRhZGF0YShjZWxsKXtpZigoJC5tZXRhZGF0YSkmJigkKGNlbGwpLm1ldGFkYXRhKCkuc29ydGVyPT09ZmFsc2UpKXtyZXR1cm4gdHJ1ZTt9O3JldHVybiBmYWxzZTt9ZnVuY3Rpb24gY2hlY2tIZWFkZXJPcHRpb25zKHRhYmxlLGkpe2lmKCh0YWJsZS5jb25maWcuaGVhZGVyc1tpXSkmJih0YWJsZS5jb25maWcuaGVhZGVyc1tpXS5zb3J0ZXI9PT1mYWxzZSkpe3JldHVybiB0cnVlO307cmV0dXJuIGZhbHNlO31mdW5jdGlvbiBjaGVja0hlYWRlck9wdGlvbnNTb3J0aW5nTG9ja2VkKHRhYmxlLGkpe2lmKCh0YWJsZS5jb25maWcuaGVhZGVyc1tpXSkmJih0YWJsZS5jb25maWcuaGVhZGVyc1tpXS5sb2NrZWRPcmRlcikpcmV0dXJuIHRhYmxlLmNvbmZpZy5oZWFkZXJzW2ldLmxvY2tlZE9yZGVyO3JldHVybiBmYWxzZTt9ZnVuY3Rpb24gYXBwbHlXaWRnZXQodGFibGUpe3ZhciBjPXRhYmxlLmNvbmZpZy53aWRnZXRzO3ZhciBsPWMubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe2dldFdpZGdldEJ5SWQoY1tpXSkuZm9ybWF0KHRhYmxlKTt9fWZ1bmN0aW9uIGdldFdpZGdldEJ5SWQobmFtZSl7dmFyIGw9d2lkZ2V0cy5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7aWYod2lkZ2V0c1tpXS5pZC50b0xvd2VyQ2FzZSgpPT1uYW1lLnRvTG93ZXJDYXNlKCkpe3JldHVybiB3aWRnZXRzW2ldO319fTtmdW5jdGlvbiBmb3JtYXRTb3J0aW5nT3JkZXIodil7aWYodHlwZW9mKHYpIT1cIk51bWJlclwiKXtyZXR1cm4odi50b0xvd2VyQ2FzZSgpPT1cImRlc2NcIik/MTowO31lbHNle3JldHVybih2PT0xKT8xOjA7fX1mdW5jdGlvbiBpc1ZhbHVlSW5BcnJheSh2LGEpe3ZhciBsPWEubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe2lmKGFbaV1bMF09PXYpe3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO31mdW5jdGlvbiBzZXRIZWFkZXJzQ3NzKHRhYmxlLCRoZWFkZXJzLGxpc3QsY3NzKXskaGVhZGVycy5yZW1vdmVDbGFzcyhjc3NbMF0pLnJlbW92ZUNsYXNzKGNzc1sxXSk7dmFyIGg9W107JGhlYWRlcnMuZWFjaChmdW5jdGlvbihvZmZzZXQpe2lmKCF0aGlzLnNvcnREaXNhYmxlZCl7aFt0aGlzLmNvbHVtbl09JCh0aGlzKTt9fSk7dmFyIGw9bGlzdC5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7aFtsaXN0W2ldWzBdXS5hZGRDbGFzcyhjc3NbbGlzdFtpXVsxXV0pO319ZnVuY3Rpb24gZml4Q29sdW1uV2lkdGgodGFibGUsJGhlYWRlcnMpe3ZhciBjPXRhYmxlLmNvbmZpZztpZihjLndpZHRoRml4ZWQpe3ZhciBjb2xncm91cD0kKCc8Y29sZ3JvdXA+Jyk7JChcInRyOmZpcnN0IHRkXCIsdGFibGUudEJvZGllc1swXSkuZWFjaChmdW5jdGlvbigpe2NvbGdyb3VwLmFwcGVuZCgkKCc8Y29sPicpLmNzcygnd2lkdGgnLCQodGhpcykud2lkdGgoKSkpO30pOyQodGFibGUpLnByZXBlbmQoY29sZ3JvdXApO307fWZ1bmN0aW9uIHVwZGF0ZUhlYWRlclNvcnRDb3VudCh0YWJsZSxzb3J0TGlzdCl7dmFyIGM9dGFibGUuY29uZmlnLGw9c29ydExpc3QubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe3ZhciBzPXNvcnRMaXN0W2ldLG89Yy5oZWFkZXJMaXN0W3NbMF1dO28uY291bnQ9c1sxXTtvLmNvdW50Kys7fX1mdW5jdGlvbiBtdWx0aXNvcnQodGFibGUsc29ydExpc3QsY2FjaGUpe2lmKHRhYmxlLmNvbmZpZy5kZWJ1Zyl7dmFyIHNvcnRUaW1lPW5ldyBEYXRlKCk7fXZhciBkeW5hbWljRXhwPVwidmFyIHNvcnRXcmFwcGVyID0gZnVuY3Rpb24oYSxiKSB7XCIsbD1zb3J0TGlzdC5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7dmFyIGM9c29ydExpc3RbaV1bMF07dmFyIG9yZGVyPXNvcnRMaXN0W2ldWzFdO3ZhciBzPSh0YWJsZS5jb25maWcucGFyc2Vyc1tjXS50eXBlPT1cInRleHRcIik/KChvcmRlcj09MCk/bWFrZVNvcnRGdW5jdGlvbihcInRleHRcIixcImFzY1wiLGMpOm1ha2VTb3J0RnVuY3Rpb24oXCJ0ZXh0XCIsXCJkZXNjXCIsYykpOigob3JkZXI9PTApP21ha2VTb3J0RnVuY3Rpb24oXCJudW1lcmljXCIsXCJhc2NcIixjKTptYWtlU29ydEZ1bmN0aW9uKFwibnVtZXJpY1wiLFwiZGVzY1wiLGMpKTt2YXIgZT1cImVcIitpO2R5bmFtaWNFeHArPVwidmFyIFwiK2UrXCIgPSBcIitzO2R5bmFtaWNFeHArPVwiaWYoXCIrZStcIikgeyByZXR1cm4gXCIrZStcIjsgfSBcIjtkeW5hbWljRXhwKz1cImVsc2UgeyBcIjt9dmFyIG9yZ09yZGVyQ29sPWNhY2hlLm5vcm1hbGl6ZWRbMF0ubGVuZ3RoLTE7ZHluYW1pY0V4cCs9XCJyZXR1cm4gYVtcIitvcmdPcmRlckNvbCtcIl0tYltcIitvcmdPcmRlckNvbCtcIl07XCI7Zm9yKHZhciBpPTA7aTxsO2krKyl7ZHluYW1pY0V4cCs9XCJ9OyBcIjt9ZHluYW1pY0V4cCs9XCJyZXR1cm4gMDsgXCI7ZHluYW1pY0V4cCs9XCJ9OyBcIjtpZih0YWJsZS5jb25maWcuZGVidWcpe2JlbmNobWFyayhcIkV2YWxpbmcgZXhwcmVzc2lvbjpcIitkeW5hbWljRXhwLG5ldyBEYXRlKCkpO31ldmFsKGR5bmFtaWNFeHApO2NhY2hlLm5vcm1hbGl6ZWQuc29ydChzb3J0V3JhcHBlcik7aWYodGFibGUuY29uZmlnLmRlYnVnKXtiZW5jaG1hcmsoXCJTb3J0aW5nIG9uIFwiK3NvcnRMaXN0LnRvU3RyaW5nKCkrXCIgYW5kIGRpciBcIitvcmRlcitcIiB0aW1lOlwiLHNvcnRUaW1lKTt9cmV0dXJuIGNhY2hlO307ZnVuY3Rpb24gbWFrZVNvcnRGdW5jdGlvbih0eXBlLGRpcmVjdGlvbixpbmRleCl7dmFyIGE9XCJhW1wiK2luZGV4K1wiXVwiLGI9XCJiW1wiK2luZGV4K1wiXVwiO2lmKHR5cGU9PSd0ZXh0JyYmZGlyZWN0aW9uPT0nYXNjJyl7cmV0dXJuXCIoXCIrYStcIiA9PSBcIitiK1wiID8gMCA6IChcIithK1wiID09PSBudWxsID8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIDogKFwiK2IrXCIgPT09IG51bGwgPyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgOiAoXCIrYStcIiA8IFwiK2IrXCIpID8gLTEgOiAxICkpKTtcIjt9ZWxzZSBpZih0eXBlPT0ndGV4dCcmJmRpcmVjdGlvbj09J2Rlc2MnKXtyZXR1cm5cIihcIithK1wiID09IFwiK2IrXCIgPyAwIDogKFwiK2ErXCIgPT09IG51bGwgPyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgOiAoXCIrYitcIiA9PT0gbnVsbCA/IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSA6IChcIitiK1wiIDwgXCIrYStcIikgPyAtMSA6IDEgKSkpO1wiO31lbHNlIGlmKHR5cGU9PSdudW1lcmljJyYmZGlyZWN0aW9uPT0nYXNjJyl7cmV0dXJuXCIoXCIrYStcIiA9PT0gbnVsbCAmJiBcIitiK1wiID09PSBudWxsKSA/IDAgOihcIithK1wiID09PSBudWxsID8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIDogKFwiK2IrXCIgPT09IG51bGwgPyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgOiBcIithK1wiIC0gXCIrYitcIikpO1wiO31lbHNlIGlmKHR5cGU9PSdudW1lcmljJyYmZGlyZWN0aW9uPT0nZGVzYycpe3JldHVyblwiKFwiK2ErXCIgPT09IG51bGwgJiYgXCIrYitcIiA9PT0gbnVsbCkgPyAwIDooXCIrYStcIiA9PT0gbnVsbCA/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA6IChcIitiK1wiID09PSBudWxsID8gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIDogXCIrYitcIiAtIFwiK2ErXCIpKTtcIjt9fTtmdW5jdGlvbiBtYWtlU29ydFRleHQoaSl7cmV0dXJuXCIoKGFbXCIraStcIl0gPCBiW1wiK2krXCJdKSA/IC0xIDogKChhW1wiK2krXCJdID4gYltcIitpK1wiXSkgPyAxIDogMCkpO1wiO307ZnVuY3Rpb24gbWFrZVNvcnRUZXh0RGVzYyhpKXtyZXR1cm5cIigoYltcIitpK1wiXSA8IGFbXCIraStcIl0pID8gLTEgOiAoKGJbXCIraStcIl0gPiBhW1wiK2krXCJdKSA/IDEgOiAwKSk7XCI7fTtmdW5jdGlvbiBtYWtlU29ydE51bWVyaWMoaSl7cmV0dXJuXCJhW1wiK2krXCJdLWJbXCIraStcIl07XCI7fTtmdW5jdGlvbiBtYWtlU29ydE51bWVyaWNEZXNjKGkpe3JldHVyblwiYltcIitpK1wiXS1hW1wiK2krXCJdO1wiO307ZnVuY3Rpb24gc29ydFRleHQoYSxiKXtpZih0YWJsZS5jb25maWcuc29ydExvY2FsZUNvbXBhcmUpcmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKTtyZXR1cm4oKGE8Yik/LTE6KChhPmIpPzE6MCkpO307ZnVuY3Rpb24gc29ydFRleHREZXNjKGEsYil7aWYodGFibGUuY29uZmlnLnNvcnRMb2NhbGVDb21wYXJlKXJldHVybiBiLmxvY2FsZUNvbXBhcmUoYSk7cmV0dXJuKChiPGEpPy0xOigoYj5hKT8xOjApKTt9O2Z1bmN0aW9uIHNvcnROdW1lcmljKGEsYil7cmV0dXJuIGEtYjt9O2Z1bmN0aW9uIHNvcnROdW1lcmljRGVzYyhhLGIpe3JldHVybiBiLWE7fTtmdW5jdGlvbiBnZXRDYWNoZWRTb3J0VHlwZShwYXJzZXJzLGkpe3JldHVybiBwYXJzZXJzW2ldLnR5cGU7fTt0aGlzLmNvbnN0cnVjdD1mdW5jdGlvbihzZXR0aW5ncyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCF0aGlzLnRIZWFkfHwhdGhpcy50Qm9kaWVzKXJldHVybjt2YXIgJHRoaXMsJGRvY3VtZW50LCRoZWFkZXJzLGNhY2hlLGNvbmZpZyxzaGlmdERvd249MCxzb3J0T3JkZXI7dGhpcy5jb25maWc9e307Y29uZmlnPSQuZXh0ZW5kKHRoaXMuY29uZmlnLCQudGFibGVzb3J0ZXIuZGVmYXVsdHMsc2V0dGluZ3MpOyR0aGlzPSQodGhpcyk7JC5kYXRhKHRoaXMsXCJ0YWJsZXNvcnRlclwiLGNvbmZpZyk7JGhlYWRlcnM9YnVpbGRIZWFkZXJzKHRoaXMpO3RoaXMuY29uZmlnLnBhcnNlcnM9YnVpbGRQYXJzZXJDYWNoZSh0aGlzLCRoZWFkZXJzKTtjYWNoZT1idWlsZENhY2hlKHRoaXMpO3ZhciBzb3J0Q1NTPVtjb25maWcuY3NzRGVzYyxjb25maWcuY3NzQXNjXTtmaXhDb2x1bW5XaWR0aCh0aGlzKTskaGVhZGVycy5jbGljayhmdW5jdGlvbihlKXt2YXIgdG90YWxSb3dzPSgkdGhpc1swXS50Qm9kaWVzWzBdJiYkdGhpc1swXS50Qm9kaWVzWzBdLnJvd3MubGVuZ3RoKXx8MDtpZighdGhpcy5zb3J0RGlzYWJsZWQmJnRvdGFsUm93cz4wKXskdGhpcy50cmlnZ2VyKFwic29ydFN0YXJ0XCIpO3ZhciAkY2VsbD0kKHRoaXMpO3ZhciBpPXRoaXMuY29sdW1uO3RoaXMub3JkZXI9dGhpcy5jb3VudCsrJTI7aWYodGhpcy5sb2NrZWRPcmRlcil0aGlzLm9yZGVyPXRoaXMubG9ja2VkT3JkZXI7aWYoIWVbY29uZmlnLnNvcnRNdWx0aVNvcnRLZXldKXtjb25maWcuc29ydExpc3Q9W107aWYoY29uZmlnLnNvcnRGb3JjZSE9bnVsbCl7dmFyIGE9Y29uZmlnLnNvcnRGb3JjZTtmb3IodmFyIGo9MDtqPGEubGVuZ3RoO2orKyl7aWYoYVtqXVswXSE9aSl7Y29uZmlnLnNvcnRMaXN0LnB1c2goYVtqXSk7fX19Y29uZmlnLnNvcnRMaXN0LnB1c2goW2ksdGhpcy5vcmRlcl0pO31lbHNle2lmKGlzVmFsdWVJbkFycmF5KGksY29uZmlnLnNvcnRMaXN0KSl7Zm9yKHZhciBqPTA7ajxjb25maWcuc29ydExpc3QubGVuZ3RoO2orKyl7dmFyIHM9Y29uZmlnLnNvcnRMaXN0W2pdLG89Y29uZmlnLmhlYWRlckxpc3Rbc1swXV07aWYoc1swXT09aSl7by5jb3VudD1zWzFdO28uY291bnQrKztzWzFdPW8uY291bnQlMjt9fX1lbHNle2NvbmZpZy5zb3J0TGlzdC5wdXNoKFtpLHRoaXMub3JkZXJdKTt9fTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2V0SGVhZGVyc0NzcygkdGhpc1swXSwkaGVhZGVycyxjb25maWcuc29ydExpc3Qsc29ydENTUyk7YXBwZW5kVG9UYWJsZSgkdGhpc1swXSxtdWx0aXNvcnQoJHRoaXNbMF0sY29uZmlnLnNvcnRMaXN0LGNhY2hlKSk7fSwxKTtyZXR1cm4gZmFsc2U7fX0pLm1vdXNlZG93bihmdW5jdGlvbigpe2lmKGNvbmZpZy5jYW5jZWxTZWxlY3Rpb24pe3RoaXMub25zZWxlY3RzdGFydD1mdW5jdGlvbigpe3JldHVybiBmYWxzZX07cmV0dXJuIGZhbHNlO319KTskdGhpcy5iaW5kKFwidXBkYXRlXCIsZnVuY3Rpb24oKXt2YXIgbWU9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bWUuY29uZmlnLnBhcnNlcnM9YnVpbGRQYXJzZXJDYWNoZShtZSwkaGVhZGVycyk7Y2FjaGU9YnVpbGRDYWNoZShtZSk7fSwxKTt9KS5iaW5kKFwidXBkYXRlQ2VsbFwiLGZ1bmN0aW9uKGUsY2VsbCl7dmFyIGNvbmZpZz10aGlzLmNvbmZpZzt2YXIgcG9zPVsoY2VsbC5wYXJlbnROb2RlLnJvd0luZGV4LTEpLGNlbGwuY2VsbEluZGV4XTtjYWNoZS5ub3JtYWxpemVkW3Bvc1swXV1bcG9zWzFdXT1jb25maWcucGFyc2Vyc1twb3NbMV1dLmZvcm1hdChnZXRFbGVtZW50VGV4dChjb25maWcsY2VsbCksY2VsbCk7fSkuYmluZChcInNvcnRvblwiLGZ1bmN0aW9uKGUsbGlzdCl7JCh0aGlzKS50cmlnZ2VyKFwic29ydFN0YXJ0XCIpO2NvbmZpZy5zb3J0TGlzdD1saXN0O3ZhciBzb3J0TGlzdD1jb25maWcuc29ydExpc3Q7dXBkYXRlSGVhZGVyU29ydENvdW50KHRoaXMsc29ydExpc3QpO3NldEhlYWRlcnNDc3ModGhpcywkaGVhZGVycyxzb3J0TGlzdCxzb3J0Q1NTKTthcHBlbmRUb1RhYmxlKHRoaXMsbXVsdGlzb3J0KHRoaXMsc29ydExpc3QsY2FjaGUpKTt9KS5iaW5kKFwiYXBwZW5kQ2FjaGVcIixmdW5jdGlvbigpe2FwcGVuZFRvVGFibGUodGhpcyxjYWNoZSk7fSkuYmluZChcImFwcGx5V2lkZ2V0SWRcIixmdW5jdGlvbihlLGlkKXtnZXRXaWRnZXRCeUlkKGlkKS5mb3JtYXQodGhpcyk7fSkuYmluZChcImFwcGx5V2lkZ2V0c1wiLGZ1bmN0aW9uKCl7YXBwbHlXaWRnZXQodGhpcyk7fSk7aWYoJC5tZXRhZGF0YSYmKCQodGhpcykubWV0YWRhdGEoKSYmJCh0aGlzKS5tZXRhZGF0YSgpLnNvcnRsaXN0KSl7Y29uZmlnLnNvcnRMaXN0PSQodGhpcykubWV0YWRhdGEoKS5zb3J0bGlzdDt9aWYoY29uZmlnLnNvcnRMaXN0Lmxlbmd0aD4wKXskdGhpcy50cmlnZ2VyKFwic29ydG9uXCIsW2NvbmZpZy5zb3J0TGlzdF0pO31hcHBseVdpZGdldCh0aGlzKTt9KTt9O3RoaXMuYWRkUGFyc2VyPWZ1bmN0aW9uKHBhcnNlcil7dmFyIGw9cGFyc2Vycy5sZW5ndGgsYT10cnVlO2Zvcih2YXIgaT0wO2k8bDtpKyspe2lmKHBhcnNlcnNbaV0uaWQudG9Mb3dlckNhc2UoKT09cGFyc2VyLmlkLnRvTG93ZXJDYXNlKCkpe2E9ZmFsc2U7fX1pZihhKXtwYXJzZXJzLnB1c2gocGFyc2VyKTt9O307dGhpcy5hZGRXaWRnZXQ9ZnVuY3Rpb24od2lkZ2V0KXt3aWRnZXRzLnB1c2god2lkZ2V0KTt9O3RoaXMuZm9ybWF0RmxvYXQ9ZnVuY3Rpb24ocyl7dmFyIGk9cGFyc2VGbG9hdChzKTtyZXR1cm4oaXNOYU4oaSkpPzA6aTt9O3RoaXMuZm9ybWF0SW50PWZ1bmN0aW9uKHMpe3ZhciBpPXBhcnNlSW50KHMpO3JldHVybihpc05hTihpKSk/MDppO307dGhpcy5pc0RpZ2l0PWZ1bmN0aW9uKHMsY29uZmlnKXtyZXR1cm4vXlstK10/XFxkKiQvLnRlc3QoJC50cmltKHMucmVwbGFjZSgvWywuJ10vZywnJykpKTt9O3RoaXMuY2xlYXJUYWJsZUJvZHk9ZnVuY3Rpb24odGFibGUpe2lmKCQuYnJvd3Nlci5tc2llKXtmdW5jdGlvbiBlbXB0eSgpe3doaWxlKHRoaXMuZmlyc3RDaGlsZCl0aGlzLnJlbW92ZUNoaWxkKHRoaXMuZmlyc3RDaGlsZCk7fWVtcHR5LmFwcGx5KHRhYmxlLnRCb2RpZXNbMF0pO31lbHNle3RhYmxlLnRCb2RpZXNbMF0uaW5uZXJIVE1MPVwiXCI7fX07fX0pOyQuZm4uZXh0ZW5kKHt0YWJsZXNvcnRlcjokLnRhYmxlc29ydGVyLmNvbnN0cnVjdH0pO3ZhciB0cz0kLnRhYmxlc29ydGVyO3RzLmFkZFBhcnNlcih7aWQ6XCJ0ZXh0XCIsaXM6ZnVuY3Rpb24ocyl7cmV0dXJuIHRydWU7fSxmb3JtYXQ6ZnVuY3Rpb24ocyl7cmV0dXJuICQudHJpbShzLnRvTG9jYWxlTG93ZXJDYXNlKCkpO30sdHlwZTpcInRleHRcIn0pO3RzLmFkZFBhcnNlcih7aWQ6XCJkaWdpdFwiLGlzOmZ1bmN0aW9uKHMsdGFibGUpe3ZhciBjPXRhYmxlLmNvbmZpZztyZXR1cm4gJC50YWJsZXNvcnRlci5pc0RpZ2l0KHMsYyk7fSxmb3JtYXQ6ZnVuY3Rpb24ocyl7cmV0dXJuICQudGFibGVzb3J0ZXIuZm9ybWF0RmxvYXQocyk7fSx0eXBlOlwibnVtZXJpY1wifSk7dHMuYWRkUGFyc2VyKHtpZDpcImN1cnJlbmN5XCIsaXM6ZnVuY3Rpb24ocyl7cmV0dXJuL15bwqMk4oKsPy5dLy50ZXN0KHMpO30sZm9ybWF0OmZ1bmN0aW9uKHMpe3JldHVybiAkLnRhYmxlc29ydGVyLmZvcm1hdEZsb2F0KHMucmVwbGFjZShuZXcgUmVnRXhwKC9bwqMk4oKsXS9nKSxcIlwiKSk7fSx0eXBlOlwibnVtZXJpY1wifSk7dHMuYWRkUGFyc2VyKHtpZDpcImlwQWRkcmVzc1wiLGlzOmZ1bmN0aW9uKHMpe3JldHVybi9eXFxkezIsM31bXFwuXVxcZHsyLDN9W1xcLl1cXGR7MiwzfVtcXC5dXFxkezIsM30kLy50ZXN0KHMpO30sZm9ybWF0OmZ1bmN0aW9uKHMpe3ZhciBhPXMuc3BsaXQoXCIuXCIpLHI9XCJcIixsPWEubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe3ZhciBpdGVtPWFbaV07aWYoaXRlbS5sZW5ndGg9PTIpe3IrPVwiMFwiK2l0ZW07fWVsc2V7cis9aXRlbTt9fXJldHVybiAkLnRhYmxlc29ydGVyLmZvcm1hdEZsb2F0KHIpO30sdHlwZTpcIm51bWVyaWNcIn0pO3RzLmFkZFBhcnNlcih7aWQ6XCJ1cmxcIixpczpmdW5jdGlvbihzKXtyZXR1cm4vXihodHRwcz98ZnRwfGZpbGUpOlxcL1xcLyQvLnRlc3Qocyk7fSxmb3JtYXQ6ZnVuY3Rpb24ocyl7cmV0dXJuIGpRdWVyeS50cmltKHMucmVwbGFjZShuZXcgUmVnRXhwKC8oaHR0cHM/fGZ0cHxmaWxlKTpcXC9cXC8vKSwnJykpO30sdHlwZTpcInRleHRcIn0pO3RzLmFkZFBhcnNlcih7aWQ6XCJpc29EYXRlXCIsaXM6ZnVuY3Rpb24ocyl7cmV0dXJuL15cXGR7NH1bXFwvLV1cXGR7MSwyfVtcXC8tXVxcZHsxLDJ9JC8udGVzdChzKTt9LGZvcm1hdDpmdW5jdGlvbihzKXtyZXR1cm4gJC50YWJsZXNvcnRlci5mb3JtYXRGbG9hdCgocyE9XCJcIik/bmV3IERhdGUocy5yZXBsYWNlKG5ldyBSZWdFeHAoLy0vZyksXCIvXCIpKS5nZXRUaW1lKCk6XCIwXCIpO30sdHlwZTpcIm51bWVyaWNcIn0pO3RzLmFkZFBhcnNlcih7aWQ6XCJwZXJjZW50XCIsaXM6ZnVuY3Rpb24ocyl7cmV0dXJuL1xcJSQvLnRlc3QoJC50cmltKHMpKTt9LGZvcm1hdDpmdW5jdGlvbihzKXtyZXR1cm4gJC50YWJsZXNvcnRlci5mb3JtYXRGbG9hdChzLnJlcGxhY2UobmV3IFJlZ0V4cCgvJS9nKSxcIlwiKSk7fSx0eXBlOlwibnVtZXJpY1wifSk7dHMuYWRkUGFyc2VyKHtpZDpcInVzTG9uZ0RhdGVcIixpczpmdW5jdGlvbihzKXtyZXR1cm4gcy5tYXRjaChuZXcgUmVnRXhwKC9eW0EtWmEtel17MywxMH1cXC4/IFswLTldezEsMn0sIChbMC05XXs0fXwnP1swLTldezJ9KSAoKFswLTJdP1swLTldOlswLTVdWzAtOV0pfChbMC0xXT9bMC05XTpbMC01XVswLTldXFxzKEFNfFBNKSkpJC8pKTt9LGZvcm1hdDpmdW5jdGlvbihzKXtyZXR1cm4gJC50YWJsZXNvcnRlci5mb3JtYXRGbG9hdChuZXcgRGF0ZShzKS5nZXRUaW1lKCkpO30sdHlwZTpcIm51bWVyaWNcIn0pO3RzLmFkZFBhcnNlcih7aWQ6XCJzaG9ydERhdGVcIixpczpmdW5jdGlvbihzKXtyZXR1cm4vXFxkezEsMn1bXFwvXFwtXVxcZHsxLDJ9W1xcL1xcLV1cXGR7Miw0fS8udGVzdChzKTt9LGZvcm1hdDpmdW5jdGlvbihzLHRhYmxlKXt2YXIgYz10YWJsZS5jb25maWc7cz1zLnJlcGxhY2UoL1xcLS9nLFwiL1wiKTtpZihjLmRhdGVGb3JtYXQ9PVwidXNcIil7cz1zLnJlcGxhY2UoLyhcXGR7MSwyfSlbXFwvXFwtXShcXGR7MSwyfSlbXFwvXFwtXShcXGR7NH0pLyxcIiQzLyQxLyQyXCIpO31lbHNlIGlmKGMuZGF0ZUZvcm1hdD09XCJ1a1wiKXtzPXMucmVwbGFjZSgvKFxcZHsxLDJ9KVtcXC9cXC1dKFxcZHsxLDJ9KVtcXC9cXC1dKFxcZHs0fSkvLFwiJDMvJDIvJDFcIik7fWVsc2UgaWYoYy5kYXRlRm9ybWF0PT1cImRkL21tL3l5XCJ8fGMuZGF0ZUZvcm1hdD09XCJkZC1tbS15eVwiKXtzPXMucmVwbGFjZSgvKFxcZHsxLDJ9KVtcXC9cXC1dKFxcZHsxLDJ9KVtcXC9cXC1dKFxcZHsyfSkvLFwiJDEvJDIvJDNcIik7fXJldHVybiAkLnRhYmxlc29ydGVyLmZvcm1hdEZsb2F0KG5ldyBEYXRlKHMpLmdldFRpbWUoKSk7fSx0eXBlOlwibnVtZXJpY1wifSk7dHMuYWRkUGFyc2VyKHtpZDpcInRpbWVcIixpczpmdW5jdGlvbihzKXtyZXR1cm4vXigoWzAtMl0/WzAtOV06WzAtNV1bMC05XSl8KFswLTFdP1swLTldOlswLTVdWzAtOV1cXHMoYW18cG0pKSkkLy50ZXN0KHMpO30sZm9ybWF0OmZ1bmN0aW9uKHMpe3JldHVybiAkLnRhYmxlc29ydGVyLmZvcm1hdEZsb2F0KG5ldyBEYXRlKFwiMjAwMC8wMS8wMSBcIitzKS5nZXRUaW1lKCkpO30sdHlwZTpcIm51bWVyaWNcIn0pO3RzLmFkZFBhcnNlcih7aWQ6XCJtZXRhZGF0YVwiLGlzOmZ1bmN0aW9uKHMpe3JldHVybiBmYWxzZTt9LGZvcm1hdDpmdW5jdGlvbihzLHRhYmxlLGNlbGwpe3ZhciBjPXRhYmxlLmNvbmZpZyxwPSghYy5wYXJzZXJNZXRhZGF0YU5hbWUpPydzb3J0VmFsdWUnOmMucGFyc2VyTWV0YWRhdGFOYW1lO3JldHVybiAkKGNlbGwpLm1ldGFkYXRhKClbcF07fSx0eXBlOlwibnVtZXJpY1wifSk7dHMuYWRkV2lkZ2V0KHtpZDpcInplYnJhXCIsZm9ybWF0OmZ1bmN0aW9uKHRhYmxlKXtpZih0YWJsZS5jb25maWcuZGVidWcpe3ZhciB0aW1lPW5ldyBEYXRlKCk7fXZhciAkdHIscm93PS0xLG9kZDskKFwidHI6dmlzaWJsZVwiLHRhYmxlLnRCb2RpZXNbMF0pLmVhY2goZnVuY3Rpb24oaSl7JHRyPSQodGhpcyk7aWYoISR0ci5oYXNDbGFzcyh0YWJsZS5jb25maWcuY3NzQ2hpbGRSb3cpKXJvdysrO29kZD0ocm93JTI9PTApOyR0ci5yZW1vdmVDbGFzcyh0YWJsZS5jb25maWcud2lkZ2V0WmVicmEuY3NzW29kZD8wOjFdKS5hZGRDbGFzcyh0YWJsZS5jb25maWcud2lkZ2V0WmVicmEuY3NzW29kZD8xOjBdKX0pO2lmKHRhYmxlLmNvbmZpZy5kZWJ1Zyl7JC50YWJsZXNvcnRlci5iZW5jaG1hcmsoXCJBcHBseWluZyBaZWJyYSB3aWRnZXRcIix0aW1lKTt9fX0pO30pKGpRdWVyeSk7IiwiLyohIERhdGFUYWJsZXMgMS4xMC4yXG4gKiDCqTIwMDgtMjAxNCBTcHJ5TWVkaWEgTHRkIC0gZGF0YXRhYmxlcy5uZXQvbGljZW5zZVxuICovXG4oZnVuY3Rpb24oemEsTyxsKXt2YXIgTj1mdW5jdGlvbihoKXtmdW5jdGlvbiBUKGEpe3ZhciBiLGMsZD17fTtoLmVhY2goYSxmdW5jdGlvbihlKXtpZigoYj1lLm1hdGNoKC9eKFteQS1aXSs/KShbQS1aXSkvKSkmJi0xIT09XCJhIGFhIGFpIGFvIGFzIGIgZm4gaSBtIG8gcyBcIi5pbmRleE9mKGJbMV0rXCIgXCIpKWM9ZS5yZXBsYWNlKGJbMF0sYlsyXS50b0xvd2VyQ2FzZSgpKSxkW2NdPWUsXCJvXCI9PT1iWzFdJiZUKGFbZV0pfSk7YS5faHVuZ2FyaWFuTWFwPWR9ZnVuY3Rpb24gRyhhLGIsYyl7YS5faHVuZ2FyaWFuTWFwfHxUKGEpO3ZhciBkO2guZWFjaChiLGZ1bmN0aW9uKGUpe2Q9YS5faHVuZ2FyaWFuTWFwW2VdO2lmKGQhPT1sJiYoY3x8YltkXT09PWwpKVwib1wiPT09ZC5jaGFyQXQoMCk/KGJbZF18fChiW2RdPXt9KSxoLmV4dGVuZCghMCxiW2RdLGJbZV0pLEcoYVtkXSxiW2RdLGMpKTpiW2RdPWJbZV19KX1mdW5jdGlvbiBOKGEpe3ZhciBiPXAuZGVmYXVsdHMub0xhbmd1YWdlLGM9YS5zWmVyb1JlY29yZHM7XG4hYS5zRW1wdHlUYWJsZSYmKGMmJlwiTm8gZGF0YSBhdmFpbGFibGUgaW4gdGFibGVcIj09PWIuc0VtcHR5VGFibGUpJiZEKGEsYSxcInNaZXJvUmVjb3Jkc1wiLFwic0VtcHR5VGFibGVcIik7IWEuc0xvYWRpbmdSZWNvcmRzJiYoYyYmXCJMb2FkaW5nLi4uXCI9PT1iLnNMb2FkaW5nUmVjb3JkcykmJkQoYSxhLFwic1plcm9SZWNvcmRzXCIsXCJzTG9hZGluZ1JlY29yZHNcIik7YS5zSW5mb1Rob3VzYW5kcyYmKGEuc1Rob3VzYW5kcz1hLnNJbmZvVGhvdXNhbmRzKTsoYT1hLnNEZWNpbWFsKSYmY2IoYSl9ZnVuY3Rpb24gZGIoYSl7dyhhLFwib3JkZXJpbmdcIixcImJTb3J0XCIpO3coYSxcIm9yZGVyTXVsdGlcIixcImJTb3J0TXVsdGlcIik7dyhhLFwib3JkZXJDbGFzc2VzXCIsXCJiU29ydENsYXNzZXNcIik7dyhhLFwib3JkZXJDZWxsc1RvcFwiLFwiYlNvcnRDZWxsc1RvcFwiKTt3KGEsXCJvcmRlclwiLFwiYWFTb3J0aW5nXCIpO3coYSxcIm9yZGVyRml4ZWRcIixcImFhU29ydGluZ0ZpeGVkXCIpO3coYSxcInBhZ2luZ1wiLFwiYlBhZ2luYXRlXCIpO1xudyhhLFwicGFnaW5nVHlwZVwiLFwic1BhZ2luYXRpb25UeXBlXCIpO3coYSxcInBhZ2VMZW5ndGhcIixcImlEaXNwbGF5TGVuZ3RoXCIpO3coYSxcInNlYXJjaGluZ1wiLFwiYkZpbHRlclwiKTtpZihhPWEuYW9TZWFyY2hDb2xzKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylhW2JdJiZHKHAubW9kZWxzLm9TZWFyY2gsYVtiXSl9ZnVuY3Rpb24gZWIoYSl7dyhhLFwib3JkZXJhYmxlXCIsXCJiU29ydGFibGVcIik7dyhhLFwib3JkZXJEYXRhXCIsXCJhRGF0YVNvcnRcIik7dyhhLFwib3JkZXJTZXF1ZW5jZVwiLFwiYXNTb3J0aW5nXCIpO3coYSxcIm9yZGVyRGF0YVR5cGVcIixcInNvcnREYXRhVHlwZVwiKX1mdW5jdGlvbiBmYihhKXt2YXIgYT1hLm9Ccm93c2VyLGI9aChcIjxkaXYvPlwiKS5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6MCxsZWZ0OjAsaGVpZ2h0OjEsd2lkdGg6MSxvdmVyZmxvdzpcImhpZGRlblwifSkuYXBwZW5kKGgoXCI8ZGl2Lz5cIikuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOjEsbGVmdDoxLHdpZHRoOjEwMCxcbm92ZXJmbG93Olwic2Nyb2xsXCJ9KS5hcHBlbmQoaCgnPGRpdiBjbGFzcz1cInRlc3RcIi8+JykuY3NzKHt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6MTB9KSkpLmFwcGVuZFRvKFwiYm9keVwiKSxjPWIuZmluZChcIi50ZXN0XCIpO2EuYlNjcm9sbE92ZXJzaXplPTEwMD09PWNbMF0ub2Zmc2V0V2lkdGg7YS5iU2Nyb2xsYmFyTGVmdD0xIT09Yy5vZmZzZXQoKS5sZWZ0O2IucmVtb3ZlKCl9ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlLGYpe3ZhciBnLGo9ITE7YyE9PWwmJihnPWMsaj0hMCk7Zm9yKDtkIT09ZTspYS5oYXNPd25Qcm9wZXJ0eShkKSYmKGc9aj9iKGcsYVtkXSxkLGEpOmFbZF0saj0hMCxkKz1mKTtyZXR1cm4gZ31mdW5jdGlvbiBBYShhLGIpe3ZhciBjPXAuZGVmYXVsdHMuY29sdW1uLGQ9YS5hb0NvbHVtbnMubGVuZ3RoLGM9aC5leHRlbmQoe30scC5tb2RlbHMub0NvbHVtbixjLHtuVGg6Yj9iOk8uY3JlYXRlRWxlbWVudChcInRoXCIpLHNUaXRsZTpjLnNUaXRsZT9jLnNUaXRsZTpiP2IuaW5uZXJIVE1MOlxuXCJcIixhRGF0YVNvcnQ6Yy5hRGF0YVNvcnQ/Yy5hRGF0YVNvcnQ6W2RdLG1EYXRhOmMubURhdGE/Yy5tRGF0YTpkLGlkeDpkfSk7YS5hb0NvbHVtbnMucHVzaChjKTtjPWEuYW9QcmVTZWFyY2hDb2xzO2NbZF09aC5leHRlbmQoe30scC5tb2RlbHMub1NlYXJjaCxjW2RdKTtmYShhLGQsbnVsbCl9ZnVuY3Rpb24gZmEoYSxiLGMpe3ZhciBiPWEuYW9Db2x1bW5zW2JdLGQ9YS5vQ2xhc3NlcyxlPWgoYi5uVGgpO2lmKCFiLnNXaWR0aE9yaWcpe2Iuc1dpZHRoT3JpZz1lLmF0dHIoXCJ3aWR0aFwiKXx8bnVsbDt2YXIgZj0oZS5hdHRyKFwic3R5bGVcIil8fFwiXCIpLm1hdGNoKC93aWR0aDpcXHMqKFxcZCtbcHhlbSVdKykvKTtmJiYoYi5zV2lkdGhPcmlnPWZbMV0pfWMhPT1sJiZudWxsIT09YyYmKGViKGMpLEcocC5kZWZhdWx0cy5jb2x1bW4sYyksYy5tRGF0YVByb3AhPT1sJiYhYy5tRGF0YSYmKGMubURhdGE9Yy5tRGF0YVByb3ApLGMuc1R5cGUmJihiLl9zTWFudWFsVHlwZT1jLnNUeXBlKSxjLmNsYXNzTmFtZSYmXG4hYy5zQ2xhc3MmJihjLnNDbGFzcz1jLmNsYXNzTmFtZSksaC5leHRlbmQoYixjKSxEKGIsYyxcInNXaWR0aFwiLFwic1dpZHRoT3JpZ1wiKSxcIm51bWJlclwiPT09dHlwZW9mIGMuaURhdGFTb3J0JiYoYi5hRGF0YVNvcnQ9W2MuaURhdGFTb3J0XSksRChiLGMsXCJhRGF0YVNvcnRcIikpO3ZhciBnPWIubURhdGEsaj1VKGcpLGk9Yi5tUmVuZGVyP1UoYi5tUmVuZGVyKTpudWxsLGM9ZnVuY3Rpb24oYSl7cmV0dXJuXCJzdHJpbmdcIj09PXR5cGVvZiBhJiYtMSE9PWEuaW5kZXhPZihcIkBcIil9O2IuX2JBdHRyU3JjPWguaXNQbGFpbk9iamVjdChnKSYmKGMoZy5zb3J0KXx8YyhnLnR5cGUpfHxjKGcuZmlsdGVyKSk7Yi5mbkdldERhdGE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWooYSxiLGwsYyk7cmV0dXJuIGkmJmI/aShkLGIsYSxjKTpkfTtiLmZuU2V0RGF0YT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIEJhKGcpKGEsYixjKX07YS5vRmVhdHVyZXMuYlNvcnR8fChiLmJTb3J0YWJsZT0hMSxlLmFkZENsYXNzKGQuc1NvcnRhYmxlTm9uZSkpO1xuYT0tMSE9PWguaW5BcnJheShcImFzY1wiLGIuYXNTb3J0aW5nKTtjPS0xIT09aC5pbkFycmF5KFwiZGVzY1wiLGIuYXNTb3J0aW5nKTshYi5iU29ydGFibGV8fCFhJiYhYz8oYi5zU29ydGluZ0NsYXNzPWQuc1NvcnRhYmxlTm9uZSxiLnNTb3J0aW5nQ2xhc3NKVUk9XCJcIik6YSYmIWM/KGIuc1NvcnRpbmdDbGFzcz1kLnNTb3J0YWJsZUFzYyxiLnNTb3J0aW5nQ2xhc3NKVUk9ZC5zU29ydEpVSUFzY0FsbG93ZWQpOiFhJiZjPyhiLnNTb3J0aW5nQ2xhc3M9ZC5zU29ydGFibGVEZXNjLGIuc1NvcnRpbmdDbGFzc0pVST1kLnNTb3J0SlVJRGVzY0FsbG93ZWQpOihiLnNTb3J0aW5nQ2xhc3M9ZC5zU29ydGFibGUsYi5zU29ydGluZ0NsYXNzSlVJPWQuc1NvcnRKVUkpfWZ1bmN0aW9uIFYoYSl7aWYoITEhPT1hLm9GZWF0dXJlcy5iQXV0b1dpZHRoKXt2YXIgYj1hLmFvQ29sdW1ucztDYShhKTtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYltjXS5uVGguc3R5bGUud2lkdGg9YltjXS5zV2lkdGh9Yj1cbmEub1Njcm9sbDsoXCJcIiE9PWIuc1l8fFwiXCIhPT1iLnNYKSYmVyhhKTt1KGEsbnVsbCxcImNvbHVtbi1zaXppbmdcIixbYV0pfWZ1bmN0aW9uIGdhKGEsYil7dmFyIGM9WChhLFwiYlZpc2libGVcIik7cmV0dXJuXCJudW1iZXJcIj09PXR5cGVvZiBjW2JdP2NbYl06bnVsbH1mdW5jdGlvbiBZKGEsYil7dmFyIGM9WChhLFwiYlZpc2libGVcIiksYz1oLmluQXJyYXkoYixjKTtyZXR1cm4tMSE9PWM/YzpudWxsfWZ1bmN0aW9uIFooYSl7cmV0dXJuIFgoYSxcImJWaXNpYmxlXCIpLmxlbmd0aH1mdW5jdGlvbiBYKGEsYil7dmFyIGM9W107aC5tYXAoYS5hb0NvbHVtbnMsZnVuY3Rpb24oYSxlKXthW2JdJiZjLnB1c2goZSl9KTtyZXR1cm4gY31mdW5jdGlvbiBEYShhKXt2YXIgYj1hLmFvQ29sdW1ucyxjPWEuYW9EYXRhLGQ9cC5leHQudHlwZS5kZXRlY3QsZSxmLGcsaixpLGgsbSxvLGs7ZT0wO2ZvcihmPWIubGVuZ3RoO2U8ZjtlKyspaWYobT1iW2VdLGs9W10sIW0uc1R5cGUmJm0uX3NNYW51YWxUeXBlKW0uc1R5cGU9XG5tLl9zTWFudWFsVHlwZTtlbHNlIGlmKCFtLnNUeXBlKXtnPTA7Zm9yKGo9ZC5sZW5ndGg7ZzxqO2crKyl7aT0wO2ZvcihoPWMubGVuZ3RoO2k8aCYmIShrW2ldPT09bCYmKGtbaV09QShhLGksZSxcInR5cGVcIikpLG89ZFtnXShrW2ldLGEpLCFvfHxcImh0bWxcIj09PW8pO2krKyk7aWYobyl7bS5zVHlwZT1vO2JyZWFrfX1tLnNUeXBlfHwobS5zVHlwZT1cInN0cmluZ1wiKX19ZnVuY3Rpb24gaGIoYSxiLGMsZCl7dmFyIGUsZixnLGosaSxuLG09YS5hb0NvbHVtbnM7aWYoYilmb3IoZT1iLmxlbmd0aC0xOzA8PWU7ZS0tKXtuPWJbZV07dmFyIG89bi50YXJnZXRzIT09bD9uLnRhcmdldHM6bi5hVGFyZ2V0cztoLmlzQXJyYXkobyl8fChvPVtvXSk7Zj0wO2ZvcihnPW8ubGVuZ3RoO2Y8ZztmKyspaWYoXCJudW1iZXJcIj09PXR5cGVvZiBvW2ZdJiYwPD1vW2ZdKXtmb3IoO20ubGVuZ3RoPD1vW2ZdOylBYShhKTtkKG9bZl0sbil9ZWxzZSBpZihcIm51bWJlclwiPT09dHlwZW9mIG9bZl0mJjA+b1tmXSlkKG0ubGVuZ3RoK1xub1tmXSxuKTtlbHNlIGlmKFwic3RyaW5nXCI9PT10eXBlb2Ygb1tmXSl7aj0wO2ZvcihpPW0ubGVuZ3RoO2o8aTtqKyspKFwiX2FsbFwiPT1vW2ZdfHxoKG1bal0ublRoKS5oYXNDbGFzcyhvW2ZdKSkmJmQoaixuKX19aWYoYyl7ZT0wO2ZvcihhPWMubGVuZ3RoO2U8YTtlKyspZChlLGNbZV0pfX1mdW5jdGlvbiBJKGEsYixjLGQpe3ZhciBlPWEuYW9EYXRhLmxlbmd0aCxmPWguZXh0ZW5kKCEwLHt9LHAubW9kZWxzLm9Sb3cse3NyYzpjP1wiZG9tXCI6XCJkYXRhXCJ9KTtmLl9hRGF0YT1iO2EuYW9EYXRhLnB1c2goZik7Zm9yKHZhciBiPWEuYW9Db2x1bW5zLGY9MCxnPWIubGVuZ3RoO2Y8ZztmKyspYyYmRWEoYSxlLGYsQShhLGUsZikpLGJbZl0uc1R5cGU9bnVsbDthLmFpRGlzcGxheU1hc3Rlci5wdXNoKGUpOyhjfHwhYS5vRmVhdHVyZXMuYkRlZmVyUmVuZGVyKSYmRmEoYSxlLGMsZCk7cmV0dXJuIGV9ZnVuY3Rpb24gaGEoYSxiKXt2YXIgYztiIGluc3RhbmNlb2YgaHx8KGI9aChiKSk7cmV0dXJuIGIubWFwKGZ1bmN0aW9uKGIsXG5lKXtjPWlhKGEsZSk7cmV0dXJuIEkoYSxjLmRhdGEsZSxjLmNlbGxzKX0pfWZ1bmN0aW9uIEEoYSxiLGMsZCl7dmFyIGU9YS5pRHJhdyxmPWEuYW9Db2x1bW5zW2NdLGc9YS5hb0RhdGFbYl0uX2FEYXRhLGo9Zi5zRGVmYXVsdENvbnRlbnQsYz1mLmZuR2V0RGF0YShnLGQse3NldHRpbmdzOmEscm93OmIsY29sOmN9KTtpZihjPT09bClyZXR1cm4gYS5pRHJhd0Vycm9yIT1lJiZudWxsPT09aiYmKFAoYSwwLFwiUmVxdWVzdGVkIHVua25vd24gcGFyYW1ldGVyIFwiKyhcImZ1bmN0aW9uXCI9PXR5cGVvZiBmLm1EYXRhP1wie2Z1bmN0aW9ufVwiOlwiJ1wiK2YubURhdGErXCInXCIpK1wiIGZvciByb3cgXCIrYiw0KSxhLmlEcmF3RXJyb3I9ZSksajtpZigoYz09PWd8fG51bGw9PT1jKSYmbnVsbCE9PWopYz1qO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGMpcmV0dXJuIGMuY2FsbChnKTtyZXR1cm4gbnVsbD09PWMmJlwiZGlzcGxheVwiPT1kP1wiXCI6Y31mdW5jdGlvbiBFYShhLGIsYyxkKXthLmFvQ29sdW1uc1tjXS5mblNldERhdGEoYS5hb0RhdGFbYl0uX2FEYXRhLFxuZCx7c2V0dGluZ3M6YSxyb3c6Yixjb2w6Y30pfWZ1bmN0aW9uIEdhKGEpe3JldHVybiBoLm1hcChhLm1hdGNoKC8oXFxcXC58W15cXC5dKSsvZyksZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvXFxcXC4vZyxcIi5cIil9KX1mdW5jdGlvbiBVKGEpe2lmKGguaXNQbGFpbk9iamVjdChhKSl7dmFyIGI9e307aC5lYWNoKGEsZnVuY3Rpb24oYSxjKXtjJiYoYlthXT1VKGMpKX0pO3JldHVybiBmdW5jdGlvbihhLGMsZixnKXt2YXIgaj1iW2NdfHxiLl87cmV0dXJuIGohPT1sP2ooYSxjLGYsZyk6YX19aWYobnVsbD09PWEpcmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhfTtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSlyZXR1cm4gZnVuY3Rpb24oYixjLGYsZyl7cmV0dXJuIGEoYixjLGYsZyl9O2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSYmKC0xIT09YS5pbmRleE9mKFwiLlwiKXx8LTEhPT1hLmluZGV4T2YoXCJbXCIpfHwtMSE9PWEuaW5kZXhPZihcIihcIikpKXt2YXIgYz1mdW5jdGlvbihhLGIsZil7dmFyIGcsXG5qO2lmKFwiXCIhPT1mKXtqPUdhKGYpO2Zvcih2YXIgaT0wLGg9ai5sZW5ndGg7aTxoO2krKyl7Zj1qW2ldLm1hdGNoKCQpO2c9altpXS5tYXRjaChRKTtpZihmKXtqW2ldPWpbaV0ucmVwbGFjZSgkLFwiXCIpO1wiXCIhPT1qW2ldJiYoYT1hW2pbaV1dKTtnPVtdO2ouc3BsaWNlKDAsaSsxKTtqPWouam9pbihcIi5cIik7aT0wO2ZvcihoPWEubGVuZ3RoO2k8aDtpKyspZy5wdXNoKGMoYVtpXSxiLGopKTthPWZbMF0uc3Vic3RyaW5nKDEsZlswXS5sZW5ndGgtMSk7YT1cIlwiPT09YT9nOmcuam9pbihhKTticmVha31lbHNlIGlmKGcpe2pbaV09altpXS5yZXBsYWNlKFEsXCJcIik7YT1hW2pbaV1dKCk7Y29udGludWV9aWYobnVsbD09PWF8fGFbaltpXV09PT1sKXJldHVybiBsO2E9YVtqW2ldXX19cmV0dXJuIGF9O3JldHVybiBmdW5jdGlvbihiLGUpe3JldHVybiBjKGIsZSxhKX19cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiW2FdfX1mdW5jdGlvbiBCYShhKXtpZihoLmlzUGxhaW5PYmplY3QoYSkpcmV0dXJuIEJhKGEuXyk7XG5pZihudWxsPT09YSlyZXR1cm4gZnVuY3Rpb24oKXt9O2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKXJldHVybiBmdW5jdGlvbihiLGQsZSl7YShiLFwic2V0XCIsZCxlKX07aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhJiYoLTEhPT1hLmluZGV4T2YoXCIuXCIpfHwtMSE9PWEuaW5kZXhPZihcIltcIil8fC0xIT09YS5pbmRleE9mKFwiKFwiKSkpe3ZhciBiPWZ1bmN0aW9uKGEsZCxlKXt2YXIgZT1HYShlKSxmO2Y9ZVtlLmxlbmd0aC0xXTtmb3IodmFyIGcsaixpPTAsaD1lLmxlbmd0aC0xO2k8aDtpKyspe2c9ZVtpXS5tYXRjaCgkKTtqPWVbaV0ubWF0Y2goUSk7aWYoZyl7ZVtpXT1lW2ldLnJlcGxhY2UoJCxcIlwiKTthW2VbaV1dPVtdO2Y9ZS5zbGljZSgpO2Yuc3BsaWNlKDAsaSsxKTtnPWYuam9pbihcIi5cIik7aj0wO2ZvcihoPWQubGVuZ3RoO2o8aDtqKyspZj17fSxiKGYsZFtqXSxnKSxhW2VbaV1dLnB1c2goZik7cmV0dXJufWomJihlW2ldPWVbaV0ucmVwbGFjZShRLFwiXCIpLGE9YVtlW2ldXShkKSk7aWYobnVsbD09PVxuYVtlW2ldXXx8YVtlW2ldXT09PWwpYVtlW2ldXT17fTthPWFbZVtpXV19aWYoZi5tYXRjaChRKSlhW2YucmVwbGFjZShRLFwiXCIpXShkKTtlbHNlIGFbZi5yZXBsYWNlKCQsXCJcIildPWR9O3JldHVybiBmdW5jdGlvbihjLGQpe3JldHVybiBiKGMsZCxhKX19cmV0dXJuIGZ1bmN0aW9uKGIsZCl7YlthXT1kfX1mdW5jdGlvbiBIYShhKXtyZXR1cm4gQyhhLmFvRGF0YSxcIl9hRGF0YVwiKX1mdW5jdGlvbiBqYShhKXthLmFvRGF0YS5sZW5ndGg9MDthLmFpRGlzcGxheU1hc3Rlci5sZW5ndGg9MDthLmFpRGlzcGxheS5sZW5ndGg9MH1mdW5jdGlvbiBrYShhLGIsYyl7Zm9yKHZhciBkPS0xLGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspYVtlXT09Yj9kPWU6YVtlXT5iJiZhW2VdLS07IC0xIT1kJiZjPT09bCYmYS5zcGxpY2UoZCwxKX1mdW5jdGlvbiBsYShhLGIsYyxkKXt2YXIgZT1hLmFvRGF0YVtiXSxmO2lmKFwiZG9tXCI9PT1jfHwoIWN8fFwiYXV0b1wiPT09YykmJlwiZG9tXCI9PT1lLnNyYyllLl9hRGF0YT1cbmlhKGEsZSkuZGF0YTtlbHNle3ZhciBnPWUuYW5DZWxscyxqO2lmKGcpe2M9MDtmb3IoZj1nLmxlbmd0aDtjPGY7YysrKXtmb3Ioaj1nW2NdO2ouY2hpbGROb2Rlcy5sZW5ndGg7KWoucmVtb3ZlQ2hpbGQoai5maXJzdENoaWxkKTtnW2NdLmlubmVySFRNTD1BKGEsYixjLFwiZGlzcGxheVwiKX19fWUuX2FTb3J0RGF0YT1udWxsO2UuX2FGaWx0ZXJEYXRhPW51bGw7YT1hLmFvQ29sdW1ucztpZihkIT09bClhW2RdLnNUeXBlPW51bGw7ZWxzZXtjPTA7Zm9yKGY9YS5sZW5ndGg7YzxmO2MrKylhW2NdLnNUeXBlPW51bGx9SWEoZSl9ZnVuY3Rpb24gaWEoYSxiKXt2YXIgYz1bXSxkPVtdLGU9Yi5maXJzdENoaWxkLGYsZyxqLGk9MCxuLG09YS5hb0NvbHVtbnMsbz1mdW5jdGlvbihhLGIsYyl7XCJzdHJpbmdcIj09PXR5cGVvZiBhJiYoYj1hLmluZGV4T2YoXCJAXCIpLC0xIT09YiYmKGE9YS5zdWJzdHJpbmcoYisxKSxqW1wiQFwiK2FdPWMuZ2V0QXR0cmlidXRlKGEpKSl9LGs9ZnVuY3Rpb24oYSl7Zz1tW2ldO1xubj1oLnRyaW0oYS5pbm5lckhUTUwpO2cmJmcuX2JBdHRyU3JjPyhqPXtkaXNwbGF5Om59LG8oZy5tRGF0YS5zb3J0LGosYSksbyhnLm1EYXRhLnR5cGUsaixhKSxvKGcubURhdGEuZmlsdGVyLGosYSksYy5wdXNoKGopKTpjLnB1c2gobik7aSsrfTtpZihlKWZvcig7ZTspe2Y9ZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpO2lmKFwiVERcIj09Znx8XCJUSFwiPT1mKWsoZSksZC5wdXNoKGUpO2U9ZS5uZXh0U2libGluZ31lbHNle2Q9Yi5hbkNlbGxzO2U9MDtmb3IoZj1kLmxlbmd0aDtlPGY7ZSsrKWsoZFtlXSl9cmV0dXJue2RhdGE6YyxjZWxsczpkfX1mdW5jdGlvbiBGYShhLGIsYyxkKXt2YXIgZT1hLmFvRGF0YVtiXSxmPWUuX2FEYXRhLGc9W10saixpLGgsbSxvO2lmKG51bGw9PT1lLm5Ucil7aj1jfHxPLmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtlLm5Ucj1qO2UuYW5DZWxscz1nO2ouX0RUX1Jvd0luZGV4PWI7SWEoZSk7bT0wO2ZvcihvPWEuYW9Db2x1bW5zLmxlbmd0aDttPG87bSsrKXtoPWEuYW9Db2x1bW5zW21dO1xuaT1jP2RbbV06Ty5jcmVhdGVFbGVtZW50KGguc0NlbGxUeXBlKTtnLnB1c2goaSk7aWYoIWN8fGgubVJlbmRlcnx8aC5tRGF0YSE9PW0paS5pbm5lckhUTUw9QShhLGIsbSxcImRpc3BsYXlcIik7aC5zQ2xhc3MmJihpLmNsYXNzTmFtZSs9XCIgXCIraC5zQ2xhc3MpO2guYlZpc2libGUmJiFjP2ouYXBwZW5kQ2hpbGQoaSk6IWguYlZpc2libGUmJmMmJmkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpKTtoLmZuQ3JlYXRlZENlbGwmJmguZm5DcmVhdGVkQ2VsbC5jYWxsKGEub0luc3RhbmNlLGksQShhLGIsbSksZixiLG0pfXUoYSxcImFvUm93Q3JlYXRlZENhbGxiYWNrXCIsbnVsbCxbaixmLGJdKX1lLm5Uci5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJyb3dcIil9ZnVuY3Rpb24gSWEoYSl7dmFyIGI9YS5uVHIsYz1hLl9hRGF0YTtpZihiKXtjLkRUX1Jvd0lkJiYoYi5pZD1jLkRUX1Jvd0lkKTtpZihjLkRUX1Jvd0NsYXNzKXt2YXIgZD1jLkRUX1Jvd0NsYXNzLnNwbGl0KFwiIFwiKTthLl9fcm93Yz1hLl9fcm93Yz9cbkphKGEuX19yb3djLmNvbmNhdChkKSk6ZDtoKGIpLnJlbW92ZUNsYXNzKGEuX19yb3djLmpvaW4oXCIgXCIpKS5hZGRDbGFzcyhjLkRUX1Jvd0NsYXNzKX1jLkRUX1Jvd0RhdGEmJmgoYikuZGF0YShjLkRUX1Jvd0RhdGEpfX1mdW5jdGlvbiBpYihhKXt2YXIgYixjLGQsZSxmLGc9YS5uVEhlYWQsaj1hLm5URm9vdCxpPTA9PT1oKFwidGgsIHRkXCIsZykubGVuZ3RoLG49YS5vQ2xhc3NlcyxtPWEuYW9Db2x1bW5zO2kmJihlPWgoXCI8dHIvPlwiKS5hcHBlbmRUbyhnKSk7Yj0wO2ZvcihjPW0ubGVuZ3RoO2I8YztiKyspZj1tW2JdLGQ9aChmLm5UaCkuYWRkQ2xhc3MoZi5zQ2xhc3MpLGkmJmQuYXBwZW5kVG8oZSksYS5vRmVhdHVyZXMuYlNvcnQmJihkLmFkZENsYXNzKGYuc1NvcnRpbmdDbGFzcyksITEhPT1mLmJTb3J0YWJsZSYmKGQuYXR0cihcInRhYmluZGV4XCIsYS5pVGFiSW5kZXgpLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIsYS5zVGFibGVJZCksS2EoYSxmLm5UaCxiKSkpLGYuc1RpdGxlIT1kLmh0bWwoKSYmXG5kLmh0bWwoZi5zVGl0bGUpLExhKGEsXCJoZWFkZXJcIikoYSxkLGYsbik7aSYmYWEoYS5hb0hlYWRlcixnKTtoKGcpLmZpbmQoXCI+dHJcIikuYXR0cihcInJvbGVcIixcInJvd1wiKTtoKGcpLmZpbmQoXCI+dHI+dGgsID50cj50ZFwiKS5hZGRDbGFzcyhuLnNIZWFkZXJUSCk7aChqKS5maW5kKFwiPnRyPnRoLCA+dHI+dGRcIikuYWRkQ2xhc3Mobi5zRm9vdGVyVEgpO2lmKG51bGwhPT1qKXthPWEuYW9Gb290ZXJbMF07Yj0wO2ZvcihjPWEubGVuZ3RoO2I8YztiKyspZj1tW2JdLGYublRmPWFbYl0uY2VsbCxmLnNDbGFzcyYmaChmLm5UZikuYWRkQ2xhc3MoZi5zQ2xhc3MpfX1mdW5jdGlvbiBiYShhLGIsYyl7dmFyIGQsZSxmLGc9W10saj1bXSxpPWEuYW9Db2x1bW5zLmxlbmd0aCxuO2lmKGIpe2M9PT1sJiYoYz0hMSk7ZD0wO2ZvcihlPWIubGVuZ3RoO2Q8ZTtkKyspe2dbZF09YltkXS5zbGljZSgpO2dbZF0ublRyPWJbZF0ublRyO2ZvcihmPWktMTswPD1mO2YtLSkhYS5hb0NvbHVtbnNbZl0uYlZpc2libGUmJlxuIWMmJmdbZF0uc3BsaWNlKGYsMSk7ai5wdXNoKFtdKX1kPTA7Zm9yKGU9Zy5sZW5ndGg7ZDxlO2QrKyl7aWYoYT1nW2RdLm5Ucilmb3IoO2Y9YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGYpO2Y9MDtmb3IoYj1nW2RdLmxlbmd0aDtmPGI7ZisrKWlmKG49aT0xLGpbZF1bZl09PT1sKXthLmFwcGVuZENoaWxkKGdbZF1bZl0uY2VsbCk7Zm9yKGpbZF1bZl09MTtnW2QraV0hPT1sJiZnW2RdW2ZdLmNlbGw9PWdbZCtpXVtmXS5jZWxsOylqW2QraV1bZl09MSxpKys7Zm9yKDtnW2RdW2Yrbl0hPT1sJiZnW2RdW2ZdLmNlbGw9PWdbZF1bZituXS5jZWxsOyl7Zm9yKGM9MDtjPGk7YysrKWpbZCtjXVtmK25dPTE7bisrfWgoZ1tkXVtmXS5jZWxsKS5hdHRyKFwicm93c3BhblwiLGkpLmF0dHIoXCJjb2xzcGFuXCIsbil9fX19ZnVuY3Rpb24gSyhhKXt2YXIgYj11KGEsXCJhb1ByZURyYXdDYWxsYmFja1wiLFwicHJlRHJhd1wiLFthXSk7aWYoLTEhPT1oLmluQXJyYXkoITEsYikpQihhLCExKTtlbHNle3ZhciBiPVxuW10sYz0wLGQ9YS5hc1N0cmlwZUNsYXNzZXMsZT1kLmxlbmd0aCxmPWEub0xhbmd1YWdlLGc9YS5pSW5pdERpc3BsYXlTdGFydCxqPVwic3NwXCI9PXooYSksaT1hLmFpRGlzcGxheTthLmJEcmF3aW5nPSEwO2chPT1sJiYtMSE9PWcmJihhLl9pRGlzcGxheVN0YXJ0PWo/ZzpnPj1hLmZuUmVjb3Jkc0Rpc3BsYXkoKT8wOmcsYS5pSW5pdERpc3BsYXlTdGFydD0tMSk7dmFyIGc9YS5faURpc3BsYXlTdGFydCxuPWEuZm5EaXNwbGF5RW5kKCk7aWYoYS5iRGVmZXJMb2FkaW5nKWEuYkRlZmVyTG9hZGluZz0hMSxhLmlEcmF3KyssQihhLCExKTtlbHNlIGlmKGope2lmKCFhLmJEZXN0cm95aW5nJiYhamIoYSkpcmV0dXJufWVsc2UgYS5pRHJhdysrO2lmKDAhPT1pLmxlbmd0aCl7Zj1qP2EuYW9EYXRhLmxlbmd0aDpuO2ZvcihqPWo/MDpnO2o8ZjtqKyspe3ZhciBtPWlbal0sbz1hLmFvRGF0YVttXTtudWxsPT09by5uVHImJkZhKGEsbSk7bT1vLm5UcjtpZigwIT09ZSl7dmFyIGs9ZFtjJWVdO28uX3NSb3dTdHJpcGUhPVxuayYmKGgobSkucmVtb3ZlQ2xhc3Moby5fc1Jvd1N0cmlwZSkuYWRkQ2xhc3Moayksby5fc1Jvd1N0cmlwZT1rKX11KGEsXCJhb1Jvd0NhbGxiYWNrXCIsbnVsbCxbbSxvLl9hRGF0YSxjLGpdKTtiLnB1c2gobSk7YysrfX1lbHNlIGM9Zi5zWmVyb1JlY29yZHMsMT09YS5pRHJhdyYmXCJhamF4XCI9PXooYSk/Yz1mLnNMb2FkaW5nUmVjb3JkczpmLnNFbXB0eVRhYmxlJiYwPT09YS5mblJlY29yZHNUb3RhbCgpJiYoYz1mLnNFbXB0eVRhYmxlKSxiWzBdPWgoXCI8dHIvPlwiLHtcImNsYXNzXCI6ZT9kWzBdOlwiXCJ9KS5hcHBlbmQoaChcIjx0ZCAvPlwiLHt2YWxpZ246XCJ0b3BcIixjb2xTcGFuOlooYSksXCJjbGFzc1wiOmEub0NsYXNzZXMuc1Jvd0VtcHR5fSkuaHRtbChjKSlbMF07dShhLFwiYW9IZWFkZXJDYWxsYmFja1wiLFwiaGVhZGVyXCIsW2goYS5uVEhlYWQpLmNoaWxkcmVuKFwidHJcIilbMF0sSGEoYSksZyxuLGldKTt1KGEsXCJhb0Zvb3RlckNhbGxiYWNrXCIsXCJmb290ZXJcIixbaChhLm5URm9vdCkuY2hpbGRyZW4oXCJ0clwiKVswXSxcbkhhKGEpLGcsbixpXSk7ZD1oKGEublRCb2R5KTtkLmNoaWxkcmVuKCkuZGV0YWNoKCk7ZC5hcHBlbmQoaChiKSk7dShhLFwiYW9EcmF3Q2FsbGJhY2tcIixcImRyYXdcIixbYV0pO2EuYlNvcnRlZD0hMTthLmJGaWx0ZXJlZD0hMTthLmJEcmF3aW5nPSExfX1mdW5jdGlvbiBMKGEsYil7dmFyIGM9YS5vRmVhdHVyZXMsZD1jLmJGaWx0ZXI7Yy5iU29ydCYma2IoYSk7ZD9jYShhLGEub1ByZXZpb3VzU2VhcmNoKTphLmFpRGlzcGxheT1hLmFpRGlzcGxheU1hc3Rlci5zbGljZSgpOyEwIT09YiYmKGEuX2lEaXNwbGF5U3RhcnQ9MCk7YS5fZHJhd0hvbGQ9YjtLKGEpO2EuX2RyYXdIb2xkPSExfWZ1bmN0aW9uIGxiKGEpe3ZhciBiPWEub0NsYXNzZXMsYz1oKGEublRhYmxlKSxjPWgoXCI8ZGl2Lz5cIikuaW5zZXJ0QmVmb3JlKGMpLGQ9YS5vRmVhdHVyZXMsZT1oKFwiPGRpdi8+XCIse2lkOmEuc1RhYmxlSWQrXCJfd3JhcHBlclwiLFwiY2xhc3NcIjpiLnNXcmFwcGVyKyhhLm5URm9vdD9cIlwiOlwiIFwiK2Iuc05vRm9vdGVyKX0pO1xuYS5uSG9sZGluZz1jWzBdO2EublRhYmxlV3JhcHBlcj1lWzBdO2EublRhYmxlUmVpbnNlcnRCZWZvcmU9YS5uVGFibGUubmV4dFNpYmxpbmc7Zm9yKHZhciBmPWEuc0RvbS5zcGxpdChcIlwiKSxnLGosaSxuLG0sbyxrPTA7azxmLmxlbmd0aDtrKyspe2c9bnVsbDtqPWZba107aWYoXCI8XCI9PWope2k9aChcIjxkaXYvPlwiKVswXTtuPWZbaysxXTtpZihcIidcIj09bnx8J1wiJz09bil7bT1cIlwiO2ZvcihvPTI7ZltrK29dIT1uOyltKz1mW2srb10sbysrO1wiSFwiPT1tP209Yi5zSlVJSGVhZGVyOlwiRlwiPT1tJiYobT1iLnNKVUlGb290ZXIpOy0xIT1tLmluZGV4T2YoXCIuXCIpPyhuPW0uc3BsaXQoXCIuXCIpLGkuaWQ9blswXS5zdWJzdHIoMSxuWzBdLmxlbmd0aC0xKSxpLmNsYXNzTmFtZT1uWzFdKTpcIiNcIj09bS5jaGFyQXQoMCk/aS5pZD1tLnN1YnN0cigxLG0ubGVuZ3RoLTEpOmkuY2xhc3NOYW1lPW07ays9b31lLmFwcGVuZChpKTtlPWgoaSl9ZWxzZSBpZihcIj5cIj09aillPWUucGFyZW50KCk7ZWxzZSBpZihcImxcIj09XG5qJiZkLmJQYWdpbmF0ZSYmZC5iTGVuZ3RoQ2hhbmdlKWc9bWIoYSk7ZWxzZSBpZihcImZcIj09aiYmZC5iRmlsdGVyKWc9bmIoYSk7ZWxzZSBpZihcInJcIj09aiYmZC5iUHJvY2Vzc2luZylnPW9iKGEpO2Vsc2UgaWYoXCJ0XCI9PWopZz1wYihhKTtlbHNlIGlmKFwiaVwiPT1qJiZkLmJJbmZvKWc9cWIoYSk7ZWxzZSBpZihcInBcIj09aiYmZC5iUGFnaW5hdGUpZz1yYihhKTtlbHNlIGlmKDAhPT1wLmV4dC5mZWF0dXJlLmxlbmd0aCl7aT1wLmV4dC5mZWF0dXJlO289MDtmb3Iobj1pLmxlbmd0aDtvPG47bysrKWlmKGo9PWlbb10uY0ZlYXR1cmUpe2c9aVtvXS5mbkluaXQoYSk7YnJlYWt9fWcmJihpPWEuYWFuRmVhdHVyZXMsaVtqXXx8KGlbal09W10pLGlbal0ucHVzaChnKSxlLmFwcGVuZChnKSl9Yy5yZXBsYWNlV2l0aChlKX1mdW5jdGlvbiBhYShhLGIpe3ZhciBjPWgoYikuY2hpbGRyZW4oXCJ0clwiKSxkLGUsZixnLGosaSxuLG0sbyxrO2Euc3BsaWNlKDAsYS5sZW5ndGgpO2Y9MDtmb3IoaT1jLmxlbmd0aDtmPFxuaTtmKyspYS5wdXNoKFtdKTtmPTA7Zm9yKGk9Yy5sZW5ndGg7ZjxpO2YrKyl7ZD1jW2ZdO2ZvcihlPWQuZmlyc3RDaGlsZDtlOyl7aWYoXCJURFwiPT1lLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCl8fFwiVEhcIj09ZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKXttPTEqZS5nZXRBdHRyaWJ1dGUoXCJjb2xzcGFuXCIpO289MSplLmdldEF0dHJpYnV0ZShcInJvd3NwYW5cIik7bT0hbXx8MD09PW18fDE9PT1tPzE6bTtvPSFvfHwwPT09b3x8MT09PW8/MTpvO2c9MDtmb3Ioaj1hW2ZdO2pbZ107KWcrKztuPWc7az0xPT09bT8hMDohMTtmb3Ioaj0wO2o8bTtqKyspZm9yKGc9MDtnPG87ZysrKWFbZitnXVtuK2pdPXtjZWxsOmUsdW5pcXVlOmt9LGFbZitnXS5uVHI9ZH1lPWUubmV4dFNpYmxpbmd9fX1mdW5jdGlvbiBtYShhLGIsYyl7dmFyIGQ9W107Y3x8KGM9YS5hb0hlYWRlcixiJiYoYz1bXSxhYShjLGIpKSk7Zm9yKHZhciBiPTAsZT1jLmxlbmd0aDtiPGU7YisrKWZvcih2YXIgZj0wLGc9Y1tiXS5sZW5ndGg7Zjxcbmc7ZisrKWlmKGNbYl1bZl0udW5pcXVlJiYoIWRbZl18fCFhLmJTb3J0Q2VsbHNUb3ApKWRbZl09Y1tiXVtmXS5jZWxsO3JldHVybiBkfWZ1bmN0aW9uIG5hKGEsYixjKXt1KGEsXCJhb1NlcnZlclBhcmFtc1wiLFwic2VydmVyUGFyYW1zXCIsW2JdKTtpZihiJiZoLmlzQXJyYXkoYikpe3ZhciBkPXt9LGU9LyguKj8pXFxbXFxdJC87aC5lYWNoKGIsZnVuY3Rpb24oYSxiKXt2YXIgYz1iLm5hbWUubWF0Y2goZSk7Yz8oYz1jWzBdLGRbY118fChkW2NdPVtdKSxkW2NdLnB1c2goYi52YWx1ZSkpOmRbYi5uYW1lXT1iLnZhbHVlfSk7Yj1kfXZhciBmLGc9YS5hamF4LGo9YS5vSW5zdGFuY2U7aWYoaC5pc1BsYWluT2JqZWN0KGcpJiZnLmRhdGEpe2Y9Zy5kYXRhO3ZhciBpPWguaXNGdW5jdGlvbihmKT9mKGIpOmYsYj1oLmlzRnVuY3Rpb24oZikmJmk/aTpoLmV4dGVuZCghMCxiLGkpO2RlbGV0ZSBnLmRhdGF9aT17ZGF0YTpiLHN1Y2Nlc3M6ZnVuY3Rpb24oYil7dmFyIGQ9Yi5lcnJvcnx8Yi5zRXJyb3I7XG5kJiZhLm9BcGkuX2ZuTG9nKGEsMCxkKTthLmpzb249Yjt1KGEsbnVsbCxcInhoclwiLFthLGJdKTtjKGIpfSxkYXRhVHlwZTpcImpzb25cIixjYWNoZTohMSx0eXBlOmEuc1NlcnZlck1ldGhvZCxlcnJvcjpmdW5jdGlvbihiLGMpe3ZhciBkPWEub0FwaS5fZm5Mb2c7XCJwYXJzZXJlcnJvclwiPT1jP2QoYSwwLFwiSW52YWxpZCBKU09OIHJlc3BvbnNlXCIsMSk6ND09PWIucmVhZHlTdGF0ZSYmZChhLDAsXCJBamF4IGVycm9yXCIsNyk7QihhLCExKX19O2Eub0FqYXhEYXRhPWI7dShhLG51bGwsXCJwcmVYaHJcIixbYSxiXSk7YS5mblNlcnZlckRhdGE/YS5mblNlcnZlckRhdGEuY2FsbChqLGEuc0FqYXhTb3VyY2UsaC5tYXAoYixmdW5jdGlvbihhLGIpe3JldHVybntuYW1lOmIsdmFsdWU6YX19KSxjLGEpOmEuc0FqYXhTb3VyY2V8fFwic3RyaW5nXCI9PT10eXBlb2YgZz9hLmpxWEhSPWguYWpheChoLmV4dGVuZChpLHt1cmw6Z3x8YS5zQWpheFNvdXJjZX0pKTpoLmlzRnVuY3Rpb24oZyk/YS5qcVhIUj1nLmNhbGwoaixcbmIsYyxhKTooYS5qcVhIUj1oLmFqYXgoaC5leHRlbmQoaSxnKSksZy5kYXRhPWYpfWZ1bmN0aW9uIGpiKGEpe3JldHVybiBhLmJBamF4RGF0YUdldD8oYS5pRHJhdysrLEIoYSwhMCksbmEoYSxzYihhKSxmdW5jdGlvbihiKXt0YihhLGIpfSksITEpOiEwfWZ1bmN0aW9uIHNiKGEpe3ZhciBiPWEuYW9Db2x1bW5zLGM9Yi5sZW5ndGgsZD1hLm9GZWF0dXJlcyxlPWEub1ByZXZpb3VzU2VhcmNoLGY9YS5hb1ByZVNlYXJjaENvbHMsZyxqPVtdLGksbixtLG89UihhKTtnPWEuX2lEaXNwbGF5U3RhcnQ7aT0hMSE9PWQuYlBhZ2luYXRlP2EuX2lEaXNwbGF5TGVuZ3RoOi0xO3ZhciBrPWZ1bmN0aW9uKGEsYil7ai5wdXNoKHtuYW1lOmEsdmFsdWU6Yn0pfTtrKFwic0VjaG9cIixhLmlEcmF3KTtrKFwiaUNvbHVtbnNcIixjKTtrKFwic0NvbHVtbnNcIixDKGIsXCJzTmFtZVwiKS5qb2luKFwiLFwiKSk7ayhcImlEaXNwbGF5U3RhcnRcIixnKTtrKFwiaURpc3BsYXlMZW5ndGhcIixpKTt2YXIgbD17ZHJhdzphLmlEcmF3LFxuY29sdW1uczpbXSxvcmRlcjpbXSxzdGFydDpnLGxlbmd0aDppLHNlYXJjaDp7dmFsdWU6ZS5zU2VhcmNoLHJlZ2V4OmUuYlJlZ2V4fX07Zm9yKGc9MDtnPGM7ZysrKW49YltnXSxtPWZbZ10saT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuLm1EYXRhP1wiZnVuY3Rpb25cIjpuLm1EYXRhLGwuY29sdW1ucy5wdXNoKHtkYXRhOmksbmFtZTpuLnNOYW1lLHNlYXJjaGFibGU6bi5iU2VhcmNoYWJsZSxvcmRlcmFibGU6bi5iU29ydGFibGUsc2VhcmNoOnt2YWx1ZTptLnNTZWFyY2gscmVnZXg6bS5iUmVnZXh9fSksayhcIm1EYXRhUHJvcF9cIitnLGkpLGQuYkZpbHRlciYmKGsoXCJzU2VhcmNoX1wiK2csbS5zU2VhcmNoKSxrKFwiYlJlZ2V4X1wiK2csbS5iUmVnZXgpLGsoXCJiU2VhcmNoYWJsZV9cIitnLG4uYlNlYXJjaGFibGUpKSxkLmJTb3J0JiZrKFwiYlNvcnRhYmxlX1wiK2csbi5iU29ydGFibGUpO2QuYkZpbHRlciYmKGsoXCJzU2VhcmNoXCIsZS5zU2VhcmNoKSxrKFwiYlJlZ2V4XCIsZS5iUmVnZXgpKTtkLmJTb3J0JiZcbihoLmVhY2gobyxmdW5jdGlvbihhLGIpe2wub3JkZXIucHVzaCh7Y29sdW1uOmIuY29sLGRpcjpiLmRpcn0pO2soXCJpU29ydENvbF9cIithLGIuY29sKTtrKFwic1NvcnREaXJfXCIrYSxiLmRpcil9KSxrKFwiaVNvcnRpbmdDb2xzXCIsby5sZW5ndGgpKTtiPXAuZXh0LmxlZ2FjeS5hamF4O3JldHVybiBudWxsPT09Yj9hLnNBamF4U291cmNlP2o6bDpiP2o6bH1mdW5jdGlvbiB0YihhLGIpe3ZhciBjPWIuc0VjaG8hPT1sP2Iuc0VjaG86Yi5kcmF3LGQ9Yi5pVG90YWxSZWNvcmRzIT09bD9iLmlUb3RhbFJlY29yZHM6Yi5yZWNvcmRzVG90YWwsZT1iLmlUb3RhbERpc3BsYXlSZWNvcmRzIT09bD9iLmlUb3RhbERpc3BsYXlSZWNvcmRzOmIucmVjb3Jkc0ZpbHRlcmVkO2lmKGMpe2lmKDEqYzxhLmlEcmF3KXJldHVybjthLmlEcmF3PTEqY31qYShhKTthLl9pUmVjb3Jkc1RvdGFsPXBhcnNlSW50KGQsMTApO2EuX2lSZWNvcmRzRGlzcGxheT1wYXJzZUludChlLDEwKTtjPW9hKGEsYik7ZD0wO2ZvcihlPVxuYy5sZW5ndGg7ZDxlO2QrKylJKGEsY1tkXSk7YS5haURpc3BsYXk9YS5haURpc3BsYXlNYXN0ZXIuc2xpY2UoKTthLmJBamF4RGF0YUdldD0hMTtLKGEpO2EuX2JJbml0Q29tcGxldGV8fHBhKGEsYik7YS5iQWpheERhdGFHZXQ9ITA7QihhLCExKX1mdW5jdGlvbiBvYShhLGIpe3ZhciBjPWguaXNQbGFpbk9iamVjdChhLmFqYXgpJiZhLmFqYXguZGF0YVNyYyE9PWw/YS5hamF4LmRhdGFTcmM6YS5zQWpheERhdGFQcm9wO3JldHVyblwiZGF0YVwiPT09Yz9iLmFhRGF0YXx8YltjXTpcIlwiIT09Yz9VKGMpKGIpOmJ9ZnVuY3Rpb24gbmIoYSl7dmFyIGI9YS5vQ2xhc3NlcyxjPWEuc1RhYmxlSWQsZD1hLm9MYW5ndWFnZSxlPWEub1ByZXZpb3VzU2VhcmNoLGY9YS5hYW5GZWF0dXJlcyxnPSc8aW5wdXQgdHlwZT1cInNlYXJjaFwiIGNsYXNzPVwiJytiLnNGaWx0ZXJJbnB1dCsnXCIvPicsaj1kLnNTZWFyY2gsaj1qLm1hdGNoKC9fSU5QVVRfLyk/ai5yZXBsYWNlKFwiX0lOUFVUX1wiLGcpOmorZyxiPWgoXCI8ZGl2Lz5cIixcbntpZDohZi5mP2MrXCJfZmlsdGVyXCI6bnVsbCxcImNsYXNzXCI6Yi5zRmlsdGVyfSkuYXBwZW5kKGgoXCI8bGFiZWwvPlwiKS5hcHBlbmQoaikpLGY9ZnVuY3Rpb24oKXt2YXIgYj0hdGhpcy52YWx1ZT9cIlwiOnRoaXMudmFsdWU7YiE9ZS5zU2VhcmNoJiYoY2EoYSx7c1NlYXJjaDpiLGJSZWdleDplLmJSZWdleCxiU21hcnQ6ZS5iU21hcnQsYkNhc2VJbnNlbnNpdGl2ZTplLmJDYXNlSW5zZW5zaXRpdmV9KSxhLl9pRGlzcGxheVN0YXJ0PTAsSyhhKSl9LGk9aChcImlucHV0XCIsYikudmFsKGUuc1NlYXJjaCkuYXR0cihcInBsYWNlaG9sZGVyXCIsZC5zU2VhcmNoUGxhY2Vob2xkZXIpLmJpbmQoXCJrZXl1cC5EVCBzZWFyY2guRFQgaW5wdXQuRFQgcGFzdGUuRFQgY3V0LkRUXCIsXCJzc3BcIj09PXooYSk/TWEoZiw0MDApOmYpLmJpbmQoXCJrZXlwcmVzcy5EVFwiLGZ1bmN0aW9uKGEpe2lmKDEzPT1hLmtleUNvZGUpcmV0dXJuITF9KS5hdHRyKFwiYXJpYS1jb250cm9sc1wiLGMpO2goYS5uVGFibGUpLm9uKFwic2VhcmNoLmR0LkRUXCIsXG5mdW5jdGlvbihiLGMpe2lmKGE9PT1jKXRyeXtpWzBdIT09Ty5hY3RpdmVFbGVtZW50JiZpLnZhbChlLnNTZWFyY2gpfWNhdGNoKGQpe319KTtyZXR1cm4gYlswXX1mdW5jdGlvbiBjYShhLGIsYyl7dmFyIGQ9YS5vUHJldmlvdXNTZWFyY2gsZT1hLmFvUHJlU2VhcmNoQ29scyxmPWZ1bmN0aW9uKGEpe2Quc1NlYXJjaD1hLnNTZWFyY2g7ZC5iUmVnZXg9YS5iUmVnZXg7ZC5iU21hcnQ9YS5iU21hcnQ7ZC5iQ2FzZUluc2Vuc2l0aXZlPWEuYkNhc2VJbnNlbnNpdGl2ZX07RGEoYSk7aWYoXCJzc3BcIiE9eihhKSl7dWIoYSxiLnNTZWFyY2gsYyxiLmJFc2NhcGVSZWdleCE9PWw/IWIuYkVzY2FwZVJlZ2V4OmIuYlJlZ2V4LGIuYlNtYXJ0LGIuYkNhc2VJbnNlbnNpdGl2ZSk7ZihiKTtmb3IoYj0wO2I8ZS5sZW5ndGg7YisrKXZiKGEsZVtiXS5zU2VhcmNoLGIsZVtiXS5iRXNjYXBlUmVnZXghPT1sPyFlW2JdLmJFc2NhcGVSZWdleDplW2JdLmJSZWdleCxlW2JdLmJTbWFydCxlW2JdLmJDYXNlSW5zZW5zaXRpdmUpO1xud2IoYSl9ZWxzZSBmKGIpO2EuYkZpbHRlcmVkPSEwO3UoYSxudWxsLFwic2VhcmNoXCIsW2FdKX1mdW5jdGlvbiB3YihhKXtmb3IodmFyIGI9cC5leHQuc2VhcmNoLGM9YS5haURpc3BsYXksZCxlLGY9MCxnPWIubGVuZ3RoO2Y8ZztmKyspe2Zvcih2YXIgaj1bXSxpPTAsaD1jLmxlbmd0aDtpPGg7aSsrKWU9Y1tpXSxkPWEuYW9EYXRhW2VdLGJbZl0oYSxkLl9hRmlsdGVyRGF0YSxlLGQuX2FEYXRhLGkpJiZqLnB1c2goZSk7Yy5sZW5ndGg9MDtjLnB1c2guYXBwbHkoYyxqKX19ZnVuY3Rpb24gdmIoYSxiLGMsZCxlLGYpe2lmKFwiXCIhPT1iKWZvcih2YXIgZz1hLmFpRGlzcGxheSxkPU5hKGIsZCxlLGYpLGU9Zy5sZW5ndGgtMTswPD1lO2UtLSliPWEuYW9EYXRhW2dbZV1dLl9hRmlsdGVyRGF0YVtjXSxkLnRlc3QoYil8fGcuc3BsaWNlKGUsMSl9ZnVuY3Rpb24gdWIoYSxiLGMsZCxlLGYpe3ZhciBkPU5hKGIsZCxlLGYpLGU9YS5vUHJldmlvdXNTZWFyY2guc1NlYXJjaCxmPWEuYWlEaXNwbGF5TWFzdGVyLFxuZzswIT09cC5leHQuc2VhcmNoLmxlbmd0aCYmKGM9ITApO2c9eGIoYSk7aWYoMD49Yi5sZW5ndGgpYS5haURpc3BsYXk9Zi5zbGljZSgpO2Vsc2V7aWYoZ3x8Y3x8ZS5sZW5ndGg+Yi5sZW5ndGh8fDAhPT1iLmluZGV4T2YoZSl8fGEuYlNvcnRlZClhLmFpRGlzcGxheT1mLnNsaWNlKCk7Yj1hLmFpRGlzcGxheTtmb3IoYz1iLmxlbmd0aC0xOzA8PWM7Yy0tKWQudGVzdChhLmFvRGF0YVtiW2NdXS5fc0ZpbHRlclJvdyl8fGIuc3BsaWNlKGMsMSl9fWZ1bmN0aW9uIE5hKGEsYixjLGQpe2E9Yj9hOk9hKGEpO2MmJihhPVwiXig/PS4qP1wiK2gubWFwKGEubWF0Y2goL1wiW15cIl0rXCJ8W14gXSsvZyl8fFwiXCIsZnVuY3Rpb24oYSl7cmV0dXJuJ1wiJz09PWEuY2hhckF0KDApP2EubWF0Y2goL15cIiguKilcIiQvKVsxXTphfSkuam9pbihcIikoPz0uKj9cIikrXCIpLiokXCIpO3JldHVybiBSZWdFeHAoYSxkP1wiaVwiOlwiXCIpfWZ1bmN0aW9uIE9hKGEpe3JldHVybiBhLnJlcGxhY2UoVmIsXCJcXFxcJDFcIil9ZnVuY3Rpb24geGIoYSl7dmFyIGI9XG5hLmFvQ29sdW1ucyxjLGQsZSxmLGcsaixpLGgsbT1wLmV4dC50eXBlLnNlYXJjaDtjPSExO2Q9MDtmb3IoZj1hLmFvRGF0YS5sZW5ndGg7ZDxmO2QrKylpZihoPWEuYW9EYXRhW2RdLCFoLl9hRmlsdGVyRGF0YSl7aj1bXTtlPTA7Zm9yKGc9Yi5sZW5ndGg7ZTxnO2UrKyljPWJbZV0sYy5iU2VhcmNoYWJsZT8oaT1BKGEsZCxlLFwiZmlsdGVyXCIpLG1bYy5zVHlwZV0mJihpPW1bYy5zVHlwZV0oaSkpLG51bGw9PT1pJiYoaT1cIlwiKSxcInN0cmluZ1wiIT09dHlwZW9mIGkmJmkudG9TdHJpbmcmJihpPWkudG9TdHJpbmcoKSkpOmk9XCJcIixpLmluZGV4T2YmJi0xIT09aS5pbmRleE9mKFwiJlwiKSYmKHFhLmlubmVySFRNTD1pLGk9V2I/cWEudGV4dENvbnRlbnQ6cWEuaW5uZXJUZXh0KSxpLnJlcGxhY2UmJihpPWkucmVwbGFjZSgvW1xcclxcbl0vZyxcIlwiKSksai5wdXNoKGkpO2guX2FGaWx0ZXJEYXRhPWo7aC5fc0ZpbHRlclJvdz1qLmpvaW4oXCIgIFwiKTtjPSEwfXJldHVybiBjfWZ1bmN0aW9uIHliKGEpe3JldHVybntzZWFyY2g6YS5zU2VhcmNoLFxuc21hcnQ6YS5iU21hcnQscmVnZXg6YS5iUmVnZXgsY2FzZUluc2Vuc2l0aXZlOmEuYkNhc2VJbnNlbnNpdGl2ZX19ZnVuY3Rpb24gemIoYSl7cmV0dXJue3NTZWFyY2g6YS5zZWFyY2gsYlNtYXJ0OmEuc21hcnQsYlJlZ2V4OmEucmVnZXgsYkNhc2VJbnNlbnNpdGl2ZTphLmNhc2VJbnNlbnNpdGl2ZX19ZnVuY3Rpb24gcWIoYSl7dmFyIGI9YS5zVGFibGVJZCxjPWEuYWFuRmVhdHVyZXMuaSxkPWgoXCI8ZGl2Lz5cIix7XCJjbGFzc1wiOmEub0NsYXNzZXMuc0luZm8saWQ6IWM/YitcIl9pbmZvXCI6bnVsbH0pO2N8fChhLmFvRHJhd0NhbGxiYWNrLnB1c2goe2ZuOkFiLHNOYW1lOlwiaW5mb3JtYXRpb25cIn0pLGQuYXR0cihcInJvbGVcIixcInN0YXR1c1wiKS5hdHRyKFwiYXJpYS1saXZlXCIsXCJwb2xpdGVcIiksaChhLm5UYWJsZSkuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIixiK1wiX2luZm9cIikpO3JldHVybiBkWzBdfWZ1bmN0aW9uIEFiKGEpe3ZhciBiPWEuYWFuRmVhdHVyZXMuaTtpZigwIT09Yi5sZW5ndGgpe3ZhciBjPVxuYS5vTGFuZ3VhZ2UsZD1hLl9pRGlzcGxheVN0YXJ0KzEsZT1hLmZuRGlzcGxheUVuZCgpLGY9YS5mblJlY29yZHNUb3RhbCgpLGc9YS5mblJlY29yZHNEaXNwbGF5KCksaj1nP2Muc0luZm86Yy5zSW5mb0VtcHR5O2chPT1mJiYoais9XCIgXCIrYy5zSW5mb0ZpbHRlcmVkKTtqKz1jLnNJbmZvUG9zdEZpeDtqPUJiKGEsaik7Yz1jLmZuSW5mb0NhbGxiYWNrO251bGwhPT1jJiYoaj1jLmNhbGwoYS5vSW5zdGFuY2UsYSxkLGUsZixnLGopKTtoKGIpLmh0bWwoail9fWZ1bmN0aW9uIEJiKGEsYil7dmFyIGM9YS5mbkZvcm1hdE51bWJlcixkPWEuX2lEaXNwbGF5U3RhcnQrMSxlPWEuX2lEaXNwbGF5TGVuZ3RoLGY9YS5mblJlY29yZHNEaXNwbGF5KCksZz0tMT09PWU7cmV0dXJuIGIucmVwbGFjZSgvX1NUQVJUXy9nLGMuY2FsbChhLGQpKS5yZXBsYWNlKC9fRU5EXy9nLGMuY2FsbChhLGEuZm5EaXNwbGF5RW5kKCkpKS5yZXBsYWNlKC9fTUFYXy9nLGMuY2FsbChhLGEuZm5SZWNvcmRzVG90YWwoKSkpLnJlcGxhY2UoL19UT1RBTF8vZyxcbmMuY2FsbChhLGYpKS5yZXBsYWNlKC9fUEFHRV8vZyxjLmNhbGwoYSxnPzE6TWF0aC5jZWlsKGQvZSkpKS5yZXBsYWNlKC9fUEFHRVNfL2csYy5jYWxsKGEsZz8xOk1hdGguY2VpbChmL2UpKSl9ZnVuY3Rpb24gcmEoYSl7dmFyIGIsYyxkPWEuaUluaXREaXNwbGF5U3RhcnQsZT1hLmFvQ29sdW1ucyxmO2M9YS5vRmVhdHVyZXM7aWYoYS5iSW5pdGlhbGlzZWQpe2xiKGEpO2liKGEpO2JhKGEsYS5hb0hlYWRlcik7YmEoYSxhLmFvRm9vdGVyKTtCKGEsITApO2MuYkF1dG9XaWR0aCYmQ2EoYSk7Yj0wO2ZvcihjPWUubGVuZ3RoO2I8YztiKyspZj1lW2JdLGYuc1dpZHRoJiYoZi5uVGguc3R5bGUud2lkdGg9cyhmLnNXaWR0aCkpO0woYSk7ZT16KGEpO1wic3NwXCIhPWUmJihcImFqYXhcIj09ZT9uYShhLFtdLGZ1bmN0aW9uKGMpe3ZhciBmPW9hKGEsYyk7Zm9yKGI9MDtiPGYubGVuZ3RoO2IrKylJKGEsZltiXSk7YS5pSW5pdERpc3BsYXlTdGFydD1kO0woYSk7QihhLCExKTtwYShhLGMpfSxhKTpcbihCKGEsITEpLHBhKGEpKSl9ZWxzZSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmEoYSl9LDIwMCl9ZnVuY3Rpb24gcGEoYSxiKXthLl9iSW5pdENvbXBsZXRlPSEwO2ImJlYoYSk7dShhLFwiYW9Jbml0Q29tcGxldGVcIixcImluaXRcIixbYSxiXSl9ZnVuY3Rpb24gUGEoYSxiKXt2YXIgYz1wYXJzZUludChiLDEwKTthLl9pRGlzcGxheUxlbmd0aD1jO1FhKGEpO3UoYSxudWxsLFwibGVuZ3RoXCIsW2EsY10pfWZ1bmN0aW9uIG1iKGEpe2Zvcih2YXIgYj1hLm9DbGFzc2VzLGM9YS5zVGFibGVJZCxkPWEuYUxlbmd0aE1lbnUsZT1oLmlzQXJyYXkoZFswXSksZj1lP2RbMF06ZCxkPWU/ZFsxXTpkLGU9aChcIjxzZWxlY3QvPlwiLHtuYW1lOmMrXCJfbGVuZ3RoXCIsXCJhcmlhLWNvbnRyb2xzXCI6YyxcImNsYXNzXCI6Yi5zTGVuZ3RoU2VsZWN0fSksZz0wLGo9Zi5sZW5ndGg7ZzxqO2crKyllWzBdW2ddPW5ldyBPcHRpb24oZFtnXSxmW2ddKTt2YXIgaT1oKFwiPGRpdj48bGFiZWwvPjwvZGl2PlwiKS5hZGRDbGFzcyhiLnNMZW5ndGgpO1xuYS5hYW5GZWF0dXJlcy5sfHwoaVswXS5pZD1jK1wiX2xlbmd0aFwiKTtpLmNoaWxkcmVuKCkuYXBwZW5kKGEub0xhbmd1YWdlLnNMZW5ndGhNZW51LnJlcGxhY2UoXCJfTUVOVV9cIixlWzBdLm91dGVySFRNTCkpO2goXCJzZWxlY3RcIixpKS52YWwoYS5faURpc3BsYXlMZW5ndGgpLmJpbmQoXCJjaGFuZ2UuRFRcIixmdW5jdGlvbigpe1BhKGEsaCh0aGlzKS52YWwoKSk7SyhhKX0pO2goYS5uVGFibGUpLmJpbmQoXCJsZW5ndGguZHQuRFRcIixmdW5jdGlvbihiLGMsZCl7YT09PWMmJmgoXCJzZWxlY3RcIixpKS52YWwoZCl9KTtyZXR1cm4gaVswXX1mdW5jdGlvbiByYihhKXt2YXIgYj1hLnNQYWdpbmF0aW9uVHlwZSxjPXAuZXh0LnBhZ2VyW2JdLGQ9XCJmdW5jdGlvblwiPT09dHlwZW9mIGMsZT1mdW5jdGlvbihhKXtLKGEpfSxiPWgoXCI8ZGl2Lz5cIikuYWRkQ2xhc3MoYS5vQ2xhc3Nlcy5zUGFnaW5nK2IpWzBdLGY9YS5hYW5GZWF0dXJlcztkfHxjLmZuSW5pdChhLGIsZSk7Zi5wfHwoYi5pZD1hLnNUYWJsZUlkK1xuXCJfcGFnaW5hdGVcIixhLmFvRHJhd0NhbGxiYWNrLnB1c2goe2ZuOmZ1bmN0aW9uKGEpe2lmKGQpe3ZhciBiPWEuX2lEaXNwbGF5U3RhcnQsaT1hLl9pRGlzcGxheUxlbmd0aCxoPWEuZm5SZWNvcmRzRGlzcGxheSgpLG09LTE9PT1pLGI9bT8wOk1hdGguY2VpbChiL2kpLGk9bT8xOk1hdGguY2VpbChoL2kpLGg9YyhiLGkpLG8sbT0wO2ZvcihvPWYucC5sZW5ndGg7bTxvO20rKylMYShhLFwicGFnZUJ1dHRvblwiKShhLGYucFttXSxtLGgsYixpKX1lbHNlIGMuZm5VcGRhdGUoYSxlKX0sc05hbWU6XCJwYWdpbmF0aW9uXCJ9KSk7cmV0dXJuIGJ9ZnVuY3Rpb24gUmEoYSxiLGMpe3ZhciBkPWEuX2lEaXNwbGF5U3RhcnQsZT1hLl9pRGlzcGxheUxlbmd0aCxmPWEuZm5SZWNvcmRzRGlzcGxheSgpOzA9PT1mfHwtMT09PWU/ZD0wOlwibnVtYmVyXCI9PT10eXBlb2YgYj8oZD1iKmUsZD5mJiYoZD0wKSk6XCJmaXJzdFwiPT1iP2Q9MDpcInByZXZpb3VzXCI9PWI/KGQ9MDw9ZT9kLWU6MCwwPmQmJihkPTApKTpcIm5leHRcIj09XG5iP2QrZTxmJiYoZCs9ZSk6XCJsYXN0XCI9PWI/ZD1NYXRoLmZsb29yKChmLTEpL2UpKmU6UChhLDAsXCJVbmtub3duIHBhZ2luZyBhY3Rpb246IFwiK2IsNSk7Yj1hLl9pRGlzcGxheVN0YXJ0IT09ZDthLl9pRGlzcGxheVN0YXJ0PWQ7YiYmKHUoYSxudWxsLFwicGFnZVwiLFthXSksYyYmSyhhKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gb2IoYSl7cmV0dXJuIGgoXCI8ZGl2Lz5cIix7aWQ6IWEuYWFuRmVhdHVyZXMucj9hLnNUYWJsZUlkK1wiX3Byb2Nlc3NpbmdcIjpudWxsLFwiY2xhc3NcIjphLm9DbGFzc2VzLnNQcm9jZXNzaW5nfSkuaHRtbChhLm9MYW5ndWFnZS5zUHJvY2Vzc2luZykuaW5zZXJ0QmVmb3JlKGEublRhYmxlKVswXX1mdW5jdGlvbiBCKGEsYil7YS5vRmVhdHVyZXMuYlByb2Nlc3NpbmcmJmgoYS5hYW5GZWF0dXJlcy5yKS5jc3MoXCJkaXNwbGF5XCIsYj9cImJsb2NrXCI6XCJub25lXCIpO3UoYSxudWxsLFwicHJvY2Vzc2luZ1wiLFthLGJdKX1mdW5jdGlvbiBwYihhKXt2YXIgYj1oKGEublRhYmxlKTtiLmF0dHIoXCJyb2xlXCIsXG5cImdyaWRcIik7dmFyIGM9YS5vU2Nyb2xsO2lmKFwiXCI9PT1jLnNYJiZcIlwiPT09Yy5zWSlyZXR1cm4gYS5uVGFibGU7dmFyIGQ9Yy5zWCxlPWMuc1ksZj1hLm9DbGFzc2VzLGc9Yi5jaGlsZHJlbihcImNhcHRpb25cIiksaj1nLmxlbmd0aD9nWzBdLl9jYXB0aW9uU2lkZTpudWxsLGk9aChiWzBdLmNsb25lTm9kZSghMSkpLG49aChiWzBdLmNsb25lTm9kZSghMSkpLG09Yi5jaGlsZHJlbihcInRmb290XCIpO2Muc1gmJlwiMTAwJVwiPT09Yi5hdHRyKFwid2lkdGhcIikmJmIucmVtb3ZlQXR0cihcIndpZHRoXCIpO20ubGVuZ3RofHwobT1udWxsKTtjPWgoXCI8ZGl2Lz5cIix7XCJjbGFzc1wiOmYuc1Njcm9sbFdyYXBwZXJ9KS5hcHBlbmQoaChcIjxkaXYvPlwiLHtcImNsYXNzXCI6Zi5zU2Nyb2xsSGVhZH0pLmNzcyh7b3ZlcmZsb3c6XCJoaWRkZW5cIixwb3NpdGlvbjpcInJlbGF0aXZlXCIsYm9yZGVyOjAsd2lkdGg6ZD8hZD9udWxsOnMoZCk6XCIxMDAlXCJ9KS5hcHBlbmQoaChcIjxkaXYvPlwiLHtcImNsYXNzXCI6Zi5zU2Nyb2xsSGVhZElubmVyfSkuY3NzKHtcImJveC1zaXppbmdcIjpcImNvbnRlbnQtYm94XCIsXG53aWR0aDpjLnNYSW5uZXJ8fFwiMTAwJVwifSkuYXBwZW5kKGkucmVtb3ZlQXR0cihcImlkXCIpLmNzcyhcIm1hcmdpbi1sZWZ0XCIsMCkuYXBwZW5kKGIuY2hpbGRyZW4oXCJ0aGVhZFwiKSkpKS5hcHBlbmQoXCJ0b3BcIj09PWo/ZzpudWxsKSkuYXBwZW5kKGgoXCI8ZGl2Lz5cIix7XCJjbGFzc1wiOmYuc1Njcm9sbEJvZHl9KS5jc3Moe292ZXJmbG93OlwiYXV0b1wiLGhlaWdodDohZT9udWxsOnMoZSksd2lkdGg6IWQ/bnVsbDpzKGQpfSkuYXBwZW5kKGIpKTttJiZjLmFwcGVuZChoKFwiPGRpdi8+XCIse1wiY2xhc3NcIjpmLnNTY3JvbGxGb290fSkuY3NzKHtvdmVyZmxvdzpcImhpZGRlblwiLGJvcmRlcjowLHdpZHRoOmQ/IWQ/bnVsbDpzKGQpOlwiMTAwJVwifSkuYXBwZW5kKGgoXCI8ZGl2Lz5cIix7XCJjbGFzc1wiOmYuc1Njcm9sbEZvb3RJbm5lcn0pLmFwcGVuZChuLnJlbW92ZUF0dHIoXCJpZFwiKS5jc3MoXCJtYXJnaW4tbGVmdFwiLDApLmFwcGVuZChiLmNoaWxkcmVuKFwidGZvb3RcIikpKSkuYXBwZW5kKFwiYm90dG9tXCI9PT1qP2c6XG5udWxsKSk7dmFyIGI9Yy5jaGlsZHJlbigpLG89YlswXSxmPWJbMV0saz1tP2JbMl06bnVsbDtkJiZoKGYpLnNjcm9sbChmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2Nyb2xsTGVmdDtvLnNjcm9sbExlZnQ9YTttJiYoay5zY3JvbGxMZWZ0PWEpfSk7YS5uU2Nyb2xsSGVhZD1vO2EublNjcm9sbEJvZHk9ZjthLm5TY3JvbGxGb290PWs7YS5hb0RyYXdDYWxsYmFjay5wdXNoKHtmbjpXLHNOYW1lOlwic2Nyb2xsaW5nXCJ9KTtyZXR1cm4gY1swXX1mdW5jdGlvbiBXKGEpe3ZhciBiPWEub1Njcm9sbCxjPWIuc1gsZD1iLnNYSW5uZXIsZT1iLnNZLGY9Yi5pQmFyV2lkdGgsZz1oKGEublNjcm9sbEhlYWQpLGo9Z1swXS5zdHlsZSxpPWcuY2hpbGRyZW4oXCJkaXZcIiksbj1pWzBdLnN0eWxlLG09aS5jaGlsZHJlbihcInRhYmxlXCIpLGk9YS5uU2Nyb2xsQm9keSxvPWgoaSksaz1pLnN0eWxlLGw9aChhLm5TY3JvbGxGb290KS5jaGlsZHJlbihcImRpdlwiKSxwPWwuY2hpbGRyZW4oXCJ0YWJsZVwiKSxyPWgoYS5uVEhlYWQpLFxucT1oKGEublRhYmxlKSxkYT1xWzBdLE09ZGEuc3R5bGUsSj1hLm5URm9vdD9oKGEublRGb290KTpudWxsLHU9YS5vQnJvd3Nlcix2PXUuYlNjcm9sbE92ZXJzaXplLHksdCx4LHcseixBPVtdLEI9W10sQz1bXSxELEU9ZnVuY3Rpb24oYSl7YT1hLnN0eWxlO2EucGFkZGluZ1RvcD1cIjBcIjthLnBhZGRpbmdCb3R0b209XCIwXCI7YS5ib3JkZXJUb3BXaWR0aD1cIjBcIjthLmJvcmRlckJvdHRvbVdpZHRoPVwiMFwiO2EuaGVpZ2h0PTB9O3EuY2hpbGRyZW4oXCJ0aGVhZCwgdGZvb3RcIikucmVtb3ZlKCk7ej1yLmNsb25lKCkucHJlcGVuZFRvKHEpO3k9ci5maW5kKFwidHJcIik7eD16LmZpbmQoXCJ0clwiKTt6LmZpbmQoXCJ0aCwgdGRcIikucmVtb3ZlQXR0cihcInRhYmluZGV4XCIpO0omJih3PUouY2xvbmUoKS5wcmVwZW5kVG8ocSksdD1KLmZpbmQoXCJ0clwiKSx3PXcuZmluZChcInRyXCIpKTtjfHwoay53aWR0aD1cIjEwMCVcIixnWzBdLnN0eWxlLndpZHRoPVwiMTAwJVwiKTtoLmVhY2gobWEoYSx6KSxmdW5jdGlvbihiLGMpe0Q9XG5nYShhLGIpO2Muc3R5bGUud2lkdGg9YS5hb0NvbHVtbnNbRF0uc1dpZHRofSk7SiYmRihmdW5jdGlvbihhKXthLnN0eWxlLndpZHRoPVwiXCJ9LHcpO2IuYkNvbGxhcHNlJiZcIlwiIT09ZSYmKGsuaGVpZ2h0PW9bMF0ub2Zmc2V0SGVpZ2h0K3JbMF0ub2Zmc2V0SGVpZ2h0K1wicHhcIik7Zz1xLm91dGVyV2lkdGgoKTtpZihcIlwiPT09Yyl7aWYoTS53aWR0aD1cIjEwMCVcIix2JiYocS5maW5kKFwidGJvZHlcIikuaGVpZ2h0KCk+aS5vZmZzZXRIZWlnaHR8fFwic2Nyb2xsXCI9PW8uY3NzKFwib3ZlcmZsb3cteVwiKSkpTS53aWR0aD1zKHEub3V0ZXJXaWR0aCgpLWYpfWVsc2VcIlwiIT09ZD9NLndpZHRoPXMoZCk6Zz09by53aWR0aCgpJiZvLmhlaWdodCgpPHEuaGVpZ2h0KCk/KE0ud2lkdGg9cyhnLWYpLHEub3V0ZXJXaWR0aCgpPmctZiYmKE0ud2lkdGg9cyhnKSkpOk0ud2lkdGg9cyhnKTtnPXEub3V0ZXJXaWR0aCgpO0YoRSx4KTtGKGZ1bmN0aW9uKGEpe0MucHVzaChhLmlubmVySFRNTCk7QS5wdXNoKHMoaChhKS5jc3MoXCJ3aWR0aFwiKSkpfSxcbngpO0YoZnVuY3Rpb24oYSxiKXthLnN0eWxlLndpZHRoPUFbYl19LHkpO2goeCkuaGVpZ2h0KDApO0omJihGKEUsdyksRihmdW5jdGlvbihhKXtCLnB1c2gocyhoKGEpLmNzcyhcIndpZHRoXCIpKSl9LHcpLEYoZnVuY3Rpb24oYSxiKXthLnN0eWxlLndpZHRoPUJbYl19LHQpLGgodykuaGVpZ2h0KDApKTtGKGZ1bmN0aW9uKGEsYil7YS5pbm5lckhUTUw9JzxkaXYgY2xhc3M9XCJkYXRhVGFibGVzX3NpemluZ1wiIHN0eWxlPVwiaGVpZ2h0OjA7b3ZlcmZsb3c6aGlkZGVuO1wiPicrQ1tiXStcIjwvZGl2PlwiO2Euc3R5bGUud2lkdGg9QVtiXX0seCk7SiYmRihmdW5jdGlvbihhLGIpe2EuaW5uZXJIVE1MPVwiXCI7YS5zdHlsZS53aWR0aD1CW2JdfSx3KTtpZihxLm91dGVyV2lkdGgoKTxnKXt0PWkuc2Nyb2xsSGVpZ2h0Pmkub2Zmc2V0SGVpZ2h0fHxcInNjcm9sbFwiPT1vLmNzcyhcIm92ZXJmbG93LXlcIik/ZytmOmc7aWYodiYmKGkuc2Nyb2xsSGVpZ2h0Pmkub2Zmc2V0SGVpZ2h0fHxcInNjcm9sbFwiPT1vLmNzcyhcIm92ZXJmbG93LXlcIikpKU0ud2lkdGg9XG5zKHQtZik7KFwiXCI9PT1jfHxcIlwiIT09ZCkmJlAoYSwxLFwiUG9zc2libGUgY29sdW1uIG1pc2FsaWdubWVudFwiLDYpfWVsc2UgdD1cIjEwMCVcIjtrLndpZHRoPXModCk7ai53aWR0aD1zKHQpO0omJihhLm5TY3JvbGxGb290LnN0eWxlLndpZHRoPXModCkpOyFlJiZ2JiYoay5oZWlnaHQ9cyhkYS5vZmZzZXRIZWlnaHQrZikpO2UmJmIuYkNvbGxhcHNlJiYoay5oZWlnaHQ9cyhlKSxiPWMmJmRhLm9mZnNldFdpZHRoPmkub2Zmc2V0V2lkdGg/ZjowLGRhLm9mZnNldEhlaWdodDxpLm9mZnNldEhlaWdodCYmKGsuaGVpZ2h0PXMoZGEub2Zmc2V0SGVpZ2h0K2IpKSk7Yj1xLm91dGVyV2lkdGgoKTttWzBdLnN0eWxlLndpZHRoPXMoYik7bi53aWR0aD1zKGIpO209cS5oZWlnaHQoKT5pLmNsaWVudEhlaWdodHx8XCJzY3JvbGxcIj09by5jc3MoXCJvdmVyZmxvdy15XCIpO3U9XCJwYWRkaW5nXCIrKHUuYlNjcm9sbGJhckxlZnQ/XCJMZWZ0XCI6XCJSaWdodFwiKTtuW3VdPW0/ZitcInB4XCI6XCIwcHhcIjtKJiYocFswXS5zdHlsZS53aWR0aD1cbnMoYiksbFswXS5zdHlsZS53aWR0aD1zKGIpLGxbMF0uc3R5bGVbdV09bT9mK1wicHhcIjpcIjBweFwiKTtvLnNjcm9sbCgpO2lmKChhLmJTb3J0ZWR8fGEuYkZpbHRlcmVkKSYmIWEuX2RyYXdIb2xkKWkuc2Nyb2xsVG9wPTB9ZnVuY3Rpb24gRihhLGIsYyl7Zm9yKHZhciBkPTAsZT0wLGY9Yi5sZW5ndGgsZyxqO2U8Zjspe2c9YltlXS5maXJzdENoaWxkO2ZvcihqPWM/Y1tlXS5maXJzdENoaWxkOm51bGw7ZzspMT09PWcubm9kZVR5cGUmJihjP2EoZyxqLGQpOmEoZyxkKSxkKyspLGc9Zy5uZXh0U2libGluZyxqPWM/ai5uZXh0U2libGluZzpudWxsO2UrK319ZnVuY3Rpb24gQ2EoYSl7dmFyIGI9YS5uVGFibGUsYz1hLmFvQ29sdW1ucyxkPWEub1Njcm9sbCxlPWQuc1ksZj1kLnNYLGc9ZC5zWElubmVyLGo9Yy5sZW5ndGgsZD1YKGEsXCJiVmlzaWJsZVwiKSxpPWgoXCJ0aFwiLGEublRIZWFkKSxuPWIuZ2V0QXR0cmlidXRlKFwid2lkdGhcIiksbT1iLnBhcmVudE5vZGUsbz0hMSxrLGw7Zm9yKGs9MDtrPFxuZC5sZW5ndGg7aysrKWw9Y1tkW2tdXSxudWxsIT09bC5zV2lkdGgmJihsLnNXaWR0aD1DYihsLnNXaWR0aE9yaWcsbSksbz0hMCk7aWYoIW8mJiFmJiYhZSYmaj09WihhKSYmaj09aS5sZW5ndGgpZm9yKGs9MDtrPGo7aysrKWNba10uc1dpZHRoPXMoaS5lcShrKS53aWR0aCgpKTtlbHNle2o9aChiKS5jbG9uZSgpLmVtcHR5KCkuY3NzKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLnJlbW92ZUF0dHIoXCJpZFwiKS5hcHBlbmQoaChhLm5USGVhZCkuY2xvbmUoITEpKS5hcHBlbmQoaChhLm5URm9vdCkuY2xvbmUoITEpKS5hcHBlbmQoaChcIjx0Ym9keT48dHIvPjwvdGJvZHk+XCIpKTtqLmZpbmQoXCJ0Zm9vdCB0aCwgdGZvb3QgdGRcIikuY3NzKFwid2lkdGhcIixcIlwiKTt2YXIgcD1qLmZpbmQoXCJ0Ym9keSB0clwiKSxpPW1hKGEsai5maW5kKFwidGhlYWRcIilbMF0pO2ZvcihrPTA7azxkLmxlbmd0aDtrKyspbD1jW2Rba11dLGlba10uc3R5bGUud2lkdGg9bnVsbCE9PWwuc1dpZHRoT3JpZyYmXCJcIiE9PWwuc1dpZHRoT3JpZz9cbnMobC5zV2lkdGhPcmlnKTpcIlwiO2lmKGEuYW9EYXRhLmxlbmd0aClmb3Ioaz0wO2s8ZC5sZW5ndGg7aysrKW89ZFtrXSxsPWNbb10saChEYihhLG8pKS5jbG9uZSghMSkuYXBwZW5kKGwuc0NvbnRlbnRQYWRkaW5nKS5hcHBlbmRUbyhwKTtqLmFwcGVuZFRvKG0pO2YmJmc/ai53aWR0aChnKTpmPyhqLmNzcyhcIndpZHRoXCIsXCJhdXRvXCIpLGoud2lkdGgoKTxtLm9mZnNldFdpZHRoJiZqLndpZHRoKG0ub2Zmc2V0V2lkdGgpKTplP2oud2lkdGgobS5vZmZzZXRXaWR0aCk6biYmai53aWR0aChuKTtFYihhLGpbMF0pO2lmKGYpe2ZvcihrPWc9MDtrPGQubGVuZ3RoO2srKylsPWNbZFtrXV0sZT1oKGlba10pLm91dGVyV2lkdGgoKSxnKz1udWxsPT09bC5zV2lkdGhPcmlnP2U6cGFyc2VJbnQobC5zV2lkdGgsMTApK2UtaChpW2tdKS53aWR0aCgpO2oud2lkdGgocyhnKSk7Yi5zdHlsZS53aWR0aD1zKGcpfWZvcihrPTA7azxkLmxlbmd0aDtrKyspaWYobD1jW2Rba11dLGU9aChpW2tdKS53aWR0aCgpKWwuc1dpZHRoPVxucyhlKTtiLnN0eWxlLndpZHRoPXMoai5jc3MoXCJ3aWR0aFwiKSk7ai5yZW1vdmUoKX1uJiYoYi5zdHlsZS53aWR0aD1zKG4pKTtpZigobnx8ZikmJiFhLl9yZXN6RXZ0KWgoemEpLmJpbmQoXCJyZXNpemUuRFQtXCIrYS5zSW5zdGFuY2UsTWEoZnVuY3Rpb24oKXtWKGEpfSkpLGEuX3Jlc3pFdnQ9ITB9ZnVuY3Rpb24gTWEoYSxiKXt2YXIgYz1ifHwyMDAsZCxlO3JldHVybiBmdW5jdGlvbigpe3ZhciBiPXRoaXMsZz0rbmV3IERhdGUsaj1hcmd1bWVudHM7ZCYmZzxkK2M/KGNsZWFyVGltZW91dChlKSxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtkPWw7YS5hcHBseShiLGopfSxjKSk6ZD8oZD1nLGEuYXBwbHkoYixqKSk6ZD1nfX1mdW5jdGlvbiBDYihhLGIpe2lmKCFhKXJldHVybiAwO3ZhciBjPWgoXCI8ZGl2Lz5cIikuY3NzKFwid2lkdGhcIixzKGEpKS5hcHBlbmRUbyhifHxPLmJvZHkpLGQ9Y1swXS5vZmZzZXRXaWR0aDtjLnJlbW92ZSgpO3JldHVybiBkfWZ1bmN0aW9uIEViKGEsYil7dmFyIGM9XG5hLm9TY3JvbGw7aWYoYy5zWHx8Yy5zWSljPSFjLnNYP2MuaUJhcldpZHRoOjAsYi5zdHlsZS53aWR0aD1zKGgoYikub3V0ZXJXaWR0aCgpLWMpfWZ1bmN0aW9uIERiKGEsYil7dmFyIGM9RmIoYSxiKTtpZigwPmMpcmV0dXJuIG51bGw7dmFyIGQ9YS5hb0RhdGFbY107cmV0dXJuIWQublRyP2goXCI8dGQvPlwiKS5odG1sKEEoYSxjLGIsXCJkaXNwbGF5XCIpKVswXTpkLmFuQ2VsbHNbYl19ZnVuY3Rpb24gRmIoYSxiKXtmb3IodmFyIGMsZD0tMSxlPS0xLGY9MCxnPWEuYW9EYXRhLmxlbmd0aDtmPGc7ZisrKWM9QShhLGYsYixcImRpc3BsYXlcIikrXCJcIixjPWMucmVwbGFjZShYYixcIlwiKSxjLmxlbmd0aD5kJiYoZD1jLmxlbmd0aCxlPWYpO3JldHVybiBlfWZ1bmN0aW9uIHMoYSl7cmV0dXJuIG51bGw9PT1hP1wiMHB4XCI6XCJudW1iZXJcIj09dHlwZW9mIGE/MD5hP1wiMHB4XCI6YStcInB4XCI6YS5tYXRjaCgvXFxkJC8pP2ErXCJweFwiOmF9ZnVuY3Rpb24gR2IoKXtpZighcC5fX3Njcm9sbGJhcldpZHRoKXt2YXIgYT1cbmgoXCI8cC8+XCIpLmNzcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OjIwMCxwYWRkaW5nOjB9KVswXSxiPWgoXCI8ZGl2Lz5cIikuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOjAsbGVmdDowLHdpZHRoOjIwMCxoZWlnaHQ6MTUwLHBhZGRpbmc6MCxvdmVyZmxvdzpcImhpZGRlblwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIn0pLmFwcGVuZChhKS5hcHBlbmRUbyhcImJvZHlcIiksYz1hLm9mZnNldFdpZHRoO2IuY3NzKFwib3ZlcmZsb3dcIixcInNjcm9sbFwiKTthPWEub2Zmc2V0V2lkdGg7Yz09PWEmJihhPWJbMF0uY2xpZW50V2lkdGgpO2IucmVtb3ZlKCk7cC5fX3Njcm9sbGJhcldpZHRoPWMtYX1yZXR1cm4gcC5fX3Njcm9sbGJhcldpZHRofWZ1bmN0aW9uIFIoYSl7dmFyIGIsYyxkPVtdLGU9YS5hb0NvbHVtbnMsZixnLGosaTtiPWEuYWFTb3J0aW5nRml4ZWQ7Yz1oLmlzUGxhaW5PYmplY3QoYik7dmFyIG49W107Zj1mdW5jdGlvbihhKXthLmxlbmd0aCYmIWguaXNBcnJheShhWzBdKT9uLnB1c2goYSk6bi5wdXNoLmFwcGx5KG4sXG5hKX07aC5pc0FycmF5KGIpJiZmKGIpO2MmJmIucHJlJiZmKGIucHJlKTtmKGEuYWFTb3J0aW5nKTtjJiZiLnBvc3QmJmYoYi5wb3N0KTtmb3IoYT0wO2E8bi5sZW5ndGg7YSsrKXtpPW5bYV1bMF07Zj1lW2ldLmFEYXRhU29ydDtiPTA7Zm9yKGM9Zi5sZW5ndGg7YjxjO2IrKylnPWZbYl0saj1lW2ddLnNUeXBlfHxcInN0cmluZ1wiLGQucHVzaCh7c3JjOmksY29sOmcsZGlyOm5bYV1bMV0saW5kZXg6blthXVsyXSx0eXBlOmosZm9ybWF0dGVyOnAuZXh0LnR5cGUub3JkZXJbaitcIi1wcmVcIl19KX1yZXR1cm4gZH1mdW5jdGlvbiBrYihhKXt2YXIgYixjLGQ9W10sZT1wLmV4dC50eXBlLm9yZGVyLGY9YS5hb0RhdGEsZz0wLGosaT1hLmFpRGlzcGxheU1hc3RlcixoO0RhKGEpO2g9UihhKTtiPTA7Zm9yKGM9aC5sZW5ndGg7YjxjO2IrKylqPWhbYl0sai5mb3JtYXR0ZXImJmcrKyxIYihhLGouY29sKTtpZihcInNzcFwiIT16KGEpJiYwIT09aC5sZW5ndGgpe2I9MDtmb3IoYz1pLmxlbmd0aDtiPGM7YisrKWRbaVtiXV09XG5iO2c9PT1oLmxlbmd0aD9pLnNvcnQoZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGcsaixpPWgubGVuZ3RoLGw9ZlthXS5fYVNvcnREYXRhLHA9ZltiXS5fYVNvcnREYXRhO2ZvcihnPTA7ZzxpO2crKylpZihqPWhbZ10sYz1sW2ouY29sXSxlPXBbai5jb2xdLGM9YzxlPy0xOmM+ZT8xOjAsMCE9PWMpcmV0dXJuXCJhc2NcIj09PWouZGlyP2M6LWM7Yz1kW2FdO2U9ZFtiXTtyZXR1cm4gYzxlPy0xOmM+ZT8xOjB9KTppLnNvcnQoZnVuY3Rpb24oYSxiKXt2YXIgYyxnLGosaSxsPWgubGVuZ3RoLHA9ZlthXS5fYVNvcnREYXRhLHI9ZltiXS5fYVNvcnREYXRhO2ZvcihqPTA7ajxsO2orKylpZihpPWhbal0sYz1wW2kuY29sXSxnPXJbaS5jb2xdLGk9ZVtpLnR5cGUrXCItXCIraS5kaXJdfHxlW1wic3RyaW5nLVwiK2kuZGlyXSxjPWkoYyxnKSwwIT09YylyZXR1cm4gYztjPWRbYV07Zz1kW2JdO3JldHVybiBjPGc/LTE6Yz5nPzE6MH0pfWEuYlNvcnRlZD0hMH1mdW5jdGlvbiBJYihhKXtmb3IodmFyIGIsYyxcbmQ9YS5hb0NvbHVtbnMsZT1SKGEpLGE9YS5vTGFuZ3VhZ2Uub0FyaWEsZj0wLGc9ZC5sZW5ndGg7ZjxnO2YrKyl7Yz1kW2ZdO3ZhciBqPWMuYXNTb3J0aW5nO2I9Yy5zVGl0bGUucmVwbGFjZSgvPC4qPz4vZyxcIlwiKTt2YXIgaT1jLm5UaDtpLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtc29ydFwiKTtjLmJTb3J0YWJsZSYmKDA8ZS5sZW5ndGgmJmVbMF0uY29sPT1mPyhpLnNldEF0dHJpYnV0ZShcImFyaWEtc29ydFwiLFwiYXNjXCI9PWVbMF0uZGlyP1wiYXNjZW5kaW5nXCI6XCJkZXNjZW5kaW5nXCIpLGM9altlWzBdLmluZGV4KzFdfHxqWzBdKTpjPWpbMF0sYis9XCJhc2NcIj09PWM/YS5zU29ydEFzY2VuZGluZzphLnNTb3J0RGVzY2VuZGluZyk7aS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsYil9fWZ1bmN0aW9uIFNhKGEsYixjLGQpe3ZhciBlPWEuYWFTb3J0aW5nLGY9YS5hb0NvbHVtbnNbYl0uYXNTb3J0aW5nLGc9ZnVuY3Rpb24oYSl7dmFyIGI9YS5faWR4O2I9PT1sJiYoYj1oLmluQXJyYXkoYVsxXSxcbmYpKTtyZXR1cm4gYisxPj1mLmxlbmd0aD8wOmIrMX07XCJudW1iZXJcIj09PXR5cGVvZiBlWzBdJiYoZT1hLmFhU29ydGluZz1bZV0pO2MmJmEub0ZlYXR1cmVzLmJTb3J0TXVsdGk/KGM9aC5pbkFycmF5KGIsQyhlLFwiMFwiKSksLTEhPT1jPyhiPWcoZVtjXSksZVtjXVsxXT1mW2JdLGVbY10uX2lkeD1iKTooZS5wdXNoKFtiLGZbMF0sMF0pLGVbZS5sZW5ndGgtMV0uX2lkeD0wKSk6ZS5sZW5ndGgmJmVbMF1bMF09PWI/KGI9ZyhlWzBdKSxlLmxlbmd0aD0xLGVbMF1bMV09ZltiXSxlWzBdLl9pZHg9Yik6KGUubGVuZ3RoPTAsZS5wdXNoKFtiLGZbMF1dKSxlWzBdLl9pZHg9MCk7TChhKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkJiZkKGEpfWZ1bmN0aW9uIEthKGEsYixjLGQpe3ZhciBlPWEuYW9Db2x1bW5zW2NdO1RhKGIse30sZnVuY3Rpb24oYil7ITEhPT1lLmJTb3J0YWJsZSYmKGEub0ZlYXR1cmVzLmJQcm9jZXNzaW5nPyhCKGEsITApLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtTYShhLGMsYi5zaGlmdEtleSxcbmQpO1wic3NwXCIhPT16KGEpJiZCKGEsITEpfSwwKSk6U2EoYSxjLGIuc2hpZnRLZXksZCkpfSl9ZnVuY3Rpb24gc2EoYSl7dmFyIGI9YS5hTGFzdFNvcnQsYz1hLm9DbGFzc2VzLnNTb3J0Q29sdW1uLGQ9UihhKSxlPWEub0ZlYXR1cmVzLGYsZztpZihlLmJTb3J0JiZlLmJTb3J0Q2xhc3Nlcyl7ZT0wO2ZvcihmPWIubGVuZ3RoO2U8ZjtlKyspZz1iW2VdLnNyYyxoKEMoYS5hb0RhdGEsXCJhbkNlbGxzXCIsZykpLnJlbW92ZUNsYXNzKGMrKDI+ZT9lKzE6MykpO2U9MDtmb3IoZj1kLmxlbmd0aDtlPGY7ZSsrKWc9ZFtlXS5zcmMsaChDKGEuYW9EYXRhLFwiYW5DZWxsc1wiLGcpKS5hZGRDbGFzcyhjKygyPmU/ZSsxOjMpKX1hLmFMYXN0U29ydD1kfWZ1bmN0aW9uIEhiKGEsYil7dmFyIGM9YS5hb0NvbHVtbnNbYl0sZD1wLmV4dC5vcmRlcltjLnNTb3J0RGF0YVR5cGVdLGU7ZCYmKGU9ZC5jYWxsKGEub0luc3RhbmNlLGEsYixZKGEsYikpKTtmb3IodmFyIGYsZz1wLmV4dC50eXBlLm9yZGVyW2Muc1R5cGUrXG5cIi1wcmVcIl0saj0wLGk9YS5hb0RhdGEubGVuZ3RoO2o8aTtqKyspaWYoYz1hLmFvRGF0YVtqXSxjLl9hU29ydERhdGF8fChjLl9hU29ydERhdGE9W10pLCFjLl9hU29ydERhdGFbYl18fGQpZj1kP2Vbal06QShhLGosYixcInNvcnRcIiksYy5fYVNvcnREYXRhW2JdPWc/ZyhmKTpmfWZ1bmN0aW9uIHRhKGEpe2lmKGEub0ZlYXR1cmVzLmJTdGF0ZVNhdmUmJiFhLmJEZXN0cm95aW5nKXt2YXIgYj17dGltZTorbmV3IERhdGUsc3RhcnQ6YS5faURpc3BsYXlTdGFydCxsZW5ndGg6YS5faURpc3BsYXlMZW5ndGgsb3JkZXI6aC5leHRlbmQoITAsW10sYS5hYVNvcnRpbmcpLHNlYXJjaDp5YihhLm9QcmV2aW91c1NlYXJjaCksY29sdW1uczpoLm1hcChhLmFvQ29sdW1ucyxmdW5jdGlvbihiLGQpe3JldHVybnt2aXNpYmxlOmIuYlZpc2libGUsc2VhcmNoOnliKGEuYW9QcmVTZWFyY2hDb2xzW2RdKX19KX07dShhLFwiYW9TdGF0ZVNhdmVQYXJhbXNcIixcInN0YXRlU2F2ZVBhcmFtc1wiLFthLGJdKTthLm9TYXZlZFN0YXRlPVxuYjthLmZuU3RhdGVTYXZlQ2FsbGJhY2suY2FsbChhLm9JbnN0YW5jZSxhLGIpfX1mdW5jdGlvbiBKYihhKXt2YXIgYixjLGQ9YS5hb0NvbHVtbnM7aWYoYS5vRmVhdHVyZXMuYlN0YXRlU2F2ZSl7dmFyIGU9YS5mblN0YXRlTG9hZENhbGxiYWNrLmNhbGwoYS5vSW5zdGFuY2UsYSk7aWYoZSYmZS50aW1lJiYoYj11KGEsXCJhb1N0YXRlTG9hZFBhcmFtc1wiLFwic3RhdGVMb2FkUGFyYW1zXCIsW2EsZV0pLC0xPT09aC5pbkFycmF5KCExLGIpJiYoYj1hLmlTdGF0ZUR1cmF0aW9uLCEoMDxiJiZlLnRpbWU8K25ldyBEYXRlLTFFMypiKSYmZC5sZW5ndGg9PT1lLmNvbHVtbnMubGVuZ3RoKSkpe2Eub0xvYWRlZFN0YXRlPWguZXh0ZW5kKCEwLHt9LGUpO2EuX2lEaXNwbGF5U3RhcnQ9ZS5zdGFydDthLmlJbml0RGlzcGxheVN0YXJ0PWUuc3RhcnQ7YS5faURpc3BsYXlMZW5ndGg9ZS5sZW5ndGg7YS5hYVNvcnRpbmc9W107aC5lYWNoKGUub3JkZXIsZnVuY3Rpb24oYixjKXthLmFhU29ydGluZy5wdXNoKGNbMF0+PVxuZC5sZW5ndGg/WzAsY1sxXV06Yyl9KTtoLmV4dGVuZChhLm9QcmV2aW91c1NlYXJjaCx6YihlLnNlYXJjaCkpO2I9MDtmb3IoYz1lLmNvbHVtbnMubGVuZ3RoO2I8YztiKyspe3ZhciBmPWUuY29sdW1uc1tiXTtkW2JdLmJWaXNpYmxlPWYudmlzaWJsZTtoLmV4dGVuZChhLmFvUHJlU2VhcmNoQ29sc1tiXSx6YihmLnNlYXJjaCkpfXUoYSxcImFvU3RhdGVMb2FkZWRcIixcInN0YXRlTG9hZGVkXCIsW2EsZV0pfX19ZnVuY3Rpb24gdWEoYSl7dmFyIGI9cC5zZXR0aW5ncyxhPWguaW5BcnJheShhLEMoYixcIm5UYWJsZVwiKSk7cmV0dXJuLTEhPT1hP2JbYV06bnVsbH1mdW5jdGlvbiBQKGEsYixjLGQpe2M9XCJEYXRhVGFibGVzIHdhcm5pbmc6IFwiKyhudWxsIT09YT9cInRhYmxlIGlkPVwiK2Euc1RhYmxlSWQrXCIgLSBcIjpcIlwiKStjO2QmJihjKz1cIi4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhpcyBlcnJvciwgcGxlYXNlIHNlZSBodHRwOi8vZGF0YXRhYmxlcy5uZXQvdG4vXCIrZCk7aWYoYil6YS5jb25zb2xlJiZcbmNvbnNvbGUubG9nJiZjb25zb2xlLmxvZyhjKTtlbHNlIGlmKGE9cC5leHQsXCJhbGVydFwiPT0oYS5zRXJyTW9kZXx8YS5lcnJNb2RlKSlhbGVydChjKTtlbHNlIHRocm93IEVycm9yKGMpO31mdW5jdGlvbiBEKGEsYixjLGQpe2guaXNBcnJheShjKT9oLmVhY2goYyxmdW5jdGlvbihjLGQpe2guaXNBcnJheShkKT9EKGEsYixkWzBdLGRbMV0pOkQoYSxiLGQpfSk6KGQ9PT1sJiYoZD1jKSxiW2NdIT09bCYmKGFbZF09YltjXSkpfWZ1bmN0aW9uIEtiKGEsYixjKXt2YXIgZCxlO2ZvcihlIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShlKSYmKGQ9YltlXSxoLmlzUGxhaW5PYmplY3QoZCk/KGguaXNQbGFpbk9iamVjdChhW2VdKXx8KGFbZV09e30pLGguZXh0ZW5kKCEwLGFbZV0sZCkpOmFbZV09YyYmXCJkYXRhXCIhPT1lJiZcImFhRGF0YVwiIT09ZSYmaC5pc0FycmF5KGQpP2Quc2xpY2UoKTpkKTtyZXR1cm4gYX1mdW5jdGlvbiBUYShhLGIsYyl7aChhKS5iaW5kKFwiY2xpY2suRFRcIixiLGZ1bmN0aW9uKGIpe2EuYmx1cigpO1xuYyhiKX0pLmJpbmQoXCJrZXlwcmVzcy5EVFwiLGIsZnVuY3Rpb24oYSl7MTM9PT1hLndoaWNoJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGMoYSkpfSkuYmluZChcInNlbGVjdHN0YXJ0LkRUXCIsZnVuY3Rpb24oKXtyZXR1cm4hMX0pfWZ1bmN0aW9uIHgoYSxiLGMsZCl7YyYmYVtiXS5wdXNoKHtmbjpjLHNOYW1lOmR9KX1mdW5jdGlvbiB1KGEsYixjLGQpe3ZhciBlPVtdO2ImJihlPWgubWFwKGFbYl0uc2xpY2UoKS5yZXZlcnNlKCksZnVuY3Rpb24oYil7cmV0dXJuIGIuZm4uYXBwbHkoYS5vSW5zdGFuY2UsZCl9KSk7bnVsbCE9PWMmJmgoYS5uVGFibGUpLnRyaWdnZXIoYytcIi5kdFwiLGQpO3JldHVybiBlfWZ1bmN0aW9uIFFhKGEpe3ZhciBiPWEuX2lEaXNwbGF5U3RhcnQsYz1hLmZuRGlzcGxheUVuZCgpLGQ9YS5faURpc3BsYXlMZW5ndGg7Yz09PWEuZm5SZWNvcmRzRGlzcGxheSgpJiYoYj1jLWQpO2lmKC0xPT09ZHx8MD5iKWI9MDthLl9pRGlzcGxheVN0YXJ0PWJ9ZnVuY3Rpb24gTGEoYSxiKXt2YXIgYz1cbmEucmVuZGVyZXIsZD1wLmV4dC5yZW5kZXJlcltiXTtyZXR1cm4gaC5pc1BsYWluT2JqZWN0KGMpJiZjW2JdP2RbY1tiXV18fGQuXzpcInN0cmluZ1wiPT09dHlwZW9mIGM/ZFtjXXx8ZC5fOmQuX31mdW5jdGlvbiB6KGEpe3JldHVybiBhLm9GZWF0dXJlcy5iU2VydmVyU2lkZT9cInNzcFwiOmEuYWpheHx8YS5zQWpheFNvdXJjZT9cImFqYXhcIjpcImRvbVwifWZ1bmN0aW9uIFVhKGEsYil7dmFyIGM9W10sYz1MYi5udW1iZXJzX2xlbmd0aCxkPU1hdGguZmxvb3IoYy8yKTtiPD1jP2M9UygwLGIpOmE8PWQ/KGM9UygwLGMtMiksYy5wdXNoKFwiZWxsaXBzaXNcIiksYy5wdXNoKGItMSkpOihhPj1iLTEtZD9jPVMoYi0oYy0yKSxiKTooYz1TKGEtMSxhKzIpLGMucHVzaChcImVsbGlwc2lzXCIpLGMucHVzaChiLTEpKSxjLnNwbGljZSgwLDAsXCJlbGxpcHNpc1wiKSxjLnNwbGljZSgwLDAsMCkpO2MuRFRfZWw9XCJzcGFuXCI7cmV0dXJuIGN9ZnVuY3Rpb24gY2IoYSl7aC5lYWNoKHtudW06ZnVuY3Rpb24oYil7cmV0dXJuIHZhKGIsXG5hKX0sXCJudW0tZm10XCI6ZnVuY3Rpb24oYil7cmV0dXJuIHZhKGIsYSxWYSl9LFwiaHRtbC1udW1cIjpmdW5jdGlvbihiKXtyZXR1cm4gdmEoYixhLHdhKX0sXCJodG1sLW51bS1mbXRcIjpmdW5jdGlvbihiKXtyZXR1cm4gdmEoYixhLHdhLFZhKX19LGZ1bmN0aW9uKGIsYyl7dC50eXBlLm9yZGVyW2IrYStcIi1wcmVcIl09Y30pfWZ1bmN0aW9uIE1iKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPVt1YSh0aGlzW3AuZXh0LmlBcGlJbmRleF0pXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7cmV0dXJuIHAuZXh0LmludGVybmFsW2FdLmFwcGx5KHRoaXMsYil9fXZhciBwLHQscSxyLHYsV2E9e30sTmI9L1tcXHJcXG5dL2csd2E9LzwuKj8+L2csWWI9L15bXFx3XFwrXFwtXS8sWmI9L1tcXHdcXCtcXC1dJC8sVmI9UmVnRXhwKFwiKFxcXFwvfFxcXFwufFxcXFwqfFxcXFwrfFxcXFw/fFxcXFx8fFxcXFwofFxcXFwpfFxcXFxbfFxcXFxdfFxcXFx7fFxcXFx9fFxcXFxcXFxcfFxcXFwkfFxcXFxefFxcXFwtKVwiLFwiZ1wiKSxWYT0vWycsJFxcdTAwYTNcXHUyMGFjXFx1MDBhNSVcXHUyMDA5XFx1MjAyRl0vZyxcbkg9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fCEwPT09YXx8XCItXCI9PT1hPyEwOiExfSxPYj1mdW5jdGlvbihhKXt2YXIgYj1wYXJzZUludChhLDEwKTtyZXR1cm4haXNOYU4oYikmJmlzRmluaXRlKGEpP2I6bnVsbH0sUGI9ZnVuY3Rpb24oYSxiKXtXYVtiXXx8KFdhW2JdPVJlZ0V4cChPYShiKSxcImdcIikpO3JldHVyblwic3RyaW5nXCI9PT10eXBlb2YgYT9hLnJlcGxhY2UoL1xcLi9nLFwiXCIpLnJlcGxhY2UoV2FbYl0sXCIuXCIpOmF9LFhhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1cInN0cmluZ1wiPT09dHlwZW9mIGE7YiYmZCYmKGE9UGIoYSxiKSk7YyYmZCYmKGE9YS5yZXBsYWNlKFZhLFwiXCIpKTtyZXR1cm4gSChhKXx8IWlzTmFOKHBhcnNlRmxvYXQoYSkpJiZpc0Zpbml0ZShhKX0sUWI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBIKGEpPyEwOiEoSChhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKT9udWxsOlhhKGEucmVwbGFjZSh3YSxcIlwiKSxiLGMpPyEwOm51bGx9LEM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVxuW10sZT0wLGY9YS5sZW5ndGg7aWYoYyE9PWwpZm9yKDtlPGY7ZSsrKWFbZV0mJmFbZV1bYl0mJmQucHVzaChhW2VdW2JdW2NdKTtlbHNlIGZvcig7ZTxmO2UrKylhW2VdJiZkLnB1c2goYVtlXVtiXSk7cmV0dXJuIGR9LHhhPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPVtdLGY9MCxnPWIubGVuZ3RoO2lmKGQhPT1sKWZvcig7ZjxnO2YrKyllLnB1c2goYVtiW2ZdXVtjXVtkXSk7ZWxzZSBmb3IoO2Y8ZztmKyspZS5wdXNoKGFbYltmXV1bY10pO3JldHVybiBlfSxTPWZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZDtiPT09bD8oYj0wLGQ9YSk6KGQ9YixiPWEpO2Zvcih2YXIgZT1iO2U8ZDtlKyspYy5wdXNoKGUpO3JldHVybiBjfSxKYT1mdW5jdGlvbihhKXt2YXIgYj1bXSxjLGQsZT1hLmxlbmd0aCxmLGc9MDtkPTA7YTpmb3IoO2Q8ZTtkKyspe2M9YVtkXTtmb3IoZj0wO2Y8ZztmKyspaWYoYltmXT09PWMpY29udGludWUgYTtiLnB1c2goYyk7ZysrfXJldHVybiBifSx3PWZ1bmN0aW9uKGEsXG5iLGMpe2FbYl0hPT1sJiYoYVtjXT1hW2JdKX0sJD0vXFxbLio/XFxdJC8sUT0vXFwoXFwpJC8scWE9aChcIjxkaXY+XCIpWzBdLFdiPXFhLnRleHRDb250ZW50IT09bCxYYj0vPC4qPz4vZztwPWZ1bmN0aW9uKGEpe3RoaXMuJD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmFwaSghMCkuJChhLGIpfTt0aGlzLl89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hcGkoITApLnJvd3MoYSxiKS5kYXRhKCl9O3RoaXMuYXBpPWZ1bmN0aW9uKGEpe3JldHVybiBhP25ldyBxKHVhKHRoaXNbdC5pQXBpSW5kZXhdKSk6bmV3IHEodGhpcyl9O3RoaXMuZm5BZGREYXRhPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hcGkoITApLGQ9aC5pc0FycmF5KGEpJiYoaC5pc0FycmF5KGFbMF0pfHxoLmlzUGxhaW5PYmplY3QoYVswXSkpP2Mucm93cy5hZGQoYSk6Yy5yb3cuYWRkKGEpOyhiPT09bHx8YikmJmMuZHJhdygpO3JldHVybiBkLmZsYXR0ZW4oKS50b0FycmF5KCl9O3RoaXMuZm5BZGp1c3RDb2x1bW5TaXppbmc9XG5mdW5jdGlvbihhKXt2YXIgYj10aGlzLmFwaSghMCkuY29sdW1ucy5hZGp1c3QoKSxjPWIuc2V0dGluZ3MoKVswXSxkPWMub1Njcm9sbDthPT09bHx8YT9iLmRyYXcoITEpOihcIlwiIT09ZC5zWHx8XCJcIiE9PWQuc1kpJiZXKGMpfTt0aGlzLmZuQ2xlYXJUYWJsZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmFwaSghMCkuY2xlYXIoKTsoYT09PWx8fGEpJiZiLmRyYXcoKX07dGhpcy5mbkNsb3NlPWZ1bmN0aW9uKGEpe3RoaXMuYXBpKCEwKS5yb3coYSkuY2hpbGQuaGlkZSgpfTt0aGlzLmZuRGVsZXRlUm93PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmFwaSghMCksYT1kLnJvd3MoYSksZT1hLnNldHRpbmdzKClbMF0saD1lLmFvRGF0YVthWzBdWzBdXTthLnJlbW92ZSgpO2ImJmIuY2FsbCh0aGlzLGUsaCk7KGM9PT1sfHxjKSYmZC5kcmF3KCk7cmV0dXJuIGh9O3RoaXMuZm5EZXN0cm95PWZ1bmN0aW9uKGEpe3RoaXMuYXBpKCEwKS5kZXN0cm95KGEpfTt0aGlzLmZuRHJhdz1mdW5jdGlvbihhKXt0aGlzLmFwaSghMCkuZHJhdyghYSl9O1xudGhpcy5mbkZpbHRlcj1mdW5jdGlvbihhLGIsYyxkLGUsaCl7ZT10aGlzLmFwaSghMCk7bnVsbD09PWJ8fGI9PT1sP2Uuc2VhcmNoKGEsYyxkLGgpOmUuY29sdW1uKGIpLnNlYXJjaChhLGMsZCxoKTtlLmRyYXcoKX07dGhpcy5mbkdldERhdGE9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFwaSghMCk7aWYoYSE9PWwpe3ZhciBkPWEubm9kZU5hbWU/YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOlwiXCI7cmV0dXJuIGIhPT1sfHxcInRkXCI9PWR8fFwidGhcIj09ZD9jLmNlbGwoYSxiKS5kYXRhKCk6Yy5yb3coYSkuZGF0YSgpfHxudWxsfXJldHVybiBjLmRhdGEoKS50b0FycmF5KCl9O3RoaXMuZm5HZXROb2Rlcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmFwaSghMCk7cmV0dXJuIGEhPT1sP2Iucm93KGEpLm5vZGUoKTpiLnJvd3MoKS5ub2RlcygpLmZsYXR0ZW4oKS50b0FycmF5KCl9O3RoaXMuZm5HZXRQb3NpdGlvbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmFwaSghMCksYz1hLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG5yZXR1cm5cIlRSXCI9PWM/Yi5yb3coYSkuaW5kZXgoKTpcIlREXCI9PWN8fFwiVEhcIj09Yz8oYT1iLmNlbGwoYSkuaW5kZXgoKSxbYS5yb3csYS5jb2x1bW5WaXNpYmxlLGEuY29sdW1uXSk6bnVsbH07dGhpcy5mbklzT3Blbj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcGkoITApLnJvdyhhKS5jaGlsZC5pc1Nob3duKCl9O3RoaXMuZm5PcGVuPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5hcGkoITApLnJvdyhhKS5jaGlsZChiLGMpLnNob3coKS5jaGlsZCgpWzBdfTt0aGlzLmZuUGFnZUNoYW5nZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYXBpKCEwKS5wYWdlKGEpOyhiPT09bHx8YikmJmMuZHJhdyghMSl9O3RoaXMuZm5TZXRDb2x1bW5WaXM9ZnVuY3Rpb24oYSxiLGMpe2E9dGhpcy5hcGkoITApLmNvbHVtbihhKS52aXNpYmxlKGIpOyhjPT09bHx8YykmJmEuY29sdW1ucy5hZGp1c3QoKS5kcmF3KCl9O3RoaXMuZm5TZXR0aW5ncz1mdW5jdGlvbigpe3JldHVybiB1YSh0aGlzW3QuaUFwaUluZGV4XSl9O1xudGhpcy5mblNvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5hcGkoITApLm9yZGVyKGEpLmRyYXcoKX07dGhpcy5mblNvcnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyl7dGhpcy5hcGkoITApLm9yZGVyLmxpc3RlbmVyKGEsYixjKX07dGhpcy5mblVwZGF0ZT1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBoPXRoaXMuYXBpKCEwKTtjPT09bHx8bnVsbD09PWM/aC5yb3coYikuZGF0YShhKTpoLmNlbGwoYixjKS5kYXRhKGEpOyhlPT09bHx8ZSkmJmguY29sdW1ucy5hZGp1c3QoKTsoZD09PWx8fGQpJiZoLmRyYXcoKTtyZXR1cm4gMH07dGhpcy5mblZlcnNpb25DaGVjaz10LmZuVmVyc2lvbkNoZWNrO3ZhciBiPXRoaXMsYz1hPT09bCxkPXRoaXMubGVuZ3RoO2MmJihhPXt9KTt0aGlzLm9BcGk9dGhpcy5pbnRlcm5hbD10LmludGVybmFsO2Zvcih2YXIgZSBpbiBwLmV4dC5pbnRlcm5hbCllJiYodGhpc1tlXT1NYihlKSk7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9e30sZz0xPGQ/S2IoZSxhLCEwKTpcbmEsaj0wLGksbj10aGlzLmdldEF0dHJpYnV0ZShcImlkXCIpLGU9ITEsbT1wLmRlZmF1bHRzO2lmKFwidGFibGVcIiE9dGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKVAobnVsbCwwLFwiTm9uLXRhYmxlIG5vZGUgaW5pdGlhbGlzYXRpb24gKFwiK3RoaXMubm9kZU5hbWUrXCIpXCIsMik7ZWxzZXtkYihtKTtlYihtLmNvbHVtbik7RyhtLG0sITApO0cobS5jb2x1bW4sbS5jb2x1bW4sITApO0cobSxnKTt2YXIgbz1wLnNldHRpbmdzLGo9MDtmb3IoaT1vLmxlbmd0aDtqPGk7aisrKXtpZihvW2pdLm5UYWJsZT09dGhpcyl7aT1nLmJSZXRyaWV2ZSE9PWw/Zy5iUmV0cmlldmU6bS5iUmV0cmlldmU7aWYoY3x8aSlyZXR1cm4gb1tqXS5vSW5zdGFuY2U7aWYoZy5iRGVzdHJveSE9PWw/Zy5iRGVzdHJveTptLmJEZXN0cm95KXtvW2pdLm9JbnN0YW5jZS5mbkRlc3Ryb3koKTticmVha31lbHNle1Aob1tqXSwwLFwiQ2Fubm90IHJlaW5pdGlhbGlzZSBEYXRhVGFibGVcIiwzKTtyZXR1cm59fWlmKG9bal0uc1RhYmxlSWQ9PVxudGhpcy5pZCl7by5zcGxpY2UoaiwxKTticmVha319aWYobnVsbD09PW58fFwiXCI9PT1uKXRoaXMuaWQ9bj1cIkRhdGFUYWJsZXNfVGFibGVfXCIrcC5leHQuX3VuaXF1ZSsrO3ZhciBrPWguZXh0ZW5kKCEwLHt9LHAubW9kZWxzLm9TZXR0aW5ncyx7blRhYmxlOnRoaXMsb0FwaTpiLmludGVybmFsLG9Jbml0Omcsc0Rlc3Ryb3lXaWR0aDpoKHRoaXMpWzBdLnN0eWxlLndpZHRoLHNJbnN0YW5jZTpuLHNUYWJsZUlkOm59KTtvLnB1c2goayk7ay5vSW5zdGFuY2U9MT09PWIubGVuZ3RoP2I6aCh0aGlzKS5kYXRhVGFibGUoKTtkYihnKTtnLm9MYW5ndWFnZSYmTihnLm9MYW5ndWFnZSk7Zy5hTGVuZ3RoTWVudSYmIWcuaURpc3BsYXlMZW5ndGgmJihnLmlEaXNwbGF5TGVuZ3RoPWguaXNBcnJheShnLmFMZW5ndGhNZW51WzBdKT9nLmFMZW5ndGhNZW51WzBdWzBdOmcuYUxlbmd0aE1lbnVbMF0pO2c9S2IoaC5leHRlbmQoITAse30sbSksZyk7RChrLm9GZWF0dXJlcyxnLFwiYlBhZ2luYXRlIGJMZW5ndGhDaGFuZ2UgYkZpbHRlciBiU29ydCBiU29ydE11bHRpIGJJbmZvIGJQcm9jZXNzaW5nIGJBdXRvV2lkdGggYlNvcnRDbGFzc2VzIGJTZXJ2ZXJTaWRlIGJEZWZlclJlbmRlclwiLnNwbGl0KFwiIFwiKSk7XG5EKGssZyxbXCJhc1N0cmlwZUNsYXNzZXNcIixcImFqYXhcIixcImZuU2VydmVyRGF0YVwiLFwiZm5Gb3JtYXROdW1iZXJcIixcInNTZXJ2ZXJNZXRob2RcIixcImFhU29ydGluZ1wiLFwiYWFTb3J0aW5nRml4ZWRcIixcImFMZW5ndGhNZW51XCIsXCJzUGFnaW5hdGlvblR5cGVcIixcInNBamF4U291cmNlXCIsXCJzQWpheERhdGFQcm9wXCIsXCJpU3RhdGVEdXJhdGlvblwiLFwic0RvbVwiLFwiYlNvcnRDZWxsc1RvcFwiLFwiaVRhYkluZGV4XCIsXCJmblN0YXRlTG9hZENhbGxiYWNrXCIsXCJmblN0YXRlU2F2ZUNhbGxiYWNrXCIsXCJyZW5kZXJlclwiLFtcImlDb29raWVEdXJhdGlvblwiLFwiaVN0YXRlRHVyYXRpb25cIl0sW1wib1NlYXJjaFwiLFwib1ByZXZpb3VzU2VhcmNoXCJdLFtcImFvU2VhcmNoQ29sc1wiLFwiYW9QcmVTZWFyY2hDb2xzXCJdLFtcImlEaXNwbGF5TGVuZ3RoXCIsXCJfaURpc3BsYXlMZW5ndGhcIl0sW1wiYkpRdWVyeVVJXCIsXCJiSlVJXCJdXSk7RChrLm9TY3JvbGwsZyxbW1wic1Njcm9sbFhcIixcInNYXCJdLFtcInNTY3JvbGxYSW5uZXJcIixcInNYSW5uZXJcIl0sXG5bXCJzU2Nyb2xsWVwiLFwic1lcIl0sW1wiYlNjcm9sbENvbGxhcHNlXCIsXCJiQ29sbGFwc2VcIl1dKTtEKGsub0xhbmd1YWdlLGcsXCJmbkluZm9DYWxsYmFja1wiKTt4KGssXCJhb0RyYXdDYWxsYmFja1wiLGcuZm5EcmF3Q2FsbGJhY2ssXCJ1c2VyXCIpO3goayxcImFvU2VydmVyUGFyYW1zXCIsZy5mblNlcnZlclBhcmFtcyxcInVzZXJcIik7eChrLFwiYW9TdGF0ZVNhdmVQYXJhbXNcIixnLmZuU3RhdGVTYXZlUGFyYW1zLFwidXNlclwiKTt4KGssXCJhb1N0YXRlTG9hZFBhcmFtc1wiLGcuZm5TdGF0ZUxvYWRQYXJhbXMsXCJ1c2VyXCIpO3goayxcImFvU3RhdGVMb2FkZWRcIixnLmZuU3RhdGVMb2FkZWQsXCJ1c2VyXCIpO3goayxcImFvUm93Q2FsbGJhY2tcIixnLmZuUm93Q2FsbGJhY2ssXCJ1c2VyXCIpO3goayxcImFvUm93Q3JlYXRlZENhbGxiYWNrXCIsZy5mbkNyZWF0ZWRSb3csXCJ1c2VyXCIpO3goayxcImFvSGVhZGVyQ2FsbGJhY2tcIixnLmZuSGVhZGVyQ2FsbGJhY2ssXCJ1c2VyXCIpO3goayxcImFvRm9vdGVyQ2FsbGJhY2tcIixnLmZuRm9vdGVyQ2FsbGJhY2ssXG5cInVzZXJcIik7eChrLFwiYW9Jbml0Q29tcGxldGVcIixnLmZuSW5pdENvbXBsZXRlLFwidXNlclwiKTt4KGssXCJhb1ByZURyYXdDYWxsYmFja1wiLGcuZm5QcmVEcmF3Q2FsbGJhY2ssXCJ1c2VyXCIpO249ay5vQ2xhc3NlcztnLmJKUXVlcnlVST8oaC5leHRlbmQobixwLmV4dC5vSlVJQ2xhc3NlcyxnLm9DbGFzc2VzKSxnLnNEb209PT1tLnNEb20mJlwibGZydGlwXCI9PT1tLnNEb20mJihrLnNEb209JzxcIkhcImxmcj50PFwiRlwiaXA+Jyksay5yZW5kZXJlcik/aC5pc1BsYWluT2JqZWN0KGsucmVuZGVyZXIpJiYhay5yZW5kZXJlci5oZWFkZXImJihrLnJlbmRlcmVyLmhlYWRlcj1cImpxdWVyeXVpXCIpOmsucmVuZGVyZXI9XCJqcXVlcnl1aVwiOmguZXh0ZW5kKG4scC5leHQuY2xhc3NlcyxnLm9DbGFzc2VzKTtoKHRoaXMpLmFkZENsYXNzKG4uc1RhYmxlKTtpZihcIlwiIT09ay5vU2Nyb2xsLnNYfHxcIlwiIT09ay5vU2Nyb2xsLnNZKWsub1Njcm9sbC5pQmFyV2lkdGg9R2IoKTshMD09PWsub1Njcm9sbC5zWCYmKGsub1Njcm9sbC5zWD1cblwiMTAwJVwiKTtrLmlJbml0RGlzcGxheVN0YXJ0PT09bCYmKGsuaUluaXREaXNwbGF5U3RhcnQ9Zy5pRGlzcGxheVN0YXJ0LGsuX2lEaXNwbGF5U3RhcnQ9Zy5pRGlzcGxheVN0YXJ0KTtudWxsIT09Zy5pRGVmZXJMb2FkaW5nJiYoay5iRGVmZXJMb2FkaW5nPSEwLGo9aC5pc0FycmF5KGcuaURlZmVyTG9hZGluZyksay5faVJlY29yZHNEaXNwbGF5PWo/Zy5pRGVmZXJMb2FkaW5nWzBdOmcuaURlZmVyTG9hZGluZyxrLl9pUmVjb3Jkc1RvdGFsPWo/Zy5pRGVmZXJMb2FkaW5nWzFdOmcuaURlZmVyTG9hZGluZyk7XCJcIiE9PWcub0xhbmd1YWdlLnNVcmw/KGsub0xhbmd1YWdlLnNVcmw9Zy5vTGFuZ3VhZ2Uuc1VybCxoLmdldEpTT04oay5vTGFuZ3VhZ2Uuc1VybCxudWxsLGZ1bmN0aW9uKGEpe04oYSk7RyhtLm9MYW5ndWFnZSxhKTtoLmV4dGVuZCh0cnVlLGsub0xhbmd1YWdlLGcub0xhbmd1YWdlLGEpO3JhKGspfSksZT0hMCk6aC5leHRlbmQoITAsay5vTGFuZ3VhZ2UsZy5vTGFuZ3VhZ2UpO1xubnVsbD09PWcuYXNTdHJpcGVDbGFzc2VzJiYoay5hc1N0cmlwZUNsYXNzZXM9W24uc1N0cmlwZU9kZCxuLnNTdHJpcGVFdmVuXSk7dmFyIGo9ay5hc1N0cmlwZUNsYXNzZXMscj1oKFwidGJvZHkgdHI6ZXEoMClcIix0aGlzKTstMSE9PWguaW5BcnJheSghMCxoLm1hcChqLGZ1bmN0aW9uKGEpe3JldHVybiByLmhhc0NsYXNzKGEpfSkpJiYoaChcInRib2R5IHRyXCIsdGhpcykucmVtb3ZlQ2xhc3Moai5qb2luKFwiIFwiKSksay5hc0Rlc3Ryb3lTdHJpcGVzPWouc2xpY2UoKSk7dmFyIG89W10scSxqPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0aGVhZFwiKTswIT09ai5sZW5ndGgmJihhYShrLmFvSGVhZGVyLGpbMF0pLG89bWEoaykpO2lmKG51bGw9PT1nLmFvQ29sdW1ucyl7cT1bXTtqPTA7Zm9yKGk9by5sZW5ndGg7ajxpO2orKylxLnB1c2gobnVsbCl9ZWxzZSBxPWcuYW9Db2x1bW5zO2o9MDtmb3IoaT1xLmxlbmd0aDtqPGk7aisrKUFhKGssbz9vW2pdOm51bGwpO2hiKGssZy5hb0NvbHVtbkRlZnMsXG5xLGZ1bmN0aW9uKGEsYil7ZmEoayxhLGIpfSk7aWYoci5sZW5ndGgpe3ZhciBzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIitiKT9iOm51bGx9O2guZWFjaChpYShrLHJbMF0pLmNlbGxzLGZ1bmN0aW9uKGEsYil7dmFyIGM9ay5hb0NvbHVtbnNbYV07aWYoYy5tRGF0YT09PWEpe3ZhciBkPXMoYixcInNvcnRcIil8fHMoYixcIm9yZGVyXCIpLGU9cyhiLFwiZmlsdGVyXCIpfHxzKGIsXCJzZWFyY2hcIik7aWYoZCE9PW51bGx8fGUhPT1udWxsKXtjLm1EYXRhPXtfOmErXCIuZGlzcGxheVwiLHNvcnQ6ZCE9PW51bGw/YStcIi5AZGF0YS1cIitkOmwsdHlwZTpkIT09bnVsbD9hK1wiLkBkYXRhLVwiK2Q6bCxmaWx0ZXI6ZSE9PW51bGw/YStcIi5AZGF0YS1cIitlOmx9O2ZhKGssYSl9fX0pfXZhciB0PWsub0ZlYXR1cmVzO2cuYlN0YXRlU2F2ZSYmKHQuYlN0YXRlU2F2ZT0hMCxKYihrLGcpLHgoayxcImFvRHJhd0NhbGxiYWNrXCIsdGEsXCJzdGF0ZV9zYXZlXCIpKTtpZihnLmFhU29ydGluZz09PVxubCl7bz1rLmFhU29ydGluZztqPTA7Zm9yKGk9by5sZW5ndGg7ajxpO2orKylvW2pdWzFdPWsuYW9Db2x1bW5zW2pdLmFzU29ydGluZ1swXX1zYShrKTt0LmJTb3J0JiZ4KGssXCJhb0RyYXdDYWxsYmFja1wiLGZ1bmN0aW9uKCl7aWYoay5iU29ydGVkKXt2YXIgYT1SKGspLGI9e307aC5lYWNoKGEsZnVuY3Rpb24oYSxjKXtiW2Muc3JjXT1jLmRpcn0pO3UoayxudWxsLFwib3JkZXJcIixbayxhLGJdKTtJYihrKX19KTt4KGssXCJhb0RyYXdDYWxsYmFja1wiLGZ1bmN0aW9uKCl7KGsuYlNvcnRlZHx8eihrKT09PVwic3NwXCJ8fHQuYkRlZmVyUmVuZGVyKSYmc2Eoayl9LFwic2NcIik7ZmIoayk7aj1oKHRoaXMpLmNoaWxkcmVuKFwiY2FwdGlvblwiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5fY2FwdGlvblNpZGU9aCh0aGlzKS5jc3MoXCJjYXB0aW9uLXNpZGVcIil9KTtpPWgodGhpcykuY2hpbGRyZW4oXCJ0aGVhZFwiKTswPT09aS5sZW5ndGgmJihpPWgoXCI8dGhlYWQvPlwiKS5hcHBlbmRUbyh0aGlzKSk7ay5uVEhlYWQ9XG5pWzBdO2k9aCh0aGlzKS5jaGlsZHJlbihcInRib2R5XCIpOzA9PT1pLmxlbmd0aCYmKGk9aChcIjx0Ym9keS8+XCIpLmFwcGVuZFRvKHRoaXMpKTtrLm5UQm9keT1pWzBdO2k9aCh0aGlzKS5jaGlsZHJlbihcInRmb290XCIpO2lmKDA9PT1pLmxlbmd0aCYmMDxqLmxlbmd0aCYmKFwiXCIhPT1rLm9TY3JvbGwuc1h8fFwiXCIhPT1rLm9TY3JvbGwuc1kpKWk9aChcIjx0Zm9vdC8+XCIpLmFwcGVuZFRvKHRoaXMpOzA9PT1pLmxlbmd0aHx8MD09PWkuY2hpbGRyZW4oKS5sZW5ndGg/aCh0aGlzKS5hZGRDbGFzcyhuLnNOb0Zvb3Rlcik6MDxpLmxlbmd0aCYmKGsublRGb290PWlbMF0sYWEoay5hb0Zvb3RlcixrLm5URm9vdCkpO2lmKGcuYWFEYXRhKWZvcihqPTA7ajxnLmFhRGF0YS5sZW5ndGg7aisrKUkoayxnLmFhRGF0YVtqXSk7ZWxzZShrLmJEZWZlckxvYWRpbmd8fFwiZG9tXCI9PXooaykpJiZoYShrLGgoay5uVEJvZHkpLmNoaWxkcmVuKFwidHJcIikpO2suYWlEaXNwbGF5PWsuYWlEaXNwbGF5TWFzdGVyLnNsaWNlKCk7XG5rLmJJbml0aWFsaXNlZD0hMDshMT09PWUmJnJhKGspfX0pO2I9bnVsbDtyZXR1cm4gdGhpc307dmFyIFJiPVtdLHk9QXJyYXkucHJvdG90eXBlLCRiPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD1wLnNldHRpbmdzLGU9aC5tYXAoZCxmdW5jdGlvbihhKXtyZXR1cm4gYS5uVGFibGV9KTtpZihhKXtpZihhLm5UYWJsZSYmYS5vQXBpKXJldHVyblthXTtpZihhLm5vZGVOYW1lJiZcInRhYmxlXCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuIGI9aC5pbkFycmF5KGEsZSksLTEhPT1iP1tkW2JdXTpudWxsO2lmKGEmJlwiZnVuY3Rpb25cIj09PXR5cGVvZiBhLnNldHRpbmdzKXJldHVybiBhLnNldHRpbmdzKCkudG9BcnJheSgpO1wic3RyaW5nXCI9PT10eXBlb2YgYT9jPWgoYSk6YSBpbnN0YW5jZW9mIGgmJihjPWEpfWVsc2UgcmV0dXJuW107aWYoYylyZXR1cm4gYy5tYXAoZnVuY3Rpb24oKXtiPWguaW5BcnJheSh0aGlzLGUpO3JldHVybi0xIT09Yj9kW2JdOm51bGx9KS50b0FycmF5KCl9O1xucT1mdW5jdGlvbihhLGIpe2lmKCF0aGlzIGluc3RhbmNlb2YgcSl0aHJvd1wiRFQgQVBJIG11c3QgYmUgY29uc3RydWN0ZWQgYXMgYSBuZXcgb2JqZWN0XCI7dmFyIGM9W10sZD1mdW5jdGlvbihhKXsoYT0kYihhKSkmJmMucHVzaC5hcHBseShjLGEpfTtpZihoLmlzQXJyYXkoYSkpZm9yKHZhciBlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKWQoYVtlXSk7ZWxzZSBkKGEpO3RoaXMuY29udGV4dD1KYShjKTtiJiZ0aGlzLnB1c2guYXBwbHkodGhpcyxiLnRvQXJyYXk/Yi50b0FycmF5KCk6Yik7dGhpcy5zZWxlY3Rvcj17cm93czpudWxsLGNvbHM6bnVsbCxvcHRzOm51bGx9O3EuZXh0ZW5kKHRoaXMsdGhpcyxSYil9O3AuQXBpPXE7cS5wcm90b3R5cGU9e2NvbmNhdDp5LmNvbmNhdCxjb250ZXh0OltdLGVhY2g6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmxlbmd0aDtiPGM7YisrKWEuY2FsbCh0aGlzLHRoaXNbYl0sYix0aGlzKTtyZXR1cm4gdGhpc30sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9XG50aGlzLmNvbnRleHQ7cmV0dXJuIGIubGVuZ3RoPmE/bmV3IHEoYlthXSx0aGlzW2FdKTpudWxsfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9W107aWYoeS5maWx0ZXIpYj15LmZpbHRlci5jYWxsKHRoaXMsYSx0aGlzKTtlbHNlIGZvcih2YXIgYz0wLGQ9dGhpcy5sZW5ndGg7YzxkO2MrKylhLmNhbGwodGhpcyx0aGlzW2NdLGMsdGhpcykmJmIucHVzaCh0aGlzW2NdKTtyZXR1cm4gbmV3IHEodGhpcy5jb250ZXh0LGIpfSxmbGF0dGVuOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIG5ldyBxKHRoaXMuY29udGV4dCxhLmNvbmNhdC5hcHBseShhLHRoaXMudG9BcnJheSgpKSl9LGpvaW46eS5qb2luLGluZGV4T2Y6eS5pbmRleE9mfHxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1ifHwwLGQ9dGhpcy5sZW5ndGg7YzxkO2MrKylpZih0aGlzW2NdPT09YSlyZXR1cm4gYztyZXR1cm4tMX0saXRlcmF0b3I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGUsZixnLGgsaSxuPXRoaXMuY29udGV4dCxcbm0sbyxrPXRoaXMuc2VsZWN0b3I7XCJzdHJpbmdcIj09PXR5cGVvZiBhJiYoYz1iLGI9YSxhPSExKTtmPTA7Zm9yKGc9bi5sZW5ndGg7ZjxnO2YrKylpZihcInRhYmxlXCI9PT1iKWU9YyhuW2ZdLGYpLGUhPT1sJiZkLnB1c2goZSk7ZWxzZSBpZihcImNvbHVtbnNcIj09PWJ8fFwicm93c1wiPT09YillPWMobltmXSx0aGlzW2ZdLGYpLGUhPT1sJiZkLnB1c2goZSk7ZWxzZSBpZihcImNvbHVtblwiPT09Ynx8XCJjb2x1bW4tcm93c1wiPT09Ynx8XCJyb3dcIj09PWJ8fFwiY2VsbFwiPT09Yil7bz10aGlzW2ZdO1wiY29sdW1uLXJvd3NcIj09PWImJihtPVlhKG5bZl0say5vcHRzKSk7aD0wO2ZvcihpPW8ubGVuZ3RoO2g8aTtoKyspZT1vW2hdLGU9XCJjZWxsXCI9PT1iP2MobltmXSxlLnJvdyxlLmNvbHVtbixmLGgpOmMobltmXSxlLGYsaCxtKSxlIT09bCYmZC5wdXNoKGUpfXJldHVybiBkLmxlbmd0aD8oYT1uZXcgcShuLGE/ZC5jb25jYXQuYXBwbHkoW10sZCk6ZCksYj1hLnNlbGVjdG9yLGIucm93cz1rLnJvd3MsYi5jb2xzPVxuay5jb2xzLGIub3B0cz1rLm9wdHMsYSk6dGhpc30sbGFzdEluZGV4T2Y6eS5sYXN0SW5kZXhPZnx8ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbmRleE9mLmFwcGx5KHRoaXMudG9BcnJheS5yZXZlcnNlKCksYXJndW1lbnRzKX0sbGVuZ3RoOjAsbWFwOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKHkubWFwKWI9eS5tYXAuY2FsbCh0aGlzLGEsdGhpcyk7ZWxzZSBmb3IodmFyIGM9MCxkPXRoaXMubGVuZ3RoO2M8ZDtjKyspYi5wdXNoKGEuY2FsbCh0aGlzLHRoaXNbY10sYykpO3JldHVybiBuZXcgcSh0aGlzLmNvbnRleHQsYil9LHBsdWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbihiKXtyZXR1cm4gYlthXX0pfSxwb3A6eS5wb3AscHVzaDp5LnB1c2gscmVkdWNlOnkucmVkdWNlfHxmdW5jdGlvbihhLGIpe3JldHVybiBnYih0aGlzLGEsYiwwLHRoaXMubGVuZ3RoLDEpfSxyZWR1Y2VSaWdodDp5LnJlZHVjZVJpZ2h0fHxmdW5jdGlvbihhLGIpe3JldHVybiBnYih0aGlzLFxuYSxiLHRoaXMubGVuZ3RoLTEsLTEsLTEpfSxyZXZlcnNlOnkucmV2ZXJzZSxzZWxlY3RvcjpudWxsLHNoaWZ0Onkuc2hpZnQsc29ydDp5LnNvcnQsc3BsaWNlOnkuc3BsaWNlLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4geS5zbGljZS5jYWxsKHRoaXMpfSx0byQ6ZnVuY3Rpb24oKXtyZXR1cm4gaCh0aGlzKX0sdG9KUXVlcnk6ZnVuY3Rpb24oKXtyZXR1cm4gaCh0aGlzKX0sdW5pcXVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBxKHRoaXMuY29udGV4dCxKYSh0aGlzKSl9LHVuc2hpZnQ6eS51bnNoaWZ0fTtxLmV4dGVuZD1mdW5jdGlvbihhLGIsYyl7aWYoYiYmKGIgaW5zdGFuY2VvZiBxfHxiLl9fZHRfd3JhcHBlcikpe3ZhciBkLGUsZixnPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1iLmFwcGx5KGEsYXJndW1lbnRzKTtxLmV4dGVuZChkLGQsYy5tZXRob2RFeHQpO3JldHVybiBkfX07ZD0wO2ZvcihlPWMubGVuZ3RoO2Q8ZTtkKyspZj1jW2RdLGJbZi5uYW1lXT1cblwiZnVuY3Rpb25cIj09PXR5cGVvZiBmLnZhbD9nKGEsZi52YWwsZik6aC5pc1BsYWluT2JqZWN0KGYudmFsKT97fTpmLnZhbCxiW2YubmFtZV0uX19kdF93cmFwcGVyPSEwLHEuZXh0ZW5kKGEsYltmLm5hbWVdLGYucHJvcEV4dCl9fTtxLnJlZ2lzdGVyPXI9ZnVuY3Rpb24oYSxiKXtpZihoLmlzQXJyYXkoYSkpZm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXEucmVnaXN0ZXIoYVtjXSxiKTtlbHNlIGZvcih2YXIgZT1hLnNwbGl0KFwiLlwiKSxmPVJiLGcsaixjPTAsZD1lLmxlbmd0aDtjPGQ7YysrKXtnPShqPS0xIT09ZVtjXS5pbmRleE9mKFwiKClcIikpP2VbY10ucmVwbGFjZShcIigpXCIsXCJcIik6ZVtjXTt2YXIgaTthOntpPTA7Zm9yKHZhciBuPWYubGVuZ3RoO2k8bjtpKyspaWYoZltpXS5uYW1lPT09Zyl7aT1mW2ldO2JyZWFrIGF9aT1udWxsfWl8fChpPXtuYW1lOmcsdmFsOnt9LG1ldGhvZEV4dDpbXSxwcm9wRXh0OltdfSxmLnB1c2goaSkpO2M9PT1kLTE/aS52YWw9YjpmPWo/aS5tZXRob2RFeHQ6XG5pLnByb3BFeHR9fTtxLnJlZ2lzdGVyUGx1cmFsPXY9ZnVuY3Rpb24oYSxiLGMpe3EucmVnaXN0ZXIoYSxjKTtxLnJlZ2lzdGVyKGIsZnVuY3Rpb24oKXt2YXIgYT1jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gYT09PXRoaXM/dGhpczphIGluc3RhbmNlb2YgcT9hLmxlbmd0aD9oLmlzQXJyYXkoYVswXSk/bmV3IHEoYS5jb250ZXh0LGFbMF0pOmFbMF06bDphfSl9O3IoXCJ0YWJsZXMoKVwiLGZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpe2I9cTt2YXIgYz10aGlzLmNvbnRleHQ7aWYoXCJudW1iZXJcIj09PXR5cGVvZiBhKWE9W2NbYV1dO2Vsc2UgdmFyIGQ9aC5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm4gYS5uVGFibGV9KSxhPWgoZCkuZmlsdGVyKGEpLm1hcChmdW5jdGlvbigpe3ZhciBhPWguaW5BcnJheSh0aGlzLGQpO3JldHVybiBjW2FdfSkudG9BcnJheSgpO2I9bmV3IGIoYSl9ZWxzZSBiPXRoaXM7cmV0dXJuIGJ9KTtyKFwidGFibGUoKVwiLGZ1bmN0aW9uKGEpe3ZhciBhPXRoaXMudGFibGVzKGEpLFxuYj1hLmNvbnRleHQ7cmV0dXJuIGIubGVuZ3RoP25ldyBxKGJbMF0pOmF9KTt2KFwidGFibGVzKCkubm9kZXMoKVwiLFwidGFibGUoKS5ub2RlKClcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwidGFibGVcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5uVGFibGV9KX0pO3YoXCJ0YWJsZXMoKS5ib2R5KClcIixcInRhYmxlKCkuYm9keSgpXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcInRhYmxlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEublRCb2R5fSl9KTt2KFwidGFibGVzKCkuaGVhZGVyKClcIixcInRhYmxlKCkuaGVhZGVyKClcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwidGFibGVcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5uVEhlYWR9KX0pO3YoXCJ0YWJsZXMoKS5mb290ZXIoKVwiLFwidGFibGUoKS5mb290ZXIoKVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJ0YWJsZVwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLm5URm9vdH0pfSk7dihcInRhYmxlcygpLmNvbnRhaW5lcnMoKVwiLFxuXCJ0YWJsZSgpLmNvbnRhaW5lcigpXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcInRhYmxlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEublRhYmxlV3JhcHBlcn0pfSk7cihcImRyYXcoKVwiLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwidGFibGVcIixmdW5jdGlvbihiKXtMKGIsITE9PT1hKX0pfSk7cihcInBhZ2UoKVwiLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09bD90aGlzLnBhZ2UuaW5mbygpLnBhZ2U6dGhpcy5pdGVyYXRvcihcInRhYmxlXCIsZnVuY3Rpb24oYil7UmEoYixhKX0pfSk7cihcInBhZ2UuaW5mbygpXCIsZnVuY3Rpb24oKXtpZigwPT09dGhpcy5jb250ZXh0Lmxlbmd0aClyZXR1cm4gbDt2YXIgYT10aGlzLmNvbnRleHRbMF0sYj1hLl9pRGlzcGxheVN0YXJ0LGM9YS5faURpc3BsYXlMZW5ndGgsZD1hLmZuUmVjb3Jkc0Rpc3BsYXkoKSxlPS0xPT09YztyZXR1cm57cGFnZTplPzA6TWF0aC5mbG9vcihiL2MpLHBhZ2VzOmU/MTpNYXRoLmNlaWwoZC9jKSxzdGFydDpiLFxuZW5kOmEuZm5EaXNwbGF5RW5kKCksbGVuZ3RoOmMscmVjb3Jkc1RvdGFsOmEuZm5SZWNvcmRzVG90YWwoKSxyZWNvcmRzRGlzcGxheTpkfX0pO3IoXCJwYWdlLmxlbigpXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1sPzAhPT10aGlzLmNvbnRleHQubGVuZ3RoP3RoaXMuY29udGV4dFswXS5faURpc3BsYXlMZW5ndGg6bDp0aGlzLml0ZXJhdG9yKFwidGFibGVcIixmdW5jdGlvbihiKXtQYShiLGEpfSl9KTt2YXIgU2I9ZnVuY3Rpb24oYSxiLGMpe1wic3NwXCI9PXooYSk/TChhLGIpOihCKGEsITApLG5hKGEsW10sZnVuY3Rpb24oYyl7amEoYSk7Zm9yKHZhciBjPW9hKGEsYyksZD0wLGc9Yy5sZW5ndGg7ZDxnO2QrKylJKGEsY1tkXSk7TChhLGIpO0IoYSwhMSl9KSk7aWYoYyl7dmFyIGQ9bmV3IHEoYSk7ZC5vbmUoXCJkcmF3XCIsZnVuY3Rpb24oKXtjKGQuYWpheC5qc29uKCkpfSl9fTtyKFwiYWpheC5qc29uKClcIixmdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGV4dDtpZigwPGEubGVuZ3RoKXJldHVybiBhWzBdLmpzb259KTtcbnIoXCJhamF4LnBhcmFtcygpXCIsZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnRleHQ7aWYoMDxhLmxlbmd0aClyZXR1cm4gYVswXS5vQWpheERhdGF9KTtyKFwiYWpheC5yZWxvYWQoKVwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJ0YWJsZVwiLGZ1bmN0aW9uKGMpe1NiKGMsITE9PT1iLGEpfSl9KTtyKFwiYWpheC51cmwoKVwiLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29udGV4dDtpZihhPT09bCl7aWYoMD09PWIubGVuZ3RoKXJldHVybiBsO2I9YlswXTtyZXR1cm4gYi5hamF4P2guaXNQbGFpbk9iamVjdChiLmFqYXgpP2IuYWpheC51cmw6Yi5hamF4OmIuc0FqYXhTb3VyY2V9cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJ0YWJsZVwiLGZ1bmN0aW9uKGIpe2guaXNQbGFpbk9iamVjdChiLmFqYXgpP2IuYWpheC51cmw9YTpiLmFqYXg9YX0pfSk7cihcImFqYXgudXJsKCkubG9hZCgpXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcInRhYmxlXCIsZnVuY3Rpb24oYyl7U2IoYyxcbiExPT09YixhKX0pfSk7dmFyIFphPWZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZCxlLGYsZyxqLGk7aWYoIWF8fFwic3RyaW5nXCI9PT10eXBlb2YgYXx8YS5sZW5ndGg9PT1sKWE9W2FdO2Y9MDtmb3IoZz1hLmxlbmd0aDtmPGc7ZisrKXtlPWFbZl0mJmFbZl0uc3BsaXQ/YVtmXS5zcGxpdChcIixcIik6W2FbZl1dO2o9MDtmb3IoaT1lLmxlbmd0aDtqPGk7aisrKShkPWIoXCJzdHJpbmdcIj09PXR5cGVvZiBlW2pdP2gudHJpbShlW2pdKTplW2pdKSkmJmQubGVuZ3RoJiZjLnB1c2guYXBwbHkoYyxkKX1yZXR1cm4gY30sJGE9ZnVuY3Rpb24oYSl7YXx8KGE9e30pO2EuZmlsdGVyJiYhYS5zZWFyY2gmJihhLnNlYXJjaD1hLmZpbHRlcik7cmV0dXJue3NlYXJjaDphLnNlYXJjaHx8XCJub25lXCIsb3JkZXI6YS5vcmRlcnx8XCJjdXJyZW50XCIscGFnZTphLnBhZ2V8fFwiYWxsXCJ9fSxhYj1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspaWYoMDxhW2JdLmxlbmd0aClyZXR1cm4gYVswXT1cbmFbYl0sYS5sZW5ndGg9MSxhLmNvbnRleHQ9W2EuY29udGV4dFtiXV0sYTthLmxlbmd0aD0wO3JldHVybiBhfSxZYT1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPVtdLGc9YS5haURpc3BsYXk7Yz1hLmFpRGlzcGxheU1hc3Rlcjt2YXIgaj1iLnNlYXJjaDtkPWIub3JkZXI7ZT1iLnBhZ2U7aWYoXCJzc3BcIj09eihhKSlyZXR1cm5cInJlbW92ZWRcIj09PWo/W106UygwLGMubGVuZ3RoKTtpZihcImN1cnJlbnRcIj09ZSl7Yz1hLl9pRGlzcGxheVN0YXJ0O2ZvcihkPWEuZm5EaXNwbGF5RW5kKCk7YzxkO2MrKylmLnB1c2goZ1tjXSl9ZWxzZSBpZihcImN1cnJlbnRcIj09ZHx8XCJhcHBsaWVkXCI9PWQpZj1cIm5vbmVcIj09aj9jLnNsaWNlKCk6XCJhcHBsaWVkXCI9PWo/Zy5zbGljZSgpOmgubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJuLTE9PT1oLmluQXJyYXkoYSxnKT9hOm51bGx9KTtlbHNlIGlmKFwiaW5kZXhcIj09ZHx8XCJvcmlnaW5hbFwiPT1kKXtjPTA7Zm9yKGQ9YS5hb0RhdGEubGVuZ3RoO2M8ZDtjKyspXCJub25lXCI9PVxuaj9mLnB1c2goYyk6KGU9aC5pbkFycmF5KGMsZyksKC0xPT09ZSYmXCJyZW1vdmVkXCI9PWp8fDA8PWUmJlwiYXBwbGllZFwiPT1qKSYmZi5wdXNoKGMpKX1yZXR1cm4gZn07cihcInJvd3MoKVwiLGZ1bmN0aW9uKGEsYil7YT09PWw/YT1cIlwiOmguaXNQbGFpbk9iamVjdChhKSYmKGI9YSxhPVwiXCIpO3ZhciBiPSRhKGIpLGM9dGhpcy5pdGVyYXRvcihcInRhYmxlXCIsZnVuY3Rpb24oYyl7dmFyIGU9YjtyZXR1cm4gWmEoYSxmdW5jdGlvbihhKXt2YXIgYj1PYihhKTtpZihiIT09bnVsbCYmIWUpcmV0dXJuW2JdO3ZhciBqPVlhKGMsZSk7aWYoYiE9PW51bGwmJmguaW5BcnJheShiLGopIT09LTEpcmV0dXJuW2JdO2lmKCFhKXJldHVybiBqO2Zvcih2YXIgYj1bXSxpPTAsbj1qLmxlbmd0aDtpPG47aSsrKWIucHVzaChjLmFvRGF0YVtqW2ldXS5uVHIpO3JldHVybiBhLm5vZGVOYW1lJiZoLmluQXJyYXkoYSxiKSE9PS0xP1thLl9EVF9Sb3dJbmRleF06aChiKS5maWx0ZXIoYSkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX0RUX1Jvd0luZGV4fSkudG9BcnJheSgpfSl9KTtcbmMuc2VsZWN0b3Iucm93cz1hO2Muc2VsZWN0b3Iub3B0cz1iO3JldHVybiBjfSk7cihcInJvd3MoKS5ub2RlcygpXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcInJvd1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuYW9EYXRhW2JdLm5Ucnx8bH0pfSk7cihcInJvd3MoKS5kYXRhKClcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKCEwLFwicm93c1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIHhhKGEuYW9EYXRhLGIsXCJfYURhdGFcIil9KX0pO3YoXCJyb3dzKCkuY2FjaGUoKVwiLFwicm93KCkuY2FjaGUoKVwiLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwicm93XCIsZnVuY3Rpb24oYixjKXt2YXIgZD1iLmFvRGF0YVtjXTtyZXR1cm5cInNlYXJjaFwiPT09YT9kLl9hRmlsdGVyRGF0YTpkLl9hU29ydERhdGF9KX0pO3YoXCJyb3dzKCkuaW52YWxpZGF0ZSgpXCIsXCJyb3coKS5pbnZhbGlkYXRlKClcIixmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcInJvd1wiLGZ1bmN0aW9uKGIsXG5jKXtsYShiLGMsYSl9KX0pO3YoXCJyb3dzKCkuaW5kZXhlcygpXCIsXCJyb3coKS5pbmRleCgpXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcInJvd1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9KX0pO3YoXCJyb3dzKCkucmVtb3ZlKClcIixcInJvdygpLnJlbW92ZSgpXCIsZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiB0aGlzLml0ZXJhdG9yKFwicm93XCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlPWIuYW9EYXRhO2Uuc3BsaWNlKGMsMSk7Zm9yKHZhciBmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKW51bGwhPT1lW2ZdLm5UciYmKGVbZl0ublRyLl9EVF9Sb3dJbmRleD1mKTtoLmluQXJyYXkoYyxiLmFpRGlzcGxheSk7a2EoYi5haURpc3BsYXlNYXN0ZXIsYyk7a2EoYi5haURpc3BsYXksYyk7a2EoYVtkXSxjLCExKTtRYShiKX0pfSk7cihcInJvd3MuYWRkKClcIixmdW5jdGlvbihhKXt2YXIgYj10aGlzLml0ZXJhdG9yKFwidGFibGVcIixmdW5jdGlvbihiKXt2YXIgYyxmLGcsaD1bXTtmPTA7XG5mb3IoZz1hLmxlbmd0aDtmPGc7ZisrKWM9YVtmXSxjLm5vZGVOYW1lJiZcIlRSXCI9PT1jLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk/aC5wdXNoKGhhKGIsYylbMF0pOmgucHVzaChJKGIsYykpO3JldHVybiBofSksYz10aGlzLnJvd3MoLTEpO2MucG9wKCk7Yy5wdXNoLmFwcGx5KGMsYi50b0FycmF5KCkpO3JldHVybiBjfSk7cihcInJvdygpXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYWIodGhpcy5yb3dzKGEsYikpfSk7cihcInJvdygpLmRhdGEoKVwiLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29udGV4dDtpZihhPT09bClyZXR1cm4gYi5sZW5ndGgmJnRoaXMubGVuZ3RoP2JbMF0uYW9EYXRhW3RoaXNbMF1dLl9hRGF0YTpsO2JbMF0uYW9EYXRhW3RoaXNbMF1dLl9hRGF0YT1hO2xhKGJbMF0sdGhpc1swXSxcImRhdGFcIik7cmV0dXJuIHRoaXN9KTtyKFwicm93KCkubm9kZSgpXCIsZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnRleHQ7cmV0dXJuIGEubGVuZ3RoJiZ0aGlzLmxlbmd0aD9hWzBdLmFvRGF0YVt0aGlzWzBdXS5uVHJ8fFxubnVsbDpudWxsfSk7cihcInJvdy5hZGQoKVwiLGZ1bmN0aW9uKGEpe2EgaW5zdGFuY2VvZiBoJiZhLmxlbmd0aCYmKGE9YVswXSk7dmFyIGI9dGhpcy5pdGVyYXRvcihcInRhYmxlXCIsZnVuY3Rpb24oYil7cmV0dXJuIGEubm9kZU5hbWUmJlwiVFJcIj09PWEubm9kZU5hbWUudG9VcHBlckNhc2UoKT9oYShiLGEpWzBdOkkoYixhKX0pO3JldHVybiB0aGlzLnJvdyhiWzBdKX0pO3ZhciBiYj1mdW5jdGlvbihhKXt2YXIgYj1hLmNvbnRleHQ7Yi5sZW5ndGgmJmEubGVuZ3RoJiYoYT1iWzBdLmFvRGF0YVthWzBdXSxhLl9kZXRhaWxzJiYoYS5fZGV0YWlscy5yZW1vdmUoKSxhLl9kZXRhaWxzU2hvdz1sLGEuX2RldGFpbHM9bCkpfSxUYj1mdW5jdGlvbihhLGIpe3ZhciBjPWEuY29udGV4dDtpZihjLmxlbmd0aCYmYS5sZW5ndGgpe3ZhciBkPWNbMF0uYW9EYXRhW2FbMF1dO2lmKGQuX2RldGFpbHMpeyhkLl9kZXRhaWxzU2hvdz1iKT9kLl9kZXRhaWxzLmluc2VydEFmdGVyKGQublRyKTpkLl9kZXRhaWxzLmRldGFjaCgpO1xudmFyIGU9Y1swXSxmPW5ldyBxKGUpLGc9ZS5hb0RhdGE7Zi5vZmYoXCJkcmF3LmR0LkRUX2RldGFpbHMgY29sdW1uLXZpc2liaWxpdHkuZHQuRFRfZGV0YWlscyBkZXN0cm95LmR0LkRUX2RldGFpbHNcIik7MDxDKGcsXCJfZGV0YWlsc1wiKS5sZW5ndGgmJihmLm9uKFwiZHJhdy5kdC5EVF9kZXRhaWxzXCIsZnVuY3Rpb24oYSxiKXtlPT09YiYmZi5yb3dzKHtwYWdlOlwiY3VycmVudFwifSkuZXEoMCkuZWFjaChmdW5jdGlvbihhKXthPWdbYV07YS5fZGV0YWlsc1Nob3cmJmEuX2RldGFpbHMuaW5zZXJ0QWZ0ZXIoYS5uVHIpfSl9KSxmLm9uKFwiY29sdW1uLXZpc2liaWxpdHkuZHQuRFRfZGV0YWlsc1wiLGZ1bmN0aW9uKGEsYil7aWYoZT09PWIpZm9yKHZhciBjLGQ9WihiKSxmPTAsaD1nLmxlbmd0aDtmPGg7ZisrKWM9Z1tmXSxjLl9kZXRhaWxzJiZjLl9kZXRhaWxzLmNoaWxkcmVuKFwidGRbY29sc3Bhbl1cIikuYXR0cihcImNvbHNwYW5cIixkKX0pLGYub24oXCJkZXN0cm95LmR0LkRUX2RldGFpbHNcIixmdW5jdGlvbihhLFxuYil7aWYoZT09PWIpZm9yKHZhciBjPTAsZD1nLmxlbmd0aDtjPGQ7YysrKWdbY10uX2RldGFpbHMmJmJiKGdbY10pfSkpfX19O3IoXCJyb3coKS5jaGlsZCgpXCIsZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNvbnRleHQ7aWYoYT09PWwpcmV0dXJuIGMubGVuZ3RoJiZ0aGlzLmxlbmd0aD9jWzBdLmFvRGF0YVt0aGlzWzBdXS5fZGV0YWlsczpsO2lmKCEwPT09YSl0aGlzLmNoaWxkLnNob3coKTtlbHNlIGlmKCExPT09YSliYih0aGlzKTtlbHNlIGlmKGMubGVuZ3RoJiZ0aGlzLmxlbmd0aCl7dmFyIGQ9Y1swXSxjPWNbMF0uYW9EYXRhW3RoaXNbMF1dLGU9W10sZj1mdW5jdGlvbihhLGIpe2lmKGEubm9kZU5hbWUmJlwidHJcIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSllLnB1c2goYSk7ZWxzZXt2YXIgYz1oKFwiPHRyPjx0ZC8+PC90cj5cIikuYWRkQ2xhc3MoYik7aChcInRkXCIsYykuYWRkQ2xhc3MoYikuaHRtbChhKVswXS5jb2xTcGFuPVooZCk7ZS5wdXNoKGNbMF0pfX07aWYoaC5pc0FycmF5KGEpfHxcbmEgaW5zdGFuY2VvZiBoKWZvcih2YXIgZz0wLGo9YS5sZW5ndGg7ZzxqO2crKylmKGFbZ10sYik7ZWxzZSBmKGEsYik7Yy5fZGV0YWlscyYmYy5fZGV0YWlscy5yZW1vdmUoKTtjLl9kZXRhaWxzPWgoZSk7Yy5fZGV0YWlsc1Nob3cmJmMuX2RldGFpbHMuaW5zZXJ0QWZ0ZXIoYy5uVHIpfXJldHVybiB0aGlzfSk7cihbXCJyb3coKS5jaGlsZC5zaG93KClcIixcInJvdygpLmNoaWxkKCkuc2hvdygpXCJdLGZ1bmN0aW9uKCl7VGIodGhpcywhMCk7cmV0dXJuIHRoaXN9KTtyKFtcInJvdygpLmNoaWxkLmhpZGUoKVwiLFwicm93KCkuY2hpbGQoKS5oaWRlKClcIl0sZnVuY3Rpb24oKXtUYih0aGlzLCExKTtyZXR1cm4gdGhpc30pO3IoW1wicm93KCkuY2hpbGQucmVtb3ZlKClcIixcInJvdygpLmNoaWxkKCkucmVtb3ZlKClcIl0sZnVuY3Rpb24oKXtiYih0aGlzKTtyZXR1cm4gdGhpc30pO3IoXCJyb3coKS5jaGlsZC5pc1Nob3duKClcIixmdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGV4dDtyZXR1cm4gYS5sZW5ndGgmJlxudGhpcy5sZW5ndGg/YVswXS5hb0RhdGFbdGhpc1swXV0uX2RldGFpbHNTaG93fHwhMTohMX0pO3ZhciBhYz0vXiguKyk6KG5hbWV8dmlzSWR4fHZpc2libGUpJC87cihcImNvbHVtbnMoKVwiLGZ1bmN0aW9uKGEsYil7YT09PWw/YT1cIlwiOmguaXNQbGFpbk9iamVjdChhKSYmKGI9YSxhPVwiXCIpO3ZhciBiPSRhKGIpLGM9dGhpcy5pdGVyYXRvcihcInRhYmxlXCIsZnVuY3Rpb24oYil7dmFyIGM9YSxmPWIuYW9Db2x1bW5zLGc9QyhmLFwic05hbWVcIiksaj1DKGYsXCJuVGhcIik7cmV0dXJuIFphKGMsZnVuY3Rpb24oYSl7dmFyIGM9T2IoYSk7aWYoYT09PVwiXCIpcmV0dXJuIFMoZi5sZW5ndGgpO2lmKGMhPT1udWxsKXJldHVybltjPj0wP2M6Zi5sZW5ndGgrY107dmFyIGU9dHlwZW9mIGE9PT1cInN0cmluZ1wiP2EubWF0Y2goYWMpOlwiXCI7aWYoZSlzd2l0Y2goZVsyXSl7Y2FzZSBcInZpc0lkeFwiOmNhc2UgXCJ2aXNpYmxlXCI6YT1wYXJzZUludChlWzFdLDEwKTtpZihhPDApe2M9aC5tYXAoZixmdW5jdGlvbihhLFxuYil7cmV0dXJuIGEuYlZpc2libGU/YjpudWxsfSk7cmV0dXJuW2NbYy5sZW5ndGgrYV1dfXJldHVybltnYShiLGEpXTtjYXNlIFwibmFtZVwiOnJldHVybiBoLm1hcChnLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1lWzFdP2I6bnVsbH0pfWVsc2UgcmV0dXJuIGgoaikuZmlsdGVyKGEpLm1hcChmdW5jdGlvbigpe3JldHVybiBoLmluQXJyYXkodGhpcyxqKX0pLnRvQXJyYXkoKX0pfSk7Yy5zZWxlY3Rvci5jb2xzPWE7Yy5zZWxlY3Rvci5vcHRzPWI7cmV0dXJuIGN9KTt2KFwiY29sdW1ucygpLmhlYWRlcigpXCIsXCJjb2x1bW4oKS5oZWFkZXIoKVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJjb2x1bW5cIixmdW5jdGlvbihhLGIpe3JldHVybiBhLmFvQ29sdW1uc1tiXS5uVGh9KX0pO3YoXCJjb2x1bW5zKCkuZm9vdGVyKClcIixcImNvbHVtbigpLmZvb3RlcigpXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcImNvbHVtblwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuYW9Db2x1bW5zW2JdLm5UZn0pfSk7XG52KFwiY29sdW1ucygpLmRhdGEoKVwiLFwiY29sdW1uKCkuZGF0YSgpXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcImNvbHVtbi1yb3dzXCIsZnVuY3Rpb24oYSxiLGMsZCxlKXtmb3IodmFyIGM9W10sZD0wLGY9ZS5sZW5ndGg7ZDxmO2QrKyljLnB1c2goQShhLGVbZF0sYixcIlwiKSk7cmV0dXJuIGN9KX0pO3YoXCJjb2x1bW5zKCkuY2FjaGUoKVwiLFwiY29sdW1uKCkuY2FjaGUoKVwiLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwiY29sdW1uLXJvd3NcIixmdW5jdGlvbihiLGMsZCxlLGYpe3JldHVybiB4YShiLmFvRGF0YSxmLFwic2VhcmNoXCI9PT1hP1wiX2FGaWx0ZXJEYXRhXCI6XCJfYVNvcnREYXRhXCIsYyl9KX0pO3YoXCJjb2x1bW5zKCkubm9kZXMoKVwiLFwiY29sdW1uKCkubm9kZXMoKVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJjb2x1bW4tcm93c1wiLGZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIHhhKGEuYW9EYXRhLGUsXCJhbkNlbGxzXCIsYil9KX0pO3YoXCJjb2x1bW5zKCkudmlzaWJsZSgpXCIsXG5cImNvbHVtbigpLnZpc2libGUoKVwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJjb2x1bW5cIixmdW5jdGlvbihjLGQpe3ZhciBlO2lmKGE9PT1sKWU9Yy5hb0NvbHVtbnNbZF0uYlZpc2libGU7ZWxzZXt2YXIgZj1jLmFvQ29sdW1ucztlPWZbZF07dmFyIGc9Yy5hb0RhdGEsaixpLG47aWYoYT09PWwpZT1lLmJWaXNpYmxlO2Vsc2V7aWYoZS5iVmlzaWJsZSE9PWEpe2lmKGEpe3ZhciBtPWguaW5BcnJheSghMCxDKGYsXCJiVmlzaWJsZVwiKSxkKzEpO2o9MDtmb3IoaT1nLmxlbmd0aDtqPGk7aisrKW49Z1tqXS5uVHIsZj1nW2pdLmFuQ2VsbHMsbiYmbi5pbnNlcnRCZWZvcmUoZltkXSxmW21dfHxudWxsKX1lbHNlIGgoQyhjLmFvRGF0YSxcImFuQ2VsbHNcIixkKSkuZGV0YWNoKCk7ZS5iVmlzaWJsZT1hO2JhKGMsYy5hb0hlYWRlcik7YmEoYyxjLmFvRm9vdGVyKTtpZihiPT09bHx8YilWKGMpLChjLm9TY3JvbGwuc1h8fGMub1Njcm9sbC5zWSkmJlcoYyk7dShjLG51bGwsXCJjb2x1bW4tdmlzaWJpbGl0eVwiLFxuW2MsZCxhXSk7dGEoYyl9ZT12b2lkIDB9fXJldHVybiBlfSl9KTt2KFwiY29sdW1ucygpLmluZGV4ZXMoKVwiLFwiY29sdW1uKCkuaW5kZXgoKVwiLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwiY29sdW1uXCIsZnVuY3Rpb24oYixjKXtyZXR1cm5cInZpc2libGVcIj09PWE/WShiLGMpOmN9KX0pO3IoXCJjb2x1bW5zLmFkanVzdCgpXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcInRhYmxlXCIsZnVuY3Rpb24oYSl7VihhKX0pfSk7cihcImNvbHVtbi5pbmRleCgpXCIsZnVuY3Rpb24oYSxiKXtpZigwIT09dGhpcy5jb250ZXh0Lmxlbmd0aCl7dmFyIGM9dGhpcy5jb250ZXh0WzBdO2lmKFwiZnJvbVZpc2libGVcIj09PWF8fFwidG9EYXRhXCI9PT1hKXJldHVybiBnYShjLGIpO2lmKFwiZnJvbURhdGFcIj09PWF8fFwidG9WaXNpYmxlXCI9PT1hKXJldHVybiBZKGMsYil9fSk7cihcImNvbHVtbigpXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYWIodGhpcy5jb2x1bW5zKGEsYikpfSk7cihcImNlbGxzKClcIixcbmZ1bmN0aW9uKGEsYixjKXtoLmlzUGxhaW5PYmplY3QoYSkmJih0eXBlb2YgYS5yb3chPT1sPyhjPWIsYj1udWxsKTooYz1hLGE9bnVsbCkpO2guaXNQbGFpbk9iamVjdChiKSYmKGM9YixiPW51bGwpO2lmKG51bGw9PT1ifHxiPT09bClyZXR1cm4gdGhpcy5pdGVyYXRvcihcInRhYmxlXCIsZnVuY3Rpb24oYil7dmFyIGQ9YSxlPSRhKGMpLGY9Yi5hb0RhdGEsZz1ZYShiLGUpLGU9eGEoZixnLFwiYW5DZWxsc1wiKSxqPWgoW10uY29uY2F0LmFwcGx5KFtdLGUpKSxpLG09Yi5hb0NvbHVtbnMubGVuZ3RoLG4scCxyLHE7cmV0dXJuIFphKGQsZnVuY3Rpb24oYSl7aWYoYT09PW51bGx8fGE9PT1sKXtuPVtdO3A9MDtmb3Iocj1nLmxlbmd0aDtwPHI7cCsrKXtpPWdbcF07Zm9yKHE9MDtxPG07cSsrKW4ucHVzaCh7cm93OmksY29sdW1uOnF9KX1yZXR1cm4gbn1yZXR1cm4gaC5pc1BsYWluT2JqZWN0KGEpP1thXTpqLmZpbHRlcihhKS5tYXAoZnVuY3Rpb24oYSxiKXtpPWIucGFyZW50Tm9kZS5fRFRfUm93SW5kZXg7XG5yZXR1cm57cm93OmksY29sdW1uOmguaW5BcnJheShiLGZbaV0uYW5DZWxscyl9fSkudG9BcnJheSgpfSl9KTt2YXIgZD10aGlzLmNvbHVtbnMoYixjKSxlPXRoaXMucm93cyhhLGMpLGYsZyxqLGksbixtPXRoaXMuaXRlcmF0b3IoXCJ0YWJsZVwiLGZ1bmN0aW9uKGEsYil7Zj1bXTtnPTA7Zm9yKGo9ZVtiXS5sZW5ndGg7ZzxqO2crKyl7aT0wO2ZvcihuPWRbYl0ubGVuZ3RoO2k8bjtpKyspZi5wdXNoKHtyb3c6ZVtiXVtnXSxjb2x1bW46ZFtiXVtpXX0pfXJldHVybiBmfSk7aC5leHRlbmQobS5zZWxlY3Rvcix7Y29sczpiLHJvd3M6YSxvcHRzOmN9KTtyZXR1cm4gbX0pO3YoXCJjZWxscygpLm5vZGVzKClcIixcImNlbGwoKS5ub2RlKClcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwiY2VsbFwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5hb0RhdGFbYl0uYW5DZWxsc1tjXX0pfSk7cihcImNlbGxzKCkuZGF0YSgpXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcihcImNlbGxcIixcbmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gQShhLGIsYyl9KX0pO3YoXCJjZWxscygpLmNhY2hlKClcIixcImNlbGwoKS5jYWNoZSgpXCIsZnVuY3Rpb24oYSl7YT1cInNlYXJjaFwiPT09YT9cIl9hRmlsdGVyRGF0YVwiOlwiX2FTb3J0RGF0YVwiO3JldHVybiB0aGlzLml0ZXJhdG9yKFwiY2VsbFwiLGZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gYi5hb0RhdGFbY11bYV1bZF19KX0pO3YoXCJjZWxscygpLmluZGV4ZXMoKVwiLFwiY2VsbCgpLmluZGV4KClcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwiY2VsbFwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm57cm93OmIsY29sdW1uOmMsY29sdW1uVmlzaWJsZTpZKGEsYyl9fSl9KTtyKFtcImNlbGxzKCkuaW52YWxpZGF0ZSgpXCIsXCJjZWxsKCkuaW52YWxpZGF0ZSgpXCJdLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VsZWN0b3I7dGhpcy5yb3dzKGIucm93cyxiLm9wdHMpLmludmFsaWRhdGUoYSk7cmV0dXJuIHRoaXN9KTtyKFwiY2VsbCgpXCIsZnVuY3Rpb24oYSxiLFxuYyl7cmV0dXJuIGFiKHRoaXMuY2VsbHMoYSxiLGMpKX0pO3IoXCJjZWxsKCkuZGF0YSgpXCIsZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb250ZXh0LGM9dGhpc1swXTtpZihhPT09bClyZXR1cm4gYi5sZW5ndGgmJmMubGVuZ3RoP0EoYlswXSxjWzBdLnJvdyxjWzBdLmNvbHVtbik6bDtFYShiWzBdLGNbMF0ucm93LGNbMF0uY29sdW1uLGEpO2xhKGJbMF0sY1swXS5yb3csXCJkYXRhXCIsY1swXS5jb2x1bW4pO3JldHVybiB0aGlzfSk7cihcIm9yZGVyKClcIixmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY29udGV4dDtpZihhPT09bClyZXR1cm4gMCE9PWMubGVuZ3RoP2NbMF0uYWFTb3J0aW5nOmw7XCJudW1iZXJcIj09PXR5cGVvZiBhP2E9W1thLGJdXTpoLmlzQXJyYXkoYVswXSl8fChhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO3JldHVybiB0aGlzLml0ZXJhdG9yKFwidGFibGVcIixmdW5jdGlvbihiKXtiLmFhU29ydGluZz1hLnNsaWNlKCl9KX0pO3IoXCJvcmRlci5saXN0ZW5lcigpXCIsXG5mdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJ0YWJsZVwiLGZ1bmN0aW9uKGQpe0thKGQsYSxiLGMpfSl9KTtyKFtcImNvbHVtbnMoKS5vcmRlcigpXCIsXCJjb2x1bW4oKS5vcmRlcigpXCJdLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJ0YWJsZVwiLGZ1bmN0aW9uKGMsZCl7dmFyIGU9W107aC5lYWNoKGJbZF0sZnVuY3Rpb24oYixjKXtlLnB1c2goW2MsYV0pfSk7Yy5hYVNvcnRpbmc9ZX0pfSk7cihcInNlYXJjaCgpXCIsZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5jb250ZXh0O3JldHVybiBhPT09bD8wIT09ZS5sZW5ndGg/ZVswXS5vUHJldmlvdXNTZWFyY2guc1NlYXJjaDpsOnRoaXMuaXRlcmF0b3IoXCJ0YWJsZVwiLGZ1bmN0aW9uKGUpe2Uub0ZlYXR1cmVzLmJGaWx0ZXImJmNhKGUsaC5leHRlbmQoe30sZS5vUHJldmlvdXNTZWFyY2gse3NTZWFyY2g6YStcIlwiLGJSZWdleDpudWxsPT09Yj8hMTpiLGJTbWFydDpudWxsPT09Yz8hMDpcbmMsYkNhc2VJbnNlbnNpdGl2ZTpudWxsPT09ZD8hMDpkfSksMSl9KX0pO3YoXCJjb2x1bW5zKCkuc2VhcmNoKClcIixcImNvbHVtbigpLnNlYXJjaCgpXCIsZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJjb2x1bW5cIixmdW5jdGlvbihlLGYpe3ZhciBnPWUuYW9QcmVTZWFyY2hDb2xzO2lmKGE9PT1sKXJldHVybiBnW2ZdLnNTZWFyY2g7ZS5vRmVhdHVyZXMuYkZpbHRlciYmKGguZXh0ZW5kKGdbZl0se3NTZWFyY2g6YStcIlwiLGJSZWdleDpudWxsPT09Yj8hMTpiLGJTbWFydDpudWxsPT09Yz8hMDpjLGJDYXNlSW5zZW5zaXRpdmU6bnVsbD09PWQ/ITA6ZH0pLGNhKGUsZS5vUHJldmlvdXNTZWFyY2gsMSkpfSl9KTtyKFwic3RhdGUoKVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dC5sZW5ndGg/dGhpcy5jb250ZXh0WzBdLm9TYXZlZFN0YXRlOm51bGx9KTtyKFwic3RhdGUuY2xlYXIoKVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJ0YWJsZVwiLGZ1bmN0aW9uKGEpe2EuZm5TdGF0ZVNhdmVDYWxsYmFjay5jYWxsKGEub0luc3RhbmNlLFxuYSx7fSl9KX0pO3IoXCJzdGF0ZS5sb2FkZWQoKVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dC5sZW5ndGg/dGhpcy5jb250ZXh0WzBdLm9Mb2FkZWRTdGF0ZTpudWxsfSk7cihcInN0YXRlLnNhdmUoKVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoXCJ0YWJsZVwiLGZ1bmN0aW9uKGEpe3RhKGEpfSl9KTtwLnZlcnNpb25DaGVjaz1wLmZuVmVyc2lvbkNoZWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1wLnZlcnNpb24uc3BsaXQoXCIuXCIpLGE9YS5zcGxpdChcIi5cIiksYyxkLGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspaWYoYz1wYXJzZUludChiW2VdLDEwKXx8MCxkPXBhcnNlSW50KGFbZV0sMTApfHwwLGMhPT1kKXJldHVybiBjPmQ7cmV0dXJuITB9O3AuaXNEYXRhVGFibGU9cC5mbklzRGF0YVRhYmxlPWZ1bmN0aW9uKGEpe3ZhciBiPWgoYSkuZ2V0KDApLGM9ITE7aC5lYWNoKHAuc2V0dGluZ3MsZnVuY3Rpb24oYSxlKXtpZihlLm5UYWJsZT09PWJ8fGUublNjcm9sbEhlYWQ9PT1cbmJ8fGUublNjcm9sbEZvb3Q9PT1iKWM9ITB9KTtyZXR1cm4gY307cC50YWJsZXM9cC5mblRhYmxlcz1mdW5jdGlvbihhKXtyZXR1cm4galF1ZXJ5Lm1hcChwLnNldHRpbmdzLGZ1bmN0aW9uKGIpe2lmKCFhfHxhJiZoKGIublRhYmxlKS5pcyhcIjp2aXNpYmxlXCIpKXJldHVybiBiLm5UYWJsZX0pfTtwLmNhbWVsVG9IdW5nYXJpYW49RztyKFwiJCgpXCIsZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJvd3MoYikubm9kZXMoKSxjPWgoYyk7cmV0dXJuIGgoW10uY29uY2F0KGMuZmlsdGVyKGEpLnRvQXJyYXkoKSxjLmZpbmQoYSkudG9BcnJheSgpKSl9KTtoLmVhY2goW1wib25cIixcIm9uZVwiLFwib2ZmXCJdLGZ1bmN0aW9uKGEsYil7cihiK1wiKClcIixmdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7YVswXS5tYXRjaCgvXFwuZHRcXGIvKXx8KGFbMF0rPVwiLmR0XCIpO3ZhciBkPWgodGhpcy50YWJsZXMoKS5ub2RlcygpKTtkW2JdLmFwcGx5KGQsYSk7cmV0dXJuIHRoaXN9KX0pO1xucihcImNsZWFyKClcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwidGFibGVcIixmdW5jdGlvbihhKXtqYShhKX0pfSk7cihcInNldHRpbmdzKClcIixmdW5jdGlvbigpe3JldHVybiBuZXcgcSh0aGlzLmNvbnRleHQsdGhpcy5jb250ZXh0KX0pO3IoXCJkYXRhKClcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKFwidGFibGVcIixmdW5jdGlvbihhKXtyZXR1cm4gQyhhLmFvRGF0YSxcIl9hRGF0YVwiKX0pLmZsYXR0ZW4oKX0pO3IoXCJkZXN0cm95KClcIixmdW5jdGlvbihhKXthPWF8fCExO3JldHVybiB0aGlzLml0ZXJhdG9yKFwidGFibGVcIixmdW5jdGlvbihiKXt2YXIgYz1iLm5UYWJsZVdyYXBwZXIucGFyZW50Tm9kZSxkPWIub0NsYXNzZXMsZT1iLm5UYWJsZSxmPWIublRCb2R5LGc9Yi5uVEhlYWQsaj1iLm5URm9vdCxpPWgoZSksZj1oKGYpLGw9aChiLm5UYWJsZVdyYXBwZXIpLG09aC5tYXAoYi5hb0RhdGEsZnVuY3Rpb24oYSl7cmV0dXJuIGEublRyfSksbztiLmJEZXN0cm95aW5nPVxuITA7dShiLFwiYW9EZXN0cm95Q2FsbGJhY2tcIixcImRlc3Ryb3lcIixbYl0pO2F8fChuZXcgcShiKSkuY29sdW1ucygpLnZpc2libGUoITApO2wudW5iaW5kKFwiLkRUXCIpLmZpbmQoXCI6bm90KHRib2R5ICopXCIpLnVuYmluZChcIi5EVFwiKTtoKHphKS51bmJpbmQoXCIuRFQtXCIrYi5zSW5zdGFuY2UpO2UhPWcucGFyZW50Tm9kZSYmKGkuY2hpbGRyZW4oXCJ0aGVhZFwiKS5kZXRhY2goKSxpLmFwcGVuZChnKSk7aiYmZSE9ai5wYXJlbnROb2RlJiYoaS5jaGlsZHJlbihcInRmb290XCIpLmRldGFjaCgpLGkuYXBwZW5kKGopKTtpLmRldGFjaCgpO2wuZGV0YWNoKCk7Yi5hYVNvcnRpbmc9W107Yi5hYVNvcnRpbmdGaXhlZD1bXTtzYShiKTtoKG0pLnJlbW92ZUNsYXNzKGIuYXNTdHJpcGVDbGFzc2VzLmpvaW4oXCIgXCIpKTtoKFwidGgsIHRkXCIsZykucmVtb3ZlQ2xhc3MoZC5zU29ydGFibGUrXCIgXCIrZC5zU29ydGFibGVBc2MrXCIgXCIrZC5zU29ydGFibGVEZXNjK1wiIFwiK2Quc1NvcnRhYmxlTm9uZSk7Yi5iSlVJJiZcbihoKFwidGggc3Bhbi5cIitkLnNTb3J0SWNvbitcIiwgdGQgc3Bhbi5cIitkLnNTb3J0SWNvbixnKS5kZXRhY2goKSxoKFwidGgsIHRkXCIsZykuZWFjaChmdW5jdGlvbigpe3ZhciBhPWgoXCJkaXYuXCIrZC5zU29ydEpVSVdyYXBwZXIsdGhpcyk7aCh0aGlzKS5hcHBlbmQoYS5jb250ZW50cygpKTthLmRldGFjaCgpfSkpOyFhJiZjJiZjLmluc2VydEJlZm9yZShlLGIublRhYmxlUmVpbnNlcnRCZWZvcmUpO2YuY2hpbGRyZW4oKS5kZXRhY2goKTtmLmFwcGVuZChtKTtpLmNzcyhcIndpZHRoXCIsYi5zRGVzdHJveVdpZHRoKS5yZW1vdmVDbGFzcyhkLnNUYWJsZSk7KG89Yi5hc0Rlc3Ryb3lTdHJpcGVzLmxlbmd0aCkmJmYuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGEpe2godGhpcykuYWRkQ2xhc3MoYi5hc0Rlc3Ryb3lTdHJpcGVzW2Elb10pfSk7Yz1oLmluQXJyYXkoYixwLnNldHRpbmdzKTstMSE9PWMmJnAuc2V0dGluZ3Muc3BsaWNlKGMsMSl9KX0pO3AudmVyc2lvbj1cIjEuMTAuMlwiO3Auc2V0dGluZ3M9XG5bXTtwLm1vZGVscz17fTtwLm1vZGVscy5vU2VhcmNoPXtiQ2FzZUluc2Vuc2l0aXZlOiEwLHNTZWFyY2g6XCJcIixiUmVnZXg6ITEsYlNtYXJ0OiEwfTtwLm1vZGVscy5vUm93PXtuVHI6bnVsbCxhbkNlbGxzOm51bGwsX2FEYXRhOltdLF9hU29ydERhdGE6bnVsbCxfYUZpbHRlckRhdGE6bnVsbCxfc0ZpbHRlclJvdzpudWxsLF9zUm93U3RyaXBlOlwiXCIsc3JjOm51bGx9O3AubW9kZWxzLm9Db2x1bW49e2lkeDpudWxsLGFEYXRhU29ydDpudWxsLGFzU29ydGluZzpudWxsLGJTZWFyY2hhYmxlOm51bGwsYlNvcnRhYmxlOm51bGwsYlZpc2libGU6bnVsbCxfc01hbnVhbFR5cGU6bnVsbCxfYkF0dHJTcmM6ITEsZm5DcmVhdGVkQ2VsbDpudWxsLGZuR2V0RGF0YTpudWxsLGZuU2V0RGF0YTpudWxsLG1EYXRhOm51bGwsbVJlbmRlcjpudWxsLG5UaDpudWxsLG5UZjpudWxsLHNDbGFzczpudWxsLHNDb250ZW50UGFkZGluZzpudWxsLHNEZWZhdWx0Q29udGVudDpudWxsLHNOYW1lOm51bGwsc1NvcnREYXRhVHlwZTpcInN0ZFwiLFxuc1NvcnRpbmdDbGFzczpudWxsLHNTb3J0aW5nQ2xhc3NKVUk6bnVsbCxzVGl0bGU6bnVsbCxzVHlwZTpudWxsLHNXaWR0aDpudWxsLHNXaWR0aE9yaWc6bnVsbH07cC5kZWZhdWx0cz17YWFEYXRhOm51bGwsYWFTb3J0aW5nOltbMCxcImFzY1wiXV0sYWFTb3J0aW5nRml4ZWQ6W10sYWpheDpudWxsLGFMZW5ndGhNZW51OlsxMCwyNSw1MCwxMDBdLGFvQ29sdW1uczpudWxsLGFvQ29sdW1uRGVmczpudWxsLGFvU2VhcmNoQ29sczpbXSxhc1N0cmlwZUNsYXNzZXM6bnVsbCxiQXV0b1dpZHRoOiEwLGJEZWZlclJlbmRlcjohMSxiRGVzdHJveTohMSxiRmlsdGVyOiEwLGJJbmZvOiEwLGJKUXVlcnlVSTohMSxiTGVuZ3RoQ2hhbmdlOiEwLGJQYWdpbmF0ZTohMCxiUHJvY2Vzc2luZzohMSxiUmV0cmlldmU6ITEsYlNjcm9sbENvbGxhcHNlOiExLGJTZXJ2ZXJTaWRlOiExLGJTb3J0OiEwLGJTb3J0TXVsdGk6ITAsYlNvcnRDZWxsc1RvcDohMSxiU29ydENsYXNzZXM6ITAsYlN0YXRlU2F2ZTohMSxcbmZuQ3JlYXRlZFJvdzpudWxsLGZuRHJhd0NhbGxiYWNrOm51bGwsZm5Gb290ZXJDYWxsYmFjazpudWxsLGZuRm9ybWF0TnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVybiBhLnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZyx0aGlzLm9MYW5ndWFnZS5zVGhvdXNhbmRzKX0sZm5IZWFkZXJDYWxsYmFjazpudWxsLGZuSW5mb0NhbGxiYWNrOm51bGwsZm5Jbml0Q29tcGxldGU6bnVsbCxmblByZURyYXdDYWxsYmFjazpudWxsLGZuUm93Q2FsbGJhY2s6bnVsbCxmblNlcnZlckRhdGE6bnVsbCxmblNlcnZlclBhcmFtczpudWxsLGZuU3RhdGVMb2FkQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBKU09OLnBhcnNlKCgtMT09PWEuaVN0YXRlRHVyYXRpb24/c2Vzc2lvblN0b3JhZ2U6bG9jYWxTdG9yYWdlKS5nZXRJdGVtKFwiRGF0YVRhYmxlc19cIithLnNJbnN0YW5jZStcIl9cIitsb2NhdGlvbi5wYXRobmFtZSkpfWNhdGNoKGIpe319LGZuU3RhdGVMb2FkUGFyYW1zOm51bGwsXG5mblN0YXRlTG9hZGVkOm51bGwsZm5TdGF0ZVNhdmVDYWxsYmFjazpmdW5jdGlvbihhLGIpe3RyeXsoLTE9PT1hLmlTdGF0ZUR1cmF0aW9uP3Nlc3Npb25TdG9yYWdlOmxvY2FsU3RvcmFnZSkuc2V0SXRlbShcIkRhdGFUYWJsZXNfXCIrYS5zSW5zdGFuY2UrXCJfXCIrbG9jYXRpb24ucGF0aG5hbWUsSlNPTi5zdHJpbmdpZnkoYikpfWNhdGNoKGMpe319LGZuU3RhdGVTYXZlUGFyYW1zOm51bGwsaVN0YXRlRHVyYXRpb246NzIwMCxpRGVmZXJMb2FkaW5nOm51bGwsaURpc3BsYXlMZW5ndGg6MTAsaURpc3BsYXlTdGFydDowLGlUYWJJbmRleDowLG9DbGFzc2VzOnt9LG9MYW5ndWFnZTp7b0FyaWE6e3NTb3J0QXNjZW5kaW5nOlwiOiBhY3RpdmF0ZSB0byBzb3J0IGNvbHVtbiBhc2NlbmRpbmdcIixzU29ydERlc2NlbmRpbmc6XCI6IGFjdGl2YXRlIHRvIHNvcnQgY29sdW1uIGRlc2NlbmRpbmdcIn0sb1BhZ2luYXRlOntzRmlyc3Q6XCJGaXJzdFwiLHNMYXN0OlwiTGFzdFwiLHNOZXh0OlwiTmV4dFwiLHNQcmV2aW91czpcIlByZXZpb3VzXCJ9LFxuc0VtcHR5VGFibGU6XCJObyBkYXRhIGF2YWlsYWJsZSBpbiB0YWJsZVwiLHNJbmZvOlwiU2hvd2luZyBfU1RBUlRfIHRvIF9FTkRfIG9mIF9UT1RBTF8gZW50cmllc1wiLHNJbmZvRW1wdHk6XCJTaG93aW5nIDAgdG8gMCBvZiAwIGVudHJpZXNcIixzSW5mb0ZpbHRlcmVkOlwiKGZpbHRlcmVkIGZyb20gX01BWF8gdG90YWwgZW50cmllcylcIixzSW5mb1Bvc3RGaXg6XCJcIixzRGVjaW1hbDpcIlwiLHNUaG91c2FuZHM6XCIsXCIsc0xlbmd0aE1lbnU6XCJTaG93IF9NRU5VXyBlbnRyaWVzXCIsc0xvYWRpbmdSZWNvcmRzOlwiTG9hZGluZy4uLlwiLHNQcm9jZXNzaW5nOlwiUHJvY2Vzc2luZy4uLlwiLHNTZWFyY2g6XCJTZWFyY2g6XCIsc1NlYXJjaFBsYWNlaG9sZGVyOlwiXCIsc1VybDpcIlwiLHNaZXJvUmVjb3JkczpcIk5vIG1hdGNoaW5nIHJlY29yZHMgZm91bmRcIn0sb1NlYXJjaDpoLmV4dGVuZCh7fSxwLm1vZGVscy5vU2VhcmNoKSxzQWpheERhdGFQcm9wOlwiZGF0YVwiLHNBamF4U291cmNlOm51bGwsc0RvbTpcImxmcnRpcFwiLHNQYWdpbmF0aW9uVHlwZTpcInNpbXBsZV9udW1iZXJzXCIsXG5zU2Nyb2xsWDpcIlwiLHNTY3JvbGxYSW5uZXI6XCJcIixzU2Nyb2xsWTpcIlwiLHNTZXJ2ZXJNZXRob2Q6XCJHRVRcIixyZW5kZXJlcjpudWxsfTtUKHAuZGVmYXVsdHMpO3AuZGVmYXVsdHMuY29sdW1uPXthRGF0YVNvcnQ6bnVsbCxpRGF0YVNvcnQ6LTEsYXNTb3J0aW5nOltcImFzY1wiLFwiZGVzY1wiXSxiU2VhcmNoYWJsZTohMCxiU29ydGFibGU6ITAsYlZpc2libGU6ITAsZm5DcmVhdGVkQ2VsbDpudWxsLG1EYXRhOm51bGwsbVJlbmRlcjpudWxsLHNDZWxsVHlwZTpcInRkXCIsc0NsYXNzOlwiXCIsc0NvbnRlbnRQYWRkaW5nOlwiXCIsc0RlZmF1bHRDb250ZW50Om51bGwsc05hbWU6XCJcIixzU29ydERhdGFUeXBlOlwic3RkXCIsc1RpdGxlOm51bGwsc1R5cGU6bnVsbCxzV2lkdGg6bnVsbH07VChwLmRlZmF1bHRzLmNvbHVtbik7cC5tb2RlbHMub1NldHRpbmdzPXtvRmVhdHVyZXM6e2JBdXRvV2lkdGg6bnVsbCxiRGVmZXJSZW5kZXI6bnVsbCxiRmlsdGVyOm51bGwsYkluZm86bnVsbCxiTGVuZ3RoQ2hhbmdlOm51bGwsXG5iUGFnaW5hdGU6bnVsbCxiUHJvY2Vzc2luZzpudWxsLGJTZXJ2ZXJTaWRlOm51bGwsYlNvcnQ6bnVsbCxiU29ydE11bHRpOm51bGwsYlNvcnRDbGFzc2VzOm51bGwsYlN0YXRlU2F2ZTpudWxsfSxvU2Nyb2xsOntiQ29sbGFwc2U6bnVsbCxpQmFyV2lkdGg6MCxzWDpudWxsLHNYSW5uZXI6bnVsbCxzWTpudWxsfSxvTGFuZ3VhZ2U6e2ZuSW5mb0NhbGxiYWNrOm51bGx9LG9Ccm93c2VyOntiU2Nyb2xsT3ZlcnNpemU6ITEsYlNjcm9sbGJhckxlZnQ6ITF9LGFqYXg6bnVsbCxhYW5GZWF0dXJlczpbXSxhb0RhdGE6W10sYWlEaXNwbGF5OltdLGFpRGlzcGxheU1hc3RlcjpbXSxhb0NvbHVtbnM6W10sYW9IZWFkZXI6W10sYW9Gb290ZXI6W10sb1ByZXZpb3VzU2VhcmNoOnt9LGFvUHJlU2VhcmNoQ29sczpbXSxhYVNvcnRpbmc6bnVsbCxhYVNvcnRpbmdGaXhlZDpbXSxhc1N0cmlwZUNsYXNzZXM6bnVsbCxhc0Rlc3Ryb3lTdHJpcGVzOltdLHNEZXN0cm95V2lkdGg6MCxhb1Jvd0NhbGxiYWNrOltdLFxuYW9IZWFkZXJDYWxsYmFjazpbXSxhb0Zvb3RlckNhbGxiYWNrOltdLGFvRHJhd0NhbGxiYWNrOltdLGFvUm93Q3JlYXRlZENhbGxiYWNrOltdLGFvUHJlRHJhd0NhbGxiYWNrOltdLGFvSW5pdENvbXBsZXRlOltdLGFvU3RhdGVTYXZlUGFyYW1zOltdLGFvU3RhdGVMb2FkUGFyYW1zOltdLGFvU3RhdGVMb2FkZWQ6W10sc1RhYmxlSWQ6XCJcIixuVGFibGU6bnVsbCxuVEhlYWQ6bnVsbCxuVEZvb3Q6bnVsbCxuVEJvZHk6bnVsbCxuVGFibGVXcmFwcGVyOm51bGwsYkRlZmVyTG9hZGluZzohMSxiSW5pdGlhbGlzZWQ6ITEsYW9PcGVuUm93czpbXSxzRG9tOm51bGwsc1BhZ2luYXRpb25UeXBlOlwidHdvX2J1dHRvblwiLGlTdGF0ZUR1cmF0aW9uOjAsYW9TdGF0ZVNhdmU6W10sYW9TdGF0ZUxvYWQ6W10sb1NhdmVkU3RhdGU6bnVsbCxvTG9hZGVkU3RhdGU6bnVsbCxzQWpheFNvdXJjZTpudWxsLHNBamF4RGF0YVByb3A6bnVsbCxiQWpheERhdGFHZXQ6ITAsanFYSFI6bnVsbCxqc29uOmwsb0FqYXhEYXRhOmwsXG5mblNlcnZlckRhdGE6bnVsbCxhb1NlcnZlclBhcmFtczpbXSxzU2VydmVyTWV0aG9kOm51bGwsZm5Gb3JtYXROdW1iZXI6bnVsbCxhTGVuZ3RoTWVudTpudWxsLGlEcmF3OjAsYkRyYXdpbmc6ITEsaURyYXdFcnJvcjotMSxfaURpc3BsYXlMZW5ndGg6MTAsX2lEaXNwbGF5U3RhcnQ6MCxfaVJlY29yZHNUb3RhbDowLF9pUmVjb3Jkc0Rpc3BsYXk6MCxiSlVJOm51bGwsb0NsYXNzZXM6e30sYkZpbHRlcmVkOiExLGJTb3J0ZWQ6ITEsYlNvcnRDZWxsc1RvcDpudWxsLG9Jbml0Om51bGwsYW9EZXN0cm95Q2FsbGJhY2s6W10sZm5SZWNvcmRzVG90YWw6ZnVuY3Rpb24oKXtyZXR1cm5cInNzcFwiPT16KHRoaXMpPzEqdGhpcy5faVJlY29yZHNUb3RhbDp0aGlzLmFpRGlzcGxheU1hc3Rlci5sZW5ndGh9LGZuUmVjb3Jkc0Rpc3BsYXk6ZnVuY3Rpb24oKXtyZXR1cm5cInNzcFwiPT16KHRoaXMpPzEqdGhpcy5faVJlY29yZHNEaXNwbGF5OnRoaXMuYWlEaXNwbGF5Lmxlbmd0aH0sZm5EaXNwbGF5RW5kOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLl9pRGlzcGxheUxlbmd0aCxiPXRoaXMuX2lEaXNwbGF5U3RhcnQsYz1iK2EsZD10aGlzLmFpRGlzcGxheS5sZW5ndGgsZT10aGlzLm9GZWF0dXJlcyxmPWUuYlBhZ2luYXRlO3JldHVybiBlLmJTZXJ2ZXJTaWRlPyExPT09Znx8LTE9PT1hP2IrZDpNYXRoLm1pbihiK2EsdGhpcy5faVJlY29yZHNEaXNwbGF5KTohZnx8Yz5kfHwtMT09PWE/ZDpjfSxvSW5zdGFuY2U6bnVsbCxzSW5zdGFuY2U6bnVsbCxpVGFiSW5kZXg6MCxuU2Nyb2xsSGVhZDpudWxsLG5TY3JvbGxGb290Om51bGwsYUxhc3RTb3J0OltdLG9QbHVnaW5zOnt9fTtwLmV4dD10PXtjbGFzc2VzOnt9LGVyck1vZGU6XCJhbGVydFwiLGZlYXR1cmU6W10sc2VhcmNoOltdLGludGVybmFsOnt9LGxlZ2FjeTp7YWpheDpudWxsfSxwYWdlcjp7fSxyZW5kZXJlcjp7cGFnZUJ1dHRvbjp7fSxoZWFkZXI6e319LG9yZGVyOnt9LHR5cGU6e2RldGVjdDpbXSxzZWFyY2g6e30sb3JkZXI6e319LF91bmlxdWU6MCxmblZlcnNpb25DaGVjazpwLmZuVmVyc2lvbkNoZWNrLFxuaUFwaUluZGV4OjAsb0pVSUNsYXNzZXM6e30sc1ZlcnNpb246cC52ZXJzaW9ufTtoLmV4dGVuZCh0LHthZm5GaWx0ZXJpbmc6dC5zZWFyY2gsYVR5cGVzOnQudHlwZS5kZXRlY3Qsb2ZuU2VhcmNoOnQudHlwZS5zZWFyY2gsb1NvcnQ6dC50eXBlLm9yZGVyLGFmblNvcnREYXRhOnQub3JkZXIsYW9GZWF0dXJlczp0LmZlYXR1cmUsb0FwaTp0LmludGVybmFsLG9TdGRDbGFzc2VzOnQuY2xhc3NlcyxvUGFnaW5hdGlvbjp0LnBhZ2VyfSk7aC5leHRlbmQocC5leHQuY2xhc3Nlcyx7c1RhYmxlOlwiZGF0YVRhYmxlXCIsc05vRm9vdGVyOlwibm8tZm9vdGVyXCIsc1BhZ2VCdXR0b246XCJwYWdpbmF0ZV9idXR0b25cIixzUGFnZUJ1dHRvbkFjdGl2ZTpcImN1cnJlbnRcIixzUGFnZUJ1dHRvbkRpc2FibGVkOlwiZGlzYWJsZWRcIixzU3RyaXBlT2RkOlwib2RkXCIsc1N0cmlwZUV2ZW46XCJldmVuXCIsc1Jvd0VtcHR5OlwiZGF0YVRhYmxlc19lbXB0eVwiLHNXcmFwcGVyOlwiZGF0YVRhYmxlc193cmFwcGVyXCIsc0ZpbHRlcjpcImRhdGFUYWJsZXNfZmlsdGVyXCIsXG5zSW5mbzpcImRhdGFUYWJsZXNfaW5mb1wiLHNQYWdpbmc6XCJkYXRhVGFibGVzX3BhZ2luYXRlIHBhZ2luZ19cIixzTGVuZ3RoOlwiZGF0YVRhYmxlc19sZW5ndGhcIixzUHJvY2Vzc2luZzpcImRhdGFUYWJsZXNfcHJvY2Vzc2luZ1wiLHNTb3J0QXNjOlwic29ydGluZ19hc2NcIixzU29ydERlc2M6XCJzb3J0aW5nX2Rlc2NcIixzU29ydGFibGU6XCJzb3J0aW5nXCIsc1NvcnRhYmxlQXNjOlwic29ydGluZ19hc2NfZGlzYWJsZWRcIixzU29ydGFibGVEZXNjOlwic29ydGluZ19kZXNjX2Rpc2FibGVkXCIsc1NvcnRhYmxlTm9uZTpcInNvcnRpbmdfZGlzYWJsZWRcIixzU29ydENvbHVtbjpcInNvcnRpbmdfXCIsc0ZpbHRlcklucHV0OlwiXCIsc0xlbmd0aFNlbGVjdDpcIlwiLHNTY3JvbGxXcmFwcGVyOlwiZGF0YVRhYmxlc19zY3JvbGxcIixzU2Nyb2xsSGVhZDpcImRhdGFUYWJsZXNfc2Nyb2xsSGVhZFwiLHNTY3JvbGxIZWFkSW5uZXI6XCJkYXRhVGFibGVzX3Njcm9sbEhlYWRJbm5lclwiLHNTY3JvbGxCb2R5OlwiZGF0YVRhYmxlc19zY3JvbGxCb2R5XCIsXG5zU2Nyb2xsRm9vdDpcImRhdGFUYWJsZXNfc2Nyb2xsRm9vdFwiLHNTY3JvbGxGb290SW5uZXI6XCJkYXRhVGFibGVzX3Njcm9sbEZvb3RJbm5lclwiLHNIZWFkZXJUSDpcIlwiLHNGb290ZXJUSDpcIlwiLHNTb3J0SlVJQXNjOlwiXCIsc1NvcnRKVUlEZXNjOlwiXCIsc1NvcnRKVUk6XCJcIixzU29ydEpVSUFzY0FsbG93ZWQ6XCJcIixzU29ydEpVSURlc2NBbGxvd2VkOlwiXCIsc1NvcnRKVUlXcmFwcGVyOlwiXCIsc1NvcnRJY29uOlwiXCIsc0pVSUhlYWRlcjpcIlwiLHNKVUlGb290ZXI6XCJcIn0pO3ZhciB5YT1cIlwiLHlhPVwiXCIsRT15YStcInVpLXN0YXRlLWRlZmF1bHRcIixlYT15YStcImNzc19yaWdodCB1aS1pY29uIHVpLWljb24tXCIsVWI9eWErXCJmZy10b29sYmFyIHVpLXRvb2xiYXIgdWktd2lkZ2V0LWhlYWRlciB1aS1oZWxwZXItY2xlYXJmaXhcIjtoLmV4dGVuZChwLmV4dC5vSlVJQ2xhc3NlcyxwLmV4dC5jbGFzc2VzLHtzUGFnZUJ1dHRvbjpcImZnLWJ1dHRvbiB1aS1idXR0b24gXCIrRSxzUGFnZUJ1dHRvbkFjdGl2ZTpcInVpLXN0YXRlLWRpc2FibGVkXCIsXG5zUGFnZUJ1dHRvbkRpc2FibGVkOlwidWktc3RhdGUtZGlzYWJsZWRcIixzUGFnaW5nOlwiZGF0YVRhYmxlc19wYWdpbmF0ZSBmZy1idXR0b25zZXQgdWktYnV0dG9uc2V0IGZnLWJ1dHRvbnNldC1tdWx0aSB1aS1idXR0b25zZXQtbXVsdGkgcGFnaW5nX1wiLHNTb3J0QXNjOkUrXCIgc29ydGluZ19hc2NcIixzU29ydERlc2M6RStcIiBzb3J0aW5nX2Rlc2NcIixzU29ydGFibGU6RStcIiBzb3J0aW5nXCIsc1NvcnRhYmxlQXNjOkUrXCIgc29ydGluZ19hc2NfZGlzYWJsZWRcIixzU29ydGFibGVEZXNjOkUrXCIgc29ydGluZ19kZXNjX2Rpc2FibGVkXCIsc1NvcnRhYmxlTm9uZTpFK1wiIHNvcnRpbmdfZGlzYWJsZWRcIixzU29ydEpVSUFzYzplYStcInRyaWFuZ2xlLTEtblwiLHNTb3J0SlVJRGVzYzplYStcInRyaWFuZ2xlLTEtc1wiLHNTb3J0SlVJOmVhK1wiY2FyYXQtMi1uLXNcIixzU29ydEpVSUFzY0FsbG93ZWQ6ZWErXCJjYXJhdC0xLW5cIixzU29ydEpVSURlc2NBbGxvd2VkOmVhK1wiY2FyYXQtMS1zXCIsc1NvcnRKVUlXcmFwcGVyOlwiRGF0YVRhYmxlc19zb3J0X3dyYXBwZXJcIixcbnNTb3J0SWNvbjpcIkRhdGFUYWJsZXNfc29ydF9pY29uXCIsc1Njcm9sbEhlYWQ6XCJkYXRhVGFibGVzX3Njcm9sbEhlYWQgXCIrRSxzU2Nyb2xsRm9vdDpcImRhdGFUYWJsZXNfc2Nyb2xsRm9vdCBcIitFLHNIZWFkZXJUSDpFLHNGb290ZXJUSDpFLHNKVUlIZWFkZXI6VWIrXCIgdWktY29ybmVyLXRsIHVpLWNvcm5lci10clwiLHNKVUlGb290ZXI6VWIrXCIgdWktY29ybmVyLWJsIHVpLWNvcm5lci1iclwifSk7dmFyIExiPXAuZXh0LnBhZ2VyO2guZXh0ZW5kKExiLHtzaW1wbGU6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwcmV2aW91c1wiLFwibmV4dFwiXX0sZnVsbDpmdW5jdGlvbigpe3JldHVybltcImZpcnN0XCIsXCJwcmV2aW91c1wiLFwibmV4dFwiLFwibGFzdFwiXX0sc2ltcGxlX251bWJlcnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm5bXCJwcmV2aW91c1wiLFVhKGEsYiksXCJuZXh0XCJdfSxmdWxsX251bWJlcnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm5bXCJmaXJzdFwiLFwicHJldmlvdXNcIixVYShhLGIpLFwibmV4dFwiLFwibGFzdFwiXX0sX251bWJlcnM6VWEsXG5udW1iZXJzX2xlbmd0aDo3fSk7aC5leHRlbmQoITAscC5leHQucmVuZGVyZXIse3BhZ2VCdXR0b246e186ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPWEub0NsYXNzZXMsaj1hLm9MYW5ndWFnZS5vUGFnaW5hdGUsaSxsLG09MCxvPWZ1bmN0aW9uKGIsZCl7dmFyIGsscCxyLHEscz1mdW5jdGlvbihiKXtSYShhLGIuZGF0YS5hY3Rpb24sdHJ1ZSl9O2s9MDtmb3IocD1kLmxlbmd0aDtrPHA7aysrKXtxPWRba107aWYoaC5pc0FycmF5KHEpKXtyPWgoXCI8XCIrKHEuRFRfZWx8fFwiZGl2XCIpK1wiLz5cIikuYXBwZW5kVG8oYik7byhyLHEpfWVsc2V7bD1pPVwiXCI7c3dpdGNoKHEpe2Nhc2UgXCJlbGxpcHNpc1wiOmIuYXBwZW5kKFwiPHNwYW4+JmhlbGxpcDs8L3NwYW4+XCIpO2JyZWFrO2Nhc2UgXCJmaXJzdFwiOmk9ai5zRmlyc3Q7bD1xKyhlPjA/XCJcIjpcIiBcIitnLnNQYWdlQnV0dG9uRGlzYWJsZWQpO2JyZWFrO2Nhc2UgXCJwcmV2aW91c1wiOmk9ai5zUHJldmlvdXM7bD1xKyhlPjA/XCJcIjpcIiBcIitnLnNQYWdlQnV0dG9uRGlzYWJsZWQpO1xuYnJlYWs7Y2FzZSBcIm5leHRcIjppPWouc05leHQ7bD1xKyhlPGYtMT9cIlwiOlwiIFwiK2cuc1BhZ2VCdXR0b25EaXNhYmxlZCk7YnJlYWs7Y2FzZSBcImxhc3RcIjppPWouc0xhc3Q7bD1xKyhlPGYtMT9cIlwiOlwiIFwiK2cuc1BhZ2VCdXR0b25EaXNhYmxlZCk7YnJlYWs7ZGVmYXVsdDppPXErMTtsPWU9PT1xP2cuc1BhZ2VCdXR0b25BY3RpdmU6XCJcIn1pZihpKXtyPWgoXCI8YT5cIix7XCJjbGFzc1wiOmcuc1BhZ2VCdXR0b24rXCIgXCIrbCxcImFyaWEtY29udHJvbHNcIjphLnNUYWJsZUlkLFwiZGF0YS1kdC1pZHhcIjptLHRhYmluZGV4OmEuaVRhYkluZGV4LGlkOmM9PT0wJiZ0eXBlb2YgcT09PVwic3RyaW5nXCI/YS5zVGFibGVJZCtcIl9cIitxOm51bGx9KS5odG1sKGkpLmFwcGVuZFRvKGIpO1RhKHIse2FjdGlvbjpxfSxzKTttKyt9fX19O3RyeXt2YXIgaz1oKE8uYWN0aXZlRWxlbWVudCkuZGF0YShcImR0LWlkeFwiKTtvKGgoYikuZW1wdHkoKSxkKTtrIT09bnVsbCYmaChiKS5maW5kKFwiW2RhdGEtZHQtaWR4PVwiK2srXCJdXCIpLmZvY3VzKCl9Y2F0Y2gocCl7fX19fSk7XG52YXIgdmE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoIWF8fFwiLVwiPT09YSlyZXR1cm4tSW5maW5pdHk7YiYmKGE9UGIoYSxiKSk7YS5yZXBsYWNlJiYoYyYmKGE9YS5yZXBsYWNlKGMsXCJcIikpLGQmJihhPWEucmVwbGFjZShkLFwiXCIpKSk7cmV0dXJuIDEqYX07aC5leHRlbmQodC50eXBlLm9yZGVyLHtcImRhdGUtcHJlXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIERhdGUucGFyc2UoYSl8fDB9LFwiaHRtbC1wcmVcIjpmdW5jdGlvbihhKXtyZXR1cm4gSChhKT9cIlwiOmEucmVwbGFjZT9hLnJlcGxhY2UoLzwuKj8+L2csXCJcIikudG9Mb3dlckNhc2UoKTphK1wiXCJ9LFwic3RyaW5nLXByZVwiOmZ1bmN0aW9uKGEpe3JldHVybiBIKGEpP1wiXCI6XCJzdHJpbmdcIj09PXR5cGVvZiBhP2EudG9Mb3dlckNhc2UoKTohYS50b1N0cmluZz9cIlwiOmEudG9TdHJpbmcoKX0sXCJzdHJpbmctYXNjXCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYTxiPy0xOmE+Yj8xOjB9LFwic3RyaW5nLWRlc2NcIjpmdW5jdGlvbihhLGIpe3JldHVybiBhPGI/MTphPlxuYj8tMTowfX0pO2NiKFwiXCIpO2guZXh0ZW5kKHAuZXh0LnR5cGUuZGV0ZWN0LFtmdW5jdGlvbihhLGIpe3ZhciBjPWIub0xhbmd1YWdlLnNEZWNpbWFsO3JldHVybiBYYShhLGMpP1wibnVtXCIrYzpudWxsfSxmdW5jdGlvbihhKXtpZihhJiYoIVliLnRlc3QoYSl8fCFaYi50ZXN0KGEpKSlyZXR1cm4gbnVsbDt2YXIgYj1EYXRlLnBhcnNlKGEpO3JldHVybiBudWxsIT09YiYmIWlzTmFOKGIpfHxIKGEpP1wiZGF0ZVwiOm51bGx9LGZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5vTGFuZ3VhZ2Uuc0RlY2ltYWw7cmV0dXJuIFhhKGEsYywhMCk/XCJudW0tZm10XCIrYzpudWxsfSxmdW5jdGlvbihhLGIpe3ZhciBjPWIub0xhbmd1YWdlLnNEZWNpbWFsO3JldHVybiBRYihhLGMpP1wiaHRtbC1udW1cIitjOm51bGx9LGZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5vTGFuZ3VhZ2Uuc0RlY2ltYWw7cmV0dXJuIFFiKGEsYywhMCk/XCJodG1sLW51bS1mbXRcIitjOm51bGx9LGZ1bmN0aW9uKGEpe3JldHVybiBIKGEpfHxcInN0cmluZ1wiPT09XG50eXBlb2YgYSYmLTEhPT1hLmluZGV4T2YoXCI8XCIpP1wiaHRtbFwiOm51bGx9XSk7aC5leHRlbmQocC5leHQudHlwZS5zZWFyY2gse2h0bWw6ZnVuY3Rpb24oYSl7cmV0dXJuIEgoYSk/YTpcInN0cmluZ1wiPT09dHlwZW9mIGE/YS5yZXBsYWNlKE5iLFwiIFwiKS5yZXBsYWNlKHdhLFwiXCIpOlwiXCJ9LHN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gSChhKT9hOlwic3RyaW5nXCI9PT10eXBlb2YgYT9hLnJlcGxhY2UoTmIsXCIgXCIpOmF9fSk7aC5leHRlbmQoITAscC5leHQucmVuZGVyZXIse2hlYWRlcjp7XzpmdW5jdGlvbihhLGIsYyxkKXtoKGEublRhYmxlKS5vbihcIm9yZGVyLmR0LkRUXCIsZnVuY3Rpb24oZSxmLGcsaCl7aWYoYT09PWYpe2U9Yy5pZHg7Yi5yZW1vdmVDbGFzcyhjLnNTb3J0aW5nQ2xhc3MrXCIgXCIrZC5zU29ydEFzYytcIiBcIitkLnNTb3J0RGVzYykuYWRkQ2xhc3MoaFtlXT09XCJhc2NcIj9kLnNTb3J0QXNjOmhbZV09PVwiZGVzY1wiP2Quc1NvcnREZXNjOmMuc1NvcnRpbmdDbGFzcyl9fSl9LGpxdWVyeXVpOmZ1bmN0aW9uKGEsXG5iLGMsZCl7dmFyIGU9Yy5pZHg7aChcIjxkaXYvPlwiKS5hZGRDbGFzcyhkLnNTb3J0SlVJV3JhcHBlcikuYXBwZW5kKGIuY29udGVudHMoKSkuYXBwZW5kKGgoXCI8c3Bhbi8+XCIpLmFkZENsYXNzKGQuc1NvcnRJY29uK1wiIFwiK2Muc1NvcnRpbmdDbGFzc0pVSSkpLmFwcGVuZFRvKGIpO2goYS5uVGFibGUpLm9uKFwib3JkZXIuZHQuRFRcIixmdW5jdGlvbihmLGcsaCxpKXtpZihhPT09Zyl7Yi5yZW1vdmVDbGFzcyhkLnNTb3J0QXNjK1wiIFwiK2Quc1NvcnREZXNjKS5hZGRDbGFzcyhpW2VdPT1cImFzY1wiP2Quc1NvcnRBc2M6aVtlXT09XCJkZXNjXCI/ZC5zU29ydERlc2M6Yy5zU29ydGluZ0NsYXNzKTtiLmZpbmQoXCJzcGFuLlwiK2Quc1NvcnRJY29uKS5yZW1vdmVDbGFzcyhkLnNTb3J0SlVJQXNjK1wiIFwiK2Quc1NvcnRKVUlEZXNjK1wiIFwiK2Quc1NvcnRKVUkrXCIgXCIrZC5zU29ydEpVSUFzY0FsbG93ZWQrXCIgXCIrZC5zU29ydEpVSURlc2NBbGxvd2VkKS5hZGRDbGFzcyhpW2VdPT1cImFzY1wiP2Quc1NvcnRKVUlBc2M6XG5pW2VdPT1cImRlc2NcIj9kLnNTb3J0SlVJRGVzYzpjLnNTb3J0aW5nQ2xhc3NKVUkpfX0pfX19KTtwLnJlbmRlcj17bnVtYmVyOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybntkaXNwbGF5OmZ1bmN0aW9uKGUpe3ZhciBmPTA+ZT9cIi1cIjpcIlwiLGU9TWF0aC5hYnMocGFyc2VGbG9hdChlKSksZz1wYXJzZUludChlLDEwKSxlPWM/YisoZS1nKS50b0ZpeGVkKGMpLnN1YnN0cmluZygyKTpcIlwiO3JldHVybiBmKyhkfHxcIlwiKStnLnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZyxhKStlfX19fTtoLmV4dGVuZChwLmV4dC5pbnRlcm5hbCx7X2ZuRXh0ZXJuQXBpRnVuYzpNYixfZm5CdWlsZEFqYXg6bmEsX2ZuQWpheFVwZGF0ZTpqYixfZm5BamF4UGFyYW1ldGVyczpzYixfZm5BamF4VXBkYXRlRHJhdzp0YixfZm5BamF4RGF0YVNyYzpvYSxfZm5BZGRDb2x1bW46QWEsX2ZuQ29sdW1uT3B0aW9uczpmYSxfZm5BZGp1c3RDb2x1bW5TaXppbmc6VixfZm5WaXNpYmxlVG9Db2x1bW5JbmRleDpnYSxcbl9mbkNvbHVtbkluZGV4VG9WaXNpYmxlOlksX2ZuVmlzYmxlQ29sdW1uczpaLF9mbkdldENvbHVtbnM6WCxfZm5Db2x1bW5UeXBlczpEYSxfZm5BcHBseUNvbHVtbkRlZnM6aGIsX2ZuSHVuZ2FyaWFuTWFwOlQsX2ZuQ2FtZWxUb0h1bmdhcmlhbjpHLF9mbkxhbmd1YWdlQ29tcGF0Ok4sX2ZuQnJvd3NlckRldGVjdDpmYixfZm5BZGREYXRhOkksX2ZuQWRkVHI6aGEsX2ZuTm9kZVRvRGF0YUluZGV4OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuX0RUX1Jvd0luZGV4IT09bD9iLl9EVF9Sb3dJbmRleDpudWxsfSxfZm5Ob2RlVG9Db2x1bW5JbmRleDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGguaW5BcnJheShjLGEuYW9EYXRhW2JdLmFuQ2VsbHMpfSxfZm5HZXRDZWxsRGF0YTpBLF9mblNldENlbGxEYXRhOkVhLF9mblNwbGl0T2JqTm90YXRpb246R2EsX2ZuR2V0T2JqZWN0RGF0YUZuOlUsX2ZuU2V0T2JqZWN0RGF0YUZuOkJhLF9mbkdldERhdGFNYXN0ZXI6SGEsX2ZuQ2xlYXJUYWJsZTpqYSxcbl9mbkRlbGV0ZUluZGV4OmthLF9mbkludmFsaWRhdGVSb3c6bGEsX2ZuR2V0Um93RWxlbWVudHM6aWEsX2ZuQ3JlYXRlVHI6RmEsX2ZuQnVpbGRIZWFkOmliLF9mbkRyYXdIZWFkOmJhLF9mbkRyYXc6SyxfZm5SZURyYXc6TCxfZm5BZGRPcHRpb25zSHRtbDpsYixfZm5EZXRlY3RIZWFkZXI6YWEsX2ZuR2V0VW5pcXVlVGhzOm1hLF9mbkZlYXR1cmVIdG1sRmlsdGVyOm5iLF9mbkZpbHRlckNvbXBsZXRlOmNhLF9mbkZpbHRlckN1c3RvbTp3YixfZm5GaWx0ZXJDb2x1bW46dmIsX2ZuRmlsdGVyOnViLF9mbkZpbHRlckNyZWF0ZVNlYXJjaDpOYSxfZm5Fc2NhcGVSZWdleDpPYSxfZm5GaWx0ZXJEYXRhOnhiLF9mbkZlYXR1cmVIdG1sSW5mbzpxYixfZm5VcGRhdGVJbmZvOkFiLF9mbkluZm9NYWNyb3M6QmIsX2ZuSW5pdGlhbGlzZTpyYSxfZm5Jbml0Q29tcGxldGU6cGEsX2ZuTGVuZ3RoQ2hhbmdlOlBhLF9mbkZlYXR1cmVIdG1sTGVuZ3RoOm1iLF9mbkZlYXR1cmVIdG1sUGFnaW5hdGU6cmIsXG5fZm5QYWdlQ2hhbmdlOlJhLF9mbkZlYXR1cmVIdG1sUHJvY2Vzc2luZzpvYixfZm5Qcm9jZXNzaW5nRGlzcGxheTpCLF9mbkZlYXR1cmVIdG1sVGFibGU6cGIsX2ZuU2Nyb2xsRHJhdzpXLF9mbkFwcGx5VG9DaGlsZHJlbjpGLF9mbkNhbGN1bGF0ZUNvbHVtbldpZHRoczpDYSxfZm5UaHJvdHRsZTpNYSxfZm5Db252ZXJ0VG9XaWR0aDpDYixfZm5TY3JvbGxpbmdXaWR0aEFkanVzdDpFYixfZm5HZXRXaWRlc3ROb2RlOkRiLF9mbkdldE1heExlblN0cmluZzpGYixfZm5TdHJpbmdUb0NzczpzLF9mblNjcm9sbEJhcldpZHRoOkdiLF9mblNvcnRGbGF0dGVuOlIsX2ZuU29ydDprYixfZm5Tb3J0QXJpYTpJYixfZm5Tb3J0TGlzdGVuZXI6U2EsX2ZuU29ydEF0dGFjaExpc3RlbmVyOkthLF9mblNvcnRpbmdDbGFzc2VzOnNhLF9mblNvcnREYXRhOkhiLF9mblNhdmVTdGF0ZTp0YSxfZm5Mb2FkU3RhdGU6SmIsX2ZuU2V0dGluZ3NGcm9tTm9kZTp1YSxfZm5Mb2c6UCxfZm5NYXA6RCxfZm5CaW5kQWN0aW9uOlRhLFxuX2ZuQ2FsbGJhY2tSZWc6eCxfZm5DYWxsYmFja0ZpcmU6dSxfZm5MZW5ndGhPdmVyZmxvdzpRYSxfZm5SZW5kZXJlcjpMYSxfZm5EYXRhU291cmNlOnosX2ZuUm93QXR0cmlidXRlczpJYSxfZm5DYWxjdWxhdGVFbmQ6ZnVuY3Rpb24oKXt9fSk7aC5mbi5kYXRhVGFibGU9cDtoLmZuLmRhdGFUYWJsZVNldHRpbmdzPXAuc2V0dGluZ3M7aC5mbi5kYXRhVGFibGVFeHQ9cC5leHQ7aC5mbi5EYXRhVGFibGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGgodGhpcykuZGF0YVRhYmxlKGEpLmFwaSgpfTtoLmVhY2gocCxmdW5jdGlvbihhLGIpe2guZm4uRGF0YVRhYmxlW2FdPWJ9KTtyZXR1cm4gaC5mbi5kYXRhVGFibGV9O1wiZnVuY3Rpb25cIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZGF0YXRhYmxlc1wiLFtcImpxdWVyeVwiXSxOKTpcIm9iamVjdFwiPT09dHlwZW9mIGV4cG9ydHM/TihyZXF1aXJlKFwianF1ZXJ5XCIpKTpqUXVlcnkmJiFqUXVlcnkuZm4uZGF0YVRhYmxlJiZOKGpRdWVyeSl9KSh3aW5kb3csXG5kb2N1bWVudCk7XG4iLCIvKiFcbiBUYWJsZVRvb2xzIDIuMi4zXG4gMjAwOS0yMDE0IFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlXG5cbiBaZXJvQ2xpcGJvYXJkIDEuMC40XG4gQXV0aG9yOiBKb3NlcGggSHVja2FieSAtIE1JVCBsaWNlbnNlZFxuKi9cbnZhciBUYWJsZVRvb2xzO1xuKGZ1bmN0aW9uKG4sayxxKXt2YXIgcD1mdW5jdGlvbihtLHApe3ZhciBnPXt2ZXJzaW9uOlwiMS4wLjQtVGFibGVUb29sczJcIixjbGllbnRzOnt9LG1vdmllUGF0aDpcIlwiLG5leHRJZDoxLCQ6ZnVuY3Rpb24oYSl7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPWsuZ2V0RWxlbWVudEJ5SWQoYSkpO2EuYWRkQ2xhc3N8fChhLmhpZGU9ZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9LGEuc2hvdz1mdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT1cIlwifSxhLmFkZENsYXNzPWZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQ2xhc3MoYSk7dGhpcy5jbGFzc05hbWUrPVwiIFwiK2F9LGEucmVtb3ZlQ2xhc3M9ZnVuY3Rpb24oYSl7dGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWUucmVwbGFjZShSZWdFeHAoXCJcXFxccypcIithK1wiXFxcXHMqXCIpLFwiIFwiKS5yZXBsYWNlKC9eXFxzKy8sXCJcIikucmVwbGFjZSgvXFxzKyQvLFwiXCIpfSxhLmhhc0NsYXNzPWZ1bmN0aW9uKGEpe3JldHVybiEhdGhpcy5jbGFzc05hbWUubWF0Y2goUmVnRXhwKFwiXFxcXHMqXCIrYStcblwiXFxcXHMqXCIpKX0pO3JldHVybiBhfSxzZXRNb3ZpZVBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5tb3ZpZVBhdGg9YX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSxiLGMpeyhhPXRoaXMuY2xpZW50c1thXSkmJmEucmVjZWl2ZUV2ZW50KGIsYyl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5jbGllbnRzW2FdPWJ9LGdldERPTU9iamVjdFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXtsZWZ0OjAsdG9wOjAsd2lkdGg6YS53aWR0aD9hLndpZHRoOmEub2Zmc2V0V2lkdGgsaGVpZ2h0OmEuaGVpZ2h0P2EuaGVpZ2h0OmEub2Zmc2V0SGVpZ2h0fTtcIlwiIT09YS5zdHlsZS53aWR0aCYmKGIud2lkdGg9YS5zdHlsZS53aWR0aC5yZXBsYWNlKFwicHhcIixcIlwiKSk7XCJcIiE9PWEuc3R5bGUuaGVpZ2h0JiYoYi5oZWlnaHQ9YS5zdHlsZS5oZWlnaHQucmVwbGFjZShcInB4XCIsXCJcIikpO2Zvcig7YTspYi5sZWZ0Kz1hLm9mZnNldExlZnQsYi50b3ArPWEub2Zmc2V0VG9wLGE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGJ9LFxuQ2xpZW50OmZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlcnM9e307dGhpcy5pZD1nLm5leHRJZCsrO3RoaXMubW92aWVJZD1cIlplcm9DbGlwYm9hcmRfVGFibGVUb29sc01vdmllX1wiK3RoaXMuaWQ7Zy5yZWdpc3Rlcih0aGlzLmlkLHRoaXMpO2EmJnRoaXMuZ2x1ZShhKX19O2cuQ2xpZW50LnByb3RvdHlwZT17aWQ6MCxyZWFkeTohMSxtb3ZpZTpudWxsLGNsaXBUZXh0OlwiXCIsZmlsZU5hbWU6XCJcIixhY3Rpb246XCJjb3B5XCIsaGFuZEN1cnNvckVuYWJsZWQ6ITAsY3NzRWZmZWN0czohMCxoYW5kbGVyczpudWxsLHNpemVkOiExLGdsdWU6ZnVuY3Rpb24oYSxiKXt0aGlzLmRvbUVsZW1lbnQ9Zy4kKGEpO3ZhciBjPTk5O3RoaXMuZG9tRWxlbWVudC5zdHlsZS56SW5kZXgmJihjPXBhcnNlSW50KHRoaXMuZG9tRWxlbWVudC5zdHlsZS56SW5kZXgsMTApKzEpO3ZhciBkPWcuZ2V0RE9NT2JqZWN0UG9zaXRpb24odGhpcy5kb21FbGVtZW50KTt0aGlzLmRpdj1rLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dmFyIGY9XG50aGlzLmRpdi5zdHlsZTtmLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjtmLmxlZnQ9XCIwcHhcIjtmLnRvcD1cIjBweFwiO2Yud2lkdGg9ZC53aWR0aCtcInB4XCI7Zi5oZWlnaHQ9ZC5oZWlnaHQrXCJweFwiO2YuekluZGV4PWM7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGImJlwiXCIhPT1iJiYodGhpcy5kaXYudGl0bGU9Yik7MCE9PWQud2lkdGgmJjAhPT1kLmhlaWdodCYmKHRoaXMuc2l6ZWQ9ITApO3RoaXMuZG9tRWxlbWVudCYmKHRoaXMuZG9tRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmRpdiksdGhpcy5kaXYuaW5uZXJIVE1MPXRoaXMuZ2V0SFRNTChkLndpZHRoLGQuaGVpZ2h0KS5yZXBsYWNlKC8mL2csXCImYW1wO1wiKSl9LHBvc2l0aW9uRWxlbWVudDpmdW5jdGlvbigpe3ZhciBhPWcuZ2V0RE9NT2JqZWN0UG9zaXRpb24odGhpcy5kb21FbGVtZW50KSxiPXRoaXMuZGl2LnN0eWxlO2IucG9zaXRpb249XCJhYnNvbHV0ZVwiO2Iud2lkdGg9YS53aWR0aCtcInB4XCI7Yi5oZWlnaHQ9YS5oZWlnaHQrXCJweFwiOzAhPT1hLndpZHRoJiZcbjAhPT1hLmhlaWdodCYmKHRoaXMuc2l6ZWQ9ITAsYj10aGlzLmRpdi5jaGlsZE5vZGVzWzBdLGIud2lkdGg9YS53aWR0aCxiLmhlaWdodD1hLmhlaWdodCl9LGdldEhUTUw6ZnVuY3Rpb24oYSxiKXt2YXIgYz1cIlwiLGQ9XCJpZD1cIit0aGlzLmlkK1wiJndpZHRoPVwiK2ErXCImaGVpZ2h0PVwiK2I7aWYobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvTVNJRS8pKXZhciBmPWxvY2F0aW9uLmhyZWYubWF0Y2goL15odHRwcy9pKT9cImh0dHBzOi8vXCI6XCJodHRwOi8vXCIsYz1jKygnPG9iamVjdCBjbGFzc2lkPVwiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwXCIgY29kZWJhc2U9XCInK2YrJ2Rvd25sb2FkLm1hY3JvbWVkaWEuY29tL3B1Yi9zaG9ja3dhdmUvY2Ficy9mbGFzaC9zd2ZsYXNoLmNhYiN2ZXJzaW9uPTEwLDAsMCwwXCIgd2lkdGg9XCInK2ErJ1wiIGhlaWdodD1cIicrYisnXCIgaWQ9XCInK3RoaXMubW92aWVJZCsnXCIgYWxpZ249XCJtaWRkbGVcIj48cGFyYW0gbmFtZT1cImFsbG93U2NyaXB0QWNjZXNzXCIgdmFsdWU9XCJhbHdheXNcIiAvPjxwYXJhbSBuYW1lPVwiYWxsb3dGdWxsU2NyZWVuXCIgdmFsdWU9XCJmYWxzZVwiIC8+PHBhcmFtIG5hbWU9XCJtb3ZpZVwiIHZhbHVlPVwiJytcbmcubW92aWVQYXRoKydcIiAvPjxwYXJhbSBuYW1lPVwibG9vcFwiIHZhbHVlPVwiZmFsc2VcIiAvPjxwYXJhbSBuYW1lPVwibWVudVwiIHZhbHVlPVwiZmFsc2VcIiAvPjxwYXJhbSBuYW1lPVwicXVhbGl0eVwiIHZhbHVlPVwiYmVzdFwiIC8+PHBhcmFtIG5hbWU9XCJiZ2NvbG9yXCIgdmFsdWU9XCIjZmZmZmZmXCIgLz48cGFyYW0gbmFtZT1cImZsYXNodmFyc1wiIHZhbHVlPVwiJytkKydcIi8+PHBhcmFtIG5hbWU9XCJ3bW9kZVwiIHZhbHVlPVwidHJhbnNwYXJlbnRcIi8+PC9vYmplY3Q+Jyk7ZWxzZSBjKz0nPGVtYmVkIGlkPVwiJyt0aGlzLm1vdmllSWQrJ1wiIHNyYz1cIicrZy5tb3ZpZVBhdGgrJ1wiIGxvb3A9XCJmYWxzZVwiIG1lbnU9XCJmYWxzZVwiIHF1YWxpdHk9XCJiZXN0XCIgYmdjb2xvcj1cIiNmZmZmZmZcIiB3aWR0aD1cIicrYSsnXCIgaGVpZ2h0PVwiJytiKydcIiBuYW1lPVwiJyt0aGlzLm1vdmllSWQrJ1wiIGFsaWduPVwibWlkZGxlXCIgYWxsb3dTY3JpcHRBY2Nlc3M9XCJhbHdheXNcIiBhbGxvd0Z1bGxTY3JlZW49XCJmYWxzZVwiIHR5cGU9XCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiIHBsdWdpbnNwYWdlPVwiaHR0cDovL3d3dy5tYWNyb21lZGlhLmNvbS9nby9nZXRmbGFzaHBsYXllclwiIGZsYXNodmFycz1cIicrXG5kKydcIiB3bW9kZT1cInRyYW5zcGFyZW50XCIgLz4nO3JldHVybiBjfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5sZWZ0PVwiLTIwMDBweFwiKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMucmVwb3NpdGlvbigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5kb21FbGVtZW50JiZ0aGlzLmRpdil7dGhpcy5oaWRlKCk7dGhpcy5kaXYuaW5uZXJIVE1MPVwiXCI7dmFyIGE9ay5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07dHJ5e2EucmVtb3ZlQ2hpbGQodGhpcy5kaXYpfWNhdGNoKGIpe310aGlzLmRpdj10aGlzLmRvbUVsZW1lbnQ9bnVsbH19LHJlcG9zaXRpb246ZnVuY3Rpb24oYSl7YSYmKCh0aGlzLmRvbUVsZW1lbnQ9Zy4kKGEpKXx8dGhpcy5oaWRlKCkpO2lmKHRoaXMuZG9tRWxlbWVudCYmdGhpcy5kaXYpe3ZhciBhPWcuZ2V0RE9NT2JqZWN0UG9zaXRpb24odGhpcy5kb21FbGVtZW50KSxiPXRoaXMuZGl2LnN0eWxlO2IubGVmdD1cIlwiK2EubGVmdCtcblwicHhcIjtiLnRvcD1cIlwiK2EudG9wK1wicHhcIn19LGNsZWFyVGV4dDpmdW5jdGlvbigpe3RoaXMuY2xpcFRleHQ9XCJcIjt0aGlzLnJlYWR5JiZ0aGlzLm1vdmllLmNsZWFyVGV4dCgpfSxhcHBlbmRUZXh0OmZ1bmN0aW9uKGEpe3RoaXMuY2xpcFRleHQrPWE7dGhpcy5yZWFkeSYmdGhpcy5tb3ZpZS5hcHBlbmRUZXh0KGEpfSxzZXRUZXh0OmZ1bmN0aW9uKGEpe3RoaXMuY2xpcFRleHQ9YTt0aGlzLnJlYWR5JiZ0aGlzLm1vdmllLnNldFRleHQoYSl9LHNldENoYXJTZXQ6ZnVuY3Rpb24oYSl7dGhpcy5jaGFyU2V0PWE7dGhpcy5yZWFkeSYmdGhpcy5tb3ZpZS5zZXRDaGFyU2V0KGEpfSxzZXRCb21JbmM6ZnVuY3Rpb24oYSl7dGhpcy5pbmNCb209YTt0aGlzLnJlYWR5JiZ0aGlzLm1vdmllLnNldEJvbUluYyhhKX0sc2V0RmlsZU5hbWU6ZnVuY3Rpb24oYSl7dGhpcy5maWxlTmFtZT1hO3RoaXMucmVhZHkmJnRoaXMubW92aWUuc2V0RmlsZU5hbWUoYSl9LHNldEFjdGlvbjpmdW5jdGlvbihhKXt0aGlzLmFjdGlvbj1cbmE7dGhpcy5yZWFkeSYmdGhpcy5tb3ZpZS5zZXRBY3Rpb24oYSl9LGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXthPWEudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15vbi8sXCJcIik7dGhpcy5oYW5kbGVyc1thXXx8KHRoaXMuaGFuZGxlcnNbYV09W10pO3RoaXMuaGFuZGxlcnNbYV0ucHVzaChiKX0sc2V0SGFuZEN1cnNvcjpmdW5jdGlvbihhKXt0aGlzLmhhbmRDdXJzb3JFbmFibGVkPWE7dGhpcy5yZWFkeSYmdGhpcy5tb3ZpZS5zZXRIYW5kQ3Vyc29yKGEpfSxzZXRDU1NFZmZlY3RzOmZ1bmN0aW9uKGEpe3RoaXMuY3NzRWZmZWN0cz0hIWF9LHJlY2VpdmVFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjLGE9YS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXm9uLyxcIlwiKTtzd2l0Y2goYSl7Y2FzZSBcImxvYWRcIjp0aGlzLm1vdmllPWsuZ2V0RWxlbWVudEJ5SWQodGhpcy5tb3ZpZUlkKTtpZighdGhpcy5tb3ZpZSl7Yz10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLnJlY2VpdmVFdmVudChcImxvYWRcIixcbm51bGwpfSwxKTtyZXR1cm59aWYoIXRoaXMucmVhZHkmJm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0ZpcmVmb3gvKSYmbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvV2luZG93cy8pKXtjPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2MucmVjZWl2ZUV2ZW50KFwibG9hZFwiLG51bGwpfSwxMDApO3RoaXMucmVhZHk9ITA7cmV0dXJufXRoaXMucmVhZHk9ITA7dGhpcy5tb3ZpZS5jbGVhclRleHQoKTt0aGlzLm1vdmllLmFwcGVuZFRleHQodGhpcy5jbGlwVGV4dCk7dGhpcy5tb3ZpZS5zZXRGaWxlTmFtZSh0aGlzLmZpbGVOYW1lKTt0aGlzLm1vdmllLnNldEFjdGlvbih0aGlzLmFjdGlvbik7dGhpcy5tb3ZpZS5zZXRDaGFyU2V0KHRoaXMuY2hhclNldCk7dGhpcy5tb3ZpZS5zZXRCb21JbmModGhpcy5pbmNCb20pO3RoaXMubW92aWUuc2V0SGFuZEN1cnNvcih0aGlzLmhhbmRDdXJzb3JFbmFibGVkKTticmVhaztjYXNlIFwibW91c2VvdmVyXCI6dGhpcy5kb21FbGVtZW50JiZ0aGlzLmNzc0VmZmVjdHMmJlxudGhpcy5yZWNvdmVyQWN0aXZlJiZ0aGlzLmRvbUVsZW1lbnQuYWRkQ2xhc3MoXCJhY3RpdmVcIik7YnJlYWs7Y2FzZSBcIm1vdXNlb3V0XCI6dGhpcy5kb21FbGVtZW50JiZ0aGlzLmNzc0VmZmVjdHMmJih0aGlzLnJlY292ZXJBY3RpdmU9ITEsdGhpcy5kb21FbGVtZW50Lmhhc0NsYXNzKFwiYWN0aXZlXCIpJiYodGhpcy5kb21FbGVtZW50LnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLHRoaXMucmVjb3ZlckFjdGl2ZT0hMCkpO2JyZWFrO2Nhc2UgXCJtb3VzZWRvd25cIjp0aGlzLmRvbUVsZW1lbnQmJnRoaXMuY3NzRWZmZWN0cyYmdGhpcy5kb21FbGVtZW50LmFkZENsYXNzKFwiYWN0aXZlXCIpO2JyZWFrO2Nhc2UgXCJtb3VzZXVwXCI6dGhpcy5kb21FbGVtZW50JiZ0aGlzLmNzc0VmZmVjdHMmJih0aGlzLmRvbUVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksdGhpcy5yZWNvdmVyQWN0aXZlPSExKX1pZih0aGlzLmhhbmRsZXJzW2FdKWZvcih2YXIgZD0wLGY9dGhpcy5oYW5kbGVyc1thXS5sZW5ndGg7ZDxcbmY7ZCsrKXt2YXIgZT10aGlzLmhhbmRsZXJzW2FdW2RdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpZSh0aGlzLGIpO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJjI9PWUubGVuZ3RoKWVbMF1bZVsxXV0odGhpcyxiKTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiBlKW5bZV0odGhpcyxiKX19fTtuLlplcm9DbGlwYm9hcmRfVGFibGVUb29scz1nO3ZhciBlPWpRdWVyeTtUYWJsZVRvb2xzPWZ1bmN0aW9uKGEsYil7IXRoaXMgaW5zdGFuY2VvZiBUYWJsZVRvb2xzJiZhbGVydChcIldhcm5pbmc6IFRhYmxlVG9vbHMgbXVzdCBiZSBpbml0aWFsaXNlZCB3aXRoIHRoZSBrZXl3b3JkICduZXcnXCIpO3RoaXMucz17dGhhdDp0aGlzLGR0OmUuZm4uZGF0YVRhYmxlLkFwaT8obmV3IGUuZm4uZGF0YVRhYmxlLkFwaShhKSkuc2V0dGluZ3MoKVswXTphLmZuU2V0dGluZ3MoKSxwcmludDp7c2F2ZVN0YXJ0Oi0xLHNhdmVMZW5ndGg6LTEsc2F2ZVNjcm9sbDotMSxmdW5jRW5kOmZ1bmN0aW9uKCl7fX0sXG5idXR0b25Db3VudGVyOjAsc2VsZWN0Ont0eXBlOlwiXCIsc2VsZWN0ZWQ6W10scHJlUm93U2VsZWN0Om51bGwscG9zdFNlbGVjdGVkOm51bGwscG9zdERlc2VsZWN0ZWQ6bnVsbCxhbGw6ITEsc2VsZWN0ZWRDbGFzczpcIlwifSxjdXN0b206e30sc3dmUGF0aDpcIlwiLGJ1dHRvblNldDpbXSxtYXN0ZXI6ITEsdGFnczp7fX07dGhpcy5kb209e2NvbnRhaW5lcjpudWxsLHRhYmxlOm51bGwscHJpbnQ6e2hpZGRlbjpbXSxtZXNzYWdlOm51bGx9LGNvbGxlY3Rpb246e2NvbGxlY3Rpb246bnVsbCxiYWNrZ3JvdW5kOm51bGx9fTt0aGlzLmNsYXNzZXM9ZS5leHRlbmQoITAse30sVGFibGVUb29scy5jbGFzc2VzKTt0aGlzLnMuZHQuYkpVSSYmZS5leHRlbmQoITAsdGhpcy5jbGFzc2VzLFRhYmxlVG9vbHMuY2xhc3Nlc190aGVtZXJvbGxlcik7dGhpcy5mblNldHRpbmdzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc307XCJ1bmRlZmluZWRcIj09dHlwZW9mIGImJihiPXt9KTtUYWJsZVRvb2xzLl9hSW5zdGFuY2VzLnB1c2godGhpcyk7XG50aGlzLl9mbkNvbnN0cnVjdChiKTtyZXR1cm4gdGhpc307VGFibGVUb29scy5wcm90b3R5cGU9e2ZuR2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz10aGlzLnMuZHQuYW9EYXRhLGQ9dGhpcy5zLmR0LmFpRGlzcGxheSxmO2lmKGEpe2E9MDtmb3IoZj1kLmxlbmd0aDthPGY7YSsrKWNbZFthXV0uX0RUVFRfc2VsZWN0ZWQmJmIucHVzaChjW2RbYV1dLm5Ucil9ZWxzZXthPTA7Zm9yKGY9Yy5sZW5ndGg7YTxmO2ErKyljW2FdLl9EVFRUX3NlbGVjdGVkJiZiLnB1c2goY1thXS5uVHIpfXJldHVybiBifSxmbkdldFNlbGVjdGVkRGF0YTpmdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5zLmR0LmFvRGF0YSxjLGQ7Yz0wO2ZvcihkPWIubGVuZ3RoO2M8ZDtjKyspYltjXS5fRFRUVF9zZWxlY3RlZCYmYS5wdXNoKHRoaXMucy5kdC5vSW5zdGFuY2UuZm5HZXREYXRhKGMpKTtyZXR1cm4gYX0sZm5HZXRTZWxlY3RlZEluZGV4ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz10aGlzLnMuZHQuYW9EYXRhLFxuZD10aGlzLnMuZHQuYWlEaXNwbGF5LGY7aWYoYSl7YT0wO2ZvcihmPWQubGVuZ3RoO2E8ZjthKyspY1tkW2FdXS5fRFRUVF9zZWxlY3RlZCYmYi5wdXNoKGRbYV0pfWVsc2V7YT0wO2ZvcihmPWMubGVuZ3RoO2E8ZjthKyspY1thXS5fRFRUVF9zZWxlY3RlZCYmYi5wdXNoKGEpfXJldHVybiBifSxmbklzU2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7YT10aGlzLnMuZHQub0luc3RhbmNlLmZuR2V0UG9zaXRpb24oYSk7cmV0dXJuITA9PT10aGlzLnMuZHQuYW9EYXRhW2FdLl9EVFRUX3NlbGVjdGVkPyEwOiExfSxmblNlbGVjdEFsbDpmdW5jdGlvbihhKXt0aGlzLl9mblJvd1NlbGVjdChhP3RoaXMucy5kdC5haURpc3BsYXk6dGhpcy5zLmR0LmFvRGF0YSl9LGZuU2VsZWN0Tm9uZTpmdW5jdGlvbihhKXt0aGlzLl9mblJvd0Rlc2VsZWN0KHRoaXMuZm5HZXRTZWxlY3RlZEluZGV4ZXMoYSkpfSxmblNlbGVjdDpmdW5jdGlvbihhKXtcInNpbmdsZVwiPT10aGlzLnMuc2VsZWN0LnR5cGUmJnRoaXMuZm5TZWxlY3ROb25lKCk7XG50aGlzLl9mblJvd1NlbGVjdChhKX0sZm5EZXNlbGVjdDpmdW5jdGlvbihhKXt0aGlzLl9mblJvd0Rlc2VsZWN0KGEpfSxmbkdldFRpdGxlOmZ1bmN0aW9uKGEpe3ZhciBiPVwiXCI7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuc1RpdGxlJiZcIlwiIT09YS5zVGl0bGU/Yj1hLnNUaXRsZTooYT1rLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGl0bGVcIiksMDxhLmxlbmd0aCYmKGI9YVswXS5pbm5lckhUTUwpKTtyZXR1cm4gND5cIsKhXCIudG9TdHJpbmcoKS5sZW5ndGg/Yi5yZXBsYWNlKC9bXmEtekEtWjAtOV9cXHUwMEExLVxcdUZGRkZcXC4sXFwtXyAhXFwoXFwpXS9nLFwiXCIpOmIucmVwbGFjZSgvW15hLXpBLVowLTlfXFwuLFxcLV8gIVxcKFxcKV0vZyxcIlwiKX0sZm5DYWxjQ29sUmF0aW9zOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucy5kdC5hb0NvbHVtbnMsYT10aGlzLl9mbkNvbHVtblRhcmdldHMoYS5tQ29sdW1ucyksYz1bXSxkPTAsZj0wLGUsaTtlPTA7Zm9yKGk9YS5sZW5ndGg7ZTxpO2UrKylhW2VdJiYoZD1iW2VdLm5UaC5vZmZzZXRXaWR0aCxcbmYrPWQsYy5wdXNoKGQpKTtlPTA7Zm9yKGk9Yy5sZW5ndGg7ZTxpO2UrKyljW2VdLz1mO3JldHVybiBjLmpvaW4oXCJcXHRcIil9LGZuR2V0VGFibGVEYXRhOmZ1bmN0aW9uKGEpe2lmKHRoaXMucy5kdClyZXR1cm4gdGhpcy5fZm5HZXREYXRhVGFibGVzRGF0YShhKX0sZm5TZXRUZXh0OmZ1bmN0aW9uKGEsYil7dGhpcy5fZm5GbGFzaFNldFRleHQoYSxiKX0sZm5SZXNpemVCdXR0b25zOmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGcuY2xpZW50cylpZihhKXt2YXIgYj1nLmNsaWVudHNbYV07XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZG9tRWxlbWVudCYmYi5kb21FbGVtZW50LnBhcmVudE5vZGUmJmIucG9zaXRpb25FbGVtZW50KCl9fSxmblJlc2l6ZVJlcXVpcmVkOmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGcuY2xpZW50cylpZihhKXt2YXIgYj1nLmNsaWVudHNbYV07aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZG9tRWxlbWVudCYmYi5kb21FbGVtZW50LnBhcmVudE5vZGU9PXRoaXMuZG9tLmNvbnRhaW5lciYmXG4hMT09PWIuc2l6ZWQpcmV0dXJuITB9cmV0dXJuITF9LGZuUHJpbnQ6ZnVuY3Rpb24oYSxiKXtiPT09cSYmKGI9e30pO2E9PT1xfHxhP3RoaXMuX2ZuUHJpbnRTdGFydChiKTp0aGlzLl9mblByaW50RW5kKCl9LGZuSW5mbzpmdW5jdGlvbihhLGIpe3ZhciBjPWUoXCI8ZGl2Lz5cIikuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLnByaW50LmluZm8pLmh0bWwoYSkuYXBwZW5kVG8oXCJib2R5XCIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmZhZGVPdXQoXCJub3JtYWxcIixmdW5jdGlvbigpe2MucmVtb3ZlKCl9KX0sYil9LGZuQ29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tLmNvbnRhaW5lcn0sX2ZuQ29uc3RydWN0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7dGhpcy5fZm5DdXN0b21pc2VTZXR0aW5ncyhhKTt0aGlzLmRvbS5jb250YWluZXI9ay5jcmVhdGVFbGVtZW50KHRoaXMucy50YWdzLmNvbnRhaW5lcik7dGhpcy5kb20uY29udGFpbmVyLmNsYXNzTmFtZT10aGlzLmNsYXNzZXMuY29udGFpbmVyO1xuXCJub25lXCIhPXRoaXMucy5zZWxlY3QudHlwZSYmdGhpcy5fZm5Sb3dTZWxlY3RDb25maWcoKTt0aGlzLl9mbkJ1dHRvbkRlZmluYXRpb25zKHRoaXMucy5idXR0b25TZXQsdGhpcy5kb20uY29udGFpbmVyKTt0aGlzLnMuZHQuYW9EZXN0cm95Q2FsbGJhY2sucHVzaCh7c05hbWU6XCJUYWJsZVRvb2xzXCIsZm46ZnVuY3Rpb24oKXtlKGIucy5kdC5uVEJvZHkpLm9mZihcImNsaWNrLkRUVFRfU2VsZWN0XCIsXCJ0clwiKTtlKGIuZG9tLmNvbnRhaW5lcikuZW1wdHkoKTt2YXIgYT1lLmluQXJyYXkoYixUYWJsZVRvb2xzLl9hSW5zdGFuY2VzKTstMSE9PWEmJlRhYmxlVG9vbHMuX2FJbnN0YW5jZXMuc3BsaWNlKGEsMSl9fSl9LF9mbkN1c3RvbWlzZVNldHRpbmdzOmZ1bmN0aW9uKGEpe1widW5kZWZpbmVkXCI9PXR5cGVvZiB0aGlzLnMuZHQuX1RhYmxlVG9vbHNJbml0JiYodGhpcy5zLm1hc3Rlcj0hMCx0aGlzLnMuZHQuX1RhYmxlVG9vbHNJbml0PSEwKTt0aGlzLmRvbS50YWJsZT10aGlzLnMuZHQublRhYmxlO1xudGhpcy5zLmN1c3RvbT1lLmV4dGVuZCh7fSxUYWJsZVRvb2xzLkRFRkFVTFRTLGEpO3RoaXMucy5zd2ZQYXRoPXRoaXMucy5jdXN0b20uc1N3ZlBhdGg7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGcmJihnLm1vdmllUGF0aD10aGlzLnMuc3dmUGF0aCk7dGhpcy5zLnNlbGVjdC50eXBlPXRoaXMucy5jdXN0b20uc1Jvd1NlbGVjdDt0aGlzLnMuc2VsZWN0LnByZVJvd1NlbGVjdD10aGlzLnMuY3VzdG9tLmZuUHJlUm93U2VsZWN0O3RoaXMucy5zZWxlY3QucG9zdFNlbGVjdGVkPXRoaXMucy5jdXN0b20uZm5Sb3dTZWxlY3RlZDt0aGlzLnMuc2VsZWN0LnBvc3REZXNlbGVjdGVkPXRoaXMucy5jdXN0b20uZm5Sb3dEZXNlbGVjdGVkO3RoaXMucy5jdXN0b20uc1NlbGVjdGVkQ2xhc3MmJih0aGlzLmNsYXNzZXMuc2VsZWN0LnJvdz10aGlzLnMuY3VzdG9tLnNTZWxlY3RlZENsYXNzKTt0aGlzLnMudGFncz10aGlzLnMuY3VzdG9tLm9UYWdzO3RoaXMucy5idXR0b25TZXQ9dGhpcy5zLmN1c3RvbS5hQnV0dG9uc30sXG5fZm5CdXR0b25EZWZpbmF0aW9uczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZj1hLmxlbmd0aDtkPGY7ZCsrKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYVtkXSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFRhYmxlVG9vbHMuQlVUVE9OU1thW2RdXSl7YWxlcnQoXCJUYWJsZVRvb2xzOiBXYXJuaW5nIC0gdW5rbm93biBidXR0b24gdHlwZTogXCIrYVtkXSk7Y29udGludWV9Yz1lLmV4dGVuZCh7fSxUYWJsZVRvb2xzLkJVVFRPTlNbYVtkXV0sITApfWVsc2V7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFRhYmxlVG9vbHMuQlVUVE9OU1thW2RdLnNFeHRlbmRzXSl7YWxlcnQoXCJUYWJsZVRvb2xzOiBXYXJuaW5nIC0gdW5rbm93biBidXR0b24gdHlwZTogXCIrYVtkXS5zRXh0ZW5kcyk7Y29udGludWV9Yz1lLmV4dGVuZCh7fSxUYWJsZVRvb2xzLkJVVFRPTlNbYVtkXS5zRXh0ZW5kc10sITApO2M9ZS5leHRlbmQoYyxhW2RdLCEwKX0oYz10aGlzLl9mbkNyZWF0ZUJ1dHRvbihjLGUoYikuaGFzQ2xhc3ModGhpcy5jbGFzc2VzLmNvbGxlY3Rpb24uY29udGFpbmVyKSkpJiZcbmIuYXBwZW5kQ2hpbGQoYyl9fSxfZm5DcmVhdGVCdXR0b246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9mbkJ1dHRvbkJhc2UoYSxiKTtpZihhLnNBY3Rpb24ubWF0Y2goL2ZsYXNoLykpe2lmKCF0aGlzLl9mbkhhc0ZsYXNoKCkpcmV0dXJuITE7dGhpcy5fZm5GbGFzaENvbmZpZyhjLGEpfWVsc2VcInRleHRcIj09YS5zQWN0aW9uP3RoaXMuX2ZuVGV4dENvbmZpZyhjLGEpOlwiZGl2XCI9PWEuc0FjdGlvbj90aGlzLl9mblRleHRDb25maWcoYyxhKTpcImNvbGxlY3Rpb25cIj09YS5zQWN0aW9uJiYodGhpcy5fZm5UZXh0Q29uZmlnKGMsYSksdGhpcy5fZm5Db2xsZWN0aW9uQ29uZmlnKGMsYSkpO2lmKC0xIT09dGhpcy5zLmR0LmlUYWJJbmRleCllKGMpLmF0dHIoXCJ0YWJpbmRleFwiLHRoaXMucy5kdC5pVGFiSW5kZXgpLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIsdGhpcy5zLmR0LnNUYWJsZUlkKS5vbihcImtleXVwLkRUVFRcIixmdW5jdGlvbihhKXsxMz09PWEua2V5Q29kZSYmKGEuc3RvcFByb3BhZ2F0aW9uKCksXG5lKHRoaXMpLnRyaWdnZXIoXCJjbGlja1wiKSl9KS5vbihcIm1vdXNlZG93bi5EVFRUXCIsZnVuY3Rpb24oYil7YS5zQWN0aW9uLm1hdGNoKC9mbGFzaC8pfHxiLnByZXZlbnREZWZhdWx0KCl9KTtyZXR1cm4gY30sX2ZuQnV0dG9uQmFzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtiPyhjPWEuc1RhZyYmXCJkZWZhdWx0XCIhPT1hLnNUYWc/YS5zVGFnOnRoaXMucy50YWdzLmNvbGxlY3Rpb24uYnV0dG9uLGQ9YS5zTGluZXJUYWcmJlwiZGVmYXVsdFwiIT09YS5zTGluZXJUYWc/YS5zTGluZXI6dGhpcy5zLnRhZ3MuY29sbGVjdGlvbi5saW5lcixmPXRoaXMuY2xhc3Nlcy5jb2xsZWN0aW9uLmJ1dHRvbnMubm9ybWFsKTooYz1hLnNUYWcmJlwiZGVmYXVsdFwiIT09YS5zVGFnP2Euc1RhZzp0aGlzLnMudGFncy5idXR0b24sZD1hLnNMaW5lclRhZyYmXCJkZWZhdWx0XCIhPT1hLnNMaW5lclRhZz9hLnNMaW5lcjp0aGlzLnMudGFncy5saW5lcixmPXRoaXMuY2xhc3Nlcy5idXR0b25zLm5vcm1hbCk7Yz1rLmNyZWF0ZUVsZW1lbnQoYyk7XG5kPWsuY3JlYXRlRWxlbWVudChkKTt2YXIgZT10aGlzLl9mbkdldE1hc3RlclNldHRpbmdzKCk7Yy5jbGFzc05hbWU9ZitcIiBcIithLnNCdXR0b25DbGFzcztjLnNldEF0dHJpYnV0ZShcImlkXCIsXCJUb29sVGFibGVzX1wiK3RoaXMucy5kdC5zSW5zdGFuY2UrXCJfXCIrZS5idXR0b25Db3VudGVyKTtjLmFwcGVuZENoaWxkKGQpO2QuaW5uZXJIVE1MPWEuc0J1dHRvblRleHQ7ZS5idXR0b25Db3VudGVyKys7cmV0dXJuIGN9LF9mbkdldE1hc3RlclNldHRpbmdzOmZ1bmN0aW9uKCl7aWYodGhpcy5zLm1hc3RlcilyZXR1cm4gdGhpcy5zO2Zvcih2YXIgYT1UYWJsZVRvb2xzLl9hSW5zdGFuY2VzLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspaWYodGhpcy5kb20udGFibGU9PWFbYl0ucy5kdC5uVGFibGUpcmV0dXJuIGFbYl0uc30sX2ZuQ29sbGVjdGlvbkNvbmZpZzpmdW5jdGlvbihhLGIpe3ZhciBjPWsuY3JlYXRlRWxlbWVudCh0aGlzLnMudGFncy5jb2xsZWN0aW9uLmNvbnRhaW5lcik7Yy5zdHlsZS5kaXNwbGF5PVxuXCJub25lXCI7Yy5jbGFzc05hbWU9dGhpcy5jbGFzc2VzLmNvbGxlY3Rpb24uY29udGFpbmVyO2IuX2NvbGxlY3Rpb249YztrLmJvZHkuYXBwZW5kQ2hpbGQoYyk7dGhpcy5fZm5CdXR0b25EZWZpbmF0aW9ucyhiLmFCdXR0b25zLGMpfSxfZm5Db2xsZWN0aW9uU2hvdzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1lKGEpLm9mZnNldCgpLGY9Yi5fY29sbGVjdGlvbixqPWQubGVmdCxkPWQudG9wK2UoYSkub3V0ZXJIZWlnaHQoKSxpPWUobikuaGVpZ2h0KCksaD1lKGspLmhlaWdodCgpLG89ZShuKS53aWR0aCgpLGc9ZShrKS53aWR0aCgpO2Yuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiO2Yuc3R5bGUubGVmdD1qK1wicHhcIjtmLnN0eWxlLnRvcD1kK1wicHhcIjtmLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO2UoZikuY3NzKFwib3BhY2l0eVwiLDApO3ZhciBsPWsuY3JlYXRlRWxlbWVudChcImRpdlwiKTtsLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjtsLnN0eWxlLmxlZnQ9XCIwcHhcIjtsLnN0eWxlLnRvcD1cblwiMHB4XCI7bC5zdHlsZS5oZWlnaHQ9KGk+aD9pOmgpK1wicHhcIjtsLnN0eWxlLndpZHRoPShvPmc/bzpnKStcInB4XCI7bC5jbGFzc05hbWU9dGhpcy5jbGFzc2VzLmNvbGxlY3Rpb24uYmFja2dyb3VuZDtlKGwpLmNzcyhcIm9wYWNpdHlcIiwwKTtrLmJvZHkuYXBwZW5kQ2hpbGQobCk7ay5ib2R5LmFwcGVuZENoaWxkKGYpO2k9ZShmKS5vdXRlcldpZHRoKCk7bz1lKGYpLm91dGVySGVpZ2h0KCk7aitpPmcmJihmLnN0eWxlLmxlZnQ9Zy1pK1wicHhcIik7ZCtvPmgmJihmLnN0eWxlLnRvcD1kLW8tZShhKS5vdXRlckhlaWdodCgpK1wicHhcIik7dGhpcy5kb20uY29sbGVjdGlvbi5jb2xsZWN0aW9uPWY7dGhpcy5kb20uY29sbGVjdGlvbi5iYWNrZ3JvdW5kPWw7c2V0VGltZW91dChmdW5jdGlvbigpe2UoZikuYW5pbWF0ZSh7b3BhY2l0eToxfSw1MDApO2UobCkuYW5pbWF0ZSh7b3BhY2l0eTowLjI1fSw1MDApfSwxMCk7dGhpcy5mblJlc2l6ZUJ1dHRvbnMoKTtlKGwpLmNsaWNrKGZ1bmN0aW9uKCl7Yy5fZm5Db2xsZWN0aW9uSGlkZS5jYWxsKGMsXG5udWxsLG51bGwpfSl9LF9mbkNvbGxlY3Rpb25IaWRlOmZ1bmN0aW9uKGEsYil7IShudWxsIT09YiYmXCJjb2xsZWN0aW9uXCI9PWIuc0V4dGVuZHMpJiZudWxsIT09dGhpcy5kb20uY29sbGVjdGlvbi5jb2xsZWN0aW9uJiYoZSh0aGlzLmRvbS5jb2xsZWN0aW9uLmNvbGxlY3Rpb24pLmFuaW1hdGUoe29wYWNpdHk6MH0sNTAwLGZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwifSksZSh0aGlzLmRvbS5jb2xsZWN0aW9uLmJhY2tncm91bmQpLmFuaW1hdGUoe29wYWNpdHk6MH0sNTAwLGZ1bmN0aW9uKCl7dGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpfSksdGhpcy5kb20uY29sbGVjdGlvbi5jb2xsZWN0aW9uPW51bGwsdGhpcy5kb20uY29sbGVjdGlvbi5iYWNrZ3JvdW5kPW51bGwpfSxfZm5Sb3dTZWxlY3RDb25maWc6ZnVuY3Rpb24oKXtpZih0aGlzLnMubWFzdGVyKXt2YXIgYT10aGlzLGI9dGhpcy5zLmR0O2UoYi5uVGFibGUpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5zZWxlY3QudGFibGUpO1xuXCJvc1wiPT09dGhpcy5zLnNlbGVjdC50eXBlJiYoZShiLm5UQm9keSkub24oXCJtb3VzZWRvd24uRFRUVF9TZWxlY3RcIixcInRyXCIsZnVuY3Rpb24oYSl7aWYoYS5zaGlmdEtleSllKGIublRCb2R5KS5jc3MoXCItbW96LXVzZXItc2VsZWN0XCIsXCJub25lXCIpLm9uZShcInNlbGVjdHN0YXJ0LkRUVFRfU2VsZWN0XCIsXCJ0clwiLGZ1bmN0aW9uKCl7cmV0dXJuITF9KX0pLGUoYi5uVEJvZHkpLm9uKFwibW91c2V1cC5EVFRUX1NlbGVjdFwiLFwidHJcIixmdW5jdGlvbigpe2UoYi5uVEJvZHkpLmNzcyhcIi1tb3otdXNlci1zZWxlY3RcIixcIlwiKX0pKTtlKGIublRCb2R5KS5vbihcImNsaWNrLkRUVFRfU2VsZWN0XCIsdGhpcy5zLmN1c3RvbS5zUm93U2VsZWN0b3IsZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09XCJ0clwiP3RoaXM6ZSh0aGlzKS5wYXJlbnRzKFwidHJcIilbMF0sZj1hLnMuc2VsZWN0LGo9YS5zLmR0Lm9JbnN0YW5jZS5mbkdldFBvc2l0aW9uKGQpO2lmKGQucGFyZW50Tm9kZT09XG5iLm5UQm9keSYmYi5vSW5zdGFuY2UuZm5HZXREYXRhKGQpIT09bnVsbCl7aWYoZi50eXBlPT1cIm9zXCIpaWYoYy5jdHJsS2V5fHxjLm1ldGFLZXkpYS5mbklzU2VsZWN0ZWQoZCk/YS5fZm5Sb3dEZXNlbGVjdChkLGMpOmEuX2ZuUm93U2VsZWN0KGQsYyk7ZWxzZSBpZihjLnNoaWZ0S2V5KXt2YXIgaT1hLnMuZHQuYWlEaXNwbGF5LnNsaWNlKCksaD1lLmluQXJyYXkoZi5sYXN0Um93LGkpLG89ZS5pbkFycmF5KGosaSk7aWYoYS5mbkdldFNlbGVjdGVkKCkubGVuZ3RoPT09MHx8aD09PS0xKWkuc3BsaWNlKGUuaW5BcnJheShqLGkpKzEsaS5sZW5ndGgpO2Vsc2V7aWYoaD5vKXZhciBnPW8sbz1oLGg9ZztpLnNwbGljZShvKzEsaS5sZW5ndGgpO2kuc3BsaWNlKDAsaCl9aWYoYS5mbklzU2VsZWN0ZWQoZCkpe2kuc3BsaWNlKGUuaW5BcnJheShqLGkpLDEpO2EuX2ZuUm93RGVzZWxlY3QoaSxjKX1lbHNlIGEuX2ZuUm93U2VsZWN0KGksYyl9ZWxzZSBpZihhLmZuSXNTZWxlY3RlZChkKSYmYS5mbkdldFNlbGVjdGVkKCkubGVuZ3RoPT09XG4xKWEuX2ZuUm93RGVzZWxlY3QoZCxjKTtlbHNle2EuZm5TZWxlY3ROb25lKCk7YS5fZm5Sb3dTZWxlY3QoZCxjKX1lbHNlIGlmKGEuZm5Jc1NlbGVjdGVkKGQpKWEuX2ZuUm93RGVzZWxlY3QoZCxjKTtlbHNlIGlmKGYudHlwZT09XCJzaW5nbGVcIil7YS5mblNlbGVjdE5vbmUoKTthLl9mblJvd1NlbGVjdChkLGMpfWVsc2UgZi50eXBlPT1cIm11bHRpXCImJmEuX2ZuUm93U2VsZWN0KGQsYyk7Zi5sYXN0Um93PWp9fSk7Yi5vQXBpLl9mbkNhbGxiYWNrUmVnKGIsXCJhb1Jvd0NyZWF0ZWRDYWxsYmFja1wiLGZ1bmN0aW9uKGMsZCxmKXtiLmFvRGF0YVtmXS5fRFRUVF9zZWxlY3RlZCYmZShjKS5hZGRDbGFzcyhhLmNsYXNzZXMuc2VsZWN0LnJvdyl9LFwiVGFibGVUb29scy1TZWxlY3RBbGxcIil9fSxfZm5Sb3dTZWxlY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9mblNlbGVjdERhdGEoYSksZD1bXSxmLGo7Zj0wO2ZvcihqPWMubGVuZ3RoO2Y8ajtmKyspY1tmXS5uVHImJmQucHVzaChjW2ZdLm5Ucik7XG5pZihudWxsPT09dGhpcy5zLnNlbGVjdC5wcmVSb3dTZWxlY3R8fHRoaXMucy5zZWxlY3QucHJlUm93U2VsZWN0LmNhbGwodGhpcyxiLGQsITApKXtmPTA7Zm9yKGo9Yy5sZW5ndGg7ZjxqO2YrKyljW2ZdLl9EVFRUX3NlbGVjdGVkPSEwLGNbZl0ublRyJiZlKGNbZl0ublRyKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuc2VsZWN0LnJvdyk7bnVsbCE9PXRoaXMucy5zZWxlY3QucG9zdFNlbGVjdGVkJiZ0aGlzLnMuc2VsZWN0LnBvc3RTZWxlY3RlZC5jYWxsKHRoaXMsZCk7VGFibGVUb29scy5fZm5FdmVudERpc3BhdGNoKHRoaXMsXCJzZWxlY3RcIixkLCEwKX19LF9mblJvd0Rlc2VsZWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fZm5TZWxlY3REYXRhKGEpLGQ9W10sZixqO2Y9MDtmb3Ioaj1jLmxlbmd0aDtmPGo7ZisrKWNbZl0ublRyJiZkLnB1c2goY1tmXS5uVHIpO2lmKG51bGw9PT10aGlzLnMuc2VsZWN0LnByZVJvd1NlbGVjdHx8dGhpcy5zLnNlbGVjdC5wcmVSb3dTZWxlY3QuY2FsbCh0aGlzLFxuYixkLCExKSl7Zj0wO2ZvcihqPWMubGVuZ3RoO2Y8ajtmKyspY1tmXS5fRFRUVF9zZWxlY3RlZD0hMSxjW2ZdLm5UciYmZShjW2ZdLm5UcikucmVtb3ZlQ2xhc3ModGhpcy5jbGFzc2VzLnNlbGVjdC5yb3cpO251bGwhPT10aGlzLnMuc2VsZWN0LnBvc3REZXNlbGVjdGVkJiZ0aGlzLnMuc2VsZWN0LnBvc3REZXNlbGVjdGVkLmNhbGwodGhpcyxkKTtUYWJsZVRvb2xzLl9mbkV2ZW50RGlzcGF0Y2godGhpcyxcInNlbGVjdFwiLGQsITEpfX0sX2ZuU2VsZWN0RGF0YTpmdW5jdGlvbihhKXt2YXIgYj1bXSxjLGQsZjtpZihhLm5vZGVOYW1lKWM9dGhpcy5zLmR0Lm9JbnN0YW5jZS5mbkdldFBvc2l0aW9uKGEpLGIucHVzaCh0aGlzLnMuZHQuYW9EYXRhW2NdKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgYS5sZW5ndGgpe2Q9MDtmb3IoZj1hLmxlbmd0aDtkPGY7ZCsrKWFbZF0ubm9kZU5hbWU/KGM9dGhpcy5zLmR0Lm9JbnN0YW5jZS5mbkdldFBvc2l0aW9uKGFbZF0pLGIucHVzaCh0aGlzLnMuZHQuYW9EYXRhW2NdKSk6XG5cIm51bWJlclwiPT09dHlwZW9mIGFbZF0/Yi5wdXNoKHRoaXMucy5kdC5hb0RhdGFbYVtkXV0pOmIucHVzaChhW2RdKX1lbHNlIGIucHVzaChhKTtyZXR1cm4gYn0sX2ZuVGV4dENvbmZpZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7bnVsbCE9PWIuZm5Jbml0JiZiLmZuSW5pdC5jYWxsKHRoaXMsYSxiKTtcIlwiIT09Yi5zVG9vbFRpcCYmKGEudGl0bGU9Yi5zVG9vbFRpcCk7ZShhKS5ob3ZlcihmdW5jdGlvbigpe2IuZm5Nb3VzZW92ZXIhPT1udWxsJiZiLmZuTW91c2VvdmVyLmNhbGwodGhpcyxhLGIsbnVsbCl9LGZ1bmN0aW9uKCl7Yi5mbk1vdXNlb3V0IT09bnVsbCYmYi5mbk1vdXNlb3V0LmNhbGwodGhpcyxhLGIsbnVsbCl9KTtudWxsIT09Yi5mblNlbGVjdCYmVGFibGVUb29scy5fZm5FdmVudExpc3Rlbih0aGlzLFwic2VsZWN0XCIsZnVuY3Rpb24oZCl7Yi5mblNlbGVjdC5jYWxsKGMsYSxiLGQpfSk7ZShhKS5jbGljayhmdW5jdGlvbihkKXtiLmZuQ2xpY2shPT1udWxsJiZiLmZuQ2xpY2suY2FsbChjLFxuYSxiLG51bGwsZCk7Yi5mbkNvbXBsZXRlIT09bnVsbCYmYi5mbkNvbXBsZXRlLmNhbGwoYyxhLGIsbnVsbCxudWxsKTtjLl9mbkNvbGxlY3Rpb25IaWRlKGEsYil9KX0sX2ZuSGFzRmxhc2g6ZnVuY3Rpb24oKXt0cnl7aWYobmV3IEFjdGl2ZVhPYmplY3QoXCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaFwiKSlyZXR1cm4hMH1jYXRjaChhKXtpZihuYXZpZ2F0b3IubWltZVR5cGVzJiZuYXZpZ2F0b3IubWltZVR5cGVzW1wiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIl0hPT1xJiZuYXZpZ2F0b3IubWltZVR5cGVzW1wiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIl0uZW5hYmxlZFBsdWdpbilyZXR1cm4hMH1yZXR1cm4hMX0sX2ZuRmxhc2hDb25maWc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9bmV3IGcuQ2xpZW50O251bGwhPT1iLmZuSW5pdCYmYi5mbkluaXQuY2FsbCh0aGlzLGEsYik7ZC5zZXRIYW5kQ3Vyc29yKCEwKTtcImZsYXNoX3NhdmVcIj09Yi5zQWN0aW9uP1xuKGQuc2V0QWN0aW9uKFwic2F2ZVwiKSxkLnNldENoYXJTZXQoXCJ1dGYxNmxlXCI9PWIuc0NoYXJTZXQ/XCJVVEYxNkxFXCI6XCJVVEY4XCIpLGQuc2V0Qm9tSW5jKGIuYkJvbUluYyksZC5zZXRGaWxlTmFtZShiLnNGaWxlTmFtZS5yZXBsYWNlKFwiKlwiLHRoaXMuZm5HZXRUaXRsZShiKSkpKTpcImZsYXNoX3BkZlwiPT1iLnNBY3Rpb24/KGQuc2V0QWN0aW9uKFwicGRmXCIpLGQuc2V0RmlsZU5hbWUoYi5zRmlsZU5hbWUucmVwbGFjZShcIipcIix0aGlzLmZuR2V0VGl0bGUoYikpKSk6ZC5zZXRBY3Rpb24oXCJjb3B5XCIpO2QuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlT3ZlclwiLGZ1bmN0aW9uKCl7Yi5mbk1vdXNlb3ZlciE9PW51bGwmJmIuZm5Nb3VzZW92ZXIuY2FsbChjLGEsYixkKX0pO2QuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlT3V0XCIsZnVuY3Rpb24oKXtiLmZuTW91c2VvdXQhPT1udWxsJiZiLmZuTW91c2VvdXQuY2FsbChjLGEsYixkKX0pO2QuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlRG93blwiLGZ1bmN0aW9uKCl7Yi5mbkNsaWNrIT09XG5udWxsJiZiLmZuQ2xpY2suY2FsbChjLGEsYixkKX0pO2QuYWRkRXZlbnRMaXN0ZW5lcihcImNvbXBsZXRlXCIsZnVuY3Rpb24oZixlKXtiLmZuQ29tcGxldGUhPT1udWxsJiZiLmZuQ29tcGxldGUuY2FsbChjLGEsYixkLGUpO2MuX2ZuQ29sbGVjdGlvbkhpZGUoYSxiKX0pO3RoaXMuX2ZuRmxhc2hHbHVlKGQsYSxiLnNUb29sVGlwKX0sX2ZuRmxhc2hHbHVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLGY9Yi5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtrLmdldEVsZW1lbnRCeUlkKGYpP2EuZ2x1ZShiLGMpOnNldFRpbWVvdXQoZnVuY3Rpb24oKXtkLl9mbkZsYXNoR2x1ZShhLGIsYyl9LDEwMCl9LF9mbkZsYXNoU2V0VGV4dDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX2ZuQ2h1bmtEYXRhKGIsODE5Mik7YS5jbGVhclRleHQoKTtmb3IodmFyIGQ9MCxmPWMubGVuZ3RoO2Q8ZjtkKyspYS5hcHBlbmRUZXh0KGNbZF0pfSxfZm5Db2x1bW5UYXJnZXRzOmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9XG50aGlzLnMuZHQsZCxmPWMuYW9Db2x1bW5zO2Q9Zi5sZW5ndGg7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYSl7YT1hLmNhbGwodGhpcyxjKTtmb3IoYz0wO2M8ZDtjKyspYi5wdXNoKC0xIT09ZS5pbkFycmF5KGMsYSk/ITA6ITEpfWVsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihjPTA7YzxkO2MrKyliLnB1c2goITEpO2M9MDtmb3IoZD1hLmxlbmd0aDtjPGQ7YysrKWJbYVtjXV09ITB9ZWxzZSBpZihcInZpc2libGVcIj09YSlmb3IoYz0wO2M8ZDtjKyspYi5wdXNoKGZbY10uYlZpc2libGU/ITA6ITEpO2Vsc2UgaWYoXCJoaWRkZW5cIj09YSlmb3IoYz0wO2M8ZDtjKyspYi5wdXNoKGZbY10uYlZpc2libGU/ITE6ITApO2Vsc2UgaWYoXCJzb3J0YWJsZVwiPT1hKWZvcihjPTA7YzxkO2MrKyliLnB1c2goZltjXS5iU29ydGFibGU/ITA6ITEpO2Vsc2UgZm9yKGM9MDtjPGQ7YysrKWIucHVzaCghMCk7cmV0dXJuIGJ9LF9mbk5ld2xpbmU6ZnVuY3Rpb24oYSl7cmV0dXJuXCJhdXRvXCI9PWEuc05ld0xpbmU/XG5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzLyk/XCJcXHJcXG5cIjpcIlxcblwiOmEuc05ld0xpbmV9LF9mbkdldERhdGFUYWJsZXNEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxmLGosaT1bXSxoPVwiXCIsZz10aGlzLnMuZHQsayxsPVJlZ0V4cChhLnNGaWVsZEJvdW5kYXJ5LFwiZ1wiKSxuPXRoaXMuX2ZuQ29sdW1uVGFyZ2V0cyhhLm1Db2x1bW5zKTtkPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmJTZWxlY3RlZE9ubHk/YS5iU2VsZWN0ZWRPbmx5OiExO2lmKGEuYkhlYWRlcil7aj1bXTtiPTA7Zm9yKGM9Zy5hb0NvbHVtbnMubGVuZ3RoO2I8YztiKyspbltiXSYmKGg9Zy5hb0NvbHVtbnNbYl0uc1RpdGxlLnJlcGxhY2UoL1xcbi9nLFwiIFwiKS5yZXBsYWNlKC88Lio/Pi9nLFwiXCIpLnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIiksaD10aGlzLl9mbkh0bWxEZWNvZGUoaCksai5wdXNoKHRoaXMuX2ZuQm91bmREYXRhKGgsYS5zRmllbGRCb3VuZGFyeSxsKSkpO2kucHVzaChqLmpvaW4oYS5zRmllbGRTZXBlcmF0b3IpKX1kPVxuITA7dmFyIG07Zj10aGlzLmZuR2V0U2VsZWN0ZWRJbmRleGVzKCk7bT0oZD1cIm5vbmVcIiE9PXRoaXMucy5zZWxlY3QudHlwZSYmZCYmMCE9PWYubGVuZ3RoKT9mOnAuQXBpPyhuZXcgcC5BcGkoZykpLnJvd3MoYS5vU2VsZWN0b3JPcHRzKS5pbmRleGVzKCkuZmxhdHRlbigpLnRvQXJyYXkoKTpnLm9JbnN0YW5jZS4kKFwidHJcIixhLm9TZWxlY3Rvck9wdHMpLm1hcChmdW5jdGlvbihhLGIpe3JldHVybiBnLm9JbnN0YW5jZS5mbkdldFBvc2l0aW9uKGIpfSkuZ2V0KCk7ZD0wO2ZvcihmPW0ubGVuZ3RoO2Q8ZjtkKyspe2s9Zy5hb0RhdGFbbVtkXV0ublRyO2o9W107Yj0wO2ZvcihjPWcuYW9Db2x1bW5zLmxlbmd0aDtiPGM7YisrKW5bYl0mJihoPWcub0FwaS5fZm5HZXRDZWxsRGF0YShnLG1bZF0sYixcImRpc3BsYXlcIiksYS5mbkNlbGxSZW5kZXI/aD1hLmZuQ2VsbFJlbmRlcihoLGIsayxtW2RdKStcIlwiOlwic3RyaW5nXCI9PXR5cGVvZiBoPyhoPWgucmVwbGFjZSgvXFxuL2csXCIgXCIpLGg9aC5yZXBsYWNlKC88aW1nLio/XFxzK2FsdFxccyo9XFxzKig/OlwiKFteXCJdKylcInwnKFteJ10rKSd8KFteXFxzPl0rKSkuKj8+L2dpLFxuXCIkMSQyJDNcIiksaD1oLnJlcGxhY2UoLzwuKj8+L2csXCJcIikpOmgrPVwiXCIsaD1oLnJlcGxhY2UoL15cXHMrLyxcIlwiKS5yZXBsYWNlKC9cXHMrJC8sXCJcIiksaD10aGlzLl9mbkh0bWxEZWNvZGUoaCksai5wdXNoKHRoaXMuX2ZuQm91bmREYXRhKGgsYS5zRmllbGRCb3VuZGFyeSxsKSkpO2kucHVzaChqLmpvaW4oYS5zRmllbGRTZXBlcmF0b3IpKTthLmJPcGVuUm93cyYmKGI9ZS5ncmVwKGcuYW9PcGVuUm93cyxmdW5jdGlvbihhKXtyZXR1cm4gYS5uUGFyZW50PT09a30pLDE9PT1iLmxlbmd0aCYmKGg9dGhpcy5fZm5Cb3VuZERhdGEoZShcInRkXCIsYlswXS5uVHIpLmh0bWwoKSxhLnNGaWVsZEJvdW5kYXJ5LGwpLGkucHVzaChoKSkpfWlmKGEuYkZvb3RlciYmbnVsbCE9PWcublRGb290KXtqPVtdO2I9MDtmb3IoYz1nLmFvQ29sdW1ucy5sZW5ndGg7YjxjO2IrKyluW2JdJiZudWxsIT09Zy5hb0NvbHVtbnNbYl0ublRmJiYoaD1nLmFvQ29sdW1uc1tiXS5uVGYuaW5uZXJIVE1MLnJlcGxhY2UoL1xcbi9nLFxuXCIgXCIpLnJlcGxhY2UoLzwuKj8+L2csXCJcIiksaD10aGlzLl9mbkh0bWxEZWNvZGUoaCksai5wdXNoKHRoaXMuX2ZuQm91bmREYXRhKGgsYS5zRmllbGRCb3VuZGFyeSxsKSkpO2kucHVzaChqLmpvaW4oYS5zRmllbGRTZXBlcmF0b3IpKX1yZXR1cm4gaS5qb2luKHRoaXMuX2ZuTmV3bGluZShhKSl9LF9mbkJvdW5kRGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuXCJcIj09PWI/YTpiK2EucmVwbGFjZShjLGIrYikrYn0sX2ZuQ2h1bmtEYXRhOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdLGQ9YS5sZW5ndGgsZj0wO2Y8ZDtmKz1iKWYrYjxkP2MucHVzaChhLnN1YnN0cmluZyhmLGYrYikpOmMucHVzaChhLnN1YnN0cmluZyhmLGQpKTtyZXR1cm4gY30sX2ZuSHRtbERlY29kZTpmdW5jdGlvbihhKXtpZigtMT09PWEuaW5kZXhPZihcIiZcIikpcmV0dXJuIGE7dmFyIGI9ay5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBhLnJlcGxhY2UoLyYoW15cXHNdKj8pOy9nLGZ1bmN0aW9uKGEsZCl7aWYoXCIjXCI9PT1cbmEuc3Vic3RyKDEsMSkpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoTnVtYmVyKGQuc3Vic3RyKDEpKSk7Yi5pbm5lckhUTUw9YTtyZXR1cm4gYi5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZX0pfSxfZm5QcmludFN0YXJ0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz10aGlzLnMuZHQ7dGhpcy5fZm5QcmludEhpZGVOb2RlcyhjLm5UYWJsZSk7dGhpcy5zLnByaW50LnNhdmVTdGFydD1jLl9pRGlzcGxheVN0YXJ0O3RoaXMucy5wcmludC5zYXZlTGVuZ3RoPWMuX2lEaXNwbGF5TGVuZ3RoO2EuYlNob3dBbGwmJihjLl9pRGlzcGxheVN0YXJ0PTAsYy5faURpc3BsYXlMZW5ndGg9LTEsYy5vQXBpLl9mbkNhbGN1bGF0ZUVuZCYmYy5vQXBpLl9mbkNhbGN1bGF0ZUVuZChjKSxjLm9BcGkuX2ZuRHJhdyhjKSk7aWYoXCJcIiE9PWMub1Njcm9sbC5zWHx8XCJcIiE9PWMub1Njcm9sbC5zWSl0aGlzLl9mblByaW50U2Nyb2xsU3RhcnQoYyksZSh0aGlzLnMuZHQublRhYmxlKS5iaW5kKFwiZHJhdy5EVFRUX1ByaW50XCIsXG5mdW5jdGlvbigpe2IuX2ZuUHJpbnRTY3JvbGxTdGFydChjKX0pO3ZhciBkPWMuYWFuRmVhdHVyZXMsZjtmb3IoZiBpbiBkKWlmKFwiaVwiIT1mJiZcInRcIiE9ZiYmMT09Zi5sZW5ndGgpZm9yKHZhciBnPTAsaT1kW2ZdLmxlbmd0aDtnPGk7ZysrKXRoaXMuZG9tLnByaW50LmhpZGRlbi5wdXNoKHtub2RlOmRbZl1bZ10sZGlzcGxheTpcImJsb2NrXCJ9KSxkW2ZdW2ddLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7ZShrLmJvZHkpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5wcmludC5ib2R5KTtcIlwiIT09YS5zSW5mbyYmdGhpcy5mbkluZm8oYS5zSW5mbywzRTMpO2Euc01lc3NhZ2UmJmUoXCI8ZGl2Lz5cIikuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLnByaW50Lm1lc3NhZ2UpLmh0bWwoYS5zTWVzc2FnZSkucHJlcGVuZFRvKFwiYm9keVwiKTt0aGlzLnMucHJpbnQuc2F2ZVNjcm9sbD1lKG4pLnNjcm9sbFRvcCgpO24uc2Nyb2xsVG8oMCwwKTtlKGspLmJpbmQoXCJrZXlkb3duLkRUVFRcIixmdW5jdGlvbihhKXtpZihhLmtleUNvZGU9PVxuMjcpe2EucHJldmVudERlZmF1bHQoKTtiLl9mblByaW50RW5kLmNhbGwoYixhKX19KX0sX2ZuUHJpbnRFbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnMuZHQsYj10aGlzLnMucHJpbnQ7dGhpcy5fZm5QcmludFNob3dOb2RlcygpO2lmKFwiXCIhPT1hLm9TY3JvbGwuc1h8fFwiXCIhPT1hLm9TY3JvbGwuc1kpZSh0aGlzLnMuZHQublRhYmxlKS51bmJpbmQoXCJkcmF3LkRUVFRfUHJpbnRcIiksdGhpcy5fZm5QcmludFNjcm9sbEVuZCgpO24uc2Nyb2xsVG8oMCxiLnNhdmVTY3JvbGwpO2UoXCJkaXYuXCIrdGhpcy5jbGFzc2VzLnByaW50Lm1lc3NhZ2UpLnJlbW92ZSgpO2Uoay5ib2R5KS5yZW1vdmVDbGFzcyhcIkRUVFRfUHJpbnRcIik7YS5faURpc3BsYXlTdGFydD1iLnNhdmVTdGFydDthLl9pRGlzcGxheUxlbmd0aD1iLnNhdmVMZW5ndGg7YS5vQXBpLl9mbkNhbGN1bGF0ZUVuZCYmYS5vQXBpLl9mbkNhbGN1bGF0ZUVuZChhKTthLm9BcGkuX2ZuRHJhdyhhKTtlKGspLnVuYmluZChcImtleWRvd24uRFRUVFwiKX0sXG5fZm5QcmludFNjcm9sbFN0YXJ0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zLmR0O2EublNjcm9sbEhlYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIilbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0YWJsZVwiKTt2YXIgYj1hLm5UYWJsZS5wYXJlbnROb2RlLGM7Yz1hLm5UYWJsZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRoZWFkXCIpOzA8Yy5sZW5ndGgmJmEublRhYmxlLnJlbW92ZUNoaWxkKGNbMF0pO251bGwhPT1hLm5URm9vdCYmKGM9YS5uVGFibGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Zm9vdFwiKSwwPGMubGVuZ3RoJiZhLm5UYWJsZS5yZW1vdmVDaGlsZChjWzBdKSk7Yz1hLm5USGVhZC5jbG9uZU5vZGUoITApO2EublRhYmxlLmluc2VydEJlZm9yZShjLGEublRhYmxlLmNoaWxkTm9kZXNbMF0pO251bGwhPT1hLm5URm9vdCYmKGM9YS5uVEZvb3QuY2xvbmVOb2RlKCEwKSxhLm5UYWJsZS5pbnNlcnRCZWZvcmUoYyxhLm5UYWJsZS5jaGlsZE5vZGVzWzFdKSk7XCJcIiE9PWEub1Njcm9sbC5zWCYmXG4oYS5uVGFibGUuc3R5bGUud2lkdGg9ZShhLm5UYWJsZSkub3V0ZXJXaWR0aCgpK1wicHhcIixiLnN0eWxlLndpZHRoPWUoYS5uVGFibGUpLm91dGVyV2lkdGgoKStcInB4XCIsYi5zdHlsZS5vdmVyZmxvdz1cInZpc2libGVcIik7XCJcIiE9PWEub1Njcm9sbC5zWSYmKGIuc3R5bGUuaGVpZ2h0PWUoYS5uVGFibGUpLm91dGVySGVpZ2h0KCkrXCJweFwiLGIuc3R5bGUub3ZlcmZsb3c9XCJ2aXNpYmxlXCIpfSxfZm5QcmludFNjcm9sbEVuZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucy5kdCxiPWEublRhYmxlLnBhcmVudE5vZGU7XCJcIiE9PWEub1Njcm9sbC5zWCYmKGIuc3R5bGUud2lkdGg9YS5vQXBpLl9mblN0cmluZ1RvQ3NzKGEub1Njcm9sbC5zWCksYi5zdHlsZS5vdmVyZmxvdz1cImF1dG9cIik7XCJcIiE9PWEub1Njcm9sbC5zWSYmKGIuc3R5bGUuaGVpZ2h0PWEub0FwaS5fZm5TdHJpbmdUb0NzcyhhLm9TY3JvbGwuc1kpLGIuc3R5bGUub3ZlcmZsb3c9XCJhdXRvXCIpfSxfZm5QcmludFNob3dOb2RlczpmdW5jdGlvbigpe2Zvcih2YXIgYT1cbnRoaXMuZG9tLnByaW50LmhpZGRlbixiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWFbYl0ubm9kZS5zdHlsZS5kaXNwbGF5PWFbYl0uZGlzcGxheTthLnNwbGljZSgwLGEubGVuZ3RoKX0sX2ZuUHJpbnRIaWRlTm9kZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZG9tLnByaW50LmhpZGRlbixjPWEucGFyZW50Tm9kZSxkPWMuY2hpbGROb2RlcyxmPTAsZz1kLmxlbmd0aDtmPGc7ZisrKWlmKGRbZl0hPWEmJjE9PWRbZl0ubm9kZVR5cGUpe3ZhciBpPWUoZFtmXSkuY3NzKFwiZGlzcGxheVwiKTtcIm5vbmVcIiE9aSYmKGIucHVzaCh7bm9kZTpkW2ZdLGRpc3BsYXk6aX0pLGRbZl0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIil9XCJCT0RZXCIhPWMubm9kZU5hbWUudG9VcHBlckNhc2UoKSYmdGhpcy5fZm5QcmludEhpZGVOb2RlcyhjKX19O1RhYmxlVG9vbHMuX2FJbnN0YW5jZXM9W107VGFibGVUb29scy5fYUxpc3RlbmVycz1bXTtUYWJsZVRvb2xzLmZuR2V0TWFzdGVycz1mdW5jdGlvbigpe2Zvcih2YXIgYT1cbltdLGI9MCxjPVRhYmxlVG9vbHMuX2FJbnN0YW5jZXMubGVuZ3RoO2I8YztiKyspVGFibGVUb29scy5fYUluc3RhbmNlc1tiXS5zLm1hc3RlciYmYS5wdXNoKFRhYmxlVG9vbHMuX2FJbnN0YW5jZXNbYl0pO3JldHVybiBhfTtUYWJsZVRvb2xzLmZuR2V0SW5zdGFuY2U9ZnVuY3Rpb24oYSl7XCJvYmplY3RcIiE9dHlwZW9mIGEmJihhPWsuZ2V0RWxlbWVudEJ5SWQoYSkpO2Zvcih2YXIgYj0wLGM9VGFibGVUb29scy5fYUluc3RhbmNlcy5sZW5ndGg7YjxjO2IrKylpZihUYWJsZVRvb2xzLl9hSW5zdGFuY2VzW2JdLnMubWFzdGVyJiZUYWJsZVRvb2xzLl9hSW5zdGFuY2VzW2JdLmRvbS50YWJsZT09YSlyZXR1cm4gVGFibGVUb29scy5fYUluc3RhbmNlc1tiXTtyZXR1cm4gbnVsbH07VGFibGVUb29scy5fZm5FdmVudExpc3Rlbj1mdW5jdGlvbihhLGIsYyl7VGFibGVUb29scy5fYUxpc3RlbmVycy5wdXNoKHt0aGF0OmEsdHlwZTpiLGZuOmN9KX07VGFibGVUb29scy5fZm5FdmVudERpc3BhdGNoPVxuZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBmPVRhYmxlVG9vbHMuX2FMaXN0ZW5lcnMsZT0wLGc9Zi5sZW5ndGg7ZTxnO2UrKylhLmRvbS50YWJsZT09ZltlXS50aGF0LmRvbS50YWJsZSYmZltlXS50eXBlPT1iJiZmW2VdLmZuKGMsZCl9O1RhYmxlVG9vbHMuYnV0dG9uQmFzZT17c0FjdGlvbjpcInRleHRcIixzVGFnOlwiZGVmYXVsdFwiLHNMaW5lclRhZzpcImRlZmF1bHRcIixzQnV0dG9uQ2xhc3M6XCJEVFRUX2J1dHRvbl90ZXh0XCIsc0J1dHRvblRleHQ6XCJCdXR0b24gdGV4dFwiLHNUaXRsZTpcIlwiLHNUb29sVGlwOlwiXCIsc0NoYXJTZXQ6XCJ1dGY4XCIsYkJvbUluYzohMSxzRmlsZU5hbWU6XCIqLmNzdlwiLHNGaWVsZEJvdW5kYXJ5OlwiXCIsc0ZpZWxkU2VwZXJhdG9yOlwiXFx0XCIsc05ld0xpbmU6XCJhdXRvXCIsbUNvbHVtbnM6XCJhbGxcIixiSGVhZGVyOiEwLGJGb290ZXI6ITAsYk9wZW5Sb3dzOiExLGJTZWxlY3RlZE9ubHk6ITEsb1NlbGVjdG9yT3B0czpxLGZuTW91c2VvdmVyOm51bGwsZm5Nb3VzZW91dDpudWxsLFxuZm5DbGljazpudWxsLGZuU2VsZWN0Om51bGwsZm5Db21wbGV0ZTpudWxsLGZuSW5pdDpudWxsLGZuQ2VsbFJlbmRlcjpudWxsfTtUYWJsZVRvb2xzLkJVVFRPTlM9e2NzdjplLmV4dGVuZCh7fSxUYWJsZVRvb2xzLmJ1dHRvbkJhc2Use3NBY3Rpb246XCJmbGFzaF9zYXZlXCIsc0J1dHRvbkNsYXNzOlwiRFRUVF9idXR0b25fY3N2XCIsc0J1dHRvblRleHQ6XCJDU1ZcIixzRmllbGRCb3VuZGFyeTonXCInLHNGaWVsZFNlcGVyYXRvcjpcIixcIixmbkNsaWNrOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmZuU2V0VGV4dChjLHRoaXMuZm5HZXRUYWJsZURhdGEoYikpfX0pLHhsczplLmV4dGVuZCh7fSxUYWJsZVRvb2xzLmJ1dHRvbkJhc2Use3NBY3Rpb246XCJmbGFzaF9zYXZlXCIsc0NoYXJTZXQ6XCJ1dGYxNmxlXCIsYkJvbUluYzohMCxzQnV0dG9uQ2xhc3M6XCJEVFRUX2J1dHRvbl94bHNcIixzQnV0dG9uVGV4dDpcIkV4Y2VsXCIsZm5DbGljazpmdW5jdGlvbihhLGIsYyl7dGhpcy5mblNldFRleHQoYyx0aGlzLmZuR2V0VGFibGVEYXRhKGIpKX19KSxcbmNvcHk6ZS5leHRlbmQoe30sVGFibGVUb29scy5idXR0b25CYXNlLHtzQWN0aW9uOlwiZmxhc2hfY29weVwiLHNCdXR0b25DbGFzczpcIkRUVFRfYnV0dG9uX2NvcHlcIixzQnV0dG9uVGV4dDpcIkNvcHlcIixmbkNsaWNrOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmZuU2V0VGV4dChjLHRoaXMuZm5HZXRUYWJsZURhdGEoYikpfSxmbkNvbXBsZXRlOmZ1bmN0aW9uKGEsYixjLGQpe2E9ZC5zcGxpdChcIlxcblwiKS5sZW5ndGg7Yi5iSGVhZGVyJiZhLS07bnVsbCE9PXRoaXMucy5kdC5uVEZvb3QmJmIuYkZvb3RlciYmYS0tO3RoaXMuZm5JbmZvKFwiPGg2PlRhYmxlIGNvcGllZDwvaDY+PHA+Q29waWVkIFwiK2ErXCIgcm93XCIrKDE9PWE/XCJcIjpcInNcIikrXCIgdG8gdGhlIGNsaXBib2FyZC48L3A+XCIsMTUwMCl9fSkscGRmOmUuZXh0ZW5kKHt9LFRhYmxlVG9vbHMuYnV0dG9uQmFzZSx7c0FjdGlvbjpcImZsYXNoX3BkZlwiLHNOZXdMaW5lOlwiXFxuXCIsc0ZpbGVOYW1lOlwiKi5wZGZcIixzQnV0dG9uQ2xhc3M6XCJEVFRUX2J1dHRvbl9wZGZcIixcbnNCdXR0b25UZXh0OlwiUERGXCIsc1BkZk9yaWVudGF0aW9uOlwicG9ydHJhaXRcIixzUGRmU2l6ZTpcIkE0XCIsc1BkZk1lc3NhZ2U6XCJcIixmbkNsaWNrOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmZuU2V0VGV4dChjLFwidGl0bGU6XCIrdGhpcy5mbkdldFRpdGxlKGIpK1wiXFxubWVzc2FnZTpcIitiLnNQZGZNZXNzYWdlK1wiXFxuY29sV2lkdGg6XCIrdGhpcy5mbkNhbGNDb2xSYXRpb3MoYikrXCJcXG5vcmllbnRhdGlvbjpcIitiLnNQZGZPcmllbnRhdGlvbitcIlxcbnNpemU6XCIrYi5zUGRmU2l6ZStcIlxcbi0tL1RhYmxlVG9vbHNPcHRzLS1cXG5cIit0aGlzLmZuR2V0VGFibGVEYXRhKGIpKX19KSxwcmludDplLmV4dGVuZCh7fSxUYWJsZVRvb2xzLmJ1dHRvbkJhc2Use3NJbmZvOlwiPGg2PlByaW50IHZpZXc8L2g2PjxwPlBsZWFzZSB1c2UgeW91ciBicm93c2VyJ3MgcHJpbnQgZnVuY3Rpb24gdG8gcHJpbnQgdGhpcyB0YWJsZS4gUHJlc3MgZXNjYXBlIHdoZW4gZmluaXNoZWQuPC9wPlwiLHNNZXNzYWdlOm51bGwsYlNob3dBbGw6ITAsXG5zVG9vbFRpcDpcIlZpZXcgcHJpbnQgdmlld1wiLHNCdXR0b25DbGFzczpcIkRUVFRfYnV0dG9uX3ByaW50XCIsc0J1dHRvblRleHQ6XCJQcmludFwiLGZuQ2xpY2s6ZnVuY3Rpb24oYSxiKXt0aGlzLmZuUHJpbnQoITAsYil9fSksdGV4dDplLmV4dGVuZCh7fSxUYWJsZVRvb2xzLmJ1dHRvbkJhc2UpLHNlbGVjdDplLmV4dGVuZCh7fSxUYWJsZVRvb2xzLmJ1dHRvbkJhc2Use3NCdXR0b25UZXh0OlwiU2VsZWN0IGJ1dHRvblwiLGZuU2VsZWN0OmZ1bmN0aW9uKGEpezAhPT10aGlzLmZuR2V0U2VsZWN0ZWQoKS5sZW5ndGg/ZShhKS5yZW1vdmVDbGFzcyh0aGlzLmNsYXNzZXMuYnV0dG9ucy5kaXNhYmxlZCk6ZShhKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuYnV0dG9ucy5kaXNhYmxlZCl9LGZuSW5pdDpmdW5jdGlvbihhKXtlKGEpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5idXR0b25zLmRpc2FibGVkKX19KSxzZWxlY3Rfc2luZ2xlOmUuZXh0ZW5kKHt9LFRhYmxlVG9vbHMuYnV0dG9uQmFzZSx7c0J1dHRvblRleHQ6XCJTZWxlY3QgYnV0dG9uXCIsXG5mblNlbGVjdDpmdW5jdGlvbihhKXsxPT10aGlzLmZuR2V0U2VsZWN0ZWQoKS5sZW5ndGg/ZShhKS5yZW1vdmVDbGFzcyh0aGlzLmNsYXNzZXMuYnV0dG9ucy5kaXNhYmxlZCk6ZShhKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuYnV0dG9ucy5kaXNhYmxlZCl9LGZuSW5pdDpmdW5jdGlvbihhKXtlKGEpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5idXR0b25zLmRpc2FibGVkKX19KSxzZWxlY3RfYWxsOmUuZXh0ZW5kKHt9LFRhYmxlVG9vbHMuYnV0dG9uQmFzZSx7c0J1dHRvblRleHQ6XCJTZWxlY3QgYWxsXCIsZm5DbGljazpmdW5jdGlvbigpe3RoaXMuZm5TZWxlY3RBbGwoKX0sZm5TZWxlY3Q6ZnVuY3Rpb24oYSl7dGhpcy5mbkdldFNlbGVjdGVkKCkubGVuZ3RoPT10aGlzLnMuZHQuZm5SZWNvcmRzRGlzcGxheSgpP2UoYSkuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmJ1dHRvbnMuZGlzYWJsZWQpOmUoYSkucmVtb3ZlQ2xhc3ModGhpcy5jbGFzc2VzLmJ1dHRvbnMuZGlzYWJsZWQpfX0pLHNlbGVjdF9ub25lOmUuZXh0ZW5kKHt9LFxuVGFibGVUb29scy5idXR0b25CYXNlLHtzQnV0dG9uVGV4dDpcIkRlc2VsZWN0IGFsbFwiLGZuQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmZuU2VsZWN0Tm9uZSgpfSxmblNlbGVjdDpmdW5jdGlvbihhKXswIT09dGhpcy5mbkdldFNlbGVjdGVkKCkubGVuZ3RoP2UoYSkucmVtb3ZlQ2xhc3ModGhpcy5jbGFzc2VzLmJ1dHRvbnMuZGlzYWJsZWQpOmUoYSkuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmJ1dHRvbnMuZGlzYWJsZWQpfSxmbkluaXQ6ZnVuY3Rpb24oYSl7ZShhKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuYnV0dG9ucy5kaXNhYmxlZCl9fSksYWpheDplLmV4dGVuZCh7fSxUYWJsZVRvb2xzLmJ1dHRvbkJhc2Use3NBamF4VXJsOlwiL3hoci5waHBcIixzQnV0dG9uVGV4dDpcIkFqYXggYnV0dG9uXCIsZm5DbGljazpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZm5HZXRUYWJsZURhdGEoYik7ZS5hamF4KHt1cmw6Yi5zQWpheFVybCxkYXRhOlt7bmFtZTpcInRhYmxlRGF0YVwiLHZhbHVlOmN9XSxzdWNjZXNzOmIuZm5BamF4Q29tcGxldGUsXG5kYXRhVHlwZTpcImpzb25cIix0eXBlOlwiUE9TVFwiLGNhY2hlOiExLGVycm9yOmZ1bmN0aW9uKCl7YWxlcnQoXCJFcnJvciBkZXRlY3RlZCB3aGVuIHNlbmRpbmcgdGFibGUgZGF0YSB0byBzZXJ2ZXJcIil9fSl9LGZuQWpheENvbXBsZXRlOmZ1bmN0aW9uKCl7YWxlcnQoXCJBamF4IGNvbXBsZXRlXCIpfX0pLGRpdjplLmV4dGVuZCh7fSxUYWJsZVRvb2xzLmJ1dHRvbkJhc2Use3NBY3Rpb246XCJkaXZcIixzVGFnOlwiZGl2XCIsc0J1dHRvbkNsYXNzOlwiRFRUVF9ub25idXR0b25cIixzQnV0dG9uVGV4dDpcIlRleHQgYnV0dG9uXCJ9KSxjb2xsZWN0aW9uOmUuZXh0ZW5kKHt9LFRhYmxlVG9vbHMuYnV0dG9uQmFzZSx7c0FjdGlvbjpcImNvbGxlY3Rpb25cIixzQnV0dG9uQ2xhc3M6XCJEVFRUX2J1dHRvbl9jb2xsZWN0aW9uXCIsc0J1dHRvblRleHQ6XCJDb2xsZWN0aW9uXCIsZm5DbGljazpmdW5jdGlvbihhLGIpe3RoaXMuX2ZuQ29sbGVjdGlvblNob3coYSxiKX19KX07VGFibGVUb29scy5idXR0b25zPVRhYmxlVG9vbHMuQlVUVE9OUztcblRhYmxlVG9vbHMuY2xhc3Nlcz17Y29udGFpbmVyOlwiRFRUVF9jb250YWluZXJcIixidXR0b25zOntub3JtYWw6XCJEVFRUX2J1dHRvblwiLGRpc2FibGVkOlwiRFRUVF9kaXNhYmxlZFwifSxjb2xsZWN0aW9uOntjb250YWluZXI6XCJEVFRUX2NvbGxlY3Rpb25cIixiYWNrZ3JvdW5kOlwiRFRUVF9jb2xsZWN0aW9uX2JhY2tncm91bmRcIixidXR0b25zOntub3JtYWw6XCJEVFRUX2J1dHRvblwiLGRpc2FibGVkOlwiRFRUVF9kaXNhYmxlZFwifX0sc2VsZWN0Ont0YWJsZTpcIkRUVFRfc2VsZWN0YWJsZVwiLHJvdzpcIkRUVFRfc2VsZWN0ZWQgc2VsZWN0ZWRcIn0scHJpbnQ6e2JvZHk6XCJEVFRUX1ByaW50XCIsaW5mbzpcIkRUVFRfcHJpbnRfaW5mb1wiLG1lc3NhZ2U6XCJEVFRUX1ByaW50TWVzc2FnZVwifX07VGFibGVUb29scy5jbGFzc2VzX3RoZW1lcm9sbGVyPXtjb250YWluZXI6XCJEVFRUX2NvbnRhaW5lciB1aS1idXR0b25zZXQgdWktYnV0dG9uc2V0LW11bHRpXCIsYnV0dG9uczp7bm9ybWFsOlwiRFRUVF9idXR0b24gdWktYnV0dG9uIHVpLXN0YXRlLWRlZmF1bHRcIn0sXG5jb2xsZWN0aW9uOntjb250YWluZXI6XCJEVFRUX2NvbGxlY3Rpb24gdWktYnV0dG9uc2V0IHVpLWJ1dHRvbnNldC1tdWx0aVwifX07VGFibGVUb29scy5ERUZBVUxUUz17c1N3ZlBhdGg6XCIuLi9zd2YvY29weV9jc3ZfeGxzX3BkZi5zd2ZcIixzUm93U2VsZWN0Olwibm9uZVwiLHNSb3dTZWxlY3RvcjpcInRyXCIsc1NlbGVjdGVkQ2xhc3M6bnVsbCxmblByZVJvd1NlbGVjdDpudWxsLGZuUm93U2VsZWN0ZWQ6bnVsbCxmblJvd0Rlc2VsZWN0ZWQ6bnVsbCxhQnV0dG9uczpbXCJjb3B5XCIsXCJjc3ZcIixcInhsc1wiLFwicGRmXCIsXCJwcmludFwiXSxvVGFnczp7Y29udGFpbmVyOlwiZGl2XCIsYnV0dG9uOlwiYVwiLGxpbmVyOlwic3BhblwiLGNvbGxlY3Rpb246e2NvbnRhaW5lcjpcImRpdlwiLGJ1dHRvbjpcImFcIixsaW5lcjpcInNwYW5cIn19fTtUYWJsZVRvb2xzLmRlZmF1bHRzPVRhYmxlVG9vbHMuREVGQVVMVFM7VGFibGVUb29scy5wcm90b3R5cGUuQ0xBU1M9XCJUYWJsZVRvb2xzXCI7VGFibGVUb29scy52ZXJzaW9uPVwiMi4yLjNcIjtcbmUuZm4uZGF0YVRhYmxlLkFwaSYmZS5mbi5kYXRhVGFibGUuQXBpLnJlZ2lzdGVyKFwidGFibGV0b29scygpXCIsZnVuY3Rpb24oKXt2YXIgYT1udWxsOzA8dGhpcy5jb250ZXh0Lmxlbmd0aCYmKGE9VGFibGVUb29scy5mbkdldEluc3RhbmNlKHRoaXMuY29udGV4dFswXS5uVGFibGUpKTtyZXR1cm4gYX0pO1wiZnVuY3Rpb25cIj09dHlwZW9mIGUuZm4uZGF0YVRhYmxlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmZuLmRhdGFUYWJsZUV4dC5mblZlcnNpb25DaGVjayYmZS5mbi5kYXRhVGFibGVFeHQuZm5WZXJzaW9uQ2hlY2soXCIxLjkuMFwiKT9lLmZuLmRhdGFUYWJsZUV4dC5hb0ZlYXR1cmVzLnB1c2goe2ZuSW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLm9Jbml0O3JldHVybihuZXcgVGFibGVUb29scyhhLm9JbnN0YW5jZSxiP2IudGFibGVUb29sc3x8Yi5vVGFibGVUb29sc3x8e306e30pKS5kb20uY29udGFpbmVyfSxjRmVhdHVyZTpcIlRcIixzRmVhdHVyZTpcIlRhYmxlVG9vbHNcIn0pOmFsZXJ0KFwiV2FybmluZzogVGFibGVUb29scyByZXF1aXJlcyBEYXRhVGFibGVzIDEuOS4wIG9yIG5ld2VyIC0gd3d3LmRhdGF0YWJsZXMubmV0L2Rvd25sb2FkXCIpO1xuZS5mbi5EYXRhVGFibGUuVGFibGVUb29scz1UYWJsZVRvb2xzO1wiZnVuY3Rpb25cIj09dHlwZW9mIG0uZm4uZGF0YVRhYmxlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBtLmZuLmRhdGFUYWJsZUV4dC5mblZlcnNpb25DaGVjayYmbS5mbi5kYXRhVGFibGVFeHQuZm5WZXJzaW9uQ2hlY2soXCIxLjkuMFwiKT9tLmZuLmRhdGFUYWJsZUV4dC5hb0ZlYXR1cmVzLnB1c2goe2ZuSW5pdDpmdW5jdGlvbihhKXthPW5ldyBUYWJsZVRvb2xzKGEub0luc3RhbmNlLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLm9Jbml0Lm9UYWJsZVRvb2xzP2Eub0luaXQub1RhYmxlVG9vbHM6e30pO1RhYmxlVG9vbHMuX2FJbnN0YW5jZXMucHVzaChhKTtyZXR1cm4gYS5kb20uY29udGFpbmVyfSxjRmVhdHVyZTpcIlRcIixzRmVhdHVyZTpcIlRhYmxlVG9vbHNcIn0pOmFsZXJ0KFwiV2FybmluZzogVGFibGVUb29scyAyIHJlcXVpcmVzIERhdGFUYWJsZXMgMS45LjAgb3IgbmV3ZXIgLSB3d3cuZGF0YXRhYmxlcy5uZXQvZG93bmxvYWRcIik7XG5tLmZuLmRhdGFUYWJsZS5UYWJsZVRvb2xzPVRhYmxlVG9vbHM7cmV0dXJuIG0uZm4uRGF0YVRhYmxlLlRhYmxlVG9vbHM9VGFibGVUb29sc307XCJmdW5jdGlvblwiPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCIsXCJkYXRhdGFibGVzXCJdLHApOlwib2JqZWN0XCI9PT10eXBlb2YgZXhwb3J0cz9wKHJlcXVpcmUoXCJqcXVlcnlcIikscmVxdWlyZShcImRhdGF0YWJsZXNcIikpOmpRdWVyeSYmIWpRdWVyeS5mbi5kYXRhVGFibGUuVGFibGVUb29scyYmcChqUXVlcnksalF1ZXJ5LmZuLmRhdGFUYWJsZSl9KSh3aW5kb3csZG9jdW1lbnQpO1xuIiwiZnVuY3Rpb24gJEpTQ29tcGlsZXJfYWxpYXNfVEhST1ckJCgkanNjb21wX3Rocm93X3BhcmFtJCQpe3Rocm93ICRqc2NvbXBfdGhyb3dfcGFyYW0kJDt9dmFyICRKU0NvbXBpbGVyX2FsaWFzX1ZPSUQkJD12b2lkIDAsJEpTQ29tcGlsZXJfYWxpYXNfVFJVRSQkPSEwLCRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJD1udWxsLCRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCQ9ITEsJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJCwkZ29vZyRnbG9iYWwkJD10aGlzO1xyXG5mdW5jdGlvbiAkZ29vZyR0eXBlT2YkJCgkdmFsdWUkJDM4JCQpe3ZhciAkcyQkMiQkPXR5cGVvZiAkdmFsdWUkJDM4JCQ7aWYoXCJvYmplY3RcIj09JHMkJDIkJClpZigkdmFsdWUkJDM4JCQpe2lmKCR2YWx1ZSQkMzgkJCBpbnN0YW5jZW9mIEFycmF5KXJldHVyblwiYXJyYXlcIjtpZigkdmFsdWUkJDM4JCQgaW5zdGFuY2VvZiBPYmplY3QpcmV0dXJuICRzJCQyJCQ7dmFyICRjbGFzc05hbWUkJDEkJD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoJHZhbHVlJCQzOCQkKTtpZihcIltvYmplY3QgV2luZG93XVwiPT0kY2xhc3NOYW1lJCQxJCQpcmV0dXJuXCJvYmplY3RcIjtpZihcIltvYmplY3QgQXJyYXldXCI9PSRjbGFzc05hbWUkJDEkJHx8XCJudW1iZXJcIj09dHlwZW9mICR2YWx1ZSQkMzgkJC5sZW5ndGgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiAkdmFsdWUkJDM4JCQuc3BsaWNlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgJHZhbHVlJCQzOCQkLnByb3BlcnR5SXNFbnVtZXJhYmxlJiYhJHZhbHVlJCQzOCQkLnByb3BlcnR5SXNFbnVtZXJhYmxlKFwic3BsaWNlXCIpKXJldHVyblwiYXJyYXlcIjtcclxuaWYoXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT0kY2xhc3NOYW1lJCQxJCR8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiAkdmFsdWUkJDM4JCQuY2FsbCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mICR2YWx1ZSQkMzgkJC5wcm9wZXJ0eUlzRW51bWVyYWJsZSYmISR2YWx1ZSQkMzgkJC5wcm9wZXJ0eUlzRW51bWVyYWJsZShcImNhbGxcIikpcmV0dXJuXCJmdW5jdGlvblwifWVsc2UgcmV0dXJuXCJudWxsXCI7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PSRzJCQyJCQmJlwidW5kZWZpbmVkXCI9PXR5cGVvZiAkdmFsdWUkJDM4JCQuY2FsbClyZXR1cm5cIm9iamVjdFwiO3JldHVybiAkcyQkMiQkfWZ1bmN0aW9uICRnb29nJGlzQXJyYXlMaWtlJCQoJHZhbCQkNCQkKXt2YXIgJHR5cGUkJDQ2JCQ9JGdvb2ckdHlwZU9mJCQoJHZhbCQkNCQkKTtyZXR1cm5cImFycmF5XCI9PSR0eXBlJCQ0NiQkfHxcIm9iamVjdFwiPT0kdHlwZSQkNDYkJCYmXCJudW1iZXJcIj09dHlwZW9mICR2YWwkJDQkJC5sZW5ndGh9XHJcbmZ1bmN0aW9uICRnb29nJGlzU3RyaW5nJCQoJHZhbCQkNiQkKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgJHZhbCQkNiQkfWZ1bmN0aW9uICRnb29nJGlzRnVuY3Rpb24kJCgkdmFsJCQ5JCQpe3JldHVyblwiZnVuY3Rpb25cIj09JGdvb2ckdHlwZU9mJCQoJHZhbCQkOSQkKX1mdW5jdGlvbiAkZ29vZyRpc09iamVjdCQkKCR0eXBlJCQ0N192YWwkJDEwJCQpeyR0eXBlJCQ0N192YWwkJDEwJCQ9JGdvb2ckdHlwZU9mJCQoJHR5cGUkJDQ3X3ZhbCQkMTAkJCk7cmV0dXJuXCJvYmplY3RcIj09JHR5cGUkJDQ3X3ZhbCQkMTAkJHx8XCJhcnJheVwiPT0kdHlwZSQkNDdfdmFsJCQxMCQkfHxcImZ1bmN0aW9uXCI9PSR0eXBlJCQ0N192YWwkJDEwJCR9dmFyICRnb29nJFVJRF9QUk9QRVJUWV8kJD1cImNsb3N1cmVfdWlkX1wiK01hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNiksJGdvb2ckdWlkQ291bnRlcl8kJD0wO1xyXG5mdW5jdGlvbiAkZ29vZyRiaW5kTmF0aXZlXyQkKCRmbiQkLCRzZWxmT2JqJCQxJCQsJHZhcl9hcmdzJCQxNyQkKXtyZXR1cm4gJGZuJCQuY2FsbC5hcHBseSgkZm4kJC5iaW5kLGFyZ3VtZW50cyl9XHJcbmZ1bmN0aW9uICRnb29nJGJpbmRKc18kJCgkZm4kJDEkJCwkc2VsZk9iaiQkMiQkLCR2YXJfYXJncyQkMTgkJCl7JGZuJCQxJCR8fCRKU0NvbXBpbGVyX2FsaWFzX1RIUk9XJCQoRXJyb3IoKSk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgJGJvdW5kQXJncyQkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgJG5ld0FyZ3MkJD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KCRuZXdBcmdzJCQsJGJvdW5kQXJncyQkKTtyZXR1cm4gJGZuJCQxJCQuYXBwbHkoJHNlbGZPYmokJDIkJCwkbmV3QXJncyQkKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRmbiQkMSQkLmFwcGx5KCRzZWxmT2JqJCQyJCQsYXJndW1lbnRzKX19XHJcbmZ1bmN0aW9uICRnb29nJGJpbmQkJCgkZm4kJDIkJCwkc2VsZk9iaiQkMyQkLCR2YXJfYXJncyQkMTkkJCl7JGdvb2ckYmluZCQkPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kJiYtMSE9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQudG9TdHJpbmcoKS5pbmRleE9mKFwibmF0aXZlIGNvZGVcIik/JGdvb2ckYmluZE5hdGl2ZV8kJDokZ29vZyRiaW5kSnNfJCQ7cmV0dXJuICRnb29nJGJpbmQkJC5hcHBseSgkSlNDb21waWxlcl9hbGlhc19OVUxMJCQsYXJndW1lbnRzKX1cclxuZnVuY3Rpb24gJGdvb2ckcGFydGlhbCQkKCRmbiQkMyQkLCR2YXJfYXJncyQkMjAkJCl7dmFyICRhcmdzJCQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciAkbmV3QXJncyQkMSQkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7JG5ld0FyZ3MkJDEkJC51bnNoaWZ0LmFwcGx5KCRuZXdBcmdzJCQxJCQsJGFyZ3MkJCk7cmV0dXJuICRmbiQkMyQkLmFwcGx5KHRoaXMsJG5ld0FyZ3MkJDEkJCl9fXZhciAkZ29vZyRub3ckJD1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9O1xyXG5mdW5jdGlvbiAkZ29vZyRpbmhlcml0cyQkKCRjaGlsZEN0b3IkJCwkcGFyZW50Q3RvciQkKXtmdW5jdGlvbiAkdGVtcEN0b3IkJCgpe30kdGVtcEN0b3IkJC5wcm90b3R5cGU9JHBhcmVudEN0b3IkJC5wcm90b3R5cGU7JGNoaWxkQ3RvciQkLiRzdXBlckNsYXNzXyQ9JHBhcmVudEN0b3IkJC5wcm90b3R5cGU7JGNoaWxkQ3RvciQkLnByb3RvdHlwZT1uZXcgJHRlbXBDdG9yJCR9O2Z1bmN0aW9uICRnb29nJHN0cmluZyRzdWJzJCQoJHN0ciQkMTIkJCwkdmFyX2FyZ3MkJDIyJCQpe2Zvcih2YXIgJGkkJDUkJD0xOyRpJCQ1JCQ8YXJndW1lbnRzLmxlbmd0aDskaSQkNSQkKyspdmFyICRyZXBsYWNlbWVudCQkPShcIlwiK2FyZ3VtZW50c1skaSQkNSQkXSkucmVwbGFjZSgvXFwkL2csXCIkJCQkXCIpLCRzdHIkJDEyJCQ9JHN0ciQkMTIkJC5yZXBsYWNlKC9cXCVzLywkcmVwbGFjZW1lbnQkJCk7cmV0dXJuICRzdHIkJDEyJCR9ZnVuY3Rpb24gJGdvb2ckc3RyaW5nJHRyaW0kJCgkc3RyJCQyNSQkKXtyZXR1cm4gJHN0ciQkMjUkJC5yZXBsYWNlKC9eW1xcc1xceGEwXSt8W1xcc1xceGEwXSskL2csXCJcIil9XHJcbmZ1bmN0aW9uICRnb29nJHN0cmluZyRodG1sRXNjYXBlJCQoJHN0ciQkMzEkJCl7aWYoISRnb29nJHN0cmluZyRhbGxSZV8kJC50ZXN0KCRzdHIkJDMxJCQpKXJldHVybiAkc3RyJCQzMSQkOy0xIT0kc3RyJCQzMSQkLmluZGV4T2YoXCImXCIpJiYoJHN0ciQkMzEkJD0kc3RyJCQzMSQkLnJlcGxhY2UoJGdvb2ckc3RyaW5nJGFtcGVyUmVfJCQsXCImYW1wO1wiKSk7LTEhPSRzdHIkJDMxJCQuaW5kZXhPZihcIjxcIikmJigkc3RyJCQzMSQkPSRzdHIkJDMxJCQucmVwbGFjZSgkZ29vZyRzdHJpbmckbHRSZV8kJCxcIiZsdDtcIikpOy0xIT0kc3RyJCQzMSQkLmluZGV4T2YoXCI+XCIpJiYoJHN0ciQkMzEkJD0kc3RyJCQzMSQkLnJlcGxhY2UoJGdvb2ckc3RyaW5nJGd0UmVfJCQsXCImZ3Q7XCIpKTstMSE9JHN0ciQkMzEkJC5pbmRleE9mKCdcIicpJiYoJHN0ciQkMzEkJD0kc3RyJCQzMSQkLnJlcGxhY2UoJGdvb2ckc3RyaW5nJHF1b3RSZV8kJCxcIiZxdW90O1wiKSk7cmV0dXJuICRzdHIkJDMxJCR9XHJcbnZhciAkZ29vZyRzdHJpbmckYW1wZXJSZV8kJD0vJi9nLCRnb29nJHN0cmluZyRsdFJlXyQkPS88L2csJGdvb2ckc3RyaW5nJGd0UmVfJCQ9Lz4vZywkZ29vZyRzdHJpbmckcXVvdFJlXyQkPS9cXFwiL2csJGdvb2ckc3RyaW5nJGFsbFJlXyQkPS9bJjw+XFxcIl0vLCRnb29nJHN0cmluZyR0b0NhbWVsQ2FzZUNhY2hlXyQkPXt9O2Z1bmN0aW9uICRnb29nJHN0cmluZyR0b0NhbWVsQ2FzZSQkKCRzdHIkJDQyJCQpe3JldHVybiAkZ29vZyRzdHJpbmckdG9DYW1lbENhc2VDYWNoZV8kJFskc3RyJCQ0MiQkXXx8KCRnb29nJHN0cmluZyR0b0NhbWVsQ2FzZUNhY2hlXyQkWyRzdHIkJDQyJCRdPShcIlwiKyRzdHIkJDQyJCQpLnJlcGxhY2UoL1xcLShbYS16XSkvZyxmdW5jdGlvbigkYWxsJCQsJG1hdGNoJCQpe3JldHVybiAkbWF0Y2gkJC50b1VwcGVyQ2FzZSgpfSkpfTt2YXIgJGdvb2ckdXNlckFnZW50JGRldGVjdGVkT3BlcmFfJCQsJGdvb2ckdXNlckFnZW50JGRldGVjdGVkSWVfJCQsJGdvb2ckdXNlckFnZW50JGRldGVjdGVkV2Via2l0XyQkLCRnb29nJHVzZXJBZ2VudCRkZXRlY3RlZEdlY2tvXyQkO2Z1bmN0aW9uICRnb29nJHVzZXJBZ2VudCRnZXRVc2VyQWdlbnRTdHJpbmckJCgpe3JldHVybiAkZ29vZyRnbG9iYWwkJC5uYXZpZ2F0b3I/JGdvb2ckZ2xvYmFsJCQubmF2aWdhdG9yLnVzZXJBZ2VudDokSlNDb21waWxlcl9hbGlhc19OVUxMJCR9JGdvb2ckdXNlckFnZW50JGRldGVjdGVkR2Vja29fJCQ9JGdvb2ckdXNlckFnZW50JGRldGVjdGVkV2Via2l0XyQkPSRnb29nJHVzZXJBZ2VudCRkZXRlY3RlZEllXyQkPSRnb29nJHVzZXJBZ2VudCRkZXRlY3RlZE9wZXJhXyQkPSRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCQ7dmFyICR1YSQkaW5saW5lXzkkJDtcclxuaWYoJHVhJCRpbmxpbmVfOSQkPSRnb29nJHVzZXJBZ2VudCRnZXRVc2VyQWdlbnRTdHJpbmckJCgpKXt2YXIgJG5hdmlnYXRvciQkaW5saW5lXzEwJCQ9JGdvb2ckZ2xvYmFsJCQubmF2aWdhdG9yOyRnb29nJHVzZXJBZ2VudCRkZXRlY3RlZE9wZXJhXyQkPTA9PSR1YSQkaW5saW5lXzkkJC5pbmRleE9mKFwiT3BlcmFcIik7JGdvb2ckdXNlckFnZW50JGRldGVjdGVkSWVfJCQ9ISRnb29nJHVzZXJBZ2VudCRkZXRlY3RlZE9wZXJhXyQkJiYtMSE9JHVhJCRpbmxpbmVfOSQkLmluZGV4T2YoXCJNU0lFXCIpOyRnb29nJHVzZXJBZ2VudCRkZXRlY3RlZFdlYmtpdF8kJD0hJGdvb2ckdXNlckFnZW50JGRldGVjdGVkT3BlcmFfJCQmJi0xIT0kdWEkJGlubGluZV85JCQuaW5kZXhPZihcIldlYktpdFwiKTskZ29vZyR1c2VyQWdlbnQkZGV0ZWN0ZWRHZWNrb18kJD0hJGdvb2ckdXNlckFnZW50JGRldGVjdGVkT3BlcmFfJCQmJiEkZ29vZyR1c2VyQWdlbnQkZGV0ZWN0ZWRXZWJraXRfJCQmJlwiR2Vja29cIj09XHJcbiRuYXZpZ2F0b3IkJGlubGluZV8xMCQkLnByb2R1Y3R9dmFyICRnb29nJHVzZXJBZ2VudCRPUEVSQSQkPSRnb29nJHVzZXJBZ2VudCRkZXRlY3RlZE9wZXJhXyQkLCRnb29nJHVzZXJBZ2VudCRJRSQkPSRnb29nJHVzZXJBZ2VudCRkZXRlY3RlZEllXyQkLCRnb29nJHVzZXJBZ2VudCRHRUNLTyQkPSRnb29nJHVzZXJBZ2VudCRkZXRlY3RlZEdlY2tvXyQkLCRnb29nJHVzZXJBZ2VudCRXRUJLSVQkJD0kZ29vZyR1c2VyQWdlbnQkZGV0ZWN0ZWRXZWJraXRfJCQsJG5hdmlnYXRvciQkaW5saW5lXzEyJCQ9JGdvb2ckZ2xvYmFsJCQubmF2aWdhdG9yLCRnb29nJHVzZXJBZ2VudCRNQUMkJD0tMSE9KCRuYXZpZ2F0b3IkJGlubGluZV8xMiQkJiYkbmF2aWdhdG9yJCRpbmxpbmVfMTIkJC5wbGF0Zm9ybXx8XCJcIikuaW5kZXhPZihcIk1hY1wiKSwkZ29vZyR1c2VyQWdlbnQkVkVSU0lPTiQkO1xyXG5hOnt2YXIgJHZlcnNpb24kJGlubGluZV8xNSQkPVwiXCIsJHJlJCRpbmxpbmVfMTYkJDtpZigkZ29vZyR1c2VyQWdlbnQkT1BFUkEkJCYmJGdvb2ckZ2xvYmFsJCQub3BlcmEpdmFyICRvcGVyYVZlcnNpb24kJGlubGluZV8xNyQkPSRnb29nJGdsb2JhbCQkLm9wZXJhLnZlcnNpb24sJHZlcnNpb24kJGlubGluZV8xNSQkPVwiZnVuY3Rpb25cIj09dHlwZW9mICRvcGVyYVZlcnNpb24kJGlubGluZV8xNyQkPyRvcGVyYVZlcnNpb24kJGlubGluZV8xNyQkKCk6JG9wZXJhVmVyc2lvbiQkaW5saW5lXzE3JCQ7ZWxzZSBpZigkZ29vZyR1c2VyQWdlbnQkR0VDS08kJD8kcmUkJGlubGluZV8xNiQkPS9ydlxcOihbXlxcKTtdKykoXFwpfDspLzokZ29vZyR1c2VyQWdlbnQkSUUkJD8kcmUkJGlubGluZV8xNiQkPS9NU0lFXFxzKyhbXlxcKTtdKykoXFwpfDspLzokZ29vZyR1c2VyQWdlbnQkV0VCS0lUJCQmJigkcmUkJGlubGluZV8xNiQkPS9XZWJLaXRcXC8oXFxTKykvKSwkcmUkJGlubGluZV8xNiQkKXZhciAkYXJyJCRpbmxpbmVfMTgkJD1cclxuJHJlJCRpbmxpbmVfMTYkJC5leGVjKCRnb29nJHVzZXJBZ2VudCRnZXRVc2VyQWdlbnRTdHJpbmckJCgpKSwkdmVyc2lvbiQkaW5saW5lXzE1JCQ9JGFyciQkaW5saW5lXzE4JCQ/JGFyciQkaW5saW5lXzE4JCRbMV06XCJcIjtpZigkZ29vZyR1c2VyQWdlbnQkSUUkJCl7dmFyICRkb2NNb2RlJCRpbmxpbmVfMTkkJCwkZG9jJCRpbmxpbmVfMTM3JCQ9JGdvb2ckZ2xvYmFsJCQuZG9jdW1lbnQ7JGRvY01vZGUkJGlubGluZV8xOSQkPSRkb2MkJGlubGluZV8xMzckJD8kZG9jJCRpbmxpbmVfMTM3JCQuZG9jdW1lbnRNb2RlOiRKU0NvbXBpbGVyX2FsaWFzX1ZPSUQkJDtpZigkZG9jTW9kZSQkaW5saW5lXzE5JCQ+cGFyc2VGbG9hdCgkdmVyc2lvbiQkaW5saW5lXzE1JCQpKXskZ29vZyR1c2VyQWdlbnQkVkVSU0lPTiQkPVwiXCIrJGRvY01vZGUkJGlubGluZV8xOSQkO2JyZWFrIGF9fSRnb29nJHVzZXJBZ2VudCRWRVJTSU9OJCQ9JHZlcnNpb24kJGlubGluZV8xNSQkfVxyXG52YXIgJGdvb2ckdXNlckFnZW50JGlzVmVyc2lvbkNhY2hlXyQkPXt9O1xyXG5mdW5jdGlvbiAkZ29vZyR1c2VyQWdlbnQkaXNWZXJzaW9uJCQoJHZlcnNpb24kJDgkJCl7dmFyICRKU0NvbXBpbGVyX3RlbXAkJDVfb3JkZXIkJGlubGluZV8yMyQkO2lmKCEoJEpTQ29tcGlsZXJfdGVtcCQkNV9vcmRlciQkaW5saW5lXzIzJCQ9JGdvb2ckdXNlckFnZW50JGlzVmVyc2lvbkNhY2hlXyQkWyR2ZXJzaW9uJCQ4JCRdKSl7JEpTQ29tcGlsZXJfdGVtcCQkNV9vcmRlciQkaW5saW5lXzIzJCQ9MDtmb3IodmFyICR2MVN1YnMkJGlubGluZV8yNCQkPSRnb29nJHN0cmluZyR0cmltJCQoXCJcIiskZ29vZyR1c2VyQWdlbnQkVkVSU0lPTiQkKS5zcGxpdChcIi5cIiksJHYyU3VicyQkaW5saW5lXzI1JCQ9JGdvb2ckc3RyaW5nJHRyaW0kJChcIlwiKyR2ZXJzaW9uJCQ4JCQpLnNwbGl0KFwiLlwiKSwkc3ViQ291bnQkJGlubGluZV8yNiQkPU1hdGgubWF4KCR2MVN1YnMkJGlubGluZV8yNCQkLmxlbmd0aCwkdjJTdWJzJCRpbmxpbmVfMjUkJC5sZW5ndGgpLCRzdWJJZHgkJGlubGluZV8yNyQkPVxyXG4wOzA9PSRKU0NvbXBpbGVyX3RlbXAkJDVfb3JkZXIkJGlubGluZV8yMyQkJiYkc3ViSWR4JCRpbmxpbmVfMjckJDwkc3ViQ291bnQkJGlubGluZV8yNiQkOyRzdWJJZHgkJGlubGluZV8yNyQkKyspe3ZhciAkdjFTdWIkJGlubGluZV8yOCQkPSR2MVN1YnMkJGlubGluZV8yNCQkWyRzdWJJZHgkJGlubGluZV8yNyQkXXx8XCJcIiwkdjJTdWIkJGlubGluZV8yOSQkPSR2MlN1YnMkJGlubGluZV8yNSQkWyRzdWJJZHgkJGlubGluZV8yNyQkXXx8XCJcIiwkdjFDb21wUGFyc2VyJCRpbmxpbmVfMzAkJD1SZWdFeHAoXCIoXFxcXGQqKShcXFxcRCopXCIsXCJnXCIpLCR2MkNvbXBQYXJzZXIkJGlubGluZV8zMSQkPVJlZ0V4cChcIihcXFxcZCopKFxcXFxEKilcIixcImdcIik7ZG97dmFyICR2MUNvbXAkJGlubGluZV8zMiQkPSR2MUNvbXBQYXJzZXIkJGlubGluZV8zMCQkLmV4ZWMoJHYxU3ViJCRpbmxpbmVfMjgkJCl8fFtcIlwiLFwiXCIsXCJcIl0sJHYyQ29tcCQkaW5saW5lXzMzJCQ9JHYyQ29tcFBhcnNlciQkaW5saW5lXzMxJCQuZXhlYygkdjJTdWIkJGlubGluZV8yOSQkKXx8XHJcbltcIlwiLFwiXCIsXCJcIl07aWYoMD09JHYxQ29tcCQkaW5saW5lXzMyJCRbMF0ubGVuZ3RoJiYwPT0kdjJDb21wJCRpbmxpbmVfMzMkJFswXS5sZW5ndGgpYnJlYWs7JEpTQ29tcGlsZXJfdGVtcCQkNV9vcmRlciQkaW5saW5lXzIzJCQ9KCgwPT0kdjFDb21wJCRpbmxpbmVfMzIkJFsxXS5sZW5ndGg/MDpwYXJzZUludCgkdjFDb21wJCRpbmxpbmVfMzIkJFsxXSwxMCkpPCgwPT0kdjJDb21wJCRpbmxpbmVfMzMkJFsxXS5sZW5ndGg/MDpwYXJzZUludCgkdjJDb21wJCRpbmxpbmVfMzMkJFsxXSwxMCkpPy0xOigwPT0kdjFDb21wJCRpbmxpbmVfMzIkJFsxXS5sZW5ndGg/MDpwYXJzZUludCgkdjFDb21wJCRpbmxpbmVfMzIkJFsxXSwxMCkpPigwPT0kdjJDb21wJCRpbmxpbmVfMzMkJFsxXS5sZW5ndGg/MDpwYXJzZUludCgkdjJDb21wJCRpbmxpbmVfMzMkJFsxXSwxMCkpPzE6MCl8fCgoMD09JHYxQ29tcCQkaW5saW5lXzMyJCRbMl0ubGVuZ3RoKTwoMD09JHYyQ29tcCQkaW5saW5lXzMzJCRbMl0ubGVuZ3RoKT9cclxuLTE6KDA9PSR2MUNvbXAkJGlubGluZV8zMiQkWzJdLmxlbmd0aCk+KDA9PSR2MkNvbXAkJGlubGluZV8zMyQkWzJdLmxlbmd0aCk/MTowKXx8KCR2MUNvbXAkJGlubGluZV8zMiQkWzJdPCR2MkNvbXAkJGlubGluZV8zMyQkWzJdPy0xOiR2MUNvbXAkJGlubGluZV8zMiQkWzJdPiR2MkNvbXAkJGlubGluZV8zMyQkWzJdPzE6MCl9d2hpbGUoMD09JEpTQ29tcGlsZXJfdGVtcCQkNV9vcmRlciQkaW5saW5lXzIzJCQpfSRKU0NvbXBpbGVyX3RlbXAkJDVfb3JkZXIkJGlubGluZV8yMyQkPSRnb29nJHVzZXJBZ2VudCRpc1ZlcnNpb25DYWNoZV8kJFskdmVyc2lvbiQkOCQkXT0wPD0kSlNDb21waWxlcl90ZW1wJCQ1X29yZGVyJCRpbmxpbmVfMjMkJH1yZXR1cm4gJEpTQ29tcGlsZXJfdGVtcCQkNV9vcmRlciQkaW5saW5lXzIzJCR9dmFyICRnb29nJHVzZXJBZ2VudCRpc0RvY3VtZW50TW9kZUNhY2hlXyQkPXt9O1xyXG5mdW5jdGlvbiAkZ29vZyR1c2VyQWdlbnQkaXNEb2N1bWVudE1vZGUkJCgpe3JldHVybiAkZ29vZyR1c2VyQWdlbnQkaXNEb2N1bWVudE1vZGVDYWNoZV8kJFs5XXx8KCRnb29nJHVzZXJBZ2VudCRpc0RvY3VtZW50TW9kZUNhY2hlXyQkWzldPSRnb29nJHVzZXJBZ2VudCRJRSQkJiZkb2N1bWVudC5kb2N1bWVudE1vZGUmJjk8PWRvY3VtZW50LmRvY3VtZW50TW9kZSl9O2Z1bmN0aW9uICRnb29nJG9iamVjdCRmb3JFYWNoJCQoJG9iaiQkMjEkJCwkZiQkKXtmb3IodmFyICRrZXkkJDE2JCQgaW4gJG9iaiQkMjEkJCkkZiQkLmNhbGwoJEpTQ29tcGlsZXJfYWxpYXNfVk9JRCQkLCRvYmokJDIxJCRbJGtleSQkMTYkJF0sJGtleSQkMTYkJCwkb2JqJCQyMSQkKX12YXIgJGdvb2ckb2JqZWN0JFBST1RPVFlQRV9GSUVMRFNfJCQ9XCJjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2ZcIi5zcGxpdChcIixcIik7XHJcbmZ1bmN0aW9uICRnb29nJG9iamVjdCRleHRlbmQkJCgkdGFyZ2V0JCQzNSQkLCR2YXJfYXJncyQkMjUkJCl7Zm9yKHZhciAka2V5JCQzOSQkLCRzb3VyY2UkJDIkJCwkaSQkMTYkJD0xOyRpJCQxNiQkPGFyZ3VtZW50cy5sZW5ndGg7JGkkJDE2JCQrKyl7JHNvdXJjZSQkMiQkPWFyZ3VtZW50c1skaSQkMTYkJF07Zm9yKCRrZXkkJDM5JCQgaW4gJHNvdXJjZSQkMiQkKSR0YXJnZXQkJDM1JCRbJGtleSQkMzkkJF09JHNvdXJjZSQkMiQkWyRrZXkkJDM5JCRdO2Zvcih2YXIgJGokJDEkJD0wOyRqJCQxJCQ8JGdvb2ckb2JqZWN0JFBST1RPVFlQRV9GSUVMRFNfJCQubGVuZ3RoOyRqJCQxJCQrKykka2V5JCQzOSQkPSRnb29nJG9iamVjdCRQUk9UT1RZUEVfRklFTERTXyQkWyRqJCQxJCRdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCgkc291cmNlJCQyJCQsJGtleSQkMzkkJCkmJigkdGFyZ2V0JCQzNSQkWyRrZXkkJDM5JCRdPSRzb3VyY2UkJDIkJFska2V5JCQzOSQkXSl9fVxyXG47ZnVuY3Rpb24gJGdvb2ckZGVidWckRXJyb3IkJCgkb3B0X21zZyQkKXt0aGlzLnN0YWNrPUVycm9yKCkuc3RhY2t8fFwiXCI7aWYoJG9wdF9tc2ckJCl0aGlzLm1lc3NhZ2U9XCJcIiskb3B0X21zZyQkfSRnb29nJGluaGVyaXRzJCQoJGdvb2ckZGVidWckRXJyb3IkJCxFcnJvcik7JGdvb2ckZGVidWckRXJyb3IkJC5wcm90b3R5cGUubmFtZT1cIkN1c3RvbUVycm9yXCI7ZnVuY3Rpb24gJGdvb2ckYXNzZXJ0cyRBc3NlcnRpb25FcnJvciQkKCRtZXNzYWdlUGF0dGVybiQkLCRtZXNzYWdlQXJncyQkKXskbWVzc2FnZUFyZ3MkJC51bnNoaWZ0KCRtZXNzYWdlUGF0dGVybiQkKTskZ29vZyRkZWJ1ZyRFcnJvciQkLmNhbGwodGhpcywkZ29vZyRzdHJpbmckc3VicyQkLmFwcGx5KCRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJCwkbWVzc2FnZUFyZ3MkJCkpOyRtZXNzYWdlQXJncyQkLnNoaWZ0KCk7dGhpcy4kbWVzc2FnZVBhdHRlcm4kPSRtZXNzYWdlUGF0dGVybiQkfSRnb29nJGluaGVyaXRzJCQoJGdvb2ckYXNzZXJ0cyRBc3NlcnRpb25FcnJvciQkLCRnb29nJGRlYnVnJEVycm9yJCQpOyRnb29nJGFzc2VydHMkQXNzZXJ0aW9uRXJyb3IkJC5wcm90b3R5cGUubmFtZT1cIkFzc2VydGlvbkVycm9yXCI7XHJcbmZ1bmN0aW9uICRnb29nJGFzc2VydHMkYXNzZXJ0JCQoJGNvbmRpdGlvbiQkLCRvcHRfbWVzc2FnZSQkOCQkLCR2YXJfYXJncyQkMjkkJCl7aWYoISRjb25kaXRpb24kJCl7dmFyICRnaXZlbkFyZ3MkJGlubGluZV8zNiQkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSwkbWVzc2FnZSQkaW5saW5lXzM3JCQ9XCJBc3NlcnRpb24gZmFpbGVkXCI7aWYoJG9wdF9tZXNzYWdlJCQ4JCQpdmFyICRtZXNzYWdlJCRpbmxpbmVfMzckJD0kbWVzc2FnZSQkaW5saW5lXzM3JCQrKFwiOiBcIiskb3B0X21lc3NhZ2UkJDgkJCksJGFyZ3MkJGlubGluZV8zOCQkPSRnaXZlbkFyZ3MkJGlubGluZV8zNiQkOyRKU0NvbXBpbGVyX2FsaWFzX1RIUk9XJCQobmV3ICRnb29nJGFzc2VydHMkQXNzZXJ0aW9uRXJyb3IkJChcIlwiKyRtZXNzYWdlJCRpbmxpbmVfMzckJCwkYXJncyQkaW5saW5lXzM4JCR8fFtdKSl9fTt2YXIgJGdvb2ckYXJyYXkkQVJSQVlfUFJPVE9UWVBFXyQkPUFycmF5LnByb3RvdHlwZTtmdW5jdGlvbiAkZ29vZyRhcnJheSRpbmRleE9mJCQoJGFyciQkMTIkJCwkb2JqJCQ0OCQkKXtpZigkZ29vZyRpc1N0cmluZyQkKCRhcnIkJDEyJCQpKXJldHVybiEkZ29vZyRpc1N0cmluZyQkKCRvYmokJDQ4JCQpfHwxIT0kb2JqJCQ0OCQkLmxlbmd0aD8tMTokYXJyJCQxMiQkLmluZGV4T2YoJG9iaiQkNDgkJCwwKTtmb3IodmFyICRpJCQyMCQkPTA7JGkkJDIwJCQ8JGFyciQkMTIkJC5sZW5ndGg7JGkkJDIwJCQrKylpZigkaSQkMjAkJCBpbiAkYXJyJCQxMiQkJiYkYXJyJCQxMiQkWyRpJCQyMCQkXT09PSRvYmokJDQ4JCQpcmV0dXJuICRpJCQyMCQkO3JldHVybi0xfVxyXG5mdW5jdGlvbiAkZ29vZyRhcnJheSRmb3JFYWNoJCQoJGFyciQkMTYkJCwkZiQkOCQkLCRvcHRfb2JqJCQ3JCQpe2Zvcih2YXIgJGwkJDIkJD0kYXJyJCQxNiQkLmxlbmd0aCwkYXJyMiQkPSRnb29nJGlzU3RyaW5nJCQoJGFyciQkMTYkJCk/JGFyciQkMTYkJC5zcGxpdChcIlwiKTokYXJyJCQxNiQkLCRpJCQyMiQkPTA7JGkkJDIyJCQ8JGwkJDIkJDskaSQkMjIkJCsrKSRpJCQyMiQkIGluICRhcnIyJCQmJiRmJCQ4JCQuY2FsbCgkb3B0X29iaiQkNyQkLCRhcnIyJCRbJGkkJDIyJCRdLCRpJCQyMiQkLCRhcnIkJDE2JCQpfVxyXG5mdW5jdGlvbiAkZ29vZyRhcnJheSRtYXAkJCgkYXJyJCQyMSQkLCRmJCQxMyQkLCRvcHRfb2JqJCQxMiQkKXtmb3IodmFyICRsJCQ1JCQ9JGFyciQkMjEkJC5sZW5ndGgsJHJlcyQkNiQkPUFycmF5KCRsJCQ1JCQpLCRhcnIyJCQzJCQ9JGdvb2ckaXNTdHJpbmckJCgkYXJyJCQyMSQkKT8kYXJyJCQyMSQkLnNwbGl0KFwiXCIpOiRhcnIkJDIxJCQsJGkkJDI1JCQ9MDskaSQkMjUkJDwkbCQkNSQkOyRpJCQyNSQkKyspJGkkJDI1JCQgaW4gJGFycjIkJDMkJCYmKCRyZXMkJDYkJFskaSQkMjUkJF09JGYkJDEzJCQuY2FsbCgkb3B0X29iaiQkMTIkJCwkYXJyMiQkMyQkWyRpJCQyNSQkXSwkaSQkMjUkJCwkYXJyJCQyMSQkKSk7cmV0dXJuICRyZXMkJDYkJH1cclxuZnVuY3Rpb24gJGdvb2ckYXJyYXkkY29uY2F0JCQoJHZhcl9hcmdzJCQzOCQkKXtyZXR1cm4gJGdvb2ckYXJyYXkkQVJSQVlfUFJPVE9UWVBFXyQkLmNvbmNhdC5hcHBseSgkZ29vZyRhcnJheSRBUlJBWV9QUk9UT1RZUEVfJCQsYXJndW1lbnRzKX1mdW5jdGlvbiAkZ29vZyRhcnJheSRjbG9uZSQkKCRhcnIkJDQyJCQpe2lmKFwiYXJyYXlcIj09JGdvb2ckdHlwZU9mJCQoJGFyciQkNDIkJCkpcmV0dXJuICRnb29nJGFycmF5JGNvbmNhdCQkKCRhcnIkJDQyJCQpO2Zvcih2YXIgJHJ2JCQ3JCQ9W10sJGkkJDM3JCQ9MCwkbGVuJCQ9JGFyciQkNDIkJC5sZW5ndGg7JGkkJDM3JCQ8JGxlbiQkOyRpJCQzNyQkKyspJHJ2JCQ3JCRbJGkkJDM3JCRdPSRhcnIkJDQyJCRbJGkkJDM3JCRdO3JldHVybiAkcnYkJDckJH1cclxuZnVuY3Rpb24gJGdvb2ckYXJyYXkkc2xpY2UkJCgkYXJyJCQ0NCQkLCRzdGFydCQkNSQkLCRvcHRfZW5kJCQ1JCQpeyRnb29nJGFzc2VydHMkYXNzZXJ0JCQoJGFyciQkNDQkJC5sZW5ndGghPSRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJCk7cmV0dXJuIDI+PWFyZ3VtZW50cy5sZW5ndGg/JGdvb2ckYXJyYXkkQVJSQVlfUFJPVE9UWVBFXyQkLnNsaWNlLmNhbGwoJGFyciQkNDQkJCwkc3RhcnQkJDUkJCk6JGdvb2ckYXJyYXkkQVJSQVlfUFJPVE9UWVBFXyQkLnNsaWNlLmNhbGwoJGFyciQkNDQkJCwkc3RhcnQkJDUkJCwkb3B0X2VuZCQkNSQkKX07ZnVuY3Rpb24gJGdvb2ckZG9tJGNsYXNzZXMkYWRkJCQoJGVsZW1lbnQkJDEwJCQsJHZhcl9hcmdzJCQ0MyQkKXt2YXIgJGNsYXNzTmFtZSQkaW5saW5lXzE0MF9jbGFzc2VzJCQ7JGNsYXNzTmFtZSQkaW5saW5lXzE0MF9jbGFzc2VzJCQ9KCRjbGFzc05hbWUkJGlubGluZV8xNDBfY2xhc3NlcyQkPSRlbGVtZW50JCQxMCQkLmNsYXNzTmFtZSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mICRjbGFzc05hbWUkJGlubGluZV8xNDBfY2xhc3NlcyQkLnNwbGl0PyRjbGFzc05hbWUkJGlubGluZV8xNDBfY2xhc3NlcyQkLnNwbGl0KC9cXHMrLyk6W107dmFyICRhcmdzJCQzX2FyZ3MkJGlubGluZV80MSQkPSRnb29nJGFycmF5JHNsaWNlJCQoYXJndW1lbnRzLDEpLCRiJCQxOF9jbGFzc2VzJCRpbmxpbmVfNDAkJDskYiQkMThfY2xhc3NlcyQkaW5saW5lXzQwJCQ9JGNsYXNzTmFtZSQkaW5saW5lXzE0MF9jbGFzc2VzJCQ7Zm9yKHZhciAkcnYkJGlubGluZV80MiQkPTAsJGkkJGlubGluZV80MyQkPTA7JGkkJGlubGluZV80MyQkPFxyXG4kYXJncyQkM19hcmdzJCRpbmxpbmVfNDEkJC5sZW5ndGg7JGkkJGlubGluZV80MyQkKyspMDw9JGdvb2ckYXJyYXkkaW5kZXhPZiQkKCRiJCQxOF9jbGFzc2VzJCRpbmxpbmVfNDAkJCwkYXJncyQkM19hcmdzJCRpbmxpbmVfNDEkJFskaSQkaW5saW5lXzQzJCRdKXx8KCRiJCQxOF9jbGFzc2VzJCRpbmxpbmVfNDAkJC5wdXNoKCRhcmdzJCQzX2FyZ3MkJGlubGluZV80MSQkWyRpJCRpbmxpbmVfNDMkJF0pLCRydiQkaW5saW5lXzQyJCQrKyk7JGIkJDE4X2NsYXNzZXMkJGlubGluZV80MCQkPSRydiQkaW5saW5lXzQyJCQ9PSRhcmdzJCQzX2FyZ3MkJGlubGluZV80MSQkLmxlbmd0aDskZWxlbWVudCQkMTAkJC5jbGFzc05hbWU9JGNsYXNzTmFtZSQkaW5saW5lXzE0MF9jbGFzc2VzJCQuam9pbihcIiBcIik7cmV0dXJuICRiJCQxOF9jbGFzc2VzJCRpbmxpbmVfNDAkJH07dmFyICRnb29nJGRvbSRCcm93c2VyRmVhdHVyZSRDQU5fQUREX05BTUVfT1JfVFlQRV9BVFRSSUJVVEVTJCQ9ISRnb29nJHVzZXJBZ2VudCRJRSQkfHwkZ29vZyR1c2VyQWdlbnQkaXNEb2N1bWVudE1vZGUkJCgpOyEkZ29vZyR1c2VyQWdlbnQkR0VDS08kJCYmISRnb29nJHVzZXJBZ2VudCRJRSQkfHwkZ29vZyR1c2VyQWdlbnQkSUUkJCYmJGdvb2ckdXNlckFnZW50JGlzRG9jdW1lbnRNb2RlJCQoKXx8JGdvb2ckdXNlckFnZW50JEdFQ0tPJCQmJiRnb29nJHVzZXJBZ2VudCRpc1ZlcnNpb24kJChcIjEuOS4xXCIpO3ZhciAkZ29vZyRkb20kQnJvd3NlckZlYXR1cmUkQ0FOX1VTRV9JTk5FUl9URVhUJCQ9JGdvb2ckdXNlckFnZW50JElFJCQmJiEkZ29vZyR1c2VyQWdlbnQkaXNWZXJzaW9uJCQoXCI5XCIpO2Z1bmN0aW9uICRnb29nJGRvbSRnZXRFbGVtZW50c0J5VGFnTmFtZUFuZENsYXNzXyQkKCRjbGFzc05hbWUkJDEwX29wdF90YWckJDFfdGFnTmFtZSQkMSQkLCRvcHRfY2xhc3MkJDEkJCwkZWxzX29wdF9lbCQkM19wYXJlbnQkJDUkJCl7JGVsc19vcHRfZWwkJDNfcGFyZW50JCQ1JCQ9JGVsc19vcHRfZWwkJDNfcGFyZW50JCQ1JCR8fGRvY3VtZW50OyRjbGFzc05hbWUkJDEwX29wdF90YWckJDFfdGFnTmFtZSQkMSQkPSRjbGFzc05hbWUkJDEwX29wdF90YWckJDFfdGFnTmFtZSQkMSQkJiZcIipcIiE9JGNsYXNzTmFtZSQkMTBfb3B0X3RhZyQkMV90YWdOYW1lJCQxJCQ/JGNsYXNzTmFtZSQkMTBfb3B0X3RhZyQkMV90YWdOYW1lJCQxJCQudG9VcHBlckNhc2UoKTpcIlwiO2lmKCRlbHNfb3B0X2VsJCQzX3BhcmVudCQkNSQkLnF1ZXJ5U2VsZWN0b3JBbGwmJiRlbHNfb3B0X2VsJCQzX3BhcmVudCQkNSQkLnF1ZXJ5U2VsZWN0b3ImJighJGdvb2ckdXNlckFnZW50JFdFQktJVCQkfHxcIkNTUzFDb21wYXRcIj09XHJcbmRvY3VtZW50LmNvbXBhdE1vZGV8fCRnb29nJHVzZXJBZ2VudCRpc1ZlcnNpb24kJChcIjUyOFwiKSkmJigkY2xhc3NOYW1lJCQxMF9vcHRfdGFnJCQxX3RhZ05hbWUkJDEkJHx8JG9wdF9jbGFzcyQkMSQkKSlyZXR1cm4gJGVsc19vcHRfZWwkJDNfcGFyZW50JCQ1JCQucXVlcnlTZWxlY3RvckFsbCgkY2xhc3NOYW1lJCQxMF9vcHRfdGFnJCQxX3RhZ05hbWUkJDEkJCsoJG9wdF9jbGFzcyQkMSQkP1wiLlwiKyRvcHRfY2xhc3MkJDEkJDpcIlwiKSk7aWYoJG9wdF9jbGFzcyQkMSQkJiYkZWxzX29wdF9lbCQkM19wYXJlbnQkJDUkJC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXskZWxzX29wdF9lbCQkM19wYXJlbnQkJDUkJD0kZWxzX29wdF9lbCQkM19wYXJlbnQkJDUkJC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCRvcHRfY2xhc3MkJDEkJCk7aWYoJGNsYXNzTmFtZSQkMTBfb3B0X3RhZyQkMV90YWdOYW1lJCQxJCQpe2Zvcih2YXIgJGFycmF5TGlrZSQkPXt9LCRsZW4kJDEkJD0wLCRpJCQ1MSQkPVxyXG4wLCRlbCQkMSQkOyRlbCQkMSQkPSRlbHNfb3B0X2VsJCQzX3BhcmVudCQkNSQkWyRpJCQ1MSQkXTskaSQkNTEkJCsrKSRjbGFzc05hbWUkJDEwX29wdF90YWckJDFfdGFnTmFtZSQkMSQkPT0kZWwkJDEkJC5ub2RlTmFtZSYmKCRhcnJheUxpa2UkJFskbGVuJCQxJCQrK109JGVsJCQxJCQpOyRhcnJheUxpa2UkJC5sZW5ndGg9JGxlbiQkMSQkO3JldHVybiAkYXJyYXlMaWtlJCR9cmV0dXJuICRlbHNfb3B0X2VsJCQzX3BhcmVudCQkNSQkfSRlbHNfb3B0X2VsJCQzX3BhcmVudCQkNSQkPSRlbHNfb3B0X2VsJCQzX3BhcmVudCQkNSQkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCRjbGFzc05hbWUkJDEwX29wdF90YWckJDFfdGFnTmFtZSQkMSQkfHxcIipcIik7aWYoJG9wdF9jbGFzcyQkMSQkKXskYXJyYXlMaWtlJCQ9e307Zm9yKCRpJCQ1MSQkPSRsZW4kJDEkJD0wOyRlbCQkMSQkPSRlbHNfb3B0X2VsJCQzX3BhcmVudCQkNSQkWyRpJCQ1MSQkXTskaSQkNTEkJCsrKSRjbGFzc05hbWUkJDEwX29wdF90YWckJDFfdGFnTmFtZSQkMSQkPVxyXG4kZWwkJDEkJC5jbGFzc05hbWUsXCJmdW5jdGlvblwiPT10eXBlb2YgJGNsYXNzTmFtZSQkMTBfb3B0X3RhZyQkMV90YWdOYW1lJCQxJCQuc3BsaXQmJjA8PSRnb29nJGFycmF5JGluZGV4T2YkJCgkY2xhc3NOYW1lJCQxMF9vcHRfdGFnJCQxX3RhZ05hbWUkJDEkJC5zcGxpdCgvXFxzKy8pLCRvcHRfY2xhc3MkJDEkJCkmJigkYXJyYXlMaWtlJCRbJGxlbiQkMSQkKytdPSRlbCQkMSQkKTskYXJyYXlMaWtlJCQubGVuZ3RoPSRsZW4kJDEkJDtyZXR1cm4gJGFycmF5TGlrZSQkfXJldHVybiAkZWxzX29wdF9lbCQkM19wYXJlbnQkJDUkJH1cclxuZnVuY3Rpb24gJGdvb2ckZG9tJHNldFByb3BlcnRpZXMkJCgkZWxlbWVudCQkMTgkJCwkcHJvcGVydGllcyQkKXskZ29vZyRvYmplY3QkZm9yRWFjaCQkKCRwcm9wZXJ0aWVzJCQsZnVuY3Rpb24oJHZhbCQkMTkkJCwka2V5JCQ0MyQkKXtcInN0eWxlXCI9PSRrZXkkJDQzJCQ/JGVsZW1lbnQkJDE4JCQuc3R5bGUuY3NzVGV4dD0kdmFsJCQxOSQkOlwiY2xhc3NcIj09JGtleSQkNDMkJD8kZWxlbWVudCQkMTgkJC5jbGFzc05hbWU9JHZhbCQkMTkkJDpcImZvclwiPT0ka2V5JCQ0MyQkPyRlbGVtZW50JCQxOCQkLmh0bWxGb3I9JHZhbCQkMTkkJDoka2V5JCQ0MyQkIGluICRnb29nJGRvbSRESVJFQ1RfQVRUUklCVVRFX01BUF8kJD8kZWxlbWVudCQkMTgkJC5zZXRBdHRyaWJ1dGUoJGdvb2ckZG9tJERJUkVDVF9BVFRSSUJVVEVfTUFQXyQkWyRrZXkkJDQzJCRdLCR2YWwkJDE5JCQpOjA9PSRrZXkkJDQzJCQubGFzdEluZGV4T2YoXCJhcmlhLVwiLDApPyRlbGVtZW50JCQxOCQkLnNldEF0dHJpYnV0ZSgka2V5JCQ0MyQkLFxyXG4kdmFsJCQxOSQkKTokZWxlbWVudCQkMTgkJFska2V5JCQ0MyQkXT0kdmFsJCQxOSQkfSl9dmFyICRnb29nJGRvbSRESVJFQ1RfQVRUUklCVVRFX01BUF8kJD17Y2VsbHBhZGRpbmc6XCJjZWxsUGFkZGluZ1wiLGNlbGxzcGFjaW5nOlwiY2VsbFNwYWNpbmdcIixjb2xzcGFuOlwiY29sU3BhblwiLHJvd3NwYW46XCJyb3dTcGFuXCIsdmFsaWduOlwidkFsaWduXCIsaGVpZ2h0OlwiaGVpZ2h0XCIsd2lkdGg6XCJ3aWR0aFwiLHVzZW1hcDpcInVzZU1hcFwiLGZyYW1lYm9yZGVyOlwiZnJhbWVCb3JkZXJcIixtYXhsZW5ndGg6XCJtYXhMZW5ndGhcIix0eXBlOlwidHlwZVwifTtcclxuZnVuY3Rpb24gJGdvb2ckZG9tJGNyZWF0ZURvbSQkKCR0YWdOYW1lJCQyJCQsJG9wdF9hdHRyaWJ1dGVzJCQsJHZhcl9hcmdzJCQ0NSQkKXt2YXIgJGFyZ3MkJGlubGluZV80NiQkPWFyZ3VtZW50cywkZG9jJCRpbmxpbmVfNDckJD1kb2N1bWVudCwkZWxlbWVudCQkaW5saW5lXzUyX3RhZ05hbWUkJGlubGluZV80OF90YWdOYW1lQXJyJCRpbmxpbmVfNTAkJD0kYXJncyQkaW5saW5lXzQ2JCRbMF0sJGF0dHJpYnV0ZXMkJGlubGluZV80OSQkPSRhcmdzJCRpbmxpbmVfNDYkJFsxXTtpZighJGdvb2ckZG9tJEJyb3dzZXJGZWF0dXJlJENBTl9BRERfTkFNRV9PUl9UWVBFX0FUVFJJQlVURVMkJCYmJGF0dHJpYnV0ZXMkJGlubGluZV80OSQkJiYoJGF0dHJpYnV0ZXMkJGlubGluZV80OSQkLm5hbWV8fCRhdHRyaWJ1dGVzJCRpbmxpbmVfNDkkJC50eXBlKSl7JGVsZW1lbnQkJGlubGluZV81Ml90YWdOYW1lJCRpbmxpbmVfNDhfdGFnTmFtZUFyciQkaW5saW5lXzUwJCQ9W1wiPFwiLCRlbGVtZW50JCRpbmxpbmVfNTJfdGFnTmFtZSQkaW5saW5lXzQ4X3RhZ05hbWVBcnIkJGlubGluZV81MCQkXTtcclxuJGF0dHJpYnV0ZXMkJGlubGluZV80OSQkLm5hbWUmJiRlbGVtZW50JCRpbmxpbmVfNTJfdGFnTmFtZSQkaW5saW5lXzQ4X3RhZ05hbWVBcnIkJGlubGluZV81MCQkLnB1c2goJyBuYW1lPVwiJywkZ29vZyRzdHJpbmckaHRtbEVzY2FwZSQkKCRhdHRyaWJ1dGVzJCRpbmxpbmVfNDkkJC5uYW1lKSwnXCInKTtpZigkYXR0cmlidXRlcyQkaW5saW5lXzQ5JCQudHlwZSl7JGVsZW1lbnQkJGlubGluZV81Ml90YWdOYW1lJCRpbmxpbmVfNDhfdGFnTmFtZUFyciQkaW5saW5lXzUwJCQucHVzaCgnIHR5cGU9XCInLCRnb29nJHN0cmluZyRodG1sRXNjYXBlJCQoJGF0dHJpYnV0ZXMkJGlubGluZV80OSQkLnR5cGUpLCdcIicpO3ZhciAkY2xvbmUkJGlubGluZV81MSQkPXt9OyRnb29nJG9iamVjdCRleHRlbmQkJCgkY2xvbmUkJGlubGluZV81MSQkLCRhdHRyaWJ1dGVzJCRpbmxpbmVfNDkkJCk7JGF0dHJpYnV0ZXMkJGlubGluZV80OSQkPSRjbG9uZSQkaW5saW5lXzUxJCQ7ZGVsZXRlICRhdHRyaWJ1dGVzJCRpbmxpbmVfNDkkJC50eXBlfSRlbGVtZW50JCRpbmxpbmVfNTJfdGFnTmFtZSQkaW5saW5lXzQ4X3RhZ05hbWVBcnIkJGlubGluZV81MCQkLnB1c2goXCI+XCIpO1xyXG4kZWxlbWVudCQkaW5saW5lXzUyX3RhZ05hbWUkJGlubGluZV80OF90YWdOYW1lQXJyJCRpbmxpbmVfNTAkJD0kZWxlbWVudCQkaW5saW5lXzUyX3RhZ05hbWUkJGlubGluZV80OF90YWdOYW1lQXJyJCRpbmxpbmVfNTAkJC5qb2luKFwiXCIpfSRlbGVtZW50JCRpbmxpbmVfNTJfdGFnTmFtZSQkaW5saW5lXzQ4X3RhZ05hbWVBcnIkJGlubGluZV81MCQkPSRkb2MkJGlubGluZV80NyQkLmNyZWF0ZUVsZW1lbnQoJGVsZW1lbnQkJGlubGluZV81Ml90YWdOYW1lJCRpbmxpbmVfNDhfdGFnTmFtZUFyciQkaW5saW5lXzUwJCQpO2lmKCRhdHRyaWJ1dGVzJCRpbmxpbmVfNDkkJCkkZ29vZyRpc1N0cmluZyQkKCRhdHRyaWJ1dGVzJCRpbmxpbmVfNDkkJCk/JGVsZW1lbnQkJGlubGluZV81Ml90YWdOYW1lJCRpbmxpbmVfNDhfdGFnTmFtZUFyciQkaW5saW5lXzUwJCQuY2xhc3NOYW1lPSRhdHRyaWJ1dGVzJCRpbmxpbmVfNDkkJDpcImFycmF5XCI9PSRnb29nJHR5cGVPZiQkKCRhdHRyaWJ1dGVzJCRpbmxpbmVfNDkkJCk/XHJcbiRnb29nJGRvbSRjbGFzc2VzJGFkZCQkLmFwcGx5KCRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJCxbJGVsZW1lbnQkJGlubGluZV81Ml90YWdOYW1lJCRpbmxpbmVfNDhfdGFnTmFtZUFyciQkaW5saW5lXzUwJCRdLmNvbmNhdCgkYXR0cmlidXRlcyQkaW5saW5lXzQ5JCQpKTokZ29vZyRkb20kc2V0UHJvcGVydGllcyQkKCRlbGVtZW50JCRpbmxpbmVfNTJfdGFnTmFtZSQkaW5saW5lXzQ4X3RhZ05hbWVBcnIkJGlubGluZV81MCQkLCRhdHRyaWJ1dGVzJCRpbmxpbmVfNDkkJCk7MjwkYXJncyQkaW5saW5lXzQ2JCQubGVuZ3RoJiYkZ29vZyRkb20kYXBwZW5kXyQkKCRkb2MkJGlubGluZV80NyQkLCRlbGVtZW50JCRpbmxpbmVfNTJfdGFnTmFtZSQkaW5saW5lXzQ4X3RhZ05hbWVBcnIkJGlubGluZV81MCQkLCRhcmdzJCRpbmxpbmVfNDYkJCk7cmV0dXJuICRlbGVtZW50JCRpbmxpbmVfNTJfdGFnTmFtZSQkaW5saW5lXzQ4X3RhZ05hbWVBcnIkJGlubGluZV81MCQkfVxyXG5mdW5jdGlvbiAkZ29vZyRkb20kYXBwZW5kXyQkKCRkb2MkJDEyJCQsJHBhcmVudCQkNiQkLCRhcmdzJCQ4JCQpe2Z1bmN0aW9uICRjaGlsZEhhbmRsZXIkJCgkY2hpbGQkJDEkJCl7JGNoaWxkJCQxJCQmJiRwYXJlbnQkJDYkJC5hcHBlbmRDaGlsZCgkZ29vZyRpc1N0cmluZyQkKCRjaGlsZCQkMSQkKT8kZG9jJCQxMiQkLmNyZWF0ZVRleHROb2RlKCRjaGlsZCQkMSQkKTokY2hpbGQkJDEkJCl9Zm9yKHZhciAkaSQkNTIkJD0yOyRpJCQ1MiQkPCRhcmdzJCQ4JCQubGVuZ3RoOyRpJCQ1MiQkKyspe3ZhciAkYXJnJCQ1JCQ9JGFyZ3MkJDgkJFskaSQkNTIkJF07aWYoJGdvb2ckaXNBcnJheUxpa2UkJCgkYXJnJCQ1JCQpJiYhKCRnb29nJGlzT2JqZWN0JCQoJGFyZyQkNSQkKSYmMDwkYXJnJCQ1JCQubm9kZVR5cGUpKXt2YXIgJEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCQkNTQkJDthOntpZigkYXJnJCQ1JCQmJlwibnVtYmVyXCI9PXR5cGVvZiAkYXJnJCQ1JCQubGVuZ3RoKXtpZigkZ29vZyRpc09iamVjdCQkKCRhcmckJDUkJCkpeyRKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDU0JCQ9XHJcblwiZnVuY3Rpb25cIj09dHlwZW9mICRhcmckJDUkJC5pdGVtfHxcInN0cmluZ1wiPT10eXBlb2YgJGFyZyQkNSQkLml0ZW07YnJlYWsgYX1pZigkZ29vZyRpc0Z1bmN0aW9uJCQoJGFyZyQkNSQkKSl7JEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCQkNTQkJD1cImZ1bmN0aW9uXCI9PXR5cGVvZiAkYXJnJCQ1JCQuaXRlbTticmVhayBhfX0kSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQ1NCQkPSRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCR9JGdvb2ckYXJyYXkkZm9yRWFjaCQkKCRKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDU0JCQ/JGdvb2ckYXJyYXkkY2xvbmUkJCgkYXJnJCQ1JCQpOiRhcmckJDUkJCwkY2hpbGRIYW5kbGVyJCQpfWVsc2UgJGNoaWxkSGFuZGxlciQkKCRhcmckJDUkJCl9fVxyXG52YXIgJGdvb2ckZG9tJFRBR1NfVE9fSUdOT1JFXyQkPXtTQ1JJUFQ6MSxTVFlMRToxLEhFQUQ6MSxJRlJBTUU6MSxPQkpFQ1Q6MX0sJGdvb2ckZG9tJFBSRURFRklORURfVEFHX1ZBTFVFU18kJD17SU1HOlwiIFwiLEJSOlwiXFxuXCJ9O1xyXG5mdW5jdGlvbiAkZ29vZyRkb20kZ2V0VGV4dENvbnRlbnQkJCgkbm9kZSQkMTZfdGV4dENvbnRlbnQkJCl7aWYoJGdvb2ckZG9tJEJyb3dzZXJGZWF0dXJlJENBTl9VU0VfSU5ORVJfVEVYVCQkJiZcImlubmVyVGV4dFwiaW4gJG5vZGUkJDE2X3RleHRDb250ZW50JCQpJG5vZGUkJDE2X3RleHRDb250ZW50JCQ9JG5vZGUkJDE2X3RleHRDb250ZW50JCQuaW5uZXJUZXh0LnJlcGxhY2UoLyhcXHJcXG58XFxyfFxcbikvZyxcIlxcblwiKTtlbHNle3ZhciAkYnVmJCQ9W107JGdvb2ckZG9tJGdldFRleHRDb250ZW50XyQkKCRub2RlJCQxNl90ZXh0Q29udGVudCQkLCRidWYkJCwkSlNDb21waWxlcl9hbGlhc19UUlVFJCQpOyRub2RlJCQxNl90ZXh0Q29udGVudCQkPSRidWYkJC5qb2luKFwiXCIpfSRub2RlJCQxNl90ZXh0Q29udGVudCQkPSRub2RlJCQxNl90ZXh0Q29udGVudCQkLnJlcGxhY2UoLyBcXHhBRCAvZyxcIiBcIikucmVwbGFjZSgvXFx4QUQvZyxcIlwiKTskbm9kZSQkMTZfdGV4dENvbnRlbnQkJD0kbm9kZSQkMTZfdGV4dENvbnRlbnQkJC5yZXBsYWNlKC9cXHUyMDBCL2csXHJcblwiXCIpOyRnb29nJGRvbSRCcm93c2VyRmVhdHVyZSRDQU5fVVNFX0lOTkVSX1RFWFQkJHx8KCRub2RlJCQxNl90ZXh0Q29udGVudCQkPSRub2RlJCQxNl90ZXh0Q29udGVudCQkLnJlcGxhY2UoLyArL2csXCIgXCIpKTtcIiBcIiE9JG5vZGUkJDE2X3RleHRDb250ZW50JCQmJigkbm9kZSQkMTZfdGV4dENvbnRlbnQkJD0kbm9kZSQkMTZfdGV4dENvbnRlbnQkJC5yZXBsYWNlKC9eXFxzKi8sXCJcIikpO3JldHVybiAkbm9kZSQkMTZfdGV4dENvbnRlbnQkJH1cclxuZnVuY3Rpb24gJGdvb2ckZG9tJGdldFRleHRDb250ZW50XyQkKCRjaGlsZCQkN19ub2RlJCQxOCQkLCRidWYkJDIkJCwkbm9ybWFsaXplV2hpdGVzcGFjZSQkKXtpZighKCRjaGlsZCQkN19ub2RlJCQxOCQkLm5vZGVOYW1lIGluICRnb29nJGRvbSRUQUdTX1RPX0lHTk9SRV8kJCkpaWYoMz09JGNoaWxkJCQ3X25vZGUkJDE4JCQubm9kZVR5cGUpJG5vcm1hbGl6ZVdoaXRlc3BhY2UkJD8kYnVmJCQyJCQucHVzaCgoXCJcIiskY2hpbGQkJDdfbm9kZSQkMTgkJC5ub2RlVmFsdWUpLnJlcGxhY2UoLyhcXHJcXG58XFxyfFxcbikvZyxcIlwiKSk6JGJ1ZiQkMiQkLnB1c2goJGNoaWxkJCQ3X25vZGUkJDE4JCQubm9kZVZhbHVlKTtlbHNlIGlmKCRjaGlsZCQkN19ub2RlJCQxOCQkLm5vZGVOYW1lIGluICRnb29nJGRvbSRQUkVERUZJTkVEX1RBR19WQUxVRVNfJCQpJGJ1ZiQkMiQkLnB1c2goJGdvb2ckZG9tJFBSRURFRklORURfVEFHX1ZBTFVFU18kJFskY2hpbGQkJDdfbm9kZSQkMTgkJC5ub2RlTmFtZV0pO1xyXG5lbHNlIGZvcigkY2hpbGQkJDdfbm9kZSQkMTgkJD0kY2hpbGQkJDdfbm9kZSQkMTgkJC5maXJzdENoaWxkOyRjaGlsZCQkN19ub2RlJCQxOCQkOykkZ29vZyRkb20kZ2V0VGV4dENvbnRlbnRfJCQoJGNoaWxkJCQ3X25vZGUkJDE4JCQsJGJ1ZiQkMiQkLCRub3JtYWxpemVXaGl0ZXNwYWNlJCQpLCRjaGlsZCQkN19ub2RlJCQxOCQkPSRjaGlsZCQkN19ub2RlJCQxOCQkLm5leHRTaWJsaW5nfVxyXG5mdW5jdGlvbiAkZ29vZyRkb20kZ2V0QW5jZXN0b3JCeVRhZ05hbWVBbmRDbGFzcyQkKCRlbGVtZW50JCQyNyQkLCRvcHRfdGFnJCQyJCQpe3ZhciAkdGFnTmFtZSQkNCQkPSRvcHRfdGFnJCQyJCQ/JG9wdF90YWckJDIkJC50b1VwcGVyQ2FzZSgpOiRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJDtyZXR1cm4gJGdvb2ckZG9tJGdldEFuY2VzdG9yJCQoJGVsZW1lbnQkJDI3JCQsZnVuY3Rpb24oJG5vZGUkJDIxJCQpe3JldHVybighJHRhZ05hbWUkJDQkJHx8JG5vZGUkJDIxJCQubm9kZU5hbWU9PSR0YWdOYW1lJCQ0JCQpJiYkSlNDb21waWxlcl9hbGlhc19UUlVFJCR9KX1cclxuZnVuY3Rpb24gJGdvb2ckZG9tJGdldEFuY2VzdG9yJCQoJGVsZW1lbnQkJDI5JCQsJG1hdGNoZXIkJCl7Zm9yKHZhciAkc3RlcHMkJD0wOyRlbGVtZW50JCQyOSQkOyl7aWYoJG1hdGNoZXIkJCgkZWxlbWVudCQkMjkkJCkpcmV0dXJuICRlbGVtZW50JCQyOSQkOyRlbGVtZW50JCQyOSQkPSRlbGVtZW50JCQyOSQkLnBhcmVudE5vZGU7JHN0ZXBzJCQrK31yZXR1cm4gJEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkfTtmdW5jdGlvbiAkZ29vZyRzdHlsZSRzZXRTdHlsZV8kJCgkZWxlbWVudCQkMzIkJCwkdmFsdWUkJDU1JCQsJHN0eWxlJCQxJCQpeyRlbGVtZW50JCQzMiQkLnN0eWxlWyRnb29nJHN0cmluZyR0b0NhbWVsQ2FzZSQkKCRzdHlsZSQkMSQkKV09JHZhbHVlJCQ1NSQkfTtmdW5jdGlvbiAkZ29vZyREaXNwb3NhYmxlJCQoKXt9JGdvb2ckRGlzcG9zYWJsZSQkLnByb3RvdHlwZS4kZGlzcG9zZWRfJD0kSlNDb21waWxlcl9hbGlhc19GQUxTRSQkOyRnb29nJERpc3Bvc2FibGUkJC5wcm90b3R5cGUuJGRpc3Bvc2UkPWZ1bmN0aW9uICQkZ29vZyREaXNwb3NhYmxlJCQkJCRkaXNwb3NlJCQoKXtpZighdGhpcy4kZGlzcG9zZWRfJCl0aGlzLiRkaXNwb3NlZF8kPSRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJCx0aGlzLiRkaXNwb3NlSW50ZXJuYWwkKCl9OyRnb29nJERpc3Bvc2FibGUkJC5wcm90b3R5cGUuJGRpc3Bvc2VJbnRlcm5hbCQ9ZnVuY3Rpb24gJCRnb29nJERpc3Bvc2FibGUkJCQkJGRpc3Bvc2VJbnRlcm5hbCQkKCl7dGhpcy4kZGVwZW5kZW50RGlzcG9zYWJsZXNfJCYmJGdvb2ckZGlzcG9zZUFsbCQkLmFwcGx5KCRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJCx0aGlzLiRkZXBlbmRlbnREaXNwb3NhYmxlc18kKX07XHJcbmZ1bmN0aW9uICRnb29nJGRpc3Bvc2UkJCgkb2JqJCQ2MCQkKXskb2JqJCQ2MCQkJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiAkb2JqJCQ2MCQkLiRkaXNwb3NlJCYmJG9iaiQkNjAkJC4kZGlzcG9zZSQoKX1mdW5jdGlvbiAkZ29vZyRkaXNwb3NlQWxsJCQoJHZhcl9hcmdzJCQ0OSQkKXtmb3IodmFyICRpJCQ1NyQkPTAsJGxlbiQkMiQkPWFyZ3VtZW50cy5sZW5ndGg7JGkkJDU3JCQ8JGxlbiQkMiQkOysrJGkkJDU3JCQpe3ZhciAkZGlzcG9zYWJsZSQkMSQkPWFyZ3VtZW50c1skaSQkNTckJF07JGdvb2ckaXNBcnJheUxpa2UkJCgkZGlzcG9zYWJsZSQkMSQkKT8kZ29vZyRkaXNwb3NlQWxsJCQuYXBwbHkoJEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkLCRkaXNwb3NhYmxlJCQxJCQpOiRnb29nJGRpc3Bvc2UkJCgkZGlzcG9zYWJsZSQkMSQkKX19O2Z1bmN0aW9uICRnb29nJGV2ZW50cyRMaXN0ZW5lciQkKCl7fXZhciAkZ29vZyRldmVudHMkTGlzdGVuZXIkY291bnRlcl8kJD0wOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQ9JGdvb2ckZXZlbnRzJExpc3RlbmVyJCQucHJvdG90eXBlOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQua2V5PTA7JEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC4kcmVtb3ZlZCQ9JEpTQ29tcGlsZXJfYWxpYXNfRkFMU0UkJDskSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkLiRjYWxsT25jZSQ9JEpTQ29tcGlsZXJfYWxpYXNfRkFMU0UkJDtcclxuJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC4kaW5pdCQ9ZnVuY3Rpb24gJCRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQkJGluaXQkJCgkbGlzdGVuZXIkJDI2JCQsJHByb3h5JCQsJHNyYyQkNSQkLCR0eXBlJCQ1MSQkLCRjYXB0dXJlJCQsJG9wdF9oYW5kbGVyJCQpeyRnb29nJGlzRnVuY3Rpb24kJCgkbGlzdGVuZXIkJDI2JCQpP3RoaXMuJGlzRnVuY3Rpb25MaXN0ZW5lcl8kPSRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJDokbGlzdGVuZXIkJDI2JCQmJiRsaXN0ZW5lciQkMjYkJC5oYW5kbGVFdmVudCYmJGdvb2ckaXNGdW5jdGlvbiQkKCRsaXN0ZW5lciQkMjYkJC5oYW5kbGVFdmVudCk/dGhpcy4kaXNGdW5jdGlvbkxpc3RlbmVyXyQ9JEpTQ29tcGlsZXJfYWxpYXNfRkFMU0UkJDokSlNDb21waWxlcl9hbGlhc19USFJPVyQkKEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKSk7dGhpcy4kbGlzdGVuZXIkPSRsaXN0ZW5lciQkMjYkJDt0aGlzLiRwcm94eSQ9JHByb3h5JCQ7XHJcbnRoaXMuc3JjPSRzcmMkJDUkJDt0aGlzLnR5cGU9JHR5cGUkJDUxJCQ7dGhpcy5jYXB0dXJlPSEhJGNhcHR1cmUkJDt0aGlzLiRoYW5kbGVyJD0kb3B0X2hhbmRsZXIkJDt0aGlzLiRjYWxsT25jZSQ9JEpTQ29tcGlsZXJfYWxpYXNfRkFMU0UkJDt0aGlzLmtleT0rKyRnb29nJGV2ZW50cyRMaXN0ZW5lciRjb3VudGVyXyQkO3RoaXMuJHJlbW92ZWQkPSRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCR9OyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24gJCRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQkaGFuZGxlRXZlbnQkKCRldmVudE9iamVjdCQkKXtyZXR1cm4gdGhpcy4kaXNGdW5jdGlvbkxpc3RlbmVyXyQ/dGhpcy4kbGlzdGVuZXIkLmNhbGwodGhpcy4kaGFuZGxlciR8fHRoaXMuc3JjLCRldmVudE9iamVjdCQkKTp0aGlzLiRsaXN0ZW5lciQuaGFuZGxlRXZlbnQuY2FsbCh0aGlzLiRsaXN0ZW5lciQsJGV2ZW50T2JqZWN0JCQpfTshJGdvb2ckdXNlckFnZW50JElFJCR8fCRnb29nJHVzZXJBZ2VudCRpc0RvY3VtZW50TW9kZSQkKCk7dmFyICRnb29nJGV2ZW50cyRCcm93c2VyRmVhdHVyZSRIQVNfVzNDX0VWRU5UX1NVUFBPUlQkJD0hJGdvb2ckdXNlckFnZW50JElFJCR8fCRnb29nJHVzZXJBZ2VudCRpc0RvY3VtZW50TW9kZSQkKCk7JGdvb2ckdXNlckFnZW50JElFJCQmJiRnb29nJHVzZXJBZ2VudCRpc1ZlcnNpb24kJChcIjhcIik7ISRnb29nJHVzZXJBZ2VudCRXRUJLSVQkJHx8JGdvb2ckdXNlckFnZW50JGlzVmVyc2lvbiQkKFwiNTI4XCIpOyRnb29nJHVzZXJBZ2VudCRHRUNLTyQkJiYkZ29vZyR1c2VyQWdlbnQkaXNWZXJzaW9uJCQoXCIxLjliXCIpfHwkZ29vZyR1c2VyQWdlbnQkSUUkJCYmJGdvb2ckdXNlckFnZW50JGlzVmVyc2lvbiQkKFwiOFwiKXx8JGdvb2ckdXNlckFnZW50JE9QRVJBJCQmJiRnb29nJHVzZXJBZ2VudCRpc1ZlcnNpb24kJChcIjkuNVwiKXx8JGdvb2ckdXNlckFnZW50JFdFQktJVCQkJiYkZ29vZyR1c2VyQWdlbnQkaXNWZXJzaW9uJCQoXCI1MjhcIik7XHJcbiEkZ29vZyR1c2VyQWdlbnQkR0VDS08kJHx8JGdvb2ckdXNlckFnZW50JGlzVmVyc2lvbiQkKFwiOFwiKTtmdW5jdGlvbiAkZ29vZyRldmVudHMkRXZlbnQkJCgkdHlwZSQkNTIkJCwkb3B0X3RhcmdldCQkMSQkKXt0aGlzLnR5cGU9JHR5cGUkJDUyJCQ7dGhpcy5jdXJyZW50VGFyZ2V0PXRoaXMudGFyZ2V0PSRvcHRfdGFyZ2V0JCQxJCR9JGdvb2ckaW5oZXJpdHMkJCgkZ29vZyRldmVudHMkRXZlbnQkJCwkZ29vZyREaXNwb3NhYmxlJCQpOyRnb29nJGV2ZW50cyRFdmVudCQkLnByb3RvdHlwZS4kZGlzcG9zZUludGVybmFsJD1mdW5jdGlvbiAkJGdvb2ckZXZlbnRzJEV2ZW50JCQkJCRkaXNwb3NlSW50ZXJuYWwkJCgpe2RlbGV0ZSB0aGlzLnR5cGU7ZGVsZXRlIHRoaXMudGFyZ2V0O2RlbGV0ZSB0aGlzLmN1cnJlbnRUYXJnZXR9OyRnb29nJGV2ZW50cyRFdmVudCQkLnByb3RvdHlwZS4kcHJvcGFnYXRpb25TdG9wcGVkXyQ9JEpTQ29tcGlsZXJfYWxpYXNfRkFMU0UkJDskZ29vZyRldmVudHMkRXZlbnQkJC5wcm90b3R5cGUuJHJldHVyblZhbHVlXyQ9JEpTQ29tcGlsZXJfYWxpYXNfVFJVRSQkO2Z1bmN0aW9uICRnb29nJHJlZmxlY3Qkc2lua1ZhbHVlJCQoJHgkJDU0JCQpeyRnb29nJHJlZmxlY3Qkc2lua1ZhbHVlJCRbXCIgXCJdKCR4JCQ1NCQkKTtyZXR1cm4gJHgkJDU0JCR9JGdvb2ckcmVmbGVjdCRzaW5rVmFsdWUkJFtcIiBcIl09ZnVuY3Rpb24gJCRnb29nJHJlZmxlY3Qkc2lua1ZhbHVlJCQkX18wJCgpe307ZnVuY3Rpb24gJGdvb2ckZXZlbnRzJEJyb3dzZXJFdmVudCQkKCRvcHRfZSQkLCRvcHRfY3VycmVudFRhcmdldCQkKXskb3B0X2UkJCYmdGhpcy4kaW5pdCQoJG9wdF9lJCQsJG9wdF9jdXJyZW50VGFyZ2V0JCQpfSRnb29nJGluaGVyaXRzJCQoJGdvb2ckZXZlbnRzJEJyb3dzZXJFdmVudCQkLCRnb29nJGV2ZW50cyRFdmVudCQkKTskSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkPSRnb29nJGV2ZW50cyRCcm93c2VyRXZlbnQkJC5wcm90b3R5cGU7JEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC50YXJnZXQ9JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQucmVsYXRlZFRhcmdldD0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQ7JEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC5vZmZzZXRYPTA7JEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC5vZmZzZXRZPTA7JEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC5jbGllbnRYPTA7XHJcbiRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuY2xpZW50WT0wOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuc2NyZWVuWD0wOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuc2NyZWVuWT0wOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuYnV0dG9uPTA7JEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC5rZXlDb2RlPTA7JEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC5jaGFyQ29kZT0wOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuY3RybEtleT0kSlNDb21waWxlcl9hbGlhc19GQUxTRSQkOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuYWx0S2V5PSRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCQ7JEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC5zaGlmdEtleT0kSlNDb21waWxlcl9hbGlhc19GQUxTRSQkOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQubWV0YUtleT0kSlNDb21waWxlcl9hbGlhc19GQUxTRSQkO1xyXG4kSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkLiRwbGF0Zm9ybU1vZGlmaWVyS2V5JD0kSlNDb21waWxlcl9hbGlhc19GQUxTRSQkOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuJGV2ZW50XyQ9JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkO1xyXG4kSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkLiRpbml0JD1mdW5jdGlvbiAkJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJCQkaW5pdCQkKCRlJCQxMCQkLCRvcHRfY3VycmVudFRhcmdldCQkMSQkKXt2YXIgJHR5cGUkJDU0JCQ9dGhpcy50eXBlPSRlJCQxMCQkLnR5cGU7JGdvb2ckZXZlbnRzJEV2ZW50JCQuY2FsbCh0aGlzLCR0eXBlJCQ1NCQkKTt0aGlzLnRhcmdldD0kZSQkMTAkJC50YXJnZXR8fCRlJCQxMCQkLnNyY0VsZW1lbnQ7dGhpcy5jdXJyZW50VGFyZ2V0PSRvcHRfY3VycmVudFRhcmdldCQkMSQkO3ZhciAkcmVsYXRlZFRhcmdldCQkPSRlJCQxMCQkLnJlbGF0ZWRUYXJnZXQ7aWYoJHJlbGF0ZWRUYXJnZXQkJCl7aWYoJGdvb2ckdXNlckFnZW50JEdFQ0tPJCQpe3ZhciAkSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQ1NyQkO2E6e3RyeXskZ29vZyRyZWZsZWN0JHNpbmtWYWx1ZSQkKCRyZWxhdGVkVGFyZ2V0JCQubm9kZU5hbWUpOyRKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDU3JCQ9XHJcbiRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJDticmVhayBhfWNhdGNoKCRlJCRpbmxpbmVfNTkkJCl7fSRKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDU3JCQ9JEpTQ29tcGlsZXJfYWxpYXNfRkFMU0UkJH0kSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQ1NyQkfHwoJHJlbGF0ZWRUYXJnZXQkJD0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQpfX1lbHNlIGlmKFwibW91c2VvdmVyXCI9PSR0eXBlJCQ1NCQkKSRyZWxhdGVkVGFyZ2V0JCQ9JGUkJDEwJCQuZnJvbUVsZW1lbnQ7ZWxzZSBpZihcIm1vdXNlb3V0XCI9PSR0eXBlJCQ1NCQkKSRyZWxhdGVkVGFyZ2V0JCQ9JGUkJDEwJCQudG9FbGVtZW50O3RoaXMucmVsYXRlZFRhcmdldD0kcmVsYXRlZFRhcmdldCQkO3RoaXMub2Zmc2V0WD0kZ29vZyR1c2VyQWdlbnQkV0VCS0lUJCR8fCRlJCQxMCQkLm9mZnNldFghPT0kSlNDb21waWxlcl9hbGlhc19WT0lEJCQ/JGUkJDEwJCQub2Zmc2V0WDokZSQkMTAkJC5sYXllclg7dGhpcy5vZmZzZXRZPSRnb29nJHVzZXJBZ2VudCRXRUJLSVQkJHx8XHJcbiRlJCQxMCQkLm9mZnNldFkhPT0kSlNDb21waWxlcl9hbGlhc19WT0lEJCQ/JGUkJDEwJCQub2Zmc2V0WTokZSQkMTAkJC5sYXllclk7dGhpcy5jbGllbnRYPSRlJCQxMCQkLmNsaWVudFghPT0kSlNDb21waWxlcl9hbGlhc19WT0lEJCQ/JGUkJDEwJCQuY2xpZW50WDokZSQkMTAkJC5wYWdlWDt0aGlzLmNsaWVudFk9JGUkJDEwJCQuY2xpZW50WSE9PSRKU0NvbXBpbGVyX2FsaWFzX1ZPSUQkJD8kZSQkMTAkJC5jbGllbnRZOiRlJCQxMCQkLnBhZ2VZO3RoaXMuc2NyZWVuWD0kZSQkMTAkJC5zY3JlZW5YfHwwO3RoaXMuc2NyZWVuWT0kZSQkMTAkJC5zY3JlZW5ZfHwwO3RoaXMuYnV0dG9uPSRlJCQxMCQkLmJ1dHRvbjt0aGlzLmtleUNvZGU9JGUkJDEwJCQua2V5Q29kZXx8MDt0aGlzLmNoYXJDb2RlPSRlJCQxMCQkLmNoYXJDb2RlfHwoXCJrZXlwcmVzc1wiPT0kdHlwZSQkNTQkJD8kZSQkMTAkJC5rZXlDb2RlOjApO3RoaXMuY3RybEtleT0kZSQkMTAkJC5jdHJsS2V5O3RoaXMuYWx0S2V5PVxyXG4kZSQkMTAkJC5hbHRLZXk7dGhpcy5zaGlmdEtleT0kZSQkMTAkJC5zaGlmdEtleTt0aGlzLm1ldGFLZXk9JGUkJDEwJCQubWV0YUtleTt0aGlzLiRwbGF0Zm9ybU1vZGlmaWVyS2V5JD0kZ29vZyR1c2VyQWdlbnQkTUFDJCQ/JGUkJDEwJCQubWV0YUtleTokZSQkMTAkJC5jdHJsS2V5O3RoaXMuc3RhdGU9JGUkJDEwJCQuc3RhdGU7dGhpcy4kZXZlbnRfJD0kZSQkMTAkJDtkZWxldGUgdGhpcy4kcmV0dXJuVmFsdWVfJDtkZWxldGUgdGhpcy4kcHJvcGFnYXRpb25TdG9wcGVkXyR9O1xyXG4kSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkLiRkaXNwb3NlSW50ZXJuYWwkPWZ1bmN0aW9uICQkSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkJCRkaXNwb3NlSW50ZXJuYWwkJCgpeyRnb29nJGV2ZW50cyRCcm93c2VyRXZlbnQkJC4kc3VwZXJDbGFzc18kLiRkaXNwb3NlSW50ZXJuYWwkLmNhbGwodGhpcyk7dGhpcy5yZWxhdGVkVGFyZ2V0PXRoaXMuY3VycmVudFRhcmdldD10aGlzLnRhcmdldD10aGlzLiRldmVudF8kPSRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJH07dmFyICRnb29nJGV2ZW50cyRsaXN0ZW5lcnNfJCQ9e30sJGdvb2ckZXZlbnRzJGxpc3RlbmVyVHJlZV8kJD17fSwkZ29vZyRldmVudHMkc291cmNlc18kJD17fSwkZ29vZyRldmVudHMkb25TdHJpbmdNYXBfJCQ9e307XHJcbmZ1bmN0aW9uICRnb29nJGV2ZW50cyRsaXN0ZW4kJCgkc3JjJCQ4JCQsJHR5cGUkJDU1JCQsJGtleSQkNDVfbGlzdGVuZXIkJDI5JCQsJGNhcHR1cmUkJDFfb3B0X2NhcHQkJDIkJCwkb3B0X2hhbmRsZXIkJDEkJCl7aWYoJHR5cGUkJDU1JCQpe2lmKFwiYXJyYXlcIj09JGdvb2ckdHlwZU9mJCQoJHR5cGUkJDU1JCQpKXtmb3IodmFyICRpJCQ2MV9wcm94eSQkMSQkPTA7JGkkJDYxX3Byb3h5JCQxJCQ8JHR5cGUkJDU1JCQubGVuZ3RoOyRpJCQ2MV9wcm94eSQkMSQkKyspJGdvb2ckZXZlbnRzJGxpc3RlbiQkKCRzcmMkJDgkJCwkdHlwZSQkNTUkJFskaSQkNjFfcHJveHkkJDEkJF0sJGtleSQkNDVfbGlzdGVuZXIkJDI5JCQsJGNhcHR1cmUkJDFfb3B0X2NhcHQkJDIkJCwkb3B0X2hhbmRsZXIkJDEkJCk7cmV0dXJuICRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJH12YXIgJGNhcHR1cmUkJDFfb3B0X2NhcHQkJDIkJD0hISRjYXB0dXJlJCQxX29wdF9jYXB0JCQyJCQsJGxpc3RlbmVyT2JqX21hcCQkPVxyXG4kZ29vZyRldmVudHMkbGlzdGVuZXJUcmVlXyQkOyR0eXBlJCQ1NSQkIGluICRsaXN0ZW5lck9ial9tYXAkJHx8KCRsaXN0ZW5lck9ial9tYXAkJFskdHlwZSQkNTUkJF09eyRjb3VudF8kOjAsJHJlbWFpbmluZ18kOjB9KTskbGlzdGVuZXJPYmpfbWFwJCQ9JGxpc3RlbmVyT2JqX21hcCQkWyR0eXBlJCQ1NSQkXTskY2FwdHVyZSQkMV9vcHRfY2FwdCQkMiQkIGluICRsaXN0ZW5lck9ial9tYXAkJHx8KCRsaXN0ZW5lck9ial9tYXAkJFskY2FwdHVyZSQkMV9vcHRfY2FwdCQkMiQkXT17JGNvdW50XyQ6MCwkcmVtYWluaW5nXyQ6MH0sJGxpc3RlbmVyT2JqX21hcCQkLiRjb3VudF8kKyspO3ZhciAkbGlzdGVuZXJPYmpfbWFwJCQ9JGxpc3RlbmVyT2JqX21hcCQkWyRjYXB0dXJlJCQxX29wdF9jYXB0JCQyJCRdLCRzcmNVaWQkJD0kc3JjJCQ4JCRbJGdvb2ckVUlEX1BST1BFUlRZXyQkXXx8KCRzcmMkJDgkJFskZ29vZyRVSURfUFJPUEVSVFlfJCRdPSsrJGdvb2ckdWlkQ291bnRlcl8kJCksXHJcbiRsaXN0ZW5lckFycmF5JCQ7JGxpc3RlbmVyT2JqX21hcCQkLiRyZW1haW5pbmdfJCsrO2lmKCRsaXN0ZW5lck9ial9tYXAkJFskc3JjVWlkJCRdKXskbGlzdGVuZXJBcnJheSQkPSRsaXN0ZW5lck9ial9tYXAkJFskc3JjVWlkJCRdO2ZvcigkaSQkNjFfcHJveHkkJDEkJD0wOyRpJCQ2MV9wcm94eSQkMSQkPCRsaXN0ZW5lckFycmF5JCQubGVuZ3RoOyRpJCQ2MV9wcm94eSQkMSQkKyspaWYoJGxpc3RlbmVyT2JqX21hcCQkPSRsaXN0ZW5lckFycmF5JCRbJGkkJDYxX3Byb3h5JCQxJCRdLCRsaXN0ZW5lck9ial9tYXAkJC4kbGlzdGVuZXIkPT0ka2V5JCQ0NV9saXN0ZW5lciQkMjkkJCYmJGxpc3RlbmVyT2JqX21hcCQkLiRoYW5kbGVyJD09JG9wdF9oYW5kbGVyJCQxJCQpe2lmKCRsaXN0ZW5lck9ial9tYXAkJC4kcmVtb3ZlZCQpYnJlYWs7cmV0dXJuICRsaXN0ZW5lckFycmF5JCRbJGkkJDYxX3Byb3h5JCQxJCRdLmtleX19ZWxzZSAkbGlzdGVuZXJBcnJheSQkPSRsaXN0ZW5lck9ial9tYXAkJFskc3JjVWlkJCRdPVxyXG5bXSwkbGlzdGVuZXJPYmpfbWFwJCQuJGNvdW50XyQrKzskaSQkNjFfcHJveHkkJDEkJD0kZ29vZyRldmVudHMkZ2V0UHJveHkkJCgpOyRpJCQ2MV9wcm94eSQkMSQkLnNyYz0kc3JjJCQ4JCQ7JGxpc3RlbmVyT2JqX21hcCQkPW5ldyAkZ29vZyRldmVudHMkTGlzdGVuZXIkJDskbGlzdGVuZXJPYmpfbWFwJCQuJGluaXQkKCRrZXkkJDQ1X2xpc3RlbmVyJCQyOSQkLCRpJCQ2MV9wcm94eSQkMSQkLCRzcmMkJDgkJCwkdHlwZSQkNTUkJCwkY2FwdHVyZSQkMV9vcHRfY2FwdCQkMiQkLCRvcHRfaGFuZGxlciQkMSQkKTska2V5JCQ0NV9saXN0ZW5lciQkMjkkJD0kbGlzdGVuZXJPYmpfbWFwJCQua2V5OyRpJCQ2MV9wcm94eSQkMSQkLmtleT0ka2V5JCQ0NV9saXN0ZW5lciQkMjkkJDskbGlzdGVuZXJBcnJheSQkLnB1c2goJGxpc3RlbmVyT2JqX21hcCQkKTskZ29vZyRldmVudHMkbGlzdGVuZXJzXyQkWyRrZXkkJDQ1X2xpc3RlbmVyJCQyOSQkXT0kbGlzdGVuZXJPYmpfbWFwJCQ7JGdvb2ckZXZlbnRzJHNvdXJjZXNfJCRbJHNyY1VpZCQkXXx8XHJcbigkZ29vZyRldmVudHMkc291cmNlc18kJFskc3JjVWlkJCRdPVtdKTskZ29vZyRldmVudHMkc291cmNlc18kJFskc3JjVWlkJCRdLnB1c2goJGxpc3RlbmVyT2JqX21hcCQkKTskc3JjJCQ4JCQuYWRkRXZlbnRMaXN0ZW5lcj8oJHNyYyQkOCQkPT0kZ29vZyRnbG9iYWwkJHx8ISRzcmMkJDgkJC4kY3VzdG9tRXZlbnRfJCkmJiRzcmMkJDgkJC5hZGRFdmVudExpc3RlbmVyKCR0eXBlJCQ1NSQkLCRpJCQ2MV9wcm94eSQkMSQkLCRjYXB0dXJlJCQxX29wdF9jYXB0JCQyJCQpOiRzcmMkJDgkJC5hdHRhY2hFdmVudCgkdHlwZSQkNTUkJCBpbiAkZ29vZyRldmVudHMkb25TdHJpbmdNYXBfJCQ/JGdvb2ckZXZlbnRzJG9uU3RyaW5nTWFwXyQkWyR0eXBlJCQ1NSQkXTokZ29vZyRldmVudHMkb25TdHJpbmdNYXBfJCRbJHR5cGUkJDU1JCRdPVwib25cIiskdHlwZSQkNTUkJCwkaSQkNjFfcHJveHkkJDEkJCk7cmV0dXJuICRrZXkkJDQ1X2xpc3RlbmVyJCQyOSQkfSRKU0NvbXBpbGVyX2FsaWFzX1RIUk9XJCQoRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIikpfVxyXG5mdW5jdGlvbiAkZ29vZyRldmVudHMkZ2V0UHJveHkkJCgpe3ZhciAkcHJveHlDYWxsYmFja0Z1bmN0aW9uJCQ9JGdvb2ckZXZlbnRzJGhhbmRsZUJyb3dzZXJFdmVudF8kJCwkZiQkMjUkJD0kZ29vZyRldmVudHMkQnJvd3NlckZlYXR1cmUkSEFTX1czQ19FVkVOVF9TVVBQT1JUJCQ/ZnVuY3Rpb24oJGV2ZW50T2JqZWN0JCQxJCQpe3JldHVybiAkcHJveHlDYWxsYmFja0Z1bmN0aW9uJCQuY2FsbCgkZiQkMjUkJC5zcmMsJGYkJDI1JCQua2V5LCRldmVudE9iamVjdCQkMSQkKX06ZnVuY3Rpb24oJGV2ZW50T2JqZWN0JCQyX3YkJCl7JGV2ZW50T2JqZWN0JCQyX3YkJD0kcHJveHlDYWxsYmFja0Z1bmN0aW9uJCQuY2FsbCgkZiQkMjUkJC5zcmMsJGYkJDI1JCQua2V5LCRldmVudE9iamVjdCQkMl92JCQpO2lmKCEkZXZlbnRPYmplY3QkJDJfdiQkKXJldHVybiAkZXZlbnRPYmplY3QkJDJfdiQkfTtyZXR1cm4gJGYkJDI1JCR9XHJcbmZ1bmN0aW9uICRnb29nJGV2ZW50cyR1bmxpc3RlbkJ5S2V5JCQoJGtleSQkNDckJCl7aWYoISRnb29nJGV2ZW50cyRsaXN0ZW5lcnNfJCRbJGtleSQkNDckJF0pcmV0dXJuICRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCQ7dmFyICRsaXN0ZW5lciQkMzMkJD0kZ29vZyRldmVudHMkbGlzdGVuZXJzXyQkWyRrZXkkJDQ3JCRdO2lmKCRsaXN0ZW5lciQkMzMkJC4kcmVtb3ZlZCQpcmV0dXJuICRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCQ7dmFyICRzcmMkJDEyX3NyY1VpZCQkMSQkPSRsaXN0ZW5lciQkMzMkJC5zcmMsJHR5cGUkJDU4JCQ9JGxpc3RlbmVyJCQzMyQkLnR5cGUsJGxpc3RlbmVyQXJyYXkkJDJfcHJveHkkJDIkJD0kbGlzdGVuZXIkJDMzJCQuJHByb3h5JCwkY2FwdHVyZSQkMyQkPSRsaXN0ZW5lciQkMzMkJC5jYXB0dXJlOyRzcmMkJDEyX3NyY1VpZCQkMSQkLnJlbW92ZUV2ZW50TGlzdGVuZXI/KCRzcmMkJDEyX3NyY1VpZCQkMSQkPT0kZ29vZyRnbG9iYWwkJHx8ISRzcmMkJDEyX3NyY1VpZCQkMSQkLiRjdXN0b21FdmVudF8kKSYmXHJcbiRzcmMkJDEyX3NyY1VpZCQkMSQkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJHR5cGUkJDU4JCQsJGxpc3RlbmVyQXJyYXkkJDJfcHJveHkkJDIkJCwkY2FwdHVyZSQkMyQkKTokc3JjJCQxMl9zcmNVaWQkJDEkJC5kZXRhY2hFdmVudCYmJHNyYyQkMTJfc3JjVWlkJCQxJCQuZGV0YWNoRXZlbnQoJHR5cGUkJDU4JCQgaW4gJGdvb2ckZXZlbnRzJG9uU3RyaW5nTWFwXyQkPyRnb29nJGV2ZW50cyRvblN0cmluZ01hcF8kJFskdHlwZSQkNTgkJF06JGdvb2ckZXZlbnRzJG9uU3RyaW5nTWFwXyQkWyR0eXBlJCQ1OCQkXT1cIm9uXCIrJHR5cGUkJDU4JCQsJGxpc3RlbmVyQXJyYXkkJDJfcHJveHkkJDIkJCk7JHNyYyQkMTJfc3JjVWlkJCQxJCQ9JHNyYyQkMTJfc3JjVWlkJCQxJCRbJGdvb2ckVUlEX1BST1BFUlRZXyQkXXx8KCRzcmMkJDEyX3NyY1VpZCQkMSQkWyRnb29nJFVJRF9QUk9QRVJUWV8kJF09KyskZ29vZyR1aWRDb3VudGVyXyQkKTskbGlzdGVuZXJBcnJheSQkMl9wcm94eSQkMiQkPSRnb29nJGV2ZW50cyRsaXN0ZW5lclRyZWVfJCRbJHR5cGUkJDU4JCRdWyRjYXB0dXJlJCQzJCRdWyRzcmMkJDEyX3NyY1VpZCQkMSQkXTtcclxuaWYoJGdvb2ckZXZlbnRzJHNvdXJjZXNfJCRbJHNyYyQkMTJfc3JjVWlkJCQxJCRdKXt2YXIgJHNvdXJjZXNBcnJheSQkPSRnb29nJGV2ZW50cyRzb3VyY2VzXyQkWyRzcmMkJDEyX3NyY1VpZCQkMSQkXSwkaSQkaW5saW5lXzYzJCQ9JGdvb2ckYXJyYXkkaW5kZXhPZiQkKCRzb3VyY2VzQXJyYXkkJCwkbGlzdGVuZXIkJDMzJCQpOzA8PSRpJCRpbmxpbmVfNjMkJCYmKCRnb29nJGFzc2VydHMkYXNzZXJ0JCQoJHNvdXJjZXNBcnJheSQkLmxlbmd0aCE9JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkKSwkZ29vZyRhcnJheSRBUlJBWV9QUk9UT1RZUEVfJCQuc3BsaWNlLmNhbGwoJHNvdXJjZXNBcnJheSQkLCRpJCRpbmxpbmVfNjMkJCwxKSk7MD09JHNvdXJjZXNBcnJheSQkLmxlbmd0aCYmZGVsZXRlICRnb29nJGV2ZW50cyRzb3VyY2VzXyQkWyRzcmMkJDEyX3NyY1VpZCQkMSQkXX0kbGlzdGVuZXIkJDMzJCQuJHJlbW92ZWQkPSRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJDskbGlzdGVuZXJBcnJheSQkMl9wcm94eSQkMiQkLiRuZWVkc0NsZWFudXBfJD1cclxuJEpTQ29tcGlsZXJfYWxpYXNfVFJVRSQkOyRnb29nJGV2ZW50cyRjbGVhblVwXyQkKCR0eXBlJCQ1OCQkLCRjYXB0dXJlJCQzJCQsJHNyYyQkMTJfc3JjVWlkJCQxJCQsJGxpc3RlbmVyQXJyYXkkJDJfcHJveHkkJDIkJCk7ZGVsZXRlICRnb29nJGV2ZW50cyRsaXN0ZW5lcnNfJCRbJGtleSQkNDckJF07cmV0dXJuICRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJH1cclxuZnVuY3Rpb24gJGdvb2ckZXZlbnRzJGNsZWFuVXBfJCQoJHR5cGUkJDU5JCQsJGNhcHR1cmUkJDQkJCwkc3JjVWlkJCQyJCQsJGxpc3RlbmVyQXJyYXkkJDMkJCl7aWYoISRsaXN0ZW5lckFycmF5JCQzJCQuJGxvY2tlZF8kJiYkbGlzdGVuZXJBcnJheSQkMyQkLiRuZWVkc0NsZWFudXBfJCl7Zm9yKHZhciAkb2xkSW5kZXgkJD0wLCRuZXdJbmRleCQkPTA7JG9sZEluZGV4JCQ8JGxpc3RlbmVyQXJyYXkkJDMkJC5sZW5ndGg7JG9sZEluZGV4JCQrKykkbGlzdGVuZXJBcnJheSQkMyQkWyRvbGRJbmRleCQkXS4kcmVtb3ZlZCQ/JGxpc3RlbmVyQXJyYXkkJDMkJFskb2xkSW5kZXgkJF0uJHByb3h5JC5zcmM9JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkOigkb2xkSW5kZXgkJCE9JG5ld0luZGV4JCQmJigkbGlzdGVuZXJBcnJheSQkMyQkWyRuZXdJbmRleCQkXT0kbGlzdGVuZXJBcnJheSQkMyQkWyRvbGRJbmRleCQkXSksJG5ld0luZGV4JCQrKyk7JGxpc3RlbmVyQXJyYXkkJDMkJC5sZW5ndGg9XHJcbiRuZXdJbmRleCQkOyRsaXN0ZW5lckFycmF5JCQzJCQuJG5lZWRzQ2xlYW51cF8kPSRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCQ7MD09JG5ld0luZGV4JCQmJihkZWxldGUgJGdvb2ckZXZlbnRzJGxpc3RlbmVyVHJlZV8kJFskdHlwZSQkNTkkJF1bJGNhcHR1cmUkJDQkJF1bJHNyY1VpZCQkMiQkXSwkZ29vZyRldmVudHMkbGlzdGVuZXJUcmVlXyQkWyR0eXBlJCQ1OSQkXVskY2FwdHVyZSQkNCQkXS4kY291bnRfJC0tLDA9PSRnb29nJGV2ZW50cyRsaXN0ZW5lclRyZWVfJCRbJHR5cGUkJDU5JCRdWyRjYXB0dXJlJCQ0JCRdLiRjb3VudF8kJiYoZGVsZXRlICRnb29nJGV2ZW50cyRsaXN0ZW5lclRyZWVfJCRbJHR5cGUkJDU5JCRdWyRjYXB0dXJlJCQ0JCRdLCRnb29nJGV2ZW50cyRsaXN0ZW5lclRyZWVfJCRbJHR5cGUkJDU5JCRdLiRjb3VudF8kLS0pLDA9PSRnb29nJGV2ZW50cyRsaXN0ZW5lclRyZWVfJCRbJHR5cGUkJDU5JCRdLiRjb3VudF8kJiZkZWxldGUgJGdvb2ckZXZlbnRzJGxpc3RlbmVyVHJlZV8kJFskdHlwZSQkNTkkJF0pfX1cclxuZnVuY3Rpb24gJGdvb2ckZXZlbnRzJGZpcmVMaXN0ZW5lcnNfJCQoJGxpc3RlbmVyQXJyYXkkJDVfbWFwJCQ0JCQsJG9iaiQkNjZfb2JqVWlkJCQyJCQsJHR5cGUkJDY1JCQsJGNhcHR1cmUkJDkkJCwkZXZlbnRPYmplY3QkJDQkJCl7dmFyICRyZXR2YWwkJD0xLCRvYmokJDY2X29ialVpZCQkMiQkPSRvYmokJDY2X29ialVpZCQkMiQkWyRnb29nJFVJRF9QUk9QRVJUWV8kJF18fCgkb2JqJCQ2Nl9vYmpVaWQkJDIkJFskZ29vZyRVSURfUFJPUEVSVFlfJCRdPSsrJGdvb2ckdWlkQ291bnRlcl8kJCk7aWYoJGxpc3RlbmVyQXJyYXkkJDVfbWFwJCQ0JCRbJG9iaiQkNjZfb2JqVWlkJCQyJCRdKXskbGlzdGVuZXJBcnJheSQkNV9tYXAkJDQkJC4kcmVtYWluaW5nXyQtLTskbGlzdGVuZXJBcnJheSQkNV9tYXAkJDQkJD0kbGlzdGVuZXJBcnJheSQkNV9tYXAkJDQkJFskb2JqJCQ2Nl9vYmpVaWQkJDIkJF07JGxpc3RlbmVyQXJyYXkkJDVfbWFwJCQ0JCQuJGxvY2tlZF8kPyRsaXN0ZW5lckFycmF5JCQ1X21hcCQkNCQkLiRsb2NrZWRfJCsrOlxyXG4kbGlzdGVuZXJBcnJheSQkNV9tYXAkJDQkJC4kbG9ja2VkXyQ9MTt0cnl7Zm9yKHZhciAkbGVuZ3RoJCQxNiQkPSRsaXN0ZW5lckFycmF5JCQ1X21hcCQkNCQkLmxlbmd0aCwkaSQkNjckJD0wOyRpJCQ2NyQkPCRsZW5ndGgkJDE2JCQ7JGkkJDY3JCQrKyl7dmFyICRsaXN0ZW5lciQkMzkkJD0kbGlzdGVuZXJBcnJheSQkNV9tYXAkJDQkJFskaSQkNjckJF07JGxpc3RlbmVyJCQzOSQkJiYhJGxpc3RlbmVyJCQzOSQkLiRyZW1vdmVkJCYmKCRyZXR2YWwkJCY9JGdvb2ckZXZlbnRzJGZpcmVMaXN0ZW5lciQkKCRsaXN0ZW5lciQkMzkkJCwkZXZlbnRPYmplY3QkJDQkJCkhPT0kSlNDb21waWxlcl9hbGlhc19GQUxTRSQkKX19ZmluYWxseXskbGlzdGVuZXJBcnJheSQkNV9tYXAkJDQkJC4kbG9ja2VkXyQtLSwkZ29vZyRldmVudHMkY2xlYW5VcF8kJCgkdHlwZSQkNjUkJCwkY2FwdHVyZSQkOSQkLCRvYmokJDY2X29ialVpZCQkMiQkLCRsaXN0ZW5lckFycmF5JCQ1X21hcCQkNCQkKX19cmV0dXJuIEJvb2xlYW4oJHJldHZhbCQkKX1cclxuZnVuY3Rpb24gJGdvb2ckZXZlbnRzJGZpcmVMaXN0ZW5lciQkKCRsaXN0ZW5lciQkNDAkJCwkZXZlbnRPYmplY3QkJDUkJCl7dmFyICRydiQkMTMkJD0kbGlzdGVuZXIkJDQwJCQuaGFuZGxlRXZlbnQoJGV2ZW50T2JqZWN0JCQ1JCQpOyRsaXN0ZW5lciQkNDAkJC4kY2FsbE9uY2UkJiYkZ29vZyRldmVudHMkdW5saXN0ZW5CeUtleSQkKCRsaXN0ZW5lciQkNDAkJC5rZXkpO3JldHVybiAkcnYkJDEzJCR9XHJcbmZ1bmN0aW9uICRnb29nJGV2ZW50cyRoYW5kbGVCcm93c2VyRXZlbnRfJCQoJGtleSQkNDkkJCwkb3B0X2V2dCQkKXtpZighJGdvb2ckZXZlbnRzJGxpc3RlbmVyc18kJFska2V5JCQ0OSQkXSlyZXR1cm4gJEpTQ29tcGlsZXJfYWxpYXNfVFJVRSQkO3ZhciAkbGlzdGVuZXIkJDQxJCQ9JGdvb2ckZXZlbnRzJGxpc3RlbmVyc18kJFska2V5JCQ0OSQkXSwkYmUkJDFfdHlwZSQkNjckJD0kbGlzdGVuZXIkJDQxJCQudHlwZSwkbWFwJCQ2JCQ9JGdvb2ckZXZlbnRzJGxpc3RlbmVyVHJlZV8kJDtpZighKCRiZSQkMV90eXBlJCQ2NyQkIGluICRtYXAkJDYkJCkpcmV0dXJuICRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJDt2YXIgJG1hcCQkNiQkPSRtYXAkJDYkJFskYmUkJDFfdHlwZSQkNjckJF0sJGllRXZlbnRfcGFydCQkaW5saW5lXzY3X3JldHZhbCQkMSQkLCR0YXJnZXRzTWFwJCQxJCQ7aWYoISRnb29nJGV2ZW50cyRCcm93c2VyRmVhdHVyZSRIQVNfVzNDX0VWRU5UX1NVUFBPUlQkJCl7dmFyICRKU0NvbXBpbGVyX3RlbXAkJDhfaGFzQ2FwdHVyZSQkMl9wYXJ0cyQkaW5saW5lXzY1JCQ7XHJcbmlmKCEoJEpTQ29tcGlsZXJfdGVtcCQkOF9oYXNDYXB0dXJlJCQyX3BhcnRzJCRpbmxpbmVfNjUkJD0kb3B0X2V2dCQkKSlhOnskSlNDb21waWxlcl90ZW1wJCQ4X2hhc0NhcHR1cmUkJDJfcGFydHMkJGlubGluZV82NSQkPVwid2luZG93LmV2ZW50XCIuc3BsaXQoXCIuXCIpO2Zvcih2YXIgJGN1ciQkaW5saW5lXzY2X2hhc0J1YmJsZSQkMSQkPSRnb29nJGdsb2JhbCQkOyRpZUV2ZW50X3BhcnQkJGlubGluZV82N19yZXR2YWwkJDEkJD0kSlNDb21waWxlcl90ZW1wJCQ4X2hhc0NhcHR1cmUkJDJfcGFydHMkJGlubGluZV82NSQkLnNoaWZ0KCk7KWlmKCRjdXIkJGlubGluZV82Nl9oYXNCdWJibGUkJDEkJFskaWVFdmVudF9wYXJ0JCRpbmxpbmVfNjdfcmV0dmFsJCQxJCRdIT0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQpJGN1ciQkaW5saW5lXzY2X2hhc0J1YmJsZSQkMSQkPSRjdXIkJGlubGluZV82Nl9oYXNCdWJibGUkJDEkJFskaWVFdmVudF9wYXJ0JCRpbmxpbmVfNjdfcmV0dmFsJCQxJCRdO1xyXG5lbHNleyRKU0NvbXBpbGVyX3RlbXAkJDhfaGFzQ2FwdHVyZSQkMl9wYXJ0cyQkaW5saW5lXzY1JCQ9JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkO2JyZWFrIGF9JEpTQ29tcGlsZXJfdGVtcCQkOF9oYXNDYXB0dXJlJCQyX3BhcnRzJCRpbmxpbmVfNjUkJD0kY3VyJCRpbmxpbmVfNjZfaGFzQnViYmxlJCQxJCR9JGllRXZlbnRfcGFydCQkaW5saW5lXzY3X3JldHZhbCQkMSQkPSRKU0NvbXBpbGVyX3RlbXAkJDhfaGFzQ2FwdHVyZSQkMl9wYXJ0cyQkaW5saW5lXzY1JCQ7JEpTQ29tcGlsZXJfdGVtcCQkOF9oYXNDYXB0dXJlJCQyX3BhcnRzJCRpbmxpbmVfNjUkJD0kSlNDb21waWxlcl9hbGlhc19UUlVFJCQgaW4gJG1hcCQkNiQkOyRjdXIkJGlubGluZV82Nl9oYXNCdWJibGUkJDEkJD0kSlNDb21waWxlcl9hbGlhc19GQUxTRSQkIGluICRtYXAkJDYkJDtpZigkSlNDb21waWxlcl90ZW1wJCQ4X2hhc0NhcHR1cmUkJDJfcGFydHMkJGlubGluZV82NSQkKXtpZigwPiRpZUV2ZW50X3BhcnQkJGlubGluZV82N19yZXR2YWwkJDEkJC5rZXlDb2RlfHxcclxuJGllRXZlbnRfcGFydCQkaW5saW5lXzY3X3JldHZhbCQkMSQkLnJldHVyblZhbHVlIT0kSlNDb21waWxlcl9hbGlhc19WT0lEJCQpcmV0dXJuICRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJDthOnt2YXIgJGV2dCQkMTRfdXNlUmV0dXJuVmFsdWUkJGlubGluZV83MCQkPSRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCQ7aWYoMD09JGllRXZlbnRfcGFydCQkaW5saW5lXzY3X3JldHZhbCQkMSQkLmtleUNvZGUpdHJ5eyRpZUV2ZW50X3BhcnQkJGlubGluZV82N19yZXR2YWwkJDEkJC5rZXlDb2RlPS0xO2JyZWFrIGF9Y2F0Y2goJGV4JCRpbmxpbmVfNzEkJCl7JGV2dCQkMTRfdXNlUmV0dXJuVmFsdWUkJGlubGluZV83MCQkPSRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJH1pZigkZXZ0JCQxNF91c2VSZXR1cm5WYWx1ZSQkaW5saW5lXzcwJCR8fCRpZUV2ZW50X3BhcnQkJGlubGluZV82N19yZXR2YWwkJDEkJC5yZXR1cm5WYWx1ZT09JEpTQ29tcGlsZXJfYWxpYXNfVk9JRCQkKSRpZUV2ZW50X3BhcnQkJGlubGluZV82N19yZXR2YWwkJDEkJC5yZXR1cm5WYWx1ZT1cclxuJEpTQ29tcGlsZXJfYWxpYXNfVFJVRSQkfX0kZXZ0JCQxNF91c2VSZXR1cm5WYWx1ZSQkaW5saW5lXzcwJCQ9bmV3ICRnb29nJGV2ZW50cyRCcm93c2VyRXZlbnQkJDskZXZ0JCQxNF91c2VSZXR1cm5WYWx1ZSQkaW5saW5lXzcwJCQuJGluaXQkKCRpZUV2ZW50X3BhcnQkJGlubGluZV82N19yZXR2YWwkJDEkJCx0aGlzKTskaWVFdmVudF9wYXJ0JCRpbmxpbmVfNjdfcmV0dmFsJCQxJCQ9JEpTQ29tcGlsZXJfYWxpYXNfVFJVRSQkO3RyeXtpZigkSlNDb21waWxlcl90ZW1wJCQ4X2hhc0NhcHR1cmUkJDJfcGFydHMkJGlubGluZV82NSQkKXtmb3IodmFyICRhbmNlc3RvcnMkJDIkJD1bXSwkcGFyZW50JCQxOSQkPSRldnQkJDE0X3VzZVJldHVyblZhbHVlJCRpbmxpbmVfNzAkJC5jdXJyZW50VGFyZ2V0OyRwYXJlbnQkJDE5JCQ7JHBhcmVudCQkMTkkJD0kcGFyZW50JCQxOSQkLnBhcmVudE5vZGUpJGFuY2VzdG9ycyQkMiQkLnB1c2goJHBhcmVudCQkMTkkJCk7JHRhcmdldHNNYXAkJDEkJD1cclxuJG1hcCQkNiQkWyRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJF07JHRhcmdldHNNYXAkJDEkJC4kcmVtYWluaW5nXyQ9JHRhcmdldHNNYXAkJDEkJC4kY291bnRfJDtmb3IodmFyICRpJCQ2OSQkPSRhbmNlc3RvcnMkJDIkJC5sZW5ndGgtMTshJGV2dCQkMTRfdXNlUmV0dXJuVmFsdWUkJGlubGluZV83MCQkLiRwcm9wYWdhdGlvblN0b3BwZWRfJCYmMDw9JGkkJDY5JCQmJiR0YXJnZXRzTWFwJCQxJCQuJHJlbWFpbmluZ18kOyRpJCQ2OSQkLS0pJGV2dCQkMTRfdXNlUmV0dXJuVmFsdWUkJGlubGluZV83MCQkLmN1cnJlbnRUYXJnZXQ9JGFuY2VzdG9ycyQkMiQkWyRpJCQ2OSQkXSwkaWVFdmVudF9wYXJ0JCRpbmxpbmVfNjdfcmV0dmFsJCQxJCQmPSRnb29nJGV2ZW50cyRmaXJlTGlzdGVuZXJzXyQkKCR0YXJnZXRzTWFwJCQxJCQsJGFuY2VzdG9ycyQkMiQkWyRpJCQ2OSQkXSwkYmUkJDFfdHlwZSQkNjckJCwkSlNDb21waWxlcl9hbGlhc19UUlVFJCQsJGV2dCQkMTRfdXNlUmV0dXJuVmFsdWUkJGlubGluZV83MCQkKTtcclxuaWYoJGN1ciQkaW5saW5lXzY2X2hhc0J1YmJsZSQkMSQkKXskdGFyZ2V0c01hcCQkMSQkPSRtYXAkJDYkJFskSlNDb21waWxlcl9hbGlhc19GQUxTRSQkXTskdGFyZ2V0c01hcCQkMSQkLiRyZW1haW5pbmdfJD0kdGFyZ2V0c01hcCQkMSQkLiRjb3VudF8kO2ZvcigkaSQkNjkkJD0wOyEkZXZ0JCQxNF91c2VSZXR1cm5WYWx1ZSQkaW5saW5lXzcwJCQuJHByb3BhZ2F0aW9uU3RvcHBlZF8kJiYkaSQkNjkkJDwkYW5jZXN0b3JzJCQyJCQubGVuZ3RoJiYkdGFyZ2V0c01hcCQkMSQkLiRyZW1haW5pbmdfJDskaSQkNjkkJCsrKSRldnQkJDE0X3VzZVJldHVyblZhbHVlJCRpbmxpbmVfNzAkJC5jdXJyZW50VGFyZ2V0PSRhbmNlc3RvcnMkJDIkJFskaSQkNjkkJF0sJGllRXZlbnRfcGFydCQkaW5saW5lXzY3X3JldHZhbCQkMSQkJj0kZ29vZyRldmVudHMkZmlyZUxpc3RlbmVyc18kJCgkdGFyZ2V0c01hcCQkMSQkLCRhbmNlc3RvcnMkJDIkJFskaSQkNjkkJF0sJGJlJCQxX3R5cGUkJDY3JCQsXHJcbiRKU0NvbXBpbGVyX2FsaWFzX0ZBTFNFJCQsJGV2dCQkMTRfdXNlUmV0dXJuVmFsdWUkJGlubGluZV83MCQkKX19ZWxzZSAkaWVFdmVudF9wYXJ0JCRpbmxpbmVfNjdfcmV0dmFsJCQxJCQ9JGdvb2ckZXZlbnRzJGZpcmVMaXN0ZW5lciQkKCRsaXN0ZW5lciQkNDEkJCwkZXZ0JCQxNF91c2VSZXR1cm5WYWx1ZSQkaW5saW5lXzcwJCQpfWZpbmFsbHl7aWYoJGFuY2VzdG9ycyQkMiQkKSRhbmNlc3RvcnMkJDIkJC5sZW5ndGg9MDskZXZ0JCQxNF91c2VSZXR1cm5WYWx1ZSQkaW5saW5lXzcwJCQuJGRpc3Bvc2UkKCl9cmV0dXJuICRpZUV2ZW50X3BhcnQkJGlubGluZV82N19yZXR2YWwkJDEkJH0kYmUkJDFfdHlwZSQkNjckJD1uZXcgJGdvb2ckZXZlbnRzJEJyb3dzZXJFdmVudCQkKCRvcHRfZXZ0JCQsdGhpcyk7dHJ5eyRpZUV2ZW50X3BhcnQkJGlubGluZV82N19yZXR2YWwkJDEkJD0kZ29vZyRldmVudHMkZmlyZUxpc3RlbmVyJCQoJGxpc3RlbmVyJCQ0MSQkLCRiZSQkMV90eXBlJCQ2NyQkKX1maW5hbGx5eyRiZSQkMV90eXBlJCQ2NyQkLiRkaXNwb3NlJCgpfXJldHVybiAkaWVFdmVudF9wYXJ0JCRpbmxpbmVfNjdfcmV0dmFsJCQxJCR9XHJcbjtmdW5jdGlvbiAkZ29vZyRldmVudHMkRXZlbnRIYW5kbGVyJCQoJG9wdF9oYW5kbGVyJCQ3JCQpe3RoaXMuJGhhbmRsZXJfJD0kb3B0X2hhbmRsZXIkJDckJDt0aGlzLiRrZXlzXyQ9W119JGdvb2ckaW5oZXJpdHMkJCgkZ29vZyRldmVudHMkRXZlbnRIYW5kbGVyJCQsJGdvb2ckRGlzcG9zYWJsZSQkKTt2YXIgJGdvb2ckZXZlbnRzJEV2ZW50SGFuZGxlciR0eXBlQXJyYXlfJCQ9W107XHJcbmZ1bmN0aW9uICRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfbGlzdGVuJCQoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19saXN0ZW4kc2VsZiQkLCRzcmMkJDE2JCQsJHR5cGUkJDY4JCQsJG9wdF9mbiQkLCRvcHRfaGFuZGxlciQkOCQkKXtcImFycmF5XCIhPSRnb29nJHR5cGVPZiQkKCR0eXBlJCQ2OCQkKSYmKCRnb29nJGV2ZW50cyRFdmVudEhhbmRsZXIkdHlwZUFycmF5XyQkWzBdPSR0eXBlJCQ2OCQkLCR0eXBlJCQ2OCQkPSRnb29nJGV2ZW50cyRFdmVudEhhbmRsZXIkdHlwZUFycmF5XyQkKTtmb3IodmFyICRpJCQ3MCQkPTA7JGkkJDcwJCQ8JHR5cGUkJDY4JCQubGVuZ3RoOyRpJCQ3MCQkKyspJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19saXN0ZW4kc2VsZiQkLiRrZXlzXyQucHVzaCgkZ29vZyRldmVudHMkbGlzdGVuJCQoJHNyYyQkMTYkJCwkdHlwZSQkNjgkJFskaSQkNzAkJF0sJG9wdF9mbiQkfHwkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2xpc3RlbiRzZWxmJCQsJEpTQ29tcGlsZXJfYWxpYXNfRkFMU0UkJCxcclxuJG9wdF9oYW5kbGVyJCQ4JCR8fCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfbGlzdGVuJHNlbGYkJC4kaGFuZGxlcl8kfHwkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2xpc3RlbiRzZWxmJCQpKX0kZ29vZyRldmVudHMkRXZlbnRIYW5kbGVyJCQucHJvdG90eXBlLiRkaXNwb3NlSW50ZXJuYWwkPWZ1bmN0aW9uICQkZ29vZyRldmVudHMkRXZlbnRIYW5kbGVyJCQkJCRkaXNwb3NlSW50ZXJuYWwkJCgpeyRnb29nJGV2ZW50cyRFdmVudEhhbmRsZXIkJC4kc3VwZXJDbGFzc18kLiRkaXNwb3NlSW50ZXJuYWwkLmNhbGwodGhpcyk7JGdvb2ckYXJyYXkkZm9yRWFjaCQkKHRoaXMuJGtleXNfJCwkZ29vZyRldmVudHMkdW5saXN0ZW5CeUtleSQkKTt0aGlzLiRrZXlzXyQubGVuZ3RoPTB9OyRnb29nJGV2ZW50cyRFdmVudEhhbmRsZXIkJC5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24gJCRnb29nJGV2ZW50cyRFdmVudEhhbmRsZXIkJCQkaGFuZGxlRXZlbnQkKCl7JEpTQ29tcGlsZXJfYWxpYXNfVEhST1ckJChFcnJvcihcIkV2ZW50SGFuZGxlci5oYW5kbGVFdmVudCBub3QgaW1wbGVtZW50ZWRcIikpfTt2YXIgJGdvb2ckVGltZXIkZGVmYXVsdFRpbWVyT2JqZWN0JCQ9JGdvb2ckZ2xvYmFsJCQud2luZG93O1xyXG5mdW5jdGlvbiAkZ29vZyRUaW1lciRjYWxsT25jZSQkKCRsaXN0ZW5lciQkNDUkJCwkb3B0X2RlbGF5JCQsJG9wdF9oYW5kbGVyJCQxMyQkKXskZ29vZyRpc0Z1bmN0aW9uJCQoJGxpc3RlbmVyJCQ0NSQkKT8kb3B0X2hhbmRsZXIkJDEzJCQmJigkbGlzdGVuZXIkJDQ1JCQ9JGdvb2ckYmluZCQkKCRsaXN0ZW5lciQkNDUkJCwkb3B0X2hhbmRsZXIkJDEzJCQpKTokbGlzdGVuZXIkJDQ1JCQmJlwiZnVuY3Rpb25cIj09dHlwZW9mICRsaXN0ZW5lciQkNDUkJC5oYW5kbGVFdmVudD8kbGlzdGVuZXIkJDQ1JCQ9JGdvb2ckYmluZCQkKCRsaXN0ZW5lciQkNDUkJC5oYW5kbGVFdmVudCwkbGlzdGVuZXIkJDQ1JCQpOiRKU0NvbXBpbGVyX2FsaWFzX1RIUk9XJCQoRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpKTtyZXR1cm4gMjE0NzQ4MzY0Nzwkb3B0X2RlbGF5JCQ/LTE6JGdvb2ckVGltZXIkZGVmYXVsdFRpbWVyT2JqZWN0JCQuc2V0VGltZW91dCgkbGlzdGVuZXIkJDQ1JCQsJG9wdF9kZWxheSQkfHxcclxuMCl9O2Z1bmN0aW9uICRwaWNuZXQkdWkkZmlsdGVyJEZpbHRlclN0YXRlJCQoJGlkJCQyJCQsJHZhbHVlJCQ2MyQkLCRpZHgkJCwkdHlwZSQkNzMkJCl7dGhpcy5pZD0kaWQkJDIkJDt0aGlzLnZhbHVlPSR2YWx1ZSQkNjMkJDt0aGlzLiRpZHgkPSRpZHgkJDt0aGlzLnR5cGU9JHR5cGUkJDczJCR9JHBpY25ldCR1aSRmaWx0ZXIkRmlsdGVyU3RhdGUkJC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24gJCRwaWNuZXQkdWkkZmlsdGVyJEZpbHRlclN0YXRlJCQkJHRvU3RyaW5nJCgpe3JldHVyblwiaWRbXCIrdGhpcy5pZCtcIl0gdmFsdWVbXCIrdGhpcy52YWx1ZStcIl0gaWR4W1wiK3RoaXMuJGlkeCQrXCJdIHR5cGVbXCIrdGhpcy50eXBlK1wiXVwifTtmdW5jdGlvbiAkcGljbmV0JHVpJGZpbHRlciRHZW5lcmljTGlzdEZpbHRlck9wdGlvbnMkJCgpe30kcGljbmV0JHVpJGZpbHRlciRHZW5lcmljTGlzdEZpbHRlck9wdGlvbnMkJC5wcm90b3R5cGUuYWRkaXRpb25hbEZpbHRlclRyaWdnZXJzPVtdOyRwaWNuZXQkdWkkZmlsdGVyJEdlbmVyaWNMaXN0RmlsdGVyT3B0aW9ucyQkLnByb3RvdHlwZS5jbGVhckZpbHRlcnNDb250cm9scz1bXTskcGljbmV0JHVpJGZpbHRlciRHZW5lcmljTGlzdEZpbHRlck9wdGlvbnMkJC5wcm90b3R5cGUuZmlsdGVyRGVsYXk9MjUwOyRwaWNuZXQkdWkkZmlsdGVyJEdlbmVyaWNMaXN0RmlsdGVyT3B0aW9ucyQkLnByb3RvdHlwZS5maWx0ZXJUb29sVGlwTWVzc2FnZT0nUXVvdGVzIChcIikgbWF0Y2ggcGhyYXNlcy4gKG5vdCkgZXhjbHVkZXMgYSBtYXRjaCBmcm9tIHRoZSByZXN1bHRzLiAob3IpIGNhbiBiZSB1c2VkIHRvIGRvIE9yIHNlYXJjaGVzLiBJLmUuIFtyZWQgb3IgYmx1ZV0gd2lsbCBtYXRjaCBlaXRoZXIgcmVkIG9yIGJsdWUuIE51bWVyaWMgdmFsdWVzIHN1cHBvcnQgPj0sID4sIDw9LCA8LCA9IGFuZCAhPSBvcGVyYXRvcnMuJztcclxuJHBpY25ldCR1aSRmaWx0ZXIkR2VuZXJpY0xpc3RGaWx0ZXJPcHRpb25zJCQucHJvdG90eXBlLmVuYWJsZUNvb2tpZXM9JEpTQ29tcGlsZXJfYWxpYXNfVFJVRSQkOyRwaWNuZXQkdWkkZmlsdGVyJEdlbmVyaWNMaXN0RmlsdGVyT3B0aW9ucyQkLnByb3RvdHlwZS5tYXRjaGluZ0VsZW1lbnQ9JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkOyRwaWNuZXQkdWkkZmlsdGVyJEdlbmVyaWNMaXN0RmlsdGVyT3B0aW9ucyQkLnByb3RvdHlwZS5maWx0ZXJpbmdFbGVtZW50cz0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQ7JHBpY25ldCR1aSRmaWx0ZXIkR2VuZXJpY0xpc3RGaWx0ZXJPcHRpb25zJCQucHJvdG90eXBlLmFkZGl0aW9uYWxGaWx0ZXJWYWx1ZUNvb2tpZUlkPSRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJDtmdW5jdGlvbiAkcGljbmV0JHVpJGZpbHRlciRTZWFyY2hFbmdpbmUkJCgpe3RoaXMuJHByZWNlZGVuY2VzXyQ9e29yOjEsYW5kOjIsbm90OjN9fVxyXG5mdW5jdGlvbiAkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2RvZXNUZXh0TWF0Y2hUb2tlbnMkJCgkdGV4dFRvTWF0Y2gkJCwkcG9zdEZpeFRva2VucyQkLCRleGFjdE1hdGNoJCQpe2lmKCEkcG9zdEZpeFRva2VucyQkKXJldHVybiAkSlNDb21waWxlcl9hbGlhc19UUlVFJCQ7Zm9yKHZhciAkdGV4dFRvTWF0Y2gkJD0kZXhhY3RNYXRjaCQkPyR0ZXh0VG9NYXRjaCQkOiR0ZXh0VG9NYXRjaCQkLnRvTG93ZXJDYXNlKCksJHN0YWNrUmVzdWx0JCQ9W10sJHN0YWNrUmVzdWx0MV90b2tlbiQkNCQkLCRzdGFja1Jlc3VsdDIkJCwkaSQkNzMkJD0wOyRpJCQ3MyQkPCRwb3N0Rml4VG9rZW5zJCQubGVuZ3RoOyRpJCQ3MyQkKyspJHN0YWNrUmVzdWx0MV90b2tlbiQkNCQkPSRwb3N0Rml4VG9rZW5zJCRbJGkkJDczJCRdLFwiYW5kXCIhPT0kc3RhY2tSZXN1bHQxX3Rva2VuJCQ0JCQmJlwib3JcIiE9PSRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJCYmXCJub3RcIiE9PSRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJD9cclxuMD09PSRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJC5pbmRleE9mKFwiPlwiKXx8MD09PSRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJC5pbmRleE9mKFwiPFwiKXx8MD09PSRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJC5pbmRleE9mKFwiPVwiKXx8MD09PSRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJC5pbmRleE9mKFwiIT1cIik/JHN0YWNrUmVzdWx0JCQucHVzaCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2RvZXNOdW1iZXJNYXRjaFRva2VuJCQoJHN0YWNrUmVzdWx0MV90b2tlbiQkNCQkLCR0ZXh0VG9NYXRjaCQkKSk6JHN0YWNrUmVzdWx0JCQucHVzaCgkZXhhY3RNYXRjaCQkPyR0ZXh0VG9NYXRjaCQkPT09JHN0YWNrUmVzdWx0MV90b2tlbiQkNCQkOjA8PSR0ZXh0VG9NYXRjaCQkLmluZGV4T2YoJHN0YWNrUmVzdWx0MV90b2tlbiQkNCQkKSk6XCJhbmRcIj09PSRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJD8oJHN0YWNrUmVzdWx0MV90b2tlbiQkNCQkPSRzdGFja1Jlc3VsdCQkLnBvcCgpLCRzdGFja1Jlc3VsdDIkJD1cclxuJHN0YWNrUmVzdWx0JCQucG9wKCksJHN0YWNrUmVzdWx0JCQucHVzaCgkc3RhY2tSZXN1bHQxX3Rva2VuJCQ0JCQmJiRzdGFja1Jlc3VsdDIkJCkpOlwib3JcIj09PSRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJD8oJHN0YWNrUmVzdWx0MV90b2tlbiQkNCQkPSRzdGFja1Jlc3VsdCQkLnBvcCgpLCRzdGFja1Jlc3VsdDIkJD0kc3RhY2tSZXN1bHQkJC5wb3AoKSwkc3RhY2tSZXN1bHQkJC5wdXNoKCRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJHx8JHN0YWNrUmVzdWx0MiQkKSk6XCJub3RcIj09PSRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJCYmKCRzdGFja1Jlc3VsdDFfdG9rZW4kJDQkJD0kc3RhY2tSZXN1bHQkJC5wb3AoKSwkc3RhY2tSZXN1bHQkJC5wdXNoKCEkc3RhY2tSZXN1bHQxX3Rva2VuJCQ0JCQpKTtyZXR1cm4gMT09PSRzdGFja1Jlc3VsdCQkLmxlbmd0aCYmJHN0YWNrUmVzdWx0JCQucG9wKCl9XHJcbmZ1bmN0aW9uICRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfZG9lc051bWJlck1hdGNoVG9rZW4kJCgkdG9rZW4kJDUkJCwkdGV4dCQkOSQkKXt2YXIgJG9wX3R4dCQkaW5saW5lXzc2JCQsJGV4cCQkLCRhY3R1YWwkJDskb3BfdHh0JCRpbmxpbmVfNzYkJD0kdGV4dCQkOSQkO1wiJFwiPT09JG9wX3R4dCQkaW5saW5lXzc2JCQuY2hhckF0KDApJiYoJG9wX3R4dCQkaW5saW5lXzc2JCQ9JG9wX3R4dCQkaW5saW5lXzc2JCQuc3Vic3RyaW5nKDEpKTskYWN0dWFsJCQ9cGFyc2VGbG9hdCgkb3BfdHh0JCRpbmxpbmVfNzYkJCk7aWYoMD09PSR0b2tlbiQkNSQkLmluZGV4T2YoXCI9XCIpKSRvcF90eHQkJGlubGluZV83NiQkPVwiPVwiLCRleHAkJD1wYXJzZUZsb2F0KCR0b2tlbiQkNSQkLnN1YnN0cmluZygxKSk7ZWxzZSBpZigwPT09JHRva2VuJCQ1JCQuaW5kZXhPZihcIiE9XCIpKSRvcF90eHQkJGlubGluZV83NiQkPVwiIT1cIiwkZXhwJCQ9cGFyc2VGbG9hdCgkdG9rZW4kJDUkJC5zdWJzdHJpbmcoMikpO1xyXG5lbHNlIGlmKDA9PT0kdG9rZW4kJDUkJC5pbmRleE9mKFwiPj1cIikpJG9wX3R4dCQkaW5saW5lXzc2JCQ9XCI+PVwiLCRleHAkJD1wYXJzZUZsb2F0KCR0b2tlbiQkNSQkLnN1YnN0cmluZygyKSk7ZWxzZSBpZigwPT09JHRva2VuJCQ1JCQuaW5kZXhPZihcIj5cIikpJG9wX3R4dCQkaW5saW5lXzc2JCQ9XCI+XCIsJGV4cCQkPXBhcnNlRmxvYXQoJHRva2VuJCQ1JCQuc3Vic3RyaW5nKDEpKTtlbHNlIGlmKDA9PT0kdG9rZW4kJDUkJC5pbmRleE9mKFwiPD1cIikpJG9wX3R4dCQkaW5saW5lXzc2JCQ9XCI8PVwiLCRleHAkJD1wYXJzZUZsb2F0KCR0b2tlbiQkNSQkLnN1YnN0cmluZygyKSk7ZWxzZSBpZigwPT09JHRva2VuJCQ1JCQuaW5kZXhPZihcIjxcIikpJG9wX3R4dCQkaW5saW5lXzc2JCQ9XCI8XCIsJGV4cCQkPXBhcnNlRmxvYXQoJHRva2VuJCQ1JCQuc3Vic3RyaW5nKDEpKTtlbHNlIHJldHVybiAkSlNDb21waWxlcl9hbGlhc19UUlVFJCQ7c3dpdGNoKCRvcF90eHQkJGlubGluZV83NiQkKXtjYXNlIFwiIT1cIjpyZXR1cm4gJGFjdHVhbCQkIT09XHJcbiRleHAkJDtjYXNlIFwiPVwiOnJldHVybiAkYWN0dWFsJCQ9PT0kZXhwJCQ7Y2FzZSBcIj49XCI6cmV0dXJuICRhY3R1YWwkJD49JGV4cCQkO2Nhc2UgXCI+XCI6cmV0dXJuICRhY3R1YWwkJD4kZXhwJCQ7Y2FzZSBcIjw9XCI6cmV0dXJuICRhY3R1YWwkJDw9JGV4cCQkO2Nhc2UgXCI8XCI6cmV0dXJuICRhY3R1YWwkJDwkZXhwJCR9JEpTQ29tcGlsZXJfYWxpYXNfVEhST1ckJChFcnJvcihcIkNvdWxkIG5vdCBmaW5kIGEgbnVtYmVyIG9wZXJhdGlvbjogXCIrJG9wX3R4dCQkaW5saW5lXzc2JCQpKX1cclxuZnVuY3Rpb24gJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19ub3JtYWxpc2VUZXJtJCQoJHRva2VucyQkLCR0b2tlbiQkNyQkLCR0ZXJtJCQpe2Zvcih2YXIgJGlkeCQkMSQkPSR0b2tlbiQkNyQkLmluZGV4T2YoJHRlcm0kJCk7LTEhPT0kaWR4JCQxJCQ7KTA8JGlkeCQkMSQkJiYkdG9rZW5zJCQucHVzaCgkdG9rZW4kJDckJC5zdWJzdHJpbmcoMCwkaWR4JCQxJCQpKSwkdG9rZW5zJCQucHVzaCgkdGVybSQkKSwkdG9rZW4kJDckJD0kdG9rZW4kJDckJC5zdWJzdHJpbmcoJGlkeCQkMSQkKzEpLCRpZHgkJDEkJD0kdG9rZW4kJDckJC5pbmRleE9mKCR0ZXJtJCQpO3JldHVybiAkdG9rZW4kJDckJH07ZnVuY3Rpb24gJGdvb2ckbmV0JENvb2tpZXMkJCgkY29udGV4dCQkKXt0aGlzLiRkb2N1bWVudF8kPSRjb250ZXh0JCR9dmFyICRnb29nJG5ldCRDb29raWVzJFNQTElUX1JFXyQkPS9cXHMqO1xccyovO1xyXG4kZ29vZyRuZXQkQ29va2llcyQkLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24gJCRnb29nJG5ldCRDb29raWVzJCQkJHNldCQoJG5hbWUkJDYxJCQsJHZhbHVlJCQ2NSQkLCRleHBpcmVzU3RyX29wdF9tYXhBZ2UkJCwkb3B0X3BhdGhfcGF0aFN0ciQkLCRkb21haW5TdHJfb3B0X2RvbWFpbiQkLCRvcHRfc2VjdXJlX3NlY3VyZVN0ciQkKXsvWzs9XFxzXS8udGVzdCgkbmFtZSQkNjEkJCkmJiRKU0NvbXBpbGVyX2FsaWFzX1RIUk9XJCQoRXJyb3IoJ0ludmFsaWQgY29va2llIG5hbWUgXCInKyRuYW1lJCQ2MSQkKydcIicpKTsvWztcXHJcXG5dLy50ZXN0KCR2YWx1ZSQkNjUkJCkmJiRKU0NvbXBpbGVyX2FsaWFzX1RIUk9XJCQoRXJyb3IoJ0ludmFsaWQgY29va2llIHZhbHVlIFwiJyskdmFsdWUkJDY1JCQrJ1wiJykpOyRleHBpcmVzU3RyX29wdF9tYXhBZ2UkJCE9PSRKU0NvbXBpbGVyX2FsaWFzX1ZPSUQkJHx8KCRleHBpcmVzU3RyX29wdF9tYXhBZ2UkJD0tMSk7JGRvbWFpblN0cl9vcHRfZG9tYWluJCQ9XHJcbiRkb21haW5TdHJfb3B0X2RvbWFpbiQkP1wiO2RvbWFpbj1cIiskZG9tYWluU3RyX29wdF9kb21haW4kJDpcIlwiOyRvcHRfcGF0aF9wYXRoU3RyJCQ9JG9wdF9wYXRoX3BhdGhTdHIkJD9cIjtwYXRoPVwiKyRvcHRfcGF0aF9wYXRoU3RyJCQ6XCJcIjskb3B0X3NlY3VyZV9zZWN1cmVTdHIkJD0kb3B0X3NlY3VyZV9zZWN1cmVTdHIkJD9cIjtzZWN1cmVcIjpcIlwiOyRleHBpcmVzU3RyX29wdF9tYXhBZ2UkJD0wPiRleHBpcmVzU3RyX29wdF9tYXhBZ2UkJD9cIlwiOjA9PSRleHBpcmVzU3RyX29wdF9tYXhBZ2UkJD9cIjtleHBpcmVzPVwiKyhuZXcgRGF0ZSgxOTcwLDEsMSkpLnRvVVRDU3RyaW5nKCk6XCI7ZXhwaXJlcz1cIisobmV3IERhdGUoJGdvb2ckbm93JCQoKSsxRTMqJGV4cGlyZXNTdHJfb3B0X21heEFnZSQkKSkudG9VVENTdHJpbmcoKTt0aGlzLiRkb2N1bWVudF8kLmNvb2tpZT0kbmFtZSQkNjEkJCtcIj1cIiskdmFsdWUkJDY1JCQrJGRvbWFpblN0cl9vcHRfZG9tYWluJCQrJG9wdF9wYXRoX3BhdGhTdHIkJCtcclxuJGV4cGlyZXNTdHJfb3B0X21heEFnZSQkKyRvcHRfc2VjdXJlX3NlY3VyZVN0ciQkfTskZ29vZyRuZXQkQ29va2llcyQkLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24gJCRnb29nJG5ldCRDb29raWVzJCQkJGdldCQoJG5hbWUkJDYyJCQsJG9wdF9kZWZhdWx0JCQpe2Zvcih2YXIgJG5hbWVFcSQkPSRuYW1lJCQ2MiQkK1wiPVwiLCRwYXJ0cyQkMyQkPSh0aGlzLiRkb2N1bWVudF8kLmNvb2tpZXx8XCJcIikuc3BsaXQoJGdvb2ckbmV0JENvb2tpZXMkU1BMSVRfUkVfJCQpLCRpJCQ3NyQkPTAsJHBhcnQkJDIkJDskcGFydCQkMiQkPSRwYXJ0cyQkMyQkWyRpJCQ3NyQkXTskaSQkNzckJCsrKWlmKDA9PSRwYXJ0JCQyJCQuaW5kZXhPZigkbmFtZUVxJCQpKXJldHVybiAkcGFydCQkMiQkLnN1YnN0cigkbmFtZUVxJCQubGVuZ3RoKTtyZXR1cm4gJG9wdF9kZWZhdWx0JCR9O3ZhciAkZ29vZyRuZXQkY29va2llcyQkPW5ldyAkZ29vZyRuZXQkQ29va2llcyQkKGRvY3VtZW50KTtcclxuJGdvb2ckbmV0JGNvb2tpZXMkJC4kTUFYX0NPT0tJRV9MRU5HVEgkPTM5NTA7ZnVuY3Rpb24gJHBpY25ldCR1aSRmaWx0ZXIkR2VuZXJpY0xpc3RGaWx0ZXIkJCgkZmlsdGVySW5wdXQkJCwkbGlzdCQkLCRvcHRpb25zJCQyJCQpe3RoaXMubGlzdD0kbGlzdCQkO3RoaXMub3B0aW9ucz0kb3B0aW9ucyQkMiQkO3RoaXMuJGZpbHRlcklucHV0JD0kZmlsdGVySW5wdXQkJDt0aGlzLiRmaWx0ZXJzJD1bdGhpcy4kZmlsdGVySW5wdXQkXTt0aGlzLiRldmVudEhhbmRsZXIkPW5ldyAkZ29vZyRldmVudHMkRXZlbnRIYW5kbGVyJCQodGhpcyk7dGhpcy5zZWFyY2g9bmV3ICRwaWNuZXQkdWkkZmlsdGVyJFNlYXJjaEVuZ2luZSQkO3RoaXMuJGluaXRpYWxpc2VGaWx0ZXJzJCgpfSRnb29nJGluaGVyaXRzJCQoJHBpY25ldCR1aSRmaWx0ZXIkR2VuZXJpY0xpc3RGaWx0ZXIkJCwkZ29vZyREaXNwb3NhYmxlJCQpO3ZhciAkcGljbmV0JHVpJGZpbHRlciRHZW5lcmljTGlzdEZpbHRlciRmaWx0ZXJpZHgkJD0wOyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQ9JHBpY25ldCR1aSRmaWx0ZXIkR2VuZXJpY0xpc3RGaWx0ZXIkJC5wcm90b3R5cGU7XHJcbiRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuJGluaXRpYWxpc2VGaWx0ZXJzJD1mdW5jdGlvbiAkJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJCQkaW5pdGlhbGlzZUZpbHRlcnMkJCgpe3RoaXMuJGZpbHRlcktleSQ9KHRoaXMubGlzdC5nZXRBdHRyaWJ1dGUoXCJpZFwiKXx8dGhpcy5saXN0LmdldEF0dHJpYnV0ZShcIm5hbWVcIil8fFwiXCIpK1wiX1wiKyArKyRwaWNuZXQkdWkkZmlsdGVyJEdlbmVyaWNMaXN0RmlsdGVyJGZpbHRlcmlkeCQkK1wiX2ZpbHRlcnNcIjt0aGlzLiRpbml0aWFsaXNlQ29udHJvbENhY2hlcyQoKTskSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3JlZ2lzdGVyTGlzdGVuZXJzT25GaWx0ZXJzJCQodGhpcyk7dmFyICRhZGRpdGlvbmFsRmlsdGVyU3RhdGVzJCRpbmxpbmVfODdfZmlsdGVyU3RhdGUkJGlubGluZV84MiQkPXRoaXMub3B0aW9ucy5lbmFibGVDb29raWVzJiYkZ29vZyRuZXQkY29va2llcyQkLmdldCh0aGlzLiRmaWx0ZXJLZXkkKTtpZigkYWRkaXRpb25hbEZpbHRlclN0YXRlcyQkaW5saW5lXzg3X2ZpbHRlclN0YXRlJCRpbmxpbmVfODIkJCl7Zm9yKHZhciAkYWRkaXRpb25hbEZpbHRlclN0YXRlcyQkaW5saW5lXzg3X2ZpbHRlclN0YXRlJCRpbmxpbmVfODIkJD1cclxuJGFkZGl0aW9uYWxGaWx0ZXJTdGF0ZXMkJGlubGluZV84N19maWx0ZXJTdGF0ZSQkaW5saW5lXzgyJCQuc3BsaXQoXCJ8XCIpLCRhZGRpdGlvbmFsU3RhdGVzJCRpbmxpbmVfODhfc3RhdGVzJCRpbmxpbmVfODMkJD1bXSwkYWRkaXRpb25hbEZpbHRlclZhbHVlQ29va2llSWQkJGlubGluZV84Nl9pJCRpbmxpbmVfODQkJD0wOyRhZGRpdGlvbmFsRmlsdGVyVmFsdWVDb29raWVJZCQkaW5saW5lXzg2X2kkJGlubGluZV84NCQkPCRhZGRpdGlvbmFsRmlsdGVyU3RhdGVzJCRpbmxpbmVfODdfZmlsdGVyU3RhdGUkJGlubGluZV84MiQkLmxlbmd0aDskYWRkaXRpb25hbEZpbHRlclZhbHVlQ29va2llSWQkJGlubGluZV84Nl9pJCRpbmxpbmVfODQkJCsrKXt2YXIgJGFkZGl0aW9uYWxTdGF0ZSQkaW5saW5lXzg5X3N0YXRlJCRpbmxpbmVfODUkJD0kYWRkaXRpb25hbEZpbHRlclN0YXRlcyQkaW5saW5lXzg3X2ZpbHRlclN0YXRlJCRpbmxpbmVfODIkJFskYWRkaXRpb25hbEZpbHRlclZhbHVlQ29va2llSWQkJGlubGluZV84Nl9pJCRpbmxpbmVfODQkJF0uc3BsaXQoXCIsXCIpO1xyXG4kYWRkaXRpb25hbFN0YXRlcyQkaW5saW5lXzg4X3N0YXRlcyQkaW5saW5lXzgzJCQucHVzaChuZXcgJHBpY25ldCR1aSRmaWx0ZXIkRmlsdGVyU3RhdGUkJCgkYWRkaXRpb25hbFN0YXRlJCRpbmxpbmVfODlfc3RhdGUkJGlubGluZV84NSQkWzBdLCRhZGRpdGlvbmFsU3RhdGUkJGlubGluZV84OV9zdGF0ZSQkaW5saW5lXzg1JCRbM10scGFyc2VJbnQoJGFkZGl0aW9uYWxTdGF0ZSQkaW5saW5lXzg5X3N0YXRlJCRpbmxpbmVfODUkJFsxXSwxMCksJGFkZGl0aW9uYWxTdGF0ZSQkaW5saW5lXzg5X3N0YXRlJCRpbmxpbmVfODUkJFsyXSkpfSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlGaWx0ZXJTdGF0ZXMkJCh0aGlzLCRhZGRpdGlvbmFsU3RhdGVzJCRpbmxpbmVfODhfc3RhdGVzJCRpbmxpbmVfODMkJCwkSlNDb21waWxlcl9hbGlhc19UUlVFJCQpfWlmKCRhZGRpdGlvbmFsRmlsdGVyVmFsdWVDb29raWVJZCQkaW5saW5lXzg2X2kkJGlubGluZV84NCQkPXRoaXMub3B0aW9ucy5hZGRpdGlvbmFsRmlsdGVyVmFsdWVDb29raWVJZClpZigkYWRkaXRpb25hbEZpbHRlclN0YXRlcyQkaW5saW5lXzg3X2ZpbHRlclN0YXRlJCRpbmxpbmVfODIkJD1cclxudGhpcy5vcHRpb25zLmVuYWJsZUNvb2tpZXMmJiRnb29nJG5ldCRjb29raWVzJCQuZ2V0KCRhZGRpdGlvbmFsRmlsdGVyVmFsdWVDb29raWVJZCQkaW5saW5lXzg2X2kkJGlubGluZV84NCQkKSl7JGFkZGl0aW9uYWxGaWx0ZXJTdGF0ZXMkJGlubGluZV84N19maWx0ZXJTdGF0ZSQkaW5saW5lXzgyJCQ9JGFkZGl0aW9uYWxGaWx0ZXJTdGF0ZXMkJGlubGluZV84N19maWx0ZXJTdGF0ZSQkaW5saW5lXzgyJCQuc3BsaXQoXCJ8XCIpOyRhZGRpdGlvbmFsU3RhdGVzJCRpbmxpbmVfODhfc3RhdGVzJCRpbmxpbmVfODMkJD1bXTtmb3IoJGFkZGl0aW9uYWxGaWx0ZXJWYWx1ZUNvb2tpZUlkJCRpbmxpbmVfODZfaSQkaW5saW5lXzg0JCQ9MDskYWRkaXRpb25hbEZpbHRlclZhbHVlQ29va2llSWQkJGlubGluZV84Nl9pJCRpbmxpbmVfODQkJDwkYWRkaXRpb25hbEZpbHRlclN0YXRlcyQkaW5saW5lXzg3X2ZpbHRlclN0YXRlJCRpbmxpbmVfODIkJC5sZW5ndGg7JGFkZGl0aW9uYWxGaWx0ZXJWYWx1ZUNvb2tpZUlkJCRpbmxpbmVfODZfaSQkaW5saW5lXzg0JCQrKykkYWRkaXRpb25hbFN0YXRlJCRpbmxpbmVfODlfc3RhdGUkJGlubGluZV84NSQkPVxyXG4kYWRkaXRpb25hbEZpbHRlclN0YXRlcyQkaW5saW5lXzg3X2ZpbHRlclN0YXRlJCRpbmxpbmVfODIkJFskYWRkaXRpb25hbEZpbHRlclZhbHVlQ29va2llSWQkJGlubGluZV84Nl9pJCRpbmxpbmVfODQkJF0uc3BsaXQoXCIsXCIpLCRhZGRpdGlvbmFsU3RhdGVzJCRpbmxpbmVfODhfc3RhdGVzJCRpbmxpbmVfODMkJC5wdXNoKG5ldyAkcGljbmV0JHVpJGZpbHRlciRGaWx0ZXJTdGF0ZSQkKCRhZGRpdGlvbmFsU3RhdGUkJGlubGluZV84OV9zdGF0ZSQkaW5saW5lXzg1JCRbMF0sJGFkZGl0aW9uYWxTdGF0ZSQkaW5saW5lXzg5X3N0YXRlJCRpbmxpbmVfODUkJFszXSxwYXJzZUludCgkYWRkaXRpb25hbFN0YXRlJCRpbmxpbmVfODlfc3RhdGUkJGlubGluZV84NSQkWzFdLDEwKSwkYWRkaXRpb25hbFN0YXRlJCRpbmxpbmVfODlfc3RhdGUkJGlubGluZV84NSQkWzJdKSk7JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19hcHBseUZpbHRlclN0YXRlcyQkKHRoaXMsJGFkZGl0aW9uYWxTdGF0ZXMkJGlubGluZV84OF9zdGF0ZXMkJGlubGluZV84MyQkLFxyXG4kSlNDb21waWxlcl9hbGlhc19UUlVFJCQpfX07XHJcbmZ1bmN0aW9uICRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcmVnaXN0ZXJMaXN0ZW5lcnNPbkZpbHRlcnMkJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3JlZ2lzdGVyTGlzdGVuZXJzT25GaWx0ZXJzJHNlbGYkJCl7dmFyIGE7JGdvb2ckYXJyYXkkZm9yRWFjaCQkKCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcmVnaXN0ZXJMaXN0ZW5lcnNPbkZpbHRlcnMkc2VsZiQkLiRmaWx0ZXJzJCxmdW5jdGlvbigkZmlsdGVyJCQpeyRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfbGlzdGVuJCQodGhpcy4kZXZlbnRIYW5kbGVyJCwkZmlsdGVyJCQsXCJ0ZXh0XCI9PT0kZmlsdGVyJCQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKT9cImtleXVwXCI6XCJjaGFuZ2VcIix0aGlzLiRvbkZpbHRlckNoYW5nZWQkLHRoaXMpfSwkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3JlZ2lzdGVyTGlzdGVuZXJzT25GaWx0ZXJzJHNlbGYkJCk7aWYoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQub3B0aW9ucy5jbGVhckZpbHRlcnNDb250cm9scylmb3IodmFyICRpJCQ4MSQkPTA7JGkkJDgxJCQ8XHJcbiRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcmVnaXN0ZXJMaXN0ZW5lcnNPbkZpbHRlcnMkc2VsZiQkLm9wdGlvbnMuY2xlYXJGaWx0ZXJzQ29udHJvbHMubGVuZ3RoOyRpJCQ4MSQkKyspJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQub3B0aW9ucy5jbGVhckZpbHRlcnNDb250cm9sc1skaSQkODEkJF0ubGVuZ3RoJiYoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQub3B0aW9ucy5jbGVhckZpbHRlcnNDb250cm9sc1skaSQkODEkJF09JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQub3B0aW9ucy5jbGVhckZpbHRlcnNDb250cm9sc1skaSQkODEkJF1bMF0pLCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfbGlzdGVuJCQoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQuJGV2ZW50SGFuZGxlciQsXHJcbiRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcmVnaXN0ZXJMaXN0ZW5lcnNPbkZpbHRlcnMkc2VsZiQkLm9wdGlvbnMuY2xlYXJGaWx0ZXJzQ29udHJvbHNbJGkkJDgxJCRdLFwiY2xpY2tcIiwkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3JlZ2lzdGVyTGlzdGVuZXJzT25GaWx0ZXJzJHNlbGYkJC4kY2xlYXJBbGxGaWx0ZXJzJCwkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3JlZ2lzdGVyTGlzdGVuZXJzT25GaWx0ZXJzJHNlbGYkJCk7aWYoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQub3B0aW9ucy5hZGRpdGlvbmFsRmlsdGVyVHJpZ2dlcnMpZm9yKCRpJCQ4MSQkPTA7JGkkJDgxJCQ8JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQub3B0aW9ucy5hZGRpdGlvbmFsRmlsdGVyVHJpZ2dlcnMubGVuZ3RoOyRpJCQ4MSQkKyspe3ZhciAkdHJpZ2dlciQkPSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcmVnaXN0ZXJMaXN0ZW5lcnNPbkZpbHRlcnMkc2VsZiQkLm9wdGlvbnMuYWRkaXRpb25hbEZpbHRlclRyaWdnZXJzWyRpJCQ4MSQkXTtcclxuJHRyaWdnZXIkJC5sZW5ndGgmJihhPSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcmVnaXN0ZXJMaXN0ZW5lcnNPbkZpbHRlcnMkc2VsZiQkLm9wdGlvbnMuYWRkaXRpb25hbEZpbHRlclRyaWdnZXJzWyRpJCQ4MSQkXT0kdHJpZ2dlciQkWzBdLCR0cmlnZ2VyJCQ9YSk7dmFyICR0eXBlJCQ3NCQkPSR0cmlnZ2VyJCQub3B0aW9ucz9cInNlbGVjdC1vbmVcIjokdHJpZ2dlciQkLmdldEF0dHJpYnV0ZShcInR5cGVcIik7c3dpdGNoKCR0eXBlJCQ3NCQkKXtjYXNlIFwic2VsZWN0LW9uZVwiOiRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfbGlzdGVuJCQoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQuJGV2ZW50SGFuZGxlciQsJHRyaWdnZXIkJCxcImNoYW5nZVwiLCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcmVnaXN0ZXJMaXN0ZW5lcnNPbkZpbHRlcnMkc2VsZiQkLiRvbkZpbHRlckNoYW5nZWQkLCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcmVnaXN0ZXJMaXN0ZW5lcnNPbkZpbHRlcnMkc2VsZiQkKTtcclxuYnJlYWs7Y2FzZSBcInRleHRcIjokdHJpZ2dlciQkLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQub3B0aW9ucy5maWx0ZXJUb29sVGlwTWVzc2FnZSk7JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19saXN0ZW4kJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3JlZ2lzdGVyTGlzdGVuZXJzT25GaWx0ZXJzJHNlbGYkJC4kZXZlbnRIYW5kbGVyJCwkdHJpZ2dlciQkLFwia2V5dXBcIiwkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3JlZ2lzdGVyTGlzdGVuZXJzT25GaWx0ZXJzJHNlbGYkJC4kb25GaWx0ZXJDaGFuZ2VkJCwkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3JlZ2lzdGVyTGlzdGVuZXJzT25GaWx0ZXJzJHNlbGYkJCk7YnJlYWs7Y2FzZSBcImNoZWNrYm94XCI6JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19saXN0ZW4kJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3JlZ2lzdGVyTGlzdGVuZXJzT25GaWx0ZXJzJHNlbGYkJC4kZXZlbnRIYW5kbGVyJCxcclxuJHRyaWdnZXIkJCxcImNsaWNrXCIsJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQuJG9uRmlsdGVyQ2hhbmdlZCQsJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19yZWdpc3Rlckxpc3RlbmVyc09uRmlsdGVycyRzZWxmJCQpO2JyZWFrO2RlZmF1bHQ6JEpTQ29tcGlsZXJfYWxpYXNfVEhST1ckJChcIkZpbHRlciB0eXBlIFwiKyR0eXBlJCQ3NCQkK1wiIGlzIG5vdCBzdXBwb3J0ZWRcIil9fX1cclxuJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC4kY2xlYXJBbGxGaWx0ZXJzJD1mdW5jdGlvbiAkJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJCQkY2xlYXJBbGxGaWx0ZXJzJCQoKXskZ29vZyRhcnJheSRmb3JFYWNoJCQodGhpcy4kZmlsdGVycyQsdGhpcy4kY2xlYXJGaWx0ZXJWYWx1ZSQsdGhpcyk7dGhpcy5vcHRpb25zLmFkZGl0aW9uYWxGaWx0ZXJUcmlnZ2VycyYmJGdvb2ckYXJyYXkkZm9yRWFjaCQkKHRoaXMub3B0aW9ucy5hZGRpdGlvbmFsRmlsdGVyVHJpZ2dlcnMsdGhpcy4kY2xlYXJGaWx0ZXJWYWx1ZSQsdGhpcyk7dGhpcy5yZWZyZXNoKCl9O1xyXG4kSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkLiRjbGVhckZpbHRlclZhbHVlJD1mdW5jdGlvbiAkJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJCQkY2xlYXJGaWx0ZXJWYWx1ZSQkKCRmJCQyNiQkKXt2YXIgJHR5cGUkJDc1JCQ9JGYkJDI2JCQub3B0aW9ucz9cInNlbGVjdC1vbmVcIjokZiQkMjYkJC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpO3N3aXRjaCgkdHlwZSQkNzUkJCl7Y2FzZSBcInNlbGVjdC1vbmVcIjokZiQkMjYkJC5zZWxlY3RlZEluZGV4PTA7YnJlYWs7Y2FzZSBcInRleHRcIjokZiQkMjYkJC52YWx1ZT1cIlwiO2JyZWFrO2Nhc2UgXCJjaGVja2JveFwiOiRmJCQyNiQkLmNoZWNrZWQ9JEpTQ29tcGlsZXJfYWxpYXNfRkFMU0UkJDticmVhaztkZWZhdWx0OiRKU0NvbXBpbGVyX2FsaWFzX1RIUk9XJCQoXCJGaWx0ZXIgdHlwZSBcIiskdHlwZSQkNzUkJCtcIiBpcyBub3Qgc3VwcG9ydGVkXCIpfX07XHJcbiRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuJGluaXRpYWxpc2VDb250cm9sQ2FjaGVzJD1mdW5jdGlvbiAkJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJCQkaW5pdGlhbGlzZUNvbnRyb2xDYWNoZXMkJCgpe3RoaXMuJGxpc3RJdGVtcyQ9dGhpcy5saXN0LmNoaWxkTm9kZXN9OyRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuJG9uRmlsdGVyQ2hhbmdlZCQ9ZnVuY3Rpb24gJCRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQkJG9uRmlsdGVyQ2hhbmdlZCQkKCl7dGhpcy4kbGFzdGtleXRpbWUkPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3RoaXMuJHF1aWNrRmluZFRpbWVyJCgpfTtcclxuJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC4kcXVpY2tGaW5kVGltZXIkPWZ1bmN0aW9uICQkSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkJCRxdWlja0ZpbmRUaW1lciQkKCl7aWYodGhpcy4kbGFzdFRpbWVySUQkKWNsZWFyVGltZW91dCh0aGlzLiRsYXN0VGltZXJJRCQpLHRoaXMuJGxhc3RUaW1lcklEJD0wO3RoaXMuJGNhbmNlbFF1aWNrRmluZCQ9JEpTQ29tcGlsZXJfYWxpYXNfVFJVRSQkO3ZhciAkZGVsYXkkJDMkJD10aGlzLm9wdGlvbnMuZmlsdGVyRGVsYXk7KG5ldyBEYXRlKS5nZXRUaW1lKCktdGhpcy4kbGFzdGtleXRpbWUkPj0kZGVsYXkkJDMkJD90aGlzLnJlZnJlc2goKTp0aGlzLiRsYXN0VGltZXJJRCQ9JGdvb2ckVGltZXIkY2FsbE9uY2UkJChmdW5jdGlvbigpe3RoaXMuJHF1aWNrRmluZFRpbWVyJC5jYWxsKHRoaXMpfSwkZGVsYXkkJDMkJC8zLHRoaXMpfTtcclxuJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC5yZWZyZXNoPWZ1bmN0aW9uICQkSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkJHJlZnJlc2gkKCl7dGhpcy4kY2FuY2VsUXVpY2tGaW5kJD0kSlNDb21waWxlcl9hbGlhc19GQUxTRSQkO2NsZWFyVGltZW91dCh0aGlzLiRsYXN0VGltZXJJRCQpO3ZhciAkZmlsdGVyU3RhdGVzJCQ9dGhpcy4kZ2V0RmlsdGVyU3RhdGVzJCgpOyRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlGaWx0ZXJTdGF0ZXMkJCh0aGlzLCRmaWx0ZXJTdGF0ZXMkJCwkSlNDb21waWxlcl9hbGlhc19GQUxTRSQkKTtpZih0aGlzLm9wdGlvbnMuZW5hYmxlQ29va2llcyl7Zm9yKHZhciAkdmFsJCRpbmxpbmVfOTMkJD1bXSwkYWRkaXRpb25hbEZpbHRlciQkaW5saW5lXzk0JCQ9W10sJGFkZGl0aW9uYWxGaWx0ZXJWYWx1ZUNvb2tpZUlkJCRpbmxpbmVfOTUkJD0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQsJGkkJGlubGluZV85NiQkPTA7JGkkJGlubGluZV85NiQkPFxyXG4kZmlsdGVyU3RhdGVzJCQubGVuZ3RoOyRpJCRpbmxpbmVfOTYkJCsrKXt2YXIgJHN0YXRlJCRpbmxpbmVfOTckJD0kZmlsdGVyU3RhdGVzJCRbJGkkJGlubGluZV85NiQkXSwkdmFsJCRpbmxpbmVfOTMkJD0kSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FkZEZpbHRlclN0YXRlVG9TdHJpbmdBcnJheSQkKCR2YWwkJGlubGluZV85MyQkLCRzdGF0ZSQkaW5saW5lXzk3JCQpLCRhZGRpdGlvbmFsRmlsdGVyVmFsdWVDb29raWVJZCQkaW5saW5lXzk1JCQ9dGhpcy5vcHRpb25zLmFkZGl0aW9uYWxGaWx0ZXJWYWx1ZUNvb2tpZUlkO2lmKHRoaXMub3B0aW9ucy5hZGRpdGlvbmFsRmlsdGVyVHJpZ2dlcnMmJiRhZGRpdGlvbmFsRmlsdGVyVmFsdWVDb29raWVJZCQkaW5saW5lXzk1JCQpZm9yKHZhciAkaiQkaW5saW5lXzk4JCQ9MDskaiQkaW5saW5lXzk4JCQ8dGhpcy5vcHRpb25zLmFkZGl0aW9uYWxGaWx0ZXJUcmlnZ2Vycy5sZW5ndGg7JGokJGlubGluZV85OCQkKyspJHN0YXRlJCRpbmxpbmVfOTckJC5pZD09PVxyXG50aGlzLm9wdGlvbnMuYWRkaXRpb25hbEZpbHRlclRyaWdnZXJzWyRqJCRpbmxpbmVfOTgkJF0uZ2V0QXR0cmlidXRlKFwiaWRcIikmJigkYWRkaXRpb25hbEZpbHRlciQkaW5saW5lXzk0JCQ9JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19hZGRGaWx0ZXJTdGF0ZVRvU3RyaW5nQXJyYXkkJCgkYWRkaXRpb25hbEZpbHRlciQkaW5saW5lXzk0JCQsJHN0YXRlJCRpbmxpbmVfOTckJCkpfSRnb29nJG5ldCRjb29raWVzJCQuc2V0KHRoaXMuJGZpbHRlcktleSQsJHZhbCQkaW5saW5lXzkzJCQuam9pbihcIlwiKSw5OTk5OTkpO3RoaXMub3B0aW9ucy5hZGRpdGlvbmFsRmlsdGVyVHJpZ2dlcnMmJiRhZGRpdGlvbmFsRmlsdGVyVmFsdWVDb29raWVJZCQkaW5saW5lXzk1JCQmJiRnb29nJG5ldCRjb29raWVzJCQuc2V0KCRhZGRpdGlvbmFsRmlsdGVyVmFsdWVDb29raWVJZCQkaW5saW5lXzk1JCQsJGFkZGl0aW9uYWxGaWx0ZXIkJGlubGluZV85NCQkLmpvaW4oXCJcIiksOTk5OTk5KX19O1xyXG4kSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkLiRnZXRGaWx0ZXJTdGF0ZXMkPWZ1bmN0aW9uICQkSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkJCRnZXRGaWx0ZXJTdGF0ZXMkJCgpe3ZhciAkc3RhdGUkJDEkJD10aGlzLiRnZXRGaWx0ZXJTdGF0ZUZvckZpbHRlciQodGhpcy4kZmlsdGVySW5wdXQkKTtyZXR1cm4gJHN0YXRlJCQxJCQ/WyRzdGF0ZSQkMSQkXTpbXX07XHJcbiRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuJGdldEZpbHRlclN0YXRlRm9yRmlsdGVyJD1mdW5jdGlvbiAkJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJCQkZ2V0RmlsdGVyU3RhdGVGb3JGaWx0ZXIkJCgkZmlsdGVyJCQxJCQpe3ZhciAkdHlwZSQkNzYkJD0kZmlsdGVyJCQxJCQub3B0aW9ucz9cInNlbGVjdC1vbmVcIjokZmlsdGVyJCQxJCQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSwkdmFsdWUkJDY3JCQ7c3dpdGNoKCR0eXBlJCQ3NiQkKXtjYXNlIFwidGV4dFwiOiR2YWx1ZSQkNjckJD0kZmlsdGVyJCQxJCQudmFsdWU9PT0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQ/JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkOiRmaWx0ZXIkJDEkJC52YWx1ZS50b0xvd2VyQ2FzZSgpO2JyZWFrO2Nhc2UgXCJzZWxlY3Qtb25lXCI6JHZhbHVlJCQ2NyQkPTA9PT0kZmlsdGVyJCQxJCQuc2VsZWN0ZWRJbmRleD8kSlNDb21waWxlcl9hbGlhc19OVUxMJCQ6JGZpbHRlciQkMSQkLm9wdGlvbnNbJGZpbHRlciQkMSQkLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xyXG5icmVhaztjYXNlIFwiY2hlY2tib3hcIjokdmFsdWUkJDY3JCQ9JGZpbHRlciQkMSQkLmNoZWNrZWQ7YnJlYWs7ZGVmYXVsdDokSlNDb21waWxlcl9hbGlhc19USFJPVyQkKFwiRmlsdGVyIHR5cGUgXCIrJHR5cGUkJDc2JCQrXCIgaXMgbm90IHN1cHBvcnRlZFwiKX1yZXR1cm4gJHZhbHVlJCQ2NyQkPT09JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkfHwwPj0kdmFsdWUkJDY3JCQubGVuZ3RoPyRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJDpuZXcgJHBpY25ldCR1aSRmaWx0ZXIkRmlsdGVyU3RhdGUkJCgkZmlsdGVyJCQxJCQuZ2V0QXR0cmlidXRlKFwiaWRcIiksJHZhbHVlJCQ2NyQkLDAsJHR5cGUkJDc2JCQpfTtcclxuZnVuY3Rpb24gJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19hZGRGaWx0ZXJTdGF0ZVRvU3RyaW5nQXJyYXkkJCgkY29va2llU3RyaW5nQXJyYXkkJCwkZmlsdGVyU3RhdGUkJDEkJCl7MDwkY29va2llU3RyaW5nQXJyYXkkJC5sZW5ndGgmJiRjb29raWVTdHJpbmdBcnJheSQkLnB1c2goXCJ8XCIpOyRjb29raWVTdHJpbmdBcnJheSQkLnB1c2goJGZpbHRlclN0YXRlJCQxJCQuaWQpOyRjb29raWVTdHJpbmdBcnJheSQkLnB1c2goXCIsXCIpOyRjb29raWVTdHJpbmdBcnJheSQkLnB1c2goJGZpbHRlclN0YXRlJCQxJCQuJGlkeCQpOyRjb29raWVTdHJpbmdBcnJheSQkLnB1c2goXCIsXCIpOyRjb29raWVTdHJpbmdBcnJheSQkLnB1c2goJGZpbHRlclN0YXRlJCQxJCQudHlwZSk7JGNvb2tpZVN0cmluZ0FycmF5JCQucHVzaChcIixcIik7JGNvb2tpZVN0cmluZ0FycmF5JCQucHVzaCgkZmlsdGVyU3RhdGUkJDEkJC52YWx1ZSk7cmV0dXJuICRjb29raWVTdHJpbmdBcnJheSQkfVxyXG5mdW5jdGlvbiAkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FwcGx5RmlsdGVyU3RhdGVzJCQoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19hcHBseUZpbHRlclN0YXRlcyRzZWxmJCQsJGZpbHRlclN0YXRlcyQkMiQkLCRzZXRWYWx1ZU9uRmlsdGVyJCQpeyRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlGaWx0ZXJTdGF0ZXMkc2VsZiQkLm9wdGlvbnMuZmlsdGVyaW5nRWxlbWVudHMmJiRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlGaWx0ZXJTdGF0ZXMkc2VsZiQkLm9wdGlvbnMuZmlsdGVyaW5nRWxlbWVudHMoJGZpbHRlclN0YXRlcyQkMiQkKTskSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FwcGx5RmlsdGVyU3RhdGVzSW1wbCQkKCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlGaWx0ZXJTdGF0ZXMkc2VsZiQkLCRmaWx0ZXJTdGF0ZXMkJDIkJCwkc2V0VmFsdWVPbkZpbHRlciQkKTskSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FwcGx5RmlsdGVyU3RhdGVzJHNlbGYkJC5vcHRpb25zLmZpbHRlcmVkRWxlbWVudHMmJlxyXG4kSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FwcGx5RmlsdGVyU3RhdGVzJHNlbGYkJC5vcHRpb25zLmZpbHRlcmVkRWxlbWVudHMoJGZpbHRlclN0YXRlcyQkMiQkKX1cclxuZnVuY3Rpb24gJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19hcHBseUZpbHRlclN0YXRlc0ltcGwkJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FwcGx5RmlsdGVyU3RhdGVzSW1wbCRzZWxmJCQsJGZpbHRlclN0YXRlcyQkMyQkLCRzZXRWYWx1ZU9uRmlsdGVyJCQxJCQpeyRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfY2xlYXJFbGVtZW50RmlsdGVyZWRTdGF0ZXMkJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FwcGx5RmlsdGVyU3RhdGVzSW1wbCRzZWxmJCQpO2lmKCEoMD09PSghJGZpbHRlclN0YXRlcyQkMyQkfHwkZmlsdGVyU3RhdGVzJCQzJCQubGVuZ3RoKSYmJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19hcHBseUZpbHRlclN0YXRlc0ltcGwkc2VsZiQkLm9wdGlvbnMubWF0Y2hpbmdFbGVtZW50KSlpZigkZmlsdGVyU3RhdGVzJCQzJCQ9PT0kSlNDb21waWxlcl9hbGlhc19OVUxMJCR8fDA9PT0kZmlsdGVyU3RhdGVzJCQzJCQubGVuZ3RoKSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlTdGF0ZVRvRWxlbWVudHMkJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FwcGx5RmlsdGVyU3RhdGVzSW1wbCRzZWxmJCQsXHJcbiRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJCk7ZWxzZSBmb3IodmFyICRpJCQ4NCQkPTA7JGkkJDg0JCQ8JGZpbHRlclN0YXRlcyQkMyQkLmxlbmd0aDskaSQkODQkJCsrKXt2YXIgJHN0YXRlJCQzJCQ9JGZpbHRlclN0YXRlcyQkMyQkWyRpJCQ4NCQkXTtpZigkc2V0VmFsdWVPbkZpbHRlciQkMSQkJiYkc3RhdGUkJDMkJC50eXBlJiYkc3RhdGUkJDMkJC5pZCl7dmFyICRmaWx0ZXIkJDIkJD0kZ29vZyRpc1N0cmluZyQkKCRzdGF0ZSQkMyQkLmlkKT9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgkc3RhdGUkJDMkJC5pZCk6JHN0YXRlJCQzJCQuaWQ7MD09PSRmaWx0ZXIkJDIkJC5sZW5ndGgmJiRKU0NvbXBpbGVyX2FsaWFzX1RIUk9XJCQoXCJDb3VsZCBub3QgZmluZCB0aGUgc3BlZmljaWVkIGZpbHRlcjogXCIrJHN0YXRlJCQzJCQuaWQpO3N3aXRjaCgkc3RhdGUkJDMkJC50eXBlKXtjYXNlIFwic2VsZWN0LW9uZVwiOiRnb29nJGFycmF5JGZvckVhY2gkJCgkZmlsdGVyJCQyJCQub3B0aW9ucyxcclxuZnVuY3Rpb24oJG8kJDEkJCwkaWR4JCQyJCQpeyRvJCQxJCQudmFsdWU9PT0kc3RhdGUkJDMkJC52YWx1ZT8oJG8kJDEkJC5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLFwic2VsZWN0ZWRcIiksJGZpbHRlciQkMiQkLnNlbGVjdGVkSW5kZXg9JGlkeCQkMiQkKTokbyQkMSQkLnJlbW92ZUF0dHJpYnV0ZShcInNlbGVjdGVkXCIpfSk7YnJlYWs7Y2FzZSBcInRleHRcIjokZmlsdGVyJCQyJCQudmFsdWU9JHN0YXRlJCQzJCQudmFsdWU7YnJlYWs7Y2FzZSBcImNoZWNrYm94XCI6JGZpbHRlciQkMiQkLmNoZWNrZWQ9XCJ0cnVlXCI9PT0kc3RhdGUkJDMkJC52YWx1ZTticmVhaztkZWZhdWx0OiRKU0NvbXBpbGVyX2FsaWFzX1RIUk9XJCQoXCJGaWx0ZXIgdHlwZSBcIiskc3RhdGUkJDMkJC50eXBlK1wiIGlzIG5vdCBzdXBwb3J0ZWRcIil9fSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlTdGF0ZVRvRWxlbWVudHMkJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FwcGx5RmlsdGVyU3RhdGVzSW1wbCRzZWxmJCQsXHJcbiRzdGF0ZSQkMyQkKX0kSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2hpZGVFbGVtZW50c1RoYXREb05vdE1hdGNoQW55RmlsdHJlcyQkKCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlGaWx0ZXJTdGF0ZXNJbXBsJHNlbGYkJCl9ZnVuY3Rpb24gJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19jbGVhckVsZW1lbnRGaWx0ZXJlZFN0YXRlcyQkKCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfY2xlYXJFbGVtZW50RmlsdGVyZWRTdGF0ZXMkc2VsZiQkKXskZ29vZyRhcnJheSRmb3JFYWNoJCQoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19jbGVhckVsZW1lbnRGaWx0ZXJlZFN0YXRlcyRzZWxmJCQuJGxpc3RJdGVtcyQsZnVuY3Rpb24oJHIkJCl7JHIkJC5yZW1vdmVBdHRyaWJ1dGUoXCJmaWx0ZXJtYXRjaFwiKX0pfVxyXG5mdW5jdGlvbiAkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2FwcGx5U3RhdGVUb0VsZW1lbnRzJCQoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19hcHBseVN0YXRlVG9FbGVtZW50cyRzZWxmJCQsJGZpbHRlclN0YXRlJCQyJCQpe2Zvcih2YXIgJG5vcm1hbGlzZWRUb2tlbnMkJDMkJD0kSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2dldE5vcm1hbGlzZWRTZWFyY2hUb2tlbnNGb3JTdGF0ZSQkKCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlTdGF0ZVRvRWxlbWVudHMkc2VsZiQkLCRmaWx0ZXJTdGF0ZSQkMiQkKSwkaSQkODUkJD0wOyRpJCQ4NSQkPCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlTdGF0ZVRvRWxlbWVudHMkc2VsZiQkLiRsaXN0SXRlbXMkLmxlbmd0aCYmISRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlTdGF0ZVRvRWxlbWVudHMkc2VsZiQkLiRjYW5jZWxRdWlja0ZpbmQkOyRpJCQ4NSQkKyspe3ZhciAkaXRlbSQkPSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYXBwbHlTdGF0ZVRvRWxlbWVudHMkc2VsZiQkLiRsaXN0SXRlbXMkWyRpJCQ4NSQkXTtcclxuJGl0ZW0kJC5nZXRBdHRyaWJ1dGUoXCJmaWx0ZXJtYXRjaFwiKXx8JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19hcHBseVN0YXRlVG9FbGVtZW50cyRzZWxmJCQuJGRvZXNFbGVtZW50Q29udGFpblRleHQkKCRmaWx0ZXJTdGF0ZSQkMiQkLCRpdGVtJCQsJG5vcm1hbGlzZWRUb2tlbnMkJDMkJCl8fCRpdGVtJCQuc2V0QXR0cmlidXRlKFwiZmlsdGVybWF0Y2hcIixcImZhbHNlXCIpfX1cclxuZnVuY3Rpb24gJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19nZXROb3JtYWxpc2VkU2VhcmNoVG9rZW5zRm9yU3RhdGUkJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2dldE5vcm1hbGlzZWRTZWFyY2hUb2tlbnNGb3JTdGF0ZSRzZWxmJCQsJHN0YXRlJCQ0JCQpe2lmKCRzdGF0ZSQkNCQkPT09JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkKXJldHVybiAkSlNDb21waWxlcl9hbGlhc19OVUxMJCQ7c3dpdGNoKCRzdGF0ZSQkNCQkLnR5cGUpe2Nhc2UgXCJzZWxlY3Qtb25lXCI6cmV0dXJuWyRzdGF0ZSQkNCQkLnZhbHVlXTtjYXNlIFwidGV4dFwiOnZhciAkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3BhcnNlU2VhcmNoVG9rZW5zJHNlbGYkJGlubGluZV8xMDFfSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQxMDAkJDskSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3BhcnNlU2VhcmNoVG9rZW5zJHNlbGYkJGlubGluZV8xMDFfSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQxMDAkJD0kSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2dldE5vcm1hbGlzZWRTZWFyY2hUb2tlbnNGb3JTdGF0ZSRzZWxmJCQuc2VhcmNoO1xyXG52YXIgJG1hdGNoZXMkJGlubGluZV8xNzNfcG9zdEZpeCQkaW5saW5lXzE2MF90ZXh0JCRpbmxpbmVfMTAyX3Rva2VucyQkaW5saW5lXzE1MSQkPSRzdGF0ZSQkNCQkLnZhbHVlO2lmKCRtYXRjaGVzJCRpbmxpbmVfMTczX3Bvc3RGaXgkJGlubGluZV8xNjBfdGV4dCQkaW5saW5lXzEwMl90b2tlbnMkJGlubGluZV8xNTEkJCl7dmFyICRtYXRjaGVzJCRpbmxpbmVfMTczX3Bvc3RGaXgkJGlubGluZV8xNjBfdGV4dCQkaW5saW5lXzEwMl90b2tlbnMkJGlubGluZV8xNTEkJD0kbWF0Y2hlcyQkaW5saW5lXzE3M19wb3N0Rml4JCRpbmxpbmVfMTYwX3RleHQkJGlubGluZV8xMDJfdG9rZW5zJCRpbmxpbmVfMTUxJCQudG9Mb3dlckNhc2UoKSwkZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQ7JGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkPVxyXG4kbWF0Y2hlcyQkaW5saW5lXzE3M19wb3N0Rml4JCRpbmxpbmVfMTYwX3RleHQkJGlubGluZV8xMDJfdG9rZW5zJCRpbmxpbmVfMTUxJCQucmVwbGFjZShcIj49IFwiLFwiPj1cIikucmVwbGFjZShcIj4gXCIsXCI+XCIpLnJlcGxhY2UoXCI8PSBcIixcIjw9XCIpLnJlcGxhY2UoXCI8IFwiLFwiPFwiKS5yZXBsYWNlKFwiIT0gXCIsXCIhPVwiKS5yZXBsYWNlKFwiPSBcIixcIj1cIik7Zm9yKHZhciAkaSQkaW5saW5lXzE0OF9pJCRpbmxpbmVfMTU0X3JlZ2V4JCRpbmxpbmVfMTcyX3N0YWNrT3BlcmF0b3IkJGlubGluZV8xNjIkJD0vKFteXCJeXFxzXSspXFxzKnxcIihbXlwiXSspXCJcXHMqL2csJG1hdGNoZXMkJGlubGluZV8xNzNfcG9zdEZpeCQkaW5saW5lXzE2MF90ZXh0JCRpbmxpbmVfMTAyX3Rva2VucyQkaW5saW5lXzE1MSQkPVtdLCRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQ9JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkOyRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQ9XHJcbiRpJCRpbmxpbmVfMTQ4X2kkJGlubGluZV8xNTRfcmVnZXgkJGlubGluZV8xNzJfc3RhY2tPcGVyYXRvciQkaW5saW5lXzE2MiQkLmV4ZWMoJGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkKTspJG1hdGNoZXMkJGlubGluZV8xNzNfcG9zdEZpeCQkaW5saW5lXzE2MF90ZXh0JCRpbmxpbmVfMTAyX3Rva2VucyQkaW5saW5lXzE1MSQkLnB1c2goJGkkJGlubGluZV8xNjNfbWF0Y2gkJGlubGluZV8xNzRfdG9rZW4kJGlubGluZV8xNDlfdG9rZW4kJGlubGluZV8xNTUkJFsxXXx8JGkkJGlubGluZV8xNjNfbWF0Y2gkJGlubGluZV8xNzRfdG9rZW4kJGlubGluZV8xNDlfdG9rZW4kJGlubGluZV8xNTUkJFsyXSk7JGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkPVtdO1xyXG5mb3IoJGkkJGlubGluZV8xNDhfaSQkaW5saW5lXzE1NF9yZWdleCQkaW5saW5lXzE3Ml9zdGFja09wZXJhdG9yJCRpbmxpbmVfMTYyJCQ9MDskaSQkaW5saW5lXzE0OF9pJCRpbmxpbmVfMTU0X3JlZ2V4JCRpbmxpbmVfMTcyX3N0YWNrT3BlcmF0b3IkJGlubGluZV8xNjIkJDwkbWF0Y2hlcyQkaW5saW5lXzE3M19wb3N0Rml4JCRpbmxpbmVfMTYwX3RleHQkJGlubGluZV8xMDJfdG9rZW5zJCRpbmxpbmVfMTUxJCQubGVuZ3RoOyRpJCRpbmxpbmVfMTQ4X2kkJGlubGluZV8xNTRfcmVnZXgkJGlubGluZV8xNzJfc3RhY2tPcGVyYXRvciQkaW5saW5lXzE2MiQkKyspJGkkJGlubGluZV8xNjNfbWF0Y2gkJGlubGluZV8xNzRfdG9rZW4kJGlubGluZV8xNDlfdG9rZW4kJGlubGluZV8xNTUkJD0kbWF0Y2hlcyQkaW5saW5lXzE3M19wb3N0Rml4JCRpbmxpbmVfMTYwX3RleHQkJGlubGluZV8xMDJfdG9rZW5zJCRpbmxpbmVfMTUxJCRbJGkkJGlubGluZV8xNDhfaSQkaW5saW5lXzE1NF9yZWdleCQkaW5saW5lXzE3Ml9zdGFja09wZXJhdG9yJCRpbmxpbmVfMTYyJCRdLFxyXG4kaSQkaW5saW5lXzE2M19tYXRjaCQkaW5saW5lXzE3NF90b2tlbiQkaW5saW5lXzE0OV90b2tlbiQkaW5saW5lXzE1NSQkPSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfbm9ybWFsaXNlVGVybSQkKCRleHAkJGlubGluZV8xNzFfbmV3VG9rZW5zJCRpbmxpbmVfMTUyX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNDdfc3RhY2tPcHMkJGlubGluZV8xNjEkJCwkaSQkaW5saW5lXzE2M19tYXRjaCQkaW5saW5lXzE3NF90b2tlbiQkaW5saW5lXzE0OV90b2tlbiQkaW5saW5lXzE1NSQkLFwiKFwiKSwkaSQkaW5saW5lXzE2M19tYXRjaCQkaW5saW5lXzE3NF90b2tlbiQkaW5saW5lXzE0OV90b2tlbiQkaW5saW5lXzE1NSQkPSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfbm9ybWFsaXNlVGVybSQkKCRleHAkJGlubGluZV8xNzFfbmV3VG9rZW5zJCRpbmxpbmVfMTUyX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNDdfc3RhY2tPcHMkJGlubGluZV8xNjEkJCwkaSQkaW5saW5lXzE2M19tYXRjaCQkaW5saW5lXzE3NF90b2tlbiQkaW5saW5lXzE0OV90b2tlbiQkaW5saW5lXzE1NSQkLFxyXG5cIilcIiksMDwkaSQkaW5saW5lXzE2M19tYXRjaCQkaW5saW5lXzE3NF90b2tlbiQkaW5saW5lXzE0OV90b2tlbiQkaW5saW5lXzE1NSQkLmxlbmd0aCYmJGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkLnB1c2goJGkkJGlubGluZV8xNjNfbWF0Y2gkJGlubGluZV8xNzRfdG9rZW4kJGlubGluZV8xNDlfdG9rZW4kJGlubGluZV8xNTUkJCk7JG1hdGNoZXMkJGlubGluZV8xNzNfcG9zdEZpeCQkaW5saW5lXzE2MF90ZXh0JCRpbmxpbmVfMTAyX3Rva2VucyQkaW5saW5lXzE1MSQkPSRleHAkJGlubGluZV8xNzFfbmV3VG9rZW5zJCRpbmxpbmVfMTUyX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNDdfc3RhY2tPcHMkJGlubGluZV8xNjEkJDskZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQ9XHJcbltdO2Zvcih2YXIgJGxhc3RUb2tlbiQkaW5saW5lXzE1M19ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTU5JCQsJGkkJGlubGluZV8xNDhfaSQkaW5saW5lXzE1NF9yZWdleCQkaW5saW5lXzE3Ml9zdGFja09wZXJhdG9yJCRpbmxpbmVfMTYyJCQ9MDskaSQkaW5saW5lXzE0OF9pJCRpbmxpbmVfMTU0X3JlZ2V4JCRpbmxpbmVfMTcyX3N0YWNrT3BlcmF0b3IkJGlubGluZV8xNjIkJDwkbWF0Y2hlcyQkaW5saW5lXzE3M19wb3N0Rml4JCRpbmxpbmVfMTYwX3RleHQkJGlubGluZV8xMDJfdG9rZW5zJCRpbmxpbmVfMTUxJCQubGVuZ3RoOyRpJCRpbmxpbmVfMTQ4X2kkJGlubGluZV8xNTRfcmVnZXgkJGlubGluZV8xNzJfc3RhY2tPcGVyYXRvciQkaW5saW5lXzE2MiQkKyspaWYoKCRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQ9JG1hdGNoZXMkJGlubGluZV8xNzNfcG9zdEZpeCQkaW5saW5lXzE2MF90ZXh0JCRpbmxpbmVfMTAyX3Rva2VucyQkaW5saW5lXzE1MSQkWyRpJCRpbmxpbmVfMTQ4X2kkJGlubGluZV8xNTRfcmVnZXgkJGlubGluZV8xNzJfc3RhY2tPcGVyYXRvciQkaW5saW5lXzE2MiQkXSkmJlxyXG4wIT09JGkkJGlubGluZV8xNjNfbWF0Y2gkJGlubGluZV8xNzRfdG9rZW4kJGlubGluZV8xNDlfdG9rZW4kJGlubGluZV8xNTUkJC5sZW5ndGgpMD09PSRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQuaW5kZXhPZihcIi1cIikmJigkaSQkaW5saW5lXzE2M19tYXRjaCQkaW5saW5lXzE3NF90b2tlbiQkaW5saW5lXzE0OV90b2tlbiQkaW5saW5lXzE1NSQkPVwibm90XCIsJG1hdGNoZXMkJGlubGluZV8xNzNfcG9zdEZpeCQkaW5saW5lXzE2MF90ZXh0JCRpbmxpbmVfMTAyX3Rva2VucyQkaW5saW5lXzE1MSQkWyRpJCRpbmxpbmVfMTQ4X2kkJGlubGluZV8xNTRfcmVnZXgkJGlubGluZV8xNzJfc3RhY2tPcGVyYXRvciQkaW5saW5lXzE2MiQkXT0kbWF0Y2hlcyQkaW5saW5lXzE3M19wb3N0Rml4JCRpbmxpbmVfMTYwX3RleHQkJGlubGluZV8xMDJfdG9rZW5zJCRpbmxpbmVfMTUxJCRbJGkkJGlubGluZV8xNDhfaSQkaW5saW5lXzE1NF9yZWdleCQkaW5saW5lXzE3Ml9zdGFja09wZXJhdG9yJCRpbmxpbmVfMTYyJCRdLnN1YnN0cmluZygxKSxcclxuJGkkJGlubGluZV8xNDhfaSQkaW5saW5lXzE1NF9yZWdleCQkaW5saW5lXzE3Ml9zdGFja09wZXJhdG9yJCRpbmxpbmVfMTYyJCQtLSksJGxhc3RUb2tlbiQkaW5saW5lXzE1M19ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTU5JCQmJlwiKFwiIT09JGxhc3RUb2tlbiQkaW5saW5lXzE1M19ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTU5JCQmJlwibm90XCIhPT0kbGFzdFRva2VuJCRpbmxpbmVfMTUzX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNTkkJCYmXCJhbmRcIiE9PSRsYXN0VG9rZW4kJGlubGluZV8xNTNfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE1OSQkJiZcIm9yXCIhPT0kbGFzdFRva2VuJCRpbmxpbmVfMTUzX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNTkkJCYmXCJhbmRcIiE9PSRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQmJlwib3JcIiE9PSRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQmJlxyXG5cIilcIiE9PSRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQmJiRleHAkJGlubGluZV8xNzFfbmV3VG9rZW5zJCRpbmxpbmVfMTUyX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNDdfc3RhY2tPcHMkJGlubGluZV8xNjEkJC5wdXNoKFwiYW5kXCIpLCRleHAkJGlubGluZV8xNzFfbmV3VG9rZW5zJCRpbmxpbmVfMTUyX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNDdfc3RhY2tPcHMkJGlubGluZV8xNjEkJC5wdXNoKCRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQpLCRsYXN0VG9rZW4kJGlubGluZV8xNTNfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE1OSQkPSRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQ7JGxhc3RUb2tlbiQkaW5saW5lXzE1M19ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTU5JCQ9XHJcbiRleHAkJGlubGluZV8xNzFfbmV3VG9rZW5zJCRpbmxpbmVfMTUyX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNDdfc3RhY2tPcHMkJGlubGluZV8xNjEkJDskbWF0Y2hlcyQkaW5saW5lXzE3M19wb3N0Rml4JCRpbmxpbmVfMTYwX3RleHQkJGlubGluZV8xMDJfdG9rZW5zJCRpbmxpbmVfMTUxJCQ9XCJcIjskZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQ9W107Zm9yKCRpJCRpbmxpbmVfMTYzX21hdGNoJCRpbmxpbmVfMTc0X3Rva2VuJCRpbmxpbmVfMTQ5X3Rva2VuJCRpbmxpbmVfMTU1JCQ9MDskaSQkaW5saW5lXzE2M19tYXRjaCQkaW5saW5lXzE3NF90b2tlbiQkaW5saW5lXzE0OV90b2tlbiQkaW5saW5lXzE1NSQkPCRsYXN0VG9rZW4kJGlubGluZV8xNTNfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE1OSQkLmxlbmd0aDskaSQkaW5saW5lXzE2M19tYXRjaCQkaW5saW5lXzE3NF90b2tlbiQkaW5saW5lXzE0OV90b2tlbiQkaW5saW5lXzE1NSQkKyspe3ZhciAkdG9rZW4kJGlubGluZV8xNjQkJD1cclxuJGxhc3RUb2tlbiQkaW5saW5lXzE1M19ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTU5JCRbJGkkJGlubGluZV8xNjNfbWF0Y2gkJGlubGluZV8xNzRfdG9rZW4kJGlubGluZV8xNDlfdG9rZW4kJGlubGluZV8xNTUkJF07aWYoMCE9PSR0b2tlbiQkaW5saW5lXzE2NCQkLmxlbmd0aClpZihcImFuZFwiIT09JHRva2VuJCRpbmxpbmVfMTY0JCQmJlwib3JcIiE9PSR0b2tlbiQkaW5saW5lXzE2NCQkJiZcIm5vdFwiIT09JHRva2VuJCRpbmxpbmVfMTY0JCQmJlwiKFwiIT09JHRva2VuJCRpbmxpbmVfMTY0JCQmJlwiKVwiIT09JHRva2VuJCRpbmxpbmVfMTY0JCQpJG1hdGNoZXMkJGlubGluZV8xNzNfcG9zdEZpeCQkaW5saW5lXzE2MF90ZXh0JCRpbmxpbmVfMTAyX3Rva2VucyQkaW5saW5lXzE1MSQkPSRtYXRjaGVzJCRpbmxpbmVfMTczX3Bvc3RGaXgkJGlubGluZV8xNjBfdGV4dCQkaW5saW5lXzEwMl90b2tlbnMkJGlubGluZV8xNTEkJCtcInxcIiskdG9rZW4kJGlubGluZV8xNjQkJDtlbHNlIGlmKDA9PT1cclxuJGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkLmxlbmd0aHx8XCIoXCI9PT0kdG9rZW4kJGlubGluZV8xNjQkJCkkZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQucHVzaCgkdG9rZW4kJGlubGluZV8xNjQkJCk7ZWxzZSBpZihcIilcIj09PSR0b2tlbiQkaW5saW5lXzE2NCQkKWZvcigkaSQkaW5saW5lXzE0OF9pJCRpbmxpbmVfMTU0X3JlZ2V4JCRpbmxpbmVfMTcyX3N0YWNrT3BlcmF0b3IkJGlubGluZV8xNjIkJD0kZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQucG9wKCk7XCIoXCIhPT0kaSQkaW5saW5lXzE0OF9pJCRpbmxpbmVfMTU0X3JlZ2V4JCRpbmxpbmVfMTcyX3N0YWNrT3BlcmF0b3IkJGlubGluZV8xNjIkJCYmXHJcbjA8JGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkLmxlbmd0aDspJG1hdGNoZXMkJGlubGluZV8xNzNfcG9zdEZpeCQkaW5saW5lXzE2MF90ZXh0JCRpbmxpbmVfMTAyX3Rva2VucyQkaW5saW5lXzE1MSQkPSRtYXRjaGVzJCRpbmxpbmVfMTczX3Bvc3RGaXgkJGlubGluZV8xNjBfdGV4dCQkaW5saW5lXzEwMl90b2tlbnMkJGlubGluZV8xNTEkJCtcInxcIiskaSQkaW5saW5lXzE0OF9pJCRpbmxpbmVfMTU0X3JlZ2V4JCRpbmxpbmVfMTcyX3N0YWNrT3BlcmF0b3IkJGlubGluZV8xNjIkJCwkaSQkaW5saW5lXzE0OF9pJCRpbmxpbmVfMTU0X3JlZ2V4JCRpbmxpbmVfMTcyX3N0YWNrT3BlcmF0b3IkJGlubGluZV8xNjIkJD0kZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQucG9wKCk7XHJcbmVsc2V7aWYoXCIoXCIhPT0kZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCRbJGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkLmxlbmd0aC0xXSlmb3IoOzAhPT0kZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQubGVuZ3RoJiYhKFwiKFwiPT09JGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkWyRleHAkJGlubGluZV8xNzFfbmV3VG9rZW5zJCRpbmxpbmVfMTUyX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNDdfc3RhY2tPcHMkJGlubGluZV8xNjEkJC5sZW5ndGgtXHJcbjFdKTspaWYoJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19wYXJzZVNlYXJjaFRva2VucyRzZWxmJCRpbmxpbmVfMTAxX0pTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCQkMTAwJCQuJHByZWNlZGVuY2VzXyRbJGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkWyRleHAkJGlubGluZV8xNzFfbmV3VG9rZW5zJCRpbmxpbmVfMTUyX25vcm1hbGlzZWRUb2tlbnMkJGlubGluZV8xNDdfc3RhY2tPcHMkJGlubGluZV8xNjEkJC5sZW5ndGgtMV1dPiRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcGFyc2VTZWFyY2hUb2tlbnMkc2VsZiQkaW5saW5lXzEwMV9KU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDEwMCQkLiRwcmVjZWRlbmNlc18kWyR0b2tlbiQkaW5saW5lXzE2NCQkXSkkaSQkaW5saW5lXzE0OF9pJCRpbmxpbmVfMTU0X3JlZ2V4JCRpbmxpbmVfMTcyX3N0YWNrT3BlcmF0b3IkJGlubGluZV8xNjIkJD1cclxuJGV4cCQkaW5saW5lXzE3MV9uZXdUb2tlbnMkJGlubGluZV8xNTJfbm9ybWFsaXNlZFRva2VucyQkaW5saW5lXzE0N19zdGFja09wcyQkaW5saW5lXzE2MSQkLnBvcCgpLCRtYXRjaGVzJCRpbmxpbmVfMTczX3Bvc3RGaXgkJGlubGluZV8xNjBfdGV4dCQkaW5saW5lXzEwMl90b2tlbnMkJGlubGluZV8xNTEkJD0kbWF0Y2hlcyQkaW5saW5lXzE3M19wb3N0Rml4JCRpbmxpbmVfMTYwX3RleHQkJGlubGluZV8xMDJfdG9rZW5zJCRpbmxpbmVfMTUxJCQrXCJ8XCIrJGkkJGlubGluZV8xNDhfaSQkaW5saW5lXzE1NF9yZWdleCQkaW5saW5lXzE3Ml9zdGFja09wZXJhdG9yJCRpbmxpbmVfMTYyJCQ7ZWxzZSBicmVhazskZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQucHVzaCgkdG9rZW4kJGlubGluZV8xNjQkJCl9fWZvcig7MDwkZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQubGVuZ3RoOykkbWF0Y2hlcyQkaW5saW5lXzE3M19wb3N0Rml4JCRpbmxpbmVfMTYwX3RleHQkJGlubGluZV8xMDJfdG9rZW5zJCRpbmxpbmVfMTUxJCQ9XHJcbiRtYXRjaGVzJCRpbmxpbmVfMTczX3Bvc3RGaXgkJGlubGluZV8xNjBfdGV4dCQkaW5saW5lXzEwMl90b2tlbnMkJGlubGluZV8xNTEkJCtcInxcIiskZXhwJCRpbmxpbmVfMTcxX25ld1Rva2VucyQkaW5saW5lXzE1Ml9ub3JtYWxpc2VkVG9rZW5zJCRpbmxpbmVfMTQ3X3N0YWNrT3BzJCRpbmxpbmVfMTYxJCQucG9wKCk7JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19wYXJzZVNlYXJjaFRva2VucyRzZWxmJCRpbmxpbmVfMTAxX0pTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCQkMTAwJCQ9JG1hdGNoZXMkJGlubGluZV8xNzNfcG9zdEZpeCQkaW5saW5lXzE2MF90ZXh0JCRpbmxpbmVfMTAyX3Rva2VucyQkaW5saW5lXzE1MSQkLnN1YnN0cmluZygxKS5zcGxpdChcInxcIil9ZWxzZSAkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX3BhcnNlU2VhcmNoVG9rZW5zJHNlbGYkJGlubGluZV8xMDFfSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQxMDAkJD0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQ7cmV0dXJuICRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfcGFyc2VTZWFyY2hUb2tlbnMkc2VsZiQkaW5saW5lXzEwMV9KU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDEwMCQkO1xyXG5jYXNlIFwiY2hlY2tib3hcIjpyZXR1cm4gJEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkO2RlZmF1bHQ6JEpTQ29tcGlsZXJfYWxpYXNfVEhST1ckJChcIlN0YXRlIHR5cGUgXCIrJHN0YXRlJCQ0JCQudHlwZStcIiBpcyBub3Qgc3VwcG9ydGVkXCIpfX1cclxuZnVuY3Rpb24gJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19oaWRlRWxlbWVudHNUaGF0RG9Ob3RNYXRjaEFueUZpbHRyZXMkJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2hpZGVFbGVtZW50c1RoYXREb05vdE1hdGNoQW55RmlsdHJlcyRzZWxmJCQpe2Zvcih2YXIgJGkkJDg2JCQ9MDskaSQkODYkJDwkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2hpZGVFbGVtZW50c1RoYXREb05vdE1hdGNoQW55RmlsdHJlcyRzZWxmJCQuJGxpc3RJdGVtcyQubGVuZ3RoJiYhJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19oaWRlRWxlbWVudHNUaGF0RG9Ob3RNYXRjaEFueUZpbHRyZXMkc2VsZiQkLiRjYW5jZWxRdWlja0ZpbmQkOyRpJCQ4NiQkKyspe3ZhciAkaXRlbSQkMSQkPSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfaGlkZUVsZW1lbnRzVGhhdERvTm90TWF0Y2hBbnlGaWx0cmVzJHNlbGYkJC4kbGlzdEl0ZW1zJFskaSQkODYkJF0sJHNob3ckJD1cImZhbHNlXCIhPT0kaXRlbSQkMSQkLmdldEF0dHJpYnV0ZShcImZpbHRlcm1hdGNoXCIpO1xyXG4kaXRlbSQkMSQkLnN0eWxlLmRpc3BsYXk9JHNob3ckJD9cIlwiOlwibm9uZVwifX1cclxuJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC4kZG9lc0VsZW1lbnRDb250YWluVGV4dCQ9ZnVuY3Rpb24gJCRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQkJGRvZXNFbGVtZW50Q29udGFpblRleHQkJCgkc3RhdGUkJDUkJCwkaXRlbSQkMiQkLCR0ZXh0VG9rZW5zJCQxJCQsJG9wdFRleHRfdGV4dCQkaW5saW5lXzE2NyQkKXt2YXIgJEpTQ29tcGlsZXJfdGVtcCQkMTM1X0pTQ29tcGlsZXJfdGVtcCQkMl9leGFjdF9vYmplY3QkJGlubGluZV8xMTIkJD0kc3RhdGUkJDUkJCE9JEpTQ29tcGlsZXJfYWxpYXNfTlVMTCQkJiZcInNlbGVjdC1vbmVcIj09PSRzdGF0ZSQkNSQkLnR5cGU7JG9wdFRleHRfdGV4dCQkaW5saW5lXzE2NyQkfHwoJG9wdFRleHRfdGV4dCQkaW5saW5lXzE2NyQkPSRnb29nJHN0cmluZyR0cmltJCQoJGdvb2ckZG9tJGdldFRleHRDb250ZW50JCQoJGl0ZW0kJDIkJCkpKTtpZigkSlNDb21waWxlcl90ZW1wJCQxMzVfSlNDb21waWxlcl90ZW1wJCQyX2V4YWN0X29iamVjdCQkaW5saW5lXzExMiQkPSRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfZG9lc1RleHRNYXRjaFRva2VucyQkKCRvcHRUZXh0X3RleHQkJGlubGluZV8xNjckJCxcclxuJHRleHRUb2tlbnMkJDEkJCwkSlNDb21waWxlcl90ZW1wJCQxMzVfSlNDb21waWxlcl90ZW1wJCQyX2V4YWN0X29iamVjdCQkaW5saW5lXzExMiQkKSl0aGlzLm9wdGlvbnMubWF0Y2hpbmdFbGVtZW50PygkSlNDb21waWxlcl90ZW1wJCQxMzVfSlNDb21waWxlcl90ZW1wJCQyX2V4YWN0X29iamVjdCQkaW5saW5lXzExMiQkPSRpdGVtJCQyJCQsd2luZG93LmpRdWVyeSYmKCRKU0NvbXBpbGVyX3RlbXAkJDEzNV9KU0NvbXBpbGVyX3RlbXAkJDJfZXhhY3Rfb2JqZWN0JCRpbmxpbmVfMTEyJCQ9d2luZG93LmpRdWVyeSgkaXRlbSQkMiQkKSksJEpTQ29tcGlsZXJfdGVtcCQkMTM1X0pTQ29tcGlsZXJfdGVtcCQkMl9leGFjdF9vYmplY3QkJGlubGluZV8xMTIkJD10aGlzLm9wdGlvbnMubWF0Y2hpbmdFbGVtZW50KCRzdGF0ZSQkNSQkLCRKU0NvbXBpbGVyX3RlbXAkJDEzNV9KU0NvbXBpbGVyX3RlbXAkJDJfZXhhY3Rfb2JqZWN0JCRpbmxpbmVfMTEyJCQsJHRleHRUb2tlbnMkJDEkJCkpOlxyXG4kSlNDb21waWxlcl90ZW1wJCQxMzVfSlNDb21waWxlcl90ZW1wJCQyX2V4YWN0X29iamVjdCQkaW5saW5lXzExMiQkPSRKU0NvbXBpbGVyX2FsaWFzX1RSVUUkJDtyZXR1cm4gJEpTQ29tcGlsZXJfdGVtcCQkMTM1X0pTQ29tcGlsZXJfdGVtcCQkMl9leGFjdF9vYmplY3QkJGlubGluZV8xMTIkJH07XHJcbiRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuJGRpc3Bvc2VJbnRlcm5hbCQ9ZnVuY3Rpb24gJCRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQkJGRpc3Bvc2VJbnRlcm5hbCQkKCl7JHBpY25ldCR1aSRmaWx0ZXIkR2VuZXJpY0xpc3RGaWx0ZXIkJC4kc3VwZXJDbGFzc18kLiRkaXNwb3NlSW50ZXJuYWwkLmNhbGwodGhpcyk7JGdvb2ckZGlzcG9zZSQkKHRoaXMub3B0aW9ucyk7JGdvb2ckZGlzcG9zZSQkKHRoaXMuJGV2ZW50SGFuZGxlciQpOyRnb29nJGRpc3Bvc2UkJCh0aGlzLnNlYXJjaCk7ZGVsZXRlIHRoaXMubGlzdDtkZWxldGUgdGhpcy4kZmlsdGVySW5wdXQkO2RlbGV0ZSB0aGlzLiRsaXN0SXRlbXMkO2RlbGV0ZSB0aGlzLiRmaWx0ZXJzJH07ZnVuY3Rpb24gJHBpY25ldCR1aSRmaWx0ZXIkVGFibGVGaWx0ZXJPcHRpb25zJCQoKXt9JGdvb2ckaW5oZXJpdHMkJCgkcGljbmV0JHVpJGZpbHRlciRUYWJsZUZpbHRlck9wdGlvbnMkJCwkcGljbmV0JHVpJGZpbHRlciRHZW5lcmljTGlzdEZpbHRlck9wdGlvbnMkJCk7ZnVuY3Rpb24gJHBpY25ldCR1aSRmaWx0ZXIkVGFibGVGaWx0ZXIkJCgkZ3JpZCQkLCRvcHRpb25zJCQzJCQpeyRvcHRpb25zJCQzJCQubWF0Y2hpbmdSb3cmJigkb3B0aW9ucyQkMyQkLm1hdGNoaW5nRWxlbWVudD0kb3B0aW9ucyQkMyQkLm1hdGNoaW5nUm93KTskb3B0aW9ucyQkMyQkLmZpbHRlcmluZ1Jvd3MmJigkb3B0aW9ucyQkMyQkLmZpbHRlcmluZ0VsZW1lbnRzPSRvcHRpb25zJCQzJCQuZmlsdGVyaW5nUm93cyk7JG9wdGlvbnMkJDMkJC5maWx0ZXJlZFJvd3MmJigkb3B0aW9ucyQkMyQkLmZpbHRlcmVkRWxlbWVudHM9JG9wdGlvbnMkJDMkJC5maWx0ZXJlZFJvd3MpOyRwaWNuZXQkdWkkZmlsdGVyJEdlbmVyaWNMaXN0RmlsdGVyJCQuY2FsbCh0aGlzLCRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJCwkZ3JpZCQkLCRvcHRpb25zJCQzJCQpfSRnb29nJGluaGVyaXRzJCQoJHBpY25ldCR1aSRmaWx0ZXIkVGFibGVGaWx0ZXIkJCwkcGljbmV0JHVpJGZpbHRlciRHZW5lcmljTGlzdEZpbHRlciQkKTtcclxuJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJD0kcGljbmV0JHVpJGZpbHRlciRUYWJsZUZpbHRlciQkLnByb3RvdHlwZTskSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkLiRpbml0aWFsaXNlRmlsdGVycyQ9ZnVuY3Rpb24gJCRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQkJGluaXRpYWxpc2VGaWx0ZXJzJCQoKXt0aGlzLiR0aGVhZCQ9JGdvb2ckZG9tJGdldEVsZW1lbnRzQnlUYWdOYW1lQW5kQ2xhc3NfJCQoXCJ0aGVhZFwiLCRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJCx0aGlzLm9wdGlvbnMuZnJvemVuSGVhZGVyVGFibGV8fHRoaXMubGlzdClbMF07dGhpcy4kdGJvZHkkPSRnb29nJGRvbSRnZXRFbGVtZW50c0J5VGFnTmFtZUFuZENsYXNzXyQkKFwidGJvZHlcIiwkSlNDb21waWxlcl9hbGlhc19OVUxMJCQsdGhpcy5saXN0KVswXTskcGljbmV0JHVpJGZpbHRlciRUYWJsZUZpbHRlciQkLiRzdXBlckNsYXNzXyQuJGluaXRpYWxpc2VGaWx0ZXJzJC5jYWxsKHRoaXMpfTtcclxuJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC4kaW5pdGlhbGlzZUNvbnRyb2xDYWNoZXMkPWZ1bmN0aW9uICQkSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkJCRpbml0aWFsaXNlQ29udHJvbENhY2hlcyQkKCl7dGhpcy5oZWFkZXJzPSRnb29nJGRvbSRnZXRFbGVtZW50c0J5VGFnTmFtZUFuZENsYXNzXyQkKFwidGhcIiwkSlNDb21waWxlcl9hbGlhc19OVUxMJCQsdGhpcy4kdGhlYWQkKTt0aGlzLiRsaXN0SXRlbXMkPSRnb29nJGRvbSRnZXRFbGVtZW50c0J5VGFnTmFtZUFuZENsYXNzXyQkKFwidHJcIiwkSlNDb21waWxlcl9hbGlhc19OVUxMJCQsdGhpcy4kdGJvZHkkKTskSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2J1aWxkRmlsdGVyc1JvdyQkKHRoaXMpO3ZhciAkdEhlYWRGaWx0ZXJzJCQ9JGdvb2ckZG9tJGdldEVsZW1lbnRzQnlUYWdOYW1lQW5kQ2xhc3NfJCQoXCJ0clwiLFwiZmlsdGVyc1wiLHRoaXMuJHRoZWFkJClbMF07dGhpcy4kZmlsdGVycyQ9JGdvb2ckYXJyYXkkY29uY2F0JCQoJGdvb2ckYXJyYXkkbWFwJCQoJGdvb2ckZG9tJGdldEVsZW1lbnRzQnlUYWdOYW1lQW5kQ2xhc3NfJCQoXCJpbnB1dFwiLFxyXG4kSlNDb21waWxlcl9hbGlhc19OVUxMJCQsJHRIZWFkRmlsdGVycyQkKSxmdW5jdGlvbigkY3RsJCQpe3JldHVybiAkY3RsJCR9KSwkZ29vZyRhcnJheSRtYXAkJCgkZ29vZyRkb20kZ2V0RWxlbWVudHNCeVRhZ05hbWVBbmRDbGFzc18kJChcInNlbGVjdFwiLCRKU0NvbXBpbGVyX2FsaWFzX05VTEwkJCwkdEhlYWRGaWx0ZXJzJCQpLGZ1bmN0aW9uKCRjdGwkJDEkJCl7cmV0dXJuICRjdGwkJDEkJH0pKTt0aGlzLiRmaWx0ZXJDb2x1bW5JbmRleGVzJD0kZ29vZyRhcnJheSRtYXAkJCh0aGlzLiRmaWx0ZXJzJCx0aGlzLiRnZXRDb2x1bW5JbmRleE9mRmlsdGVyJCx0aGlzKX07XHJcbiRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuJGdldENvbHVtbkluZGV4T2ZGaWx0ZXIkPWZ1bmN0aW9uICQkSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkJCRnZXRDb2x1bW5JbmRleE9mRmlsdGVyJCQoJGYkJDI3X3RkJCQpe3ZhciAkZiQkMjdfdGQkJD0kZ29vZyRkb20kZ2V0QW5jZXN0b3JCeVRhZ05hbWVBbmRDbGFzcyQkKCRmJCQyN190ZCQkLFwiVERcIiksJGNlbGxzJCQ9JGdvb2ckZG9tJGdldEFuY2VzdG9yQnlUYWdOYW1lQW5kQ2xhc3MkJCgkZiQkMjdfdGQkJCxcIlRSXCIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGRcIik7cmV0dXJuICRnb29nJGFycmF5JGluZGV4T2YkJCgkY2VsbHMkJCwkZiQkMjdfdGQkJCl9O1xyXG5mdW5jdGlvbiAkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2J1aWxkRmlsdGVyc1JvdyQkKCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYnVpbGRGaWx0ZXJzUm93JHNlbGYkJCl7Zm9yKHZhciAkdHIkJDEkJD0kZ29vZyRkb20kY3JlYXRlRG9tJCQoXCJ0clwiLHtcImNsYXNzXCI6XCJmaWx0ZXJzXCJ9KSwkaSQkODckJD0wOyRpJCQ4NyQkPCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfYnVpbGRGaWx0ZXJzUm93JHNlbGYkJC5oZWFkZXJzLmxlbmd0aDskaSQkODckJCsrKXt2YXIgJGVsZW1lbnQkJGlubGluZV8xMTlfZmlsdGVyVHlwZSQkaW5saW5lXzExN19oZWFkZXIkJDJfdGQkJDEkJD0kSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2J1aWxkRmlsdGVyc1JvdyRzZWxmJCQuaGVhZGVyc1skaSQkODckJF0sJGZpbHRlckNsYXNzX3Zpc2libGUkJD1cIm5vbmVcIiE9JGVsZW1lbnQkJGlubGluZV8xMTlfZmlsdGVyVHlwZSQkaW5saW5lXzExN19oZWFkZXIkJDJfdGQkJDEkJC5zdHlsZS5kaXNwbGF5O1xyXG5pZigkZmlsdGVyQ2xhc3NfdmlzaWJsZSQkKXt2YXIgJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19nZXRGaWx0ZXJEb20kc2VsZiQkaW5saW5lXzExNF9oZWFkZXJUZXh0JCQ9XCJmYWxzZVwiPT09JGVsZW1lbnQkJGlubGluZV8xMTlfZmlsdGVyVHlwZSQkaW5saW5lXzExN19oZWFkZXIkJDJfdGQkJDEkJC5nZXRBdHRyaWJ1dGUoXCJmaWx0ZXJcIil8fCEkZmlsdGVyQ2xhc3NfdmlzaWJsZSQkP1wiXCI6JGdvb2ckZG9tJGdldFRleHRDb250ZW50JCQoJGVsZW1lbnQkJGlubGluZV8xMTlfZmlsdGVyVHlwZSQkaW5saW5lXzExN19oZWFkZXIkJDJfdGQkJDEkJCksJGZpbHRlckNsYXNzX3Zpc2libGUkJD0kZWxlbWVudCQkaW5saW5lXzExOV9maWx0ZXJUeXBlJCRpbmxpbmVfMTE3X2hlYWRlciQkMl90ZCQkMSQkLmdldEF0dHJpYnV0ZShcImZpbHRlci1jbGFzc1wiKTtpZigkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2dldEZpbHRlckRvbSRzZWxmJCRpbmxpbmVfMTE0X2hlYWRlclRleHQkJCYmMTxcclxuJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19nZXRGaWx0ZXJEb20kc2VsZiQkaW5saW5lXzExNF9oZWFkZXJUZXh0JCQubGVuZ3RoKXt2YXIgJGZpbHRlciQkMyQkO2E6e3ZhciAkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2dldEZpbHRlckRvbSRzZWxmJCRpbmxpbmVfMTE0X2hlYWRlclRleHQkJD0kSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2J1aWxkRmlsdGVyc1JvdyRzZWxmJCQsJGNvbElkeCQkaW5saW5lXzExNSQkPSRpJCQ4NyQkLCRlbGVtZW50JCRpbmxpbmVfMTE5X2ZpbHRlclR5cGUkJGlubGluZV8xMTdfaGVhZGVyJCQyX3RkJCQxJCQ9JGVsZW1lbnQkJGlubGluZV8xMTlfZmlsdGVyVHlwZSQkaW5saW5lXzExN19oZWFkZXIkJDJfdGQkJDEkJC5nZXRBdHRyaWJ1dGUoXCJmaWx0ZXItdHlwZVwiKXx8XCJ0ZXh0XCI7c3dpdGNoKCRlbGVtZW50JCRpbmxpbmVfMTE5X2ZpbHRlclR5cGUkJGlubGluZV8xMTdfaGVhZGVyJCQyX3RkJCQxJCQpe2Nhc2UgXCJ0ZXh0XCI6JGZpbHRlciQkMyQkPVxyXG4kZ29vZyRkb20kY3JlYXRlRG9tJCQoXCJpbnB1dFwiLHt0eXBlOlwic2VhcmNoXCIsaWQ6XCJmaWx0ZXJfXCIrJGNvbElkeCQkaW5saW5lXzExNSQkLFwiY2xhc3NcIjpcImZpbHRlclwiLHRpdGxlOiRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfZ2V0RmlsdGVyRG9tJHNlbGYkJGlubGluZV8xMTRfaGVhZGVyVGV4dCQkLm9wdGlvbnMuZmlsdGVyVG9vbFRpcE1lc3NhZ2V9KTticmVhayBhO2Nhc2UgXCJkZGxcIjokZmlsdGVyJCQzJCQ9JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19nZXRTZWxlY3RGaWx0ZXIkJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2dldEZpbHRlckRvbSRzZWxmJCRpbmxpbmVfMTE0X2hlYWRlclRleHQkJCwkY29sSWR4JCRpbmxpbmVfMTE1JCQpO2JyZWFrIGE7ZGVmYXVsdDokSlNDb21waWxlcl9hbGlhc19USFJPVyQkKFwiZmlsdGVyLXR5cGU6IFwiKyRlbGVtZW50JCRpbmxpbmVfMTE5X2ZpbHRlclR5cGUkJGlubGluZV8xMTdfaGVhZGVyJCQyX3RkJCQxJCQrXCIgaXMgbm90IHN1cHBvcnRlZFwiKX19JGVsZW1lbnQkJGlubGluZV8xMTlfZmlsdGVyVHlwZSQkaW5saW5lXzExN19oZWFkZXIkJDJfdGQkJDEkJD1cclxuJGZpbHRlciQkMyQkOyRnb29nJGlzU3RyaW5nJCQoXCJ3aWR0aFwiKT8kZ29vZyRzdHlsZSRzZXRTdHlsZV8kJCgkZWxlbWVudCQkaW5saW5lXzExOV9maWx0ZXJUeXBlJCRpbmxpbmVfMTE3X2hlYWRlciQkMl90ZCQkMSQkLFwiOTUlXCIsXCJ3aWR0aFwiKTokZ29vZyRvYmplY3QkZm9yRWFjaCQkKFwid2lkdGhcIiwkZ29vZyRwYXJ0aWFsJCQoJGdvb2ckc3R5bGUkc2V0U3R5bGVfJCQsJGVsZW1lbnQkJGlubGluZV8xMTlfZmlsdGVyVHlwZSQkaW5saW5lXzExN19oZWFkZXIkJDJfdGQkJDEkJCkpOyRlbGVtZW50JCRpbmxpbmVfMTE5X2ZpbHRlclR5cGUkJGlubGluZV8xMTdfaGVhZGVyJCQyX3RkJCQxJCQ9JGdvb2ckZG9tJGNyZWF0ZURvbSQkKFwidGRcIiwkSlNDb21waWxlcl9hbGlhc19OVUxMJCQsJGZpbHRlciQkMyQkKX1lbHNlICRlbGVtZW50JCRpbmxpbmVfMTE5X2ZpbHRlclR5cGUkJGlubGluZV8xMTdfaGVhZGVyJCQyX3RkJCQxJCQ9JGdvb2ckZG9tJGNyZWF0ZURvbSQkKFwidGRcIix7fSxcIlwiKTtcclxuJGZpbHRlckNsYXNzX3Zpc2libGUkJCYmJGdvb2ckZG9tJGNsYXNzZXMkYWRkJCQoJGVsZW1lbnQkJGlubGluZV8xMTlfZmlsdGVyVHlwZSQkaW5saW5lXzExN19oZWFkZXIkJDJfdGQkJDEkJCwkZmlsdGVyQ2xhc3NfdmlzaWJsZSQkKTskdHIkJDEkJC5hcHBlbmRDaGlsZCgkZWxlbWVudCQkaW5saW5lXzExOV9maWx0ZXJUeXBlJCRpbmxpbmVfMTE3X2hlYWRlciQkMl90ZCQkMSQkKX19JEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19idWlsZEZpbHRlcnNSb3ckc2VsZiQkLiR0aGVhZCQuYXBwZW5kQ2hpbGQoJHRyJCQxJCQpfVxyXG5mdW5jdGlvbiAkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2dldFNlbGVjdEZpbHRlciQkKCRKU0NvbXBpbGVyX1N0YXRpY01ldGhvZHNfZ2V0U2VsZWN0RmlsdGVyJHNlbGYkJCwkY29sSWR4JCQxJCQpe3ZhciAkc2VsZWN0JCQ9JGdvb2ckZG9tJGNyZWF0ZURvbSQkKFwic2VsZWN0XCIse2lkOlwiZmlsdGVyX1wiKyRjb2xJZHgkJDEkJCxcImNsYXNzXCI6XCJmaWx0ZXJcIn0sJGdvb2ckZG9tJGNyZWF0ZURvbSQkKFwib3B0aW9uXCIse30sJEpTQ29tcGlsZXJfU3RhdGljTWV0aG9kc19nZXRTZWxlY3RGaWx0ZXIkc2VsZiQkLm9wdGlvbnMuc2VsZWN0T3B0aW9uTGFiZWwpKSwkY2VsbHMkJDEkJD0kZ29vZyRhcnJheSRtYXAkJCgkSlNDb21waWxlcl9TdGF0aWNNZXRob2RzX2dldFNlbGVjdEZpbHRlciRzZWxmJCQuJGxpc3RJdGVtcyQsZnVuY3Rpb24oJHIkJDEkJCl7cmV0dXJuICRyJCQxJCQuY2VsbHNbJGNvbElkeCQkMSQkXX0pLCR2YWx1ZXMkJDckJD1bXTskZ29vZyRhcnJheSRmb3JFYWNoJCQoJGNlbGxzJCQxJCQsXHJcbmZ1bmN0aW9uKCR0ZCQkMl90eHQkJDEkJCl7KCR0ZCQkMl90eHQkJDEkJD0kZ29vZyRzdHJpbmckdHJpbSQkKCRnb29nJGRvbSRnZXRUZXh0Q29udGVudCQkKCR0ZCQkMl90eHQkJDEkJCkpKSYmIShcIiZuYnNwO1wiPT09JHRkJCQyX3R4dCQkMSQkfHwwPD0kZ29vZyRhcnJheSRpbmRleE9mJCQoJHZhbHVlcyQkNyQkLCR0ZCQkMl90eHQkJDEkJCkpJiYkdmFsdWVzJCQ3JCQucHVzaCgkdGQkJDJfdHh0JCQxJCQpfSk7JHZhbHVlcyQkNyQkLnNvcnQoKTskZ29vZyRhcnJheSRmb3JFYWNoJCQoJHZhbHVlcyQkNyQkLGZ1bmN0aW9uKCRjaGlsZCQkaW5saW5lXzEyOF90eHQkJDIkJCl7JGNoaWxkJCRpbmxpbmVfMTI4X3R4dCQkMiQkPSRnb29nJGRvbSRjcmVhdGVEb20kJChcIm9wdGlvblwiLHt2YWx1ZTokY2hpbGQkJGlubGluZV8xMjhfdHh0JCQyJCQucmVwbGFjZSgnXCInLFwiJiMwMzQ7XCIpfSwkY2hpbGQkJGlubGluZV8xMjhfdHh0JCQyJCQpOyRzZWxlY3QkJC5hcHBlbmRDaGlsZCgkY2hpbGQkJGlubGluZV8xMjhfdHh0JCQyJCQpfSk7XHJcbnJldHVybiAkc2VsZWN0JCR9XHJcbiRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuJGdldEZpbHRlclN0YXRlcyQ9ZnVuY3Rpb24gJCRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQkJGdldEZpbHRlclN0YXRlcyQkKCl7Zm9yKHZhciAkZmlsdGVyU3RhdGVzJCQ0JCQ9W10sJGkkJDg4JCQ9MDskaSQkODgkJDx0aGlzLiRmaWx0ZXJzJC5sZW5ndGg7JGkkJDg4JCQrKyl7dmFyICRzdGF0ZSQkNyQkPXRoaXMuJGdldEZpbHRlclN0YXRlRm9yRmlsdGVyJCh0aGlzLiRmaWx0ZXJzJFskaSQkODgkJF0pOyRzdGF0ZSQkNyQkJiYkZmlsdGVyU3RhdGVzJCQ0JCQucHVzaCgkc3RhdGUkJDckJCl9aWYoIXRoaXMub3B0aW9ucy5hZGRpdGlvbmFsRmlsdGVyVHJpZ2dlcnMpcmV0dXJuICRmaWx0ZXJTdGF0ZXMkJDQkJDtmb3IoJGkkJDg4JCQ9MDskaSQkODgkJDx0aGlzLm9wdGlvbnMuYWRkaXRpb25hbEZpbHRlclRyaWdnZXJzLmxlbmd0aDskaSQkODgkJCsrKSgkc3RhdGUkJDckJD10aGlzLiRnZXRGaWx0ZXJTdGF0ZUZvckZpbHRlciQodGhpcy5vcHRpb25zLmFkZGl0aW9uYWxGaWx0ZXJUcmlnZ2Vyc1skaSQkODgkJF0pKSYmJGZpbHRlclN0YXRlcyQkNCQkLnB1c2goJHN0YXRlJCQ3JCQpO1xyXG5yZXR1cm4gJGZpbHRlclN0YXRlcyQkNCQkfTtcclxuJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJC4kZ2V0RmlsdGVyU3RhdGVGb3JGaWx0ZXIkPWZ1bmN0aW9uICQkSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkJCRnZXRGaWx0ZXJTdGF0ZUZvckZpbHRlciQkKCRKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDEzMF9maWx0ZXIkJDRfZmlsdGVyQ2VsbCQkaW5saW5lXzEzMiQkKXt2YXIgJHN0YXRlJCQ4JCQ9JHBpY25ldCR1aSRmaWx0ZXIkVGFibGVGaWx0ZXIkJC4kc3VwZXJDbGFzc18kLiRnZXRGaWx0ZXJTdGF0ZUZvckZpbHRlciQuY2FsbCh0aGlzLCRKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDEzMF9maWx0ZXIkJDRfZmlsdGVyQ2VsbCQkaW5saW5lXzEzMiQkKTtpZigkc3RhdGUkJDgkJCl7JEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCQkMTMwX2ZpbHRlciQkNF9maWx0ZXJDZWxsJCRpbmxpbmVfMTMyJCQ9JGdvb2ckZG9tJGdldEFuY2VzdG9yQnlUYWdOYW1lQW5kQ2xhc3MkJCgkSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQxMzBfZmlsdGVyJCQ0X2ZpbHRlckNlbGwkJGlubGluZV8xMzIkJCxcIlREXCIpO1xyXG5pZighJEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCQkMTMwX2ZpbHRlciQkNF9maWx0ZXJDZWxsJCRpbmxpbmVfMTMyJCR8fDA+PSRKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDEzMF9maWx0ZXIkJDRfZmlsdGVyQ2VsbCQkaW5saW5lXzEzMiQkLmxlbmd0aCkkSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQxMzBfZmlsdGVyJCQ0X2ZpbHRlckNlbGwkJGlubGluZV8xMzIkJD0tMTtlbHNlIHZhciAkZmlsdGVyUm93JCRpbmxpbmVfMTMzJCQ9JGdvb2ckZG9tJGdldEFuY2VzdG9yQnlUYWdOYW1lQW5kQ2xhc3MkJCgkSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQxMzBfZmlsdGVyJCQ0X2ZpbHRlckNlbGwkJGlubGluZV8xMzIkJCxcIlRSXCIpLCRKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkJDEzMF9maWx0ZXIkJDRfZmlsdGVyQ2VsbCQkaW5saW5lXzEzMiQkPSRnb29nJGFycmF5JGluZGV4T2YkJCgkZmlsdGVyUm93JCRpbmxpbmVfMTMzJCQuY2VsbHMsJEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCQkMTMwX2ZpbHRlciQkNF9maWx0ZXJDZWxsJCRpbmxpbmVfMTMyJCQpO1xyXG4kc3RhdGUkJDgkJC4kaWR4JD0kSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JCQxMzBfZmlsdGVyJCQ0X2ZpbHRlckNlbGwkJGlubGluZV8xMzIkJH1yZXR1cm4gJHN0YXRlJCQ4JCR9O1xyXG4kSlNDb21waWxlcl9wcm90b3R5cGVBbGlhcyQkLiRkb2VzRWxlbWVudENvbnRhaW5UZXh0JD1mdW5jdGlvbiAkJEpTQ29tcGlsZXJfcHJvdG90eXBlQWxpYXMkJCQkZG9lc0VsZW1lbnRDb250YWluVGV4dCQkKCRzdGF0ZSQkOSQkLCR0ciQkMiQkLCR0ZXh0VG9rZW5zJCQ1JCQpe3ZhciAkY2VsbHMkJDIkJD0kdHIkJDIkJC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpLCRjb2x1bW5JZHhfdHh0JCQzJCQ9JHN0YXRlJCQ5JCQ9PT0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQ/LTE6JHN0YXRlJCQ5JCQuJGlkeCQ7aWYoMD4kY29sdW1uSWR4X3R4dCQkMyQkKXtmb3IodmFyICRjb2x1bW5JZHhfdHh0JCQzJCQ9W10sJGkkJDg5JCQ9MDskaSQkODkkJDwkY2VsbHMkJDIkJC5sZW5ndGg7JGkkJDg5JCQrKyl7dmFyICRoZWFkZXIkJDUkJD10aGlzLmhlYWRlcnNbJGkkJDg5JCRdO1wibm9uZVwiIT0kaGVhZGVyJCQ1JCQuc3R5bGUuZGlzcGxheSYmXCJmYWxzZVwiIT09JGhlYWRlciQkNSQkLmdldEF0dHJpYnV0ZShcImZpbHRlclwiKSYmXHJcbiRjb2x1bW5JZHhfdHh0JCQzJCQucHVzaCgkZ29vZyRzdHJpbmckdHJpbSQkKCRnb29nJGRvbSRnZXRUZXh0Q29udGVudCQkKCRjZWxscyQkMiQkWyRpJCQ4OSQkXSkpKX1yZXR1cm4gJHBpY25ldCR1aSRmaWx0ZXIkVGFibGVGaWx0ZXIkJC4kc3VwZXJDbGFzc18kLiRkb2VzRWxlbWVudENvbnRhaW5UZXh0JC5jYWxsKHRoaXMsJHN0YXRlJCQ5JCQsJHRyJCQyJCQsJHRleHRUb2tlbnMkJDUkJCwkY29sdW1uSWR4X3R4dCQkMyQkLmpvaW4oXCJcXHRcIikpfXJldHVybiAkcGljbmV0JHVpJGZpbHRlciRUYWJsZUZpbHRlciQkLiRzdXBlckNsYXNzXyQuJGRvZXNFbGVtZW50Q29udGFpblRleHQkLmNhbGwodGhpcywkc3RhdGUkJDkkJCwkY2VsbHMkJDIkJFskY29sdW1uSWR4X3R4dCQkMyQkXSwkdGV4dFRva2VucyQkNSQkKX07XHJcbiRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQuJGRpc3Bvc2VJbnRlcm5hbCQ9ZnVuY3Rpb24gJCRKU0NvbXBpbGVyX3Byb3RvdHlwZUFsaWFzJCQkJGRpc3Bvc2VJbnRlcm5hbCQkKCl7JHBpY25ldCR1aSRmaWx0ZXIkVGFibGVGaWx0ZXIkJC4kc3VwZXJDbGFzc18kLiRkaXNwb3NlSW50ZXJuYWwkLmNhbGwodGhpcyk7ZGVsZXRlIHRoaXMuJGZpbHRlckNvbHVtbkluZGV4ZXMkO2RlbGV0ZSB0aGlzLmhlYWRlcnM7ZGVsZXRlIHRoaXMuJHRoZWFkJDtkZWxldGUgdGhpcy4kdGJvZHkkfTt2YXIgJGpxJCQ9d2luZG93LmpRdWVyeTtcclxuJGpxJCQmJmZ1bmN0aW9uKCRqcSQkMSQkKXskanEkJDEkJC4kdGFibGVGaWx0ZXIkPWZ1bmN0aW9uICQkanEkJDEkJCQkdGFibGVGaWx0ZXIkJCgkZWxlbWVudCQkNjckJCwkb3B0cyQkKXt2YXIgJHRmJCQ7dGhpcy4kaW5pdCQ9ZnVuY3Rpb24gJHRoaXMkJGluaXQkJCgpe3ZhciAkb3B0aW9ucyQkNCQkPSRqcSQkMSQkLmV4dGVuZCh7fSxuZXcgJHBpY25ldCR1aSRmaWx0ZXIkVGFibGVGaWx0ZXJPcHRpb25zJCQsJG9wdHMkJCk7JHRmJCQ9bmV3ICRwaWNuZXQkdWkkZmlsdGVyJFRhYmxlRmlsdGVyJCQoJGVsZW1lbnQkJDY3JCQsJG9wdGlvbnMkJDQkJCl9O3RoaXMucmVmcmVzaD1mdW5jdGlvbiAkdGhpcyRyZWZyZXNoJCgpeyRwaWNuZXQkdWkkZmlsdGVyJFRhYmxlRmlsdGVyJCQuJHN1cGVyQ2xhc3NfJC5yZWZyZXNoLmNhbGwoJHRmJCQpfTt0aGlzLiRpbml0JCgpfTskanEkJDEkJC5mbi50YWJsZUZpbHRlcj1mdW5jdGlvbiAkJGpxJCQxJCQkZm4kdGFibGVGaWx0ZXIkKCRvcHRpb25zJCQ1JCQpe3JldHVybiAkZ29vZyRhcnJheSRmb3JFYWNoJCQodGhpcyxmdW5jdGlvbigkdCQkKXtpZigkSlNDb21waWxlcl9hbGlhc19WT0lEJCQ9PT1cclxuJGpxJCQxJCQoJHQkJCkuZGF0YShcInRhYmxlRmlsdGVyXCIpfHwkanEkJDEkJCgkdCQkKS5kYXRhKFwidGFibGVGaWx0ZXJcIik9PT0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQpe3ZhciAkcGx1Z2luJCQxJCQ9bmV3ICRqcSQkMSQkLiR0YWJsZUZpbHRlciQoJHQkJCwkb3B0aW9ucyQkNSQkKTskanEkJDEkJCgkdCQkKS5kYXRhKFwidGFibGVGaWx0ZXJcIiwkcGx1Z2luJCQxJCQpfX0pfTskanEkJDEkJC5mbi50YWJsZUZpbHRlclJlZnJlc2g9ZnVuY3Rpb24gJCRqcSQkMSQkJGZuJHRhYmxlRmlsdGVyUmVmcmVzaCQoKXtyZXR1cm4gJGdvb2ckYXJyYXkkZm9yRWFjaCQkKHRoaXMsZnVuY3Rpb24oJHQkJDEkJCl7JEpTQ29tcGlsZXJfYWxpYXNfVk9JRCQkIT09JGpxJCQxJCQoJHQkJDEkJCkuZGF0YShcInRhYmxlRmlsdGVyXCIpJiYkanEkJDEkJCgkdCQkMSQkKS5kYXRhKFwidGFibGVGaWx0ZXJcIikhPT0kSlNDb21waWxlcl9hbGlhc19OVUxMJCQmJiRqcSQkMSQkKCR0JCQxJCQpLmRhdGEoXCJ0YWJsZUZpbHRlclwiKS5yZWZyZXNoKCl9KX19KCRqcSQkKTtcclxuIiwiLypcbiBqUXVlcnkgUGx1Z2luOiBUYWJsZSBGaWx0ZXIgLSB2ZXJzaW9uIDAuMlxuXG4gTElDRU5TRTogaHR0cDovL2hhaWwydS5taXQtbGljZW5zZS5vcmcvMjAwOVxuKi9cbihmdW5jdGlvbihhKXthLmZuLmFkZFRhYmxlRmlsdGVyPWZ1bmN0aW9uKGQpe3ZhciBiPWEuZXh0ZW5kKHt9LGEuZm4uYWRkVGFibGVGaWx0ZXIuZGVmYXVsdHMsZCksYyxlO3RoaXMuaXMoXCJ0YWJsZVwiKSYmKHRoaXMuYXR0cihcImlkXCIpfHx0aGlzLmF0dHIoe2lkOlwidC1cIitNYXRoLmZsb29yKDk5OTk5OTk5Kk1hdGgucmFuZG9tKCkpfSksYz10aGlzLmF0dHIoXCJpZFwiKSxkPWMrXCItZmlsdGVyaW5nXCIsZT1hKFwiPGxhYmVsLz5cIikuYXR0cih7XCJmb3JcIjpkfSkuYXBwZW5kKGIubGFiZWxUZXh0KSxiPWEoXCI8aW5wdXQvPlwiKS5hdHRyKHtpZDpkLHR5cGU6XCJzZWFyY2hcIixzaXplOmIuc2l6ZX0pLGEoXCI8cC8+XCIpLmFkZENsYXNzKFwiZm9ybVRhYmxlRmlsdGVyXCIpLmFwcGVuZChlKS5hcHBlbmQoYikuaW5zZXJ0QmVmb3JlKHRoaXMpLGEoXCIjXCIrZCkuZGVsYXlCaW5kKFwia2V5dXBcIixmdW5jdGlvbigpe3ZhciBiPWEodGhpcykudmFsKCkudG9Mb3dlckNhc2UoKS5zcGxpdChcIiBcIik7YShcIiNcIitjK1wiIHRib2R5IHRyXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1cbmEodGhpcykuaHRtbCgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvPC4rPz4vZyxcIlwiKS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpLGM9MDthLmVhY2goYixmdW5jdGlvbigpe2lmKDA+ZC5pbmRleE9mKHRoaXMpKXJldHVybiBjPTEsITF9KTtjP2EodGhpcykuaGlkZSgpOmEodGhpcykuc2hvdygpfSl9LDMwMCkpO3JldHVybiB0aGlzfTthLmZuLmFkZFRhYmxlRmlsdGVyLmRlZmF1bHRzPXtsYWJlbFRleHQ6XCJLZXl3b3JkKHMpOiBcIixzaXplOjMyfTthLmZuLmRlbGF5QmluZD1mdW5jdGlvbihkLGIsYyxlKXthLmlzRnVuY3Rpb24oYikmJihlPWMsYz1iLGI9dm9pZCAwKTt2YXIgZz10aGlzLGY9bnVsbDtyZXR1cm4gdGhpcy5iaW5kKGQsYixmdW5jdGlvbihiKXtjbGVhclRpbWVvdXQoZik7Zj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5hcHBseShnLFthLmV4dGVuZCh7fSxiKV0pfSxlKX0pfX0pKGpRdWVyeSk7XG4iLCIvKlxuKiBqUXVlcnkgVUkgVGFnLWl0IVxuKlxuKiBAdmVyc2lvbiB2Mi4wICgwNi8yMDExKVxuKlxuKiBDb3B5cmlnaHQgMjAxMSwgTGV2eSBDYXJuZWlybyBKci5cbiogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuKiBodHRwOi8vYWVobGtlLmdpdGh1Yi5jb20vdGFnLWl0L0xJQ0VOU0VcbipcbiogSG9tZXBhZ2U6XG4qICAgaHR0cDovL2FlaGxrZS5naXRodWIuY29tL3RhZy1pdC9cbipcbiogQXV0aG9yczpcbiogICBMZXZ5IENhcm5laXJvIEpyLlxuKiAgIE1hcnRpbiBSZWhmZWxkXG4qICAgVG9iaWFzIFNjaG1pZHRcbiogICBTa3lsYXIgQ2hhbGxhbmRcbiogICBBbGV4IEVobGtlXG4qXG4qIE1haW50YWluZXI6XG4qICAgQWxleCBFaGxrZSAtIFR3aXR0ZXI6IEBhZWhsa2VcbipcbiogRGVwZW5kZW5jaWVzOlxuKiAgIGpRdWVyeSB2MS40K1xuKiAgIGpRdWVyeSBVSSB2MS44K1xuKi9cbihmdW5jdGlvbigkKSB7XG5cbiAgICAkLndpZGdldCgndWkudGFnaXQnLCB7XG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGl0ZW1OYW1lICAgICAgICAgIDogJ2l0ZW0nLFxuICAgICAgICAgICAgZmllbGROYW1lICAgICAgICAgOiAndGFncycsXG4gICAgICAgICAgICBhdmFpbGFibGVUYWdzICAgICA6IFtdLFxuICAgICAgICAgICAgdGFnU291cmNlICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgcmVtb3ZlQ29uZmlybWF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIGNhc2VTZW5zaXRpdmUgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyVGV4dCAgIDogbnVsbCxcblxuICAgICAgICAgICAgLy8gV2hlbiBlbmFibGVkLCBxdW90ZXMgYXJlIG5vdCBuZWNjZXNhcnlcbiAgICAgICAgICAgIC8vIGZvciBpbnB1dHRpbmcgbXVsdGktd29yZCB0YWdzLlxuICAgICAgICAgICAgYWxsb3dTcGFjZXM6IGZhbHNlLFxuXG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRvIGFuaW1hdGUgdGFnIHJlbW92YWxzIG9yIG5vdC5cbiAgICAgICAgICAgIGFuaW1hdGU6IHRydWUsXG5cbiAgICAgICAgICAgIC8vIFRoZSBiZWxvdyBvcHRpb25zIGFyZSBmb3IgdXNpbmcgYSBzaW5nbGUgZmllbGQgaW5zdGVhZCBvZiBzZXZlcmFsXG4gICAgICAgICAgICAvLyBmb3Igb3VyIGZvcm0gdmFsdWVzLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFdoZW4gZW5hYmxlZCwgd2lsbCB1c2UgYSBzaW5nbGUgaGlkZGVuIGZpZWxkIGZvciB0aGUgZm9ybSxcbiAgICAgICAgICAgIC8vIHJhdGhlciB0aGFuIG9uZSBwZXIgdGFnLiBJdCB3aWxsIGRlbGltaXQgdGFncyBpbiB0aGUgZmllbGRcbiAgICAgICAgICAgIC8vIHdpdGggc2luZ2xlRmllbGREZWxpbWl0ZXIuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVGhlIGVhc2llc3Qgd2F5IHRvIHVzZSBzaW5nbGVGaWVsZCBpcyB0byBqdXN0IGluc3RhbnRpYXRlIHRhZy1pdFxuICAgICAgICAgICAgLy8gb24gYW4gSU5QVVQgZWxlbWVudCwgaW4gd2hpY2ggY2FzZSBzaW5nbGVGaWVsZCBpcyBhdXRvbWF0aWNhbGx5XG4gICAgICAgICAgICAvLyBzZXQgdG8gdHJ1ZSwgYW5kIHNpbmdsZUZpZWxkTm9kZSBpcyBzZXQgdG8gdGhhdCBlbGVtZW50LiBUaGlzIFxuICAgICAgICAgICAgLy8gd2F5LCB5b3UgZG9uJ3QgbmVlZCB0byBmaWRkbGUgd2l0aCB0aGVzZSBvcHRpb25zLlxuICAgICAgICAgICAgc2luZ2xlRmllbGQ6IGZhbHNlLFxuXG4gICAgICAgICAgICBzaW5nbGVGaWVsZERlbGltaXRlcjogJywnLFxuXG4gICAgICAgICAgICAvLyBTZXQgdGhpcyB0byBhbiBpbnB1dCBET00gbm9kZSB0byB1c2UgYW4gZXhpc3RpbmcgZm9ybSBmaWVsZC5cbiAgICAgICAgICAgIC8vIEFueSB0ZXh0IGluIGl0IHdpbGwgYmUgZXJhc2VkIG9uIGluaXQuIEJ1dCBpdCB3aWxsIGJlXG4gICAgICAgICAgICAvLyBwb3B1bGF0ZWQgd2l0aCB0aGUgdGV4dCBvZiB0YWdzIGFzIHRoZXkgYXJlIGNyZWF0ZWQsXG4gICAgICAgICAgICAvLyBkZWxpbWl0ZWQgYnkgc2luZ2xlRmllbGREZWxpbWl0ZXIuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBub3Qgc2V0LCB3ZSBjcmVhdGUgYW4gaW5wdXQgbm9kZSBmb3IgaXQsXG4gICAgICAgICAgICAvLyB3aXRoIHRoZSBuYW1lIGdpdmVuIGluIHNldHRpbmdzLmZpZWxkTmFtZSwgXG4gICAgICAgICAgICAvLyBpZ25vcmluZyBzZXR0aW5ncy5pdGVtTmFtZS5cbiAgICAgICAgICAgIHNpbmdsZUZpZWxkTm9kZTogbnVsbCxcblxuICAgICAgICAgICAgLy8gT3B0aW9uYWxseSBzZXQgYSB0YWJpbmRleCBhdHRyaWJ1dGUgb24gdGhlIGlucHV0IHRoYXQgZ2V0c1xuICAgICAgICAgICAgLy8gY3JlYXRlZCBmb3IgdGFnLWl0LlxuICAgICAgICAgICAgdGFiSW5kZXg6IG51bGwsXG5cblxuICAgICAgICAgICAgLy8gRXZlbnQgY2FsbGJhY2tzLlxuICAgICAgICAgICAgb25UYWdBZGRlZCAgOiBudWxsLFxuICAgICAgICAgICAgb25UYWdSZW1vdmVkOiBudWxsLFxuICAgICAgICAgICAgb25UYWdDbGlja2VkOiBudWxsLFxuICAgICAgICAgICAgb25UYWdDaGFuZ2VkOiBudWxsXG4gICAgICAgIH0sXG5cblxuICAgICAgICBfY3JlYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIGZvciBoYW5kbGluZyBzdGF0aWMgc2NvcGluZyBpbnNpZGUgY2FsbGJhY2tzXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIFRoZXJlIGFyZSAyIGtpbmRzIG9mIERPTSBub2RlcyB0aGlzIHdpZGdldCBjYW4gYmUgaW5zdGFudGlhdGVkIG9uOlxuICAgICAgICAgICAgLy8gICAgIDEuIFVMLCBPTCwgb3Igc29tZSBlbGVtZW50IGNvbnRhaW5pbmcgZWl0aGVyIG9mIHRoZXNlLlxuICAgICAgICAgICAgLy8gICAgIDIuIElOUFVULCBpbiB3aGljaCBjYXNlICdzaW5nbGVGaWVsZCcgaXMgb3ZlcnJpZGRlbiB0byB0cnVlLFxuICAgICAgICAgICAgLy8gICAgICAgIGEgVUwgaXMgY3JlYXRlZCBhbmQgdGhlIElOUFVUIGlzIGhpZGRlbi5cbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaXMoJ2lucHV0JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ0xpc3QgPSAkKCc8dWw+PC91bD4nKS5pbnNlcnRBZnRlcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zaW5nbGVGaWVsZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnNpbmdsZUZpZWxkTm9kZSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YWdMaXN0ID0gdGhpcy5lbGVtZW50LmZpbmQoJ3VsLCBvbCcpLmFuZFNlbGYoKS5sYXN0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3RhZ0lucHV0ID0gJCgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgLz4nKS5hZGRDbGFzcygndWktd2lkZ2V0LWNvbnRlbnQnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGFiSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90YWdJbnB1dC5hdHRyKCd0YWJpbmRleCcsIHRoaXMub3B0aW9ucy50YWJJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyVGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RhZ0lucHV0LmF0dHIoJ3BsYWNlaG9sZGVyJywgdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyVGV4dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy50YWdTb3VyY2UgPSB0aGlzLm9wdGlvbnMudGFnU291cmNlIHx8IGZ1bmN0aW9uKHNlYXJjaCwgc2hvd0Nob2ljZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gc2VhcmNoLnRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hvaWNlcyA9ICQuZ3JlcCh0aGlzLm9wdGlvbnMuYXZhaWxhYmxlVGFncywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IG1hdGNoIGF1dG9jb21wbGV0ZSBvcHRpb25zIHRoYXQgYmVnaW4gd2l0aCB0aGUgc2VhcmNoIHRlcm0uXG4gICAgICAgICAgICAgICAgICAgIC8vIChDYXNlIGluc2Vuc2l0aXZlLilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlbGVtZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIpID09PSAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzaG93Q2hvaWNlcyh0aGlzLl9zdWJ0cmFjdEFycmF5KGNob2ljZXMsIHRoaXMuYXNzaWduZWRUYWdzKCkpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEJpbmQgdGFnU291cmNlIGNhbGxiYWNrIGZ1bmN0aW9ucyB0byB0aGlzIGNvbnRleHQuXG4gICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy50YWdTb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnRhZ1NvdXJjZSA9ICQucHJveHkodGhpcy5vcHRpb25zLnRhZ1NvdXJjZSwgdGhpcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudGFnTGlzdFxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygndGFnaXQnKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygndWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwnKVxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgaW5wdXQgZmllbGQuXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8bGkgY2xhc3M9XCJ0YWdpdC1uZXdcIj48L2xpPicpLmFwcGVuZCh0aGlzLl90YWdJbnB1dCkpXG4gICAgICAgICAgICAgICAgLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmhhc0NsYXNzKCd0YWdpdC1sYWJlbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll90cmlnZ2VyKCdvblRhZ0NsaWNrZWQnLCBlLCB0YXJnZXQuY2xvc2VzdCgnLnRhZ2l0LWNob2ljZScpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldHMgdGhlIGZvY3VzKCkgdG8gdGhlIGlucHV0IGZpZWxkLCBpZiB0aGUgdXNlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xpY2tzIGFueXdoZXJlIGluc2lkZSB0aGUgVUwuIFRoaXMgaXMgbmVlZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIHRoZSBpbnB1dCBmaWVsZCBuZWVkcyB0byBiZSBvZiBhIHNtYWxsIHNpemUuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll90YWdJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBleGlzdGluZyB0YWdzIGZyb20gdGhlIGxpc3QsIGlmIGFueS5cbiAgICAgICAgICAgIHRoaXMudGFnTGlzdC5jaGlsZHJlbignbGknKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygndGFnaXQtbmV3JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5jcmVhdGVUYWcoJCh0aGlzKS5odG1sKCksICQodGhpcykuYXR0cignY2xhc3MnKSk7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFNpbmdsZSBmaWVsZCBzdXBwb3J0LlxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaW5nbGVGaWVsZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2luZ2xlRmllbGROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBleGlzdGluZyB0YWdzIGZyb20gdGhlIGlucHV0IGZpZWxkLlxuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9ICQodGhpcy5vcHRpb25zLnNpbmdsZUZpZWxkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWdzID0gbm9kZS52YWwoKS5zcGxpdCh0aGlzLm9wdGlvbnMuc2luZ2xlRmllbGREZWxpbWl0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBub2RlLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICQuZWFjaCh0YWdzLCBmdW5jdGlvbihpbmRleCwgdGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmNyZWF0ZVRhZyh0YWcpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgb3VyIHNpbmdsZSBmaWVsZCBpbnB1dCBhZnRlciBvdXIgbGlzdC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnNpbmdsZUZpZWxkTm9kZSA9IHRoaXMudGFnTGlzdC5hZnRlcignPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIiB2YWx1ZT1cIlwiIG5hbWU9XCInICsgdGhpcy5vcHRpb25zLmZpZWxkTmFtZSArICdcIiAvPicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRXZlbnRzLlxuICAgICAgICAgICAgdGhpcy5fdGFnSW5wdXRcbiAgICAgICAgICAgICAgICAua2V5ZG93bihmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBCYWNrc3BhY2UgaXMgbm90IGRldGVjdGVkIHdpdGhpbiBhIGtleXByZXNzLCBzbyBpdCBtdXN0IHVzZSBrZXlkb3duLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT0gJC51aS5rZXlDb2RlLkJBQ0tTUEFDRSAmJiB0aGF0Ll90YWdJbnB1dC52YWwoKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSB0aGF0Ll9sYXN0VGFnKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoYXQub3B0aW9ucy5yZW1vdmVDb25maXJtYXRpb24gfHwgdGFnLmhhc0NsYXNzKCdyZW1vdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gYmFja3NwYWNlIGlzIHByZXNzZWQsIHRoZSBsYXN0IHRhZyBpcyBkZWxldGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucmVtb3ZlVGFnKHRhZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoYXQub3B0aW9ucy5yZW1vdmVDb25maXJtYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWcuYWRkQ2xhc3MoJ3JlbW92ZSB1aS1zdGF0ZS1oaWdobGlnaHQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGF0Lm9wdGlvbnMucmVtb3ZlQ29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9sYXN0VGFnKCkucmVtb3ZlQ2xhc3MoJ3JlbW92ZSB1aS1zdGF0ZS1oaWdobGlnaHQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbW1hL1NwYWNlL0VudGVyIGFyZSBhbGwgdmFsaWQgZGVsaW1pdGVycyBmb3IgbmV3IHRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4Y2VwdCB3aGVuIHRoZXJlIGlzIGFuIG9wZW4gcXVvdGUgb3IgaWYgc2V0dGluZyBhbGxvd1NwYWNlcyA9IHRydWUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRhYiB3aWxsIGFsc28gY3JlYXRlIGEgdGFnLCB1bmxlc3MgdGhlIHRhZyBpbnB1dCBpcyBlbXB0eSwgaW4gd2hpY2ggY2FzZSBpdCBpc24ndCBjYXVnaHQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LndoaWNoID09ICQudWkua2V5Q29kZS5DT01NQSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQud2hpY2ggPT0gJC51aS5rZXlDb2RlLkVOVEVSIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQud2hpY2ggPT0gJC51aS5rZXlDb2RlLlRBQiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX3RhZ0lucHV0LnZhbCgpICE9PSAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LndoaWNoID09ICQudWkua2V5Q29kZS5TUEFDRSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5hbGxvd1NwYWNlcyAhPT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC50cmltKHRoYXQuX3RhZ0lucHV0LnZhbCgpKS5yZXBsYWNlKCAvXnMqLywgJycgKS5jaGFyQXQoMCkgIT0gJ1wiJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnRyaW0odGhhdC5fdGFnSW5wdXQudmFsKCkpLmNoYXJBdCgwKSA9PSAnXCInICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnRyaW0odGhhdC5fdGFnSW5wdXQudmFsKCkpLmNoYXJBdCgkLnRyaW0odGhhdC5fdGFnSW5wdXQudmFsKCkpLmxlbmd0aCAtIDEpID09ICdcIicgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQudHJpbSh0aGF0Ll90YWdJbnB1dC52YWwoKSkubGVuZ3RoIC0gMSAhPT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmNyZWF0ZVRhZyh0aGF0Ll9jbGVhbmVkSW5wdXQoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBhdXRvY29tcGxldGUgZG9lc24ndCBjbG9zZSBhdXRvbWF0aWNhbGx5IHdoZW4gVEFCIGlzIHByZXNzZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTbyBsZXQncyBlbnN1cmUgdGhhdCBpdCBjbG9zZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll90YWdJbnB1dC5hdXRvY29tcGxldGUoJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5ibHVyKGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSB0YWcgd2hlbiB0aGUgZWxlbWVudCBsb3NlcyBmb2N1cyAodW5sZXNzIGl0J3MgZW1wdHkpLlxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmVkIGJ5IG1pa2V5bWNrYXkgYmVjYXVzZSBpdCBicmVha3MgdGhlIG9uVGFnQ2hhbmdlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgIC8vdGhhdC5jcmVhdGVUYWcodGhhdC5fY2xlYW5lZElucHV0KCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAvLyBBdXRvY29tcGxldGUuXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmF2YWlsYWJsZVRhZ3MgfHwgdGhpcy5vcHRpb25zLnRhZ1NvdXJjZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RhZ0lucHV0LmF1dG9jb21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5vcHRpb25zLnRhZ1NvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgbGFzdCB0YWcgaWYgd2UgYXV0b2NvbXBsZXRlIHNvbWV0aGluZyBkZXNwaXRlIHRoZSBpbnB1dCBiZWluZyBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIGJlY2F1c2UgdGhlIGlucHV0J3MgYmx1ciBldmVudCBjYXVzZXMgdGhlIHRhZyB0byBiZSBjcmVhdGVkIHdoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSB1c2VyIGNsaWNrcyBhbiBhdXRvY29tcGxldGUgaXRlbS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBvbmx5IGFydGlmYWN0IG9mIHRoaXMgaXMgdGhhdCB3aGlsZSB0aGUgdXNlciBob2xkcyBkb3duIHRoZSBtb3VzZSBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBzZWxlY3RlZCBhdXRvY29tcGxldGUgaXRlbSwgYSB0YWcgaXMgc2hvd24gd2l0aCB0aGUgcHJlLWF1dG9jb21wbGV0ZWQgdGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpcyBjaGFuZ2VkIHRvIHRoZSBhdXRvY29tcGxldGVkIHRleHQgdXBvbiBtb3VzZXVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuX3RhZ0lucHV0LnZhbCgpID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucmVtb3ZlVGFnKHRoYXQuX2xhc3RUYWcoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5jcmVhdGVUYWcodWkuaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50aW5nIHRoZSB0YWcgaW5wdXQgdG8gYmUgdXBkYXRlZCB3aXRoIHRoZSBjaG9zZW4gdmFsdWUuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBfY2xlYW5lZElucHV0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIFJldHVybnMgdGhlIGNvbnRlbnRzIG9mIHRoZSB0YWcgaW5wdXQsIGNsZWFuZWQgYW5kIHJlYWR5IHRvIGJlIHBhc3NlZCB0byBjcmVhdGVUYWdcbiAgICAgICAgICAgIHJldHVybiAkLnRyaW0odGhpcy5fdGFnSW5wdXQudmFsKCkucmVwbGFjZSgvXlwiKC4qKVwiJC8sICckMScpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBfbGFzdFRhZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50YWdMaXN0LmNoaWxkcmVuKCcudGFnaXQtY2hvaWNlOmxhc3QnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhc3NpZ25lZFRhZ3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gUmV0dXJucyBhbiBhcnJheSBvZiB0YWcgc3RyaW5nIHZhbHVlc1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRhZ3MgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2luZ2xlRmllbGQpIHtcbiAgICAgICAgICAgICAgICB0YWdzID0gJCh0aGlzLm9wdGlvbnMuc2luZ2xlRmllbGROb2RlKS52YWwoKS5zcGxpdCh0aGlzLm9wdGlvbnMuc2luZ2xlRmllbGREZWxpbWl0ZXIpO1xuICAgICAgICAgICAgICAgIGlmICh0YWdzWzBdID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICB0YWdzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ0xpc3QuY2hpbGRyZW4oJy50YWdpdC1jaG9pY2UnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0YWdzLnB1c2godGhhdC50YWdMYWJlbCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGFncztcbiAgICAgICAgfSxcblxuICAgICAgICBfdXBkYXRlU2luZ2xlVGFnc0ZpZWxkOiBmdW5jdGlvbih0YWdzKSB7XG4gICAgICAgICAgICAvLyBUYWtlcyBhIGxpc3Qgb2YgdGFnIHN0cmluZyB2YWx1ZXMsIHVwZGF0ZXMgdGhpcy5vcHRpb25zLnNpbmdsZUZpZWxkTm9kZS52YWwgdG8gdGhlIHRhZ3MgZGVsaW1pdGVkIGJ5IHRoaXMub3B0aW9ucy5zaW5nbGVGaWVsZERlbGltaXRlclxuICAgICAgICAgICAgJCh0aGlzLm9wdGlvbnMuc2luZ2xlRmllbGROb2RlKS52YWwodGFncy5qb2luKHRoaXMub3B0aW9ucy5zaW5nbGVGaWVsZERlbGltaXRlcikpO1xuICAgICAgICB9LFxuXG4gICAgICAgIF9zdWJ0cmFjdEFycmF5OiBmdW5jdGlvbihhMSwgYTIpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KGExW2ldLCBhMikgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYTFbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdGFnTGFiZWw6IGZ1bmN0aW9uKHRhZykge1xuICAgICAgICAgICAgLy8gUmV0dXJucyB0aGUgdGFnJ3Mgc3RyaW5nIGxhYmVsLlxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaW5nbGVGaWVsZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkKHRhZykuY2hpbGRyZW4oJy50YWdpdC1sYWJlbCcpLnRleHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQodGFnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBfaXNOZXc6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaXNOZXcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50YWdMaXN0LmNoaWxkcmVuKCcudGFnaXQtY2hvaWNlJykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoYXQuX2Zvcm1hdFN0cih2YWx1ZSkgPT0gdGhhdC5fZm9ybWF0U3RyKHRoYXQudGFnTGFiZWwodGhpcykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzTmV3ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpc05ldztcbiAgICAgICAgfSxcblxuICAgICAgICBfZm9ybWF0U3RyOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2FzZVNlbnNpdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJC50cmltKHN0ci50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVUYWc6IGZ1bmN0aW9uKHZhbHVlLCBhZGRpdGlvbmFsQ2xhc3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIEF1dG9tYXRpY2FsbHkgdHJpbXMgdGhlIHZhbHVlIG9mIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuXG4gICAgICAgICAgICB2YWx1ZSA9ICQudHJpbSh2YWx1ZSk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5faXNOZXcodmFsdWUpIHx8IHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGxhYmVsID0gJCh0aGlzLm9wdGlvbnMub25UYWdDbGlja2VkID8gJzxhIGNsYXNzPVwidGFnaXQtbGFiZWxcIj48L2E+JyA6ICc8c3BhbiBjbGFzcz1cInRhZ2l0LWxhYmVsXCI+PC9zcGFuPicpLnRleHQodmFsdWUpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGFnLlxuICAgICAgICAgICAgdmFyIHRhZyA9ICQoJzxsaT48L2xpPicpXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCd0YWdpdC1jaG9pY2UgdWktd2lkZ2V0LWNvbnRlbnQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsJylcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoYWRkaXRpb25hbENsYXNzKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQobGFiZWwpO1xuXG4gICAgICAgICAgICAvLyBCdXR0b24gZm9yIHJlbW92aW5nIHRoZSB0YWcuXG4gICAgICAgICAgICB2YXIgcmVtb3ZlVGFnSWNvbiA9ICQoJzxzcGFuPjwvc3Bhbj4nKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygndWktaWNvbiB1aS1pY29uLWNsb3NlJyk7XG4gICAgICAgICAgICB2YXIgcmVtb3ZlVGFnID0gJCgnPGE+PHNwYW4gY2xhc3M9XCJ0ZXh0LWljb25cIj5cXHhkNzwvc3Bhbj48L2E+JykgLy8gXFx4ZDcgaXMgYW4gWFxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygndGFnaXQtY2xvc2UnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQocmVtb3ZlVGFnSWNvbilcbiAgICAgICAgICAgICAgICAuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmVzIGEgdGFnIHdoZW4gdGhlIGxpdHRsZSAneCcgaXMgY2xpY2tlZC5cbiAgICAgICAgICAgICAgICAgICAgdGhhdC5yZW1vdmVUYWcodGFnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRhZy5hcHBlbmQocmVtb3ZlVGFnKTtcblxuICAgICAgICAgICAgLy8gVW5sZXNzIG9wdGlvbnMuc2luZ2xlRmllbGQgaXMgc2V0LCBlYWNoIHRhZyBoYXMgYSBoaWRkZW4gaW5wdXQgZmllbGQgaW5saW5lLlxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaW5nbGVGaWVsZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWdzID0gdGhpcy5hc3NpZ25lZFRhZ3MoKTtcbiAgICAgICAgICAgICAgICB0YWdzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNpbmdsZVRhZ3NGaWVsZCh0YWdzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGVzY2FwZWRWYWx1ZSA9IGxhYmVsLmh0bWwoKTtcbiAgICAgICAgICAgICAgICB0YWcuYXBwZW5kKCc8aW5wdXQgdHlwZT1cImhpZGRlblwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiIHZhbHVlPVwiJyArIGVzY2FwZWRWYWx1ZSArICdcIiBuYW1lPVwiJyArIHRoaXMub3B0aW9ucy5pdGVtTmFtZSArICdbJyArIHRoaXMub3B0aW9ucy5maWVsZE5hbWUgKyAnXVtdXCIgLz4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fdHJpZ2dlcignb25UYWdBZGRlZCcsIG51bGwsIHRhZyk7XG5cbiAgICAgICAgICAgIC8vIENsZWFuaW5nIHRoZSBpbnB1dC5cbiAgICAgICAgICAgIHRoaXMuX3RhZ0lucHV0LnZhbCgnJyk7XG5cbiAgICAgICAgICAgIC8vIGluc2VydCB0YWdcbiAgICAgICAgICAgIHRoaXMuX3RhZ0lucHV0LnBhcmVudCgpLmJlZm9yZSh0YWcpO1xuXG4gICAgICAgICAgICB0aGlzLl90cmlnZ2VyKCdvblRhZ0NoYW5nZWQnLCBudWxsLCB0YWcpO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgcmVtb3ZlVGFnOiBmdW5jdGlvbih0YWcsIGFuaW1hdGUpIHtcbiAgICAgICAgICAgIGFuaW1hdGUgPSBhbmltYXRlIHx8IHRoaXMub3B0aW9ucy5hbmltYXRlO1xuXG4gICAgICAgICAgICB0YWcgPSAkKHRhZyk7XG5cbiAgICAgICAgICAgIHRoaXMuX3RyaWdnZXIoJ29uVGFnUmVtb3ZlZCcsIG51bGwsIHRhZyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2luZ2xlRmllbGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFncyA9IHRoaXMuYXNzaWduZWRUYWdzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlbW92ZWRUYWdMYWJlbCA9IHRoaXMudGFnTGFiZWwodGFnKTtcbiAgICAgICAgICAgICAgICB0YWdzID0gJC5ncmVwKHRhZ3MsIGZ1bmN0aW9uKGVsKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsICE9IHJlbW92ZWRUYWdMYWJlbDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTaW5nbGVUYWdzRmllbGQodGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBbmltYXRlIHRoZSByZW1vdmFsLlxuICAgICAgICAgICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICAgICAgICAgICB0YWcuZmFkZU91dCgnZmFzdCcpLmhpZGUoJ2JsaW5kJywge2RpcmVjdGlvbjogJ2hvcml6b250YWwnfSwgJ2Zhc3QnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB0YWcucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfSkuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YWcucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl90cmlnZ2VyKCdvblRhZ0NoYW5nZWQnLCBudWxsLCB0YWcpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUFsbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmVzIGFsbCB0YWdzLlxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy50YWdMaXN0LmNoaWxkcmVuKCcudGFnaXQtY2hvaWNlJykuZWFjaChmdW5jdGlvbihpbmRleCwgdGFnKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5yZW1vdmVUYWcodGFnLCBmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbn0pKGpRdWVyeSk7XG5cblxuIiwiLy8gbW9tZW50LmpzXG4vLyB2ZXJzaW9uIDogMi4wLjBcbi8vIGF1dGhvciA6IFRpbSBXb29kXG4vLyBsaWNlbnNlIDogTUlUXG4vLyBtb21lbnRqcy5jb21cbihmdW5jdGlvbih0KXtmdW5jdGlvbiBuKHQsbil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB1KHQuY2FsbCh0aGlzLGUpLG4pfX1mdW5jdGlvbiBlKHQpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5sYW5nKCkub3JkaW5hbCh0LmNhbGwodGhpcyxuKSl9fWZ1bmN0aW9uIHMoKXt9ZnVuY3Rpb24gcih0KXtpKHRoaXMsdCl9ZnVuY3Rpb24gYSh0KXt2YXIgbj10aGlzLl9kYXRhPXt9LGU9dC55ZWFyc3x8dC55ZWFyfHx0Lnl8fDAscz10Lm1vbnRoc3x8dC5tb250aHx8dC5NfHwwLHI9dC53ZWVrc3x8dC53ZWVrfHx0Lnd8fDAsYT10LmRheXN8fHQuZGF5fHx0LmR8fDAsaT10LmhvdXJzfHx0LmhvdXJ8fHQuaHx8MCx1PXQubWludXRlc3x8dC5taW51dGV8fHQubXx8MCxkPXQuc2Vjb25kc3x8dC5zZWNvbmR8fHQuc3x8MCxjPXQubWlsbGlzZWNvbmRzfHx0Lm1pbGxpc2Vjb25kfHx0Lm1zfHwwO3RoaXMuX21pbGxpc2Vjb25kcz1jKzFlMypkKzZlNCp1KzM2ZTUqaSx0aGlzLl9kYXlzPWErNypyLHRoaXMuX21vbnRocz1zKzEyKmUsbi5taWxsaXNlY29uZHM9YyUxZTMsZCs9byhjLzFlMyksbi5zZWNvbmRzPWQlNjAsdSs9byhkLzYwKSxuLm1pbnV0ZXM9dSU2MCxpKz1vKHUvNjApLG4uaG91cnM9aSUyNCxhKz1vKGkvMjQpLGErPTcqcixuLmRheXM9YSUzMCxzKz1vKGEvMzApLG4ubW9udGhzPXMlMTIsZSs9byhzLzEyKSxuLnllYXJzPWV9ZnVuY3Rpb24gaSh0LG4pe2Zvcih2YXIgZSBpbiBuKW4uaGFzT3duUHJvcGVydHkoZSkmJih0W2VdPW5bZV0pO3JldHVybiB0fWZ1bmN0aW9uIG8odCl7cmV0dXJuIDA+dD9NYXRoLmNlaWwodCk6TWF0aC5mbG9vcih0KX1mdW5jdGlvbiB1KHQsbil7Zm9yKHZhciBlPXQrXCJcIjtuPmUubGVuZ3RoOyllPVwiMFwiK2U7cmV0dXJuIGV9ZnVuY3Rpb24gZCh0LG4sZSl7dmFyIHMscj1uLl9taWxsaXNlY29uZHMsYT1uLl9kYXlzLGk9bi5fbW9udGhzO3ImJnQuX2Quc2V0VGltZSgrdCtyKmUpLGEmJnQuZGF0ZSh0LmRhdGUoKSthKmUpLGkmJihzPXQuZGF0ZSgpLHQuZGF0ZSgxKS5tb250aCh0Lm1vbnRoKCkraSplKS5kYXRlKE1hdGgubWluKHMsdC5kYXlzSW5Nb250aCgpKSkpfWZ1bmN0aW9uIGModCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWZ1bmN0aW9uIGgodCxuKXt2YXIgZSxzPU1hdGgubWluKHQubGVuZ3RoLG4ubGVuZ3RoKSxyPU1hdGguYWJzKHQubGVuZ3RoLW4ubGVuZ3RoKSxhPTA7Zm9yKGU9MDtzPmU7ZSsrKX5+dFtlXSE9PX5+bltlXSYmYSsrO3JldHVybiBhK3J9ZnVuY3Rpb24gZih0LG4pe3JldHVybiBuLmFiYnI9dCx4W3RdfHwoeFt0XT1uZXcgcykseFt0XS5zZXQobikseFt0XX1mdW5jdGlvbiBsKHQpe3JldHVybiB0PygheFt0XSYmVyYmcmVxdWlyZShcIi4vbGFuZy9cIit0KSx4W3RdKTpPLmZuLl9sYW5nfWZ1bmN0aW9uIF8odCl7cmV0dXJuIHQubWF0Y2goL1xcWy4qXFxdLyk/dC5yZXBsYWNlKC9eXFxbfFxcXSQvZyxcIlwiKTp0LnJlcGxhY2UoL1xcXFwvZyxcIlwiKX1mdW5jdGlvbiBtKHQpe3ZhciBuLGUscz10Lm1hdGNoKEEpO2ZvcihuPTAsZT1zLmxlbmd0aDtlPm47bisrKXNbbl09cm5bc1tuXV0/cm5bc1tuXV06XyhzW25dKTtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGE9XCJcIjtmb3Iobj0wO2U+bjtuKyspYSs9XCJmdW5jdGlvblwiPT10eXBlb2Ygc1tuXS5jYWxsP3Nbbl0uY2FsbChyLHQpOnNbbl07cmV0dXJuIGF9fWZ1bmN0aW9uIHkodCxuKXtmdW5jdGlvbiBlKG4pe3JldHVybiB0LmxhbmcoKS5sb25nRGF0ZUZvcm1hdChuKXx8bn1mb3IodmFyIHM9NTtzLS0mJlAudGVzdChuKTspbj1uLnJlcGxhY2UoUCxlKTtyZXR1cm4gbm5bbl18fChubltuXT1tKG4pKSxubltuXSh0KX1mdW5jdGlvbiBNKHQpe3N3aXRjaCh0KXtjYXNlXCJEREREXCI6cmV0dXJuIEU7Y2FzZVwiWVlZWVwiOnJldHVybiBOO2Nhc2VcIllZWVlZXCI6cmV0dXJuICQ7Y2FzZVwiU1wiOmNhc2VcIlNTXCI6Y2FzZVwiU1NTXCI6Y2FzZVwiREREXCI6cmV0dXJuIFY7Y2FzZVwiTU1NXCI6Y2FzZVwiTU1NTVwiOmNhc2VcImRkXCI6Y2FzZVwiZGRkXCI6Y2FzZVwiZGRkZFwiOmNhc2VcImFcIjpjYXNlXCJBXCI6cmV0dXJuIEk7Y2FzZVwiWFwiOnJldHVybiBSO2Nhc2VcIlpcIjpjYXNlXCJaWlwiOnJldHVybiBYO2Nhc2VcIlRcIjpyZXR1cm4gajtjYXNlXCJNTVwiOmNhc2VcIkREXCI6Y2FzZVwiWVlcIjpjYXNlXCJISFwiOmNhc2VcImhoXCI6Y2FzZVwibW1cIjpjYXNlXCJzc1wiOmNhc2VcIk1cIjpjYXNlXCJEXCI6Y2FzZVwiZFwiOmNhc2VcIkhcIjpjYXNlXCJoXCI6Y2FzZVwibVwiOmNhc2VcInNcIjpyZXR1cm4gSjtkZWZhdWx0OnJldHVybiBSZWdFeHAodC5yZXBsYWNlKFwiXFxcXFwiLFwiXCIpKX19ZnVuY3Rpb24gRCh0LG4sZSl7dmFyIHMscj1lLl9hO3N3aXRjaCh0KXtjYXNlXCJNXCI6Y2FzZVwiTU1cIjpyWzFdPW51bGw9PW4/MDp+fm4tMTticmVhaztjYXNlXCJNTU1cIjpjYXNlXCJNTU1NXCI6cz1sKGUuX2wpLm1vbnRoc1BhcnNlKG4pLG51bGwhPXM/clsxXT1zOmUuX2lzVmFsaWQ9ITE7YnJlYWs7Y2FzZVwiRFwiOmNhc2VcIkREXCI6Y2FzZVwiREREXCI6Y2FzZVwiRERERFwiOm51bGwhPW4mJihyWzJdPX5+bik7YnJlYWs7Y2FzZVwiWVlcIjpyWzBdPX5+bisofn5uPjY4PzE5MDA6MmUzKTticmVhaztjYXNlXCJZWVlZXCI6Y2FzZVwiWVlZWVlcIjpyWzBdPX5+bjticmVhaztjYXNlXCJhXCI6Y2FzZVwiQVwiOmUuX2lzUG09XCJwbVwiPT09KG4rXCJcIikudG9Mb3dlckNhc2UoKTticmVhaztjYXNlXCJIXCI6Y2FzZVwiSEhcIjpjYXNlXCJoXCI6Y2FzZVwiaGhcIjpyWzNdPX5+bjticmVhaztjYXNlXCJtXCI6Y2FzZVwibW1cIjpyWzRdPX5+bjticmVhaztjYXNlXCJzXCI6Y2FzZVwic3NcIjpyWzVdPX5+bjticmVhaztjYXNlXCJTXCI6Y2FzZVwiU1NcIjpjYXNlXCJTU1NcIjpyWzZdPX5+KDFlMyooXCIwLlwiK24pKTticmVhaztjYXNlXCJYXCI6ZS5fZD1uZXcgRGF0ZSgxZTMqcGFyc2VGbG9hdChuKSk7YnJlYWs7Y2FzZVwiWlwiOmNhc2VcIlpaXCI6ZS5fdXNlVVRDPSEwLHM9KG4rXCJcIikubWF0Y2goSykscyYmc1sxXSYmKGUuX3R6aD1+fnNbMV0pLHMmJnNbMl0mJihlLl90em09fn5zWzJdKSxzJiZcIitcIj09PXNbMF0mJihlLl90emg9LWUuX3R6aCxlLl90em09LWUuX3R6bSl9bnVsbD09biYmKGUuX2lzVmFsaWQ9ITEpfWZ1bmN0aW9uIFkodCl7dmFyIG4sZSxzPVtdO2lmKCF0Ll9kKXtmb3Iobj0wOzc+bjtuKyspdC5fYVtuXT1zW25dPW51bGw9PXQuX2Fbbl0/Mj09PW4/MTowOnQuX2Fbbl07c1szXSs9dC5fdHpofHwwLHNbNF0rPXQuX3R6bXx8MCxlPW5ldyBEYXRlKDApLHQuX3VzZVVUQz8oZS5zZXRVVENGdWxsWWVhcihzWzBdLHNbMV0sc1syXSksZS5zZXRVVENIb3VycyhzWzNdLHNbNF0sc1s1XSxzWzZdKSk6KGUuc2V0RnVsbFllYXIoc1swXSxzWzFdLHNbMl0pLGUuc2V0SG91cnMoc1szXSxzWzRdLHNbNV0sc1s2XSkpLHQuX2Q9ZX19ZnVuY3Rpb24gcCh0KXt2YXIgbixlLHM9dC5fZi5tYXRjaChBKSxyPXQuX2k7Zm9yKHQuX2E9W10sbj0wO3MubGVuZ3RoPm47bisrKWU9KE0oc1tuXSkuZXhlYyhyKXx8W10pWzBdLGUmJihyPXIuc2xpY2Uoci5pbmRleE9mKGUpK2UubGVuZ3RoKSkscm5bc1tuXV0mJkQoc1tuXSxlLHQpO3QuX2lzUG0mJjEyPnQuX2FbM10mJih0Ll9hWzNdKz0xMiksdC5faXNQbT09PSExJiYxMj09PXQuX2FbM10mJih0Ll9hWzNdPTApLFkodCl9ZnVuY3Rpb24gZyh0KXt2YXIgbixlLHMsYSxvLHU9OTk7Zm9yKGE9dC5fZi5sZW5ndGg7YT4wO2EtLSl7aWYobj1pKHt9LHQpLG4uX2Y9dC5fZlthLTFdLHAobiksZT1uZXcgcihuKSxlLmlzVmFsaWQoKSl7cz1lO2JyZWFrfW89aChuLl9hLGUudG9BcnJheSgpKSx1Pm8mJih1PW8scz1lKX1pKHQscyl9ZnVuY3Rpb24gdyh0KXt2YXIgbixlPXQuX2k7aWYocS5leGVjKGUpKXtmb3IodC5fZj1cIllZWVktTU0tRERUXCIsbj0wOzQ+bjtuKyspaWYoR1tuXVsxXS5leGVjKGUpKXt0Ll9mKz1HW25dWzBdO2JyZWFrfVguZXhlYyhlKSYmKHQuX2YrPVwiIFpcIikscCh0KX1lbHNlIHQuX2Q9bmV3IERhdGUoZSl9ZnVuY3Rpb24gVChuKXt2YXIgZT1uLl9pLHM9Wi5leGVjKGUpO2U9PT10P24uX2Q9bmV3IERhdGU6cz9uLl9kPW5ldyBEYXRlKCtzWzFdKTpcInN0cmluZ1wiPT10eXBlb2YgZT93KG4pOmMoZSk/KG4uX2E9ZS5zbGljZSgwKSxZKG4pKTpuLl9kPWUgaW5zdGFuY2VvZiBEYXRlP25ldyBEYXRlKCtlKTpuZXcgRGF0ZShlKX1mdW5jdGlvbiB2KHQsbixlLHMscil7cmV0dXJuIHIucmVsYXRpdmVUaW1lKG58fDEsISFlLHQscyl9ZnVuY3Rpb24gayh0LG4sZSl7dmFyIHM9VShNYXRoLmFicyh0KS8xZTMpLHI9VShzLzYwKSxhPVUoci82MCksaT1VKGEvMjQpLG89VShpLzM2NSksdT00NT5zJiZbXCJzXCIsc118fDE9PT1yJiZbXCJtXCJdfHw0NT5yJiZbXCJtbVwiLHJdfHwxPT09YSYmW1wiaFwiXXx8MjI+YSYmW1wiaGhcIixhXXx8MT09PWkmJltcImRcIl18fDI1Pj1pJiZbXCJkZFwiLGldfHw0NT49aSYmW1wiTVwiXXx8MzQ1PmkmJltcIk1NXCIsVShpLzMwKV18fDE9PT1vJiZbXCJ5XCJdfHxbXCJ5eVwiLG9dO3JldHVybiB1WzJdPW4sdVszXT10PjAsdVs0XT1lLHYuYXBwbHkoe30sdSl9ZnVuY3Rpb24gUyh0LG4sZSl7dmFyIHM9ZS1uLHI9ZS10LmRheSgpO3JldHVybiByPnMmJihyLT03KSxzLTc+ciYmKHIrPTcpLE1hdGguY2VpbChPKHQpLmFkZChcImRcIixyKS5kYXlPZlllYXIoKS83KX1mdW5jdGlvbiBiKHQpe3ZhciBuPXQuX2ksZT10Ll9mO3JldHVybiBudWxsPT09bnx8XCJcIj09PW4/bnVsbDooXCJzdHJpbmdcIj09dHlwZW9mIG4mJih0Ll9pPW49bCgpLnByZXBhcnNlKG4pKSxPLmlzTW9tZW50KG4pPyh0PWkoe30sbiksdC5fZD1uZXcgRGF0ZSgrbi5fZCkpOmU/YyhlKT9nKHQpOnAodCk6VCh0KSxuZXcgcih0KSl9ZnVuY3Rpb24gRih0LG4pe08uZm5bdF09Ty5mblt0K1wic1wiXT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9pc1VUQz9cIlVUQ1wiOlwiXCI7cmV0dXJuIG51bGwhPXQ/KHRoaXMuX2RbXCJzZXRcIitlK25dKHQpLHRoaXMpOnRoaXMuX2RbXCJnZXRcIitlK25dKCl9fWZ1bmN0aW9uIEwodCl7Ty5kdXJhdGlvbi5mblt0XT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhW3RdfX1mdW5jdGlvbiBIKHQsbil7Ty5kdXJhdGlvbi5mbltcImFzXCIrdF09ZnVuY3Rpb24oKXtyZXR1cm4rdGhpcy9ufX1mb3IodmFyIE8seixDPVwiMi4wLjBcIixVPU1hdGgucm91bmQseD17fSxXPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzLFo9L15cXC8/RGF0ZVxcKChcXC0/XFxkKykvaSxBPS8oXFxbW15cXFtdKlxcXSl8KFxcXFwpPyhNb3xNTT9NP00/fERvfERERG98REQ/RD9EP3xkZGQ/ZD98ZG8/fHdbb3x3XT98V1tvfFddP3xZWVlZWXxZWVlZfFlZfGF8QXxoaD98SEg/fG1tP3xzcz98U1M/Uz98WHx6ej98Wlo/fC4pL2csUD0vKFxcW1teXFxbXSpcXF0pfChcXFxcKT8oTFR8TEw/TD9MP3xsezEsNH0pL2csSj0vXFxkXFxkPy8sVj0vXFxkezEsM30vLEU9L1xcZHszfS8sTj0vXFxkezEsNH0vLCQ9L1srXFwtXT9cXGR7MSw2fS8sST0vWzAtOV0qW2EtelxcdTAwQTAtXFx1MDVGRlxcdTA3MDAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0rfFtcXHUwNjAwLVxcdTA2RkZdK1xccyo/W1xcdTA2MDAtXFx1MDZGRl0rL2ksWD0vWnxbXFwrXFwtXVxcZFxcZDo/XFxkXFxkL2ksaj0vVC9pLFI9L1tcXCtcXC1dP1xcZCsoXFwuXFxkezEsM30pPy8scT0vXlxccypcXGR7NH0tXFxkXFxkLVxcZFxcZCgoVHwgKShcXGRcXGQoOlxcZFxcZCg6XFxkXFxkKFxcLlxcZFxcZD9cXGQ/KT8pPyk/KT8oW1xcK1xcLV1cXGRcXGQ6P1xcZFxcZCk/KT8vLEI9XCJZWVlZLU1NLUREVEhIOm1tOnNzWlwiLEc9W1tcIkhIOm1tOnNzLlNcIiwvKFR8IClcXGRcXGQ6XFxkXFxkOlxcZFxcZFxcLlxcZHsxLDN9L10sW1wiSEg6bW06c3NcIiwvKFR8IClcXGRcXGQ6XFxkXFxkOlxcZFxcZC9dLFtcIkhIOm1tXCIsLyhUfCApXFxkXFxkOlxcZFxcZC9dLFtcIkhIXCIsLyhUfCApXFxkXFxkL11dLEs9LyhbXFwrXFwtXXxcXGRcXGQpL2dpLFE9XCJNb250aHxEYXRlfEhvdXJzfE1pbnV0ZXN8U2Vjb25kc3xNaWxsaXNlY29uZHNcIi5zcGxpdChcInxcIiksdG49e01pbGxpc2Vjb25kczoxLFNlY29uZHM6MWUzLE1pbnV0ZXM6NmU0LEhvdXJzOjM2ZTUsRGF5czo4NjRlNSxNb250aHM6MjU5MmU2LFllYXJzOjMxNTM2ZTZ9LG5uPXt9LGVuPVwiREREIHcgVyBNIEQgZFwiLnNwbGl0KFwiIFwiKSxzbj1cIk0gRCBIIGggbSBzIHcgV1wiLnNwbGl0KFwiIFwiKSxybj17TTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vbnRoKCkrMX0sTU1NOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxhbmcoKS5tb250aHNTaG9ydCh0aGlzLHQpfSxNTU1NOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxhbmcoKS5tb250aHModGhpcyx0KX0sRDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGUoKX0sREREOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF5T2ZZZWFyKCl9LGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXkoKX0sZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGFuZygpLndlZWtkYXlzTWluKHRoaXMsdCl9LGRkZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sYW5nKCkud2Vla2RheXNTaG9ydCh0aGlzLHQpfSxkZGRkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxhbmcoKS53ZWVrZGF5cyh0aGlzLHQpfSx3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2VlaygpfSxXOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNvV2VlaygpfSxZWTpmdW5jdGlvbigpe3JldHVybiB1KHRoaXMueWVhcigpJTEwMCwyKX0sWVlZWTpmdW5jdGlvbigpe3JldHVybiB1KHRoaXMueWVhcigpLDQpfSxZWVlZWTpmdW5jdGlvbigpe3JldHVybiB1KHRoaXMueWVhcigpLDUpfSxhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFuZygpLm1lcmlkaWVtKHRoaXMuaG91cnMoKSx0aGlzLm1pbnV0ZXMoKSwhMCl9LEE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYW5nKCkubWVyaWRpZW0odGhpcy5ob3VycygpLHRoaXMubWludXRlcygpLCExKX0sSDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhvdXJzKCl9LGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ob3VycygpJTEyfHwxMn0sbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbnV0ZXMoKX0sczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlY29uZHMoKX0sUzpmdW5jdGlvbigpe3JldHVybn5+KHRoaXMubWlsbGlzZWNvbmRzKCkvMTAwKX0sU1M6ZnVuY3Rpb24oKXtyZXR1cm4gdSh+fih0aGlzLm1pbGxpc2Vjb25kcygpLzEwKSwyKX0sU1NTOmZ1bmN0aW9uKCl7cmV0dXJuIHUodGhpcy5taWxsaXNlY29uZHMoKSwzKX0sWjpmdW5jdGlvbigpe3ZhciB0PS10aGlzLnpvbmUoKSxuPVwiK1wiO3JldHVybiAwPnQmJih0PS10LG49XCItXCIpLG4rdSh+fih0LzYwKSwyKStcIjpcIit1KH5+dCU2MCwyKX0sWlo6ZnVuY3Rpb24oKXt2YXIgdD0tdGhpcy56b25lKCksbj1cIitcIjtyZXR1cm4gMD50JiYodD0tdCxuPVwiLVwiKSxuK3Uofn4oMTAqdC82KSw0KX0sWDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaXgoKX19O2VuLmxlbmd0aDspej1lbi5wb3AoKSxyblt6K1wib1wiXT1lKHJuW3pdKTtmb3IoO3NuLmxlbmd0aDspej1zbi5wb3AoKSxyblt6K3pdPW4ocm5bel0sMik7Zm9yKHJuLkREREQ9bihybi5EREQsMykscy5wcm90b3R5cGU9e3NldDpmdW5jdGlvbih0KXt2YXIgbixlO2ZvcihlIGluIHQpbj10W2VdLFwiZnVuY3Rpb25cIj09dHlwZW9mIG4/dGhpc1tlXT1uOnRoaXNbXCJfXCIrZV09bn0sX21vbnRoczpcIkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXJcIi5zcGxpdChcIl9cIiksbW9udGhzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tb250aHNbdC5tb250aCgpXX0sX21vbnRoc1Nob3J0OlwiSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWNcIi5zcGxpdChcIl9cIiksbW9udGhzU2hvcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21vbnRoc1Nob3J0W3QubW9udGgoKV19LG1vbnRoc1BhcnNlOmZ1bmN0aW9uKHQpe3ZhciBuLGUscztmb3IodGhpcy5fbW9udGhzUGFyc2V8fCh0aGlzLl9tb250aHNQYXJzZT1bXSksbj0wOzEyPm47bisrKWlmKHRoaXMuX21vbnRoc1BhcnNlW25dfHwoZT1PKFsyZTMsbl0pLHM9XCJeXCIrdGhpcy5tb250aHMoZSxcIlwiKStcInxeXCIrdGhpcy5tb250aHNTaG9ydChlLFwiXCIpLHRoaXMuX21vbnRoc1BhcnNlW25dPVJlZ0V4cChzLnJlcGxhY2UoXCIuXCIsXCJcIiksXCJpXCIpKSx0aGlzLl9tb250aHNQYXJzZVtuXS50ZXN0KHQpKXJldHVybiBufSxfd2Vla2RheXM6XCJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheVwiLnNwbGl0KFwiX1wiKSx3ZWVrZGF5czpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fd2Vla2RheXNbdC5kYXkoKV19LF93ZWVrZGF5c1Nob3J0OlwiU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0XCIuc3BsaXQoXCJfXCIpLHdlZWtkYXlzU2hvcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzU2hvcnRbdC5kYXkoKV19LF93ZWVrZGF5c01pbjpcIlN1X01vX1R1X1dlX1RoX0ZyX1NhXCIuc3BsaXQoXCJfXCIpLHdlZWtkYXlzTWluOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl93ZWVrZGF5c01pblt0LmRheSgpXX0sX2xvbmdEYXRlRm9ybWF0OntMVDpcImg6bW0gQVwiLEw6XCJNTS9ERC9ZWVlZXCIsTEw6XCJNTU1NIEQgWVlZWVwiLExMTDpcIk1NTU0gRCBZWVlZIExUXCIsTExMTDpcImRkZGQsIE1NTU0gRCBZWVlZIExUXCJ9LGxvbmdEYXRlRm9ybWF0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuX2xvbmdEYXRlRm9ybWF0W3RdO3JldHVybiFuJiZ0aGlzLl9sb25nRGF0ZUZvcm1hdFt0LnRvVXBwZXJDYXNlKCldJiYobj10aGlzLl9sb25nRGF0ZUZvcm1hdFt0LnRvVXBwZXJDYXNlKCldLnJlcGxhY2UoL01NTU18TU18RER8ZGRkZC9nLGZ1bmN0aW9uKHQpe3JldHVybiB0LnNsaWNlKDEpfSksdGhpcy5fbG9uZ0RhdGVGb3JtYXRbdF09biksbn0sbWVyaWRpZW06ZnVuY3Rpb24odCxuLGUpe3JldHVybiB0PjExP2U/XCJwbVwiOlwiUE1cIjplP1wiYW1cIjpcIkFNXCJ9LF9jYWxlbmRhcjp7c2FtZURheTpcIltUb2RheSBhdF0gTFRcIixuZXh0RGF5OlwiW1RvbW9ycm93IGF0XSBMVFwiLG5leHRXZWVrOlwiZGRkZCBbYXRdIExUXCIsbGFzdERheTpcIltZZXN0ZXJkYXkgYXRdIExUXCIsbGFzdFdlZWs6XCJbTGFzdF0gZGRkZCBbYXRdIExUXCIsc2FtZUVsc2U6XCJMXCJ9LGNhbGVuZGFyOmZ1bmN0aW9uKHQsbil7dmFyIGU9dGhpcy5fY2FsZW5kYXJbdF07cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lLmFwcGx5KG4pOmV9LF9yZWxhdGl2ZVRpbWU6e2Z1dHVyZTpcImluICVzXCIscGFzdDpcIiVzIGFnb1wiLHM6XCJhIGZldyBzZWNvbmRzXCIsbTpcImEgbWludXRlXCIsbW06XCIlZCBtaW51dGVzXCIsaDpcImFuIGhvdXJcIixoaDpcIiVkIGhvdXJzXCIsZDpcImEgZGF5XCIsZGQ6XCIlZCBkYXlzXCIsTTpcImEgbW9udGhcIixNTTpcIiVkIG1vbnRoc1wiLHk6XCJhIHllYXJcIix5eTpcIiVkIHllYXJzXCJ9LHJlbGF0aXZlVGltZTpmdW5jdGlvbih0LG4sZSxzKXt2YXIgcj10aGlzLl9yZWxhdGl2ZVRpbWVbZV07cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2Ygcj9yKHQsbixlLHMpOnIucmVwbGFjZSgvJWQvaSx0KX0scGFzdEZ1dHVyZTpmdW5jdGlvbih0LG4pe3ZhciBlPXRoaXMuX3JlbGF0aXZlVGltZVt0PjA/XCJmdXR1cmVcIjpcInBhc3RcIl07cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lKG4pOmUucmVwbGFjZSgvJXMvaSxuKX0sb3JkaW5hbDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3JkaW5hbC5yZXBsYWNlKFwiJWRcIix0KX0sX29yZGluYWw6XCIlZFwiLHByZXBhcnNlOmZ1bmN0aW9uKHQpe3JldHVybiB0fSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHQpe3JldHVybiB0fSx3ZWVrOmZ1bmN0aW9uKHQpe3JldHVybiBTKHQsdGhpcy5fd2Vlay5kb3csdGhpcy5fd2Vlay5kb3kpfSxfd2Vlazp7ZG93OjAsZG95OjZ9fSxPPWZ1bmN0aW9uKHQsbixlKXtyZXR1cm4gYih7X2k6dCxfZjpuLF9sOmUsX2lzVVRDOiExfSl9LE8udXRjPWZ1bmN0aW9uKHQsbixlKXtyZXR1cm4gYih7X3VzZVVUQzohMCxfaXNVVEM6ITAsX2w6ZSxfaTp0LF9mOm59KX0sTy51bml4PWZ1bmN0aW9uKHQpe3JldHVybiBPKDFlMyp0KX0sTy5kdXJhdGlvbj1mdW5jdGlvbih0LG4pe3ZhciBlLHM9Ty5pc0R1cmF0aW9uKHQpLHI9XCJudW1iZXJcIj09dHlwZW9mIHQsaT1zP3QuX2RhdGE6cj97fTp0O3JldHVybiByJiYobj9pW25dPXQ6aS5taWxsaXNlY29uZHM9dCksZT1uZXcgYShpKSxzJiZ0Lmhhc093blByb3BlcnR5KFwiX2xhbmdcIikmJihlLl9sYW5nPXQuX2xhbmcpLGV9LE8udmVyc2lvbj1DLE8uZGVmYXVsdEZvcm1hdD1CLE8ubGFuZz1mdW5jdGlvbihuLGUpe3JldHVybiBuPyhlP2YobixlKTp4W25dfHxsKG4pLE8uZHVyYXRpb24uZm4uX2xhbmc9Ty5mbi5fbGFuZz1sKG4pLHQpOk8uZm4uX2xhbmcuX2FiYnJ9LE8ubGFuZ0RhdGE9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX2xhbmcmJnQuX2xhbmcuX2FiYnImJih0PXQuX2xhbmcuX2FiYnIpLGwodCl9LE8uaXNNb21lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiByfSxPLmlzRHVyYXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBhfSxPLmZuPXIucHJvdG90eXBlPXtjbG9uZTpmdW5jdGlvbigpe3JldHVybiBPKHRoaXMpfSx2YWx1ZU9mOmZ1bmN0aW9uKCl7cmV0dXJuK3RoaXMuX2R9LHVuaXg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5mbG9vcigrdGhpcy5fZC8xZTMpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm1hdChcImRkZCBNTU0gREQgWVlZWSBISDptbTpzcyBbR01UXVpaXCIpfSx0b0RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZH0sdG9KU09OOmZ1bmN0aW9uKCl7cmV0dXJuIE8odGhpcykudXRjKCkuZm9ybWF0KFwiWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXVwiKX0sdG9BcnJheTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuW3QueWVhcigpLHQubW9udGgoKSx0LmRhdGUoKSx0LmhvdXJzKCksdC5taW51dGVzKCksdC5zZWNvbmRzKCksdC5taWxsaXNlY29uZHMoKV19LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09dGhpcy5faXNWYWxpZCYmKHRoaXMuX2lzVmFsaWQ9dGhpcy5fYT8haCh0aGlzLl9hLCh0aGlzLl9pc1VUQz9PLnV0Yyh0aGlzLl9hKTpPKHRoaXMuX2EpKS50b0FycmF5KCkpOiFpc05hTih0aGlzLl9kLmdldFRpbWUoKSkpLCEhdGhpcy5faXNWYWxpZH0sdXRjOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVVRDPSEwLHRoaXN9LGxvY2FsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVVRDPSExLHRoaXN9LGZvcm1hdDpmdW5jdGlvbih0KXt2YXIgbj15KHRoaXMsdHx8Ty5kZWZhdWx0Rm9ybWF0KTtyZXR1cm4gdGhpcy5sYW5nKCkucG9zdGZvcm1hdChuKX0sYWRkOmZ1bmN0aW9uKHQsbil7dmFyIGU7cmV0dXJuIGU9XCJzdHJpbmdcIj09dHlwZW9mIHQ/Ty5kdXJhdGlvbigrbix0KTpPLmR1cmF0aW9uKHQsbiksZCh0aGlzLGUsMSksdGhpc30sc3VidHJhY3Q6ZnVuY3Rpb24odCxuKXt2YXIgZTtyZXR1cm4gZT1cInN0cmluZ1wiPT10eXBlb2YgdD9PLmR1cmF0aW9uKCtuLHQpOk8uZHVyYXRpb24odCxuKSxkKHRoaXMsZSwtMSksdGhpc30sZGlmZjpmdW5jdGlvbih0LG4sZSl7dmFyIHMscixhPXRoaXMuX2lzVVRDP08odCkudXRjKCk6Tyh0KS5sb2NhbCgpLGk9NmU0Kih0aGlzLnpvbmUoKS1hLnpvbmUoKSk7cmV0dXJuIG4mJihuPW4ucmVwbGFjZSgvcyQvLFwiXCIpKSxcInllYXJcIj09PW58fFwibW9udGhcIj09PW4/KHM9NDMyZTUqKHRoaXMuZGF5c0luTW9udGgoKSthLmRheXNJbk1vbnRoKCkpLHI9MTIqKHRoaXMueWVhcigpLWEueWVhcigpKSsodGhpcy5tb250aCgpLWEubW9udGgoKSkscis9KHRoaXMtTyh0aGlzKS5zdGFydE9mKFwibW9udGhcIiktKGEtTyhhKS5zdGFydE9mKFwibW9udGhcIikpKS9zLFwieWVhclwiPT09biYmKHIvPTEyKSk6KHM9dGhpcy1hLWkscj1cInNlY29uZFwiPT09bj9zLzFlMzpcIm1pbnV0ZVwiPT09bj9zLzZlNDpcImhvdXJcIj09PW4/cy8zNmU1OlwiZGF5XCI9PT1uP3MvODY0ZTU6XCJ3ZWVrXCI9PT1uP3MvNjA0OGU1OnMpLGU/cjpvKHIpfSxmcm9tOmZ1bmN0aW9uKHQsbil7cmV0dXJuIE8uZHVyYXRpb24odGhpcy5kaWZmKHQpKS5sYW5nKHRoaXMubGFuZygpLl9hYmJyKS5odW1hbml6ZSghbil9LGZyb21Ob3c6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZnJvbShPKCksdCl9LGNhbGVuZGFyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kaWZmKE8oKS5zdGFydE9mKFwiZGF5XCIpLFwiZGF5c1wiLCEwKSxuPS02PnQ/XCJzYW1lRWxzZVwiOi0xPnQ/XCJsYXN0V2Vla1wiOjA+dD9cImxhc3REYXlcIjoxPnQ/XCJzYW1lRGF5XCI6Mj50P1wibmV4dERheVwiOjc+dD9cIm5leHRXZWVrXCI6XCJzYW1lRWxzZVwiO3JldHVybiB0aGlzLmZvcm1hdCh0aGlzLmxhbmcoKS5jYWxlbmRhcihuLHRoaXMpKX0saXNMZWFwWWVhcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMueWVhcigpO3JldHVybiAwPT09dCU0JiYwIT09dCUxMDB8fDA9PT10JTQwMH0saXNEU1Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56b25lKCk8TyhbdGhpcy55ZWFyKCldKS56b25lKCl8fHRoaXMuem9uZSgpPE8oW3RoaXMueWVhcigpLDVdKS56b25lKCl9LGRheTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9pc1VUQz90aGlzLl9kLmdldFVUQ0RheSgpOnRoaXMuX2QuZ2V0RGF5KCk7cmV0dXJuIG51bGw9PXQ/bjp0aGlzLmFkZCh7ZDp0LW59KX0sc3RhcnRPZjpmdW5jdGlvbih0KXtzd2l0Y2godD10LnJlcGxhY2UoL3MkLyxcIlwiKSl7Y2FzZVwieWVhclwiOnRoaXMubW9udGgoMCk7Y2FzZVwibW9udGhcIjp0aGlzLmRhdGUoMSk7Y2FzZVwid2Vla1wiOmNhc2VcImRheVwiOnRoaXMuaG91cnMoMCk7Y2FzZVwiaG91clwiOnRoaXMubWludXRlcygwKTtjYXNlXCJtaW51dGVcIjp0aGlzLnNlY29uZHMoMCk7Y2FzZVwic2Vjb25kXCI6dGhpcy5taWxsaXNlY29uZHMoMCl9cmV0dXJuXCJ3ZWVrXCI9PT10JiZ0aGlzLmRheSgwKSx0aGlzfSxlbmRPZjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdGFydE9mKHQpLmFkZCh0LnJlcGxhY2UoL3M/JC8sXCJzXCIpLDEpLnN1YnRyYWN0KFwibXNcIiwxKX0saXNBZnRlcjpmdW5jdGlvbihuLGUpe3JldHVybiBlPWUhPT10P2U6XCJtaWxsaXNlY29uZFwiLCt0aGlzLmNsb25lKCkuc3RhcnRPZihlKT4rTyhuKS5zdGFydE9mKGUpfSxpc0JlZm9yZTpmdW5jdGlvbihuLGUpe3JldHVybiBlPWUhPT10P2U6XCJtaWxsaXNlY29uZFwiLCt0aGlzLmNsb25lKCkuc3RhcnRPZihlKTwrTyhuKS5zdGFydE9mKGUpfSxpc1NhbWU6ZnVuY3Rpb24obixlKXtyZXR1cm4gZT1lIT09dD9lOlwibWlsbGlzZWNvbmRcIiwrdGhpcy5jbG9uZSgpLnN0YXJ0T2YoZSk9PT0rTyhuKS5zdGFydE9mKGUpfSx6b25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVVRDPzA6dGhpcy5fZC5nZXRUaW1lem9uZU9mZnNldCgpfSxkYXlzSW5Nb250aDpmdW5jdGlvbigpe3JldHVybiBPLnV0YyhbdGhpcy55ZWFyKCksdGhpcy5tb250aCgpKzEsMF0pLmRhdGUoKX0sZGF5T2ZZZWFyOmZ1bmN0aW9uKHQpe3ZhciBuPVUoKE8odGhpcykuc3RhcnRPZihcImRheVwiKS1PKHRoaXMpLnN0YXJ0T2YoXCJ5ZWFyXCIpKS84NjRlNSkrMTtyZXR1cm4gbnVsbD09dD9uOnRoaXMuYWRkKFwiZFwiLHQtbil9LGlzb1dlZWs6ZnVuY3Rpb24odCl7dmFyIG49Uyh0aGlzLDEsNCk7cmV0dXJuIG51bGw9PXQ/bjp0aGlzLmFkZChcImRcIiw3Kih0LW4pKX0sd2VlazpmdW5jdGlvbih0KXt2YXIgbj10aGlzLmxhbmcoKS53ZWVrKHRoaXMpO3JldHVybiBudWxsPT10P246dGhpcy5hZGQoXCJkXCIsNyoodC1uKSl9LGxhbmc6ZnVuY3Rpb24obil7cmV0dXJuIG49PT10P3RoaXMuX2xhbmc6KHRoaXMuX2xhbmc9bChuKSx0aGlzKX19LHo9MDtRLmxlbmd0aD56O3orKylGKFFbel0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9zJC8sXCJcIiksUVt6XSk7RihcInllYXJcIixcIkZ1bGxZZWFyXCIpLE8uZm4uZGF5cz1PLmZuLmRheSxPLmZuLndlZWtzPU8uZm4ud2VlayxPLmZuLmlzb1dlZWtzPU8uZm4uaXNvV2VlayxPLmR1cmF0aW9uLmZuPWEucHJvdG90eXBlPXt3ZWVrczpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMuZGF5cygpLzcpfSx2YWx1ZU9mOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21pbGxpc2Vjb25kcys4NjRlNSp0aGlzLl9kYXlzKzI1OTJlNip0aGlzLl9tb250aHN9LGh1bWFuaXplOmZ1bmN0aW9uKHQpe3ZhciBuPSt0aGlzLGU9ayhuLCF0LHRoaXMubGFuZygpKTtyZXR1cm4gdCYmKGU9dGhpcy5sYW5nKCkucGFzdEZ1dHVyZShuLGUpKSx0aGlzLmxhbmcoKS5wb3N0Zm9ybWF0KGUpfSxsYW5nOk8uZm4ubGFuZ307Zm9yKHogaW4gdG4pdG4uaGFzT3duUHJvcGVydHkoeikmJihIKHosdG5bel0pLEwoei50b0xvd2VyQ2FzZSgpKSk7SChcIldlZWtzXCIsNjA0OGU1KSxPLmxhbmcoXCJlblwiLHtvcmRpbmFsOmZ1bmN0aW9uKHQpe3ZhciBuPXQlMTAsZT0xPT09fn4odCUxMDAvMTApP1widGhcIjoxPT09bj9cInN0XCI6Mj09PW4/XCJuZFwiOjM9PT1uP1wicmRcIjpcInRoXCI7cmV0dXJuIHQrZX19KSxXJiYobW9kdWxlLmV4cG9ydHM9TyksXCJ1bmRlZmluZWRcIj09dHlwZW9mIGVuZGVyJiYodGhpcy5tb21lbnQ9TyksXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJtb21lbnRcIixbXSxmdW5jdGlvbigpe3JldHVybiBPfSl9KS5jYWxsKHRoaXMpOyIsIi8qIVxuICogalF1ZXJ5IENvb2tpZSBQbHVnaW5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jYXJoYXJ0bC9qcXVlcnktY29va2llXG4gKlxuICogQ29weXJpZ2h0IDIwMTEsIEtsYXVzIEhhcnRsXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy5cbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0dQTC0yLjBcbiAqL1xuKGZ1bmN0aW9uKCQpIHtcbiAgICAkLmNvb2tpZSA9IGZ1bmN0aW9uKGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcblxuICAgICAgICAvLyBrZXkgYW5kIGF0IGxlYXN0IHZhbHVlIGdpdmVuLCBzZXQgY29va2llLi4uXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiAoIS9PYmplY3QvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSkgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5leHBpcmVzID0gLTE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5leHBpcmVzID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHZhciBkYXlzID0gb3B0aW9ucy5leHBpcmVzLCB0ID0gb3B0aW9ucy5leHBpcmVzID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICB0LnNldERhdGUodC5nZXREYXRlKCkgKyBkYXlzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gKGRvY3VtZW50LmNvb2tpZSA9IFtcbiAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoa2V5KSwgJz0nLCBvcHRpb25zLnJhdyA/IHZhbHVlIDogZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zLmV4cGlyZXMgPyAnOyBleHBpcmVzPScgKyBvcHRpb25zLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnLCAvLyB1c2UgZXhwaXJlcyBhdHRyaWJ1dGUsIG1heC1hZ2UgaXMgbm90IHN1cHBvcnRlZCBieSBJRVxuICAgICAgICAgICAgICAgIG9wdGlvbnMucGF0aCAgICA/ICc7IHBhdGg9JyArIG9wdGlvbnMucGF0aCA6ICcnLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZG9tYWluICA/ICc7IGRvbWFpbj0nICsgb3B0aW9ucy5kb21haW4gOiAnJyxcbiAgICAgICAgICAgICAgICBvcHRpb25zLnNlY3VyZSAgPyAnOyBzZWN1cmUnIDogJydcbiAgICAgICAgICAgIF0uam9pbignJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8ga2V5IGFuZCBwb3NzaWJseSBvcHRpb25zIGdpdmVuLCBnZXQgY29va2llLi4uXG4gICAgICAgIG9wdGlvbnMgPSB2YWx1ZSB8fCB7fTtcbiAgICAgICAgdmFyIGRlY29kZSA9IG9wdGlvbnMucmF3ID8gZnVuY3Rpb24ocykgeyByZXR1cm4gczsgfSA6IGRlY29kZVVSSUNvbXBvbmVudDtcblxuICAgICAgICB2YXIgcGFpcnMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsgJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwYWlyOyBwYWlyID0gcGFpcnNbaV0gJiYgcGFpcnNbaV0uc3BsaXQoJz0nKTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZGVjb2RlKHBhaXJbMF0pID09PSBrZXkpIHJldHVybiBkZWNvZGUocGFpclsxXSB8fCAnJyk7IC8vIElFIHNhdmVzIGNvb2tpZXMgd2l0aCBlbXB0eSBzdHJpbmcgYXMgXCJjOyBcIiwgZS5nLiB3aXRob3V0IFwiPVwiIGFzIG9wcG9zZWQgdG8gRU9NQiwgdGh1cyBwYWlyWzFdIG1heSBiZSB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xufSkoalF1ZXJ5KTtcbiIsIi8qKlxuKlxuKiAgQmFzZTY0IGVuY29kZSAvIGRlY29kZVxuKiAgaHR0cDovL3d3dy53ZWJ0b29sa2l0LmluZm8vXG4qXG4qKi9cbiBcbnZhciBCYXNlNjQgPSB7XG4gXG5cdC8vIHByaXZhdGUgcHJvcGVydHlcblx0X2tleVN0ciA6IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIixcbiBcblx0Ly8gcHVibGljIG1ldGhvZCBmb3IgZW5jb2Rpbmdcblx0ZW5jb2RlIDogZnVuY3Rpb24gKGlucHV0KSB7XG5cdFx0dmFyIG91dHB1dCA9IFwiXCI7XG5cdFx0dmFyIGNocjEsIGNocjIsIGNocjMsIGVuYzEsIGVuYzIsIGVuYzMsIGVuYzQ7XG5cdFx0dmFyIGkgPSAwO1xuIFxuXHRcdGlucHV0ID0gQmFzZTY0Ll91dGY4X2VuY29kZShpbnB1dCk7XG4gXG5cdFx0d2hpbGUgKGkgPCBpbnB1dC5sZW5ndGgpIHtcbiBcblx0XHRcdGNocjEgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7XG5cdFx0XHRjaHIyID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xuXHRcdFx0Y2hyMyA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcbiBcblx0XHRcdGVuYzEgPSBjaHIxID4+IDI7XG5cdFx0XHRlbmMyID0gKChjaHIxICYgMykgPDwgNCkgfCAoY2hyMiA+PiA0KTtcblx0XHRcdGVuYzMgPSAoKGNocjIgJiAxNSkgPDwgMikgfCAoY2hyMyA+PiA2KTtcblx0XHRcdGVuYzQgPSBjaHIzICYgNjM7XG4gXG5cdFx0XHRpZiAoaXNOYU4oY2hyMikpIHtcblx0XHRcdFx0ZW5jMyA9IGVuYzQgPSA2NDtcblx0XHRcdH0gZWxzZSBpZiAoaXNOYU4oY2hyMykpIHtcblx0XHRcdFx0ZW5jNCA9IDY0O1xuXHRcdFx0fVxuIFxuXHRcdFx0b3V0cHV0ID0gb3V0cHV0ICtcblx0XHRcdHRoaXMuX2tleVN0ci5jaGFyQXQoZW5jMSkgKyB0aGlzLl9rZXlTdHIuY2hhckF0KGVuYzIpICtcblx0XHRcdHRoaXMuX2tleVN0ci5jaGFyQXQoZW5jMykgKyB0aGlzLl9rZXlTdHIuY2hhckF0KGVuYzQpO1xuIFxuXHRcdH1cbiBcblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9LFxuIFxuXHQvLyBwdWJsaWMgbWV0aG9kIGZvciBkZWNvZGluZ1xuXHRkZWNvZGUgOiBmdW5jdGlvbiAoaW5wdXQpIHtcblx0XHR2YXIgb3V0cHV0ID0gXCJcIjtcblx0XHR2YXIgY2hyMSwgY2hyMiwgY2hyMztcblx0XHR2YXIgZW5jMSwgZW5jMiwgZW5jMywgZW5jNDtcblx0XHR2YXIgaSA9IDA7XG4gXG5cdFx0aW5wdXQgPSBpbnB1dC5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL1xcPV0vZywgXCJcIik7XG4gXG5cdFx0d2hpbGUgKGkgPCBpbnB1dC5sZW5ndGgpIHtcbiBcblx0XHRcdGVuYzEgPSB0aGlzLl9rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XG5cdFx0XHRlbmMyID0gdGhpcy5fa2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpO1xuXHRcdFx0ZW5jMyA9IHRoaXMuX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTtcblx0XHRcdGVuYzQgPSB0aGlzLl9rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XG4gXG5cdFx0XHRjaHIxID0gKGVuYzEgPDwgMikgfCAoZW5jMiA+PiA0KTtcblx0XHRcdGNocjIgPSAoKGVuYzIgJiAxNSkgPDwgNCkgfCAoZW5jMyA+PiAyKTtcblx0XHRcdGNocjMgPSAoKGVuYzMgJiAzKSA8PCA2KSB8IGVuYzQ7XG4gXG5cdFx0XHRvdXRwdXQgPSBvdXRwdXQgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjEpO1xuIFxuXHRcdFx0aWYgKGVuYzMgIT0gNjQpIHtcblx0XHRcdFx0b3V0cHV0ID0gb3V0cHV0ICsgU3RyaW5nLmZyb21DaGFyQ29kZShjaHIyKTtcblx0XHRcdH1cblx0XHRcdGlmIChlbmM0ICE9IDY0KSB7XG5cdFx0XHRcdG91dHB1dCA9IG91dHB1dCArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyMyk7XG5cdFx0XHR9XG4gXG5cdFx0fVxuIFxuXHRcdG91dHB1dCA9IEJhc2U2NC5fdXRmOF9kZWNvZGUob3V0cHV0KTtcbiBcblx0XHRyZXR1cm4gb3V0cHV0O1xuIFxuXHR9LFxuIFxuXHQvLyBwcml2YXRlIG1ldGhvZCBmb3IgVVRGLTggZW5jb2Rpbmdcblx0X3V0ZjhfZW5jb2RlIDogZnVuY3Rpb24gKHN0cmluZykge1xuXHRcdHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cXHJcXG4vZyxcIlxcblwiKTtcblx0XHR2YXIgdXRmdGV4dCA9IFwiXCI7XG4gXG5cdFx0Zm9yICh2YXIgbiA9IDA7IG4gPCBzdHJpbmcubGVuZ3RoOyBuKyspIHtcbiBcblx0XHRcdHZhciBjID0gc3RyaW5nLmNoYXJDb2RlQXQobik7XG4gXG5cdFx0XHRpZiAoYyA8IDEyOCkge1xuXHRcdFx0XHR1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKChjID4gMTI3KSAmJiAoYyA8IDIwNDgpKSB7XG5cdFx0XHRcdHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyA+PiA2KSB8IDE5Mik7XG5cdFx0XHRcdHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyAmIDYzKSB8IDEyOCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjID4+IDEyKSB8IDIyNCk7XG5cdFx0XHRcdHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMgPj4gNikgJiA2MykgfCAxMjgpO1xuXHRcdFx0XHR1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpO1xuXHRcdFx0fVxuIFxuXHRcdH1cbiBcblx0XHRyZXR1cm4gdXRmdGV4dDtcblx0fSxcbiBcblx0Ly8gcHJpdmF0ZSBtZXRob2QgZm9yIFVURi04IGRlY29kaW5nXG5cdF91dGY4X2RlY29kZSA6IGZ1bmN0aW9uICh1dGZ0ZXh0KSB7XG5cdFx0dmFyIHN0cmluZyA9IFwiXCI7XG5cdFx0dmFyIGkgPSAwO1xuXHRcdHZhciBjID0gYzEgPSBjMiA9IDA7XG4gXG5cdFx0d2hpbGUgKCBpIDwgdXRmdGV4dC5sZW5ndGggKSB7XG4gXG5cdFx0XHRjID0gdXRmdGV4dC5jaGFyQ29kZUF0KGkpO1xuIFxuXHRcdFx0aWYgKGMgPCAxMjgpIHtcblx0XHRcdFx0c3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG5cdFx0XHRcdGkrKztcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoKGMgPiAxOTEpICYmIChjIDwgMjI0KSkge1xuXHRcdFx0XHRjMiA9IHV0ZnRleHQuY2hhckNvZGVBdChpKzEpO1xuXHRcdFx0XHRzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMgJiAzMSkgPDwgNikgfCAoYzIgJiA2MykpO1xuXHRcdFx0XHRpICs9IDI7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0YzIgPSB1dGZ0ZXh0LmNoYXJDb2RlQXQoaSsxKTtcblx0XHRcdFx0YzMgPSB1dGZ0ZXh0LmNoYXJDb2RlQXQoaSsyKTtcblx0XHRcdFx0c3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMTUpIDw8IDEyKSB8ICgoYzIgJiA2MykgPDwgNikgfCAoYzMgJiA2MykpO1xuXHRcdFx0XHRpICs9IDM7XG5cdFx0XHR9XG4gXG5cdFx0fVxuIFxuXHRcdHJldHVybiBzdHJpbmc7XG5cdH1cbiBcbn0iLCIvKlxyXG4gKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNlY3VyZSBIYXNoIEFsZ29yaXRobSwgU0hBLTEsIGFzIGRlZmluZWRcclxuICogaW4gRklQUyBQVUIgMTgwLTFcclxuICogVmVyc2lvbiAyLjFhIENvcHlyaWdodCBQYXVsIEpvaG5zdG9uIDIwMDAgLSAyMDAyLlxyXG4gKiBPdGhlciBjb250cmlidXRvcnM6IEdyZWcgSG9sdCwgQW5kcmV3IEtlcGVydCwgWWRuYXIsIExvc3RpbmV0XHJcbiAqIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBCU0QgTGljZW5zZVxyXG4gKiBTZWUgaHR0cDovL3BhamhvbWUub3JnLnVrL2NyeXB0L21kNSBmb3IgZGV0YWlscy5cclxuICovXHJcblxyXG4vKlxyXG4gKiBDb25maWd1cmFibGUgdmFyaWFibGVzLiBZb3UgbWF5IG5lZWQgdG8gdHdlYWsgdGhlc2UgdG8gYmUgY29tcGF0aWJsZSB3aXRoXHJcbiAqIHRoZSBzZXJ2ZXItc2lkZSwgYnV0IHRoZSBkZWZhdWx0cyB3b3JrIGluIG1vc3QgY2FzZXMuXHJcbiAqL1xyXG52YXIgaGV4Y2FzZSA9IDA7ICAvKiBoZXggb3V0cHV0IGZvcm1hdC4gMCAtIGxvd2VyY2FzZTsgMSAtIHVwcGVyY2FzZSAgICAgICAgKi9cclxudmFyIGI2NHBhZCAgPSBcIj1cIjsgLyogYmFzZS02NCBwYWQgY2hhcmFjdGVyLiBcIj1cIiBmb3Igc3RyaWN0IFJGQyBjb21wbGlhbmNlICAgKi9cclxudmFyIGNocnN6ICAgPSA4OyAgLyogYml0cyBwZXIgaW5wdXQgY2hhcmFjdGVyLiA4IC0gQVNDSUk7IDE2IC0gVW5pY29kZSAgICAgICovXHJcblxyXG4vKlxyXG4gKiBUaGVzZSBhcmUgdGhlIGZ1bmN0aW9ucyB5b3UnbGwgdXN1YWxseSB3YW50IHRvIGNhbGxcclxuICogVGhleSB0YWtlIHN0cmluZyBhcmd1bWVudHMgYW5kIHJldHVybiBlaXRoZXIgaGV4IG9yIGJhc2UtNjQgZW5jb2RlZCBzdHJpbmdzXHJcbiAqL1xyXG5mdW5jdGlvbiBoZXhfc2hhMShzKXtyZXR1cm4gYmluYjJoZXgoY29yZV9zaGExKHN0cjJiaW5iKHMpLHMubGVuZ3RoICogY2hyc3opKTt9XHJcbmZ1bmN0aW9uIGI2NF9zaGExKHMpe3JldHVybiBiaW5iMmI2NChjb3JlX3NoYTEoc3RyMmJpbmIocykscy5sZW5ndGggKiBjaHJzeikpO31cclxuZnVuY3Rpb24gc3RyX3NoYTEocyl7cmV0dXJuIGJpbmIyc3RyKGNvcmVfc2hhMShzdHIyYmluYihzKSxzLmxlbmd0aCAqIGNocnN6KSk7fVxyXG5mdW5jdGlvbiBoZXhfaG1hY19zaGExKGtleSwgZGF0YSl7IHJldHVybiBiaW5iMmhleChjb3JlX2htYWNfc2hhMShrZXksIGRhdGEpKTt9XHJcbmZ1bmN0aW9uIGI2NF9obWFjX3NoYTEoa2V5LCBkYXRhKXsgcmV0dXJuIGJpbmIyYjY0KGNvcmVfaG1hY19zaGExKGtleSwgZGF0YSkpO31cclxuZnVuY3Rpb24gc3RyX2htYWNfc2hhMShrZXksIGRhdGEpeyByZXR1cm4gYmluYjJzdHIoY29yZV9obWFjX3NoYTEoa2V5LCBkYXRhKSk7fVxyXG5cclxuLypcclxuICogUGVyZm9ybSBhIHNpbXBsZSBzZWxmLXRlc3QgdG8gc2VlIGlmIHRoZSBWTSBpcyB3b3JraW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBzaGExX3ZtX3Rlc3QoKVxyXG57XHJcbiAgcmV0dXJuIGhleF9zaGExKFwiYWJjXCIpID09IFwiYTk5OTNlMzY0NzA2ODE2YWJhM2UyNTcxNzg1MGMyNmM5Y2QwZDg5ZFwiO1xyXG59XHJcblxyXG4vKlxyXG4gKiBDYWxjdWxhdGUgdGhlIFNIQS0xIG9mIGFuIGFycmF5IG9mIGJpZy1lbmRpYW4gd29yZHMsIGFuZCBhIGJpdCBsZW5ndGhcclxuICovXHJcbmZ1bmN0aW9uIGNvcmVfc2hhMSh4LCBsZW4pXHJcbntcclxuICAvKiBhcHBlbmQgcGFkZGluZyAqL1xyXG4gIHhbbGVuID4+IDVdIHw9IDB4ODAgPDwgKDI0IC0gbGVuICUgMzIpO1xyXG4gIHhbKChsZW4gKyA2NCA+PiA5KSA8PCA0KSArIDE1XSA9IGxlbjtcclxuXHJcbiAgdmFyIHcgPSBBcnJheSg4MCk7XHJcbiAgdmFyIGEgPSAgMTczMjU4NDE5MztcclxuICB2YXIgYiA9IC0yNzE3MzM4Nzk7XHJcbiAgdmFyIGMgPSAtMTczMjU4NDE5NDtcclxuICB2YXIgZCA9ICAyNzE3MzM4Nzg7XHJcbiAgdmFyIGUgPSAtMTAwOTU4OTc3NjtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpICs9IDE2KVxyXG4gIHtcclxuICAgIHZhciBvbGRhID0gYTtcclxuICAgIHZhciBvbGRiID0gYjtcclxuICAgIHZhciBvbGRjID0gYztcclxuICAgIHZhciBvbGRkID0gZDtcclxuICAgIHZhciBvbGRlID0gZTtcclxuXHJcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgODA7IGorKylcclxuICAgIHtcclxuICAgICAgaWYoaiA8IDE2KSB3W2pdID0geFtpICsgal07XHJcbiAgICAgIGVsc2Ugd1tqXSA9IHJvbCh3W2otM10gXiB3W2otOF0gXiB3W2otMTRdIF4gd1tqLTE2XSwgMSk7XHJcbiAgICAgIHZhciB0ID0gc2FmZV9hZGQoc2FmZV9hZGQocm9sKGEsIDUpLCBzaGExX2Z0KGosIGIsIGMsIGQpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICBzYWZlX2FkZChzYWZlX2FkZChlLCB3W2pdKSwgc2hhMV9rdChqKSkpO1xyXG4gICAgICBlID0gZDtcclxuICAgICAgZCA9IGM7XHJcbiAgICAgIGMgPSByb2woYiwgMzApO1xyXG4gICAgICBiID0gYTtcclxuICAgICAgYSA9IHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYSA9IHNhZmVfYWRkKGEsIG9sZGEpO1xyXG4gICAgYiA9IHNhZmVfYWRkKGIsIG9sZGIpO1xyXG4gICAgYyA9IHNhZmVfYWRkKGMsIG9sZGMpO1xyXG4gICAgZCA9IHNhZmVfYWRkKGQsIG9sZGQpO1xyXG4gICAgZSA9IHNhZmVfYWRkKGUsIG9sZGUpO1xyXG4gIH1cclxuICByZXR1cm4gQXJyYXkoYSwgYiwgYywgZCwgZSk7XHJcblxyXG59XHJcblxyXG4vKlxyXG4gKiBQZXJmb3JtIHRoZSBhcHByb3ByaWF0ZSB0cmlwbGV0IGNvbWJpbmF0aW9uIGZ1bmN0aW9uIGZvciB0aGUgY3VycmVudFxyXG4gKiBpdGVyYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIHNoYTFfZnQodCwgYiwgYywgZClcclxue1xyXG4gIGlmKHQgPCAyMCkgcmV0dXJuIChiICYgYykgfCAoKH5iKSAmIGQpO1xyXG4gIGlmKHQgPCA0MCkgcmV0dXJuIGIgXiBjIF4gZDtcclxuICBpZih0IDwgNjApIHJldHVybiAoYiAmIGMpIHwgKGIgJiBkKSB8IChjICYgZCk7XHJcbiAgcmV0dXJuIGIgXiBjIF4gZDtcclxufVxyXG5cclxuLypcclxuICogRGV0ZXJtaW5lIHRoZSBhcHByb3ByaWF0ZSBhZGRpdGl2ZSBjb25zdGFudCBmb3IgdGhlIGN1cnJlbnQgaXRlcmF0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBzaGExX2t0KHQpXHJcbntcclxuICByZXR1cm4gKHQgPCAyMCkgPyAgMTUxODUwMDI0OSA6ICh0IDwgNDApID8gIDE4NTk3NzUzOTMgOlxyXG4gICAgICAgICAodCA8IDYwKSA/IC0xODk0MDA3NTg4IDogLTg5OTQ5NzUxNDtcclxufVxyXG5cclxuLypcclxuICogQ2FsY3VsYXRlIHRoZSBITUFDLVNIQTEgb2YgYSBrZXkgYW5kIHNvbWUgZGF0YVxyXG4gKi9cclxuZnVuY3Rpb24gY29yZV9obWFjX3NoYTEoa2V5LCBkYXRhKVxyXG57XHJcbiAgdmFyIGJrZXkgPSBzdHIyYmluYihrZXkpO1xyXG4gIGlmKGJrZXkubGVuZ3RoID4gMTYpIGJrZXkgPSBjb3JlX3NoYTEoYmtleSwga2V5Lmxlbmd0aCAqIGNocnN6KTtcclxuXHJcbiAgdmFyIGlwYWQgPSBBcnJheSgxNiksIG9wYWQgPSBBcnJheSgxNik7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IDE2OyBpKyspXHJcbiAge1xyXG4gICAgaXBhZFtpXSA9IGJrZXlbaV0gXiAweDM2MzYzNjM2O1xyXG4gICAgb3BhZFtpXSA9IGJrZXlbaV0gXiAweDVDNUM1QzVDO1xyXG4gIH1cclxuXHJcbiAgdmFyIGhhc2ggPSBjb3JlX3NoYTEoaXBhZC5jb25jYXQoc3RyMmJpbmIoZGF0YSkpLCA1MTIgKyBkYXRhLmxlbmd0aCAqIGNocnN6KTtcclxuICByZXR1cm4gY29yZV9zaGExKG9wYWQuY29uY2F0KGhhc2gpLCA1MTIgKyAxNjApO1xyXG59XHJcblxyXG4vKlxyXG4gKiBBZGQgaW50ZWdlcnMsIHdyYXBwaW5nIGF0IDJeMzIuIFRoaXMgdXNlcyAxNi1iaXQgb3BlcmF0aW9ucyBpbnRlcm5hbGx5XHJcbiAqIHRvIHdvcmsgYXJvdW5kIGJ1Z3MgaW4gc29tZSBKUyBpbnRlcnByZXRlcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzYWZlX2FkZCh4LCB5KVxyXG57XHJcbiAgdmFyIGxzdyA9ICh4ICYgMHhGRkZGKSArICh5ICYgMHhGRkZGKTtcclxuICB2YXIgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7XHJcbiAgcmV0dXJuIChtc3cgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7XHJcbn1cclxuXHJcbi8qXHJcbiAqIEJpdHdpc2Ugcm90YXRlIGEgMzItYml0IG51bWJlciB0byB0aGUgbGVmdC5cclxuICovXHJcbmZ1bmN0aW9uIHJvbChudW0sIGNudClcclxue1xyXG4gIHJldHVybiAobnVtIDw8IGNudCkgfCAobnVtID4+PiAoMzIgLSBjbnQpKTtcclxufVxyXG5cclxuLypcclxuICogQ29udmVydCBhbiA4LWJpdCBvciAxNi1iaXQgc3RyaW5nIHRvIGFuIGFycmF5IG9mIGJpZy1lbmRpYW4gd29yZHNcclxuICogSW4gOC1iaXQgZnVuY3Rpb24sIGNoYXJhY3RlcnMgPjI1NSBoYXZlIHRoZWlyIGhpLWJ5dGUgc2lsZW50bHkgaWdub3JlZC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cjJiaW5iKHN0cilcclxue1xyXG4gIHZhciBiaW4gPSBBcnJheSgpO1xyXG4gIHZhciBtYXNrID0gKDEgPDwgY2hyc3opIC0gMTtcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aCAqIGNocnN6OyBpICs9IGNocnN6KVxyXG4gICAgYmluW2k+PjVdIHw9IChzdHIuY2hhckNvZGVBdChpIC8gY2hyc3opICYgbWFzaykgPDwgKDMyIC0gY2hyc3ogLSBpJTMyKTtcclxuICByZXR1cm4gYmluO1xyXG59XHJcblxyXG4vKlxyXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGJpZy1lbmRpYW4gd29yZHMgdG8gYSBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGJpbmIyc3RyKGJpbilcclxue1xyXG4gIHZhciBzdHIgPSBcIlwiO1xyXG4gIHZhciBtYXNrID0gKDEgPDwgY2hyc3opIC0gMTtcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgYmluLmxlbmd0aCAqIDMyOyBpICs9IGNocnN6KVxyXG4gICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGJpbltpPj41XSA+Pj4gKDMyIC0gY2hyc3ogLSBpJTMyKSkgJiBtYXNrKTtcclxuICByZXR1cm4gc3RyO1xyXG59XHJcblxyXG4vKlxyXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGJpZy1lbmRpYW4gd29yZHMgdG8gYSBoZXggc3RyaW5nLlxyXG4gKi9cclxuZnVuY3Rpb24gYmluYjJoZXgoYmluYXJyYXkpXHJcbntcclxuICB2YXIgaGV4X3RhYiA9IGhleGNhc2UgPyBcIjAxMjM0NTY3ODlBQkNERUZcIiA6IFwiMDEyMzQ1Njc4OWFiY2RlZlwiO1xyXG4gIHZhciBzdHIgPSBcIlwiO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBiaW5hcnJheS5sZW5ndGggKiA0OyBpKyspXHJcbiAge1xyXG4gICAgc3RyICs9IGhleF90YWIuY2hhckF0KChiaW5hcnJheVtpPj4yXSA+PiAoKDMgLSBpJTQpKjgrNCkpICYgMHhGKSArXHJcbiAgICAgICAgICAgaGV4X3RhYi5jaGFyQXQoKGJpbmFycmF5W2k+PjJdID4+ICgoMyAtIGklNCkqOCAgKSkgJiAweEYpO1xyXG4gIH1cclxuICByZXR1cm4gc3RyO1xyXG59XHJcblxyXG4vKlxyXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGJpZy1lbmRpYW4gd29yZHMgdG8gYSBiYXNlLTY0IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gYmluYjJiNjQoYmluYXJyYXkpXHJcbntcclxuICB2YXIgdGFiID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7XHJcbiAgdmFyIHN0ciA9IFwiXCI7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGJpbmFycmF5Lmxlbmd0aCAqIDQ7IGkgKz0gMylcclxuICB7XHJcbiAgICB2YXIgdHJpcGxldCA9ICgoKGJpbmFycmF5W2kgICA+PiAyXSA+PiA4ICogKDMgLSAgaSAgICU0KSkgJiAweEZGKSA8PCAxNilcclxuICAgICAgICAgICAgICAgIHwgKCgoYmluYXJyYXlbaSsxID4+IDJdID4+IDggKiAoMyAtIChpKzEpJTQpKSAmIDB4RkYpIDw8IDggKVxyXG4gICAgICAgICAgICAgICAgfCAgKChiaW5hcnJheVtpKzIgPj4gMl0gPj4gOCAqICgzIC0gKGkrMiklNCkpICYgMHhGRik7XHJcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKVxyXG4gICAge1xyXG4gICAgICBpZihpICogOCArIGogKiA2ID4gYmluYXJyYXkubGVuZ3RoICogMzIpIHN0ciArPSBiNjRwYWQ7XHJcbiAgICAgIGVsc2Ugc3RyICs9IHRhYi5jaGFyQXQoKHRyaXBsZXQgPj4gNiooMy1qKSkgJiAweDNGKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHN0cjtcclxufVxyXG4iLCIvKipcbiAqIENvZmZlZVNjcmlwdCBDb21waWxlciB2MS45LjJcbiAqIGh0dHA6Ly9jb2ZmZWVzY3JpcHQub3JnXG4gKlxuICogQ29weXJpZ2h0IDIwMTEsIEplcmVteSBBc2hrZW5hc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gKi9cbihmdW5jdGlvbihyb290KXt2YXIgQ29mZmVlU2NyaXB0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcmVxdWlyZShlKXtyZXR1cm4gcmVxdWlyZVtlXX1yZXR1cm4gcmVxdWlyZVtcIi4vaGVscGVyc1wiXT1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9e2V4cG9ydHM6ZX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvO2Uuc3RhcnRzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdD09PWUuc3Vic3RyKG4sdC5sZW5ndGgpfSxlLmVuZHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpO3JldHVybiBpPXQubGVuZ3RoLHQ9PT1lLnN1YnN0cihlLmxlbmd0aC1pLShufHwwKSxpKX0sZS5yZXBlYXQ9cz1mdW5jdGlvbihlLHQpe3ZhciBuO2ZvcihuPVwiXCI7dD4wOykxJnQmJihuKz1lKSx0Pj4+PTEsZSs9ZTtyZXR1cm4gbn0sZS5jb21wYWN0PWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyO2ZvcihyPVtdLHQ9MCxpPWUubGVuZ3RoO2k+dDt0Kyspbj1lW3RdLG4mJnIucHVzaChuKTtyZXR1cm4gcn0sZS5jb3VudD1mdW5jdGlvbihlLHQpe3ZhciBuLGk7aWYobj1pPTAsIXQubGVuZ3RoKXJldHVybiAxLzA7Zm9yKDtpPTErZS5pbmRleE9mKHQsaSk7KW4rKztyZXR1cm4gbn0sZS5tZXJnZT1mdW5jdGlvbihlLHQpe3JldHVybiBuKG4oe30sZSksdCl9LG49ZS5leHRlbmQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixpO2ZvcihuIGluIHQpaT10W25dLGVbbl09aTtyZXR1cm4gZX0sZS5mbGF0dGVuPWk9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLHM7Zm9yKG49W10scj0wLHM9ZS5sZW5ndGg7cz5yO3IrKyl0PWVbcl0sdCBpbnN0YW5jZW9mIEFycmF5P249bi5jb25jYXQoaSh0KSk6bi5wdXNoKHQpO3JldHVybiBufSxlLmRlbD1mdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiBuPWVbdF0sZGVsZXRlIGVbdF0sbn0sZS5zb21lPW51bGwhPShyPUFycmF5LnByb3RvdHlwZS5zb21lKT9yOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtmb3Iobj0wLGk9dGhpcy5sZW5ndGg7aT5uO24rKylpZih0PXRoaXNbbl0sZSh0KSlyZXR1cm4hMDtyZXR1cm4hMX0sZS5pbnZlcnRMaXRlcmF0ZT1mdW5jdGlvbihlKXt2YXIgdCxuLGk7cmV0dXJuIGk9ITAsbj1mdW5jdGlvbigpe3ZhciBuLHIscyxvO2ZvcihzPWUuc3BsaXQoXCJcXG5cIiksbz1bXSxuPTAscj1zLmxlbmd0aDtyPm47bisrKXQ9c1tuXSxpJiYvXihbIF17NH18WyBdezAsM31cXHQpLy50ZXN0KHQpP28ucHVzaCh0KTooaT0vXlxccyokLy50ZXN0KHQpKT9vLnB1c2godCk6by5wdXNoKFwiIyBcIit0KTtyZXR1cm4gb30oKSxuLmpvaW4oXCJcXG5cIil9LHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD97Zmlyc3RfbGluZTplLmZpcnN0X2xpbmUsZmlyc3RfY29sdW1uOmUuZmlyc3RfY29sdW1uLGxhc3RfbGluZTp0Lmxhc3RfbGluZSxsYXN0X2NvbHVtbjp0Lmxhc3RfY29sdW1ufTplfSxlLmFkZExvY2F0aW9uRGF0YUZuPWZ1bmN0aW9uKGUsbil7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBpJiZpLnVwZGF0ZUxvY2F0aW9uRGF0YUlmTWlzc2luZyYmaS51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcodChlLG4pKSxpfX0sZS5sb2NhdGlvbkRhdGFUb1N0cmluZz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm5cIjJcImluIGUmJlwiZmlyc3RfbGluZVwiaW4gZVsyXT90PWVbMl06XCJmaXJzdF9saW5lXCJpbiBlJiYodD1lKSx0P3QuZmlyc3RfbGluZSsxK1wiOlwiKyh0LmZpcnN0X2NvbHVtbisxKStcIi1cIisodC5sYXN0X2xpbmUrMStcIjpcIisodC5sYXN0X2NvbHVtbisxKSk6XCJObyBsb2NhdGlvbiBkYXRhXCJ9LGUuYmFzZUZpbGVOYW1lPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyO3JldHVybiBudWxsPT10JiYodD0hMSksbnVsbD09biYmKG49ITEpLHI9bj8vXFxcXHxcXC8vOi9cXC8vLGk9ZS5zcGxpdChyKSxlPWlbaS5sZW5ndGgtMV0sdCYmZS5pbmRleE9mKFwiLlwiKT49MD8oaT1lLnNwbGl0KFwiLlwiKSxpLnBvcCgpLFwiY29mZmVlXCI9PT1pW2kubGVuZ3RoLTFdJiZpLmxlbmd0aD4xJiZpLnBvcCgpLGkuam9pbihcIi5cIikpOmV9LGUuaXNDb2ZmZWU9ZnVuY3Rpb24oZSl7cmV0dXJuL1xcLigobGl0KT9jb2ZmZWV8Y29mZmVlXFwubWQpJC8udGVzdChlKX0sZS5pc0xpdGVyYXRlPWZ1bmN0aW9uKGUpe3JldHVybi9cXC4obGl0Y29mZmVlfGNvZmZlZVxcLm1kKSQvLnRlc3QoZSl9LGUudGhyb3dTeW50YXhFcnJvcj1mdW5jdGlvbihlLHQpe3ZhciBuO3Rocm93IG49bmV3IFN5bnRheEVycm9yKGUpLG4ubG9jYXRpb249dCxuLnRvU3RyaW5nPW8sbi5zdGFjaz1cIlwiK24sbn0sZS51cGRhdGVTeW50YXhFcnJvcj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGUudG9TdHJpbmc9PT1vJiYoZS5jb2RlfHwoZS5jb2RlPXQpLGUuZmlsZW5hbWV8fChlLmZpbGVuYW1lPW4pLGUuc3RhY2s9XCJcIitlKSxlfSxvPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGEsYyxsLGgsdSxwLGQsZixtO3JldHVybiB0aGlzLmNvZGUmJnRoaXMubG9jYXRpb24/KHU9dGhpcy5sb2NhdGlvbixhPXUuZmlyc3RfbGluZSxvPXUuZmlyc3RfY29sdW1uLGw9dS5sYXN0X2xpbmUsYz11Lmxhc3RfY29sdW1uLG51bGw9PWwmJihsPWEpLG51bGw9PWMmJihjPW8pLHI9dGhpcy5maWxlbmFtZXx8XCJbc3RkaW5dXCIsZT10aGlzLmNvZGUuc3BsaXQoXCJcXG5cIilbYV0sbT1vLGk9YT09PWw/YysxOmUubGVuZ3RoLGg9ZS5zbGljZSgwLG0pLnJlcGxhY2UoL1teXFxzXS9nLFwiIFwiKStzKFwiXlwiLGktbSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHByb2Nlc3MmJm51bGwhPT1wcm9jZXNzJiYobj0obnVsbCE9KHA9cHJvY2Vzcy5zdGRvdXQpP3AuaXNUVFk6dm9pZCAwKSYmIShudWxsIT0oZD1wcm9jZXNzLmVudik/ZC5OT0RFX0RJU0FCTEVfQ09MT1JTOnZvaWQgMCkpLChudWxsIT0oZj10aGlzLmNvbG9yZnVsKT9mOm4pJiYodD1mdW5jdGlvbihlKXtyZXR1cm5cIlx1MDAxYlsxOzMxbVwiK2UrXCJcdTAwMWJbMG1cIn0sZT1lLnNsaWNlKDAsbSkrdChlLnNsaWNlKG0saSkpK2Uuc2xpY2UoaSksaD10KGgpKSxyK1wiOlwiKyhhKzEpK1wiOlwiKyhvKzEpK1wiOiBlcnJvcjogXCIrdGhpcy5tZXNzYWdlK1wiXFxuXCIrZStcIlxcblwiK2gpOkVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMpfSxlLm5hbWVXaGl0ZXNwYWNlQ2hhcmFjdGVyPWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlXCIgXCI6cmV0dXJuXCJzcGFjZVwiO2Nhc2VcIlxcblwiOnJldHVyblwibmV3bGluZVwiO2Nhc2VcIlxcclwiOnJldHVyblwiY2FycmlhZ2UgcmV0dXJuXCI7Y2FzZVwiXHRcIjpyZXR1cm5cInRhYlwiO2RlZmF1bHQ6cmV0dXJuIGV9fX0uY2FsbCh0aGlzKSx0LmV4cG9ydHN9KCkscmVxdWlyZVtcIi4vcmV3cml0ZXJcIl09ZnVuY3Rpb24oKXt2YXIgZT17fSx0PXtleHBvcnRzOmV9O3JldHVybiBmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLGMsbCxoLHUscCxkLGYsbSxnLHYseSxiLGs9W10uaW5kZXhPZnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj10aGlzLmxlbmd0aDtuPnQ7dCsrKWlmKHQgaW4gdGhpcyYmdGhpc1t0XT09PWUpcmV0dXJuIHQ7cmV0dXJuLTF9LHc9W10uc2xpY2U7Zm9yKGY9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpO3JldHVybiBpPVtlLHRdLGkuZ2VuZXJhdGVkPSEwLG4mJihpLm9yaWdpbj1uKSxpfSxlLlJld3JpdGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGUucmV3cml0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50b2tlbnM9ZSx0aGlzLnJlbW92ZUxlYWRpbmdOZXdsaW5lcygpLHRoaXMuY2xvc2VPcGVuQ2FsbHMoKSx0aGlzLmNsb3NlT3BlbkluZGV4ZXMoKSx0aGlzLm5vcm1hbGl6ZUxpbmVzKCksdGhpcy50YWdQb3N0Zml4Q29uZGl0aW9uYWxzKCksdGhpcy5hZGRJbXBsaWNpdEJyYWNlc0FuZFBhcmVucygpLHRoaXMuYWRkTG9jYXRpb25EYXRhVG9HZW5lcmF0ZWRUb2tlbnMoKSx0aGlzLnRva2Vuc30sZS5wcm90b3R5cGUuc2NhblRva2Vucz1mdW5jdGlvbihlKXt2YXIgdCxuLGk7Zm9yKGk9dGhpcy50b2tlbnMsdD0wO249aVt0XTspdCs9ZS5jYWxsKHRoaXMsbix0LGkpO3JldHVybiEwfSxlLnByb3RvdHlwZS5kZXRlY3RFbmQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLG8sYSxjLGw7Zm9yKGw9dGhpcy50b2tlbnMsaT0wO2M9bFtlXTspe2lmKDA9PT1pJiZ0LmNhbGwodGhpcyxjLGUpKXJldHVybiBuLmNhbGwodGhpcyxjLGUpO2lmKCFjfHwwPmkpcmV0dXJuIG4uY2FsbCh0aGlzLGMsZS0xKTtvPWNbMF0say5jYWxsKHMsbyk+PTA/aSs9MTooYT1jWzBdLGsuY2FsbChyLGEpPj0wJiYoaS09MSkpLGUrPTF9cmV0dXJuIGUtMX0sZS5wcm90b3R5cGUucmVtb3ZlTGVhZGluZ05ld2xpbmVzPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscjtmb3IoaT10aGlzLnRva2VucyxlPXQ9MCxuPWkubGVuZ3RoO24+dCYmKHI9aVtlXVswXSxcIlRFUk1JTkFUT1JcIj09PXIpO2U9Kyt0KTtyZXR1cm4gZT90aGlzLnRva2Vucy5zcGxpY2UoMCxlKTp2b2lkIDB9LGUucHJvdG90eXBlLmNsb3NlT3BlbkNhbGxzPWZ1bmN0aW9uKCl7dmFyIGUsdDtyZXR1cm4gdD1mdW5jdGlvbihlLHQpe3ZhciBuO3JldHVyblwiKVwiPT09KG49ZVswXSl8fFwiQ0FMTF9FTkRcIj09PW58fFwiT1VUREVOVFwiPT09ZVswXSYmXCIpXCI9PT10aGlzLnRhZyh0LTEpfSxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMudG9rZW5zW1wiT1VUREVOVFwiPT09ZVswXT90LTE6dF1bMF09XCJDQUxMX0VORFwifSx0aGlzLnNjYW5Ub2tlbnMoZnVuY3Rpb24obixpKXtyZXR1cm5cIkNBTExfU1RBUlRcIj09PW5bMF0mJnRoaXMuZGV0ZWN0RW5kKGkrMSx0LGUpLDF9KX0sZS5wcm90b3R5cGUuY2xvc2VPcGVuSW5kZXhlcz1mdW5jdGlvbigpe3ZhciBlLHQ7cmV0dXJuIHQ9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuXCJdXCI9PT0odD1lWzBdKXx8XCJJTkRFWF9FTkRcIj09PXR9LGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF09XCJJTkRFWF9FTkRcIn0sdGhpcy5zY2FuVG9rZW5zKGZ1bmN0aW9uKG4saSl7cmV0dXJuXCJJTkRFWF9TVEFSVFwiPT09blswXSYmdGhpcy5kZXRlY3RFbmQoaSsxLHQsZSksMX0pfSxlLnByb3RvdHlwZS5pbmRleE9mVGFnPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixzLG87Zm9yKHQ9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzLmxlbmd0aD49Mj93LmNhbGwoYXJndW1lbnRzLDEpOltdLGU9MCxuPWk9MCxzPXIubGVuZ3RoO3M+PTA/cz5pOmk+cztuPXM+PTA/KytpOi0taSl7Zm9yKDtcIkhFUkVDT01NRU5UXCI9PT10aGlzLnRhZyh0K24rZSk7KWUrPTI7aWYobnVsbCE9cltuXSYmKFwic3RyaW5nXCI9PXR5cGVvZiByW25dJiYocltuXT1bcltuXV0pLG89dGhpcy50YWcodCtuK2UpLDA+ay5jYWxsKHJbbl0sbykpKXJldHVybi0xfXJldHVybiB0K24rZS0xfSxlLnByb3RvdHlwZS5sb29rc09iamVjdGlzaD1mdW5jdGlvbihlKXt2YXIgdCxuO3JldHVybiB0aGlzLmluZGV4T2ZUYWcoZSxcIkBcIixudWxsLFwiOlwiKT4tMXx8dGhpcy5pbmRleE9mVGFnKGUsbnVsbCxcIjpcIik+LTE/ITA6KG49dGhpcy5pbmRleE9mVGFnKGUscyksbj4tMSYmKHQ9bnVsbCx0aGlzLmRldGVjdEVuZChuKzEsZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9ZVswXSxrLmNhbGwocix0KT49MH0sZnVuY3Rpb24oZSxuKXtyZXR1cm4gdD1ufSksXCI6XCI9PT10aGlzLnRhZyh0KzEpKT8hMDohMSl9LGUucHJvdG90eXBlLmZpbmRUYWdzQmFja3dhcmRzPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxvLGEsYyxsLGg7Zm9yKG49W107ZT49MCYmKG4ubGVuZ3RofHwoYT10aGlzLnRhZyhlKSwwPmsuY2FsbCh0LGEpJiYoYz10aGlzLnRhZyhlKSwwPmsuY2FsbChzLGMpfHx0aGlzLnRva2Vuc1tlXS5nZW5lcmF0ZWQpJiYobD10aGlzLnRhZyhlKSwwPmsuY2FsbCh1LGwpKSkpOylpPXRoaXMudGFnKGUpLGsuY2FsbChyLGkpPj0wJiZuLnB1c2godGhpcy50YWcoZSkpLG89dGhpcy50YWcoZSksay5jYWxsKHMsbyk+PTAmJm4ubGVuZ3RoJiZuLnBvcCgpLGUtPTE7cmV0dXJuIGg9dGhpcy50YWcoZSksay5jYWxsKHQsaCk+PTB9LGUucHJvdG90eXBlLmFkZEltcGxpY2l0QnJhY2VzQW5kUGFyZW5zPWZ1bmN0aW9uKCl7dmFyIGUsdDtyZXR1cm4gZT1bXSx0PW51bGwsdGhpcy5zY2FuVG9rZW5zKGZ1bmN0aW9uKGksaCxwKXt2YXIgZCxtLGcsdix5LGIsdyxULEMsRSxGLE4sTCx4LFMsRCxSLEEsSSxfLE8sJCxqLE0sQixWLFAsVTtpZihVPWlbMF0sRj0oTj1oPjA/cFtoLTFdOltdKVswXSxDPShwLmxlbmd0aC0xPmg/cFtoKzFdOltdKVswXSxqPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZS5sZW5ndGgtMV19LE09aCxnPWZ1bmN0aW9uKGUpe3JldHVybiBoLU0rZX0sdj1mdW5jdGlvbigpe3ZhciBlLHQ7cmV0dXJuIG51bGwhPShlPWooKSk/bnVsbCE9KHQ9ZVsyXSk/dC5vdXJzOnZvaWQgMDp2b2lkIDB9LHk9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gdigpJiZcIihcIj09PShudWxsIT0oZT1qKCkpP2VbMF06dm9pZCAwKX0sdz1mdW5jdGlvbigpe3ZhciBlO3JldHVybiB2KCkmJlwie1wiPT09KG51bGwhPShlPWooKSk/ZVswXTp2b2lkIDApfSxiPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIHYmJlwiQ09OVFJPTFwiPT09KG51bGwhPShlPWooKSk/ZVswXTp2b2lkIDApfSxCPWZ1bmN0aW9uKHQpe3ZhciBuO3JldHVybiBuPW51bGwhPXQ/dDpoLGUucHVzaChbXCIoXCIsbix7b3VyczohMH1dKSxwLnNwbGljZShuLDAsZihcIkNBTExfU1RBUlRcIixcIihcIikpLG51bGw9PXQ/aCs9MTp2b2lkIDB9LGQ9ZnVuY3Rpb24oKXtyZXR1cm4gZS5wb3AoKSxwLnNwbGljZShoLDAsZihcIkNBTExfRU5EXCIsXCIpXCIsW1wiXCIsXCJlbmQgb2YgaW5wdXRcIixpWzJdXSkpLGgrPTF9LFY9ZnVuY3Rpb24odCxuKXt2YXIgcixzO3JldHVybiBudWxsPT1uJiYobj0hMCkscj1udWxsIT10P3Q6aCxlLnB1c2goW1wie1wiLHIse3NhbWVMaW5lOiEwLHN0YXJ0c0xpbmU6bixvdXJzOiEwfV0pLHM9bmV3IFN0cmluZyhcIntcIikscy5nZW5lcmF0ZWQ9ITAscC5zcGxpY2UociwwLGYoXCJ7XCIscyxpKSksbnVsbD09dD9oKz0xOnZvaWQgMH0sbT1mdW5jdGlvbih0KXtyZXR1cm4gdD1udWxsIT10P3Q6aCxlLnBvcCgpLHAuc3BsaWNlKHQsMCxmKFwifVwiLFwifVwiLGkpKSxoKz0xfSx5KCkmJihcIklGXCI9PT1VfHxcIlRSWVwiPT09VXx8XCJGSU5BTExZXCI9PT1VfHxcIkNBVENIXCI9PT1VfHxcIkNMQVNTXCI9PT1VfHxcIlNXSVRDSFwiPT09VSkpcmV0dXJuIGUucHVzaChbXCJDT05UUk9MXCIsaCx7b3VyczohMH1dKSxnKDEpO2lmKFwiSU5ERU5UXCI9PT1VJiZ2KCkpe2lmKFwiPT5cIiE9PUYmJlwiLT5cIiE9PUYmJlwiW1wiIT09RiYmXCIoXCIhPT1GJiZcIixcIiE9PUYmJlwie1wiIT09RiYmXCJUUllcIiE9PUYmJlwiRUxTRVwiIT09RiYmXCI9XCIhPT1GKWZvcig7eSgpOylkKCk7cmV0dXJuIGIoKSYmZS5wb3AoKSxlLnB1c2goW1UsaF0pLGcoMSl9aWYoay5jYWxsKHMsVSk+PTApcmV0dXJuIGUucHVzaChbVSxoXSksZygxKTtpZihrLmNhbGwocixVKT49MCl7Zm9yKDt2KCk7KXkoKT9kKCk6dygpP20oKTplLnBvcCgpO3Q9ZS5wb3AoKX1pZigoay5jYWxsKGMsVSk+PTAmJmkuc3BhY2VkfHxcIj9cIj09PVUmJmg+MCYmIXBbaC0xXS5zcGFjZWQpJiYoay5jYWxsKG8sQyk+PTB8fGsuY2FsbChsLEMpPj0wJiYhKG51bGwhPShMPXBbaCsxXSk/TC5zcGFjZWQ6dm9pZCAwKSYmIShudWxsIT0oeD1wW2grMV0pP3gubmV3TGluZTp2b2lkIDApKSlyZXR1cm5cIj9cIj09PVUmJihVPWlbMF09XCJGVU5DX0VYSVNUXCIpLEIoaCsxKSxnKDIpO2lmKGsuY2FsbChjLFUpPj0wJiZ0aGlzLmluZGV4T2ZUYWcoaCsxLFwiSU5ERU5UXCIsbnVsbCxcIjpcIik+LTEmJiF0aGlzLmZpbmRUYWdzQmFja3dhcmRzKGgsW1wiQ0xBU1NcIixcIkVYVEVORFNcIixcIklGXCIsXCJDQVRDSFwiLFwiU1dJVENIXCIsXCJMRUFESU5HX1dIRU5cIixcIkZPUlwiLFwiV0hJTEVcIixcIlVOVElMXCJdKSlyZXR1cm4gQihoKzEpLGUucHVzaChbXCJJTkRFTlRcIixoKzJdKSxnKDMpO2lmKFwiOlwiPT09VSl7Zm9yKEk9ZnVuY3Rpb24oKXt2YXIgZTtzd2l0Y2goITEpe2Nhc2UgZT10aGlzLnRhZyhoLTEpLDA+ay5jYWxsKHIsZSk6cmV0dXJuIHRbMV07Y2FzZVwiQFwiIT09dGhpcy50YWcoaC0yKTpyZXR1cm4gaC0yO2RlZmF1bHQ6cmV0dXJuIGgtMX19LmNhbGwodGhpcyk7XCJIRVJFQ09NTUVOVFwiPT09dGhpcy50YWcoSS0yKTspSS09MjtyZXR1cm4gdGhpcy5pbnNpZGVGb3JEZWNsYXJhdGlvbj1cIkZPUlwiPT09QyxQPTA9PT1JfHwoUz10aGlzLnRhZyhJLTEpLGsuY2FsbCh1LFMpPj0wKXx8cFtJLTFdLm5ld0xpbmUsaigpJiYoRD1qKCksJD1EWzBdLE89RFsxXSwoXCJ7XCI9PT0kfHxcIklOREVOVFwiPT09JCYmXCJ7XCI9PT10aGlzLnRhZyhPLTEpKSYmKFB8fFwiLFwiPT09dGhpcy50YWcoSS0xKXx8XCJ7XCI9PT10aGlzLnRhZyhJLTEpKSk/ZygxKTooVihJLCEhUCksZygyKSl9aWYodygpJiZrLmNhbGwodSxVKT49MCYmKGooKVsyXS5zYW1lTGluZT0hMSksVD1cIk9VVERFTlRcIj09PUZ8fE4ubmV3TGluZSxrLmNhbGwoYSxVKT49MHx8ay5jYWxsKG4sVSk+PTAmJlQpZm9yKDt2KCk7KWlmKFI9aigpLCQ9UlswXSxPPVJbMV0sQT1SWzJdLF89QS5zYW1lTGluZSxQPUEuc3RhcnRzTGluZSx5KCkmJlwiLFwiIT09RilkKCk7ZWxzZSBpZih3KCkmJiF0aGlzLmluc2lkZUZvckRlY2xhcmF0aW9uJiZfJiZcIlRFUk1JTkFUT1JcIiE9PVUmJlwiOlwiIT09RiltKCk7ZWxzZXtpZighdygpfHxcIlRFUk1JTkFUT1JcIiE9PVV8fFwiLFwiPT09Rnx8UCYmdGhpcy5sb29rc09iamVjdGlzaChoKzEpKWJyZWFrO2lmKFwiSEVSRUNPTU1FTlRcIj09PUMpcmV0dXJuIGcoMSk7bSgpfWlmKCEoXCIsXCIhPT1VfHx0aGlzLmxvb2tzT2JqZWN0aXNoKGgrMSl8fCF3KCl8fHRoaXMuaW5zaWRlRm9yRGVjbGFyYXRpb258fFwiVEVSTUlOQVRPUlwiPT09QyYmdGhpcy5sb29rc09iamVjdGlzaChoKzIpKSlmb3IoRT1cIk9VVERFTlRcIj09PUM/MTowO3coKTspbShoK0UpO3JldHVybiBnKDEpfSl9LGUucHJvdG90eXBlLmFkZExvY2F0aW9uRGF0YVRvR2VuZXJhdGVkVG9rZW5zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2NhblRva2VucyhmdW5jdGlvbihlLHQsbil7dmFyIGkscixzLG8sYSxjO3JldHVybiBlWzJdPzE6ZS5nZW5lcmF0ZWR8fGUuZXhwbGljaXQ/KFwie1wiPT09ZVswXSYmKHM9bnVsbCE9KGE9blt0KzFdKT9hWzJdOnZvaWQgMCk/KHI9cy5maXJzdF9saW5lLGk9cy5maXJzdF9jb2x1bW4pOihvPW51bGwhPShjPW5bdC0xXSk/Y1syXTp2b2lkIDApPyhyPW8ubGFzdF9saW5lLGk9by5sYXN0X2NvbHVtbik6cj1pPTAsZVsyXT17Zmlyc3RfbGluZTpyLGZpcnN0X2NvbHVtbjppLGxhc3RfbGluZTpyLGxhc3RfY29sdW1uOml9LDEpOjF9KX0sZS5wcm90b3R5cGUubm9ybWFsaXplTGluZXM9ZnVuY3Rpb24oKXt2YXIgZSx0LHIscyxvO3JldHVybiBvPXI9cz1udWxsLHQ9ZnVuY3Rpb24oZSx0KXt2YXIgcixzLGEsYztyZXR1cm5cIjtcIiE9PWVbMV0mJihyPWVbMF0say5jYWxsKHAscik+PTApJiYhKFwiVEVSTUlOQVRPUlwiPT09ZVswXSYmKHM9dGhpcy50YWcodCsxKSxrLmNhbGwoaSxzKT49MCkpJiYhKFwiRUxTRVwiPT09ZVswXSYmXCJUSEVOXCIhPT1vKSYmISEoXCJDQVRDSFwiIT09KGE9ZVswXSkmJlwiRklOQUxMWVwiIT09YXx8XCItPlwiIT09byYmXCI9PlwiIT09byl8fChjPWVbMF0say5jYWxsKG4sYyk+PTAmJnRoaXMudG9rZW5zW3QtMV0ubmV3TGluZSl9LGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy50b2tlbnMuc3BsaWNlKFwiLFwiPT09dGhpcy50YWcodC0xKT90LTE6dCwwLHMpfSx0aGlzLnNjYW5Ub2tlbnMoZnVuY3Rpb24obixhLGMpe3ZhciBsLGgsdSxwLGYsbTtpZihtPW5bMF0sXCJURVJNSU5BVE9SXCI9PT1tKXtpZihcIkVMU0VcIj09PXRoaXMudGFnKGErMSkmJlwiT1VUREVOVFwiIT09dGhpcy50YWcoYS0xKSlyZXR1cm4gYy5zcGxpY2UuYXBwbHkoYyxbYSwxXS5jb25jYXQody5jYWxsKHRoaXMuaW5kZW50YXRpb24oKSkpKSwxO2lmKHU9dGhpcy50YWcoYSsxKSxrLmNhbGwoaSx1KT49MClyZXR1cm4gYy5zcGxpY2UoYSwxKSwwfWlmKFwiQ0FUQ0hcIj09PW0pZm9yKGw9aD0xOzI+PWg7bD0rK2gpaWYoXCJPVVRERU5UXCI9PT0ocD10aGlzLnRhZyhhK2wpKXx8XCJURVJNSU5BVE9SXCI9PT1wfHxcIkZJTkFMTFlcIj09PXApcmV0dXJuIGMuc3BsaWNlLmFwcGx5KGMsW2ErbCwwXS5jb25jYXQody5jYWxsKHRoaXMuaW5kZW50YXRpb24oKSkpKSwyK2w7cmV0dXJuIGsuY2FsbChkLG0pPj0wJiZcIklOREVOVFwiIT09dGhpcy50YWcoYSsxKSYmKFwiRUxTRVwiIT09bXx8XCJJRlwiIT09dGhpcy50YWcoYSsxKSk/KG89bSxmPXRoaXMuaW5kZW50YXRpb24oY1thXSkscj1mWzBdLHM9ZlsxXSxcIlRIRU5cIj09PW8mJihyLmZyb21UaGVuPSEwKSxjLnNwbGljZShhKzEsMCxyKSx0aGlzLmRldGVjdEVuZChhKzIsdCxlKSxcIlRIRU5cIj09PW0mJmMuc3BsaWNlKGEsMSksMSk6MX0pfSxlLnByb3RvdHlwZS50YWdQb3N0Zml4Q29uZGl0aW9uYWxzPWZ1bmN0aW9uKCl7dmFyIGUsdCxuO3JldHVybiBuPW51bGwsdD1mdW5jdGlvbihlLHQpe3ZhciBuLGk7cmV0dXJuIGk9ZVswXSxuPXRoaXMudG9rZW5zW3QtMV1bMF0sXCJURVJNSU5BVE9SXCI9PT1pfHxcIklOREVOVFwiPT09aSYmMD5rLmNhbGwoZCxuKX0sZT1mdW5jdGlvbihlKXtyZXR1cm5cIklOREVOVFwiIT09ZVswXXx8ZS5nZW5lcmF0ZWQmJiFlLmZyb21UaGVuP25bMF09XCJQT1NUX1wiK25bMF06dm9pZCAwfSx0aGlzLnNjYW5Ub2tlbnMoZnVuY3Rpb24oaSxyKXtyZXR1cm5cIklGXCIhPT1pWzBdPzE6KG49aSx0aGlzLmRldGVjdEVuZChyKzEsdCxlKSwxKX0pfSxlLnByb3RvdHlwZS5pbmRlbnRhdGlvbj1mdW5jdGlvbihlKXt2YXIgdCxuO3JldHVybiB0PVtcIklOREVOVFwiLDJdLG49W1wiT1VUREVOVFwiLDJdLGU/KHQuZ2VuZXJhdGVkPW4uZ2VuZXJhdGVkPSEwLHQub3JpZ2luPW4ub3JpZ2luPWUpOnQuZXhwbGljaXQ9bi5leHBsaWNpdD0hMCxbdCxuXX0sZS5wcm90b3R5cGUuZ2VuZXJhdGU9ZixlLnByb3RvdHlwZS50YWc9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIG51bGwhPSh0PXRoaXMudG9rZW5zW2VdKT90WzBdOnZvaWQgMH0sZX0oKSx0PVtbXCIoXCIsXCIpXCJdLFtcIltcIixcIl1cIl0sW1wie1wiLFwifVwiXSxbXCJJTkRFTlRcIixcIk9VVERFTlRcIl0sW1wiQ0FMTF9TVEFSVFwiLFwiQ0FMTF9FTkRcIl0sW1wiUEFSQU1fU1RBUlRcIixcIlBBUkFNX0VORFwiXSxbXCJJTkRFWF9TVEFSVFwiLFwiSU5ERVhfRU5EXCJdLFtcIlNUUklOR19TVEFSVFwiLFwiU1RSSU5HX0VORFwiXSxbXCJSRUdFWF9TVEFSVFwiLFwiUkVHRVhfRU5EXCJdXSxlLklOVkVSU0VTPWg9e30scz1bXSxyPVtdLG09MCx2PXQubGVuZ3RoO3Y+bTttKyspeT10W21dLGc9eVswXSxiPXlbMV0scy5wdXNoKGhbYl09Zyksci5wdXNoKGhbZ109Yik7aT1bXCJDQVRDSFwiLFwiVEhFTlwiLFwiRUxTRVwiLFwiRklOQUxMWVwiXS5jb25jYXQociksYz1bXCJJREVOVElGSUVSXCIsXCJTVVBFUlwiLFwiKVwiLFwiQ0FMTF9FTkRcIixcIl1cIixcIklOREVYX0VORFwiLFwiQFwiLFwiVEhJU1wiXSxvPVtcIklERU5USUZJRVJcIixcIk5VTUJFUlwiLFwiU1RSSU5HXCIsXCJTVFJJTkdfU1RBUlRcIixcIkpTXCIsXCJSRUdFWFwiLFwiUkVHRVhfU1RBUlRcIixcIk5FV1wiLFwiUEFSQU1fU1RBUlRcIixcIkNMQVNTXCIsXCJJRlwiLFwiVFJZXCIsXCJTV0lUQ0hcIixcIlRISVNcIixcIkJPT0xcIixcIk5VTExcIixcIlVOREVGSU5FRFwiLFwiVU5BUllcIixcIllJRUxEXCIsXCJVTkFSWV9NQVRIXCIsXCJTVVBFUlwiLFwiVEhST1dcIixcIkBcIixcIi0+XCIsXCI9PlwiLFwiW1wiLFwiKFwiLFwie1wiLFwiLS1cIixcIisrXCJdLGw9W1wiK1wiLFwiLVwiXSxhPVtcIlBPU1RfSUZcIixcIkZPUlwiLFwiV0hJTEVcIixcIlVOVElMXCIsXCJXSEVOXCIsXCJCWVwiLFwiTE9PUFwiLFwiVEVSTUlOQVRPUlwiXSxkPVtcIkVMU0VcIixcIi0+XCIsXCI9PlwiLFwiVFJZXCIsXCJGSU5BTExZXCIsXCJUSEVOXCJdLHA9W1wiVEVSTUlOQVRPUlwiLFwiQ0FUQ0hcIixcIkZJTkFMTFlcIixcIkVMU0VcIixcIk9VVERFTlRcIixcIkxFQURJTkdfV0hFTlwiXSx1PVtcIlRFUk1JTkFUT1JcIixcIklOREVOVFwiLFwiT1VUREVOVFwiXSxuPVtcIi5cIixcIj8uXCIsXCI6OlwiLFwiPzo6XCJdfS5jYWxsKHRoaXMpLHQuZXhwb3J0c30oKSxyZXF1aXJlW1wiLi9sZXhlclwiXT1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9e2V4cG9ydHM6ZX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsYyxsLGgsdSxwLGQsZixtLGcsdix5LGIsayx3LFQsQyxFLEYsTixMLHgsUyxELFIsQSxJLF8sTywkLGosTSxCLFYsUCxVLEcsSCxxLFgsVyxZLEsseixKLFEsWixldCx0dCxudCxpdCxydCxzdCxvdCxhdCxjdCxsdCxodCx1dD1bXS5pbmRleE9mfHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPXRoaXMubGVuZ3RoO24+dDt0KyspaWYodCBpbiB0aGlzJiZ0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX07b3Q9cmVxdWlyZShcIi4vcmV3cml0ZXJcIiksUD1vdC5SZXdyaXRlcix3PW90LklOVkVSU0VTLGF0PXJlcXVpcmUoXCIuL2hlbHBlcnNcIiksbnQ9YXQuY291bnQsbHQ9YXQuc3RhcnRzLHR0PWF0LmNvbXBhY3QsY3Q9YXQucmVwZWF0LGl0PWF0LmludmVydExpdGVyYXRlLHN0PWF0LmxvY2F0aW9uRGF0YVRvU3RyaW5nLGh0PWF0LnRocm93U3ludGF4RXJyb3IsZS5MZXhlcj1TPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGUudG9rZW5pemU9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIscztmb3IobnVsbD09dCYmKHQ9e30pLHRoaXMubGl0ZXJhdGU9dC5saXRlcmF0ZSx0aGlzLmluZGVudD0wLHRoaXMuYmFzZUluZGVudD0wLHRoaXMuaW5kZWJ0PTAsdGhpcy5vdXRkZWJ0PTAsdGhpcy5pbmRlbnRzPVtdLHRoaXMuZW5kcz1bXSx0aGlzLnRva2Vucz1bXSx0aGlzLmNodW5rTGluZT10LmxpbmV8fDAsdGhpcy5jaHVua0NvbHVtbj10LmNvbHVtbnx8MCxlPXRoaXMuY2xlYW4oZSkscj0wO3RoaXMuY2h1bms9ZS5zbGljZShyKTspaWYobj10aGlzLmlkZW50aWZpZXJUb2tlbigpfHx0aGlzLmNvbW1lbnRUb2tlbigpfHx0aGlzLndoaXRlc3BhY2VUb2tlbigpfHx0aGlzLmxpbmVUb2tlbigpfHx0aGlzLnN0cmluZ1Rva2VuKCl8fHRoaXMubnVtYmVyVG9rZW4oKXx8dGhpcy5yZWdleFRva2VuKCl8fHRoaXMuanNUb2tlbigpfHx0aGlzLmxpdGVyYWxUb2tlbigpLHM9dGhpcy5nZXRMaW5lQW5kQ29sdW1uRnJvbUNodW5rKG4pLHRoaXMuY2h1bmtMaW5lPXNbMF0sdGhpcy5jaHVua0NvbHVtbj1zWzFdLHIrPW4sdC51bnRpbEJhbGFuY2VkJiYwPT09dGhpcy5lbmRzLmxlbmd0aClyZXR1cm57dG9rZW5zOnRoaXMudG9rZW5zLGluZGV4OnJ9O3JldHVybiB0aGlzLmNsb3NlSW5kZW50YXRpb24oKSwoaT10aGlzLmVuZHMucG9wKCkpJiZ0aGlzLmVycm9yKFwibWlzc2luZyBcIitpLnRhZyxpLm9yaWdpblsyXSksdC5yZXdyaXRlPT09ITE/dGhpcy50b2tlbnM6KG5ldyBQKS5yZXdyaXRlKHRoaXMudG9rZW5zKX0sZS5wcm90b3R5cGUuY2xlYW49ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckNvZGVBdCgwKT09PXQmJihlPWUuc2xpY2UoMSkpLGU9ZS5yZXBsYWNlKC9cXHIvZyxcIlwiKS5yZXBsYWNlKHosXCJcIiksZXQudGVzdChlKSYmKGU9XCJcXG5cIitlLHRoaXMuY2h1bmtMaW5lLS0pLHRoaXMubGl0ZXJhdGUmJihlPWl0KGUpKSxlfSxlLnByb3RvdHlwZS5pZGVudGlmaWVyVG9rZW49ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLGMsbCxoLHUscCxkLGYsbSxnLHk7cmV0dXJuKGw9di5leGVjKHRoaXMuY2h1bmspKT8oYz1sWzBdLGk9bFsxXSxlPWxbMl0scj1pLmxlbmd0aCxoPXZvaWQgMCxcIm93blwiPT09aSYmXCJGT1JcIj09PXRoaXMudGFnKCk/KHRoaXMudG9rZW4oXCJPV05cIixpKSxpLmxlbmd0aCk6XCJmcm9tXCI9PT1pJiZcIllJRUxEXCI9PT10aGlzLnRhZygpPyh0aGlzLnRva2VuKFwiRlJPTVwiLGkpLGkubGVuZ3RoKToocD10aGlzLnRva2Vucyx1PXBbcC5sZW5ndGgtMV0sbj1lfHxudWxsIT11JiYoXCIuXCI9PT0oZD11WzBdKXx8XCI/LlwiPT09ZHx8XCI6OlwiPT09ZHx8XCI/OjpcIj09PWR8fCF1LnNwYWNlZCYmXCJAXCI9PT11WzBdKSxnPVwiSURFTlRJRklFUlwiLCFuJiYodXQuY2FsbChFLGkpPj0wfHx1dC5jYWxsKGEsaSk+PTApJiYoZz1pLnRvVXBwZXJDYXNlKCksXCJXSEVOXCI9PT1nJiYoZj10aGlzLnRhZygpLHV0LmNhbGwoTixmKT49MCk/Zz1cIkxFQURJTkdfV0hFTlwiOlwiRk9SXCI9PT1nP3RoaXMuc2VlbkZvcj0hMDpcIlVOTEVTU1wiPT09Zz9nPVwiSUZcIjp1dC5jYWxsKEosZyk+PTA/Zz1cIlVOQVJZXCI6dXQuY2FsbChCLGcpPj0wJiYoXCJJTlNUQU5DRU9GXCIhPT1nJiZ0aGlzLnNlZW5Gb3I/KGc9XCJGT1JcIitnLHRoaXMuc2VlbkZvcj0hMSk6KGc9XCJSRUxBVElPTlwiLFwiIVwiPT09dGhpcy52YWx1ZSgpJiYoaD10aGlzLnRva2Vucy5wb3AoKSxpPVwiIVwiK2kpKSkpLHV0LmNhbGwoQyxpKT49MCYmKG4/KGc9XCJJREVOVElGSUVSXCIsaT1uZXcgU3RyaW5nKGkpLGkucmVzZXJ2ZWQ9ITApOnV0LmNhbGwoVixpKT49MCYmdGhpcy5lcnJvcihcInJlc2VydmVkIHdvcmQgJ1wiK2krXCInXCIse2xlbmd0aDppLmxlbmd0aH0pKSxufHwodXQuY2FsbChzLGkpPj0wJiYoaT1vW2ldKSxnPWZ1bmN0aW9uKCl7c3dpdGNoKGkpe2Nhc2VcIiFcIjpyZXR1cm5cIlVOQVJZXCI7Y2FzZVwiPT1cIjpjYXNlXCIhPVwiOnJldHVyblwiQ09NUEFSRVwiO2Nhc2VcIiYmXCI6Y2FzZVwifHxcIjpyZXR1cm5cIkxPR0lDXCI7Y2FzZVwidHJ1ZVwiOmNhc2VcImZhbHNlXCI6cmV0dXJuXCJCT09MXCI7Y2FzZVwiYnJlYWtcIjpjYXNlXCJjb250aW51ZVwiOnJldHVyblwiU1RBVEVNRU5UXCI7ZGVmYXVsdDpyZXR1cm4gZ319KCkpLHk9dGhpcy50b2tlbihnLGksMCxyKSx5LnZhcmlhYmxlPSFuLGgmJihtPVtoWzJdLmZpcnN0X2xpbmUsaFsyXS5maXJzdF9jb2x1bW5dLHlbMl0uZmlyc3RfbGluZT1tWzBdLHlbMl0uZmlyc3RfY29sdW1uPW1bMV0pLGUmJih0PWMubGFzdEluZGV4T2YoXCI6XCIpLHRoaXMudG9rZW4oXCI6XCIsXCI6XCIsdCxlLmxlbmd0aCkpLGMubGVuZ3RoKSk6MH0sZS5wcm90b3R5cGUubnVtYmVyVG9rZW49ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyO3JldHVybihuPUkuZXhlYyh0aGlzLmNodW5rKSk/KGk9blswXSx0PWkubGVuZ3RoLC9eMFtCT1hdLy50ZXN0KGkpP3RoaXMuZXJyb3IoXCJyYWRpeCBwcmVmaXggaW4gJ1wiK2krXCInIG11c3QgYmUgbG93ZXJjYXNlXCIse29mZnNldDoxfSk6L0UvLnRlc3QoaSkmJiEvXjB4Ly50ZXN0KGkpP3RoaXMuZXJyb3IoXCJleHBvbmVudGlhbCBub3RhdGlvbiBpbiAnXCIraStcIicgbXVzdCBiZSBpbmRpY2F0ZWQgd2l0aCBhIGxvd2VyY2FzZSAnZSdcIix7b2Zmc2V0OmkuaW5kZXhPZihcIkVcIil9KTovXjBcXGQqWzg5XS8udGVzdChpKT90aGlzLmVycm9yKFwiZGVjaW1hbCBsaXRlcmFsICdcIitpK1wiJyBtdXN0IG5vdCBiZSBwcmVmaXhlZCB3aXRoICcwJ1wiLHtsZW5ndGg6dH0pOi9eMFxcZCsvLnRlc3QoaSkmJnRoaXMuZXJyb3IoXCJvY3RhbCBsaXRlcmFsICdcIitpK1wiJyBtdXN0IGJlIHByZWZpeGVkIHdpdGggJzBvJ1wiLHtsZW5ndGg6dH0pLChyPS9eMG8oWzAtN10rKS8uZXhlYyhpKSkmJihpPVwiMHhcIitwYXJzZUludChyWzFdLDgpLnRvU3RyaW5nKDE2KSksKGU9L14wYihbMDFdKykvLmV4ZWMoaSkpJiYoaT1cIjB4XCIrcGFyc2VJbnQoZVsxXSwyKS50b1N0cmluZygxNikpLHRoaXMudG9rZW4oXCJOVU1CRVJcIixpLDAsdCksdCk6MH0sZS5wcm90b3R5cGUuc3RyaW5nVG9rZW49ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLHMsbyxhLGMsbCxoLHUsbSxnLHYseTtpZihoPShZLmV4ZWModGhpcy5jaHVuayl8fFtdKVswXSwhaClyZXR1cm4gMDtpZihnPWZ1bmN0aW9uKCl7c3dpdGNoKGgpe2Nhc2VcIidcIjpyZXR1cm4gVztjYXNlJ1wiJzpyZXR1cm4gcTtjYXNlXCInJydcIjpyZXR1cm4gZjtjYXNlJ1wiXCJcIic6cmV0dXJuIHB9fSgpLHM9Mz09PWgubGVuZ3RoLHU9dGhpcy5tYXRjaFdpdGhJbnRlcnBvbGF0aW9ucyhnLGgpLHk9dS50b2tlbnMscj11LmluZGV4LGU9eS5sZW5ndGgtMSxuPWguY2hhckF0KDApLHMpe2ZvcihhPW51bGwsaT1mdW5jdGlvbigpe3ZhciBlLHQsbjtmb3Iobj1bXSxvPWU9MCx0PXkubGVuZ3RoO3Q+ZTtvPSsrZSl2PXlbb10sXCJORU9TVFJJTkdcIj09PXZbMF0mJm4ucHVzaCh2WzFdKTtyZXR1cm4gbn0oKS5qb2luKFwiI3t9XCIpO2w9ZC5leGVjKGkpOyl0PWxbMV0sKG51bGw9PT1hfHwobT10Lmxlbmd0aCk+MCYmYS5sZW5ndGg+bSkmJihhPXQpO2EmJihjPVJlZ0V4cChcIl5cIithLFwiZ21cIikpLHRoaXMubWVyZ2VJbnRlcnBvbGF0aW9uVG9rZW5zKHkse2RlbGltaXRlcjpufSxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixpKXtyZXR1cm4gbj10LmZvcm1hdFN0cmluZyhuKSwwPT09aSYmKG49bi5yZXBsYWNlKEYsXCJcIikpLGk9PT1lJiYobj1uLnJlcGxhY2UoSyxcIlwiKSksYyYmKG49bi5yZXBsYWNlKGMsXCJcIikpLG59fSh0aGlzKSl9ZWxzZSB0aGlzLm1lcmdlSW50ZXJwb2xhdGlvblRva2Vucyh5LHtkZWxpbWl0ZXI6bn0sZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4saSl7cmV0dXJuIG49dC5mb3JtYXRTdHJpbmcobiksbj1uLnJlcGxhY2UoRyxmdW5jdGlvbih0LHIpe3JldHVybiAwPT09aSYmMD09PXJ8fGk9PT1lJiZyK3QubGVuZ3RoPT09bi5sZW5ndGg/XCJcIjpcIiBcIn0pfX0odGhpcykpO3JldHVybiByfSxlLnByb3RvdHlwZS5jb21tZW50VG9rZW49ZnVuY3Rpb24oKXt2YXIgZSx0LG47cmV0dXJuKG49dGhpcy5jaHVuay5tYXRjaChjKSk/KGU9blswXSx0PW5bMV0sdCYmKChuPXUuZXhlYyhlKSkmJnRoaXMuZXJyb3IoXCJibG9jayBjb21tZW50cyBjYW5ub3QgY29udGFpbiBcIituWzBdLHtvZmZzZXQ6bi5pbmRleCxsZW5ndGg6blswXS5sZW5ndGh9KSx0LmluZGV4T2YoXCJcXG5cIik+PTAmJih0PXQucmVwbGFjZShSZWdFeHAoXCJcXFxcblwiK2N0KFwiIFwiLHRoaXMuaW5kZW50KSxcImdcIiksXCJcXG5cIikpLHRoaXMudG9rZW4oXCJIRVJFQ09NTUVOVFwiLHQsMCxlLmxlbmd0aCkpLGUubGVuZ3RoKTowfSxlLnByb3RvdHlwZS5qc1Rva2VuPWZ1bmN0aW9uKCl7dmFyIGUsdDtyZXR1cm5cImBcIj09PXRoaXMuY2h1bmsuY2hhckF0KDApJiYoZT1ULmV4ZWModGhpcy5jaHVuaykpPyh0aGlzLnRva2VuKFwiSlNcIiwodD1lWzBdKS5zbGljZSgxLC0xKSwwLHQubGVuZ3RoKSx0Lmxlbmd0aCk6MH0sZS5wcm90b3R5cGUucmVnZXhUb2tlbj1mdW5jdGlvbigpe3ZhciBlLHQsbixyLHMsbyxhLGMsbCxoLHUscCxkO3N3aXRjaCghMSl7Y2FzZSEobz1NLmV4ZWModGhpcy5jaHVuaykpOnRoaXMuZXJyb3IoXCJyZWd1bGFyIGV4cHJlc3Npb25zIGNhbm5vdCBiZWdpbiB3aXRoIFwiK29bMl0se29mZnNldDpvLmluZGV4K29bMV0ubGVuZ3RofSk7YnJlYWs7Y2FzZSEobz10aGlzLm1hdGNoV2l0aEludGVycG9sYXRpb25zKG0sXCIvLy9cIikpOmQ9by50b2tlbnMscz1vLmluZGV4O2JyZWFrO2Nhc2UhKG89JC5leGVjKHRoaXMuY2h1bmspKTppZihwPW9bMF0sZT1vWzFdLHQ9b1syXSx0aGlzLnZhbGlkYXRlRXNjYXBlcyhlLHtpc1JlZ2V4OiEwLG9mZnNldEluQ2h1bms6MX0pLHM9cC5sZW5ndGgsbD10aGlzLnRva2VucyxjPWxbbC5sZW5ndGgtMV0sYylpZihjLnNwYWNlZCYmKGg9Y1swXSx1dC5jYWxsKGksaCk+PTApKXtpZighdHx8Ty50ZXN0KHApKXJldHVybiAwfWVsc2UgaWYodT1jWzBdLHV0LmNhbGwoQSx1KT49MClyZXR1cm4gMDt0fHx0aGlzLmVycm9yKFwibWlzc2luZyAvICh1bmNsb3NlZCByZWdleClcIik7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gMH1zd2l0Y2gocj1qLmV4ZWModGhpcy5jaHVuay5zbGljZShzKSlbMF0sbj1zK3IubGVuZ3RoLGE9dGhpcy5tYWtlVG9rZW4oXCJSRUdFWFwiLG51bGwsMCxuKSwhMSl7Y2FzZSEhWi50ZXN0KHIpOnRoaXMuZXJyb3IoXCJpbnZhbGlkIHJlZ3VsYXIgZXhwcmVzc2lvbiBmbGFncyBcIityLHtvZmZzZXQ6cyxsZW5ndGg6ci5sZW5ndGh9KTticmVhaztjYXNlIShwfHwxPT09ZC5sZW5ndGgpOm51bGw9PWUmJihlPXRoaXMuZm9ybWF0SGVyZWdleChkWzBdWzFdKSksdGhpcy50b2tlbihcIlJFR0VYXCIsXCJcIit0aGlzLm1ha2VEZWxpbWl0ZWRMaXRlcmFsKGUse2RlbGltaXRlcjpcIi9cIn0pK3IsMCxuLGEpO2JyZWFrO2RlZmF1bHQ6dGhpcy50b2tlbihcIlJFR0VYX1NUQVJUXCIsXCIoXCIsMCwwLGEpLHRoaXMudG9rZW4oXCJJREVOVElGSUVSXCIsXCJSZWdFeHBcIiwwLDApLHRoaXMudG9rZW4oXCJDQUxMX1NUQVJUXCIsXCIoXCIsMCwwKSx0aGlzLm1lcmdlSW50ZXJwb2xhdGlvblRva2VucyhkLHtkZWxpbWl0ZXI6J1wiJyxcImRvdWJsZVwiOiEwfSx0aGlzLmZvcm1hdEhlcmVnZXgpLHImJih0aGlzLnRva2VuKFwiLFwiLFwiLFwiLHMsMCksdGhpcy50b2tlbihcIlNUUklOR1wiLCdcIicrcisnXCInLHMsci5sZW5ndGgpKSx0aGlzLnRva2VuKFwiKVwiLFwiKVwiLG4sMCksdGhpcy50b2tlbihcIlJFR0VYX0VORFwiLFwiKVwiLG4sMCl9cmV0dXJuIG59LGUucHJvdG90eXBlLmxpbmVUb2tlbj1mdW5jdGlvbigpe3ZhciBlLHQsbixpLHI7aWYoIShuPVIuZXhlYyh0aGlzLmNodW5rKSkpcmV0dXJuIDA7aWYodD1uWzBdLHRoaXMuc2VlbkZvcj0hMSxyPXQubGVuZ3RoLTEtdC5sYXN0SW5kZXhPZihcIlxcblwiKSxpPXRoaXMudW5maW5pc2hlZCgpLHItdGhpcy5pbmRlYnQ9PT10aGlzLmluZGVudClyZXR1cm4gaT90aGlzLnN1cHByZXNzTmV3bGluZXMoKTp0aGlzLm5ld2xpbmVUb2tlbigwKSx0Lmxlbmd0aDtpZihyPnRoaXMuaW5kZW50KXtpZihpKXJldHVybiB0aGlzLmluZGVidD1yLXRoaXMuaW5kZW50LHRoaXMuc3VwcHJlc3NOZXdsaW5lcygpLHQubGVuZ3RoO2lmKCF0aGlzLnRva2Vucy5sZW5ndGgpcmV0dXJuIHRoaXMuYmFzZUluZGVudD10aGlzLmluZGVudD1yLHQubGVuZ3RoO2U9ci10aGlzLmluZGVudCt0aGlzLm91dGRlYnQsdGhpcy50b2tlbihcIklOREVOVFwiLGUsdC5sZW5ndGgtcixyKSx0aGlzLmluZGVudHMucHVzaChlKSx0aGlzLmVuZHMucHVzaCh7dGFnOlwiT1VUREVOVFwifSksdGhpcy5vdXRkZWJ0PXRoaXMuaW5kZWJ0PTAsdGhpcy5pbmRlbnQ9cn1lbHNlIHRoaXMuYmFzZUluZGVudD5yP3RoaXMuZXJyb3IoXCJtaXNzaW5nIGluZGVudGF0aW9uXCIse29mZnNldDp0Lmxlbmd0aH0pOih0aGlzLmluZGVidD0wLHRoaXMub3V0ZGVudFRva2VuKHRoaXMuaW5kZW50LXIsaSx0Lmxlbmd0aCkpO3JldHVybiB0Lmxlbmd0aH0sZS5wcm90b3R5cGUub3V0ZGVudFRva2VuPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLHMsbztmb3IoaT10aGlzLmluZGVudC1lO2U+MDspcz10aGlzLmluZGVudHNbdGhpcy5pbmRlbnRzLmxlbmd0aC0xXSxzP3M9PT10aGlzLm91dGRlYnQ/KGUtPXRoaXMub3V0ZGVidCx0aGlzLm91dGRlYnQ9MCk6dGhpcy5vdXRkZWJ0PnM/KHRoaXMub3V0ZGVidC09cyxlLT1zKToocj10aGlzLmluZGVudHMucG9wKCkrdGhpcy5vdXRkZWJ0LG4mJihvPXRoaXMuY2h1bmtbbl0sdXQuY2FsbCh5LG8pPj0wKSYmKGktPXItZSxlPXIpLHRoaXMub3V0ZGVidD0wLHRoaXMucGFpcihcIk9VVERFTlRcIiksdGhpcy50b2tlbihcIk9VVERFTlRcIixlLDAsbiksZS09cik6ZT0wO2ZvcihyJiYodGhpcy5vdXRkZWJ0LT1lKTtcIjtcIj09PXRoaXMudmFsdWUoKTspdGhpcy50b2tlbnMucG9wKCk7cmV0dXJuXCJURVJNSU5BVE9SXCI9PT10aGlzLnRhZygpfHx0fHx0aGlzLnRva2VuKFwiVEVSTUlOQVRPUlwiLFwiXFxuXCIsbiwwKSx0aGlzLmluZGVudD1pLHRoaXN9LGUucHJvdG90eXBlLndoaXRlc3BhY2VUb2tlbj1mdW5jdGlvbigpe3ZhciBlLHQsbixpO3JldHVybihlPWV0LmV4ZWModGhpcy5jaHVuaykpfHwodD1cIlxcblwiPT09dGhpcy5jaHVuay5jaGFyQXQoMCkpPyhpPXRoaXMudG9rZW5zLG49aVtpLmxlbmd0aC0xXSxuJiYobltlP1wic3BhY2VkXCI6XCJuZXdMaW5lXCJdPSEwKSxlP2VbMF0ubGVuZ3RoOjApOjB9LGUucHJvdG90eXBlLm5ld2xpbmVUb2tlbj1mdW5jdGlvbihlKXtmb3IoO1wiO1wiPT09dGhpcy52YWx1ZSgpOyl0aGlzLnRva2Vucy5wb3AoKTtyZXR1cm5cIlRFUk1JTkFUT1JcIiE9PXRoaXMudGFnKCkmJnRoaXMudG9rZW4oXCJURVJNSU5BVE9SXCIsXCJcXG5cIixlLDApLHRoaXN9LGUucHJvdG90eXBlLnN1cHByZXNzTmV3bGluZXM9ZnVuY3Rpb24oKXtyZXR1cm5cIlxcXFxcIj09PXRoaXMudmFsdWUoKSYmdGhpcy50b2tlbnMucG9wKCksdGhpc30sZS5wcm90b3R5cGUubGl0ZXJhbFRva2VuPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHMsbyxhLGMsdSxwLGQ7aWYoKGU9Xy5leGVjKHRoaXMuY2h1bmspKT8oZD1lWzBdLHIudGVzdChkKSYmdGhpcy50YWdQYXJhbWV0ZXJzKCkpOmQ9dGhpcy5jaHVuay5jaGFyQXQoMCksdT1kLG49dGhpcy50b2tlbnMsdD1uW24ubGVuZ3RoLTFdLFwiPVwiPT09ZCYmdCYmKCF0WzFdLnJlc2VydmVkJiYocz10WzFdLHV0LmNhbGwoQyxzKT49MCkmJnRoaXMuZXJyb3IoXCJyZXNlcnZlZCB3b3JkICdcIit0WzFdK1wiJyBjYW4ndCBiZSBhc3NpZ25lZFwiLHRbMl0pLFwifHxcIj09PShvPXRbMV0pfHxcIiYmXCI9PT1vKSlyZXR1cm4gdFswXT1cIkNPTVBPVU5EX0FTU0lHTlwiLHRbMV0rPVwiPVwiLGQubGVuZ3RoO2lmKFwiO1wiPT09ZCl0aGlzLnNlZW5Gb3I9ITEsdT1cIlRFUk1JTkFUT1JcIjtlbHNlIGlmKHV0LmNhbGwoRCxkKT49MCl1PVwiTUFUSFwiO2Vsc2UgaWYodXQuY2FsbChsLGQpPj0wKXU9XCJDT01QQVJFXCI7ZWxzZSBpZih1dC5jYWxsKGgsZCk+PTApdT1cIkNPTVBPVU5EX0FTU0lHTlwiO2Vsc2UgaWYodXQuY2FsbChKLGQpPj0wKXU9XCJVTkFSWVwiO2Vsc2UgaWYodXQuY2FsbChRLGQpPj0wKXU9XCJVTkFSWV9NQVRIXCI7ZWxzZSBpZih1dC5jYWxsKFUsZCk+PTApdT1cIlNISUZUXCI7ZWxzZSBpZih1dC5jYWxsKHgsZCk+PTB8fFwiP1wiPT09ZCYmKG51bGwhPXQ/dC5zcGFjZWQ6dm9pZCAwKSl1PVwiTE9HSUNcIjtlbHNlIGlmKHQmJiF0LnNwYWNlZClpZihcIihcIj09PWQmJihhPXRbMF0sdXQuY2FsbChpLGEpPj0wKSlcIj9cIj09PXRbMF0mJih0WzBdPVwiRlVOQ19FWElTVFwiKSx1PVwiQ0FMTF9TVEFSVFwiO2Vsc2UgaWYoXCJbXCI9PT1kJiYoYz10WzBdLHV0LmNhbGwoYixjKT49MCkpc3dpdGNoKHU9XCJJTkRFWF9TVEFSVFwiLHRbMF0pe2Nhc2VcIj9cIjp0WzBdPVwiSU5ERVhfU09BS1wifXN3aXRjaChwPXRoaXMubWFrZVRva2VuKHUsZCksZCl7Y2FzZVwiKFwiOmNhc2VcIntcIjpjYXNlXCJbXCI6dGhpcy5lbmRzLnB1c2goe3RhZzp3W2RdLG9yaWdpbjpwfSk7YnJlYWs7Y2FzZVwiKVwiOmNhc2VcIn1cIjpjYXNlXCJdXCI6dGhpcy5wYWlyKGQpfXJldHVybiB0aGlzLnRva2Vucy5wdXNoKHApLGQubGVuZ3RofSxlLnByb3RvdHlwZS50YWdQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk7aWYoXCIpXCIhPT10aGlzLnRhZygpKXJldHVybiB0aGlzO2Zvcih0PVtdLGk9dGhpcy50b2tlbnMsZT1pLmxlbmd0aCxpWy0tZV1bMF09XCJQQVJBTV9FTkRcIjtuPWlbLS1lXTspc3dpdGNoKG5bMF0pe2Nhc2VcIilcIjp0LnB1c2gobik7YnJlYWs7Y2FzZVwiKFwiOmNhc2VcIkNBTExfU1RBUlRcIjppZighdC5sZW5ndGgpcmV0dXJuXCIoXCI9PT1uWzBdPyhuWzBdPVwiUEFSQU1fU1RBUlRcIix0aGlzKTp0aGlzO3QucG9wKCl9cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLmNsb3NlSW5kZW50YXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRkZW50VG9rZW4odGhpcy5pbmRlbnQpfSxlLnByb3RvdHlwZS5tYXRjaFdpdGhJbnRlcnBvbGF0aW9ucz1mdW5jdGlvbih0LG4pe3ZhciBpLHIscyxvLGEsYyxsLGgsdSxwLGQsZixtLGcsdjtpZih2PVtdLGg9bi5sZW5ndGgsdGhpcy5jaHVuay5zbGljZSgwLGgpIT09bilyZXR1cm4gbnVsbDtmb3IobT10aGlzLmNodW5rLnNsaWNlKGgpOzspe2lmKGc9dC5leGVjKG0pWzBdLHRoaXMudmFsaWRhdGVFc2NhcGVzKGcse2lzUmVnZXg6XCIvXCI9PT1uLmNoYXJBdCgwKSxvZmZzZXRJbkNodW5rOmh9KSx2LnB1c2godGhpcy5tYWtlVG9rZW4oXCJORU9TVFJJTkdcIixnLGgpKSxtPW0uc2xpY2UoZy5sZW5ndGgpLGgrPWcubGVuZ3RoLFwiI3tcIiE9PW0uc2xpY2UoMCwyKSlicmVhaztwPXRoaXMuZ2V0TGluZUFuZENvbHVtbkZyb21DaHVuayhoKzEpLGM9cFswXSxyPXBbMV0sZD0obmV3IGUpLnRva2VuaXplKG0uc2xpY2UoMSkse2xpbmU6Yyxjb2x1bW46cix1bnRpbEJhbGFuY2VkOiEwfSksbD1kLnRva2VucyxvPWQuaW5kZXgsbys9MSx1PWxbMF0saT1sW2wubGVuZ3RoLTFdLHVbMF09dVsxXT1cIihcIixpWzBdPWlbMV09XCIpXCIsaS5vcmlnaW49W1wiXCIsXCJlbmQgb2YgaW50ZXJwb2xhdGlvblwiLGlbMl1dLFwiVEVSTUlOQVRPUlwiPT09KG51bGwhPShmPWxbMV0pP2ZbMF06dm9pZCAwKSYmbC5zcGxpY2UoMSwxKSx2LnB1c2goW1wiVE9LRU5TXCIsbF0pLG09bS5zbGljZShvKSxoKz1vfXJldHVybiBtLnNsaWNlKDAsbi5sZW5ndGgpIT09biYmdGhpcy5lcnJvcihcIm1pc3NpbmcgXCIrbix7bGVuZ3RoOm4ubGVuZ3RofSkscz12WzBdLGE9dlt2Lmxlbmd0aC0xXSxzWzJdLmZpcnN0X2NvbHVtbi09bi5sZW5ndGgsYVsyXS5sYXN0X2NvbHVtbis9bi5sZW5ndGgsMD09PWFbMV0ubGVuZ3RoJiYoYVsyXS5sYXN0X2NvbHVtbi09MSkse3Rva2Vuczp2LGluZGV4Omgrbi5sZW5ndGh9fSxlLnByb3RvdHlwZS5tZXJnZUludGVycG9sYXRpb25Ub2tlbnM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscyxvLGEsYyxsLGgsdSxwLGQsZixtLGcsdix5O2ZvcihlLmxlbmd0aD4xJiYodT10aGlzLnRva2VuKFwiU1RSSU5HX1NUQVJUXCIsXCIoXCIsMCwwKSkscz10aGlzLnRva2Vucy5sZW5ndGgsbz1hPTAsbD1lLmxlbmd0aDtsPmE7bz0rK2Epe3N3aXRjaChnPWVbb10sbT1nWzBdLHk9Z1sxXSxtKXtjYXNlXCJUT0tFTlNcIjppZigyPT09eS5sZW5ndGgpY29udGludWU7aD15WzBdLHY9eTticmVhaztjYXNlXCJORU9TVFJJTkdcIjppZihpPW4oZ1sxXSxvKSwwPT09aS5sZW5ndGgpe2lmKDAhPT1vKWNvbnRpbnVlO3I9dGhpcy50b2tlbnMubGVuZ3RofTI9PT1vJiZudWxsIT1yJiZ0aGlzLnRva2Vucy5zcGxpY2UociwyKSxnWzBdPVwiU1RSSU5HXCIsZ1sxXT10aGlzLm1ha2VEZWxpbWl0ZWRMaXRlcmFsKGksdCksaD1nLHY9W2ddfXRoaXMudG9rZW5zLmxlbmd0aD5zJiYocD10aGlzLnRva2VuKFwiK1wiLFwiK1wiKSxwWzJdPXtmaXJzdF9saW5lOmhbMl0uZmlyc3RfbGluZSxmaXJzdF9jb2x1bW46aFsyXS5maXJzdF9jb2x1bW4sbGFzdF9saW5lOmhbMl0uZmlyc3RfbGluZSxsYXN0X2NvbHVtbjpoWzJdLmZpcnN0X2NvbHVtbn0pLChkPXRoaXMudG9rZW5zKS5wdXNoLmFwcGx5KGQsdil9cmV0dXJuIHU/KGM9ZVtlLmxlbmd0aC0xXSx1Lm9yaWdpbj1bXCJTVFJJTkdcIixudWxsLHtmaXJzdF9saW5lOnVbMl0uZmlyc3RfbGluZSxmaXJzdF9jb2x1bW46dVsyXS5maXJzdF9jb2x1bW4sbGFzdF9saW5lOmNbMl0ubGFzdF9saW5lLGxhc3RfY29sdW1uOmNbMl0ubGFzdF9jb2x1bW59XSxmPXRoaXMudG9rZW4oXCJTVFJJTkdfRU5EXCIsXCIpXCIpLGZbMl09e2ZpcnN0X2xpbmU6Y1syXS5sYXN0X2xpbmUsZmlyc3RfY29sdW1uOmNbMl0ubGFzdF9jb2x1bW4sbGFzdF9saW5lOmNbMl0ubGFzdF9saW5lLGxhc3RfY29sdW1uOmNbMl0ubGFzdF9jb2x1bW59KTp2b2lkIDB9LGUucHJvdG90eXBlLnBhaXI9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscztyZXR1cm4gaT10aGlzLmVuZHMsbj1pW2kubGVuZ3RoLTFdLGUhPT0ocz1udWxsIT1uP24udGFnOnZvaWQgMCk/KFwiT1VUREVOVFwiIT09cyYmdGhpcy5lcnJvcihcInVubWF0Y2hlZCBcIitlKSxyPXRoaXMuaW5kZW50cyx0PXJbci5sZW5ndGgtMV0sdGhpcy5vdXRkZW50VG9rZW4odCwhMCksdGhpcy5wYWlyKGUpKTp0aGlzLmVuZHMucG9wKCl9LGUucHJvdG90eXBlLmdldExpbmVBbmRDb2x1bW5Gcm9tQ2h1bms9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscztyZXR1cm4gMD09PWU/W3RoaXMuY2h1bmtMaW5lLHRoaXMuY2h1bmtDb2x1bW5dOihzPWU+PXRoaXMuY2h1bmsubGVuZ3RoP3RoaXMuY2h1bms6dGhpcy5jaHVuay5zbGljZSgwLCsoZS0xKSsxfHw5ZTkpLGk9bnQocyxcIlxcblwiKSx0PXRoaXMuY2h1bmtDb2x1bW4saT4wPyhyPXMuc3BsaXQoXCJcXG5cIiksbj1yW3IubGVuZ3RoLTFdLHQ9bi5sZW5ndGgpOnQrPXMubGVuZ3RoLFt0aGlzLmNodW5rTGluZStpLHRdKX0sZS5wcm90b3R5cGUubWFrZVRva2VuPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLHMsbyxhLGM7cmV0dXJuIG51bGw9PW4mJihuPTApLG51bGw9PWkmJihpPXQubGVuZ3RoKSxzPXt9LG89dGhpcy5nZXRMaW5lQW5kQ29sdW1uRnJvbUNodW5rKG4pLHMuZmlyc3RfbGluZT1vWzBdLHMuZmlyc3RfY29sdW1uPW9bMV0scj1NYXRoLm1heCgwLGktMSksYT10aGlzLmdldExpbmVBbmRDb2x1bW5Gcm9tQ2h1bmsobityKSxzLmxhc3RfbGluZT1hWzBdLHMubGFzdF9jb2x1bW49YVsxXSxjPVtlLHQsc119LGUucHJvdG90eXBlLnRva2VuPWZ1bmN0aW9uKGUsdCxuLGkscil7dmFyIHM7cmV0dXJuIHM9dGhpcy5tYWtlVG9rZW4oZSx0LG4saSksciYmKHMub3JpZ2luPXIpLHRoaXMudG9rZW5zLnB1c2gocyksc30sZS5wcm90b3R5cGUudGFnPWZ1bmN0aW9uKCl7dmFyIGUsdDtyZXR1cm4gZT10aGlzLnRva2Vucyx0PWVbZS5sZW5ndGgtMV0sbnVsbCE9dD90WzBdOnZvaWQgMH0sZS5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXt2YXIgZSx0O3JldHVybiBlPXRoaXMudG9rZW5zLHQ9ZVtlLmxlbmd0aC0xXSxudWxsIT10P3RbMV06dm9pZCAwfSxlLnByb3RvdHlwZS51bmZpbmlzaGVkPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIEwudGVzdCh0aGlzLmNodW5rKXx8XCJcXFxcXCI9PT0oZT10aGlzLnRhZygpKXx8XCIuXCI9PT1lfHxcIj8uXCI9PT1lfHxcIj86OlwiPT09ZXx8XCJVTkFSWVwiPT09ZXx8XCJNQVRIXCI9PT1lfHxcIlVOQVJZX01BVEhcIj09PWV8fFwiK1wiPT09ZXx8XCItXCI9PT1lfHxcIllJRUxEXCI9PT1lfHxcIioqXCI9PT1lfHxcIlNISUZUXCI9PT1lfHxcIlJFTEFUSU9OXCI9PT1lfHxcIkNPTVBBUkVcIj09PWV8fFwiTE9HSUNcIj09PWV8fFwiVEhST1dcIj09PWV8fFwiRVhURU5EU1wiPT09ZX0sZS5wcm90b3R5cGUuZm9ybWF0U3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoWCxcIiQxXCIpfSxlLnByb3RvdHlwZS5mb3JtYXRIZXJlZ2V4PWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoZyxcIiQxJDJcIil9LGUucHJvdG90eXBlLnZhbGlkYXRlRXNjYXBlcz1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixzLG8sYSxjLGw7cmV0dXJuIG51bGw9PXQmJih0PXt9KSxzPWsuZXhlYyhlKSwhc3x8KHNbMF0sbj1zWzFdLGE9c1syXSxpPXNbM10sbD1zWzRdLHQuaXNSZWdleCYmYSYmXCIwXCIhPT1hLmNoYXJBdCgwKSk/dm9pZCAwOihvPWE/XCJvY3RhbCBlc2NhcGUgc2VxdWVuY2VzIGFyZSBub3QgYWxsb3dlZFwiOlwiaW52YWxpZCBlc2NhcGUgc2VxdWVuY2VcIixyPVwiXFxcXFwiKyhhfHxpfHxsKSx0aGlzLmVycm9yKG8rXCIgXCIrcix7b2Zmc2V0OihudWxsIT0oYz10Lm9mZnNldEluQ2h1bmspP2M6MCkrcy5pbmRleCtuLmxlbmd0aCxsZW5ndGg6ci5sZW5ndGh9KSl9LGUucHJvdG90eXBlLm1ha2VEZWxpbWl0ZWRMaXRlcmFsPWZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIG51bGw9PXQmJih0PXt9KSxcIlwiPT09ZSYmXCIvXCI9PT10LmRlbGltaXRlciYmKGU9XCIoPzopXCIpLG49UmVnRXhwKFwiKFxcXFxcXFxcXFxcXFxcXFwpfChcXFxcXFxcXDAoPz1bMS03XSkpfFxcXFxcXFxcPyhcIit0LmRlbGltaXRlcitcIil8XFxcXFxcXFw/KD86KFxcXFxuKXwoXFxcXHIpfChcXFxcdTIwMjgpfChcXFxcdTIwMjkpKXwoXFxcXFxcXFwuKVwiLFwiZ1wiKSxlPWUucmVwbGFjZShuLGZ1bmN0aW9uKGUsbixpLHIscyxvLGEsYyxsKXtzd2l0Y2goITEpe2Nhc2UhbjpyZXR1cm4gdC5kb3VibGU/bituOm47Y2FzZSFpOnJldHVyblwiXFxcXHgwMFwiO2Nhc2UhcjpyZXR1cm5cIlxcXFxcIityO2Nhc2UhczpyZXR1cm5cIlxcXFxuXCI7Y2FzZSFvOnJldHVyblwiXFxcXHJcIjtjYXNlIWE6cmV0dXJuXCJcXFxcdTIwMjhcIjtjYXNlIWM6cmV0dXJuXCJcXFxcdTIwMjlcIjtjYXNlIWw6cmV0dXJuIHQuZG91YmxlP1wiXFxcXFwiK2w6bH19KSxcIlwiK3QuZGVsaW1pdGVyK2UrdC5kZWxpbWl0ZXJ9LGUucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHMsbyxhO3JldHVybiBudWxsPT10JiYodD17fSkscj1cImZpcnN0X2xpbmVcImluIHQ/dDoobz10aGlzLmdldExpbmVBbmRDb2x1bW5Gcm9tQ2h1bmsobnVsbCE9KHM9dC5vZmZzZXQpP3M6MCksaT1vWzBdLG49b1sxXSxvLHtmaXJzdF9saW5lOmksZmlyc3RfY29sdW1uOm4sbGFzdF9jb2x1bW46bisobnVsbCE9KGE9dC5sZW5ndGgpP2E6MSktMX0pLGh0KGUscil9LGV9KCksRT1bXCJ0cnVlXCIsXCJmYWxzZVwiLFwibnVsbFwiLFwidGhpc1wiLFwibmV3XCIsXCJkZWxldGVcIixcInR5cGVvZlwiLFwiaW5cIixcImluc3RhbmNlb2ZcIixcInJldHVyblwiLFwidGhyb3dcIixcImJyZWFrXCIsXCJjb250aW51ZVwiLFwiZGVidWdnZXJcIixcInlpZWxkXCIsXCJpZlwiLFwiZWxzZVwiLFwic3dpdGNoXCIsXCJmb3JcIixcIndoaWxlXCIsXCJkb1wiLFwidHJ5XCIsXCJjYXRjaFwiLFwiZmluYWxseVwiLFwiY2xhc3NcIixcImV4dGVuZHNcIixcInN1cGVyXCJdLGE9W1widW5kZWZpbmVkXCIsXCJ0aGVuXCIsXCJ1bmxlc3NcIixcInVudGlsXCIsXCJsb29wXCIsXCJvZlwiLFwiYnlcIixcIndoZW5cIl0sbz17YW5kOlwiJiZcIixvcjpcInx8XCIsaXM6XCI9PVwiLGlzbnQ6XCIhPVwiLG5vdDpcIiFcIix5ZXM6XCJ0cnVlXCIsbm86XCJmYWxzZVwiLG9uOlwidHJ1ZVwiLG9mZjpcImZhbHNlXCJ9LHM9ZnVuY3Rpb24oKXt2YXIgZTtlPVtdO2ZvcihydCBpbiBvKWUucHVzaChydCk7cmV0dXJuIGV9KCksYT1hLmNvbmNhdChzKSxWPVtcImNhc2VcIixcImRlZmF1bHRcIixcImZ1bmN0aW9uXCIsXCJ2YXJcIixcInZvaWRcIixcIndpdGhcIixcImNvbnN0XCIsXCJsZXRcIixcImVudW1cIixcImV4cG9ydFwiLFwiaW1wb3J0XCIsXCJuYXRpdmVcIixcImltcGxlbWVudHNcIixcImludGVyZmFjZVwiLFwicGFja2FnZVwiLFwicHJpdmF0ZVwiLFwicHJvdGVjdGVkXCIsXCJwdWJsaWNcIixcInN0YXRpY1wiXSxIPVtcImFyZ3VtZW50c1wiLFwiZXZhbFwiLFwieWllbGQqXCJdLEM9RS5jb25jYXQoVikuY29uY2F0KEgpLGUuUkVTRVJWRUQ9Vi5jb25jYXQoRSkuY29uY2F0KGEpLmNvbmNhdChIKSxlLlNUUklDVF9QUk9TQ1JJQkVEPUgsdD02NTI3OSx2PS9eKD8hXFxkKSgoPzooPyFcXHMpWyRcXHdcXHg3Zi1cXHVmZmZmXSkrKShbXlxcblxcU10qOig/ITopKT8vLEk9L14wYlswMV0rfF4wb1swLTddK3xeMHhbXFxkYS1mXSt8XlxcZCpcXC4/XFxkKyg/OmVbKy1dP1xcZCspPy9pLF89L14oPzpbLT1dPnxbLSsqXFwvJTw+JnxeIT89XT18Pj4+PT98KFstKzpdKVxcMXwoWyZ8PD4qXFwvJV0pXFwyPT98XFw/KFxcLnw6Oil8XFwuezIsM30pLyxldD0vXlteXFxuXFxTXSsvLGM9L14jIyMoW14jXVtcXHNcXFNdKj8pKD86IyMjW15cXG5cXFNdKnwjIyMkKXxeKD86XFxzKiMoPyEjI1teI10pLiopKy8scj0vXlstPV0+LyxSPS9eKD86XFxuW15cXG5cXFNdKikrLyxUPS9eYFteXFxcXGBdKig/OlxcXFwuW15cXFxcYF0qKSpgLyxZPS9eKD86JycnfFwiXCJcInwnfFwiKS8sVz0vXig/OlteXFxcXCddfFxcXFxbXFxzXFxTXSkqLyxxPS9eKD86W15cXFxcXCIjXXxcXFxcW1xcc1xcU118XFwjKD8hXFx7KSkqLyxmPS9eKD86W15cXFxcJ118XFxcXFtcXHNcXFNdfCcoPyEnJykpKi8scD0vXig/OlteXFxcXFwiI118XFxcXFtcXHNcXFNdfFwiKD8hXCJcIil8XFwjKD8hXFx7KSkqLyxYPS8oKD86XFxcXFxcXFwpKyl8XFxcXFteXFxTXFxuXSpcXG5cXHMqL2csRz0vXFxzKlxcblxccyovZyxkPS9cXG4rKFteXFxuXFxTXSopKD89XFxTKS9nLCQ9L15cXC8oPyFcXC8pKCg/OlteW1xcL1xcblxcXFxdfFxcXFxbXlxcbl18XFxbKD86XFxcXFteXFxuXXxbXlxcXVxcblxcXFxdKSpcXF0pKikoXFwvKT8vLGo9L15cXHcqLyxaPS9eKD8hLiooLikuKlxcMSlbaW1neV0qJC8sbT0vXig/OlteXFxcXFxcLyNdfFxcXFxbXFxzXFxTXXxcXC8oPyFcXC9cXC8pfFxcIyg/IVxceykpKi8sZz0vKCg/OlxcXFxcXFxcKSspfFxcXFwoXFxzKXxcXHMrKD86Iy4qKT8vZyxNPS9eKFxcL3xcXC97M31cXHMqKShcXCopLyxPPS9eXFwvPT9cXHMvLHU9L1xcKlxcLy8sTD0vXlxccyooPzosfFxcPz9cXC4oPyFbLlxcZF0pfDo6KS8saz0vKCg/Ol58W15cXFxcXSkoPzpcXFxcXFxcXCkqKVxcXFwoPzooMFswLTddfFsxLTddKXwoeCg/IVtcXGRhLWZBLUZdezJ9KS57MCwyfSl8KHUoPyFbXFxkYS1mQS1GXXs0fSkuezAsNH0pKS8sRj0vXlteXFxuXFxTXSpcXG4vLEs9L1xcblteXFxuXFxTXSokLyx6PS9cXHMrJC8saD1bXCItPVwiLFwiKz1cIixcIi89XCIsXCIqPVwiLFwiJT1cIixcInx8PVwiLFwiJiY9XCIsXCI/PVwiLFwiPDw9XCIsXCI+Pj1cIixcIj4+Pj1cIixcIiY9XCIsXCJePVwiLFwifD1cIixcIioqPVwiLFwiLy89XCIsXCIlJT1cIl0sSj1bXCJORVdcIixcIlRZUEVPRlwiLFwiREVMRVRFXCIsXCJET1wiXSxRPVtcIiFcIixcIn5cIl0seD1bXCImJlwiLFwifHxcIixcIiZcIixcInxcIixcIl5cIl0sVT1bXCI8PFwiLFwiPj5cIixcIj4+PlwiXSxsPVtcIj09XCIsXCIhPVwiLFwiPFwiLFwiPlwiLFwiPD1cIixcIj49XCJdLEQ9W1wiKlwiLFwiL1wiLFwiJVwiLFwiLy9cIixcIiUlXCJdLEI9W1wiSU5cIixcIk9GXCIsXCJJTlNUQU5DRU9GXCJdLG49W1wiVFJVRVwiLFwiRkFMU0VcIl0saT1bXCJJREVOVElGSUVSXCIsXCIpXCIsXCJdXCIsXCI/XCIsXCJAXCIsXCJUSElTXCIsXCJTVVBFUlwiXSxiPWkuY29uY2F0KFtcIk5VTUJFUlwiLFwiU1RSSU5HXCIsXCJTVFJJTkdfRU5EXCIsXCJSRUdFWFwiLFwiUkVHRVhfRU5EXCIsXCJCT09MXCIsXCJOVUxMXCIsXCJVTkRFRklORURcIixcIn1cIixcIjo6XCJdKSxBPWIuY29uY2F0KFtcIisrXCIsXCItLVwiXSksTj1bXCJJTkRFTlRcIixcIk9VVERFTlRcIixcIlRFUk1JTkFUT1JcIl0seT1bXCIpXCIsXCJ9XCIsXCJdXCJdfS5jYWxsKHRoaXMpLHQuZXhwb3J0c30oKSxyZXF1aXJlW1wiLi9wYXJzZXJcIl09ZnVuY3Rpb24oKXt2YXIgZT17fSx0PXtleHBvcnRzOmV9LG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy55eT17fX12YXIgdD1mdW5jdGlvbihlLHQsbixpKXtmb3Iobj1ufHx7fSxpPWUubGVuZ3RoO2ktLTtuW2VbaV1dPXQpO3JldHVybiBufSxuPVsxLDIwXSxpPVsxLDc1XSxyPVsxLDcxXSxzPVsxLDc2XSxvPVsxLDc3XSxhPVsxLDczXSxjPVsxLDc0XSxsPVsxLDUwXSxoPVsxLDUyXSx1PVsxLDUzXSxwPVsxLDU0XSxkPVsxLDU1XSxmPVsxLDQ1XSxtPVsxLDQ2XSxnPVsxLDI3XSx2PVsxLDYwXSx5PVsxLDYxXSxiPVsxLDcwXSxrPVsxLDQzXSx3PVsxLDI2XSxUPVsxLDU4XSxDPVsxLDU5XSxFPVsxLDU3XSxGPVsxLDM4XSxOPVsxLDQ0XSxMPVsxLDU2XSx4PVsxLDY1XSxTPVsxLDY2XSxEPVsxLDY3XSxSPVsxLDY4XSxBPVsxLDQyXSxJPVsxLDY0XSxfPVsxLDI5XSxPPVsxLDMwXSwkPVsxLDMxXSxqPVsxLDMyXSxNPVsxLDMzXSxCPVsxLDM0XSxWPVsxLDM1XSxQPVsxLDc4XSxVPVsxLDYsMjYsMzQsMTA4XSxHPVsxLDg4XSxIPVsxLDgxXSxxPVsxLDgwXSxYPVsxLDc5XSxXPVsxLDgyXSxZPVsxLDgzXSxLPVsxLDg0XSx6PVsxLDg1XSxKPVsxLDg2XSxRPVsxLDg3XSxaPVsxLDkxXSxldD1bMSw2LDI1LDI2LDM0LDU1LDYwLDYzLDc5LDg0LDkyLDk3LDk5LDEwOCwxMTAsMTExLDExMiwxMTYsMTE3LDEzMiwxMzUsMTM2LDE0MSwxNDIsMTQzLDE0NCwxNDUsMTQ2LDE0N10sdHQ9WzEsOTddLG50PVsxLDk4XSxpdD1bMSw5OV0scnQ9WzEsMTAwXSxzdD1bMSwxMDJdLG90PVsxLDEwM10sYXQ9WzEsOTZdLGN0PVsyLDExMl0sbHQ9WzEsNiwyNSwyNiwzNCw1NSw2MCw2Myw3Miw3Myw3NCw3NSw3Nyw3OSw4MCw4NCw5MCw5MSw5Miw5Nyw5OSwxMDgsMTEwLDExMSwxMTIsMTE2LDExNywxMzIsMTM1LDEzNiwxNDEsMTQyLDE0MywxNDQsMTQ1LDE0NiwxNDddLGh0PVsyLDc5XSx1dD1bMSwxMDhdLHB0PVsyLDU4XSxkdD1bMSwxMTJdLGZ0PVsxLDExN10sbXQ9WzEsMTE4XSxndD1bMSwxMjBdLHZ0PVsxLDYsMjUsMjYsMzQsNDYsNTUsNjAsNjMsNzIsNzMsNzQsNzUsNzcsNzksODAsODQsOTAsOTEsOTIsOTcsOTksMTA4LDExMCwxMTEsMTEyLDExNiwxMTcsMTMyLDEzNSwxMzYsMTQxLDE0MiwxNDMsMTQ0LDE0NSwxNDYsMTQ3XSx5dD1bMiw3Nl0sYnQ9WzEsNiwyNiwzNCw1NSw2MCw2Myw3OSw4NCw5Miw5Nyw5OSwxMDgsMTEwLDExMSwxMTIsMTE2LDExNywxMzIsMTM1LDEzNiwxNDEsMTQyLDE0MywxNDQsMTQ1LDE0NiwxNDddLGt0PVsxLDE1NV0sd3Q9WzEsMTU3XSxUdD1bMSwxNTJdLEN0PVsxLDYsMjUsMjYsMzQsNDYsNTUsNjAsNjMsNzIsNzMsNzQsNzUsNzcsNzksODAsODQsODYsOTAsOTEsOTIsOTcsOTksMTA4LDExMCwxMTEsMTEyLDExNiwxMTcsMTMyLDEzNSwxMzYsMTM5LDE0MCwxNDEsMTQyLDE0MywxNDQsMTQ1LDE0NiwxNDcsMTQ4XSxFdD1bMiw5NV0sRnQ9WzEsNiwyNSwyNiwzNCw0OSw1NSw2MCw2Myw3Miw3Myw3NCw3NSw3Nyw3OSw4MCw4NCw5MCw5MSw5Miw5Nyw5OSwxMDgsMTEwLDExMSwxMTIsMTE2LDExNywxMzIsMTM1LDEzNiwxNDEsMTQyLDE0MywxNDQsMTQ1LDE0NiwxNDddLE50PVsxLDYsMjUsMjYsMzQsNDYsNDksNTUsNjAsNjMsNzIsNzMsNzQsNzUsNzcsNzksODAsODQsODYsOTAsOTEsOTIsOTcsOTksMTA4LDExMCwxMTEsMTEyLDExNiwxMTcsMTIzLDEyNCwxMzIsMTM1LDEzNiwxMzksMTQwLDE0MSwxNDIsMTQzLDE0NCwxNDUsMTQ2LDE0NywxNDhdLEx0PVsxLDIwNl0seHQ9WzEsMjA1XSxTdD1bMSw2LDI1LDI2LDM0LDM4LDU1LDYwLDYzLDcyLDczLDc0LDc1LDc3LDc5LDgwLDg0LDkwLDkxLDkyLDk3LDk5LDEwOCwxMTAsMTExLDExMiwxMTYsMTE3LDEzMiwxMzUsMTM2LDE0MSwxNDIsMTQzLDE0NCwxNDUsMTQ2LDE0N10sRHQ9WzIsNTZdLFJ0PVsxLDIxNl0sQXQ9WzYsMjUsMjYsNTUsNjBdLEl0PVs2LDI1LDI2LDQ2LDU1LDYwLDYzXSxfdD1bMSw2LDI1LDI2LDM0LDU1LDYwLDYzLDc5LDg0LDkyLDk3LDk5LDEwOCwxMTAsMTExLDExMiwxMTYsMTE3LDEzMiwxMzUsMTM2LDE0MiwxNDQsMTQ1LDE0NiwxNDddLE90PVsxLDYsMjUsMjYsMzQsNTUsNjAsNjMsNzksODQsOTIsOTcsOTksMTA4LDExMCwxMTEsMTEyLDExNiwxMTcsMTMyXSwkdD1bNzIsNzMsNzQsNzUsNzcsODAsOTAsOTFdLGp0PVsxLDIzNV0sTXQ9WzIsMTMzXSxCdD1bMSw2LDI1LDI2LDM0LDQ2LDU1LDYwLDYzLDcyLDczLDc0LDc1LDc3LDc5LDgwLDg0LDkwLDkxLDkyLDk3LDk5LDEwOCwxMTAsMTExLDExMiwxMTYsMTE3LDEyMywxMjQsMTMyLDEzNSwxMzYsMTQxLDE0MiwxNDMsMTQ0LDE0NSwxNDYsMTQ3XSxWdD1bMSwyNDRdLFB0PVs2LDI1LDI2LDYwLDkyLDk3XSxVdD1bMSw2LDI1LDI2LDM0LDU1LDYwLDYzLDc5LDg0LDkyLDk3LDk5LDEwOCwxMTcsMTMyXSxHdD1bMSw2LDI1LDI2LDM0LDU1LDYwLDYzLDc5LDg0LDkyLDk3LDk5LDEwOCwxMTEsMTE3LDEzMl0sSHQ9WzEyMywxMjRdLHF0PVs2MCwxMjMsMTI0XSxYdD1bMSwyNTVdLFd0PVs2LDI1LDI2LDYwLDg0XSxZdD1bNiwyNSwyNiw0OSw2MCw4NF0sS3Q9WzEsNiwyNSwyNiwzNCw1NSw2MCw2Myw3OSw4NCw5Miw5Nyw5OSwxMDgsMTEwLDExMSwxMTIsMTE2LDExNywxMzIsMTM1LDEzNiwxNDQsMTQ1LDE0NiwxNDddLHp0PVsxMSwyOCwzMCwzMiwzMywzNiwzNyw0MCw0MSw0Miw0Myw0NCw1MSw1Miw1Myw1Nyw1OCw3OSw4Miw4NSw4OSw5NCw5NSw5NiwxMDIsMTA2LDEwNywxMTAsMTEyLDExNCwxMTYsMTI1LDEzMSwxMzMsMTM0LDEzNSwxMzYsMTM3LDEzOSwxNDBdLEp0PVsyLDEyMl0sUXQ9WzYsMjUsMjZdLFp0PVsyLDU3XSxlbj1bMSwyNjhdLHRuPVsxLDI2OV0sbm49WzEsNiwyNSwyNiwzNCw1NSw2MCw2Myw3OSw4NCw5Miw5Nyw5OSwxMDQsMTA1LDEwOCwxMTAsMTExLDExMiwxMTYsMTE3LDEyNywxMjksMTMyLDEzNSwxMzYsMTQxLDE0MiwxNDMsMTQ0LDE0NSwxNDYsMTQ3XSxybj1bMjYsMTI3LDEyOV0sc249WzEsNiwyNiwzNCw1NSw2MCw2Myw3OSw4NCw5Miw5Nyw5OSwxMDgsMTExLDExNywxMzJdLG9uPVsyLDcxXSxhbj1bMSwyOTFdLGNuPVsxLDI5Ml0sbG49WzEsNiwyNSwyNiwzNCw1NSw2MCw2Myw3OSw4NCw5Miw5Nyw5OSwxMDgsMTEwLDExMSwxMTIsMTE2LDExNywxMjcsMTMyLDEzNSwxMzYsMTQxLDE0MiwxNDMsMTQ0LDE0NSwxNDYsMTQ3XSxobj1bMSw2LDI1LDI2LDM0LDU1LDYwLDYzLDc5LDg0LDkyLDk3LDk5LDEwOCwxMTAsMTEyLDExNiwxMTcsMTMyXSx1bj1bMSwzMDNdLHBuPVsxLDMwNF0sZG49WzYsMjUsMjYsNjBdLGZuPVsxLDYsMjUsMjYsMzQsNTUsNjAsNjMsNzksODQsOTIsOTcsOTksMTA0LDEwOCwxMTAsMTExLDExMiwxMTYsMTE3LDEzMiwxMzUsMTM2LDE0MSwxNDIsMTQzLDE0NCwxNDUsMTQ2LDE0N10sbW49WzI1LDYwXSxnbj17dHJhY2U6ZnVuY3Rpb24oKXt9LHl5Ont9LHN5bWJvbHNfOntlcnJvcjoyLFJvb3Q6MyxCb2R5OjQsTGluZTo1LFRFUk1JTkFUT1I6NixFeHByZXNzaW9uOjcsU3RhdGVtZW50OjgsUmV0dXJuOjksQ29tbWVudDoxMCxTVEFURU1FTlQ6MTEsVmFsdWU6MTIsSW52b2NhdGlvbjoxMyxDb2RlOjE0LE9wZXJhdGlvbjoxNSxBc3NpZ246MTYsSWY6MTcsVHJ5OjE4LFdoaWxlOjE5LEZvcjoyMCxTd2l0Y2g6MjEsQ2xhc3M6MjIsVGhyb3c6MjMsQmxvY2s6MjQsSU5ERU5UOjI1LE9VVERFTlQ6MjYsSWRlbnRpZmllcjoyNyxJREVOVElGSUVSOjI4LEFscGhhTnVtZXJpYzoyOSxOVU1CRVI6MzAsU3RyaW5nOjMxLFNUUklORzozMixTVFJJTkdfU1RBUlQ6MzMsU1RSSU5HX0VORDozNCxSZWdleDozNSxSRUdFWDozNixSRUdFWF9TVEFSVDozNyxSRUdFWF9FTkQ6MzgsTGl0ZXJhbDozOSxKUzo0MCxERUJVR0dFUjo0MSxVTkRFRklORUQ6NDIsTlVMTDo0MyxCT09MOjQ0LEFzc2lnbmFibGU6NDUsXCI9XCI6NDYsQXNzaWduT2JqOjQ3LE9iakFzc2lnbmFibGU6NDgsXCI6XCI6NDksVGhpc1Byb3BlcnR5OjUwLFJFVFVSTjo1MSxIRVJFQ09NTUVOVDo1MixQQVJBTV9TVEFSVDo1MyxQYXJhbUxpc3Q6NTQsUEFSQU1fRU5EOjU1LEZ1bmNHbHlwaDo1NixcIi0+XCI6NTcsXCI9PlwiOjU4LE9wdENvbW1hOjU5LFwiLFwiOjYwLFBhcmFtOjYxLFBhcmFtVmFyOjYyLFwiLi4uXCI6NjMsQXJyYXk6NjQsT2JqZWN0OjY1LFNwbGF0OjY2LFNpbXBsZUFzc2lnbmFibGU6NjcsQWNjZXNzb3I6NjgsUGFyZW50aGV0aWNhbDo2OSxSYW5nZTo3MCxUaGlzOjcxLFwiLlwiOjcyLFwiPy5cIjo3MyxcIjo6XCI6NzQsXCI/OjpcIjo3NSxJbmRleDo3NixJTkRFWF9TVEFSVDo3NyxJbmRleFZhbHVlOjc4LElOREVYX0VORDo3OSxJTkRFWF9TT0FLOjgwLFNsaWNlOjgxLFwie1wiOjgyLEFzc2lnbkxpc3Q6ODMsXCJ9XCI6ODQsQ0xBU1M6ODUsRVhURU5EUzo4NixPcHRGdW5jRXhpc3Q6ODcsQXJndW1lbnRzOjg4LFNVUEVSOjg5LEZVTkNfRVhJU1Q6OTAsQ0FMTF9TVEFSVDo5MSxDQUxMX0VORDo5MixBcmdMaXN0OjkzLFRISVM6OTQsXCJAXCI6OTUsXCJbXCI6OTYsXCJdXCI6OTcsUmFuZ2VEb3RzOjk4LFwiLi5cIjo5OSxBcmc6MTAwLFNpbXBsZUFyZ3M6MTAxLFRSWToxMDIsQ2F0Y2g6MTAzLEZJTkFMTFk6MTA0LENBVENIOjEwNSxUSFJPVzoxMDYsXCIoXCI6MTA3LFwiKVwiOjEwOCxXaGlsZVNvdXJjZToxMDksV0hJTEU6MTEwLFdIRU46MTExLFVOVElMOjExMixMb29wOjExMyxMT09QOjExNCxGb3JCb2R5OjExNSxGT1I6MTE2LEJZOjExNyxGb3JTdGFydDoxMTgsRm9yU291cmNlOjExOSxGb3JWYXJpYWJsZXM6MTIwLE9XTjoxMjEsRm9yVmFsdWU6MTIyLEZPUklOOjEyMyxGT1JPRjoxMjQsU1dJVENIOjEyNSxXaGVuczoxMjYsRUxTRToxMjcsV2hlbjoxMjgsTEVBRElOR19XSEVOOjEyOSxJZkJsb2NrOjEzMCxJRjoxMzEsUE9TVF9JRjoxMzIsVU5BUlk6MTMzLFVOQVJZX01BVEg6MTM0LFwiLVwiOjEzNSxcIitcIjoxMzYsWUlFTEQ6MTM3LEZST006MTM4LFwiLS1cIjoxMzksXCIrK1wiOjE0MCxcIj9cIjoxNDEsTUFUSDoxNDIsXCIqKlwiOjE0MyxTSElGVDoxNDQsQ09NUEFSRToxNDUsTE9HSUM6MTQ2LFJFTEFUSU9OOjE0NyxDT01QT1VORF9BU1NJR046MTQ4LCRhY2NlcHQ6MCwkZW5kOjF9LHRlcm1pbmFsc186ezI6XCJlcnJvclwiLDY6XCJURVJNSU5BVE9SXCIsMTE6XCJTVEFURU1FTlRcIiwyNTpcIklOREVOVFwiLDI2OlwiT1VUREVOVFwiLDI4OlwiSURFTlRJRklFUlwiLDMwOlwiTlVNQkVSXCIsMzI6XCJTVFJJTkdcIiwzMzpcIlNUUklOR19TVEFSVFwiLDM0OlwiU1RSSU5HX0VORFwiLDM2OlwiUkVHRVhcIiwzNzpcIlJFR0VYX1NUQVJUXCIsMzg6XCJSRUdFWF9FTkRcIiw0MDpcIkpTXCIsNDE6XCJERUJVR0dFUlwiLDQyOlwiVU5ERUZJTkVEXCIsNDM6XCJOVUxMXCIsNDQ6XCJCT09MXCIsNDY6XCI9XCIsNDk6XCI6XCIsNTE6XCJSRVRVUk5cIiw1MjpcIkhFUkVDT01NRU5UXCIsNTM6XCJQQVJBTV9TVEFSVFwiLDU1OlwiUEFSQU1fRU5EXCIsNTc6XCItPlwiLDU4OlwiPT5cIiw2MDpcIixcIiw2MzpcIi4uLlwiLDcyOlwiLlwiLDczOlwiPy5cIiw3NDpcIjo6XCIsNzU6XCI/OjpcIiw3NzpcIklOREVYX1NUQVJUXCIsNzk6XCJJTkRFWF9FTkRcIiw4MDpcIklOREVYX1NPQUtcIiw4MjpcIntcIiw4NDpcIn1cIiw4NTpcIkNMQVNTXCIsODY6XCJFWFRFTkRTXCIsODk6XCJTVVBFUlwiLDkwOlwiRlVOQ19FWElTVFwiLDkxOlwiQ0FMTF9TVEFSVFwiLDkyOlwiQ0FMTF9FTkRcIiw5NDpcIlRISVNcIiw5NTpcIkBcIiw5NjpcIltcIiw5NzpcIl1cIiw5OTpcIi4uXCIsMTAyOlwiVFJZXCIsMTA0OlwiRklOQUxMWVwiLDEwNTpcIkNBVENIXCIsMTA2OlwiVEhST1dcIiwxMDc6XCIoXCIsMTA4OlwiKVwiLDExMDpcIldISUxFXCIsMTExOlwiV0hFTlwiLDExMjpcIlVOVElMXCIsMTE0OlwiTE9PUFwiLDExNjpcIkZPUlwiLDExNzpcIkJZXCIsMTIxOlwiT1dOXCIsMTIzOlwiRk9SSU5cIiwxMjQ6XCJGT1JPRlwiLDEyNTpcIlNXSVRDSFwiLDEyNzpcIkVMU0VcIiwxMjk6XCJMRUFESU5HX1dIRU5cIiwxMzE6XCJJRlwiLDEzMjpcIlBPU1RfSUZcIiwxMzM6XCJVTkFSWVwiLDEzNDpcIlVOQVJZX01BVEhcIiwxMzU6XCItXCIsMTM2OlwiK1wiLDEzNzpcIllJRUxEXCIsMTM4OlwiRlJPTVwiLDEzOTpcIi0tXCIsMTQwOlwiKytcIiwxNDE6XCI/XCIsMTQyOlwiTUFUSFwiLDE0MzpcIioqXCIsMTQ0OlwiU0hJRlRcIiwxNDU6XCJDT01QQVJFXCIsMTQ2OlwiTE9HSUNcIiwxNDc6XCJSRUxBVElPTlwiLDE0ODpcIkNPTVBPVU5EX0FTU0lHTlwifSxwcm9kdWN0aW9uc186WzAsWzMsMF0sWzMsMV0sWzQsMV0sWzQsM10sWzQsMl0sWzUsMV0sWzUsMV0sWzgsMV0sWzgsMV0sWzgsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzcsMV0sWzI0LDJdLFsyNCwzXSxbMjcsMV0sWzI5LDFdLFsyOSwxXSxbMzEsMV0sWzMxLDNdLFszNSwxXSxbMzUsM10sWzM5LDFdLFszOSwxXSxbMzksMV0sWzM5LDFdLFszOSwxXSxbMzksMV0sWzM5LDFdLFsxNiwzXSxbMTYsNF0sWzE2LDVdLFs0NywxXSxbNDcsM10sWzQ3LDVdLFs0NywxXSxbNDgsMV0sWzQ4LDFdLFs0OCwxXSxbOSwyXSxbOSwxXSxbMTAsMV0sWzE0LDVdLFsxNCwyXSxbNTYsMV0sWzU2LDFdLFs1OSwwXSxbNTksMV0sWzU0LDBdLFs1NCwxXSxbNTQsM10sWzU0LDRdLFs1NCw2XSxbNjEsMV0sWzYxLDJdLFs2MSwzXSxbNjEsMV0sWzYyLDFdLFs2MiwxXSxbNjIsMV0sWzYyLDFdLFs2NiwyXSxbNjcsMV0sWzY3LDJdLFs2NywyXSxbNjcsMV0sWzQ1LDFdLFs0NSwxXSxbNDUsMV0sWzEyLDFdLFsxMiwxXSxbMTIsMV0sWzEyLDFdLFsxMiwxXSxbNjgsMl0sWzY4LDJdLFs2OCwyXSxbNjgsMl0sWzY4LDFdLFs2OCwxXSxbNzYsM10sWzc2LDJdLFs3OCwxXSxbNzgsMV0sWzY1LDRdLFs4MywwXSxbODMsMV0sWzgzLDNdLFs4Myw0XSxbODMsNl0sWzIyLDFdLFsyMiwyXSxbMjIsM10sWzIyLDRdLFsyMiwyXSxbMjIsM10sWzIyLDRdLFsyMiw1XSxbMTMsM10sWzEzLDNdLFsxMywxXSxbMTMsMl0sWzg3LDBdLFs4NywxXSxbODgsMl0sWzg4LDRdLFs3MSwxXSxbNzEsMV0sWzUwLDJdLFs2NCwyXSxbNjQsNF0sWzk4LDFdLFs5OCwxXSxbNzAsNV0sWzgxLDNdLFs4MSwyXSxbODEsMl0sWzgxLDFdLFs5MywxXSxbOTMsM10sWzkzLDRdLFs5Myw0XSxbOTMsNl0sWzEwMCwxXSxbMTAwLDFdLFsxMDAsMV0sWzEwMSwxXSxbMTAxLDNdLFsxOCwyXSxbMTgsM10sWzE4LDRdLFsxOCw1XSxbMTAzLDNdLFsxMDMsM10sWzEwMywyXSxbMjMsMl0sWzY5LDNdLFs2OSw1XSxbMTA5LDJdLFsxMDksNF0sWzEwOSwyXSxbMTA5LDRdLFsxOSwyXSxbMTksMl0sWzE5LDJdLFsxOSwxXSxbMTEzLDJdLFsxMTMsMl0sWzIwLDJdLFsyMCwyXSxbMjAsMl0sWzExNSwyXSxbMTE1LDRdLFsxMTUsMl0sWzExOCwyXSxbMTE4LDNdLFsxMjIsMV0sWzEyMiwxXSxbMTIyLDFdLFsxMjIsMV0sWzEyMCwxXSxbMTIwLDNdLFsxMTksMl0sWzExOSwyXSxbMTE5LDRdLFsxMTksNF0sWzExOSw0XSxbMTE5LDZdLFsxMTksNl0sWzIxLDVdLFsyMSw3XSxbMjEsNF0sWzIxLDZdLFsxMjYsMV0sWzEyNiwyXSxbMTI4LDNdLFsxMjgsNF0sWzEzMCwzXSxbMTMwLDVdLFsxNywxXSxbMTcsM10sWzE3LDNdLFsxNywzXSxbMTUsMl0sWzE1LDJdLFsxNSwyXSxbMTUsMl0sWzE1LDJdLFsxNSwyXSxbMTUsM10sWzE1LDJdLFsxNSwyXSxbMTUsMl0sWzE1LDJdLFsxNSwyXSxbMTUsM10sWzE1LDNdLFsxNSwzXSxbMTUsM10sWzE1LDNdLFsxNSwzXSxbMTUsM10sWzE1LDNdLFsxNSwzXSxbMTUsNV0sWzE1LDRdLFsxNSwzXV0scGVyZm9ybUFjdGlvbjpmdW5jdGlvbihlLHQsbixpLHIscyxvKXt2YXIgYT1zLmxlbmd0aC0xO1xuc3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gdGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShuZXcgaS5CbG9jayk7Y2FzZSAyOnJldHVybiB0aGlzLiQ9c1thXTtjYXNlIDM6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShpLkJsb2NrLndyYXAoW3NbYV1dKSk7YnJlYWs7Y2FzZSA0OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0yXSxvW2FdKShzW2EtMl0ucHVzaChzW2FdKSk7YnJlYWs7Y2FzZSA1OnRoaXMuJD1zW2EtMV07YnJlYWs7Y2FzZSA2OmNhc2UgNzpjYXNlIDg6Y2FzZSA5OmNhc2UgMTE6Y2FzZSAxMjpjYXNlIDEzOmNhc2UgMTQ6Y2FzZSAxNTpjYXNlIDE2OmNhc2UgMTc6Y2FzZSAxODpjYXNlIDE5OmNhc2UgMjA6Y2FzZSAyMTpjYXNlIDIyOmNhc2UgMjc6Y2FzZSAzMjpjYXNlIDM0OmNhc2UgNDU6Y2FzZSA0NjpjYXNlIDQ3OmNhc2UgNDg6Y2FzZSA1NjpjYXNlIDU3OmNhc2UgNjc6Y2FzZSA2ODpjYXNlIDY5OmNhc2UgNzA6Y2FzZSA3NTpjYXNlIDc2OmNhc2UgNzk6Y2FzZSA4MzpjYXNlIDg5OmNhc2UgMTMzOmNhc2UgMTM0OmNhc2UgMTM2OmNhc2UgMTY2OmNhc2UgMTY3OmNhc2UgMTgzOmNhc2UgMTg5OnRoaXMuJD1zW2FdO2JyZWFrO2Nhc2UgMTA6Y2FzZSAyNTpjYXNlIDI2OmNhc2UgMjg6Y2FzZSAzMDpjYXNlIDMzOmNhc2UgMzU6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShuZXcgaS5MaXRlcmFsKHNbYV0pKTticmVhaztjYXNlIDIzOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5CbG9jayk7YnJlYWs7Y2FzZSAyNDpjYXNlIDMxOmNhc2UgOTA6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKHNbYS0xXSk7YnJlYWs7Y2FzZSAyOTpjYXNlIDE0Njp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkobmV3IGkuUGFyZW5zKHNbYS0xXSkpO2JyZWFrO2Nhc2UgMzY6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShuZXcgaS5VbmRlZmluZWQpO2JyZWFrO2Nhc2UgMzc6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShuZXcgaS5OdWxsKTticmVhaztjYXNlIDM4OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYV0sb1thXSkobmV3IGkuQm9vbChzW2FdKSk7YnJlYWs7Y2FzZSAzOTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkobmV3IGkuQXNzaWduKHNbYS0yXSxzW2FdKSk7YnJlYWs7Y2FzZSA0MDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtM10sb1thXSkobmV3IGkuQXNzaWduKHNbYS0zXSxzW2FdKSk7YnJlYWs7Y2FzZSA0MTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtNF0sb1thXSkobmV3IGkuQXNzaWduKHNbYS00XSxzW2EtMV0pKTticmVhaztjYXNlIDQyOmNhc2UgNzI6Y2FzZSA3NzpjYXNlIDc4OmNhc2UgODA6Y2FzZSA4MTpjYXNlIDgyOmNhc2UgMTY4OmNhc2UgMTY5OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYV0sb1thXSkobmV3IGkuVmFsdWUoc1thXSkpO2JyZWFrO2Nhc2UgNDM6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKG5ldyBpLkFzc2lnbihpLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0yXSkobmV3IGkuVmFsdWUoc1thLTJdKSksc1thXSxcIm9iamVjdFwiKSk7YnJlYWs7Y2FzZSA0NDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtNF0sb1thXSkobmV3IGkuQXNzaWduKGkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTRdKShuZXcgaS5WYWx1ZShzW2EtNF0pKSxzW2EtMV0sXCJvYmplY3RcIikpO2JyZWFrO2Nhc2UgNDk6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKG5ldyBpLlJldHVybihzW2FdKSk7YnJlYWs7Y2FzZSA1MDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKG5ldyBpLlJldHVybik7YnJlYWs7Y2FzZSA1MTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKG5ldyBpLkNvbW1lbnQoc1thXSkpO2JyZWFrO2Nhc2UgNTI6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTRdLG9bYV0pKG5ldyBpLkNvZGUoc1thLTNdLHNbYV0sc1thLTFdKSk7YnJlYWs7Y2FzZSA1Mzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuQ29kZShbXSxzW2FdLHNbYS0xXSkpO2JyZWFrO2Nhc2UgNTQ6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShcImZ1bmNcIik7YnJlYWs7Y2FzZSA1NTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKFwiYm91bmRmdW5jXCIpO2JyZWFrO2Nhc2UgNTg6Y2FzZSA5NTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKFtdKTticmVhaztjYXNlIDU5OmNhc2UgOTY6Y2FzZSAxMjg6Y2FzZSAxNzA6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShbc1thXV0pO2JyZWFrO2Nhc2UgNjA6Y2FzZSA5NzpjYXNlIDEyOTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkoc1thLTJdLmNvbmNhdChzW2FdKSk7YnJlYWs7Y2FzZSA2MTpjYXNlIDk4OmNhc2UgMTMwOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0zXSxvW2FdKShzW2EtM10uY29uY2F0KHNbYV0pKTticmVhaztjYXNlIDYyOmNhc2UgOTk6Y2FzZSAxMzI6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTVdLG9bYV0pKHNbYS01XS5jb25jYXQoc1thLTJdKSk7YnJlYWs7Y2FzZSA2Mzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKG5ldyBpLlBhcmFtKHNbYV0pKTticmVhaztjYXNlIDY0OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5QYXJhbShzW2EtMV0sbnVsbCwhMCkpO2JyZWFrO2Nhc2UgNjU6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKG5ldyBpLlBhcmFtKHNbYS0yXSxzW2FdKSk7YnJlYWs7Y2FzZSA2NjpjYXNlIDEzNTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKG5ldyBpLkV4cGFuc2lvbik7YnJlYWs7Y2FzZSA3MTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuU3BsYXQoc1thLTFdKSk7YnJlYWs7Y2FzZSA3Mzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkoc1thLTFdLmFkZChzW2FdKSk7YnJlYWs7Y2FzZSA3NDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuVmFsdWUoc1thLTFdLFtdLmNvbmNhdChzW2FdKSkpO2JyZWFrO2Nhc2UgODQ6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKG5ldyBpLkFjY2VzcyhzW2FdKSk7YnJlYWs7Y2FzZSA4NTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuQWNjZXNzKHNbYV0sXCJzb2FrXCIpKTticmVhaztjYXNlIDg2OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShbaS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0pKG5ldyBpLkFjY2VzcyhuZXcgaS5MaXRlcmFsKFwicHJvdG90eXBlXCIpKSksaS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdKShuZXcgaS5BY2Nlc3Moc1thXSkpXSk7YnJlYWs7Y2FzZSA4Nzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkoW2kuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdKShuZXcgaS5BY2Nlc3MobmV3IGkuTGl0ZXJhbChcInByb3RvdHlwZVwiKSxcInNvYWtcIikpLGkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSkobmV3IGkuQWNjZXNzKHNbYV0pKV0pO2JyZWFrO2Nhc2UgODg6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShuZXcgaS5BY2Nlc3MobmV3IGkuTGl0ZXJhbChcInByb3RvdHlwZVwiKSkpO2JyZWFrO2Nhc2UgOTE6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKGkuZXh0ZW5kKHNbYV0se3NvYWs6ITB9KSk7YnJlYWs7Y2FzZSA5Mjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKG5ldyBpLkluZGV4KHNbYV0pKTticmVhaztjYXNlIDkzOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYV0sb1thXSkobmV3IGkuU2xpY2Uoc1thXSkpO2JyZWFrO2Nhc2UgOTQ6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTNdLG9bYV0pKG5ldyBpLk9iaihzW2EtMl0sc1thLTNdLmdlbmVyYXRlZCkpO2JyZWFrO2Nhc2UgMTAwOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYV0sb1thXSkobmV3IGkuQ2xhc3MpO2JyZWFrO2Nhc2UgMTAxOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5DbGFzcyhudWxsLG51bGwsc1thXSkpO2JyZWFrO2Nhc2UgMTAyOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0yXSxvW2FdKShuZXcgaS5DbGFzcyhudWxsLHNbYV0pKTticmVhaztjYXNlIDEwMzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtM10sb1thXSkobmV3IGkuQ2xhc3MobnVsbCxzW2EtMV0sc1thXSkpO2JyZWFrO2Nhc2UgMTA0OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5DbGFzcyhzW2FdKSk7YnJlYWs7Y2FzZSAxMDU6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKG5ldyBpLkNsYXNzKHNbYS0xXSxudWxsLHNbYV0pKTticmVhaztjYXNlIDEwNjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtM10sb1thXSkobmV3IGkuQ2xhc3Moc1thLTJdLHNbYV0pKTticmVhaztjYXNlIDEwNzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtNF0sb1thXSkobmV3IGkuQ2xhc3Moc1thLTNdLHNbYS0xXSxzW2FdKSk7YnJlYWs7Y2FzZSAxMDg6Y2FzZSAxMDk6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKG5ldyBpLkNhbGwoc1thLTJdLHNbYV0sc1thLTFdKSk7YnJlYWs7Y2FzZSAxMTA6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShuZXcgaS5DYWxsKFwic3VwZXJcIixbbmV3IGkuU3BsYXQobmV3IGkuTGl0ZXJhbChcImFyZ3VtZW50c1wiKSldKSk7YnJlYWs7Y2FzZSAxMTE6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKG5ldyBpLkNhbGwoXCJzdXBlclwiLHNbYV0pKTticmVhaztjYXNlIDExMjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKCExKTticmVhaztjYXNlIDExMzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKCEwKTticmVhaztjYXNlIDExNDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkoW10pO2JyZWFrO2Nhc2UgMTE1OmNhc2UgMTMxOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0zXSxvW2FdKShzW2EtMl0pO2JyZWFrO2Nhc2UgMTE2OmNhc2UgMTE3OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYV0sb1thXSkobmV3IGkuVmFsdWUobmV3IGkuTGl0ZXJhbChcInRoaXNcIikpKTticmVhaztjYXNlIDExODp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuVmFsdWUoaS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0pKG5ldyBpLkxpdGVyYWwoXCJ0aGlzXCIpKSxbaS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdKShuZXcgaS5BY2Nlc3Moc1thXSkpXSxcInRoaXNcIikpO2JyZWFrO2Nhc2UgMTE5OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5BcnIoW10pKTticmVhaztjYXNlIDEyMDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtM10sb1thXSkobmV3IGkuQXJyKHNbYS0yXSkpO2JyZWFrO2Nhc2UgMTIxOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYV0sb1thXSkoXCJpbmNsdXNpdmVcIik7YnJlYWs7Y2FzZSAxMjI6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thXSxvW2FdKShcImV4Y2x1c2l2ZVwiKTticmVhaztjYXNlIDEyMzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtNF0sb1thXSkobmV3IGkuUmFuZ2Uoc1thLTNdLHNbYS0xXSxzW2EtMl0pKTticmVhaztjYXNlIDEyNDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkobmV3IGkuUmFuZ2Uoc1thLTJdLHNbYV0sc1thLTFdKSk7YnJlYWs7Y2FzZSAxMjU6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKG5ldyBpLlJhbmdlKHNbYS0xXSxudWxsLHNbYV0pKTticmVhaztjYXNlIDEyNjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuUmFuZ2UobnVsbCxzW2FdLHNbYS0xXSkpO2JyZWFrO2Nhc2UgMTI3OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYV0sb1thXSkobmV3IGkuUmFuZ2UobnVsbCxudWxsLHNbYV0pKTticmVhaztjYXNlIDEzNzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkoW10uY29uY2F0KHNbYS0yXSxzW2FdKSk7YnJlYWs7Y2FzZSAxMzg6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKG5ldyBpLlRyeShzW2FdKSk7YnJlYWs7Y2FzZSAxMzk6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKG5ldyBpLlRyeShzW2EtMV0sc1thXVswXSxzW2FdWzFdKSk7YnJlYWs7Y2FzZSAxNDA6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTNdLG9bYV0pKG5ldyBpLlRyeShzW2EtMl0sbnVsbCxudWxsLHNbYV0pKTticmVhaztjYXNlIDE0MTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtNF0sb1thXSkobmV3IGkuVHJ5KHNbYS0zXSxzW2EtMl1bMF0sc1thLTJdWzFdLHNbYV0pKTticmVhaztjYXNlIDE0Mjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkoW3NbYS0xXSxzW2FdXSk7YnJlYWs7Y2FzZSAxNDM6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKFtpLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSkobmV3IGkuVmFsdWUoc1thLTFdKSksc1thXV0pO2JyZWFrO2Nhc2UgMTQ0OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShbbnVsbCxzW2FdXSk7YnJlYWs7Y2FzZSAxNDU6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKG5ldyBpLlRocm93KHNbYV0pKTticmVhaztjYXNlIDE0Nzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtNF0sb1thXSkobmV3IGkuUGFyZW5zKHNbYS0yXSkpO2JyZWFrO2Nhc2UgMTQ4OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5XaGlsZShzW2FdKSk7YnJlYWs7Y2FzZSAxNDk6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTNdLG9bYV0pKG5ldyBpLldoaWxlKHNbYS0yXSx7Z3VhcmQ6c1thXX0pKTticmVhaztjYXNlIDE1MDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuV2hpbGUoc1thXSx7aW52ZXJ0OiEwfSkpO2JyZWFrO2Nhc2UgMTUxOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0zXSxvW2FdKShuZXcgaS5XaGlsZShzW2EtMl0se2ludmVydDohMCxndWFyZDpzW2FdfSkpO2JyZWFrO2Nhc2UgMTUyOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShzW2EtMV0uYWRkQm9keShzW2FdKSk7YnJlYWs7Y2FzZSAxNTM6Y2FzZSAxNTQ6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKHNbYV0uYWRkQm9keShpLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSkoaS5CbG9jay53cmFwKFtzW2EtMV1dKSkpKTticmVhaztjYXNlIDE1NTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdLG9bYV0pKHNbYV0pO2JyZWFrO2Nhc2UgMTU2OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5XaGlsZShpLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSkobmV3IGkuTGl0ZXJhbChcInRydWVcIikpKS5hZGRCb2R5KHNbYV0pKTticmVhaztjYXNlIDE1Nzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuV2hpbGUoaS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0pKG5ldyBpLkxpdGVyYWwoXCJ0cnVlXCIpKSkuYWRkQm9keShpLmFkZExvY2F0aW9uRGF0YUZuKG9bYV0pKGkuQmxvY2sud3JhcChbc1thXV0pKSkpO2JyZWFrO2Nhc2UgMTU4OmNhc2UgMTU5OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5Gb3Ioc1thLTFdLHNbYV0pKTticmVhaztjYXNlIDE2MDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuRm9yKHNbYV0sc1thLTFdKSk7YnJlYWs7Y2FzZSAxNjE6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKHtzb3VyY2U6aS5hZGRMb2NhdGlvbkRhdGFGbihvW2FdKShuZXcgaS5WYWx1ZShzW2FdKSl9KTticmVhaztjYXNlIDE2Mjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtM10sb1thXSkoe3NvdXJjZTppLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0yXSkobmV3IGkuVmFsdWUoc1thLTJdKSksc3RlcDpzW2FdfSk7YnJlYWs7Y2FzZSAxNjM6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKGZ1bmN0aW9uKCl7cmV0dXJuIHNbYV0ub3duPXNbYS0xXS5vd24sc1thXS5uYW1lPXNbYS0xXVswXSxzW2FdLmluZGV4PXNbYS0xXVsxXSxzW2FdfSgpKTticmVhaztjYXNlIDE2NDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkoc1thXSk7YnJlYWs7Y2FzZSAxNjU6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKGZ1bmN0aW9uKCl7cmV0dXJuIHNbYV0ub3duPSEwLHNbYV19KCkpO2JyZWFrO2Nhc2UgMTcxOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0yXSxvW2FdKShbc1thLTJdLHNbYV1dKTticmVhaztjYXNlIDE3Mjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkoe3NvdXJjZTpzW2FdfSk7YnJlYWs7Y2FzZSAxNzM6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKHtzb3VyY2U6c1thXSxvYmplY3Q6ITB9KTticmVhaztjYXNlIDE3NDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtM10sb1thXSkoe3NvdXJjZTpzW2EtMl0sZ3VhcmQ6c1thXX0pO2JyZWFrO2Nhc2UgMTc1OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0zXSxvW2FdKSh7c291cmNlOnNbYS0yXSxndWFyZDpzW2FdLG9iamVjdDohMH0pO2JyZWFrO2Nhc2UgMTc2OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0zXSxvW2FdKSh7c291cmNlOnNbYS0yXSxzdGVwOnNbYV19KTticmVhaztjYXNlIDE3Nzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtNV0sb1thXSkoe3NvdXJjZTpzW2EtNF0sZ3VhcmQ6c1thLTJdLHN0ZXA6c1thXX0pO2JyZWFrO2Nhc2UgMTc4OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS01XSxvW2FdKSh7c291cmNlOnNbYS00XSxzdGVwOnNbYS0yXSxndWFyZDpzW2FdfSk7YnJlYWs7Y2FzZSAxNzk6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTRdLG9bYV0pKG5ldyBpLlN3aXRjaChzW2EtM10sc1thLTFdKSk7YnJlYWs7Y2FzZSAxODA6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTZdLG9bYV0pKG5ldyBpLlN3aXRjaChzW2EtNV0sc1thLTNdLHNbYS0xXSkpO2JyZWFrO2Nhc2UgMTgxOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0zXSxvW2FdKShuZXcgaS5Td2l0Y2gobnVsbCxzW2EtMV0pKTticmVhaztjYXNlIDE4Mjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtNV0sb1thXSkobmV3IGkuU3dpdGNoKG51bGwsc1thLTNdLHNbYS0xXSkpO2JyZWFrO2Nhc2UgMTg0OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShzW2EtMV0uY29uY2F0KHNbYV0pKTticmVhaztjYXNlIDE4NTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkoW1tzW2EtMV0sc1thXV1dKTticmVhaztjYXNlIDE4Njp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtM10sb1thXSkoW1tzW2EtMl0sc1thLTFdXV0pO2JyZWFrO2Nhc2UgMTg3OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0yXSxvW2FdKShuZXcgaS5JZihzW2EtMV0sc1thXSx7dHlwZTpzW2EtMl19KSk7YnJlYWs7Y2FzZSAxODg6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTRdLG9bYV0pKHNbYS00XS5hZGRFbHNlKGkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKG5ldyBpLklmKHNbYS0xXSxzW2FdLHt0eXBlOnNbYS0yXX0pKSkpO2JyZWFrO2Nhc2UgMTkwOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0yXSxvW2FdKShzW2EtMl0uYWRkRWxzZShzW2FdKSk7YnJlYWs7Y2FzZSAxOTE6Y2FzZSAxOTI6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKG5ldyBpLklmKHNbYV0saS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0pKGkuQmxvY2sud3JhcChbc1thLTJdXSkpLHt0eXBlOnNbYS0xXSxzdGF0ZW1lbnQ6ITB9KSk7YnJlYWs7Y2FzZSAxOTM6Y2FzZSAxOTQ6Y2FzZSAxOTc6Y2FzZSAxOTg6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKG5ldyBpLk9wKHNbYS0xXSxzW2FdKSk7YnJlYWs7Y2FzZSAxOTU6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKG5ldyBpLk9wKFwiLVwiLHNbYV0pKTticmVhaztjYXNlIDE5Njp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuT3AoXCIrXCIsc1thXSkpO2JyZWFrO2Nhc2UgMTk5OnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0yXSxvW2FdKShuZXcgaS5PcChzW2EtMl0uY29uY2F0KHNbYS0xXSksc1thXSkpO2JyZWFrO2Nhc2UgMjAwOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5PcChcIi0tXCIsc1thXSkpO2JyZWFrO2Nhc2UgMjAxOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5PcChcIisrXCIsc1thXSkpO2JyZWFrO2Nhc2UgMjAyOnRoaXMuJD1pLmFkZExvY2F0aW9uRGF0YUZuKG9bYS0xXSxvW2FdKShuZXcgaS5PcChcIi0tXCIsc1thLTFdLG51bGwsITApKTticmVhaztjYXNlIDIwMzp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMV0sb1thXSkobmV3IGkuT3AoXCIrK1wiLHNbYS0xXSxudWxsLCEwKSk7YnJlYWs7Y2FzZSAyMDQ6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTFdLG9bYV0pKG5ldyBpLkV4aXN0ZW5jZShzW2EtMV0pKTticmVhaztjYXNlIDIwNTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkobmV3IGkuT3AoXCIrXCIsc1thLTJdLHNbYV0pKTticmVhaztjYXNlIDIwNjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkobmV3IGkuT3AoXCItXCIsc1thLTJdLHNbYV0pKTticmVhaztjYXNlIDIwNzpjYXNlIDIwODpjYXNlIDIwOTpjYXNlIDIxMDpjYXNlIDIxMTp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkobmV3IGkuT3Aoc1thLTFdLHNbYS0yXSxzW2FdKSk7YnJlYWs7Y2FzZSAyMTI6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKGZ1bmN0aW9uKCl7cmV0dXJuXCIhXCI9PT1zW2EtMV0uY2hhckF0KDApP25ldyBpLk9wKHNbYS0xXS5zbGljZSgxKSxzW2EtMl0sc1thXSkuaW52ZXJ0KCk6bmV3IGkuT3Aoc1thLTFdLHNbYS0yXSxzW2FdKX0oKSk7YnJlYWs7Y2FzZSAyMTM6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTJdLG9bYV0pKG5ldyBpLkFzc2lnbihzW2EtMl0sc1thXSxzW2EtMV0pKTticmVhaztjYXNlIDIxNDp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtNF0sb1thXSkobmV3IGkuQXNzaWduKHNbYS00XSxzW2EtMV0sc1thLTNdKSk7YnJlYWs7Y2FzZSAyMTU6dGhpcy4kPWkuYWRkTG9jYXRpb25EYXRhRm4ob1thLTNdLG9bYV0pKG5ldyBpLkFzc2lnbihzW2EtM10sc1thXSxzW2EtMl0pKTticmVhaztjYXNlIDIxNjp0aGlzLiQ9aS5hZGRMb2NhdGlvbkRhdGFGbihvW2EtMl0sb1thXSkobmV3IGkuRXh0ZW5kcyhzW2EtMl0sc1thXSkpfX0sdGFibGU6W3sxOlsyLDFdLDM6MSw0OjIsNTozLDc6NCw4OjUsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7MTpbM119LHsxOlsyLDJdLDY6UH0sdChVLFsyLDNdKSx0KFUsWzIsNl0sezExODo2OSwxMDk6ODksMTE1OjkwLDExMDp4LDExMjpTLDExNjpSLDEzMjpHLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSksdChVLFsyLDddLHsxMTg6NjksMTA5OjkyLDExNTo5MywxMTA6eCwxMTI6UywxMTY6UiwxMzI6Wn0pLHQoZXQsWzIsMTFdLHs4Nzo5NCw2ODo5NSw3NjoxMDEsNzI6dHQsNzM6bnQsNzQ6aXQsNzU6cnQsNzc6c3QsODA6b3QsOTA6YXQsOTE6Y3R9KSx0KGV0LFsyLDEyXSx7NzY6MTAxLDg3OjEwNCw2ODoxMDUsNzI6dHQsNzM6bnQsNzQ6aXQsNzU6cnQsNzc6c3QsODA6b3QsOTA6YXQsOTE6Y3R9KSx0KGV0LFsyLDEzXSksdChldCxbMiwxNF0pLHQoZXQsWzIsMTVdKSx0KGV0LFsyLDE2XSksdChldCxbMiwxN10pLHQoZXQsWzIsMThdKSx0KGV0LFsyLDE5XSksdChldCxbMiwyMF0pLHQoZXQsWzIsMjFdKSx0KGV0LFsyLDIyXSksdChldCxbMiw4XSksdChldCxbMiw5XSksdChldCxbMiwxMF0pLHQobHQsaHQsezQ2OlsxLDEwNl19KSx0KGx0LFsyLDgwXSksdChsdCxbMiw4MV0pLHQobHQsWzIsODJdKSx0KGx0LFsyLDgzXSksdChbMSw2LDI1LDI2LDM0LDM4LDU1LDYwLDYzLDcyLDczLDc0LDc1LDc3LDc5LDgwLDg0LDkwLDkyLDk3LDk5LDEwOCwxMTAsMTExLDExMiwxMTYsMTE3LDEzMiwxMzUsMTM2LDE0MSwxNDIsMTQzLDE0NCwxNDUsMTQ2LDE0N10sWzIsMTEwXSx7ODg6MTA3LDkxOnV0fSksdChbNiwyNSw1NSw2MF0scHQsezU0OjEwOSw2MToxMTAsNjI6MTExLDI3OjExMyw1MDoxMTQsNjQ6MTE1LDY1OjExNiwyODppLDYzOmR0LDgyOmIsOTU6ZnQsOTY6bXR9KSx7MjQ6MTE5LDI1Omd0fSx7NzoxMjEsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxMjMsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxMjQsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxMjUsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxMjcsODoxMjYsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzODpbMSwxMjhdLDEzOTpCLDE0MDpWfSx7MTI6MTMwLDEzOjEzMSwyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MTMyLDUwOjYzLDY0OjQ3LDY1OjQ4LDY3OjEyOSw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTA3Okx9LHsxMjoxMzAsMTM6MTMxLDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToxMzIsNTA6NjMsNjQ6NDcsNjU6NDgsNjc6MTMzLDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODk6dyw5NDpULDk1OkMsOTY6RSwxMDc6TH0sdCh2dCx5dCx7ODY6WzEsMTM3XSwxMzk6WzEsMTM0XSwxNDA6WzEsMTM1XSwxNDg6WzEsMTM2XX0pLHQoZXQsWzIsMTg5XSx7MTI3OlsxLDEzOF19KSx7MjQ6MTM5LDI1Omd0fSx7MjQ6MTQwLDI1Omd0fSx0KGV0LFsyLDE1NV0pLHsyNDoxNDEsMjU6Z3R9LHs3OjE0Miw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNTpbMSwxNDNdLDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjQ6NDcsNjU6NDgsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTAyOkYsMTA2Ok4sMTA3OkwsMTA5OjM5LDExMDp4LDExMjpTLDExMzo0MCwxMTQ6RCwxMTU6NDEsMTE2OlIsMTE4OjY5LDEyNTpBLDEzMDozNywxMzE6SSwxMzM6XywxMzQ6TywxMzU6JCwxMzY6aiwxMzc6TSwxMzk6QiwxNDA6Vn0sdChidCxbMiwxMDBdLHszOToyMiw2OToyMyw3MDoyNCw3MToyNSw2NDo0Nyw2NTo0OCwyOTo0OSwzNTo1MSwyNzo2Miw1MDo2MywzMTo3MiwxMjoxMzAsMTM6MTMxLDQ1OjEzMiwyNDoxNDQsNjc6MTQ2LDI1Omd0LDI4OmksMzA6ciwzMjpzLDMzOm8sMzY6YSwzNzpjLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw4MjpiLDg2OlsxLDE0NV0sODk6dyw5NDpULDk1OkMsOTY6RSwxMDc6TH0pLHs3OjE0Nyw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoWzEsNiwyNSwyNiwzNCw1NSw2MCw2Myw3OSw4NCw5Miw5Nyw5OSwxMDgsMTEwLDExMSwxMTIsMTE2LDExNywxMzIsMTQxLDE0MiwxNDMsMTQ0LDE0NSwxNDYsMTQ3XSxbMiw1MF0sezEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsOToxOCwxMDoxOSw0NToyMSwzOToyMiw2OToyMyw3MDoyNCw3MToyNSw1NjoyOCw2NzozNiwxMzA6MzcsMTA5OjM5LDExMzo0MCwxMTU6NDEsNjQ6NDcsNjU6NDgsMjk6NDksMzU6NTEsMjc6NjIsNTA6NjMsMTE4OjY5LDMxOjcyLDg6MTIyLDc6MTQ4LDExOm4sMjg6aSwzMDpyLDMyOnMsMzM6bywzNjphLDM3OmMsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDUxOmYsNTI6bSw1MzpnLDU3OnYsNTg6eSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMTQ6RCwxMjU6QSwxMzE6SSwxMzM6XywxMzQ6TywxMzU6JCwxMzY6aiwxMzc6TSwxMzk6QiwxNDA6Vn0pLHQoZXQsWzIsNTFdKSx0KHZ0LFsyLDc3XSksdCh2dCxbMiw3OF0pLHQobHQsWzIsMzJdKSx0KGx0LFsyLDMzXSksdChsdCxbMiwzNF0pLHQobHQsWzIsMzVdKSx0KGx0LFsyLDM2XSksdChsdCxbMiwzN10pLHQobHQsWzIsMzhdKSx7NDoxNDksNTozLDc6NCw4OjUsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjU6WzEsMTUwXSwyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OjE1MSw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNTprdCwyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDYzOnd0LDY0OjQ3LDY1OjQ4LDY2OjE1Niw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5MzoxNTMsOTQ6VCw5NTpDLDk2OkUsOTc6VHQsMTAwOjE1NCwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KGx0LFsyLDExNl0pLHQobHQsWzIsMTE3XSx7Mjc6MTU4LDI4Oml9KSx7MjU6WzIsNTRdfSx7MjU6WzIsNTVdfSx0KEN0LFsyLDcyXSksdChDdCxbMiw3NV0pLHs3OjE1OSw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OjE2MCw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OjE2MSw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OjE2Myw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNDoxNjIsMjU6Z3QsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7Mjc6MTY4LDI4OmksNTA6MTY5LDY0OjE3MCw2NToxNzEsNzA6MTY0LDgyOmIsOTU6ZnQsOTY6RSwxMjA6MTY1LDEyMTpbMSwxNjZdLDEyMjoxNjd9LHsxMTk6MTcyLDEyMzpbMSwxNzNdLDEyNDpbMSwxNzRdfSx0KFs2LDI1LDYwLDg0XSxFdCx7MzE6NzIsODM6MTc1LDQ3OjE3Niw0ODoxNzcsMTA6MTc4LDI3OjE3OSwyOToxODAsNTA6MTgxLDI4OmksMzA6ciwzMjpzLDMzOm8sNTI6bSw5NTpmdH0pLHQoRnQsWzIsMjZdKSx0KEZ0LFsyLDI3XSksdChsdCxbMiwzMF0pLHsxMjoxMzAsMTM6MTgyLDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToxMzIsNTA6NjMsNjQ6NDcsNjU6NDgsNjc6MTgzLDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODk6dyw5NDpULDk1OkMsOTY6RSwxMDc6TH0sdChOdCxbMiwyNV0pLHQoRnQsWzIsMjhdKSx7NDoxODQsNTozLDc6NCw4OjUsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KFUsWzIsNV0sezc6NCw4OjUsMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNyw5OjE4LDEwOjE5LDQ1OjIxLDM5OjIyLDY5OjIzLDcwOjI0LDcxOjI1LDU2OjI4LDY3OjM2LDEzMDozNywxMDk6MzksMTEzOjQwLDExNTo0MSw2NDo0Nyw2NTo0OCwyOTo0OSwzNTo1MSwyNzo2Miw1MDo2MywxMTg6NjksMzE6NzIsNToxODUsMTE6biwyODppLDMwOnIsMzI6cywzMzpvLDM2OmEsMzc6Yyw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNTE6Ziw1MjptLDUzOmcsNTc6diw1ODp5LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDExMDp4LDExMjpTLDExNDpELDExNjpSLDEyNTpBLDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSksdChldCxbMiwyMDRdKSx7NzoxODYsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxODcsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxODgsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxODksODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxOTAsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxOTEsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxOTIsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxOTMsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoxOTQsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KGV0LFsyLDE1NF0pLHQoZXQsWzIsMTU5XSksezc6MTk1LDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjQ6NDcsNjU6NDgsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTAyOkYsMTA2Ok4sMTA3OkwsMTA5OjM5LDExMDp4LDExMjpTLDExMzo0MCwxMTQ6RCwxMTU6NDEsMTE2OlIsMTE4OjY5LDEyNTpBLDEzMDozNywxMzE6SSwxMzM6XywxMzQ6TywxMzU6JCwxMzY6aiwxMzc6TSwxMzk6QiwxNDA6Vn0sdChldCxbMiwxNTNdKSx0KGV0LFsyLDE1OF0pLHs4ODoxOTYsOTE6dXR9LHQoQ3QsWzIsNzNdKSx7OTE6WzIsMTEzXX0sezI3OjE5NywyODppfSx7Mjc6MTk4LDI4Oml9LHQoQ3QsWzIsODhdLHsyNzoxOTksMjg6aX0pLHsyNzoyMDAsMjg6aX0sdChDdCxbMiw4OV0pLHs3OjIwMiw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDYzOkx0LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDc4OjIwMSw4MToyMDMsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsOTg6MjA0LDk5Onh0LDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3NjoyMDcsNzc6c3QsODA6b3R9LHs4ODoyMDgsOTE6dXR9LHQoQ3QsWzIsNzRdKSx7NjpbMSwyMTBdLDc6MjA5LDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI1OlsxLDIxMV0sMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KFN0LFsyLDExMV0pLHs3OjIxNCw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNTprdCwyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDYzOnd0LDY0OjQ3LDY1OjQ4LDY2OjE1Niw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5MjpbMSwyMTJdLDkzOjIxMyw5NDpULDk1OkMsOTY6RSwxMDA6MTU0LDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoWzYsMjVdLER0LHs1OToyMTcsNTU6WzEsMjE1XSw2MDpSdH0pLHQoQXQsWzIsNTldKSx0KEF0LFsyLDYzXSx7NDY6WzEsMjE5XSw2MzpbMSwyMThdfSksdChBdCxbMiw2Nl0pLHQoSXQsWzIsNjddKSx0KEl0LFsyLDY4XSksdChJdCxbMiw2OV0pLHQoSXQsWzIsNzBdKSx7Mjc6MTU4LDI4Oml9LHs3OjIxNCw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNTprdCwyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDYzOnd0LDY0OjQ3LDY1OjQ4LDY2OjE1Niw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5MzoxNTMsOTQ6VCw5NTpDLDk2OkUsOTc6VHQsMTAwOjE1NCwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KGV0LFsyLDUzXSksezQ6MjIxLDU6Myw3OjQsODo1LDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI2OlsxLDIyMF0sMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KFsxLDYsMjUsMjYsMzQsNTUsNjAsNjMsNzksODQsOTIsOTcsOTksMTA4LDExMCwxMTEsMTEyLDExNiwxMTcsMTMyLDEzNSwxMzYsMTQyLDE0MywxNDQsMTQ1LDE0NiwxNDddLFsyLDE5M10sezExODo2OSwxMDk6ODksMTE1OjkwLDE0MTpYfSksezEwOTo5MiwxMTA6eCwxMTI6UywxMTU6OTMsMTE2OlIsMTE4OjY5LDEzMjpafSx0KF90LFsyLDE5NF0sezExODo2OSwxMDk6ODksMTE1OjkwLDE0MTpYLDE0MzpZfSksdChfdCxbMiwxOTVdLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxNDE6WCwxNDM6WX0pLHQoX3QsWzIsMTk2XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTQxOlgsMTQzOll9KSx0KGV0LFsyLDE5N10sezExODo2OSwxMDk6OTIsMTE1OjkzfSksdChPdCxbMiwxOThdLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHs3OjIyMiw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoZXQsWzIsMjAwXSx7NzI6eXQsNzM6eXQsNzQ6eXQsNzU6eXQsNzc6eXQsODA6eXQsOTA6eXQsOTE6eXR9KSx7Njg6OTUsNzI6dHQsNzM6bnQsNzQ6aXQsNzU6cnQsNzY6MTAxLDc3OnN0LDgwOm90LDg3Ojk0LDkwOmF0LDkxOmN0fSx7Njg6MTA1LDcyOnR0LDczOm50LDc0Oml0LDc1OnJ0LDc2OjEwMSw3NzpzdCw4MDpvdCw4NzoxMDQsOTA6YXQsOTE6Y3R9LHQoJHQsaHQpLHQoZXQsWzIsMjAxXSx7NzI6eXQsNzM6eXQsNzQ6eXQsNzU6eXQsNzc6eXQsODA6eXQsOTA6eXQsOTE6eXR9KSx0KGV0LFsyLDIwMl0pLHQoZXQsWzIsMjAzXSksezY6WzEsMjI1XSw3OjIyMyw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNTpbMSwyMjRdLDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjQ6NDcsNjU6NDgsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTAyOkYsMTA2Ok4sMTA3OkwsMTA5OjM5LDExMDp4LDExMjpTLDExMzo0MCwxMTQ6RCwxMTU6NDEsMTE2OlIsMTE4OjY5LDEyNTpBLDEzMDozNywxMzE6SSwxMzM6XywxMzQ6TywxMzU6JCwxMzY6aiwxMzc6TSwxMzk6QiwxNDA6Vn0sezc6MjI2LDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjQ6NDcsNjU6NDgsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTAyOkYsMTA2Ok4sMTA3OkwsMTA5OjM5LDExMDp4LDExMjpTLDExMzo0MCwxMTQ6RCwxMTU6NDEsMTE2OlIsMTE4OjY5LDEyNTpBLDEzMDozNywxMzE6SSwxMzM6XywxMzQ6TywxMzU6JCwxMzY6aiwxMzc6TSwxMzk6QiwxNDA6Vn0sezI0OjIyNywyNTpndCwxMzE6WzEsMjI4XX0sdChldCxbMiwxMzhdLHsxMDM6MjI5LDEwNDpbMSwyMzBdLDEwNTpbMSwyMzFdfSksdChldCxbMiwxNTJdKSx0KGV0LFsyLDE2MF0pLHsyNTpbMSwyMzJdLDEwOTo4OSwxMTA6eCwxMTI6UywxMTU6OTAsMTE2OlIsMTE4OjY5LDEzMjpHLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSx7MTI2OjIzMywxMjg6MjM0LDEyOTpqdH0sdChldCxbMiwxMDFdKSx7NzoyMzYsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KGJ0LFsyLDEwNF0sezI0OjIzNywyNTpndCw3Mjp5dCw3Mzp5dCw3NDp5dCw3NTp5dCw3Nzp5dCw4MDp5dCw5MDp5dCw5MTp5dCw4NjpbMSwyMzhdfSksdChPdCxbMiwxNDVdLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHQoT3QsWzIsNDldLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHs2OlAsMTA4OlsxLDIzOV19LHs0OjI0MCw1OjMsNzo0LDg6NSw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoWzYsMjUsNjAsOTddLE10LHsxMTg6NjksMTA5Ojg5LDExNTo5MCw5ODoyNDEsNjM6WzEsMjQyXSw5OTp4dCwxMTA6eCwxMTI6UywxMTY6UiwxMzI6RywxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHQoQnQsWzIsMTE5XSksdChbNiwyNSw5N10sRHQsezU5OjI0Myw2MDpWdH0pLHQoUHQsWzIsMTI4XSksezc6MjE0LDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI1Omt0LDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjM6d3QsNjQ6NDcsNjU6NDgsNjY6MTU2LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDkzOjI0NSw5NDpULDk1OkMsOTY6RSwxMDA6MTU0LDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoUHQsWzIsMTM0XSksdChQdCxbMiwxMzVdKSx0KE50LFsyLDExOF0pLHsyNDoyNDYsMjU6Z3QsMTA5Ojg5LDExMDp4LDExMjpTLDExNTo5MCwxMTY6UiwxMTg6NjksMTMyOkcsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9LHQoVXQsWzIsMTQ4XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTEwOngsMTExOlsxLDI0N10sMTEyOlMsMTE2OlIsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx0KFV0LFsyLDE1MF0sezExODo2OSwxMDk6ODksMTE1OjkwLDExMDp4LDExMTpbMSwyNDhdLDExMjpTLDExNjpSLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSksdChldCxbMiwxNTZdKSx0KEd0LFsyLDE1N10sezExODo2OSwxMDk6ODksMTE1OjkwLDExMDp4LDExMjpTLDExNjpSLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSksdChbMSw2LDI1LDI2LDM0LDU1LDYwLDYzLDc5LDg0LDkyLDk3LDk5LDEwOCwxMTAsMTExLDExMiwxMTYsMTMyLDEzNSwxMzYsMTQxLDE0MiwxNDMsMTQ0LDE0NSwxNDYsMTQ3XSxbMiwxNjFdLHsxMTc6WzEsMjQ5XX0pLHQoSHQsWzIsMTY0XSksezI3OjE2OCwyODppLDUwOjE2OSw2NDoxNzAsNjU6MTcxLDgyOmIsOTU6ZnQsOTY6bXQsMTIwOjI1MCwxMjI6MTY3fSx0KEh0LFsyLDE3MF0sezYwOlsxLDI1MV19KSx0KHF0LFsyLDE2Nl0pLHQocXQsWzIsMTY3XSksdChxdCxbMiwxNjhdKSx0KHF0LFsyLDE2OV0pLHQoZXQsWzIsMTYzXSksezc6MjUyLDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjQ6NDcsNjU6NDgsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTAyOkYsMTA2Ok4sMTA3OkwsMTA5OjM5LDExMDp4LDExMjpTLDExMzo0MCwxMTQ6RCwxMTU6NDEsMTE2OlIsMTE4OjY5LDEyNTpBLDEzMDozNywxMzE6SSwxMzM6XywxMzQ6TywxMzU6JCwxMzY6aiwxMzc6TSwxMzk6QiwxNDA6Vn0sezc6MjUzLDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjQ6NDcsNjU6NDgsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTAyOkYsMTA2Ok4sMTA3OkwsMTA5OjM5LDExMDp4LDExMjpTLDExMzo0MCwxMTQ6RCwxMTU6NDEsMTE2OlIsMTE4OjY5LDEyNTpBLDEzMDozNywxMzE6SSwxMzM6XywxMzQ6TywxMzU6JCwxMzY6aiwxMzc6TSwxMzk6QiwxNDA6Vn0sdChbNiwyNSw4NF0sRHQsezU5OjI1NCw2MDpYdH0pLHQoV3QsWzIsOTZdKSx0KFd0LFsyLDQyXSx7NDk6WzEsMjU2XX0pLHQoV3QsWzIsNDVdKSx0KFl0LFsyLDQ2XSksdChZdCxbMiw0N10pLHQoWXQsWzIsNDhdKSx7Mzg6WzEsMjU3XSw2ODoxMDUsNzI6dHQsNzM6bnQsNzQ6aXQsNzU6cnQsNzY6MTAxLDc3OnN0LDgwOm90LDg3OjEwNCw5MDphdCw5MTpjdH0sdCgkdCx5dCksezY6UCwzNDpbMSwyNThdfSx0KFUsWzIsNF0pLHQoS3QsWzIsMjA1XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTQxOlgsMTQyOlcsMTQzOll9KSx0KEt0LFsyLDIwNl0sezExODo2OSwxMDk6ODksMTE1OjkwLDE0MTpYLDE0MjpXLDE0MzpZfSksdChfdCxbMiwyMDddLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxNDE6WCwxNDM6WX0pLHQoX3QsWzIsMjA4XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTQxOlgsMTQzOll9KSx0KFsxLDYsMjUsMjYsMzQsNTUsNjAsNjMsNzksODQsOTIsOTcsOTksMTA4LDExMCwxMTEsMTEyLDExNiwxMTcsMTMyLDE0NCwxNDUsMTQ2LDE0N10sWzIsMjA5XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOll9KSx0KFsxLDYsMjUsMjYsMzQsNTUsNjAsNjMsNzksODQsOTIsOTcsOTksMTA4LDExMCwxMTEsMTEyLDExNiwxMTcsMTMyLDE0NSwxNDZdLFsyLDIxMF0sezExODo2OSwxMDk6ODksMTE1OjkwLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NzpRfSksdChbMSw2LDI1LDI2LDM0LDU1LDYwLDYzLDc5LDg0LDkyLDk3LDk5LDEwOCwxMTAsMTExLDExMiwxMTYsMTE3LDEzMiwxNDZdLFsyLDIxMV0sezExODo2OSwxMDk6ODksMTE1OjkwLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NzpRfSksdChbMSw2LDI1LDI2LDM0LDU1LDYwLDYzLDc5LDg0LDkyLDk3LDk5LDEwOCwxMTAsMTExLDExMiwxMTYsMTE3LDEzMiwxNDUsMTQ2LDE0N10sWzIsMjEyXSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0Okt9KSx0KEd0LFsyLDE5Ml0sezExODo2OSwxMDk6ODksMTE1OjkwLDExMDp4LDExMjpTLDExNjpSLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSksdChHdCxbMiwxOTFdLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMTA6eCwxMTI6UywxMTY6UiwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHQoU3QsWzIsMTA4XSksdChDdCxbMiw4NF0pLHQoQ3QsWzIsODVdKSx0KEN0LFsyLDg2XSksdChDdCxbMiw4N10pLHs3OTpbMSwyNTldfSx7NjM6THQsNzk6WzIsOTJdLDk4OjI2MCw5OTp4dCwxMDk6ODksMTEwOngsMTEyOlMsMTE1OjkwLDExNjpSLDExODo2OSwxMzI6RywxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0sezc5OlsyLDkzXX0sezc6MjYxLDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjQ6NDcsNjU6NDgsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsNzk6WzIsMTI3XSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KHp0LFsyLDEyMV0pLHQoenQsSnQpLHQoQ3QsWzIsOTFdKSx0KFN0LFsyLDEwOV0pLHQoT3QsWzIsMzldLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHs3OjI2Miw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OjI2Myw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoU3QsWzIsMTE0XSksdChbNiwyNSw5Ml0sRHQsezU5OjI2NCw2MDpWdH0pLHQoUHQsTXQsezExODo2OSwxMDk6ODksMTE1OjkwLDYzOlsxLDI2NV0sMTEwOngsMTEyOlMsMTE2OlIsMTMyOkcsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx7NTY6MjY2LDU3OnYsNTg6eX0sdChRdCxadCx7NjI6MTExLDI3OjExMyw1MDoxMTQsNjQ6MTE1LDY1OjExNiw2MToyNjcsMjg6aSw2MzpkdCw4MjpiLDk1OmZ0LDk2Om10fSksezY6ZW4sMjU6dG59LHQoQXQsWzIsNjRdKSx7NzoyNzAsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KG5uLFsyLDIzXSksezY6UCwyNjpbMSwyNzFdfSx0KE90LFsyLDE5OV0sezExODo2OSwxMDk6ODksMTE1OjkwLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSksdChPdCxbMiwyMTNdLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHs3OjI3Miw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OjI3Myw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoT3QsWzIsMjE2XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx0KGV0LFsyLDE5MF0pLHs3OjI3NCw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoZXQsWzIsMTM5XSx7MTA0OlsxLDI3NV19KSx7MjQ6Mjc2LDI1Omd0fSx7MjQ6Mjc5LDI1Omd0LDI3OjI3NywyODppLDY1OjI3OCw4MjpifSx7MTI2OjI4MCwxMjg6MjM0LDEyOTpqdH0sezI2OlsxLDI4MV0sMTI3OlsxLDI4Ml0sMTI4OjI4MywxMjk6anR9LHQocm4sWzIsMTgzXSksezc6Mjg1LDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjQ6NDcsNjU6NDgsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTAxOjI4NCwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KHNuLFsyLDEwMl0sezExODo2OSwxMDk6ODksMTE1OjkwLDI0OjI4NiwyNTpndCwxMTA6eCwxMTI6UywxMTY6UiwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHQoZXQsWzIsMTA1XSksezc6Mjg3LDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI3OjYyLDI4OmksMjk6NDksMzA6ciwzMTo3MiwzMjpzLDMzOm8sMzU6NTEsMzY6YSwzNzpjLDM5OjIyLDQwOmwsNDE6aCw0Mjp1LDQzOnAsNDQ6ZCw0NToyMSw1MDo2Myw1MTpmLDUyOm0sNTM6Zyw1NjoyOCw1Nzp2LDU4OnksNjQ6NDcsNjU6NDgsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTAyOkYsMTA2Ok4sMTA3OkwsMTA5OjM5LDExMDp4LDExMjpTLDExMzo0MCwxMTQ6RCwxMTU6NDEsMTE2OlIsMTE4OjY5LDEyNTpBLDEzMDozNywxMzE6SSwxMzM6XywxMzQ6TywxMzU6JCwxMzY6aiwxMzc6TSwxMzk6QiwxNDA6Vn0sdChsdCxbMiwxNDZdKSx7NjpQLDI2OlsxLDI4OF19LHs3OjI4OSw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoWzExLDI4LDMwLDMyLDMzLDM2LDM3LDQwLDQxLDQyLDQzLDQ0LDUxLDUyLDUzLDU3LDU4LDgyLDg1LDg5LDk0LDk1LDk2LDEwMiwxMDYsMTA3LDExMCwxMTIsMTE0LDExNiwxMjUsMTMxLDEzMywxMzQsMTM1LDEzNiwxMzcsMTM5LDE0MF0sSnQsezY6b24sMjU6b24sNjA6b24sOTc6b259KSx7NjphbiwyNTpjbiw5NzpbMSwyOTBdfSx0KFs2LDI1LDI2LDkyLDk3XSxadCx7MTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNyw5OjE4LDEwOjE5LDQ1OjIxLDM5OjIyLDY5OjIzLDcwOjI0LDcxOjI1LDU2OjI4LDY3OjM2LDEzMDozNywxMDk6MzksMTEzOjQwLDExNTo0MSw2NDo0Nyw2NTo0OCwyOTo0OSwzNTo1MSwyNzo2Miw1MDo2MywxMTg6NjksMzE6NzIsODoxMjIsNjY6MTU2LDc6MjE0LDEwMDoyOTMsMTE6biwyODppLDMwOnIsMzI6cywzMzpvLDM2OmEsMzc6Yyw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNTE6Ziw1MjptLDUzOmcsNTc6diw1ODp5LDYzOnd0LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDExMDp4LDExMjpTLDExNDpELDExNjpSLDEyNTpBLDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSksdChRdCxEdCx7NTk6Mjk0LDYwOlZ0fSksdChsbixbMiwxODddKSx7NzoyOTUsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoyOTYsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoyOTcsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KEh0LFsyLDE2NV0pLHsyNzoxNjgsMjg6aSw1MDoxNjksNjQ6MTcwLDY1OjE3MSw4MjpiLDk1OmZ0LDk2Om10LDEyMjoyOTh9LHQoWzEsNiwyNSwyNiwzNCw1NSw2MCw2Myw3OSw4NCw5Miw5Nyw5OSwxMDgsMTEwLDExMiwxMTYsMTMyXSxbMiwxNzJdLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMTE6WzEsMjk5XSwxMTc6WzEsMzAwXSwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHQoaG4sWzIsMTczXSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTExOlsxLDMwMV0sMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx7Njp1biwyNTpwbiw4NDpbMSwzMDJdfSx0KFs2LDI1LDI2LDg0XSxadCx7MzE6NzIsNDg6MTc3LDEwOjE3OCwyNzoxNzksMjk6MTgwLDUwOjE4MSw0NzozMDUsMjg6aSwzMDpyLDMyOnMsMzM6byw1MjptLDk1OmZ0fSksezc6MzA2LDg6MTIyLDk6MTgsMTA6MTksMTE6biwxMjo2LDEzOjcsMTQ6OCwxNTo5LDE2OjEwLDE3OjExLDE4OjEyLDE5OjEzLDIwOjE0LDIxOjE1LDIyOjE2LDIzOjE3LDI1OlsxLDMwN10sMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw4MjpiLDg1OmssODk6dyw5NDpULDk1OkMsOTY6RSwxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx0KGx0LFsyLDMxXSksdChGdCxbMiwyOV0pLHQoQ3QsWzIsOTBdKSx7NzozMDgsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2NDo0Nyw2NTo0OCw2NzozNiw2OToyMyw3MDoyNCw3MToyNSw3OTpbMiwxMjVdLDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OTpbMiwxMjZdLDEwOTo4OSwxMTA6eCwxMTI6UywxMTU6OTAsMTE2OlIsMTE4OjY5LDEzMjpHLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSx0KE90LFsyLDQwXSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx7MjY6WzEsMzA5XSwxMDk6ODksMTEwOngsMTEyOlMsMTE1OjkwLDExNjpSLDExODo2OSwxMzI6RywxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0sezY6YW4sMjU6Y24sOTI6WzEsMzEwXX0sdChQdCxvbiksezI0OjMxMSwyNTpndH0sdChBdCxbMiw2MF0pLHsyNzoxMTMsMjg6aSw1MDoxMTQsNjE6MzEyLDYyOjExMSw2MzpkdCw2NDoxMTUsNjU6MTE2LDgyOmIsOTU6ZnQsOTY6bXR9LHQoZG4scHQsezYxOjExMCw2MjoxMTEsMjc6MTEzLDUwOjExNCw2NDoxMTUsNjU6MTE2LDU0OjMxMywyODppLDYzOmR0LDgyOmIsOTU6ZnQsOTY6bXR9KSx0KEF0LFsyLDY1XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTEwOngsMTEyOlMsMTE2OlIsMTMyOkcsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx0KG5uLFsyLDI0XSksezI2OlsxLDMxNF0sMTA5Ojg5LDExMDp4LDExMjpTLDExNTo5MCwxMTY6UiwxMTg6NjksMTMyOkcsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9LHQoT3QsWzIsMjE1XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx7MjQ6MzE1LDI1Omd0LDEwOTo4OSwxMTA6eCwxMTI6UywxMTU6OTAsMTE2OlIsMTE4OjY5LDEzMjpHLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSx7MjQ6MzE2LDI1Omd0fSx0KGV0LFsyLDE0MF0pLHsyNDozMTcsMjU6Z3R9LHsyNDozMTgsMjU6Z3R9LHQoZm4sWzIsMTQ0XSksezI2OlsxLDMxOV0sMTI3OlsxLDMyMF0sMTI4OjI4MywxMjk6anR9LHQoZXQsWzIsMTgxXSksezI0OjMyMSwyNTpndH0sdChybixbMiwxODRdKSx7MjQ6MzIyLDI1Omd0LDYwOlsxLDMyM119LHQobW4sWzIsMTM2XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTEwOngsMTEyOlMsMTE2OlIsMTMyOkcsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx0KGV0LFsyLDEwM10pLHQoc24sWzIsMTA2XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMjQ6MzI0LDI1Omd0LDExMDp4LDExMjpTLDExNjpSLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSksezEwODpbMSwzMjVdfSx7OTc6WzEsMzI2XSwxMDk6ODksMTEwOngsMTEyOlMsMTE1OjkwLDExNjpSLDExODo2OSwxMzI6RywxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0sdChCdCxbMiwxMjBdKSx7NzoyMTQsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2Mzp3dCw2NDo0Nyw2NTo0OCw2NjoxNTYsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTQ6VCw5NTpDLDk2OkUsMTAwOjMyNywxMDI6RiwxMDY6TiwxMDc6TCwxMDk6MzksMTEwOngsMTEyOlMsMTEzOjQwLDExNDpELDExNTo0MSwxMTY6UiwxMTg6NjksMTI1OkEsMTMwOjM3LDEzMTpJLDEzMzpfLDEzNDpPLDEzNTokLDEzNjpqLDEzNzpNLDEzOTpCLDE0MDpWfSx7NzoyMTQsODoxMjIsOToxOCwxMDoxOSwxMTpuLDEyOjYsMTM6NywxNDo4LDE1OjksMTY6MTAsMTc6MTEsMTg6MTIsMTk6MTMsMjA6MTQsMjE6MTUsMjI6MTYsMjM6MTcsMjU6a3QsMjc6NjIsMjg6aSwyOTo0OSwzMDpyLDMxOjcyLDMyOnMsMzM6bywzNTo1MSwzNjphLDM3OmMsMzk6MjIsNDA6bCw0MTpoLDQyOnUsNDM6cCw0NDpkLDQ1OjIxLDUwOjYzLDUxOmYsNTI6bSw1MzpnLDU2OjI4LDU3OnYsNTg6eSw2Mzp3dCw2NDo0Nyw2NTo0OCw2NjoxNTYsNjc6MzYsNjk6MjMsNzA6MjQsNzE6MjUsODI6Yiw4NTprLDg5OncsOTM6MzI4LDk0OlQsOTU6Qyw5NjpFLDEwMDoxNTQsMTAyOkYsMTA2Ok4sMTA3OkwsMTA5OjM5LDExMDp4LDExMjpTLDExMzo0MCwxMTQ6RCwxMTU6NDEsMTE2OlIsMTE4OjY5LDEyNTpBLDEzMDozNywxMzE6SSwxMzM6XywxMzQ6TywxMzU6JCwxMzY6aiwxMzc6TSwxMzk6QiwxNDA6Vn0sdChQdCxbMiwxMjldKSx7NjphbiwyNTpjbiwyNjpbMSwzMjldfSx0KEd0LFsyLDE0OV0sezExODo2OSwxMDk6ODksMTE1OjkwLDExMDp4LDExMjpTLDExNjpSLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSksdChHdCxbMiwxNTFdLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMTA6eCwxMTI6UywxMTY6UiwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHQoR3QsWzIsMTYyXSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTEwOngsMTEyOlMsMTE2OlIsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx0KEh0LFsyLDE3MV0pLHs3OjMzMCw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OjMzMSw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OjMzMiw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoQnQsWzIsOTRdKSx7MTA6MTc4LDI3OjE3OSwyODppLDI5OjE4MCwzMDpyLDMxOjcyLDMyOnMsMzM6byw0NzozMzMsNDg6MTc3LDUwOjE4MSw1MjptLDk1OmZ0fSx0KGRuLEV0LHszMTo3Miw0NzoxNzYsNDg6MTc3LDEwOjE3OCwyNzoxNzksMjk6MTgwLDUwOjE4MSw4MzozMzQsMjg6aSwzMDpyLDMyOnMsMzM6byw1MjptLDk1OmZ0fSksdChXdCxbMiw5N10pLHQoV3QsWzIsNDNdLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMTA6eCwxMTI6UywxMTY6UiwxMzI6RywxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHs3OjMzNSw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OTpbMiwxMjRdLDEwOTo4OSwxMTA6eCwxMTI6UywxMTU6OTAsMTE2OlIsMTE4OjY5LDEzMjpHLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSx0KGV0LFsyLDQxXSksdChTdCxbMiwxMTVdKSx0KGV0LFsyLDUyXSksdChBdCxbMiw2MV0pLHQoUXQsRHQsezU5OjMzNiw2MDpSdH0pLHQoZXQsWzIsMjE0XSksdChsbixbMiwxODhdKSx0KGV0LFsyLDE0MV0pLHQoZm4sWzIsMTQyXSksdChmbixbMiwxNDNdKSx0KGV0LFsyLDE3OV0pLHsyNDozMzcsMjU6Z3R9LHsyNjpbMSwzMzhdfSx0KHJuLFsyLDE4NV0sezY6WzEsMzM5XX0pLHs3OjM0MCw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHQoZXQsWzIsMTA3XSksdChsdCxbMiwxNDddKSx0KGx0LFsyLDEyM10pLHQoUHQsWzIsMTMwXSksdChRdCxEdCx7NTk6MzQxLDYwOlZ0fSksdChQdCxbMiwxMzFdKSx0KFsxLDYsMjUsMjYsMzQsNTUsNjAsNjMsNzksODQsOTIsOTcsOTksMTA4LDExMCwxMTEsMTEyLDExNiwxMzJdLFsyLDE3NF0sezExODo2OSwxMDk6ODksMTE1OjkwLDExNzpbMSwzNDJdLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSksdChobixbMiwxNzZdLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMTE6WzEsMzQzXSwxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHQoT3QsWzIsMTc1XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx0KFd0LFsyLDk4XSksdChRdCxEdCx7NTk6MzQ0LDYwOlh0fSksezI2OlsxLDM0NV0sMTA5Ojg5LDExMDp4LDExMjpTLDExNTo5MCwxMTY6UiwxMTg6NjksMTMyOkcsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9LHs2OmVuLDI1OnRuLDI2OlsxLDM0Nl19LHsyNjpbMSwzNDddfSx0KGV0LFsyLDE4Ml0pLHQocm4sWzIsMTg2XSksdChtbixbMiwxMzddLHsxMTg6NjksMTA5Ojg5LDExNTo5MCwxMTA6eCwxMTI6UywxMTY6UiwxMzI6RywxMzU6SCwxMzY6cSwxNDE6WCwxNDI6VywxNDM6WSwxNDQ6SywxNDU6eiwxNDY6SiwxNDc6UX0pLHs2OmFuLDI1OmNuLDI2OlsxLDM0OF19LHs3OjM0OSw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs3OjM1MCw4OjEyMiw5OjE4LDEwOjE5LDExOm4sMTI6NiwxMzo3LDE0OjgsMTU6OSwxNjoxMCwxNzoxMSwxODoxMiwxOToxMywyMDoxNCwyMToxNSwyMjoxNiwyMzoxNywyNzo2MiwyODppLDI5OjQ5LDMwOnIsMzE6NzIsMzI6cywzMzpvLDM1OjUxLDM2OmEsMzc6YywzOToyMiw0MDpsLDQxOmgsNDI6dSw0MzpwLDQ0OmQsNDU6MjEsNTA6NjMsNTE6Ziw1MjptLDUzOmcsNTY6MjgsNTc6diw1ODp5LDY0OjQ3LDY1OjQ4LDY3OjM2LDY5OjIzLDcwOjI0LDcxOjI1LDgyOmIsODU6ayw4OTp3LDk0OlQsOTU6Qyw5NjpFLDEwMjpGLDEwNjpOLDEwNzpMLDEwOTozOSwxMTA6eCwxMTI6UywxMTM6NDAsMTE0OkQsMTE1OjQxLDExNjpSLDExODo2OSwxMjU6QSwxMzA6MzcsMTMxOkksMTMzOl8sMTM0Ok8sMTM1OiQsMTM2OmosMTM3Ok0sMTM5OkIsMTQwOlZ9LHs2OnVuLDI1OnBuLDI2OlsxLDM1MV19LHQoV3QsWzIsNDRdKSx0KEF0LFsyLDYyXSksdChldCxbMiwxODBdKSx0KFB0LFsyLDEzMl0pLHQoT3QsWzIsMTc3XSx7MTE4OjY5LDEwOTo4OSwxMTU6OTAsMTM1OkgsMTM2OnEsMTQxOlgsMTQyOlcsMTQzOlksMTQ0OkssMTQ1OnosMTQ2OkosMTQ3OlF9KSx0KE90LFsyLDE3OF0sezExODo2OSwxMDk6ODksMTE1OjkwLDEzNTpILDEzNjpxLDE0MTpYLDE0MjpXLDE0MzpZLDE0NDpLLDE0NTp6LDE0NjpKLDE0NzpRfSksdChXdCxbMiw5OV0pXSxkZWZhdWx0QWN0aW9uczp7NjA6WzIsNTRdLDYxOlsyLDU1XSw5NjpbMiwxMTNdLDIwMzpbMiw5M119LHBhcnNlRXJyb3I6ZnVuY3Rpb24oZSx0KXtpZighdC5yZWNvdmVyYWJsZSl0aHJvdyBFcnJvcihlKTtcbnRoaXMudHJhY2UoZSl9LHBhcnNlOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZTtyZXR1cm4gZT1mLmxleCgpfHxwLFwibnVtYmVyXCIhPXR5cGVvZiBlJiYoZT1uLnN5bWJvbHNfW2VdfHxlKSxlfXZhciBuPXRoaXMsaT1bMF0scj1bbnVsbF0scz1bXSxvPXRoaXMudGFibGUsYT1cIlwiLGM9MCxsPTAsaD0wLHU9MixwPTEsZD1zLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGY9T2JqZWN0LmNyZWF0ZSh0aGlzLmxleGVyKSxtPXt5eTp7fX07Zm9yKHZhciBnIGluIHRoaXMueXkpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMueXksZykmJihtLnl5W2ddPXRoaXMueXlbZ10pO2Yuc2V0SW5wdXQoZSxtLnl5KSxtLnl5LmxleGVyPWYsbS55eS5wYXJzZXI9dGhpcyxmLnl5bGxvYz09PXZvaWQgMCYmKGYueXlsbG9jPXt9KTt2YXIgdj1mLnl5bGxvYztzLnB1c2godik7dmFyIHk9Zi5vcHRpb25zJiZmLm9wdGlvbnMucmFuZ2VzO3RoaXMucGFyc2VFcnJvcj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBtLnl5LnBhcnNlRXJyb3I/bS55eS5wYXJzZUVycm9yOk9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5wYXJzZUVycm9yO2Zvcih2YXIgYixrLHcsVCxDLEUsRixOLEwseD17fTs7KXtpZih3PWlbaS5sZW5ndGgtMV0sdGhpcy5kZWZhdWx0QWN0aW9uc1t3XT9UPXRoaXMuZGVmYXVsdEFjdGlvbnNbd106KChudWxsPT09Ynx8Yj09PXZvaWQgMCkmJihiPXQoKSksVD1vW3ddJiZvW3ddW2JdKSxUPT09dm9pZCAwfHwhVC5sZW5ndGh8fCFUWzBdKXt2YXIgUz1cIlwiO0w9W107Zm9yKEUgaW4gb1t3XSl0aGlzLnRlcm1pbmFsc19bRV0mJkU+dSYmTC5wdXNoKFwiJ1wiK3RoaXMudGVybWluYWxzX1tFXStcIidcIik7Uz1mLnNob3dQb3NpdGlvbj9cIlBhcnNlIGVycm9yIG9uIGxpbmUgXCIrKGMrMSkrXCI6XFxuXCIrZi5zaG93UG9zaXRpb24oKStcIlxcbkV4cGVjdGluZyBcIitMLmpvaW4oXCIsIFwiKStcIiwgZ290ICdcIisodGhpcy50ZXJtaW5hbHNfW2JdfHxiKStcIidcIjpcIlBhcnNlIGVycm9yIG9uIGxpbmUgXCIrKGMrMSkrXCI6IFVuZXhwZWN0ZWQgXCIrKGI9PXA/XCJlbmQgb2YgaW5wdXRcIjpcIidcIisodGhpcy50ZXJtaW5hbHNfW2JdfHxiKStcIidcIiksdGhpcy5wYXJzZUVycm9yKFMse3RleHQ6Zi5tYXRjaCx0b2tlbjp0aGlzLnRlcm1pbmFsc19bYl18fGIsbGluZTpmLnl5bGluZW5vLGxvYzp2LGV4cGVjdGVkOkx9KX1pZihUWzBdaW5zdGFuY2VvZiBBcnJheSYmVC5sZW5ndGg+MSl0aHJvdyBFcnJvcihcIlBhcnNlIEVycm9yOiBtdWx0aXBsZSBhY3Rpb25zIHBvc3NpYmxlIGF0IHN0YXRlOiBcIit3K1wiLCB0b2tlbjogXCIrYik7c3dpdGNoKFRbMF0pe2Nhc2UgMTppLnB1c2goYiksci5wdXNoKGYueXl0ZXh0KSxzLnB1c2goZi55eWxsb2MpLGkucHVzaChUWzFdKSxiPW51bGwsaz8oYj1rLGs9bnVsbCk6KGw9Zi55eWxlbmcsYT1mLnl5dGV4dCxjPWYueXlsaW5lbm8sdj1mLnl5bGxvYyxoPjAmJmgtLSk7YnJlYWs7Y2FzZSAyOmlmKEY9dGhpcy5wcm9kdWN0aW9uc19bVFsxXV1bMV0seC4kPXJbci5sZW5ndGgtRl0seC5fJD17Zmlyc3RfbGluZTpzW3MubGVuZ3RoLShGfHwxKV0uZmlyc3RfbGluZSxsYXN0X2xpbmU6c1tzLmxlbmd0aC0xXS5sYXN0X2xpbmUsZmlyc3RfY29sdW1uOnNbcy5sZW5ndGgtKEZ8fDEpXS5maXJzdF9jb2x1bW4sbGFzdF9jb2x1bW46c1tzLmxlbmd0aC0xXS5sYXN0X2NvbHVtbn0seSYmKHguXyQucmFuZ2U9W3Nbcy5sZW5ndGgtKEZ8fDEpXS5yYW5nZVswXSxzW3MubGVuZ3RoLTFdLnJhbmdlWzFdXSksQz10aGlzLnBlcmZvcm1BY3Rpb24uYXBwbHkoeCxbYSxsLGMsbS55eSxUWzFdLHIsc10uY29uY2F0KGQpKSxDIT09dm9pZCAwKXJldHVybiBDO0YmJihpPWkuc2xpY2UoMCwyKi0xKkYpLHI9ci5zbGljZSgwLC0xKkYpLHM9cy5zbGljZSgwLC0xKkYpKSxpLnB1c2godGhpcy5wcm9kdWN0aW9uc19bVFsxXV1bMF0pLHIucHVzaCh4LiQpLHMucHVzaCh4Ll8kKSxOPW9baVtpLmxlbmd0aC0yXV1baVtpLmxlbmd0aC0xXV0saS5wdXNoKE4pO2JyZWFrO2Nhc2UgMzpyZXR1cm4hMH19cmV0dXJuITB9fTtyZXR1cm4gZS5wcm90b3R5cGU9Z24sZ24uUGFyc2VyPWUsbmV3IGV9KCk7cmV0dXJuIHJlcXVpcmUhPT12b2lkIDAmJmUhPT12b2lkIDAmJihlLnBhcnNlcj1uLGUuUGFyc2VyPW4uUGFyc2VyLGUucGFyc2U9ZnVuY3Rpb24oKXtyZXR1cm4gbi5wYXJzZS5hcHBseShuLGFyZ3VtZW50cyl9LGUubWFpbj1mdW5jdGlvbih0KXt0WzFdfHwoY29uc29sZS5sb2coXCJVc2FnZTogXCIrdFswXStcIiBGSUxFXCIpLHByb2Nlc3MuZXhpdCgxKSk7dmFyIG49cmVxdWlyZShcImZzXCIpLnJlYWRGaWxlU3luYyhyZXF1aXJlKFwicGF0aFwiKS5ub3JtYWxpemUodFsxXSksXCJ1dGY4XCIpO3JldHVybiBlLnBhcnNlci5wYXJzZShuKX0sdCE9PXZvaWQgMCYmcmVxdWlyZS5tYWluPT09dCYmZS5tYWluKHByb2Nlc3MuYXJndi5zbGljZSgxKSkpLHQuZXhwb3J0c30oKSxyZXF1aXJlW1wiLi9zY29wZVwiXT1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9e2V4cG9ydHM6ZX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQsbj1bXS5pbmRleE9mfHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPXRoaXMubGVuZ3RoO24+dDt0KyspaWYodCBpbiB0aGlzJiZ0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX07ZS5TY29wZT10PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbixpKXt2YXIgcixzO3RoaXMucGFyZW50PWUsdGhpcy5leHByZXNzaW9ucz10LHRoaXMubWV0aG9kPW4sdGhpcy5yZWZlcmVuY2VkVmFycz1pLHRoaXMudmFyaWFibGVzPVt7bmFtZTpcImFyZ3VtZW50c1wiLHR5cGU6XCJhcmd1bWVudHNcIn1dLHRoaXMucG9zaXRpb25zPXt9LHRoaXMucGFyZW50fHwodGhpcy51dGlsaXRpZXM9e30pLHRoaXMucm9vdD1udWxsIT0ocj1udWxsIT0ocz10aGlzLnBhcmVudCk/cy5yb290OnZvaWQgMCk/cjp0aGlzfXJldHVybiBlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLnNoYXJlZCYmIW4/dGhpcy5wYXJlbnQuYWRkKGUsdCxuKTpPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5wb3NpdGlvbnMsZSk/dGhpcy52YXJpYWJsZXNbdGhpcy5wb3NpdGlvbnNbZV1dLnR5cGU9dDp0aGlzLnBvc2l0aW9uc1tlXT10aGlzLnZhcmlhYmxlcy5wdXNoKHtuYW1lOmUsdHlwZTp0fSktMX0sZS5wcm90b3R5cGUubmFtZWRNZXRob2Q9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4obnVsbCE9KGU9dGhpcy5tZXRob2QpP2UubmFtZTp2b2lkIDApfHwhdGhpcy5wYXJlbnQ/dGhpcy5tZXRob2Q6dGhpcy5wYXJlbnQubmFtZWRNZXRob2QoKX0sZS5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jaGVjayhlKT8hMDoodGhpcy5hZGQoZSxcInZhclwiKSwhMSl9LGUucHJvdG90eXBlLnBhcmFtZXRlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaGFyZWQmJnRoaXMucGFyZW50LmNoZWNrKGUsITApP3ZvaWQgMDp0aGlzLmFkZChlLFwicGFyYW1cIil9LGUucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiEhKHRoaXMudHlwZShlKXx8KG51bGwhPSh0PXRoaXMucGFyZW50KT90LmNoZWNrKGUpOnZvaWQgMCkpfSxlLnByb3RvdHlwZS50ZW1wb3Jhcnk9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT1uJiYobj0hMSksbj8odCtwYXJzZUludChlLDM2KSkudG9TdHJpbmcoMzYpLnJlcGxhY2UoL1xcZC9nLFwiYVwiKTplKyh0fHxcIlwiKX0sZS5wcm90b3R5cGUudHlwZT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscjtmb3IoaT10aGlzLnZhcmlhYmxlcyx0PTAsbj1pLmxlbmd0aDtuPnQ7dCsrKWlmKHI9aVt0XSxyLm5hbWU9PT1lKXJldHVybiByLnR5cGU7cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLmZyZWVWYXJpYWJsZT1mdW5jdGlvbihlLHQpe3ZhciBpLHIscztmb3IobnVsbD09dCYmKHQ9e30pLGk9MDs7KXtpZihzPXRoaXMudGVtcG9yYXJ5KGUsaSx0LnNpbmdsZSksISh0aGlzLmNoZWNrKHMpfHxuLmNhbGwodGhpcy5yb290LnJlZmVyZW5jZWRWYXJzLHMpPj0wKSlicmVhaztpKyt9cmV0dXJuKG51bGwhPShyPXQucmVzZXJ2ZSk/cjohMCkmJnRoaXMuYWRkKHMsXCJ2YXJcIiwhMCksc30sZS5wcm90b3R5cGUuYXNzaWduPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuYWRkKGUse3ZhbHVlOnQsYXNzaWduZWQ6ITB9LCEwKSx0aGlzLmhhc0Fzc2lnbm1lbnRzPSEwfSxlLnByb3RvdHlwZS5oYXNEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuZGVjbGFyZWRWYXJpYWJsZXMoKS5sZW5ndGh9LGUucHJvdG90eXBlLmRlY2xhcmVkVmFyaWFibGVzPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQsbixpLHI7Zm9yKGk9dGhpcy52YXJpYWJsZXMscj1bXSx0PTAsbj1pLmxlbmd0aDtuPnQ7dCsrKWU9aVt0XSxcInZhclwiPT09ZS50eXBlJiZyLnB1c2goZS5uYW1lKTtyZXR1cm4gcn0uY2FsbCh0aGlzKS5zb3J0KCl9LGUucHJvdG90eXBlLmFzc2lnbmVkVmFyaWFibGVzPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscjtmb3Iobj10aGlzLnZhcmlhYmxlcyxpPVtdLGU9MCx0PW4ubGVuZ3RoO3Q+ZTtlKyspcj1uW2VdLHIudHlwZS5hc3NpZ25lZCYmaS5wdXNoKHIubmFtZStcIiA9IFwiK3IudHlwZS52YWx1ZSk7cmV0dXJuIGl9LGV9KCl9LmNhbGwodGhpcyksdC5leHBvcnRzfSgpLHJlcXVpcmVbXCIuL25vZGVzXCJdPWZ1bmN0aW9uKCl7dmFyIGU9e30sdD17ZXhwb3J0czplfTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSxjLGwsaCx1LHAsZCxmLG0sZyx2LHksYixrLHcsVCxDLEUsRixOLEwseCxTLEQsUixBLEksXyxPLCQsaixNLEIsVixQLFUsRyxILHEsWCxXLFksSyx6LEosUSxaLGV0LHR0LG50LGl0LHJ0LHN0LG90LGF0LGN0LGx0LGh0LHV0LHB0LGR0LGZ0LG10LGd0LHZ0LHl0LGJ0LGt0PWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIGkgaW4gdCl3dC5jYWxsKHQsaSkmJihlW2ldPXRbaV0pO3JldHVybiBuLnByb3RvdHlwZT10LnByb3RvdHlwZSxlLnByb3RvdHlwZT1uZXcgbixlLl9fc3VwZXJfXz10LnByb3RvdHlwZSxlfSx3dD17fS5oYXNPd25Qcm9wZXJ0eSxUdD1bXS5pbmRleE9mfHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPXRoaXMubGVuZ3RoO24+dDt0KyspaWYodCBpbiB0aGlzJiZ0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sQ3Q9W10uc2xpY2U7RXJyb3Iuc3RhY2tUcmFjZUxpbWl0PTEvMCxQPXJlcXVpcmUoXCIuL3Njb3BlXCIpLlNjb3BlLGR0PXJlcXVpcmUoXCIuL2xleGVyXCIpLCQ9ZHQuUkVTRVJWRUQsVj1kdC5TVFJJQ1RfUFJPU0NSSUJFRCxmdD1yZXF1aXJlKFwiLi9oZWxwZXJzXCIpLGV0PWZ0LmNvbXBhY3QscnQ9ZnQuZmxhdHRlbixpdD1mdC5leHRlbmQsaHQ9ZnQubWVyZ2UsdHQ9ZnQuZGVsLGd0PWZ0LnN0YXJ0cyxudD1mdC5lbmRzLG10PWZ0LnNvbWUsWj1mdC5hZGRMb2NhdGlvbkRhdGFGbixsdD1mdC5sb2NhdGlvbkRhdGFUb1N0cmluZyx2dD1mdC50aHJvd1N5bnRheEVycm9yLGUuZXh0ZW5kPWl0LGUuYWRkTG9jYXRpb25EYXRhRm49WixRPWZ1bmN0aW9uKCl7cmV0dXJuITB9LEQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sWD1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxTPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmVnYXRlZD0hdGhpcy5uZWdhdGVkLHRoaXN9LGUuQ29kZUZyYWdtZW50PWw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIG47dGhpcy5jb2RlPVwiXCIrdCx0aGlzLmxvY2F0aW9uRGF0YT1udWxsIT1lP2UubG9jYXRpb25EYXRhOnZvaWQgMCx0aGlzLnR5cGU9KG51bGwhPWU/bnVsbCE9KG49ZS5jb25zdHJ1Y3Rvcik/bi5uYW1lOnZvaWQgMDp2b2lkIDApfHxcInVua25vd25cIn1yZXR1cm4gZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlwiK3RoaXMuY29kZSsodGhpcy5sb2NhdGlvbkRhdGE/XCI6IFwiK2x0KHRoaXMubG9jYXRpb25EYXRhKTpcIlwiKX0sZX0oKSxzdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbixpLHI7Zm9yKHI9W10sbj0wLGk9ZS5sZW5ndGg7aT5uO24rKyl0PWVbbl0sci5wdXNoKHQuY29kZSk7cmV0dXJuIHJ9KCkuam9pbihcIlwiKX0sZS5CYXNlPXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5jb21waWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHN0KHRoaXMuY29tcGlsZVRvRnJhZ21lbnRzKGUsdCkpfSxlLnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHM9ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gZT1pdCh7fSxlKSx0JiYoZS5sZXZlbD10KSxuPXRoaXMudW5mb2xkU29hayhlKXx8dGhpcyxuLnRhYj1lLmluZGVudCxlLmxldmVsIT09TCYmbi5pc1N0YXRlbWVudChlKT9uLmNvbXBpbGVDbG9zdXJlKGUpOm4uY29tcGlsZU5vZGUoZSl9LGUucHJvdG90eXBlLmNvbXBpbGVDbG9zdXJlPWZ1bmN0aW9uKGUpe3ZhciBuLGkscixhLGwsaCx1O3JldHVybihhPXRoaXMuanVtcHMoKSkmJmEuZXJyb3IoXCJjYW5ub3QgdXNlIGEgcHVyZSBzdGF0ZW1lbnQgaW4gYW4gZXhwcmVzc2lvblwiKSxlLnNoYXJlZFNjb3BlPSEwLHI9bmV3IGMoW10scy53cmFwKFt0aGlzXSkpLG49W10sKChpPXRoaXMuY29udGFpbnMoYXQpKXx8dGhpcy5jb250YWlucyhjdCkpJiYobj1bbmV3IHgoXCJ0aGlzXCIpXSxpPyhsPVwiYXBwbHlcIixuLnB1c2gobmV3IHgoXCJhcmd1bWVudHNcIikpKTpsPVwiY2FsbFwiLHI9bmV3IHoocixbbmV3IHQobmV3IHgobCkpXSkpLGg9bmV3IG8ocixuKS5jb21waWxlTm9kZShlKSwoci5pc0dlbmVyYXRvcnx8KG51bGwhPSh1PXIuYmFzZSk/dS5pc0dlbmVyYXRvcjp2b2lkIDApKSYmKGgudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiKHlpZWxkKiBcIikpLGgucHVzaCh0aGlzLm1ha2VDb2RlKFwiKVwiKSkpLGh9LGUucHJvdG90eXBlLmNhY2hlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixzLG87cmV0dXJuIHI9bnVsbCE9bj9uKHRoaXMpOnRoaXMuaXNDb21wbGV4KCkscj8ocz1uZXcgeChlLnNjb3BlLmZyZWVWYXJpYWJsZShcInJlZlwiKSksbz1uZXcgaShzLHRoaXMpLHQ/W28uY29tcGlsZVRvRnJhZ21lbnRzKGUsdCksW3RoaXMubWFrZUNvZGUocy52YWx1ZSldXTpbbyxzXSk6KHM9dD90aGlzLmNvbXBpbGVUb0ZyYWdtZW50cyhlLHQpOnRoaXMsW3Msc10pfSxlLnByb3RvdHlwZS5jYWNoZVRvQ29kZUZyYWdtZW50cz1mdW5jdGlvbihlKXtyZXR1cm5bc3QoZVswXSksc3QoZVsxXSldfSxlLnByb3RvdHlwZS5tYWtlUmV0dXJuPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0PXRoaXMudW53cmFwQWxsKCksZT9uZXcgbyhuZXcgeChlK1wiLnB1c2hcIiksW3RdKTpuZXcgTSh0KX0sZS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9dm9pZCAwLHRoaXMudHJhdmVyc2VDaGlsZHJlbighMSxmdW5jdGlvbihuKXtyZXR1cm4gZShuKT8odD1uLCExKTp2b2lkIDB9KSx0fSxlLnByb3RvdHlwZS5sYXN0Tm9uQ29tbWVudD1mdW5jdGlvbihlKXt2YXIgdDtmb3IodD1lLmxlbmd0aDt0LS07KWlmKCEoZVt0XWluc3RhbmNlb2YgaCkpcmV0dXJuIGVbdF07cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIG51bGw9PWUmJihlPVwiXCIpLG51bGw9PXQmJih0PXRoaXMuY29uc3RydWN0b3IubmFtZSksbj1cIlxcblwiK2UrdCx0aGlzLnNvYWsmJihuKz1cIj9cIiksdGhpcy5lYWNoQ2hpbGQoZnVuY3Rpb24odCl7cmV0dXJuIG4rPXQudG9TdHJpbmcoZStxKX0pLG59LGUucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG8sYSxjO2lmKCF0aGlzLmNoaWxkcmVuKXJldHVybiB0aGlzO2ZvcihhPXRoaXMuY2hpbGRyZW4saT0wLHM9YS5sZW5ndGg7cz5pO2krKylpZih0PWFbaV0sdGhpc1t0XSlmb3IoYz1ydChbdGhpc1t0XV0pLHI9MCxvPWMubGVuZ3RoO28+cjtyKyspaWYobj1jW3JdLGUobik9PT0hMSlyZXR1cm4gdGhpcztyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUudHJhdmVyc2VDaGlsZHJlbj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVhY2hDaGlsZChmdW5jdGlvbihuKXt2YXIgaTtyZXR1cm4gaT10KG4pLGkhPT0hMT9uLnRyYXZlcnNlQ2hpbGRyZW4oZSx0KTp2b2lkIDB9KX0sZS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBJKFwiIVwiLHRoaXMpfSxlLnByb3RvdHlwZS51bndyYXBBbGw9ZnVuY3Rpb24oKXt2YXIgZTtmb3IoZT10aGlzO2UhPT0oZT1lLnVud3JhcCgpKTspO3JldHVybiBlfSxlLnByb3RvdHlwZS5jaGlsZHJlbj1bXSxlLnByb3RvdHlwZS5pc1N0YXRlbWVudD1ELGUucHJvdG90eXBlLmp1bXBzPUQsZS5wcm90b3R5cGUuaXNDb21wbGV4PVEsZS5wcm90b3R5cGUuaXNDaGFpbmFibGU9RCxlLnByb3RvdHlwZS5pc0Fzc2lnbmFibGU9RCxlLnByb3RvdHlwZS51bndyYXA9WCxlLnByb3RvdHlwZS51bmZvbGRTb2FrPUQsZS5wcm90b3R5cGUuYXNzaWducz1ELGUucHJvdG90eXBlLnVwZGF0ZUxvY2F0aW9uRGF0YUlmTWlzc2luZz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5sb2NhdGlvbkRhdGE/dGhpczoodGhpcy5sb2NhdGlvbkRhdGE9ZSx0aGlzLmVhY2hDaGlsZChmdW5jdGlvbih0KXtyZXR1cm4gdC51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcoZSl9KSl9LGUucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiB2dChlLHRoaXMubG9jYXRpb25EYXRhKX0sZS5wcm90b3R5cGUubWFrZUNvZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBsKHRoaXMsZSl9LGUucHJvdG90eXBlLndyYXBJbkJyYWNlcz1mdW5jdGlvbihlKXtyZXR1cm5bXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIihcIiksZSx0aGlzLm1ha2VDb2RlKFwiKVwiKSl9LGUucHJvdG90eXBlLmpvaW5GcmFnbWVudEFycmF5cz1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixzLG87Zm9yKG49W10scj1zPTAsbz1lLmxlbmd0aDtvPnM7cj0rK3MpaT1lW3JdLHImJm4ucHVzaCh0aGlzLm1ha2VDb2RlKHQpKSxuPW4uY29uY2F0KGkpO3JldHVybiBufSxlfSgpLGUuQmxvY2s9cz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZXhwcmVzc2lvbnM9ZXQocnQoZXx8W10pKX1yZXR1cm4ga3QodCxlKSx0LnByb3RvdHlwZS5jaGlsZHJlbj1bXCJleHByZXNzaW9uc1wiXSx0LnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmV4cHJlc3Npb25zLnB1c2goZSksdGhpc30sdC5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXhwcmVzc2lvbnMucG9wKCl9LHQucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZXhwcmVzc2lvbnMudW5zaGlmdChlKSx0aGlzfSx0LnByb3RvdHlwZS51bndyYXA9ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoP3RoaXMuZXhwcmVzc2lvbnNbMF06dGhpc30sdC5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiF0aGlzLmV4cHJlc3Npb25zLmxlbmd0aH0sdC5wcm90b3R5cGUuaXNTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI7Zm9yKHI9dGhpcy5leHByZXNzaW9ucyxuPTAsaT1yLmxlbmd0aDtpPm47bisrKWlmKHQ9cltuXSx0LmlzU3RhdGVtZW50KGUpKXJldHVybiEwO3JldHVybiExfSx0LnByb3RvdHlwZS5qdW1wcz1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzO2ZvcihzPXRoaXMuZXhwcmVzc2lvbnMsbj0wLHI9cy5sZW5ndGg7cj5uO24rKylpZih0PXNbbl0saT10Lmp1bXBzKGUpKXJldHVybiBpfSx0LnByb3RvdHlwZS5tYWtlUmV0dXJuPWZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKG49dGhpcy5leHByZXNzaW9ucy5sZW5ndGg7bi0tOylpZih0PXRoaXMuZXhwcmVzc2lvbnNbbl0sISh0IGluc3RhbmNlb2YgaCkpe3RoaXMuZXhwcmVzc2lvbnNbbl09dC5tYWtlUmV0dXJuKGUpLHQgaW5zdGFuY2VvZiBNJiYhdC5leHByZXNzaW9uJiZ0aGlzLmV4cHJlc3Npb25zLnNwbGljZShuLDEpO2JyZWFrfXJldHVybiB0aGlzfSx0LnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gbnVsbD09ZSYmKGU9e30pLGUuc2NvcGU/dC5fX3N1cGVyX18uY29tcGlsZVRvRnJhZ21lbnRzLmNhbGwodGhpcyxlLG4pOnRoaXMuY29tcGlsZVJvb3QoZSl9LHQucHJvdG90eXBlLmNvbXBpbGVOb2RlPWZ1bmN0aW9uKGUpe3ZhciBuLGkscixzLG8sYSxjLGwsaDtmb3IodGhpcy50YWI9ZS5pbmRlbnQsaD1lLmxldmVsPT09TCxpPVtdLGw9dGhpcy5leHByZXNzaW9ucyxzPW89MCxhPWwubGVuZ3RoO2E+bztzPSsrbyljPWxbc10sYz1jLnVud3JhcEFsbCgpLGM9Yy51bmZvbGRTb2FrKGUpfHxjLGMgaW5zdGFuY2VvZiB0P2kucHVzaChjLmNvbXBpbGVOb2RlKGUpKTpoPyhjLmZyb250PSEwLHI9Yy5jb21waWxlVG9GcmFnbWVudHMoZSksYy5pc1N0YXRlbWVudChlKXx8KHIudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiXCIrdGhpcy50YWIpKSxyLnB1c2godGhpcy5tYWtlQ29kZShcIjtcIikpKSxpLnB1c2gocikpOmkucHVzaChjLmNvbXBpbGVUb0ZyYWdtZW50cyhlLEUpKTtyZXR1cm4gaD90aGlzLnNwYWNlZD9bXS5jb25jYXQodGhpcy5qb2luRnJhZ21lbnRBcnJheXMoaSxcIlxcblxcblwiKSx0aGlzLm1ha2VDb2RlKFwiXFxuXCIpKTp0aGlzLmpvaW5GcmFnbWVudEFycmF5cyhpLFwiXFxuXCIpOihuPWkubGVuZ3RoP3RoaXMuam9pbkZyYWdtZW50QXJyYXlzKGksXCIsIFwiKTpbdGhpcy5tYWtlQ29kZShcInZvaWQgMFwiKV0saS5sZW5ndGg+MSYmZS5sZXZlbD49RT90aGlzLndyYXBJbkJyYWNlcyhuKTpuKX0sdC5wcm90b3R5cGUuY29tcGlsZVJvb3Q9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvLGEsYyxsLHUscDtmb3IoZS5pbmRlbnQ9ZS5iYXJlP1wiXCI6cSxlLmxldmVsPUwsdGhpcy5zcGFjZWQ9ITAsZS5zY29wZT1uZXcgUChudWxsLHRoaXMsbnVsbCxudWxsIT0obD1lLnJlZmVyZW5jZWRWYXJzKT9sOltdKSx1PWUubG9jYWxzfHxbXSxyPTAscz11Lmxlbmd0aDtzPnI7cisrKW89dVtyXSxlLnNjb3BlLnBhcmFtZXRlcihvKTtyZXR1cm4gYT1bXSxlLmJhcmV8fChjPWZ1bmN0aW9uKCl7dmFyIGUsbixyLHM7Zm9yKHI9dGhpcy5leHByZXNzaW9ucyxzPVtdLGk9ZT0wLG49ci5sZW5ndGg7bj5lJiYodD1yW2ldLHQudW53cmFwKClpbnN0YW5jZW9mIGgpO2k9KytlKXMucHVzaCh0KTtyZXR1cm4gc30uY2FsbCh0aGlzKSxwPXRoaXMuZXhwcmVzc2lvbnMuc2xpY2UoYy5sZW5ndGgpLHRoaXMuZXhwcmVzc2lvbnM9YyxjLmxlbmd0aCYmKGE9dGhpcy5jb21waWxlTm9kZShodChlLHtpbmRlbnQ6XCJcIn0pKSxhLnB1c2godGhpcy5tYWtlQ29kZShcIlxcblwiKSkpLHRoaXMuZXhwcmVzc2lvbnM9cCksbj10aGlzLmNvbXBpbGVXaXRoRGVjbGFyYXRpb25zKGUpLGUuYmFyZT9uOltdLmNvbmNhdChhLHRoaXMubWFrZUNvZGUoXCIoZnVuY3Rpb24oKSB7XFxuXCIpLG4sdGhpcy5tYWtlQ29kZShcIlxcbn0pLmNhbGwodGhpcyk7XFxuXCIpKX0sdC5wcm90b3R5cGUuY29tcGlsZVdpdGhEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvLGEsYyxsLHUscCxkLGYsbTtmb3Iocj1bXSxjPVtdLGw9dGhpcy5leHByZXNzaW9ucyxzPW89MCxhPWwubGVuZ3RoO2E+byYmKGk9bFtzXSxpPWkudW53cmFwKCksaSBpbnN0YW5jZW9mIGh8fGkgaW5zdGFuY2VvZiB4KTtzPSsrbyk7cmV0dXJuIGU9aHQoZSx7bGV2ZWw6TH0pLHMmJihkPXRoaXMuZXhwcmVzc2lvbnMuc3BsaWNlKHMsOWU5KSx1PVt0aGlzLnNwYWNlZCwhMV0sbT11WzBdLHRoaXMuc3BhY2VkPXVbMV0scD1bdGhpcy5jb21waWxlTm9kZShlKSxtXSxyPXBbMF0sdGhpcy5zcGFjZWQ9cFsxXSx0aGlzLmV4cHJlc3Npb25zPWQpLGM9dGhpcy5jb21waWxlTm9kZShlKSxmPWUuc2NvcGUsZi5leHByZXNzaW9ucz09PXRoaXMmJihuPWUuc2NvcGUuaGFzRGVjbGFyYXRpb25zKCksdD1mLmhhc0Fzc2lnbm1lbnRzLG58fHQ/KHMmJnIucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIpKSxyLnB1c2godGhpcy5tYWtlQ29kZSh0aGlzLnRhYitcInZhciBcIikpLG4mJnIucHVzaCh0aGlzLm1ha2VDb2RlKGYuZGVjbGFyZWRWYXJpYWJsZXMoKS5qb2luKFwiLCBcIikpKSx0JiYobiYmci5wdXNoKHRoaXMubWFrZUNvZGUoXCIsXFxuXCIrKHRoaXMudGFiK3EpKSksci5wdXNoKHRoaXMubWFrZUNvZGUoZi5hc3NpZ25lZFZhcmlhYmxlcygpLmpvaW4oXCIsXFxuXCIrKHRoaXMudGFiK3EpKSkpKSxyLnB1c2godGhpcy5tYWtlQ29kZShcIjtcXG5cIisodGhpcy5zcGFjZWQ/XCJcXG5cIjpcIlwiKSkpKTpyLmxlbmd0aCYmYy5sZW5ndGgmJnIucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIpKSksci5jb25jYXQoYyl9LHQud3JhcD1mdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubGVuZ3RoJiZlWzBdaW5zdGFuY2VvZiB0P2VbMF06bmV3IHQoZSl9LHR9KHIpLGUuTGl0ZXJhbD14PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy52YWx1ZT1lfXJldHVybiBrdCh0LGUpLHQucHJvdG90eXBlLm1ha2VSZXR1cm49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1N0YXRlbWVudCgpP3RoaXM6dC5fX3N1cGVyX18ubWFrZVJldHVybi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHQucHJvdG90eXBlLmlzQXNzaWduYWJsZT1mdW5jdGlvbigpe3JldHVybiBnLnRlc3QodGhpcy52YWx1ZSl9LHQucHJvdG90eXBlLmlzU3RhdGVtZW50PWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuXCJicmVha1wiPT09KGU9dGhpcy52YWx1ZSl8fFwiY29udGludWVcIj09PWV8fFwiZGVidWdnZXJcIj09PWV9LHQucHJvdG90eXBlLmlzQ29tcGxleD1ELHQucHJvdG90eXBlLmFzc2lnbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10aGlzLnZhbHVlfSx0LnByb3RvdHlwZS5qdW1wcz1mdW5jdGlvbihlKXtyZXR1cm5cImJyZWFrXCIhPT10aGlzLnZhbHVlfHwobnVsbCE9ZT9lLmxvb3A6dm9pZCAwKXx8KG51bGwhPWU/ZS5ibG9jazp2b2lkIDApP1wiY29udGludWVcIiE9PXRoaXMudmFsdWV8fChudWxsIT1lP2UubG9vcDp2b2lkIDApP3ZvaWQgMDp0aGlzOnRoaXN9LHQucHJvdG90eXBlLmNvbXBpbGVOb2RlPWZ1bmN0aW9uKGUpe3ZhciB0LG4saTtyZXR1cm4gbj1cInRoaXNcIj09PXRoaXMudmFsdWU/KG51bGwhPShpPWUuc2NvcGUubWV0aG9kKT9pLmJvdW5kOnZvaWQgMCk/ZS5zY29wZS5tZXRob2QuY29udGV4dDp0aGlzLnZhbHVlOnRoaXMudmFsdWUucmVzZXJ2ZWQ/J1wiJyt0aGlzLnZhbHVlKydcIic6dGhpcy52YWx1ZSx0PXRoaXMuaXNTdGF0ZW1lbnQoKT9cIlwiK3RoaXMudGFiK24rXCI7XCI6bixbdGhpcy5tYWtlQ29kZSh0KV19LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuJyBcIicrdGhpcy52YWx1ZSsnXCInfSx0fShyKSxlLlVuZGVmaW5lZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4ga3QodCxlKSx0LnByb3RvdHlwZS5pc0Fzc2lnbmFibGU9RCx0LnByb3RvdHlwZS5pc0NvbXBsZXg9RCx0LnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXtyZXR1cm5bdGhpcy5tYWtlQ29kZShlLmxldmVsPj1UP1wiKHZvaWQgMClcIjpcInZvaWQgMFwiKV19LHR9KHIpLGUuTnVsbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4ga3QodCxlKSx0LnByb3RvdHlwZS5pc0Fzc2lnbmFibGU9RCx0LnByb3RvdHlwZS5pc0NvbXBsZXg9RCx0LnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbigpe3JldHVyblt0aGlzLm1ha2VDb2RlKFwibnVsbFwiKV19LHR9KHIpLGUuQm9vbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMudmFsPWV9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuaXNBc3NpZ25hYmxlPUQsdC5wcm90b3R5cGUuaXNDb21wbGV4PUQsdC5wcm90b3R5cGUuY29tcGlsZU5vZGU9ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5tYWtlQ29kZSh0aGlzLnZhbCldfSx0fShyKSxlLlJldHVybj1NPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5leHByZXNzaW9uPWV9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wiZXhwcmVzc2lvblwiXSx0LnByb3RvdHlwZS5pc1N0YXRlbWVudD1RLHQucHJvdG90eXBlLm1ha2VSZXR1cm49WCx0LnByb3RvdHlwZS5qdW1wcz1YLHQucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cz1mdW5jdGlvbihlLG4pe3ZhciBpLHI7cmV0dXJuIGk9bnVsbCE9KHI9dGhpcy5leHByZXNzaW9uKT9yLm1ha2VSZXR1cm4oKTp2b2lkIDAsIWl8fGkgaW5zdGFuY2VvZiB0P3QuX19zdXBlcl9fLmNvbXBpbGVUb0ZyYWdtZW50cy5jYWxsKHRoaXMsZSxuKTppLmNvbXBpbGVUb0ZyYWdtZW50cyhlLG4pfSx0LnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXt2YXIgdCxuLGk7cmV0dXJuIHQ9W10sbj1udWxsIT0oaT10aGlzLmV4cHJlc3Npb24pP1wiZnVuY3Rpb25cIj09dHlwZW9mIGkuaXNZaWVsZFJldHVybj9pLmlzWWllbGRSZXR1cm4oKTp2b2lkIDA6dm9pZCAwLG58fHQucHVzaCh0aGlzLm1ha2VDb2RlKHRoaXMudGFiKyhcInJldHVyblwiKyh0aGlzLmV4cHJlc3Npb24/XCIgXCI6XCJcIikpKSksdGhpcy5leHByZXNzaW9uJiYodD10LmNvbmNhdCh0aGlzLmV4cHJlc3Npb24uY29tcGlsZVRvRnJhZ21lbnRzKGUsTikpKSxufHx0LnB1c2godGhpcy5tYWtlQ29kZShcIjtcIikpLHR9LHR9KHIpLGUuVmFsdWU9ej1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsbixpKXtyZXR1cm4hbiYmZSBpbnN0YW5jZW9mIHQ/ZToodGhpcy5iYXNlPWUsdGhpcy5wcm9wZXJ0aWVzPW58fFtdLGkmJih0aGlzW2ldPSEwKSx0aGlzKX1yZXR1cm4ga3QodCxlKSx0LnByb3RvdHlwZS5jaGlsZHJlbj1bXCJiYXNlXCIsXCJwcm9wZXJ0aWVzXCJdLHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzPXRoaXMucHJvcGVydGllcy5jb25jYXQoZSksdGhpc30sdC5wcm90b3R5cGUuaGFzUHJvcGVydGllcz1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aH0sdC5wcm90b3R5cGUuYmFyZUxpdGVyYWw9ZnVuY3Rpb24oZSl7cmV0dXJuIXRoaXMucHJvcGVydGllcy5sZW5ndGgmJnRoaXMuYmFzZSBpbnN0YW5jZW9mIGV9LHQucHJvdG90eXBlLmlzQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iYXJlTGl0ZXJhbChuKX0sdC5wcm90b3R5cGUuaXNSYW5nZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJhcmVMaXRlcmFsKGopfSx0LnByb3RvdHlwZS5pc0NvbXBsZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNQcm9wZXJ0aWVzKCl8fHRoaXMuYmFzZS5pc0NvbXBsZXgoKX0sdC5wcm90b3R5cGUuaXNBc3NpZ25hYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzUHJvcGVydGllcygpfHx0aGlzLmJhc2UuaXNBc3NpZ25hYmxlKCl9LHQucHJvdG90eXBlLmlzU2ltcGxlTnVtYmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmFyZUxpdGVyYWwoeCkmJkIudGVzdCh0aGlzLmJhc2UudmFsdWUpfSx0LnByb3RvdHlwZS5pc1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJhcmVMaXRlcmFsKHgpJiZ5LnRlc3QodGhpcy5iYXNlLnZhbHVlKX0sdC5wcm90b3R5cGUuaXNSZWdleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJhcmVMaXRlcmFsKHgpJiZ2LnRlc3QodGhpcy5iYXNlLnZhbHVlKX0sdC5wcm90b3R5cGUuaXNBdG9taWM9ZnVuY3Rpb24oKXt2YXIgZSx0LG4saTtmb3IoaT10aGlzLnByb3BlcnRpZXMuY29uY2F0KHRoaXMuYmFzZSksZT0wLHQ9aS5sZW5ndGg7dD5lO2UrKylpZihuPWlbZV0sbi5zb2FrfHxuIGluc3RhbmNlb2YgbylyZXR1cm4hMTtyZXR1cm4hMH0sdC5wcm90b3R5cGUuaXNOb3RDYWxsYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzU2ltcGxlTnVtYmVyKCl8fHRoaXMuaXNTdHJpbmcoKXx8dGhpcy5pc1JlZ2V4KCl8fHRoaXMuaXNBcnJheSgpfHx0aGlzLmlzUmFuZ2UoKXx8dGhpcy5pc1NwbGljZSgpfHx0aGlzLmlzT2JqZWN0KCl9LHQucHJvdG90eXBlLmlzU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiF0aGlzLnByb3BlcnRpZXMubGVuZ3RoJiZ0aGlzLmJhc2UuaXNTdGF0ZW1lbnQoZSl9LHQucHJvdG90eXBlLmFzc2lnbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIXRoaXMucHJvcGVydGllcy5sZW5ndGgmJnRoaXMuYmFzZS5hc3NpZ25zKGUpfSx0LnByb3RvdHlwZS5qdW1wcz1mdW5jdGlvbihlKXtyZXR1cm4hdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCYmdGhpcy5iYXNlLmp1bXBzKGUpfSx0LnByb3RvdHlwZS5pc09iamVjdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aD8hMTp0aGlzLmJhc2UgaW5zdGFuY2VvZiBBJiYoIWV8fHRoaXMuYmFzZS5nZW5lcmF0ZWQpfSx0LnByb3RvdHlwZS5pc1NwbGljZT1mdW5jdGlvbigpe3ZhciBlLHQ7cmV0dXJuIHQ9dGhpcy5wcm9wZXJ0aWVzLGU9dFt0Lmxlbmd0aC0xXSxlIGluc3RhbmNlb2YgVX0sdC5wcm90b3R5cGUubG9va3NTdGF0aWM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXMuYmFzZS52YWx1ZT09PWUmJjE9PT10aGlzLnByb3BlcnRpZXMubGVuZ3RoJiZcInByb3RvdHlwZVwiIT09KG51bGwhPSh0PXRoaXMucHJvcGVydGllc1swXS5uYW1lKT90LnZhbHVlOnZvaWQgMCl9LHQucHJvdG90eXBlLnVud3JhcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BlcnRpZXMubGVuZ3RoP3RoaXM6dGhpcy5iYXNlfSx0LnByb3RvdHlwZS5jYWNoZVJlZmVyZW5jZT1mdW5jdGlvbihlKXt2YXIgbixyLHMsbyxhO3JldHVybiBhPXRoaXMucHJvcGVydGllcyxzPWFbYS5sZW5ndGgtMV0sMj50aGlzLnByb3BlcnRpZXMubGVuZ3RoJiYhdGhpcy5iYXNlLmlzQ29tcGxleCgpJiYhKG51bGwhPXM/cy5pc0NvbXBsZXgoKTp2b2lkIDApP1t0aGlzLHRoaXNdOihuPW5ldyB0KHRoaXMuYmFzZSx0aGlzLnByb3BlcnRpZXMuc2xpY2UoMCwtMSkpLG4uaXNDb21wbGV4KCkmJihyPW5ldyB4KGUuc2NvcGUuZnJlZVZhcmlhYmxlKFwiYmFzZVwiKSksbj1uZXcgdChuZXcgTyhuZXcgaShyLG4pKSkpLHM/KHMuaXNDb21wbGV4KCkmJihvPW5ldyB4KGUuc2NvcGUuZnJlZVZhcmlhYmxlKFwibmFtZVwiKSkscz1uZXcgdyhuZXcgaShvLHMuaW5kZXgpKSxvPW5ldyB3KG8pKSxbbi5hZGQocyksbmV3IHQocnx8bi5iYXNlLFtvfHxzXSldKTpbbixyXSl9LHQucHJvdG90eXBlLmNvbXBpbGVOb2RlPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLHM7Zm9yKHRoaXMuYmFzZS5mcm9udD10aGlzLmZyb250LHM9dGhpcy5wcm9wZXJ0aWVzLHQ9dGhpcy5iYXNlLmNvbXBpbGVUb0ZyYWdtZW50cyhlLHMubGVuZ3RoP1Q6bnVsbCksKHRoaXMuYmFzZSBpbnN0YW5jZW9mIE98fHMubGVuZ3RoKSYmQi50ZXN0KHN0KHQpKSYmdC5wdXNoKHRoaXMubWFrZUNvZGUoXCIuXCIpKSxuPTAsaT1zLmxlbmd0aDtpPm47bisrKXI9c1tuXSx0LnB1c2guYXBwbHkodCxyLmNvbXBpbGVUb0ZyYWdtZW50cyhlKSk7cmV0dXJuIHR9LHQucHJvdG90eXBlLnVuZm9sZFNvYWs9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPXRoaXMudW5mb2xkZWRTb2FrP3RoaXMudW5mb2xkZWRTb2FrOnRoaXMudW5mb2xkZWRTb2FrPWZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbigpe3ZhciByLHMsbyxhLGMsbCxoLHAsZCxmO2lmKG89bi5iYXNlLnVuZm9sZFNvYWsoZSkpcmV0dXJuKHA9by5ib2R5LnByb3BlcnRpZXMpLnB1c2guYXBwbHkocCxuLnByb3BlcnRpZXMpLG87Zm9yKGQ9bi5wcm9wZXJ0aWVzLHM9YT0wLGM9ZC5sZW5ndGg7Yz5hO3M9KythKWlmKGw9ZFtzXSxsLnNvYWspcmV0dXJuIGwuc29haz0hMSxyPW5ldyB0KG4uYmFzZSxuLnByb3BlcnRpZXMuc2xpY2UoMCxzKSksZj1uZXcgdChuLmJhc2Usbi5wcm9wZXJ0aWVzLnNsaWNlKHMpKSxyLmlzQ29tcGxleCgpJiYoaD1uZXcgeChlLnNjb3BlLmZyZWVWYXJpYWJsZShcInJlZlwiKSkscj1uZXcgTyhuZXcgaShoLHIpKSxmLmJhc2U9aCksbmV3IGIobmV3IHUociksZix7c29hazohMH0pO3JldHVybiExfX0odGhpcykoKX0sdH0ociksZS5Db21tZW50PWg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt0aGlzLmNvbW1lbnQ9ZX1yZXR1cm4ga3QodCxlKSx0LnByb3RvdHlwZS5pc1N0YXRlbWVudD1RLHQucHJvdG90eXBlLm1ha2VSZXR1cm49WCx0LnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlLHQpe3ZhciBuLGk7cmV0dXJuIGk9dGhpcy5jb21tZW50LnJlcGxhY2UoL14oXFxzKikjIC9nbSxcIiQxICogXCIpLG49XCIvKlwiK3V0KGksdGhpcy50YWIpKyhUdC5jYWxsKGksXCJcXG5cIik+PTA/XCJcXG5cIit0aGlzLnRhYjpcIlwiKStcIiAqL1wiLCh0fHxlLmxldmVsKT09PUwmJihuPWUuaW5kZW50K24pLFt0aGlzLm1ha2VDb2RlKFwiXFxuXCIpLHRoaXMubWFrZUNvZGUobildfSx0fShyKSxlLkNhbGw9bz1mdW5jdGlvbihlKXtmdW5jdGlvbiBuKGUsdCxuKXt0aGlzLmFyZ3M9bnVsbCE9dD90OltdLHRoaXMuc29haz1uLHRoaXMuaXNOZXc9ITEsdGhpcy5pc1N1cGVyPVwic3VwZXJcIj09PWUsdGhpcy52YXJpYWJsZT10aGlzLmlzU3VwZXI/bnVsbDplLGUgaW5zdGFuY2VvZiB6JiZlLmlzTm90Q2FsbGFibGUoKSYmZS5lcnJvcihcImxpdGVyYWwgaXMgbm90IGEgZnVuY3Rpb25cIil9cmV0dXJuIGt0KG4sZSksbi5wcm90b3R5cGUuY2hpbGRyZW49W1widmFyaWFibGVcIixcImFyZ3NcIl0sbi5wcm90b3R5cGUubmV3SW5zdGFuY2U9ZnVuY3Rpb24oKXt2YXIgZSx0O3JldHVybiBlPShudWxsIT0odD10aGlzLnZhcmlhYmxlKT90LmJhc2U6dm9pZCAwKXx8dGhpcy52YXJpYWJsZSxlIGluc3RhbmNlb2YgbiYmIWUuaXNOZXc/ZS5uZXdJbnN0YW5jZSgpOnRoaXMuaXNOZXc9ITAsdGhpc30sbi5wcm90b3R5cGUuc3VwZXJSZWZlcmVuY2U9ZnVuY3Rpb24oZSl7dmFyIG4scixzLG8sYSxjLGwsaDtyZXR1cm4gYT1lLnNjb3BlLm5hbWVkTWV0aG9kKCksKG51bGwhPWE/YS5rbGFzczp2b2lkIDApPyhvPWEua2xhc3MsYz1hLm5hbWUsaD1hLnZhcmlhYmxlLG8uaXNDb21wbGV4KCkmJihzPW5ldyB4KGUuc2NvcGUucGFyZW50LmZyZWVWYXJpYWJsZShcImJhc2VcIikpLHI9bmV3IHoobmV3IE8obmV3IGkocyxvKSkpLGguYmFzZT1yLGgucHJvcGVydGllcy5zcGxpY2UoMCxvLnByb3BlcnRpZXMubGVuZ3RoKSksKGMuaXNDb21wbGV4KCl8fGMgaW5zdGFuY2VvZiB3JiZjLmluZGV4LmlzQXNzaWduYWJsZSgpKSYmKGw9bmV3IHgoZS5zY29wZS5wYXJlbnQuZnJlZVZhcmlhYmxlKFwibmFtZVwiKSksYz1uZXcgdyhuZXcgaShsLGMuaW5kZXgpKSxoLnByb3BlcnRpZXMucG9wKCksaC5wcm9wZXJ0aWVzLnB1c2goYykpLG49W25ldyB0KG5ldyB4KFwiX19zdXBlcl9fXCIpKV0sYVtcInN0YXRpY1wiXSYmbi5wdXNoKG5ldyB0KG5ldyB4KFwiY29uc3RydWN0b3JcIikpKSxuLnB1c2gobnVsbCE9bD9uZXcgdyhsKTpjKSxuZXcgeihudWxsIT1zP3M6byxuKS5jb21waWxlKGUpKToobnVsbCE9YT9hLmN0b3I6dm9pZCAwKT9hLm5hbWUrXCIuX19zdXBlcl9fLmNvbnN0cnVjdG9yXCI6dGhpcy5lcnJvcihcImNhbm5vdCBjYWxsIHN1cGVyIG91dHNpZGUgb2YgYW4gaW5zdGFuY2UgbWV0aG9kLlwiKX0sbi5wcm90b3R5cGUuc3VwZXJUaGlzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0PWUuc2NvcGUubWV0aG9kLHQmJiF0LmtsYXNzJiZ0LmNvbnRleHR8fFwidGhpc1wifSxuLnByb3RvdHlwZS51bmZvbGRTb2FrPWZ1bmN0aW9uKGUpe3ZhciB0LGkscixzLG8sYSxjLGwsaDtpZih0aGlzLnNvYWspe2lmKHRoaXMudmFyaWFibGUpe2lmKGk9eXQoZSx0aGlzLFwidmFyaWFibGVcIikpcmV0dXJuIGk7Yz1uZXcgeih0aGlzLnZhcmlhYmxlKS5jYWNoZVJlZmVyZW5jZShlKSxzPWNbMF0saD1jWzFdfWVsc2Ugcz1uZXcgeCh0aGlzLnN1cGVyUmVmZXJlbmNlKGUpKSxoPW5ldyB6KHMpO3JldHVybiBoPW5ldyBuKGgsdGhpcy5hcmdzKSxoLmlzTmV3PXRoaXMuaXNOZXcscz1uZXcgeChcInR5cGVvZiBcIitzLmNvbXBpbGUoZSkrJyA9PT0gXCJmdW5jdGlvblwiJyksbmV3IGIocyxuZXcgeihoKSx7c29hazohMH0pfWZvcih0PXRoaXMsYT1bXTs7KWlmKHQudmFyaWFibGUgaW5zdGFuY2VvZiBuKWEucHVzaCh0KSx0PXQudmFyaWFibGU7ZWxzZXtpZighKHQudmFyaWFibGUgaW5zdGFuY2VvZiB6KSlicmVhaztpZihhLnB1c2godCksISgodD10LnZhcmlhYmxlLmJhc2UpaW5zdGFuY2VvZiBuKSlicmVha31mb3IobD1hLnJldmVyc2UoKSxyPTAsbz1sLmxlbmd0aDtvPnI7cisrKXQ9bFtyXSxpJiYodC52YXJpYWJsZSBpbnN0YW5jZW9mIG4/dC52YXJpYWJsZT1pOnQudmFyaWFibGUuYmFzZT1pKSxpPXl0KGUsdCxcInZhcmlhYmxlXCIpO3JldHVybiBpfSxuLnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG8sYSxjLGwsaDtpZihudWxsIT0obD10aGlzLnZhcmlhYmxlKSYmKGwuZnJvbnQ9dGhpcy5mcm9udCkscj1HLmNvbXBpbGVTcGxhdHRlZEFycmF5KGUsdGhpcy5hcmdzLCEwKSxyLmxlbmd0aClyZXR1cm4gdGhpcy5jb21waWxlU3BsYXQoZSxyKTtmb3IoaT1bXSxoPXRoaXMuYXJncyxuPW89MCxhPWgubGVuZ3RoO2E+bztuPSsrbyl0PWhbbl0sbiYmaS5wdXNoKHRoaXMubWFrZUNvZGUoXCIsIFwiKSksaS5wdXNoLmFwcGx5KGksdC5jb21waWxlVG9GcmFnbWVudHMoZSxFKSk7cmV0dXJuIHM9W10sdGhpcy5pc1N1cGVyPyhjPXRoaXMuc3VwZXJSZWZlcmVuY2UoZSkrKFwiLmNhbGwoXCIrdGhpcy5zdXBlclRoaXMoZSkpLGkubGVuZ3RoJiYoYys9XCIsIFwiKSxzLnB1c2godGhpcy5tYWtlQ29kZShjKSkpOih0aGlzLmlzTmV3JiZzLnB1c2godGhpcy5tYWtlQ29kZShcIm5ldyBcIikpLHMucHVzaC5hcHBseShzLHRoaXMudmFyaWFibGUuY29tcGlsZVRvRnJhZ21lbnRzKGUsVCkpLHMucHVzaCh0aGlzLm1ha2VDb2RlKFwiKFwiKSkpLHMucHVzaC5hcHBseShzLGkpLHMucHVzaCh0aGlzLm1ha2VDb2RlKFwiKVwiKSksc30sbi5wcm90b3R5cGUuY29tcGlsZVNwbGF0PWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHMsbyxhO3JldHVybiB0aGlzLmlzU3VwZXI/W10uY29uY2F0KHRoaXMubWFrZUNvZGUodGhpcy5zdXBlclJlZmVyZW5jZShlKStcIi5hcHBseShcIit0aGlzLnN1cGVyVGhpcyhlKStcIiwgXCIpLHQsdGhpcy5tYWtlQ29kZShcIilcIikpOnRoaXMuaXNOZXc/KHM9dGhpcy50YWIrcSxbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIihmdW5jdGlvbihmdW5jLCBhcmdzLCBjdG9yKSB7XFxuXCIrcytcImN0b3IucHJvdG90eXBlID0gZnVuYy5wcm90b3R5cGU7XFxuXCIrcytcInZhciBjaGlsZCA9IG5ldyBjdG9yLCByZXN1bHQgPSBmdW5jLmFwcGx5KGNoaWxkLCBhcmdzKTtcXG5cIitzK1wicmV0dXJuIE9iamVjdChyZXN1bHQpID09PSByZXN1bHQgPyByZXN1bHQgOiBjaGlsZDtcXG5cIit0aGlzLnRhYitcIn0pKFwiKSx0aGlzLnZhcmlhYmxlLmNvbXBpbGVUb0ZyYWdtZW50cyhlLEUpLHRoaXMubWFrZUNvZGUoXCIsIFwiKSx0LHRoaXMubWFrZUNvZGUoXCIsIGZ1bmN0aW9uKCl7fSlcIikpKToobj1bXSxpPW5ldyB6KHRoaXMudmFyaWFibGUpLChvPWkucHJvcGVydGllcy5wb3AoKSkmJmkuaXNDb21wbGV4KCk/KGE9ZS5zY29wZS5mcmVlVmFyaWFibGUoXCJyZWZcIiksbj1uLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiKFwiK2ErXCIgPSBcIiksaS5jb21waWxlVG9GcmFnbWVudHMoZSxFKSx0aGlzLm1ha2VDb2RlKFwiKVwiKSxvLmNvbXBpbGVUb0ZyYWdtZW50cyhlKSkpOihyPWkuY29tcGlsZVRvRnJhZ21lbnRzKGUsVCksQi50ZXN0KHN0KHIpKSYmKHI9dGhpcy53cmFwSW5CcmFjZXMocikpLG8/KGE9c3Qociksci5wdXNoLmFwcGx5KHIsby5jb21waWxlVG9GcmFnbWVudHMoZSkpKTphPVwibnVsbFwiLG49bi5jb25jYXQocikpLG49bi5jb25jYXQodGhpcy5tYWtlQ29kZShcIi5hcHBseShcIithK1wiLCBcIiksdCx0aGlzLm1ha2VDb2RlKFwiKVwiKSkpfSxufShyKSxlLkV4dGVuZHM9ZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dGhpcy5jaGlsZD1lLHRoaXMucGFyZW50PXR9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wiY2hpbGRcIixcInBhcmVudFwiXSx0LnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvKG5ldyB6KG5ldyB4KGJ0KFwiZXh0ZW5kXCIsZSkpKSxbdGhpcy5jaGlsZCx0aGlzLnBhcmVudF0pLmNvbXBpbGVUb0ZyYWdtZW50cyhlKX0sdH0ociksZS5BY2Nlc3M9dD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dGhpcy5uYW1lPWUsdGhpcy5uYW1lLmFzS2V5PSEwLHRoaXMuc29haz1cInNvYWtcIj09PXR9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wibmFtZVwiXSx0LnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9dGhpcy5uYW1lLmNvbXBpbGVUb0ZyYWdtZW50cyhlKSxnLnRlc3Qoc3QodCkpP3QudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiLlwiKSk6KHQudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiW1wiKSksdC5wdXNoKHRoaXMubWFrZUNvZGUoXCJdXCIpKSksdH0sdC5wcm90b3R5cGUuaXNDb21wbGV4PUQsdH0ociksZS5JbmRleD13PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5pbmRleD1lfXJldHVybiBrdCh0LGUpLHQucHJvdG90eXBlLmNoaWxkcmVuPVtcImluZGV4XCJdLHQucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cz1mdW5jdGlvbihlKXtyZXR1cm5bXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIltcIiksdGhpcy5pbmRleC5jb21waWxlVG9GcmFnbWVudHMoZSxOKSx0aGlzLm1ha2VDb2RlKFwiXVwiKSl9LHQucHJvdG90eXBlLmlzQ29tcGxleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4LmlzQ29tcGxleCgpfSx0fShyKSxlLlJhbmdlPWo9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQsbil7dGhpcy5mcm9tPWUsdGhpcy50bz10LHRoaXMuZXhjbHVzaXZlPVwiZXhjbHVzaXZlXCI9PT1uLHRoaXMuZXF1YWxzPXRoaXMuZXhjbHVzaXZlP1wiXCI6XCI9XCJ9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wiZnJvbVwiLFwidG9cIl0sdC5wcm90b3R5cGUuY29tcGlsZVZhcmlhYmxlcz1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG87cmV0dXJuIGU9aHQoZSx7dG9wOiEwfSksdD10dChlLFwiaXNDb21wbGV4XCIpLG49dGhpcy5jYWNoZVRvQ29kZUZyYWdtZW50cyh0aGlzLmZyb20uY2FjaGUoZSxFLHQpKSx0aGlzLmZyb21DPW5bMF0sdGhpcy5mcm9tVmFyPW5bMV0saT10aGlzLmNhY2hlVG9Db2RlRnJhZ21lbnRzKHRoaXMudG8uY2FjaGUoZSxFLHQpKSx0aGlzLnRvQz1pWzBdLHRoaXMudG9WYXI9aVsxXSwobz10dChlLFwic3RlcFwiKSkmJihyPXRoaXMuY2FjaGVUb0NvZGVGcmFnbWVudHMoby5jYWNoZShlLEUsdCkpLHRoaXMuc3RlcD1yWzBdLHRoaXMuc3RlcFZhcj1yWzFdKSxzPVt0aGlzLmZyb21WYXIubWF0Y2goUiksdGhpcy50b1Zhci5tYXRjaChSKV0sdGhpcy5mcm9tTnVtPXNbMF0sdGhpcy50b051bT1zWzFdLHRoaXMuc3RlcFZhcj90aGlzLnN0ZXBOdW09dGhpcy5zdGVwVmFyLm1hdGNoKFIpOnZvaWQgMH0sdC5wcm90b3R5cGUuY29tcGlsZU5vZGU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvLGEsYyxsLGgsdSxwLGQsZjtyZXR1cm4gdGhpcy5mcm9tVmFyfHx0aGlzLmNvbXBpbGVWYXJpYWJsZXMoZSksZS5pbmRleD8oYT10aGlzLmZyb21OdW0mJnRoaXMudG9OdW0scz10dChlLFwiaW5kZXhcIiksbz10dChlLFwibmFtZVwiKSxsPW8mJm8hPT1zLGY9cytcIiA9IFwiK3RoaXMuZnJvbUMsdGhpcy50b0MhPT10aGlzLnRvVmFyJiYoZis9XCIsIFwiK3RoaXMudG9DKSx0aGlzLnN0ZXAhPT10aGlzLnN0ZXBWYXImJihmKz1cIiwgXCIrdGhpcy5zdGVwKSxoPVtzK1wiIDxcIit0aGlzLmVxdWFscyxzK1wiID5cIit0aGlzLmVxdWFsc10sYz1oWzBdLHI9aFsxXSxuPXRoaXMuc3RlcE51bT9wdCh0aGlzLnN0ZXBOdW1bMF0pPjA/YytcIiBcIit0aGlzLnRvVmFyOnIrXCIgXCIrdGhpcy50b1ZhcjphPyh1PVtwdCh0aGlzLmZyb21OdW1bMF0pLHB0KHRoaXMudG9OdW1bMF0pXSxpPXVbMF0sZD11WzFdLHUsZD49aT9jK1wiIFwiK2Q6citcIiBcIitkKToodD10aGlzLnN0ZXBWYXI/dGhpcy5zdGVwVmFyK1wiID4gMFwiOnRoaXMuZnJvbVZhcitcIiA8PSBcIit0aGlzLnRvVmFyLHQrXCIgPyBcIitjK1wiIFwiK3RoaXMudG9WYXIrXCIgOiBcIityK1wiIFwiK3RoaXMudG9WYXIpLHA9dGhpcy5zdGVwVmFyP3MrXCIgKz0gXCIrdGhpcy5zdGVwVmFyOmE/bD9kPj1pP1wiKytcIitzOlwiLS1cIitzOmQ+PWk/cytcIisrXCI6cytcIi0tXCI6bD90K1wiID8gKytcIitzK1wiIDogLS1cIitzOnQrXCIgPyBcIitzK1wiKysgOiBcIitzK1wiLS1cIixsJiYoZj1vK1wiID0gXCIrZiksbCYmKHA9bytcIiA9IFwiK3ApLFt0aGlzLm1ha2VDb2RlKGYrXCI7IFwiK24rXCI7IFwiK3ApXSk6dGhpcy5jb21waWxlQXJyYXkoZSl9LHQucHJvdG90eXBlLmNvbXBpbGVBcnJheT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG8sYSxjLGwsaCx1LHAsZDtyZXR1cm4gdGhpcy5mcm9tTnVtJiZ0aGlzLnRvTnVtJiYyMD49TWF0aC5hYnModGhpcy5mcm9tTnVtLXRoaXMudG9OdW0pPyhsPWZ1bmN0aW9uKCl7cD1bXTtmb3IodmFyIGU9aD0rdGhpcy5mcm9tTnVtLHQ9K3RoaXMudG9OdW07dD49aD90Pj1lOmU+PXQ7dD49aD9lKys6ZS0tKXAucHVzaChlKTtyZXR1cm4gcH0uYXBwbHkodGhpcyksdGhpcy5leGNsdXNpdmUmJmwucG9wKCksW3RoaXMubWFrZUNvZGUoXCJbXCIrbC5qb2luKFwiLCBcIikrXCJdXCIpXSk6KG89dGhpcy50YWIrcSxzPWUuc2NvcGUuZnJlZVZhcmlhYmxlKFwiaVwiLHtzaW5nbGU6ITB9KSx1PWUuc2NvcGUuZnJlZVZhcmlhYmxlKFwicmVzdWx0c1wiKSxjPVwiXFxuXCIrbyt1K1wiID0gW107XCIsdGhpcy5mcm9tTnVtJiZ0aGlzLnRvTnVtPyhlLmluZGV4PXMsbj1zdCh0aGlzLmNvbXBpbGVOb2RlKGUpKSk6KGQ9cytcIiA9IFwiK3RoaXMuZnJvbUMrKHRoaXMudG9DIT09dGhpcy50b1Zhcj9cIiwgXCIrdGhpcy50b0M6XCJcIiksaT10aGlzLmZyb21WYXIrXCIgPD0gXCIrdGhpcy50b1ZhcixuPVwidmFyIFwiK2QrXCI7IFwiK2krXCIgPyBcIitzK1wiIDxcIit0aGlzLmVxdWFscytcIiBcIit0aGlzLnRvVmFyK1wiIDogXCIrcytcIiA+XCIrdGhpcy5lcXVhbHMrXCIgXCIrdGhpcy50b1ZhcitcIjsgXCIraStcIiA/IFwiK3MrXCIrKyA6IFwiK3MrXCItLVwiKSxhPVwieyBcIit1K1wiLnB1c2goXCIrcytcIik7IH1cXG5cIitvK1wicmV0dXJuIFwiK3UrXCI7XFxuXCIrZS5pbmRlbnQscj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9lLmNvbnRhaW5zKGF0KTp2b2lkIDB9LChyKHRoaXMuZnJvbSl8fHIodGhpcy50bykpJiYodD1cIiwgYXJndW1lbnRzXCIpLFt0aGlzLm1ha2VDb2RlKFwiKGZ1bmN0aW9uKCkge1wiK2MrXCJcXG5cIitvK1wiZm9yIChcIituK1wiKVwiK2ErXCJ9KS5hcHBseSh0aGlzXCIrKG51bGwhPXQ/dDpcIlwiKStcIilcIildKX0sdH0ociksZS5TbGljZT1VPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5yYW5nZT1lLHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wicmFuZ2VcIl0sdC5wcm90b3R5cGUuY29tcGlsZU5vZGU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvLGE7cmV0dXJuIHM9dGhpcy5yYW5nZSxvPXMudG8saT1zLmZyb20scj1pJiZpLmNvbXBpbGVUb0ZyYWdtZW50cyhlLE4pfHxbdGhpcy5tYWtlQ29kZShcIjBcIildLG8mJih0PW8uY29tcGlsZVRvRnJhZ21lbnRzKGUsTiksbj1zdCh0KSwodGhpcy5yYW5nZS5leGNsdXNpdmV8fC0xIT09K24pJiYoYT1cIiwgXCIrKHRoaXMucmFuZ2UuZXhjbHVzaXZlP246Qi50ZXN0KG4pP1wiXCIrKCtuKzEpOih0PW8uY29tcGlsZVRvRnJhZ21lbnRzKGUsVCksXCIrXCIrc3QodCkrXCIgKyAxIHx8IDllOVwiKSkpKSxbdGhpcy5tYWtlQ29kZShcIi5zbGljZShcIitzdChyKSsoYXx8XCJcIikrXCIpXCIpXX0sdH0ociksZS5PYmo9QT1mdW5jdGlvbihlKXtmdW5jdGlvbiBuKGUsdCl7dGhpcy5nZW5lcmF0ZWQ9bnVsbCE9dD90OiExLHRoaXMub2JqZWN0cz10aGlzLnByb3BlcnRpZXM9ZXx8W119cmV0dXJuIGt0KG4sZSksbi5wcm90b3R5cGUuY2hpbGRyZW49W1wicHJvcGVydGllc1wiXSxuLnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXt2YXIgbixyLHMsbyxhLGMsbCx1LHAsZCxmLG0sZyx2LHksYixrLHcsVCxDLEU7aWYoVD10aGlzLnByb3BlcnRpZXMsdGhpcy5nZW5lcmF0ZWQpZm9yKGw9MCxnPVQubGVuZ3RoO2c+bDtsKyspYj1UW2xdLGIgaW5zdGFuY2VvZiB6JiZiLmVycm9yKFwiY2Fubm90IGhhdmUgYW4gaW1wbGljaXQgdmFsdWUgaW4gYW4gaW1wbGljaXQgb2JqZWN0XCIpO2ZvcihyPXA9MCx2PVQubGVuZ3RoO3Y+cCYmKHc9VFtyXSwhKCh3LnZhcmlhYmxlfHx3KS5iYXNlIGluc3RhbmNlb2YgTykpO3I9KytwKTtmb3Iocz1ULmxlbmd0aD5yLGE9ZS5pbmRlbnQrPXEsbT10aGlzLmxhc3ROb25Db21tZW50KHRoaXMucHJvcGVydGllcyksbj1bXSxzJiYoaz1lLnNjb3BlLmZyZWVWYXJpYWJsZShcIm9ialwiKSxuLnB1c2godGhpcy5tYWtlQ29kZShcIihcXG5cIithK2srXCIgPSBcIikpKSxuLnB1c2godGhpcy5tYWtlQ29kZShcIntcIisoMD09PVQubGVuZ3RofHwwPT09cj9cIn1cIjpcIlxcblwiKSkpLG89Zj0wLHk9VC5sZW5ndGg7eT5mO289KytmKXc9VFtvXSxvPT09ciYmKDAhPT1vJiZuLnB1c2godGhpcy5tYWtlQ29kZShcIlxcblwiK2ErXCJ9XCIpKSxuLnB1c2godGhpcy5tYWtlQ29kZShcIixcXG5cIikpKSx1PW89PT1ULmxlbmd0aC0xfHxvPT09ci0xP1wiXCI6dz09PW18fHcgaW5zdGFuY2VvZiBoP1wiXFxuXCI6XCIsXFxuXCIsYz13IGluc3RhbmNlb2YgaD9cIlwiOmEscyYmcj5vJiYoYys9cSksdyBpbnN0YW5jZW9mIGkmJncudmFyaWFibGUgaW5zdGFuY2VvZiB6JiZ3LnZhcmlhYmxlLmhhc1Byb3BlcnRpZXMoKSYmdy52YXJpYWJsZS5lcnJvcihcIkludmFsaWQgb2JqZWN0IGtleVwiKSx3IGluc3RhbmNlb2YgeiYmd1tcInRoaXNcIl0mJih3PW5ldyBpKHcucHJvcGVydGllc1swXS5uYW1lLHcsXCJvYmplY3RcIikpLHcgaW5zdGFuY2VvZiBofHwocj5vPyh3IGluc3RhbmNlb2YgaXx8KHc9bmV3IGkodyx3LFwib2JqZWN0XCIpKSwody52YXJpYWJsZS5iYXNlfHx3LnZhcmlhYmxlKS5hc0tleT0hMCk6KHcgaW5zdGFuY2VvZiBpPyhkPXcudmFyaWFibGUsRT13LnZhbHVlKTooQz13LmJhc2UuY2FjaGUoZSksZD1DWzBdLEU9Q1sxXSksdz1uZXcgaShuZXcgeihuZXcgeChrKSxbbmV3IHQoZCldKSxFKSkpLGMmJm4ucHVzaCh0aGlzLm1ha2VDb2RlKGMpKSxuLnB1c2guYXBwbHkobix3LmNvbXBpbGVUb0ZyYWdtZW50cyhlLEwpKSx1JiZuLnB1c2godGhpcy5tYWtlQ29kZSh1KSk7cmV0dXJuIHM/bi5wdXNoKHRoaXMubWFrZUNvZGUoXCIsXFxuXCIrYStrK1wiXFxuXCIrdGhpcy50YWIrXCIpXCIpKTowIT09VC5sZW5ndGgmJm4ucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIrdGhpcy50YWIrXCJ9XCIpKSx0aGlzLmZyb250JiYhcz90aGlzLndyYXBJbkJyYWNlcyhuKTpufSxuLnByb3RvdHlwZS5hc3NpZ25zPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyO2ZvcihyPXRoaXMucHJvcGVydGllcyx0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWlmKGk9clt0XSxpLmFzc2lnbnMoZSkpcmV0dXJuITA7cmV0dXJuITF9LG59KHIpLGUuQXJyPW49ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt0aGlzLm9iamVjdHM9ZXx8W119cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wib2JqZWN0c1wiXSx0LnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG8sYTtpZighdGhpcy5vYmplY3RzLmxlbmd0aClyZXR1cm5bdGhpcy5tYWtlQ29kZShcIltdXCIpXTtpZihlLmluZGVudCs9cSx0PUcuY29tcGlsZVNwbGF0dGVkQXJyYXkoZSx0aGlzLm9iamVjdHMpLHQubGVuZ3RoKXJldHVybiB0O2Zvcih0PVtdLG49ZnVuY3Rpb24oKXt2YXIgdCxuLGkscjtmb3IoaT10aGlzLm9iamVjdHMscj1bXSx0PTAsbj1pLmxlbmd0aDtuPnQ7dCsrKWE9aVt0XSxyLnB1c2goYS5jb21waWxlVG9GcmFnbWVudHMoZSxFKSk7cmV0dXJuIHJ9LmNhbGwodGhpcykscj1zPTAsbz1uLmxlbmd0aDtvPnM7cj0rK3MpaT1uW3JdLHImJnQucHVzaCh0aGlzLm1ha2VDb2RlKFwiLCBcIikpLHQucHVzaC5hcHBseSh0LGkpO3JldHVybiBzdCh0KS5pbmRleE9mKFwiXFxuXCIpPj0wPyh0LnVuc2hpZnQodGhpcy5tYWtlQ29kZShcIltcXG5cIitlLmluZGVudCkpLHQucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIrdGhpcy50YWIrXCJdXCIpKSk6KHQudW5zaGlmdCh0aGlzLm1ha2VDb2RlKFwiW1wiKSksdC5wdXNoKHRoaXMubWFrZUNvZGUoXCJdXCIpKSksdH0sdC5wcm90b3R5cGUuYXNzaWducz1mdW5jdGlvbihlKXt2YXIgdCxuLGkscjtmb3Iocj10aGlzLm9iamVjdHMsdD0wLG49ci5sZW5ndGg7bj50O3QrKylpZihpPXJbdF0saS5hc3NpZ25zKGUpKXJldHVybiEwO3JldHVybiExfSx0fShyKSxlLkNsYXNzPWE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbihlLHQsbil7dGhpcy52YXJpYWJsZT1lLHRoaXMucGFyZW50PXQsdGhpcy5ib2R5PW51bGwhPW4/bjpuZXcgcyx0aGlzLmJvdW5kRnVuY3M9W10sdGhpcy5ib2R5LmNsYXNzQm9keT0hMH1yZXR1cm4ga3QobixlKSxuLnByb3RvdHlwZS5jaGlsZHJlbj1bXCJ2YXJpYWJsZVwiLFwicGFyZW50XCIsXCJib2R5XCJdLG4ucHJvdG90eXBlLmRldGVybWluZU5hbWU9ZnVuY3Rpb24oKXt2YXIgZSxuLGk7cmV0dXJuIHRoaXMudmFyaWFibGU/KG49dGhpcy52YXJpYWJsZS5wcm9wZXJ0aWVzLGk9bltuLmxlbmd0aC0xXSxlPWk/aSBpbnN0YW5jZW9mIHQmJmkubmFtZS52YWx1ZTp0aGlzLnZhcmlhYmxlLmJhc2UudmFsdWUsVHQuY2FsbChWLGUpPj0wJiZ0aGlzLnZhcmlhYmxlLmVycm9yKFwiY2xhc3MgdmFyaWFibGUgbmFtZSBtYXkgbm90IGJlIFwiK2UpLGUmJihlPWcudGVzdChlKSYmZSkpOm51bGx9LG4ucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYm9keS50cmF2ZXJzZUNoaWxkcmVuKCExLGZ1bmN0aW9uKHQpe3JldHVybiB0LmNsYXNzQm9keT8hMTp0IGluc3RhbmNlb2YgeCYmXCJ0aGlzXCI9PT10LnZhbHVlP3QudmFsdWU9ZTp0IGluc3RhbmNlb2YgYyYmdC5ib3VuZD90LmNvbnRleHQ9ZTp2b2lkIDB9KX0sbi5wcm90b3R5cGUuYWRkQm91bmRGdW5jdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIG4saSxyLHMsbztmb3Iobz10aGlzLmJvdW5kRnVuY3MsaT0wLHI9by5sZW5ndGg7cj5pO2krKyluPW9baV0scz1uZXcgeihuZXcgeChcInRoaXNcIiksW25ldyB0KG4pXSkuY29tcGlsZShlKSx0aGlzLmN0b3IuYm9keS51bnNoaWZ0KG5ldyB4KHMrXCIgPSBcIitidChcImJpbmRcIixlKStcIihcIitzK1wiLCB0aGlzKVwiKSl9LG4ucHJvdG90eXBlLmFkZFByb3BlcnRpZXM9ZnVuY3Rpb24oZSxuLHIpe3ZhciBzLG8sYSxsLGgsdTtyZXR1cm4gdT1lLmJhc2UucHJvcGVydGllcy5zbGljZSgwKSxsPWZ1bmN0aW9uKCl7dmFyIGU7Zm9yKGU9W107bz11LnNoaWZ0KCk7KW8gaW5zdGFuY2VvZiBpJiYoYT1vLnZhcmlhYmxlLmJhc2UsZGVsZXRlIG8uY29udGV4dCxoPW8udmFsdWUsXCJjb25zdHJ1Y3RvclwiPT09YS52YWx1ZT8odGhpcy5jdG9yJiZvLmVycm9yKFwiY2Fubm90IGRlZmluZSBtb3JlIHRoYW4gb25lIGNvbnN0cnVjdG9yIGluIGEgY2xhc3NcIiksaC5ib3VuZCYmby5lcnJvcihcImNhbm5vdCBkZWZpbmUgYSBjb25zdHJ1Y3RvciBhcyBhIGJvdW5kIGZ1bmN0aW9uXCIpLGggaW5zdGFuY2VvZiBjP289dGhpcy5jdG9yPWg6KHRoaXMuZXh0ZXJuYWxDdG9yPXIuY2xhc3NTY29wZS5mcmVlVmFyaWFibGUoXCJjbGFzc1wiKSxvPW5ldyBpKG5ldyB4KHRoaXMuZXh0ZXJuYWxDdG9yKSxoKSkpOm8udmFyaWFibGVbXCJ0aGlzXCJdP2hbXCJzdGF0aWNcIl09ITA6KHM9YS5pc0NvbXBsZXgoKT9uZXcgdyhhKTpuZXcgdChhKSxvLnZhcmlhYmxlPW5ldyB6KG5ldyB4KG4pLFtuZXcgdChuZXcgeChcInByb3RvdHlwZVwiKSksc10pLGggaW5zdGFuY2VvZiBjJiZoLmJvdW5kJiYodGhpcy5ib3VuZEZ1bmNzLnB1c2goYSksaC5ib3VuZD0hMSkpKSxlLnB1c2gobyk7cmV0dXJuIGV9LmNhbGwodGhpcyksZXQobCl9LG4ucHJvdG90eXBlLndhbGtCb2R5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMudHJhdmVyc2VDaGlsZHJlbighMSxmdW5jdGlvbihyKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGEsYyxsLGgsdSxwLGQ7aWYoYT0hMCxvIGluc3RhbmNlb2YgbilyZXR1cm4hMTtpZihvIGluc3RhbmNlb2Ygcyl7Zm9yKGQ9Yz1vLmV4cHJlc3Npb25zLGw9aD0wLHU9ZC5sZW5ndGg7dT5oO2w9KytoKXA9ZFtsXSxwIGluc3RhbmNlb2YgaSYmcC52YXJpYWJsZS5sb29rc1N0YXRpYyhlKT9wLnZhbHVlW1wic3RhdGljXCJdPSEwOnAgaW5zdGFuY2VvZiB6JiZwLmlzT2JqZWN0KCEwKSYmKGE9ITEsY1tsXT1yLmFkZFByb3BlcnRpZXMocCxlLHQpKTtvLmV4cHJlc3Npb25zPWM9cnQoYyl9cmV0dXJuIGEmJiEobyBpbnN0YW5jZW9mIG4pfX0odGhpcykpfSxuLnByb3RvdHlwZS5ob2lzdERpcmVjdGl2ZVByb2xvZ3VlPWZ1bmN0aW9uKCl7dmFyIGUsdCxuO2Zvcih0PTAsZT10aGlzLmJvZHkuZXhwcmVzc2lvbnM7KG49ZVt0XSkmJm4gaW5zdGFuY2VvZiBofHxuIGluc3RhbmNlb2YgeiYmbi5pc1N0cmluZygpOykrK3Q7cmV0dXJuIHRoaXMuZGlyZWN0aXZlcz1lLnNwbGljZSgwLHQpfSxuLnByb3RvdHlwZS5lbnN1cmVDb25zdHJ1Y3Rvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jdG9yfHwodGhpcy5jdG9yPW5ldyBjLHRoaXMuZXh0ZXJuYWxDdG9yP3RoaXMuY3Rvci5ib2R5LnB1c2gobmV3IHgodGhpcy5leHRlcm5hbEN0b3IrXCIuYXBwbHkodGhpcywgYXJndW1lbnRzKVwiKSk6dGhpcy5wYXJlbnQmJnRoaXMuY3Rvci5ib2R5LnB1c2gobmV3IHgoZStcIi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKVwiKSksdGhpcy5jdG9yLmJvZHkubWFrZVJldHVybigpLHRoaXMuYm9keS5leHByZXNzaW9ucy51bnNoaWZ0KHRoaXMuY3RvcikpLHRoaXMuY3Rvci5jdG9yPXRoaXMuY3Rvci5uYW1lPWUsdGhpcy5jdG9yLmtsYXNzPW51bGwsdGhpcy5jdG9yLm5vUmV0dXJuPSEwfSxuLnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXt2YXIgdCxuLHIsYSxsLGgsdSxwLGY7cmV0dXJuKGE9dGhpcy5ib2R5Lmp1bXBzKCkpJiZhLmVycm9yKFwiQ2xhc3MgYm9kaWVzIGNhbm5vdCBjb250YWluIHB1cmUgc3RhdGVtZW50c1wiKSwobj10aGlzLmJvZHkuY29udGFpbnMoYXQpKSYmbi5lcnJvcihcIkNsYXNzIGJvZGllcyBzaG91bGRuJ3QgcmVmZXJlbmNlIGFyZ3VtZW50c1wiKSx1PXRoaXMuZGV0ZXJtaW5lTmFtZSgpfHxcIl9DbGFzc1wiLHUucmVzZXJ2ZWQmJih1PVwiX1wiK3UpLGg9bmV3IHgodSkscj1uZXcgYyhbXSxzLndyYXAoW3RoaXMuYm9keV0pKSx0PVtdLGUuY2xhc3NTY29wZT1yLm1ha2VTY29wZShlLnNjb3BlKSx0aGlzLmhvaXN0RGlyZWN0aXZlUHJvbG9ndWUoKSx0aGlzLnNldENvbnRleHQodSksdGhpcy53YWxrQm9keSh1LGUpLHRoaXMuZW5zdXJlQ29uc3RydWN0b3IodSksdGhpcy5hZGRCb3VuZEZ1bmN0aW9ucyhlKSx0aGlzLmJvZHkuc3BhY2VkPSEwLHRoaXMuYm9keS5leHByZXNzaW9ucy5wdXNoKGgpLHRoaXMucGFyZW50JiYoZj1uZXcgeChlLmNsYXNzU2NvcGUuZnJlZVZhcmlhYmxlKFwic3VwZXJDbGFzc1wiLHtyZXNlcnZlOiExfSkpLHRoaXMuYm9keS5leHByZXNzaW9ucy51bnNoaWZ0KG5ldyBkKGgsZikpLHIucGFyYW1zLnB1c2gobmV3IF8oZikpLHQucHVzaCh0aGlzLnBhcmVudCkpLChwPXRoaXMuYm9keS5leHByZXNzaW9ucykudW5zaGlmdC5hcHBseShwLHRoaXMuZGlyZWN0aXZlcyksbD1uZXcgTyhuZXcgbyhyLHQpKSx0aGlzLnZhcmlhYmxlJiYobD1uZXcgaSh0aGlzLnZhcmlhYmxlLGwpKSxsLmNvbXBpbGVUb0ZyYWdtZW50cyhlKX0sbn0ociksZS5Bc3NpZ249aT1mdW5jdGlvbihlKXtmdW5jdGlvbiBuKGUsdCxuLGkpe3ZhciByLHMsbzt0aGlzLnZhcmlhYmxlPWUsdGhpcy52YWx1ZT10LHRoaXMuY29udGV4dD1uLHRoaXMucGFyYW09aSYmaS5wYXJhbSx0aGlzLnN1YnBhdHRlcm49aSYmaS5zdWJwYXR0ZXJuLG89cz10aGlzLnZhcmlhYmxlLnVud3JhcEFsbCgpLnZhbHVlLHI9VHQuY2FsbChWLG8pPj0wLHImJlwib2JqZWN0XCIhPT10aGlzLmNvbnRleHQmJnRoaXMudmFyaWFibGUuZXJyb3IoJ3ZhcmlhYmxlIG5hbWUgbWF5IG5vdCBiZSBcIicrcysnXCInKX1yZXR1cm4ga3QobixlKSxuLnByb3RvdHlwZS5jaGlsZHJlbj1bXCJ2YXJpYWJsZVwiLFwidmFsdWVcIl0sbi5wcm90b3R5cGUuaXNTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuKG51bGwhPWU/ZS5sZXZlbDp2b2lkIDApPT09TCYmbnVsbCE9dGhpcy5jb250ZXh0JiZUdC5jYWxsKHRoaXMuY29udGV4dCxcIj9cIik+PTBcbn0sbi5wcm90b3R5cGUuYXNzaWducz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpc1tcIm9iamVjdFwiPT09dGhpcy5jb250ZXh0P1widmFsdWVcIjpcInZhcmlhYmxlXCJdLmFzc2lnbnMoZSl9LG4ucHJvdG90eXBlLnVuZm9sZFNvYWs9ZnVuY3Rpb24oZSl7cmV0dXJuIHl0KGUsdGhpcyxcInZhcmlhYmxlXCIpfSxuLnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG8sYSxsLGgsdSxwLGQsZixtO2lmKGk9dGhpcy52YXJpYWJsZSBpbnN0YW5jZW9mIHope2lmKHRoaXMudmFyaWFibGUuaXNBcnJheSgpfHx0aGlzLnZhcmlhYmxlLmlzT2JqZWN0KCkpcmV0dXJuIHRoaXMuY29tcGlsZVBhdHRlcm5NYXRjaChlKTtpZih0aGlzLnZhcmlhYmxlLmlzU3BsaWNlKCkpcmV0dXJuIHRoaXMuY29tcGlsZVNwbGljZShlKTtpZihcInx8PVwiPT09KGw9dGhpcy5jb250ZXh0KXx8XCImJj1cIj09PWx8fFwiPz1cIj09PWwpcmV0dXJuIHRoaXMuY29tcGlsZUNvbmRpdGlvbmFsKGUpO2lmKFwiKio9XCI9PT0oaD10aGlzLmNvbnRleHQpfHxcIi8vPVwiPT09aHx8XCIlJT1cIj09PWgpcmV0dXJuIHRoaXMuY29tcGlsZVNwZWNpYWxNYXRoKGUpfXJldHVybiB0aGlzLnZhbHVlIGluc3RhbmNlb2YgYyYmKHRoaXMudmFsdWVbXCJzdGF0aWNcIl0/KHRoaXMudmFsdWUua2xhc3M9dGhpcy52YXJpYWJsZS5iYXNlLHRoaXMudmFsdWUubmFtZT10aGlzLnZhcmlhYmxlLnByb3BlcnRpZXNbMF0sdGhpcy52YWx1ZS52YXJpYWJsZT10aGlzLnZhcmlhYmxlKToobnVsbCE9KHU9dGhpcy52YXJpYWJsZS5wcm9wZXJ0aWVzKT91Lmxlbmd0aDp2b2lkIDApPj0yJiYocD10aGlzLnZhcmlhYmxlLnByb3BlcnRpZXMsbz1wLmxlbmd0aD49Mz9DdC5jYWxsKHAsMCxyPXAubGVuZ3RoLTIpOihyPTAsW10pLGE9cFtyKytdLHM9cFtyKytdLFwicHJvdG90eXBlXCI9PT0obnVsbCE9KGQ9YS5uYW1lKT9kLnZhbHVlOnZvaWQgMCkmJih0aGlzLnZhbHVlLmtsYXNzPW5ldyB6KHRoaXMudmFyaWFibGUuYmFzZSxvKSx0aGlzLnZhbHVlLm5hbWU9cyx0aGlzLnZhbHVlLnZhcmlhYmxlPXRoaXMudmFyaWFibGUpKSksdGhpcy5jb250ZXh0fHwobT10aGlzLnZhcmlhYmxlLnVud3JhcEFsbCgpLG0uaXNBc3NpZ25hYmxlKCl8fHRoaXMudmFyaWFibGUuZXJyb3IoJ1wiJyt0aGlzLnZhcmlhYmxlLmNvbXBpbGUoZSkrJ1wiIGNhbm5vdCBiZSBhc3NpZ25lZCcpLChcImZ1bmN0aW9uXCI9PXR5cGVvZiBtLmhhc1Byb3BlcnRpZXM/bS5oYXNQcm9wZXJ0aWVzKCk6dm9pZCAwKXx8KHRoaXMucGFyYW0/ZS5zY29wZS5hZGQobS52YWx1ZSxcInZhclwiKTplLnNjb3BlLmZpbmQobS52YWx1ZSkpKSxmPXRoaXMudmFsdWUuY29tcGlsZVRvRnJhZ21lbnRzKGUsRSksbj10aGlzLnZhcmlhYmxlLmNvbXBpbGVUb0ZyYWdtZW50cyhlLEUpLFwib2JqZWN0XCI9PT10aGlzLmNvbnRleHQ/bi5jb25jYXQodGhpcy5tYWtlQ29kZShcIjogXCIpLGYpOih0PW4uY29uY2F0KHRoaXMubWFrZUNvZGUoXCIgXCIrKHRoaXMuY29udGV4dHx8XCI9XCIpK1wiIFwiKSxmKSxFPj1lLmxldmVsP3Q6dGhpcy53cmFwSW5CcmFjZXModCkpfSxuLnByb3RvdHlwZS5jb21waWxlUGF0dGVybk1hdGNoPWZ1bmN0aW9uKGUpe3ZhciBpLHIscyxvLGEsYyxsLGgsdSxkLGYsbSx2LHksYixrLFQsQyxOLFMsRCxSLEEsSSxfLGosTSxCO2lmKEk9ZS5sZXZlbD09PUwsaj10aGlzLnZhbHVlLHk9dGhpcy52YXJpYWJsZS5iYXNlLm9iamVjdHMsIShiPXkubGVuZ3RoKSlyZXR1cm4gcz1qLmNvbXBpbGVUb0ZyYWdtZW50cyhlKSxlLmxldmVsPj1GP3RoaXMud3JhcEluQnJhY2VzKHMpOnM7aWYoaD10aGlzLnZhcmlhYmxlLmlzT2JqZWN0KCksSSYmMT09PWImJiEoKHY9eVswXSlpbnN0YW5jZW9mIEcpKXJldHVybiB2IGluc3RhbmNlb2Ygbj8oVD12LEM9VC52YXJpYWJsZSxsPUMuYmFzZSx2PVQudmFsdWUpOmw9aD92W1widGhpc1wiXT92LnByb3BlcnRpZXNbMF0ubmFtZTp2Om5ldyB4KDApLGk9Zy50ZXN0KGwudW53cmFwKCkudmFsdWV8fDApLGo9bmV3IHooaiksai5wcm9wZXJ0aWVzLnB1c2gobmV3KGk/dDp3KShsKSksTj12LnVud3JhcCgpLnZhbHVlLFR0LmNhbGwoJCxOKT49MCYmdi5lcnJvcihcImFzc2lnbm1lbnQgdG8gYSByZXNlcnZlZCB3b3JkOiBcIit2LmNvbXBpbGUoZSkpLG5ldyBuKHYsaixudWxsLHtwYXJhbTp0aGlzLnBhcmFtfSkuY29tcGlsZVRvRnJhZ21lbnRzKGUsTCk7Zm9yKE09ai5jb21waWxlVG9GcmFnbWVudHMoZSxFKSxCPXN0KE0pLHI9W10sbz0hMSwoIWcudGVzdChCKXx8dGhpcy52YXJpYWJsZS5hc3NpZ25zKEIpKSYmKHIucHVzaChbdGhpcy5tYWtlQ29kZSgoaz1lLnNjb3BlLmZyZWVWYXJpYWJsZShcInJlZlwiKSkrXCIgPSBcIildLmNvbmNhdChDdC5jYWxsKE0pKSksTT1bdGhpcy5tYWtlQ29kZShrKV0sQj1rKSxjPWQ9MCxmPXkubGVuZ3RoO2Y+ZDtjPSsrZCl7aWYodj15W2NdLGw9YyxoJiYodiBpbnN0YW5jZW9mIG4/KFM9dixEPVMudmFyaWFibGUsbD1ELmJhc2Usdj1TLnZhbHVlKTp2LmJhc2UgaW5zdGFuY2VvZiBPPyhSPW5ldyB6KHYudW53cmFwQWxsKCkpLmNhY2hlUmVmZXJlbmNlKGUpLHY9UlswXSxsPVJbMV0pOmw9dltcInRoaXNcIl0/di5wcm9wZXJ0aWVzWzBdLm5hbWU6diksIW8mJnYgaW5zdGFuY2VvZiBHKW09di5uYW1lLnVud3JhcCgpLnZhbHVlLHY9di51bndyYXAoKSxfPWIrXCIgPD0gXCIrQitcIi5sZW5ndGggPyBcIitidChcInNsaWNlXCIsZSkrXCIuY2FsbChcIitCK1wiLCBcIitjLChBPWItYy0xKT8odT1lLnNjb3BlLmZyZWVWYXJpYWJsZShcImlcIix7c2luZ2xlOiEwfSksXys9XCIsIFwiK3UrXCIgPSBcIitCK1wiLmxlbmd0aCAtIFwiK0ErXCIpIDogKFwiK3UrXCIgPSBcIitjK1wiLCBbXSlcIik6Xys9XCIpIDogW11cIixfPW5ldyB4KF8pLG89dStcIisrXCI7ZWxzZXtpZighbyYmdiBpbnN0YW5jZW9mIHApeyhBPWItYy0xKSYmKDE9PT1BP289QitcIi5sZW5ndGggLSAxXCI6KHU9ZS5zY29wZS5mcmVlVmFyaWFibGUoXCJpXCIse3NpbmdsZTohMH0pLF89bmV3IHgodStcIiA9IFwiK0IrXCIubGVuZ3RoIC0gXCIrQSksbz11K1wiKytcIixyLnB1c2goXy5jb21waWxlVG9GcmFnbWVudHMoZSxFKSkpKTtjb250aW51ZX1tPXYudW53cmFwKCkudmFsdWUsKHYgaW5zdGFuY2VvZiBHfHx2IGluc3RhbmNlb2YgcCkmJnYuZXJyb3IoXCJtdWx0aXBsZSBzcGxhdHMvZXhwYW5zaW9ucyBhcmUgZGlzYWxsb3dlZCBpbiBhbiBhc3NpZ25tZW50XCIpLFwibnVtYmVyXCI9PXR5cGVvZiBsPyhsPW5ldyB4KG98fGwpLGk9ITEpOmk9aCYmZy50ZXN0KGwudW53cmFwKCkudmFsdWV8fDApLF89bmV3IHoobmV3IHgoQiksW25ldyhpP3Q6dykobCldKX1udWxsIT1tJiZUdC5jYWxsKCQsbSk+PTAmJnYuZXJyb3IoXCJhc3NpZ25tZW50IHRvIGEgcmVzZXJ2ZWQgd29yZDogXCIrdi5jb21waWxlKGUpKSxyLnB1c2gobmV3IG4odixfLG51bGwse3BhcmFtOnRoaXMucGFyYW0sc3VicGF0dGVybjohMH0pLmNvbXBpbGVUb0ZyYWdtZW50cyhlLEUpKX1yZXR1cm4gSXx8dGhpcy5zdWJwYXR0ZXJufHxyLnB1c2goTSksYT10aGlzLmpvaW5GcmFnbWVudEFycmF5cyhyLFwiLCBcIiksRT5lLmxldmVsP2E6dGhpcy53cmFwSW5CcmFjZXMoYSl9LG4ucHJvdG90eXBlLmNvbXBpbGVDb25kaXRpb25hbD1mdW5jdGlvbihlKXt2YXIgdCxpLHIscztyZXR1cm4gcj10aGlzLnZhcmlhYmxlLmNhY2hlUmVmZXJlbmNlKGUpLGk9clswXSxzPXJbMV0sIWkucHJvcGVydGllcy5sZW5ndGgmJmkuYmFzZSBpbnN0YW5jZW9mIHgmJlwidGhpc1wiIT09aS5iYXNlLnZhbHVlJiYhZS5zY29wZS5jaGVjayhpLmJhc2UudmFsdWUpJiZ0aGlzLnZhcmlhYmxlLmVycm9yKCd0aGUgdmFyaWFibGUgXCInK2kuYmFzZS52YWx1ZStcIlxcXCIgY2FuJ3QgYmUgYXNzaWduZWQgd2l0aCBcIit0aGlzLmNvbnRleHQrXCIgYmVjYXVzZSBpdCBoYXMgbm90IGJlZW4gZGVjbGFyZWQgYmVmb3JlXCIpLFR0LmNhbGwodGhpcy5jb250ZXh0LFwiP1wiKT49MD8oZS5pc0V4aXN0ZW50aWFsRXF1YWxzPSEwLG5ldyBiKG5ldyB1KGkpLHMse3R5cGU6XCJpZlwifSkuYWRkRWxzZShuZXcgbihzLHRoaXMudmFsdWUsXCI9XCIpKS5jb21waWxlVG9GcmFnbWVudHMoZSkpOih0PW5ldyBJKHRoaXMuY29udGV4dC5zbGljZSgwLC0xKSxpLG5ldyBuKHMsdGhpcy52YWx1ZSxcIj1cIikpLmNvbXBpbGVUb0ZyYWdtZW50cyhlKSxFPj1lLmxldmVsP3Q6dGhpcy53cmFwSW5CcmFjZXModCkpfSxuLnByb3RvdHlwZS5jb21waWxlU3BlY2lhbE1hdGg9ZnVuY3Rpb24oZSl7dmFyIHQsaSxyO3JldHVybiBpPXRoaXMudmFyaWFibGUuY2FjaGVSZWZlcmVuY2UoZSksdD1pWzBdLHI9aVsxXSxuZXcgbih0LG5ldyBJKHRoaXMuY29udGV4dC5zbGljZSgwLC0xKSxyLHRoaXMudmFsdWUpKS5jb21waWxlVG9GcmFnbWVudHMoZSl9LG4ucHJvdG90eXBlLmNvbXBpbGVTcGxpY2U9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvLGEsYyxsLGgsdSxwO3JldHVybiBhPXRoaXMudmFyaWFibGUucHJvcGVydGllcy5wb3AoKS5yYW5nZSxpPWEuZnJvbSxoPWEudG8sbj1hLmV4Y2x1c2l2ZSxvPXRoaXMudmFyaWFibGUuY29tcGlsZShlKSxpPyhjPXRoaXMuY2FjaGVUb0NvZGVGcmFnbWVudHMoaS5jYWNoZShlLEYpKSxyPWNbMF0scz1jWzFdKTpyPXM9XCIwXCIsaD9pIGluc3RhbmNlb2YgeiYmaS5pc1NpbXBsZU51bWJlcigpJiZoIGluc3RhbmNlb2YgeiYmaC5pc1NpbXBsZU51bWJlcigpPyhoPWguY29tcGlsZShlKS1zLG58fChoKz0xKSk6KGg9aC5jb21waWxlKGUsVCkrXCIgLSBcIitzLG58fChoKz1cIiArIDFcIikpOmg9XCI5ZTlcIixsPXRoaXMudmFsdWUuY2FjaGUoZSxFKSx1PWxbMF0scD1sWzFdLHQ9W10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJbXS5zcGxpY2UuYXBwbHkoXCIrbytcIiwgW1wiK3IrXCIsIFwiK2grXCJdLmNvbmNhdChcIiksdSx0aGlzLm1ha2VDb2RlKFwiKSksIFwiKSxwKSxlLmxldmVsPkw/dGhpcy53cmFwSW5CcmFjZXModCk6dH0sbn0ociksZS5Db2RlPWM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQsbil7dGhpcy5wYXJhbXM9ZXx8W10sdGhpcy5ib2R5PXR8fG5ldyBzLHRoaXMuYm91bmQ9XCJib3VuZGZ1bmNcIj09PW4sdGhpcy5pc0dlbmVyYXRvcj0hIXRoaXMuYm9keS5jb250YWlucyhmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIEkmJihcInlpZWxkXCI9PT0odD1lLm9wZXJhdG9yKXx8XCJ5aWVsZCpcIj09PXQpfSl9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wicGFyYW1zXCIsXCJib2R5XCJdLHQucHJvdG90eXBlLmlzU3RhdGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmN0b3J9LHQucHJvdG90eXBlLmp1bXBzPUQsdC5wcm90b3R5cGUubWFrZVNjb3BlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUChlLHRoaXMuYm9keSx0aGlzKX0sdC5wcm90b3R5cGUuY29tcGlsZU5vZGU9ZnVuY3Rpb24oZSl7dmFyIHIsYSxjLGwsaCx1LGQsZixtLGcsdix5LGssdyxDLEUsRixOLEwsUyxELFIsQSxPLCQsaixNLEIsVixQLFUsRyxIO2lmKHRoaXMuYm91bmQmJihudWxsIT0oQT1lLnNjb3BlLm1ldGhvZCk/QS5ib3VuZDp2b2lkIDApJiYodGhpcy5jb250ZXh0PWUuc2NvcGUubWV0aG9kLmNvbnRleHQpLHRoaXMuYm91bmQmJiF0aGlzLmNvbnRleHQpcmV0dXJuIHRoaXMuY29udGV4dD1cIl90aGlzXCIsSD1uZXcgdChbbmV3IF8obmV3IHgodGhpcy5jb250ZXh0KSldLG5ldyBzKFt0aGlzXSkpLGE9bmV3IG8oSCxbbmV3IHgoXCJ0aGlzXCIpXSksYS51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcodGhpcy5sb2NhdGlvbkRhdGEpLGEuY29tcGlsZU5vZGUoZSk7Zm9yKGUuc2NvcGU9dHQoZSxcImNsYXNzU2NvcGVcIil8fHRoaXMubWFrZVNjb3BlKGUuc2NvcGUpLGUuc2NvcGUuc2hhcmVkPXR0KGUsXCJzaGFyZWRTY29wZVwiKSxlLmluZGVudCs9cSxkZWxldGUgZS5iYXJlLGRlbGV0ZSBlLmlzRXhpc3RlbnRpYWxFcXVhbHMsTD1bXSxsPVtdLE89dGhpcy5wYXJhbXMsdT0wLG09Ty5sZW5ndGg7bT51O3UrKylOPU9bdV0sTiBpbnN0YW5jZW9mIHB8fGUuc2NvcGUucGFyYW1ldGVyKE4uYXNSZWZlcmVuY2UoZSkpO2ZvcigkPXRoaXMucGFyYW1zLGQ9MCxnPSQubGVuZ3RoO2c+ZDtkKyspaWYoTj0kW2RdLE4uc3BsYXR8fE4gaW5zdGFuY2VvZiBwKXtmb3Ioaj10aGlzLnBhcmFtcyxmPTAsdj1qLmxlbmd0aDt2PmY7ZisrKUY9altmXSxGIGluc3RhbmNlb2YgcHx8IUYubmFtZS52YWx1ZXx8ZS5zY29wZS5hZGQoRi5uYW1lLnZhbHVlLFwidmFyXCIsITApO1Y9bmV3IGkobmV3IHoobmV3IG4oZnVuY3Rpb24oKXt2YXIgdCxuLGkscjtmb3IoaT10aGlzLnBhcmFtcyxyPVtdLG49MCx0PWkubGVuZ3RoO3Q+bjtuKyspRj1pW25dLHIucHVzaChGLmFzUmVmZXJlbmNlKGUpKTtyZXR1cm4gcn0uY2FsbCh0aGlzKSkpLG5ldyB6KG5ldyB4KFwiYXJndW1lbnRzXCIpKSk7YnJlYWt9Zm9yKE09dGhpcy5wYXJhbXMsRT0wLHk9TS5sZW5ndGg7eT5FO0UrKylOPU1bRV0sTi5pc0NvbXBsZXgoKT8oVT1SPU4uYXNSZWZlcmVuY2UoZSksTi52YWx1ZSYmKFU9bmV3IEkoXCI/XCIsUixOLnZhbHVlKSksbC5wdXNoKG5ldyBpKG5ldyB6KE4ubmFtZSksVSxcIj1cIix7cGFyYW06ITB9KSkpOihSPU4sTi52YWx1ZSYmKEM9bmV3IHgoUi5uYW1lLnZhbHVlK1wiID09IG51bGxcIiksVT1uZXcgaShuZXcgeihOLm5hbWUpLE4udmFsdWUsXCI9XCIpLGwucHVzaChuZXcgYihDLFUpKSkpLFZ8fEwucHVzaChSKTtmb3IoRz10aGlzLmJvZHkuaXNFbXB0eSgpLFYmJmwudW5zaGlmdChWKSxsLmxlbmd0aCYmKEI9dGhpcy5ib2R5LmV4cHJlc3Npb25zKS51bnNoaWZ0LmFwcGx5KEIsbCksaD1TPTAsaz1MLmxlbmd0aDtrPlM7aD0rK1MpRj1MW2hdLExbaF09Ri5jb21waWxlVG9GcmFnbWVudHMoZSksZS5zY29wZS5wYXJhbWV0ZXIoc3QoTFtoXSkpO2ZvcihQPVtdLHRoaXMuZWFjaFBhcmFtTmFtZShmdW5jdGlvbihlLHQpe3JldHVybiBUdC5jYWxsKFAsZSk+PTAmJnQuZXJyb3IoXCJtdWx0aXBsZSBwYXJhbWV0ZXJzIG5hbWVkIFwiK2UpLFAucHVzaChlKX0pLEd8fHRoaXMubm9SZXR1cm58fHRoaXMuYm9keS5tYWtlUmV0dXJuKCksYz1cImZ1bmN0aW9uXCIsdGhpcy5pc0dlbmVyYXRvciYmKGMrPVwiKlwiKSx0aGlzLmN0b3ImJihjKz1cIiBcIit0aGlzLm5hbWUpLGMrPVwiKFwiLHI9W3RoaXMubWFrZUNvZGUoYyldLGg9RD0wLHc9TC5sZW5ndGg7dz5EO2g9KytEKUY9TFtoXSxoJiZyLnB1c2godGhpcy5tYWtlQ29kZShcIiwgXCIpKSxyLnB1c2guYXBwbHkocixGKTtyZXR1cm4gci5wdXNoKHRoaXMubWFrZUNvZGUoXCIpIHtcIikpLHRoaXMuYm9keS5pc0VtcHR5KCl8fChyPXIuY29uY2F0KHRoaXMubWFrZUNvZGUoXCJcXG5cIiksdGhpcy5ib2R5LmNvbXBpbGVXaXRoRGVjbGFyYXRpb25zKGUpLHRoaXMubWFrZUNvZGUoXCJcXG5cIit0aGlzLnRhYikpKSxyLnB1c2godGhpcy5tYWtlQ29kZShcIn1cIikpLHRoaXMuY3Rvcj9bdGhpcy5tYWtlQ29kZSh0aGlzLnRhYildLmNvbmNhdChDdC5jYWxsKHIpKTp0aGlzLmZyb250fHxlLmxldmVsPj1UP3RoaXMud3JhcEluQnJhY2VzKHIpOnJ9LHQucHJvdG90eXBlLmVhY2hQYXJhbU5hbWU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscztmb3Iocj10aGlzLnBhcmFtcyxzPVtdLHQ9MCxuPXIubGVuZ3RoO24+dDt0KyspaT1yW3RdLHMucHVzaChpLmVhY2hOYW1lKGUpKTtyZXR1cm4gc30sdC5wcm90b3R5cGUudHJhdmVyc2VDaGlsZHJlbj1mdW5jdGlvbihlLG4pe3JldHVybiBlP3QuX19zdXBlcl9fLnRyYXZlcnNlQ2hpbGRyZW4uY2FsbCh0aGlzLGUsbik6dm9pZCAwfSx0fShyKSxlLlBhcmFtPV89ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQsbil7dmFyIGkscjt0aGlzLm5hbWU9ZSx0aGlzLnZhbHVlPXQsdGhpcy5zcGxhdD1uLHI9aT10aGlzLm5hbWUudW53cmFwQWxsKCkudmFsdWUsVHQuY2FsbChWLHIpPj0wJiZ0aGlzLm5hbWUuZXJyb3IoJ3BhcmFtZXRlciBuYW1lIFwiJytpKydcIiBpcyBub3QgYWxsb3dlZCcpfXJldHVybiBrdCh0LGUpLHQucHJvdG90eXBlLmNoaWxkcmVuPVtcIm5hbWVcIixcInZhbHVlXCJdLHQucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5uYW1lLmNvbXBpbGVUb0ZyYWdtZW50cyhlLEUpfSx0LnByb3RvdHlwZS5hc1JlZmVyZW5jZT1mdW5jdGlvbihlKXt2YXIgdCxuO3JldHVybiB0aGlzLnJlZmVyZW5jZT90aGlzLnJlZmVyZW5jZToobj10aGlzLm5hbWUsbltcInRoaXNcIl0/KHQ9bi5wcm9wZXJ0aWVzWzBdLm5hbWUudmFsdWUsdC5yZXNlcnZlZCYmKHQ9XCJfXCIrdCksbj1uZXcgeChlLnNjb3BlLmZyZWVWYXJpYWJsZSh0KSkpOm4uaXNDb21wbGV4KCkmJihuPW5ldyB4KGUuc2NvcGUuZnJlZVZhcmlhYmxlKFwiYXJnXCIpKSksbj1uZXcgeihuKSx0aGlzLnNwbGF0JiYobj1uZXcgRyhuKSksbi51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcodGhpcy5sb2NhdGlvbkRhdGEpLHRoaXMucmVmZXJlbmNlPW4pfSx0LnByb3RvdHlwZS5pc0NvbXBsZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lLmlzQ29tcGxleCgpfSx0LnByb3RvdHlwZS5lYWNoTmFtZT1mdW5jdGlvbihlLHQpe3ZhciBuLHIscyxvLGEsYztpZihudWxsPT10JiYodD10aGlzLm5hbWUpLG49ZnVuY3Rpb24odCl7cmV0dXJuIGUoXCJAXCIrdC5wcm9wZXJ0aWVzWzBdLm5hbWUudmFsdWUsdCl9LHQgaW5zdGFuY2VvZiB4KXJldHVybiBlKHQudmFsdWUsdCk7aWYodCBpbnN0YW5jZW9mIHopcmV0dXJuIG4odCk7Zm9yKGM9dC5vYmplY3RzLHI9MCxzPWMubGVuZ3RoO3M+cjtyKyspYT1jW3JdLGEgaW5zdGFuY2VvZiBpP3RoaXMuZWFjaE5hbWUoZSxhLnZhbHVlLnVud3JhcCgpKTphIGluc3RhbmNlb2YgRz8obz1hLm5hbWUudW53cmFwKCksZShvLnZhbHVlLG8pKTphIGluc3RhbmNlb2Ygej9hLmlzQXJyYXkoKXx8YS5pc09iamVjdCgpP3RoaXMuZWFjaE5hbWUoZSxhLmJhc2UpOmFbXCJ0aGlzXCJdP24oYSk6ZShhLmJhc2UudmFsdWUsYS5iYXNlKTphIGluc3RhbmNlb2YgcHx8YS5lcnJvcihcImlsbGVnYWwgcGFyYW1ldGVyIFwiK2EuY29tcGlsZSgpKX0sdH0ociksZS5TcGxhdD1HPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5uYW1lPWUuY29tcGlsZT9lOm5ldyB4KGUpfXJldHVybiBrdCh0LGUpLHQucHJvdG90eXBlLmNoaWxkcmVuPVtcIm5hbWVcIl0sdC5wcm90b3R5cGUuaXNBc3NpZ25hYmxlPVEsdC5wcm90b3R5cGUuYXNzaWducz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5uYW1lLmFzc2lnbnMoZSl9LHQucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5uYW1lLmNvbXBpbGVUb0ZyYWdtZW50cyhlKX0sdC5wcm90b3R5cGUudW53cmFwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX0sdC5jb21waWxlU3BsYXR0ZWRBcnJheT1mdW5jdGlvbihlLG4saSl7dmFyIHIscyxvLGEsYyxsLGgsdSxwLGQsZjtmb3IoaD0tMTsoZj1uWysraF0pJiYhKGYgaW5zdGFuY2VvZiB0KTspO2lmKGg+PW4ubGVuZ3RoKXJldHVybltdO2lmKDE9PT1uLmxlbmd0aClyZXR1cm4gZj1uWzBdLGM9Zi5jb21waWxlVG9GcmFnbWVudHMoZSxFKSxpP2M6W10uY29uY2F0KGYubWFrZUNvZGUoYnQoXCJzbGljZVwiLGUpK1wiLmNhbGwoXCIpLGMsZi5tYWtlQ29kZShcIilcIikpO2ZvcihyPW4uc2xpY2UoaCksbD11PTAsZD1yLmxlbmd0aDtkPnU7bD0rK3UpZj1yW2xdLG89Zi5jb21waWxlVG9GcmFnbWVudHMoZSxFKSxyW2xdPWYgaW5zdGFuY2VvZiB0P1tdLmNvbmNhdChmLm1ha2VDb2RlKGJ0KFwic2xpY2VcIixlKStcIi5jYWxsKFwiKSxvLGYubWFrZUNvZGUoXCIpXCIpKTpbXS5jb25jYXQoZi5tYWtlQ29kZShcIltcIiksbyxmLm1ha2VDb2RlKFwiXVwiKSk7cmV0dXJuIDA9PT1oPyhmPW5bMF0sYT1mLmpvaW5GcmFnbWVudEFycmF5cyhyLnNsaWNlKDEpLFwiLCBcIiksclswXS5jb25jYXQoZi5tYWtlQ29kZShcIi5jb25jYXQoXCIpLGEsZi5tYWtlQ29kZShcIilcIikpKToocz1mdW5jdGlvbigpe3ZhciB0LGkscixzO2ZvcihyPW4uc2xpY2UoMCxoKSxzPVtdLHQ9MCxpPXIubGVuZ3RoO2k+dDt0KyspZj1yW3RdLHMucHVzaChmLmNvbXBpbGVUb0ZyYWdtZW50cyhlLEUpKTtyZXR1cm4gc30oKSxzPW5bMF0uam9pbkZyYWdtZW50QXJyYXlzKHMsXCIsIFwiKSxhPW5baF0uam9pbkZyYWdtZW50QXJyYXlzKHIsXCIsIFwiKSxwPW5bbi5sZW5ndGgtMV0sW10uY29uY2F0KG5bMF0ubWFrZUNvZGUoXCJbXCIpLHMsbltoXS5tYWtlQ29kZShcIl0uY29uY2F0KFwiKSxhLHAubWFrZUNvZGUoXCIpXCIpKSl9LHR9KHIpLGUuRXhwYW5zaW9uPXA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuaXNDb21wbGV4PUQsdC5wcm90b3R5cGUuY29tcGlsZU5vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcnJvcihcIkV4cGFuc2lvbiBtdXN0IGJlIHVzZWQgaW5zaWRlIGEgZGVzdHJ1Y3R1cmluZyBhc3NpZ25tZW50IG9yIHBhcmFtZXRlciBsaXN0XCIpfSx0LnByb3RvdHlwZS5hc1JlZmVyZW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5lYWNoTmFtZT1mdW5jdGlvbigpe30sdH0ociksZS5XaGlsZT1KPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt0aGlzLmNvbmRpdGlvbj0obnVsbCE9dD90LmludmVydDp2b2lkIDApP2UuaW52ZXJ0KCk6ZSx0aGlzLmd1YXJkPW51bGwhPXQ/dC5ndWFyZDp2b2lkIDB9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wiY29uZGl0aW9uXCIsXCJndWFyZFwiLFwiYm9keVwiXSx0LnByb3RvdHlwZS5pc1N0YXRlbWVudD1RLHQucHJvdG90eXBlLm1ha2VSZXR1cm49ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dC5fX3N1cGVyX18ubWFrZVJldHVybi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KHRoaXMucmV0dXJucz0hdGhpcy5qdW1wcyh7bG9vcDohMH0pLHRoaXMpfSx0LnByb3RvdHlwZS5hZGRCb2R5PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmJvZHk9ZSx0aGlzfSx0LnByb3RvdHlwZS5qdW1wcz1mdW5jdGlvbigpe3ZhciBlLHQsbixpLHI7aWYoZT10aGlzLmJvZHkuZXhwcmVzc2lvbnMsIWUubGVuZ3RoKXJldHVybiExO2Zvcih0PTAsaT1lLmxlbmd0aDtpPnQ7dCsrKWlmKHI9ZVt0XSxuPXIuanVtcHMoe2xvb3A6ITB9KSlyZXR1cm4gbjtyZXR1cm4hMX0sdC5wcm90b3R5cGUuY29tcGlsZU5vZGU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI7cmV0dXJuIGUuaW5kZW50Kz1xLHI9XCJcIixuPXRoaXMuYm9keSxuLmlzRW1wdHkoKT9uPXRoaXMubWFrZUNvZGUoXCJcIik6KHRoaXMucmV0dXJucyYmKG4ubWFrZVJldHVybihpPWUuc2NvcGUuZnJlZVZhcmlhYmxlKFwicmVzdWx0c1wiKSkscj1cIlwiK3RoaXMudGFiK2krXCIgPSBbXTtcXG5cIiksdGhpcy5ndWFyZCYmKG4uZXhwcmVzc2lvbnMubGVuZ3RoPjE/bi5leHByZXNzaW9ucy51bnNoaWZ0KG5ldyBiKG5ldyBPKHRoaXMuZ3VhcmQpLmludmVydCgpLG5ldyB4KFwiY29udGludWVcIikpKTp0aGlzLmd1YXJkJiYobj1zLndyYXAoW25ldyBiKHRoaXMuZ3VhcmQsbildKSkpLG49W10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJcXG5cIiksbi5jb21waWxlVG9GcmFnbWVudHMoZSxMKSx0aGlzLm1ha2VDb2RlKFwiXFxuXCIrdGhpcy50YWIpKSksdD1bXS5jb25jYXQodGhpcy5tYWtlQ29kZShyK3RoaXMudGFiK1wid2hpbGUgKFwiKSx0aGlzLmNvbmRpdGlvbi5jb21waWxlVG9GcmFnbWVudHMoZSxOKSx0aGlzLm1ha2VDb2RlKFwiKSB7XCIpLG4sdGhpcy5tYWtlQ29kZShcIn1cIikpLHRoaXMucmV0dXJucyYmdC5wdXNoKHRoaXMubWFrZUNvZGUoXCJcXG5cIit0aGlzLnRhYitcInJldHVybiBcIitpK1wiO1wiKSksdH0sdH0ociksZS5PcD1JPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4oZSx0LG4saSl7aWYoXCJpblwiPT09ZSlyZXR1cm4gbmV3IGsodCxuKTtpZihcImRvXCI9PT1lKXJldHVybiB0aGlzLmdlbmVyYXRlRG8odCk7aWYoXCJuZXdcIj09PWUpe2lmKHQgaW5zdGFuY2VvZiBvJiYhdFtcImRvXCJdJiYhdC5pc05ldylyZXR1cm4gdC5uZXdJbnN0YW5jZSgpOyh0IGluc3RhbmNlb2YgYyYmdC5ib3VuZHx8dFtcImRvXCJdKSYmKHQ9bmV3IE8odCkpfXJldHVybiB0aGlzLm9wZXJhdG9yPXJbZV18fGUsdGhpcy5maXJzdD10LHRoaXMuc2Vjb25kPW4sdGhpcy5mbGlwPSEhaSx0aGlzfXZhciByLHM7cmV0dXJuIGt0KG4sZSkscj17XCI9PVwiOlwiPT09XCIsXCIhPVwiOlwiIT09XCIsb2Y6XCJpblwiLHlpZWxkZnJvbTpcInlpZWxkKlwifSxzPXtcIiE9PVwiOlwiPT09XCIsXCI9PT1cIjpcIiE9PVwifSxuLnByb3RvdHlwZS5jaGlsZHJlbj1bXCJmaXJzdFwiLFwic2Vjb25kXCJdLG4ucHJvdG90eXBlLmlzU2ltcGxlTnVtYmVyPUQsbi5wcm90b3R5cGUuaXNZaWVsZD1mdW5jdGlvbigpe3ZhciBlO3JldHVyblwieWllbGRcIj09PShlPXRoaXMub3BlcmF0b3IpfHxcInlpZWxkKlwiPT09ZX0sbi5wcm90b3R5cGUuaXNZaWVsZFJldHVybj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzWWllbGQoKSYmdGhpcy5maXJzdCBpbnN0YW5jZW9mIE19LG4ucHJvdG90eXBlLmlzVW5hcnk9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5zZWNvbmR9LG4ucHJvdG90eXBlLmlzQ29tcGxleD1mdW5jdGlvbigpe3ZhciBlO3JldHVybiEodGhpcy5pc1VuYXJ5KCkmJihcIitcIj09PShlPXRoaXMub3BlcmF0b3IpfHxcIi1cIj09PWUpJiZ0aGlzLmZpcnN0IGluc3RhbmNlb2YgeiYmdGhpcy5maXJzdC5pc1NpbXBsZU51bWJlcigpKX0sbi5wcm90b3R5cGUuaXNDaGFpbmFibGU9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm5cIjxcIj09PShlPXRoaXMub3BlcmF0b3IpfHxcIj5cIj09PWV8fFwiPj1cIj09PWV8fFwiPD1cIj09PWV8fFwiPT09XCI9PT1lfHxcIiE9PVwiPT09ZX0sbi5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7dmFyIGUsdCxpLHIsbztpZih0aGlzLmlzQ2hhaW5hYmxlKCkmJnRoaXMuZmlyc3QuaXNDaGFpbmFibGUoKSl7Zm9yKGU9ITAsdD10aGlzO3QmJnQub3BlcmF0b3I7KWUmJihlPXQub3BlcmF0b3IgaW4gcyksdD10LmZpcnN0O2lmKCFlKXJldHVybiBuZXcgTyh0aGlzKS5pbnZlcnQoKTtmb3IodD10aGlzO3QmJnQub3BlcmF0b3I7KXQuaW52ZXJ0PSF0LmludmVydCx0Lm9wZXJhdG9yPXNbdC5vcGVyYXRvcl0sdD10LmZpcnN0O3JldHVybiB0aGlzfXJldHVybihyPXNbdGhpcy5vcGVyYXRvcl0pPyh0aGlzLm9wZXJhdG9yPXIsdGhpcy5maXJzdC51bndyYXAoKWluc3RhbmNlb2YgbiYmdGhpcy5maXJzdC5pbnZlcnQoKSx0aGlzKTp0aGlzLnNlY29uZD9uZXcgTyh0aGlzKS5pbnZlcnQoKTpcIiFcIj09PXRoaXMub3BlcmF0b3ImJihpPXRoaXMuZmlyc3QudW53cmFwKCkpaW5zdGFuY2VvZiBuJiYoXCIhXCI9PT0obz1pLm9wZXJhdG9yKXx8XCJpblwiPT09b3x8XCJpbnN0YW5jZW9mXCI9PT1vKT9pOm5ldyBuKFwiIVwiLHRoaXMpfSxuLnByb3RvdHlwZS51bmZvbGRTb2FrPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybihcIisrXCI9PT0odD10aGlzLm9wZXJhdG9yKXx8XCItLVwiPT09dHx8XCJkZWxldGVcIj09PXQpJiZ5dChlLHRoaXMsXCJmaXJzdFwiKX0sbi5wcm90b3R5cGUuZ2VuZXJhdGVEbz1mdW5jdGlvbihlKXt2YXIgdCxuLHIscyxhLGwsaCx1O2ZvcihsPVtdLG49ZSBpbnN0YW5jZW9mIGkmJihoPWUudmFsdWUudW53cmFwKCkpaW5zdGFuY2VvZiBjP2g6ZSx1PW4ucGFyYW1zfHxbXSxyPTAscz11Lmxlbmd0aDtzPnI7cisrKWE9dVtyXSxhLnZhbHVlPyhsLnB1c2goYS52YWx1ZSksZGVsZXRlIGEudmFsdWUpOmwucHVzaChhKTtyZXR1cm4gdD1uZXcgbyhlLGwpLHRbXCJkb1wiXT0hMCx0fSxuLnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG87aWYobj10aGlzLmlzQ2hhaW5hYmxlKCkmJnRoaXMuZmlyc3QuaXNDaGFpbmFibGUoKSxufHwodGhpcy5maXJzdC5mcm9udD10aGlzLmZyb250KSxcImRlbGV0ZVwiPT09dGhpcy5vcGVyYXRvciYmZS5zY29wZS5jaGVjayh0aGlzLmZpcnN0LnVud3JhcEFsbCgpLnZhbHVlKSYmdGhpcy5lcnJvcihcImRlbGV0ZSBvcGVyYW5kIG1heSBub3QgYmUgYXJndW1lbnQgb3IgdmFyXCIpLChcIi0tXCI9PT0ocj10aGlzLm9wZXJhdG9yKXx8XCIrK1wiPT09cikmJihzPXRoaXMuZmlyc3QudW53cmFwQWxsKCkudmFsdWUsVHQuY2FsbChWLHMpPj0wKSYmdGhpcy5lcnJvcignY2Fubm90IGluY3JlbWVudC9kZWNyZW1lbnQgXCInK3RoaXMuZmlyc3QudW53cmFwQWxsKCkudmFsdWUrJ1wiJyksdGhpcy5pc1lpZWxkKCkpcmV0dXJuIHRoaXMuY29tcGlsZVlpZWxkKGUpO2lmKHRoaXMuaXNVbmFyeSgpKXJldHVybiB0aGlzLmNvbXBpbGVVbmFyeShlKTtpZihuKXJldHVybiB0aGlzLmNvbXBpbGVDaGFpbihlKTtzd2l0Y2godGhpcy5vcGVyYXRvcil7Y2FzZVwiP1wiOnJldHVybiB0aGlzLmNvbXBpbGVFeGlzdGVuY2UoZSk7Y2FzZVwiKipcIjpyZXR1cm4gdGhpcy5jb21waWxlUG93ZXIoZSk7Y2FzZVwiLy9cIjpyZXR1cm4gdGhpcy5jb21waWxlRmxvb3JEaXZpc2lvbihlKTtjYXNlXCIlJVwiOnJldHVybiB0aGlzLmNvbXBpbGVNb2R1bG8oZSk7ZGVmYXVsdDpyZXR1cm4gaT10aGlzLmZpcnN0LmNvbXBpbGVUb0ZyYWdtZW50cyhlLEYpLG89dGhpcy5zZWNvbmQuY29tcGlsZVRvRnJhZ21lbnRzKGUsRiksdD1bXS5jb25jYXQoaSx0aGlzLm1ha2VDb2RlKFwiIFwiK3RoaXMub3BlcmF0b3IrXCIgXCIpLG8pLEY+PWUubGV2ZWw/dDp0aGlzLndyYXBJbkJyYWNlcyh0KX19LG4ucHJvdG90eXBlLmNvbXBpbGVDaGFpbj1mdW5jdGlvbihlKXt2YXIgdCxuLGkscjtyZXR1cm4gaT10aGlzLmZpcnN0LnNlY29uZC5jYWNoZShlKSx0aGlzLmZpcnN0LnNlY29uZD1pWzBdLHI9aVsxXSxuPXRoaXMuZmlyc3QuY29tcGlsZVRvRnJhZ21lbnRzKGUsRiksdD1uLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiIFwiKyh0aGlzLmludmVydD9cIiYmXCI6XCJ8fFwiKStcIiBcIiksci5jb21waWxlVG9GcmFnbWVudHMoZSksdGhpcy5tYWtlQ29kZShcIiBcIit0aGlzLm9wZXJhdG9yK1wiIFwiKSx0aGlzLnNlY29uZC5jb21waWxlVG9GcmFnbWVudHMoZSxGKSksdGhpcy53cmFwSW5CcmFjZXModCl9LG4ucHJvdG90eXBlLmNvbXBpbGVFeGlzdGVuY2U9ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gdGhpcy5maXJzdC5pc0NvbXBsZXgoKT8obj1uZXcgeChlLnNjb3BlLmZyZWVWYXJpYWJsZShcInJlZlwiKSksdD1uZXcgTyhuZXcgaShuLHRoaXMuZmlyc3QpKSk6KHQ9dGhpcy5maXJzdCxuPXQpLG5ldyBiKG5ldyB1KHQpLG4se3R5cGU6XCJpZlwifSkuYWRkRWxzZSh0aGlzLnNlY29uZCkuY29tcGlsZVRvRnJhZ21lbnRzKGUpfSxuLnByb3RvdHlwZS5jb21waWxlVW5hcnk9ZnVuY3Rpb24oZSl7dmFyIHQsaSxyO3JldHVybiBpPVtdLHQ9dGhpcy5vcGVyYXRvcixpLnB1c2goW3RoaXMubWFrZUNvZGUodCldKSxcIiFcIj09PXQmJnRoaXMuZmlyc3QgaW5zdGFuY2VvZiB1Pyh0aGlzLmZpcnN0Lm5lZ2F0ZWQ9IXRoaXMuZmlyc3QubmVnYXRlZCx0aGlzLmZpcnN0LmNvbXBpbGVUb0ZyYWdtZW50cyhlKSk6ZS5sZXZlbD49VD9uZXcgTyh0aGlzKS5jb21waWxlVG9GcmFnbWVudHMoZSk6KHI9XCIrXCI9PT10fHxcIi1cIj09PXQsKFwibmV3XCI9PT10fHxcInR5cGVvZlwiPT09dHx8XCJkZWxldGVcIj09PXR8fHImJnRoaXMuZmlyc3QgaW5zdGFuY2VvZiBuJiZ0aGlzLmZpcnN0Lm9wZXJhdG9yPT09dCkmJmkucHVzaChbdGhpcy5tYWtlQ29kZShcIiBcIildKSwociYmdGhpcy5maXJzdCBpbnN0YW5jZW9mIG58fFwibmV3XCI9PT10JiZ0aGlzLmZpcnN0LmlzU3RhdGVtZW50KGUpKSYmKHRoaXMuZmlyc3Q9bmV3IE8odGhpcy5maXJzdCkpLGkucHVzaCh0aGlzLmZpcnN0LmNvbXBpbGVUb0ZyYWdtZW50cyhlLEYpKSx0aGlzLmZsaXAmJmkucmV2ZXJzZSgpLHRoaXMuam9pbkZyYWdtZW50QXJyYXlzKGksXCJcIikpfSxuLnByb3RvdHlwZS5jb21waWxlWWllbGQ9ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gbj1bXSx0PXRoaXMub3BlcmF0b3IsbnVsbD09ZS5zY29wZS5wYXJlbnQmJnRoaXMuZXJyb3IoXCJ5aWVsZCBzdGF0ZW1lbnRzIG11c3Qgb2NjdXIgd2l0aGluIGEgZnVuY3Rpb24gZ2VuZXJhdG9yLlwiKSxUdC5jYWxsKE9iamVjdC5rZXlzKHRoaXMuZmlyc3QpLFwiZXhwcmVzc2lvblwiKT49MCYmISh0aGlzLmZpcnN0IGluc3RhbmNlb2YgVyk/dGhpcy5pc1lpZWxkUmV0dXJuKCk/bi5wdXNoKHRoaXMuZmlyc3QuY29tcGlsZVRvRnJhZ21lbnRzKGUsTCkpOm51bGwhPXRoaXMuZmlyc3QuZXhwcmVzc2lvbiYmbi5wdXNoKHRoaXMuZmlyc3QuZXhwcmVzc2lvbi5jb21waWxlVG9GcmFnbWVudHMoZSxGKSk6KG4ucHVzaChbdGhpcy5tYWtlQ29kZShcIihcIit0K1wiIFwiKV0pLG4ucHVzaCh0aGlzLmZpcnN0LmNvbXBpbGVUb0ZyYWdtZW50cyhlLEYpKSxuLnB1c2goW3RoaXMubWFrZUNvZGUoXCIpXCIpXSkpLHRoaXMuam9pbkZyYWdtZW50QXJyYXlzKG4sXCJcIil9LG4ucHJvdG90eXBlLmNvbXBpbGVQb3dlcj1mdW5jdGlvbihlKXt2YXIgbjtyZXR1cm4gbj1uZXcgeihuZXcgeChcIk1hdGhcIiksW25ldyB0KG5ldyB4KFwicG93XCIpKV0pLG5ldyBvKG4sW3RoaXMuZmlyc3QsdGhpcy5zZWNvbmRdKS5jb21waWxlVG9GcmFnbWVudHMoZSl9LG4ucHJvdG90eXBlLmNvbXBpbGVGbG9vckRpdmlzaW9uPWZ1bmN0aW9uKGUpe3ZhciBpLHI7cmV0dXJuIHI9bmV3IHoobmV3IHgoXCJNYXRoXCIpLFtuZXcgdChuZXcgeChcImZsb29yXCIpKV0pLGk9bmV3IG4oXCIvXCIsdGhpcy5maXJzdCx0aGlzLnNlY29uZCksbmV3IG8ocixbaV0pLmNvbXBpbGVUb0ZyYWdtZW50cyhlKX0sbi5wcm90b3R5cGUuY29tcGlsZU1vZHVsbz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdD1uZXcgeihuZXcgeChidChcIm1vZHVsb1wiLGUpKSksbmV3IG8odCxbdGhpcy5maXJzdCx0aGlzLnNlY29uZF0pLmNvbXBpbGVUb0ZyYWdtZW50cyhlKX0sbi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uX19zdXBlcl9fLnRvU3RyaW5nLmNhbGwodGhpcyxlLHRoaXMuY29uc3RydWN0b3IubmFtZStcIiBcIit0aGlzLm9wZXJhdG9yKX0sbn0ociksZS5Jbj1rPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt0aGlzLm9iamVjdD1lLHRoaXMuYXJyYXk9dH1yZXR1cm4ga3QodCxlKSx0LnByb3RvdHlwZS5jaGlsZHJlbj1bXCJvYmplY3RcIixcImFycmF5XCJdLHQucHJvdG90eXBlLmludmVydD1TLHQucHJvdG90eXBlLmNvbXBpbGVOb2RlPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLHM7aWYodGhpcy5hcnJheSBpbnN0YW5jZW9mIHomJnRoaXMuYXJyYXkuaXNBcnJheSgpJiZ0aGlzLmFycmF5LmJhc2Uub2JqZWN0cy5sZW5ndGgpe2ZvcihzPXRoaXMuYXJyYXkuYmFzZS5vYmplY3RzLG49MCxpPXMubGVuZ3RoO2k+bjtuKyspaWYocj1zW25dLHIgaW5zdGFuY2VvZiBHKXt0PSEwO2JyZWFrfWlmKCF0KXJldHVybiB0aGlzLmNvbXBpbGVPclRlc3QoZSl9cmV0dXJuIHRoaXMuY29tcGlsZUxvb3BUZXN0KGUpfSx0LnByb3RvdHlwZS5jb21waWxlT3JUZXN0PWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLHMsbyxhLGMsbCxoLHUscDtmb3IoYz10aGlzLm9iamVjdC5jYWNoZShlLEYpLHU9Y1swXSxhPWNbMV0sbD10aGlzLm5lZ2F0ZWQ/W1wiICE9PSBcIixcIiAmJiBcIl06W1wiID09PSBcIixcIiB8fCBcIl0sdD1sWzBdLG49bFsxXSxwPVtdLGg9dGhpcy5hcnJheS5iYXNlLm9iamVjdHMsaT1zPTAsbz1oLmxlbmd0aDtvPnM7aT0rK3Mpcj1oW2ldLGkmJnAucHVzaCh0aGlzLm1ha2VDb2RlKG4pKSxwPXAuY29uY2F0KGk/YTp1LHRoaXMubWFrZUNvZGUodCksci5jb21waWxlVG9GcmFnbWVudHMoZSxUKSk7cmV0dXJuIEY+ZS5sZXZlbD9wOnRoaXMud3JhcEluQnJhY2VzKHApfSx0LnByb3RvdHlwZS5jb21waWxlTG9vcFRlc3Q9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI7cmV0dXJuIGk9dGhpcy5vYmplY3QuY2FjaGUoZSxFKSxyPWlbMF0sbj1pWzFdLHQ9W10uY29uY2F0KHRoaXMubWFrZUNvZGUoYnQoXCJpbmRleE9mXCIsZSkrXCIuY2FsbChcIiksdGhpcy5hcnJheS5jb21waWxlVG9GcmFnbWVudHMoZSxFKSx0aGlzLm1ha2VDb2RlKFwiLCBcIiksbix0aGlzLm1ha2VDb2RlKFwiKSBcIisodGhpcy5uZWdhdGVkP1wiPCAwXCI6XCI+PSAwXCIpKSksc3Qocik9PT1zdChuKT90Oih0PXIuY29uY2F0KHRoaXMubWFrZUNvZGUoXCIsIFwiKSx0KSxFPmUubGV2ZWw/dDp0aGlzLndyYXBJbkJyYWNlcyh0KSl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiB0Ll9fc3VwZXJfXy50b1N0cmluZy5jYWxsKHRoaXMsZSx0aGlzLmNvbnN0cnVjdG9yLm5hbWUrKHRoaXMubmVnYXRlZD9cIiFcIjpcIlwiKSl9LHR9KHIpLGUuVHJ5PVk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQsbixpKXt0aGlzLmF0dGVtcHQ9ZSx0aGlzLmVycm9yVmFyaWFibGU9dCx0aGlzLnJlY292ZXJ5PW4sdGhpcy5lbnN1cmU9aX1yZXR1cm4ga3QodCxlKSx0LnByb3RvdHlwZS5jaGlsZHJlbj1bXCJhdHRlbXB0XCIsXCJyZWNvdmVyeVwiLFwiZW5zdXJlXCJdLHQucHJvdG90eXBlLmlzU3RhdGVtZW50PVEsdC5wcm90b3R5cGUuanVtcHM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXMuYXR0ZW1wdC5qdW1wcyhlKXx8KG51bGwhPSh0PXRoaXMucmVjb3ZlcnkpP3QuanVtcHMoZSk6dm9pZCAwKX0sdC5wcm90b3R5cGUubWFrZVJldHVybj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hdHRlbXB0JiYodGhpcy5hdHRlbXB0PXRoaXMuYXR0ZW1wdC5tYWtlUmV0dXJuKGUpKSx0aGlzLnJlY292ZXJ5JiYodGhpcy5yZWNvdmVyeT10aGlzLnJlY292ZXJ5Lm1ha2VSZXR1cm4oZSkpLHRoaXN9LHQucHJvdG90eXBlLmNvbXBpbGVOb2RlPWZ1bmN0aW9uKGUpe3ZhciB0LG4scixzO3JldHVybiBlLmluZGVudCs9cSxzPXRoaXMuYXR0ZW1wdC5jb21waWxlVG9GcmFnbWVudHMoZSxMKSx0PXRoaXMucmVjb3Zlcnk/KHI9bmV3IHgoXCJfZXJyb3JcIiksdGhpcy5lcnJvclZhcmlhYmxlP3RoaXMucmVjb3ZlcnkudW5zaGlmdChuZXcgaSh0aGlzLmVycm9yVmFyaWFibGUscikpOnZvaWQgMCxbXS5jb25jYXQodGhpcy5tYWtlQ29kZShcIiBjYXRjaCAoXCIpLHIuY29tcGlsZVRvRnJhZ21lbnRzKGUpLHRoaXMubWFrZUNvZGUoXCIpIHtcXG5cIiksdGhpcy5yZWNvdmVyeS5jb21waWxlVG9GcmFnbWVudHMoZSxMKSx0aGlzLm1ha2VDb2RlKFwiXFxuXCIrdGhpcy50YWIrXCJ9XCIpKSk6dGhpcy5lbnN1cmV8fHRoaXMucmVjb3Zlcnk/W106W3RoaXMubWFrZUNvZGUoXCIgY2F0Y2ggKF9lcnJvcikge31cIildLG49dGhpcy5lbnN1cmU/W10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCIgZmluYWxseSB7XFxuXCIpLHRoaXMuZW5zdXJlLmNvbXBpbGVUb0ZyYWdtZW50cyhlLEwpLHRoaXMubWFrZUNvZGUoXCJcXG5cIit0aGlzLnRhYitcIn1cIikpOltdLFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKHRoaXMudGFiK1widHJ5IHtcXG5cIikscyx0aGlzLm1ha2VDb2RlKFwiXFxuXCIrdGhpcy50YWIrXCJ9XCIpLHQsbil9LHR9KHIpLGUuVGhyb3c9Vz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZXhwcmVzc2lvbj1lfXJldHVybiBrdCh0LGUpLHQucHJvdG90eXBlLmNoaWxkcmVuPVtcImV4cHJlc3Npb25cIl0sdC5wcm90b3R5cGUuaXNTdGF0ZW1lbnQ9USx0LnByb3RvdHlwZS5qdW1wcz1ELHQucHJvdG90eXBlLm1ha2VSZXR1cm49WCx0LnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXtyZXR1cm5bXS5jb25jYXQodGhpcy5tYWtlQ29kZSh0aGlzLnRhYitcInRocm93IFwiKSx0aGlzLmV4cHJlc3Npb24uY29tcGlsZVRvRnJhZ21lbnRzKGUpLHRoaXMubWFrZUNvZGUoXCI7XCIpKX0sdH0ociksZS5FeGlzdGVuY2U9dT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZXhwcmVzc2lvbj1lfXJldHVybiBrdCh0LGUpLHQucHJvdG90eXBlLmNoaWxkcmVuPVtcImV4cHJlc3Npb25cIl0sdC5wcm90b3R5cGUuaW52ZXJ0PVMsdC5wcm90b3R5cGUuY29tcGlsZU5vZGU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI7cmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5mcm9udD10aGlzLmZyb250LGk9dGhpcy5leHByZXNzaW9uLmNvbXBpbGUoZSxGKSxnLnRlc3QoaSkmJiFlLnNjb3BlLmNoZWNrKGkpPyhyPXRoaXMubmVnYXRlZD9bXCI9PT1cIixcInx8XCJdOltcIiE9PVwiLFwiJiZcIl0sdD1yWzBdLG49clsxXSxpPVwidHlwZW9mIFwiK2krXCIgXCIrdCsnIFwidW5kZWZpbmVkXCIgJytuK1wiIFwiK2krXCIgXCIrdCtcIiBudWxsXCIpOmk9aStcIiBcIisodGhpcy5uZWdhdGVkP1wiPT1cIjpcIiE9XCIpK1wiIG51bGxcIixbdGhpcy5tYWtlQ29kZShDPj1lLmxldmVsP2k6XCIoXCIraStcIilcIildfSx0fShyKSxlLlBhcmVucz1PPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5ib2R5PWV9cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wiYm9keVwiXSx0LnByb3RvdHlwZS51bndyYXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5fSx0LnByb3RvdHlwZS5pc0NvbXBsZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5LmlzQ29tcGxleCgpfSx0LnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXt2YXIgdCxuLGk7cmV0dXJuIG49dGhpcy5ib2R5LnVud3JhcCgpLG4gaW5zdGFuY2VvZiB6JiZuLmlzQXRvbWljKCk/KG4uZnJvbnQ9dGhpcy5mcm9udCxuLmNvbXBpbGVUb0ZyYWdtZW50cyhlKSk6KGk9bi5jb21waWxlVG9GcmFnbWVudHMoZSxOKSx0PUY+ZS5sZXZlbCYmKG4gaW5zdGFuY2VvZiBJfHxuIGluc3RhbmNlb2Ygb3x8biBpbnN0YW5jZW9mIGYmJm4ucmV0dXJucyksdD9pOnRoaXMud3JhcEluQnJhY2VzKGkpKX0sdH0ociksZS5Gb3I9Zj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dmFyIG47dGhpcy5zb3VyY2U9dC5zb3VyY2UsdGhpcy5ndWFyZD10Lmd1YXJkLHRoaXMuc3RlcD10LnN0ZXAsdGhpcy5uYW1lPXQubmFtZSx0aGlzLmluZGV4PXQuaW5kZXgsdGhpcy5ib2R5PXMud3JhcChbZV0pLHRoaXMub3duPSEhdC5vd24sdGhpcy5vYmplY3Q9ISF0Lm9iamVjdCx0aGlzLm9iamVjdCYmKG49W3RoaXMuaW5kZXgsdGhpcy5uYW1lXSx0aGlzLm5hbWU9blswXSx0aGlzLmluZGV4PW5bMV0pLHRoaXMuaW5kZXggaW5zdGFuY2VvZiB6JiZ0aGlzLmluZGV4LmVycm9yKFwiaW5kZXggY2Fubm90IGJlIGEgcGF0dGVybiBtYXRjaGluZyBleHByZXNzaW9uXCIpLHRoaXMucmFuZ2U9dGhpcy5zb3VyY2UgaW5zdGFuY2VvZiB6JiZ0aGlzLnNvdXJjZS5iYXNlIGluc3RhbmNlb2YgaiYmIXRoaXMuc291cmNlLnByb3BlcnRpZXMubGVuZ3RoLHRoaXMucGF0dGVybj10aGlzLm5hbWUgaW5zdGFuY2VvZiB6LHRoaXMucmFuZ2UmJnRoaXMuaW5kZXgmJnRoaXMuaW5kZXguZXJyb3IoXCJpbmRleGVzIGRvIG5vdCBhcHBseSB0byByYW5nZSBsb29wc1wiKSx0aGlzLnJhbmdlJiZ0aGlzLnBhdHRlcm4mJnRoaXMubmFtZS5lcnJvcihcImNhbm5vdCBwYXR0ZXJuIG1hdGNoIG92ZXIgcmFuZ2UgbG9vcHNcIiksdGhpcy5vd24mJiF0aGlzLm9iamVjdCYmdGhpcy5uYW1lLmVycm9yKFwiY2Fubm90IHVzZSBvd24gd2l0aCBmb3ItaW5cIiksdGhpcy5yZXR1cm5zPSExfXJldHVybiBrdCh0LGUpLHQucHJvdG90eXBlLmNoaWxkcmVuPVtcImJvZHlcIixcInNvdXJjZVwiLFwiZ3VhcmRcIixcInN0ZXBcIl0sdC5wcm90b3R5cGUuY29tcGlsZU5vZGU9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLG8sYSxjLGwsaCx1LHAsZCxmLG0sdix5LGssdyxULEMsRixOLFMsRCxBLEksXywkLGosQixWLFAsVSxHLEg7cmV0dXJuIHQ9cy53cmFwKFt0aGlzLmJvZHldKSxEPXQuZXhwcmVzc2lvbnMsVD1EW0QubGVuZ3RoLTFdLChudWxsIT1UP1QuanVtcHMoKTp2b2lkIDApaW5zdGFuY2VvZiBNJiYodGhpcy5yZXR1cm5zPSExKSxCPXRoaXMucmFuZ2U/dGhpcy5zb3VyY2UuYmFzZTp0aGlzLnNvdXJjZSxqPWUuc2NvcGUsdGhpcy5wYXR0ZXJufHwoRj10aGlzLm5hbWUmJnRoaXMubmFtZS5jb21waWxlKGUsRSkpLHY9dGhpcy5pbmRleCYmdGhpcy5pbmRleC5jb21waWxlKGUsRSksRiYmIXRoaXMucGF0dGVybiYmai5maW5kKEYpLHYmJmouZmluZCh2KSx0aGlzLnJldHVybnMmJigkPWouZnJlZVZhcmlhYmxlKFwicmVzdWx0c1wiKSkseT10aGlzLm9iamVjdCYmdnx8ai5mcmVlVmFyaWFibGUoXCJpXCIse3NpbmdsZTohMH0pLGs9dGhpcy5yYW5nZSYmRnx8dnx8eSx3PWshPT15P2srXCIgPSBcIjpcIlwiLHRoaXMuc3RlcCYmIXRoaXMucmFuZ2UmJihBPXRoaXMuY2FjaGVUb0NvZGVGcmFnbWVudHModGhpcy5zdGVwLmNhY2hlKGUsRSxvdCkpLFY9QVswXSxVPUFbMV0sUD1VLm1hdGNoKFIpKSx0aGlzLnBhdHRlcm4mJihGPXkpLEg9XCJcIixkPVwiXCIsbD1cIlwiLGY9dGhpcy50YWIrcSx0aGlzLnJhbmdlP3A9Qi5jb21waWxlVG9GcmFnbWVudHMoaHQoZSx7aW5kZXg6eSxuYW1lOkYsc3RlcDp0aGlzLnN0ZXAsaXNDb21wbGV4Om90fSkpOihHPXRoaXMuc291cmNlLmNvbXBpbGUoZSxFKSwhRiYmIXRoaXMub3dufHxnLnRlc3QoRyl8fChsKz1cIlwiK3RoaXMudGFiKyhTPWouZnJlZVZhcmlhYmxlKFwicmVmXCIpKStcIiA9IFwiK0crXCI7XFxuXCIsRz1TKSxGJiYhdGhpcy5wYXR0ZXJuJiYoTj1GK1wiID0gXCIrRytcIltcIitrK1wiXVwiKSx0aGlzLm9iamVjdHx8KFYhPT1VJiYobCs9XCJcIit0aGlzLnRhYitWK1wiO1xcblwiKSx0aGlzLnN0ZXAmJlAmJih1PTA+cHQoUFswXSkpfHwoQz1qLmZyZWVWYXJpYWJsZShcImxlblwiKSksYT1cIlwiK3creStcIiA9IDAsIFwiK0MrXCIgPSBcIitHK1wiLmxlbmd0aFwiLGM9XCJcIit3K3krXCIgPSBcIitHK1wiLmxlbmd0aCAtIDFcIixyPXkrXCIgPCBcIitDLG89eStcIiA+PSAwXCIsdGhpcy5zdGVwPyhQP3UmJihyPW8sYT1jKToocj1VK1wiID4gMCA/IFwiK3IrXCIgOiBcIitvLGE9XCIoXCIrVStcIiA+IDAgPyAoXCIrYStcIikgOiBcIitjK1wiKVwiKSxtPXkrXCIgKz0gXCIrVSk6bT1cIlwiKyhrIT09eT9cIisrXCIreTp5K1wiKytcIikscD1bdGhpcy5tYWtlQ29kZShhK1wiOyBcIityK1wiOyBcIit3K20pXSkpLHRoaXMucmV0dXJucyYmKEk9XCJcIit0aGlzLnRhYiskK1wiID0gW107XFxuXCIsXz1cIlxcblwiK3RoaXMudGFiK1wicmV0dXJuIFwiKyQrXCI7XCIsdC5tYWtlUmV0dXJuKCQpKSx0aGlzLmd1YXJkJiYodC5leHByZXNzaW9ucy5sZW5ndGg+MT90LmV4cHJlc3Npb25zLnVuc2hpZnQobmV3IGIobmV3IE8odGhpcy5ndWFyZCkuaW52ZXJ0KCksbmV3IHgoXCJjb250aW51ZVwiKSkpOnRoaXMuZ3VhcmQmJih0PXMud3JhcChbbmV3IGIodGhpcy5ndWFyZCx0KV0pKSksdGhpcy5wYXR0ZXJuJiZ0LmV4cHJlc3Npb25zLnVuc2hpZnQobmV3IGkodGhpcy5uYW1lLG5ldyB4KEcrXCJbXCIraytcIl1cIikpKSxoPVtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKGwpLHRoaXMucGx1Y2tEaXJlY3RDYWxsKGUsdCkpLE4mJihIPVwiXFxuXCIrZitOK1wiO1wiKSx0aGlzLm9iamVjdCYmKHA9W3RoaXMubWFrZUNvZGUoaytcIiBpbiBcIitHKV0sdGhpcy5vd24mJihkPVwiXFxuXCIrZitcImlmICghXCIrYnQoXCJoYXNQcm9wXCIsZSkrXCIuY2FsbChcIitHK1wiLCBcIitrK1wiKSkgY29udGludWU7XCIpKSxuPXQuY29tcGlsZVRvRnJhZ21lbnRzKGh0KGUse2luZGVudDpmfSksTCksbiYmbi5sZW5ndGg+MCYmKG49W10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJcXG5cIiksbix0aGlzLm1ha2VDb2RlKFwiXFxuXCIpKSksW10uY29uY2F0KGgsdGhpcy5tYWtlQ29kZShcIlwiKyhJfHxcIlwiKSt0aGlzLnRhYitcImZvciAoXCIpLHAsdGhpcy5tYWtlQ29kZShcIikge1wiK2QrSCksbix0aGlzLm1ha2VDb2RlKHRoaXMudGFiK1wifVwiKyhffHxcIlwiKSkpfSx0LnByb3RvdHlwZS5wbHVja0RpcmVjdENhbGw9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLHMsYSxsLGgsdSxwLGQsZixtLGcsdix5LGIsaztmb3Iocj1bXSxkPXQuZXhwcmVzc2lvbnMsbD1oPTAsdT1kLmxlbmd0aDt1Pmg7bD0rK2gpcz1kW2xdLHM9cy51bndyYXBBbGwoKSxzIGluc3RhbmNlb2YgbyYmKGs9bnVsbCE9KGY9cy52YXJpYWJsZSk/Zi51bndyYXBBbGwoKTp2b2lkIDAsKGsgaW5zdGFuY2VvZiBjfHxrIGluc3RhbmNlb2YgeiYmKG51bGwhPShtPWsuYmFzZSk/bS51bndyYXBBbGwoKTp2b2lkIDApaW5zdGFuY2VvZiBjJiYxPT09ay5wcm9wZXJ0aWVzLmxlbmd0aCYmKFwiY2FsbFwiPT09KGc9bnVsbCE9KHY9ay5wcm9wZXJ0aWVzWzBdLm5hbWUpP3YudmFsdWU6dm9pZCAwKXx8XCJhcHBseVwiPT09ZykpJiYoYT0obnVsbCE9KHk9ay5iYXNlKT95LnVud3JhcEFsbCgpOnZvaWQgMCl8fGsscD1uZXcgeChlLnNjb3BlLmZyZWVWYXJpYWJsZShcImZuXCIpKSxuPW5ldyB6KHApLGsuYmFzZSYmKGI9W24sa10say5iYXNlPWJbMF0sbj1iWzFdKSx0LmV4cHJlc3Npb25zW2xdPW5ldyBvKG4scy5hcmdzKSxyPXIuY29uY2F0KHRoaXMubWFrZUNvZGUodGhpcy50YWIpLG5ldyBpKHAsYSkuY29tcGlsZVRvRnJhZ21lbnRzKGUsTCksdGhpcy5tYWtlQ29kZShcIjtcXG5cIikpKSk7cmV0dXJuIHJ9LHR9KEopLGUuU3dpdGNoPUg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQsbil7dGhpcy5zdWJqZWN0PWUsdGhpcy5jYXNlcz10LHRoaXMub3RoZXJ3aXNlPW59cmV0dXJuIGt0KHQsZSksdC5wcm90b3R5cGUuY2hpbGRyZW49W1wic3ViamVjdFwiLFwiY2FzZXNcIixcIm90aGVyd2lzZVwiXSx0LnByb3RvdHlwZS5pc1N0YXRlbWVudD1RLHQucHJvdG90eXBlLmp1bXBzPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLHMsbyxhLGM7Zm9yKG51bGw9PWUmJihlPXtibG9jazohMH0pLG89dGhpcy5jYXNlcyxpPTAscz1vLmxlbmd0aDtzPmk7aSsrKWlmKGE9b1tpXSxuPWFbMF0sdD1hWzFdLHI9dC5qdW1wcyhlKSlyZXR1cm4gcjtyZXR1cm4gbnVsbCE9KGM9dGhpcy5vdGhlcndpc2UpP2MuanVtcHMoZSk6dm9pZCAwfSx0LnByb3RvdHlwZS5tYWtlUmV0dXJuPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG87Zm9yKHI9dGhpcy5jYXNlcyx0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWk9clt0XSxpWzFdLm1ha2VSZXR1cm4oZSk7cmV0dXJuIGUmJih0aGlzLm90aGVyd2lzZXx8KHRoaXMub3RoZXJ3aXNlPW5ldyBzKFtuZXcgeChcInZvaWQgMFwiKV0pKSksbnVsbCE9KG89dGhpcy5vdGhlcndpc2UpJiZvLm1ha2VSZXR1cm4oZSksdGhpc30sdC5wcm90b3R5cGUuY29tcGlsZU5vZGU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvLGEsYyxsLGgsdSxwLGQsZixtLGc7Zm9yKGM9ZS5pbmRlbnQrcSxsPWUuaW5kZW50PWMrcSxvPVtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKHRoaXMudGFiK1wic3dpdGNoIChcIiksdGhpcy5zdWJqZWN0P3RoaXMuc3ViamVjdC5jb21waWxlVG9GcmFnbWVudHMoZSxOKTp0aGlzLm1ha2VDb2RlKFwiZmFsc2VcIiksdGhpcy5tYWtlQ29kZShcIikge1xcblwiKSksZj10aGlzLmNhc2VzLGE9aD0wLHA9Zi5sZW5ndGg7cD5oO2E9KytoKXtmb3IobT1mW2FdLHI9bVswXSx0PW1bMV0sZz1ydChbcl0pLHU9MCxkPWcubGVuZ3RoO2Q+dTt1KyspaT1nW3VdLHRoaXMuc3ViamVjdHx8KGk9aS5pbnZlcnQoKSksbz1vLmNvbmNhdCh0aGlzLm1ha2VDb2RlKGMrXCJjYXNlIFwiKSxpLmNvbXBpbGVUb0ZyYWdtZW50cyhlLE4pLHRoaXMubWFrZUNvZGUoXCI6XFxuXCIpKTtpZigobj10LmNvbXBpbGVUb0ZyYWdtZW50cyhlLEwpKS5sZW5ndGg+MCYmKG89by5jb25jYXQobix0aGlzLm1ha2VDb2RlKFwiXFxuXCIpKSksYT09PXRoaXMuY2FzZXMubGVuZ3RoLTEmJiF0aGlzLm90aGVyd2lzZSlicmVhaztzPXRoaXMubGFzdE5vbkNvbW1lbnQodC5leHByZXNzaW9ucykscyBpbnN0YW5jZW9mIE18fHMgaW5zdGFuY2VvZiB4JiZzLmp1bXBzKCkmJlwiZGVidWdnZXJcIiE9PXMudmFsdWV8fG8ucHVzaChpLm1ha2VDb2RlKGwrXCJicmVhaztcXG5cIikpfXJldHVybiB0aGlzLm90aGVyd2lzZSYmdGhpcy5vdGhlcndpc2UuZXhwcmVzc2lvbnMubGVuZ3RoJiZvLnB1c2guYXBwbHkobyxbdGhpcy5tYWtlQ29kZShjK1wiZGVmYXVsdDpcXG5cIildLmNvbmNhdChDdC5jYWxsKHRoaXMub3RoZXJ3aXNlLmNvbXBpbGVUb0ZyYWdtZW50cyhlLEwpKSxbdGhpcy5tYWtlQ29kZShcIlxcblwiKV0pKSxvLnB1c2godGhpcy5tYWtlQ29kZSh0aGlzLnRhYitcIn1cIikpLG99LHR9KHIpLGUuSWY9Yj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxuKXt0aGlzLmJvZHk9dCxudWxsPT1uJiYobj17fSksdGhpcy5jb25kaXRpb249XCJ1bmxlc3NcIj09PW4udHlwZT9lLmludmVydCgpOmUsdGhpcy5lbHNlQm9keT1udWxsLHRoaXMuaXNDaGFpbj0hMSx0aGlzLnNvYWs9bi5zb2FrfXJldHVybiBrdCh0LGUpLHQucHJvdG90eXBlLmNoaWxkcmVuPVtcImNvbmRpdGlvblwiLFwiYm9keVwiLFwiZWxzZUJvZHlcIl0sdC5wcm90b3R5cGUuYm9keU5vZGU9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gbnVsbCE9KGU9dGhpcy5ib2R5KT9lLnVud3JhcCgpOnZvaWQgMH0sdC5wcm90b3R5cGUuZWxzZUJvZHlOb2RlPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIG51bGwhPShlPXRoaXMuZWxzZUJvZHkpP2UudW53cmFwKCk6dm9pZCAwfSx0LnByb3RvdHlwZS5hZGRFbHNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzQ2hhaW4/dGhpcy5lbHNlQm9keU5vZGUoKS5hZGRFbHNlKGUpOih0aGlzLmlzQ2hhaW49ZSBpbnN0YW5jZW9mIHQsdGhpcy5lbHNlQm9keT10aGlzLmVuc3VyZUJsb2NrKGUpLHRoaXMuZWxzZUJvZHkudXBkYXRlTG9jYXRpb25EYXRhSWZNaXNzaW5nKGUubG9jYXRpb25EYXRhKSksdGhpc30sdC5wcm90b3R5cGUuaXNTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuKG51bGwhPWU/ZS5sZXZlbDp2b2lkIDApPT09THx8dGhpcy5ib2R5Tm9kZSgpLmlzU3RhdGVtZW50KGUpfHwobnVsbCE9KHQ9dGhpcy5lbHNlQm9keU5vZGUoKSk/dC5pc1N0YXRlbWVudChlKTp2b2lkIDApfSx0LnByb3RvdHlwZS5qdW1wcz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdGhpcy5ib2R5Lmp1bXBzKGUpfHwobnVsbCE9KHQ9dGhpcy5lbHNlQm9keSk/dC5qdW1wcyhlKTp2b2lkIDApfSx0LnByb3RvdHlwZS5jb21waWxlTm9kZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc1N0YXRlbWVudChlKT90aGlzLmNvbXBpbGVTdGF0ZW1lbnQoZSk6dGhpcy5jb21waWxlRXhwcmVzc2lvbihlKX0sdC5wcm90b3R5cGUubWFrZVJldHVybj1mdW5jdGlvbihlKXtyZXR1cm4gZSYmKHRoaXMuZWxzZUJvZHl8fCh0aGlzLmVsc2VCb2R5PW5ldyBzKFtuZXcgeChcInZvaWQgMFwiKV0pKSksdGhpcy5ib2R5JiYodGhpcy5ib2R5PW5ldyBzKFt0aGlzLmJvZHkubWFrZVJldHVybihlKV0pKSx0aGlzLmVsc2VCb2R5JiYodGhpcy5lbHNlQm9keT1uZXcgcyhbdGhpcy5lbHNlQm9keS5tYWtlUmV0dXJuKGUpXSkpLHRoaXN9LHQucHJvdG90eXBlLmVuc3VyZUJsb2NrPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygcz9lOm5ldyBzKFtlXSl9LHQucHJvdG90eXBlLmNvbXBpbGVTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIG4saSxyLHMsbyxhLGM7cmV0dXJuIHI9dHQoZSxcImNoYWluQ2hpbGRcIiksKG89dHQoZSxcImlzRXhpc3RlbnRpYWxFcXVhbHNcIikpP25ldyB0KHRoaXMuY29uZGl0aW9uLmludmVydCgpLHRoaXMuZWxzZUJvZHlOb2RlKCkse3R5cGU6XCJpZlwifSkuY29tcGlsZVRvRnJhZ21lbnRzKGUpOihjPWUuaW5kZW50K3Escz10aGlzLmNvbmRpdGlvbi5jb21waWxlVG9GcmFnbWVudHMoZSxOKSxpPXRoaXMuZW5zdXJlQmxvY2sodGhpcy5ib2R5KS5jb21waWxlVG9GcmFnbWVudHMoaHQoZSx7aW5kZW50OmN9KSksYT1bXS5jb25jYXQodGhpcy5tYWtlQ29kZShcImlmIChcIikscyx0aGlzLm1ha2VDb2RlKFwiKSB7XFxuXCIpLGksdGhpcy5tYWtlQ29kZShcIlxcblwiK3RoaXMudGFiK1wifVwiKSkscnx8YS51bnNoaWZ0KHRoaXMubWFrZUNvZGUodGhpcy50YWIpKSx0aGlzLmVsc2VCb2R5PyhuPWEuY29uY2F0KHRoaXMubWFrZUNvZGUoXCIgZWxzZSBcIikpLHRoaXMuaXNDaGFpbj8oZS5jaGFpbkNoaWxkPSEwLG49bi5jb25jYXQodGhpcy5lbHNlQm9keS51bndyYXAoKS5jb21waWxlVG9GcmFnbWVudHMoZSxMKSkpOm49bi5jb25jYXQodGhpcy5tYWtlQ29kZShcIntcXG5cIiksdGhpcy5lbHNlQm9keS5jb21waWxlVG9GcmFnbWVudHMoaHQoZSx7aW5kZW50OmN9KSxMKSx0aGlzLm1ha2VDb2RlKFwiXFxuXCIrdGhpcy50YWIrXCJ9XCIpKSxuKTphKX0sdC5wcm90b3R5cGUuY29tcGlsZUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI7cmV0dXJuIGk9dGhpcy5jb25kaXRpb24uY29tcGlsZVRvRnJhZ21lbnRzKGUsQyksbj10aGlzLmJvZHlOb2RlKCkuY29tcGlsZVRvRnJhZ21lbnRzKGUsRSksdD10aGlzLmVsc2VCb2R5Tm9kZSgpP3RoaXMuZWxzZUJvZHlOb2RlKCkuY29tcGlsZVRvRnJhZ21lbnRzKGUsRSk6W3RoaXMubWFrZUNvZGUoXCJ2b2lkIDBcIildLHI9aS5jb25jYXQodGhpcy5tYWtlQ29kZShcIiA/IFwiKSxuLHRoaXMubWFrZUNvZGUoXCIgOiBcIiksdCksZS5sZXZlbD49Qz90aGlzLndyYXBJbkJyYWNlcyhyKTpyfSx0LnByb3RvdHlwZS51bmZvbGRTb2FrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc29hayYmdGhpc30sdH0ociksSz17ZXh0ZW5kOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChcIitidChcImhhc1Byb3BcIixlKStcIi5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfVwifSxiaW5kOmZ1bmN0aW9uKCl7cmV0dXJuXCJmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9XCJ9LGluZGV4T2Y6ZnVuY3Rpb24oKXtyZXR1cm5cIltdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9XCJ9LG1vZHVsbzpmdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gKCthICUgKGIgPSArYikgKyBiKSAlIGI7IH1cIn0saGFzUHJvcDpmdW5jdGlvbigpe3JldHVyblwie30uaGFzT3duUHJvcGVydHlcIn0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm5cIltdLnNsaWNlXCJ9fSxMPTEsTj0yLEU9MyxDPTQsRj01LFQ9NixxPVwiICBcIixnPS9eKD8hXFxkKVskXFx3XFx4N2YtXFx1ZmZmZl0rJC8sQj0vXlsrLV0/XFxkKyQvLG09L15bKy1dPzB4W1xcZGEtZl0rL2ksUj0vXlsrLV0/KD86MHhbXFxkYS1mXSt8XFxkKlxcLj9cXGQrKD86ZVsrLV0/XFxkKyk/KSQvaSx5PS9eWydcIl0vLHY9L15cXC8vLGJ0PWZ1bmN0aW9uKGUsdCl7dmFyIG4saTtyZXR1cm4gaT10LnNjb3BlLnJvb3QsZSBpbiBpLnV0aWxpdGllcz9pLnV0aWxpdGllc1tlXToobj1pLmZyZWVWYXJpYWJsZShlKSxpLmFzc2lnbihuLEtbZV0odCkpLGkudXRpbGl0aWVzW2VdPW4pfSx1dD1mdW5jdGlvbihlLHQpe3JldHVybiBlPWUucmVwbGFjZSgvXFxuL2csXCIkJlwiK3QpLGUucmVwbGFjZSgvXFxzKyQvLFwiXCIpfSxwdD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8wOmUubWF0Y2gobSk/cGFyc2VJbnQoZSwxNik6cGFyc2VGbG9hdChlKX0sYXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiB4JiZcImFyZ3VtZW50c1wiPT09ZS52YWx1ZSYmIWUuYXNLZXl9LGN0PWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgeCYmXCJ0aGlzXCI9PT1lLnZhbHVlJiYhZS5hc0tleXx8ZSBpbnN0YW5jZW9mIGMmJmUuYm91bmR8fGUgaW5zdGFuY2VvZiBvJiZlLmlzU3VwZXJ9LG90PWZ1bmN0aW9uKGUpe3JldHVybiBlLmlzQ29tcGxleCgpfHwoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5pc0Fzc2lnbmFibGU/ZS5pc0Fzc2lnbmFibGUoKTp2b2lkIDApfSx5dD1mdW5jdGlvbihlLHQsbil7dmFyIGk7aWYoaT10W25dLnVuZm9sZFNvYWsoZSkpcmV0dXJuIHRbbl09aS5ib2R5LGkuYm9keT1uZXcgeih0KSxpfX0uY2FsbCh0aGlzKSx0LmV4cG9ydHN9KCkscmVxdWlyZVtcIi4vc291cmNlbWFwXCJdPWZ1bmN0aW9uKCl7dmFyIGU9e30sdD17ZXhwb3J0czplfTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZSxuO2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMubGluZT1lLHRoaXMuY29sdW1ucz1bXX1yZXR1cm4gZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyO3JldHVybiByPXRbMF0saT10WzFdLG51bGw9PW4mJihuPXt9KSx0aGlzLmNvbHVtbnNbZV0mJm4ubm9SZXBsYWNlP3ZvaWQgMDp0aGlzLmNvbHVtbnNbZV09e2xpbmU6dGhpcy5saW5lLGNvbHVtbjplLHNvdXJjZUxpbmU6cixzb3VyY2VDb2x1bW46aX19LGUucHJvdG90eXBlLnNvdXJjZUxvY2F0aW9uPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdDshKCh0PXRoaXMuY29sdW1uc1tlXSl8fDA+PWUpOyllLS07cmV0dXJuIHQmJlt0LnNvdXJjZUxpbmUsdC5zb3VyY2VDb2x1bW5dfSxlfSgpLG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5saW5lcz1bXX12YXIgbixpLHIscztyZXR1cm4gdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQsbixpKXt2YXIgcixzLG8sYTtyZXR1cm4gbnVsbD09aSYmKGk9e30pLG89blswXSxzPW5bMV0sYT0ocj10aGlzLmxpbmVzKVtvXXx8KHJbb109bmV3IGUobykpLGEuYWRkKHMsdCxpKX0sdC5wcm90b3R5cGUuc291cmNlTG9jYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2ZvcihuPWVbMF0sdD1lWzFdOyEoKGk9dGhpcy5saW5lc1tuXSl8fDA+PW4pOyluLS07cmV0dXJuIGkmJmkuc291cmNlTG9jYXRpb24odCl9LHQucHJvdG90eXBlLmdlbmVyYXRlPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHMsbyxhLGMsbCxoLHUscCxkLGYsbSxnLHY7Zm9yKG51bGw9PWUmJihlPXt9KSxudWxsPT10JiYodD1udWxsKSx2PTAscz0wLGE9MCxvPTAsZD0hMSxuPVwiXCIsZj10aGlzLmxpbmVzLHU9aT0wLGM9Zi5sZW5ndGg7Yz5pO3U9KytpKWlmKGg9Zlt1XSlmb3IobT1oLmNvbHVtbnMscj0wLGw9bS5sZW5ndGg7bD5yO3IrKylpZihwPW1bcl0pe2Zvcig7cC5saW5lPnY7KXM9MCxkPSExLG4rPVwiO1wiLHYrKztkJiYobis9XCIsXCIsZD0hMSksbis9dGhpcy5lbmNvZGVWbHEocC5jb2x1bW4tcykscz1wLmNvbHVtbixuKz10aGlzLmVuY29kZVZscSgwKSxuKz10aGlzLmVuY29kZVZscShwLnNvdXJjZUxpbmUtYSksYT1wLnNvdXJjZUxpbmUsbis9dGhpcy5lbmNvZGVWbHEocC5zb3VyY2VDb2x1bW4tbyksbz1wLnNvdXJjZUNvbHVtbixkPSEwfXJldHVybiBnPXt2ZXJzaW9uOjMsZmlsZTplLmdlbmVyYXRlZEZpbGV8fFwiXCIsc291cmNlUm9vdDplLnNvdXJjZVJvb3R8fFwiXCIsc291cmNlczplLnNvdXJjZUZpbGVzfHxbXCJcIl0sbmFtZXM6W10sbWFwcGluZ3M6bn0sZS5pbmxpbmUmJihnLnNvdXJjZXNDb250ZW50PVt0XSksSlNPTi5zdHJpbmdpZnkoZyxudWxsLDIpfSxyPTUsaT0xPDxyLHM9aS0xLHQucHJvdG90eXBlLmVuY29kZVZscT1mdW5jdGlvbihlKXt2YXIgdCxuLG8sYTtmb3IodD1cIlwiLG89MD5lPzE6MCxhPShNYXRoLmFicyhlKTw8MSkrbzthfHwhdDspbj1hJnMsYT4+PXIsYSYmKG58PWkpLHQrPXRoaXMuZW5jb2RlQmFzZTY0KG4pO3JldHVybiB0fSxuPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLHQucHJvdG90eXBlLmVuY29kZUJhc2U2ND1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIkNhbm5vdCBCYXNlNjQgZW5jb2RlIHZhbHVlOiBcIitlKX0oKX0sdH0oKSx0LmV4cG9ydHM9bn0uY2FsbCh0aGlzKSx0LmV4cG9ydHN9KCkscmVxdWlyZVtcIi4vY29mZmVlLXNjcmlwdFwiXT1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9e2V4cG9ydHM6ZX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsYyxsLGgsdSxwLGQsZixtLGcsdix5LGI9e30uaGFzT3duUHJvcGVydHksaz1bXS5pbmRleE9mfHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPXRoaXMubGVuZ3RoO24+dDt0KyspaWYodCBpbiB0aGlzJiZ0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX07aWYoYT1yZXF1aXJlKFwiZnNcIiksdj1yZXF1aXJlKFwidm1cIiksZj1yZXF1aXJlKFwicGF0aFwiKSx0PXJlcXVpcmUoXCIuL2xleGVyXCIpLkxleGVyLGQ9cmVxdWlyZShcIi4vcGFyc2VyXCIpLnBhcnNlcixsPXJlcXVpcmUoXCIuL2hlbHBlcnNcIiksbj1yZXF1aXJlKFwiLi9zb3VyY2VtYXBcIiksZS5WRVJTSU9OPVwiMS45LjJcIixlLkZJTEVfRVhURU5TSU9OUz1bXCIuY29mZmVlXCIsXCIubGl0Y29mZmVlXCIsXCIuY29mZmVlLm1kXCJdLGUuaGVscGVycz1sLHk9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIGk7bnVsbD09biYmKG49e30pO3RyeXtyZXR1cm4gZS5jYWxsKHRoaXMsdCxuKVxufWNhdGNoKHIpe3Rocm93IGk9cixsLnVwZGF0ZVN5bnRheEVycm9yKGksdCxuLmZpbGVuYW1lKX19fSxlLmNvbXBpbGU9cj15KGZ1bmN0aW9uKGUsdCl7dmFyIGkscixzLG8sYSxjLGgsdSxmLG0sZyx2LHksYixrO2Zvcih2PWwubWVyZ2Usbz1sLmV4dGVuZCx0PW8oe30sdCksdC5zb3VyY2VNYXAmJihnPW5ldyBuKSxrPXAudG9rZW5pemUoZSx0KSx0LnJlZmVyZW5jZWRWYXJzPWZ1bmN0aW9uKCl7dmFyIGUsdCxuO2ZvcihuPVtdLGU9MCx0PWsubGVuZ3RoO3Q+ZTtlKyspYj1rW2VdLGIudmFyaWFibGUmJm4ucHVzaChiWzFdKTtyZXR1cm4gbn0oKSxjPWQucGFyc2UoaykuY29tcGlsZVRvRnJhZ21lbnRzKHQpLHM9MCx0LmhlYWRlciYmKHMrPTEpLHQuc2hpZnRMaW5lJiYocys9MSkscj0wLGY9XCJcIix1PTAsbT1jLmxlbmd0aDttPnU7dSsrKWE9Y1t1XSx0LnNvdXJjZU1hcCYmKGEubG9jYXRpb25EYXRhJiZnLmFkZChbYS5sb2NhdGlvbkRhdGEuZmlyc3RfbGluZSxhLmxvY2F0aW9uRGF0YS5maXJzdF9jb2x1bW5dLFtzLHJdLHtub1JlcGxhY2U6ITB9KSx5PWwuY291bnQoYS5jb2RlLFwiXFxuXCIpLHMrPXkseT9yPWEuY29kZS5sZW5ndGgtKGEuY29kZS5sYXN0SW5kZXhPZihcIlxcblwiKSsxKTpyKz1hLmNvZGUubGVuZ3RoKSxmKz1hLmNvZGU7cmV0dXJuIHQuaGVhZGVyJiYoaD1cIkdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgXCIrdGhpcy5WRVJTSU9OLGY9XCIvLyBcIitoK1wiXFxuXCIrZiksdC5zb3VyY2VNYXA/KGk9e2pzOmZ9LGkuc291cmNlTWFwPWcsaS52M1NvdXJjZU1hcD1nLmdlbmVyYXRlKHQsZSksaSk6Zn0pLGUudG9rZW5zPXkoZnVuY3Rpb24oZSx0KXtyZXR1cm4gcC50b2tlbml6ZShlLHQpfSksZS5ub2Rlcz15KGZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/ZC5wYXJzZShwLnRva2VuaXplKGUsdCkpOmQucGFyc2UoZSl9KSxlLnJ1bj1mdW5jdGlvbihlLHQpe3ZhciBuLGkscyxvO3JldHVybiBudWxsPT10JiYodD17fSkscz1yZXF1aXJlLm1haW4scy5maWxlbmFtZT1wcm9jZXNzLmFyZ3ZbMV09dC5maWxlbmFtZT9hLnJlYWxwYXRoU3luYyh0LmZpbGVuYW1lKTpcIi5cIixzLm1vZHVsZUNhY2hlJiYocy5tb2R1bGVDYWNoZT17fSksaT10LmZpbGVuYW1lP2YuZGlybmFtZShhLnJlYWxwYXRoU3luYyh0LmZpbGVuYW1lKSk6YS5yZWFscGF0aFN5bmMoXCIuXCIpLHMucGF0aHM9cmVxdWlyZShcIm1vZHVsZVwiKS5fbm9kZU1vZHVsZVBhdGhzKGkpLCghbC5pc0NvZmZlZShzLmZpbGVuYW1lKXx8cmVxdWlyZS5leHRlbnNpb25zKSYmKG49cihlLHQpLGU9bnVsbCE9KG89bi5qcyk/bzpuKSxzLl9jb21waWxlKGUscy5maWxlbmFtZSl9LGUuZXZhbD1mdW5jdGlvbihlLHQpe3ZhciBuLGkscyxvLGEsYyxsLGgsdSxwLGQsbSxnLHksayx3LFQ7aWYobnVsbD09dCYmKHQ9e30pLGU9ZS50cmltKCkpe2lmKG89bnVsbCE9KG09di5TY3JpcHQuY3JlYXRlQ29udGV4dCk/bTp2LmNyZWF0ZUNvbnRleHQsYz1udWxsIT0oZz12LmlzQ29udGV4dCk/ZzpmdW5jdGlvbigpe3JldHVybiB0LnNhbmRib3ggaW5zdGFuY2VvZiBvKCkuY29uc3RydWN0b3J9LG8pe2lmKG51bGwhPXQuc2FuZGJveCl7aWYoYyh0LnNhbmRib3gpKXc9dC5zYW5kYm94O2Vsc2V7dz1vKCkseT10LnNhbmRib3g7Zm9yKGggaW4geSliLmNhbGwoeSxoKSYmKFQ9eVtoXSx3W2hdPVQpfXcuZ2xvYmFsPXcucm9vdD13LkdMT0JBTD13fWVsc2Ugdz1nbG9iYWw7aWYody5fX2ZpbGVuYW1lPXQuZmlsZW5hbWV8fFwiZXZhbFwiLHcuX19kaXJuYW1lPWYuZGlybmFtZSh3Ll9fZmlsZW5hbWUpLHc9PT1nbG9iYWwmJiF3Lm1vZHVsZSYmIXcucmVxdWlyZSl7Zm9yKG49cmVxdWlyZShcIm1vZHVsZVwiKSx3Lm1vZHVsZT1pPW5ldyBuKHQubW9kdWxlbmFtZXx8XCJldmFsXCIpLHcucmVxdWlyZT1zPWZ1bmN0aW9uKGUpe3JldHVybiBuLl9sb2FkKGUsaSwhMCl9LGkuZmlsZW5hbWU9dy5fX2ZpbGVuYW1lLGs9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocmVxdWlyZSksYT0wLHU9ay5sZW5ndGg7dT5hO2ErKylkPWtbYV0sXCJwYXRoc1wiIT09ZCYmKHNbZF09cmVxdWlyZVtkXSk7cy5wYXRocz1pLnBhdGhzPW4uX25vZGVNb2R1bGVQYXRocyhwcm9jZXNzLmN3ZCgpKSxzLnJlc29sdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uX3Jlc29sdmVGaWxlbmFtZShlLGkpfX19cD17fTtmb3IoaCBpbiB0KWIuY2FsbCh0LGgpJiYoVD10W2hdLHBbaF09VCk7cmV0dXJuIHAuYmFyZT0hMCxsPXIoZSxwKSx3PT09Z2xvYmFsP3YucnVuSW5UaGlzQ29udGV4dChsKTp2LnJ1bkluQ29udGV4dChsLHcpfX0sZS5yZWdpc3Rlcj1mdW5jdGlvbigpe3JldHVybiByZXF1aXJlKFwiLi9yZWdpc3RlclwiKX0scmVxdWlyZS5leHRlbnNpb25zKWZvcihtPXRoaXMuRklMRV9FWFRFTlNJT05TLGg9MCx1PW0ubGVuZ3RoO3U+aDtoKyspcz1tW2hdLG51bGw9PShpPXJlcXVpcmUuZXh0ZW5zaW9ucylbc10mJihpW3NdPWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJVc2UgQ29mZmVlU2NyaXB0LnJlZ2lzdGVyKCkgb3IgcmVxdWlyZSB0aGUgY29mZmVlLXNjcmlwdC9yZWdpc3RlciBtb2R1bGUgdG8gcmVxdWlyZSBcIitzK1wiIGZpbGVzLlwiKX0pO2UuX2NvbXBpbGVGaWxlPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxzLG87bnVsbD09dCYmKHQ9ITEpLHM9YS5yZWFkRmlsZVN5bmMoZSxcInV0ZjhcIiksbz02NTI3OT09PXMuY2hhckNvZGVBdCgwKT9zLnN1YnN0cmluZygxKTpzO3RyeXtuPXIobyx7ZmlsZW5hbWU6ZSxzb3VyY2VNYXA6dCxsaXRlcmF0ZTpsLmlzTGl0ZXJhdGUoZSl9KX1jYXRjaChjKXt0aHJvdyBpPWMsbC51cGRhdGVTeW50YXhFcnJvcihpLG8sZSl9cmV0dXJuIG59LHA9bmV3IHQsZC5sZXhlcj17bGV4OmZ1bmN0aW9uKCl7dmFyIGUsdDtyZXR1cm4gdD1kLnRva2Vuc1t0aGlzLnBvcysrXSx0PyhlPXRbMF0sdGhpcy55eXRleHQ9dFsxXSx0aGlzLnl5bGxvYz10WzJdLGQuZXJyb3JUb2tlbj10Lm9yaWdpbnx8dCx0aGlzLnl5bGluZW5vPXRoaXMueXlsbG9jLmZpcnN0X2xpbmUpOmU9XCJcIixlfSxzZXRJbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gZC50b2tlbnM9ZSx0aGlzLnBvcz0wfSx1cGNvbWluZ0lucHV0OmZ1bmN0aW9uKCl7cmV0dXJuXCJcIn19LGQueXk9cmVxdWlyZShcIi4vbm9kZXNcIiksZC55eS5wYXJzZUVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHMsbyxhO3JldHVybiBvPXQudG9rZW4scz1kLmVycm9yVG9rZW4sYT1kLnRva2VucyxpPXNbMF0scj1zWzFdLG49c1syXSxyPWZ1bmN0aW9uKCl7c3dpdGNoKCExKXtjYXNlIHMhPT1hW2EubGVuZ3RoLTFdOnJldHVyblwiZW5kIG9mIGlucHV0XCI7Y2FzZVwiSU5ERU5UXCIhPT1pJiZcIk9VVERFTlRcIiE9PWk6cmV0dXJuXCJpbmRlbnRhdGlvblwiO2Nhc2VcIklERU5USUZJRVJcIiE9PWkmJlwiTlVNQkVSXCIhPT1pJiZcIlNUUklOR1wiIT09aSYmXCJTVFJJTkdfU1RBUlRcIiE9PWkmJlwiUkVHRVhcIiE9PWkmJlwiUkVHRVhfU1RBUlRcIiE9PWk6cmV0dXJuIGkucmVwbGFjZSgvX1NUQVJUJC8sXCJcIikudG9Mb3dlckNhc2UoKTtkZWZhdWx0OnJldHVybiBsLm5hbWVXaGl0ZXNwYWNlQ2hhcmFjdGVyKHIpfX0oKSxsLnRocm93U3ludGF4RXJyb3IoXCJ1bmV4cGVjdGVkIFwiK3Isbil9LG89ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIscyxvLGEsYyxsLGgsdSxwLGQ7cmV0dXJuIHM9dm9pZCAwLHI9XCJcIixlLmlzTmF0aXZlKCk/cj1cIm5hdGl2ZVwiOihlLmlzRXZhbCgpPyhzPWUuZ2V0U2NyaXB0TmFtZU9yU291cmNlVVJMKCksc3x8KHI9ZS5nZXRFdmFsT3JpZ2luKCkrXCIsIFwiKSk6cz1lLmdldEZpbGVOYW1lKCksc3x8KHM9XCI8YW5vbnltb3VzPlwiKSxsPWUuZ2V0TGluZU51bWJlcigpLGk9ZS5nZXRDb2x1bW5OdW1iZXIoKSx1PXQocyxsLGkpLHI9dT9zK1wiOlwiK3VbMF0rXCI6XCIrdVsxXTpzK1wiOlwiK2wrXCI6XCIraSksbz1lLmdldEZ1bmN0aW9uTmFtZSgpLGE9ZS5pc0NvbnN0cnVjdG9yKCksYz0hKGUuaXNUb3BsZXZlbCgpfHxhKSxjPyhoPWUuZ2V0TWV0aG9kTmFtZSgpLGQ9ZS5nZXRUeXBlTmFtZSgpLG8/KHA9bj1cIlwiLGQmJm8uaW5kZXhPZihkKSYmKHA9ZCtcIi5cIiksaCYmby5pbmRleE9mKFwiLlwiK2gpIT09by5sZW5ndGgtaC5sZW5ndGgtMSYmKG49XCIgW2FzIFwiK2grXCJdXCIpLFwiXCIrcCtvK24rXCIgKFwiK3IrXCIpXCIpOmQrXCIuXCIrKGh8fFwiPGFub255bW91cz5cIikrXCIgKFwiK3IrXCIpXCIpOmE/XCJuZXcgXCIrKG98fFwiPGFub255bW91cz5cIikrXCIgKFwiK3IrXCIpXCI6bz9vK1wiIChcIityK1wiKVwiOnJ9LGc9e30sYz1mdW5jdGlvbih0KXt2YXIgbixpO2lmKGdbdF0pcmV0dXJuIGdbdF07aWYoaT1udWxsIT1mP2YuZXh0bmFtZSh0KTp2b2lkIDAsISgwPmsuY2FsbChlLkZJTEVfRVhURU5TSU9OUyxpKSkpcmV0dXJuIG49ZS5fY29tcGlsZUZpbGUodCwhMCksZ1t0XT1uLnNvdXJjZU1hcH0sRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U9ZnVuY3Rpb24odCxuKXt2YXIgaSxyLHM7cmV0dXJuIHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI7cmV0dXJuIHI9YyhlKSxyJiYoaT1yLnNvdXJjZUxvY2F0aW9uKFt0LTEsbi0xXSkpLGk/W2lbMF0rMSxpWzFdKzFdOm51bGx9LHI9ZnVuY3Rpb24oKXt2YXIgdCxyLGE7Zm9yKGE9W10sdD0wLHI9bi5sZW5ndGg7cj50JiYoaT1uW3RdLGkuZ2V0RnVuY3Rpb24oKSE9PWUucnVuKTt0KyspYS5wdXNoKFwiICBhdCBcIitvKGkscykpO3JldHVybiBhfSgpLFwiXCIrdCtcIlxcblwiK3Iuam9pbihcIlxcblwiKStcIlxcblwifX0uY2FsbCh0aGlzKSx0LmV4cG9ydHN9KCkscmVxdWlyZVtcIi4vYnJvd3NlclwiXT1mdW5jdGlvbigpe3ZhciBleHBvcnRzPXt9LG1vZHVsZT17ZXhwb3J0czpleHBvcnRzfTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgQ29mZmVlU2NyaXB0LGNvbXBpbGUscnVuU2NyaXB0cyxpbmRleE9mPVtdLmluZGV4T2Z8fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49dGhpcy5sZW5ndGg7bj50O3QrKylpZih0IGluIHRoaXMmJnRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfTtDb2ZmZWVTY3JpcHQ9cmVxdWlyZShcIi4vY29mZmVlLXNjcmlwdFwiKSxDb2ZmZWVTY3JpcHQucmVxdWlyZT1yZXF1aXJlLGNvbXBpbGU9Q29mZmVlU2NyaXB0LmNvbXBpbGUsQ29mZmVlU2NyaXB0LmV2YWw9ZnVuY3Rpb24oY29kZSxvcHRpb25zKXtyZXR1cm4gbnVsbD09b3B0aW9ucyYmKG9wdGlvbnM9e30pLG51bGw9PW9wdGlvbnMuYmFyZSYmKG9wdGlvbnMuYmFyZT0hMCksZXZhbChjb21waWxlKGNvZGUsb3B0aW9ucykpfSxDb2ZmZWVTY3JpcHQucnVuPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PXQmJih0PXt9KSx0LmJhcmU9ITAsdC5zaGlmdExpbmU9ITAsRnVuY3Rpb24oY29tcGlsZShlLHQpKSgpfSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZudWxsIT09d2luZG93JiYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGJ0b2EmJm51bGwhPT1idG9hJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgSlNPTiYmbnVsbCE9PUpTT04mJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmVzY2FwZSYmbnVsbCE9PXVuZXNjYXBlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZW5jb2RlVVJJQ29tcG9uZW50JiZudWxsIT09ZW5jb2RlVVJJQ29tcG9uZW50JiYoY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLGkscjtyZXR1cm4gbnVsbD09dCYmKHQ9e30pLHQuc291cmNlTWFwPSEwLHQuaW5saW5lPSEwLGk9Q29mZmVlU2NyaXB0LmNvbXBpbGUoZSx0KSxuPWkuanMscj1pLnYzU291cmNlTWFwLG4rXCJcXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiK2J0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHIpKSkrXCJcXG4vLyMgc291cmNlVVJMPWNvZmZlZXNjcmlwdFwifSksQ29mZmVlU2NyaXB0LmxvYWQ9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI7cmV0dXJuIG51bGw9PW4mJihuPXt9KSxudWxsPT1pJiYoaT0hMSksbi5zb3VyY2VGaWxlcz1bZV0scj13aW5kb3cuQWN0aXZlWE9iamVjdD9uZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTpuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0LHIub3BlbihcIkdFVFwiLGUsITApLFwib3ZlcnJpZGVNaW1lVHlwZVwiaW4gciYmci5vdmVycmlkZU1pbWVUeXBlKFwidGV4dC9wbGFpblwiKSxyLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3ZhciBzLG87aWYoND09PXIucmVhZHlTdGF0ZSl7aWYoMCE9PShvPXIuc3RhdHVzKSYmMjAwIT09byl0aHJvdyBFcnJvcihcIkNvdWxkIG5vdCBsb2FkIFwiK2UpO2lmKHM9W3IucmVzcG9uc2VUZXh0LG5dLGl8fENvZmZlZVNjcmlwdC5ydW4uYXBwbHkoQ29mZmVlU2NyaXB0LHMpLHQpcmV0dXJuIHQocyl9fSxyLnNlbmQobnVsbCl9LHJ1blNjcmlwdHM9ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLHMsbyxhLGMsbCxoO2ZvcihoPXdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSx0PVtcInRleHQvY29mZmVlc2NyaXB0XCIsXCJ0ZXh0L2xpdGVyYXRlLWNvZmZlZXNjcmlwdFwiXSxlPWZ1bmN0aW9uKCl7dmFyIGUsbixpLHI7Zm9yKHI9W10sZT0wLG49aC5sZW5ndGg7bj5lO2UrKyljPWhbZV0saT1jLnR5cGUsaW5kZXhPZi5jYWxsKHQsaSk+PTAmJnIucHVzaChjKTtyZXR1cm4gcn0oKSxzPTAsbj1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0PWVbc10sdCBpbnN0YW5jZW9mIEFycmF5PyhDb2ZmZWVTY3JpcHQucnVuLmFwcGx5KENvZmZlZVNjcmlwdCx0KSxzKyssbigpKTp2b2lkIDB9LGk9ZnVuY3Rpb24oaSxyKXt2YXIgcyxvO3JldHVybiBzPXtsaXRlcmF0ZTppLnR5cGU9PT10WzFdfSxvPWkuc3JjfHxpLmdldEF0dHJpYnV0ZShcImRhdGEtc3JjXCIpLG8/Q29mZmVlU2NyaXB0LmxvYWQobyxmdW5jdGlvbih0KXtyZXR1cm4gZVtyXT10LG4oKX0scywhMCk6KHMuc291cmNlRmlsZXM9W1wiZW1iZWRkZWRcIl0sZVtyXT1baS5pbm5lckhUTUwsc10pfSxyPW89MCxhPWUubGVuZ3RoO2E+bztyPSsrbylsPWVbcl0saShsLHIpO3JldHVybiBuKCl9LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyP3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLHJ1blNjcmlwdHMsITEpOndpbmRvdy5hdHRhY2hFdmVudChcIm9ubG9hZFwiLHJ1blNjcmlwdHMpKX0uY2FsbCh0aGlzKSxtb2R1bGUuZXhwb3J0c30oKSxyZXF1aXJlW1wiLi9jb2ZmZWUtc2NyaXB0XCJdfSgpO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gQ29mZmVlU2NyaXB0fSk6cm9vdC5Db2ZmZWVTY3JpcHQ9Q29mZmVlU2NyaXB0fSkodGhpcyk7IiwiLyohXG4gKiB0eXBlYWhlYWQuanMgMC45LjNcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS90d2l0dGVyL3R5cGVhaGVhZFxuICogQ29weXJpZ2h0IDIwMTMgVHdpdHRlciwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzOyBMaWNlbnNlZCBNSVRcbiAqL1xuXG4oZnVuY3Rpb24oJCkge1xuICAgIHZhciBWRVJTSU9OID0gXCIwLjkuM1wiO1xuICAgIHZhciB1dGlscyA9IHtcbiAgICAgICAgaXNNc2llOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IC8obXNpZSkgKFtcXHcuXSspL2kuZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaCA/IHBhcnNlSW50KG1hdGNoWzJdLCAxMCkgOiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNCbGFua1N0cmluZzogZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gIXN0ciB8fCAvXlxccyokLy50ZXN0KHN0cik7XG4gICAgICAgIH0sXG4gICAgICAgIGVzY2FwZVJlZ0V4Q2hhcnM6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGlzU3RyaW5nOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiO1xuICAgICAgICB9LFxuICAgICAgICBpc051bWJlcjogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJudW1iZXJcIjtcbiAgICAgICAgfSxcbiAgICAgICAgaXNBcnJheTogJC5pc0FycmF5LFxuICAgICAgICBpc0Z1bmN0aW9uOiAkLmlzRnVuY3Rpb24sXG4gICAgICAgIGlzT2JqZWN0OiAkLmlzUGxhaW5PYmplY3QsXG4gICAgICAgIGlzVW5kZWZpbmVkOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiO1xuICAgICAgICB9LFxuICAgICAgICBiaW5kOiAkLnByb3h5LFxuICAgICAgICBiaW5kQWxsOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciB2YWw7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKHZhbCA9IG9ialtrZXldKSAmJiAob2JqW2tleV0gPSAkLnByb3h5KHZhbCwgb2JqKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGluZGV4T2Y6IGZ1bmN0aW9uKGhheXN0YWNrLCBuZWVkbGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGF5c3RhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaGF5c3RhY2tbaV0gPT09IG5lZWRsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH0sXG4gICAgICAgIGVhY2g6ICQuZWFjaCxcbiAgICAgICAgbWFwOiAkLm1hcCxcbiAgICAgICAgZmlsdGVyOiAkLmdyZXAsXG4gICAgICAgIGV2ZXJ5OiBmdW5jdGlvbihvYmosIHRlc3QpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCFvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJC5lYWNoKG9iaiwgZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZXN1bHQgPSB0ZXN0LmNhbGwobnVsbCwgdmFsLCBrZXksIG9iaikpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICAgICAgfSxcbiAgICAgICAgc29tZTogZnVuY3Rpb24ob2JqLCB0ZXN0KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkLmVhY2gob2JqLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPSB0ZXN0LmNhbGwobnVsbCwgdmFsLCBrZXksIG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICEhcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBtaXhpbjogJC5leHRlbmQsXG4gICAgICAgIGdldFVuaXF1ZUlkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY291bnRlcisrO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSgpLFxuICAgICAgICBkZWZlcjogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZm4sIDApO1xuICAgICAgICB9LFxuICAgICAgICBkZWJvdW5jZTogZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICB2YXIgdGltZW91dCwgcmVzdWx0O1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cywgbGF0ZXIsIGNhbGxOb3c7XG4gICAgICAgICAgICAgICAgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIHRocm90dGxlOiBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG4gICAgICAgICAgICB2YXIgY29udGV4dCwgYXJncywgdGltZW91dCwgcmVzdWx0LCBwcmV2aW91cywgbGF0ZXI7XG4gICAgICAgICAgICBwcmV2aW91cyA9IDA7XG4gICAgICAgICAgICBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKSwgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuaXplUXVlcnk6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuICQudHJpbShzdHIpLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1tcXHNdKy8pO1xuICAgICAgICB9LFxuICAgICAgICB0b2tlbml6ZVRleHQ6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuICQudHJpbShzdHIpLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1tcXHNcXC1fXSsvKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UHJvdG9jb2w6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICB9LFxuICAgICAgICBub29wOiBmdW5jdGlvbigpIHt9XG4gICAgfTtcbiAgICB2YXIgRXZlbnRUYXJnZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGV2ZW50U3BsaXR0ZXIgPSAvXFxzKy87XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvbjogZnVuY3Rpb24oZXZlbnRzLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciBldmVudDtcbiAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG4gICAgICAgICAgICAgICAgZXZlbnRzID0gZXZlbnRzLnNwbGl0KGV2ZW50U3BsaXR0ZXIpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChldmVudCA9IGV2ZW50cy5zaGlmdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrc1tldmVudF0gPSB0aGlzLl9jYWxsYmFja3NbZXZlbnRdIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFja3NbZXZlbnRdLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbihldmVudHMsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnQsIGNhbGxiYWNrcztcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2NhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXZlbnRzID0gZXZlbnRzLnNwbGl0KGV2ZW50U3BsaXR0ZXIpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChldmVudCA9IGV2ZW50cy5zaGlmdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbZXZlbnRdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KCk7XG4gICAgdmFyIEV2ZW50QnVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBuYW1lc3BhY2UgPSBcInR5cGVhaGVhZDpcIjtcbiAgICAgICAgZnVuY3Rpb24gRXZlbnRCdXMobykge1xuICAgICAgICAgICAgaWYgKCFvIHx8ICFvLmVsKSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcihcIkV2ZW50QnVzIGluaXRpYWxpemVkIHdpdGhvdXQgZWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRlbCA9ICQoby5lbCk7XG4gICAgICAgIH1cbiAgICAgICAgdXRpbHMubWl4aW4oRXZlbnRCdXMucHJvdG90eXBlLCB7XG4gICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwudHJpZ2dlcihuYW1lc3BhY2UgKyB0eXBlLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBFdmVudEJ1cztcbiAgICB9KCk7XG4gICAgdmFyIFBlcnNpc3RlbnRTdG9yYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBscywgbWV0aG9kcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxzID0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgICAgICAgIGxzLnNldEl0ZW0oXCJ+fn5cIiwgXCIhXCIpO1xuICAgICAgICAgICAgbHMucmVtb3ZlSXRlbShcIn5+flwiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBscyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gUGVyc2lzdGVudFN0b3JhZ2UobmFtZXNwYWNlKSB7XG4gICAgICAgICAgICB0aGlzLnByZWZpeCA9IFsgXCJfX1wiLCBuYW1lc3BhY2UsIFwiX19cIiBdLmpvaW4oXCJcIik7XG4gICAgICAgICAgICB0aGlzLnR0bEtleSA9IFwiX190dGxfX1wiO1xuICAgICAgICAgICAgdGhpcy5rZXlNYXRjaGVyID0gbmV3IFJlZ0V4cChcIl5cIiArIHRoaXMucHJlZml4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobHMgJiYgd2luZG93LkpTT04pIHtcbiAgICAgICAgICAgIG1ldGhvZHMgPSB7XG4gICAgICAgICAgICAgICAgX3ByZWZpeDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByZWZpeCArIGtleTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF90dGxLZXk6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJlZml4KGtleSkgKyB0aGlzLnR0bEtleTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRXhwaXJlZChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNvZGUobHMuZ2V0SXRlbSh0aGlzLl9wcmVmaXgoa2V5KSkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihrZXksIHZhbCwgdHRsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc051bWJlcih0dGwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBscy5zZXRJdGVtKHRoaXMuX3R0bEtleShrZXkpLCBlbmNvZGUobm93KCkgKyB0dGwpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxzLnJlbW92ZUl0ZW0odGhpcy5fdHRsS2V5KGtleSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBscy5zZXRJdGVtKHRoaXMuX3ByZWZpeChrZXkpLCBlbmNvZGUodmFsKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgICAgICBscy5yZW1vdmVJdGVtKHRoaXMuX3R0bEtleShrZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgbHMucmVtb3ZlSXRlbSh0aGlzLl9wcmVmaXgoa2V5KSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSwga2V5LCBrZXlzID0gW10sIGxlbiA9IGxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGtleSA9IGxzLmtleShpKSkubWF0Y2godGhpcy5rZXlNYXRjaGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkucmVwbGFjZSh0aGlzLmtleU1hdGNoZXIsIFwiXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBrZXlzLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNFeHBpcmVkOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR0bCA9IGRlY29kZShscy5nZXRJdGVtKHRoaXMuX3R0bEtleShrZXkpKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlscy5pc051bWJlcih0dGwpICYmIG5vdygpID4gdHRsID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXRob2RzID0ge1xuICAgICAgICAgICAgICAgIGdldDogdXRpbHMubm9vcCxcbiAgICAgICAgICAgICAgICBzZXQ6IHV0aWxzLm5vb3AsXG4gICAgICAgICAgICAgICAgcmVtb3ZlOiB1dGlscy5ub29wLFxuICAgICAgICAgICAgICAgIGNsZWFyOiB1dGlscy5ub29wLFxuICAgICAgICAgICAgICAgIGlzRXhwaXJlZDogdXRpbHMubm9vcFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB1dGlscy5taXhpbihQZXJzaXN0ZW50U3RvcmFnZS5wcm90b3R5cGUsIG1ldGhvZHMpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVudFN0b3JhZ2U7XG4gICAgICAgIGZ1bmN0aW9uIG5vdygpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodXRpbHMuaXNVbmRlZmluZWQodmFsKSA/IG51bGwgOiB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRlY29kZSh2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbCk7XG4gICAgICAgIH1cbiAgICB9KCk7XG4gICAgdmFyIFJlcXVlc3RDYWNoZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBSZXF1ZXN0Q2FjaGUobykge1xuICAgICAgICAgICAgdXRpbHMuYmluZEFsbCh0aGlzKTtcbiAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5zaXplTGltaXQgPSBvLnNpemVMaW1pdCB8fCAxMDtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkS2V5c0J5QWdlID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdXRpbHMubWl4aW4oUmVxdWVzdENhY2hlLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVt1cmxdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24odXJsLCByZXNwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RUb0V2aWN0O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhY2hlZEtleXNCeUFnZS5sZW5ndGggPT09IHRoaXMuc2l6ZUxpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUb0V2aWN0ID0gdGhpcy5jYWNoZWRLZXlzQnlBZ2Uuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2FjaGVbcmVxdWVzdFRvRXZpY3RdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlW3VybF0gPSByZXNwO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkS2V5c0J5QWdlLnB1c2godXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBSZXF1ZXN0Q2FjaGU7XG4gICAgfSgpO1xuICAgIHZhciBUcmFuc3BvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHBlbmRpbmdSZXF1ZXN0c0NvdW50ID0gMCwgcGVuZGluZ1JlcXVlc3RzID0ge30sIG1heFBlbmRpbmdSZXF1ZXN0cywgcmVxdWVzdENhY2hlO1xuICAgICAgICBmdW5jdGlvbiBUcmFuc3BvcnQobykge1xuICAgICAgICAgICAgdXRpbHMuYmluZEFsbCh0aGlzKTtcbiAgICAgICAgICAgIG8gPSB1dGlscy5pc1N0cmluZyhvKSA/IHtcbiAgICAgICAgICAgICAgICB1cmw6IG9cbiAgICAgICAgICAgIH0gOiBvO1xuICAgICAgICAgICAgcmVxdWVzdENhY2hlID0gcmVxdWVzdENhY2hlIHx8IG5ldyBSZXF1ZXN0Q2FjaGUoKTtcbiAgICAgICAgICAgIG1heFBlbmRpbmdSZXF1ZXN0cyA9IHV0aWxzLmlzTnVtYmVyKG8ubWF4UGFyYWxsZWxSZXF1ZXN0cykgPyBvLm1heFBhcmFsbGVsUmVxdWVzdHMgOiBtYXhQZW5kaW5nUmVxdWVzdHMgfHwgNjtcbiAgICAgICAgICAgIHRoaXMudXJsID0gby51cmw7XG4gICAgICAgICAgICB0aGlzLndpbGRjYXJkID0gby53aWxkY2FyZCB8fCBcIiVRVUVSWVwiO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXIgPSBvLmZpbHRlcjtcbiAgICAgICAgICAgIHRoaXMucmVwbGFjZSA9IG8ucmVwbGFjZTtcbiAgICAgICAgICAgIHRoaXMuYWpheFNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICAgICAgY2FjaGU6IG8uY2FjaGUsXG4gICAgICAgICAgICAgICAgdGltZW91dDogby50aW1lb3V0LFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBvLmRhdGFUeXBlIHx8IFwianNvblwiLFxuICAgICAgICAgICAgICAgIGJlZm9yZVNlbmQ6IG8uYmVmb3JlU2VuZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuX2dldCA9ICgvXnRocm90dGxlJC9pLnRlc3Qoby5yYXRlTGltaXRGbikgPyB1dGlscy50aHJvdHRsZSA6IHV0aWxzLmRlYm91bmNlKSh0aGlzLl9nZXQsIG8ucmF0ZUxpbWl0V2FpdCB8fCAzMDApO1xuICAgICAgICB9XG4gICAgICAgIHV0aWxzLm1peGluKFRyYW5zcG9ydC5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIF9nZXQ6IGZ1bmN0aW9uKHVybCwgY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKGJlbG93UGVuZGluZ1JlcXVlc3RzVGhyZXNob2xkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VuZFJlcXVlc3QodXJsKS5kb25lKGRvbmUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EZWNrUmVxdWVzdEFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRvbmUocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHRoYXQuZmlsdGVyID8gdGhhdC5maWx0ZXIocmVzcCkgOiByZXNwO1xuICAgICAgICAgICAgICAgICAgICBjYiAmJiBjYihkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdENhY2hlLnNldCh1cmwsIHJlc3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2VuZFJlcXVlc3Q6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywganFYaHIgPSBwZW5kaW5nUmVxdWVzdHNbdXJsXTtcbiAgICAgICAgICAgICAgICBpZiAoIWpxWGhyKSB7XG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudFBlbmRpbmdSZXF1ZXN0cygpO1xuICAgICAgICAgICAgICAgICAgICBqcVhociA9IHBlbmRpbmdSZXF1ZXN0c1t1cmxdID0gJC5hamF4KHVybCwgdGhpcy5hamF4U2V0dGluZ3MpLmFsd2F5cyhhbHdheXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ganFYaHI7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYWx3YXlzKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWNyZW1lbnRQZW5kaW5nUmVxdWVzdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3RzW3VybF0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5vbkRlY2tSZXF1ZXN0QXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5fZ2V0LmFwcGx5KHRoYXQsIHRoYXQub25EZWNrUmVxdWVzdEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5vbkRlY2tSZXF1ZXN0QXJncyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbihxdWVyeSwgY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIGVuY29kZWRRdWVyeSA9IGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSB8fCBcIlwiKSwgdXJsLCByZXNwO1xuICAgICAgICAgICAgICAgIGNiID0gY2IgfHwgdXRpbHMubm9vcDtcbiAgICAgICAgICAgICAgICB1cmwgPSB0aGlzLnJlcGxhY2UgPyB0aGlzLnJlcGxhY2UodGhpcy51cmwsIGVuY29kZWRRdWVyeSkgOiB0aGlzLnVybC5yZXBsYWNlKHRoaXMud2lsZGNhcmQsIGVuY29kZWRRdWVyeSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3AgPSByZXF1ZXN0Q2FjaGUuZ2V0KHVybCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYih0aGF0LmZpbHRlciA/IHRoYXQuZmlsdGVyKHJlc3ApIDogcmVzcCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldCh1cmwsIGNiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhcmVzcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBUcmFuc3BvcnQ7XG4gICAgICAgIGZ1bmN0aW9uIGluY3JlbWVudFBlbmRpbmdSZXF1ZXN0cygpIHtcbiAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0c0NvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZGVjcmVtZW50UGVuZGluZ1JlcXVlc3RzKCkge1xuICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3RzQ291bnQtLTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBiZWxvd1BlbmRpbmdSZXF1ZXN0c1RocmVzaG9sZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBwZW5kaW5nUmVxdWVzdHNDb3VudCA8IG1heFBlbmRpbmdSZXF1ZXN0cztcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgRGF0YXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIga2V5cyA9IHtcbiAgICAgICAgICAgIHRodW1icHJpbnQ6IFwidGh1bWJwcmludFwiLFxuICAgICAgICAgICAgcHJvdG9jb2w6IFwicHJvdG9jb2xcIixcbiAgICAgICAgICAgIGl0ZW1IYXNoOiBcIml0ZW1IYXNoXCIsXG4gICAgICAgICAgICBhZGphY2VuY3lMaXN0OiBcImFkamFjZW5jeUxpc3RcIlxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBEYXRhc2V0KG8pIHtcbiAgICAgICAgICAgIHV0aWxzLmJpbmRBbGwodGhpcyk7XG4gICAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoby50ZW1wbGF0ZSkgJiYgIW8uZW5naW5lKSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcihcIm5vIHRlbXBsYXRlIGVuZ2luZSBzcGVjaWZpZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW8ubG9jYWwgJiYgIW8ucHJlZmV0Y2ggJiYgIW8ucmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcihcIm9uZSBvZiBsb2NhbCwgcHJlZmV0Y2gsIG9yIHJlbW90ZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG8ubmFtZSB8fCB1dGlscy5nZXRVbmlxdWVJZCgpO1xuICAgICAgICAgICAgdGhpcy5saW1pdCA9IG8ubGltaXQgfHwgNTtcbiAgICAgICAgICAgIHRoaXMubWluTGVuZ3RoID0gby5taW5MZW5ndGggfHwgMTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gby5oZWFkZXI7XG4gICAgICAgICAgICB0aGlzLmZvb3RlciA9IG8uZm9vdGVyO1xuICAgICAgICAgICAgdGhpcy52YWx1ZUtleSA9IG8udmFsdWVLZXkgfHwgXCJ2YWx1ZVwiO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGNvbXBpbGVUZW1wbGF0ZShvLnRlbXBsYXRlLCBvLmVuZ2luZSwgdGhpcy52YWx1ZUtleSk7XG4gICAgICAgICAgICB0aGlzLmxvY2FsID0gby5sb2NhbDtcbiAgICAgICAgICAgIHRoaXMucHJlZmV0Y2ggPSBvLnByZWZldGNoO1xuICAgICAgICAgICAgdGhpcy5yZW1vdGUgPSBvLnJlbW90ZTtcbiAgICAgICAgICAgIHRoaXMuaXRlbUhhc2ggPSB7fTtcbiAgICAgICAgICAgIHRoaXMuYWRqYWNlbmN5TGlzdCA9IHt9O1xuICAgICAgICAgICAgdGhpcy5zdG9yYWdlID0gby5uYW1lID8gbmV3IFBlcnNpc3RlbnRTdG9yYWdlKG8ubmFtZSkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHV0aWxzLm1peGluKERhdGFzZXQucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBfcHJvY2Vzc0xvY2FsRGF0YTogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21lcmdlUHJvY2Vzc2VkRGF0YSh0aGlzLl9wcm9jZXNzRGF0YShkYXRhKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2xvYWRQcmVmZXRjaERhdGE6IGZ1bmN0aW9uKG8pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIHRodW1icHJpbnQgPSBWRVJTSU9OICsgKG8udGh1bWJwcmludCB8fCBcIlwiKSwgc3RvcmVkVGh1bWJwcmludCwgc3RvcmVkUHJvdG9jb2wsIHN0b3JlZEl0ZW1IYXNoLCBzdG9yZWRBZGphY2VuY3lMaXN0LCBpc0V4cGlyZWQsIGRlZmVycmVkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVkVGh1bWJwcmludCA9IHRoaXMuc3RvcmFnZS5nZXQoa2V5cy50aHVtYnByaW50KTtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVkUHJvdG9jb2wgPSB0aGlzLnN0b3JhZ2UuZ2V0KGtleXMucHJvdG9jb2wpO1xuICAgICAgICAgICAgICAgICAgICBzdG9yZWRJdGVtSGFzaCA9IHRoaXMuc3RvcmFnZS5nZXQoa2V5cy5pdGVtSGFzaCk7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlZEFkamFjZW5jeUxpc3QgPSB0aGlzLnN0b3JhZ2UuZ2V0KGtleXMuYWRqYWNlbmN5TGlzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlzRXhwaXJlZCA9IHN0b3JlZFRodW1icHJpbnQgIT09IHRodW1icHJpbnQgfHwgc3RvcmVkUHJvdG9jb2wgIT09IHV0aWxzLmdldFByb3RvY29sKCk7XG4gICAgICAgICAgICAgICAgbyA9IHV0aWxzLmlzU3RyaW5nKG8pID8ge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IG9cbiAgICAgICAgICAgICAgICB9IDogbztcbiAgICAgICAgICAgICAgICBvLnR0bCA9IHV0aWxzLmlzTnVtYmVyKG8udHRsKSA/IG8udHRsIDogMjQgKiA2MCAqIDYwICogMWUzO1xuICAgICAgICAgICAgICAgIGlmIChzdG9yZWRJdGVtSGFzaCAmJiBzdG9yZWRBZGphY2VuY3lMaXN0ICYmICFpc0V4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVyZ2VQcm9jZXNzZWREYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1IYXNoOiBzdG9yZWRJdGVtSGFzaCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW5jeUxpc3Q6IHN0b3JlZEFkamFjZW5jeUxpc3RcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZCA9ICQuZ2V0SlNPTihvLnVybCkuZG9uZShwcm9jZXNzUHJlZmV0Y2hEYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NQcmVmZXRjaERhdGEoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWREYXRhID0gby5maWx0ZXIgPyBvLmZpbHRlcihkYXRhKSA6IGRhdGEsIHByb2Nlc3NlZERhdGEgPSB0aGF0Ll9wcm9jZXNzRGF0YShmaWx0ZXJlZERhdGEpLCBpdGVtSGFzaCA9IHByb2Nlc3NlZERhdGEuaXRlbUhhc2gsIGFkamFjZW5jeUxpc3QgPSBwcm9jZXNzZWREYXRhLmFkamFjZW5jeUxpc3Q7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LnN0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc3RvcmFnZS5zZXQoa2V5cy5pdGVtSGFzaCwgaXRlbUhhc2gsIG8udHRsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc3RvcmFnZS5zZXQoa2V5cy5hZGphY2VuY3lMaXN0LCBhZGphY2VuY3lMaXN0LCBvLnR0bCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnN0b3JhZ2Uuc2V0KGtleXMudGh1bWJwcmludCwgdGh1bWJwcmludCwgby50dGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zdG9yYWdlLnNldChrZXlzLnByb3RvY29sLCB1dGlscy5nZXRQcm90b2NvbCgpLCBvLnR0bCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhhdC5fbWVyZ2VQcm9jZXNzZWREYXRhKHByb2Nlc3NlZERhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfdHJhbnNmb3JtRGF0dW06IGZ1bmN0aW9uKGRhdHVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdXRpbHMuaXNTdHJpbmcoZGF0dW0pID8gZGF0dW0gOiBkYXR1bVt0aGlzLnZhbHVlS2V5XSwgdG9rZW5zID0gZGF0dW0udG9rZW5zIHx8IHV0aWxzLnRva2VuaXplVGV4dCh2YWx1ZSksIGl0ZW0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiB0b2tlbnNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhkYXR1bSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5kYXR1bSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmRhdHVtW3RoaXMudmFsdWVLZXldID0gZGF0dW07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5kYXR1bSA9IGRhdHVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpdGVtLnRva2VucyA9IHV0aWxzLmZpbHRlcihpdGVtLnRva2VucywgZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF1dGlscy5pc0JsYW5rU3RyaW5nKHRva2VuKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpdGVtLnRva2VucyA9IHV0aWxzLm1hcChpdGVtLnRva2VucywgZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Byb2Nlc3NEYXRhOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLCBpdGVtSGFzaCA9IHt9LCBhZGphY2VuY3lMaXN0ID0ge307XG4gICAgICAgICAgICAgICAgdXRpbHMuZWFjaChkYXRhLCBmdW5jdGlvbihpLCBkYXR1bSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoYXQuX3RyYW5zZm9ybURhdHVtKGRhdHVtKSwgaWQgPSB1dGlscy5nZXRVbmlxdWVJZChpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUhhc2hbaWRdID0gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMuZWFjaChpdGVtLnRva2VucywgZnVuY3Rpb24oaSwgdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFyYWN0ZXIgPSB0b2tlbi5jaGFyQXQoMCksIGFkamFjZW5jeSA9IGFkamFjZW5jeUxpc3RbY2hhcmFjdGVyXSB8fCAoYWRqYWNlbmN5TGlzdFtjaGFyYWN0ZXJdID0gWyBpZCBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICF+dXRpbHMuaW5kZXhPZihhZGphY2VuY3ksIGlkKSAmJiBhZGphY2VuY3kucHVzaChpZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1IYXNoOiBpdGVtSGFzaCxcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbmN5TGlzdDogYWRqYWNlbmN5TGlzdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21lcmdlUHJvY2Vzc2VkRGF0YTogZnVuY3Rpb24ocHJvY2Vzc2VkRGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICB1dGlscy5taXhpbih0aGlzLml0ZW1IYXNoLCBwcm9jZXNzZWREYXRhLml0ZW1IYXNoKTtcbiAgICAgICAgICAgICAgICB1dGlscy5lYWNoKHByb2Nlc3NlZERhdGEuYWRqYWNlbmN5TGlzdCwgZnVuY3Rpb24oY2hhcmFjdGVyLCBhZGphY2VuY3kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hc3RlckFkamFjZW5jeSA9IHRoYXQuYWRqYWNlbmN5TGlzdFtjaGFyYWN0ZXJdO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFkamFjZW5jeUxpc3RbY2hhcmFjdGVyXSA9IG1hc3RlckFkamFjZW5jeSA/IG1hc3RlckFkamFjZW5jeS5jb25jYXQoYWRqYWNlbmN5KSA6IGFkamFjZW5jeTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0TG9jYWxTdWdnZXN0aW9uczogZnVuY3Rpb24odGVybXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIGZpcnN0Q2hhcnMgPSBbXSwgbGlzdHMgPSBbXSwgc2hvcnRlc3RMaXN0LCBzdWdnZXN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHV0aWxzLmVhY2godGVybXMsIGZ1bmN0aW9uKGksIHRlcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0Q2hhciA9IHRlcm0uY2hhckF0KDApO1xuICAgICAgICAgICAgICAgICAgICAhfnV0aWxzLmluZGV4T2YoZmlyc3RDaGFycywgZmlyc3RDaGFyKSAmJiBmaXJzdENoYXJzLnB1c2goZmlyc3RDaGFyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB1dGlscy5lYWNoKGZpcnN0Q2hhcnMsIGZ1bmN0aW9uKGksIGZpcnN0Q2hhcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IHRoYXQuYWRqYWNlbmN5TGlzdFtmaXJzdENoYXJdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsaXN0cy5wdXNoKGxpc3QpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNob3J0ZXN0TGlzdCB8fCBsaXN0Lmxlbmd0aCA8IHNob3J0ZXN0TGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0ZXN0TGlzdCA9IGxpc3Q7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAobGlzdHMubGVuZ3RoIDwgZmlyc3RDaGFycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1dGlscy5lYWNoKHNob3J0ZXN0TGlzdCwgZnVuY3Rpb24oaSwgaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGF0Lml0ZW1IYXNoW2lkXSwgaXNDYW5kaWRhdGUsIGlzTWF0Y2g7XG4gICAgICAgICAgICAgICAgICAgIGlzQ2FuZGlkYXRlID0gdXRpbHMuZXZlcnkobGlzdHMsIGZ1bmN0aW9uKGxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB+dXRpbHMuaW5kZXhPZihsaXN0LCBpZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpc01hdGNoID0gaXNDYW5kaWRhdGUgJiYgdXRpbHMuZXZlcnkodGVybXMsIGZ1bmN0aW9uKHRlcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlscy5zb21lKGl0ZW0udG9rZW5zLCBmdW5jdGlvbih0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5pbmRleE9mKHRlcm0pID09PSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpc01hdGNoICYmIHN1Z2dlc3Rpb25zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Z2dlc3Rpb25zO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZDtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsICYmIHRoaXMuX3Byb2Nlc3NMb2NhbERhdGEodGhpcy5sb2NhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQgPSB0aGlzLnJlbW90ZSA/IG5ldyBUcmFuc3BvcnQodGhpcy5yZW1vdGUpIDogbnVsbDtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZCA9IHRoaXMucHJlZmV0Y2ggPyB0aGlzLl9sb2FkUHJlZmV0Y2hEYXRhKHRoaXMucHJlZmV0Y2gpIDogJC5EZWZlcnJlZCgpLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsID0gdGhpcy5wcmVmZXRjaCA9IHRoaXMucmVtb3RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFN1Z2dlc3Rpb25zOiBmdW5jdGlvbihxdWVyeSwgY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIHRlcm1zLCBzdWdnZXN0aW9ucywgY2FjaGVIaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAocXVlcnkubGVuZ3RoIDwgdGhpcy5taW5MZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZXJtcyA9IHV0aWxzLnRva2VuaXplUXVlcnkocXVlcnkpO1xuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zID0gdGhpcy5fZ2V0TG9jYWxTdWdnZXN0aW9ucyh0ZXJtcykuc2xpY2UoMCwgdGhpcy5saW1pdCk7XG4gICAgICAgICAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA8IHRoaXMubGltaXQgJiYgdGhpcy50cmFuc3BvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVIaXQgPSB0aGlzLnRyYW5zcG9ydC5nZXQocXVlcnksIHByb2Nlc3NSZW1vdGVEYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIWNhY2hlSGl0ICYmIGNiICYmIGNiKHN1Z2dlc3Rpb25zKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcm9jZXNzUmVtb3RlRGF0YShkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnMuc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxzLmVhY2goZGF0YSwgZnVuY3Rpb24oaSwgZGF0dW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhhdC5fdHJhbnNmb3JtRGF0dW0oZGF0dW0pLCBpc0R1cGxpY2F0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRHVwbGljYXRlID0gdXRpbHMuc29tZShzdWdnZXN0aW9ucywgZnVuY3Rpb24oc3VnZ2VzdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnZhbHVlID09PSBzdWdnZXN0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAhaXNEdXBsaWNhdGUgJiYgc3VnZ2VzdGlvbnMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWdnZXN0aW9ucy5sZW5ndGggPCB0aGF0LmxpbWl0O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY2IgJiYgY2Ioc3VnZ2VzdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBEYXRhc2V0O1xuICAgICAgICBmdW5jdGlvbiBjb21waWxlVGVtcGxhdGUodGVtcGxhdGUsIGVuZ2luZSwgdmFsdWVLZXkpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJGbiwgY29tcGlsZWRUZW1wbGF0ZTtcbiAgICAgICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKHRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIHJlbmRlckZuID0gdGVtcGxhdGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHV0aWxzLmlzU3RyaW5nKHRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIGNvbXBpbGVkVGVtcGxhdGUgPSBlbmdpbmUuY29tcGlsZSh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgcmVuZGVyRm4gPSB1dGlscy5iaW5kKGNvbXBpbGVkVGVtcGxhdGUucmVuZGVyLCBjb21waWxlZFRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRm4gPSBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIjxwPlwiICsgY29udGV4dFt2YWx1ZUtleV0gKyBcIjwvcD5cIjtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlbmRlckZuO1xuICAgICAgICB9XG4gICAgfSgpO1xuICAgIHZhciBJbnB1dFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZnVuY3Rpb24gSW5wdXRWaWV3KG8pIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHV0aWxzLmJpbmRBbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnNwZWNpYWxLZXlDb2RlTWFwID0ge1xuICAgICAgICAgICAgICAgIDk6IFwidGFiXCIsXG4gICAgICAgICAgICAgICAgMjc6IFwiZXNjXCIsXG4gICAgICAgICAgICAgICAgMzc6IFwibGVmdFwiLFxuICAgICAgICAgICAgICAgIDM5OiBcInJpZ2h0XCIsXG4gICAgICAgICAgICAgICAgMTM6IFwiZW50ZXJcIixcbiAgICAgICAgICAgICAgICAzODogXCJ1cFwiLFxuICAgICAgICAgICAgICAgIDQwOiBcImRvd25cIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuJGhpbnQgPSAkKG8uaGludCk7XG4gICAgICAgICAgICB0aGlzLiRpbnB1dCA9ICQoby5pbnB1dCkub24oXCJibHVyLnR0XCIsIHRoaXMuX2hhbmRsZUJsdXIpLm9uKFwiZm9jdXMudHRcIiwgdGhpcy5faGFuZGxlRm9jdXMpLm9uKFwia2V5ZG93bi50dFwiLCB0aGlzLl9oYW5kbGVTcGVjaWFsS2V5RXZlbnQpO1xuICAgICAgICAgICAgaWYgKCF1dGlscy5pc01zaWUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGlucHV0Lm9uKFwiaW5wdXQudHRcIiwgdGhpcy5fY29tcGFyZVF1ZXJ5VG9JbnB1dFZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaW5wdXQub24oXCJrZXlkb3duLnR0IGtleXByZXNzLnR0IGN1dC50dCBwYXN0ZS50dFwiLCBmdW5jdGlvbigkZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5zcGVjaWFsS2V5Q29kZU1hcFskZS53aGljaCB8fCAkZS5rZXlDb2RlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHV0aWxzLmRlZmVyKHRoYXQuX2NvbXBhcmVRdWVyeVRvSW5wdXRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy4kaW5wdXQudmFsKCk7XG4gICAgICAgICAgICB0aGlzLiRvdmVyZmxvd0hlbHBlciA9IGJ1aWxkT3ZlcmZsb3dIZWxwZXIodGhpcy4kaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIHV0aWxzLm1peGluKElucHV0Vmlldy5wcm90b3R5cGUsIEV2ZW50VGFyZ2V0LCB7XG4gICAgICAgICAgICBfaGFuZGxlRm9jdXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcImZvY3VzZWRcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2hhbmRsZUJsdXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcImJsdXJlZFwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGFuZGxlU3BlY2lhbEtleUV2ZW50OiBmdW5jdGlvbigkZSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlOYW1lID0gdGhpcy5zcGVjaWFsS2V5Q29kZU1hcFskZS53aGljaCB8fCAkZS5rZXlDb2RlXTtcbiAgICAgICAgICAgICAgICBrZXlOYW1lICYmIHRoaXMudHJpZ2dlcihrZXlOYW1lICsgXCJLZXllZFwiLCAkZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NvbXBhcmVRdWVyeVRvSW5wdXRWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0VmFsdWUgPSB0aGlzLmdldElucHV0VmFsdWUoKSwgaXNTYW1lUXVlcnkgPSBjb21wYXJlUXVlcmllcyh0aGlzLnF1ZXJ5LCBpbnB1dFZhbHVlKSwgaXNTYW1lUXVlcnlFeGNlcHRXaGl0ZXNwYWNlID0gaXNTYW1lUXVlcnkgPyB0aGlzLnF1ZXJ5Lmxlbmd0aCAhPT0gaW5wdXRWYWx1ZS5sZW5ndGggOiBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNTYW1lUXVlcnlFeGNlcHRXaGl0ZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcIndoaXRlc3BhY2VDaGFuZ2VkXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnF1ZXJ5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzU2FtZVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcInF1ZXJ5Q2hhbmdlZFwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5xdWVyeSA9IGlucHV0VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGhpbnQub2ZmKFwiLnR0XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGlucHV0Lm9mZihcIi50dFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRoaW50ID0gdGhpcy4kaW5wdXQgPSB0aGlzLiRvdmVyZmxvd0hlbHBlciA9IG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9jdXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaW5wdXQuYmx1cigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFF1ZXJ5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVyeTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRRdWVyeTogZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0SW5wdXRWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGlucHV0LnZhbCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldElucHV0VmFsdWU6IGZ1bmN0aW9uKHZhbHVlLCBzaWxlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRpbnB1dC52YWwodmFsdWUpO1xuICAgICAgICAgICAgICAgICFzaWxlbnQgJiYgdGhpcy5fY29tcGFyZVF1ZXJ5VG9JbnB1dFZhbHVlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0SGludFZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kaGludC52YWwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRIaW50VmFsdWU6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaGludC52YWwodmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldExhbmd1YWdlRGlyZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuJGlucHV0LmNzcyhcImRpcmVjdGlvblwiKSB8fCBcImx0clwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzT3ZlcmZsb3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJG92ZXJmbG93SGVscGVyLnRleHQodGhpcy5nZXRJbnB1dFZhbHVlKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRvdmVyZmxvd0hlbHBlci53aWR0aCgpID4gdGhpcy4kaW5wdXQud2lkdGgoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0N1cnNvckF0RW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVMZW5ndGggPSB0aGlzLiRpbnB1dC52YWwoKS5sZW5ndGgsIHNlbGVjdGlvblN0YXJ0ID0gdGhpcy4kaW5wdXRbMF0uc2VsZWN0aW9uU3RhcnQsIHJhbmdlO1xuICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc051bWJlcihzZWxlY3Rpb25TdGFydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGlvblN0YXJ0ID09PSB2YWx1ZUxlbmd0aDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgICAgICAgICAgICAgICAgICByYW5nZS5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIiwgLXZhbHVlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlTGVuZ3RoID09PSByYW5nZS50ZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSW5wdXRWaWV3O1xuICAgICAgICBmdW5jdGlvbiBidWlsZE92ZXJmbG93SGVscGVyKCRpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuICQoXCI8c3Bhbj48L3NwYW4+XCIpLmNzcyh7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICBsZWZ0OiBcIi05OTk5cHhcIixcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBcImhpZGRlblwiLFxuICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCIsXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJGlucHV0LmNzcyhcImZvbnQtZmFtaWx5XCIpLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAkaW5wdXQuY3NzKFwiZm9udC1zaXplXCIpLFxuICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJGlucHV0LmNzcyhcImZvbnQtc3R5bGVcIiksXG4gICAgICAgICAgICAgICAgZm9udFZhcmlhbnQ6ICRpbnB1dC5jc3MoXCJmb250LXZhcmlhbnRcIiksXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodDogJGlucHV0LmNzcyhcImZvbnQtd2VpZ2h0XCIpLFxuICAgICAgICAgICAgICAgIHdvcmRTcGFjaW5nOiAkaW5wdXQuY3NzKFwid29yZC1zcGFjaW5nXCIpLFxuICAgICAgICAgICAgICAgIGxldHRlclNwYWNpbmc6ICRpbnB1dC5jc3MoXCJsZXR0ZXItc3BhY2luZ1wiKSxcbiAgICAgICAgICAgICAgICB0ZXh0SW5kZW50OiAkaW5wdXQuY3NzKFwidGV4dC1pbmRlbnRcIiksXG4gICAgICAgICAgICAgICAgdGV4dFJlbmRlcmluZzogJGlucHV0LmNzcyhcInRleHQtcmVuZGVyaW5nXCIpLFxuICAgICAgICAgICAgICAgIHRleHRUcmFuc2Zvcm06ICRpbnB1dC5jc3MoXCJ0ZXh0LXRyYW5zZm9ybVwiKVxuICAgICAgICAgICAgfSkuaW5zZXJ0QWZ0ZXIoJGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjb21wYXJlUXVlcmllcyhhLCBiKSB7XG4gICAgICAgICAgICBhID0gKGEgfHwgXCJcIikucmVwbGFjZSgvXlxccyovZywgXCJcIikucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIik7XG4gICAgICAgICAgICBiID0gKGIgfHwgXCJcIikucmVwbGFjZSgvXlxccyovZywgXCJcIikucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIik7XG4gICAgICAgICAgICByZXR1cm4gYSA9PT0gYjtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgRHJvcGRvd25WaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0ge1xuICAgICAgICAgICAgc3VnZ2VzdGlvbnNMaXN0OiAnPHNwYW4gY2xhc3M9XCJ0dC1zdWdnZXN0aW9uc1wiPjwvc3Bhbj4nXG4gICAgICAgIH0sIGNzcyA9IHtcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zTGlzdDoge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb246IHtcbiAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiLFxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWdnZXN0aW9uQ2hpbGQ6IHtcbiAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vcm1hbFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIERyb3Bkb3duVmlldyhvKSB7XG4gICAgICAgICAgICB1dGlscy5iaW5kQWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNFbXB0eSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlzTW91c2VPdmVyRHJvcGRvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuJG1lbnUgPSAkKG8ubWVudSkub24oXCJtb3VzZWVudGVyLnR0XCIsIHRoaXMuX2hhbmRsZU1vdXNlZW50ZXIpLm9uKFwibW91c2VsZWF2ZS50dFwiLCB0aGlzLl9oYW5kbGVNb3VzZWxlYXZlKS5vbihcImNsaWNrLnR0XCIsIFwiLnR0LXN1Z2dlc3Rpb25cIiwgdGhpcy5faGFuZGxlU2VsZWN0aW9uKS5vbihcIm1vdXNlb3Zlci50dFwiLCBcIi50dC1zdWdnZXN0aW9uXCIsIHRoaXMuX2hhbmRsZU1vdXNlb3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgdXRpbHMubWl4aW4oRHJvcGRvd25WaWV3LnByb3RvdHlwZSwgRXZlbnRUYXJnZXQsIHtcbiAgICAgICAgICAgIF9oYW5kbGVNb3VzZWVudGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTW91c2VPdmVyRHJvcGRvd24gPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oYW5kbGVNb3VzZWxlYXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTW91c2VPdmVyRHJvcGRvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGFuZGxlTW91c2VvdmVyOiBmdW5jdGlvbigkZSkge1xuICAgICAgICAgICAgICAgIHZhciAkc3VnZ2VzdGlvbiA9ICQoJGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0U3VnZ2VzdGlvbnMoKS5yZW1vdmVDbGFzcyhcInR0LWlzLXVuZGVyLWN1cnNvclwiKTtcbiAgICAgICAgICAgICAgICAkc3VnZ2VzdGlvbi5hZGRDbGFzcyhcInR0LWlzLXVuZGVyLWN1cnNvclwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGFuZGxlU2VsZWN0aW9uOiBmdW5jdGlvbigkZSkge1xuICAgICAgICAgICAgICAgIHZhciAkc3VnZ2VzdGlvbiA9ICQoJGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwic3VnZ2VzdGlvblNlbGVjdGVkXCIsIGV4dHJhY3RTdWdnZXN0aW9uKCRzdWdnZXN0aW9uKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJG1lbnUuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oaWRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRtZW51LmhpZGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbW92ZUN1cnNvcjogZnVuY3Rpb24oaW5jcmVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyICRzdWdnZXN0aW9ucywgJGN1ciwgbmV4dEluZGV4LCAkdW5kZXJDdXJzb3I7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHN1Z2dlc3Rpb25zID0gdGhpcy5fZ2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgICAgICAgICAkY3VyID0gJHN1Z2dlc3Rpb25zLmZpbHRlcihcIi50dC1pcy11bmRlci1jdXJzb3JcIik7XG4gICAgICAgICAgICAgICAgJGN1ci5yZW1vdmVDbGFzcyhcInR0LWlzLXVuZGVyLWN1cnNvclwiKTtcbiAgICAgICAgICAgICAgICBuZXh0SW5kZXggPSAkc3VnZ2VzdGlvbnMuaW5kZXgoJGN1cikgKyBpbmNyZW1lbnQ7XG4gICAgICAgICAgICAgICAgbmV4dEluZGV4ID0gKG5leHRJbmRleCArIDEpICUgKCRzdWdnZXN0aW9ucy5sZW5ndGggKyAxKSAtIDE7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwiY3Vyc29yUmVtb3ZlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV4dEluZGV4IDwgLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEluZGV4ID0gJHN1Z2dlc3Rpb25zLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICR1bmRlckN1cnNvciA9ICRzdWdnZXN0aW9ucy5lcShuZXh0SW5kZXgpLmFkZENsYXNzKFwidHQtaXMtdW5kZXItY3Vyc29yXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vuc3VyZVZpc2liaWxpdHkoJHVuZGVyQ3Vyc29yKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJjdXJzb3JNb3ZlZFwiLCBleHRyYWN0U3VnZ2VzdGlvbigkdW5kZXJDdXJzb3IpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0U3VnZ2VzdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZW51LmZpbmQoXCIudHQtc3VnZ2VzdGlvbnMgPiAudHQtc3VnZ2VzdGlvblwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZW5zdXJlVmlzaWJpbGl0eTogZnVuY3Rpb24oJGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1lbnVIZWlnaHQgPSB0aGlzLiRtZW51LmhlaWdodCgpICsgcGFyc2VJbnQodGhpcy4kbWVudS5jc3MoXCJwYWRkaW5nVG9wXCIpLCAxMCkgKyBwYXJzZUludCh0aGlzLiRtZW51LmNzcyhcInBhZGRpbmdCb3R0b21cIiksIDEwKSwgbWVudVNjcm9sbFRvcCA9IHRoaXMuJG1lbnUuc2Nyb2xsVG9wKCksIGVsVG9wID0gJGVsLnBvc2l0aW9uKCkudG9wLCBlbEJvdHRvbSA9IGVsVG9wICsgJGVsLm91dGVySGVpZ2h0KHRydWUpO1xuICAgICAgICAgICAgICAgIGlmIChlbFRvcCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVudS5zY3JvbGxUb3AobWVudVNjcm9sbFRvcCArIGVsVG9wKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lbnVIZWlnaHQgPCBlbEJvdHRvbSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZW51LnNjcm9sbFRvcChtZW51U2Nyb2xsVG9wICsgKGVsQm90dG9tIC0gbWVudUhlaWdodCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRtZW51Lm9mZihcIi50dFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRtZW51ID0gbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc1Zpc2libGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzT3BlbiAmJiAhdGhpcy5pc0VtcHR5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsb3NlVW5sZXNzTW91c2VJc092ZXJEcm9wZG93bjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTW91c2VPdmVyRHJvcGRvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNNb3VzZU92ZXJEcm9wZG93biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lbnUuZmluZChcIi50dC1zdWdnZXN0aW9ucyA+IC50dC1zdWdnZXN0aW9uXCIpLnJlbW92ZUNsYXNzKFwidHQtaXMtdW5kZXItY3Vyc29yXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJjbG9zZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAhdGhpcy5pc0VtcHR5ICYmIHRoaXMuX3Nob3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwib3BlbmVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRMYW5ndWFnZURpcmVjdGlvbjogZnVuY3Rpb24oZGlyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGx0ckNzcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogXCIwXCIsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBcImF1dG9cIlxuICAgICAgICAgICAgICAgIH0sIHJ0bENzcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBcIiAwXCJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRpciA9PT0gXCJsdHJcIiA/IHRoaXMuJG1lbnUuY3NzKGx0ckNzcykgOiB0aGlzLiRtZW51LmNzcyhydGxDc3MpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vdmVDdXJzb3JVcDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92ZUN1cnNvcigtMSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbW92ZUN1cnNvckRvd246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmVDdXJzb3IoKzEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFN1Z2dlc3Rpb25VbmRlckN1cnNvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzdWdnZXN0aW9uID0gdGhpcy5fZ2V0U3VnZ2VzdGlvbnMoKS5maWx0ZXIoXCIudHQtaXMtdW5kZXItY3Vyc29yXCIpLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzdWdnZXN0aW9uLmxlbmd0aCA+IDAgPyBleHRyYWN0U3VnZ2VzdGlvbigkc3VnZ2VzdGlvbikgOiBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEZpcnN0U3VnZ2VzdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzdWdnZXN0aW9uID0gdGhpcy5fZ2V0U3VnZ2VzdGlvbnMoKS5maXJzdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiAkc3VnZ2VzdGlvbi5sZW5ndGggPiAwID8gZXh0cmFjdFN1Z2dlc3Rpb24oJHN1Z2dlc3Rpb24pIDogbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW5kZXJTdWdnZXN0aW9uczogZnVuY3Rpb24oZGF0YXNldCwgc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YXNldENsYXNzTmFtZSA9IFwidHQtZGF0YXNldC1cIiArIGRhdGFzZXQubmFtZSwgd3JhcHBlciA9ICc8ZGl2IGNsYXNzPVwidHQtc3VnZ2VzdGlvblwiPiVib2R5PC9kaXY+JywgY29tcGlsZWRIdG1sLCAkc3VnZ2VzdGlvbnNMaXN0LCAkZGF0YXNldCA9IHRoaXMuJG1lbnUuZmluZChcIi5cIiArIGRhdGFzZXRDbGFzc05hbWUpLCBlbEJ1aWxkZXIsIGZyYWdtZW50LCAkZWw7XG4gICAgICAgICAgICAgICAgaWYgKCRkYXRhc2V0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkc3VnZ2VzdGlvbnNMaXN0ID0gJChodG1sLnN1Z2dlc3Rpb25zTGlzdCkuY3NzKGNzcy5zdWdnZXN0aW9uc0xpc3QpO1xuICAgICAgICAgICAgICAgICAgICAkZGF0YXNldCA9ICQoXCI8ZGl2PjwvZGl2PlwiKS5hZGRDbGFzcyhkYXRhc2V0Q2xhc3NOYW1lKS5hcHBlbmQoZGF0YXNldC5oZWFkZXIpLmFwcGVuZCgkc3VnZ2VzdGlvbnNMaXN0KS5hcHBlbmQoZGF0YXNldC5mb290ZXIpLmFwcGVuZFRvKHRoaXMuJG1lbnUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wZW4gJiYgdGhpcy5fc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBlbEJ1aWxkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMuZWFjaChzdWdnZXN0aW9ucywgZnVuY3Rpb24oaSwgc3VnZ2VzdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbi5kYXRhc2V0ID0gZGF0YXNldC5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsZWRIdG1sID0gZGF0YXNldC50ZW1wbGF0ZShzdWdnZXN0aW9uLmRhdHVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsQnVpbGRlci5pbm5lckhUTUwgPSB3cmFwcGVyLnJlcGxhY2UoXCIlYm9keVwiLCBjb21waWxlZEh0bWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGVsID0gJChlbEJ1aWxkZXIuZmlyc3RDaGlsZCkuY3NzKGNzcy5zdWdnZXN0aW9uKS5kYXRhKFwic3VnZ2VzdGlvblwiLCBzdWdnZXN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoY3NzLnN1Z2dlc3Rpb25DaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKCRlbFswXSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkZGF0YXNldC5zaG93KCkuZmluZChcIi50dC1zdWdnZXN0aW9uc1wiKS5odG1sKGZyYWdtZW50KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU3VnZ2VzdGlvbnMoZGF0YXNldC5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwic3VnZ2VzdGlvbnNSZW5kZXJlZFwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhclN1Z2dlc3Rpb25zOiBmdW5jdGlvbihkYXRhc2V0TmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciAkZGF0YXNldHMgPSBkYXRhc2V0TmFtZSA/IHRoaXMuJG1lbnUuZmluZChcIi50dC1kYXRhc2V0LVwiICsgZGF0YXNldE5hbWUpIDogdGhpcy4kbWVudS5maW5kKCdbY2xhc3NePVwidHQtZGF0YXNldC1cIl0nKSwgJHN1Z2dlc3Rpb25zID0gJGRhdGFzZXRzLmZpbmQoXCIudHQtc3VnZ2VzdGlvbnNcIik7XG4gICAgICAgICAgICAgICAgJGRhdGFzZXRzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkc3VnZ2VzdGlvbnMuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZ2V0U3VnZ2VzdGlvbnMoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0VtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBEcm9wZG93blZpZXc7XG4gICAgICAgIGZ1bmN0aW9uIGV4dHJhY3RTdWdnZXN0aW9uKCRlbCkge1xuICAgICAgICAgICAgcmV0dXJuICRlbC5kYXRhKFwic3VnZ2VzdGlvblwiKTtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgVHlwZWFoZWFkVmlldyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IHtcbiAgICAgICAgICAgIHdyYXBwZXI6ICc8c3BhbiBjbGFzcz1cInR3aXR0ZXItdHlwZWFoZWFkXCI+PC9zcGFuPicsXG4gICAgICAgICAgICBoaW50OiAnPGlucHV0IGNsYXNzPVwidHQtaGludFwiIHR5cGU9XCJ0ZXh0XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgc3BlbGxjaGVjaz1cIm9mZlwiIGRpc2FibGVkPicsXG4gICAgICAgICAgICBkcm9wZG93bjogJzxzcGFuIGNsYXNzPVwidHQtZHJvcGRvd24tbWVudVwiPjwvc3Bhbj4nXG4gICAgICAgIH0sIGNzcyA9IHtcbiAgICAgICAgICAgIHdyYXBwZXI6IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoaW50OiB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICB0b3A6IFwiMFwiLFxuICAgICAgICAgICAgICAgIGxlZnQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBcInRyYW5zcGFyZW50XCIsXG4gICAgICAgICAgICAgICAgYm94U2hhZG93OiBcIm5vbmVcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcInRvcFwiLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZHJvcGRvd246IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgICAgIHRvcDogXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgbGVmdDogXCIwXCIsXG4gICAgICAgICAgICAgICAgekluZGV4OiBcIjEwMFwiLFxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh1dGlscy5pc01zaWUoKSkge1xuICAgICAgICAgICAgdXRpbHMubWl4aW4oY3NzLnF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcInVybChkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQTcpXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1dGlscy5pc01zaWUoKSAmJiB1dGlscy5pc01zaWUoKSA8PSA3KSB7XG4gICAgICAgICAgICB1dGlscy5taXhpbihjc3Mud3JhcHBlciwge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiaW5saW5lXCIsXG4gICAgICAgICAgICAgICAgem9vbTogXCIxXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXRpbHMubWl4aW4oY3NzLnF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luVG9wOiBcIi0xcHhcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gVHlwZWFoZWFkVmlldyhvKSB7XG4gICAgICAgICAgICB2YXIgJG1lbnUsICRpbnB1dCwgJGhpbnQ7XG4gICAgICAgICAgICB1dGlscy5iaW5kQWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy4kbm9kZSA9IGJ1aWxkRG9tU3RydWN0dXJlKG8uaW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5kYXRhc2V0cyA9IG8uZGF0YXNldHM7XG4gICAgICAgICAgICB0aGlzLmRpciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmV2ZW50QnVzID0gby5ldmVudEJ1cztcbiAgICAgICAgICAgICRtZW51ID0gdGhpcy4kbm9kZS5maW5kKFwiLnR0LWRyb3Bkb3duLW1lbnVcIik7XG4gICAgICAgICAgICAkaW5wdXQgPSB0aGlzLiRub2RlLmZpbmQoXCIudHQtcXVlcnlcIik7XG4gICAgICAgICAgICAkaGludCA9IHRoaXMuJG5vZGUuZmluZChcIi50dC1oaW50XCIpO1xuICAgICAgICAgICAgdGhpcy5kcm9wZG93blZpZXcgPSBuZXcgRHJvcGRvd25WaWV3KHtcbiAgICAgICAgICAgICAgICBtZW51OiAkbWVudVxuICAgICAgICAgICAgfSkub24oXCJzdWdnZXN0aW9uU2VsZWN0ZWRcIiwgdGhpcy5faGFuZGxlU2VsZWN0aW9uKS5vbihcImN1cnNvck1vdmVkXCIsIHRoaXMuX2NsZWFySGludCkub24oXCJjdXJzb3JNb3ZlZFwiLCB0aGlzLl9zZXRJbnB1dFZhbHVlVG9TdWdnZXN0aW9uVW5kZXJDdXJzb3IpLm9uKFwiY3Vyc29yUmVtb3ZlZFwiLCB0aGlzLl9zZXRJbnB1dFZhbHVlVG9RdWVyeSkub24oXCJjdXJzb3JSZW1vdmVkXCIsIHRoaXMuX3VwZGF0ZUhpbnQpLm9uKFwic3VnZ2VzdGlvbnNSZW5kZXJlZFwiLCB0aGlzLl91cGRhdGVIaW50KS5vbihcIm9wZW5lZFwiLCB0aGlzLl91cGRhdGVIaW50KS5vbihcImNsb3NlZFwiLCB0aGlzLl9jbGVhckhpbnQpLm9uKFwib3BlbmVkIGNsb3NlZFwiLCB0aGlzLl9wcm9wYWdhdGVFdmVudCk7XG4gICAgICAgICAgICB0aGlzLmlucHV0VmlldyA9IG5ldyBJbnB1dFZpZXcoe1xuICAgICAgICAgICAgICAgIGlucHV0OiAkaW5wdXQsXG4gICAgICAgICAgICAgICAgaGludDogJGhpbnRcbiAgICAgICAgICAgIH0pLm9uKFwiZm9jdXNlZFwiLCB0aGlzLl9vcGVuRHJvcGRvd24pLm9uKFwiYmx1cmVkXCIsIHRoaXMuX2Nsb3NlRHJvcGRvd24pLm9uKFwiYmx1cmVkXCIsIHRoaXMuX3NldElucHV0VmFsdWVUb1F1ZXJ5KS5vbihcImVudGVyS2V5ZWQgdGFiS2V5ZWRcIiwgdGhpcy5faGFuZGxlU2VsZWN0aW9uKS5vbihcInF1ZXJ5Q2hhbmdlZFwiLCB0aGlzLl9jbGVhckhpbnQpLm9uKFwicXVlcnlDaGFuZ2VkXCIsIHRoaXMuX2NsZWFyU3VnZ2VzdGlvbnMpLm9uKFwicXVlcnlDaGFuZ2VkXCIsIHRoaXMuX2dldFN1Z2dlc3Rpb25zKS5vbihcIndoaXRlc3BhY2VDaGFuZ2VkXCIsIHRoaXMuX3VwZGF0ZUhpbnQpLm9uKFwicXVlcnlDaGFuZ2VkIHdoaXRlc3BhY2VDaGFuZ2VkXCIsIHRoaXMuX29wZW5Ecm9wZG93bikub24oXCJxdWVyeUNoYW5nZWQgd2hpdGVzcGFjZUNoYW5nZWRcIiwgdGhpcy5fc2V0TGFuZ3VhZ2VEaXJlY3Rpb24pLm9uKFwiZXNjS2V5ZWRcIiwgdGhpcy5fY2xvc2VEcm9wZG93bikub24oXCJlc2NLZXllZFwiLCB0aGlzLl9zZXRJbnB1dFZhbHVlVG9RdWVyeSkub24oXCJ0YWJLZXllZCB1cEtleWVkIGRvd25LZXllZFwiLCB0aGlzLl9tYW5hZ2VQcmV2ZW50RGVmYXVsdCkub24oXCJ1cEtleWVkIGRvd25LZXllZFwiLCB0aGlzLl9tb3ZlRHJvcGRvd25DdXJzb3IpLm9uKFwidXBLZXllZCBkb3duS2V5ZWRcIiwgdGhpcy5fb3BlbkRyb3Bkb3duKS5vbihcInRhYktleWVkIGxlZnRLZXllZCByaWdodEtleWVkXCIsIHRoaXMuX2F1dG9jb21wbGV0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdXRpbHMubWl4aW4oVHlwZWFoZWFkVmlldy5wcm90b3R5cGUsIEV2ZW50VGFyZ2V0LCB7XG4gICAgICAgICAgICBfbWFuYWdlUHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGUgPSBlLmRhdGEsIGhpbnQsIGlucHV0VmFsdWUsIHByZXZlbnREZWZhdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0YWJLZXllZFwiOlxuICAgICAgICAgICAgICAgICAgICBoaW50ID0gdGhpcy5pbnB1dFZpZXcuZ2V0SGludFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWUgPSB0aGlzLmlucHV0Vmlldy5nZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gaGludCAmJiBoaW50ICE9PSBpbnB1dFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgY2FzZSBcInVwS2V5ZWRcIjpcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJkb3duS2V5ZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSAhJGUuc2hpZnRLZXkgJiYgISRlLmN0cmxLZXkgJiYgISRlLm1ldGFLZXk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRMYW5ndWFnZURpcmVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpciA9IHRoaXMuaW5wdXRWaWV3LmdldExhbmd1YWdlRGlyZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRpciAhPT0gdGhpcy5kaXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXIgPSBkaXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUuY3NzKFwiZGlyZWN0aW9uXCIsIGRpcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJvcGRvd25WaWV3LnNldExhbmd1YWdlRGlyZWN0aW9uKGRpcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF91cGRhdGVIaW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VnZ2VzdGlvbiA9IHRoaXMuZHJvcGRvd25WaWV3LmdldEZpcnN0U3VnZ2VzdGlvbigpLCBoaW50ID0gc3VnZ2VzdGlvbiA/IHN1Z2dlc3Rpb24udmFsdWUgOiBudWxsLCBkcm9wZG93bklzVmlzaWJsZSA9IHRoaXMuZHJvcGRvd25WaWV3LmlzVmlzaWJsZSgpLCBpbnB1dEhhc092ZXJmbG93ID0gdGhpcy5pbnB1dFZpZXcuaXNPdmVyZmxvdygpLCBpbnB1dFZhbHVlLCBxdWVyeSwgZXNjYXBlZFF1ZXJ5LCBiZWdpbnNXaXRoUXVlcnksIG1hdGNoO1xuICAgICAgICAgICAgICAgIGlmIChoaW50ICYmIGRyb3Bkb3duSXNWaXNpYmxlICYmICFpbnB1dEhhc092ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWUgPSB0aGlzLmlucHV0Vmlldy5nZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gaW5wdXRWYWx1ZS5yZXBsYWNlKC9cXHN7Mix9L2csIFwiIFwiKS5yZXBsYWNlKC9eXFxzKy9nLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlZFF1ZXJ5ID0gdXRpbHMuZXNjYXBlUmVnRXhDaGFycyhxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIGJlZ2luc1dpdGhRdWVyeSA9IG5ldyBSZWdFeHAoXCJeKD86XCIgKyBlc2NhcGVkUXVlcnkgKyBcIikoLiokKVwiLCBcImlcIik7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoID0gYmVnaW5zV2l0aFF1ZXJ5LmV4ZWMoaGludCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRWaWV3LnNldEhpbnRWYWx1ZShpbnB1dFZhbHVlICsgKG1hdGNoID8gbWF0Y2hbMV0gOiBcIlwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jbGVhckhpbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRWaWV3LnNldEhpbnRWYWx1ZShcIlwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2xlYXJTdWdnZXN0aW9uczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wZG93blZpZXcuY2xlYXJTdWdnZXN0aW9ucygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRJbnB1dFZhbHVlVG9RdWVyeTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFZpZXcuc2V0SW5wdXRWYWx1ZSh0aGlzLmlucHV0Vmlldy5nZXRRdWVyeSgpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SW5wdXRWYWx1ZVRvU3VnZ2VzdGlvblVuZGVyQ3Vyc29yOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1Z2dlc3Rpb24gPSBlLmRhdGE7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFZpZXcuc2V0SW5wdXRWYWx1ZShzdWdnZXN0aW9uLnZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb3BlbkRyb3Bkb3duOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duVmlldy5vcGVuKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Nsb3NlRHJvcGRvd246IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duVmlld1tlLnR5cGUgPT09IFwiYmx1cmVkXCIgPyBcImNsb3NlVW5sZXNzTW91c2VJc092ZXJEcm9wZG93blwiIDogXCJjbG9zZVwiXSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tb3ZlRHJvcGRvd25DdXJzb3I6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGUgPSBlLmRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKCEkZS5zaGlmdEtleSAmJiAhJGUuY3RybEtleSAmJiAhJGUubWV0YUtleSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duVmlld1tlLnR5cGUgPT09IFwidXBLZXllZFwiID8gXCJtb3ZlQ3Vyc29yVXBcIiA6IFwibW92ZUN1cnNvckRvd25cIl0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2hhbmRsZVNlbGVjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHZhciBieUNsaWNrID0gZS50eXBlID09PSBcInN1Z2dlc3Rpb25TZWxlY3RlZFwiLCBzdWdnZXN0aW9uID0gYnlDbGljayA/IGUuZGF0YSA6IHRoaXMuZHJvcGRvd25WaWV3LmdldFN1Z2dlc3Rpb25VbmRlckN1cnNvcigpO1xuICAgICAgICAgICAgICAgIGlmIChzdWdnZXN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRWaWV3LnNldElucHV0VmFsdWUoc3VnZ2VzdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ5Q2xpY2sgPyB0aGlzLmlucHV0Vmlldy5mb2N1cygpIDogZS5kYXRhLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJ5Q2xpY2sgJiYgdXRpbHMuaXNNc2llKCkgPyB1dGlscy5kZWZlcih0aGlzLmRyb3Bkb3duVmlldy5jbG9zZSkgOiB0aGlzLmRyb3Bkb3duVmlldy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJzZWxlY3RlZFwiLCBzdWdnZXN0aW9uLmRhdHVtLCBzdWdnZXN0aW9uLmRhdGFzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0U3VnZ2VzdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgcXVlcnkgPSB0aGlzLmlucHV0Vmlldy5nZXRRdWVyeSgpO1xuICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0JsYW5rU3RyaW5nKHF1ZXJ5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHV0aWxzLmVhY2godGhpcy5kYXRhc2V0cywgZnVuY3Rpb24oaSwgZGF0YXNldCkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0LmdldFN1Z2dlc3Rpb25zKHF1ZXJ5LCBmdW5jdGlvbihzdWdnZXN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5ID09PSB0aGF0LmlucHV0Vmlldy5nZXRRdWVyeSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5kcm9wZG93blZpZXcucmVuZGVyU3VnZ2VzdGlvbnMoZGF0YXNldCwgc3VnZ2VzdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYXV0b2NvbXBsZXRlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzQ3Vyc29yQXRFbmQsIGlnbm9yZUV2ZW50LCBxdWVyeSwgaGludCwgc3VnZ2VzdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAoZS50eXBlID09PSBcInJpZ2h0S2V5ZWRcIiB8fCBlLnR5cGUgPT09IFwibGVmdEtleWVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNDdXJzb3JBdEVuZCA9IHRoaXMuaW5wdXRWaWV3LmlzQ3Vyc29yQXRFbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlRXZlbnQgPSB0aGlzLmlucHV0Vmlldy5nZXRMYW5ndWFnZURpcmVjdGlvbigpID09PSBcImx0clwiID8gZS50eXBlID09PSBcImxlZnRLZXllZFwiIDogZS50eXBlID09PSBcInJpZ2h0S2V5ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0N1cnNvckF0RW5kIHx8IGlnbm9yZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcXVlcnkgPSB0aGlzLmlucHV0Vmlldy5nZXRRdWVyeSgpO1xuICAgICAgICAgICAgICAgIGhpbnQgPSB0aGlzLmlucHV0Vmlldy5nZXRIaW50VmFsdWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoaGludCAhPT0gXCJcIiAmJiBxdWVyeSAhPT0gaGludCkge1xuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gdGhpcy5kcm9wZG93blZpZXcuZ2V0Rmlyc3RTdWdnZXN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRWaWV3LnNldElucHV0VmFsdWUoc3VnZ2VzdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcImF1dG9jb21wbGV0ZWRcIiwgc3VnZ2VzdGlvbi5kYXR1bSwgc3VnZ2VzdGlvbi5kYXRhc2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Byb3BhZ2F0ZUV2ZW50OiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKGUudHlwZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFZpZXcuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJvcGRvd25WaWV3LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBkZXN0cm95RG9tU3RydWN0dXJlKHRoaXMuJG5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUgPSBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFF1ZXJ5OiBmdW5jdGlvbihxdWVyeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRWaWV3LnNldFF1ZXJ5KHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0Vmlldy5zZXRJbnB1dFZhbHVlKHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGVhckhpbnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGVhclN1Z2dlc3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBUeXBlYWhlYWRWaWV3O1xuICAgICAgICBmdW5jdGlvbiBidWlsZERvbVN0cnVjdHVyZShpbnB1dCkge1xuICAgICAgICAgICAgdmFyICR3cmFwcGVyID0gJChodG1sLndyYXBwZXIpLCAkZHJvcGRvd24gPSAkKGh0bWwuZHJvcGRvd24pLCAkaW5wdXQgPSAkKGlucHV0KSwgJGhpbnQgPSAkKGh0bWwuaGludCk7XG4gICAgICAgICAgICAkd3JhcHBlciA9ICR3cmFwcGVyLmNzcyhjc3Mud3JhcHBlcik7XG4gICAgICAgICAgICAkZHJvcGRvd24gPSAkZHJvcGRvd24uY3NzKGNzcy5kcm9wZG93bik7XG4gICAgICAgICAgICAkaGludC5jc3MoY3NzLmhpbnQpLmNzcyh7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZEF0dGFjaG1lbnQ6ICRpbnB1dC5jc3MoXCJiYWNrZ3JvdW5kLWF0dGFjaG1lbnRcIiksXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENsaXA6ICRpbnB1dC5jc3MoXCJiYWNrZ3JvdW5kLWNsaXBcIiksXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAkaW5wdXQuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiKSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6ICRpbnB1dC5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIpLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRPcmlnaW46ICRpbnB1dC5jc3MoXCJiYWNrZ3JvdW5kLW9yaWdpblwiKSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICRpbnB1dC5jc3MoXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIpLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICRpbnB1dC5jc3MoXCJiYWNrZ3JvdW5kLXJlcGVhdFwiKSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJGlucHV0LmNzcyhcImJhY2tncm91bmQtc2l6ZVwiKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkaW5wdXQuZGF0YShcInR0QXR0cnNcIiwge1xuICAgICAgICAgICAgICAgIGRpcjogJGlucHV0LmF0dHIoXCJkaXJcIiksXG4gICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiAkaW5wdXQuYXR0cihcImF1dG9jb21wbGV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzcGVsbGNoZWNrOiAkaW5wdXQuYXR0cihcInNwZWxsY2hlY2tcIiksXG4gICAgICAgICAgICAgICAgc3R5bGU6ICRpbnB1dC5hdHRyKFwic3R5bGVcIilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGlucHV0LmFkZENsYXNzKFwidHQtcXVlcnlcIikuYXR0cih7XG4gICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiBcIm9mZlwiLFxuICAgICAgICAgICAgICAgIHNwZWxsY2hlY2s6IGZhbHNlXG4gICAgICAgICAgICB9KS5jc3MoY3NzLnF1ZXJ5KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgISRpbnB1dC5hdHRyKFwiZGlyXCIpICYmICRpbnB1dC5hdHRyKFwiZGlyXCIsIFwiYXV0b1wiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICByZXR1cm4gJGlucHV0LndyYXAoJHdyYXBwZXIpLnBhcmVudCgpLnByZXBlbmQoJGhpbnQpLmFwcGVuZCgkZHJvcGRvd24pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lEb21TdHJ1Y3R1cmUoJG5vZGUpIHtcbiAgICAgICAgICAgIHZhciAkaW5wdXQgPSAkbm9kZS5maW5kKFwiLnR0LXF1ZXJ5XCIpO1xuICAgICAgICAgICAgdXRpbHMuZWFjaCgkaW5wdXQuZGF0YShcInR0QXR0cnNcIiksIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgdXRpbHMuaXNVbmRlZmluZWQodmFsKSA/ICRpbnB1dC5yZW1vdmVBdHRyKGtleSkgOiAkaW5wdXQuYXR0cihrZXksIHZhbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRpbnB1dC5kZXRhY2goKS5yZW1vdmVEYXRhKFwidHRBdHRyc1wiKS5yZW1vdmVDbGFzcyhcInR0LXF1ZXJ5XCIpLmluc2VydEFmdGVyKCRub2RlKTtcbiAgICAgICAgICAgICRub2RlLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfSgpO1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNhY2hlID0ge30sIHZpZXdLZXkgPSBcInR0Vmlld1wiLCBtZXRob2RzO1xuICAgICAgICBtZXRob2RzID0ge1xuICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZGF0YXNldERlZnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YXNldHM7XG4gICAgICAgICAgICAgICAgZGF0YXNldERlZnMgPSB1dGlscy5pc0FycmF5KGRhdGFzZXREZWZzKSA/IGRhdGFzZXREZWZzIDogWyBkYXRhc2V0RGVmcyBdO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhc2V0RGVmcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJC5lcnJvcihcIm5vIGRhdGFzZXRzIHByb3ZpZGVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhc2V0cyA9IHV0aWxzLm1hcChkYXRhc2V0RGVmcywgZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YXNldCA9IGNhY2hlW28ubmFtZV0gPyBjYWNoZVtvLm5hbWVdIDogbmV3IERhdGFzZXQobyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW28ubmFtZV0gPSBkYXRhc2V0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhc2V0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goaW5pdGlhbGl6ZSk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyksIGRlZmVycmVkcywgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZWw6ICRpbnB1dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWRzID0gdXRpbHMubWFwKGRhdGFzZXRzLCBmdW5jdGlvbihkYXRhc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXNldC5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkaW5wdXQuZGF0YSh2aWV3S2V5LCBuZXcgVHlwZWFoZWFkVmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogJGlucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRCdXM6IGV2ZW50QnVzID0gbmV3IEV2ZW50QnVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbDogJGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXRzOiBkYXRhc2V0c1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICQud2hlbi5hcHBseSgkLCBkZWZlcnJlZHMpLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QnVzLnRyaWdnZXIoXCJpbml0aWFsaXplZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChkZXN0cm95KTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLCB2aWV3ID0gJHRoaXMuZGF0YSh2aWV3S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlRGF0YSh2aWV3S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRRdWVyeTogZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKHNldFF1ZXJ5KTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRRdWVyeSgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXcgPSAkKHRoaXMpLmRhdGEodmlld0tleSk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcgJiYgdmlldy5zZXRRdWVyeShxdWVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBqUXVlcnkuZm4udHlwZWFoZWFkID0gZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgICBpZiAobWV0aG9kc1ttZXRob2RdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSkoKTtcbn0pKHdpbmRvdy5qUXVlcnkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==